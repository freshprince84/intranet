/// <reference types="node" />

import { PrismaClient } from '@prisma/client';
import slugify from 'slugify';

const prisma = new PrismaClient();

const content = "# Gu√≠a Completa del Usuario - Planificador de Turnos\r\n\r\n## üìã √çndice\r\n\r\n1. [Introducci√≥n](#introducci√≥n)\r\n2. [Roles y Responsabilidades](#roles-y-responsabilidades)\r\n3. [Navegaci√≥n](#navegaci√≥n)\r\n4. [Configuraci√≥n Inicial](#configuraci√≥n-inicial)\r\n5. [Gesti√≥n de Plantillas de Turnos](#gesti√≥n-de-plantillas-de-turnos)\r\n6. [Gesti√≥n de Disponibilidades](#gesti√≥n-de-disponibilidades)\r\n7. [Creaci√≥n de Turnos](#creaci√≥n-de-turnos)\r\n8. [Gesti√≥n de Turnos](#gesti√≥n-de-turnos)\r\n9. [Intercambio de Turnos](#intercambio-de-turnos)\r\n10. [Filtros y B√∫squeda](#filtros-y-b√∫squeda)\r\n11. [Resoluci√≥n de Problemas](#resoluci√≥n-de-problemas)\r\n12. [Preguntas Frecuentes](#preguntas-frecuentes)\r\n\r\n---\r\n\r\n## Introducci√≥n\r\n\r\nEl Planificador de Turnos es una herramienta completa para gestionar los horarios de trabajo de los empleados. Permite crear turnos, asignarlos a empleados, gestionar disponibilidades y facilitar el intercambio de turnos entre empleados.\r\n\r\n**Ubicaci√≥n:** Centro de Trabajo ‚Üí Tab \"Plan de Turno\"\r\n\r\n---\r\n\r\n## Roles y Responsabilidades\r\n\r\n### üë®‚Äçüíº Administrador / Planificador de Turnos\r\n\r\n**Puede:**\r\n- Crear y gestionar plantillas de turnos\r\n- Generar planes de turnos autom√°ticamente\r\n- Crear turnos manualmente\r\n- Asignar turnos a empleados\r\n- Gestionar disponibilidades (opcional, para otros usuarios)\r\n- Ver y gestionar todas las solicitudes de intercambio\r\n\r\n**Debe:**\r\n- Crear plantillas antes de generar turnos\r\n- Asignar turnos despu√©s de la generaci√≥n autom√°tica\r\n- Revisar y aprobar/rechazar solicitudes de intercambio (si es necesario)\r\n\r\n---\r\n\r\n### üë§ Empleado (Usuario)\r\n\r\n**Puede:**\r\n- Definir sus propias disponibilidades\r\n- Confirmar turnos asignados\r\n- Crear solicitudes de intercambio de turnos\r\n- Responder a solicitudes de intercambio recibidas\r\n- Ver sus propios turnos en el calendario\r\n\r\n**Debe:**\r\n- Mantener sus disponibilidades actualizadas\r\n- Confirmar turnos asignados a tiempo\r\n- Responder a solicitudes de intercambio a tiempo\r\n- Cancelar turnos con suficiente antelaci√≥n\r\n\r\n---\r\n\r\n## Navegaci√≥n\r\n\r\n### C√≥mo acceder al Planificador de Turnos\r\n\r\n1. **Men√∫ Principal** (lado izquierdo)\r\n   - Buscar y hacer clic en **\"Centro de Trabajo\"** (Team Worktime Control)\r\n\r\n2. **Tabs** (parte superior de la p√°gina)\r\n   - Hacer clic en el tab **\"Plan de Turno\"** (entre \"Tiempo de trabajo y actividades\" y \"Evaluaciones de tarea\")\r\n\r\n3. **Calendario de Turnos**\r\n   - Se mostrar√° el calendario con los turnos de la semana actual\r\n\r\n---\r\n\r\n## Configuraci√≥n Inicial\r\n\r\n### ‚ö†Ô∏è IMPORTANTE: Antes de empezar\r\n\r\nPara que el Planificador de Turnos funcione correctamente, se deben cumplir los siguientes requisitos:\r\n\r\n1. **Sucursales** deben existir en el sistema\r\n2. **Roles** deben existir en el sistema\r\n3. **Usuarios/Empleados** deben existir en el sistema\r\n4. **Plantillas de Turnos** deben crearse (ver secci√≥n siguiente)\r\n5. **Disponibilidades** pueden crearse (opcional, pero recomendado)\r\n\r\n---\r\n\r\n## Gesti√≥n de Plantillas de Turnos\r\n\r\n### ¬øQu√© son las Plantillas de Turnos?\r\n\r\nLas plantillas definen qu√© tipos de turnos puede tener un rol en un d√≠a. Por ejemplo:\r\n- \"Turno Matutino\" (08:00-16:00)\r\n- \"Turno Vespertino\" (16:00-00:00)\r\n- \"Turno Nocturno\" (00:00-08:00)\r\n\r\n**‚ö†Ô∏è CR√çTICO:** Sin plantillas, la generaci√≥n autom√°tica crear√° **0 turnos**.\r\n\r\n---\r\n\r\n### Crear una Plantilla de Turno (Administrador)\r\n\r\n**Ubicaci√≥n:**\r\n- Tab \"Plan de Turno\" ‚Üí Bot√≥n **\"Plantillas de Turnos\"** (icono de documento, parte superior derecha)\r\n\r\n**Pasos:**\r\n\r\n1. **Abrir Gesti√≥n de Plantillas**\r\n   - En el header superior derecho, hacer clic en el bot√≥n **\"Plantillas de Turnos\"** (icono de documento)\r\n   - Se abrir√° un panel lateral (Desktop) o modal (Mobile)\r\n\r\n2. **Crear Nueva Plantilla**\r\n   - Hacer clic en el icono **\"+\"** (arriba a la derecha del panel/modal)\r\n   - Se abrir√° el formulario\r\n\r\n3. **Completar Formulario**\r\n   - **Nombre:** Ingresar un nombre descriptivo (ej: \"Turno Matutino\", \"Turno Vespertino\")\r\n   - **Sucursal:** Seleccionar del men√∫ desplegable (debe coincidir con la sucursal para la que se generar√°n turnos)\r\n   - **Rol:** Seleccionar del men√∫ desplegable (debe coincidir con el rol para el que se generar√°n turnos)\r\n   - **Hora de Inicio:** Ingresar en formato HH:mm (ej: \"08:00\", \"16:00\")\r\n   - **Hora de Fin:** Ingresar en formato HH:mm (ej: \"16:00\", \"00:00\")\r\n   - **Duraci√≥n:** Opcional (se calcula autom√°ticamente)\r\n   - **Activo:** ‚úÖ Dejar marcado (solo las plantillas activas se usan en la generaci√≥n)\r\n\r\n4. **Guardar**\r\n   - Hacer clic en el bot√≥n **\"Guardar\"** (abajo del formulario)\r\n   - La plantilla aparecer√° en la lista\r\n\r\n**Ejemplo:**\r\n- Nombre: \"Turno Matutino\"\r\n- Sucursal: \"Z√∫rich\"\r\n- Rol: \"Camarero\"\r\n- Hora de Inicio: \"08:00\"\r\n- Hora de Fin: \"16:00\"\r\n- Activo: ‚úÖ\r\n\r\n---\r\n\r\n### Editar una Plantilla (Administrador)\r\n\r\n1. Tab \"Plan de Turno\" ‚Üí Bot√≥n \"Plantillas de Turnos\"\r\n2. En la lista, hacer clic en el bot√≥n **\"Editar\"** (icono de l√°piz, a la derecha de la plantilla)\r\n3. Modificar los campos necesarios\r\n4. **Nota:** Sucursal y Rol no se pueden cambiar al editar (aparecen deshabilitados)\r\n5. Hacer clic en **\"Guardar\"**\r\n\r\n---\r\n\r\n### Eliminar una Plantilla (Administrador)\r\n\r\n1. Tab \"Plan de Turno\" ‚Üí Bot√≥n \"Plantillas de Turnos\"\r\n2. En la lista, hacer clic en el bot√≥n **\"Eliminar\"** (icono de papelera, a la derecha de la plantilla)\r\n3. Confirmar en el di√°logo: \"¬øRealmente desea eliminar esta plantilla?\"\r\n4. Hacer clic en **\"OK\"**\r\n\r\n**‚ö†Ô∏è ADVERTENCIA:** Las plantillas eliminadas no se pueden recuperar.\r\n\r\n---\r\n\r\n### Desactivar una Plantilla (Administrador)\r\n\r\n1. Editar la plantilla\r\n2. Desmarcar la casilla **\"Activo\"**\r\n3. Guardar\r\n\r\n**Uso:** Para archivar plantillas temporalmente sin eliminarlas (ej: durante renovaciones).\r\n\r\n---\r\n\r\n## Gesti√≥n de Disponibilidades\r\n\r\n### ¬øQu√© son las Disponibilidades?\r\n\r\nLas disponibilidades definen cu√°ndo un empleado est√° disponible para trabajar. Se utilizan en la generaci√≥n autom√°tica para asignar turnos a los empleados correctos.\r\n\r\n**Tipos de Disponibilidad:**\r\n- **Disponible:** Disponibilidad est√°ndar\r\n- **Preferida:** Disponibilidad preferida (mayor prioridad en la asignaci√≥n)\r\n- **No Disponible:** No disponible para trabajar\r\n\r\n---\r\n\r\n### Crear una Disponibilidad (Empleado)\r\n\r\n**Ubicaci√≥n:**\r\n- Tab \"Plan de Turno\" ‚Üí Bot√≥n **\"Disponibilidades\"** (icono de casilla, parte superior derecha)\r\n\r\n**Pasos:**\r\n\r\n1. **Abrir Gesti√≥n de Disponibilidades**\r\n   - En el header superior derecho, hacer clic en el bot√≥n **\"Disponibilidades\"** (icono de casilla)\r\n   - Se abrir√° un panel lateral (Desktop) o modal (Mobile)\r\n\r\n2. **Crear Nueva Disponibilidad**\r\n   - Hacer clic en el icono **\"+\"** (arriba a la derecha del panel/modal)\r\n   - Se abrir√° el formulario\r\n\r\n3. **Completar Formulario**\r\n   - **Sucursal:** Opcional (seleccionar si solo aplica a una sucursal espec√≠fica)\r\n   - **Rol:** Opcional (seleccionar si solo aplica a un rol espec√≠fico)\r\n   - **D√≠a de la Semana:** Seleccionar (Todos los d√≠as / Domingo / Lunes / ... / S√°bado)\r\n   - **Hora de Inicio:** Opcional (ej: \"08:00\") - Si est√° vac√≠o, todo el d√≠a disponible\r\n   - **Hora de Fin:** Opcional (ej: \"16:00\") - Si est√° vac√≠o, todo el d√≠a disponible\r\n   - **Fecha de Inicio:** Opcional (inicio del per√≠odo de validez)\r\n   - **Fecha de Fin:** Opcional (fin del per√≠odo de validez)\r\n   - **Tipo:** Seleccionar (Disponible / Preferida / No Disponible)\r\n   - **Prioridad:** N√∫mero del 1 al 10 (mayor = m√°s preferido, por defecto: 5)\r\n   - **Notas:** Opcional\r\n   - **Activo:** ‚úÖ Dejar marcado\r\n\r\n4. **Guardar**\r\n   - Hacer clic en el bot√≥n **\"Guardar\"**\r\n   - La disponibilidad aparecer√° en la lista\r\n\r\n**Ejemplos:**\r\n\r\n**Ejemplo 1: Disponibilidad Est√°ndar**\r\n- D√≠a: Lunes\r\n- Hora de Inicio: \"08:00\"\r\n- Hora de Fin: \"16:00\"\r\n- Tipo: Disponible\r\n- Prioridad: 5\r\n\r\n**Ejemplo 2: Disponibilidad Preferida**\r\n- D√≠a: S√°bado\r\n- Hora de Inicio: \"10:00\"\r\n- Hora de Fin: \"14:00\"\r\n- Tipo: Preferida\r\n- Prioridad: 8\r\n\r\n**Ejemplo 3: No Disponible**\r\n- D√≠a: Domingo\r\n- Tipo: No Disponible\r\n\r\n---\r\n\r\n### Editar una Disponibilidad (Empleado)\r\n\r\n1. Tab \"Plan de Turno\" ‚Üí Bot√≥n \"Disponibilidades\"\r\n2. En la lista, hacer clic en el bot√≥n **\"Editar\"** (icono de l√°piz)\r\n3. Modificar los campos necesarios\r\n4. Hacer clic en **\"Guardar\"**\r\n\r\n---\r\n\r\n### Eliminar una Disponibilidad (Empleado)\r\n\r\n1. Tab \"Plan de Turno\" ‚Üí Bot√≥n \"Disponibilidades\"\r\n2. En la lista, hacer clic en el bot√≥n **\"Eliminar\"** (icono de papelera)\r\n3. Confirmar en el di√°logo\r\n4. Hacer clic en **\"OK\"**\r\n\r\n---\r\n\r\n## Creaci√≥n de Turnos\r\n\r\n### Generaci√≥n Autom√°tica de Turnos (Administrador)\r\n\r\n**Ubicaci√≥n:**\r\n- Tab \"Plan de Turno\" ‚Üí Bot√≥n **\"Generar\"** (icono de refresco/generar, parte superior derecha)\r\n\r\n**‚ö†Ô∏è PREREQUISITOS:**\r\n- ‚úÖ Plantillas de Turnos deben existir para la Sucursal + Roles seleccionados\r\n- ‚úÖ Plantillas deben estar activas\r\n- ‚ö†Ô∏è Disponibilidades son opcionales (sin disponibilidades, los turnos se crean sin usuario asignado)\r\n\r\n**Pasos:**\r\n\r\n1. **Abrir Generador**\r\n   - En el header superior derecho, hacer clic en el bot√≥n **\"Generar\"** (icono de refresco/generar)\r\n   - Se abrir√° un panel lateral (Desktop) o modal (Mobile)\r\n\r\n2. **Completar Formulario**\r\n   - **Fecha de Inicio:** Seleccionar fecha (ej: \"2025-01-20\")\r\n   - **Fecha de Fin:** Seleccionar fecha (ej: \"2025-01-26\")\r\n   - **Sucursal:** Seleccionar del men√∫ desplegable\r\n   - **Roles:** Seleccionar una o m√°s roles (casillas de verificaci√≥n)\r\n     - **Nota:** Si no se seleccionan roles, se usar√°n todos los roles de la sucursal\r\n\r\n3. **Generar**\r\n   - Hacer clic en el bot√≥n **\"Generar\"** (abajo del formulario)\r\n   - El sistema procesar√° la generaci√≥n\r\n\r\n4. **Revisar Resultados**\r\n   - Se mostrar√° una p√°gina de resultados con:\r\n     - N√∫mero de turnos generados\r\n     - Conflictos (si los hay):\r\n       - Turnos sin usuario asignado (no hay disponibilidades)\r\n       - Solapamientos de tiempo\r\n   - Revisar la lista de turnos generados\r\n\r\n5. **Cerrar**\r\n   - Hacer clic en el bot√≥n **\"Cerrar\"**\r\n   - Los turnos aparecer√°n en el calendario\r\n\r\n**Resultado:**\r\n- Los turnos se crean con estado \"Planificado\" (scheduled)\r\n- Si hay disponibilidades, el sistema intenta asignar usuarios autom√°ticamente\r\n- Si no hay disponibilidades, los turnos se crean sin usuario asignado (userId = null)\r\n- El administrador debe asignar usuarios manualmente si es necesario\r\n\r\n---\r\n\r\n### Creaci√≥n Manual de Turnos (Administrador)\r\n\r\n**Ubicaci√≥n:**\r\n- **Opci√≥n A:** Bot√≥n **\"A√±adir turno\"** (icono de \"+\" en c√≠rculo azul, parte superior izquierda)\r\n- **Opci√≥n B:** Hacer clic en una fecha en el calendario\r\n\r\n**Pasos:**\r\n\r\n1. **Abrir Formulario**\r\n   - **Opci√≥n A:** Hacer clic en el bot√≥n **\"A√±adir turno\"** (parte superior izquierda)\r\n   - **Opci√≥n B:** Hacer clic en una fecha en el calendario (el formulario se abrir√° con esa fecha prellenada)\r\n\r\n2. **Completar Formulario**\r\n   - **Sucursal:** Seleccionar del men√∫ desplegable\r\n   - **Rol:** Seleccionar del men√∫ desplegable\r\n   - **Plantilla de Turno:** Seleccionar del men√∫ desplegable (define hora de inicio/fin)\r\n   - **Empleado:** Opcional (seleccionar o dejar vac√≠o para asignar despu√©s)\r\n   - **Fecha:** Seleccionar (si se us√≥ Opci√≥n B, ya est√° prellenada)\r\n   - **Notas:** Opcional\r\n\r\n3. **Guardar**\r\n   - Hacer clic en el bot√≥n **\"Guardar\"**\r\n   - El turno aparecer√° en el calendario\r\n\r\n---\r\n\r\n### Asignar Turnos a Empleados (Administrador)\r\n\r\n**Ubicaci√≥n:**\r\n- Calendario ‚Üí Hacer clic en un turno\r\n\r\n**Pasos:**\r\n\r\n1. **Seleccionar Turno**\r\n   - En el calendario, hacer clic en un turno (aparece como bloque de evento)\r\n\r\n2. **Abrir Formulario de Edici√≥n**\r\n   - Se abrir√° un panel lateral (Desktop) o modal (Mobile) con los detalles del turno\r\n\r\n3. **Asignar Empleado**\r\n   - En el campo **\"Empleado\"** (men√∫ desplegable), seleccionar un empleado\r\n   - El sistema verificar√° autom√°ticamente:\r\n     - Solapamientos (el empleado ya tiene un turno a la misma hora)\r\n     - Disponibilidades (el empleado est√° disponible)\r\n\r\n4. **Guardar**\r\n   - Hacer clic en el bot√≥n **\"Guardar\"**\r\n   - El turno se asignar√° y el empleado recibir√° una notificaci√≥n\r\n\r\n**Resultado:**\r\n- El turno se asigna (userId se establece, estado = \"Planificado\")\r\n- El empleado recibe una notificaci√≥n\r\n- El turno aparece en el calendario con el nombre del empleado\r\n\r\n---\r\n\r\n## Gesti√≥n de Turnos\r\n\r\n### Confirmar un Turno (Empleado)\r\n\r\n**Cu√°ndo:** Despu√©s de que un turno ha sido asignado\r\n\r\n**Pasos:**\r\n\r\n1. **Seleccionar Turno Propio**\r\n   - En el calendario, hacer clic en uno de tus turnos (turnos donde userId = tu usuario)\r\n   - Los turnos propios aparecen con un color diferente\r\n\r\n2. **Abrir Formulario de Edici√≥n**\r\n   - Se abrir√° un panel lateral o modal con los detalles del turno\r\n\r\n3. **Cambiar Estado**\r\n   - En el campo **\"Estado\"** (men√∫ desplegable), seleccionar **\"Confirmado\"**\r\n\r\n4. **Guardar**\r\n   - Hacer clic en el bot√≥n **\"Guardar\"**\r\n   - El turno se confirmar√° y el administrador recibir√° una notificaci√≥n\r\n\r\n**Resultado:**\r\n- Estado = \"Confirmado\" (confirmed)\r\n- confirmedAt se establece\r\n- El administrador recibe una notificaci√≥n\r\n\r\n---\r\n\r\n### Cancelar un Turno (Empleado o Administrador)\r\n\r\n**Cu√°ndo:** Cuando un turno no se puede realizar (enfermedad, vacaciones, etc.)\r\n\r\n**Pasos:**\r\n\r\n1. **Seleccionar Turno**\r\n   - En el calendario, hacer clic en el turno\r\n\r\n2. **Abrir Formulario de Edici√≥n**\r\n   - Se abrir√° un panel lateral o modal\r\n\r\n3. **Cambiar Estado**\r\n   - En el campo **\"Estado\"** (men√∫ desplegable), seleccionar **\"Cancelado\"**\r\n\r\n4. **Guardar**\r\n   - Hacer clic en el bot√≥n **\"Guardar\"**\r\n   - El turno se cancelar√° y el administrador recibir√° una notificaci√≥n\r\n\r\n**Resultado:**\r\n- Estado = \"Cancelado\" (cancelled)\r\n- El turno puede ser reasignado a otro empleado\r\n- El administrador recibe una notificaci√≥n\r\n\r\n---\r\n\r\n### Eliminar un Turno (Administrador)\r\n\r\n**Pasos:**\r\n\r\n1. **Seleccionar Turno**\r\n   - En el calendario, hacer clic en el turno\r\n\r\n2. **Abrir Formulario de Edici√≥n**\r\n   - Se abrir√° un panel lateral o modal\r\n\r\n3. **Eliminar**\r\n   - Hacer clic en el bot√≥n **\"Eliminar\"** (rojo, abajo del formulario)\r\n   - Aparecer√° un di√°logo de confirmaci√≥n: \"¬øRealmente desea eliminar este turno?\"\r\n\r\n4. **Confirmar**\r\n   - Hacer clic en **\"OK\"** en el di√°logo\r\n   - El turno se eliminar√° permanentemente\r\n\r\n**‚ö†Ô∏è ADVERTENCIA:** Los turnos eliminados no se pueden recuperar.\r\n\r\n---\r\n\r\n### Editar un Turno (Administrador)\r\n\r\n**Pasos:**\r\n\r\n1. **Seleccionar Turno**\r\n   - En el calendario, hacer clic en el turno\r\n\r\n2. **Abrir Formulario de Edici√≥n**\r\n   - Se abrir√° un panel lateral o modal\r\n\r\n3. **Modificar Campos**\r\n   - **Empleado:** Cambiar (men√∫ desplegable)\r\n   - **Fecha:** Cambiar (campo de fecha)\r\n   - **Estado:** Cambiar (men√∫ desplegable)\r\n   - **Notas:** Modificar (√°rea de texto)\r\n   - **Nota:** Sucursal, Rol y Plantilla no se pueden cambiar (aparecen deshabilitados)\r\n\r\n4. **Guardar**\r\n   - Hacer clic en el bot√≥n **\"Guardar\"**\r\n   - Los cambios se aplicar√°n\r\n\r\n---\r\n\r\n## Intercambio de Turnos\r\n\r\n### Crear una Solicitud de Intercambio (Empleado)\r\n\r\n**Cu√°ndo:** Cuando un empleado quiere intercambiar su turno con otro empleado\r\n\r\n**Prerequisitos:**\r\n- El turno debe pertenecer al empleado (userId = empleado actual)\r\n- El turno no debe estar cancelado o ya intercambiado\r\n\r\n**Pasos:**\r\n\r\n1. **Seleccionar Turno Propio**\r\n   - En el calendario, hacer clic en uno de tus turnos\r\n\r\n2. **Abrir Formulario de Edici√≥n**\r\n   - Se abrir√° un panel lateral o modal\r\n\r\n3. **Iniciar Intercambio**\r\n   - Hacer clic en el bot√≥n **\"Intercambiar turno\"** (en el formulario, junto a \"Guardar\")\r\n   - Se abrir√° un nuevo panel/modal: `SwapRequestModal`\r\n\r\n4. **Completar Formulario**\r\n   - **Turno Propio:** Solo lectura (muestra tu turno actual)\r\n   - **Turno Objetivo:** Seleccionar del men√∫ desplegable\r\n     - **Filtros autom√°ticos:** Solo muestra turnos que:\r\n       - Tienen el mismo Rol\r\n       - Tienen la misma Sucursal\r\n       - Tienen un usuario asignado\r\n       - No est√°n cancelados o ya intercambiados\r\n   - **Mensaje:** Opcional (√°rea de texto para agregar un mensaje)\r\n\r\n5. **Crear Solicitud**\r\n   - Hacer clic en el bot√≥n **\"Crear solicitud de intercambio\"** (abajo del formulario)\r\n   - La solicitud se crear√°\r\n\r\n**Resultado:**\r\n- Se crea una solicitud de intercambio (estado = \"Pendiente\" / pending)\r\n- El usuario objetivo recibe una notificaci√≥n\r\n\r\n---\r\n\r\n### Responder a una Solicitud de Intercambio (Empleado)\r\n\r\n**Cu√°ndo:** Despu√©s de recibir una solicitud de intercambio\r\n\r\n**Pasos:**\r\n\r\n1. **Abrir Gesti√≥n de Solicitudes**\r\n   - Tab \"Plan de Turno\" ‚Üí Bot√≥n **\"Solicitudes de Intercambio\"** (icono de flecha, parte superior derecha)\r\n   - Se abrir√° un panel lateral o modal con dos tabs:\r\n     - **\"Enviadas\":** Tus solicitudes (las que has creado)\r\n     - **\"Recibidas\":** Solicitudes recibidas (de otros empleados)\r\n\r\n2. **Ver Solicitudes Recibidas**\r\n   - Hacer clic en el tab **\"Recibidas\"**\r\n   - Se mostrar√° una lista de solicitudes recibidas\r\n\r\n3. **Seleccionar Solicitud**\r\n   - Hacer clic en una solicitud de la lista\r\n   - Se mostrar√°n los detalles:\r\n     - Turno original (tu turno)\r\n     - Turno objetivo (turno del solicitante)\r\n     - Mensaje (si hay uno)\r\n     - Estado (Pendiente)\r\n\r\n4. **Responder**\r\n   - Hacer clic en el bot√≥n **\"Aceptar\"** (verde, a la derecha de la solicitud)\r\n     - **O**\r\n   - Hacer clic en el bot√≥n **\"Rechazar\"** (rojo, a la derecha de la solicitud)\r\n\r\n**Resultado:**\r\n\r\n**Si se Acepta:**\r\n- Ambos turnos se intercambian (userId se intercambia)\r\n- Estado = \"Intercambiado\" (swapped)\r\n- Ambos usuarios reciben una notificaci√≥n\r\n\r\n**Si se Rechaza:**\r\n- Estado = \"Rechazado\" (rejected)\r\n- El solicitante recibe una notificaci√≥n\r\n\r\n---\r\n\r\n### Ver Solicitudes de Intercambio (Administrador)\r\n\r\n**Pasos:**\r\n\r\n1. Tab \"Plan de Turno\" ‚Üí Bot√≥n \"Solicitudes de Intercambio\"\r\n2. Se abrir√° un panel lateral o modal con dos tabs:\r\n   - **\"Enviadas\":** Todas las solicitudes enviadas\r\n   - **\"Recibidas\":** Todas las solicitudes recibidas\r\n3. **Filtrar por Estado:** Men√∫ desplegable arriba (todas / pendiente / aprobada / rechazada)\r\n4. **Ver Detalles:**\r\n   - Solicitante (quien cre√≥ la solicitud)\r\n   - Usuario objetivo (quien debe responder)\r\n   - Turno original (detalles)\r\n   - Turno objetivo (detalles)\r\n   - Estado (pendiente / aprobada / rechazada)\r\n   - Mensaje (si hay uno)\r\n\r\n**Prop√≥sito:** El administrador tiene una visi√≥n general de todas las solicitudes de intercambio.\r\n\r\n---\r\n\r\n## Filtros y B√∫squeda\r\n\r\n### Filtrar Turnos (Todos los Usuarios)\r\n\r\n**Ubicaci√≥n:**\r\n- Tab \"Plan de Turno\" ‚Üí Bot√≥n **\"Filtro\"** (icono de embudo, parte superior derecha)\r\n- **Badge:**** Muestra el n√∫mero de filtros activos (si > 0, c√≠rculo azul arriba a la derecha del bot√≥n)\r\n\r\n**Pasos:**\r\n\r\n1. **Abrir Panel de Filtros**\r\n   - En el header superior derecho, hacer clic en el bot√≥n **\"Filtro\"** (icono de embudo)\r\n   - Se mostrar√° un panel de filtros debajo del header (caja blanca con borde)\r\n\r\n2. **Seleccionar Filtros**\r\n   - **Sucursal:** Lista de casillas de verificaci√≥n (selecci√≥n m√∫ltiple, desplazable)\r\n   - **Rol:** Lista de casillas de verificaci√≥n (selecci√≥n m√∫ltiple, desplazable)\r\n   - **Estado:** Lista de casillas de verificaci√≥n (selecci√≥n m√∫ltiple, desplazable)\r\n     - Planificado (scheduled)\r\n     - Confirmado (confirmed)\r\n     - Cancelado (cancelled)\r\n     - Intercambiado (swapped)\r\n   - **Empleado:** Lista de casillas de verificaci√≥n (selecci√≥n m√∫ltiple, desplazable)\r\n\r\n3. **Aplicar Filtros**\r\n   - Marcar las casillas deseadas (m√∫ltiples por categor√≠a)\r\n   - Hacer clic en el bot√≥n **\"Aplicar\"** (azul, abajo a la derecha del panel)\r\n     - **O** hacer clic en el bot√≥n **\"Restablecer\"** (gris, abajo a la izquierda) para limpiar todos los filtros\r\n   - El panel se cerrar√° y el calendario mostrar√° solo los turnos filtrados\r\n\r\n**Resultado:**\r\n- El calendario muestra solo los turnos que coinciden con los filtros seleccionados\r\n- El bot√≥n de filtro muestra un badge con el n√∫mero de filtros activos\r\n\r\n---\r\n\r\n### Navegar entre Semanas (Todos los Usuarios)\r\n\r\n**Ubicaci√≥n:**\r\n- Header central del planificador de turnos\r\n\r\n**Controles:**\r\n- **\"Anterior\"** (‚Üê): Bot√≥n de flecha izquierda (izquierda de la visualizaci√≥n de semana)\r\n- **\"Siguiente\"** (‚Üí): Bot√≥n de flecha derecha (derecha de la visualizaci√≥n de semana)\r\n- **\"Hoy\"** (üìÖ): Bot√≥n de calendario (derecha de la visualizaci√≥n de semana)\r\n- **Visualizaci√≥n de Semana:** Texto en el centro (ej: \"17.11.2025 - 23.11.2025\")\r\n\r\n**Pasos:**\r\n\r\n1. **Semana Anterior**\r\n   - Hacer clic en el bot√≥n **\"Anterior\"** (‚Üê)\r\n   - El calendario cargar√° los turnos de la semana anterior\r\n\r\n2. **Semana Siguiente**\r\n   - Hacer clic en el bot√≥n **\"Siguiente\"** (‚Üí)\r\n   - El calendario cargar√° los turnos de la semana siguiente\r\n\r\n3. **Semana Actual**\r\n   - Hacer clic en el bot√≥n **\"Hoy\"** (üìÖ)\r\n   - El calendario cargar√° los turnos de la semana actual\r\n\r\n---\r\n\r\n### Cambiar Vista (Todos los Usuarios)\r\n\r\n**Ubicaci√≥n:**\r\n- Header superior derecho, despu√©s de los otros botones\r\n\r\n**Controles:**\r\n- **\"Semana\"** (üìÖ): Bot√≥n de calendario (vista semanal)\r\n- **\"Mes\"** (üìä): Bot√≥n de cuadr√≠cula (vista mensual)\r\n\r\n**Pasos:**\r\n\r\n1. **Vista Semanal**\r\n   - Hacer clic en el bot√≥n **\"Semana\"** (üìÖ)\r\n   - El calendario cambiar√° a vista semanal (timeGridWeek)\r\n\r\n2. **Vista Mensual**\r\n   - Hacer clic en el bot√≥n **\"Mes\"** (üìä)\r\n   - El calendario cambiar√° a vista mensual (dayGridMonth)\r\n\r\n---\r\n\r\n## Resoluci√≥n de Problemas\r\n\r\n### Problema: La generaci√≥n autom√°tica crea 0 turnos\r\n\r\n**Causa:** No hay plantillas de turnos para la Sucursal + Roles seleccionados.\r\n\r\n**Soluci√≥n:**\r\n1. Verificar que existen plantillas:\r\n   - Tab \"Plan de Turno\" ‚Üí Bot√≥n \"Plantillas de Turnos\"\r\n   - Revisar la lista: ¬øHay plantillas para la Sucursal y Roles seleccionados?\r\n2. Si no hay plantillas:\r\n   - Crear plantillas (ver secci√≥n \"Gesti√≥n de Plantillas de Turnos\")\r\n   - Asegurarse de que las plantillas est√©n activas\r\n3. Verificar que la Sucursal y Roles en las plantillas coincidan con la generaci√≥n\r\n\r\n**Checklist:**\r\n- [ ] Plantillas existen para la Sucursal seleccionada\r\n- [ ] Plantillas existen para los Roles seleccionados\r\n- [ ] Plantillas est√°n activas (isActive = true)\r\n- [ ] Plantillas tienen hora de inicio y fin\r\n\r\n---\r\n\r\n### Problema: Los turnos se crean sin empleado asignado\r\n\r\n**Causa:** No hay disponibilidades que coincidan con los turnos.\r\n\r\n**Soluci√≥n:**\r\n1. **Opci√≥n A: Crear Disponibilidades**\r\n   - Los empleados deben crear sus disponibilidades\r\n   - Tab \"Plan de Turno\" ‚Üí Bot√≥n \"Disponibilidades\"\r\n   - Crear disponibilidades que coincidan con los turnos\r\n\r\n2. **Opci√≥n B: Asignar Manualmente**\r\n   - El administrador puede asignar empleados manualmente\r\n   - Hacer clic en el turno ‚Üí Seleccionar empleado ‚Üí Guardar\r\n\r\n---\r\n\r\n### Problema: No puedo crear una solicitud de intercambio\r\n\r\n**Causas posibles:**\r\n1. El turno no es tuyo (userId ‚â† tu usuario)\r\n2. El turno est√° cancelado o ya intercambiado\r\n3. No hay turnos objetivo disponibles (mismo rol/sucursal, con usuario, no cancelado/intercambiado)\r\n\r\n**Soluci√≥n:**\r\n1. Verificar que el turno es tuyo\r\n2. Verificar que el turno no est√° cancelado o intercambiado\r\n3. Verificar que existen turnos objetivo disponibles\r\n\r\n---\r\n\r\n### Problema: No veo el bot√≥n \"Plantillas de Turnos\"\r\n\r\n**Causa:** El bot√≥n no est√° visible o la p√°gina no se ha recargado.\r\n\r\n**Soluci√≥n:**\r\n1. Recargar la p√°gina (F5 o Ctrl+R)\r\n2. Verificar que est√°s en el tab \"Plan de Turno\"\r\n3. Buscar el bot√≥n en el header superior derecho (icono de documento)\r\n4. Si a√∫n no aparece, contactar al administrador del sistema\r\n\r\n---\r\n\r\n### Problema: Error al guardar una plantilla\r\n\r\n**Causas posibles:**\r\n1. Nombre duplicado (dentro de la misma Sucursal + Rol)\r\n2. Hora de inicio >= hora de fin (excepto para turnos nocturnos)\r\n3. Campos requeridos vac√≠os\r\n\r\n**Soluci√≥n:**\r\n1. Cambiar el nombre de la plantilla\r\n2. Verificar que la hora de inicio < hora de fin (o usar formato correcto para turnos nocturnos)\r\n3. Completar todos los campos requeridos (Nombre, Sucursal, Rol, Hora de Inicio, Hora de Fin)\r\n\r\n---\r\n\r\n## Preguntas Frecuentes\r\n\r\n### ¬øPuedo tener m√∫ltiples plantillas para la misma Sucursal + Rol?\r\n\r\n**S√≠.** Puedes tener m√∫ltiples plantillas para la misma combinaci√≥n. Por ejemplo:\r\n- \"Turno Matutino\" (08:00-16:00)\r\n- \"Turno Vespertino\" (16:00-00:00)\r\n- \"Turno Nocturno\" (00:00-08:00)\r\n\r\nDurante la generaci√≥n, se crear√°n turnos para **todas las plantillas activas**.\r\n\r\n---\r\n\r\n### ¬øQu√© pasa si no creo disponibilidades?\r\n\r\n**Sin disponibilidades:**\r\n- ‚úÖ Los turnos se crean (basados en plantillas)\r\n- ‚ùå Los turnos **no tienen usuario asignado** (userId = null)\r\n- ‚ö†Ô∏è El administrador debe asignar usuarios manualmente\r\n\r\n**Con disponibilidades:**\r\n- ‚úÖ Los turnos se crean\r\n- ‚úÖ El sistema intenta asignar usuarios autom√°ticamente\r\n- ‚úÖ Los usuarios con mayor prioridad son preferidos\r\n\r\n---\r\n\r\n### ¬øPuedo cambiar la Sucursal o Rol de una plantilla despu√©s de crearla?\r\n\r\n**No.** Sucursal y Rol no se pueden cambiar al editar una plantilla (aparecen deshabilitados). Si necesitas cambiar estos campos, debes crear una nueva plantilla.\r\n\r\n---\r\n\r\n### ¬øQu√© significa \"Prioridad\" en las disponibilidades?\r\n\r\nLa prioridad (1-10) determina qu√© empleados son preferidos durante la asignaci√≥n autom√°tica:\r\n- **Mayor prioridad = m√°s preferido**\r\n- Se combina con el tipo de disponibilidad (Disponible / Preferida)\r\n- Los empleados con disponibilidad \"Preferida\" reciben un bonus de +5 a la prioridad\r\n\r\n---\r\n\r\n### ¬øPuedo intercambiar un turno que ya est√° confirmado?\r\n\r\n**S√≠.** Puedes crear una solicitud de intercambio para un turno confirmado, siempre que:\r\n- El turno es tuyo\r\n- El turno no est√° cancelado o ya intercambiado\r\n- Existe un turno objetivo disponible\r\n\r\n---\r\n\r\n### ¬øQu√© pasa si rechazo una solicitud de intercambio?\r\n\r\n**Si rechazas:**\r\n- La solicitud se marca como \"Rechazada\"\r\n- El solicitante recibe una notificaci√≥n\r\n- Los turnos **no se intercambian**\r\n\r\n---\r\n\r\n### ¬øPuedo ver todos los turnos de todos los empleados?\r\n\r\n**Depende de tus permisos:**\r\n- **Administradores:** Pueden ver todos los turnos\r\n- **Empleados:** Solo pueden ver sus propios turnos y turnos no asignados\r\n\r\n---\r\n\r\n### ¬øC√≥mo s√© si un turno est√° asignado a m√≠?\r\n\r\n**En el calendario:**\r\n- Los turnos asignados a ti aparecen con un color diferente\r\n- Al hacer clic, ver√°s tu nombre en el formulario de edici√≥n\r\n- En la vista de lista, puedes filtrar por \"Empleado\" = tu nombre\r\n\r\n---\r\n\r\n## Flujos de Trabajo T√≠picos\r\n\r\n### Flujo 1: Creaci√≥n Semanal de Plan de Turnos\r\n\r\n**Para Administradores:**\r\n\r\n1. **Preparaci√≥n (Una vez)**\r\n   - Crear plantillas de turnos para todas las Sucursales + Roles necesarios\r\n   - Verificar que los empleados tienen disponibilidades actualizadas\r\n\r\n2. **Generaci√≥n Semanal**\r\n   - Tab \"Plan de Turno\" ‚Üí Bot√≥n \"Generar\"\r\n   - Seleccionar rango de fechas (ej: pr√≥xima semana)\r\n   - Seleccionar Sucursal y Roles\r\n   - Hacer clic en \"Generar\"\r\n   - Revisar resultados y conflictos\r\n\r\n3. **Asignaci√≥n**\r\n   - Revisar turnos sin usuario asignado\r\n   - Hacer clic en cada turno ‚Üí Asignar empleado ‚Üí Guardar\r\n   - O dejar que el sistema asigne autom√°ticamente (si hay disponibilidades)\r\n\r\n4. **Seguimiento**\r\n   - Esperar confirmaciones de empleados\r\n   - Reasignar turnos cancelados si es necesario\r\n\r\n**Para Empleados:**\r\n\r\n1. **Recibir Notificaci√≥n**\r\n   - Notificaci√≥n: \"Se te ha asignado un turno\"\r\n   - Hacer clic en el icono de notificaciones\r\n\r\n2. **Confirmar Turno**\r\n   - Tab \"Plan de Turno\" ‚Üí Hacer clic en tu turno\r\n   - Cambiar estado a \"Confirmado\" ‚Üí Guardar\r\n\r\n---\r\n\r\n### Flujo 2: Intercambio de Turnos\r\n\r\n**Empleado A (Solicitante):**\r\n\r\n1. Tab \"Plan de Turno\" ‚Üí Hacer clic en tu turno\r\n2. Bot√≥n \"Intercambiar turno\" ‚Üí Seleccionar turno objetivo ‚Üí Crear solicitud\r\n\r\n**Empleado B (Receptor):**\r\n\r\n1. Recibir notificaci√≥n: \"Solicitud de intercambio recibida\"\r\n2. Tab \"Plan de Turno\" ‚Üí Bot√≥n \"Solicitudes de Intercambio\" ‚Üí Tab \"Recibidas\"\r\n3. Revisar solicitud ‚Üí Aceptar o Rechazar\r\n\r\n**Resultado:**\r\n- Si se acepta: Turnos intercambiados, ambos reciben notificaci√≥n\r\n- Si se rechaza: Solicitud rechazada, solicitante recibe notificaci√≥n\r\n\r\n---\r\n\r\n### Flujo 3: Cancelaci√≥n de Turno\r\n\r\n**Empleado:**\r\n\r\n1. Tab \"Plan de Turno\" ‚Üí Hacer clic en tu turno\r\n2. Cambiar estado a \"Cancelado\" ‚Üí Guardar\r\n3. Administrador recibe notificaci√≥n\r\n\r\n**Administrador:**\r\n\r\n1. Recibir notificaci√≥n: \"Turno cancelado\"\r\n2. Tab \"Plan de Turno\" ‚Üí Ver turno cancelado\r\n3. Opciones:\r\n   - Crear nuevo turno\r\n   - Asignar otro empleado al turno existente\r\n\r\n---\r\n\r\n## Notificaciones\r\n\r\n### ¬øCu√°ndo se env√≠an notificaciones?\r\n\r\n1. **Turno Asignado**\r\n   - **A:** Empleado (quien recibe el turno)\r\n   - **Cu√°ndo:** Despu√©s de la asignaci√≥n (userId se establece)\r\n   - **D√≥nde:** Icono de notificaciones (arriba a la derecha en la navegaci√≥n)\r\n\r\n2. **Turno Confirmado**\r\n   - **A:** Administrador (quien cre√≥ el turno)\r\n   - **Cu√°ndo:** Despu√©s de la confirmaci√≥n (estado = \"Confirmado\")\r\n   - **D√≥nde:** Icono de notificaciones\r\n\r\n3. **Turno Cancelado**\r\n   - **A:** Administrador (quien cre√≥ el turno)\r\n   - **Cu√°ndo:** Despu√©s de la cancelaci√≥n (estado = \"Cancelado\")\r\n   - **D√≥nde:** Icono de notificaciones\r\n\r\n4. **Solicitud de Intercambio Creada**\r\n   - **A:** Usuario objetivo (quien tiene el turno objetivo)\r\n   - **Cu√°ndo:** Despu√©s de crear la solicitud\r\n   - **D√≥nde:** Icono de notificaciones\r\n\r\n5. **Solicitud de Intercambio Aceptada**\r\n   - **A:** Ambos usuarios (solicitante y objetivo)\r\n   - **Cu√°ndo:** Despu√©s de aceptar (estado = \"Aprobada\")\r\n   - **D√≥nde:** Icono de notificaciones\r\n\r\n6. **Solicitud de Intercambio Rechazada**\r\n   - **A:** Solicitante (quien cre√≥ la solicitud)\r\n   - **Cu√°ndo:** Despu√©s de rechazar (estado = \"Rechazada\")\r\n   - **D√≥nde:** Icono de notificaciones\r\n\r\n---\r\n\r\n## Estados de Turnos\r\n\r\n### Estados en el Calendario (codificados por color)\r\n\r\n1. **Planificado** (scheduled) - Color: Amarillo/Naranja\r\n   - Turno creado pero no confirmado\r\n   - Puede estar sin usuario asignado (userId = null)\r\n   - O con usuario asignado pero no confirmado\r\n\r\n2. **Confirmado** (confirmed) - Color: Verde\r\n   - Empleado ha confirmado el turno\r\n   - confirmedAt se establece\r\n\r\n3. **Cancelado** (cancelled) - Color: Rojo\r\n   - Turno cancelado\r\n   - Puede ser reasignado\r\n\r\n4. **Intercambiado** (swapped) - Color: Azul\r\n   - Turno intercambiado con otro\r\n   - userId se intercambi√≥\r\n\r\n---\r\n\r\n### Estados de Solicitudes de Intercambio\r\n\r\n1. **Pendiente** (pending) - Badge: Amarillo\r\n   - Solicitud creada, esperando respuesta\r\n\r\n2. **Aprobada** (approved) - Badge: Verde\r\n   - Solicitud aceptada\r\n   - Turnos intercambiados\r\n\r\n3. **Rechazada** (rejected) - Badge: Rojo\r\n   - Solicitud rechazada\r\n\r\n4. **Cancelada** (cancelled) - Badge: Gris\r\n   - Solicitud cancelada\r\n\r\n---\r\n\r\n## Consejos y Mejores Pr√°cticas\r\n\r\n### Para Administradores:\r\n\r\n- **Plantillas:** Crear plantillas para todas las combinaciones Sucursal + Rol que necesitas\r\n- **Generaci√≥n Autom√°tica:** Revisa los conflictos despu√©s de la generaci√≥n\r\n- **Asignaci√≥n:** Asigna usuarios manualmente si no hay disponibilidades\r\n- **Seguimiento:** Revisa regularmente los turnos no confirmados\r\n\r\n### Para Empleados:\r\n\r\n- **Disponibilidades:** Mant√©n tus disponibilidades actualizadas\r\n- **Confirmaci√≥n:** Confirma turnos asignados a tiempo\r\n- **Intercambios:** Responde a solicitudes de intercambio a tiempo\r\n- **Cancelaciones:** Cancela turnos con suficiente antelaci√≥n\r\n\r\n---\r\n\r\n## Resumen R√°pido\r\n\r\n### ¬øQui√©n hace qu√©?\r\n\r\n- **Administrador:** Plantillas, Generaci√≥n, Asignaci√≥n, Gesti√≥n\r\n- **Empleado:** Disponibilidades, Confirmaci√≥n, Solicitudes de Intercambio\r\n\r\n### ¬øCu√°ndo?\r\n\r\n- **Plantillas:** Una vez / Cuando sea necesario\r\n- **Disponibilidades:** Regularmente (cuando cambien)\r\n- **Generaci√≥n:** Regularmente (semanal, mensual)\r\n- **Asignaci√≥n:** Despu√©s de la generaci√≥n\r\n- **Confirmaci√≥n:** Despu√©s de la asignaci√≥n\r\n- **Intercambio:** Cuando sea necesario\r\n\r\n### ¬øD√≥nde en el Frontend?\r\n\r\n- **P√°gina:** `/team-worktime-control`\r\n- **Tab:** \"Plan de Turno\"\r\n- **Header:** Arriba (Izquierda: Bot√≥n A√±adir, Centro: Navegaci√≥n de Semana, Derecha: Filtros/Disponibilidades/Plantillas/Intercambio/Generar/Actualizar/Botones de Vista)\r\n- **Calendario:** √Årea principal (muestra turnos como eventos)\r\n- **Paneles/Modales:** Se abren al hacer clic en botones (Desktop: Panel lateral derecha, Mobile: Modal centrado)\r\n\r\n---\r\n\r\n## Soporte\r\n\r\nSi tienes problemas o preguntas:\r\n\r\n1. Revisar esta gu√≠a\r\n2. Revisar la secci√≥n \"Resoluci√≥n de Problemas\"\r\n3. Contactar al administrador del sistema\r\n4. Revisar los logs del sistema (si tienes acceso)\r\n\r\n---\r\n\r\n**√öltima actualizaci√≥n:** 2025-01-XX  \r\n**Versi√≥n:** 1.0\r\n\r\n";

async function createSchichtplanerGuia() {
  try {
    console.log('üìö Erstelle spanische Schichtplaner-Gu√≠a als Cerebro-Artikel...\n');

    const adminUser = await prisma.user.findFirst({
      where: {
        OR: [
          { id: 1 },
          { username: 'admin' }
        ]
      }
    });

    if (!adminUser) {
      throw new Error('Kein Admin-User gefunden!');
    }

    console.log(`üë§ Verwende Admin-User: ${adminUser.username} (ID: ${adminUser.id})\n`);

    const title = 'Gu√≠a Completa del Usuario - Planificador de Turnos';
    const slug = slugify(title, { lower: true, strict: true });

    console.log(`üìÑ Titel: ${title}`);
    console.log(`üîó Slug: ${slug}\n`);

    const existing = await prisma.cerebroCarticle.findFirst({
      where: {
        OR: [
          { slug },
          { title }
        ]
      }
    });

    if (existing) {
      await prisma.cerebroCarticle.update({
        where: { id: existing.id },
        data: {
          content,
          parentId: null,
          isPublished: true,
          updatedById: adminUser.id
        }
      });
      console.log(`‚úÖ Artikel aktualisiert: ${title}`);
      console.log(`   ID: ${existing.id}`);
      console.log(`   URL: /cerebro/${slug}`);
    } else {
      const newArticle = await prisma.cerebroCarticle.create({
        data: {
          title,
          content,
          slug,
          parentId: null,
          createdById: adminUser.id,
          isPublished: true
        }
      });
      console.log(`‚ûï Neuer Artikel erstellt: ${title}`);
      console.log(`   ID: ${newArticle.id}`);
      console.log(`   URL: /cerebro/${slug}`);
    }

    console.log('\n' + '='.repeat(100));
    console.log('\n‚úÖ Spanische Schichtplaner-Gu√≠a erfolgreich erstellt/aktualisiert!\n');
    console.log(`   üìç Position: Oberste Ebene (Root-Level)`);
    console.log(`   üîó Zugriff: /cerebro/${slug}`);
    console.log('\n' + '='.repeat(100));

  } catch (error) {
    console.error('‚ùå Fehler beim Erstellen der Gu√≠a:', error);
    throw error;
  } finally {
    await prisma.$disconnect();
  }
}

createSchichtplanerGuia().catch(error => {
  console.error('Unbehandelter Fehler:', error);
  process.exit(1);
});
