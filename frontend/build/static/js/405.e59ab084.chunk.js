"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[405],{542:(e,r,t)=>{t.d(r,{Ay:()=>c,Zj:()=>i,i$:()=>n});var a=t(1923),s=t(1801);console.log("DEBUGAUSGABE API-Client: API_URL ist:",s.H$);const l=a.A;l.interceptors.request.use((e=>{var r;const t="".concat(e.baseURL).concat(e.url);console.log("DEBUGAUSGABE API-Client: Vollst\xe4ndige Request URL:",t),console.log("DEBUGAUSGABE API-Client: Request-Methode:",null===(r=e.method)||void 0===r?void 0:r.toUpperCase()),console.log("DEBUGAUSGABE API-Client: Request-Headers:",e.headers),console.log("DEBUGAUSGABE API-Client: Request-Daten:",e.data);const a=localStorage.getItem("token");return console.log("DEBUGAUSGABE API-Client: Token vorhanden:",!!a),e}),(e=>(console.error("DEBUGAUSGABE API-Client: Fehler im Request Interceptor:",e),Promise.reject(e)))),l.interceptors.response.use((e=>(console.log("DEBUGAUSGABE API-Client: Response erhalten:",e.status,e.config.url),e)),(e=>(console.error("DEBUGAUSGABE API-Client: Fehler im Response Interceptor:",e.message),e.response?(console.error("DEBUGAUSGABE API-Client: Response Status:",e.response.status),console.error("DEBUGAUSGABE API-Client: Response Daten:",e.response.data)):console.error("DEBUGAUSGABE API-Client: Keine Response erhalten"),Promise.reject(e))));const n={getAll:()=>l.get("/users"),getById:e=>l.get("/users/".concat(e)),create:e=>{console.log("DEBUGAUSGABE API-Client: userApi.create wird aufgerufen mit Daten:",e);try{return l.post("/users",e).then((e=>(console.log("DEBUGAUSGABE API-Client: userApi.create Antwort:",e),e))).catch((e=>{throw console.error("DEBUGAUSGABE API-Client: userApi.create Fehler:",e.response||e),e}))}catch(r){throw console.error("DEBUGAUSGABE API-Client: Fehler vor dem API-Aufruf in userApi.create:",r),r}},update:(e,r)=>l.put("/users/".concat(e),r),updateRoles:(e,r)=>l.put("/users/".concat(e,"/roles"),{roleIds:r})},i={getAll:()=>(console.log("DEBUGAUSGABE API-Client: roleApi.getAll wird aufgerufen"),l.get("/roles").then((e=>(console.log("DEBUGAUSGABE API-Client: roleApi.getAll erfolgreich:",e.data.length,"Rollen geladen"),e))).catch((e=>{throw console.error("DEBUGAUSGABE API-Client: roleApi.getAll Fehler:",e.message),e}))),getById:e=>(console.log("DEBUGAUSGABE API-Client: roleApi.getById(".concat(e,") wird aufgerufen")),l.get("/roles/".concat(e))),create:e=>{console.log("DEBUGAUSGABE API-Client: roleApi.create wird aufgerufen mit Daten:",e);try{return l.post("/roles",e).then((e=>(console.log("DEBUGAUSGABE API-Client: roleApi.create Antwort:",e),e))).catch((e=>{throw console.error("DEBUGAUSGABE API-Client: roleApi.create Fehler:",e.response||e),e}))}catch(r){throw console.error("DEBUGAUSGABE API-Client: Fehler vor dem API-Aufruf in roleApi.create:",r),r}},update:(e,r)=>{console.log("DEBUGAUSGABE API-Client: roleApi.update f\xfcr ID ".concat(e," wird aufgerufen mit Daten:"),r);try{return l.put("/roles/".concat(e),r).then((e=>(console.log("DEBUGAUSGABE API-Client: roleApi.update Antwort:",e),e))).catch((e=>{throw console.error("DEBUGAUSGABE API-Client: roleApi.update Fehler:",e.response||e),e}))}catch(t){throw console.error("DEBUGAUSGABE API-Client: Fehler vor dem API-Aufruf in roleApi.update:",t),t}},delete:e=>(console.log("DEBUGAUSGABE API-Client: roleApi.delete(".concat(e,") wird aufgerufen")),l.delete("/roles/".concat(e)))},c=l},6405:(e,r,a)=>{a.r(r),a.d(r,{default:()=>Ae});var s=a(5043),l=a(4117),n=a(3216),i=a(542);const c={getAllArticles:async()=>(await i.Ay.get("/cerebro/carticles")).data,getArticleById:async e=>(await i.Ay.get("/cerebro/carticles/".concat(e))).data,getArticleBySlug:async e=>(await i.Ay.get("/cerebro/carticles/slug/".concat(e))).data,getArticlesStructure:async()=>(await i.Ay.get("/cerebro/carticles/structure")).data,createArticle:async e=>(await i.Ay.post("/cerebro/carticles",e)).data,updateArticle:async(e,r)=>(await i.Ay.put("/cerebro/carticles/".concat(e),r)).data,deleteArticle:async e=>{await i.Ay.delete("/cerebro/carticles/".concat(e))},searchArticles:async e=>(await i.Ay.get("/cerebro/carticles/search?q=".concat(encodeURIComponent(e)))).data},d={getMediaByArticle:async e=>(await i.Ay.get("/cerebro/media/carticle/".concat(e))).data,getMediaById:async e=>(await i.Ay.get("/cerebro/media/".concat(e))).data,uploadMedia:async(e,r)=>(await i.Ay.post("/cerebro/media",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:r})).data,deleteMedia:async e=>{await i.Ay.delete("/cerebro/media/".concat(e))},updateMediaFilename:async(e,r)=>(await i.Ay.put("/cerebro/media/".concat(e),{filename:r})).data},o={getLinksByArticle:async e=>(await i.Ay.get("/cerebro/links/carticle/".concat(e))).data,getLinkById:async e=>(await i.Ay.get("/cerebro/links/".concat(e))).data,getLinkPreview:async e=>(await i.Ay.get("/cerebro/links/preview?url=".concat(encodeURIComponent(e)))).data,createLink:async e=>(await i.Ay.post("/cerebro/links",e)).data,updateLink:async(e,r)=>(await i.Ay.put("/cerebro/links/".concat(e),{title:r})).data,deleteLink:async e=>{await i.Ay.delete("/cerebro/links/".concat(e))},createExternalLink:async e=>(await i.Ay.post("/api/cerebro/links",e)).data,updateExternalLink:async(e,r)=>(await i.Ay.put("/api/cerebro/links/".concat(e),r)).data,deleteExternalLink:async e=>{await i.Ay.delete("/api/cerebro/links/".concat(e))}};var u=a(2760),m=a(2774),h=a(579);const x=e=>{let{limit:r,searchQuery:t}=e;const[a,l]=(0,s.useState)([]),[i,d]=(0,s.useState)(!0),[o,x]=(0,s.useState)(null),[b,g]=(0,s.useState)(t||""),[p,f]=(0,s.useState)("updatedAt"),[y,j]=(0,s.useState)("desc"),k=(0,n.Zp)(),{hasPermission:w}=(0,u.S)(),N=w("cerebro","write","cerebro");(0,s.useEffect)((()=>{(async()=>{try{if(d(!0),t){const e=await c.searchArticles(t);l(e)}else{const e=await c.getAllArticles();l(e)}x(null)}catch(e){console.error("Fehler beim Laden der Artikel:",e),x("Fehler beim Laden der Artikel. Bitte versuchen Sie es sp\xe4ter erneut.")}finally{d(!1)}})()}),[t]);const v=async()=>{if(b.trim())try{d(!0);const e=await c.searchArticles(b);l(e),x(null)}catch(e){console.error("Fehler bei der Suche:",e),x("Fehler bei der Suche. Bitte versuchen Sie es sp\xe4ter erneut.")}finally{d(!1)}else try{d(!0);const e=await c.getAllArticles();l(e),x(null)}catch(e){console.error("Fehler beim Laden der Artikel:",e),x("Fehler beim Laden der Artikel. Bitte versuchen Sie es sp\xe4ter erneut.")}finally{d(!1)}},A=e=>{p===e?j("asc"===y?"desc":"asc"):(f(e),j("asc"))},S=[...a].sort(((e,r)=>{if("title"===p)return"asc"===y?e.title.localeCompare(r.title):r.title.localeCompare(e.title);{const t=new Date(e.updatedAt).getTime(),a=new Date(r.updatedAt).getTime();return"asc"===y?t-a:a-t}})),E=e=>e.creatorFirstName&&e.creatorLastName?"".concat(e.creatorFirstName," ").concat(e.creatorLastName):"Unbekannt",L=e=>e.parentId?"Vorhanden":"Keine";return(0,h.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,h.jsx)("h1",{className:"text-2xl font-bold dark:text-white",children:"Cerebro"}),N&&(0,h.jsxs)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded flex items-center",onClick:()=>{k("/cerebro/create")},children:[(0,h.jsx)(m.OiG,{className:"mr-2"})," Neuer Artikel"]})]}),(0,h.jsx)("div",{className:"mb-6",children:(0,h.jsxs)("div",{className:"flex",children:[(0,h.jsx)("input",{type:"text",className:"w-full md:w-[300px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-l-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"Artikel suchen...",value:b,onChange:e=>g(e.target.value),onKeyDown:e=>"Enter"===e.key&&v()}),(0,h.jsx)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-r-md flex items-center",onClick:v,children:(0,h.jsx)(m.KSO,{})})]})}),o&&(0,h.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:o}),i?(0,h.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,h.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 dark:border-blue-400"})}):(0,h.jsx)(h.Fragment,{children:0===a.length?(0,h.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:b?"Keine Artikel gefunden, die Ihren Suchkriterien entsprechen.":"Noch keine Artikel vorhanden."}):(0,h.jsx)("div",{className:"overflow-x-auto bg-white dark:bg-gray-800 rounded-lg shadow",children:(0,h.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,h.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>A("title"),children:(0,h.jsxs)("div",{className:"flex items-center",children:["Titel","title"===p&&("asc"===y?(0,h.jsx)(m.MPV,{className:"ml-1"}):(0,h.jsx)(m.Bg$,{className:"ml-1"}))]})}),(0,h.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Erstellt von"}),(0,h.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>A("updatedAt"),children:(0,h.jsxs)("div",{className:"flex items-center",children:["Zuletzt aktualisiert","updatedAt"===p&&("asc"===y?(0,h.jsx)(m.EDF,{className:"ml-1"}):(0,h.jsx)(m.HL0,{className:"ml-1"}))]})}),(0,h.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\xdcbergeordnet"})]})}),(0,h.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:S.map((e=>{return(0,h.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>{return r=e.slug,void k("/cerebro/".concat(r));var r},children:[(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.title})}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:E(e)})}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:(r=e.updatedAt,new Date(r).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))})}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:L(e)})})]},e.id);var r}))})]})})})]})};var b=a(9379),g=a(45),p=a(5475),f=a(9813),y=a(9285),j=a(1286),k=a(9637);a(2566);const w=["node","inline","className","children"],N=e=>{let{owner:r,repo:t,path:a,branch:l="main"}=e;const[n,i]=(0,s.useState)(""),[c,d]=(0,s.useState)(!0),[o,u]=(0,s.useState)(null);(0,s.useEffect)((()=>{(async()=>{try{d(!0);const e="https://raw.githubusercontent.com/".concat(r,"/").concat(t,"/").concat(l,"/").concat(a),s=await fetch(e);if(!s.ok)throw new Error("HTTP Fehler! Status: ".concat(s.status));const n=await s.text();i(n),u(null)}catch(e){console.error("Fehler beim Laden der Markdown-Datei:",e),u("Die Markdown-Datei konnte nicht geladen werden: ".concat(e instanceof Error?e.message:"Unbekannter Fehler")),i("")}finally{d(!1)}})()}),[r,t,a,l]);const m={code(e){let{node:r,inline:t,className:a,children:s}=e,l=(0,g.A)(e,w);const n=/language-(\w+)/.exec(a||"");return!t&&n?(0,h.jsx)("pre",{className:"language-".concat(n[1]," dark:bg-gray-800 dark:border-gray-700"),children:(0,h.jsx)("code",(0,b.A)((0,b.A)({className:"".concat(a," dark:text-gray-200")},l),{},{children:String(s).replace(/\n$/,"")}))}):(0,h.jsx)("code",(0,b.A)((0,b.A)({className:"".concat(a||""," dark:bg-gray-800 dark:text-gray-200")},l),{},{children:s}))},h1:e=>(0,h.jsx)("h1",(0,b.A)({className:"text-2xl font-bold mb-4 border-b border-gray-200 dark:border-gray-700 pb-2 dark:text-white"},e)),h2:e=>(0,h.jsx)("h2",(0,b.A)({className:"text-xl font-bold mt-6 mb-4 border-b border-gray-200 dark:border-gray-700 pb-2 dark:text-white"},e)),h3:e=>(0,h.jsx)("h3",(0,b.A)({className:"text-lg font-bold mt-5 mb-3 dark:text-white"},e)),a:e=>(0,h.jsx)("a",(0,b.A)({className:"text-blue-600 dark:text-blue-400 hover:underline",target:"_blank",rel:"noopener noreferrer"},e)),table:e=>(0,h.jsx)("table",(0,b.A)({className:"border-collapse border border-gray-300 dark:border-gray-700 my-4"},e)),th:e=>(0,h.jsx)("th",(0,b.A)({className:"border border-gray-300 dark:border-gray-700 px-4 py-2 bg-gray-100 dark:bg-gray-800 dark:text-gray-200"},e)),td:e=>(0,h.jsx)("td",(0,b.A)({className:"border border-gray-300 dark:border-gray-700 px-4 py-2 dark:text-gray-200"},e)),ul:e=>(0,h.jsx)("ul",(0,b.A)({className:"list-disc pl-5 mb-4 dark:text-gray-200"},e)),ol:e=>(0,h.jsx)("ol",(0,b.A)({className:"list-decimal pl-5 mb-4 dark:text-gray-200"},e)),li:e=>(0,h.jsx)("li",(0,b.A)({className:"mb-1 dark:text-gray-200"},e)),img:e=>(0,h.jsx)("img",(0,b.A)({className:"max-w-full h-auto my-4"},e)),p:e=>(0,h.jsx)("p",(0,b.A)({className:"dark:text-gray-200 mb-4"},e)),blockquote:e=>(0,h.jsx)("blockquote",(0,b.A)({className:"border-l-4 border-gray-300 dark:border-gray-700 pl-4 py-2 italic text-gray-600 dark:text-gray-400"},e))};return c?(0,h.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,h.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 dark:border-blue-400"})}):o?(0,h.jsxs)("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:[(0,h.jsx)("h3",{className:"font-bold",children:"Fehler"}),(0,h.jsx)("p",{children:o}),(0,h.jsxs)("p",{className:"mt-2",children:["Pr\xfcfe, ob die Datei",(0,h.jsx)("a",{href:"https://github.com/".concat(r,"/").concat(t,"/blob/").concat(l,"/").concat(a),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline ml-1",children:a})," ","im Repository existiert."]})]}):(0,h.jsxs)("div",{className:"github-markdown-content",children:[(0,h.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-2 mb-4 rounded text-sm flex justify-between items-center",children:[(0,h.jsxs)("span",{className:"dark:text-gray-300",children:["Datei: ",(0,h.jsx)("code",{className:"bg-white dark:bg-gray-800 px-1 py-0.5 rounded",children:a})]}),(0,h.jsx)("a",{href:"https://github.com/".concat(r,"/").concat(t,"/blob/").concat(l,"/").concat(a),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:"Auf GitHub anzeigen \u2192"})]}),(0,h.jsx)("div",{className:"markdown-body dark:bg-gray-800 dark:text-white",children:(0,h.jsx)(f.oz,{components:m,remarkPlugins:[y.A],rehypePlugins:[j.A,k.A],children:n})})]})},v=e=>{let{children:r,language:t="",filename:a=""}=e;const[l,n]=(0,s.useState)(!1),i=a||(t?"".concat(t.toUpperCase()," Code"):"Code");return(0,h.jsxs)("div",{className:"border rounded-md overflow-hidden mb-4 dark:border-gray-700",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-100 dark:bg-gray-800 cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",onClick:()=>n(!l),children:[(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)("span",{className:"mr-2 font-bold text-gray-600 dark:text-gray-400",children:l?"\u25b6":"\u25bc"}),(0,h.jsx)("span",{className:"mr-2 text-blue-600 dark:text-blue-400",children:"</>"}),(0,h.jsx)("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:i})]}),(0,h.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded",children:l?"Ausklappen":"Einklappen"})]}),(0,h.jsx)("div",{className:"transition-all duration-300 ".concat(l?"max-h-0 opacity-0 overflow-hidden":"max-h-full opacity-100"),children:r})]})};var A=a(1713),S=a(1602),E=a(8940),L=a(2704),C=a(1559),B=a(4791),D=a(9642),U=a(9670),F=a(5442),G=a(2811),I=a(9248),P=a(6009),M=a(7012),R=a(8662);const T=["node","className","children"],O=["node","src","alt"],_=["node","href","children"],H=()=>(0,h.jsx)(S.A,{className:"h-6 w-6 text-blue-500"}),q=()=>(0,h.jsx)(E.A,{className:"h-6 w-6 text-red-500"}),z=()=>(0,h.jsx)(L.A,{className:"h-6 w-6 text-red-700"}),W=()=>(0,h.jsx)(C.A,{className:"h-6 w-6 text-gray-500"}),V=()=>(0,h.jsx)(B.A,{className:"h-5 w-5 mr-1"}),K=()=>(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-800",viewBox:"0 0 24 24",fill:"currentColor",children:(0,h.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),Z=()=>(0,h.jsx)(D.A,{className:"h-5 w-5 text-green-600"}),$=()=>(0,h.jsx)(U.A,{className:"h-5 w-5 mr-1"}),Q=()=>(0,h.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),Y=()=>(0,h.jsx)(F.A,{className:"h-5 w-5 mr-2"}),J=()=>(0,h.jsx)(P.A,{className:"h-5 w-5 mr-1"}),X=()=>(0,h.jsx)(M.A,{className:"h-5 w-5 mr-1"}),ee=e=>{let{media:r}=e;const t=(a=r.mimetype).startsWith("image/")?"image":a.startsWith("video/")?"video":"application/pdf"===a?"pdf":"other";var a;const s="/uploads/cerebro/".concat(r.path.split("/").pop());return(0,h.jsxs)("div",{className:"border rounded p-3 mb-2 hover:bg-gray-50",children:[(0,h.jsxs)("div",{className:"flex items-center",children:[(()=>{switch(t){case"image":return(0,h.jsx)(H,{});case"video":return(0,h.jsx)(q,{});case"pdf":return(0,h.jsx)(z,{});default:return(0,h.jsx)(W,{})}})(),(0,h.jsx)("span",{className:"ml-2 flex-grow",children:r.filename}),(0,h.jsxs)("a",{href:s,download:r.filename,className:"text-blue-600 hover:text-blue-800 flex items-center",children:[(0,h.jsx)(V,{})," Download"]})]}),"image"===t&&(0,h.jsx)("div",{className:"mt-2",children:(0,h.jsx)("img",{src:s,alt:r.filename,className:"max-w-full h-auto rounded",style:{maxHeight:"200px"}})}),"video"===t&&(0,h.jsx)("div",{className:"mt-2",children:(0,h.jsxs)("video",{controls:!0,className:"max-w-full rounded",style:{maxHeight:"200px"},children:[(0,h.jsx)("source",{src:s,type:r.mimetype}),"Ihr Browser unterst\xfctzt das Video-Tag nicht."]})}),"pdf"===t&&(0,h.jsx)("div",{className:"mt-2",children:(0,h.jsx)("iframe",{src:"".concat(s,"#view=FitH"),className:"w-full rounded border",style:{height:"200px"},title:r.filename})})]})},re=e=>{let{link:r}=e;const a="google_drive"===r.type,s="youtube"===r.type,l="github_markdown"===r.type,n=l?(e=>{try{let r="",t="",a="",s="";if(e.includes("raw.githubusercontent.com")){const l=e.replace("https://raw.githubusercontent.com/","").split("/");r=l[0],t=l[1],s=l[2],a=l.slice(3).join("/")}else{if(!e.includes("github.com"))return null;{const l=e.replace("https://github.com/","").split("/");r=l[0],t=l[1];const n=-1!==l.indexOf("blob")?l.indexOf("blob"):l.indexOf("raw");s=l[n+1],a=l.slice(n+2).join("/")}}return{owner:r,repo:t,path:a,branch:s}}catch(r){return console.error("Fehler beim Parsen der GitHub-URL:",r),null}})(r.url):null;return(0,h.jsxs)("div",{className:"border rounded p-3 mb-2 hover:bg-gray-50",children:[(0,h.jsxs)("div",{className:"flex items-center",children:[l?(0,h.jsx)(K,{}):(0,h.jsx)(Z,{}),(0,h.jsx)("span",{className:"ml-2 flex-grow",children:r.title||r.url}),(0,h.jsxs)("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 flex items-center",children:[(0,h.jsx)($,{})," ",t("cerebro.actions.open")]})]}),a&&(0,h.jsx)("div",{className:"mt-2",children:(0,h.jsx)("iframe",{src:"".concat(r.url.replace("view","preview")),className:"w-full rounded border",style:{height:"300px"},title:r.title||"Google Drive Dokument",allow:"autoplay"})}),s&&(0,h.jsx)("div",{className:"mt-2",children:(0,h.jsx)("iframe",{src:r.url.replace("watch?v=","embed/"),className:"w-full rounded border",style:{height:"300px"},title:r.title||"YouTube Video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),l&&n&&(0,h.jsxs)("div",{className:"mt-2",children:[(0,h.jsxs)("div",{className:"bg-gray-100 p-2 rounded mb-2 flex items-center text-xs",children:[(0,h.jsxs)("span",{className:"font-mono text-gray-600",children:[n.owner,"/",n.repo,"/",n.path]}),(0,h.jsx)("span",{className:"ml-2 px-2 py-1 bg-gray-200 rounded",children:n.branch})]}),(0,h.jsx)(N,{owner:n.owner,repo:n.repo,path:n.path,branch:n.branch})]})]})},te=()=>{const{t:e}=(0,l.Bd)(),{slug:r}=(0,n.g)(),t=(0,n.Zp)(),{hasPermission:a}=(0,u.S)(),[i,d]=(0,s.useState)(null),[o,m]=(0,s.useState)(!0),[x,k]=(0,s.useState)(null),[w,S]=(0,s.useState)([]),[E,L]=(0,s.useState)([]),[C,B]=(0,s.useState)([]),[D,U]=(0,s.useState)(null),P=a("cerebro","both","button");a("cerebro","both","page");(0,s.useEffect)((()=>{(async()=>{if(r)try{m(!0);const e=await c.getArticleBySlug(r);d(e);const t=e.externalLinks.filter((e=>"github_markdown"===e.type)),a=e.externalLinks.filter((e=>"github_markdown"!==e.type));S(t),L(a),B(e.media),t.length>0&&U(t[0]),k(null)}catch(t){console.error("Fehler beim Laden des Artikels:",t),k(e("cerebro.messages.loadError"))}finally{m(!1)}})()}),[r]);if(o)return(0,h.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,h.jsx)(Q,{})});if(x||!i)return(0,h.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[(0,h.jsx)("h3",{className:"font-bold",children:e("common.error")}),(0,h.jsx)("p",{children:x||e("cerebro.messages.articleNotFound")}),(0,h.jsxs)("button",{onClick:()=>t("/cerebro"),className:"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded flex items-center",children:[(0,h.jsx)(Y,{})," ",e("cerebro.actions.back")]})]});return(0,h.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,h.jsx)("button",{onClick:()=>t("/cerebro"),className:"p-2 rounded-full text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":e("cerebro.back"),children:(0,h.jsx)(F.A,{className:"h-5 w-5"})}),(0,h.jsx)("div",{className:"flex space-x-2",children:P&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("button",{onClick:()=>t("/cerebro/".concat(r,"/edit")),className:"p-2 rounded-full text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900","aria-label":"Bearbeiten",children:(0,h.jsx)(G.A,{className:"h-5 w-5"})}),(0,h.jsx)("button",{onClick:async()=>{if(i&&window.confirm(e("cerebro.messages.deleteConfirm")))try{await c.deleteArticle(i.id),t("/cerebro")}catch(r){console.error("Fehler beim L\xf6schen des Artikels:",r),alert(e("cerebro.messages.deleteError"))}},className:"p-2 rounded-full text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900","aria-label":e("cerebro.delete"),children:(0,h.jsx)(I.A,{className:"h-5 w-5"})})]})})]}),(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("h1",{className:"text-3xl font-bold dark:text-white",children:i.title}),(0,h.jsxs)("div",{className:"flex text-gray-600 dark:text-gray-400 text-sm mt-2",children:[(0,h.jsxs)("div",{className:"flex items-center mr-4",children:[(0,h.jsx)(J,{}),(0,h.jsxs)("span",{children:[e("cerebro.createdBy")," ",i.creatorFirstName," ",i.creatorLastName]})]}),(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(X,{}),(0,h.jsxs)("span",{children:[e("cerebro.updatedAt")," ",(0,A.I5)(i.updatedAt)]})]})]})]}),(0,h.jsxs)("div",{className:"mb-6",children:[w.length>0&&(0,h.jsx)("div",{className:"mb-4",children:(0,h.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-4",children:(0,h.jsxs)("div",{className:"flex",children:[w.map((e=>(0,h.jsx)("button",{className:"py-2 px-4 font-medium text-sm ".concat((null===D||void 0===D?void 0:D.id)===e.id?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),onClick:()=>U(e),children:e.title||"GitHub"},e.id))),(0,h.jsx)("button",{className:"py-2 px-4 font-medium text-sm ".concat(D?"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300":"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400"),onClick:()=>U(null),children:e("cerebro.article")})]})})}),(0,h.jsx)("div",{className:"prose dark:prose-invert max-w-none",children:(()=>{if(D){const r=(e=>{try{let r="",t="",a="",s="";if(e.includes("raw.githubusercontent.com")){const l=e.replace("https://raw.githubusercontent.com/","").split("/");r=l[0],t=l[1],s=l[2],a=l.slice(3).join("/")}else{if(!e.includes("github.com"))return null;{const l=e.replace("https://github.com/","").split("/");r=l[0],t=l[1];const n=-1!==l.indexOf("blob")?l.indexOf("blob"):l.indexOf("raw");s=l[n+1],a=l.slice(n+2).join("/")}}return{owner:r,repo:t,path:a,branch:s}}catch(r){return console.error("Fehler beim Parsen der GitHub-URL:",r),null}})(D.url);if(r)return(0,h.jsxs)("div",{children:[(0,h.jsxs)("div",{className:"bg-gray-100 p-2 rounded mb-4 flex justify-between items-center text-xs",children:[(0,h.jsxs)("div",{children:[(0,h.jsxs)("span",{className:"font-mono text-gray-600",children:[r.owner,"/",r.repo,"/",r.path]}),(0,h.jsx)("span",{className:"ml-2 px-2 py-1 bg-gray-200 rounded",children:r.branch})]}),(0,h.jsxs)("a",{href:D.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 flex items-center",children:[(0,h.jsx)($,{})," ",e("cerebro.actions.viewOnGitHub")]})]}),(0,h.jsx)(N,{owner:r.owner,repo:r.repo,path:r.path,branch:r.branch})]})}return(0,h.jsx)(f.oz,{remarkPlugins:[y.A],rehypePlugins:[j.A],components:{code:e=>{let{node:r,className:t,children:a}=e,s=(0,g.A)(e,T);const l=/language-(\w+)/.exec(t||"");if(!s.inline&&l){const e=l[1],r=String(a).replace(/\n$/,"");if(r.length>500)return(0,h.jsx)(v,{language:e,children:(0,h.jsx)("pre",{className:"language-".concat(e," bg-gray-100 p-4 rounded overflow-auto"),children:(0,h.jsx)("code",(0,b.A)((0,b.A)({className:t},s),{},{children:r}))})});try{return(0,h.jsx)("div",{className:"bg-gray-800 p-4 rounded overflow-auto",children:(0,h.jsx)("pre",{className:t,children:(0,h.jsx)("code",(0,b.A)((0,b.A)({},s),{},{children:r}))})})}catch(n){return console.error("Error rendering syntax highlighter:",n),(0,h.jsx)("pre",{className:"language-".concat(e," bg-gray-100 p-4 rounded overflow-auto"),children:(0,h.jsx)("code",(0,b.A)((0,b.A)({className:t},s),{},{children:r}))})}}return(0,h.jsx)("code",(0,b.A)((0,b.A)({className:t},s),{},{children:a}))},img:e=>{let{node:r,src:t,alt:a}=e,s=(0,g.A)(e,O);if(!t)return null;const l=t.toLowerCase().endsWith(".pdf")||t.match(/\.pdf(\?|$)/i);t.match(/^https?:\/\//);return(0,h.jsxs)("div",{className:"my-4 border rounded-lg p-3 bg-gray-50 dark:bg-gray-700/50",children:[(0,h.jsxs)("div",{className:"flex items-center mb-2",children:[(0,h.jsx)(H,{}),(0,h.jsx)("span",{className:"ml-2 text-sm font-medium dark:text-gray-200",children:a||"Bild"})]}),l?(0,h.jsx)("iframe",{src:"".concat(t,"#view=FitH"),className:"w-full rounded border dark:border-gray-600",style:{height:"400px"},title:a||"PDF Vorschau"}):(0,h.jsx)("img",(0,b.A)({src:t,alt:a||"",className:"max-w-full border rounded dark:border-gray-600",style:{maxHeight:"400px",objectFit:"contain"}},s))]})},a:e=>{let{node:r,href:t,children:a}=e,s=(0,g.A)(e,_);if(!t)return(0,h.jsx)("a",(0,b.A)((0,b.A)({},s),{},{children:a}));const l=t.toLowerCase().endsWith(".pdf")||t.match(/\.pdf(\?|$)/i),n=t.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i),i=t.match(/^https?:\/\//);return n?(0,h.jsxs)("div",{className:"my-4 border rounded-lg p-3 bg-gray-50 dark:bg-gray-700/50",children:[(0,h.jsxs)("div",{className:"flex items-center mb-2",children:[(0,h.jsx)(H,{}),(0,h.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:underline",children:a||t})]}),(0,h.jsx)("img",{src:t,alt:String(a)||"Bild",className:"max-w-full border rounded dark:border-gray-600",style:{maxHeight:"400px",objectFit:"contain"}})]}):l?(0,h.jsxs)("div",{className:"my-4 border rounded-lg p-3 bg-gray-50 dark:bg-gray-700/50",children:[(0,h.jsxs)("div",{className:"flex items-center mb-2",children:[(0,h.jsx)(z,{}),(0,h.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-sm font-medium text-blue-600 dark:text-blue-400 hover:underline",children:a||t})]}),(0,h.jsx)("iframe",{src:"".concat(t,"#view=FitH"),className:"w-full rounded border dark:border-gray-600",style:{height:"400px"},title:String(a)||"PDF Vorschau"})]}):i?(0,h.jsxs)("div",{className:"my-3 border rounded-lg p-3 bg-gray-50 dark:bg-gray-700/50 inline-block",children:[(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(Z,{}),(0,h.jsx)("a",(0,b.A)((0,b.A)({href:t,target:"_blank",rel:"noopener noreferrer",className:"ml-2 text-blue-600 dark:text-blue-400 hover:underline break-all"},s),{},{children:a||t}))]}),(0,h.jsx)("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400 break-all",children:t})]}):(0,h.jsx)("a",(0,b.A)((0,b.A)({href:t,className:"text-blue-600 dark:text-blue-400 hover:underline"},s),{},{children:a}))}},children:i.content})})()})]}),(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsx)("h2",{className:"text-xl font-bold mb-2 dark:text-white",children:e("cerebro.media")}),P&&(0,h.jsx)(p.N_,{to:"/cerebro/".concat(r,"/media/add"),className:"p-2 rounded-full text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900","aria-label":e("cerebro.addMedia"),children:(0,h.jsx)(R.A,{className:"h-5 w-5"})})]}),0===C.length?(0,h.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:e("cerebro.noMedia")}):(0,h.jsx)("div",{className:"grid grid-cols-1 gap-4",children:C.map((e=>(0,h.jsx)(ee,{media:e},e.id)))})]}),(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsx)("h2",{className:"text-xl font-bold mb-2 dark:text-white",children:e("cerebro.externalLinks")}),P&&(0,h.jsxs)("div",{className:"flex space-x-2",children:[(0,h.jsx)(p.N_,{to:"/cerebro/".concat(r,"/link/add"),className:"p-2 rounded-full text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900","aria-label":e("cerebro.addLink"),children:(0,h.jsx)(R.A,{className:"h-5 w-5"})}),(0,h.jsx)(p.N_,{to:"/cerebro/".concat(r,"/github/add"),className:"p-2 rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":e("cerebro.addGitHubMarkdown"),children:(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,h.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})})]})]}),0===E.length?(0,h.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:e("cerebro.noLinks")}):(0,h.jsx)("div",{className:"grid grid-cols-1 gap-4",children:E.map((e=>(0,h.jsx)(re,{link:e},e.id)))})]}),(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{className:"border rounded p-4 dark:border-gray-700",children:[(0,h.jsx)("h2",{className:"text-xl font-bold mb-2 dark:text-white",children:"Verkn\xfcpfte Tasks"}),(0,h.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Keine Tasks verkn\xfcpft."})]}),(0,h.jsxs)("div",{className:"border rounded p-4 dark:border-gray-700",children:[(0,h.jsx)("h2",{className:"text-xl font-bold mb-2 dark:text-white",children:"Verkn\xfcpfte Requests"}),(0,h.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Keine Requests verkn\xfcpft."})]})]})]})};var ae=a(6896);const se=()=>{const{t:e}=(0,l.Bd)(),{slug:r}=(0,n.g)(),t=(0,n.Zp)(),{hasPermission:a}=(0,u.S)(),[i,o]=(0,s.useState)({title:"",parentId:null,content:""}),[m,x]=(0,s.useState)(!0),[g,p]=(0,s.useState)(!1),[f,y]=(0,s.useState)(null),[j,k]=(0,s.useState)([]),[w,N]=(0,s.useState)(!0),[v,A]=(0,s.useState)(null),[S,E]=(0,s.useState)(null),[L,C]=(0,s.useState)(!1),[B,D]=(0,s.useState)([]),U=(0,s.useRef)(null),F=(0,s.useRef)(null),G=a("cerebro","both","button"),I=a("cerebro","both","page"),P=G||I,M=async e=>{if(w&&!S){const r=URL.createObjectURL(e),t={fileName:e.name,fileType:e.type,fileSize:e.size,file:e,url:r};return D((e=>[...e,t])),{url:"wird nach dem Erstellen hochgeladen",fileName:e.name}}const r=new FormData;if(r.append("file",e),!S)throw new Error("Artikel-Slug nicht gefunden.");r.append("carticleSlug",S);const t=await d.uploadMedia(r);return{url:t.path.startsWith("http")?t.path:"".concat(window.location.origin,"/api/cerebro/media/").concat(t.id,"/file"),fileName:t.filename}},{handlePaste:R,handleDrop:T,handleDragOver:O}=(e=>{let{textareaRef:r,content:t,setContent:a,onUpload:l,setUploading:n,setError:i}=e;const c=(0,s.useCallback)((async e=>{n&&n(!0),i&&i(null);try{const s=await l(e);let n="";if(n=e.type.startsWith("image/")?"\n![".concat(s.fileName,"](").concat(s.url,")\n"):"\n[".concat(s.fileName,"](").concat(s.url,")\n"),r.current){const e=r.current.selectionStart,s=t.substring(0,e),l=t.substring(e);a(s+n+l),setTimeout((()=>{if(r.current){const t=e+n.length;r.current.selectionStart=t,r.current.selectionEnd=t,r.current.focus()}}),0)}else a(t+n)}catch(d){var s,c;console.error("Fehler beim Verarbeiten der Datei:",d);const e=d,r=(null===(s=e.response)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.message)||e.message||"Ein unerwarteter Fehler ist aufgetreten";i&&i(r)}finally{n&&n(!1)}}),[t,a,l,r,n,i]);return{handlePaste:(0,s.useCallback)((async e=>{const r=e.clipboardData.items;for(let t=0;t<r.length;t++){const a=r[t];if(0===a.type.indexOf("image")){e.preventDefault();const r=a.getAsFile();return void(r&&await c(r))}}}),[c]),handleDrop:(0,s.useCallback)((async e=>{if(e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&e.dataTransfer.files.length>0){const r=e.dataTransfer.files[0];await c(r)}}),[c]),handleDragOver:(0,s.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[])}})({textareaRef:U,content:i.content,setContent:e=>o((r=>(0,b.A)((0,b.A)({},r),{},{content:e}))),onUpload:M,setUploading:C,setError:y});if((0,s.useEffect)((()=>{(async()=>{try{x(!0);const e=await c.getAllArticles();if(k(e.map((e=>({id:e.id,title:e.title})))),r){const e=await c.getArticleBySlug(r);N(!1),A(e.id),E(e.slug),o({title:e.title,parentId:e.parentId,content:e.content||""})}y(null)}catch(t){console.error("Fehler beim Laden der Daten:",t),y(e("cerebro.articleEdit.loadError"))}finally{x(!1)}})()}),[r]),!P)return(0,h.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,h.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:e("cerebro.messages.noPermission")}),(0,h.jsx)("button",{className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded",onClick:()=>t("/cerebro"),children:e("cerebro.actions.backToOverview")})]});const _=e=>{const{name:r,value:t}=e.target;o((e=>(0,b.A)((0,b.A)({},e),{},{[r]:""===t?null:t})))};return(0,h.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,h.jsx)("h1",{className:"text-2xl font-bold mb-6",children:w?"Neuen Artikel erstellen":"Artikel bearbeiten"}),f&&(0,h.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:f}),m?(0,h.jsxs)("div",{className:"text-center py-8",children:[(0,h.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,h.jsx)("p",{className:"mt-2 text-gray-600",children:"Daten werden geladen..."})]}):(0,h.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),i.title.trim())try{let e;if(p(!0),w){if(e=await c.createArticle({title:i.title,parentId:i.parentId,content:i.content}),E(e.slug),B.length>0){for(const r of B)try{const t=new FormData;t.append("file",r.file),t.append("carticleSlug",e.slug),await d.uploadMedia(t),URL.revokeObjectURL(r.url)}catch(a){console.error("Fehler beim Hochladen des tempor\xe4ren Mediums ".concat(r.fileName,":"),a)}D([])}}else v&&(e=await c.updateArticle(v,{title:i.title,parentId:i.parentId,content:i.content}));t("/cerebro/".concat(e.slug))}catch(a){console.error("Fehler beim Speichern des Artikels:",a),y("Fehler beim Speichern des Artikels. Bitte versuchen Sie es sp\xe4ter erneut."),p(!1)}else y(e("cerebro.articleEdit.titleRequired",{defaultValue:"Titel ist erforderlich"}))},className:"bg-white rounded-lg shadow p-6",children:[(0,h.jsxs)("div",{className:"mb-4",children:[(0,h.jsx)("label",{htmlFor:"title",className:"block text-gray-700 font-medium mb-2",children:"Titel *"}),(0,h.jsx)("input",{type:"text",id:"title",name:"title",value:i.title,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,h.jsxs)("div",{className:"mb-4",children:[(0,h.jsx)("label",{htmlFor:"parentId",className:"block text-gray-700 font-medium mb-2",children:"Elternartikel"}),(0,h.jsxs)("select",{id:"parentId",name:"parentId",value:i.parentId||"",onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,h.jsx)("option",{value:"",children:"Kein Elternartikel (Root)"}),j.filter((e=>e.id!==v)).map((e=>(0,h.jsx)("option",{value:e.id,children:e.title},e.id)))]}),(0,h.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Optional. W\xe4hlen Sie einen \xfcbergeordneten Artikel aus, um eine Hierarchie zu erstellen."})]}),(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("label",{htmlFor:"content",className:"block text-gray-700 font-medium mb-2",children:"Inhalt"}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("textarea",{ref:U,id:"content",rows:10,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",value:i.content,onChange:e=>o((0,b.A)((0,b.A)({},i),{},{content:e.target.value})),onPaste:R,onDrop:T,onDragOver:O,placeholder:"Schreiben Sie hier Ihren Artikel in Markdown..."}),(0,h.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=F.current)||void 0===e?void 0:e.click()},className:"absolute bottom-2 left-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none",title:e("cerebro.addFile"),children:(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),(0,h.jsx)("input",{ref:F,type:"file",onChange:async e=>{const r=e.target.files;if(!r||0===r.length)return;const t=r[0];await M(t),F.current&&(F.current.value="")},className:"hidden"}),L&&(0,h.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-70 dark:bg-opacity-70",children:(0,h.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Wird hochgeladen..."})})]}),i.content&&(0,h.jsx)("div",{className:"mt-3",children:(0,h.jsx)(ae.A,{content:i.content,temporaryAttachments:B.map((e=>({fileName:e.fileName,fileType:e.fileType,fileSize:e.fileSize,file:e.file})))})})]}),(0,h.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,h.jsx)("button",{type:"button",onClick:()=>{t(r?"/cerebro/".concat(r):"/cerebro")},className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:g,children:"Abbrechen"}),(0,h.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",disabled:g,children:g?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{className:"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})};var le=a(7449),ne=a(2174),ie=a(7591),ce=a(9265);const de=()=>(0,h.jsx)(le.A,{className:"h-5 w-5 text-gray-500"}),oe=e=>{let{articles:r,currentSlug:t,level:a=0,expandedIds:s=new Set,onToggleExpand:l,onArticleClick:i}=e;(0,n.Zp)();return(0,h.jsx)("ul",{className:"pl-".concat(a>0?"4":"0"),children:r.map((e=>{const r=e.children&&e.children.length>0,n=s.has(e.id),c=e.slug===t;return(0,h.jsxs)("li",{className:"mb-1",children:[(0,h.jsxs)("div",{className:"flex items-center py-1 px-2 rounded cursor-pointer ".concat(c?"bg-blue-100 text-blue-800":"hover:bg-gray-100"),onClick:()=>{return r=e.slug,void(i&&i(r));var r},children:[r&&(0,h.jsx)("button",{onClick:r=>((e,r)=>{e.stopPropagation(),l&&l(r)})(r,e.id),className:"mr-1 w-4 h-4 flex items-center justify-center text-gray-500",children:n?(0,h.jsx)(ne.A,{className:"h-4 w-4"}):(0,h.jsx)(R.A,{className:"h-4 w-4"})}),(0,h.jsx)("span",{className:"flex-1 truncate",children:e.title})]}),r&&n&&(0,h.jsx)(oe,{articles:e.children,currentSlug:t,level:a+1,expandedIds:s,onToggleExpand:l,onArticleClick:i})]},e.id)}))})},ue=e=>{var r;let{mdFiles:t}=e;const a=(0,n.Zp)(),[i,d]=(0,s.useState)([]),[o,m]=(0,s.useState)([]),[x,b]=(0,s.useState)(null),[g,f]=(0,s.useState)(!0),[y,j]=(0,s.useState)(null),[k,w]=(0,s.useState)(window.innerWidth<720),[N,v]=(0,s.useState)(new Set),[A,S]=(0,s.useState)(window.innerWidth>=720),[E,L]=(0,s.useState)(""),[C,B]=(0,s.useState)(!1),{slug:D}=(0,n.g)(),{hasPermission:U}=(0,u.S)(),{t:F}=(0,l.Bd)();(0,s.useEffect)((()=>{const e=U("cerebro","both","button"),r=U("cerebro","both","page");console.log("Berechtigungspr\xfcfung:"),console.log("cerebro.both.button:",e),console.log("cerebro.both.page:",r),B(e||r)}),[U]),(0,s.useEffect)((()=>{const e=()=>{const e=window.innerWidth<720;w(e),window.innerWidth>=720&&S(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,s.useEffect)((()=>{(async()=>{try{f(!0);const e=await c.getArticlesStructure(),r=e.find((e=>"Markdown-Dateien"===e.title));r?(b(r),v((e=>{const t=new Set(e);return t.add(r.id),t}))):console.warn("Markdown-Ordner nicht gefunden!"),m(e.filter((e=>"Markdown-Dateien"!==e.title))),f(!1)}catch(e){console.error("Fehler beim Laden der Artikelstruktur:",e),j("Fehler beim Laden der Artikelstruktur. Bitte versuchen Sie es sp\xe4ter erneut."),f(!1)}})()}),[]);const G=e=>{v((r=>{const t=new Set(r);return t.has(e)?t.delete(e):t.add(e),t}))};return(0,h.jsxs)("nav",{className:"h-full overflow-hidden flex flex-col",children:[k&&(0,h.jsx)("button",{className:"fixed top-[85px] left-4 z-40 p-2 rounded-full text-gray-600 hover:bg-gray-100 md:hidden",onClick:()=>{const e=!A;S(e);const r=new CustomEvent("cerebro-sidebar-toggle",{detail:{open:e}});window.dispatchEvent(r)},"aria-label":F(A?"cerebro.menuClose":"cerebro.menuOpen"),children:A?(0,h.jsx)(ie.A,{className:"h-5 w-5"}):(0,h.jsx)(ce.A,{className:"h-5 w-5"})}),(0,h.jsx)("div",{className:"\n          bg-white dark:bg-gray-800 flex flex-col h-full\n          ".concat(k?"fixed top-[150px] left-0 z-20 transition-transform duration-300 ease-in-out w-60 max-h-[calc(100vh-228px)] border-r border-gray-200 dark:border-gray-700":"w-full h-full border-r border-gray-200 dark:border-gray-700","\n          ").concat(k&&!A?"-translate-x-full":"translate-x-0","\n        "),children:(0,h.jsxs)("div",{className:"p-2 ".concat(k?"pt-4":"pt-6"," flex-grow flex flex-col overflow-hidden"),children:[(0,h.jsxs)("div",{className:"mb-3 flex items-center space-x-2",children:[C&&(0,h.jsxs)("div",{className:"relative group",children:[(0,h.jsx)("button",{className:"p-2 rounded-full text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900",onClick:()=>a("/cerebro/create"),"aria-label":F("cerebro.actions.createArticle"),children:(0,h.jsx)(R.A,{className:"h-5 w-5"})}),(0,h.jsx)("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block bg-gray-800 dark:bg-gray-700 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:F("cerebro.actions.createArticle")})]}),(0,h.jsx)("form",{onSubmit:e=>{e.preventDefault(),E.trim()&&(a("/cerebro/search?q=".concat(encodeURIComponent(E))),k&&S(!1))},className:"flex-1",children:(0,h.jsxs)("div",{className:"flex",children:[(0,h.jsx)("input",{type:"text",value:E,onChange:e=>L(e.target.value),placeholder:"Suchen...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-l-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white","data-onboarding":"cerebro-search"}),(0,h.jsx)("button",{type:"submit",className:"p-2 rounded-r-md border border-l-0 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600","aria-label":"Suchen",children:(0,h.jsx)(de,{})})]})})]}),(0,h.jsxs)("div",{className:"overflow-y-auto flex-grow",children:[g&&(0,h.jsx)("div",{className:"flex justify-center items-center p-4",children:(0,h.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}),y&&(0,h.jsx)("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-2 py-2 rounded text-sm",children:y}),!g&&o.length>0&&(0,h.jsxs)("div",{className:"space-y-1 mb-4",children:[(0,h.jsx)("h3",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Artikel"}),(0,h.jsx)(oe,{articles:o,currentSlug:D,expandedIds:N,onToggleExpand:G,onArticleClick:e=>a("/cerebro/".concat(e))})]}),!g&&x&&(0,h.jsxs)("div",{className:"mt-4",children:[(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)("button",{onClick:()=>G(x.id),className:"mr-1 w-4 h-4 flex items-center justify-center text-gray-500 dark:text-gray-400",children:N.has(x.id)?(0,h.jsx)(ne.A,{className:"h-4 w-4"}):(0,h.jsx)(R.A,{className:"h-4 w-4"})}),(0,h.jsx)("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:x.title})]}),N.has(x.id)&&(null===(r=x.children)||void 0===r?void 0:r.length)>0&&(0,h.jsx)("div",{className:"ml-4 mt-2 space-y-1",children:x.children.map((e=>(0,h.jsx)(p.N_,{to:"/cerebro/".concat(e.slug),className:"block truncate px-2 py-1 rounded-md ".concat(e.slug===D?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-700"),children:e.title},e.id)))})]})]})]})})]})},me=()=>{const{t:e}=(0,l.Bd)(),{slug:r}=(0,n.g)(),t=(0,n.Zp)(),{hasPermission:a}=(0,u.S)(),i=(0,s.useRef)(null),[c,o]=(0,s.useState)(null),[m,x]=(0,s.useState)(""),[b,g]=(0,s.useState)(!1),[p,f]=(0,s.useState)(null),[y,j]=(0,s.useState)(0),k=a("cerebro","both","button"),w=a("cerebro","both","page"),N=e=>["image/jpeg","image/png","image/gif","image/webp","application/pdf","video/mp4","video/webm"].includes(e.type),v=()=>{i.current&&i.current.click()};if(!(k||w))return(0,h.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,h.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:e("cerebroMedia.noPermission")}),(0,h.jsx)("button",{className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded",onClick:()=>t("/cerebro/".concat(r)),children:e("cerebroMedia.backToArticle")})]});return(0,h.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,h.jsx)("h1",{className:"text-2xl font-bold mb-6",children:e("cerebroMedia.title")}),p&&(0,h.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:p}),(0,h.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,h.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),c)if(m.trim())if(r)if(N(c))try{g(!0),j(0);const e=new FormData;e.append("file",c),e.append("filename",m.trim()),e.append("carticleSlug",r),await d.uploadMedia(e,(e=>{const r=Math.round(100*e.loaded/e.total);j(r)})),t("/cerebro/".concat(r))}catch(s){console.error("Fehler beim Hochladen der Datei:",s),f(e("cerebroMedia.uploadError")),g(!1)}else f(e("cerebroMedia.fileTypeNotSupported"));else f(e("cerebroMedia.articleIdMissing"));else f(e("cerebroMedia.pleaseEnterFileName"));else f(e("cerebroMedia.pleaseSelectFile"))},children:[c?(()=>{if(!c)return null;const r=c.type;return r.startsWith("image/")?(0,h.jsx)("div",{className:"w-full max-h-60 overflow-hidden bg-gray-100 border rounded mb-4",children:(0,h.jsx)("img",{src:URL.createObjectURL(c),alt:"Vorschau",className:"w-full h-auto object-contain max-h-60"})}):"application/pdf"===r?(0,h.jsx)("div",{className:"flex items-center justify-center h-32 bg-red-50 border rounded mb-4",children:(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsx)("div",{className:"text-red-600 text-4xl mb-2",children:"PDF"}),(0,h.jsx)("div",{className:"text-sm text-gray-600",children:c.name})]})}):r.startsWith("video/")?(0,h.jsx)("div",{className:"w-full max-h-60 overflow-hidden bg-gray-100 border rounded mb-4",children:(0,h.jsx)("video",{src:URL.createObjectURL(c),controls:!0,className:"w-full h-auto max-h-60",children:e("cerebroMedia.videoNotSupported")})}):(0,h.jsx)("div",{className:"flex items-center justify-center h-32 bg-gray-50 border rounded mb-4",children:(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsx)("div",{className:"text-gray-600 text-4xl mb-2",children:"Datei"}),(0,h.jsx)("div",{className:"text-sm text-gray-600",children:c.name})]})})})():(0,h.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center mb-4 cursor-pointer hover:border-blue-500 transition-colors",onClick:v,children:(0,h.jsxs)("div",{className:"text-gray-500",children:[(0,h.jsx)("div",{className:"text-4xl mb-2",children:"+"}),(0,h.jsx)("p",{children:e("cerebroMedia.clickToSelectFile")}),(0,h.jsx)("p",{className:"text-sm mt-1",children:e("cerebroMedia.supportedFileTypes")})]})}),(0,h.jsx)("input",{type:"file",ref:i,onChange:r=>{const t=r.target.files;if(!t||0===t.length)return o(null),void x("");const a=t[0];o(a),x(a.name),N(a)?f(null):f(e("cerebroMedia.fileTypeNotSupported"))},className:"hidden",accept:"image/jpeg,image/png,image/gif,image/webp,application/pdf,video/mp4,video/webm"}),(0,h.jsxs)("div",{className:"mb-4",children:[(0,h.jsx)("label",{htmlFor:"fileName",className:"block text-gray-700 font-medium mb-2",children:e("cerebroMedia.fileNameRequired")}),(0,h.jsx)("input",{type:"text",id:"fileName",value:m,onChange:e=>{x(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:e("cerebroMedia.fileName"),required:!0})]}),(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("button",{type:"button",onClick:v,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400",children:e(c?"cerebroMedia.selectOtherFile":"cerebroMedia.selectFile")}),c&&(0,h.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:[e("cerebroMedia.fileSize")," ",(c.size/1024/1024).toFixed(2)," MB"]})]}),b&&y>0&&(0,h.jsx)("div",{className:"mb-6",children:(0,h.jsxs)("div",{className:"relative pt-1",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,h.jsx)("div",{children:(0,h.jsx)("span",{className:"text-xs font-semibold inline-block text-blue-600",children:e("cerebroMedia.uploadProgress")})}),(0,h.jsx)("div",{className:"text-right",children:(0,h.jsxs)("span",{className:"text-xs font-semibold inline-block text-blue-600",children:[y,"%"]})})]}),(0,h.jsx)("div",{className:"overflow-hidden h-2 text-xs flex rounded bg-blue-200",children:(0,h.jsx)("div",{style:{width:"".concat(y,"%")},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500"})})]})}),(0,h.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,h.jsx)("button",{type:"button",onClick:()=>t("/cerebro/".concat(r)),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400",disabled:b,children:e("common.cancel")}),(0,h.jsx)("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:b||!c,children:b?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{className:"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),e("cerebroMedia.uploading")]}):e("cerebroMedia.uploadFile")})]})]})})]})},he=()=>{const{t:e}=(0,l.Bd)(),{slug:r}=(0,n.g)(),t=(0,n.Zp)(),{hasPermission:a}=(0,u.S)(),[i,c]=(0,s.useState)(""),[d,m]=(0,s.useState)(""),[x,b]=(0,s.useState)(!1),[g,p]=(0,s.useState)(!1),[f,y]=(0,s.useState)(null),[j,k]=(0,s.useState)(null),w=a("cerebro","both","button"),N=a("cerebro","both","page"),v=w||N;(0,s.useEffect)((()=>{if(!i||""===i.trim())return void k(null);const e=setTimeout((()=>{A(i)}),500);return()=>clearTimeout(e)}),[i]);const A=async r=>{try{if(p(!0),!S(r))return y(e("cerebroLink.invalidUrl")),void p(!1);const t=await o.getLinkPreview(r);k(t),t.title&&!d&&m(t.title),y(null)}catch(t){console.error("Fehler beim Abrufen der Vorschau:",t),y(e("cerebroLink.previewError")),k(null)}finally{p(!1)}},S=e=>{try{return new URL(e),!0}catch(r){return!1}};if(!v)return(0,h.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,h.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:e("cerebroLink.noPermission")}),(0,h.jsx)("button",{className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded",onClick:()=>t("/cerebro/".concat(r)),children:e("cerebroLink.backToArticle")})]});return(0,h.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,h.jsx)("h1",{className:"text-2xl font-bold mb-6",children:e("cerebroLink.title")}),f&&(0,h.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:f}),(0,h.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,h.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),i.trim()&&S(i))if(r)try{b(!0),await o.createExternalLink({url:i.trim(),title:d.trim()||void 0,carticleSlug:r}),t("/cerebro/".concat(r))}catch(s){console.error("Fehler beim Speichern des Links:",s),y(e("cerebroLink.saveError")),b(!1)}else y(e("cerebroLink.articleIdMissing"));else y(e("cerebroLink.invalidUrl"))},children:[(0,h.jsxs)("div",{className:"mb-4",children:[(0,h.jsx)("label",{htmlFor:"url",className:"block text-gray-700 font-medium mb-2",children:"URL *"}),(0,h.jsx)("input",{type:"url",id:"url",value:i,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://",required:!0}),(0,h.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e("cerebroLink.enterFullUrl")})]}),(0,h.jsxs)("div",{className:"mb-6",children:[(0,h.jsx)("label",{htmlFor:"title",className:"block text-gray-700 font-medium mb-2",children:e("common.description")}),(0,h.jsx)("input",{type:"text",id:"title",value:d,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:e("cerebroLink.titleAutoFill")}),(0,h.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e("cerebroLink.titleOptional")})]}),g?(0,h.jsx)("div",{className:"mb-6 p-4 border rounded bg-gray-50",children:(0,h.jsxs)("div",{className:"flex items-center justify-center",children:[(0,h.jsx)("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-blue-500 mr-2"}),e("cerebroLink.previewLoading")]})}):j?(0,h.jsxs)("div",{className:"mb-6 p-4 border rounded bg-gray-50",children:[(0,h.jsx)("h3",{className:"font-semibold mb-2",children:e("cerebroLink.preview")}),(0,h.jsxs)("div",{className:"flex items-start",children:[j.thumbnail&&(0,h.jsx)("img",{src:j.thumbnail,alt:j.title||"Vorschau",className:"w-16 h-16 object-cover mr-3"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"font-medium",children:j.title||i}),(0,h.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:(e=>{if(!e)return"Standard-Link";switch(e){case"google_drive":return"Google Drive Dokument";case"youtube":return"YouTube Video";default:return"Externer Link"}})(j.type)}),(0,h.jsx)("p",{className:"text-sm text-gray-500 mt-1 break-all",children:i})]})]})]}):null,(0,h.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,h.jsx)("button",{type:"button",onClick:()=>t("/cerebro/".concat(r)),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400",disabled:x,children:e("common.cancel")}),(0,h.jsx)("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:x,children:x?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{className:"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),e("cerebroLink.saving")]}):e("cerebroLink.addLink")})]})]})})]})},xe=e=>{let{articleSlug:r,articleId:t,onLinkAdded:a,onLinkRemoved:n}=e;const{t:i}=(0,l.Bd)(),[c,d]=(0,s.useState)([]),[u,m]=(0,s.useState)(!1),[x,g]=(0,s.useState)(null),[p,f]=(0,s.useState)({url:"",title:"",type:"github_markdown"});(0,s.useEffect)((()=>{if(!t)return;(async()=>{try{m(!0);const e=await o.getLinksByArticle(t);d(e.filter((e=>"github_markdown"===e.type||e.url.includes("github.com")||e.url.includes("raw.githubusercontent.com")))),g(null)}catch(e){console.error("Fehler beim Laden der GitHub-Links:",e),g("Die GitHub-Links konnten nicht geladen werden.")}finally{m(!1)}})()}),[t]);const y=e=>(e.includes("github.com")||e.includes("raw.githubusercontent.com"))&&e.trim().length>0;return(0,h.jsxs)("div",{className:"github-link-manager",children:[(0,h.jsx)("h3",{className:"text-lg font-medium mb-2 dark:text-white",children:i("githubLink.markdownFiles")}),x&&(0,h.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:x}),(0,h.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),p.url.trim())try{m(!0);let e=p.title.trim();if(!e){const r=p.url.split("/");e=r[r.length-1]}const t={carticleSlug:r,url:p.url,title:"GitHub: ".concat(e),type:"github_markdown"},s=await o.createExternalLink(t);d((e=>[...e,s])),f({url:"",title:"",type:"github_markdown"}),g(null),a&&a(s)}catch(t){console.error("Fehler beim Erstellen des GitHub-Links:",t),g(i("githubLink.createError"))}finally{m(!1)}else g(i("githubLink.invalidUrl"))},className:"mb-4",children:(0,h.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"github-url",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"GitHub URL"}),(0,h.jsx)("input",{id:"github-url",type:"url",value:p.url,onChange:e=>f((0,b.A)((0,b.A)({},p),{},{url:e.target.value})),placeholder:"https://github.com/username/repo/blob/main/file.md",className:"w-full px-3 py-2 border rounded-md ".concat(!y(p.url)&&p.url.length>0?"border-red-300 dark:border-red-700 focus:ring-red-500 focus:border-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500"," dark:bg-gray-700 dark:text-white"),required:!0}),!y(p.url)&&p.url.length>0&&(0,h.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i("githubLink.invalidUrlMessage")})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"github-title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:i("githubLink.titleOptional")}),(0,h.jsx)("input",{id:"github-title",type:"text",value:p.title,onChange:e=>f((0,b.A)((0,b.A)({},p),{},{title:e.target.value})),placeholder:i("githubLink.titlePlaceholder"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,h.jsx)("button",{type:"submit",disabled:u||!y(p.url),className:"mt-2 px-4 py-2 rounded-md text-white ".concat(u||!y(p.url)?"bg-blue-400 dark:bg-blue-500/50 cursor-not-allowed":"bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-600"),children:i(u?"githubLink.adding":"githubLink.addLink")})]})}),(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsx)("h4",{className:"text-md font-medium text-gray-700 dark:text-gray-300",children:i("githubLink.linkedFiles")}),u&&0===c.length?(0,h.jsx)("div",{className:"text-gray-500 dark:text-gray-400 italic",children:i("githubLink.loading")}):0===c.length?(0,h.jsx)("div",{className:"text-gray-500 dark:text-gray-400 italic",children:i("githubLink.noLinks")}):c.map((e=>(0,h.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-md dark:bg-gray-800",children:[(0,h.jsx)("div",{className:"truncate flex-1",children:(0,h.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:e.title||e.url})}),(0,h.jsx)("button",{onClick:()=>(async e=>{try{m(!0),await o.deleteLink(e),d((r=>r.filter((r=>r.id!==e)))),n&&n(e)}catch(r){console.error("Fehler beim L\xf6schen des GitHub-Links:",r),g(i("githubLink.deleteError"))}finally{m(!1)}})(e.id),className:"ml-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300",title:"GitHub-Link entfernen",disabled:u,children:"Entfernen"})]},e.id)))]})]})},be=()=>{const{t:e}=(0,l.Bd)(),{slug:r}=(0,n.g)();return r?(0,h.jsx)("div",{className:"w-full p-4",children:(0,h.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,h.jsx)("h1",{className:"text-xl font-semibold mb-4 dark:text-white",children:e("githubLink.addTitle")}),(0,h.jsx)(xe,{articleSlug:r,onLinkAdded:e=>{console.log("Link hinzugef\xfcgt:",e)},onLinkRemoved:e=>{console.log("Link entfernt:",e)}})]})}):(0,h.jsx)("div",{className:"w-full p-4",children:(0,h.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,h.jsx)("h1",{className:"text-xl font-semibold mb-4 dark:text-white",children:"Fehler"}),(0,h.jsx)("p",{className:"dark:text-gray-300",children:"Kein Artikel-Slug angegeben."})]})})};a(7542);const ge="freshprince84",pe="intranet",fe="main",ye=()=>{const[e,r]=(0,s.useState)(window.innerWidth<768),[t,a]=(0,s.useState)(window.innerWidth>=768),[l,i]=(0,s.useState)(window.innerWidth>=768);return(0,s.useEffect)((()=>{const e=()=>{const e=window.innerWidth<768;r(e),a(window.innerWidth>=768),window.innerWidth>=768&&i(!0)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,s.useEffect)((()=>{const e=e=>{e.detail&&"boolean"===typeof e.detail.open&&i(e.detail.open)};return window.addEventListener("cerebro-sidebar-toggle",e),()=>window.removeEventListener("cerebro-sidebar-toggle",e)}),[]),(0,h.jsxs)("div",{className:"flex min-h-screen w-full ".concat(t?"fixed-height-container":""),children:[(0,h.jsx)("div",{className:"\n          ".concat(l?"w-60":"","\n          ").concat(e&&!l?"w-0":""," \n          transition-all duration-300 ease-in-out shrink-0\n        "),children:(0,h.jsx)(ue,{mdFiles:[]})}),(0,h.jsx)("main",{className:"flex-grow ".concat(e?"overflow-y-container":"overflow-y-auto"," ").concat(e?"px-0 pt-2 pb-16":"pl-4 pt-3 pb-4 ".concat(t&&l?"pr-10 md:pr-16 lg:pr-20":"pr-4")),children:(0,h.jsx)("div",{className:e?"mobile-full-width":"",children:(0,h.jsx)(n.sv,{})})})]})},je=()=>{const{t:e}=(0,l.Bd)();return(0,h.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,h.jsx)("h1",{className:"text-2xl font-bold mb-6 dark:text-white",children:e("cerebro.home.title")}),(0,h.jsx)(N,{owner:ge,repo:pe,path:"docs/core/README.md",branch:fe})]})},ke=()=>{const{t:e}=(0,l.Bd)(),{slug:r}=(0,n.g)(),[t,a]=(0,s.useState)(null),[i,d]=(0,s.useState)(!0),[o,u]=(0,s.useState)(null);return(0,s.useEffect)((()=>{if(!r)return;(async()=>{try{d(!0);const e=await c.getArticleBySlug(r),t=await c.getArticleBySlug("markdown-folder");if(t&&e.parentId===t.id&&e.githubPath)return a({path:e.githubPath,title:e.title}),void d(!1);d(!1)}catch(e){console.log("Artikel nicht in der Datenbank gefunden, versuche als Markdown-Datei zu laden");const t={readme:{path:"docs/core/README.md",title:"Readme - \xdcberblick"},"project-setup":{path:"docs/core/ENTWICKLUNGSUMGEBUNG.md",title:"Projekt-Einrichtung"},dokumentationsstandards:{path:"docs/core/DOKUMENTATIONSSTANDARDS.md",title:"Dokumentationsstandards"},"design-standards":{path:"docs/core/DESIGN_STANDARDS.md",title:"Design-Standards"},"coding-standards":{path:"docs/core/CODING_STANDARDS.md",title:"Coding-Standards"},"modul-zeiterfassung":{path:"docs/modules/MODUL_ZEITERFASSUNG.md",title:"Modul: Zeiterfassung"},"cerebro-wiki":{path:"docs/modules/MODUL_CEREBRO.md",title:"Cerebro Wiki-System"},"modul-teamkontrolle":{path:"docs/modules/MODUL_TEAMKONTROLLE.md",title:"Modul: Teamkontrolle"},"modul-abrechnung":{path:"docs/modules/MODUL_ABRECHNUNG.md",title:"Modul: Abrechnung"},"db-schema":{path:"docs/technical/DATENBANKSCHEMA.md",title:"Datenbankschema"},"api-integration":{path:"docs/technical/API_REFERENZ.md",title:"API-Referenz"},"role-switch":{path:"docs/modules/ROLE_SWITCH.md",title:"Rollenwechsel-Funktionalit\xe4t"},changelog:{path:"docs/core/CHANGELOG.md",title:"\xc4nderungshistorie"}};t[r]?a(t[r]):a({path:"".concat(r,".md"),title:r.charAt(0).toUpperCase()+r.slice(1).replace(/-/g," ")}),d(!1)}})()}),[r]),i?(0,h.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow flex justify-center",children:(0,h.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):t?(0,h.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,h.jsx)("h1",{className:"text-2xl font-bold mb-6 dark:text-white",children:t.title}),(0,h.jsx)(N,{owner:ge,repo:pe,path:t.path,branch:fe})]}):(0,h.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,h.jsx)("h1",{className:"text-xl font-semibold mb-4 dark:text-white",children:e("cerebro.fileView.fileNotFound")}),(0,h.jsx)("p",{className:"dark:text-gray-300",children:e("cerebro.fileView.fileNotFoundDescription")})]})},we=()=>{const{t:e}=(0,l.Bd)();return(0,h.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,h.jsx)("h2",{className:"text-xl font-semibold mb-4 dark:text-white",children:e("cerebro.allArticles.title")}),(0,h.jsx)(x,{})]})},Ne=()=>{const{t:e}=(0,l.Bd)(),r=(0,n.zy)(),t=new URLSearchParams(r.search).get("q")||"";return(0,h.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,h.jsx)("div",{className:"flex items-center mb-6",children:(0,h.jsxs)("h2",{className:"text-xl font-semibold dark:text-white",children:[e("cerebro.search.title"),' "',t,'"']})}),(0,h.jsx)(x,{searchQuery:t})]})},ve=()=>{const{slug:e}=(0,n.g)(),[r,t]=(0,s.useState)(!1),[a,l]=(0,s.useState)(!0),[i,d]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{(async()=>{if(e)try{l(!0);const a=await c.getArticleBySlug(e);d(!0);try{const e=await c.getArticleBySlug("markdown-folder");e&&a.parentId===e.id||a.githubPath?t(!0):t(!1)}catch(r){console.warn("Markdown-Ordner nicht gefunden:",r),a.githubPath?t(!0):t(!1)}l(!1)}catch(r){console.log("Artikel nicht in der Datenbank gefunden, versuche als Markdown-Datei:",r),d(!1),t(!0),l(!1)}})()}),[e]),a?(0,h.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow flex justify-center",children:(0,h.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):i&&!r?(0,h.jsx)(te,{}):(0,h.jsx)(ke,{})},Ae=()=>(0,h.jsx)(n.BV,{children:(0,h.jsxs)(n.qh,{path:"/",element:(0,h.jsx)(ye,{}),children:[(0,h.jsx)(n.qh,{index:!0,element:(0,h.jsx)(je,{})}),(0,h.jsx)(n.qh,{path:"all",element:(0,h.jsx)(we,{})}),(0,h.jsx)(n.qh,{path:"search",element:(0,h.jsx)(Ne,{})}),(0,h.jsx)(n.qh,{path:"create",element:(0,h.jsx)(se,{})}),(0,h.jsx)(n.qh,{path:":slug",element:(0,h.jsx)(ve,{})}),(0,h.jsx)(n.qh,{path:":slug/edit",element:(0,h.jsx)(se,{})}),(0,h.jsx)(n.qh,{path:":slug/media/add",element:(0,h.jsx)(me,{})}),(0,h.jsx)(n.qh,{path:":slug/link/add",element:(0,h.jsx)(he,{})}),(0,h.jsx)(n.qh,{path:":slug/github/add",element:(0,h.jsx)(be,{})})]})})}}]);
//# sourceMappingURL=405.e59ab084.chunk.js.map