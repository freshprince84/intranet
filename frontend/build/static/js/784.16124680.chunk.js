"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[784],{1060:(e,r,t)=>{t.d(r,{A:()=>u});var a=t(5043),s=t(4117),n=t(6443),l=t(7591),o=t(2069),i=t(7855),d=t(5657),c=t(579);const u=e=>{let{isOpen:r,onClose:t,onReservationCreated:u}=e;const{t:g}=(0,s.Bd)(),{showMessage:m}=(0,i.A)(),{openSidepane:x,closeSidepane:h}=(0,d.N)(),[b,v]=(0,a.useState)(window.innerWidth<640),[y,p]=(0,a.useState)(window.innerWidth>1070),[k,f]=(0,a.useState)(""),[w,N]=(0,a.useState)(""),[j,E]=(0,a.useState)(""),[R,C]=(0,a.useState)("COP"),[A,S]=(0,a.useState)(null),[I,L]=(0,a.useState)(null),[D,O]=(0,a.useState)(!1),P=e=>{const r=e.target.value;N(r),S((e=>e&&0!==e.trim().length?e.includes("@")&&e.includes(".")?"email":"phone":null)(r))},T=e=>{const r=e.target.value;(""===r||/^\d*\.?\d*$/.test(r))&&E(r)};(0,a.useEffect)((()=>{const e=()=>{v(window.innerWidth<640),p(window.innerWidth>1070)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}}),[]),(0,a.useEffect)((()=>(r&&!b?x():h(),()=>{h()})),[r,b,x,h]),(0,a.useEffect)((()=>{r||(f(""),N(""),E(""),C("COP"),S(null),L(null))}),[r]);const F=async e=>{if(e.preventDefault(),L(null),k&&0!==k.trim().length)if(w&&0!==w.trim().length)if(!j||parseFloat(j)<=0)L(g("reservations.createReservation.errors.amountRequired","Betrag muss eine positive Zahl sein"));else try{O(!0);const e={guestName:k.trim(),contact:w.trim(),amount:parseFloat(j),currency:R};console.log("[CreateReservationModal] Sende Daten:",e),console.log("[CreateReservationModal] API Endpoint:","/api/reservations");const r=await o.u.create(e);console.log("[CreateReservationModal] Reservierung erstellt:",r),m(g("reservations.createReservation.success","Reservierung erfolgreich erstellt"),"success"),u(r),t()}catch(l){var r,a,s,n;console.error("[CreateReservationModal] Fehler beim Erstellen der Reservierung:",l),console.error("[CreateReservationModal] Error Response:",l.response),console.error("[CreateReservationModal] Error Status:",null===(r=l.response)||void 0===r?void 0:r.status),console.error("[CreateReservationModal] Error Data:",null===(a=l.response)||void 0===a?void 0:a.data);const e=(null===(s=l.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||l.message||g("reservations.createReservation.errors.createError","Fehler beim Erstellen der Reservierung");L(e),m(e,"error")}finally{O(!1)}else L(g("reservations.createReservation.errors.contactRequired","Kontaktinformation ist erforderlich"));else L(g("reservations.createReservation.errors.guestNameRequired","Gast-Name ist erforderlich"))},M=()=>{t()};return b?(0,c.jsxs)(n.lG,{open:r,onClose:M,className:"relative z-50",children:[(0,c.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,c.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,c.jsx)(n.lG.Panel,{className:"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsx)(n.lG.Title,{className:"text-lg font-medium text-gray-900 dark:text-white",children:g("reservations.createReservation.title","Neue Reservierung")}),(0,c.jsx)("button",{onClick:M,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,c.jsx)(l.A,{className:"h-6 w-6"})})]}),I&&(0,c.jsx)("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-200 rounded",children:I}),(0,c.jsxs)("form",{onSubmit:F,children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("label",{htmlFor:"guestName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[g("reservations.createReservation.guestName","Gast-Name")," *"]}),(0,c.jsx)("input",{type:"text",id:"guestName",value:k,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white",required:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("label",{htmlFor:"contact",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[g("reservations.createReservation.contact","Telefonnummer oder Email")," *"]}),(0,c.jsx)("input",{type:"text",id:"contact",value:w,onChange:P,placeholder:g("reservations.createReservation.contactPlaceholder","z.B. +573001234567 oder email@example.com"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white",required:!0}),A&&(0,c.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"email"===A?g("reservations.createReservation.detectedEmail","Email erkannt"):g("reservations.createReservation.detectedPhone","Telefonnummer erkannt")})]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[g("reservations.createReservation.amount","Betrag")," *"]}),(0,c.jsx)("input",{type:"text",id:"amount",value:j,onChange:T,placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white",required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"currency",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:g("reservations.createReservation.currency","W\xe4hrung")}),(0,c.jsxs)("select",{id:"currency",value:R,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white",children:[(0,c.jsx)("option",{value:"COP",children:"COP"}),(0,c.jsx)("option",{value:"USD",children:"USD"}),(0,c.jsx)("option",{value:"EUR",children:"EUR"})]})]})]}),(0,c.jsx)("p",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:g("reservations.createReservation.hint","Nach der Erstellung wird automatisch eine WhatsApp-Nachricht mit Zahlungslink versendet (wenn Telefonnummer angegeben).")}),(0,c.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,c.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:g("common.cancel","Abbrechen")}),(0,c.jsx)("button",{type:"submit",disabled:D,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:D?g("common.creating","Wird erstellt..."):g("common.create","Erstellen")})]})]})]})})})]}):(0,c.jsxs)(c.Fragment,{children:[r&&!y&&(0,c.jsx)("div",{className:"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40","aria-hidden":"true",style:{opacity:r?1:0,transition:"opacity 300ms ease-out"}}),(0,c.jsxs)("div",{className:"fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ".concat(r?"translate-x-0":"translate-x-full"),style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",pointerEvents:r?"auto":"none"},"aria-hidden":!r,role:"dialog","aria-modal":r,children:[(0,c.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0",children:[(0,c.jsx)("h2",{className:"text-lg font-semibold dark:text-white",children:g("reservations.createReservation.title","Neue Reservierung")}),(0,c.jsx)("button",{onClick:M,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,c.jsx)(l.A,{className:"h-6 w-6"})})]}),(0,c.jsxs)("div",{className:"p-4 overflow-y-auto flex-1 min-h-0",children:[I&&(0,c.jsx)("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-200 rounded",children:I}),(0,c.jsxs)("form",{onSubmit:F,children:[(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("label",{htmlFor:"guestName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[g("reservations.createReservation.guestName","Gast-Name")," *"]}),(0,c.jsx)("input",{type:"text",id:"guestName",value:k,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white",required:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("label",{htmlFor:"contact",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[g("reservations.createReservation.contact","Telefonnummer oder Email")," *"]}),(0,c.jsx)("input",{type:"text",id:"contact",value:w,onChange:P,placeholder:g("reservations.createReservation.contactPlaceholder","z.B. +573001234567 oder email@example.com"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white",required:!0}),A&&(0,c.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"email"===A?g("reservations.createReservation.detectedEmail","Email erkannt"):g("reservations.createReservation.detectedPhone","Telefonnummer erkannt")})]}),(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[g("reservations.createReservation.amount","Betrag")," *"]}),(0,c.jsx)("input",{type:"text",id:"amount",value:j,onChange:T,placeholder:"0.00",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white",required:!0})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"currency",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:g("reservations.createReservation.currency","W\xe4hrung")}),(0,c.jsxs)("select",{id:"currency",value:R,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white",children:[(0,c.jsx)("option",{value:"COP",children:"COP"}),(0,c.jsx)("option",{value:"USD",children:"USD"}),(0,c.jsx)("option",{value:"EUR",children:"EUR"})]})]})]}),(0,c.jsx)("p",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:g("reservations.createReservation.hint","Nach der Erstellung wird automatisch eine WhatsApp-Nachricht mit Zahlungslink versendet (wenn Telefonnummer angegeben).")}),(0,c.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,c.jsx)("button",{type:"button",onClick:M,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:g("common.cancel","Abbrechen")}),(0,c.jsx)("button",{type:"submit",disabled:D,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:D?g("common.creating","Wird erstellt..."):g("common.create","Erstellen")})]})]})]})]})]})}},1726:(e,r,t)=>{t.d(r,{X:()=>a,d:()=>s});let a=function(e){return e.CONFIRMED="confirmed",e.NOTIFICATION_SENT="notification_sent",e.CHECKED_IN="checked_in",e.CHECKED_OUT="checked_out",e.CANCELLED="cancelled",e.NO_SHOW="no_show",e}({}),s=function(e){return e.PENDING="pending",e.PAID="paid",e.PARTIALLY_PAID="partially_paid",e.REFUNDED="refunded",e}({})},1816:(e,r,t)=>{t.d(r,{A:()=>o});var a=t(45),s=t(5043);const n=["title","titleId"];function l(e,r){let{title:t,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":l},o),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const o=s.forwardRef(l)},2069:(e,r,t)=>{t.d(r,{u:()=>l});var a=t(1923),s=t(1801);const n="/reservations",l={async create(e){console.log("[reservationService] POST zu:",n),console.log("[reservationService] Daten:",e);const r=await a.A.post(n,e);return console.log("[reservationService] Response:",r),r.data.data||r.data},async getById(e){const r=await a.A.get("".concat(n,"/").concat(e));return r.data.data||r.data},async updateGuestContact(e,r){const t=await a.A.put("".concat(n,"/").concat(e,"/guest-contact"),{contact:r});return t.data.data||t.data},async generatePinAndSend(e){const r=await a.A.post(s.Sn.RESERVATION.GENERATE_PIN_AND_SEND(e));return r.data.data||r.data},async sendInvitation(e,r){const t=await a.A.post(s.Sn.RESERVATION.SEND_INVITATION(e),r||{});return t.data.data||t.data},async getNotificationLogs(e){const r=await a.A.get(s.Sn.RESERVATION.NOTIFICATION_LOGS(e));return r.data.data||r.data}}},4538:(e,r,t)=>{t.d(r,{A:()=>o});var a=t(45),s=t(5043);const n=["title","titleId"];function l(e,r){let{title:t,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":l},o),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const o=s.forwardRef(l)},4784:(e,r,t)=>{t.r(r),t.d(r,{default:()=>C});var a=t(5043),s=t(4117),n=t(3216),l=t(1923),o=t(1801),i=t(1726),d=t(7988),c=t(5501),u=t(8682),g=t(9850),m=t(4538),x=t(7925),h=t(9837),b=t(887),v=t(4057),y=t(6511),p=t(579);const k=e=>{let{reservation:r,onClick:t,onUpdate:a}=e;const{t:n,i18n:l}=(0,s.Bd)(),o=()=>{switch(l.language){case"de":return b.de;case"es":return v.es;default:return y.c}},k=e=>{try{return(0,h.GP)(new Date(e),"dd.MM.yyyy",{locale:o()})}catch(r){return e}};return(0,p.jsxs)("div",{onClick:t,className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-4 hover:shadow-lg transition-shadow cursor-pointer ".concat(r.status===i.X.CHECKED_IN?"ring-2 ring-green-500":""),children:[(0,p.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:r.guestName}),r.lobbyReservationId&&(0,p.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["ID: ",r.lobbyReservationId]})]}),(0,p.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,p.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat((e=>{switch(e){case i.X.CONFIRMED:return"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200";case i.X.NOTIFICATION_SENT:return"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200";case i.X.CHECKED_IN:return"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200";case i.X.CHECKED_OUT:return"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200";case i.X.CANCELLED:return"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200";case i.X.NO_SHOW:return"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200";default:return"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}})(r.status)),children:n("reservations.status.".concat(r.status),r.status)}),(0,p.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat((e=>{switch(e){case i.d.PAID:return"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200";case i.d.PARTIALLY_PAID:return"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200";case i.d.REFUNDED:return"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200";case i.d.PENDING:default:return"bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200"}})(r.paymentStatus)),children:n("reservations.paymentStatus.".concat(r.paymentStatus),r.paymentStatus)})]})]}),(0,p.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,p.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[(0,p.jsx)(d.A,{className:"h-4 w-4 mr-2 flex-shrink-0"}),(0,p.jsxs)("span",{children:[k(r.checkInDate)," - ",k(r.checkOutDate)]})]}),r.roomNumber&&(0,p.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[(0,p.jsx)(c.A,{className:"h-4 w-4 mr-2 flex-shrink-0"}),(0,p.jsxs)("span",{children:[n("reservations.room","Zimmer")," ",r.roomNumber]})]}),r.guestEmail&&(0,p.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[(0,p.jsx)(u.A,{className:"h-4 w-4 mr-2 flex-shrink-0"}),(0,p.jsx)("span",{className:"truncate",children:r.guestEmail})]}),r.guestPhone&&(0,p.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[(0,p.jsx)(g.A,{className:"h-4 w-4 mr-2 flex-shrink-0"}),(0,p.jsx)("span",{children:r.guestPhone})]}),r.branch&&(0,p.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[(0,p.jsx)(c.A,{className:"h-4 w-4 mr-2 flex-shrink-0"}),(0,p.jsxs)("span",{children:[n("branches.name","Branch"),": ",r.branch.name]})]}),(0,p.jsxs)("div",{className:"flex items-center gap-3 pt-2 border-t border-gray-200 dark:border-gray-700",children:[r.onlineCheckInCompleted&&(0,p.jsxs)("div",{className:"flex items-center text-green-600 dark:text-green-400",title:n("reservations.onlineCheckInCompleted","Online Check-in abgeschlossen"),children:[(0,p.jsx)(m.A,{className:"h-4 w-4 mr-1"}),(0,p.jsx)("span",{className:"text-xs",children:n("reservations.onlineCheckIn","Online")})]}),r.sireRegistered&&(0,p.jsxs)("div",{className:"flex items-center text-blue-600 dark:text-blue-400",title:n("reservations.sireRegistered","SIRE registriert"),children:[(0,p.jsx)(m.A,{className:"h-4 w-4 mr-1"}),(0,p.jsx)("span",{className:"text-xs",children:"SIRE"})]}),r.doorPin&&(0,p.jsxs)("div",{className:"flex items-center text-purple-600 dark:text-purple-400",title:n("reservations.doorPin","T\xfcr-PIN"),children:[(0,p.jsx)(x.A,{className:"h-4 w-4 mr-1"}),(0,p.jsx)("span",{className:"text-xs",children:n("reservations.pin","PIN")})]})]})]})]})};var f=t(1060),w=t(7855),N=t(8662),j=t(8010),E=t(1816);const R=()=>{const{t:e}=(0,s.Bd)(),{showMessage:r}=(0,w.A)(),t=(0,n.Zp)(),[c,u]=(0,a.useState)([]),[g,m]=(0,a.useState)(!0),[x,h]=(0,a.useState)(null),[b,v]=(0,a.useState)("all"),[y,R]=(0,a.useState)("all"),[C,A]=(0,a.useState)("all"),[S,I]=(0,a.useState)([]),[L,D]=(0,a.useState)(""),[O,P]=(0,a.useState)(!1),[T,F]=(0,a.useState)(!1),[M,_]=(0,a.useState)(!1),B=async()=>{try{var t;m(!0),h(null);const e=await l.A.get(o.Sn.RESERVATION.BASE),r=(null===(t=e.data)||void 0===t?void 0:t.data)||e.data||[];var a,s;if(console.log("[ReservationList] Geladene Reservierungen:",r),r.length>0)console.log("[ReservationList] Erste Reservierung Status:",null===(a=r[0])||void 0===a?void 0:a.status),console.log("[ReservationList] Erste Reservierung PaymentStatus:",null===(s=r[0])||void 0===s?void 0:s.paymentStatus);u(r)}catch(g){var n,i,d,c;console.error("Fehler beim Laden der Reservierungen:",g),h((null===(n=g.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||e("reservations.loadError","Fehler beim Laden der Reservierungen")),r((null===(d=g.response)||void 0===d||null===(c=d.data)||void 0===c?void 0:c.message)||e("reservations.loadError","Fehler beim Laden der Reservierungen"),"error")}finally{m(!1)}};(0,a.useEffect)((()=>{B(),(async()=>{try{const e=await l.A.get(o.Sn.BRANCHES.BASE);I(e.data||[])}catch(e){console.error("Fehler beim Laden der Branches:",e)}})()}),[]);const W=[...c.filter((e=>{if("all"!==b&&e.status!==b)return!1;if("all"!==y&&e.paymentStatus!==y)return!1;if("all"!==C&&e.branchId!==C)return!1;if(L){var r,t,a,s,n;const l=L.toLowerCase();return e.guestName.toLowerCase().includes(l)||(null===(r=e.guestEmail)||void 0===r?void 0:r.toLowerCase().includes(l))||(null===(t=e.guestPhone)||void 0===t?void 0:t.toLowerCase().includes(l))||(null===(a=e.roomNumber)||void 0===a?void 0:a.toLowerCase().includes(l))||(null===(s=e.lobbyReservationId)||void 0===s?void 0:s.toLowerCase().includes(l))||(null===(n=e.branch)||void 0===n?void 0:n.name.toLowerCase().includes(l))}return!0}))].sort(((e,r)=>new Date(r.checkInDate).getTime()-new Date(e.checkInDate).getTime()));return g?(0,p.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:(0,p.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,p.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),(0,p.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),(0,p.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6"})]})}):x&&0===c.length?(0,p.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)("p",{className:"text-red-600 dark:text-red-400 mb-4",children:x}),(0,p.jsx)("button",{onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:e("common.retry","Erneut versuchen")})]})}):(0,p.jsxs)("div",{className:"space-y-4",children:[(0,p.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-4",children:[(0,p.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,p.jsx)("div",{className:"flex-1 w-full sm:w-auto",children:(0,p.jsx)("input",{type:"text",placeholder:e("reservations.searchPlaceholder","Suche nach Gast, E-Mail, Telefon..."),value:L,onChange:e=>D(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsxs)("button",{onClick:()=>_(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center",children:[(0,p.jsx)(N.A,{className:"h-5 w-5 mr-2"}),e("reservations.createReservation.button","Neue Reservierung")]}),(0,p.jsxs)("button",{onClick:()=>P(!O),className:"px-4 py-2 rounded-lg border transition-colors ".concat(O||"all"!==b||"all"!==y||"all"!==C?"bg-blue-100 dark:bg-blue-900 border-blue-300 dark:border-blue-700 text-blue-800 dark:text-blue-200":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"),children:[(0,p.jsx)(j.A,{className:"h-5 w-5 inline-block mr-2"}),e("common.filter","Filter")]}),(0,p.jsxs)("button",{onClick:async()=>{try{F(!0),await l.A.post(o.Sn.RESERVATIONS.SYNC),r(e("reservations.syncSuccess","Reservierungen erfolgreich synchronisiert"),"success"),await B()}catch(s){var t,a;console.error("Fehler beim Synchronisieren:",s),r((null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||e("reservations.syncError","Fehler beim Synchronisieren"),"error")}finally{F(!1)}},disabled:T,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[(0,p.jsx)(E.A,{className:"h-5 w-5 mr-2 ".concat(T?"animate-spin":"")}),T?e("reservations.syncing","Synchronisiere..."):e("reservations.sync","Synchronisieren")]})]})]}),O&&(0,p.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-300 dark:border-gray-600",children:[(0,p.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("reservations.status","Status")}),(0,p.jsxs)("select",{value:b,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,p.jsx)("option",{value:"all",children:e("common.all","Alle")}),(0,p.jsx)("option",{value:i.X.CONFIRMED,children:e("reservations.status.confirmed","Best\xe4tigt")}),(0,p.jsx)("option",{value:i.X.CHECKED_IN,children:e("reservations.status.checkedIn","Eingecheckt")}),(0,p.jsx)("option",{value:i.X.CHECKED_OUT,children:e("reservations.status.checkedOut","Ausgecheckt")}),(0,p.jsx)("option",{value:i.X.CANCELLED,children:e("reservations.status.cancelled","Storniert")}),(0,p.jsx)("option",{value:i.X.NO_SHOW,children:e("reservations.status.noShow","Nicht erschienen")})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("reservations.paymentStatus","Zahlungsstatus")}),(0,p.jsxs)("select",{value:y,onChange:e=>R(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,p.jsx)("option",{value:"all",children:e("common.all","Alle")}),(0,p.jsx)("option",{value:i.d.PENDING,children:e("reservations.paymentStatus.pending","Ausstehend")}),(0,p.jsx)("option",{value:i.d.PAID,children:e("reservations.paymentStatus.paid","Bezahlt")}),(0,p.jsx)("option",{value:i.d.PARTIALLY_PAID,children:e("reservations.paymentStatus.partiallyPaid","Teilweise bezahlt")}),(0,p.jsx)("option",{value:i.d.REFUNDED,children:e("reservations.paymentStatus.refunded","Erstattet")})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("branches.name","Branch")}),(0,p.jsxs)("select",{value:C,onChange:e=>A("all"===e.target.value?"all":parseInt(e.target.value)),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,p.jsx)("option",{value:"all",children:e("common.all","Alle")}),S.map((e=>(0,p.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})]}),("all"!==b||"all"!==y||"all"!==C)&&(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)("button",{onClick:()=>{v("all"),R("all"),A("all")},className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:e("common.clearFilters","Filter zur\xfccksetzen")})})]})]}),0===W.length?(0,p.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 text-center",children:[(0,p.jsx)(d.A,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),(0,p.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:L||"all"!==b||"all"!==y?e("reservations.noResults","Keine Reservierungen gefunden"):e("reservations.noReservations","Keine Reservierungen vorhanden")})]}):(0,p.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:W.map((e=>(0,p.jsx)(k,{reservation:e,onClick:()=>t("/reservations/".concat(e.id)),onUpdate:B},e.id)))}),W.length>0&&(0,p.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 text-center",children:e("reservations.resultCount","".concat(W.length," von ").concat(c.length," Reservierungen"),{count:W.length,total:c.length})}),(0,p.jsx)(f.A,{isOpen:M,onClose:()=>_(!1),onReservationCreated:async e=>{await B(),t("/reservations/".concat(e.id))}})]})},C=()=>{const{t:e}=(0,s.Bd)();return(0,p.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,p.jsxs)("div",{className:"mb-6",children:[(0,p.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("reservations.title","Reservierungen")}),(0,p.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("reservations.description","Verwalten Sie alle Reservierungen und Check-ins")})]}),(0,p.jsx)(R,{})]})}},7925:(e,r,t)=>{t.d(r,{A:()=>o});var a=t(45),s=t(5043);const n=["title","titleId"];function l(e,r){let{title:t,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":l},o),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const o=s.forwardRef(l)},7988:(e,r,t)=>{t.d(r,{A:()=>o});var a=t(45),s=t(5043);const n=["title","titleId"];function l(e,r){let{title:t,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":l},o),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const o=s.forwardRef(l)},8010:(e,r,t)=>{t.d(r,{A:()=>o});var a=t(45),s=t(5043);const n=["title","titleId"];function l(e,r){let{title:t,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":l},o),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const o=s.forwardRef(l)},8662:(e,r,t)=>{t.d(r,{A:()=>o});var a=t(45),s=t(5043);const n=["title","titleId"];function l(e,r){let{title:t,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":l},o),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const o=s.forwardRef(l)},8682:(e,r,t)=>{t.d(r,{A:()=>o});var a=t(45),s=t(5043);const n=["title","titleId"];function l(e,r){let{title:t,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":l},o),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const o=s.forwardRef(l)},9850:(e,r,t)=>{t.d(r,{A:()=>o});var a=t(45),s=t(5043);const n=["title","titleId"];function l(e,r){let{title:t,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":l},o),t?s.createElement("title",{id:l},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const o=s.forwardRef(l)}}]);
//# sourceMappingURL=784.16124680.chunk.js.map