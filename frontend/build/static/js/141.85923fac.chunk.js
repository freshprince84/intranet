"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[141],{1141:(e,r,s)=>{s.r(r),s.d(r,{default:()=>x});var t=s(9379),a=s(5043),d=s(3216),l=s(5475),o=s(4117),n=s(1923),c=s(3164),i=s(579);const x=()=>{const e=(0,d.Zp)(),{t:r}=(0,o.Bd)(),[s]=(0,l.ok)(),x=s.get("token"),[h,m]=(0,a.useState)({password:"",confirmPassword:""}),[g,u]=(0,a.useState)(""),[w,b]=(0,a.useState)(!1),[p,v]=(0,a.useState)(!1),[k,f]=(0,a.useState)(!1);(0,a.useEffect)((()=>{x||(f(!0),u(r("resetPassword.noToken")))}),[x,r]);const j=e=>{m((0,t.A)((0,t.A)({},h),{},{[e.target.name]:e.target.value})),u("")};return k?(0,i.jsxs)("div",{className:"min-h-screen flex items-center justify-center dark:bg-gray-900 relative",children:[(0,i.jsx)("div",{className:"fixed top-2 right-2 z-50",children:(0,i.jsx)(c.A,{})}),(0,i.jsxs)("div",{className:"max-w-lg w-full space-y-8 p-10 bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-900 dark:text-white",children:r("resetPassword.title")}),(0,i.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4",children:(0,i.jsx)("p",{className:"text-red-800 dark:text-red-200 text-center",children:r("resetPassword.noToken")})}),(0,i.jsx)("div",{className:"text-center",children:(0,i.jsx)(l.N_,{to:"/forgot-password",className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:r("resetPassword.requestNewLink")})})]})]}):(0,i.jsxs)("div",{className:"min-h-screen flex items-center justify-center dark:bg-gray-900 relative",children:[(0,i.jsx)("div",{className:"fixed top-2 right-2 z-50",children:(0,i.jsx)(c.A,{})}),(0,i.jsxs)("div",{className:"max-w-lg w-full space-y-8 p-10 bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,i.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-900 dark:text-white",children:r("resetPassword.title")}),w?(0,i.jsxs)("div",{className:"mt-8 space-y-4",children:[(0,i.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-md p-4",children:(0,i.jsx)("p",{className:"text-green-800 dark:text-green-200 text-center",children:r("resetPassword.success")})}),(0,i.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center",children:r("resetPassword.redirecting")})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{className:"text-center text-gray-600 dark:text-gray-400",children:r("resetPassword.description")}),g&&(0,i.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4",children:(0,i.jsx)("p",{className:"text-red-800 dark:text-red-200 text-center",children:g})}),(0,i.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),u(""),!x)return void u(r("resetPassword.noToken"));if(h.password!==h.confirmPassword)return void u(r("resetPassword.passwordsDoNotMatch"));const t=h.password.length<8?r("resetPassword.passwordTooShort"):null;if(t)u(t);else{v(!0);try{await n.A.post("/auth/reset-password",{token:x,password:h.password}),b(!0),setTimeout((()=>{e("/login")}),3e3)}catch(l){var a,d;console.error("Passwort-Reset Fehler:",l);const e=(null===(a=l.response)||void 0===a||null===(d=a.data)||void 0===d?void 0:d.message)||l.message||r("resetPassword.error");u(e)}finally{v(!1)}}},className:"mt-8 space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:r("resetPassword.newPassword")}),(0,i.jsx)("input",{type:"password",name:"password",id:"password",value:h.password,onChange:j,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm dark:bg-gray-700 dark:text-white px-3 py-2",disabled:p,minLength:8,placeholder:r("resetPassword.passwordPlaceholder")}),(0,i.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:r("resetPassword.passwordHint")})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:r("resetPassword.confirmPassword")}),(0,i.jsx)("input",{type:"password",name:"confirmPassword",id:"confirmPassword",value:h.confirmPassword,onChange:j,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm dark:bg-gray-700 dark:text-white px-3 py-2",disabled:p,minLength:8,placeholder:r("resetPassword.confirmPasswordPlaceholder")})]}),(0,i.jsx)("button",{type:"submit",className:"w-full py-2 px-4 text-white rounded-md ".concat(p?"bg-blue-400 dark:bg-blue-500 cursor-not-allowed":"bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-800"),disabled:p,children:r(p?"resetPassword.submitting":"resetPassword.submit")})]}),(0,i.jsx)("div",{className:"text-center mt-4",children:(0,i.jsx)(l.N_,{to:"/login",className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:r("resetPassword.backToLogin")})})]})]})]})}},3164:(e,r,s)=>{s.d(r,{A:()=>c});var t=s(5043),a=s(4117),d=s(8120),l=s(1958),o=s(579);const n=e=>{let{country:r}=e;return{de:(0,o.jsxs)("svg",{className:"w-4 h-4 inline-block mr-1",viewBox:"0 0 640 480",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{fill:"#000",d:"M0 0h640v480H0z"}),(0,o.jsx)("path",{fill:"#DD0000",d:"M0 160h640v160H0z"}),(0,o.jsx)("path",{fill:"#FFCE00",d:"M0 320h640v160H0z"})]}),es:(0,o.jsxs)("svg",{className:"w-4 h-4 inline-block mr-1",viewBox:"0 0 640 480",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{fill:"#FCD116",d:"M0 0h640v240H0z"}),(0,o.jsx)("path",{fill:"#003893",d:"M0 240h640v120H0z"}),(0,o.jsx)("path",{fill:"#CE1126",d:"M0 360h640v120H0z"})]}),en:(0,o.jsxs)("svg",{className:"w-4 h-4 inline-block mr-1",viewBox:"0 0 640 480",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{fill:"#012169",d:"M0 0h640v480H0z"}),(0,o.jsx)("path",{fill:"#FFF",d:"M75 0l244 181L562 0h78v62L400 241l240 178v61H409L240 301 0 480H0v-60l239-178L0 64V0h75z"}),(0,o.jsx)("path",{fill:"#C8102E",d:"M424 281l218 162h-46L378 281h46zm-184 20l6 35L54 480H0l240-179zM640 0v3L391 191l2-44L590 0h50zM0 0l239 177h-60L0 42V0z"}),(0,o.jsx)("path",{fill:"#FFF",d:"M241 0v480h160V0H241zM0 160v160h640V160H0z"}),(0,o.jsx)("path",{fill:"#C8102E",d:"M0 193v96h640v-96H0zM273 0v480h96V0h-96z"})]})}[r]},c=e=>{var r;let{className:s=""}=e;const{t:c}=(0,a.Bd)(),[i,x]=(0,t.useState)(!1),h=(0,t.useRef)(null),m=d.A.language||"de",g=[{code:"de",label:"DE"},{code:"es",label:"ES"},{code:"en",label:"EN"}];return(0,t.useEffect)((()=>{const e=e=>{h.current&&!h.current.contains(e.target)&&x(!1)};return i&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[i]),(0,o.jsxs)("div",{className:"relative ".concat(s),ref:h,children:[(0,o.jsxs)("button",{type:"button",onClick:()=>x(!i),className:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center gap-1",style:{minWidth:"90px"},children:[(0,o.jsx)(n,{country:m}),(0,o.jsx)("span",{children:(null===(r=g.find((e=>e.code===m)))||void 0===r?void 0:r.label)||"DE"}),(0,o.jsx)("svg",{className:"w-3 h-3 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&(0,o.jsx)("div",{className:"absolute right-0 mt-1 w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg z-50",children:g.map((e=>(0,o.jsxs)("button",{type:"button",onClick:()=>(async e=>{await l.A.setLanguage(e),document.documentElement.lang=e,x(!1)})(e.code),className:"w-full px-3 py-2 text-sm text-left flex items-center gap-1 hover:bg-gray-100 dark:hover:bg-gray-600 ".concat(m===e.code?"bg-blue-50 dark:bg-blue-900/20":""),children:[(0,o.jsx)(n,{country:e.code}),(0,o.jsx)("span",{children:e.label})]},e.code)))})]})}}}]);
//# sourceMappingURL=141.85923fac.chunk.js.map