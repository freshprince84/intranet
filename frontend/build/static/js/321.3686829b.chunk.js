"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[321],{1321:(e,t,r)=>{r.r(t),r.d(t,{default:()=>I});var a=r(5043),s=r(4117),i=r(2760),n=r(7855),l=r(6507),o=r(7952),d=r(1801),c=r(1923),x=r(7449),m=r(1816),p=r(579);const g=()=>{const{t:e}=(0,s.Bd)(),{hasPermission:t}=(0,i.S)(),{showMessage:r}=(0,n.A)(),g=(0,l.qz)(),{branches:y,selectedBranch:h}=(0,o.O)(),u=y.find((e=>e.id===h))||null,b=(null===g||void 0===g?void 0:g.handleError)||(t=>{var a,s;console.error(e("common.error","Fehler"),t);const i=(null===t||void 0===t||null===(a=t.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||(null===t||void 0===t?void 0:t.message)||e("common.errorOccurred","Ein Fehler ist aufgetreten");r(i,"error")}),[v,w]=(0,a.useState)([]),[k,f]=(0,a.useState)(!1),[j,N]=(0,a.useState)(!1),[A,S]=(0,a.useState)(!1),[C,E]=(0,a.useState)("booking.com"),I=(0,a.useRef)(null),P=(0,a.useCallback)((async()=>{if(u){f(!0);try{const e=await c.A.get(d.Sn.PRICE_ANALYSIS.OTA.LISTINGS,{params:{branchId:u.id}});w(e.data)}catch(e){b(e)}finally{f(!1)}}}),[u,b]);(0,a.useEffect)((()=>(u&&P(),()=>{I.current&&clearTimeout(I.current)})),[u,P]);const L=(0,a.useCallback)((async()=>{if(u)if(t("price_analysis_run_rate_shopping","write","button")){N(!0);try{var a;const t=new Date,i=new Date;i.setMonth(i.getMonth()+3);const n={branchId:u.id,platform:C,startDate:t.toISOString().split("T")[0],endDate:i.toISOString().split("T")[0]},l=await c.A.post(d.Sn.PRICE_ANALYSIS.OTA.RATE_SHOPPING,n);var s;if(null!==(a=l.data)&&void 0!==a&&a.success)r(e("priceAnalysis.rateShopping.started","Rate Shopping gestartet"),"success");else r((null===(s=l.data)||void 0===s?void 0:s.message)||e("priceAnalysis.rateShopping.started","Rate Shopping gestartet"),"success");I.current&&clearTimeout(I.current),I.current=setTimeout((()=>{P()}),2e3)}catch(i){b(i)}finally{N(!1)}}else r(e("common.noPermission"),"error")}),[u,C,t,r,e,b,P]),_=(0,a.useCallback)((async()=>{if(u)if(t("price_analysis_run_rate_shopping","write","button")){S(!0);try{var a;const t=await c.A.post(d.Sn.PRICE_ANALYSIS.OTA.DISCOVER,{branchId:u.id,platform:C});var s;if(null!==(a=t.data)&&void 0!==a&&a.success)r(e("priceAnalysis.discovery.completed",{count:t.data.listingsFound||0,defaultValue:"".concat(t.data.listingsFound||0," Listings gefunden")}),"success"),await P();else r((null===(s=t.data)||void 0===s?void 0:s.message)||e("priceAnalysis.discovery.error"),"error")}catch(i){b(i)}finally{S(!1)}}else r(e("common.noPermission"),"error")}),[u,C,t,r,e,b,P]);return k?(0,p.jsx)("div",{className:"text-center py-4",children:e("priceAnalysis.loading")}):(0,p.jsxs)("div",{className:"bg-white rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,p.jsxs)("div",{className:"mb-4 flex items-center gap-2",children:[(0,p.jsxs)("select",{value:C,onChange:e=>E(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",children:[(0,p.jsx)("option",{value:"booking.com",children:"Booking.com"}),(0,p.jsx)("option",{value:"hostelworld.com",children:"Hostelworld"})]}),(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:_,disabled:A||!t("price_analysis_run_rate_shopping","write","button"),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e("priceAnalysis.discovery.discover","Listings finden"),children:(0,p.jsx)(x.A,{className:"h-5 w-5 ".concat(A?"animate-pulse":"")})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("priceAnalysis.discovery.discover","Listings finden")})]}),(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:L,disabled:j||!t("price_analysis_run_rate_shopping","write","button"),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e("priceAnalysis.rateShopping.run","Rate Shopping starten"),children:(0,p.jsx)(m.A,{className:"h-5 w-5 ".concat(j?"animate-spin":"")})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("priceAnalysis.rateShopping.run","Rate Shopping starten")})]})]}),0===v.length?(0,p.jsx)("div",{className:"text-center py-4 text-gray-600 dark:text-gray-400",children:e("priceAnalysis.noListings")}):(0,p.jsx)("div",{className:"overflow-x-auto",children:(0,p.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,p.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.platform")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("branches.city")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.roomType")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.roomName")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.listingUrl")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.status")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.lastScraped")})]})}),(0,p.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:v.map((t=>(0,p.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.platform}),(0,p.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[t.city,t.country?", ".concat(t.country):""]}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:"dorm"===t.roomType?e("priceAnalysis.dorm","Dorm"):e("priceAnalysis.private","Privatzimmer")}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.roomName||"-"}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.listingUrl?(0,p.jsx)("a",{href:t.listingUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:e("common.view")}):"-"}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,p.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(t.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"),children:t.isActive?e("priceAnalysis.active"):e("priceAnalysis.inactive")})}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.lastScrapedAt?new Date(t.lastScrapedAt).toLocaleDateString():t.priceData.length>0?new Date(t.priceData[0].scrapedAt).toLocaleDateString():"-"})]},t.id)))})]})})]})};var y=r(8552);const h=()=>{const{t:e}=(0,s.Bd)(),{hasPermission:t}=(0,i.S)(),{showMessage:r}=(0,n.A)(),x=(0,l.qz)(),{branches:m,selectedBranch:g}=(0,o.O)(),h=m.find((e=>e.id===g))||null,u=(null===x||void 0===x?void 0:x.handleError)||(t=>{var a,s;console.error(e("common.error","Fehler"),t);const i=(null===t||void 0===t||null===(a=t.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||(null===t||void 0===t?void 0:t.message)||e("common.errorOccurred","Ein Fehler ist aufgetreten");r(i,"error")}),[b,v]=(0,a.useState)([]),[w,k]=(0,a.useState)(!1),[f,j]=(0,a.useState)(!1),N=(0,a.useRef)(null),A=(0,a.useCallback)((async()=>{if(h){k(!0);try{const e=await c.A.get(d.Sn.PRICE_ANALYSIS.ANALYSES,{params:{branchId:h.id}});v(e.data)}catch(e){u(e)}finally{k(!1)}}}),[h,u]);(0,a.useEffect)((()=>(h&&A(),()=>{N.current&&clearTimeout(N.current)})),[h,A]);const S=(0,a.useCallback)((async()=>{if(h)if(t("price_analysis","write","page")){j(!0);try{const t=new Date,a=new Date;a.setMonth(a.getMonth()+3),await c.A.post(d.Sn.PRICE_ANALYSIS.ANALYZE,{branchId:h.id,startDate:t.toISOString().split("T")[0],endDate:a.toISOString().split("T")[0]}),r(e("priceAnalysis.analysis.started","Preisanalyse gestartet"),"success"),N.current&&clearTimeout(N.current),N.current=setTimeout((()=>{A()}),2e3)}catch(a){u(a)}finally{j(!1)}}else r(e("common.noPermission"),"error")}),[h,t,r,e,u,A]),C=e=>null===e?"-":new Intl.NumberFormat("de-DE",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),E=e=>{if(null===e||void 0===e)return"-";const t="string"===typeof e?parseFloat(e):e;return isNaN(t)?"-":"".concat(t.toFixed(1),"%")};return w?(0,p.jsx)("div",{className:"text-center py-4",children:e("priceAnalysis.loading")}):(0,p.jsxs)("div",{className:"bg-white rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:S,disabled:f||!t("price_analysis","write","page"),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e("priceAnalysis.analysis.run","Preisanalyse starten"),children:(0,p.jsx)(y.A,{className:"h-5 w-5 ".concat(f?"animate-pulse":"")})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("priceAnalysis.analysis.run","Preisanalyse starten")})]})}),0===b.length?(0,p.jsx)("div",{className:"text-center py-4 text-gray-600 dark:text-gray-400",children:e("priceAnalysis.noAnalyses","Keine Preisanalysen gefunden")}):(0,p.jsx)("div",{className:"overflow-x-auto",children:(0,p.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,p.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.analysis.date","Datum")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.analysis.categoryId","Kategorie")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.analysis.roomType","Zimmerart")}),(0,p.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.analysis.currentPrice","Aktueller Preis")}),(0,p.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.analysis.averagePrice","\xd8 Preis")}),(0,p.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.analysis.minPrice","Min")}),(0,p.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.analysis.maxPrice","Max")}),(0,p.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.analysis.occupancyRate","Belegung")}),(0,p.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.analysis.availableRooms","Verf\xfcgbar")}),(0,p.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.analysis.competitorPrice","Konkurrenz")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.analysis.pricePosition","Position")}),(0,p.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.analysis.recommendations","Empfehlungen")})]})}),(0,p.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:b.map((t=>{var r,a,s;return(0,p.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:(s=t.analysisDate,new Date(s).toLocaleDateString("de-DE"))}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:t.categoryId||"-"}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:"dorm"===t.roomType?e("priceAnalysis.roomType.dorm","Dorm"):e("priceAnalysis.roomType.private","Privat")}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white text-right",children:C(t.currentPrice)}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white text-right",children:C(t.averagePrice)}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white text-right",children:C(t.minPrice)}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white text-right",children:C(t.maxPrice)}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white text-right",children:E(t.occupancyRate)}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white text-right",children:null!==(r=t.availableRooms)&&void 0!==r?r:"-"}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white text-right",children:C(t.competitorAvgPrice)}),(0,p.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["above"===t.pricePosition&&"\u2191 "+e("priceAnalysis.pricePosition.above","\xdcber"),"below"===t.pricePosition&&"\u2193 "+e("priceAnalysis.pricePosition.below","Unter"),"equal"===t.pricePosition&&"= "+e("priceAnalysis.pricePosition.equal","Gleich"),!t.pricePosition&&"-"]}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white text-right",children:(null===(a=t.recommendations)||void 0===a?void 0:a.length)||0})]},t.id)}))})]})})]})};var u=r(6443),b=r(5657),v=r(7985),w=r(9422),k=r(7591),f=r(6287);const j=()=>{const{t:e}=(0,s.Bd)(),{hasPermission:t}=(0,i.S)(),{showMessage:r}=(0,n.A)(),x=(0,l.qz)(),{branches:m,selectedBranch:g}=(0,o.O)(),y=m.find((e=>e.id===g))||null,{openSidepane:h,closeSidepane:j}=(0,b.N)(),N=(null===x||void 0===x?void 0:x.handleError)||(t=>{var a,s;console.error(e("common.error","Fehler"),t);const i=(null===t||void 0===t||null===(a=t.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||(null===t||void 0===t?void 0:t.message)||e("common.errorOccurred","Ein Fehler ist aufgetreten");r(i,"error")}),[A,S]=(0,a.useState)([]),[C,E]=(0,a.useState)(!1),[I,P]=(0,a.useState)("pending"),[L,_]=(0,a.useState)(!1),R=(0,a.useRef)(null),[O,T]=(0,a.useState)(!1),[D,z]=(0,a.useState)(!1),[B,M]=(0,a.useState)(null),[F,G]=(0,a.useState)(""),[J,Y]=(0,a.useState)(window.innerWidth<640);(0,a.useEffect)((()=>{const e=()=>{Y(window.innerWidth<640)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,a.useEffect)((()=>(O||D?h():j(),()=>{j()})),[O,D,h,j]);const U=(0,a.useCallback)((async()=>{if(y){E(!0);try{const e=await c.A.get(d.Sn.PRICE_ANALYSIS.RECOMMENDATIONS.BASE,{params:{branchId:y.id,status:I||void 0}});S(e.data)}catch(e){N(e)}finally{E(!1)}}}),[y,I,N]);(0,a.useEffect)((()=>(y&&U(),()=>{R.current&&clearTimeout(R.current)})),[y,I,U]);const q=(0,a.useCallback)((async()=>{if(y)if(t("price_analysis","write","page")){_(!0);try{const t=new Date,a=new Date;a.setMonth(a.getMonth()+3),await c.A.post(d.Sn.PRICE_ANALYSIS.RECOMMENDATIONS.GENERATE,{branchId:y.id,startDate:t.toISOString().split("T")[0],endDate:a.toISOString().split("T")[0]}),r(e("priceAnalysis.recommendations.generated","Preisempfehlungen generiert"),"success"),R.current&&clearTimeout(R.current),R.current=setTimeout((()=>{U()}),2e3)}catch(a){N(a)}finally{_(!1)}}else r(e("common.noPermission"),"error")}),[y,t,r,e,N,U]),W=(0,a.useCallback)((async a=>{if(t("price_analysis_apply_recommendation","write","button"))try{await c.A.post(d.Sn.PRICE_ANALYSIS.RECOMMENDATIONS.APPROVE(a)),r(e("priceAnalysis.recommendations.approved","Empfehlung genehmigt"),"success"),U()}catch(s){N(s)}else r(e("common.noPermission"),"error")}),[t,r,e,N,U]),Z=(0,a.useCallback)((a=>{t("price_analysis_apply_recommendation","write","button")?(M(a),G(""),T(!0)):r(e("common.noPermission"),"error")}),[t,r,e]),K=(0,a.useCallback)((async()=>{if(B)try{await c.A.post(d.Sn.PRICE_ANALYSIS.RECOMMENDATIONS.REJECT(B),{reason:F||void 0}),r(e("priceAnalysis.recommendations.rejected","Empfehlung abgelehnt"),"success"),T(!1),M(null),G(""),U()}catch(t){N(t)}}),[B,F,r,e,N,U]),X=(0,a.useCallback)((a=>{t("price_analysis_apply_recommendation","write","button")?(M(a),z(!0)):r(e("common.noPermission"),"error")}),[t,r,e]),V=(0,a.useCallback)((async()=>{if(B)try{await c.A.post(d.Sn.PRICE_ANALYSIS.RECOMMENDATIONS.APPLY(B)),r(e("priceAnalysis.recommendations.applied","Empfehlung angewendet"),"success"),z(!1),M(null),U()}catch(t){N(t)}}),[B,r,e,N,U]),H=e=>null===e?"-":new Intl.NumberFormat("de-DE",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Q=e=>{if(null===e||void 0===e)return"-";let t;if(t="object"===typeof e&&null!==e?"function"===typeof e.toNumber?e.toNumber():"function"===typeof e.toString?parseFloat(e.toString()):Number(e):Number(e),isNaN(t))return"-";return"".concat(t>=0?"+":"").concat(t.toFixed(1),"%")},$=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"approved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"applied":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},ee=t=>{switch(t){case"pending":return e("priceAnalysis.recommendations.status.pending","Ausstehend");case"approved":return e("priceAnalysis.recommendations.status.approved","Genehmigt");case"applied":return e("priceAnalysis.recommendations.status.applied","Angewendet");case"rejected":return e("priceAnalysis.recommendations.status.rejected","Abgelehnt");default:return t}};return C?(0,p.jsx)("div",{className:"text-center py-4",children:e("priceAnalysis.loading")}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"bg-white rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,p.jsxs)("div",{className:"mb-4 flex items-center gap-2 flex-wrap",children:[(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:q,disabled:L||!t("price_analysis","write","page"),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e("priceAnalysis.recommendations.generate","Empfehlungen generieren"),children:(0,p.jsx)(v.A,{className:"h-5 w-5 ".concat(L?"animate-pulse":"")})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("priceAnalysis.recommendations.generate","Empfehlungen generieren")})]}),(0,p.jsxs)("select",{value:I,onChange:e=>P(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-sm",children:[(0,p.jsx)("option",{value:"",children:e("priceAnalysis.recommendations.allStatuses","Alle Status")}),(0,p.jsx)("option",{value:"pending",children:e("priceAnalysis.recommendations.status.pending","Ausstehend")}),(0,p.jsx)("option",{value:"approved",children:e("priceAnalysis.recommendations.status.approved","Genehmigt")}),(0,p.jsx)("option",{value:"applied",children:e("priceAnalysis.recommendations.status.applied","Angewendet")}),(0,p.jsx)("option",{value:"rejected",children:e("priceAnalysis.recommendations.status.rejected","Abgelehnt")})]})]}),0===A.length?(0,p.jsx)("div",{className:"text-center py-4 text-gray-600 dark:text-gray-400",children:e("priceAnalysis.recommendations.noRecommendations","Keine Preisempfehlungen gefunden")}):(0,p.jsx)("div",{className:"overflow-x-auto",children:(0,p.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,p.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.recommendations.date","Datum")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.recommendations.categoryId","Kategorie")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.recommendations.roomType","Zimmerart")}),(0,p.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.recommendations.currentPrice","Aktueller Preis")}),(0,p.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.recommendations.recommendedPrice","Empfohlener Preis")}),(0,p.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.recommendations.change","\xc4nderung")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.recommendations.reasoning","Begr\xfcndung")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.recommendations.status","Status")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("common.actions","Aktionen")})]})}),(0,p.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:A.map((r=>{return(0,p.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:(a=r.date,new Date(a).toLocaleDateString("de-DE"))}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:r.categoryId||"-"}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:"dorm"===r.roomType?e("priceAnalysis.roomType.dorm","Dorm"):e("priceAnalysis.roomType.private","Privat")}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white text-right",children:H(r.currentPrice)}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900 dark:text-white text-right",children:H(r.recommendedPrice)}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right ".concat((r.priceChangePercent||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:Q(r.priceChangePercent)}),(0,p.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white max-w-xs",children:(0,p.jsx)("div",{className:"truncate",title:r.reasoning||"",children:r.reasoning||"-"})}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,p.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat($(r.status)),children:ee(r.status)})}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,p.jsxs)("div",{className:"flex items-center gap-2",children:["pending"===r.status&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:()=>W(r.id),disabled:!t("price_analysis_apply_recommendation","write","button"),className:"p-1.5 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 disabled:opacity-50 disabled:cursor-not-allowed",title:e("priceAnalysis.recommendations.approve","Genehmigen"),children:(0,p.jsx)(w.A,{className:"h-4 w-4"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("priceAnalysis.recommendations.approve","Genehmigen")})]}),(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:()=>Z(r.id),disabled:!t("price_analysis_apply_recommendation","write","button"),className:"p-1.5 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 disabled:opacity-50 disabled:cursor-not-allowed",title:e("priceAnalysis.recommendations.reject","Ablehnen"),children:(0,p.jsx)(k.A,{className:"h-4 w-4"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("priceAnalysis.recommendations.reject","Ablehnen")})]})]}),"approved"===r.status&&(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:()=>X(r.id),disabled:!t("price_analysis_apply_recommendation","write","button"),className:"p-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 disabled:opacity-50 disabled:cursor-not-allowed",title:e("priceAnalysis.recommendations.apply","Anwenden"),children:(0,p.jsx)(f.A,{className:"h-4 w-4"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("priceAnalysis.recommendations.apply","Anwenden")})]})]})})]},r.id);var a}))})]})})]}),O&&(0,p.jsx)(p.Fragment,{children:J?(0,p.jsxs)(u.lG,{open:O,onClose:()=>T(!1),className:"relative z-50",children:[(0,p.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,p.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,p.jsxs)(u.lG.Panel,{className:"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,p.jsx)(u.lG.Title,{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("priceAnalysis.recommendations.reject","Empfehlung ablehnen")}),(0,p.jsx)("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,p.jsx)(k.A,{className:"h-6 w-6"})})]}),(0,p.jsxs)("div",{className:"p-6",children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("priceAnalysis.recommendations.rejectReason","Grund f\xfcr Ablehnung (optional):")}),(0,p.jsx)("textarea",{value:F,onChange:e=>G(e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:e("priceAnalysis.recommendations.rejectReasonPlaceholder","Grund eingeben...")})]}),(0,p.jsxs)("div",{className:"flex justify-end gap-2 p-6 border-t border-gray-200 dark:border-gray-700",children:[(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:()=>T(!1),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:e("common.cancel","Abbrechen"),children:(0,p.jsx)(k.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("common.cancel","Abbrechen")})]}),(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:K,className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:e("priceAnalysis.recommendations.reject","Ablehnen"),children:(0,p.jsx)(k.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("priceAnalysis.recommendations.reject","Ablehnen")})]})]})]})})]}):(0,p.jsxs)("div",{className:"fixed top-16 bottom-0 right-0 max-w-md w-full bg-white dark:bg-gray-800 shadow-xl transform z-50 flex flex-col",style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",transform:O?"translateX(0)":"translateX(100%)",pointerEvents:O?"auto":"none"},children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0",children:[(0,p.jsx)("h2",{className:"text-lg font-semibold dark:text-white",children:e("priceAnalysis.recommendations.reject","Empfehlung ablehnen")}),(0,p.jsx)("button",{onClick:()=>T(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,p.jsx)(k.A,{className:"h-6 w-6"})})]}),(0,p.jsxs)("div",{className:"p-4 overflow-y-auto flex-1 min-h-0",children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("priceAnalysis.recommendations.rejectReason","Grund f\xfcr Ablehnung (optional):")}),(0,p.jsx)("textarea",{value:F,onChange:e=>G(e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:e("priceAnalysis.recommendations.rejectReasonPlaceholder","Grund eingeben...")})]}),(0,p.jsxs)("div",{className:"flex justify-end gap-2 p-4 border-t border-gray-200 dark:border-gray-700",children:[(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:()=>T(!1),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:e("common.cancel","Abbrechen"),children:(0,p.jsx)(k.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("common.cancel","Abbrechen")})]}),(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:K,className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:e("priceAnalysis.recommendations.reject","Ablehnen"),children:(0,p.jsx)(k.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("priceAnalysis.recommendations.reject","Ablehnen")})]})]})]})}),D&&(0,p.jsx)(p.Fragment,{children:J?(0,p.jsxs)(u.lG,{open:D,onClose:()=>z(!1),className:"relative z-50",children:[(0,p.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,p.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,p.jsxs)(u.lG.Panel,{className:"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,p.jsx)(u.lG.Title,{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("priceAnalysis.recommendations.applyConfirm","Empfehlung anwenden")}),(0,p.jsx)("button",{onClick:()=>z(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,p.jsx)(k.A,{className:"h-6 w-6"})})]}),(0,p.jsx)("div",{className:"p-6",children:(0,p.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("priceAnalysis.recommendations.applyConfirmText","M\xf6chten Sie diese Empfehlung wirklich anwenden?")})}),(0,p.jsxs)("div",{className:"flex justify-end gap-2 p-6 border-t border-gray-200 dark:border-gray-700",children:[(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:()=>z(!1),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:e("common.cancel","Abbrechen"),children:(0,p.jsx)(k.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("common.cancel","Abbrechen")})]}),(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:V,className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:e("priceAnalysis.recommendations.apply","Anwenden"),children:(0,p.jsx)(w.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("priceAnalysis.recommendations.apply","Anwenden")})]})]})]})})]}):(0,p.jsxs)("div",{className:"fixed top-16 bottom-0 right-0 max-w-md w-full bg-white dark:bg-gray-800 shadow-xl transform z-50 flex flex-col",style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",transform:D?"translateX(0)":"translateX(100%)",pointerEvents:D?"auto":"none"},children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0",children:[(0,p.jsx)("h2",{className:"text-lg font-semibold dark:text-white",children:e("priceAnalysis.recommendations.applyConfirm","Empfehlung anwenden")}),(0,p.jsx)("button",{onClick:()=>z(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,p.jsx)(k.A,{className:"h-6 w-6"})})]}),(0,p.jsx)("div",{className:"p-4 overflow-y-auto flex-1 min-h-0",children:(0,p.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("priceAnalysis.recommendations.applyConfirmText","M\xf6chten Sie diese Empfehlung wirklich anwenden?")})}),(0,p.jsxs)("div",{className:"flex justify-end gap-2 p-4 border-t border-gray-200 dark:border-gray-700",children:[(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:()=>z(!1),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:e("common.cancel","Abbrechen"),children:(0,p.jsx)(k.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("common.cancel","Abbrechen")})]}),(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:V,className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:e("priceAnalysis.recommendations.apply","Anwenden"),children:(0,p.jsx)(w.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("priceAnalysis.recommendations.apply","Anwenden")})]})]})]})})]})};var N=r(9379),A=r(8662),S=r(2811),C=r(9248);const E=()=>{const{t:e}=(0,s.Bd)(),{hasPermission:t}=(0,i.S)(),{showMessage:r}=(0,n.A)(),x=(0,l.qz)(),{branches:m,selectedBranch:g}=(0,o.O)(),y=m.find((e=>e.id===g))||null,{openSidepane:h,closeSidepane:v}=(0,b.N)(),f=(null===x||void 0===x?void 0:x.handleError)||(t=>{var a,s;console.error(e("common.error","Fehler"),t);const i=(null===t||void 0===t||null===(a=t.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||(null===t||void 0===t?void 0:t.message)||e("common.errorOccurred","Ein Fehler ist aufgetreten");r(i,"error")}),[j,E]=(0,a.useState)([]),[I,P]=(0,a.useState)(!1),[L,_]=(0,a.useState)(!1),[R,O]=(0,a.useState)(!1),[T,D]=(0,a.useState)(window.innerWidth<640);(0,a.useEffect)((()=>{const e=()=>{D(window.innerWidth<640)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,a.useEffect)((()=>(L||R?h():v(),()=>{v()})),[L,R,h,v]);const[z,B]=(0,a.useState)(null),[M,F]=(0,a.useState)(null),[G,J]=(0,a.useState)({name:"",description:"",priority:0,isActive:!0,conditions:JSON.stringify({occupancyRate:{operator:">",value:80}},null,2),action:JSON.stringify({type:"increase",value:15,maxChange:30,minPrice:4e4,maxPrice:8e4,cumulative:!0},null,2),roomTypes:"",categoryIds:""}),Y=(0,a.useCallback)((async()=>{if(y){P(!0);try{const e=await c.A.get(d.Sn.PRICE_ANALYSIS.RULES.BASE,{params:{branchId:y.id}});E(e.data)}catch(e){f(e)}finally{P(!1)}}}),[y,f]);(0,a.useEffect)((()=>{y&&Y()}),[y,Y]);const U=(0,a.useCallback)((()=>{B(null),J({name:"",description:"",priority:0,isActive:!0,conditions:JSON.stringify({occupancyRate:{operator:">",value:80}},null,2),action:JSON.stringify({type:"increase",value:15,maxChange:30,minPrice:4e4,maxPrice:8e4,cumulative:!0},null,2),roomTypes:"",categoryIds:""}),_(!0)}),[]),q=(0,a.useCallback)((e=>{B(e),J({name:e.name,description:e.description||"",priority:e.priority,isActive:e.isActive,conditions:JSON.stringify(e.conditions,null,2),action:JSON.stringify(e.action,null,2),roomTypes:e.roomTypes?JSON.stringify(e.roomTypes):"",categoryIds:e.categoryIds?JSON.stringify(e.categoryIds):""}),_(!0)}),[]),W=(0,a.useCallback)((a=>{t("price_analysis_delete_rule","write","button")?(F(a),O(!0)):r(e("common.noPermission"),"error")}),[t,r,e]),Z=(0,a.useCallback)((async()=>{if(M)try{await c.A.delete(d.Sn.PRICE_ANALYSIS.RULES.BY_ID(M)),r(e("priceAnalysis.rules.deleted","Regel gel\xf6scht"),"success"),O(!1),F(null),Y()}catch(t){f(t)}}),[M,r,e,f,Y]),K=(0,a.useCallback)((async t=>{if(t.preventDefault(),y)try{let t,s,i,n;try{t=JSON.parse(G.conditions),s=JSON.parse(G.action),i=G.roomTypes?JSON.parse(G.roomTypes):null,n=G.categoryIds?JSON.parse(G.categoryIds):null}catch(a){return void r(e("priceAnalysis.rules.invalidJson","Ung\xfcltiges JSON-Format"),"error")}const l={branchId:y.id,name:G.name,description:G.description||null,conditions:t,action:s,roomTypes:i,categoryIds:n,priority:G.priority,isActive:G.isActive};z?(await c.A.put(d.Sn.PRICE_ANALYSIS.RULES.BY_ID(z.id),l),r(e("priceAnalysis.rules.updated","Regel aktualisiert"),"success")):(await c.A.post(d.Sn.PRICE_ANALYSIS.RULES.BASE,l),r(e("priceAnalysis.rules.created","Regel erstellt"),"success")),_(!1),B(null),setTimeout((()=>{Y()}),500)}catch(a){f(a)}}),[y,G,z,r,e,f,Y]);return I?(0,p.jsx)("div",{className:"text-center py-4",children:e("priceAnalysis.loading")}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"bg-white rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,p.jsx)("div",{className:"mb-4",children:(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:U,disabled:!t("price_analysis_create_rule","write","button"),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:e("priceAnalysis.rules.create","Neue Regel erstellen"),children:(0,p.jsx)(A.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("priceAnalysis.rules.create","Neue Regel erstellen")})]})}),0===j.length?(0,p.jsx)("div",{className:"text-center py-4 text-gray-600 dark:text-gray-400",children:e("priceAnalysis.rules.noRules","Keine Preisregeln gefunden")}):(0,p.jsx)("div",{className:"overflow-x-auto",children:(0,p.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,p.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.rules.name","Name")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.rules.description","Beschreibung")}),(0,p.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.rules.priority","Priorit\xe4t")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.rules.status","Status")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.rules.createdBy","Erstellt von")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("priceAnalysis.rules.createdAt","Erstellt am")}),(0,p.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-400",children:e("common.actions","Aktionen")})]})}),(0,p.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:j.map((r=>{return(0,p.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:r.name}),(0,p.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 dark:text-white",children:r.description||"-"}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white text-right",children:r.priority}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,p.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(r.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"),children:r.isActive?e("priceAnalysis.active","Aktiv"):e("priceAnalysis.inactive","Inaktiv")})}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:r.createdByUser?"".concat(r.createdByUser.firstName||""," ").concat(r.createdByUser.lastName||"").trim()||r.createdByUser.username:"-"}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:(a=r.createdAt,new Date(a).toLocaleDateString("de-DE"))}),(0,p.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:()=>q(r),disabled:!t("price_analysis_edit_rule","write","button"),className:"p-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 disabled:opacity-50 disabled:cursor-not-allowed",title:e("common.edit","Bearbeiten"),children:(0,p.jsx)(S.A,{className:"h-4 w-4"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("common.edit","Bearbeiten")})]}),(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:()=>W(r.id),disabled:!t("price_analysis_delete_rule","write","button"),className:"p-1.5 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 disabled:opacity-50 disabled:cursor-not-allowed",title:e("common.delete","L\xf6schen"),children:(0,p.jsx)(C.A,{className:"h-4 w-4"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("common.delete","L\xf6schen")})]})]})})]},r.id);var a}))})]})})]}),L&&(0,p.jsx)(p.Fragment,{children:T?(0,p.jsxs)(u.lG,{open:L,onClose:()=>_(!1),className:"relative z-50",children:[(0,p.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,p.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,p.jsxs)(u.lG.Panel,{className:"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[90vh] overflow-y-auto",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,p.jsx)(u.lG.Title,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:z?e("priceAnalysis.rules.edit","Regel bearbeiten"):e("priceAnalysis.rules.create","Neue Regel erstellen")}),(0,p.jsx)("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,p.jsx)(k.A,{className:"h-6 w-6"})})]}),(0,p.jsxs)("form",{onSubmit:K,className:"p-6 space-y-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("priceAnalysis.rules.name","Name")," *"]}),(0,p.jsx)("input",{type:"text",value:G.name,onChange:e=>J((0,N.A)((0,N.A)({},G),{},{name:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("priceAnalysis.rules.description","Beschreibung")}),(0,p.jsx)("textarea",{value:G.description,onChange:e=>J((0,N.A)((0,N.A)({},G),{},{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white min-h-[60px]"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("priceAnalysis.rules.priority","Priorit\xe4t")}),(0,p.jsx)("input",{type:"number",value:G.priority,onChange:e=>J((0,N.A)((0,N.A)({},G),{},{priority:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)("input",{type:"checkbox",checked:G.isActive,onChange:e=>J((0,N.A)((0,N.A)({},G),{},{isActive:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,p.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("priceAnalysis.rules.isActive","Aktiv")})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("priceAnalysis.rules.conditions","Bedingungen")," (JSON) *"]}),(0,p.jsx)("textarea",{value:G.conditions,onChange:e=>J((0,N.A)((0,N.A)({},G),{},{conditions:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono min-h-[100px]"})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("priceAnalysis.rules.action","Aktion")," (JSON) *"]}),(0,p.jsx)("textarea",{value:G.action,onChange:e=>J((0,N.A)((0,N.A)({},G),{},{action:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono min-h-[100px]"})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("priceAnalysis.rules.roomTypes","Zimmerarten")," (JSON, optional)"]}),(0,p.jsx)("input",{type:"text",value:G.roomTypes,onChange:e=>J((0,N.A)((0,N.A)({},G),{},{roomTypes:e.target.value})),placeholder:'["dorm", "private"] oder leer f\xfcr alle',className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono"})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("priceAnalysis.rules.categoryIds","Kategorie-IDs")," (JSON, optional)"]}),(0,p.jsx)("input",{type:"text",value:G.categoryIds,onChange:e=>J((0,N.A)((0,N.A)({},G),{},{categoryIds:e.target.value})),placeholder:"[34280, 34281] oder leer f\xfcr alle",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono"})]}),(0,p.jsxs)("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{type:"button",onClick:()=>_(!1),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:e("common.cancel","Abbrechen"),children:(0,p.jsx)(k.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("common.cancel","Abbrechen")})]}),(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{type:"submit",className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:e("common.save","Speichern"),children:(0,p.jsx)(w.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("common.save","Speichern")})]})]})]})]})})]}):(0,p.jsxs)("div",{className:"fixed top-16 bottom-0 right-0 max-w-4xl w-full bg-white dark:bg-gray-800 shadow-xl transform z-50 flex flex-col",style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",transform:L?"translateX(0)":"translateX(100%)",pointerEvents:L?"auto":"none"},children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0",children:[(0,p.jsx)("h2",{className:"text-lg font-semibold dark:text-white",children:z?e("priceAnalysis.rules.edit","Regel bearbeiten"):e("priceAnalysis.rules.create","Neue Regel erstellen")}),(0,p.jsx)("button",{onClick:()=>_(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,p.jsx)(k.A,{className:"h-6 w-6"})})]}),(0,p.jsxs)("form",{onSubmit:K,className:"flex flex-col flex-1 min-h-0",children:[(0,p.jsxs)("div",{className:"flex-1 overflow-y-auto min-h-0 p-4 space-y-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("priceAnalysis.rules.name","Name")," *"]}),(0,p.jsx)("input",{type:"text",value:G.name,onChange:e=>J((0,N.A)((0,N.A)({},G),{},{name:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("priceAnalysis.rules.description","Beschreibung")}),(0,p.jsx)("textarea",{value:G.description,onChange:e=>J((0,N.A)((0,N.A)({},G),{},{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white min-h-[60px]"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("priceAnalysis.rules.priority","Priorit\xe4t")}),(0,p.jsx)("input",{type:"number",value:G.priority,onChange:e=>J((0,N.A)((0,N.A)({},G),{},{priority:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsx)("input",{type:"checkbox",checked:G.isActive,onChange:e=>J((0,N.A)((0,N.A)({},G),{},{isActive:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,p.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("priceAnalysis.rules.isActive","Aktiv")})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("priceAnalysis.rules.conditions","Bedingungen")," (JSON) *"]}),(0,p.jsx)("textarea",{value:G.conditions,onChange:e=>J((0,N.A)((0,N.A)({},G),{},{conditions:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono min-h-[100px]"})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("priceAnalysis.rules.action","Aktion")," (JSON) *"]}),(0,p.jsx)("textarea",{value:G.action,onChange:e=>J((0,N.A)((0,N.A)({},G),{},{action:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono min-h-[100px]"})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("priceAnalysis.rules.roomTypes","Zimmerarten")," (JSON, optional)"]}),(0,p.jsx)("input",{type:"text",value:G.roomTypes,onChange:e=>J((0,N.A)((0,N.A)({},G),{},{roomTypes:e.target.value})),placeholder:'["dorm", "private"] oder leer f\xfcr alle',className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono"})]}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("priceAnalysis.rules.categoryIds","Kategorie-IDs")," (JSON, optional)"]}),(0,p.jsx)("input",{type:"text",value:G.categoryIds,onChange:e=>J((0,N.A)((0,N.A)({},G),{},{categoryIds:e.target.value})),placeholder:"[34280, 34281] oder leer f\xfcr alle",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono"})]})]}),(0,p.jsxs)("div",{className:"flex justify-end gap-2 p-4 border-t border-gray-200 dark:border-gray-700",children:[(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{type:"button",onClick:()=>_(!1),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:e("common.cancel","Abbrechen"),children:(0,p.jsx)(k.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("common.cancel","Abbrechen")})]}),(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{type:"submit",className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:e("common.save","Speichern"),children:(0,p.jsx)(w.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("common.save","Speichern")})]})]})]})]})}),R&&(0,p.jsx)(p.Fragment,{children:T?(0,p.jsxs)(u.lG,{open:R,onClose:()=>O(!1),className:"relative z-50",children:[(0,p.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,p.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,p.jsxs)(u.lG.Panel,{className:"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,p.jsx)(u.lG.Title,{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("priceAnalysis.rules.deleteConfirm","Regel l\xf6schen")}),(0,p.jsx)("button",{onClick:()=>O(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,p.jsx)(k.A,{className:"h-6 w-6"})})]}),(0,p.jsx)("div",{className:"p-6",children:(0,p.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("priceAnalysis.rules.deleteConfirmText","M\xf6chten Sie diese Regel wirklich l\xf6schen?")})}),(0,p.jsxs)("div",{className:"flex justify-end gap-2 p-6 border-t border-gray-200 dark:border-gray-700",children:[(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:()=>O(!1),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:e("common.cancel","Abbrechen"),children:(0,p.jsx)(k.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("common.cancel","Abbrechen")})]}),(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:Z,className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:e("common.delete","L\xf6schen"),children:(0,p.jsx)(C.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("common.delete","L\xf6schen")})]})]})]})})]}):(0,p.jsxs)("div",{className:"fixed top-16 bottom-0 right-0 max-w-md w-full bg-white dark:bg-gray-800 shadow-xl transform z-50 flex flex-col",style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",transform:R?"translateX(0)":"translateX(100%)",pointerEvents:R?"auto":"none"},children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0",children:[(0,p.jsx)("h2",{className:"text-lg font-semibold dark:text-white",children:e("priceAnalysis.rules.deleteConfirm","Regel l\xf6schen")}),(0,p.jsx)("button",{onClick:()=>O(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,p.jsx)(k.A,{className:"h-6 w-6"})})]}),(0,p.jsx)("div",{className:"p-4 overflow-y-auto flex-1 min-h-0",children:(0,p.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("priceAnalysis.rules.deleteConfirmText","M\xf6chten Sie diese Regel wirklich l\xf6schen?")})}),(0,p.jsxs)("div",{className:"flex justify-end gap-2 p-4 border-t border-gray-200 dark:border-gray-700",children:[(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:()=>O(!1),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:e("common.cancel","Abbrechen"),children:(0,p.jsx)(k.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("common.cancel","Abbrechen")})]}),(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("button",{onClick:Z,className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:e("common.delete","L\xf6schen"),children:(0,p.jsx)(C.A,{className:"h-5 w-5"})}),(0,p.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e("common.delete","L\xf6schen")})]})]})]})})]})},I=()=>{const{t:e}=(0,s.Bd)(),{hasPermission:t,loading:r}=(0,i.S)(),[n,l]=(0,a.useState)("listings");return r?(0,p.jsx)("div",{className:"p-6 text-center",children:e("common.loading",{defaultValue:"L\xe4dt..."})}):t("price_analysis","read","page")?(0,p.jsxs)("div",{className:"p-6",children:[(0,p.jsx)("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:e("priceAnalysis.title")}),(0,p.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-6",children:(0,p.jsxs)("nav",{className:"-mb-px flex space-x-2 overflow-x-auto",children:[(0,p.jsx)("button",{type:"button",onClick:()=>l("listings"),className:"py-2 px-4 border-b-2 font-medium text-sm whitespace-nowrap ".concat("listings"===n?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:e("priceAnalysis.listings")}),(0,p.jsx)("button",{type:"button",onClick:()=>l("analysis"),className:"py-2 px-4 border-b-2 font-medium text-sm whitespace-nowrap ".concat("analysis"===n?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:e("priceAnalysis.tabAnalysis")}),(0,p.jsx)("button",{type:"button",onClick:()=>l("recommendations"),className:"py-2 px-4 border-b-2 font-medium text-sm whitespace-nowrap ".concat("recommendations"===n?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:e("priceAnalysis.tabRecommendations")}),(0,p.jsx)("button",{type:"button",onClick:()=>l("rules"),className:"py-2 px-4 border-b-2 font-medium text-sm whitespace-nowrap ".concat("rules"===n?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:e("priceAnalysis.tabRules")})]})}),"listings"===n&&(0,p.jsx)(g,{}),"analysis"===n&&(0,p.jsx)(h,{}),"recommendations"===n&&(0,p.jsx)(j,{}),"rules"===n&&(0,p.jsx)(E,{})]}):(0,p.jsxs)("div",{className:"p-6 text-center",children:[(0,p.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("common.error")}),(0,p.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:e("common.noPermission")})]})}},1816:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(45),s=r(5043);const i=["title","titleId"];function n(e,t){let{title:r,titleId:n}=e,l=(0,a.A)(e,i);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const l=s.forwardRef(n)},2811:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(45),s=r(5043);const i=["title","titleId"];function n(e,t){let{title:r,titleId:n}=e,l=(0,a.A)(e,i);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const l=s.forwardRef(n)},7449:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(45),s=r(5043);const i=["title","titleId"];function n(e,t){let{title:r,titleId:n}=e,l=(0,a.A)(e,i);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const l=s.forwardRef(n)},7985:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(45),s=r(5043);const i=["title","titleId"];function n(e,t){let{title:r,titleId:n}=e,l=(0,a.A)(e,i);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const l=s.forwardRef(n)},8552:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(45),s=r(5043);const i=["title","titleId"];function n(e,t){let{title:r,titleId:n}=e,l=(0,a.A)(e,i);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const l=s.forwardRef(n)},8662:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(45),s=r(5043);const i=["title","titleId"];function n(e,t){let{title:r,titleId:n}=e,l=(0,a.A)(e,i);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const l=s.forwardRef(n)},9248:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(45),s=r(5043);const i=["title","titleId"];function n(e,t){let{title:r,titleId:n}=e,l=(0,a.A)(e,i);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const l=s.forwardRef(n)},9422:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(45),s=r(5043);const i=["title","titleId"];function n(e,t){let{title:r,titleId:n}=e,l=(0,a.A)(e,i);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const l=s.forwardRef(n)}}]);
//# sourceMappingURL=321.3686829b.chunk.js.map