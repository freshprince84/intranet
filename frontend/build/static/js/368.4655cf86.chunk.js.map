{"version":3,"file":"static/js/368.4655cf86.chunk.js","mappings":"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","sources":["api/cerebroApi.ts","components/cerebro/ArticleList.tsx","components/cerebro/GitHubMarkdownViewer.tsx","components/cerebro/ArticleView.tsx","components/cerebro/ArticleEdit.tsx","hooks/useUnifiedEditor.ts","components/cerebro/ArticleStructure.tsx","components/cerebro/AddMedia.tsx","components/cerebro/AddExternalLink.tsx","components/cerebro/GitHubLinkManager.tsx","components/cerebro/GitHubLinkManagerWrapper.tsx","components/cerebro/CerebroHeader.tsx","pages/Cerebro.tsx"],"sourcesContent":["import api from './apiClient.ts';\n\n// Typen fr Artikel\nexport interface CerebroArticle {\n  id: string;\n  title: string;\n  slug: string;\n  content: string | null;\n  parentId: string | null;\n  createdAt: string;\n  updatedAt: string;\n  createdById: string;\n  updatedById: string | null;\n  creatorFirstName: string;\n  creatorLastName: string;\n  updaterFirstName: string | null;\n  updaterLastName: string | null;\n  childrenCount: number;\n  mediaCount: number;\n  linksCount: number;\n  position: number | null;\n  githubPath: string | null;  // Pfad zur GitHub Markdown-Datei\n}\n\nexport interface CerebroArticleDetail extends CerebroArticle {\n  parentTitle: string | null;\n  parentSlug: string | null;\n  children: {\n    id: string;\n    title: string;\n    slug: string;\n  }[];\n  media: CerebroMedia[];\n  externalLinks: CerebroExternalLink[];\n  tasks: {\n    id: string;\n    title: string;\n  }[];\n  requests: {\n    id: string;\n    title: string;\n  }[];\n  tags: string[];\n}\n\nexport interface CerebroArticleStructure {\n  id: string;\n  title: string;\n  slug: string;\n  position?: number | null;\n  children: CerebroArticleStructure[];\n}\n\n// Typen fr Medien\nexport interface CerebroMedia {\n  id: string;\n  filename: string;\n  mimetype: string;\n  path: string;\n  size: number;\n  createdAt: string;\n  createdById: string;\n  creatorFirstName: string;\n  creatorLastName: string;\n  carticleId: string;\n}\n\n// Typen fr externe Links\nexport interface CerebroExternalLink {\n  id: string;\n  url: string;\n  title: string;\n  type: string | null;\n  thumbnail: string | null;\n  createdAt: string;\n  createdById: string;\n  creatorFirstName: string;\n  creatorLastName: string;\n  carticleId: string;\n}\n\nexport interface LinkPreview {\n  title: string | null;\n  thumbnail: string | null;\n  type: string | null;\n}\n\n// Artikel API\nconst articlesApi = {\n  // Alle Artikel abrufen\n  getAllArticles: async (): Promise<CerebroArticle[]> => {\n    const response = await api.get('/cerebro/carticles');\n    return response.data;\n  },\n  \n  // Artikel nach ID abrufen\n  getArticleById: async (id: string): Promise<CerebroArticleDetail> => {\n    const response = await api.get(`/cerebro/carticles/${id}`);\n    return response.data;\n  },\n  \n  // Artikel nach Slug abrufen\n  getArticleBySlug: async (slug: string): Promise<CerebroArticleDetail> => {\n    const response = await api.get(`/cerebro/carticles/slug/${slug}`);\n    return response.data;\n  },\n  \n  // Artikel-Struktur abrufen\n  getArticlesStructure: async (): Promise<CerebroArticleStructure[]> => {\n    const response = await api.get('/cerebro/carticles/structure');\n    return response.data;\n  },\n  \n  // Artikel erstellen\n  createArticle: async (data: {\n    title: string;\n    parentId?: string | null;\n    content?: string;\n  }): Promise<CerebroArticle> => {\n    const response = await api.post('/cerebro/carticles', data);\n    return response.data;\n  },\n  \n  // Artikel aktualisieren\n  updateArticle: async (\n    id: string,\n    data: {\n      title?: string;\n      parentId?: string | null;\n      content?: string;\n    }\n  ): Promise<CerebroArticle> => {\n    const response = await api.put(`/cerebro/carticles/${id}`, data);\n    return response.data;\n  },\n  \n  // Artikel lschen\n  deleteArticle: async (id: string): Promise<void> => {\n    await api.delete(`/cerebro/carticles/${id}`);\n  },\n  \n  // Artikel suchen\n  searchArticles: async (query: string): Promise<CerebroArticle[]> => {\n    const response = await api.get(`/cerebro/carticles/search?q=${encodeURIComponent(query)}`);\n    return response.data;\n  },\n};\n\n// Medien API\nconst mediaApi = {\n  // Medien nach Artikel-ID abrufen\n  getMediaByArticle: async (carticleId: string): Promise<CerebroMedia[]> => {\n    const response = await api.get(`/cerebro/media/carticle/${carticleId}`);\n    return response.data;\n  },\n  \n  // Medien nach ID abrufen\n  getMediaById: async (id: string): Promise<CerebroMedia> => {\n    const response = await api.get(`/cerebro/media/${id}`);\n    return response.data;\n  },\n  \n  // Medien hochladen\n  uploadMedia: async (\n    formData: FormData,\n    onUploadProgress?: (progressEvent: any) => void\n  ): Promise<CerebroMedia> => {\n    // WICHTIG: Content-Type NICHT manuell setzen bei FormData!\n    // Axios setzt automatisch 'multipart/form-data' mit korrektem Boundary\n    const response = await api.post('/cerebro/media', formData, {\n      onUploadProgress,\n    });\n    return response.data;\n  },\n  \n  // Medien lschen\n  deleteMedia: async (id: string): Promise<void> => {\n    await api.delete(`/cerebro/media/${id}`);\n  },\n  \n  // Dateiname aktualisieren\n  updateMediaFilename: async (id: string, filename: string): Promise<CerebroMedia> => {\n    const response = await api.put(`/cerebro/media/${id}`, { filename });\n    return response.data;\n  },\n};\n\n// Externe Links API\nconst externalLinksApi = {\n  // Links nach Artikel-ID abrufen\n  getLinksByArticle: async (carticleId: string): Promise<CerebroExternalLink[]> => {\n    const response = await api.get(`/cerebro/links/carticle/${carticleId}`);\n    return response.data;\n  },\n  \n  // Link nach ID abrufen\n  getLinkById: async (id: string): Promise<CerebroExternalLink> => {\n    const response = await api.get(`/cerebro/links/${id}`);\n    return response.data;\n  },\n  \n  // Link-Vorschau abrufen\n  getLinkPreview: async (url: string): Promise<LinkPreview> => {\n    const response = await api.get(`/cerebro/links/preview?url=${encodeURIComponent(url)}`);\n    return response.data;\n  },\n  \n  // Link erstellen\n  createLink: async (link: {\n    url: string;\n    title?: string;\n    carticleSlug: string;\n  }): Promise<CerebroExternalLink> => {\n    const response = await api.post('/cerebro/links', link);\n    return response.data;\n  },\n  \n  // Link aktualisieren\n  updateLink: async (id: string, title: string): Promise<CerebroExternalLink> => {\n    const response = await api.put(`/cerebro/links/${id}`, { title });\n    return response.data;\n  },\n  \n  // Link lschen\n  deleteLink: async (id: string): Promise<void> => {\n    await api.delete(`/cerebro/links/${id}`);\n  },\n  \n  // Link erstellen\n  createExternalLink: async (data: {\n    carticleSlug: string;\n    url: string;\n    title?: string;\n    type?: string;\n  }): Promise<CerebroExternalLink> => {\n    const response = await api.post('/api/cerebro/links', data);\n    return response.data;\n  },\n  \n  // Link aktualisieren\n  updateExternalLink: async (\n    id: string,\n    data: {\n      url?: string;\n      title?: string;\n      type?: string;\n    }\n  ): Promise<CerebroExternalLink> => {\n    const response = await api.put(`/api/cerebro/links/${id}`, data);\n    return response.data;\n  },\n  \n  // Link lschen\n  deleteExternalLink: async (id: string): Promise<void> => {\n    await api.delete(`/api/cerebro/links/${id}`);\n  },\n};\n\n// Export des gesamten API-Clients\nexport const cerebroApi = {\n  articles: articlesApi,\n  media: mediaApi,\n  externalLinks: externalLinksApi,\n}; ","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { cerebroApi, CerebroArticle } from '../../api/cerebroApi.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\n\n// Icons\nimport { FaPlus, FaSearch, FaSortAlphaDown, FaSortAlphaUp, FaSortAmountDown, FaSortAmountUp } from 'react-icons/fa';\n\n// Typen fr die Props\ninterface ArticleListProps {\n  limit?: number;\n  searchQuery?: string;\n}\n\n// Artikellisten-Komponente\nconst ArticleList: React.FC<ArticleListProps> = ({ limit, searchQuery: initialSearchQuery }) => {\n  const { t } = useTranslation();\n  const [articles, setArticles] = useState<CerebroArticle[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState<string>(initialSearchQuery || '');\n  const [sortBy, setSortBy] = useState<'title' | 'updatedAt'>('updatedAt');\n  const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>('desc');\n  \n  const navigate = useNavigate();\n  const { hasPermission } = usePermissions();\n  const canCreateArticle = hasPermission('cerebro', 'write', 'cerebro');\n  \n  // Artikel laden\n  useEffect(() => {\n    const fetchArticles = async () => {\n      try {\n        setLoading(true);\n        \n        // Wenn ein Suchbegriff bergeben wurde, direkt danach suchen\n        if (initialSearchQuery) {\n          const data = await cerebroApi.articles.searchArticles(initialSearchQuery);\n          setArticles(data);\n        } else {\n          // Ansonsten alle Artikel laden\n          const data = await cerebroApi.articles.getAllArticles();\n          setArticles(data);\n        }\n        \n        setError(null);\n      } catch (err) {\n        console.error('Fehler beim Laden der Artikel:', err);\n        setError('Fehler beim Laden der Artikel. Bitte versuchen Sie es spter erneut.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchArticles();\n  }, [initialSearchQuery]);\n  \n  // Artikel suchen\n  const handleSearch = async () => {\n    if (!searchQuery.trim()) {\n      // Bei leerem Suchbegriff alle Artikel abrufen\n      try {\n        setLoading(true);\n        const data = await cerebroApi.articles.getAllArticles();\n        setArticles(data);\n        setError(null);\n      } catch (err) {\n        console.error('Fehler beim Laden der Artikel:', err);\n        setError('Fehler beim Laden der Artikel. Bitte versuchen Sie es spter erneut.');\n      } finally {\n        setLoading(false);\n      }\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      const data = await cerebroApi.articles.searchArticles(searchQuery);\n      setArticles(data);\n      setError(null);\n    } catch (err) {\n      console.error('Fehler bei der Suche:', err);\n      setError('Fehler bei der Suche. Bitte versuchen Sie es spter erneut.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  // Sortierung umschalten\n  const toggleSort = (field: 'title' | 'updatedAt') => {\n    if (sortBy === field) {\n      // Sortierrichtung umschalten\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n    } else {\n      // Sortierfeld ndern und Richtung zurcksetzen\n      setSortBy(field);\n      setSortDirection('asc');\n    }\n  };\n  \n  // Artikel sortieren\n  const sortedArticles = [...articles].sort((a, b) => {\n    if (sortBy === 'title') {\n      return sortDirection === 'asc' \n        ? a.title.localeCompare(b.title) \n        : b.title.localeCompare(a.title);\n    } else {\n      const dateA = new Date(a.updatedAt).getTime();\n      const dateB = new Date(b.updatedAt).getTime();\n      return sortDirection === 'asc' ? dateA - dateB : dateB - dateA;\n    }\n  });\n  \n  // Zum Artikel navigieren\n  const navigateToArticle = (slug: string) => {\n    navigate(`/cerebro/${slug}`);\n  };\n  \n  // Neuen Artikel erstellen\n  const navigateToCreateArticle = () => {\n    navigate('/cerebro/create');\n  };\n  \n  // Formatierungsfunktion fr Datum\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('de-DE', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  \n  // Hilfsfunktion fr den Anzeigenamen des Erstellers\n  const getCreatorName = (article: CerebroArticle) => {\n    if (article.creatorFirstName && article.creatorLastName) {\n      return `${article.creatorFirstName} ${article.creatorLastName}`;\n    }\n    return 'Unbekannt';\n  };\n\n  // Hilfsfunktion fr den bergeordneten Artikel\n  const getParentTitle = (article: CerebroArticle) => {\n    // Die parentId ist vorhanden, aber nicht der Titel des bergeordneten Artikels\n    // in der Standard-Artikelliste\n    return article.parentId ? 'Vorhanden' : 'Keine';\n  };\n  \n  return (\n    <div className=\"container mx-auto px-4 py-6\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-2xl font-bold dark:text-white\">Cerebro</h1>\n        {canCreateArticle && (\n          <button\n            className=\"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded flex items-center\"\n            onClick={navigateToCreateArticle}\n          >\n            <FaPlus className=\"mr-2\" /> {t('cerebro.articleList.newArticle', { defaultValue: 'Neuer Artikel' })}\n          </button>\n        )}\n      </div>\n      \n      {/* Suchleiste */}\n      <div className=\"mb-6\">\n        <div className=\"flex\">\n          <input\n            type=\"text\"\n            className=\"w-full md:w-[300px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-l-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            placeholder={t('cerebro.articleList.searchPlaceholder', { defaultValue: 'Artikel suchen...' })}\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            onKeyDown={(e) => e.key === 'Enter' && handleSearch()}\n          />\n          <button\n            className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-r-md flex items-center\"\n            onClick={handleSearch}\n          >\n            <FaSearch />\n          </button>\n        </div>\n      </div>\n      \n      {/* Fehlermeldung */}\n      {error && (\n        <div className=\"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4\">\n          {error}\n        </div>\n      )}\n      \n      {/* Ladeindikator */}\n      {loading ? (\n        <div className=\"flex justify-center items-center py-8\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 dark:border-blue-400\"></div>\n        </div>\n      ) : (\n        <>\n          {/* Artikeltabelle */}\n          {articles.length === 0 ? (\n            <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n              {searchQuery ? 'Keine Artikel gefunden, die Ihren Suchkriterien entsprechen.' : 'Noch keine Artikel vorhanden.'}\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto bg-white dark:bg-gray-800 rounded-lg shadow\">\n              <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n                <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                  <tr>\n                    <th\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer\"\n                      onClick={() => toggleSort('title')}\n                    >\n                      <div className=\"flex items-center\">\n                        Titel\n                        {sortBy === 'title' && (\n                          sortDirection === 'asc' ? <FaSortAlphaDown className=\"ml-1\" /> : <FaSortAlphaUp className=\"ml-1\" />\n                        )}\n                      </div>\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                      Erstellt von\n                    </th>\n                    <th\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer\"\n                      onClick={() => toggleSort('updatedAt')}\n                    >\n                      <div className=\"flex items-center\">\n                        Zuletzt aktualisiert\n                        {sortBy === 'updatedAt' && (\n                          sortDirection === 'asc' ? <FaSortAmountDown className=\"ml-1\" /> : <FaSortAmountUp className=\"ml-1\" />\n                        )}\n                      </div>\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                      bergeordnet\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                  {sortedArticles.map((article) => (\n                    <tr\n                      key={article.id}\n                      className=\"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer\"\n                      onClick={() => navigateToArticle(article.slug)}\n                    >\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm font-medium text-gray-900 dark:text-white\">{article.title}</div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400\">{getCreatorName(article)}</div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400\">{formatDate(article.updatedAt)}</div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                          {getParentTitle(article)}\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default ArticleList; ","import React, { useState, useEffect } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport rehypeRaw from 'rehype-raw';\nimport rehypeSanitize from 'rehype-sanitize';\nimport 'github-markdown-css/github-markdown.css'; // GitHub-Styling importieren\n\ninterface GitHubMarkdownViewerProps {\n  owner: string;\n  repo: string;\n  path: string;\n  branch?: string;\n}\n\nconst GitHubMarkdownViewer: React.FC<GitHubMarkdownViewerProps> = ({ \n  owner, \n  repo, \n  path, \n  branch = 'main' \n}) => {\n  const [content, setContent] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchMarkdown = async () => {\n      try {\n        setLoading(true);\n        // Erstellt die URL zur Rohdatei (raw) auf GitHub\n        const url = `https://raw.githubusercontent.com/${owner}/${repo}/${branch}/${path}`;\n        \n        const response = await fetch(url);\n        \n        if (!response.ok) {\n          throw new Error(`HTTP Fehler! Status: ${response.status}`);\n        }\n        \n        const markdownContent = await response.text();\n        setContent(markdownContent);\n        setError(null);\n      } catch (err) {\n        console.error('Fehler beim Laden der Markdown-Datei:', err);\n        setError(`Die Markdown-Datei konnte nicht geladen werden: ${err instanceof Error ? err.message : 'Unbekannter Fehler'}`);\n        setContent('');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchMarkdown();\n  }, [owner, repo, path, branch]);\n\n  // Vereinfachte Code-Komponenten ohne SyntaxHighlighter\n  const components = {\n    code({ node, inline, className, children, ...props }: any) {\n      const match = /language-(\\w+)/.exec(className || '');\n      return !inline && match ? (\n        <pre className={`language-${match[1]} dark:bg-gray-800 dark:border-gray-700`}>\n          <code className={`${className} dark:text-gray-200`} {...props}>\n            {String(children).replace(/\\n$/, '')}\n          </code>\n        </pre>\n      ) : (\n        <code className={`${className || ''} dark:bg-gray-800 dark:text-gray-200`} {...props}>\n          {children}\n        </code>\n      );\n    },\n    // Spezielle Handhabung fr berschriften, um konsistentes Styling zu gewhrleisten\n    h1: (props: any) => <h1 className=\"text-2xl font-bold mb-4 border-b border-gray-200 dark:border-gray-700 pb-2 dark:text-white\" {...props} />,\n    h2: (props: any) => <h2 className=\"text-xl font-bold mt-6 mb-4 border-b border-gray-200 dark:border-gray-700 pb-2 dark:text-white\" {...props} />,\n    h3: (props: any) => <h3 className=\"text-lg font-bold mt-5 mb-3 dark:text-white\" {...props} />,\n    // Spezielle Handhabung fr Links\n    a: (props: any) => <a className=\"text-blue-600 dark:text-blue-400 hover:underline\" target=\"_blank\" rel=\"noopener noreferrer\" {...props} />,\n    // Tabellen\n    table: (props: any) => <table className=\"border-collapse border border-gray-300 dark:border-gray-700 my-4\" {...props} />,\n    th: (props: any) => <th className=\"border border-gray-300 dark:border-gray-700 px-4 py-2 bg-gray-100 dark:bg-gray-800 dark:text-gray-200\" {...props} />,\n    td: (props: any) => <td className=\"border border-gray-300 dark:border-gray-700 px-4 py-2 dark:text-gray-200\" {...props} />,\n    // Listen\n    ul: (props: any) => <ul className=\"list-disc pl-5 mb-4 dark:text-gray-200\" {...props} />,\n    ol: (props: any) => <ol className=\"list-decimal pl-5 mb-4 dark:text-gray-200\" {...props} />,\n    li: (props: any) => <li className=\"mb-1 dark:text-gray-200\" {...props} />,\n    // Bilder\n    img: (props: any) => <img className=\"max-w-full h-auto my-4\" {...props} />,\n    // Paragraph\n    p: (props: any) => <p className=\"dark:text-gray-200 mb-4\" {...props} />,\n    // Blockquote\n    blockquote: (props: any) => <blockquote className=\"border-l-4 border-gray-300 dark:border-gray-700 pl-4 py-2 italic text-gray-600 dark:text-gray-400\" {...props} />\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center p-8\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 dark:border-blue-400\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded\">\n        <h3 className=\"font-bold\">Fehler</h3>\n        <p>{error}</p>\n        <p className=\"mt-2\">\n          Prfe, ob die Datei\n          <a \n            href={`https://github.com/${owner}/${repo}/blob/${branch}/${path}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-blue-600 dark:text-blue-400 hover:underline ml-1\"\n          >\n            {path}\n          </a>\n          {' '}im Repository existiert.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"github-markdown-content\">\n      <div className=\"bg-gray-100 dark:bg-gray-700 p-2 mb-4 rounded text-sm flex justify-between items-center\">\n        <span className=\"dark:text-gray-300\">\n          Datei: <code className=\"bg-white dark:bg-gray-800 px-1 py-0.5 rounded\">{path}</code>\n        </span>\n        <a \n          href={`https://github.com/${owner}/${repo}/blob/${branch}/${path}`}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"text-blue-600 dark:text-blue-400 hover:underline text-sm\"\n        >\n          Auf GitHub anzeigen \n        </a>\n      </div>\n      \n      {/* GitHub-spezifische CSS-Klasse anwenden */}\n      <div className=\"markdown-body dark:bg-gray-800 dark:text-white\">\n        <ReactMarkdown \n          components={components}\n          remarkPlugins={[remarkGfm]}\n          rehypePlugins={[rehypeRaw, rehypeSanitize]}\n        >\n          {content}\n        </ReactMarkdown>\n      </div>\n    </div>\n  );\n};\n\nexport default GitHubMarkdownViewer; ","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { cerebroApi, CerebroArticleDetail, CerebroExternalLink } from '../../api/cerebroApi.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport GitHubMarkdownViewer from './GitHubMarkdownViewer.tsx';\nimport MarkdownPreview from '../MarkdownPreview.tsx';\nimport { formatDateTimeForCerebro } from '../../utils/dateUtils.ts';\nimport { getCerebroMediaUrl } from '../../config/api.ts';\n\n// Heroicons\nimport { \n  ArrowLeftIcon,\n  PencilIcon,\n  TrashIcon,\n  PlusIcon,\n  UserCircleIcon,\n  ClockIcon,\n  ArrowDownTrayIcon,\n  LinkIcon,\n  DocumentIcon,\n  PhotoIcon,\n  FilmIcon,\n  DocumentTextIcon,\n  ArrowTopRightOnSquareIcon\n} from '@heroicons/react/24/outline';\n\n// Icon-Implementierung mit Heroicons\nconst Icon = {\n  Image: () => <PhotoIcon className=\"h-6 w-6 text-blue-500\" />,\n  Video: () => <FilmIcon className=\"h-6 w-6 text-red-500\" />,\n  PDF: () => <DocumentTextIcon className=\"h-6 w-6 text-red-700\" />,\n  File: () => <DocumentIcon className=\"h-6 w-6 text-gray-500\" />,\n  Download: () => <ArrowDownTrayIcon className=\"h-5 w-5 mr-1\" />,\n  GitHub: () => <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-gray-800\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z\"/></svg>,\n  ExternalLink: () => <ArrowTopRightOnSquareIcon className=\"h-5 w-5 text-green-600\" />,\n  Link: () => <LinkIcon className=\"h-5 w-5 mr-1\" />,\n  Spinner: () => <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>,\n  ArrowLeft: () => <ArrowLeftIcon className=\"h-5 w-5 mr-2\" />,\n  Edit: () => <PencilIcon className=\"h-5 w-5 mr-1\" />,\n  Trash: () => <TrashIcon className=\"h-5 w-5 mr-1\" />,\n  User: () => <UserCircleIcon className=\"h-5 w-5 mr-1\" />,\n  Clock: () => <ClockIcon className=\"h-5 w-5 mr-1\" />,\n  Plus: () => <PlusIcon className=\"h-5 w-5 mr-1\" />\n};\n\n// Hauptkomponente fr die Artikelansicht\nconst ArticleView: React.FC = () => {\n  const { t } = useTranslation();\n  const { slug } = useParams<{ slug: string }>();\n  const navigate = useNavigate();\n  const { hasPermission } = usePermissions();\n  \n  const [article, setArticle] = useState<CerebroArticleDetail | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [githubLinks, setGithubLinks] = useState<CerebroExternalLink[]>([]);\n  const [selectedGithubLink, setSelectedGithubLink] = useState<CerebroExternalLink | null>(null);\n  const [isInternalDocument, setIsInternalDocument] = useState<boolean>(false);\n  \n  // berprfen der Berechtigungen an die richtigen Berechtigungen anpassen\n  const hasCerebroButtonPermission = hasPermission('cerebro', 'both', 'button');\n  const hasCerebroPagePermission = hasPermission('cerebro', 'both', 'page');\n  \n  useEffect(() => {\n    const fetchArticle = async () => {\n      if (!slug) return;\n      \n      try {\n        setLoading(true);\n        \n        // Artikel und verknpfte Daten laden\n        const articleData = await cerebroApi.articles.getArticleBySlug(slug);\n        setArticle(articleData);\n        \n        // Sortiere GitHub-Markdown Links\n        const github = articleData.externalLinks.filter(link => link.type === 'github_markdown');\n        \n        setGithubLinks(github);\n        \n        // selectedGithubLink wird spter in checkIfInternalDocument gesetzt\n        // Nur fr interne Dokumente wird ein GitHub-Link ausgewhlt\n        \n        setError(null);\n      } catch (err) {\n        console.error('Fehler beim Laden des Artikels:', err);\n        setError(t('cerebro.messages.loadError'));\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchArticle();\n  }, [slug]);\n  \n  // Prfe, ob Artikel ein internes Dokument ist (nur fr interne Dokumente werden GitHub-Tabs angezeigt)\n  useEffect(() => {\n    const checkIfInternalDocument = async () => {\n      if (!article) return;\n      \n      try {\n        // Lade Markdown-Folder\n        const markdownFolder = await cerebroApi.articles.getArticleBySlug('markdown-folder');\n        \n        // Prfe, ob Artikel ein internes Dokument ist\n        // Ein Artikel ist ein internes Dokument, wenn:\n        // 1. Er ein Kind des markdown-folders ist ODER\n        // 2. Er einen githubPath hat\n        const isInternal = \n          (markdownFolder && article.parentId === markdownFolder.id) || \n          article.githubPath !== null;\n        \n        setIsInternalDocument(isInternal);\n        \n        // Nur fr interne Dokumente: GitHub-Link auswhlen\n        if (isInternal && githubLinks.length > 0) {\n          setSelectedGithubLink(githubLinks[0]);\n        } else {\n          // Fr normale Artikel: Kein GitHub-Link ausgewhlt\n          setSelectedGithubLink(null);\n        }\n      } catch (err) {\n        // Wenn Markdown-Folder nicht gefunden wird, prfe nur auf githubPath\n        console.warn('Markdown-Ordner nicht gefunden:', err);\n        const isInternal = article.githubPath !== null;\n        setIsInternalDocument(isInternal);\n        \n        if (isInternal && githubLinks.length > 0) {\n          setSelectedGithubLink(githubLinks[0]);\n        } else {\n          setSelectedGithubLink(null);\n        }\n      }\n    };\n    \n    if (article) {\n      checkIfInternalDocument();\n    } else {\n      // Kein Artikel geladen = definitiv kein internes Dokument\n      setIsInternalDocument(false);\n      setSelectedGithubLink(null);\n    }\n  }, [article, githubLinks]);\n  \n  const handleDeleteArticle = async () => {\n    if (!article || !window.confirm(t('cerebro.messages.deleteConfirm'))) {\n      return;\n    }\n    \n    try {\n      await cerebroApi.articles.deleteArticle(article.id);\n      navigate('/cerebro');\n    } catch (err) {\n      console.error('Fehler beim Lschen des Artikels:', err);\n      alert(t('cerebro.messages.deleteError'));\n    }\n  };\n  \n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center p-8\">\n        <Icon.Spinner />\n      </div>\n    );\n  }\n  \n  if (error || !article) {\n    return (\n      <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\n        <h3 className=\"font-bold\">{t('common.error')}</h3>\n        <p>{error || t('cerebro.messages.articleNotFound')}</p>\n        <button \n          onClick={() => navigate('/cerebro')}\n          className=\"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded flex items-center\"\n        >\n          <Icon.ArrowLeft /> {t('cerebro.actions.back')}\n        </button>\n      </div>\n    );\n  }\n  \n  // Artikel-Komponente rendern\n  const renderContent = () => {\n    // Nur fr interne Dokumente: GitHub-Markdown anzeigen, wenn ausgewhlt\n    if (isInternalDocument && selectedGithubLink) {\n      // GitHub-Markdown-Links parsen\n      const parseGitHubUrl = (url: string): { owner: string; repo: string; path: string; branch: string; } | null => {\n        try {\n          let owner = '';\n          let repo = '';\n          let path = '';\n          let branch = '';\n          \n          if (url.includes('raw.githubusercontent.com')) {\n            const parts = url.replace('https://raw.githubusercontent.com/', '').split('/');\n            owner = parts[0];\n            repo = parts[1];\n            branch = parts[2];\n            path = parts.slice(3).join('/');\n          } else if (url.includes('github.com')) {\n            const parts = url.replace('https://github.com/', '').split('/');\n            owner = parts[0];\n            repo = parts[1];\n            const typeIndex = parts.indexOf('blob') !== -1 ? parts.indexOf('blob') : parts.indexOf('raw');\n            branch = parts[typeIndex + 1];\n            path = parts.slice(typeIndex + 2).join('/');\n          } else {\n            return null;\n          }\n          \n          return { owner, repo, path, branch };\n        } catch (err) {\n          console.error('Fehler beim Parsen der GitHub-URL:', err);\n          return null;\n        }\n      };\n      \n      const githubInfo = parseGitHubUrl(selectedGithubLink.url);\n      \n      if (githubInfo) {\n        return (\n          <div>\n            <div className=\"bg-gray-100 p-2 rounded mb-4 flex justify-between items-center text-xs\">\n              <div>\n                <span className=\"font-mono text-gray-600\">{githubInfo.owner}/{githubInfo.repo}/{githubInfo.path}</span>\n                <span className=\"ml-2 px-2 py-1 bg-gray-200 rounded\">{githubInfo.branch}</span>\n              </div>\n              <a \n                href={selectedGithubLink.url} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\"\n                className=\"text-blue-600 hover:text-blue-800 flex items-center\"\n              >\n                <Icon.Link /> {t('cerebro.actions.viewOnGitHub')}\n              </a>\n            </div>\n            <GitHubMarkdownViewer\n              owner={githubInfo.owner}\n              repo={githubInfo.repo}\n              path={githubInfo.path}\n              branch={githubInfo.branch}\n            />\n          </div>\n        );\n      }\n    }\n    \n    // Generiere attachmentMetadata aus Medien\n    const attachmentMetadata = article.media.map(media => ({\n      id: parseInt(media.id, 10),\n      fileName: media.filename,\n      fileType: media.mimetype,\n      url: getCerebroMediaUrl(parseInt(media.id, 10))\n    }));\n    \n    // WICHTIG: Zeige ALLE Medien IMMER separat an, unabhngig davon, ob sie im Content referenziert sind\n    // Der Markdown-Link im Content ist optional und zeigt nur einen Link (keine Vorschau)\n    // Die separate Anzeige zeigt IMMER die Vorschau (wie bei Requests & Tasks)\n    \n    // MarkdownPreview mit showImagePreview verwenden\n    return (\n      <div>\n        <MarkdownPreview \n          content={article.content || ''}\n          showImagePreview={true}\n          attachmentMetadata={attachmentMetadata}\n        />\n        \n        {/* Zeige ALLE Medien immer separat an (wie bei Requests & Tasks) */}\n        {article.media.length > 0 && (\n          <div className=\"mt-6\">\n            <h3 className=\"text-lg font-semibold mb-3 dark:text-white\">Angehngte Dateien</h3>\n            <div className=\"flex flex-col gap-3\">\n              {article.media.map(media => {\n                const mediaUrl = getCerebroMediaUrl(parseInt(media.id, 10));\n                const isImage = media.mimetype.startsWith('image/');\n                const isPdf = media.mimetype === 'application/pdf';\n                const isVideo = media.mimetype.startsWith('video/');\n                \n                return (\n                  <div key={media.id} className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n                    {isImage ? (\n                      <div>\n                        <img \n                          src={mediaUrl} \n                          alt={media.filename} \n                          className=\"w-full h-auto max-h-96 object-contain\" \n                          style={{ display: 'block' }}\n                        />\n                      </div>\n                    ) : isPdf ? (\n                      <div className=\"p-3\">\n                        <div className=\"flex items-center mb-2\">\n                          <DocumentTextIcon className=\"h-4 w-4 mr-2 dark:text-gray-300\" />\n                          <span className=\"text-sm font-medium dark:text-gray-200\">{media.filename}</span>\n                          <a \n                            href={mediaUrl} \n                            target=\"_blank\" \n                            rel=\"noopener noreferrer\"\n                            className=\"ml-auto text-blue-600 dark:text-blue-400 hover:underline text-sm\"\n                          >\n                            ffnen\n                          </a>\n                        </div>\n                        <iframe \n                          src={`${mediaUrl}#view=FitH`} \n                          className=\"w-full rounded border dark:border-gray-600\"\n                          style={{ height: '400px' }}\n                          title={media.filename}\n                        />\n                      </div>\n                    ) : isVideo ? (\n                      <div className=\"p-3\">\n                        <div className=\"flex items-center mb-2\">\n                          <FilmIcon className=\"h-4 w-4 mr-2 dark:text-gray-300\" />\n                          <span className=\"text-sm font-medium dark:text-gray-200\">{media.filename}</span>\n                          <a \n                            href={mediaUrl} \n                            target=\"_blank\" \n                            rel=\"noopener noreferrer\"\n                            className=\"ml-auto text-blue-600 dark:text-blue-400 hover:underline text-sm\"\n                          >\n                            ffnen\n                          </a>\n                        </div>\n                        <video \n                          controls \n                          className=\"w-full rounded\"\n                          style={{ maxHeight: '400px' }}\n                        >\n                          <source src={mediaUrl} type={media.mimetype} />\n                          Ihr Browser untersttzt das Video-Tag nicht.\n                        </video>\n                      </div>\n                    ) : (\n                      <div className=\"p-3 flex items-center\">\n                        <DocumentIcon className=\"h-4 w-4 mr-2 dark:text-gray-300\" />\n                        <a \n                          href={mediaUrl} \n                          target=\"_blank\" \n                          rel=\"noopener noreferrer\"\n                          className=\"text-blue-600 dark:text-blue-400 hover:underline\"\n                        >\n                          {media.filename}\n                        </a>\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n  \n  return (\n    <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n      {/* Aktionsbereich oben (Button-Leiste) */}\n      <div className=\"flex justify-between items-center mb-4\">\n        <button \n          onClick={() => navigate('/cerebro')}\n          className=\"p-2 rounded-full text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700\"\n          aria-label={t('cerebro.back')}\n        >\n          <ArrowLeftIcon className=\"h-5 w-5\" />\n        </button>\n        \n        <div className=\"flex space-x-2\">\n          {hasCerebroButtonPermission && (\n            <>\n              <button \n                onClick={() => navigate(`/cerebro/${slug}/edit`)}\n                className=\"p-2 rounded-full text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900\"\n                aria-label=\"Bearbeiten\"\n              >\n                <PencilIcon className=\"h-5 w-5\" />\n              </button>\n              \n              <button \n                onClick={handleDeleteArticle}\n                className=\"p-2 rounded-full text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900\"\n                aria-label={t('cerebro.delete')}\n              >\n                <TrashIcon className=\"h-5 w-5\" />\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n      \n      {/* Artikelkopf mit Titel und Metadaten */}\n      <div className=\"mb-6\">\n        <h1 className=\"text-3xl font-bold dark:text-white\">{article.title}</h1>\n        <div className=\"flex text-gray-600 dark:text-gray-400 text-sm mt-2\">\n          <div className=\"flex items-center mr-4\">\n            <Icon.User /> \n            <span>{t('cerebro.createdBy')} {article.creatorFirstName} {article.creatorLastName}</span>\n          </div>\n          <div className=\"flex items-center\">\n            <Icon.Clock /> \n            <span>{t('cerebro.updatedAt')} {formatDateTimeForCerebro(article.updatedAt)}</span>\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"mb-6\">\n        {/* GitHub-Links als Tabs anzeigen, NUR fr interne Dokumente */}\n        {githubLinks.length > 0 && isInternalDocument && (\n          <div className=\"mb-4\">\n            <div className=\"border-b border-gray-200 dark:border-gray-700 mb-4\">\n              <div className=\"flex\">\n                {githubLinks.map(link => (\n                  <button\n                    key={link.id}\n                    className={`py-2 px-4 font-medium text-sm ${\n                      selectedGithubLink?.id === link.id\n                        ? 'border-b-2 border-blue-500 text-blue-600 dark:text-blue-400'\n                        : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n                    }`}\n                    onClick={() => setSelectedGithubLink(link)}\n                  >\n                    {link.title || 'GitHub'}\n                  </button>\n                ))}\n                <button\n                  className={`py-2 px-4 font-medium text-sm ${\n                    !selectedGithubLink\n                      ? 'border-b-2 border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n                  }`}\n                  onClick={() => setSelectedGithubLink(null)}\n                >\n                  {t('cerebro.article')}\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n        \n        {/* Inhalt des Artikels oder ausgewhlter GitHub-Markdown */}\n        <div className=\"prose dark:prose-invert max-w-full overflow-x-hidden\">\n          {renderContent()}\n        </div>\n      </div>\n      \n      {/* Aktions-Buttons fr Medien und Links */}\n      {hasCerebroButtonPermission && (\n        <div className=\"mb-6 flex space-x-2\">\n          <Link \n            to={`/cerebro/${slug}/media/add`}\n            className=\"p-2 rounded-full text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900\"\n            aria-label={t('cerebro.addMedia')}\n          >\n            <PlusIcon className=\"h-5 w-5\" />\n          </Link>\n          <Link \n            to={`/cerebro/${slug}/link/add`}\n            className=\"p-2 rounded-full text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900\"\n            aria-label={t('cerebro.addLink')}\n          >\n            <PlusIcon className=\"h-5 w-5\" />\n          </Link>\n          <Link \n            to={`/cerebro/${slug}/github/add`}\n            className=\"p-2 rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\"\n            aria-label={t('cerebro.addGitHubMarkdown')}\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z\"/></svg>\n          </Link>\n        </div>\n      )}\n      \n      {/* Verknpfte Tasks und Requests */}\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div className=\"border rounded p-4 dark:border-gray-700\">\n          <h2 className=\"text-xl font-bold mb-2 dark:text-white\">Verknpfte Tasks</h2>\n          <p className=\"text-gray-500 dark:text-gray-400\">Keine Tasks verknpft.</p>\n        </div>\n        \n        <div className=\"border rounded p-4 dark:border-gray-700\">\n          <h2 className=\"text-xl font-bold mb-2 dark:text-white\">Verknpfte Requests</h2>\n          <p className=\"text-gray-500 dark:text-gray-400\">Keine Requests verknpft.</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ArticleView; ","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { cerebroApi, CerebroArticleDetail } from '../../api/cerebroApi.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport { useUnifiedEditor } from '../../hooks/useUnifiedEditor.ts';\nimport MarkdownPreview from '../MarkdownPreview.tsx';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon, PhotoIcon, FilmIcon, DocumentTextIcon, DocumentIcon } from '@heroicons/react/24/outline';\n\n// Typen\ninterface FormData {\n  title: string;\n  parentId: string | null;\n  content: string;\n}\n\n// Hauptkomponente\nconst ArticleEdit: React.FC = () => {\n  const { t } = useTranslation();\n  const { slug } = useParams<{ slug: string }>();\n  const navigate = useNavigate();\n  const { hasPermission } = usePermissions();\n  \n  // Zustand\n  const [formData, setFormData] = useState<FormData>({\n    title: '',\n    parentId: null,\n    content: '',\n  });\n  const [loading, setLoading] = useState<boolean>(true);\n  const [saving, setSaving] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [articles, setArticles] = useState<{id: string, title: string}[]>([]);\n  const [isNewArticle, setIsNewArticle] = useState<boolean>(true);\n  const [articleId, setArticleId] = useState<string | null>(null);\n  const [articleSlug, setArticleSlug] = useState<string | null>(null);\n  const [uploading, setUploading] = useState<boolean>(false);\n  const [temporaryMedia, setTemporaryMedia] = useState<Array<{\n    fileName: string;\n    fileType: string;\n    fileSize: number;\n    file: File;\n    url: string;\n  }>>([]);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  \n  //  MEMORY: Ref fr Cleanup (verhindert vorzeitiges Revokieren)\n  const temporaryMediaRef = useRef<typeof temporaryMedia>([]);\n  \n  //  MEMORY: Aktualisiere Ref und revoke alte URLs, die nicht mehr in der Liste sind\n  useEffect(() => {\n    // Revoke alte URLs, die nicht mehr in temporaryMedia sind\n    temporaryMediaRef.current.forEach(oldMedia => {\n      if (!temporaryMedia.find(m => m.url === oldMedia.url)) {\n        URL.revokeObjectURL(oldMedia.url);\n      }\n    });\n    temporaryMediaRef.current = temporaryMedia;\n  }, [temporaryMedia]);\n  \n  //  MEMORY: Cleanup Blob-URLs beim Unmount (verwendet Ref statt State)\n  useEffect(() => {\n    return () => {\n      temporaryMediaRef.current.forEach(media => {\n        URL.revokeObjectURL(media.url);\n      });\n    };\n  }, []); // Nur beim Unmount\n  \n  // berprfen der Berechtigungen - an die richtigen Berechtigungen anpassen\n  const hasCerebroButtonPermission = hasPermission('cerebro', 'both', 'button');\n  const hasCerebroPagePermission = hasPermission('cerebro', 'both', 'page');\n  const canEditArticles = hasCerebroButtonPermission || hasCerebroPagePermission;\n  \n  // Medientyp bestimmen\n  const getMediaType = (fileType: string): 'image' | 'video' | 'pdf' | 'other' => {\n    if (fileType.startsWith('image/')) return 'image';\n    if (fileType.startsWith('video/')) return 'video';\n    if (fileType === 'application/pdf') return 'pdf';\n    return 'other';\n  };\n  \n  // Temporre Medien-Vorschau-Komponente\n  const TemporaryMediaPreview: React.FC<{ media: typeof temporaryMedia[0] }> = ({ media }) => {\n    const mediaType = getMediaType(media.fileType);\n    const tempUrl = media.url;\n    \n    const getMediaIcon = () => {\n      switch(mediaType) {\n        case 'image': return <PhotoIcon className=\"h-5 w-5\" />;\n        case 'video': return <FilmIcon className=\"h-5 w-5\" />;\n        case 'pdf': return <DocumentTextIcon className=\"h-5 w-5\" />;\n        default: return <DocumentIcon className=\"h-5 w-5\" />;\n      }\n    };\n    \n    return (\n      <div className=\"border rounded p-3 mb-2 hover:bg-gray-50 dark:hover:bg-gray-700 dark:border-gray-600\">\n        <div className=\"flex items-center\">\n          {getMediaIcon()}\n          <span className=\"ml-2 flex-grow dark:text-gray-200\">{media.fileName}</span>\n        </div>\n        \n        {mediaType === 'image' && (\n          <div className=\"mt-2\">\n            <img \n              src={tempUrl} \n              alt={media.fileName} \n              className=\"max-w-full h-auto rounded\"\n              style={{ maxHeight: '200px' }}\n            />\n          </div>\n        )}\n        \n        {mediaType === 'video' && (\n          <div className=\"mt-2\">\n            <video \n              controls \n              className=\"max-w-full rounded\"\n              style={{ maxHeight: '200px' }}\n            >\n              <source src={tempUrl} type={media.fileType} />\n              Ihr Browser untersttzt das Video-Tag nicht.\n            </video>\n          </div>\n        )}\n        \n        {mediaType === 'pdf' && (\n          <div className=\"mt-2\">\n            <iframe \n              src={`${tempUrl}#view=FitH`} \n              className=\"w-full rounded border dark:border-gray-600\"\n              style={{ height: '200px' }}\n              title={media.fileName}\n            ></iframe>\n          </div>\n        )}\n      </div>\n    );\n  };\n  \n  // Upload-Funktion fr unified Editor\n  const handleUpload = async (file: File): Promise<{ url: string; fileName: string }> => {\n    // Fr neue Artikel: Speichere temporr, wird nach dem Speichern hochgeladen\n    if (isNewArticle && !articleSlug) {\n      const tempUrl = URL.createObjectURL(file);\n      const tempMedia = {\n        fileName: file.name,\n        fileType: file.type,\n        fileSize: file.size,\n        file: file,\n        url: tempUrl\n      };\n      setTemporaryMedia(prev => [...prev, tempMedia]);\n      \n      // Temporren Platzhalter-URL zurckgeben\n      return {\n        url: 'wird nach dem Erstellen hochgeladen',\n        fileName: file.name\n      };\n    }\n    \n    // Fr bestehende Artikel: Direkt hochladen\n    const formData = new FormData();\n    formData.append('file', file);\n    \n    if (articleSlug) {\n      formData.append('carticleSlug', articleSlug);\n    } else {\n      throw new Error('Artikel-Slug nicht gefunden.');\n    }\n    \n    const media = await cerebroApi.media.uploadMedia(formData);\n    \n    // URL fr das hochgeladene Medium generieren\n    const mediaUrl = media.path.startsWith('http') \n      ? media.path \n      : `${window.location.origin}/api/cerebro/media/${media.id}/file`;\n    \n    return {\n      url: mediaUrl,\n      fileName: media.filename\n    };\n  };\n  \n  // Unified Editor Hook verwenden\n  const { handlePaste, handleDrop, handleDragOver } = useUnifiedEditor({\n    textareaRef,\n    content: formData.content,\n    setContent: (content) => setFormData(prev => ({ ...prev, content })),\n    onUpload: handleUpload,\n    setUploading,\n    setError\n  });\n  \n  // File Upload Handler fr Button\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n    if (!files || files.length === 0) return;\n\n    const file = files[0];\n    await handleUpload(file);\n    \n    // Zurcksetzen des Datei-Inputs\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n  \n  // Daten laden\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        \n        // Alle Artikel fr die Elternauswahl laden\n        const articlesData = await cerebroApi.articles.getAllArticles();\n        setArticles(articlesData.map(article => ({\n          id: article.id,\n          title: article.title\n        })));\n        \n        // Wenn ein Slug vorhanden ist, handelt es sich um eine Bearbeitung\n        if (slug) {\n          const article = await cerebroApi.articles.getArticleBySlug(slug);\n          setIsNewArticle(false);\n          setArticleId(article.id);\n          setArticleSlug(article.slug);\n          setFormData({\n            title: article.title,\n            parentId: article.parentId,\n            content: article.content || '',\n          });\n        }\n        \n        setError(null);\n      } catch (err) {\n        console.error('Fehler beim Laden der Daten:', err);\n        setError(t('cerebro.articleEdit.loadError'));\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchData();\n  }, [slug]);\n  \n  // Keine Berechtigung\n  if (!canEditArticles) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\n          {t('cerebro.messages.noPermission')}\n        </div>\n        <button\n          className=\"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded\"\n          onClick={() => navigate('/cerebro')}\n        >\n          {t('cerebro.actions.backToOverview')}\n        </button>\n      </div>\n    );\n  }\n  \n  // Input-nderung\n  const handleInputChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>\n  ) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value === '' ? null : value\n    }));\n  };\n  \n  // Formular absenden\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.title.trim()) {\n      setError(t('cerebro.articleEdit.titleRequired', { defaultValue: 'Titel ist erforderlich' }));\n      return;\n    }\n    \n    try {\n      setSaving(true);\n      \n      let savedArticle;\n      \n      if (isNewArticle) {\n        // Neuen Artikel erstellen\n        savedArticle = await cerebroApi.articles.createArticle({\n          title: formData.title,\n          parentId: formData.parentId,\n          content: formData.content\n        });\n        // Slug aktualisieren fr Upload-Funktion\n        setArticleSlug(savedArticle.slug);\n        \n        // Temporre Medien VOR Navigation hochladen\n        if (temporaryMedia.length > 0) {\n          for (const tempMedia of temporaryMedia) {\n            try {\n              const uploadFormData = new FormData();\n              uploadFormData.append('file', tempMedia.file);\n              uploadFormData.append('carticleSlug', savedArticle.slug);\n              \n              await cerebroApi.media.uploadMedia(uploadFormData);\n              \n              // Temporre URL aufrumen\n              URL.revokeObjectURL(tempMedia.url);\n            } catch (err) {\n              console.error(`Fehler beim Hochladen des temporren Mediums ${tempMedia.fileName}:`, err);\n            }\n          }\n          setTemporaryMedia([]);\n        }\n        \n        // Event fr Struktur-Aktualisierung auslsen\n        window.dispatchEvent(new CustomEvent('cerebro-article-created', { \n          detail: { article: savedArticle } \n        }));\n      } else if (articleId) {\n        // Bestehenden Artikel aktualisieren\n        savedArticle = await cerebroApi.articles.updateArticle(articleId, {\n          title: formData.title,\n          parentId: formData.parentId,\n          content: formData.content\n        });\n      }\n      \n      // Navigation erst nach erfolgreichem Upload aller Medien\n      navigate(`/cerebro/${savedArticle.slug}`);\n    } catch (err: any) {\n      console.error('Fehler beim Speichern des Artikels:', err);\n      const errorMessage = err?.response?.data?.message || err?.message || 'Fehler beim Speichern des Artikels. Bitte versuchen Sie es spter erneut.';\n      setError(errorMessage);\n      setSaving(false);\n    }\n  };\n  \n  // Abbrechen\n  const handleCancel = () => {\n    if (slug) {\n      navigate(`/cerebro/${slug}`);\n    } else {\n      navigate('/cerebro');\n    }\n  };\n  \n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"text-2xl font-bold mb-6\">\n        {isNewArticle ? t('cerebro.articleEdit.createTitle', { defaultValue: 'Neuen Artikel erstellen' }) : t('cerebro.articleEdit.editTitle', { defaultValue: 'Artikel bearbeiten' })}\n      </h1>\n      \n      {error && (\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\n          {error}\n        </div>\n      )}\n      \n      {loading ? (\n        <div className=\"text-center py-8\">\n          <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500\"></div>\n          <p className=\"mt-2 text-gray-600\">{t('cerebro.articleEdit.loadingData', { defaultValue: 'Daten werden geladen...' })}</p>\n        </div>\n      ) : (\n        <form onSubmit={handleSubmit} className=\"bg-white rounded-lg shadow p-6\">\n          <div className=\"mb-4\">\n            <label htmlFor=\"title\" className=\"block text-gray-700 font-medium mb-2\">\n              {t('cerebro.articleEdit.titleRequired', { defaultValue: 'Titel *' })}\n            </label>\n            <input\n              type=\"text\"\n              id=\"title\"\n              name=\"title\"\n              value={formData.title}\n              onChange={handleInputChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              required\n            />\n          </div>\n          \n          <div className=\"mb-4\">\n            <label htmlFor=\"parentId\" className=\"block text-gray-700 font-medium mb-2\">\n              {t('cerebro.articleEdit.parentArticle', { defaultValue: 'Elternartikel' })}\n            </label>\n            <select\n              id=\"parentId\"\n              name=\"parentId\"\n              value={formData.parentId || ''}\n              onChange={handleInputChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n              <option value=\"\">{t('cerebro.articleEdit.noParent', { defaultValue: 'Kein Elternartikel (Root)' })}</option>\n              {articles\n                .filter(article => article.id !== articleId) // Sich selbst ausschlieen\n                .map(article => (\n                  <option key={article.id} value={article.id}>\n                    {article.title}\n                  </option>\n                ))}\n            </select>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              Optional. Whlen Sie einen bergeordneten Artikel aus, um eine Hierarchie zu erstellen.\n            </p>\n          </div>\n          \n          <div className=\"mb-6\">\n            <label htmlFor=\"content\" className=\"block text-gray-700 font-medium mb-2\">\n              Inhalt\n            </label>\n            <div className=\"relative\">\n              <textarea\n                ref={textareaRef}\n                id=\"content\"\n                rows={10}\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                value={formData.content}\n                onChange={(e) => setFormData({ ...formData, content: e.target.value })}\n                onPaste={handlePaste}\n                onDrop={handleDrop}\n                onDragOver={handleDragOver}\n                placeholder=\"Schreiben Sie hier Ihren Artikel in Markdown...\"\n              />\n              {/* Heftklammer-Icon zum Hinzufgen von Dateien */}\n              <button\n                type=\"button\"\n                onClick={() => fileInputRef.current?.click()}\n                className=\"absolute bottom-2 left-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none\"\n                title={t('cerebro.addFile')}\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n                </svg>\n              </button>\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                onChange={handleFileUpload}\n                className=\"hidden\"\n              />\n              {uploading && (\n                <div className=\"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-70 dark:bg-opacity-70\">\n                  <span className=\"text-sm text-gray-600 dark:text-gray-300\">Wird hochgeladen...</span>\n                </div>\n              )}\n            </div>\n            \n            {/* Temporre Medien-Vorschau */}\n            {temporaryMedia.length > 0 && (\n              <div className=\"mt-3\">\n                <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Hochgeladene Dateien (Vorschau):\n                </h3>\n                <div className=\"space-y-2\">\n                  {temporaryMedia.map((media, index) => (\n                    <TemporaryMediaPreview key={index} media={media} />\n                  ))}\n                </div>\n              </div>\n            )}\n            \n            {/* Markdown-Vorschau - nur Tags, nicht den gesamten Inhalt */}\n            {formData.content && (\n              <div className=\"mt-3\">\n                <MarkdownPreview \n                  content={formData.content} \n                  temporaryAttachments={temporaryMedia.map(tm => ({\n                    fileName: tm.fileName,\n                    fileType: tm.fileType,\n                    fileSize: tm.fileSize,\n                    file: tm.file\n                  }))}\n                />\n              </div>\n            )}\n          </div>\n          \n          <div className=\"flex justify-end space-x-4\">\n            <button\n              type=\"button\"\n              onClick={handleCancel}\n              className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed\"\n              disabled={saving}\n              title=\"Abbrechen\"\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n              type=\"submit\"\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n              disabled={saving}\n              title={saving ? 'Speichern...' : 'Speichern'}\n            >\n              {saving ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <CheckIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n        </form>\n      )}\n    </div>\n  );\n};\n\nexport default ArticleEdit; ","import { useCallback } from 'react';\nimport { RefObject } from 'react';\n\ninterface UseUnifiedEditorOptions {\n  textareaRef: RefObject<HTMLTextAreaElement>;\n  content: string;\n  setContent: (content: string) => void;\n  onUpload: (file: File) => Promise<{ url: string; fileName: string }>;\n  setUploading?: (uploading: boolean) => void;\n  setError?: (error: string | null) => void;\n}\n\n/**\n * Wiederverwendbarer Hook fr unified Editor mit Drag & Drop und Paste-Untersttzung\n * \n * @param options - Konfigurationsoptionen fr den Hook\n * @returns Handler-Funktionen fr Paste, Drop und DragOver\n */\nexport const useUnifiedEditor = ({\n  textareaRef,\n  content,\n  setContent,\n  onUpload,\n  setUploading,\n  setError\n}: UseUnifiedEditorOptions) => {\n  \n  /**\n   * Ldt eine Datei hoch und fgt einen Markdown-Link an der Cursorposition ein\n   */\n  const uploadFileAndInsertLink = useCallback(async (file: File) => {\n    if (setUploading) setUploading(true);\n    if (setError) setError(null);\n\n    try {\n      const result = await onUpload(file);\n      \n      // Markdown-Link generieren\n      let insertText = '';\n      if (file.type.startsWith('image/')) {\n        // Fr Bilder einen Markdown-Image-Link einfgen\n        insertText = `\\n![${result.fileName}](${result.url})\\n`;\n      } else {\n        // Fr andere Dateien einen normalen Link\n        insertText = `\\n[${result.fileName}](${result.url})\\n`;\n      }\n      \n      // Fge den Link an der aktuellen Cursorposition ein\n      if (textareaRef.current) {\n        const cursorPos = textareaRef.current.selectionStart;\n        const textBefore = content.substring(0, cursorPos);\n        const textAfter = content.substring(cursorPos);\n        \n        setContent(textBefore + insertText + textAfter);\n        \n        // Setze den Cursor hinter den eingefgten Link\n        setTimeout(() => {\n          if (textareaRef.current) {\n            const newPos = cursorPos + insertText.length;\n            textareaRef.current.selectionStart = newPos;\n            textareaRef.current.selectionEnd = newPos;\n            textareaRef.current.focus();\n          }\n        }, 0);\n      } else {\n        setContent(content + insertText);\n      }\n    } catch (err) {\n      console.error('Fehler beim Verarbeiten der Datei:', err);\n      const error = err as any;\n      const errorMessage = error.response?.data?.message || error.message || 'Ein unerwarteter Fehler ist aufgetreten';\n      if (setError) setError(errorMessage);\n    } finally {\n      if (setUploading) setUploading(false);\n    }\n  }, [content, setContent, onUpload, textareaRef, setUploading, setError]);\n  \n  /**\n   * Verarbeitet Paste-Events und erkennt Bilder im Clipboard\n   */\n  const handlePaste = useCallback(async (event: React.ClipboardEvent) => {\n    const items = event.clipboardData.items;\n    \n    for (let i = 0; i < items.length; i++) {\n      const item = items[i];\n      \n      // Prfen, ob das eingefgte Element ein Bild ist\n      if (item.type.indexOf('image') === 0) {\n        event.preventDefault(); // Standardeingabe verhindern\n        \n        const file = item.getAsFile();\n        if (file) {\n          await uploadFileAndInsertLink(file);\n        }\n        return;\n      }\n    }\n  }, [uploadFileAndInsertLink]);\n  \n  /**\n   * Verarbeitet Drop-Events fr Drag & Drop von Dateien\n   */\n  const handleDrop = useCallback(async (event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n    \n    if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\n      const file = event.dataTransfer.files[0];\n      await uploadFileAndInsertLink(file);\n    }\n  }, [uploadFileAndInsertLink]);\n  \n  /**\n   * Verhindert Standard-Drag-Verhalten\n   */\n  const handleDragOver = useCallback((event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n  }, []);\n\n  return {\n    handlePaste,\n    handleDrop,\n    handleDragOver\n  };\n};\n\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate, useParams, Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { cerebroApi, CerebroArticleStructure } from '../../api/cerebroApi.ts';\nimport { \n  Bars3Icon, \n  XMarkIcon, \n  PlusIcon as HPlusIcon, \n  MinusIcon\n} from '@heroicons/react/24/outline';\n\ninterface ArticleTreeProps {\n  articles: CerebroArticleStructure[];\n  currentSlug?: string;\n  level?: number;\n  expandedIds?: Set<string>;\n  onToggleExpand?: (id: string) => void;\n  onArticleClick?: (slug: string) => void;\n}\n\ninterface MarkdownFile {\n  path: string;\n  title: string;\n}\n\ninterface ArticleStructureProps {\n  mdFiles: MarkdownFile[];\n}\n\n// Rekursive Komponente fr die Baumansicht\nconst ArticleTree: React.FC<ArticleTreeProps> = ({ \n  articles, \n  currentSlug, \n  level = 0, \n  expandedIds = new Set(), \n  onToggleExpand,\n  onArticleClick\n}) => {\n  const navigate = useNavigate();\n  \n  const handleArticleClick = (slug: string) => {\n    if (onArticleClick) {\n      onArticleClick(slug);\n    }\n  };\n  \n  const handleExpandToggle = (\n    e: React.MouseEvent<HTMLButtonElement>,\n    id: string\n  ) => {\n    e.stopPropagation();\n    if (onToggleExpand) {\n      onToggleExpand(id);\n    }\n  };\n  \n  return (\n    <ul className={`pl-${level > 0 ? '4' : '0'}`}>\n      {articles.map((article) => {\n        const hasChildren = article.children && article.children.length > 0;\n        const isExpanded = expandedIds.has(article.id);\n        const isActive = article.slug === currentSlug;\n        \n        return (\n          <li key={article.id} className=\"mb-1\">\n            <div \n              className={`flex items-center py-1 px-2 rounded cursor-pointer ${\n                isActive \n                  ? 'bg-blue-100 text-blue-800' \n                  : 'hover:bg-gray-100'\n              }`}\n              onClick={() => handleArticleClick(article.slug)}\n            >\n              {hasChildren && (\n                <button\n                  onClick={(e) => handleExpandToggle(e, article.id)}\n                  className=\"mr-1 w-4 h-4 flex items-center justify-center text-gray-500\"\n                >\n                  {isExpanded ? <MinusIcon className=\"h-4 w-4\" /> : <HPlusIcon className=\"h-4 w-4\" />}\n                </button>\n              )}\n              \n              <span className=\"flex-1 truncate\">\n                {article.title}\n              </span>\n            </div>\n            \n            {hasChildren && isExpanded && (\n              <ArticleTree \n                articles={article.children} \n                currentSlug={currentSlug}\n                level={level + 1}\n                expandedIds={expandedIds}\n                onToggleExpand={onToggleExpand}\n                onArticleClick={onArticleClick}\n              />\n            )}\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\n// Hauptkomponente fr die Artikelstruktur\nconst ArticleStructure: React.FC<ArticleStructureProps> = ({ mdFiles }) => {\n  const navigate = useNavigate();\n  const [structure, setStructure] = useState<CerebroArticleStructure[]>([]);\n  const [databaseArticles, setDatabaseArticles] = useState<CerebroArticleStructure[]>([]);\n  const [markdownFolder, setMarkdownFolder] = useState<CerebroArticleStructure | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isMobile, setIsMobile] = useState<boolean>(window.innerWidth < 720);\n  const [expandedIds, setExpandedIds] = useState<Set<string>>(new Set());\n  const [sidebarOpen, setSidebarOpen] = useState<boolean>(window.innerWidth >= 720);\n  \n  const { slug } = useParams<{ slug: string }>();\n  const { t } = useTranslation();\n  \n  useEffect(() => {\n    const handleResize = () => {\n      const newIsMobile = window.innerWidth < 720;\n      setIsMobile(newIsMobile);\n      \n      // Nur bei Grennderungen die Sidebar anpassen\n      // Auf Tablet-Gren und grer: automatisch ffnen\n      // Auf mobilen Gerten: geschlossen lassen\n      if (window.innerWidth >= 720) {\n        setSidebarOpen(true);\n      }\n    };\n    \n    // Initial setzen\n    handleResize();\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n  \n  // Lade die Artikelstruktur aus der Datenbank\n  const fetchArticlesStructure = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      \n      // Hole die Artikelstruktur\n      const structureData = await cerebroApi.articles.getArticlesStructure();\n      \n      // Prfe, ob die Daten gltig sind\n      if (!Array.isArray(structureData)) {\n        console.error('Ungltige Antwort von der API:', structureData);\n        setError('Ungltige Antwort vom Server. Bitte versuchen Sie es spter erneut.');\n        setLoading(false);\n        return;\n      }\n      \n      // Rekursive Funktion zur Normalisierung der IDs (Backend gibt manchmal numbers zurck)\n      const normalizeArticle = (article: any): any => {\n        const normalized: any = {\n          ...article,\n          id: String(article.id),\n          parentId: article.parentId ? String(article.parentId) : null\n        };\n        \n        if (article.children && Array.isArray(article.children)) {\n          normalized.children = article.children.map((child: any) => normalizeArticle(child));\n        }\n        \n        return normalized;\n      };\n      \n      // Konvertiere IDs zu Strings, falls ntig\n      const normalizedData = structureData.map(article => normalizeArticle(article));\n      \n      // Finde den Markdown-Ordner\n      const markdownFolderItem = normalizedData.find(article => article.title === 'Markdown-Dateien');\n      \n      if (markdownFolderItem) {\n        setMarkdownFolder(markdownFolderItem);\n        \n        // Expandiere den Markdown-Ordner standardmig, damit die Dateien sichtbar sind\n        setExpandedIds(prev => {\n          const newSet = new Set(prev);\n          newSet.add(markdownFolderItem.id);\n          return newSet;\n        });\n      } else {\n        console.warn('Markdown-Ordner nicht gefunden!');\n      }\n      \n      // Setze alle Artikel auer dem Markdown-Ordner in databaseArticles\n      setDatabaseArticles(\n        normalizedData.filter(article => article.title !== 'Markdown-Dateien')\n      );\n      \n      setLoading(false);\n    } catch (err: any) {\n      console.error('Fehler beim Laden der Artikelstruktur:', err);\n      \n      // Detaillierte Fehlermeldung\n      let errorMessage = 'Fehler beim Laden der Artikelstruktur. Bitte versuchen Sie es spter erneut.';\n      \n      if (err?.response?.status === 401) {\n        errorMessage = 'Sie sind nicht angemeldet. Bitte melden Sie sich an.';\n      } else if (err?.response?.status === 403) {\n        errorMessage = 'Sie haben keine Berechtigung, die Artikelstruktur anzuzeigen.';\n      } else if (err?.response?.status >= 500) {\n        errorMessage = 'Serverfehler. Bitte versuchen Sie es spter erneut.';\n      } else if (err?.message) {\n        errorMessage = `Fehler: ${err.message}`;\n      }\n      \n      setError(errorMessage);\n      setLoading(false);\n    }\n  }, []);\n  \n  useEffect(() => {\n    fetchArticlesStructure();\n    \n    // Event-Listener fr Artikel-Erstellung\n    const handleArticleCreated = () => {\n      fetchArticlesStructure();\n    };\n    \n    window.addEventListener('cerebro-article-created', handleArticleCreated);\n    \n    return () => {\n      window.removeEventListener('cerebro-article-created', handleArticleCreated);\n    };\n  }, [fetchArticlesStructure]);\n  \n  // Auf/Zuklappen von Kategorien\n  const handleToggleExpand = (id: string) => {\n    setExpandedIds(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(id)) {\n        newSet.delete(id);\n      } else {\n        newSet.add(id);\n      }\n      return newSet;\n    });\n  };\n  \n  // Sidebar Toggle fr Mobile\n  const toggleSidebar = () => {\n    const newState = !sidebarOpen;\n    setSidebarOpen(newState);\n    \n    // Sende Event an die bergeordnete Komponente\n    const event = new CustomEvent('cerebro-sidebar-toggle', { \n      detail: { open: newState } \n    });\n    window.dispatchEvent(event);\n  };\n  \n  return (\n    <nav className=\"h-full overflow-hidden flex flex-col\">\n      {/* Mobile Toggle-Button - nur fr sehr kleine Gerte sichtbar */}\n      {isMobile && (\n        <button \n          className=\"fixed top-[85px] left-4 z-40 p-2 rounded-full text-gray-600 hover:bg-gray-100 md:hidden\"\n          onClick={toggleSidebar}\n          aria-label={sidebarOpen ? t('cerebro.menuClose') : t('cerebro.menuOpen')}\n        >\n          {sidebarOpen ? <XMarkIcon className=\"h-5 w-5\" /> : <Bars3Icon className=\"h-5 w-5\" />}\n        </button>\n      )}\n      \n      {/* Sidebar mit Artikelstruktur */}\n      <div \n        className={`\n          bg-white dark:bg-gray-800 flex flex-col h-full\n          ${isMobile \n            ? 'fixed top-[150px] left-0 z-20 transition-transform duration-300 ease-in-out w-60 max-h-[calc(100vh-228px)] border-r border-gray-200 dark:border-gray-700' \n            : 'w-full h-full border-r border-gray-200 dark:border-gray-700'}\n          ${isMobile && !sidebarOpen ? '-translate-x-full' : 'translate-x-0'}\n        `}\n      >\n        <div className={`p-2 ${isMobile ? 'pt-4' : 'pt-6'} flex-grow flex flex-col overflow-hidden`}>\n          {/* Artikelbaum mit Ladeanimation oder Fehlermeldung */}\n          <div className=\"overflow-y-auto flex-grow\">\n            {/* Ladeanimation */}\n            {loading && (\n              <div className=\"flex justify-center items-center p-4\">\n                <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500\"></div>\n              </div>\n            )}\n            \n            {/* Fehlermeldung */}\n            {error && (\n              <div className=\"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-2 py-2 rounded text-sm\">\n                {error}\n              </div>\n            )}\n            \n            {/* Normale Artikel aus der Datenbank */}\n            {!loading && databaseArticles.length > 0 && (\n              <div className=\"space-y-1 mb-4\">\n                <h3 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('cerebro.article', { defaultValue: 'Artikel' })}</h3>\n                <ArticleTree \n                  articles={databaseArticles} \n                  currentSlug={slug}\n                  expandedIds={expandedIds}\n                  onToggleExpand={handleToggleExpand}\n                  onArticleClick={(slug) => navigate(`/cerebro/${slug}`)}\n                />\n              </div>\n            )}\n            \n            {/* Markdown-Dateien-Bereich */}\n            {!loading && markdownFolder && (\n              <div className=\"mt-4\">\n                <div className=\"flex items-center\">\n                  <button\n                    onClick={() => handleToggleExpand(markdownFolder.id)}\n                    className=\"mr-1 w-4 h-4 flex items-center justify-center text-gray-500 dark:text-gray-400\"\n                  >\n                    {expandedIds.has(markdownFolder.id) ? <MinusIcon className=\"h-4 w-4\" /> : <HPlusIcon className=\"h-4 w-4\" />}\n                  </button>\n                  <h3 className=\"font-medium text-gray-700 dark:text-gray-300\">{markdownFolder.title}</h3>\n                </div>\n                \n                {/* Wenn expandiert, zeige die Markdown-Dateien an */}\n                {expandedIds.has(markdownFolder.id) && markdownFolder.children?.length > 0 && (\n                  <div className=\"ml-4 mt-2 space-y-1\">\n                    {markdownFolder.children.map((mdFile) => (\n                      <Link \n                        key={mdFile.id}\n                        to={`/cerebro/${mdFile.slug}`}\n                        className={`block truncate px-2 py-1 rounded-md ${\n                          mdFile.slug === slug\n                            ? 'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300'\n                            : 'hover:bg-gray-100 dark:hover:bg-gray-700'\n                        }`}\n                      >\n                        {mdFile.title}\n                      </Link>\n                    ))}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n      \n      {/* Overlay fr Mobile - Klicken schliet die Sidebar - ENTFERNT, damit der Artikel nicht ausgegraut wird */}\n      {/* \n      {isMobile && sidebarOpen && (\n        <div \n          className=\"fixed inset-0 bg-black bg-opacity-50 z-10 md:hidden\"\n          onClick={toggleSidebar}\n        ></div>\n      )}\n      */}\n    </nav>\n  );\n};\n\nexport default ArticleStructure; ","import React, { useState, useRef, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { cerebroApi } from '../../api/cerebroApi.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport { XMarkIcon, PlusIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\n\n//  MEMORY LEAK FIX: Komponente fr Medien-Vorschau mit Cleanup\ninterface MediaPreviewWithCleanupProps {\n  file: File;\n  alt: string;\n  blobUrlsRef: React.MutableRefObject<Set<string>>;\n  type: 'image' | 'video';\n  className?: string;\n}\n\nconst MediaPreviewWithCleanup: React.FC<MediaPreviewWithCleanupProps> = ({ file, alt, blobUrlsRef, type, className = \"w-full h-auto object-contain max-h-60\" }) => {\n  const [url, setUrl] = useState<string | null>(null);\n\n  useEffect(() => {\n    const blobUrl = URL.createObjectURL(file);\n    blobUrlsRef.current.add(blobUrl);\n    setUrl(blobUrl);\n\n    return () => {\n      URL.revokeObjectURL(blobUrl);\n      blobUrlsRef.current.delete(blobUrl);\n    };\n  }, [file, blobUrlsRef]);\n\n  if (!url) return null;\n\n  if (type === 'image') {\n    return <img src={url} alt={alt} className={className} />;\n  }\n\n  return (\n    <video src={url} controls className={className}>\n      {alt}\n    </video>\n  );\n};\n\nconst AddMedia: React.FC = () => {\n  const { t } = useTranslation();\n  const { slug } = useParams<{ slug: string }>();\n  const navigate = useNavigate();\n  const { hasPermission } = usePermissions();\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  //  MEMORY LEAK FIX: Track Blob-URLs fr Cleanup\n  const blobUrlsRef = useRef<Set<string>>(new Set());\n  \n  // Zustand\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [fileName, setFileName] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [progress, setProgress] = useState<number>(0);\n  \n  // berprfen der Berechtigungen an die richtigen Berechtigungen anpassen\n  const hasCerebroButtonPermission = hasPermission('cerebro', 'both', 'button');\n  const hasCerebroPagePermission = hasPermission('cerebro', 'both', 'page');\n  const canAddMedia = hasCerebroButtonPermission || hasCerebroPagePermission;\n  \n  // Datei auswhlen\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (!files || files.length === 0) {\n      setSelectedFile(null);\n      setFileName('');\n      return;\n    }\n    \n    const file = files[0];\n    setSelectedFile(file);\n    setFileName(file.name);\n    \n    // Prfen, ob der Dateityp untersttzt wird\n    if (!isFileTypeSupported(file)) {\n      setError(t('cerebroMedia.fileTypeNotSupported'));\n    } else {\n      setError(null);\n    }\n  };\n  \n  // Prfen, ob der Dateityp untersttzt wird\n  const isFileTypeSupported = (file: File): boolean => {\n    const supportedTypes = [\n      'image/jpeg',\n      'image/png',\n      'image/gif',\n      'image/webp',\n      'application/pdf',\n      'video/mp4',\n      'video/webm'\n    ];\n    \n    return supportedTypes.includes(file.type);\n  };\n  \n  // Datei hochladen Button\n  const handleSelectFile = () => {\n    if (fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  };\n  \n  // Dateinamen ndern\n  const handleFileNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFileName(e.target.value);\n  };\n  \n  // Formular absenden\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!selectedFile) {\n      setError(t('cerebroMedia.pleaseSelectFile'));\n      return;\n    }\n    \n    if (!fileName.trim()) {\n      setError(t('cerebroMedia.pleaseEnterFileName'));\n      return;\n    }\n    \n    if (!slug) {\n      setError(t('cerebroMedia.articleIdMissing'));\n      return;\n    }\n    \n    if (!isFileTypeSupported(selectedFile)) {\n      setError(t('cerebroMedia.fileTypeNotSupported'));\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      setProgress(0);\n      \n      // FormData erstellen\n      const formData = new FormData();\n      formData.append('file', selectedFile);\n      formData.append('filename', fileName.trim());\n      formData.append('carticleSlug', slug);\n      \n      // Medien hochladen mit Fortschrittsanzeige\n      await cerebroApi.media.uploadMedia(formData, (progressEvent) => {\n        const percentCompleted = Math.round(\n          (progressEvent.loaded * 100) / progressEvent.total\n        );\n        setProgress(percentCompleted);\n      });\n      \n      // Zurck zum Artikel navigieren\n      navigate(`/cerebro/${slug}`);\n    } catch (err) {\n      console.error('Fehler beim Hochladen der Datei:', err);\n      setError(t('cerebroMedia.uploadError'));\n      setLoading(false);\n    }\n  };\n  \n  // Keine Berechtigung\n  if (!canAddMedia) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\n          {t('cerebroMedia.noPermission')}\n        </div>\n        <button\n          className=\"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded\"\n          onClick={() => navigate(`/cerebro/${slug}`)}\n        >\n          {t('cerebroMedia.backToArticle')}\n        </button>\n      </div>\n    );\n  }\n  \n  // Dateityp-Icon bestimmen\n  const getFileTypeIcon = () => {\n    if (!selectedFile) return null;\n    \n    const fileType = selectedFile.type;\n    \n    if (fileType.startsWith('image/')) {\n      return (\n        <div className=\"w-full max-h-60 overflow-hidden bg-gray-100 border rounded mb-4\">\n          <MediaPreviewWithCleanup \n            file={selectedFile} \n            alt=\"Vorschau\" \n            blobUrlsRef={blobUrlsRef}\n            type=\"image\"\n            className=\"w-full h-auto object-contain max-h-60\"\n          />\n        </div>\n      );\n    }\n    \n    if (fileType === 'application/pdf') {\n      return (\n        <div className=\"flex items-center justify-center h-32 bg-red-50 border rounded mb-4\">\n          <div className=\"text-center\">\n            <div className=\"text-red-600 text-4xl mb-2\">PDF</div>\n            <div className=\"text-sm text-gray-600\">{selectedFile.name}</div>\n          </div>\n        </div>\n      );\n    }\n    \n    if (fileType.startsWith('video/')) {\n      return (\n        <div className=\"w-full max-h-60 overflow-hidden bg-gray-100 border rounded mb-4\">\n          <MediaPreviewWithCleanup \n            file={selectedFile} \n            alt={t('cerebroMedia.videoNotSupported')} \n            blobUrlsRef={blobUrlsRef}\n            type=\"video\"\n            className=\"w-full h-auto max-h-60\"\n          />\n        </div>\n      );\n    }\n    \n    return (\n      <div className=\"flex items-center justify-center h-32 bg-gray-50 border rounded mb-4\">\n        <div className=\"text-center\">\n          <div className=\"text-gray-600 text-4xl mb-2\">Datei</div>\n          <div className=\"text-sm text-gray-600\">{selectedFile.name}</div>\n        </div>\n      </div>\n    );\n  };\n  \n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"text-2xl font-bold mb-6\">{t('cerebroMedia.title')}</h1>\n      \n      {error && (\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\n          {error}\n        </div>\n      )}\n      \n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <form onSubmit={handleSubmit}>\n          {/* Dateivorschau */}\n          {selectedFile ? (\n            getFileTypeIcon()\n          ) : (\n            <div \n              className=\"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center mb-4 cursor-pointer hover:border-blue-500 transition-colors\"\n              onClick={handleSelectFile}\n            >\n              <div className=\"text-gray-500\">\n                <div className=\"text-4xl mb-2\">+</div>\n                <p>{t('cerebroMedia.clickToSelectFile')}</p>\n                <p className=\"text-sm mt-1\">\n                  {t('cerebroMedia.supportedFileTypes')}\n                </p>\n              </div>\n            </div>\n          )}\n          \n          {/* Verstecktes Datei-Input-Feld */}\n          <input\n            type=\"file\"\n            ref={fileInputRef}\n            onChange={handleFileChange}\n            className=\"hidden\"\n            accept=\"image/jpeg,image/png,image/gif,image/webp,application/pdf,video/mp4,video/webm\"\n          />\n          \n          {/* Dateiname */}\n          <div className=\"mb-4\">\n            <label htmlFor=\"fileName\" className=\"block text-gray-700 font-medium mb-2\">\n              {t('cerebroMedia.fileNameRequired')}\n            </label>\n            <input\n              type=\"text\"\n              id=\"fileName\"\n              value={fileName}\n              onChange={handleFileNameChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              placeholder={t('cerebroMedia.fileName')}\n              required\n            />\n          </div>\n          \n          {/* Datei auswhlen Button */}\n          <div className=\"mb-6\">\n            <button\n              type=\"button\"\n              onClick={handleSelectFile}\n              className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400\"\n            >\n              {selectedFile ? t('cerebroMedia.selectOtherFile') : t('cerebroMedia.selectFile')}\n            </button>\n            {selectedFile && (\n              <span className=\"ml-2 text-sm text-gray-600\">\n                {t('cerebroMedia.fileSize')} {(selectedFile.size / 1024 / 1024).toFixed(2)} MB\n              </span>\n            )}\n          </div>\n          \n          {/* Fortschrittsanzeige */}\n          {loading && progress > 0 && (\n            <div className=\"mb-6\">\n              <div className=\"relative pt-1\">\n                <div className=\"flex items-center justify-between mb-1\">\n                  <div>\n                    <span className=\"text-xs font-semibold inline-block text-blue-600\">\n                      {t('cerebroMedia.uploadProgress')}\n                    </span>\n                  </div>\n                  <div className=\"text-right\">\n                    <span className=\"text-xs font-semibold inline-block text-blue-600\">\n                      {progress}%\n                    </span>\n                  </div>\n                </div>\n                <div className=\"overflow-hidden h-2 text-xs flex rounded bg-blue-200\">\n                  <div\n                    style={{ width: `${progress}%` }}\n                    className=\"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500\"\n                  ></div>\n                </div>\n              </div>\n            </div>\n          )}\n          \n          {/* Buttons */}\n          <div className=\"flex justify-end space-x-4\">\n            <button\n              type=\"button\"\n              onClick={() => navigate(`/cerebro/${slug}`)}\n              className=\"p-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 disabled:opacity-50 disabled:cursor-not-allowed\"\n              disabled={loading}\n              title={t('common.cancel')}\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n              type=\"submit\"\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n              disabled={loading || !selectedFile}\n              title={loading ? t('cerebroMedia.uploading') : t('cerebroMedia.uploadFile')}\n            >\n              {loading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <PlusIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default AddMedia; ","import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { cerebroApi } from '../../api/cerebroApi.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport { XMarkIcon, PlusIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\n\ninterface LinkPreview {\n  url: string;\n  title: string;\n  thumbnail: string | null;\n  type: string | null;\n}\n\nconst AddExternalLink: React.FC = () => {\n  const { t } = useTranslation();\n  const { slug } = useParams<{ slug: string }>();\n  const navigate = useNavigate();\n  const { hasPermission } = usePermissions();\n  \n  // Zustand\n  const [url, setUrl] = useState<string>('');\n  const [title, setTitle] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(false);\n  const [previewLoading, setPreviewLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [preview, setPreview] = useState<LinkPreview | null>(null);\n  \n  // berprfen der Berechtigungen an die richtigen Berechtigungen anpassen\n  const hasCerebroButtonPermission = hasPermission('cerebro', 'both', 'button');\n  const hasCerebroPagePermission = hasPermission('cerebro', 'both', 'page');\n  const canAddLinks = hasCerebroButtonPermission || hasCerebroPagePermission;\n  \n  // URL-nderung mit Debounce\n  useEffect(() => {\n    if (!url || url.trim() === '') {\n      setPreview(null);\n      return;\n    }\n    \n    const timer = setTimeout(() => {\n      getPreview(url);\n    }, 500);\n    \n    return () => clearTimeout(timer);\n  }, [url]);\n  \n  // Vorschau abrufen\n  const getPreview = async (urlToPreview: string) => {\n    try {\n      setPreviewLoading(true);\n      \n      if (!isValidUrl(urlToPreview)) {\n        setError(t('cerebroLink.invalidUrl'));\n        setPreviewLoading(false);\n        return;\n      }\n      \n      const previewData = await cerebroApi.externalLinks.getLinkPreview(urlToPreview);\n      setPreview(previewData);\n      \n      // Titel automatisch bernehmen, wenn vorhanden\n      if (previewData.title && !title) {\n        setTitle(previewData.title);\n      }\n      \n      setError(null);\n    } catch (err) {\n      console.error('Fehler beim Abrufen der Vorschau:', err);\n      setError(t('cerebroLink.previewError'));\n      setPreview(null);\n    } finally {\n      setPreviewLoading(false);\n    }\n  };\n  \n  // URL-Validierung\n  const isValidUrl = (string: string) => {\n    try {\n      new URL(string);\n      return true;\n    } catch (_) {\n      return false;\n    }\n  };\n  \n  // Formular absenden\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!url.trim() || !isValidUrl(url)) {\n      setError(t('cerebroLink.invalidUrl'));\n      return;\n    }\n    \n    if (!slug) {\n      setError(t('cerebroLink.articleIdMissing'));\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      \n      await cerebroApi.externalLinks.createExternalLink({\n        url: url.trim(),\n        title: title.trim() || undefined,\n        carticleSlug: slug\n      });\n      \n      // Zurck zum Artikel navigieren\n      navigate(`/cerebro/${slug}`);\n    } catch (err) {\n      console.error('Fehler beim Speichern des Links:', err);\n      setError(t('cerebroLink.saveError'));\n      setLoading(false);\n    }\n  };\n  \n  // Keine Berechtigung\n  if (!canAddLinks) {\n    return (\n      <div className=\"container mx-auto px-4 py-8\">\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\n          {t('cerebroLink.noPermission')}\n        </div>\n        <button\n          className=\"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded\"\n          onClick={() => navigate(`/cerebro/${slug}`)}\n        >\n          {t('cerebroLink.backToArticle')}\n        </button>\n      </div>\n    );\n  }\n  \n  // Link-Typ anzeigen\n  const getLinkTypeDisplay = (type: string | null) => {\n    if (!type) return 'Standard-Link';\n    \n    switch (type) {\n      case 'google_drive':\n        return 'Google Drive Dokument';\n      case 'youtube':\n        return 'YouTube Video';\n      default:\n        return 'Externer Link';\n    }\n  };\n  \n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h1 className=\"text-2xl font-bold mb-6\">{t('cerebroLink.title')}</h1>\n      \n      {error && (\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\n          {error}\n        </div>\n      )}\n      \n      <div className=\"bg-white rounded-lg shadow p-6\">\n        <form onSubmit={handleSubmit}>\n          <div className=\"mb-4\">\n            <label htmlFor=\"url\" className=\"block text-gray-700 font-medium mb-2\">\n              URL *\n            </label>\n            <input\n              type=\"url\"\n              id=\"url\"\n              value={url}\n              onChange={(e) => setUrl(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              placeholder=\"https://\"\n              required\n            />\n            <p className=\"text-sm text-gray-600 mt-1\">\n              {t('cerebroLink.enterFullUrl')}\n            </p>\n          </div>\n          \n          <div className=\"mb-6\">\n            <label htmlFor=\"title\" className=\"block text-gray-700 font-medium mb-2\">\n              {t('common.description')}\n            </label>\n            <input\n              type=\"text\"\n              id=\"title\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              placeholder={t('cerebroLink.titleAutoFill')}\n            />\n            <p className=\"text-sm text-gray-600 mt-1\">\n              {t('cerebroLink.titleOptional')}\n            </p>\n          </div>\n          \n          {/* Link-Vorschau */}\n          {previewLoading ? (\n            <div className=\"mb-6 p-4 border rounded bg-gray-50\">\n              <div className=\"flex items-center justify-center\">\n                <div className=\"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-blue-500 mr-2\"></div>\n                {t('cerebroLink.previewLoading')}\n              </div>\n            </div>\n          ) : preview ? (\n            <div className=\"mb-6 p-4 border rounded bg-gray-50\">\n              <h3 className=\"font-semibold mb-2\">{t('cerebroLink.preview')}</h3>\n              <div className=\"flex items-start\">\n                {preview.thumbnail && (\n                  <img \n                    src={preview.thumbnail} \n                    alt={preview.title || 'Vorschau'} \n                    className=\"w-16 h-16 object-cover mr-3\"\n                  />\n                )}\n                <div>\n                  <p className=\"font-medium\">{preview.title || url}</p>\n                  <p className=\"text-sm text-gray-600 mt-1\">{getLinkTypeDisplay(preview.type)}</p>\n                  <p className=\"text-sm text-gray-500 mt-1 break-all\">{url}</p>\n                </div>\n              </div>\n            </div>\n          ) : null}\n          \n          <div className=\"flex justify-end space-x-4\">\n            <button\n              type=\"button\"\n              onClick={() => navigate(`/cerebro/${slug}`)}\n              className=\"p-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 disabled:opacity-50 disabled:cursor-not-allowed\"\n              disabled={loading}\n              title={t('common.cancel')}\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n              type=\"submit\"\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n              disabled={loading}\n              title={loading ? t('cerebroLink.saving') : t('cerebroLink.addLink')}\n            >\n              {loading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <PlusIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default AddExternalLink; ","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { cerebroApi, CerebroExternalLink } from '../../api/cerebroApi.ts';\n\ninterface GitHubLinkManagerProps {\n  articleSlug: string;\n  articleId?: string;\n  onLinkAdded?: (link: CerebroExternalLink) => void;\n  onLinkRemoved?: (linkId: string) => void;\n}\n\nconst GitHubLinkManager: React.FC<GitHubLinkManagerProps> = ({ \n  articleSlug, \n  articleId,\n  onLinkAdded,\n  onLinkRemoved\n}) => {\n  const { t } = useTranslation();\n  const [links, setLinks] = useState<CerebroExternalLink[]>([]);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [newLink, setNewLink] = useState<{\n    url: string;\n    title: string;\n    type: string;\n  }>({\n    url: '',\n    title: '',\n    type: 'github_markdown'\n  });\n\n  // GitHub-Links fr den aktuellen Artikel laden\n  useEffect(() => {\n    if (!articleId) return;\n\n    const fetchLinks = async () => {\n      try {\n        setLoading(true);\n        const fetchedLinks = await cerebroApi.externalLinks.getLinksByArticle(articleId);\n        // Filtere nur GitHub-Links\n        setLinks(fetchedLinks.filter(link => \n          link.type === 'github_markdown' || \n          link.url.includes('github.com') || \n          link.url.includes('raw.githubusercontent.com')\n        ));\n        setError(null);\n      } catch (err) {\n        console.error('Fehler beim Laden der GitHub-Links:', err);\n        setError('Die GitHub-Links konnten nicht geladen werden.');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchLinks();\n  }, [articleId]);\n\n  // Neuen GitHub-Link hinzufgen\n  const addGitHubLink = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!newLink.url.trim()) {\n      setError(t('githubLink.invalidUrl'));\n      return;\n    }\n\n    try {\n      setLoading(true);\n      \n      // Wenn keine Titel angegeben wurde, extrahiere den Dateinamen aus der URL\n      let title = newLink.title.trim();\n      if (!title) {\n        const urlParts = newLink.url.split('/');\n        title = urlParts[urlParts.length - 1];\n      }\n      \n      const linkData = {\n        carticleSlug: articleSlug,\n        url: newLink.url,\n        title: `GitHub: ${title}`,\n        type: 'github_markdown'\n      };\n      \n      const createdLink = await cerebroApi.externalLinks.createExternalLink(linkData);\n      \n      setLinks(prev => [...prev, createdLink]);\n      setNewLink({ url: '', title: '', type: 'github_markdown' });\n      setError(null);\n      \n      if (onLinkAdded) {\n        onLinkAdded(createdLink);\n      }\n    } catch (err) {\n      console.error('Fehler beim Erstellen des GitHub-Links:', err);\n      setError(t('githubLink.createError'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // GitHub-Link entfernen\n  const removeLink = async (linkId: string) => {\n    try {\n      setLoading(true);\n      await cerebroApi.externalLinks.deleteLink(linkId);\n      setLinks(prev => prev.filter(link => link.id !== linkId));\n      \n      if (onLinkRemoved) {\n        onLinkRemoved(linkId);\n      }\n    } catch (err) {\n      console.error('Fehler beim Lschen des GitHub-Links:', err);\n      setError(t('githubLink.deleteError'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // URL-Format validieren (fr GitHub-URLs)\n  const isValidGitHubUrl = (url: string): boolean => {\n    return (\n      url.includes('github.com') || \n      url.includes('raw.githubusercontent.com')\n    ) && url.trim().length > 0;\n  };\n\n  return (\n    <div className=\"github-link-manager\">\n      <h3 className=\"text-lg font-medium mb-2 dark:text-white\">{t('githubLink.markdownFiles')}</h3>\n      \n      {/* Fehleranzeige */}\n      {error && (\n        <div className=\"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4\">\n          {error}\n        </div>\n      )}\n      \n      {/* Formular zum Hinzufgen eines neuen GitHub-Links */}\n      <form onSubmit={addGitHubLink} className=\"mb-4\">\n        <div className=\"flex flex-col space-y-2\">\n          <div>\n            <label htmlFor=\"github-url\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              GitHub URL\n            </label>\n            <input\n              id=\"github-url\"\n              type=\"url\"\n              value={newLink.url}\n              onChange={(e) => setNewLink({ ...newLink, url: e.target.value })}\n              placeholder=\"https://github.com/username/repo/blob/main/file.md\"\n              className={`w-full px-3 py-2 border rounded-md ${\n                !isValidGitHubUrl(newLink.url) && newLink.url.length > 0\n                  ? 'border-red-300 dark:border-red-700 focus:ring-red-500 focus:border-red-500'\n                  : 'border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500'\n              } dark:bg-gray-700 dark:text-white`}\n              required\n            />\n            {!isValidGitHubUrl(newLink.url) && newLink.url.length > 0 && (\n              <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">\n                {t('githubLink.invalidUrlMessage')}\n              </p>\n            )}\n          </div>\n          \n          <div>\n            <label htmlFor=\"github-title\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              {t('githubLink.titleOptional')}\n            </label>\n            <input\n              id=\"github-title\"\n              type=\"text\"\n              value={newLink.title}\n              onChange={(e) => setNewLink({ ...newLink, title: e.target.value })}\n              placeholder={t('githubLink.titlePlaceholder')}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n            />\n          </div>\n          \n          <button\n            type=\"submit\"\n            disabled={loading || !isValidGitHubUrl(newLink.url)}\n            className={`mt-2 px-4 py-2 rounded-md text-white ${\n              loading || !isValidGitHubUrl(newLink.url)\n                ? 'bg-blue-400 dark:bg-blue-500/50 cursor-not-allowed'\n                : 'bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-600'\n            }`}\n          >\n            {loading ? t('githubLink.adding') : t('githubLink.addLink')}\n          </button>\n        </div>\n      </form>\n      \n      {/* Liste der vorhandenen GitHub-Links */}\n      <div className=\"space-y-3\">\n        <h4 className=\"text-md font-medium text-gray-700 dark:text-gray-300\">{t('githubLink.linkedFiles')}</h4>\n        \n        {loading && links.length === 0 ? (\n          <div className=\"text-gray-500 dark:text-gray-400 italic\">{t('githubLink.loading')}</div>\n        ) : links.length === 0 ? (\n          <div className=\"text-gray-500 dark:text-gray-400 italic\">{t('githubLink.noLinks')}</div>\n        ) : (\n          links.map((link) => (\n            <div key={link.id} className=\"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-md dark:bg-gray-800\">\n              <div className=\"truncate flex-1\">\n                <a \n                  href={link.url} \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"text-blue-600 dark:text-blue-400 hover:underline\"\n                >\n                  {link.title || link.url}\n                </a>\n              </div>\n              \n              <button\n                onClick={() => removeLink(link.id)}\n                className=\"ml-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300\"\n                title=\"GitHub-Link entfernen\"\n                disabled={loading}\n              >\n                Entfernen\n              </button>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default GitHubLinkManager; ","import React from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport GitHubLinkManager from './GitHubLinkManager.tsx';\nimport { CerebroExternalLink } from '../../api/cerebroApi.ts';\nimport { logger } from '../../utils/logger.ts';\n\n/**\n * Diese Komponente dient als Wrapper fr den GitHubLinkManager.\n * Sie liest den slug-Parameter aus der URL und bergibt ihn an den GitHubLinkManager.\n */\nconst GitHubLinkManagerWrapper: React.FC = () => {\n  const { t } = useTranslation();\n  // URL-Parameter auslesen\n  const { slug } = useParams<{ slug: string }>();\n  \n  // Callback-Funktionen fr Hinzufgen/Entfernen von Links\n  const handleLinkAdded = (link: CerebroExternalLink) => {\n    logger.log('Link hinzugefgt:', link);\n  };\n  \n  const handleLinkRemoved = (id: string) => {\n    logger.log('Link entfernt:', id);\n  };\n  \n  // Prfen, ob slug vorhanden ist\n  if (!slug) {\n    return (\n      <div className=\"w-full p-4\">\n        <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n          <h1 className=\"text-xl font-semibold mb-4 dark:text-white\">Fehler</h1>\n          <p className=\"dark:text-gray-300\">Kein Artikel-Slug angegeben.</p>\n        </div>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"w-full p-4\">\n      <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n        <h1 className=\"text-xl font-semibold mb-4 dark:text-white\">{t('githubLink.addTitle')}</h1>\n        <GitHubLinkManager \n          articleSlug={slug} \n          onLinkAdded={handleLinkAdded}\n          onLinkRemoved={handleLinkRemoved}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default GitHubLinkManagerWrapper; ","import React, { useState, useRef, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { \n  DocumentTextIcon, \n  PlusIcon, \n  FunnelIcon, \n  ArrowsUpDownIcon,\n  MagnifyingGlassIcon\n} from '@heroicons/react/24/outline';\n\ninterface CerebroHeaderProps {\n  searchTerm: string;\n  onSearchChange: (value: string) => void;\n  onSearchSubmit: () => void;\n  canCreateArticle: boolean;\n  onCreateArticle: () => void;\n  onFilterClick: () => void;\n  onSortClick: () => void;\n  onSortChange?: (key: string, direction: 'asc' | 'desc') => void;\n  activeFilterCount: number;\n  sortConfig?: { key: string; direction: 'asc' | 'desc' };\n}\n\nconst CerebroHeader: React.FC<CerebroHeaderProps> = ({\n  searchTerm,\n  onSearchChange,\n  onSearchSubmit,\n  canCreateArticle,\n  onCreateArticle,\n  onFilterClick,\n  onSortClick,\n  onSortChange,\n  activeFilterCount,\n  sortConfig = { key: 'title', direction: 'asc' }\n}) => {\n  const { t } = useTranslation();\n  const [isSortMenuOpen, setIsSortMenuOpen] = useState<boolean>(false);\n  const sortMenuRef = useRef<HTMLDivElement>(null);\n\n  const handleSearchKeyPress = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      onSearchSubmit();\n    }\n  };\n  \n  // Schliee Sortier-Men beim Klicken auerhalb\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (sortMenuRef.current && !sortMenuRef.current.contains(event.target as Node)) {\n        setIsSortMenuOpen(false);\n      }\n    };\n    \n    if (isSortMenuOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isSortMenuOpen]);\n  \n  const handleSortClickInternal = () => {\n    setIsSortMenuOpen(!isSortMenuOpen);\n    onSortClick();\n  };\n  \n  const handleSortChange = (key: string, direction: 'asc' | 'desc') => {\n    if (onSortChange) {\n      onSortChange(key, direction);\n    }\n    setIsSortMenuOpen(false);\n  };\n\n  return (\n    <div className=\"px-3 sm:px-4 md:px-6 py-3\">\n      <div className=\"flex items-center justify-between\">\n        {/* Linke Seite: Create-Button, Titel mit Icon */}\n        <div className=\"flex items-center gap-1.5\">\n          {/* Neuer Artikel Button - LINKS positioniert */}\n          {canCreateArticle && (\n            <div className=\"relative group\">\n              <button\n                onClick={onCreateArticle}\n                className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                style={{ width: '30.19px', height: '30.19px' }}\n                aria-label={t('cerebro.header.createArticle', 'Neuer Artikel')}\n              >\n                <PlusIcon className=\"h-4 w-4\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('cerebro.header.createArticle', 'Neuer Artikel')}\n              </div>\n            </div>\n          )}\n          <div className=\"flex items-center\">\n            <DocumentTextIcon className=\"h-6 w-6 mr-2 dark:text-white\" />\n            <h2 className=\"text-xl font-semibold dark:text-white\">{t('cerebro.header.title', 'Cerebro')}</h2>\n          </div>\n        </div>\n        \n        {/* Rechte Seite: Suchfeld, Filter, Sortieren */}\n        <div className=\"flex items-center gap-1.5\">\n          {/* Suchfeld */}\n          <div className=\"relative\">\n            <input\n              type=\"text\"\n              placeholder={t('cerebro.header.searchPlaceholder', 'Artikel suchen...')}\n              className=\"w-[200px] px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n              value={searchTerm}\n              onChange={(e) => onSearchChange(e.target.value)}\n              onKeyPress={handleSearchKeyPress}\n            />\n            <MagnifyingGlassIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n          </div>\n          \n          {/* Filter-Button */}\n          <div className=\"relative group\">\n            <button\n              className={`p-2 rounded-md ${\n                activeFilterCount > 0 \n                  ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' \n                  : 'hover:bg-gray-100 dark:hover:bg-gray-700'\n              }`}\n              onClick={onFilterClick}\n            >\n              <FunnelIcon className=\"h-5 w-5\" />\n              {activeFilterCount > 0 && (\n                <span \n                  className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center z-10\" \n                  style={{ position: 'absolute', top: '-0.25rem', right: '-0.25rem' }}\n                >\n                  {activeFilterCount}\n                </span>\n              )}\n            </button>\n            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n              {t('cerebro.header.filter', 'Filter')}\n            </div>\n          </div>\n          \n          {/* Sortier-Button mit Dropdown */}\n          <div className=\"relative group\" ref={sortMenuRef}>\n            <button\n              className=\"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700\"\n              onClick={handleSortClickInternal}\n            >\n              <ArrowsUpDownIcon className=\"h-5 w-5\" />\n            </button>\n            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n              {t('cerebro.header.sort', 'Sortieren')}\n            </div>\n            \n            {/* Sortier-Dropdown-Men */}\n            {isSortMenuOpen && (\n              <div className=\"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg z-50 min-w-[200px]\">\n                <div className=\"py-1\">\n                  <button\n                    onClick={() => handleSortChange('title', 'asc')}\n                    className={`w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                      sortConfig.key === 'title' && sortConfig.direction === 'asc' ? 'bg-blue-50 dark:bg-blue-900/30' : ''\n                    }`}\n                  >\n                    {t('cerebro.sort.titleAsc', 'Titel (A-Z)')}\n                  </button>\n                  <button\n                    onClick={() => handleSortChange('title', 'desc')}\n                    className={`w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                      sortConfig.key === 'title' && sortConfig.direction === 'desc' ? 'bg-blue-50 dark:bg-blue-900/30' : ''\n                    }`}\n                  >\n                    {t('cerebro.sort.titleDesc', 'Titel (Z-A)')}\n                  </button>\n                  <button\n                    onClick={() => handleSortChange('createdAt', 'desc')}\n                    className={`w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                      sortConfig.key === 'createdAt' && sortConfig.direction === 'desc' ? 'bg-blue-50 dark:bg-blue-900/30' : ''\n                    }`}\n                  >\n                    {t('cerebro.sort.createdAtDesc', 'Neueste zuerst')}\n                  </button>\n                  <button\n                    onClick={() => handleSortChange('createdAt', 'asc')}\n                    className={`w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                      sortConfig.key === 'createdAt' && sortConfig.direction === 'asc' ? 'bg-blue-50 dark:bg-blue-900/30' : ''\n                    }`}\n                  >\n                    {t('cerebro.sort.createdAtAsc', 'lteste zuerst')}\n                  </button>\n                  <button\n                    onClick={() => handleSortChange('updatedAt', 'desc')}\n                    className={`w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                      sortConfig.key === 'updatedAt' && sortConfig.direction === 'desc' ? 'bg-blue-50 dark:bg-blue-900/30' : ''\n                    }`}\n                  >\n                    {t('cerebro.sort.updatedAtDesc', 'Zuletzt aktualisiert')}\n                  </button>\n                  <button\n                    onClick={() => handleSortChange('updatedAt', 'asc')}\n                    className={`w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                      sortConfig.key === 'updatedAt' && sortConfig.direction === 'asc' ? 'bg-blue-50 dark:bg-blue-900/30' : ''\n                    }`}\n                  >\n                    {t('cerebro.sort.updatedAtAsc', 'lteste Aktualisierung')}\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CerebroHeader;\n\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Routes, Route, useNavigate, Outlet, useParams, useLocation } from 'react-router-dom';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { cerebroApi, CerebroArticle } from '../api/cerebroApi.ts';\nimport ArticleList from '../components/cerebro/ArticleList.tsx';\nimport ArticleView from '../components/cerebro/ArticleView.tsx';\nimport ArticleEdit from '../components/cerebro/ArticleEdit.tsx';\nimport ArticleStructure from '../components/cerebro/ArticleStructure.tsx';\nimport AddMedia from '../components/cerebro/AddMedia.tsx';\nimport AddExternalLink from '../components/cerebro/AddExternalLink.tsx';\nimport GitHubLinkManagerWrapper from '../components/cerebro/GitHubLinkManagerWrapper.tsx';\nimport GitHubMarkdownViewer from '../components/cerebro/GitHubMarkdownViewer.tsx';\nimport CerebroHeader from '../components/cerebro/CerebroHeader.tsx';\nimport FilterPane from '../components/FilterPane.tsx';\nimport SavedFilterTags from '../components/SavedFilterTags.tsx';\nimport { useFilterContext } from '../contexts/FilterContext.tsx';\nimport { FilterCondition } from '../components/FilterRow.tsx';\nimport { applyFilters, GetFieldValue, ColumnEvaluator } from '../utils/filterLogic.ts';\nimport ReactMarkdown from 'react-markdown';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { logger } from '../utils/logger.ts';\n\n// GitHub Repository-Informationen\nconst GITHUB_OWNER = 'freshprince84';\nconst GITHUB_REPO = 'intranet';\nconst GITHUB_BRANCH = 'main';\n\n// Spalten-Definitionen fr Cerebro-Artikel\nconst CEREBRO_TABLE_ID = 'CEREBRO_ARTICLES';\n\n// Layout-Komponente, die die ArticleStructure enthlt\nconst CerebroLayout: React.FC = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { hasPermission } = usePermissions();\n  \n  const [isMobile, setIsMobile] = useState<boolean>(window.innerWidth < 768);\n  const [isTabletOrLarger, setIsTabletOrLarger] = useState<boolean>(window.innerWidth >= 768);\n  const [sidebarOpen, setSidebarOpen] = useState<boolean>(window.innerWidth >= 768);\n  \n  // Topbar-Ref und Hhe fr dynamische Berechnung\n  const topbarRef = useRef<HTMLDivElement>(null);\n  const [topbarHeight, setTopbarHeight] = useState<number>(200); // Default: ~200px\n  \n  // Filter und Sortierung State\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  const [isFilterPaneOpen, setIsFilterPaneOpen] = useState<boolean>(false);\n  const [activeFilterName, setActiveFilterName] = useState<string>('');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n  const [sortConfig, setSortConfig] = useState<{ key: string; direction: 'asc' | 'desc' }>({ \n    key: 'title', \n    direction: 'asc' \n  });\n  \n  // Berechtigungen\n  const canCreateArticle = hasPermission('cerebro', 'both', 'button') || hasPermission('cerebro', 'both', 'page');\n  \n  // Spalten-Definitionen\n  const cerebroColumns = useMemo(() => [\n    { id: 'title', label: t('cerebro.filters.title', 'Titel') },\n    { id: 'createdAt', label: t('cerebro.filters.createdAt', 'Erstellt am') },\n    { id: 'updatedAt', label: t('cerebro.filters.updatedAt', 'Aktualisiert am') },\n    { id: 'createdBy', label: t('cerebro.filters.createdBy', 'Erstellt von') },\n    { id: 'parentId', label: t('cerebro.filters.category', 'Kategorie') },\n    { id: 'githubPath', label: t('cerebro.filters.hasGithubPath', 'Hat GitHub-Pfad') },\n    { id: 'isPublished', label: t('cerebro.filters.isPublished', 'Verffentlicht') }\n  ], [t]);\n  \n  //  MEMORY: Cleanup - Filter States beim Unmount lschen\n  useEffect(() => {\n    return () => {\n      setFilterConditions([]);\n      setFilterLogicalOperators([]);\n    };\n  }, []); // Nur beim Unmount ausfhren\n\n  useEffect(() => {\n    const handleResize = () => {\n      const newIsMobile = window.innerWidth < 768;\n      setIsMobile(newIsMobile);\n      setIsTabletOrLarger(window.innerWidth >= 768);\n      \n      // Auf Tablet-Gren und grer immer ffnen\n      if (window.innerWidth >= 768) {\n        setSidebarOpen(true);\n      }\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n  \n  // Kommunikation mit der ArticleStructure-Komponente fr die Sidebar-Steuerung\n  useEffect(() => {\n    // Event-Listener fr Sidebar-Toggle-Nachrichten\n    const handleSidebarToggle = (event: CustomEvent) => {\n      if (event.detail && typeof event.detail.open === 'boolean') {\n        setSidebarOpen(event.detail.open);\n      }\n    };\n    \n    window.addEventListener('cerebro-sidebar-toggle' as any, handleSidebarToggle as any);\n    return () => window.removeEventListener('cerebro-sidebar-toggle' as any, handleSidebarToggle as any);\n  }, []);\n  \n  // Berechne Topbar-Hhe dynamisch\n  useEffect(() => {\n    const updateTopbarHeight = () => {\n      if (topbarRef.current) {\n        setTopbarHeight(topbarRef.current.clientHeight);\n      }\n    };\n    \n    // Initial berechnen\n    updateTopbarHeight();\n    \n    // Bei FilterPane-nderung neu berechnen (mit kleiner Verzgerung fr DOM-Update)\n    const timeoutId = setTimeout(updateTopbarHeight, 100);\n    \n    // Auch bei Resize neu berechnen\n    window.addEventListener('resize', updateTopbarHeight);\n    \n    return () => {\n      clearTimeout(timeoutId);\n      window.removeEventListener('resize', updateTopbarHeight);\n    };\n  }, [isFilterPaneOpen]);\n  \n  // Suche-Handler\n  const handleSearch = () => {\n    if (searchTerm.trim()) {\n      navigate(`/cerebro/search?q=${encodeURIComponent(searchTerm)}`);\n    } else {\n      navigate('/cerebro/all');\n    }\n  };\n  \n  // Filter-Handler\n  const applyFilterConditions = (\n    conditions: FilterCondition[], \n    operators: ('AND' | 'OR')[]\n  ) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n  };\n  \n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setSortConfig({ key: 'title', direction: 'asc' });\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n  \n  const handleFilterChange = async (\n    name: string, \n    id: number | null, \n    conditions: FilterCondition[], \n    operators: ('AND' | 'OR')[]\n  ) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators);\n  };\n  \n  //  STANDARD: Filter-Laden und Default-Filter-Anwendung\n  const filterContext = useFilterContext();\n  const { loadFilters } = filterContext;\n  \n  useEffect(() => {\n    const initialize = async () => {\n      // 1. Filter laden (wartet auf State-Update)\n      const filters = await loadFilters(CEREBRO_TABLE_ID);\n      \n      // 2. Default-Filter anwenden (IMMER vorhanden!)\n      const defaultFilter = filters.find(f => f.name === 'Alle Artikel');\n      if (defaultFilter) {\n        await handleFilterChange(\n          defaultFilter.name,\n          defaultFilter.id,\n          defaultFilter.conditions,\n          defaultFilter.operators\n        );\n        return; // Filter wird angewendet\n      }\n      \n      // 3. Fallback: Kein Filter (sollte nie passieren)\n      // Cerebro filtert client-seitig, daher keine Daten-Lade-Funktion ntig\n    };\n    \n    initialize();\n  }, [loadFilters, handleFilterChange]);\n  \n  // Sortier-Handler\n  const handleSortClick = () => {\n    // Wird in CerebroHeader gehandhabt\n  };\n  \n  const handleSortChange = (key: string, direction: 'asc' | 'desc') => {\n    setSortConfig({ key, direction });\n  };\n  \n  return (\n    <div className=\"min-h-screen dark:bg-gray-900\">\n      {/* Standard-Container-Pattern wie Worktracker/Consultations */}\n      <div className=\"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6\">\n        {/* Header-Bereich - FIXIERT mit sticky, nicht scrollbar */}\n        <div \n          ref={topbarRef}\n          className=\"sticky top-0 z-10 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700\"\n          data-cerebro-topbar\n        >\n          <div className={`max-w-7xl mx-auto ${isMobile ? '' : 'px-5'}`}>\n            <CerebroHeader\n              searchTerm={searchTerm}\n              onSearchChange={setSearchTerm}\n              onSearchSubmit={handleSearch}\n              canCreateArticle={canCreateArticle}\n              onCreateArticle={() => navigate('/cerebro/create')}\n              onFilterClick={() => setIsFilterPaneOpen(!isFilterPaneOpen)}\n              onSortClick={handleSortClick}\n              onSortChange={handleSortChange}\n              activeFilterCount={filterConditions.length}\n              sortConfig={sortConfig}\n            />\n        </div>\n        \n          {/* FilterPane (ausklappbar) - auch fixiert */}\n        {isFilterPaneOpen && (\n          <div className=\"w-full border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800\">\n            <div className={`max-w-7xl mx-auto ${isMobile ? 'px-4' : 'px-5'} py-2`}>\n              <FilterPane\n                columns={cerebroColumns}\n                onApply={applyFilterConditions}\n                onReset={resetFilterConditions}\n                savedConditions={filterConditions}\n                savedOperators={filterLogicalOperators}\n                tableId={CEREBRO_TABLE_ID}\n              />\n            </div>\n          </div>\n        )}\n        \n          {/* SavedFilterTags - auch fixiert */}\n        <div className=\"w-full border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800\">\n          <div className={`max-w-7xl mx-auto ${isMobile ? 'px-4' : 'px-5'} py-2`}>\n            <SavedFilterTags\n              tableId={CEREBRO_TABLE_ID}\n              onSelectFilter={applyFilterConditions}\n              onReset={resetFilterConditions}\n              activeFilterName={activeFilterName}\n              selectedFilterId={selectedFilterId}\n              onFilterChange={handleFilterChange}\n              defaultFilterName=\"Alle Artikel\" //  FIX: Hardcodiert (konsistent mit DB)\n            />\n            </div>\n          </div>\n        </div>\n        \n        {/* Sidebar + Main Flex-Layout - Topbar ist jetzt auerhalb, fixed-height-container entfernt */}\n        <div className={`flex ${isTabletOrLarger ? `h-[calc(100vh-${topbarHeight}px)]` : 'min-h-[calc(100vh-200px)]'}`}>\n          {/* Sidebar - scrollbar */}\n          <div \n            className={`\n              ${sidebarOpen ? 'w-60' : ''}\n              ${isMobile && !sidebarOpen ? 'w-0' : ''} \n              transition-all duration-300 ease-in-out shrink-0\n              ${isTabletOrLarger ? 'overflow-y-auto' : ''}\n            `}\n          >\n            <ArticleStructure mdFiles={[]} />\n          </div>\n          \n          {/* Main-Content - scrollbar, horizontales Overflow verhindern */}\n          <div className={`flex-grow ${isMobile ? 'overflow-y-container' : 'overflow-y-auto overflow-x-hidden'} ${\n            isMobile \n              ? 'px-0 pt-2 pb-16' // Horizontales Padding auf 0, Bottom-Padding erhht fr den Footer\n              : `pt-3 pb-4` // Padding wie aktuell, negatives Margin entfernt\n          }`}>\n            <div className={`${isMobile ? 'mobile-full-width' : 'max-w-7xl mx-auto px-5'}`}>\n              <Outlet context={{ filterConditions, filterLogicalOperators, sortConfig, searchTerm }} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Inhalt fr die Startseite - zeigt das README an\nconst CerebroHome: React.FC = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n      <h1 className=\"text-2xl font-bold mb-6 dark:text-white\">{t('cerebro.home.title')}</h1>\n      <GitHubMarkdownViewer \n        owner={GITHUB_OWNER}\n        repo={GITHUB_REPO}\n        path=\"docs/core/README.md\"\n        branch={GITHUB_BRANCH}\n      />\n    </div>\n  );\n};\n\n// Markdown-Viewer fr Dateien aus GitHub\nconst GitHubFileView: React.FC = () => {\n  const { t } = useTranslation();\n  const { slug } = useParams<{ slug: string }>();\n  const [mdFile, setMdFile] = useState<{path: string, title: string} | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  useEffect(() => {\n    if (!slug) return;\n    \n    // Versuche den Artikel aus der Datenbank zu laden\n    const loadArticle = async () => {\n      try {\n        setLoading(true);\n        \n        // berprfe, ob es einen Datenbankartikel mit diesem Slug gibt\n        const article = await cerebroApi.articles.getArticleBySlug(slug);\n        \n        // Prfen, ob es ein GitHub Markdown-Artikel ist\n        // Dies wird in ArticleViewWithRouter bereits geprft, aber wir prfen es hier zur Sicherheit nochmal\n        const markdownFolder = await cerebroApi.articles.getArticleBySlug('markdown-folder');\n        if (markdownFolder && article.parentId === markdownFolder.id) {\n          // Hat der Artikel einen githubPath?\n          if (article.githubPath) {\n            setMdFile({\n              path: article.githubPath,\n              title: article.title\n            });\n            setLoading(false);\n            return;\n          }\n        }\n        \n        // Es handelt sich um einen normalen Artikel, also kein GitHub-Datei-Pfad notwendig\n        // Der Rest der Verarbeitung wird in der ArticleView-Komponente fortgesetzt\n        \n        setLoading(false);\n      } catch (err) {\n        // Falls der Artikel nicht gefunden wurde, versuche es als Markdown aus GitHub zu laden\n        if (process.env.NODE_ENV === 'development') {\n        logger.log(\"Artikel nicht in der Datenbank gefunden, versuche als Markdown-Datei zu laden\");\n        }\n        \n        // Fallback fr den Fall, dass der Artikel nicht in der DB ist oder keinen githubPath hat\n        // Lookup-Map fr bekannte Markdown-Dateien und ihre richtigen Pfade\n        const knownMdFiles: Record<string, {path: string, title: string}> = {\n          'readme': { path: 'docs/core/README.md', title: 'Readme - berblick' },\n          'project-setup': { path: 'docs/core/ENTWICKLUNGSUMGEBUNG.md', title: 'Projekt-Einrichtung' },\n          'dokumentationsstandards': { path: 'docs/core/DOKUMENTATIONSSTANDARDS.md', title: 'Dokumentationsstandards' },\n          'design-standards': { path: 'docs/core/DESIGN_STANDARDS.md', title: 'Design-Standards' },\n          'coding-standards': { path: 'docs/core/CODING_STANDARDS.md', title: 'Coding-Standards' },\n          'modul-zeiterfassung': { path: 'docs/modules/MODUL_ZEITERFASSUNG.md', title: 'Modul: Zeiterfassung' },\n          'cerebro-wiki': { path: 'docs/modules/MODUL_CEREBRO.md', title: 'Cerebro Wiki-System' },\n          'modul-teamkontrolle': { path: 'docs/modules/MODUL_TEAMKONTROLLE.md', title: 'Modul: Teamkontrolle' },\n          'modul-abrechnung': { path: 'docs/modules/MODUL_ABRECHNUNG.md', title: 'Modul: Abrechnung' },\n          'db-schema': { path: 'docs/technical/DATENBANKSCHEMA.md', title: 'Datenbankschema' },\n          'api-integration': { path: 'docs/technical/API_REFERENZ.md', title: 'API-Referenz' },\n          'role-switch': { path: 'docs/modules/ROLE_SWITCH.md', title: 'Rollenwechsel-Funktionalitt' },\n          'changelog': { path: 'docs/core/CHANGELOG.md', title: 'nderungshistorie' }\n        };\n        \n        // HINWEIS: Diese Map dient nur als Fallback und sollte nach einem kompletten Datenbank-Update\n        // mit githubPath-Werten fr alle Artikel entfernt werden knnen\n        \n        // Fr den Fall, dass es ein Custom-Artikel ist, mit korrektem Case im Namen\n        if (knownMdFiles[slug]) {\n          setMdFile(knownMdFiles[slug]);\n        } else {\n          // Fallback: Versuche den Dateinamen aus dem Slug abzuleiten\n          setMdFile({\n            path: `${slug}.md`,\n            title: slug.charAt(0).toUpperCase() + slug.slice(1).replace(/-/g, ' ')\n          });\n        }\n        \n        setLoading(false);\n      }\n    };\n    \n    loadArticle();\n  }, [slug]);\n  \n  if (loading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow flex justify-center\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n  \n  if (!mdFile) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n        <h1 className=\"text-xl font-semibold mb-4 dark:text-white\">{t('cerebro.fileView.fileNotFound')}</h1>\n        <p className=\"dark:text-gray-300\">{t('cerebro.fileView.fileNotFoundDescription')}</p>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n      <h1 className=\"text-2xl font-bold mb-6 dark:text-white\">{mdFile.title}</h1>\n      <GitHubMarkdownViewer \n        owner={GITHUB_OWNER}\n        repo={GITHUB_REPO}\n        path={mdFile.path}\n        branch={GITHUB_BRANCH}\n      />\n    </div>\n  );\n};\n\n// Komponente fr alle Artikel\nconst CerebroAllArticles: React.FC = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n      <h2 className=\"text-xl font-semibold mb-4 dark:text-white\">{t('cerebro.allArticles.title')}</h2>\n      <ArticleList />\n    </div>\n  );\n};\n\n// Komponente fr die Suche nach Artikeln\nconst CerebroSearch: React.FC = () => {\n  const { t } = useTranslation();\n  const location = useLocation();\n  const queryParams = new URLSearchParams(location.search);\n  const query = queryParams.get('q') || '';\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n      <div className=\"flex items-center mb-6\">\n        <h2 className=\"text-xl font-semibold dark:text-white\">{t('cerebro.search.title')} \"{query}\"</h2>\n      </div>\n      <ArticleList searchQuery={query} />\n    </div>\n  );\n};\n\n// Artikelansicht mit Weiche\nconst ArticleViewWithRouter: React.FC = () => {\n  const { slug } = useParams<{ slug: string }>();\n  const [isMarkdownFile, setIsMarkdownFile] = useState<boolean>(false);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [articleExists, setArticleExists] = useState<boolean>(false);\n  \n  useEffect(() => {\n    const checkArticleType = async () => {\n      if (!slug) return;\n      \n      try {\n        setLoading(true);\n        \n        // Prfe, ob der Artikel in der Datenbank existiert\n        const article = await cerebroApi.articles.getArticleBySlug(slug);\n        setArticleExists(true);\n        \n        // Prfe, ob der Artikel ein Markdown-Artikel ist\n        try {\n          const markdownFolder = await cerebroApi.articles.getArticleBySlug('markdown-folder');\n          \n          // Ein Artikel ist ein Markdown-Artikel, wenn:\n          // 1. Er ein Kind des markdown-folders ist ODER\n          // 2. Er einen githubPath hat\n          if ((markdownFolder && article.parentId === markdownFolder.id) || article.githubPath) {\n            setIsMarkdownFile(true);\n          } else {\n            setIsMarkdownFile(false);\n          }\n        } catch (err) {\n          // Wenn der Markdown-Ordner nicht gefunden wird, prfe nur auf githubPath\n          if (process.env.NODE_ENV === 'development') {\n          console.warn('Markdown-Ordner nicht gefunden:', err);\n          }\n          if (article.githubPath) {\n            setIsMarkdownFile(true);\n          } else {\n            setIsMarkdownFile(false);\n          }\n        }\n        \n        setLoading(false);\n      } catch (err) {\n        if (process.env.NODE_ENV === 'development') {\n        logger.log('Artikel nicht in der Datenbank gefunden, versuche als Markdown-Datei:', err);\n        }\n        setArticleExists(false);\n        setIsMarkdownFile(true);\n        setLoading(false);\n      }\n    };\n    \n    checkArticleType();\n  }, [slug]);\n  \n  if (loading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow flex justify-center\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n  \n  // Entscheide, was angezeigt wird basierend auf den ermittelten Informationen\n  if (articleExists && !isMarkdownFile) {\n    // Es ist ein normaler Artikel in der Datenbank\n    return <ArticleView />;\n  } else {\n    // Es ist eine Markdown-Datei oder existiert nicht als Artikel in der Datenbank\n    return <GitHubFileView />;\n  }\n};\n\n// Hauptkomponente als Router\nconst Cerebro: React.FC = () => {\n  return (\n    <Routes>\n      <Route path=\"/\" element={<CerebroLayout />}>\n        <Route index element={<CerebroHome />} />\n        <Route path=\"all\" element={<CerebroAllArticles />} />\n        <Route path=\"search\" element={<CerebroSearch />} />\n        <Route path=\"create\" element={<ArticleEdit />} />\n        <Route path=\":slug\" element={<ArticleViewWithRouter />} />\n        <Route path=\":slug/edit\" element={<ArticleEdit />} />\n        <Route path=\":slug/media/add\" element={<AddMedia />} />\n        <Route path=\":slug/link/add\" element={<AddExternalLink />} />\n        <Route path=\":slug/github/add\" element={<GitHubLinkManagerWrapper />} />\n      </Route>\n    </Routes>\n  );\n};\n\nexport default Cerebro; "],"names":["cerebroApi","getAllArticles","async","api","get","data","getArticleById","concat","id","getArticleBySlug","slug","getArticlesStructure","createArticle","post","updateArticle","put","deleteArticle","delete","searchArticles","encodeURIComponent","query","getMediaByArticle","carticleId","getMediaById","uploadMedia","formData","onUploadProgress","deleteMedia","updateMediaFilename","filename","getLinksByArticle","getLinkById","getLinkPreview","url","createLink","link","updateLink","title","deleteLink","createExternalLink","updateExternalLink","deleteExternalLink","_ref","limit","searchQuery","initialSearchQuery","t","useTranslation","articles","setArticles","useState","loading","setLoading","error","setError","setSearchQuery","sortBy","setSortBy","sortDirection","setSortDirection","navigate","useNavigate","hasPermission","usePermissions","canCreateArticle","useEffect","err","console","fetchArticles","handleSearch","trim","toggleSort","field","sortedArticles","sort","a","b","localeCompare","dateA","Date","updatedAt","getTime","dateB","getCreatorName","article","creatorFirstName","creatorLastName","getParentTitle","parentId","_jsxs","className","children","_jsx","onClick","navigateToCreateArticle","FaPlus","defaultValue","type","placeholder","value","onChange","e","target","onKeyDown","key","FaSearch","_Fragment","length","FaSortAlphaDown","FaSortAlphaUp","FaSortAmountDown","FaSortAmountUp","map","navigateToArticle","dateString","toLocaleDateString","day","month","year","hour","minute","owner","repo","path","branch","content","setContent","response","fetch","ok","Error","status","markdownContent","text","message","fetchMarkdown","components","code","_ref2","node","inline","props","_objectWithoutProperties","_excluded","match","exec","_objectSpread","String","replace","h1","h2","h3","rel","table","th","td","ul","ol","li","img","p","blockquote","href","ReactMarkdown","remarkPlugins","remarkGfm","rehypePlugins","rehypeRaw","rehypeSanitize","Icon","Link","LinkIcon","Spinner","ArrowLeft","ArrowLeftIcon","User","UserCircleIcon","Clock","ClockIcon","ArticleView","useParams","setArticle","githubLinks","setGithubLinks","selectedGithubLink","setSelectedGithubLink","isInternalDocument","setIsInternalDocument","hasCerebroButtonPermission","articleData","github","externalLinks","filter","fetchArticle","markdownFolder","isInternal","githubPath","warn","checkIfInternalDocument","PencilIcon","window","confirm","alert","TrashIcon","formatDateTimeForCerebro","renderContent","githubInfo","includes","parts","split","slice","join","typeIndex","indexOf","parseGitHubUrl","GitHubMarkdownViewer","attachmentMetadata","media","parseInt","fileName","fileType","mimetype","getCerebroMediaUrl","MarkdownPreview","showImagePreview","mediaUrl","isImage","startsWith","isPdf","isVideo","src","alt","style","display","DocumentTextIcon","height","FilmIcon","controls","maxHeight","DocumentIcon","to","PlusIcon","xmlns","viewBox","fill","d","ArticleEdit","setFormData","saving","setSaving","isNewArticle","setIsNewArticle","articleId","setArticleId","articleSlug","setArticleSlug","uploading","setUploading","temporaryMedia","setTemporaryMedia","textareaRef","useRef","fileInputRef","temporaryMediaRef","current","forEach","oldMedia","find","m","URL","revokeObjectURL","hasCerebroPagePermission","canEditArticles","TemporaryMediaPreview","mediaType","tempUrl","getMediaIcon","PhotoIcon","handleUpload","createObjectURL","file","tempMedia","name","fileSize","size","prev","FormData","append","location","origin","handlePaste","handleDrop","handleDragOver","onUpload","uploadFileAndInsertLink","useCallback","result","insertText","cursorPos","selectionStart","textBefore","substring","textAfter","setTimeout","newPos","selectionEnd","focus","_error$response","_error$response$data","errorMessage","items","event","clipboardData","i","item","preventDefault","getAsFile","stopPropagation","dataTransfer","files","useUnifiedEditor","articlesData","fetchData","handleInputChange","onSubmit","savedArticle","uploadFormData","dispatchEvent","CustomEvent","detail","_err$response","_err$response$data","htmlFor","required","ref","rows","onPaste","onDrop","onDragOver","_fileInputRef$current","click","stroke","strokeLinecap","strokeLinejoin","strokeWidth","index","temporaryAttachments","tm","handleCancel","disabled","XMarkIcon","ArrowPathIcon","CheckIcon","ArticleTree","currentSlug","level","expandedIds","Set","onToggleExpand","onArticleClick","hasChildren","isExpanded","has","isActive","handleArticleClick","handleExpandToggle","MinusIcon","HPlusIcon","_markdownFolder$child","mdFiles","structure","setStructure","databaseArticles","setDatabaseArticles","setMarkdownFolder","isMobile","setIsMobile","innerWidth","setExpandedIds","sidebarOpen","setSidebarOpen","handleResize","newIsMobile","addEventListener","removeEventListener","fetchArticlesStructure","structureData","Array","isArray","normalizeArticle","normalized","child","normalizedData","markdownFolderItem","newSet","add","_err$response2","_err$response3","handleArticleCreated","handleToggleExpand","toggleSidebar","newState","open","Bars3Icon","mdFile","MediaPreviewWithCleanup","blobUrlsRef","setUrl","blobUrl","AddMedia","selectedFile","setSelectedFile","setFileName","progress","setProgress","isFileTypeSupported","handleSelectFile","progressEvent","percentCompleted","Math","round","loaded","total","getFileTypeIcon","accept","toFixed","width","AddExternalLink","setTitle","previewLoading","setPreviewLoading","preview","setPreview","canAddLinks","timer","getPreview","clearTimeout","isValidUrl","urlToPreview","previewData","string","_","undefined","carticleSlug","thumbnail","getLinkTypeDisplay","onLinkAdded","onLinkRemoved","links","setLinks","newLink","setNewLink","fetchedLinks","fetchLinks","isValidGitHubUrl","urlParts","linkData","createdLink","linkId","removeLink","GitHubLinkManagerWrapper","GitHubLinkManager","logger","log","searchTerm","onSearchChange","onSearchSubmit","onCreateArticle","onFilterClick","onSortClick","onSortChange","activeFilterCount","sortConfig","direction","isSortMenuOpen","setIsSortMenuOpen","sortMenuRef","handleClickOutside","contains","document","handleSortChange","onKeyPress","MagnifyingGlassIcon","FunnelIcon","position","top","right","handleSortClickInternal","ArrowsUpDownIcon","GITHUB_OWNER","GITHUB_REPO","GITHUB_BRANCH","CEREBRO_TABLE_ID","CerebroLayout","useLocation","isTabletOrLarger","setIsTabletOrLarger","topbarRef","topbarHeight","setTopbarHeight","setSearchTerm","filterConditions","setFilterConditions","filterLogicalOperators","setFilterLogicalOperators","isFilterPaneOpen","setIsFilterPaneOpen","activeFilterName","setActiveFilterName","selectedFilterId","setSelectedFilterId","setSortConfig","cerebroColumns","useMemo","label","handleSidebarToggle","updateTopbarHeight","clientHeight","timeoutId","applyFilterConditions","conditions","operators","resetFilterConditions","handleFilterChange","filterContext","useFilterContext","loadFilters","defaultFilter","f","initialize","CerebroHeader","handleSortClick","FilterPane","columns","onApply","onReset","savedConditions","savedOperators","tableId","SavedFilterTags","onSelectFilter","onFilterChange","defaultFilterName","ArticleStructure","Outlet","context","CerebroHome","GitHubFileView","setMdFile","process","knownMdFiles","charAt","toUpperCase","loadArticle","CerebroAllArticles","ArticleList","CerebroSearch","URLSearchParams","search","ArticleViewWithRouter","isMarkdownFile","setIsMarkdownFile","articleExists","setArticleExists","checkArticleType","Cerebro","Routes","Route","element"],"sourceRoot":""}