{"version":3,"file":"static/js/692.3ee51e37.chunk.js","mappings":"mJAeO,SAASA,EACdC,EACAC,GAMO,IALPC,EAICC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAEL,MAAM,WAAEG,EAAa,IAAG,QAAEC,GAAU,EAAI,qBAAEC,GAAyBN,EAG7DO,GAAcC,EAAAA,EAAAA,WAGpBC,EAAAA,EAAAA,YAAU,KACRF,EAAYG,QAAUX,CAAQ,GAC7B,CAACA,KAGJU,EAAAA,EAAAA,YAAU,KACR,IAAKJ,IAAYP,EAAaY,QAAS,OAEvC,MAAMC,EAAYb,EAAaY,QACzBE,EAAmB,CAAEF,QAAS,MAG9BG,EAAeA,KACfD,EAAiBF,SACnBI,aAAaF,EAAiBF,SAEhCE,EAAiBF,QAAUK,YAAW,KAAO,IAADC,EACvB,QAAnBA,EAAAT,EAAYG,eAAO,IAAAM,GAAnBA,EAAAC,KAAAV,EAAuB,GACtBH,EAAW,EAIVc,EAAiB,IAAIC,gBAAe,KACxCN,GAAc,IAEhBK,EAAeE,QAAQT,GAGC,OAApBL,QAAoB,IAApBA,GAAAA,EAAsBI,SACxBQ,EAAeE,QAAQd,EAAqBI,SAI9C,MAAMW,EAAqBA,KACzBR,GAAc,EAIhB,OAFAS,OAAOC,iBAAiB,SAAUF,GAE3B,KACLH,EAAeM,aACfF,OAAOG,oBAAoB,SAAUJ,GACjCT,EAAiBF,SACnBI,aAAaF,EAAiBF,QAChC,CACD,GACA,CAACL,EAASD,EAAYN,EAAcQ,GACzC,C,6JChCA,MAuoBA,EA1lB4CoB,IAQrC,IARsC,UAC3CC,EAAS,SACTC,EAAQ,SACRC,EAAQ,MACRC,EAAK,QACLC,EAAO,QACPC,EAAO,OACPC,GACDP,EACC,MAAM,EAAEQ,IAAMC,EAAAA,EAAAA,OACPC,EAAWC,IAAgBC,EAAAA,EAAAA,UAA6C,KAExEC,EAAOC,IAAYF,EAAAA,EAAAA,UAAiB,KACpCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAiB,KACpCK,EAAUC,IAAeN,EAAAA,EAAAA,UAAmB,KAC5CO,EAAaC,IAAkBR,EAAAA,EAAAA,UAAmB,KAClDS,EAAcC,IAAmBV,EAAAA,EAAAA,WAAS,IAC1CW,EAAcC,IAAmBZ,EAAAA,EAAAA,WAAS,IAC1Ca,EAAiBC,IAAsBd,EAAAA,EAAAA,WAAS,IAChDe,EAAoBC,IAAyBhB,EAAAA,EAAAA,WAAS,IAG7D7B,EAAAA,EAAAA,YAAU,KACR4B,EApE6BkB,EAACC,EAAkBtB,KAElD,MAAMuB,EAAgB,CACpB,CAAEC,MAAO,SAAUC,MAAOzB,EAAE,4BAC5B,CAAEwB,MAAO,WAAYC,MAAOzB,EAAE,8BAC9B,CAAEwB,MAAO,aAAcC,MAAOzB,EAAE,gCAChC,CAAEwB,MAAO,WAAYC,MAAOzB,EAAE,+BAI1B0B,EAAgB,CACpB,CAAEF,MAAO,SAAUC,MAAOzB,EAAE,+BAC5B,CAAEwB,MAAO,QAASC,MAAOzB,EAAE,2BAC3B,CAAEwB,MAAO,SAAUC,MAAOzB,EAAE,4BAC5B,CAAEwB,MAAO,UAAWC,MAAOzB,EAAE,8BAIzB2B,EAAoB,CACxB,CAAEH,MAAO,SAAUC,MAAOzB,EAAE,6BAC5B,CAAEwB,MAAO,cAAeC,MAAOzB,EAAE,iCACjC,CAAEwB,MAAO,WAAYC,MAAOzB,EAAE,+BAI1B4B,EAAkB,CACtB,CAAEJ,MAAO,SAAUC,MAAOzB,EAAE,4BAC5B,CAAEwB,MAAO,YAAaC,MAAOzB,EAAE,gCAIjC,MAAiB,YAAbsB,GAAuC,cAAbA,GAAyC,gBAAbA,GAA2C,iBAAbA,GAA4C,gBAAbA,GAA2C,SAAbA,EAC5II,EACe,aAAbJ,GAAwC,WAAbA,EAC7BK,EACe,WAAbL,GAAsC,kBAAbA,GAA6C,eAAbA,GAA0C,SAAbA,GAAoC,WAAbA,GAGhG,gBAAbA,GAA2C,mBAAbA,GAA8C,iCAAbA,EADjEM,EAIAL,CACT,EA0BeF,CAAyB5B,EAAUoC,OAAQ7B,GAAG,GAC1D,CAACP,EAAUoC,OAAQ7B,KAGtBzB,EAAAA,EAAAA,YAAU,KAER,MAAMuD,EAAkB,IAAIC,gBAyH5B,MAvH0BC,WAExB,GADcC,aAAaC,QAAQ,SACnC,CAGA,GAAyB,gBAArBzC,EAAUoC,QAAiD,gBAArBpC,EAAUoC,QAAiD,mBAArBpC,EAAUoC,QAAoD,iCAArBpC,EAAUoC,OAA2C,CAE5Kf,GAAgB,GAChB,IACE,MAAMqB,QAAiBC,EAAAA,EAAcC,IAAI,kBAAmB,CAC1DC,OAAQR,EAAgBQ,SAE1BhC,EAAS6B,EAASI,KACpB,CAAE,MAAOC,GACHA,EAAMC,IAKZ,CAAC,QACMX,EAAgBQ,OAAOI,SAC5B5B,GAAgB,EAElB,CAGuBjB,EAAQ8C,MAAKC,GAAkB,gBAAXA,EAAIC,IAAmC,eAAXD,EAAIC,KAA3E,MACMC,EAAcjD,EAAQ8C,MAAKC,GAAkB,gBAAXA,EAAIC,IAAmC,mBAAXD,EAAIC,KAMxE,IAA0B,gBAArBpD,EAAUoC,QAAiD,iCAArBpC,EAAUoC,SAA8CiB,EAAa,CAC9G9B,GAAgB,GAChB,IACE,MAAMmB,QAAiBC,EAAAA,EAAcC,IAAI,SAAU,CACjDC,OAAQR,EAAgBQ,SAE1B9B,EAAS2B,EAASI,KACpB,CAAE,MAAOC,GACHA,EAAMC,IAKZ,CAAC,QACMX,EAAgBQ,OAAOI,SAC5B1B,GAAgB,EAElB,CACF,CACF,CAGA,GAAyB,WAArBvB,EAAUoC,OAAqB,CACjCX,GAAmB,GACnB,IACE,MAAMiB,QAAiBC,EAAAA,EAAcC,IAAIU,EAAAA,GAAcC,SAASC,KAAM,CACpEX,OAAQR,EAAgBQ,SAE1B5B,EAAYyB,EAASI,KACvB,CAAE,MAAOC,GACHA,EAAMC,IAKZ,CAAC,QACMX,EAAgBQ,OAAOI,SAC5BxB,GAAmB,EAErB,CACF,CAGA,GAAyB,eAArBzB,EAAUoC,OAAyB,CACrCT,GAAsB,GACtB,IAAK,IAAD8B,EAIF,MAAMf,QAAiBC,EAAAA,EAAcC,IAAIU,EAAAA,GAAcI,YAAYF,KAAM,CACvEX,OAAQR,EAAgBQ,SAEpBc,GAA4B,QAAbF,EAAAf,EAASI,YAAI,IAAAW,OAAA,EAAbA,EAAeX,OAAQJ,EAASI,MAAQ,GAGvDc,EAAY,IAAIC,IACtBF,EAAaG,SAASC,IAEhBA,EAAEC,iBAAgD,KAA7BD,EAAEC,gBAAgBC,QACzCL,EAAUM,IAAIH,EAAEC,gBAAgBC,QAG9BF,EAAEI,YAAsC,KAAxBJ,EAAEI,WAAWF,SAAkBF,EAAEI,WAAWC,cAAcC,WAAW,SACvFT,EAAUM,IAAIH,EAAEI,WAAWF,OAC7B,IAGF,MAAMK,EAAkBC,MAAMC,KAAKZ,GAAWa,OAC9CtD,EAAemD,EACjB,CAAE,MAAOvB,GACHA,EAAMC,IAKZ,CAAC,QACMX,EAAgBQ,OAAOI,SAC5BtB,GAAsB,EAExB,CACF,CA/GkB,CA+GlB,EAGF+C,GAGO,KACLrC,EAAgBsC,OAAO,CACxB,GACA,CAAC3E,EAAUoC,SAyWd,OACEwC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,EAEtCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,0BAAyBC,UACtCF,EAAAA,EAAAA,MAAA,UACEC,UAAU,iNACV9C,MAAO/B,EAAUoC,OACjBnC,SAAW+E,IAAC,IAAAC,EAAA,OAAKhF,GAAQiF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EACtBlF,GAAS,IACZoC,OAAQ4C,EAAEG,OAAOpD,MACjBqD,UAAsB,QAAZH,EAAAxE,EAAU,UAAE,IAAAwE,OAAA,EAAZA,EAAclD,QAAS,SACjCA,MAAO,OACP,EAAC+C,SAAA,EAEHC,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,GAAE+C,SAAEvE,EAAE,6BACnBH,EAAQiF,KAAKjD,IACZ2C,EAAAA,EAAAA,KAAA,UAAwBhD,MAAOK,EAAOgB,GAAG0B,SACtC1C,EAAOJ,OADGI,EAAOgB,YAQ1B2B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,0BAAyBC,UACtCC,EAAAA,EAAAA,KAAA,UACEF,UAAU,iNACV9C,MAAO/B,EAAUoF,SACjBnF,SAAW+E,GAAM/E,GAAQiF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIlF,GAAS,IAAEoF,SAAUJ,EAAEG,OAAOpD,SAAS+C,SAErErE,EAAU4E,KAAKC,IACdP,EAAAA,EAAAA,KAAA,UAAuBhD,MAAOuD,EAAGvD,MAAM+C,SACpCQ,EAAGtD,OADOsD,EAAGvD,cAQtBgD,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iBAAgBC,SA7YVS,EACvB1D,EACAuD,EACArD,EACA9B,KAGA,GAAiB,WAAb4B,EAAuB,CAEzB,MAAM2D,EAAiBpF,EAAQ8C,MAAKC,GAAkB,gBAAXA,EAAIC,IAAmC,eAAXD,EAAIC,KACrEC,EAAcjD,EAAQ8C,MAAKC,GAAkB,gBAAXA,EAAIC,IAAmC,mBAAXD,EAAIC,KAClEqC,EAAiBrF,EAAQ8C,MAAKC,GAAkB,WAAXA,EAAIC,OAAqBhD,EAAQ8C,MAAKC,GAAkB,gBAAXA,EAAIC,KAG5F,OAF2BhD,EAAQ8C,MAAKC,GAAkB,gBAAXA,EAAIC,IAAmC,iBAAXD,EAAIC,IAAoC,eAAXD,EAAIC,MAKxGwB,EAAAA,EAAAA,MAAA,UACEC,UAAU,0IACV9C,MAAOA,GAAmB,GAC1B9B,SAAW+E,GAAM/E,EAAS+E,EAAEG,OAAOpD,OAAO+C,SAAA,EAE1CC,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,GAAE+C,SAAEvE,EAAE,8BACpBwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,YAAW+C,SAAEvE,EAAE,gCAAiC,+BAC9DwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,YAAW+C,SAAEvE,EAAE,gCAAiC,mBAC9DwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,oBAAmB+C,SAAEvE,EAAE,wCAAyC,gCAC9EwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,aAAY+C,SAAEvE,EAAE,iCAAkC,kBAChEwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,cAAa+C,SAAEvE,EAAE,kCAAmC,kBAClEwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,YAAW+C,SAAEvE,EAAE,gCAAiC,gBAC9DwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,UAAS+C,SAAEvE,EAAE,8BAA+B,yBAGrDiF,GAGPZ,EAAAA,EAAAA,MAAA,UACEC,UAAU,0IACV9C,MAAOA,GAAmB,GAC1B9B,SAAW+E,GAAM/E,EAAS+E,EAAEG,OAAOpD,OAAO+C,SAAA,EAE1CC,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,GAAE+C,SAAEvE,EAAE,8BACpBwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,WAAU+C,SAAEvE,EAAE,iCAC5BwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,WAAU+C,SAAEvE,EAAE,iCAC5BwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,aAAY+C,SAAEvE,EAAE,mCAC9BwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,SAAQ+C,SAAEvE,EAAE,iCAGrB8C,GAGPuB,EAAAA,EAAAA,MAAA,UACEC,UAAU,0IACV9C,MAAOA,GAAmB,GAC1B9B,SAAW+E,GAAM/E,EAAS+E,EAAEG,OAAOpD,OAAO+C,SAAA,EAE1CC,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,GAAE+C,SAAEvE,EAAE,8BACpBwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,OAAM+C,SAAEvE,EAAE,6BACxBwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,cAAa+C,SAAEvE,EAAE,oCAC/BwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,WAAU+C,SAAEvE,EAAE,iCAC5BwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,kBAAiB+C,SAAEvE,EAAE,wCACnCwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,OAAM+C,SAAEvE,EAAE,+BAGnBkF,GAGPb,EAAAA,EAAAA,MAAA,UACEC,UAAU,0IACV9C,MAAOA,GAAmB,GAC1B9B,SAAW+E,GAAM/E,EAAS+E,EAAEG,OAAOpD,OAAO+C,SAAA,EAE1CC,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,GAAE+C,SAAEvE,EAAE,8BACpBwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,QAAO+C,SAAEvE,EAAE,8BACzBwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,OAAM+C,SAAEvE,EAAE,6BACxBwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,OAAM+C,SAAEvE,EAAE,6BACxBwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,UAAS+C,SAAEvE,EAAE,gCAC3BwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,YAAW+C,SAAEvE,EAAE,qCAM/BqE,EAAAA,EAAAA,MAAA,UACEC,UAAU,0IACV9C,MAAOA,GAAmB,GAC1B9B,SAAW+E,GAAM/E,EAAS+E,EAAEG,OAAOpD,OAAO+C,SAAA,EAE1CC,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,GAAE+C,SAAEvE,EAAE,8BACpBwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,OAAM+C,SAAEvE,EAAE,6BACxBwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,cAAa+C,SAAEvE,EAAE,oCAC/BwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,OAAM+C,SAAEvE,EAAE,8BAIhC,CAIA,GAAiB,gBAAbsB,GAA2C,gBAAbA,GAA2C,iCAAbA,EAA6C,CAEpFzB,EAAQ8C,MAAKC,GAAkB,gBAAXA,EAAIC,IAAmC,eAAXD,EAAIC,KAA3E,MACMC,EAAcjD,EAAQ8C,MAAKC,GAAkB,gBAAXA,EAAIC,IAAmC,mBAAXD,EAAIC,KAMlEsC,GAA0B,gBAAb7D,GAA2C,iCAAbA,IAAgDwB,EAEjG,OACEuB,EAAAA,EAAAA,MAAA,UACEC,UAAU,0IACV9C,MAAOA,GAAmB,GAC1B9B,SAAW+E,GAAM/E,EAAS+E,EAAEG,OAAOpD,OACnC4D,SAAUvE,GAAiBsE,GAAapE,EAAcwD,SAAA,EAEpDC,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,GAAE+C,SAAEvE,EAAE,6BAErBK,EAAMrC,OAAS,IACdwG,EAAAA,EAAAA,KAAA,YAAU/C,MAAOzB,EAAE,2BAA2BuE,SAC3ClE,EAAMyE,KAAIO,IACThB,EAAAA,EAAAA,MAAA,UAAgC7C,MAAK,QAAA8D,OAAUD,EAAKxC,IAAK0B,SAAA,CACtDc,EAAKE,UAAU,IAAEF,EAAKG,WAAQ,QAAAF,OADZD,EAAKxC,SAO/BsC,GAAa5E,EAAMvC,OAAS,IAC3BwG,EAAAA,EAAAA,KAAA,YAAU/C,MAAOzB,EAAE,2BAA2BuE,SAC3ChE,EAAMuE,KAAIW,IACTjB,EAAAA,EAAAA,KAAA,UAAgChD,MAAK,QAAA8D,OAAUG,EAAK5C,IAAK0B,SACtDkB,EAAKhD,MAAI,QAAA6C,OADSG,EAAK5C,UAO9BhC,GAAiBsE,GAAapE,KAC9ByD,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,GAAG4D,UAAQ,EAAAb,SAAEvE,EAAE,8BAIrC,CAGA,GAAiB,mBAAbsB,EACF,OACE+C,EAAAA,EAAAA,MAAA,UACEC,UAAU,0IACV9C,MAAOA,GAAmB,GAC1B9B,SAAW+E,GAAM/E,EAAS+E,EAAEG,OAAOpD,OACnC4D,SAAUvE,EAAa0D,SAAA,EAErBC,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,GAAE+C,SAAEvE,EAAE,6BAErBK,EAAMrC,OAAS,IACdwG,EAAAA,EAAAA,KAAA,YAAU/C,MAAOzB,EAAE,2BAA2BuE,SAC3ClE,EAAMyE,KAAIO,IACThB,EAAAA,EAAAA,MAAA,UAAgC7C,MAAK,QAAA8D,OAAUD,EAAKxC,IAAK0B,SAAA,CACtDc,EAAKE,UAAU,IAAEF,EAAKG,WAAQ,QAAAF,OADZD,EAAKxC,SAO/BhC,IACC2D,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,GAAG4D,UAAQ,EAAAb,SAAEvE,EAAE,gCAOrC,GAAiB,SAAbsB,EAAqB,CAEvB,GADuBzB,EAAQ8C,MAAKC,GAAkB,gBAAXA,EAAIC,IAAmC,eAAXD,EAAIC,KAEzE,OACEwB,EAAAA,EAAAA,MAAA,UACEC,UAAU,0IACV9C,MAAOA,GAAmB,GAC1B9B,SAAW+E,GAAM/E,EAAS+E,EAAEG,OAAOpD,OAAO+C,SAAA,EAE1CC,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,GAAE+C,SAAEvE,EAAE,8BACpBwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,QAAO+C,SAAEvE,EAAE,2BACzBwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,SAAQ+C,SAAEvE,EAAE,4BAC1BwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,yBAAwB+C,SAAEvE,EAAE,4CAC1CwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,YAAW+C,SAAEvE,EAAE,+BAC7BwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,yBAAwB+C,SAAEvE,EAAE,4CAC1CwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,WAAU+C,SAAEvE,EAAE,8BAC5BwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,SAAQ+C,SAAEvE,EAAE,4BAC1BwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,aAAY+C,SAAEvE,EAAE,gCAC9BwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,QAAO+C,SAAEvE,EAAE,4BAIjC,CAGA,GAAiB,kBAAbsB,EAA8B,CAEhC,GAD2BzB,EAAQ8C,MAAKC,GAAkB,gBAAXA,EAAIC,IAAmC,iBAAXD,EAAIC,IAAoC,eAAXD,EAAIC,KAE1G,OACEwB,EAAAA,EAAAA,MAAA,UACEC,UAAU,0IACV9C,MAAOA,GAAmB,GAC1B9B,SAAW+E,GAAM/E,EAAS+E,EAAEG,OAAOpD,OAAO+C,SAAA,EAE1CC,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,GAAE+C,SAAEvE,EAAE,8BACpBwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,UAAS+C,SAAEvE,EAAE,qCAAsC,iBACjEwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,OAAM+C,SAAEvE,EAAE,kCAAmC,cAC3DwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,iBAAgB+C,SAAEvE,EAAE,4CAA6C,wBAC/EwE,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,WAAU+C,SAAEvE,EAAE,sCAAuC,iBAI3E,CAGA,GAAiB,eAAbsB,EAA2B,CAE7B,GAD2BzB,EAAQ8C,MAAKC,GAAkB,gBAAXA,EAAIC,IAAmC,iBAAXD,EAAIC,IAAoC,eAAXD,EAAIC,KAE1G,OACEwB,EAAAA,EAAAA,MAAA,UACEC,UAAU,0IACV9C,MAAOA,GAAmB,GAC1B9B,SAAW+E,GAAM/E,EAAS+E,EAAEG,OAAOpD,OACnC4D,SAAUjE,EAAmBoD,SAAA,EAE7BC,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,GAAE+C,SAAEvE,EAAE,6BACnBW,EAAY3C,OAAS,GACpB2C,EAAYmE,KAAIlB,IACdY,EAAAA,EAAAA,KAAA,UAAyBhD,MAAOoC,EAAWW,SACxCX,GADUA,KAKhBzC,IACCqD,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,GAAG4D,UAAQ,EAAAb,SAAEvE,EAAE,8BAKvC,CAGA,GAAiB,WAAbsB,EACF,OACE+C,EAAAA,EAAAA,MAAA,UACEC,UAAU,0IACV9C,MAAOA,GAAmB,GAC1B9B,SAAW+E,GAAM/E,EAAS+E,EAAEG,OAAOpD,OACnC4D,SAAUnE,EAAgBsD,SAAA,EAE1BC,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,GAAE+C,SAAEvE,EAAE,6BACnBS,EAASzC,OAAS,GACjByC,EAASqE,KAAIY,IACXlB,EAAAA,EAAAA,KAAA,UAAwBhD,MAAOkE,EAAOjD,KAAK8B,SACxCmB,EAAOjD,MADGiD,EAAO7C,MAKvB5B,IACCuD,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,GAAG4D,UAAQ,EAAAb,SAAEvE,EAAE,+BAOrC,GAAiB,YAAbsB,GAAuC,cAAbA,GAAyC,gBAAbA,GAA2C,iBAAbA,GAA4C,gBAAbA,GAA2C,SAAbA,EAAqB,CAExK,MAAMqE,EAA0B,cAAVnE,GACU,kBAAVA,GAAuC,mBAAVA,GAAwC,kBAAVA,GACjD,mBAAVA,GAAwC,iBAAVA,GACpB,oBAAVA,GAAyC,kBAAVA,GACrB,mBAAVA,GAAwC,iBAAVA,EAIpD,IAAIoE,EAAkB,SAUtB,MATc,cAAVpE,EAAuBoE,EAAkB,QAC1B,kBAAVpE,EAA2BoE,EAAkB,WACnC,mBAAVpE,EAA4BoE,EAAkB,YACpC,kBAAVpE,EAA2BoE,EAAkB,WAEnC,mBAAVpE,GAAwC,iBAAVA,EAA0BoE,EAAkB,WAChE,oBAAVpE,GAAyC,kBAAVA,EAA2BoE,EAAkB,YAClE,mBAAVpE,GAAwC,iBAAVA,IAA0BoE,EAAkB,aAGjFvB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EAExBF,EAAAA,EAAAA,MAAA,UACEC,UAAU,uIACV9C,MAAOoE,EACPlG,SAAW+E,IACT,MAAMoB,EAAepB,EAAEG,OAAOpD,MAG5B9B,EADmB,UAAjBmG,GACMlB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIlF,GAAS,IAAE+B,MAAO,YAAaqD,SAAU,WAC7B,aAAjBgB,GAEDlB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIlF,GAAS,IAAE+B,MAAO,gBAAiBqD,SAAU,WACjC,cAAjBgB,GAEDlB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIlF,GAAS,IAAE+B,MAAO,iBAAkBqD,SAAU,WAClC,aAAjBgB,GAEDlB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIlF,GAAS,IAAE+B,MAAO,gBAAiBqD,SAAU,YAGnDF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIlF,GAAS,IAAE+B,MAAO,KAClC,EACA+C,SAAA,EAEFC,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,SAAQ+C,SAAEvE,EAAE,iCAAkC,CAAE8F,aAAc,yBAC5EtB,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,QAAO+C,SAAEvE,EAAE,gCAAiC,CAAE8F,aAAc,aAC1EtB,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,WAAU+C,SAAEvE,EAAE,mCAAoC,CAAE8F,aAAc,mBAChFtB,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,YAAW+C,SAAEvE,EAAE,oCAAqC,CAAE8F,aAAc,oBAClFtB,EAAAA,EAAAA,KAAA,UAAQhD,MAAM,WAAU+C,SAAEvE,EAAE,mCAAoC,CAAE8F,aAAc,sBAIhFH,IACAnB,EAAAA,EAAAA,KAAA,SACEuB,KAAK,OACLzB,UAAU,0IACV9C,MAAOA,GAAmB,GAC1B9B,SAAW+E,GAAM/E,GAAQiF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIlF,GAAS,IAAE+B,MAAOiD,EAAEG,OAAOpD,WAK7DmE,IACCtB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2IAA0IC,SAAA,CAAC,gBAC1I,cAAV/C,GAAyBxB,EAAE,gCAAiC,CAAE8F,aAAc,UACrE,mBAAVtE,GAAwC,iBAAVA,EAA2BxB,EAAE,mCAAoC,CAAE8F,aAAc,gBAAmB,GACxH,oBAAVtE,GAAyC,kBAAVA,EAA4BxB,EAAE,oCAAqC,CAAE8F,aAAc,iBAAoB,GAC5H,mBAAVtE,GAAwC,iBAAVA,EAA2BxB,EAAE,mCAAoC,CAAE8F,aAAc,gBAAmB,QAK7I,CAGA,OACEtB,EAAAA,EAAAA,KAAA,SACEuB,KAAK,OACLzB,UAAU,sOACV9C,MAAOA,GAAmB,GAC1B9B,SAAW+E,GAAM/E,EAAS+E,EAAEG,OAAOpD,OACnCwE,YAAahG,EAAE,0BACf,EA4CCgF,CACCvF,EAAUoC,OACVpC,EAAUoF,SACVpF,EAAU+B,OACTA,GAAU9B,GAAQiF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIlF,GAAS,IAAE+B,gBAMxC6C,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gDAA+CC,SAAA,EAE5DF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,UACEuB,KAAK,SACLE,QAAStG,EACT2E,UAAU,+JACVc,SAAUtF,IAAYC,EAAOwE,UAE7BC,EAAAA,EAAAA,KAAC0B,EAAAA,EAAS,CAAC5B,UAAU,eAEvBE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wLAAuLC,SACnMvE,EAAE,mCAKND,GACCsE,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,UACEuB,KAAK,SACLE,QAASrG,EACT0E,UAAU,iHAAgHC,UAE1HC,EAAAA,EAAAA,KAAC2B,EAAAA,EAAc,CAAC7B,UAAU,eAE5BE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wLAAuLC,SACnMvE,EAAE,iCAIPwE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,gCAGf,E,cCtqBV,MA2EA,EA3EoE9E,IAA6B,IAA5B,SAAEqF,EAAQ,SAAEnF,GAAUF,EACzF,MAAM,EAAEQ,IAAMC,EAAAA,EAAAA,OACPmG,EAAQC,IAAajG,EAAAA,EAAAA,WAAS,GAC/BkG,GAAchI,EAAAA,EAAAA,QAAuB,OAE3CC,EAAAA,EAAAA,YAAU,KACR,MAAMgI,EAAsBC,IACtBF,EAAY9H,UAAY8H,EAAY9H,QAAQiI,SAASD,EAAM5B,SAC7DyB,GAAU,EACZ,EAOF,OAJID,GACFM,SAASrH,iBAAiB,YAAakH,GAGlC,KACLG,SAASnH,oBAAoB,YAAagH,EAAmB,CAC9D,GACA,CAACH,IAEJ,MAAMO,EAAgBnF,IACpB9B,EAAS8B,GACT6E,GAAU,EAAM,EAGlB,OACEhC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2DAA2DsC,IAAKN,EAAY/B,SAAA,EACzFC,EAAAA,EAAAA,KAAA,UACEuB,KAAK,SACLE,QAASA,IAAMI,GAAWD,GAC1B9B,UAAU,sMACVuC,MAAO,CAAEC,MAAO,OAAQC,SAAU,OAAQC,SAAU,OAAQC,SAAU,UAAW1C,SAEnE,QAAbM,GACCR,EAAAA,EAAAA,MAAA6C,EAAAA,SAAA,CAAA3C,SAAA,EACEC,EAAAA,EAAAA,KAAC2C,EAAAA,EAAQ,CAAC7C,UAAU,2BACpBE,EAAAA,EAAAA,KAAA,QAAMF,UAAU,WAAUC,SAAEvE,EAAE,qCAGhCqE,EAAAA,EAAAA,MAAA6C,EAAAA,SAAA,CAAA3C,SAAA,EACEC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,UAASC,SAAC,YAC1BC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,WAAUC,SAAEvE,EAAE,qCAKnCoG,IACC/B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kJAAiJC,SAAA,EAC9JF,EAAAA,EAAAA,MAAA,UACE0B,KAAK,SACLE,QAASA,IAAMU,EAAa,OAC5BrC,UAAS,yGAAAgB,OACM,QAAbT,EAAqB,kEAAoE,oCACxFN,SAAA,EAEHC,EAAAA,EAAAA,KAAC2C,EAAAA,EAAQ,CAAC7C,UAAU,2BACpBE,EAAAA,EAAAA,KAAA,QAAAD,SAAOvE,EAAE,qCAEXqE,EAAAA,EAAAA,MAAA,UACE0B,KAAK,SACLE,QAASA,IAAMU,EAAa,MAC5BrC,UAAS,yGAAAgB,OACM,OAAbT,EAAoB,kEAAoE,oCACvFN,SAAA,EAEHC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,UAASC,SAAC,YAC1BC,EAAAA,EAAAA,KAAA,QAAAD,SAAOvE,EAAE,wCAIX,E,cCzDV,MA8SA,EA9S8CR,IAOvC,IAPwC,QAC7CK,EAAO,QACPuH,EAAO,QACPC,EAAO,gBACPC,EAAe,eACfC,EAAc,QACdC,GACDhI,EACC,MAAM,EAAEQ,IAAMC,EAAAA,EAAAA,OACR,YAAEwH,IAAgBC,EAAAA,EAAAA,MAEjBC,EAAYC,IAAiBxH,EAAAA,EAAAA,UAClCkH,GAAmBA,EAAgBtJ,OAAS,EACxCsJ,EACA,CAAC,CAAEzF,OAAQ,GAAIgD,SAAU,SAAUrD,MAAO,SAIzCqG,EAAkBC,IAAuB1H,EAAAA,EAAAA,UAC9CmH,GAAkBA,EAAevJ,OAAS,EACtCuJ,EACA,KAICQ,EAAeC,IAAoB5H,EAAAA,EAAAA,WAAS,IAC5C6H,EAAYC,IAAiB9H,EAAAA,EAAAA,UAAS,KAGtC+H,EAAiBC,IAAsBhI,EAAAA,EAAAA,UAAyC,KAEvF7B,EAAAA,EAAAA,YAAU,KAER,MAAMuD,EAAkB,IAAIC,gBA0B5B,MAxB6BC,WAC3B,IAGE,IAFcC,aAAaC,QAAQ,SAGjC,OAGF,MAAMC,QAAiBC,EAAAA,EAAcC,IACnCU,EAAAA,GAAcsF,cAAcC,SAASd,GACrC,CAAElF,OAAQR,EAAgBQ,SAG5B8F,EAAmBjG,EAASI,KAAKuC,KAAKyD,IAAW,CAAQ1F,GAAI0F,EAAO1F,GAAIJ,KAAM8F,EAAO9F,SACvF,CAAE,MAAO+F,GACU,eAAbA,EAAI/F,MACRgG,QAAQjG,MAAMxC,EAAE,oBAAqBwI,EAEvC,GAGFE,GAGO,KACL5G,EAAgBsC,OAAO,CACxB,GACA,CAACoD,IAIJ,MAAMmB,GAAyBrK,EAAAA,EAAAA,QAAsCgJ,GAC/DsB,GAAwBtK,EAAAA,EAAAA,QAAqCiJ,IAsBnEhJ,EAAAA,EAAAA,YAAU,KAER,MAAMsK,GArBoBC,EAqBoBH,EAAuBnK,QArBTuK,EAqBkBzB,KApBzEwB,IAAMC,GACND,GAAMC,GACPD,EAAE9K,SAAW+K,EAAE/K,QACZ8K,EAAEE,OAAM,CAACC,EAAMC,KACpB,MAAMC,EAAQJ,EAAEG,GAChB,OAAOD,EAAKpH,SAAWsH,EAAMtH,QACtBoH,EAAKpE,WAAasE,EAAMtE,UACxBoE,EAAKzH,QAAU2H,EAAM3H,KAAK,MARV4H,IAACN,EAAkCC,EAsB5D,MAAMM,GAVkBC,EAACR,EAAiCC,KACrDD,IAAMC,MACND,IAAMC,IACPD,EAAE9K,SAAW+K,EAAE/K,QACZ8K,EAAEE,OAAM,CAACC,EAAMC,IAAUD,IAASF,EAAEG,KAMjBI,CAAkBV,EAAsBpK,QAAS+I,GAEvEsB,GAAqBvB,IACnBA,EAAgBtJ,OAAS,EAC3B4J,EAAcN,GACsB,IAA3BA,EAAgBtJ,QAEzB4J,EAAc,CAAC,CAAE/F,OAAQ,GAAIgD,SAAU,SAAUrD,MAAO,QAE1DmH,EAAuBnK,QAAU8I,GAG/B+B,QAAuCpL,IAAnBsJ,IACtBO,EAAoBP,GACpBqB,EAAsBpK,QAAU+I,EAClC,GACC,CAACD,EAAiBC,IAErB,MAYMgC,EAAqBA,KACzB3B,EAAc,IAAID,EAAY,CAAE9F,OAAQ,GAAIgD,SAAU,SAAUrD,MAAO,QAGnEmG,EAAW3J,OAAS,GACtB8J,EAAoB,IAAID,EAAkB,OAC5C,EA4FF,OACExD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gDAA+CC,SAAA,EAC5DC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,8DAA6DC,SAAEvE,EAAE,mBAE/EwE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,SACvBoD,EAAW7C,KAAI,CAACrF,EAAWyJ,KAC1B7E,EAAAA,EAAAA,MAACmF,EAAAA,SAAc,CAAAjF,SAAA,EACbC,EAAAA,EAAAA,KAACiF,EAAS,CACRhK,UAAWA,EACXC,SAAWgK,GAvHOC,EAACT,EAAeQ,KAC5C,MAAME,EAAgB,IAAIjC,GAC1BiC,EAAcV,GAASQ,EACvB9B,EAAcgC,EAAc,EAoHUD,CAAsBT,EAAOQ,GACzD/J,SAAUA,IAnGSuJ,KAE7B,MAAMU,EAAgB,IAAIjC,GAK1B,GAJAiC,EAAcC,OAAOX,EAAO,GAC5BtB,EAAcgC,GAGVV,EAAQ,EAAG,CACb,MAAMY,EAAe,IAAIjC,GACzBiC,EAAaD,OAAOX,EAAQ,EAAG,GAC/BpB,EAAoBgC,EACtB,GAwF0BC,CAAsBb,GACtCtJ,MAAO2J,EACP1J,QAASA,EACTC,QAAmB,IAAVoJ,EACTnJ,OAAQmJ,IAAUvB,EAAW3J,OAAS,IAIvCkL,EAAQvB,EAAW3J,OAAS,IAC3BwG,EAAAA,EAAAA,KAACwF,EAAqB,CACpBnF,SAAUgD,EAAiBqB,IAAU,MACrCxJ,SAAWuK,GA7HIC,EAAChB,EAAee,KAC3C,MAAMH,EAAe,IAAIjC,GACzBiC,EAAaZ,GAASe,EACtBnC,EAAoBgC,EAAa,EA0HMI,CAAqBhB,EAAOe,OAfxCf,OAuBxBnB,GACC1D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,+BAA8BC,SAAA,EAC3CC,EAAAA,EAAAA,KAAA,SACEuB,KAAK,OACLzB,UAAU,4OACV0B,YAAahG,EAAE,qBACfwB,MAAOyG,EACPvI,SAAW+E,GAAMyD,EAAczD,EAAEG,OAAOpD,UAE1CgD,EAAAA,EAAAA,KAAA,UACEyB,QArGejE,UACvB,IAAKiG,EAAWvE,OAEd,YADA+D,EAAYzH,EAAE,iBAAkB,SAKlC,GAAmB,WAAfiI,GAA0C,YAAfA,EAE7B,YADAR,EAAYzH,EAAE,wBAAyB,SASzC,GAJ6BmI,EAAgBxF,MAAK4F,IAC/B,WAAhBA,EAAO9F,MAAqC,YAAhB8F,EAAO9F,OAAuB8F,EAAO9F,OAASwF,IAK3E,YADAR,EAAYzH,EAAE,kCAAmC,SAKnD,MAAMmK,EAAkBxC,EAAWY,QAAO6B,GAAkB,KAAbA,EAAEvI,SAEjD,GAA+B,IAA3BsI,EAAgBnM,OAKpB,IAGE,IAFciE,aAAaC,QAAQ,SAIjC,YADAuF,EAAYzH,EAAE,2BAA4B,eAIrBoC,EAAAA,EAAciI,KACnCtH,EAAAA,GAAcsF,cAAcpF,KAC5B,CACEuE,UACA/E,KAAMwF,EACNN,WAAYwC,EACZjK,UAAW2H,IAIfJ,EAAYzH,EAAE,sBAAuB,WACrCgI,GAAiB,GACjBE,EAAc,IAGT9I,OAAekL,qBACjBlL,OAAekL,qBAEpB,CAAE,MAAO9B,GACPC,QAAQjG,MAAM,qCAAsCgG,GACpDf,EAAYzH,EAAE,oBAAqB,QACrC,MAjCEyH,EAAYzH,EAAE,uBAAwB,QAiCxC,EA2CQsE,UAAU,4LACViG,MAAOvK,EAAE,qBAAqBuE,UAE9BC,EAAAA,EAAAA,KAACgG,EAAAA,EAAY,CAAClG,UAAU,eAE1BE,EAAAA,EAAAA,KAAA,UACEyB,QAASA,IAAM+B,GAAiB,GAChC1D,UAAU,kLACViG,MAAOvK,EAAE,iBAAiBuE,UAE1BC,EAAAA,EAAAA,KAACiG,EAAAA,EAAS,CAACnG,UAAU,kBAIzBD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8BAA6BC,SAAA,EAC1CC,EAAAA,EAAAA,KAAA,UACEyB,QA7HiByE,KACzB9C,EAAc,CAAC,CAAE/F,OAAQ,GAAIgD,SAAU,SAAUrD,MAAO,QACxDsG,EAAoB,IACpBT,GAAS,EA2HD/C,UAAU,kLACViG,MAAOvK,EAAE,gBAAgBuE,UAEzBC,EAAAA,EAAAA,KAACmG,EAAAA,EAAa,CAACrG,UAAU,eAE3BE,EAAAA,EAAAA,KAAA,UACEyB,QAASA,IAAM+B,GAAiB,GAChC1D,UAAU,kLACViG,MAAOvK,EAAE,eAAeuE,UAExBC,EAAAA,EAAAA,KAACgG,EAAAA,EAAY,CAAClG,UAAU,eAE1BE,EAAAA,EAAAA,KAAA,UACEyB,QAjJiB2E,KAEzB,MAAMT,EAAkBxC,EAAWY,QAAO6B,GAAkB,KAAbA,EAAEvI,SACjDuF,EAAQ+C,EAAiBtC,EAAiB,EA+IlCvD,UAAU,4LACViG,MAAOvK,EAAE,gBAAgBuE,UAEzBC,EAAAA,EAAAA,KAACqG,EAAAA,EAAS,CAACvG,UAAU,mBAIvB,C,0LCrRV,MAspCA,EAtpCwD9E,IAQjD,IARkD,QACvDgI,EAAO,eACPsD,EAAc,QACdzD,EAAO,iBACP0D,EAAgB,iBAChBC,EAAgB,eAChBC,EAAc,kBACdC,EAAoB,SACrB1L,EACC,MAAM,EAAEQ,IAAMC,EAAAA,EAAAA,OACR,YAAEwH,IAAgBC,EAAAA,EAAAA,KAClByD,GAAgBC,EAAAA,EAAAA,KAGhBC,EAAuB5I,GAEd,WAATA,GAA8B,0BAATA,GAA6C,4BAATA,EAClBzC,EAAtB,sBAAZwH,EAAoC,wBAA6B,2BAE7D,YAAT/E,GAA+B,0BAATA,GAA6C,6BAATA,EACnBzC,EAAtB,sBAAZwH,EAAoC,wBAA6B,4BAE7D,UAAT/E,GAA6B,QAATA,EAAuBzC,EAAE,eAAgB,SACpD,UAATyC,EAAyBzC,EAAE,cAAe,SACjC,WAATyC,EAA0BzC,EAAE,gBAAiB,UACpC,SAATyC,GAA4B,UAATA,EAAyBzC,EAAE,aAAc,QAEzDyC,EAkBH6I,EAAeH,EAAcI,WAAW/D,GACxCgE,EAAeL,EAAcM,gBAAgBjE,GAC7CkE,EAAUP,EAAcQ,UAAUnE,GAClChF,EAAQ2I,EAAcS,SAASpE,IAC9BqE,EAAmBC,IAAwB1L,EAAAA,EAAAA,UAAmB,IAG/DxC,GAAeU,EAAAA,EAAAA,QAAuB,MACtCyN,GAAUzN,EAAAA,EAAAA,QAAoC,IAAI0N,MACjDC,EAAiBC,IAAsB9L,EAAAA,EAAAA,UAAS,IAChD+L,EAAgBC,IAAqBhM,EAAAA,EAAAA,UAAS,IAC9CiM,EAAmBC,IAAwBlM,EAAAA,EAAAA,UAA8B,IAAI4L,MAC7EO,EAAaC,IAAkBpM,EAAAA,EAAAA,WAAS,IAGxCqM,EAAgBC,IAAqBtM,EAAAA,EAAAA,WAAS,IAG9CuM,EAAiBC,IAAsBxM,EAAAA,EAAAA,UAAwB,OAC/DyM,EAAkBC,IAAuB1M,EAAAA,EAAAA,UAAwB,OACjE2M,EAAiBC,IAAsB5M,EAAAA,EAAAA,UAAsC,OAG7E6M,EAAoBC,IAAyB9M,EAAAA,EAAAA,UAAsB,IAAIkD,KAGxE6J,GAAoB7O,EAAAA,EAAAA,QAAoC,IAAI0N,KAE5DoB,GAAkB9O,EAAAA,EAAAA,QAAuC,IAAI0N,MAE5DqB,GAAmBC,KAAwBlN,EAAAA,EAAAA,UAAqD,IAAI4L,MAmB3GzN,EAAAA,EAAAA,YAAU,KACR,MAAMgP,EAAkBA,KACtB,MAAMC,EAAe,IAAIxB,IACzBiB,EAAmB1J,SAAQkK,IACzB,MAAMC,EAASN,EAAgB5O,QAAQ6D,IAAIoL,GAC3C,GAAIC,EAAQ,CACV,MAAMC,EAAOD,EAAOE,wBACpBJ,EAAaK,IAAIJ,EAAS,CACxBK,IAAKH,EAAKI,OAAS3O,OAAO4O,QAAU,EACpCC,KAAMN,EAAKM,KAAO7O,OAAO8O,SAE7B,KAEFZ,GAAqBE,EAAa,EASpC,OANIP,EAAmBkB,KAAO,IAC5BZ,IACAnO,OAAOC,iBAAiB,SAAUkO,GAAiB,GACnDnO,OAAOC,iBAAiB,SAAUkO,IAG7B,KACLnO,OAAOG,oBAAoB,SAAUgO,GAAiB,GACtDnO,OAAOG,oBAAoB,SAAUgO,EAAgB,CACtD,GACA,CAACN,IAGJ,MAAOmB,GAAgBC,KAAqBjO,EAAAA,EAAAA,UAAwB,OAC7DkO,GAAkBC,KAAuBnO,EAAAA,EAAAA,UAAiB,IAG3DoO,IAAiBC,EAAAA,EAAAA,cAAYzM,gBAC3BmJ,EAAcqD,eAAehH,EAAQ,GAC1C,CAACA,EAAS2D,IAGPuD,IAAgCD,EAAAA,EAAAA,cAAYzM,UAChD,IACE,MAAMG,QAAiBC,EAAAA,EAAcC,IAAIU,EAAAA,GAAcsF,cAAcC,SAASd,IAIxEmH,EAHkBxM,EAASI,KAGKgG,QAAQA,GAC5CqG,EAAmBC,SAAStG,EAAO9F,QAIrC,GAAIkM,EAAc3Q,OAAS,EAAG,CAC5B,MAAM8Q,EAAkBH,EACrBzK,MAAK,CAAC4E,EAAQC,IAAW,IAAIgG,KAAKjG,EAAEkG,WAAWC,UAAY,IAAIF,KAAKhG,EAAEiG,WAAWC,YACjFC,MAAM,EAAGP,EAAc3Q,OAAS,GAEnC,IAAK,MAAMmR,KAAkBL,QACrB1M,EAAAA,EAAcgN,OAAOrM,EAAAA,GAAcsF,cAAcgH,MAAMF,EAAetM,WAIxE2L,IACR,CACF,CAAE,MAAOhM,GACH8M,CAGN,IACC,CAAC9H,EAASgH,KAGPe,IAAoBd,EAAAA,EAAAA,cAAYzM,UACpC,GAAgB,wBAAZwF,EACF,IACM8H,EAGJ,MAEME,SAFiBpN,EAAAA,EAAcC,IAAIU,EAAAA,GAAc0M,QAAQC,SAElCnN,KAAKuC,KAAK6K,GAAgBA,EAAOlN,OAC1D6M,EAGJxD,EAAqB0D,SAGfd,GAA8Bc,EACtC,CAAE,MAAOhN,GACH8M,CAIN,CACF,GACC,CAAC9H,EAASkH,MAGbnQ,EAAAA,EAAAA,YAAU,KACR,MAAMqR,EAA4BA,KAIhCL,IAAmB,EAKrB,OAFAnQ,OAAOC,iBAAiB,sBAAuBuQ,GAExC,KACLxQ,OAAOG,oBAAoB,sBAAuBqQ,EAA0B,CAC7E,GACA,CAACL,MAGJhR,EAAAA,EAAAA,YAAU,KACRgR,IAAmB,GAClB,CAACA,KAIJ,MAAM,YAAEM,IAAgB1E,GAExB5M,EAAAA,EAAAA,YAAU,KAGRsR,GAAYrI,EAAQ,GACnB,CAACA,EAASqI,MAMbtR,EAAAA,EAAAA,YAAU,KAEPa,OAAekL,oBAAsBkE,GAC/B,YACGpP,OAAekL,mBAAmB,IAE3C,CAACkE,MAGJjQ,EAAAA,EAAAA,YAAU,KACR,MAAMgI,EAAsBC,IACtBiG,IAAoBjG,EAAM5B,OAAmBkL,QAAQ,cACvDpD,GAAkB,EACpB,EAIF,OADAhG,SAASrH,iBAAiB,YAAakH,GAChC,IAAMG,SAASnH,oBAAoB,YAAagH,EAAmB,GACzE,CAACkG,KAGJlO,EAAAA,EAAAA,YAAU,KACR,MAAMgI,EAAsBC,IAEAxC,MAAMC,KAAKgJ,GAAoBjE,OAAMyE,IAC7D,MAAMsC,EAAkB5C,EAAkB3O,QAAQ6D,IAAIoL,GACtD,IAAKsC,EAAiB,OAAO,EAG7B,MAAMC,EAAiBxJ,EAAM5B,OAAmBkL,QAAQ,mBAADxK,OAAoBmI,EAAO,OAClF,OAAQsC,EAAgBtJ,SAASD,EAAM5B,UAAoBoL,CAAa,KAGjD/C,EAAmBkB,KAAO,GACjDjB,EAAsB,IAAI5J,IAC5B,EAOF,OAJI2J,EAAmBkB,KAAO,GAC5BzH,SAASrH,iBAAiB,YAAakH,GAGlC,KACLG,SAASnH,oBAAoB,YAAagH,EAAmB,CAC9D,GACA,CAAC0G,IAGJ,MAAMgD,GAAsB1H,IAWtB0C,EAKFA,EAAe1C,EAAO9F,KAAM8F,EAAO1F,GAAI0F,EAAOZ,WAAYY,EAAOrI,WAMjE4K,EAAevC,EAAOZ,WAAYY,EAAOrI,UAC3C,EAIIgQ,GAAqBlO,MAAOyC,EAAqB0L,KACrD1L,EAAE2L,kBAEF,MAAMjB,EAAiB7D,EAAa+E,MAAK9H,GAAUA,EAAO1F,KAAOsN,IACjE,GAAIhB,GAAkBmB,GAAiBnB,EAAe1M,MACpDgF,EAAYzH,EAAE,8BAA+B,CAAE8F,aAAc,uDAAmD,cAIlH,IAGE,IAFc7D,aAAaC,QAAQ,SAIjC,YADAuF,EAAYzH,EAAE,0BAA2B,CAAE8F,aAAc,0BAA4B,eAIjF1D,EAAAA,EAAcgN,OAAOrM,EAAAA,GAAcsF,cAAcgH,MAAMc,UAGvDhF,EAAcqD,eAAehH,IAG/BwD,IAAqBmF,IAAclF,GAAkBkF,KACnDlF,EAEFA,EAAe,GAAI,KAAM,GAAI,IAG7B5D,KAIJI,EAAYzH,EAAE,uBAAwB,CAAE8F,aAAc,mCAAkC,UAC1F,CAAE,MAAO0C,GACH8G,EAGJ7H,EAAYzH,EAAE,qBAAsB,CAAE8F,aAAc,uCAAsC,QAC5F,GAIIwK,GAAoBrI,IAQxB,GAN4B,CAC1B,SAAU,UAAW,SAAU,OAAQ,QAAS,QAAS,MAAO,QAChE,wBAAyB,wBACzB,0BAA2B,4BAGL4G,SAAS5G,GAC/B,OAAO,EAGT,GAAgB,wBAAZT,EAAmC,CACrC,GAAmB,WAAfS,GAA0C,UAAfA,GAAyC,UAAfA,EACvD,OAAO,EAET,GAAI4D,EAAkBgD,SAAS5G,GAC7B,OAAO,CAEX,CAEA,OAAO,CAAK,EAIRsI,IAAgBC,EAAAA,EAAAA,UAAQ,KAE5B,MAAMC,EAAmBnF,EAAa/C,QAAOmI,GAAU,MAALA,IAAcA,EAAEjD,UAGlE,GAAgB,wBAAZjG,EAAmC,CACjC8H,EAMJ,MAAMqB,EAAQF,EAAiBJ,MAAKK,GAAU,MAALA,GAAwB,UAAXA,EAAEjO,OAClDmO,EAAQH,EAAiBJ,MAAKK,GAAU,MAALA,GAAwB,UAAXA,EAAEjO,OAClDoO,EAASJ,EAAiBJ,MAAKK,GAAU,MAALA,GAAwB,WAAXA,EAAEjO,OAGnDqO,EAA4BjF,EAC/B/G,KAAIiM,GAAcN,EAAiBJ,MAAKK,GAAU,MAALA,GAAaA,EAAEjO,OAASsO,MACrExI,QAAOA,GAAoB,MAAVA,IAEhB+G,EAIJ,MAAM0B,EAAgBP,EAAiBlI,QAAOmI,GACvC,MAALA,IACC,CAAC,QAAS,QAAS,UAAU7B,SAAS6B,EAAEjO,QACxCoJ,EAAkBgD,SAAS6B,EAAEjO,QAG5B6M,EAIJ,MAAM2B,EAAgC,GAYtC,OAVIN,GAAOM,EAAeC,KAAKP,GAC3BC,GAAOK,EAAeC,KAAKN,GAC/BK,EAAeC,QAAQJ,GACvBG,EAAeC,QAAQF,GACnBH,GAAQI,EAAeC,KAAKL,GAMzBI,CACT,CAGA,GAAgB,mBAAZzJ,GAA4C,sBAAZA,EAAiC,CACnE,MAAM2J,EAAUV,EAAiBJ,MAAKK,GAAU,MAALA,GAAwB,YAAXA,EAAEjO,OACpDoO,EAASJ,EAAiBJ,MAAKK,GAAU,MAALA,GAAwB,WAAXA,EAAEjO,OAGnDuO,EAAgBP,EAAiBlI,QAAOmI,GACvC,MAALA,GAAwB,YAAXA,EAAEjO,MAAiC,WAAXiO,EAAEjO,OAGnCwO,EAAgC,GAStC,OANIE,GAASF,EAAeC,KAAKC,GAEjCF,EAAeC,QAAQF,GAEnBH,GAAQI,EAAeC,KAAKL,GAEzBI,CACT,CAGA,OAAOR,CAAgB,GACtB,CAACnF,EAAcO,EAAmBrE,IAG/B4J,GAAgD,IAAxB9F,EAAatN,QAAgB0N,EAErD2F,IAAoBb,EAAAA,EAAAA,UAAQ,IAC3BY,GACEpN,MAAM,GAAGsN,KAAK,MAAMxM,KAAI,CAACyM,EAAGC,KAAC,CAClC3O,GAAG,eAADyC,OAAiBkM,GACnB/O,KAAY,IAAN+O,EAAU,QAAgB,IAANA,EAAU,QAAU,mDAC9C7L,eAAe,EACf6B,UACAG,WAAY,GACZzH,UAAW,OAPsB,IASlC,CAACkR,GAAuB5J,IAErBiK,GAAiBL,GAAwBC,GAAoBd,GAAchI,QAAOmI,GAAU,MAALA,IAEvFgB,GAAsBN,GACxBC,GAAkBrT,OACjBuO,EAAcgE,GAAcvS,OAASiO,EAGpC0F,IAAkBnB,EAAAA,EAAAA,UAAQ,KAC9B,GAA6B,IAAzBD,GAAcvS,OAAc,OAAO,GAGvC,GAAIqO,EAAkB8B,KAAO,EAAG,CAC9B,MAAMyD,EAAS5N,MAAMC,KAAKoI,EAAkBwF,UAC5C,OAAOD,EAAOE,QAAO,CAACC,EAAKjL,IAAUiL,EAAMjL,GAAO,GAAK8K,EAAO5T,MAChE,CAGA,OAAOuS,GACJhI,QAAOA,GAAoB,MAAVA,IACjBuJ,QAAO,CAACC,EAAKxJ,KAEZ,MAAMyJ,EAAqB1B,GAAiB/H,EAAO9F,MAAa,EAAL,GAC3D,OAAOsP,GAA4B,IAArBxJ,EAAO9F,KAAKzE,OAAe,GAAKgU,EAAkB,GAC/D,GAAKzB,GAAchI,QAAOA,GAAoB,MAAVA,IAAgBvK,MAAM,GAC9D,CAACuS,GAAelE,IAIb4F,IAAoBxD,EAAAA,EAAAA,cAAY,KACpC,IAAK7Q,EAAaY,QAAS,OAAO,EAElC,MAAMC,EAAYb,EAAaY,QACzB0T,EAAgBzT,EAAUyT,cAEhC,IAAKA,EACH,OAAOzT,EAAU0T,YAGnB,MAAMC,EAAehT,OAAOiT,iBAAiBH,GACvCI,EAAmBC,WAAWH,EAAaI,aAAe,EAC1DC,EAAoBF,WAAWH,EAAaM,cAAgB,EAGlE,GAAIJ,EAAmB,GAAKG,EAAoB,EAAG,CAGjD,MACME,EADcT,EAAcC,YACKS,KAAKC,IAAID,KAAKE,IAAI,EAAGR,IAAqBM,KAAKC,IAAID,KAAKE,IAAI,EAAGL,IAGtG,GAAyB,IAArBE,EAAwB,CAE1B,MAAMI,EAA2BH,KAAKC,IAAIP,GAAoBM,KAAKC,IAAIJ,GACvE,OAAOhU,EAAU0T,YAAcY,CACjC,CAEA,OAAOJ,CACT,CAGA,OAAOlU,EAAU0T,WAAW,GAC3B,IAGGa,IAAuBvE,EAAAA,EAAAA,cAAY,KACvC,IAAK7Q,EAAaY,SAAoC,IAAzB+R,GAAcvS,OAAc,OAEzD,GAAIuO,EAAa,OAEjB,MAAM0G,EAAehB,KAGrB,GAAIgB,EAAe,IAQjB,YAPAC,uBAAsB,KACpBA,uBAAsB,KAChBtV,EAAaY,SACfwU,IACF,GACA,IAMN,GAAIJ,KAAKC,IAAII,EAAe9G,GAAkB,IAAMA,EAAiB,EAAG,OAExEC,EAAkB6G,GAGlB,MAIME,EAAiBF,EAFR,EAKf,IAAIG,EAAa,EACbC,EAAgB,EAYpB,GATA9C,GAAchN,SAASgF,IACrB,MAAM+K,EAAgBjH,EAAkBhK,IAAIkG,EAAO1F,IAC/CyQ,IACFF,GAAcE,EAbO,EAcrBD,IACF,IAIEA,IAAkB9C,GAAcvS,QAAUoV,EAAa,EAAG,CAC5D,MAAMG,EAA2BH,EApBV,EAuBvB,GAAIG,GAA4BJ,EAE9B,YADAjH,EAAmBqE,GAAcvS,QAKnC,MAAMwV,EAAwBL,EA9BF,GACL,EA8BvB,GAAII,GAA4BC,EAE9B,YADAtH,EAAmBqE,GAAcvS,QAKnC,IAAIyV,EAAkB,EAClBC,EAAe,EACnB,IAAK,MAAMnL,KAAUgI,GAAe,CAClC,MAAMzJ,EAAQuF,EAAkBhK,IAAIkG,EAAO1F,KAAO8O,GAClD,KAAI8B,EAAkB3M,EAxCD,GAwC6B0M,GAIhD,MAHAC,GAAmB3M,EAzCA,EA0CnB4M,GAIJ,CAEA,YADAxH,EAAmB0G,KAAKe,IAAI,EAAGD,GAEjC,CAKA,GAFwBd,KAAKe,IAAI,EAAGf,KAAKgB,MAAMT,GAAkBxB,GApDxC,MAsDFpB,GAAcvS,OAEnCkO,EAAmBqE,GAAcvS,YAC5B,CAEL,MAAMwV,EAAwBL,EA5DF,GACL,EA4DjBU,EAAsBjB,KAAKe,IAAI,EAAGf,KAAKgB,MAAMJ,GAAyB7B,GA5DrD,KA8DnBkC,GAAuBtD,GAAcvS,OAEvCkO,EAAmBqE,GAAcvS,QAGjCkO,EAAmB0G,KAAKe,IAAI,EAAGE,GAEnC,IACC,CAACtD,GAAeoB,GAAiBxF,EAAgBI,EAAaF,EAAmB4F,MAIpFtU,EAAAA,EAAAA,GACEC,EACAoV,GACA,CACE9U,WAAY,OAKhBK,EAAAA,EAAAA,YAAU,KACR,IAAKX,EAAaY,QAAS,OAE3B,MACM0T,EADYtU,EAAaY,QACC0T,cAEhC,IAAKA,EAAe,OAEpB,MAAME,EAAehT,OAAOiT,iBAAiBH,GACvCI,EAAmBC,WAAWH,EAAaI,aAAe,EAC1DC,EAAoBF,WAAWH,EAAaM,cAAgB,EAGlE,GAAIJ,EAAmB,GAAKG,EAAoB,EAAG,CACjD,MAAMzT,EAAiB,IAAIC,gBAAe,KAExCiU,uBAAsB,KACpBF,IAAsB,GACtB,IAKJ,OAFAhU,EAAeE,QAAQgT,GAEhB,KACLlT,EAAeM,YAAY,CAE/B,IACC,CAAC0T,MAGJc,EAAAA,EAAAA,kBAAgB,KACd,GAA6B,IAAzBvD,GAAcvS,OAAc,OAEhC,MAAM4T,EAAS,IAAI5F,IACnB,IAAI+H,GAAkB,EAItB,MAAMC,EAAgBzH,EAClBgE,GAAcvS,OACd4U,KAAKE,IAAI7G,EAAkB,EAAGsE,GAAcvS,QAEhDuS,GAAcrB,MAAM,EAAG8E,GAAezQ,SAASgF,IAC7C,MAAM0L,EAAalI,EAAQvN,QAAQ6D,IAAIkG,EAAO1F,IAC9C,GAAIoR,EAAY,CACd,MAAMnN,EAAQmN,EAAWC,YACrBpN,EAAQ,IACV8K,EAAO/D,IAAItF,EAAO1F,GAAIiE,GACtBiN,GAAkB,EAEtB,KAIF,IAAII,EAAuD,KACvDC,EAAuD,KAE3D,GAAIL,EAAiB,CAEnB,MAAMM,EAAqB9H,EAC3B4H,EAAiBtV,YAAW,KAC1ByN,EAAqBsF,GAEjByC,IACF7H,GAAe,GAEf4H,EAAiBvV,YAAW,KACtBjB,EAAaY,SACfwU,IACF,GACC,GACL,GACC,EACL,CAGA,MAAO,KACDmB,GAAgBvV,aAAauV,GAC7BC,GAAgBxV,aAAawV,EAAe,CACjD,GACA,CAAC7D,GAAetE,EAAiBM,EAAayG,MAGjDc,EAAAA,EAAAA,kBAAgB,KACd,IAAKvH,GAAe3O,EAAaY,QAAS,CAGxC,MAAM8V,EAAYzV,YAAW,KAC3BqU,uBAAsB,KACpBA,uBAAsB,KAChBtV,EAAaY,SACfwU,IACF,GACA,GACF,GACD,IAEH,MAAO,KACLpU,aAAa0V,EAAU,CAE3B,IACC,CAACtB,GAAsBzG,KAG1BhO,EAAAA,EAAAA,YAAU,KACJgS,GAAcvS,OAAS,IACzBwO,GAAe,GACfF,EAAqB,IAAIN,KAC3B,GACC,CAACuE,GAAcvS,SAGlB,MAAMuW,IAAe/D,EAAAA,EAAAA,UAAQ,IACpB,IAAIhF,GAActH,MAAK,CAAC4E,EAAGC,IAAMD,EAAE0L,MAAQzL,EAAEyL,SACnD,CAAChJ,IAQEiJ,GAAiBA,CAAChQ,EAAoBiQ,EAAgC3O,KAC1EtB,EAAEkQ,iBACFlQ,EAAEmQ,aAAaC,WAAa,OAEf,WAAT9O,EACF+G,EAAoB4H,GAEpB1H,EAAmB0H,EACrB,EAGII,GAAgBA,KACpBlI,EAAmB,MACnBE,EAAoB,MACpBE,EAAmB,KAAK,EAGpB+H,GAAa/S,MAAOyC,EAAoBiQ,EAAgC3O,KAG5E,GAFAtB,EAAEkQ,iBAEGhI,EAGL,GAAa,WAAT5G,GAAqB4G,IAAoB+H,EAK7C,IACE,GAAa,UAAT3O,QAEI3D,EAAAA,EAAciI,KAAKtH,EAAAA,GAAcsF,cAAc2M,OAAOC,WAAWtI,EAAiB+H,IACxFjN,EAAYzH,EAAE,2BAA4B,CAAE8F,aAAc,qCAAoC,eACzF,CAEL,MAAMoP,EAAe5J,EAAa+E,MAAKK,GAAKA,EAAE7N,KAAO6R,IACrD,IAAKQ,EAEH,YADAJ,KAIF,GAAII,EAAazH,cAETrL,EAAAA,EAAciI,KAAKtH,EAAAA,GAAcsF,cAAc2M,OAAOC,WAAWtI,EAAiBuI,EAAazH,UACrGhG,EAAYzH,EAAE,2BAA4B,CAAE8F,aAAc,qCAAoC,eACzF,CAEL,MAAMqP,EAAS,UAAA7P,OAAakG,EAAaxN,OAAS,GAM5CoX,SALsBhT,EAAAA,EAAciI,KAAKtH,EAAAA,GAAcsF,cAAc2M,OAAOK,OAAQ,CACxF7N,UACA/E,KAAM0S,KAGuB5S,WAEzB+S,QAAQC,IAAI,CAChBnT,EAAAA,EAAciI,KAAKtH,EAAAA,GAAcsF,cAAc2M,OAAOC,WAAWtI,EAAiByI,EAASvS,KAC3FT,EAAAA,EAAciI,KAAKtH,EAAAA,GAAcsF,cAAc2M,OAAOC,WAAWC,EAAarS,GAAIuS,EAASvS,OAG7F4E,EAAYzH,EAAE,4BAA6B,CAAE8F,aAAc,oBAAsB,UACnF,CACF,OAGM0I,IACR,CAAE,MAAOhG,GACH8G,EAGJ7H,EAAYzH,EAAE,oBAAqB,CAAE8F,aAAc,sCAAwC,QAC7F,CAAC,QACCgP,IACF,MAjDEA,IAiDF,EAIIU,GAAuB/H,IAC3BP,GAAsBuI,IACpB,MAAMC,EAAS,IAAIpS,IAAImS,GAMvB,OALIC,EAAOC,IAAIlI,GACbiI,EAAOtG,OAAO3B,GAEdiI,EAAO/R,IAAI8J,GAENiI,CAAM,GACb,EA0BEE,GAAwBA,KAC5BvH,GAAkB,MAClBE,GAAoB,GAAG,EAGnBsH,GAAsB7T,UAC1B,GAAKsM,GAAiB5K,OAKtB,UACQtB,EAAAA,EAAc0T,IAAI/S,EAAAA,GAAcsF,cAAc2M,OAAOe,OAAOtI,GAAU,CAC1EhL,KAAM6L,GAAiB5K,SAEzB+D,EAAYzH,EAAE,4BAA6B,CAAE8F,aAAc,qBAAuB,iBAC5E0I,KACNH,GAAkB,MAClBE,GAAoB,GACtB,CAAE,MAAO/F,GAAW,IAADwN,EAAAC,EACb3G,EAGJ,MAAM4G,GAA2B,QAAZF,EAAAxN,EAAIrG,gBAAQ,IAAA6T,GAAM,QAANC,EAAZD,EAAczT,YAAI,IAAA0T,OAAN,EAAZA,EAAoBE,UAAW,oCACpD1O,EAAYyO,EAAc,QAC5B,MAlBEzO,EAAYzH,EAAE,2BAA4B,CAAE8F,aAAc,qCAAuC,QAkBnG,EAIIsQ,GAAoBA,IACpBnL,EAEKD,EAGA,KAIX,OAAIU,GACKlH,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wCAAuCC,SAAEvE,EAAE,2BAG/DwC,GACKgC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,oBAAmBC,SAAE/B,IAGjB,IAAxB8I,EAAatN,QAAwC,IAAxBwN,EAAaxN,OACrC,MAIPwG,EAAAA,EAAAA,KAAA,OAAKoC,IAAKhJ,EAAc0G,UAAU,qFAAoFC,UAEpHF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gEAA+DC,SAAA,CAE3EgQ,GAAazP,KAAIuR,IAEhB,MAAMC,EAAsBD,EAAME,QAAQlG,MAAKK,GAAK0F,OAAwB1F,EAAE7N,KACxE2T,EA13BM,WAFQrB,EA43B2BkB,EAAM5T,OA13BhB,WAAd0S,EACpBnV,EAAE,0BAA2B,UAEpB,UAAdmV,GAAuC,aAAdA,GAA0C,aAAdA,EAChDnV,EAAE,0BAA2B,YAG/BmV,EATmBA,MA63BpB,MAAMsB,EAAcH,EAChBjL,EAAoBiL,EAAoB7T,MAAK,GAAA6C,OAC1CkR,EAAmB,MAAAlR,OAAK+Q,EAAME,QAAQvY,OAAM,KAEnD,OACAqG,EAAAA,EAAAA,MAAA,OAAoBC,UAAU,yBAAwBC,SAAA,EACpDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BF,EAAAA,EAAAA,MAAA,UACEuC,IAAM8P,IAAOC,OA/0BAlJ,EA+0BkB4I,EAAMxT,SA/0BP+T,EA+0BWF,GA70BnDtJ,EAAgB5O,QAAQqP,IAAIJ,EAASmJ,GAErCxJ,EAAgB5O,QAAQ4Q,OAAO3B,IAJTkJ,IAAClJ,EAAiBmJ,CA+0Be,EAC7C,gBAAeP,EAAMxT,GACrBoD,QAASA,IAAMuP,GAAoBa,EAAMxT,IACzCgU,WAAapS,GAAMgQ,GAAehQ,EAAG4R,EAAMxT,GAAI,SAC/CiU,OAASrS,GAAMsQ,GAAWtQ,EAAG4R,EAAMxT,GAAI,SACvCyB,UAAS,qRAAAgB,OACPyH,IAAoBsJ,EAAMxT,GAAK,yBAA2B,GAAE,KAAAyC,OAC1DgR,EAAsB,yBAA2B,IAAK/R,SAAA,EAE1DC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,yCAAwCC,SACrDkS,KAEHjS,EAAAA,EAAAA,KAACuS,EAAAA,EAAe,CAACzS,UAAS,6DAAAgB,OAA+D2H,EAAmB0I,IAAIU,EAAMxT,IAAM,aAAe,UAE7I2B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wLAAuLC,SACnM+R,EAAsBG,EAAW,GAAAnR,OAAMkR,EAAmB,MAAAlR,OAAK+Q,EAAME,QAAQvY,OAAM,UAKvFiP,EAAmB0I,IAAIU,EAAMxT,KAAOwK,GAAkBsI,IAAIU,EAAMxT,MAAOmU,EAAAA,EAAAA,eACtE3S,EAAAA,EAAAA,MAAA,OACEuC,IAAM8P,IAAOO,OA72BExJ,EA62BkB4I,EAAMxT,SA72BP+T,EA62BWF,GA32BrDvJ,EAAkB3O,QAAQqP,IAAIJ,EAASmJ,GAEvCzJ,EAAkB3O,QAAQ4Q,OAAO3B,IAJTwJ,IAACxJ,EAAiBmJ,CA62Be,EAC/C/P,MAAO,CACLqQ,SAAU,QACVpJ,IAAI,GAADxI,OAAK+H,GAAkBhL,IAAIgU,EAAMxT,IAAKiL,IAAG,MAC5CG,KAAK,GAAD3I,OAAK+H,GAAkBhL,IAAIgU,EAAMxT,IAAKoL,KAAI,MAC9CkJ,OAAQ,KAEV7S,UAAU,gHAA+GC,SAAA,CAExH8R,EAAME,QAAQzR,KAAIyD,IACjB/D,EAAAA,EAAAA,KAAA,OAEEyB,QAASA,KACPgK,GAAmB1H,GACnBiN,GAAoBa,EAAMxT,GAAG,EAE/ByB,UAAS,wFAAAgB,OACP8Q,OAAwB7N,EAAO1F,GAC3B,mEACA,4EAA2E,KAAAyC,OAC7EgL,GAAiB/H,EAAO9F,MAAQ,YAAc,IAAK8B,UAEvDC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,kBAAiBC,SAAE8G,EAAoB9C,EAAO9F,SAXzD8F,EAAO1F,OAchB2B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,0DAAyDC,SACrE6J,KAAmBiI,EAAMxT,IACxBwB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EACxBC,EAAAA,EAAAA,KAAA,SACEuB,KAAK,OACLvE,MAAO8M,GACP5O,SAAW+E,GAAM8J,GAAoB9J,EAAEG,OAAOpD,OAC9C4V,UAAY3S,IACI,UAAVA,EAAE4S,IACJxB,GAAoBQ,EAAMxT,IACP,WAAV4B,EAAE4S,KACXzB,IACF,EAEFtR,UAAU,8LACVgT,WAAS,EACTrR,QAAUxB,GAAMA,EAAE2L,qBAEpB/L,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8BAA6BC,SAAA,EAC1CF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,UACEyB,QAAUxB,IACRA,EAAE2L,kBACFyF,GAAoBQ,EAAMxT,GAAG,EAE/ByB,UAAU,oJAAmJC,UAE7JC,EAAAA,EAAAA,KAACqG,EAAAA,EAAS,CAACvG,UAAU,eAEvBE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wLAAuLC,SAAC,kBAIzMF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,UACEyB,QAAUxB,IACRA,EAAE2L,kBACFwF,IAAuB,EAEzBtR,UAAU,kNAAiNC,UAE3NC,EAAAA,EAAAA,KAACiG,EAAAA,EAAS,CAACnG,UAAU,eAEvBE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wLAAuLC,SAAC,wBAO7MF,EAAAA,EAAAA,MAAA6C,EAAAA,SAAA,CAAA3C,SAAA,EACEF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,UACEyB,QAAUxB,IACRA,EAAE2L,kBA9KEiG,KAC5BhI,GAAkBgI,EAAMxT,IACxB0L,GAAoB8H,EAAM5T,KAAK,EA6KP8U,CAAqBlB,EAAM,EAE7B/R,UAAU,yJAAwJC,UAElKC,EAAAA,EAAAA,KAACgT,EAAAA,EAAU,CAAClT,UAAU,eAExBE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wLAAuLC,SAAC,0BAIzMF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,UACEyB,QAAUxB,IACRA,EAAE2L,kBA9MCpO,WAC3B,UACQI,EAAAA,EAAcgN,OAAOrM,EAAAA,GAAcsF,cAAc2M,OAAOyC,OAAOhK,IACrEhG,EAAYzH,EAAE,wBAAyB,CAAE8F,aAAc,wBAAuB,iBACxE0I,KACNtB,GAAsBuI,IACpB,MAAMC,EAAS,IAAIpS,IAAImS,GAEvB,OADAC,EAAOtG,OAAO3B,GACPiI,CAAM,GAEjB,CAAE,MAAOlN,GAIPf,EAAYzH,EAAE,sBAAuB,CAAE8F,aAAc,uCAAsC,QAC7F,GAgMwB4R,CAAqBrB,EAAMxT,GAAG,EAEhCyB,UAAU,uJAAsJC,UAEhKC,EAAAA,EAAAA,KAAC0B,EAAAA,EAAS,CAAC5B,UAAU,eAEvBE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wLAAuLC,SACnMvE,EAAE,+BAOf0G,SAASiR,QArIHtB,EAAMxT,GAuIV,IAKP4O,GAAevC,MAAM,EAAGwC,IAAqB5M,KAAIyD,IAChDlE,EAAAA,EAAAA,MAAA,OAEEuC,IAAM8P,IACAA,IAAOnO,EAAO5C,cAChBoG,EAAQvN,QAAQqP,IAAItF,EAAO1F,GAAI6T,GACrBA,GACV3K,EAAQvN,QAAQ4Q,OAAO7G,EAAO1F,GAChC,EAEF+U,WAAW,EACXC,YAAcpT,GA7UAqT,EAACrT,EAAoB0L,KAC3C1L,EAAEmQ,aAAamD,cAAgB,OAC/BnL,EAAmBuD,EAAS,EA2UA2H,CAAgBrT,EAAG8D,EAAO1F,IAC9CgU,WAAapS,GAAMgQ,GAAehQ,EAAG8D,EAAO1F,GAAI,UAChDiU,OAASrS,GAAMsQ,GAAWtQ,EAAG8D,EAAO1F,GAAI,UACxCmV,UAAWlD,GACX7O,QAASA,KAAOsC,EAAO5C,eAAiBsK,GAAmB1H,GAC3DjE,UAAS,2JAAAgB,OACPiD,EAAO5C,cACH,6FACAgH,IAAoBpE,EAAO1F,GACzB,aACAgK,IAAqBtE,EAAO1F,GAC1B,uBACAuT,OAAwB7N,EAAO1F,GAC7B,+GACA,qJAAoJ,KAAAyC,QAC3JiD,EAAO5C,eAAiB2K,GAAiB/H,EAAO9F,MAAQ,YAAc,IAAK8B,SAAA,EAEhFC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,yCAAwCC,SACrDgE,EAAO5C,eAAiC,qDAAhB4C,EAAO9F,MAC9B+B,EAAAA,EAAAA,KAAA,QAAMF,UAAU,6EAEhB+G,EAAoB9C,EAAO9F,SAG7B8F,EAAO5C,gBAAkB2K,GAAiB/H,EAAO9F,QAC/C+B,EAAAA,EAAAA,KAAA,UACEyB,QAAUxB,GAAMyL,GAAmBzL,EAAG8D,EAAO1F,IAC/CyB,UAAU,gHAA+GC,UAEvHC,EAAAA,EAAAA,KAACiG,EAAAA,EAAS,CAACnG,UAAU,6BAG3BE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wLAAuLC,SACnMgE,EAAO5C,cAAgB3F,EAAE,kBAAoBqL,EAAoB9C,EAAO9F,UA1CtE8F,EAAO1F,OAgDduO,IAAyBb,GAAcvS,OAASiO,IAChD5H,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yBAAwBC,SAAA,EACrCF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BF,EAAAA,EAAAA,MAAA,UACE4B,QAASA,IAAMyG,GAAmBD,GAClCnI,UAAU,wQAAuQC,SAAA,EAEjRF,EAAAA,EAAAA,MAAA,QAAAE,SAAA,CAAM,IAAEgM,GAAcvS,OAASiO,MAC/BzH,EAAAA,EAAAA,KAACuS,EAAAA,EAAe,CAACzS,UAAS,6DAAAgB,OAA+DmH,EAAiB,aAAe,UAE3HjI,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wLAAuLC,SAAC,+BAMxMkI,IACCjI,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iKAAgKC,SAC5KgM,GAAcrB,MAAMjD,GAAiBnH,KAAIyD,IACxClE,EAAAA,EAAAA,MAAA,OAEE4B,QAASA,KACPgK,GAAmB1H,GACnBmE,GAAkB,EAAM,EAE1BpI,UAAS,wFAAAgB,OACP8Q,OAAwB7N,EAAO1F,GAC3B,mEACA,4EAA2E,KAAAyC,OAC7EgL,GAAiB/H,EAAO9F,MAAQ,YAAc,IAAK8B,SAAA,EAEvDC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,kBAAiBC,SAAE8G,EAAoB9C,EAAO9F,SAC5D6N,GAAiB/H,EAAO9F,QACtB+B,EAAAA,EAAAA,KAAA,UACEyB,QAAUxB,IACRA,EAAE2L,kBACFF,GAAmBzL,EAAG8D,EAAO1F,IAC7B6J,GAAkB,EAAM,EAE5BpI,UAAU,sHAAqHC,UAE7HC,EAAAA,EAAAA,KAACiG,EAAAA,EAAS,CAACnG,UAAU,gBArBtBiE,EAAO1F,eA+BtB,C","sources":["hooks/useResizeObserver.ts","components/FilterRow.tsx","components/FilterLogicalOperator.tsx","components/FilterPane.tsx","components/SavedFilterTags.tsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\r\n\r\n/**\r\n * Custom Hook für ResizeObserver mit Memory-Leak Prevention\r\n * \r\n * Verwendet useRef Pattern, um zu verhindern, dass ResizeObserver bei jedem Re-Render neu erstellt wird.\r\n * Dies behebt Memory-Leaks, die durch häufige Re-Erstellung von ResizeObserver-Instanzen entstehen.\r\n * \r\n * @param containerRef - Ref zum zu beobachtenden Container-Element\r\n * @param onResize - Callback-Funktion, die bei Resize aufgerufen wird\r\n * @param options - Optionale Konfiguration\r\n * @param options.debounceMs - Debounce-Zeit in Millisekunden (Standard: 100ms)\r\n * @param options.enabled - Ob Observer aktiv sein soll (Standard: true)\r\n * @param options.additionalElementRef - Optional: Zusätzliches Element, das auch beobachtet werden soll (z.B. grandParent für negative Margins)\r\n */\r\nexport function useResizeObserver(\r\n  containerRef: React.RefObject<HTMLElement>,\r\n  onResize: () => void,\r\n  options: {\r\n    debounceMs?: number;\r\n    enabled?: boolean;\r\n    additionalElementRef?: React.RefObject<HTMLElement | null>;\r\n  } = {}\r\n): void {\r\n  const { debounceMs = 100, enabled = true, additionalElementRef } = options;\r\n\r\n  // ✅ MEMORY FIX: useRef für onResize (verhindert Re-Erstellung von ResizeObserver)\r\n  const onResizeRef = useRef<() => void>();\r\n\r\n  // ✅ MEMORY FIX: Aktualisiere Ref wenn onResize sich ändert\r\n  useEffect(() => {\r\n    onResizeRef.current = onResize;\r\n  }, [onResize]);\r\n\r\n  // ✅ MEMORY FIX: ResizeObserver nur EINMAL erstellen (keine Dependencies!)\r\n  useEffect(() => {\r\n    if (!enabled || !containerRef.current) return;\r\n\r\n    const container = containerRef.current;\r\n    const resizeTimeoutRef = { current: null as NodeJS.Timeout | null };\r\n\r\n    // ✅ MEMORY FIX: Debounced Resize-Handler\r\n    const handleResize = () => {\r\n      if (resizeTimeoutRef.current) {\r\n        clearTimeout(resizeTimeoutRef.current);\r\n      }\r\n      resizeTimeoutRef.current = setTimeout(() => {\r\n        onResizeRef.current?.();\r\n      }, debounceMs);\r\n    };\r\n\r\n    // ✅ MEMORY FIX: Verwende Ref statt direkter Funktion\r\n    const resizeObserver = new ResizeObserver(() => {\r\n      handleResize();\r\n    });\r\n    resizeObserver.observe(container);\r\n\r\n    // ✅ FIX: Beobachte auch zusätzliches Element, wenn vorhanden (z.B. grandParent für negative Margins)\r\n    if (additionalElementRef?.current) {\r\n      resizeObserver.observe(additionalElementRef.current);\r\n    }\r\n\r\n    // ✅ MEMORY FIX: Window-Resize Event-Listener mit Ref\r\n    const handleWindowResize = () => {\r\n      handleResize();\r\n    };\r\n    window.addEventListener('resize', handleWindowResize);\r\n\r\n    return () => {\r\n      resizeObserver.disconnect();\r\n      window.removeEventListener('resize', handleWindowResize);\r\n      if (resizeTimeoutRef.current) {\r\n        clearTimeout(resizeTimeoutRef.current);\r\n      }\r\n    };\r\n  }, [enabled, debounceMs, containerRef, additionalElementRef]); // Nur Dependencies, die sich selten ändern\r\n}\r\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { TrashIcon, PlusCircleIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\n\nexport interface FilterCondition {\n  column: string;\n  operator: string;\n  value: string | number | Date | null;\n}\n\ninterface TableColumn {\n  id: string;\n  label: string;\n}\n\ninterface FilterRowProps {\n  condition: FilterCondition;\n  onChange: (condition: FilterCondition) => void;\n  onDelete: () => void;\n  onAdd: () => void;\n  columns: TableColumn[];\n  isFirst: boolean;\n  isLast: boolean;\n}\n\n// Neue Interfaces für Benutzer und Rollen\ninterface User {\n  id: number;\n  firstName: string;\n  lastName: string;\n}\n\ninterface Role {\n  id: number;\n  name: string;\n}\n\ninterface Branch {\n  id: number;\n  name: string;\n}\n\nconst getOperatorsByColumnType = (columnId: string, t: (key: string) => string): { value: string; label: string }[] => {\n  // Standard-Text-Operatoren\n  const textOperators = [\n    { value: 'equals', label: t('filter.operators.equals') },\n    { value: 'contains', label: t('filter.operators.contains') },\n    { value: 'startsWith', label: t('filter.operators.startsWith') },\n    { value: 'endsWith', label: t('filter.operators.endsWith') }\n  ];\n\n  // Datum-Operatoren (benutzerfreundliche Labels)\n  const dateOperators = [\n    { value: 'equals', label: t('filter.operators.isExactly') },\n    { value: 'after', label: t('filter.operators.after') },\n    { value: 'before', label: t('filter.operators.before') },\n    { value: 'between', label: t('filter.operators.between') }\n  ];\n\n  // Dauer-Operatoren (für Zeitspannen und Zahlen)\n  const durationOperators = [\n    { value: 'equals', label: t('filter.operators.isEqual') },\n    { value: 'greaterThan', label: t('filter.operators.greaterThan') },\n    { value: 'lessThan', label: t('filter.operators.lessThan') }\n  ];\n\n  // Status-Operatoren (für Enum-Werte)\n  const statusOperators = [\n    { value: 'equals', label: t('filter.operators.equals') },\n    { value: 'notEquals', label: t('filter.operators.notEquals') }\n  ];\n\n  // Je nach Spaltentyp entsprechende Operatoren zurückgeben\n  if (columnId === 'dueDate' || columnId === 'startTime' || columnId === 'checkInDate' || columnId === 'checkOutDate' || columnId === 'arrivalTime' || columnId === 'time') {\n    return dateOperators;\n  } else if (columnId === 'duration' || columnId === 'amount') {\n    return durationOperators;\n  } else if (columnId === 'status' || columnId === 'paymentStatus' || columnId === 'roomNumber' || columnId === 'type' || columnId === 'branch') {\n    // ✅ FIX: roomNumber, type und branch nur = und != (wie Status)\n    return statusOperators;\n  } else if (columnId === 'responsible' || columnId === 'qualityControl' || columnId === 'responsibleAndQualityControl') {\n    return statusOperators;\n  } else {\n    return textOperators;\n  }\n};\n\nconst FilterRow: React.FC<FilterRowProps> = ({ \n  condition, \n  onChange, \n  onDelete, \n  onAdd,\n  columns, \n  isFirst,\n  isLast\n}) => {\n  const { t } = useTranslation();\n  const [operators, setOperators] = useState<{ value: string; label: string }[]>([]);\n  // States für Benutzer, Rollen und Branches\n  const [users, setUsers] = useState<User[]>([]);\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [branches, setBranches] = useState<Branch[]>([]);\n  const [roomNumbers, setRoomNumbers] = useState<string[]>([]);\n  const [loadingUsers, setLoadingUsers] = useState(false);\n  const [loadingRoles, setLoadingRoles] = useState(false);\n  const [loadingBranches, setLoadingBranches] = useState(false);\n  const [loadingRoomNumbers, setLoadingRoomNumbers] = useState(false);\n  \n  // Operatoren aktualisieren, wenn sich die Spalte ändert\n  useEffect(() => {\n    setOperators(getOperatorsByColumnType(condition.column, t));\n  }, [condition.column, t]);\n  \n  // Laden der Benutzer, Rollen und Branches, wenn benötigt\n  useEffect(() => {\n    // ✅ PHASE 8: Memory Leak Prevention - AbortController\n    const abortController = new AbortController();\n    \n    const loadUsersAndRoles = async () => {\n      const token = localStorage.getItem('token');\n      if (!token) return;\n      \n      // WICHTIG: requestedBy, responsible, qualityControl und responsibleAndQualityControl benötigen Dropdowns\n      if (condition.column === 'requestedBy' || condition.column === 'responsible' || condition.column === 'qualityControl' || condition.column === 'responsibleAndQualityControl') {\n        // Benutzer laden (nur aktive Benutzer)\n        setLoadingUsers(true);\n        try {\n          const response = await axiosInstance.get('/users/dropdown', {\n            signal: abortController.signal\n          });\n          setUsers(response.data);\n        } catch (error: any) {\n          if (error.name !== 'AbortError') {\n          if (process.env.NODE_ENV === 'development') {\n              console.error('Error loading users:', error);\n            }\n          }\n        } finally {\n          if (!abortController.signal.aborted) {\n          setLoadingUsers(false);\n          }\n        }\n        \n        // Tabellen-Typ erkennen (wie bei Status-Dropdown)\n        const isRequestTable = columns.some(col => col.id === 'requestedBy' || col.id === 'createTodo');\n        const isTaskTable = columns.some(col => col.id === 'responsible' || col.id === 'qualityControl');\n        \n        // Rollen laden NUR für Tasks, NICHT für Requests\n        // requestedBy: NUR bei Tasks (aber Tasks haben kein requestedBy, also nie)\n        // responsible: NUR bei Tasks\n        // responsibleAndQualityControl: NUR bei Tasks\n        if ((condition.column === 'responsible' || condition.column === 'responsibleAndQualityControl') && isTaskTable) {\n          setLoadingRoles(true);\n          try {\n            const response = await axiosInstance.get('/roles', {\n              signal: abortController.signal\n            });\n            setRoles(response.data);\n          } catch (error: any) {\n            if (error.name !== 'AbortError') {\n            if (process.env.NODE_ENV === 'development') {\n                console.error('Error loading roles:', error);\n              }\n            }\n          } finally {\n            if (!abortController.signal.aborted) {\n            setLoadingRoles(false);\n            }\n          }\n        }\n      }\n      \n      // Branches laden für branch-Spalte\n      if (condition.column === 'branch') {\n        setLoadingBranches(true);\n        try {\n          const response = await axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE, {\n            signal: abortController.signal\n          });\n          setBranches(response.data);\n        } catch (error: any) {\n          if (error.name !== 'AbortError') {\n          if (process.env.NODE_ENV === 'development') {\n              console.error('Error loading branches:', error);\n            }\n          }\n        } finally {\n          if (!abortController.signal.aborted) {\n          setLoadingBranches(false);\n          }\n        }\n      }\n      \n      // ✅ FIX: Zimmernamen laden für roomNumber-Spalte (Zimmername aus roomDescription für Dorms, roomNumber für Privates)\n      if (condition.column === 'roomNumber') {\n        setLoadingRoomNumbers(true);\n        try {\n          // Hole alle Reservations und extrahiere eindeutige Zimmernamen\n          // Dorms: roomDescription = Zimmername, roomNumber = Bettnummer\n          // Privates: roomNumber = Zimmername, roomDescription = optional\n          const response = await axiosInstance.get(API_ENDPOINTS.RESERVATION.BASE, {\n            signal: abortController.signal\n          });\n          const reservations = response.data?.data || response.data || [];\n          \n          // Kombiniere roomDescription (Dorms) und roomNumber (Privates) zu Zimmernamen\n          const roomNames = new Set<string>();\n          reservations.forEach((r: any) => {\n            // Für Dorms: roomDescription enthält Zimmername\n            if (r.roomDescription && r.roomDescription.trim() !== '') {\n              roomNames.add(r.roomDescription.trim());\n            }\n            // Für Privates: roomNumber enthält Zimmername (nur wenn nicht \"Cama\" - dann ist es Bettnummer)\n            if (r.roomNumber && r.roomNumber.trim() !== '' && !r.roomNumber.toLowerCase().startsWith('cama')) {\n              roomNames.add(r.roomNumber.trim());\n            }\n          });\n          \n          const uniqueRoomNames = Array.from(roomNames).sort();\n          setRoomNumbers(uniqueRoomNames);\n        } catch (error: any) {\n          if (error.name !== 'AbortError') {\n          if (process.env.NODE_ENV === 'development') {\n              console.error('Error loading room numbers:', error);\n            }\n          }\n        } finally {\n          if (!abortController.signal.aborted) {\n          setLoadingRoomNumbers(false);\n          }\n        }\n      }\n    };\n    \n    loadUsersAndRoles();\n    \n    // ✅ PHASE 8: Memory Leak Prevention - Cleanup\n    return () => {\n      abortController.abort();\n    };\n  }, [condition.column]);\n  \n  // Rendert das Eingabefeld basierend auf Spalte und Operator\n  const renderValueInput = (\n    columnId: string, \n    operator: string, \n    value: string | number | Date | null, \n    onChange: (value: string | number | Date | null) => void\n  ) => {\n    // Für Status ein Dropdown rendern\n    if (columnId === 'status') {\n      // Überprüfen welche Tabelle wir filtern (über Columns-Array)\n      const isRequestTable = columns.some(col => col.id === 'requestedBy' || col.id === 'createTodo');\n      const isTaskTable = columns.some(col => col.id === 'responsible' || col.id === 'qualityControl');\n      const isInvoiceTable = columns.some(col => col.id === 'client') && !columns.some(col => col.id === 'responsible');\n      const isReservationTable = columns.some(col => col.id === 'checkInDate' || col.id === 'checkOutDate' || col.id === 'roomNumber');\n      \n      if (isReservationTable) {\n        // ✅ Reservation-Status-Optionen\n        return (\n          <select\n            className=\"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={value as string || ''}\n            onChange={(e) => onChange(e.target.value)}\n          >\n            <option value=\"\">{t('filter.row.pleaseSelect')}</option>\n            <option value=\"potential\">{t('reservations.status.potential', 'Potenzielle Reservierung')}</option>\n            <option value=\"confirmed\">{t('reservations.status.confirmed', 'Bestätigt')}</option>\n            <option value=\"notification_sent\">{t('reservations.status.notification_sent', 'Benachrichtigung gesendet')}</option>\n            <option value=\"checked_in\">{t('reservations.status.checked_in', 'Eingecheckt')}</option>\n            <option value=\"checked_out\">{t('reservations.status.checked_out', 'Ausgecheckt')}</option>\n            <option value=\"cancelled\">{t('reservations.status.cancelled', 'Storniert')}</option>\n            <option value=\"no_show\">{t('reservations.status.no_show', 'Nicht erschienen')}</option>\n          </select>\n        );\n      } else if (isRequestTable) {\n        // Request-Status-Optionen\n        return (\n          <select\n            className=\"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={value as string || ''}\n            onChange={(e) => onChange(e.target.value)}\n          >\n            <option value=\"\">{t('filter.row.pleaseSelect')}</option>\n            <option value=\"approval\">{t('filter.row.status.approval')}</option>\n            <option value=\"approved\">{t('filter.row.status.approved')}</option>\n            <option value=\"to_improve\">{t('filter.row.status.to_improve')}</option>\n            <option value=\"denied\">{t('filter.row.status.denied')}</option>\n          </select>\n        );\n      } else if (isTaskTable) {\n        // Task-Status-Optionen\n        return (\n          <select\n            className=\"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={value as string || ''}\n            onChange={(e) => onChange(e.target.value)}\n          >\n            <option value=\"\">{t('filter.row.pleaseSelect')}</option>\n            <option value=\"open\">{t('filter.row.status.open')}</option>\n            <option value=\"in_progress\">{t('filter.row.status.in_progress')}</option>\n            <option value=\"improval\">{t('filter.row.status.improval')}</option>\n            <option value=\"quality_control\">{t('filter.row.status.quality_control')}</option>\n            <option value=\"done\">{t('filter.row.status.done')}</option>\n          </select>\n        );\n      } else if (isInvoiceTable) {\n        // Invoice-Status-Optionen\n        return (\n          <select\n            className=\"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={value as string || ''}\n            onChange={(e) => onChange(e.target.value)}\n          >\n            <option value=\"\">{t('filter.row.pleaseSelect')}</option>\n            <option value=\"DRAFT\">{t('filter.row.status.draft')}</option>\n            <option value=\"SENT\">{t('filter.row.status.sent')}</option>\n            <option value=\"PAID\">{t('filter.row.status.paid')}</option>\n            <option value=\"OVERDUE\">{t('filter.row.status.overdue')}</option>\n            <option value=\"CANCELLED\">{t('filter.row.status.cancelled')}</option>\n          </select>\n        );\n      } else {\n        // Fallback für andere Tabellen mit Status\n        return (\n          <select\n            className=\"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={value as string || ''}\n            onChange={(e) => onChange(e.target.value)}\n          >\n            <option value=\"\">{t('filter.row.pleaseSelect')}</option>\n            <option value=\"open\">{t('filter.row.status.open')}</option>\n            <option value=\"in_progress\">{t('filter.row.status.in_progress')}</option>\n            <option value=\"done\">{t('filter.row.status.done')}</option>\n          </select>\n        );\n      }\n    }\n    \n    // Für requestedBy, responsible und responsibleAndQualityControl ein Dropdown mit Benutzern und Rollen rendern\n    // WICHTIG: Diese Spalten müssen IMMER Dropdowns verwenden, keine Text-Eingabe\n    if (columnId === 'requestedBy' || columnId === 'responsible' || columnId === 'responsibleAndQualityControl') {\n      // Tabellen-Typ erkennen (wie bei Status-Dropdown)\n      const isRequestTable = columns.some(col => col.id === 'requestedBy' || col.id === 'createTodo');\n      const isTaskTable = columns.some(col => col.id === 'responsible' || col.id === 'qualityControl');\n      \n      // Bestimme ob Rollen angezeigt werden sollen\n      // requestedBy: Nur Users (bei Requests, keine Rollen)\n      // responsible: Users + Roles (bei Tasks), nur Users (bei Requests)\n      // responsibleAndQualityControl: Users + Roles (bei Tasks)\n      const showRoles = (columnId === 'responsible' || columnId === 'responsibleAndQualityControl') && isTaskTable;\n      \n      return (\n        <select\n          className=\"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n          value={value as string || ''}\n          onChange={(e) => onChange(e.target.value)}\n          disabled={loadingUsers || (showRoles && loadingRoles)}\n        >\n            <option value=\"\">{t('filter.row.pleaseSelect')}</option>\n          \n          {users.length > 0 && (\n            <optgroup label={t('filter.row.groups.users')}>\n              {users.map(user => (\n                <option key={`user-${user.id}`} value={`user-${user.id}`}>\n                  {user.firstName} {user.lastName}\n                </option>\n              ))}\n            </optgroup>\n          )}\n          \n          {showRoles && roles.length > 0 && (\n            <optgroup label={t('filter.row.groups.roles')}>\n              {roles.map(role => (\n                <option key={`role-${role.id}`} value={`role-${role.id}`}>\n                  {role.name}\n                </option>\n              ))}\n            </optgroup>\n          )}\n          \n          {(loadingUsers || (showRoles && loadingRoles)) && (\n            <option value=\"\" disabled>{t('filter.row.loadingData')}</option>\n          )}\n        </select>\n      );\n    }\n    \n    // Für Qualitätskontrolle ein Dropdown nur mit Benutzern rendern\n    if (columnId === 'qualityControl') {\n      return (\n        <select\n          className=\"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n          value={value as string || ''}\n          onChange={(e) => onChange(e.target.value)}\n          disabled={loadingUsers}\n        >\n            <option value=\"\">{t('filter.row.pleaseSelect')}</option>\n          \n          {users.length > 0 && (\n            <optgroup label={t('filter.row.groups.users')}>\n              {users.map(user => (\n                <option key={`user-${user.id}`} value={`user-${user.id}`}>\n                  {user.firstName} {user.lastName}\n                </option>\n              ))}\n            </optgroup>\n          )}\n          \n          {loadingUsers && (\n            <option value=\"\" disabled>{t('filter.row.loadingUsers')}</option>\n          )}\n        </select>\n      );\n    }\n    \n    // Für Typ ein Dropdown rendern (nur für Requests)\n    if (columnId === 'type') {\n      const isRequestTable = columns.some(col => col.id === 'requestedBy' || col.id === 'createTodo');\n      if (isRequestTable) {\n        return (\n          <select\n            className=\"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={value as string || ''}\n            onChange={(e) => onChange(e.target.value)}\n          >\n            <option value=\"\">{t('filter.row.pleaseSelect')}</option>\n            <option value=\"event\">{t('requests.types.event')}</option>\n            <option value=\"repair\">{t('requests.types.repair')}</option>\n            <option value=\"improvement_suggestion\">{t('requests.types.improvement_suggestion')}</option>\n            <option value=\"buy_order\">{t('requests.types.buy_order')}</option>\n            <option value=\"employment_certificate\">{t('requests.types.employment_certificate')}</option>\n            <option value=\"vacation\">{t('requests.types.vacation')}</option>\n            <option value=\"permit\">{t('requests.types.permit')}</option>\n            <option value=\"sick_leave\">{t('requests.types.sick_leave')}</option>\n            <option value=\"other\">{t('requests.types.other')}</option>\n          </select>\n        );\n      }\n    }\n    \n    // ✅ NEU: Für PaymentStatus ein Dropdown rendern (nur bei Reservations)\n    if (columnId === 'paymentStatus') {\n      const isReservationTable = columns.some(col => col.id === 'checkInDate' || col.id === 'checkOutDate' || col.id === 'roomNumber');\n      if (isReservationTable) {\n        return (\n          <select\n            className=\"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={value as string || ''}\n            onChange={(e) => onChange(e.target.value)}\n          >\n            <option value=\"\">{t('filter.row.pleaseSelect')}</option>\n            <option value=\"pending\">{t('reservations.paymentStatus.pending', 'Ausstehend')}</option>\n            <option value=\"paid\">{t('reservations.paymentStatus.paid', 'Bezahlt')}</option>\n            <option value=\"partially_paid\">{t('reservations.paymentStatus.partially_paid', 'Teilweise bezahlt')}</option>\n            <option value=\"refunded\">{t('reservations.paymentStatus.refunded', 'Erstattet')}</option>\n          </select>\n        );\n      }\n    }\n    \n    // ✅ NEU: Für roomNumber ein Dropdown rendern (nur bei Reservations, nur = und !=)\n    if (columnId === 'roomNumber') {\n      const isReservationTable = columns.some(col => col.id === 'checkInDate' || col.id === 'checkOutDate' || col.id === 'roomNumber');\n      if (isReservationTable) {\n        return (\n          <select\n            className=\"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={value as string || ''}\n            onChange={(e) => onChange(e.target.value)}\n            disabled={loadingRoomNumbers}\n          >\n            <option value=\"\">{t('filter.row.pleaseSelect')}</option>\n            {roomNumbers.length > 0 && (\n              roomNumbers.map(roomNumber => (\n                <option key={roomNumber} value={roomNumber}>\n                  {roomNumber}\n                </option>\n              ))\n            )}\n            {loadingRoomNumbers && (\n              <option value=\"\" disabled>{t('filter.row.loadingData')}</option>\n            )}\n          </select>\n        );\n      }\n    }\n    \n    // Für Branch ein Dropdown rendern\n    if (columnId === 'branch') {\n      return (\n        <select\n          className=\"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n          value={value as string || ''}\n          onChange={(e) => onChange(e.target.value)}\n          disabled={loadingBranches}\n        >\n          <option value=\"\">{t('filter.row.pleaseSelect')}</option>\n          {branches.length > 0 && (\n            branches.map(branch => (\n              <option key={branch.id} value={branch.name}>\n                {branch.name}\n              </option>\n            ))\n          )}\n          {loadingBranches && (\n            <option value=\"\" disabled>{t('filter.row.loadingData')}</option>\n          )}\n        </select>\n      );\n    }\n    \n    // Für Datumsfelder ein Datumseingabefeld rendern\n    if (columnId === 'dueDate' || columnId === 'startTime' || columnId === 'checkInDate' || columnId === 'checkOutDate' || columnId === 'arrivalTime' || columnId === 'time') {\n      // ✅ PHASE 6: Prüfe ob der Wert ein Platzhalter ist (inkl. neue Zeitraum-Platzhalter)\n      const isPlaceholder = value === '__TODAY__' || \n                            value === '__THIS_WEEK__' || value === '__THIS_MONTH__' || value === '__THIS_YEAR__' ||\n                            value === '__WEEK_START__' || value === '__WEEK_END__' || \n                            value === '__MONTH_START__' || value === '__MONTH_END__' || \n                            value === '__YEAR_START__' || value === '__YEAR_END__';\n      const isCustomDate = !isPlaceholder && value;\n      \n      // Bestimme den aktuellen Platzhalter-Typ\n      let placeholderType = 'custom';\n      if (value === '__TODAY__') placeholderType = 'today';\n      else if (value === '__THIS_WEEK__') placeholderType = 'thisWeek';\n      else if (value === '__THIS_MONTH__') placeholderType = 'thisMonth';\n      else if (value === '__THIS_YEAR__') placeholderType = 'thisYear';\n      // Fallback für alte Platzhalter (für Rückwärtskompatibilität)\n      else if (value === '__WEEK_START__' || value === '__WEEK_END__') placeholderType = 'thisWeek';\n      else if (value === '__MONTH_START__' || value === '__MONTH_END__') placeholderType = 'thisMonth';\n      else if (value === '__YEAR_START__' || value === '__YEAR_END__') placeholderType = 'thisYear';\n      \n      return (\n        <div className=\"space-y-2\">\n          {/* Auswahl zwischen Datum und Platzhaltern */}\n          <select\n            className=\"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-xs bg-white dark:bg-gray-800 text-gray-900 dark:text-white w-full\"\n            value={placeholderType}\n            onChange={(e) => {\n              const selectedType = e.target.value;\n              \n              if (selectedType === 'today') {\n                onChange({ ...condition, value: '__TODAY__', operator: 'equals' });\n              } else if (selectedType === 'thisWeek') {\n                // ✅ PHASE 6: Eine einzige Bedingung mit __THIS_WEEK__\n                onChange({ ...condition, value: '__THIS_WEEK__', operator: 'equals' });\n              } else if (selectedType === 'thisMonth') {\n                // ✅ PHASE 6: Eine einzige Bedingung mit __THIS_MONTH__\n                onChange({ ...condition, value: '__THIS_MONTH__', operator: 'equals' });\n              } else if (selectedType === 'thisYear') {\n                // ✅ PHASE 6: Eine einzige Bedingung mit __THIS_YEAR__\n                onChange({ ...condition, value: '__THIS_YEAR__', operator: 'equals' });\n              } else {\n                // Benutzerdefiniert: Leere den Wert\n                onChange({ ...condition, value: '' });\n              }\n            }}\n          >\n            <option value=\"custom\">{t('filter.row.placeholders.custom', { defaultValue: 'Benutzerdefiniert' })}</option>\n            <option value=\"today\">{t('filter.row.placeholders.today', { defaultValue: 'Heute' })}</option>\n            <option value=\"thisWeek\">{t('filter.row.placeholders.thisWeek', { defaultValue: 'Diese Woche' })}</option>\n            <option value=\"thisMonth\">{t('filter.row.placeholders.thisMonth', { defaultValue: 'Dieser Monat' })}</option>\n            <option value=\"thisYear\">{t('filter.row.placeholders.thisYear', { defaultValue: 'Dieses Jahr' })}</option>\n          </select>\n          \n          {/* Datum-Input nur anzeigen wenn nicht Platzhalter */}\n          {!isPlaceholder && (\n            <input\n              type=\"date\"\n              className=\"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n              value={value as string || ''}\n              onChange={(e) => onChange({ ...condition, value: e.target.value })}\n            />\n          )}\n          \n          {/* Platzhalter-Anzeige */}\n          {isPlaceholder && (\n            <div className=\"px-2 py-1 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md text-blue-700 dark:text-blue-300 text-xs\">\n              📅 {value === '__TODAY__' && t('filter.row.placeholders.today', { defaultValue: 'Heute' })}\n              {value === '__WEEK_START__' || value === '__WEEK_END__' ? t('filter.row.placeholders.thisWeek', { defaultValue: 'Diese Woche' }) : ''}\n              {value === '__MONTH_START__' || value === '__MONTH_END__' ? t('filter.row.placeholders.thisMonth', { defaultValue: 'Dieser Monat' }) : ''}\n              {value === '__YEAR_START__' || value === '__YEAR_END__' ? t('filter.row.placeholders.thisYear', { defaultValue: 'Dieses Jahr' }) : ''}\n            </div>\n          )}\n        </div>\n      );\n    }\n    \n    // Standard-Texteingabe für alle anderen Felder\n    return (\n      <input\n        type=\"text\"\n        className=\"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs bg-white dark:bg-gray-800 text-gray-900 dark:text-white w-full\"\n        value={value as string || ''}\n        onChange={(e) => onChange(e.target.value)}\n        placeholder={t('filter.row.enterValue')}\n      />\n    );\n  };\n  \n  return (\n    <div className=\"flex items-center gap-2\">\n      {/* Spalten-Auswahl - feste Breite */}\n      <div className=\"w-[180px] flex-shrink-0\">\n        <select\n          className=\"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs bg-white dark:bg-gray-800 text-gray-900 dark:text-white w-full\"\n          value={condition.column}\n          onChange={(e) => onChange({ \n            ...condition, \n            column: e.target.value, \n            operator: operators[0]?.value || 'equals',\n            value: null  // ✅ VALUE ZURÜCKSETZEN beim Spaltenwechsel\n          })}\n        >\n          <option value=\"\">{t('filter.row.selectColumn')}</option>\n          {columns.map((column) => (\n            <option key={column.id} value={column.id}>\n              {column.label}\n            </option>\n          ))}\n        </select>\n      </div>\n      \n      {/* Operator-Auswahl - feste Breite */}\n      <div className=\"w-[140px] flex-shrink-0\">\n        <select\n          className=\"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs bg-white dark:bg-gray-800 text-gray-900 dark:text-white w-full\"\n          value={condition.operator}\n          onChange={(e) => onChange({ ...condition, operator: e.target.value })}\n        >\n          {operators.map((op) => (\n            <option key={op.value} value={op.value}>\n              {op.label}\n            </option>\n          ))}\n        </select>\n      </div>\n      \n      {/* Wert-Eingabe - flexibel */}\n      <div className=\"flex-1 min-w-0\">\n        {renderValueInput(\n          condition.column, \n          condition.operator, \n          condition.value, \n          (value) => onChange({ ...condition, value })\n        )}\n      </div>\n      \n      \n      {/* Aktions-Buttons - feste Breite mit Platzhalter */}\n      <div className=\"w-[60px] flex-shrink-0 flex gap-1 justify-end\">\n        {/* Löschen-Button */}\n        <div className=\"relative group\">\n          <button\n            type=\"button\"\n            onClick={onDelete}\n            className=\"p-1 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-500 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed\"\n            disabled={isFirst && !isLast}\n          >\n            <TrashIcon className=\"h-4 w-4\" />\n          </button>\n          <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n            {t('filter.row.removeCondition')}\n          </div>\n        </div>\n        \n        {/* Hinzufügen-Button oder Platzhalter */}\n        {isLast ? (\n          <div className=\"relative group\">\n            <button\n              type=\"button\"\n              onClick={onAdd}\n              className=\"p-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-500 rounded-md transition-colors\"\n            >\n              <PlusCircleIcon className=\"h-4 w-4\" />\n            </button>\n            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n              {t('filter.row.addCondition')}\n            </div>\n          </div>\n        ) : (\n          <div className=\"w-[28px] flex-shrink-0\" /> // Platzhalter für vertikale Bündigkeit\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default FilterRow; ","import React, { useState, useRef, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { PlusIcon } from '@heroicons/react/24/outline';\n\ninterface FilterLogicalOperatorProps {\n  operator: 'AND' | 'OR';\n  onChange: (operator: 'AND' | 'OR') => void;\n}\n\nconst FilterLogicalOperator: React.FC<FilterLogicalOperatorProps> = ({ operator, onChange }) => {\n  const { t } = useTranslation();\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen]);\n\n  const handleSelect = (value: 'AND' | 'OR') => {\n    onChange(value);\n    setIsOpen(false);\n  };\n\n  return (\n    <div className=\"flex items-center justify-start my-4 relative pl-[180px]\" ref={dropdownRef}>\n      <button\n        type=\"button\"\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"px-0.5 py-0.5 border border-gray-300 dark:border-gray-600 rounded-md text-xs font-medium bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-center flex items-center justify-center gap-1\"\n        style={{ width: '42px', minWidth: '42px', maxWidth: '42px', overflow: 'hidden' }}\n      >\n        {operator === 'AND' ? (\n          <>\n            <PlusIcon className=\"h-3 w-3 flex-shrink-0\" />\n            <span className=\"truncate\">{t('filter.logicalOperators.and')}</span>\n          </>\n        ) : (\n          <>\n            <span className=\"text-xs\">∨</span>\n            <span className=\"truncate\">{t('filter.logicalOperators.or')}</span>\n          </>\n        )}\n      </button>\n      \n      {isOpen && (\n        <div className=\"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50 min-w-[42px]\">\n          <button\n            type=\"button\"\n            onClick={() => handleSelect('AND')}\n            className={`w-full px-2 py-1 text-xs text-left hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-1.5 ${\n              operator === 'AND' ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'text-gray-700 dark:text-gray-300'\n            }`}\n          >\n            <PlusIcon className=\"h-3 w-3 flex-shrink-0\" />\n            <span>{t('filter.logicalOperators.and')}</span>\n          </button>\n          <button\n            type=\"button\"\n            onClick={() => handleSelect('OR')}\n            className={`w-full px-2 py-1 text-xs text-left hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-1.5 ${\n              operator === 'OR' ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'text-gray-700 dark:text-gray-300'\n            }`}\n          >\n            <span className=\"text-xs\">∨</span>\n            <span>{t('filter.logicalOperators.or')}</span>\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FilterLogicalOperator; ","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { CheckIcon, XMarkIcon, ArrowPathIcon, BookmarkIcon } from '@heroicons/react/24/outline';\nimport FilterRow, { FilterCondition } from './FilterRow.tsx';\nimport FilterLogicalOperator from './FilterLogicalOperator.tsx';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface TableColumn {\n  id: string;\n  label: string;\n}\n\ninterface FilterPaneProps {\n  columns: TableColumn[];\n  onApply: (conditions: FilterCondition[], logicalOperators: ('AND' | 'OR')[]) => void;\n  onReset: () => void;\n  savedConditions?: FilterCondition[];\n  savedOperators?: ('AND' | 'OR')[];\n  tableId: string; // Tabellen-ID für die gespeicherten Filter\n}\n\nconst FilterPane: React.FC<FilterPaneProps> = ({ \n  columns,\n  onApply,\n  onReset,\n  savedConditions,\n  savedOperators,\n  tableId\n}) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  // Initialisiere mit einem leeren Filter, wenn keine gespeicherten Filter vorhanden sind\n  const [conditions, setConditions] = useState<FilterCondition[]>(\n    savedConditions && savedConditions.length > 0 \n      ? savedConditions \n      : [{ column: '', operator: 'equals', value: null }]\n  );\n  \n  // Initialisiere mit AND als Standard-Operator\n  const [logicalOperators, setLogicalOperators] = useState<('AND' | 'OR')[]>(\n    savedOperators && savedOperators.length > 0\n      ? savedOperators\n      : []\n  );\n\n  // Zustand für das Speichern von Filtern\n  const [showSaveInput, setShowSaveInput] = useState(false);\n  const [filterName, setFilterName] = useState('');\n  \n  // Lade bestehende Filter, um Konflikte mit Standardfiltern zu vermeiden\n  const [existingFilters, setExistingFilters] = useState<{ id: number, name: string }[]>([]);\n  \n  useEffect(() => {\n    // ✅ PHASE 8: Memory Leak Prevention - AbortController\n    const abortController = new AbortController();\n    \n    const fetchExistingFilters = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        \n        if (!token) {\n          return;\n        }\n        \n        const response = await axiosInstance.get(\n          API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(tableId),\n          { signal: abortController.signal }\n        );\n        \n        setExistingFilters(response.data.map((filter: any) => ({ id: filter.id, name: filter.name })));\n      } catch (err: any) {\n        if (err.name !== 'AbortError') {\n        console.error(t('filter.loadError'), err);\n        }\n      }\n    };\n    \n    fetchExistingFilters();\n    \n    // ✅ PHASE 8: Memory Leak Prevention - Cleanup\n    return () => {\n      abortController.abort();\n    };\n  }, [tableId]);\n  \n  // Initialisiere Bedingungen und Operatoren nur wenn sich die Props von außen ändern\n  // Verwende useRef, um die vorherigen Werte zu speichern und nur bei echten Änderungen zu aktualisieren\n  const prevSavedConditionsRef = useRef<FilterCondition[] | undefined>(savedConditions);\n  const prevSavedOperatorsRef = useRef<('AND' | 'OR')[] | undefined>(savedOperators);\n  \n  // ✅ MEMORY: Verwende shallow comparison statt JSON.stringify\n  const areConditionsEqual = (a: FilterCondition[] | undefined, b: FilterCondition[] | undefined): boolean => {\n    if (!a && !b) return true;\n    if (!a || !b) return false;\n    if (a.length !== b.length) return false;\n    return a.every((item, index) => {\n      const other = b[index];\n      return item.column === other.column && \n             item.operator === other.operator && \n             item.value === other.value;\n    });\n  };\n\n  const areOperatorsEqual = (a: ('AND' | 'OR')[] | undefined, b: ('AND' | 'OR')[] | undefined): boolean => {\n    if (!a && !b) return true;\n    if (!a || !b) return false;\n    if (a.length !== b.length) return false;\n    return a.every((item, index) => item === b[index]);\n  };\n  \n  useEffect(() => {\n    // ✅ MEMORY: Verwende shallow comparison statt JSON.stringify\n    const conditionsChanged = !areConditionsEqual(prevSavedConditionsRef.current, savedConditions);\n    const operatorsChanged = !areOperatorsEqual(prevSavedOperatorsRef.current, savedOperators);\n    \n    if (conditionsChanged && savedConditions) {\n      if (savedConditions.length > 0) {\n        setConditions(savedConditions);\n      } else if (savedConditions.length === 0) {\n        // Reset: Setze auf Standard\n        setConditions([{ column: '', operator: 'equals', value: null }]);\n      }\n      prevSavedConditionsRef.current = savedConditions;\n    }\n    \n    if (operatorsChanged && savedOperators !== undefined) {\n      setLogicalOperators(savedOperators);\n      prevSavedOperatorsRef.current = savedOperators;\n    }\n  }, [savedConditions, savedOperators]);\n  \n  const handleConditionChange = (index: number, newCondition: FilterCondition) => {\n    const newConditions = [...conditions];\n    newConditions[index] = newCondition;\n    setConditions(newConditions);\n  };\n  \n  const handleOperatorChange = (index: number, newOperator: 'AND' | 'OR') => {\n    const newOperators = [...logicalOperators];\n    newOperators[index] = newOperator;\n    setLogicalOperators(newOperators);\n  };\n  \n  const handleAddCondition = () => {\n    setConditions([...conditions, { column: '', operator: 'equals', value: null }]);\n    \n    // Füge standardmäßig einen AND-Operator hinzu\n    if (conditions.length > 0) {\n      setLogicalOperators([...logicalOperators, 'AND']);\n    }\n  };\n  \n  const handleDeleteCondition = (index: number) => {\n    // Entferne die Bedingung\n    const newConditions = [...conditions];\n    newConditions.splice(index, 1);\n    setConditions(newConditions);\n    \n    // Entferne auch den entsprechenden Operator, falls vorhanden\n    if (index > 0) {\n      const newOperators = [...logicalOperators];\n      newOperators.splice(index - 1, 1);\n      setLogicalOperators(newOperators);\n    }\n  };\n  \n  const handleApplyFilters = () => {\n    // Nur gültige Bedingungen senden (bei denen mindestens eine Spalte ausgewählt ist)\n    const validConditions = conditions.filter(c => c.column !== '');\n    onApply(validConditions, logicalOperators);\n  };\n  \n  const handleResetFilters = () => {\n    setConditions([{ column: '', operator: 'equals', value: null }]);\n    setLogicalOperators([]);\n    onReset();\n  };\n\n  // Funktion zum Speichern des aktuellen Filters\n  const handleSaveFilter = async () => {\n    if (!filterName.trim()) {\n      showMessage(t('filter.noName'), 'error');\n      return;\n    }\n\n    // Prüfe, ob der Name ein reservierter Standardfilter-Name ist\n    if (filterName === 'Archiv' || filterName === 'Aktuell') {\n      showMessage(t('filter.reservedNames'), 'error');\n      return;\n    }\n\n    // Prüfe, ob ein Standardfilter mit diesem Namen bereits existiert\n    const standardFilterExists = existingFilters.some(filter => \n      (filter.name === 'Archiv' || filter.name === 'Aktuell') && filter.name === filterName\n    );\n    \n    if (standardFilterExists) {\n      showMessage(t('filter.cannotOverwriteStandard'), 'error');\n      return;\n    }\n\n    // Nur gültige Bedingungen senden\n    const validConditions = conditions.filter(c => c.column !== '');\n    \n    if (validConditions.length === 0) {\n      showMessage(t('filter.noConditions'), 'error');\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        showMessage(t('filter.notAuthenticated'), 'error');\n        return;\n      }\n      \n      const response = await axiosInstance.post(\n        API_ENDPOINTS.SAVED_FILTERS.BASE,\n        {\n          tableId,\n          name: filterName,\n          conditions: validConditions,\n          operators: logicalOperators\n        }\n      );\n      \n      showMessage(t('filter.saveSuccess'), 'success');\n      setShowSaveInput(false);\n      setFilterName('');\n      \n      // Aktualisiere die Filter-Tags sofort, damit der neue Filter angezeigt wird\n      if ((window as any).refreshSavedFilters) {\n        (window as any).refreshSavedFilters();\n      }\n    } catch (err) {\n      console.error('Fehler beim Speichern des Filters:', err);\n      showMessage(t('filter.saveError'), 'error');\n    }\n  };\n  \n  return (\n    <div className=\"mt-4 p-4 bg-white dark:bg-gray-800 rounded-lg\">\n      <h3 className=\"text-base font-medium text-gray-700 dark:text-gray-200 mb-3\">{t('filter.title')}</h3>\n      \n      <div className=\"space-y-2\">\n        {conditions.map((condition, index) => (\n          <React.Fragment key={index}>\n            <FilterRow\n              condition={condition}\n              onChange={(newCondition) => handleConditionChange(index, newCondition)}\n              onDelete={() => handleDeleteCondition(index)}\n              onAdd={handleAddCondition}\n              columns={columns}\n              isFirst={index === 0}\n              isLast={index === conditions.length - 1}\n            />\n            \n            {/* Operator zwischen Bedingungen einfügen (aber nicht nach der letzten) */}\n            {index < conditions.length - 1 && (\n              <FilterLogicalOperator\n                operator={logicalOperators[index] || 'AND'}\n                onChange={(newOperator) => handleOperatorChange(index, newOperator)}\n              />\n            )}\n          </React.Fragment>\n        ))}\n      </div>\n      \n      {/* Speicher-Interface */}\n      {showSaveInput ? (\n        <div className=\"mt-4 flex gap-2 items-center\">\n          <input\n            type=\"text\"\n            className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white flex-grow\"\n            placeholder={t('filter.filterName')}\n            value={filterName}\n            onChange={(e) => setFilterName(e.target.value)}\n          />\n          <button\n            onClick={handleSaveFilter}\n            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors\"\n            title={t('filter.saveFilter')}\n          >\n            <BookmarkIcon className=\"h-5 w-5\" />\n          </button>\n          <button\n            onClick={() => setShowSaveInput(false)}\n            className=\"p-2 bg-white text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700 transition-colors\"\n            title={t('filter.cancel')}\n          >\n            <XMarkIcon className=\"h-5 w-5\" />\n          </button>\n        </div>\n      ) : (\n        <div className=\"flex justify-end gap-2 mt-4\">\n          <button\n            onClick={handleResetFilters}\n            className=\"p-2 bg-white text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700 transition-colors\"\n            title={t('filter.reset')}\n          >\n            <ArrowPathIcon className=\"h-5 w-5\" />\n          </button>\n          <button\n            onClick={() => setShowSaveInput(true)}\n            className=\"p-2 bg-white text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700 transition-colors\"\n            title={t('filter.save')}\n          >\n            <BookmarkIcon className=\"h-5 w-5\" />\n          </button>\n          <button\n            onClick={handleApplyFilters}\n            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors\"\n            title={t('filter.apply')}\n          >\n            <CheckIcon className=\"h-5 w-5\" />\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default FilterPane; ","import React, { useState, useEffect, useMemo, useRef, useLayoutEffect, useCallback } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useTranslation } from 'react-i18next';\nimport { XMarkIcon, ChevronDownIcon, PencilIcon, CheckIcon, TrashIcon } from '@heroicons/react/24/outline';\nimport { FilterCondition } from './FilterRow.tsx';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport useMessage from '../hooks/useMessage.ts';\nimport { useFilterContext } from '../contexts/FilterContext.tsx';\nimport { logger } from '../utils/logger.ts';\nimport { useResizeObserver } from '../hooks/useResizeObserver.ts';\n\ninterface SavedFilter {\n  id: number;\n  name: string;\n  tableId: string;\n  conditions: FilterCondition[];\n  operators: ('AND' | 'OR')[];\n  groupId?: number | null;\n  order?: number;\n  createdAt?: string;\n  updatedAt?: string;\n}\n\ninterface FilterGroup {\n  id: number;\n  name: string;\n  tableId: string;\n  order: number;\n  filters: SavedFilter[];\n  createdAt: string;\n  updatedAt: string;\n}\n\ninterface SavedFilterTagsProps {\n  tableId: string;\n  onSelectFilter: (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => void;\n  onReset: () => void;\n  activeFilterName?: string;\n  selectedFilterId?: number | null;\n  onFilterChange?: (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => void;\n  defaultFilterName?: string;\n}\n\nconst SavedFilterTags: React.FC<SavedFilterTagsProps> = ({ \n  tableId, \n  onSelectFilter, \n  onReset,\n  activeFilterName,\n  selectedFilterId,\n  onFilterChange,\n  defaultFilterName = 'Heute'\n}) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const filterContext = useFilterContext();\n  \n  // Übersetze Filter-Namen beim Anzeigen\n  const translateFilterName = (name: string): string => {\n    // Standard-Filter übersetzen (auch wenn als Übersetzungsschlüssel gespeichert)\n    if (name === 'Archiv' || name === 'tasks.filters.archive' || name === 'requests.filters.archiv') {\n      return tableId === 'worktracker-todos' ? t('tasks.filters.archive') : t('requests.filters.archiv');\n    }\n    if (name === 'Aktuell' || name === 'tasks.filters.current' || name === 'requests.filters.aktuell') {\n      return tableId === 'worktracker-todos' ? t('tasks.filters.current') : t('requests.filters.aktuell');\n    }\n    if (name === 'Heute' || name === 'Hoy') return t('common.today', 'Heute');\n    if (name === 'Woche') return t('common.week', 'Woche');\n    if (name === 'Aktive') return t('common.active', 'Aktive');\n    if (name === 'Alle' || name === 'Todos') return t('common.all', 'Alle');\n    // Für alle anderen Namen, gib sie unverändert zurück (z.B. Client-Namen)\n    return name;\n  };\n  \n  // Übersetze Filtergruppen-Namen beim Anzeigen\n  const translateGroupName = (groupName: string): string => {\n    // Standard-Filtergruppen übersetzen\n    if (groupName === 'Roles' || groupName === 'Rollen') {\n      return t('filter.row.groups.roles', 'Rollen');\n    }\n    if (groupName === 'Users' || groupName === 'Benutzer' || groupName === 'Usuarios') {\n      return t('filter.row.groups.users', 'Benutzer');\n    }\n    // Für alle anderen Gruppennamen, gib sie unverändert zurück\n    return groupName;\n  };\n  \n  // ✅ PERFORMANCE: Verwende Filter-Context statt lokaler State\n  // Filter werden zentral geladen und für alle Komponenten bereitgestellt\n  const savedFilters = filterContext.getFilters(tableId);\n  const filterGroups = filterContext.getFilterGroups(tableId);\n  const loading = filterContext.isLoading(tableId);\n  const error = filterContext.getError(tableId);\n  const [recentClientNames, setRecentClientNames] = useState<string[]>([]);\n  \n  // Responsive Tag-Display States (optimiert)\n  const containerRef = useRef<HTMLDivElement>(null);\n  const tagRefs = useRef<Map<number, HTMLDivElement>>(new Map());\n  const [visibleTagCount, setVisibleTagCount] = useState(4); // Fallback für SSR\n  const [containerWidth, setContainerWidth] = useState(0);\n  const [measuredTagWidths, setMeasuredTagWidths] = useState<Map<number, number>>(new Map());\n  const [isMeasuring, setIsMeasuring] = useState(true); // Initial alle Tags rendern für Messung\n  \n  // Dropdown State für überlaufende Tags\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  \n  // Drag & Drop States\n  const [draggedFilterId, setDraggedFilterId] = useState<number | null>(null);\n  const [dragOverFilterId, setDragOverFilterId] = useState<number | null>(null);\n  const [dragOverGroupId, setDragOverGroupId] = useState<number | 'new-group' | null>(null);\n  \n  // Gruppen-Dropdown States (pro Gruppe)\n  const [openGroupDropdowns, setOpenGroupDropdowns] = useState<Set<number>>(new Set());\n  \n  // Refs für Gruppen-Dropdowns (für Click-Outside Detection)\n  const groupDropdownRefs = useRef<Map<number, HTMLDivElement>>(new Map());\n  // Refs für Buttons (für Position-Berechnung bei Portal)\n  const groupButtonRefs = useRef<Map<number, HTMLButtonElement>>(new Map());\n  // Positionen für Portal-Dropdowns\n  const [dropdownPositions, setDropdownPositions] = useState<Map<number, { top: number; left: number }>>(new Map());\n\n  const setGroupDropdownRef = (groupId: number, element: HTMLDivElement | null) => {\n    if (element) {\n      groupDropdownRefs.current.set(groupId, element);\n    } else {\n      groupDropdownRefs.current.delete(groupId);\n    }\n  };\n\n  const setGroupButtonRef = (groupId: number, element: HTMLButtonElement | null) => {\n    if (element) {\n      groupButtonRefs.current.set(groupId, element);\n    } else {\n      groupButtonRefs.current.delete(groupId);\n    }\n  };\n\n  // Berechne Position für Portal-Dropdowns\n  useEffect(() => {\n    const updatePositions = () => {\n      const newPositions = new Map<number, { top: number; left: number }>();\n      openGroupDropdowns.forEach(groupId => {\n        const button = groupButtonRefs.current.get(groupId);\n        if (button) {\n          const rect = button.getBoundingClientRect();\n          newPositions.set(groupId, {\n            top: rect.bottom + window.scrollY + 4, // 4px = mt-1\n            left: rect.left + window.scrollX\n          });\n        }\n      });\n      setDropdownPositions(newPositions);\n    };\n\n    if (openGroupDropdowns.size > 0) {\n      updatePositions();\n      window.addEventListener('scroll', updatePositions, true);\n      window.addEventListener('resize', updatePositions);\n    }\n\n    return () => {\n      window.removeEventListener('scroll', updatePositions, true);\n      window.removeEventListener('resize', updatePositions);\n    };\n  }, [openGroupDropdowns]);\n  \n  // Gruppen-Umbenennung States\n  const [editingGroupId, setEditingGroupId] = useState<number | null>(null);\n  const [editingGroupName, setEditingGroupName] = useState<string>('');\n\n  // ✅ PERFORMANCE: Verwende Filter-Context refreshFilters statt lokaler Implementierung\n  const refreshFilters = useCallback(async () => {\n    await filterContext.refreshFilters(tableId);\n  }, [tableId, filterContext]);\n\n  // Bereinigungsfunktion für überschüssige Client-Filter\n  const cleanupExcessiveClientFilters = useCallback(async (currentClientNames: string[]) => {\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(tableId));\n      const existingFilters = response.data;\n      \n      // Finde alle Client-Filter (Filter deren Name in recentClientNames ist)\n      const clientFilters = existingFilters.filter((filter: SavedFilter) => \n        currentClientNames.includes(filter.name)\n      );\n      \n      // Wenn mehr als 5 Client-Filter vorhanden sind, lösche die ältesten\n      if (clientFilters.length > 5) {\n        const filtersToDelete = clientFilters\n          .sort((a: any, b: any) => new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime())\n          .slice(0, clientFilters.length - 5);\n        \n        for (const filterToDelete of filtersToDelete) {\n          await axiosInstance.delete(API_ENDPOINTS.SAVED_FILTERS.BY_ID(filterToDelete.id));\n        }\n        \n        // Refresh die Filter-Liste\n        await refreshFilters();\n      }\n    } catch (error) {\n      if (process.env.NODE_ENV === 'development') {\n        console.error('Fehler beim Bereinigen der Client-Filter:', error);\n      }\n    }\n  }, [tableId, refreshFilters]);\n\n  // Recent Clients laden (mit useCallback für stabilen Event-Listener)\n  const loadRecentClients = useCallback(async () => {\n    if (tableId === 'consultations-table') {\n      try {\n        if (process.env.NODE_ENV === 'development') {\n          logger.log('🔄 SavedFilterTags: Loading recent clients...');\n        }\n        const response = await axiosInstance.get(API_ENDPOINTS.CLIENTS.RECENT);\n        // Verwende die Reihenfolge der API-Antwort direkt (Backend sortiert bereits richtig)\n        const clientNames = response.data.map((client: any) => client.name);\n        if (process.env.NODE_ENV === 'development') {\n          logger.log('📋 SavedFilterTags: Recent client names:', clientNames);\n        }\n        setRecentClientNames(clientNames);\n        \n        // Auto-Bereinigung: Lösche überschüssige Recent Client Filter (LRU-basiert)\n        await cleanupExcessiveClientFilters(clientNames);\n      } catch (error) {\n        if (process.env.NODE_ENV === 'development') {\n          console.error('❌ SavedFilterTags: Error loading recent clients:', error);\n        }\n        // Stille Behandlung - normale Situation wenn noch keine Clients beraten wurden\n      }\n    }\n  }, [tableId, cleanupExcessiveClientFilters]);\n\n  // Event-Listener für Consultation-Änderungen (z.B. neue Beratung gestartet)\n  useEffect(() => {\n    const handleConsultationChanged = () => {\n      if (process.env.NODE_ENV === 'development') {\n        logger.log('🔔 SavedFilterTags: Received consultationChanged event');\n      }\n      loadRecentClients();\n    };\n\n    window.addEventListener('consultationChanged', handleConsultationChanged);\n    \n    return () => {\n      window.removeEventListener('consultationChanged', handleConsultationChanged);\n    };\n  }, [loadRecentClients]);\n\n  // Lade Recent Clients für Consultation-Tabelle beim ersten Render\n  useEffect(() => {\n    loadRecentClients();\n  }, [loadRecentClients]);\n\n  // ✅ PERFORMANCE: Lade Filter über Filter-Context (verhindert doppelte Ladung)\n  // ✅ KRITISCH: Ref verhindert mehrfache Anwendung des Default-Filters (Endlosschleife)\n  const { loadFilters } = filterContext;\n  \n  useEffect(() => {\n    // ✅ Lade Filter über Filter-Context (nur für UI - Filter-Tags anzeigen)\n    // Komponenten wenden Default-Filter selbst an (Standard-Pattern)\n    loadFilters(tableId);\n  }, [tableId, loadFilters]);\n\n  // ✅ PERFORMANCE: Cleanup nicht mehr nötig - FilterContext verwaltet State zentral\n  // Filter werden automatisch vom FilterContext verwaltet\n\n  // Expose refresh function für Parent-Komponenten\n  useEffect(() => {\n    // Erstelle eine globale Referenz für externe Updates\n    (window as any).refreshSavedFilters = refreshFilters;\n    return () => {\n      delete (window as any).refreshSavedFilters;\n    };\n  }, [refreshFilters]);\n\n  // Dropdown schließen bei Klick außerhalb\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (isDropdownOpen && !(event.target as Element).closest('.relative')) {\n        setIsDropdownOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [isDropdownOpen]);\n\n  // Click-Outside Handler für Gruppen-Dropdowns\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      // Prüfe alle offenen Gruppen-Dropdowns\n      const clickedOutsideAll = Array.from(openGroupDropdowns).every(groupId => {\n        const dropdownElement = groupDropdownRefs.current.get(groupId);\n        if (!dropdownElement) return true;\n        \n        // Prüfe ob Klick innerhalb des Dropdown-Containers oder des Buttons\n        const buttonElement = (event.target as Element).closest(`[data-group-id=\"${groupId}\"]`);\n        return !dropdownElement.contains(event.target as Node) && !buttonElement;\n      });\n\n      if (clickedOutsideAll && openGroupDropdowns.size > 0) {\n        setOpenGroupDropdowns(new Set());\n      }\n    };\n\n    if (openGroupDropdowns.size > 0) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [openGroupDropdowns]);\n  \n  // Wähle einen gespeicherten Filter aus\n  const handleSelectFilter = (filter: SavedFilter) => {\n    if (process.env.NODE_ENV === 'development') {\n      logger.log('🔄 SavedFilterTags: handleSelectFilter called', {\n        filterName: filter.name,\n        filterId: filter.id,\n        conditionsCount: filter.conditions?.length || 0,\n        operatorsCount: filter.operators?.length || 0,\n        hasOnFilterChange: !!onFilterChange\n      });\n    }\n    \n    if (onFilterChange) {\n      // Controlled component\n      if (process.env.NODE_ENV === 'development') {\n        logger.log('📋 SavedFilterTags: Calling onFilterChange (controlled)');\n      }\n      onFilterChange(filter.name, filter.id, filter.conditions, filter.operators);\n    } else {\n      // Backward compatibility - uncontrolled component\n      if (process.env.NODE_ENV === 'development') {\n        logger.log('📋 SavedFilterTags: Calling onSelectFilter (uncontrolled)');\n      }\n      onSelectFilter(filter.conditions, filter.operators);\n    }\n  };\n  \n  // Lösche einen gespeicherten Filter\n  const handleDeleteFilter = async (e: React.MouseEvent, filterId: number) => {\n    e.stopPropagation();\n    \n    const filterToDelete = savedFilters.find(filter => filter.id === filterId);\n    if (filterToDelete && isStandardFilter(filterToDelete.name)) {\n      showMessage(t('filter.cannotDeleteStandard', { defaultValue: 'Standard-Filter können nicht gelöscht werden' }), 'error');\n      return;\n    }\n    \n    try {\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        showMessage(t('filter.notAuthenticated', { defaultValue: 'Nicht authentifiziert' }), 'error');\n        return;\n      }\n      \n      await axiosInstance.delete(API_ENDPOINTS.SAVED_FILTERS.BY_ID(filterId));\n      \n      // ✅ PERFORMANCE: Aktualisiere Filter über Filter-Context\n      await filterContext.refreshFilters(tableId);\n      \n      // Wenn der aktuell ausgewählte Filter gelöscht wurde\n      if (selectedFilterId === filterId || (!onFilterChange && filterId)) {\n        if (onFilterChange) {\n          // Controlled: Parent entscheidet was passiert\n          onFilterChange('', null, [], []);\n        } else {\n          // Uncontrolled: Reset\n          onReset();\n        }\n      }\n      \n      showMessage(t('filter.deleteSuccess', { defaultValue: 'Filter erfolgreich gelöscht' }), 'success');\n    } catch (err) {\n      if (process.env.NODE_ENV === 'development') {\n        console.error('Fehler beim Löschen des Filters:', err);\n      }\n      showMessage(t('filter.deleteError', { defaultValue: 'Fehler beim Löschen des Filters' }), 'error');\n    }\n  };\n  \n  // Prüfen, ob ein Filter ein Standard-Filter ist\n  const isStandardFilter = (filterName: string) => {\n    // Erkenne auch Übersetzungsschlüssel\n    const standardFilterNames = [\n      'Archiv', 'Aktuell', 'Aktive', 'Alle', 'Heute', 'Woche', 'Hoy', 'Todos',\n      'tasks.filters.archive', 'tasks.filters.current',\n      'requests.filters.archiv', 'requests.filters.aktuell'\n    ];\n    \n    if (standardFilterNames.includes(filterName)) {\n      return true;\n    }\n    \n    if (tableId === 'consultations-table') {\n      if (filterName === 'Archiv' || filterName === 'Heute' || filterName === 'Woche') {\n        return true;\n      }\n      if (recentClientNames.includes(filterName)) {\n        return true;\n      }\n    }\n    \n    return false;\n  };\n\n  // Sortiere Filter nach gewünschter Reihenfolge (nur nicht-gruppierte Filter)\n  const sortedFilters = useMemo(() => {\n    // Filtere nur nicht-gruppierte Filter heraus\n    const ungroupedFilters = savedFilters.filter(f => f != null && !f.groupId);\n    \n    // Sortierung für Consultations\n    if (tableId === 'consultations-table') {\n      if (process.env.NODE_ENV === 'development') {\n        logger.log('🔧 SavedFilterTags: Sorting filters...');\n        logger.log('📋 SavedFilterTags: recentClientNames:', recentClientNames);\n        logger.log('🗂️ SavedFilterTags: savedFilters:', ungroupedFilters.map(f => f.name));\n      }\n\n      const heute = ungroupedFilters.find(f => f != null && f.name === 'Heute');\n      const woche = ungroupedFilters.find(f => f != null && f.name === 'Woche');\n      const archiv = ungroupedFilters.find(f => f != null && f.name === 'Archiv');\n      \n      // Recent Client Filter in der exakten Reihenfolge der Recent Clients API sortieren\n      const sortedRecentClientFilters = recentClientNames\n        .map(clientName => ungroupedFilters.find(f => f != null && f.name === clientName))\n        .filter(filter => filter != null) as SavedFilter[];\n      \n      if (process.env.NODE_ENV === 'development') {\n        logger.log('✅ SavedFilterTags: sortedRecentClientFilters:', sortedRecentClientFilters.map(f => f.name));\n      }\n      \n      const customFilters = ungroupedFilters.filter(f => \n        f != null && \n        !['Heute', 'Woche', 'Archiv'].includes(f.name) && \n        !recentClientNames.includes(f.name)\n      );\n      \n      if (process.env.NODE_ENV === 'development') {\n        logger.log('🔧 SavedFilterTags: customFilters:', customFilters.map(f => f.name));\n      }\n\n      const orderedFilters: SavedFilter[] = [];\n      \n      if (heute) orderedFilters.push(heute);\n      if (woche) orderedFilters.push(woche);\n      orderedFilters.push(...sortedRecentClientFilters);\n      orderedFilters.push(...customFilters);\n      if (archiv) orderedFilters.push(archiv);\n      \n      if (process.env.NODE_ENV === 'development') {\n        logger.log('🎯 SavedFilterTags: Final filter order:', orderedFilters.map(f => f.name));\n      }\n      \n      return orderedFilters;\n    }\n\n    // Sortierung für Requests/Tasks - Aktuell zuerst, dann Archiv\n    if (tableId === 'requests-table' || tableId === 'worktracker-todos') {\n      const aktuell = ungroupedFilters.find(f => f != null && f.name === 'Aktuell');\n      const archiv = ungroupedFilters.find(f => f != null && f.name === 'Archiv');\n      \n      // Rest der Filter (außer Aktuell und Archiv)\n      const customFilters = ungroupedFilters.filter(f => \n        f != null && f.name !== 'Aktuell' && f.name !== 'Archiv'\n      );\n      \n      const orderedFilters: SavedFilter[] = [];\n      \n      // Aktuell immer zuerst\n      if (aktuell) orderedFilters.push(aktuell);\n      // Dann custom Filters\n      orderedFilters.push(...customFilters);\n      // Archiv immer zuletzt\n      if (archiv) orderedFilters.push(archiv);\n      \n      return orderedFilters;\n    }\n\n    // Für alle anderen Tabellen: Keine Sortierung\n    return ungroupedFilters;\n  }, [savedFilters, recentClientNames, tableId]);\n\n  // Optimistische Filter-Anzeige für bessere UX (MOVED BEFORE EARLY RETURNS)\n  const showOptimisticFilters = savedFilters.length === 0 && loading;\n  \n  const optimisticFilters = useMemo(() => {\n    if (!showOptimisticFilters) return [];\n    return Array(3).fill(null).map((_, i) => ({\n      id: `placeholder-${i}`,\n      name: i === 0 ? 'Heute' : i === 1 ? 'Woche' : '████████',\n      isPlaceholder: true,\n      tableId,\n      conditions: [],\n      operators: []\n    }));\n  }, [showOptimisticFilters, tableId]);\n\n  const displayFilters = showOptimisticFilters ? optimisticFilters : sortedFilters.filter(f => f != null);\n  // Beim Messen: Alle Tags rendern, sonst nur sichtbare\n  const currentVisibleCount = showOptimisticFilters \n    ? optimisticFilters.length \n    : (isMeasuring ? sortedFilters.length : visibleTagCount);\n\n  // Tag-Breiten-Berechnung: Verwende gemessene Breiten wenn verfügbar, sonst aggressive Schätzung\n  const averageTagWidth = useMemo(() => {\n    if (sortedFilters.length === 0) return 75;\n    \n    // Wenn wir gemessene Breiten haben, verwende diese\n    if (measuredTagWidths.size > 0) {\n      const widths = Array.from(measuredTagWidths.values());\n      return widths.reduce((sum, width) => sum + width, 0) / widths.length;\n    }\n    \n    // Fallback: Aggressivere Schätzung (4.5px pro Zeichen - optimistischer für große Bildschirme)\n    return sortedFilters\n      .filter(filter => filter != null)\n      .reduce((sum, filter) => {\n        // Aggressivere Schätzung: ~4.5px pro Zeichen + 24px Padding + optional Delete-Button\n        const deleteButtonWidth = !isStandardFilter(filter.name) ? 18 : 0;\n        return sum + (filter.name.length * 4.5 + 24 + deleteButtonWidth);\n      }, 0) / sortedFilters.filter(filter => filter != null).length;\n  }, [sortedFilters, measuredTagWidths]);\n\n  // ✅ FIX: Berechne tatsächlich verfügbare Breite unter Berücksichtigung von negativen Margins\n  // Einfache Lösung: Verwende Parent-Container-Breite und kompensiere negative Margins\n  const getAvailableWidth = useCallback(() => {\n    if (!containerRef.current) return 0;\n    \n    const container = containerRef.current;\n    const parentElement = container.parentElement;\n    \n    if (!parentElement) {\n      return container.clientWidth;\n    }\n    \n    const parentStyles = window.getComputedStyle(parentElement);\n    const parentMarginLeft = parseFloat(parentStyles.marginLeft) || 0;\n    const parentMarginRight = parseFloat(parentStyles.marginRight) || 0;\n    \n    // Wenn Parent negative Margins hat, kompensiere diese\n    if (parentMarginLeft < 0 || parentMarginRight < 0) {\n      // Verwende Parent-Breite + absolute Werte der negativen Margins\n      // Dies gibt uns die tatsächlich verfügbare Breite\n      const parentWidth = parentElement.clientWidth;\n      const compensatedWidth = parentWidth + Math.abs(Math.min(0, parentMarginLeft)) + Math.abs(Math.min(0, parentMarginRight));\n      \n      // ✅ FIX: Wenn Parent noch nicht gerendert ist (clientWidth = 0), warte auf nächsten Frame\n      if (compensatedWidth === 0) {\n        // Fallback: Verwende Container-Breite + geschätzte negative Margins\n        const estimatedNegativeMargins = Math.abs(parentMarginLeft) + Math.abs(parentMarginRight);\n        return container.clientWidth + estimatedNegativeMargins;\n      }\n      \n      return compensatedWidth;\n    }\n    \n    // Fallback: Verwende Container-Breite (wenn keine negativen Margins vorhanden)\n    return container.clientWidth;\n  }, []);\n\n  // Optimierte Sichtbarkeits-Berechnung mit useCallback\n  const calculateVisibleTags = useCallback(() => {\n    if (!containerRef.current || sortedFilters.length === 0) return;\n    // Nicht berechnen während Messung\n    if (isMeasuring) return;\n\n    const currentWidth = getAvailableWidth();\n    \n    // ✅ FIX: Wenn Breite 0 oder sehr klein ist, warte auf nächsten Frame (Container noch nicht gerendert)\n    if (currentWidth < 100) {\n      requestAnimationFrame(() => {\n        requestAnimationFrame(() => {\n          if (containerRef.current) {\n            calculateVisibleTags();\n          }\n        });\n      });\n      return;\n    }\n\n    // Nur neu berechnen wenn sich die Breite signifikant geändert hat (>= 10px)\n    if (Math.abs(currentWidth - containerWidth) < 10 && containerWidth > 0) return;\n\n    setContainerWidth(currentWidth);\n\n    // Reduzierte, realistischere UI-Element-Breiten\n    const DROPDOWN_BUTTON_WIDTH = 60; // Reduziert von 70\n    const GAP_BETWEEN_TAGS = 6; // gap-1.5 = 6px\n    const BUFFER = 4; // Minimaler Puffer\n\n    const availableWidth = currentWidth - BUFFER;\n\n    // Verwende gemessene Breiten wenn verfügbar, sonst Durchschnitt\n    let totalWidth = 0;\n    let measuredCount = 0;\n\n    // Berechne Gesamtbreite der Tags mit gemessenen Breiten\n    sortedFilters.forEach((filter) => {\n      const measuredWidth = measuredTagWidths.get(filter.id);\n      if (measuredWidth) {\n        totalWidth += measuredWidth + GAP_BETWEEN_TAGS;\n        measuredCount++;\n      }\n    });\n\n    // Wenn wir gemessene Breiten für alle Tags haben, verwende diese\n    if (measuredCount === sortedFilters.length && totalWidth > 0) {\n      const totalWidthWithoutLastGap = totalWidth - GAP_BETWEEN_TAGS;\n\n      // Prüfe ob alle Tags ohne Dropdown passen\n      if (totalWidthWithoutLastGap <= availableWidth) {\n        setVisibleTagCount(sortedFilters.length);\n        return;\n      }\n\n      // Prüfe ob alle Tags mit Dropdown passen\n      const availableWithDropdown = availableWidth - DROPDOWN_BUTTON_WIDTH - GAP_BETWEEN_TAGS;\n      if (totalWidthWithoutLastGap <= availableWithDropdown) {\n        setVisibleTagCount(sortedFilters.length);\n        return;\n      }\n\n      // Berechne wie viele Tags mit Dropdown passen\n      let cumulativeWidth = 0;\n      let visibleCount = 0;\n      for (const filter of sortedFilters) {\n        const width = measuredTagWidths.get(filter.id) || averageTagWidth;\n        if (cumulativeWidth + width + GAP_BETWEEN_TAGS <= availableWithDropdown) {\n          cumulativeWidth += width + GAP_BETWEEN_TAGS;\n          visibleCount++;\n        } else {\n          break;\n        }\n      }\n      setVisibleTagCount(Math.max(1, visibleCount));\n      return;\n    }\n\n    // Fallback: Verwende Durchschnittsbreite\n    const maxPossibleTags = Math.max(1, Math.floor(availableWidth / (averageTagWidth + GAP_BETWEEN_TAGS)));\n\n    if (maxPossibleTags >= sortedFilters.length) {\n      // Alle Tags passen rein - zeige alle\n      setVisibleTagCount(sortedFilters.length);\n    } else {\n      // Prüfe ob alle Tags mit Dropdown passen würden\n      const availableWithDropdown = availableWidth - DROPDOWN_BUTTON_WIDTH - GAP_BETWEEN_TAGS;\n      const maxTagsWithDropdown = Math.max(1, Math.floor(availableWithDropdown / (averageTagWidth + GAP_BETWEEN_TAGS)));\n\n      if (maxTagsWithDropdown >= sortedFilters.length) {\n        // Alle Tags passen mit Dropdown - zeige alle\n        setVisibleTagCount(sortedFilters.length);\n      } else {\n        // Zeige berechnete Anzahl\n        setVisibleTagCount(Math.max(1, maxTagsWithDropdown));\n      }\n    }\n  }, [sortedFilters, averageTagWidth, containerWidth, isMeasuring, measuredTagWidths, getAvailableWidth]);\n\n  // ✅ FIX: Verwende Custom Hook für ResizeObserver (Memory-Leak Prevention)\n  // Beobachte sowohl Container als auch Parent (für negative Margins)\n  useResizeObserver(\n    containerRef,\n    calculateVisibleTags,\n    {\n      debounceMs: 100, // 100ms Debounce für Filter-Tags (schneller als Client-Tags)\n    }\n  );\n  \n  // ✅ FIX: Beobachte auch Parent-Container für negative Margins\n  useEffect(() => {\n    if (!containerRef.current) return;\n    \n    const container = containerRef.current;\n    const parentElement = container.parentElement;\n    \n    if (!parentElement) return;\n    \n    const parentStyles = window.getComputedStyle(parentElement);\n    const parentMarginLeft = parseFloat(parentStyles.marginLeft) || 0;\n    const parentMarginRight = parseFloat(parentStyles.marginRight) || 0;\n    \n    // Nur beobachten, wenn negative Margins vorhanden\n    if (parentMarginLeft < 0 || parentMarginRight < 0) {\n      const resizeObserver = new ResizeObserver(() => {\n        // Verzögerung, damit Layout fertig ist\n        requestAnimationFrame(() => {\n          calculateVisibleTags();\n        });\n      });\n      \n      resizeObserver.observe(parentElement);\n      \n      return () => {\n        resizeObserver.disconnect();\n      };\n    }\n  }, [calculateVisibleTags]);\n\n  // Messung der tatsächlichen Tag-Breiten nach Render\n  useLayoutEffect(() => {\n    if (sortedFilters.length === 0) return;\n\n    const widths = new Map<number, number>();\n    let hasMeasurements = false;\n\n    // Beim ersten Messen: Alle Tags messen (wenn isMeasuring true)\n    // Später: Nur die sichtbaren + ein paar mehr messen\n    const tagsToMeasure = isMeasuring\n      ? sortedFilters.length\n      : Math.min(visibleTagCount + 5, sortedFilters.length);\n\n    sortedFilters.slice(0, tagsToMeasure).forEach((filter) => {\n      const tagElement = tagRefs.current.get(filter.id);\n      if (tagElement) {\n        const width = tagElement.offsetWidth;\n        if (width > 0) {\n          widths.set(filter.id, width);\n          hasMeasurements = true;\n        }\n      }\n    });\n\n    // ✅ MEMORY FIX: Speichere Timer-IDs für Cleanup\n    let outerTimeoutId: ReturnType<typeof setTimeout> | null = null;\n    let innerTimeoutId: ReturnType<typeof setTimeout> | null = null;\n\n    if (hasMeasurements) {\n      // State-Updates verzögern um React Error #185 zu vermeiden\n      const shouldEndMeasuring = isMeasuring;\n      outerTimeoutId = setTimeout(() => {\n        setMeasuredTagWidths(widths);\n        // Nach erfolgreicher Messung: Messmodus beenden und neu berechnen\n        if (shouldEndMeasuring) {\n          setIsMeasuring(false);\n          // Trigger Neuberechnung durch setTimeout (nach State-Update)\n          innerTimeoutId = setTimeout(() => {\n            if (containerRef.current) {\n              calculateVisibleTags();\n            }\n          }, 0);\n        }\n      }, 0);\n    }\n\n    // ✅ MEMORY FIX: Cleanup alle Timer bei Unmount\n    return () => {\n      if (outerTimeoutId) clearTimeout(outerTimeoutId);\n      if (innerTimeoutId) clearTimeout(innerTimeoutId);\n    };\n  }, [sortedFilters, visibleTagCount, isMeasuring, calculateVisibleTags]);\n\n  // ✅ FIX: Initial calculation mit Verzögerung, damit Container ihre finale Größe haben\n  useLayoutEffect(() => {\n    if (!isMeasuring && containerRef.current) {\n      // Mehrfache Verzögerung, damit Container ihre finale Größe haben (besonders wichtig bei negativen Margins)\n      // Dies ist notwendig, weil CSS-Layout und negative Margins Zeit brauchen\n      const timeoutId = setTimeout(() => {\n        requestAnimationFrame(() => {\n          requestAnimationFrame(() => {\n            if (containerRef.current) {\n              calculateVisibleTags();\n            }\n          });\n        });\n      }, 50); // 50ms Verzögerung für initiales Layout\n      \n      return () => {\n        clearTimeout(timeoutId);\n      };\n    }\n  }, [calculateVisibleTags, isMeasuring]);\n  \n  // Reset Messmodus wenn sich Filter ändern\n  useEffect(() => {\n    if (sortedFilters.length > 0) {\n      setIsMeasuring(true);\n      setMeasuredTagWidths(new Map());\n    }\n  }, [sortedFilters.length]);\n\n  // Sortiere Gruppen nach order (MUSS vor frühen Returns sein!)\n  const sortedGroups = useMemo(() => {\n    return [...filterGroups].sort((a, b) => a.order - b.order);\n  }, [filterGroups]);\n\n  // Drag & Drop Handler\n  const handleDragStart = (e: React.DragEvent, filterId: number) => {\n    e.dataTransfer.effectAllowed = 'move';\n    setDraggedFilterId(filterId);\n  };\n\n  const handleDragOver = (e: React.DragEvent, targetId: number | 'new-group', type: 'filter' | 'group') => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n    \n    if (type === 'filter') {\n      setDragOverFilterId(targetId as number);\n    } else {\n      setDragOverGroupId(targetId);\n    }\n  };\n\n  const handleDragEnd = () => {\n    setDraggedFilterId(null);\n    setDragOverFilterId(null);\n    setDragOverGroupId(null);\n  };\n\n  const handleDrop = async (e: React.DragEvent, targetId: number | 'new-group', type: 'filter' | 'group') => {\n    e.preventDefault();\n    \n    if (!draggedFilterId) return;\n    \n    // Verhindere, dass ein Filter auf sich selbst gezogen wird\n    if (type === 'filter' && draggedFilterId === targetId) {\n      handleDragEnd();\n      return;\n    }\n    \n    try {\n      if (type === 'group') {\n        // Filter auf Gruppe gezogen -> Zu Gruppe hinzufügen\n        await axiosInstance.post(API_ENDPOINTS.SAVED_FILTERS.GROUPS.ADD_FILTER(draggedFilterId, targetId as number));\n        showMessage(t('filter.addToGroupSuccess', { defaultValue: 'Filter zur Gruppe hinzugefügt' }), 'success');\n      } else {\n        // Filter auf Filter gezogen -> Zu bestehender Gruppe hinzufügen oder neue erstellen\n        const targetFilter = savedFilters.find(f => f.id === targetId as number);\n        if (!targetFilter) {\n          handleDragEnd();\n          return;\n        }\n        \n        if (targetFilter.groupId) {\n          // Füge zu bestehender Gruppe hinzu\n          await axiosInstance.post(API_ENDPOINTS.SAVED_FILTERS.GROUPS.ADD_FILTER(draggedFilterId, targetFilter.groupId));\n          showMessage(t('filter.addToGroupSuccess', { defaultValue: 'Filter zur Gruppe hinzugefügt' }), 'success');\n        } else {\n          // Erstelle neue Gruppe mit beiden Filtern\n          const groupName = `Gruppe ${filterGroups.length + 1}`;\n          const groupResponse = await axiosInstance.post(API_ENDPOINTS.SAVED_FILTERS.GROUPS.CREATE, {\n            tableId,\n            name: groupName\n          });\n          \n          const newGroup = groupResponse.data;\n          \n          await Promise.all([\n            axiosInstance.post(API_ENDPOINTS.SAVED_FILTERS.GROUPS.ADD_FILTER(draggedFilterId, newGroup.id)),\n            axiosInstance.post(API_ENDPOINTS.SAVED_FILTERS.GROUPS.ADD_FILTER(targetFilter.id, newGroup.id))\n          ]);\n          \n          showMessage(t('filter.createGroupSuccess', { defaultValue: 'Gruppe erstellt' }), 'success');\n        }\n      }\n      \n      // Refresh Filter-Liste\n      await refreshFilters();\n    } catch (err) {\n      if (process.env.NODE_ENV === 'development') {\n        console.error('Fehler beim Gruppieren der Filter:', err);\n      }\n      showMessage(t('filter.groupError', { defaultValue: 'Fehler beim Gruppieren der Filter' }), 'error');\n    } finally {\n      handleDragEnd();\n    }\n  };\n\n  // Gruppen-Management\n  const toggleGroupDropdown = (groupId: number) => {\n    setOpenGroupDropdowns(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(groupId)) {\n        newSet.delete(groupId);\n      } else {\n        newSet.add(groupId);\n      }\n      return newSet;\n    });\n  };\n\n  const handleUngroupFilters = async (groupId: number) => {\n    try {\n      await axiosInstance.delete(API_ENDPOINTS.SAVED_FILTERS.GROUPS.DELETE(groupId));\n      showMessage(t('filter.ungroupSuccess', { defaultValue: 'Gruppe aufgelöst' }), 'success');\n      await refreshFilters();\n      setOpenGroupDropdowns(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(groupId);\n        return newSet;\n      });\n    } catch (err) {\n      if (process.env.NODE_ENV === 'development') {\n        console.error('Fehler beim Auflösen der Gruppe:', err);\n      }\n      showMessage(t('filter.ungroupError', { defaultValue: 'Fehler beim Auflösen der Gruppe' }), 'error');\n    }\n  };\n\n  const handleStartEditGroup = (group: FilterGroup) => {\n    setEditingGroupId(group.id);\n    setEditingGroupName(group.name);\n  };\n\n  const handleCancelEditGroup = () => {\n    setEditingGroupId(null);\n    setEditingGroupName('');\n  };\n\n  const handleSaveGroupName = async (groupId: number) => {\n    if (!editingGroupName.trim()) {\n      showMessage(t('filter.groupNameRequired', { defaultValue: 'Gruppenname darf nicht leer sein' }), 'error');\n      return;\n    }\n\n    try {\n      await axiosInstance.put(API_ENDPOINTS.SAVED_FILTERS.GROUPS.UPDATE(groupId), {\n        name: editingGroupName.trim()\n      });\n      showMessage(t('filter.renameGroupSuccess', { defaultValue: 'Gruppe umbenannt' }), 'success');\n      await refreshFilters();\n      setEditingGroupId(null);\n      setEditingGroupName('');\n    } catch (err: any) {\n      if (process.env.NODE_ENV === 'development') {\n        console.error('Fehler beim Umbenennen der Gruppe:', err);\n      }\n      const errorMessage = err.response?.data?.message || 'Fehler beim Umbenennen der Gruppe';\n      showMessage(errorMessage, 'error');\n    }\n  };\n\n  // Bestimme welcher Filter aktiv ist\n  const getActiveFilterId = () => {\n    if (onFilterChange) {\n      // Controlled component - verwende selectedFilterId prop\n      return selectedFilterId;\n    } else {\n      // Uncontrolled - fallback auf internen State (legacy)\n      return null; // In legacy mode nicht visuell hervorheben\n    }\n  };\n  \n  if (loading) {\n    return <div className=\"flex justify-center items-center py-2\">{t('common.loadingFilters')}</div>;\n  }\n  \n  if (error) {\n    return <div className=\"text-red-500 py-2\">{error}</div>;\n  }\n  \n  if (savedFilters.length === 0 && filterGroups.length === 0) {\n    return null;\n  }\n\n  return (\n    <div ref={containerRef} className=\"filter-tags-container flex items-center gap-1.5 sm:gap-2 mb-3 mt-1 overflow-x-auto\">\n      {/* Dynamische Anzahl Filter inline anzeigen mit optimistischer Anzeige */}\n      <div className=\"flex items-center gap-1.5 sm:gap-2 flex-1 min-w-0 flex-nowrap\">\n        {/* Gruppen-Dropdowns */}\n        {sortedGroups.map(group => {\n          // Prüfe, ob ein Filter aus dieser Gruppe aktiv ist\n          const activeFilterInGroup = group.filters.find(f => getActiveFilterId() === f.id);\n          const translatedGroupName = translateGroupName(group.name);\n          const displayName = activeFilterInGroup \n            ? translateFilterName(activeFilterInGroup.name)\n            : `${translatedGroupName} (${group.filters.length})`;\n          \n          return (\n          <div key={group.id} className=\"relative flex-shrink-0\">\n            <div className=\"relative group\">\n              <button\n                ref={(el) => setGroupButtonRef(group.id, el)}\n                data-group-id={group.id}\n                onClick={() => toggleGroupDropdown(group.id)}\n                onDragOver={(e) => handleDragOver(e, group.id, 'group')}\n                onDrop={(e) => handleDrop(e, group.id, 'group')}\n                className={`flex items-center px-2 sm:px-3 py-0.5 sm:py-1 rounded-full text-xs sm:text-sm font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 border border-purple-300 dark:border-purple-700 hover:bg-purple-200 dark:hover:bg-purple-800 transition-colors ${\n                  dragOverGroupId === group.id ? 'ring-2 ring-purple-500' : ''\n                } ${activeFilterInGroup ? 'ring-2 ring-purple-500' : ''}`}\n              >\n                <span className=\"truncate max-w-[4rem] sm:max-w-[100px]\">\n                  {displayName}\n                </span>\n                <ChevronDownIcon className={`h-3 w-3 sm:h-4 sm:w-4 ml-0.5 sm:ml-1 transition-transform ${openGroupDropdowns.has(group.id) ? 'rotate-180' : ''}`} />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {activeFilterInGroup ? displayName : `${translatedGroupName} (${group.filters.length})`}\n              </div>\n            </div>\n            \n            {/* Gruppen-Dropdown via Portal (außerhalb overflow-Container) */}\n            {openGroupDropdowns.has(group.id) && dropdownPositions.has(group.id) && createPortal(\n              <div \n                ref={(el) => setGroupDropdownRef(group.id, el)}\n                style={{\n                  position: 'fixed',\n                  top: `${dropdownPositions.get(group.id)!.top}px`,\n                  left: `${dropdownPositions.get(group.id)!.left}px`,\n                  zIndex: 100\n                }}\n                className=\"bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 py-1 min-w-[200px]\"\n              >\n                {group.filters.map(filter => (\n                  <div\n                    key={filter.id}\n                    onClick={() => {\n                      handleSelectFilter(filter);\n                      toggleGroupDropdown(group.id);\n                    }}\n                    className={`flex items-center justify-between px-3 py-2 text-sm cursor-pointer transition-colors ${\n                      getActiveFilterId() === filter.id\n                        ? 'bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300'\n                        : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\n                    } ${isStandardFilter(filter.name) ? 'font-bold' : ''}`}\n                  >\n                    <span className=\"truncate flex-1\">{translateFilterName(filter.name)}</span>\n                  </div>\n                ))}\n                <div className=\"border-t border-gray-200 dark:border-gray-700 mt-1 pt-1\">\n                  {editingGroupId === group.id ? (\n                    <div className=\"px-3 py-2\">\n                      <input\n                        type=\"text\"\n                        value={editingGroupName}\n                        onChange={(e) => setEditingGroupName(e.target.value)}\n                        onKeyDown={(e) => {\n                          if (e.key === 'Enter') {\n                            handleSaveGroupName(group.id);\n                          } else if (e.key === 'Escape') {\n                            handleCancelEditGroup();\n                          }\n                        }}\n                        className=\"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                        autoFocus\n                        onClick={(e) => e.stopPropagation()}\n                      />\n                      <div className=\"flex gap-2 mt-2 justify-end\">\n                        <div className=\"relative group\">\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleSaveGroupName(group.id);\n                            }}\n                            className=\"p-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors\"\n                          >\n                            <CheckIcon className=\"h-4 w-4\" />\n                          </button>\n                          <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                            Speichern\n                          </div>\n                        </div>\n                        <div className=\"relative group\">\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleCancelEditGroup();\n                            }}\n                            className=\"p-2 rounded-md bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-400 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors\"\n                          >\n                            <XMarkIcon className=\"h-4 w-4\" />\n                          </button>\n                          <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                            Abbrechen\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ) : (\n                    <>\n                      <div className=\"relative group\">\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleStartEditGroup(group);\n                          }}\n                          className=\"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 w-full text-left transition-colors\"\n                        >\n                          <PencilIcon className=\"h-4 w-4\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          Gruppe umbenennen\n                        </div>\n                      </div>\n                      <div className=\"relative group\">\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleUngroupFilters(group.id);\n                          }}\n                          className=\"flex items-center gap-2 px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 w-full text-left transition-colors\"\n                        >\n                          <TrashIcon className=\"h-4 w-4\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('filter.ungroup')}\n                        </div>\n                      </div>\n                    </>\n                  )}\n                </div>\n              </div>,\n              document.body\n            )}\n          </div>\n          );\n        })}\n        \n        {/* Einzelne Filter-Tags */}\n        {displayFilters.slice(0, currentVisibleCount).map(filter => (\n          <div\n            key={filter.id}\n            ref={(el) => {\n              if (el && !filter.isPlaceholder) {\n                tagRefs.current.set(filter.id, el);\n              } else if (!el) {\n                tagRefs.current.delete(filter.id);\n              }\n            }}\n            draggable={true}\n            onDragStart={(e) => handleDragStart(e, filter.id)}\n            onDragOver={(e) => handleDragOver(e, filter.id, 'filter')}\n            onDrop={(e) => handleDrop(e, filter.id, 'filter')}\n            onDragEnd={handleDragEnd}\n            onClick={() => !filter.isPlaceholder && handleSelectFilter(filter)}\n            className={`relative group flex items-center px-2 sm:px-3 py-0.5 sm:py-1 rounded-full text-xs sm:text-sm font-medium cursor-pointer transition-colors flex-shrink-0 ${\n              filter.isPlaceholder\n                ? 'bg-gray-200 dark:bg-gray-600 text-gray-400 dark:text-gray-500 animate-pulse cursor-default'\n                : draggedFilterId === filter.id\n                  ? 'opacity-50'\n                  : dragOverFilterId === filter.id\n                    ? 'ring-2 ring-blue-500'\n                    : getActiveFilterId() === filter.id\n                      ? 'bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 border border-blue-300 dark:border-blue-700'\n                      : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-600'\n            } ${!filter.isPlaceholder && isStandardFilter(filter.name) ? 'font-bold' : ''}`}\n          >\n            <span className=\"truncate max-w-[4rem] sm:max-w-[100px]\">\n              {filter.isPlaceholder && filter.name === '████████' ? (\n                <span className=\"inline-block w-16 h-4 bg-gray-300 dark:bg-gray-500 rounded animate-pulse\"></span>\n              ) : (\n                translateFilterName(filter.name)\n              )}\n            </span>\n            {!filter.isPlaceholder && !isStandardFilter(filter.name) && (\n                <button\n                  onClick={(e) => handleDeleteFilter(e, filter.id)}\n                className=\"ml-1 sm:ml-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 focus:outline-none\"\n                >\n                  <XMarkIcon className=\"h-3 w-3 sm:h-4 sm:w-4\" />\n                </button>\n            )}\n            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n              {filter.isPlaceholder ? t('common.loading') : translateFilterName(filter.name)}\n            </div>\n          </div>\n        ))}\n        \n        {/* Dropdown nur bei echten Filtern und tatsächlichem Platzmangel */}\n        {!showOptimisticFilters && sortedFilters.length > visibleTagCount && (\n          <div className=\"relative flex-shrink-0\">\n            <div className=\"relative group\">\n              <button\n                onClick={() => setIsDropdownOpen(!isDropdownOpen)}\n                className=\"inline-flex items-center px-2 sm:px-3 py-0.5 sm:py-1 rounded-full text-xs sm:text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors border border-gray-300 dark:border-gray-600\"\n              >\n                <span>+{sortedFilters.length - visibleTagCount}</span>\n                <ChevronDownIcon className={`h-3 w-3 sm:h-4 sm:w-4 ml-0.5 sm:ml-1 transition-transform ${isDropdownOpen ? 'rotate-180' : ''}`} />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                Weitere Filter anzeigen\n              </div>\n            </div>\n            \n            {/* Dropdown-Menu */}\n            {isDropdownOpen && (\n              <div className=\"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50 min-w-[200px] max-w-[300px]\">\n                {sortedFilters.slice(visibleTagCount).map(filter => (\n                  <div\n                    key={filter.id}\n                    onClick={() => {\n                      handleSelectFilter(filter);\n                      setIsDropdownOpen(false);\n                    }}\n                    className={`flex items-center justify-between px-3 py-2 text-sm cursor-pointer transition-colors ${\n                      getActiveFilterId() === filter.id\n                        ? 'bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300'\n                        : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\n                    } ${isStandardFilter(filter.name) ? 'font-bold' : ''}`}\n                  >\n                    <span className=\"truncate flex-1\">{translateFilterName(filter.name)}</span>\n                    {!isStandardFilter(filter.name) && (\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleDeleteFilter(e, filter.id);\n                            setIsDropdownOpen(false);\n                          }}\n                        className=\"ml-2 flex-shrink-0 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 focus:outline-none\"\n                        >\n                          <XMarkIcon className=\"h-4 w-4\" />\n                        </button>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SavedFilterTags; "],"names":["useResizeObserver","containerRef","onResize","options","arguments","length","undefined","debounceMs","enabled","additionalElementRef","onResizeRef","useRef","useEffect","current","container","resizeTimeoutRef","handleResize","clearTimeout","setTimeout","_onResizeRef$current","call","resizeObserver","ResizeObserver","observe","handleWindowResize","window","addEventListener","disconnect","removeEventListener","_ref","condition","onChange","onDelete","onAdd","columns","isFirst","isLast","t","useTranslation","operators","setOperators","useState","users","setUsers","roles","setRoles","branches","setBranches","roomNumbers","setRoomNumbers","loadingUsers","setLoadingUsers","loadingRoles","setLoadingRoles","loadingBranches","setLoadingBranches","loadingRoomNumbers","setLoadingRoomNumbers","getOperatorsByColumnType","columnId","textOperators","value","label","dateOperators","durationOperators","statusOperators","column","abortController","AbortController","async","localStorage","getItem","response","axiosInstance","get","signal","data","error","name","aborted","some","col","id","isTaskTable","API_ENDPOINTS","BRANCHES","BASE","_response$data","RESERVATION","reservations","roomNames","Set","forEach","r","roomDescription","trim","add","roomNumber","toLowerCase","startsWith","uniqueRoomNames","Array","from","sort","loadUsersAndRoles","abort","_jsxs","className","children","_jsx","e","_operators$","_objectSpread","target","operator","map","op","renderValueInput","isRequestTable","isInvoiceTable","showRoles","disabled","user","concat","firstName","lastName","role","branch","isPlaceholder","placeholderType","selectedType","defaultValue","type","placeholder","onClick","TrashIcon","PlusCircleIcon","isOpen","setIsOpen","dropdownRef","handleClickOutside","event","contains","document","handleSelect","ref","style","width","minWidth","maxWidth","overflow","_Fragment","PlusIcon","onApply","onReset","savedConditions","savedOperators","tableId","showMessage","useMessage","conditions","setConditions","logicalOperators","setLogicalOperators","showSaveInput","setShowSaveInput","filterName","setFilterName","existingFilters","setExistingFilters","SAVED_FILTERS","BY_TABLE","filter","err","console","fetchExistingFilters","prevSavedConditionsRef","prevSavedOperatorsRef","conditionsChanged","a","b","every","item","index","other","areConditionsEqual","operatorsChanged","areOperatorsEqual","handleAddCondition","React","FilterRow","newCondition","handleConditionChange","newConditions","splice","newOperators","handleDeleteCondition","FilterLogicalOperator","newOperator","handleOperatorChange","validConditions","c","post","refreshSavedFilters","title","BookmarkIcon","XMarkIcon","handleResetFilters","ArrowPathIcon","handleApplyFilters","CheckIcon","onSelectFilter","activeFilterName","selectedFilterId","onFilterChange","defaultFilterName","filterContext","useFilterContext","translateFilterName","savedFilters","getFilters","filterGroups","getFilterGroups","loading","isLoading","getError","recentClientNames","setRecentClientNames","tagRefs","Map","visibleTagCount","setVisibleTagCount","containerWidth","setContainerWidth","measuredTagWidths","setMeasuredTagWidths","isMeasuring","setIsMeasuring","isDropdownOpen","setIsDropdownOpen","draggedFilterId","setDraggedFilterId","dragOverFilterId","setDragOverFilterId","dragOverGroupId","setDragOverGroupId","openGroupDropdowns","setOpenGroupDropdowns","groupDropdownRefs","groupButtonRefs","dropdownPositions","setDropdownPositions","updatePositions","newPositions","groupId","button","rect","getBoundingClientRect","set","top","bottom","scrollY","left","scrollX","size","editingGroupId","setEditingGroupId","editingGroupName","setEditingGroupName","refreshFilters","useCallback","cleanupExcessiveClientFilters","clientFilters","currentClientNames","includes","filtersToDelete","Date","createdAt","getTime","slice","filterToDelete","delete","BY_ID","process","loadRecentClients","clientNames","CLIENTS","RECENT","client","handleConsultationChanged","loadFilters","closest","dropdownElement","buttonElement","handleSelectFilter","handleDeleteFilter","filterId","stopPropagation","find","isStandardFilter","sortedFilters","useMemo","ungroupedFilters","f","heute","woche","archiv","sortedRecentClientFilters","clientName","customFilters","orderedFilters","push","aktuell","showOptimisticFilters","optimisticFilters","fill","_","i","displayFilters","currentVisibleCount","averageTagWidth","widths","values","reduce","sum","deleteButtonWidth","getAvailableWidth","parentElement","clientWidth","parentStyles","getComputedStyle","parentMarginLeft","parseFloat","marginLeft","parentMarginRight","marginRight","compensatedWidth","Math","abs","min","estimatedNegativeMargins","calculateVisibleTags","currentWidth","requestAnimationFrame","availableWidth","totalWidth","measuredCount","measuredWidth","totalWidthWithoutLastGap","availableWithDropdown","cumulativeWidth","visibleCount","max","floor","maxTagsWithDropdown","useLayoutEffect","hasMeasurements","tagsToMeasure","tagElement","offsetWidth","outerTimeoutId","innerTimeoutId","shouldEndMeasuring","timeoutId","sortedGroups","order","handleDragOver","targetId","preventDefault","dataTransfer","dropEffect","handleDragEnd","handleDrop","GROUPS","ADD_FILTER","targetFilter","groupName","newGroup","CREATE","Promise","all","toggleGroupDropdown","prev","newSet","has","handleCancelEditGroup","handleSaveGroupName","put","UPDATE","_err$response","_err$response$data","errorMessage","message","getActiveFilterId","group","activeFilterInGroup","filters","translatedGroupName","displayName","el","setGroupButtonRef","element","onDragOver","onDrop","ChevronDownIcon","createPortal","setGroupDropdownRef","position","zIndex","onKeyDown","key","autoFocus","handleStartEditGroup","PencilIcon","DELETE","handleUngroupFilters","body","draggable","onDragStart","handleDragStart","effectAllowed","onDragEnd"],"sourceRoot":""}