"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[686],{637:(e,t,a)=>{a.d(t,{A:()=>r});a(5043);var s=a(579);const r=e=>{let{children:t,columns:a={mobile:1,tablet:1,desktop:1,largeDesktop:1},gap:r="md",className:l=""}=e;const n={sm:"gap-0.5",md:"gap-0.5",lg:"gap-1"}[r];return(0,s.jsx)("div",{className:"flex flex-col ".concat(n," ").concat(l),children:t})}},957:(e,t,a)=>{a.d(t,{A:()=>x});var s=a(5043),r=a(4117),l=a(8224),n=a(2517),i=a(6365),o=a(6896),c=a(579);const d=e=>{let{item:t}=e;const{t:a}=(0,r.Bd)(),[i,d]=(0,s.useState)(!1),[x,m]=(0,s.useState)(!1),h=(0,s.useRef)(null),g=e=>{if("string"!==typeof e)return null===e||void 0===e?"":String(e);return e.replace(/^#+\s+/gm,"").replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/!\[([^\]]*)\]\([^)]+\)/g,"").replace(/\[([^\]]+)\]\([^)]+\)/g,"").replace(/```[\s\S]*?```/g,"").replace(/`([^`]+)`/g,"$1").replace(/^\s*[-*+]\s+/gm,"").replace(/^\s*\d+\.\s+/gm,"").replace(/\b\d{4}-\d{2}-\d{2}_\d{2}h\d{2}_\d{2}\.\w+\b/g,"").replace(/\s+/g," ").trim()},u=g(t.descriptionContent||""),p=(e=>{const t=e.indexOf("\n");if(t>0&&t<150)return e.substring(0,t);if(e.length>150){let t=150;for(let a=150;a>100;a--)if(" "===e[a]||"."===e[a]||","===e[a]||"!"===e[a]||"?"===e[a]){t=a+1;break}return e.substring(0,t)}return e})(u),f=u.length>p.length||u.includes("\n"),b=f?((e,t)=>{if(!e||!t)return"";const a=e.indexOf(t);if(-1===a){const a=e.indexOf("\n");return a>0?e.substring(a+1).trim():e.length>t.length?e.substring(t.length).trim():""}const s=e.indexOf("\n",a);if(s>0)return e.substring(s+1).trim();const r=a+t.length;return e.length>r?e.substring(r).trim():""})(u,p):"";(0,s.useEffect)((()=>{if(h.current&&u){const e=document.createElement("div");e.style.position="absolute",e.style.visibility="hidden",e.style.width=h.current.offsetWidth+"px",e.style.whiteSpace="nowrap",e.style.fontSize=window.getComputedStyle(h.current).fontSize,e.style.fontFamily=window.getComputedStyle(h.current).fontFamily,e.textContent=u,document.body.appendChild(e);const t=e.scrollWidth,a=h.current.scrollWidth;m((t>a||f)&&f),document.body.removeChild(e)}}),[u,f]);f&&((e,t)=>{if(!e)return"";const a=e.indexOf("\n");if(a>0)return e.substring(a+1).trim();const s=g(e),r=s.indexOf(t);if(r>=0&&s.length>r+t.length){if(s.length-(r+t.length)>0&&e.length>t.length){let a=Math.min(150,e.length);for(let t=a;t>100&&t<e.length;t--)if(" "===e[t]||"."===e[t]||","===e[t]||"\n"===e[t]){a=t+1;break}if(t.length>a){a=t.length;for(let t=a;t<e.length&&t<a+50;t++)if(" "===e[t]||"."===e[t]||","===e[t]||"\n"===e[t]){a=t+1;break}}if(e.length>a)return e.substring(a).trim()}}})(t.descriptionContent||"",p);const w=t.descriptionContent||"",v=/!\[([^\]]*)\]\([^)]+\)/.test(w),y=f&&x;return(0,c.jsxs)("div",{className:"text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400 ".concat(t.className||""),children:[(0,c.jsxs)("div",{className:"flex items-center gap-1 sm:gap-1.5",children:[(0,c.jsx)("span",{ref:h,className:"text-gray-900 dark:text-white flex-1 min-w-0 break-words whitespace-pre-wrap",children:p}),y&&!i&&(0,c.jsx)("button",{onClick:e=>{e.stopPropagation(),d(!0)},className:"flex-shrink-0 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors ml-0.5 sm:ml-1 mr-2 sm:mr-3",title:a("dataCard.expandDescription"),children:(0,c.jsx)(l.A,{className:"h-5 w-5 sm:h-6 sm:w-6 lg:h-7 lg:w-7 xl:h-8 xl:w-8"})}),i&&(0,c.jsx)("button",{onClick:e=>{e.stopPropagation(),d(!1)},className:"flex-shrink-0 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors ml-0.5 sm:ml-1 mr-2 sm:mr-3",title:a("dataCard.collapseDescription"),children:(0,c.jsx)(n.A,{className:"h-5 w-5 sm:h-6 sm:w-6 lg:h-7 lg:w-7 xl:h-8 xl:w-8"})})]}),v&&(0,c.jsx)("div",{className:""===p.trim()?"mt-0":"mt-2",children:(0,c.jsx)(o.A,{content:w,showImagePreview:!0,attachmentMetadata:t.attachmentMetadata||[]})}),i&&f&&(()=>{let e="";return b&&""!==b.trim()?e=b:u.length>p.length&&(e=u.substring(p.length).trim()),e&&""!==e.trim()?(0,c.jsx)("div",{className:"mt-1",children:(0,c.jsx)("div",{className:"dark:text-gray-200 break-words text-gray-900 dark:text-white whitespace-pre-wrap",children:e.trim()})}):null})()]})},x=e=>{let{title:t,subtitle:a,status:o,metadata:x,actions:m,expandable:h,onClick:g,className:u="",headerClassName:p="",highlightBorder:f=!1,highlightColor:b="green",children:w}=e;const{t:v}=(0,r.Bd)(),y=f?"border-2 border-".concat(b,"-500 dark:border-").concat(b,"-600"):"border border-gray-300 dark:border-gray-700";return(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg ".concat(y," p-3 sm:p-4 md:p-5 lg:p-6 shadow-sm hover:shadow-md transition-shadow ").concat(g?"cursor-pointer":""," w-full overflow-hidden ").concat(u),onClick:g,children:[(0,c.jsxs)("div",{className:"block sm:hidden",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-2",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[x.filter((e=>"main"===e.section||!e.section&&("Angefragt von"===e.label||"Verantwortlicher"===e.label))).map(((e,t)=>e.descriptionContent?null:(0,c.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-600 dark:text-gray-400 flex-shrink-0",children:[e.icon&&(0,c.jsx)("span",{className:"flex-shrink-0",children:e.icon}),e.label&&(0,c.jsxs)("span",{className:"font-medium whitespace-nowrap",children:[e.label,":"]}),(0,c.jsx)("span",{className:"".concat(e.className||"text-gray-900 dark:text-white"," whitespace-nowrap"),children:(e.value,e.value)})]},t))),x.filter((e=>"main-second"===e.section||!e.section&&"Qualit\xe4tskontrolle"===e.label)).map(((e,t)=>e.descriptionContent?null:(0,c.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-600 dark:text-gray-400 flex-shrink-0",children:[e.icon&&(0,c.jsx)("span",{className:"flex-shrink-0",children:e.icon}),e.label&&(0,c.jsx)("span",{className:"font-medium whitespace-nowrap",children:e.label.endsWith(":")?e.label:"".concat(e.label,":")}),(0,c.jsx)("span",{className:"".concat(e.className||"text-gray-900 dark:text-white"," whitespace-nowrap"),children:(e.value,e.value)})]},t))),x.filter((e=>"main-third"===e.section||!e.section&&"Verantwortlicher"===e.label)).map(((e,t)=>e.descriptionContent?null:(0,c.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-600 dark:text-gray-400 flex-shrink-0",children:[e.icon&&(0,c.jsx)("span",{className:"flex-shrink-0",children:e.icon}),(0,c.jsx)("span",{className:"font-medium whitespace-nowrap",children:e.label.endsWith(":")?e.label:"".concat(e.label,":")}),(0,c.jsx)("span",{className:"".concat(e.className||"text-gray-900 dark:text-white"," whitespace-nowrap"),children:(e.value,e.value)})]},t)))]}),(0,c.jsx)("div",{className:"flex items-center gap-1 text-xs text-gray-600 dark:text-gray-400 flex-shrink-0",style:{width:"50%",justifyContent:"flex-end"},children:x.filter((e=>"right-inline"===e.section)).map(((e,t)=>(0,c.jsxs)(s.Fragment,{children:[e.icon&&(0,c.jsx)("span",{className:"flex-shrink-0",children:e.icon}),(0,c.jsx)("span",{className:"".concat(e.className||"text-gray-900 dark:text-white"," whitespace-nowrap"),children:(e.value,e.value)})]},t)))})]}),(0,c.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,c.jsxs)("div",{className:"flex-1 min-w-0",style:{flex:"0 0 65%"},children:["string"===typeof t?(0,c.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white break-words text-sm",style:{wordBreak:"break-word",overflowWrap:"break-word"},children:t}):t,a&&(0,c.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 break-words",children:a})]}),o&&(0,c.jsxs)("div",{className:"flex items-center gap-0.5 flex-shrink-0",style:{flex:"0 0 35%",justifyContent:"flex-end"},children:[o.onPreviousClick?(0,c.jsx)("button",{onClick:e=>{var t;e.stopPropagation(),null===(t=o.onPreviousClick)||void 0===t||t.call(o)},className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded transition-colors flex-shrink-0",title:v("dataCard.previousStatus"),children:(0,c.jsx)(l.A,{className:"h-4 w-4"})}):null,(0,c.jsx)("span",{className:"px-1.5 py-0.5 text-xs font-medium rounded-full ".concat(o.color," ").concat(o.className||""," whitespace-nowrap flex-shrink-0"),children:o.label}),o.onNextClick?(0,c.jsx)("button",{onClick:e=>{var t;e.stopPropagation(),null===(t=o.onNextClick)||void 0===t||t.call(o)},className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded transition-colors flex-shrink-0",title:v("dataCard.nextStatus"),children:(0,c.jsx)(i.A,{className:"h-4 w-4"})}):null]})]}),x.filter((e=>"right"===e.section)).length>0&&0===x.filter((e=>"center"===e.section)).length&&(0,c.jsx)("div",{className:"flex flex-col items-end gap-1 mb-2",children:x.filter((e=>"right"===e.section)).map(((e,t)=>(0,c.jsxs)("div",{className:"flex items-center gap-1 justify-end text-xs text-gray-600 dark:text-gray-400",children:[e.icon&&(0,c.jsx)("span",{className:"flex-shrink-0",children:e.icon}),e.label&&(0,c.jsx)("span",{className:"font-medium mr-1 whitespace-nowrap",children:e.label.endsWith(":")?e.label:"".concat(e.label,":")}),(0,c.jsx)("span",{className:"".concat(e.className||"text-gray-900 dark:text-white"," break-words"),children:(e.value,e.value)})]},t)))})]}),(0,c.jsx)("div",{className:"hidden sm:block",children:(0,c.jsxs)("div",{className:"grid items-center gap-4 mb-2",style:{gridTemplateColumns:"1fr auto"},children:[(0,c.jsxs)("div",{className:"min-w-0 pr-2",children:["string"===typeof t?(0,c.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white break-words",style:{fontSize:"clamp(0.9375rem, 1.2vw + 0.5rem, 1.25rem)",wordBreak:"break-word",overflowWrap:"break-word"},children:t}):t,a&&(0,c.jsx)("p",{className:"text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-500 dark:text-gray-400 mt-1 break-words",children:a})]}),(0,c.jsxs)("div",{className:"flex items-center justify-end gap-1 sm:gap-2 md:gap-3 flex-nowrap overflow-visible",children:[x.filter((e=>"main"===e.section)).length>0&&(0,c.jsx)("div",{className:"flex items-center gap-1 sm:gap-1.5 text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400 whitespace-nowrap",children:x.filter((e=>"main"===e.section)).map(((e,t)=>e.descriptionContent?null:(0,c.jsxs)(s.Fragment,{children:[e.icon&&(0,c.jsx)("span",{className:"flex-shrink-0",children:e.icon}),e.label&&(0,c.jsx)("span",{className:"font-medium whitespace-nowrap flex-shrink-0",children:e.label.endsWith(":")?e.label:"".concat(e.label,":")}),(0,c.jsx)("span",{className:"".concat(e.className||"text-gray-900 dark:text-white"," whitespace-nowrap"),children:(e.value,e.value)})]},t)))}),(0,c.jsxs)("div",{className:"flex items-center gap-0.5 text-[10px] sm:text-xs md:text-sm lg:text-base xl:text-lg 2xl:text-xl text-gray-600 dark:text-gray-400 flex-nowrap whitespace-nowrap flex-shrink-0",children:[x.filter((e=>"main-second"===e.section&&e.label||!e.section&&"Angefragt von"===e.label)).map(((e,t)=>e.descriptionContent?null:(0,c.jsxs)(s.Fragment,{children:[e.icon&&(0,c.jsx)("span",{className:"flex-shrink-0",children:e.icon}),e.label&&(0,c.jsx)("span",{className:"font-medium whitespace-nowrap flex-shrink-0",children:e.label.endsWith(":")?e.label:"".concat(e.label,":")}),(0,c.jsx)("span",{className:"".concat(e.className||"text-gray-900 dark:text-white"," whitespace-nowrap flex-shrink-0"),children:(e.value,e.value)})]},t))),x.filter((e=>"main-third"===e.section||!e.section&&"Verantwortlicher"===e.label)).map(((e,t)=>e.descriptionContent?null:(0,c.jsxs)(s.Fragment,{children:[e.icon&&(0,c.jsx)("span",{className:"flex-shrink-0",children:e.icon}),e.label&&(0,c.jsx)("span",{className:"font-medium whitespace-nowrap flex-shrink-0",children:e.label.endsWith(":")?e.label:"".concat(e.label,":")}),(0,c.jsx)("span",{className:"".concat(e.className||"text-gray-900 dark:text-white"," whitespace-nowrap flex-shrink-0"),children:(e.value,e.value)})]},t)))]}),x.filter((e=>"right-inline"===e.section)).map(((e,t)=>(0,c.jsxs)("div",{className:"flex items-center gap-1 sm:gap-1.5 text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400 flex-shrink-0 whitespace-nowrap",children:[e.icon&&(0,c.jsx)("span",{className:"flex-shrink-0",children:e.icon}),(0,c.jsx)("span",{className:"".concat(e.className||"text-gray-900 dark:text-white"," whitespace-nowrap"),children:(e.value,e.value)})]},t))),o&&(0,c.jsxs)("div",{className:"flex items-center gap-0.5 sm:gap-1 flex-shrink-0 min-w-0",children:[o.onPreviousClick?(0,c.jsx)("button",{onClick:e=>{var t;e.stopPropagation(),null===(t=o.onPreviousClick)||void 0===t||t.call(o)},className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded transition-colors flex-shrink-0",title:v("dataCard.previousStatus"),children:(0,c.jsx)(l.A,{className:"h-6 w-6"})}):null,(0,c.jsx)("span",{className:"px-1.5 sm:px-2 md:px-2.5 py-0.5 sm:py-0.5 md:py-1 text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl font-medium rounded-full ".concat(o.color," ").concat(o.className||""," whitespace-nowrap flex-shrink-0"),children:o.label}),o.onNextClick?(0,c.jsx)("button",{onClick:e=>{var t;e.stopPropagation(),null===(t=o.onNextClick)||void 0===t||t.call(o)},className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded transition-colors flex-shrink-0",title:v("dataCard.nextStatus"),children:(0,c.jsx)(i.A,{className:"h-6 w-6"})}):null]})]})]})}),x.filter((e=>"right"===e.section)).length>0&&0===x.filter((e=>"center"===e.section)).length&&(0,c.jsx)("div",{className:"hidden sm:flex flex-shrink-0 ml-4 flex-col items-end gap-1 sm:gap-2 mb-3 sm:mb-4 md:mb-5",children:x.filter((e=>"right"===e.section)).map(((e,t)=>(0,c.jsxs)("div",{className:"flex items-center gap-1 sm:gap-1.5 justify-end text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400",children:[e.icon&&(0,c.jsx)("span",{className:"flex-shrink-0",children:e.icon}),e.label&&(0,c.jsx)("span",{className:"font-medium mr-1 whitespace-nowrap",children:e.label.endsWith(":")?e.label:"".concat(e.label,":")}),(0,c.jsx)("span",{className:"".concat(e.className||"text-gray-900 dark:text-white"," break-words"),children:(e.value,e.value)})]},t)))}),(()=>{const e=x.filter((e=>"center"===e.section)).length>0,t=x.filter((e=>"full"!==e.section&&"main"!==e.section&&"main-second"!==e.section&&"right-inline"!==e.section));return(e?t.filter((e=>"left"===e.section||"center"===e.section||"right"===e.section)).length>0:t.filter((e=>"left"===e.section||"right"===e.section||!e.section&&"Angefragt von"!==e.label&&"Verantwortlicher"!==e.label)).length>0)?(0,c.jsx)("div",{className:"flex flex-col gap-3 sm:gap-4 mb-3 sm:mb-4",children:e?(0,c.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 items-start",children:[(0,c.jsx)("div",{className:"flex flex-col gap-2",children:x.filter((e=>"left"===e.section)).map(((e,t)=>(0,c.jsxs)("div",{className:"flex items-center gap-1 sm:gap-1.5 text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400",children:[e.icon&&(0,c.jsx)("span",{className:"flex-shrink-0",children:e.icon}),e.label&&(0,c.jsx)("span",{className:"font-medium mr-1 sm:mr-2 whitespace-nowrap",children:e.label.endsWith(":")?e.label:"".concat(e.label,":")}),(0,c.jsx)("span",{className:e.className||"text-gray-900 dark:text-white",children:(e.value,e.value)})]},t)))}),(0,c.jsx)("div",{className:"flex flex-col gap-2 items-center",children:x.filter((e=>"center"===e.section)).map(((e,t)=>(0,c.jsxs)("div",{className:"flex items-center gap-1 sm:gap-1.5 text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400",children:[e.icon&&(0,c.jsx)("span",{className:"flex-shrink-0",children:e.icon}),e.label&&(0,c.jsx)("span",{className:"font-medium mr-1 sm:mr-2 whitespace-nowrap",children:e.label.endsWith(":")?e.label:"".concat(e.label,":")}),(0,c.jsx)("span",{className:"".concat(e.className||"text-gray-900 dark:text-white"," break-words"),children:(e.value,e.value)})]},t)))}),(0,c.jsx)("div",{className:"flex flex-col gap-2 items-end",children:x.filter((e=>"right"===e.section)).map(((e,t)=>(0,c.jsxs)("div",{className:"flex items-center gap-1 sm:gap-1.5 justify-end text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400",children:[e.icon&&(0,c.jsx)("span",{className:"flex-shrink-0",children:e.icon}),e.label&&(0,c.jsx)("span",{className:"font-medium mr-1 sm:mr-2 whitespace-nowrap",children:e.label.endsWith(":")?e.label:"".concat(e.label,":")}),(0,c.jsx)("span",{className:"".concat(e.className||"text-gray-900 dark:text-white"," break-words"),children:(e.value,e.value)})]},t)))})]}):(0,c.jsxs)(c.Fragment,{children:[x.filter((e=>"left"===e.section)).length>0&&(0,c.jsx)("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:x.filter((e=>"left"===e.section)).map(((e,t)=>(0,c.jsxs)("div",{className:"flex items-center gap-1 sm:gap-1.5 text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400",children:[e.icon&&(0,c.jsx)("span",{className:"flex-shrink-0",children:e.icon}),(0,c.jsx)("span",{className:"font-medium mr-1 sm:mr-2 whitespace-nowrap",children:e.label.endsWith(":")?e.label:"".concat(e.label,":")}),(0,c.jsx)("span",{className:e.className||"text-gray-900 dark:text-white",children:(e.value,e.value)})]},t)))}),x.filter((e=>{const t=e.section;return"main"!==t&&"main-second"!==t&&"right-inline"!==t&&"center"!==t&&(!t&&"Angefragt von"!==e.label&&"Verantwortlicher"!==e.label)})).length>0&&(0,c.jsx)("div",{className:"flex flex-col gap-2 sm:gap-2.5",children:x.filter((e=>{const t=e.section;return"main"!==t&&"main-second"!==t&&"right-inline"!==t&&"center"!==t&&(!t&&"Angefragt von"!==e.label&&"Verantwortlicher"!==e.label)})).map(((e,t)=>e.descriptionContent?(0,c.jsx)(d,{item:e},t):(0,c.jsxs)("div",{className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400",children:[e.icon&&(0,c.jsx)("span",{className:"flex-shrink-0",children:e.icon}),(0,c.jsx)("span",{className:"font-medium mr-1 sm:mr-2 whitespace-nowrap",children:e.label.endsWith(":")?e.label:"".concat(e.label,":")}),(0,c.jsx)("span",{className:"flex-1 min-w-0 break-words ".concat(e.className||"text-gray-900 dark:text-white"),children:(e.value,e.value)})]},t)))}),m&&(0,c.jsx)("div",{className:"flex items-center space-x-2 flex-wrap justify-end mt-2",onClick:e=>e.stopPropagation(),children:m})]})}):null})(),x.filter((e=>"full"===e.section&&e.descriptionContent)).length>0&&(0,c.jsx)("div",{className:"mt-4",children:x.filter((e=>"full"===e.section&&e.descriptionContent)).map(((e,t)=>(0,c.jsx)(d,{item:e},t)))}),m&&(0,c.jsx)("div",{className:"flex items-center space-x-2 flex-wrap justify-end mt-4",onClick:e=>e.stopPropagation(),children:m}),w&&(0,c.jsx)("div",{className:"mb-4",children:w}),h&&(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsxs)("button",{onClick:e=>{e.stopPropagation(),h.onToggle()},className:"flex items-center justify-between w-full text-left text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:[(0,c.jsx)("span",{children:"Details"}),h.isExpanded?(0,c.jsx)(n.A,{className:"h-4 w-4"}):(0,c.jsx)("span",{className:"text-base lg:text-lg xl:text-xl",children:"<"})]}),h.isExpanded&&(0,c.jsx)("div",{className:"mt-2 pt-3 border-t border-gray-200 dark:border-gray-700",children:h.content})]})]})}},2023:(e,t,a)=>{a.d(t,{F:()=>c});var s=a(9379),r=a(5043),l=a(1923);const n=e=>"table_settings_".concat(e),i=async e=>{try{return(await l.A.get("/table-settings/".concat(e))).data}catch(t){console.error("Fehler beim Abrufen der Tabelleneinstellungen vom Server:",t);try{const t=n(e),a=localStorage.getItem(t);if(a)return JSON.parse(a)}catch(a){console.error("Fehler beim Laden aus localStorage:",a)}return{tableId:e,columnOrder:[],hiddenColumns:[]}}},o=async e=>{try{await l.A.post("/table-settings",e);const t=n(e.tableId);localStorage.setItem(t,JSON.stringify(e))}catch(t){console.error("Fehler beim Speichern der Tabelleneinstellungen auf dem Server:",t);try{const t=n(e.tableId);localStorage.setItem(t,JSON.stringify(e))}catch(a){console.error("Fehler beim Speichern im localStorage:",a)}}},c=(e,t)=>{const[a,l]=(0,r.useState)({tableId:e,columnOrder:(null===t||void 0===t?void 0:t.defaultColumnOrder)||[],hiddenColumns:(null===t||void 0===t?void 0:t.defaultHiddenColumns)||[]}),[n,c]=(0,r.useState)(!0),[d,x]=(0,r.useState)(null);(0,r.useEffect)((()=>{let a=!0;return(async()=>{try{c(!0);const s=await i(e);if(!a)return;console.log("Geladene Tabelleneinstellungen vom Server:",s),0===s.columnOrder.length&&null!==t&&void 0!==t&&t.defaultColumnOrder&&(s.columnOrder=t.defaultColumnOrder),!s.viewMode&&null!==t&&void 0!==t&&t.defaultViewMode&&(s.viewMode=t.defaultViewMode),console.log("Finale Tabelleneinstellungen nach Initialisierung:",s),l(s),x(null)}catch(s){if(!a)return;x(s instanceof Error?s:new Error("Fehler beim Laden der Einstellungen")),console.error("Fehler beim Laden der Tabelleneinstellungen:",s)}finally{a&&c(!1)}})(),()=>{a=!1}}),[e]);const m=(0,r.useCallback)((async e=>{try{const t=(0,s.A)((0,s.A)({},a),{},{columnOrder:e});l(t),await o(t)}catch(t){x(t instanceof Error?t:new Error("Fehler beim Speichern der Spaltenreihenfolge")),console.error("Fehler beim Speichern der Spaltenreihenfolge:",t)}}),[a]),h=(0,r.useCallback)((async e=>{try{const t=(0,s.A)((0,s.A)({},a),{},{hiddenColumns:e});l(t),await o(t)}catch(t){x(t instanceof Error?t:new Error("Fehler beim Speichern der versteckten Spalten")),console.error("Fehler beim Speichern der versteckten Spalten:",t)}}),[a]),g=(0,r.useCallback)((async e=>{try{let t;t=a.hiddenColumns.includes(e)?a.hiddenColumns.filter((t=>t!==e)):[...a.hiddenColumns,e];const r=(0,s.A)((0,s.A)({},a),{},{hiddenColumns:t});l(r),await o(r)}catch(t){x(t instanceof Error?t:new Error("Fehler beim \xc4ndern der Spaltenansicht")),console.error("Fehler beim \xc4ndern der Spaltenansicht:",t)}}),[a]),u=(0,r.useCallback)((async e=>{try{const t=(0,s.A)((0,s.A)({},a),{},{viewMode:e});l(t),await o(t)}catch(t){x(t instanceof Error?t:new Error("Fehler beim Speichern des View-Modes")),console.error("Fehler beim Speichern des View-Modes:",t)}}),[a]);return{settings:a,isLoading:n,error:d,updateColumnOrder:m,updateHiddenColumns:h,toggleColumnVisibility:g,isColumnVisible:e=>!a.hiddenColumns.includes(e),updateViewMode:u}}},6400:(e,t,a)=>{a.d(t,{Ac:()=>n,J1:()=>l,W5:()=>r,hw:()=>i});const s=(e,t)=>{const{operator:a,value:s}=t;if(null==e&&null==s)return"equals"===a;if(null==e||null==s)return"notEquals"===a;const r=String(e).toLowerCase(),l=String(s).toLowerCase();switch(a){case"equals":return r===l;case"notEquals":return r!==l;case"contains":return r.includes(l);case"startsWith":return r.startsWith(l);case"endsWith":return r.endsWith(l);case"before":case"after":{const t=new Date(e),r=new Date(s);return!isNaN(t.getTime())&&!isNaN(r.getTime())&&("before"===a?t<r:t>r)}case"greaterThan":case"lessThan":{const t=parseFloat(String(e)),r=parseFloat(String(s));return!isNaN(t)&&!isNaN(r)&&("greaterThan"===a?t>r:t<r)}default:return!0}},r=(e,t,a,r,l)=>0===t.length?e:e.filter((e=>{let n=!0;for(let i=0;i<t.length;i++){const o=t[i];let c=!1;if(l&&l[o.column]){const t=l[o.column](e,o);if(null!==t)c=t;else{const t=r(e,o.column);c=s(t,o)}}else{const t=r(e,o.column);c=s(t,o)}if(0===i)n=c;else{n="AND"===(a[i-1]||"AND")?n&&c:n||c}}return n})),l=(e,t)=>{if(!e)return!1;const a=new Date(e);if(isNaN(a.getTime()))return!1;let s;if("__TODAY__"===t.value){const e=new Date;e.setHours(0,0,0,0),s=e}else if(s=new Date(t.value),isNaN(s.getTime()))return!1;const r=new Date(a);r.setHours(0,0,0,0);const l=new Date(s);switch(l.setHours(0,0,0,0),t.operator){case"equals":return r.getTime()===l.getTime();case"before":return r<l;case"after":return r>l;default:return!0}},n=(e,t,a,s)=>{const r=a.value||"";if(r.startsWith("user-")){const t=parseInt(r.replace("user-",""),10);if(isNaN(t))return!1;const s=e===t;return"notEquals"===a.operator?!s:s}if(r.startsWith("role-")){const e=parseInt(r.replace("role-",""),10);if(isNaN(e))return!1;const s=t===e;return"notEquals"===a.operator?!s:s}if(""===r)return!0;if(void 0!==s){const e=s.toLowerCase(),t=r.toLowerCase();if("equals"===a.operator)return e===t;if("notEquals"===a.operator)return e!==t;if("contains"===a.operator)return e.includes(t)}return!1},i=(e,t,a,s,r,l)=>{const n=s.value||"";if(n.startsWith("user-")){const t=parseInt(n.replace("user-",""),10);if(isNaN(t))return!1;const r=e===t||a===t;return"notEquals"===s.operator?!r:r}if(n.startsWith("role-")){const e=parseInt(n.replace("role-",""),10);if(isNaN(e))return!1;const a=t===e;return"notEquals"===s.operator?!a:a}if(""===n)return!0;const i=n.toLowerCase();return"equals"===s.operator?(null===r||void 0===r?void 0:r.toLowerCase())===i||(null===l||void 0===l?void 0:l.toLowerCase())===i:"notEquals"===s.operator?(null===r||void 0===r?void 0:r.toLowerCase())!==i&&(null===l||void 0===l?void 0:l.toLowerCase())!==i:"contains"===s.operator&&((null===r||void 0===r?void 0:r.toLowerCase().includes(i))||(null===l||void 0===l?void 0:l.toLowerCase().includes(i)))}},8897:(e,t,a)=>{a.d(t,{A:()=>g});var s=a(5043),r=a(4117),l=a(7030),n=a(9626),i=a(2311),o=a(9531),c=a(4832),d=a(1909),x=a(9422),m=a(579);const h=e=>{let{id:t,label:a,index:s,isVisible:d,isDragging:x,isOver:h,onDragStart:g,onDragOver:u,onDragEnd:p,onToggleVisibility:f,sortDirection:b,onSortDirectionChange:w,showSortDirection:v=!1,sortOrder:y}=e;const{t:N}=(0,r.Bd)();return(0,m.jsxs)("li",{draggable:!0,onDragStart:()=>g(s),onDragOver:e=>{e.preventDefault(),u(s)},onDragEnd:p,className:"flex items-center justify-between px-2.5 py-2 rounded-md transition-colors duration-150\n        ".concat(x?"opacity-50 bg-gray-100 dark:bg-gray-700":"","\n        ").concat(h?"border-t-2 border-blue-500 dark:border-blue-400":"","\n        ").concat(x||h?"":"hover:bg-gray-50 dark:hover:bg-gray-700"),children:[(0,m.jsxs)("div",{className:"flex items-center flex-1 min-w-0",children:[(0,m.jsx)(l.A,{className:"h-4 w-4 mr-2 text-gray-400 dark:text-gray-500 cursor-move flex-shrink-0"}),(0,m.jsxs)("span",{className:"text-sm dark:text-gray-300 flex items-center gap-2",children:[v&&void 0!==y&&d&&(0,m.jsx)("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 px-1.5 py-0.5 rounded",children:y}),(0,m.jsx)("span",{children:a})]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-1",children:[v&&d&&void 0!==b&&w&&(0,m.jsx)("button",{onClick:e=>{e.stopPropagation(),w(t,"asc"===b?"desc":"asc")},className:"inline-flex items-center justify-center p-1.5 rounded-md bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-300 transition-colors duration-150",title:"".concat(N("tableColumn.sortDirection"),": ").concat(N("asc"===b?"tableColumn.ascending":"tableColumn.descending")," (").concat(N("tableColumn.clickToToggle"),")"),children:"asc"===b?(0,m.jsx)(n.A,{className:"h-4 w-4"}):(0,m.jsx)(i.A,{className:"h-4 w-4"})}),(0,m.jsx)("button",{onClick:()=>f(t),className:"inline-flex items-center justify-center p-1.5 rounded-full bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-300 transition-colors duration-150",title:N(d?"tableColumn.hideColumn":"tableColumn.showColumn"),children:d?(0,m.jsx)(o.A,{className:"w-4 h-4 dark:text-gray-300"}):(0,m.jsx)(c.A,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"})})]})]})},g=e=>{let{columns:t,visibleColumns:a,columnOrder:l,onToggleColumnVisibility:n,onMoveColumn:i,onClose:o,buttonTitle:c,modalTitle:g,sortDirections:u={},onSortDirectionChange:p,showSortDirection:f=!1}=e;const{t:b}=(0,r.Bd)(),w=c||b("tableColumn.configure"),v=g||b("tableColumn.configure"),[y,N]=(0,s.useState)(!1),[k,j]=(0,s.useState)(null),[C,S]=(0,s.useState)(null),A=(0,s.useRef)(null),D=[...t].sort(((e,t)=>{const a=l.indexOf(e.id),s=l.indexOf(t.id);return-1===a?1:-1===s?-1:a-s})),E=e=>{j(e),S(e)},O=e=>{S(e)},W=()=>{null!==k&&null!==C&&k!==C&&i(k,C),j(null),S(null)},F=()=>{N(!1),o()};return(0,s.useEffect)((()=>{const e=e=>{A.current&&!A.current.contains(e.target)&&F()};return y&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[y]),(0,m.jsxs)("div",{className:"relative",ref:A,children:[(0,m.jsx)("button",{className:"inline-flex items-center justify-center p-2 rounded-md bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-300 transition-colors duration-150",onClick:()=>N(!y),title:w,children:f?(0,m.jsx)(d.A,{className:"w-5 h-5"}):(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:(0,m.jsx)("path",{fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 012 10z",clipRule:"evenodd"})})}),y&&(0,m.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-md shadow-lg z-50 border border-gray-300 dark:border-gray-600",onDragOver:e=>e.preventDefault(),children:[(0,m.jsxs)("div",{className:"px-3 py-2.5 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[(0,m.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:v}),(0,m.jsx)("button",{onClick:F,className:"inline-flex items-center justify-center p-2 rounded-md bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-300 transition-colors duration-150",title:b("common.close"),children:(0,m.jsx)(x.A,{className:"w-5 h-5"})})]}),(0,m.jsx)("ul",{className:"px-2 py-1 max-h-64 overflow-y-auto",children:D.map(((e,t)=>{const s=D.filter((e=>a.includes(e.id))).findIndex((t=>t.id===e.id))+1,r=a.includes(e.id);return(0,m.jsx)(h,{id:e.id,label:e.label,index:t,isVisible:r,isDragging:k===t,isOver:C===t&&k!==t,onDragStart:E,onDragOver:O,onDragEnd:W,onToggleVisibility:n,sortDirection:f&&r?u[e.id]||"asc":void 0,onSortDirectionChange:f?p:void 0,showSortDirection:f,sortOrder:f&&r?s:void 0},e.id)}))})]})]})}}}]);
//# sourceMappingURL=686.174e0b4c.chunk.js.map