{"version":3,"file":"static/js/347.b49b464a.chunk.js","mappings":"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","sources":["api/apiClient.ts","../node_modules/@heroicons/react/24/outline/esm/ArrowDownTrayIcon.js","api/identificationDocumentApi.ts","../node_modules/@heroicons/react/24/outline/esm/BuildingOfficeIcon.js","components/IdentificationDocumentList.tsx","../node_modules/@heroicons/react/24/outline/esm/XCircleIcon.js","../node_modules/@heroicons/react/24/outline/esm/CalendarIcon.js","utils/deviceDetection.ts","../node_modules/@heroicons/react/24/outline/esm/CameraIcon.js","components/CameraCapture.tsx","components/IdentificationDocumentForm.tsx","utils/aiDocumentRecognition.ts"],"sourcesContent":["import axios, { AxiosRequestConfig, InternalAxiosRequestConfig } from 'axios';\nimport axiosInstance from '../config/axios.ts';\nimport { API_URL } from '../config/api.ts';\n\n// Debugausgaben für die API-Konfiguration\nconsole.log('DEBUGAUSGABE API-Client: API_URL ist:', API_URL);\n\n// Verwende die konfigurierte Instanz aus config/axios.ts\nconst apiClient = axiosInstance;\n\n// Request Interceptor für Debugging (zusätzlich zu dem in axios.ts)\napiClient.interceptors.request.use(\n  (config) => {\n    // Vollständige URL ausgeben\n    const fullUrl = `${config.baseURL}${config.url}`;\n    console.log('DEBUGAUSGABE API-Client: Vollständige Request URL:', fullUrl);\n    console.log('DEBUGAUSGABE API-Client: Request-Methode:', config.method?.toUpperCase());\n    console.log('DEBUGAUSGABE API-Client: Request-Headers:', config.headers);\n    console.log('DEBUGAUSGABE API-Client: Request-Daten:', config.data);\n    \n    const token = localStorage.getItem('token');\n    console.log('DEBUGAUSGABE API-Client: Token vorhanden:', !!token);\n    \n    return config;\n  },\n  (error) => {\n    console.error('DEBUGAUSGABE API-Client: Fehler im Request Interceptor:', error);\n    return Promise.reject(error);\n  }\n);\n\n// Response Interceptor für Debugging (zusätzlich zu dem in axios.ts)\napiClient.interceptors.response.use(\n  (response) => {\n    console.log('DEBUGAUSGABE API-Client: Response erhalten:', response.status, response.config.url);\n    return response;\n  },\n  (error) => {\n    console.error('DEBUGAUSGABE API-Client: Fehler im Response Interceptor:', error.message);\n    \n    if (error.response) {\n      console.error('DEBUGAUSGABE API-Client: Response Status:', error.response.status);\n      console.error('DEBUGAUSGABE API-Client: Response Daten:', error.response.data);\n    } else {\n      console.error('DEBUGAUSGABE API-Client: Keine Response erhalten');\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\n// User API\nexport const userApi = {\n  getAll: () => apiClient.get('/users'),\n  getById: (id: number) => apiClient.get(`/users/${id}`),\n  create: (data: any) => {\n    console.log('DEBUGAUSGABE API-Client: userApi.create wird aufgerufen mit Daten:', data);\n    try {\n      return apiClient.post('/users', data)\n        .then(response => {\n          console.log('DEBUGAUSGABE API-Client: userApi.create Antwort:', response);\n          return response;\n        })\n        .catch(error => {\n          console.error('DEBUGAUSGABE API-Client: userApi.create Fehler:', error.response || error);\n          throw error;\n        });\n    } catch (initError) {\n      console.error('DEBUGAUSGABE API-Client: Fehler vor dem API-Aufruf in userApi.create:', initError);\n      throw initError;\n    }\n  },\n  update: (id: number, data: any) => apiClient.put(`/users/${id}`, data),\n  updateRoles: (id: number, roleIds: number[]) => apiClient.put(`/users/${id}/roles`, { roleIds }),\n  updateBranches: (id: number, branchIds: number[]) => apiClient.put(`/users/${id}/branches`, { branchIds })\n};\n\n// Role API\nexport const roleApi = {\n  getAll: (branchId?: number) => {\n    console.log('DEBUGAUSGABE API-Client: roleApi.getAll wird aufgerufen', branchId ? `mit branchId=${branchId}` : '');\n    const url = branchId ? `/roles?branchId=${branchId}` : '/roles';\n    return apiClient.get(url)\n      .then(response => {\n        console.log('DEBUGAUSGABE API-Client: roleApi.getAll erfolgreich:', response.data.length, 'Rollen geladen');\n        return response;\n      })\n      .catch(error => {\n        console.error('DEBUGAUSGABE API-Client: roleApi.getAll Fehler:', error.message);\n        throw error;\n      });\n  },\n  getById: (id: number) => {\n    console.log(`DEBUGAUSGABE API-Client: roleApi.getById(${id}) wird aufgerufen`);\n    return apiClient.get(`/roles/${id}`);\n  },\n  create: (data: any) => {\n    console.log('DEBUGAUSGABE API-Client: roleApi.create wird aufgerufen mit Daten:', data);\n    try {\n      return apiClient.post('/roles', data)\n        .then(response => {\n          console.log('DEBUGAUSGABE API-Client: roleApi.create Antwort:', response);\n          return response;\n        })\n        .catch(error => {\n          console.error('DEBUGAUSGABE API-Client: roleApi.create Fehler:', error.response || error);\n          throw error;\n        });\n    } catch (initError) {\n      console.error('DEBUGAUSGABE API-Client: Fehler vor dem API-Aufruf in roleApi.create:', initError);\n      throw initError;\n    }\n  },\n  update: (id: number, data: any) => {\n    console.log(`DEBUGAUSGABE API-Client: roleApi.update für ID ${id} wird aufgerufen mit Daten:`, data);\n    try {\n      return apiClient.put(`/roles/${id}`, data)\n        .then(response => {\n          console.log('DEBUGAUSGABE API-Client: roleApi.update Antwort:', response);\n          return response;\n        })\n        .catch(error => {\n          console.error('DEBUGAUSGABE API-Client: roleApi.update Fehler:', error.response || error);\n          throw error;\n        });\n    } catch (initError) {\n      console.error('DEBUGAUSGABE API-Client: Fehler vor dem API-Aufruf in roleApi.update:', initError);\n      throw initError;\n    }\n  },\n  delete: (id: number) => {\n    console.log(`DEBUGAUSGABE API-Client: roleApi.delete(${id}) wird aufgerufen`);\n    return apiClient.delete(`/roles/${id}`);\n  },\n  getRoleBranches: (id: number) => {\n    console.log(`DEBUGAUSGABE API-Client: roleApi.getRoleBranches(${id}) wird aufgerufen`);\n    return apiClient.get(`/roles/${id}/branches`);\n  },\n  updateRoleBranches: (id: number, data: { allBranches?: boolean; branchIds?: number[] }) => {\n    console.log(`DEBUGAUSGABE API-Client: roleApi.updateRoleBranches(${id}) wird aufgerufen mit:`, data);\n    return apiClient.put(`/roles/${id}/branches`, data);\n  }\n};\n\n// Branch API\nexport const branchApi = {\n  getAll: (roleId?: number) => {\n    const url = roleId ? `/branches?roleId=${roleId}` : '/branches';\n    return apiClient.get(url);\n  },\n  getById: (id: number) => apiClient.get(`/branches/${id}`),\n  getUserBranches: () => apiClient.get('/branches/user'),\n  switchBranch: (branchId: number) => apiClient.put('/branches/switch', { branchId }),\n  create: (data: any) => apiClient.post('/branches', data),\n  update: (id: number, data: any) => apiClient.put(`/branches/${id}`, data),\n  delete: (id: number) => apiClient.delete(`/branches/${id}`)\n};\n\nexport default apiClient; ","import * as React from \"react\";\nfunction ArrowDownTrayIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowDownTrayIcon);\nexport default ForwardRef;","import apiClient from './apiClient.ts';\nimport { API_URL, API_ENDPOINTS } from '../config/api.ts';\nimport { IdentificationDocument } from '../types/interfaces.ts';\n\n// Alle Dokumente eines Benutzers abrufen\nexport const getUserDocuments = async (userId: number): Promise<IdentificationDocument[]> => {\n  try {\n    const response = await apiClient.get(API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.BY_USER(userId));\n    return response.data;\n  } catch (error) {\n    console.error('Fehler beim Abrufen der Identifikationsdokumente:', error);\n    throw error;\n  }\n};\n\n// Dokument hinzufügen mit Datei-Upload\nexport const addDocumentWithFile = async (\n  userId: number,\n  formData: FormData\n): Promise<IdentificationDocument> => {\n  try {\n    const response = await apiClient.post(\n      API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.BY_USER(userId),\n      formData,\n      {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      }\n    );\n    return response.data;\n  } catch (error) {\n    console.error('Fehler beim Hinzufügen des Dokuments:', error);\n    throw error;\n  }\n};\n\n// Dokument hinzufügen mit Kamerabild\nexport const addDocumentWithCameraImage = async (\n  userId: number,\n  imageData: string,\n  documentData: {\n    documentType: string;\n    documentNumber: string;\n    issuingCountry: string;\n    issueDate?: string;\n    expiryDate?: string;\n    issuingAuthority?: string;\n  }\n): Promise<IdentificationDocument> => {\n  try {\n    const response = await apiClient.post(\n      API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.BY_USER(userId),\n      {\n        ...documentData,\n        imageData\n      }\n    );\n    return response.data;\n  } catch (error) {\n    console.error('Fehler beim Hinzufügen des Dokuments mit Kamera:', error);\n    throw error;\n  }\n};\n\n// Dokument aktualisieren mit Datei-Upload\nexport const updateDocumentWithFile = async (\n  docId: number,\n  formData: FormData\n): Promise<IdentificationDocument> => {\n  try {\n    const response = await apiClient.put(\n      API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.BY_ID(docId),\n      formData,\n      {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      }\n    );\n    return response.data;\n  } catch (error) {\n    console.error('Fehler beim Aktualisieren des Dokuments:', error);\n    throw error;\n  }\n};\n\n// Dokument aktualisieren mit Kamerabild\nexport const updateDocumentWithCameraImage = async (\n  docId: number,\n  imageData: string,\n  documentData: {\n    documentNumber?: string;\n    issuingCountry?: string;\n    issueDate?: string;\n    expiryDate?: string;\n    issuingAuthority?: string;\n  }\n): Promise<IdentificationDocument> => {\n  try {\n    const response = await apiClient.put(\n      API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.BY_ID(docId),\n      {\n        ...documentData,\n        imageData\n      }\n    );\n    return response.data;\n  } catch (error) {\n    console.error('Fehler beim Aktualisieren des Dokuments mit Kamera:', error);\n    throw error;\n  }\n};\n\n// Dokument löschen\nexport const deleteDocument = async (docId: number): Promise<void> => {\n  try {\n    await apiClient.delete(API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.BY_ID(docId));\n  } catch (error) {\n    console.error('Fehler beim Löschen des Dokuments:', error);\n    throw error;\n  }\n};\n\n// Dokument verifizieren\nexport const verifyDocument = async (docId: number, adminId: number): Promise<void> => {\n  try {\n    await apiClient.post(\n      API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.VERIFY(docId),\n      { adminId }\n    );\n  } catch (error) {\n    console.error('Fehler bei der Verifizierung des Dokuments:', error);\n    throw error;\n  }\n};\n\n// URL für das Herunterladen des Dokuments generieren\nexport const getDocumentDownloadUrl = (docId: number): string => {\n  // Verwende window.location.origin für eine robuste absolute URL\n  return `${window.location.origin}/api${API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.DOWNLOAD(docId)}`;\n}; ","import * as React from \"react\";\nfunction BuildingOfficeIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(BuildingOfficeIcon);\nexport default ForwardRef;","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { IdentificationDocument } from '../types/interfaces.ts';\nimport * as idDocApi from '../api/identificationDocumentApi.ts';\nimport useMessage from '../hooks/useMessage.ts';\nimport IdentificationDocumentForm from './IdentificationDocumentForm.tsx';\nimport { useAuth } from '../hooks/useAuth.tsx';\n\ninterface IdentificationDocumentListProps {\n  userId: number;\n  isAdmin?: boolean;\n}\n\nconst IdentificationDocumentList: React.FC<IdentificationDocumentListProps> = ({ userId, isAdmin = false }) => {\n  const { t } = useTranslation();\n  const [documents, setDocuments] = useState<IdentificationDocument[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [editingDocument, setEditingDocument] = useState<IdentificationDocument | null>(null);\n  const [isDownloading, setIsDownloading] = useState<number | null>(null);\n  const { showMessage } = useMessage();\n  const { user: currentUser } = useAuth();\n\n  // Dokumente laden\n  const loadDocuments = async () => {\n    setLoading(true);\n    try {\n      const docs = await idDocApi.getUserDocuments(userId);\n      setDocuments(docs);\n      setError(null);\n    } catch (err: any) {\n      setError(err.message || t('identificationDocuments.loadError'));\n      showMessage(t('identificationDocuments.loadError'), 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Beim Laden der Komponente und wenn sich die userId ändert\n  useEffect(() => {\n    loadDocuments();\n  }, [userId]);\n\n  // Dokument löschen\n  const handleDeleteDocument = async (docId: number) => {\n    if (window.confirm(t('identificationDocuments.deleteConfirm'))) {\n      try {\n        await idDocApi.deleteDocument(docId);\n        showMessage(t('identificationDocuments.deleteSuccess'), 'success');\n        loadDocuments();\n      } catch (err: any) {\n        showMessage(`${t('identificationDocuments.deleteError')}: ${err.message || 'Unbekannter Fehler'}`, 'error');\n      }\n    }\n  };\n\n  // Dokument verifizieren (nur für Admins)\n  const handleVerifyDocument = async (docId: number) => {\n    if (!currentUser) {\n      showMessage(t('identificationDocuments.notAuthenticated'), 'error');\n      return;\n    }\n    \n    try {\n      await idDocApi.verifyDocument(docId, currentUser.id);\n      showMessage(t('identificationDocuments.verifySuccess'), 'success');\n      loadDocuments();\n    } catch (err: any) {\n      showMessage(`${t('identificationDocuments.verifyError')}: ${err.message || 'Unbekannter Fehler'}`, 'error');\n    }\n  };\n\n  // Dokument herunterladen\n  const handleDownloadDocument = async (docId: number) => {\n    setIsDownloading(docId);\n    try {\n      const url = idDocApi.getDocumentDownloadUrl(docId);\n      // Öffnen des Links in einem neuen Tab\n      window.open(url, '_blank');\n    } catch (err: any) {\n      showMessage(`${t('identificationDocuments.downloadError')}: ${err.message || 'Unbekannter Fehler'}`, 'error');\n    } finally {\n      setIsDownloading(null);\n    }\n  };\n\n  // Dokumenttyp formatieren\n  const formatDocumentType = (type: string): string => {\n    const typeMap: Record<string, string> = {\n      passport: t('identificationDocuments.types.passport'),\n      national_id: t('identificationDocuments.types.national_id'),\n      driving_license: t('identificationDocuments.types.driving_license'),\n      residence_permit: t('identificationDocuments.types.residence_permit'),\n      work_permit: t('identificationDocuments.types.work_permit'),\n      tax_id: t('identificationDocuments.types.tax_id'),\n      social_security: t('identificationDocuments.types.social_security'),\n    };\n    \n    return typeMap[type] || type;\n  };\n\n  // Datum formatieren\n  const formatDate = (dateString: string | null): string => {\n    if (!dateString) return '-';\n    try {\n      return new Date(dateString).toLocaleDateString('de-DE');\n    } catch {\n      return dateString;\n    }\n  };\n\n  if (showAddForm) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 shadow rounded-lg p-4\">\n        <h3 className=\"text-lg font-medium mb-4\">{t('identificationDocuments.addDocument')}</h3>\n        <IdentificationDocumentForm\n          userId={userId}\n          onDocumentSaved={() => {\n            setShowAddForm(false);\n            loadDocuments();\n          }}\n          onCancel={() => setShowAddForm(false)}\n        />\n      </div>\n    );\n  }\n\n  if (editingDocument) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 shadow rounded-lg p-4\">\n        <h3 className=\"text-lg font-medium mb-4\">{t('identificationDocuments.editDocument')}</h3>\n        <IdentificationDocumentForm\n          userId={userId}\n          document={editingDocument}\n          onDocumentSaved={() => {\n            setEditingDocument(null);\n            loadDocuments();\n          }}\n          onCancel={() => setEditingDocument(null)}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 shadow rounded-lg p-4\">\n      <div className=\"flex justify-between items-center mb-4\">\n        <h3 className=\"text-lg font-medium\">{t('identificationDocuments.title')}</h3>\n        <button\n          onClick={() => setShowAddForm(true)}\n          className=\"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700\"\n        >\n          {t('identificationDocuments.newDocument')}\n        </button>\n      </div>\n\n      {loading ? (\n        <div className=\"flex justify-center items-center p-4\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-white\"></div>\n        </div>\n      ) : error ? (\n        <div className=\"text-red-600 p-4\">{error}</div>\n      ) : documents.length === 0 ? (\n        <div className=\"text-gray-500 dark:text-gray-400 p-4\">\n          {t('identificationDocuments.noDocuments')}\n        </div>\n      ) : (\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n            <thead className=\"bg-gray-50 dark:bg-gray-700\">\n              <tr>\n                <th scope=\"col\" className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  {t('identificationDocuments.columns.type')}\n                </th>\n                <th scope=\"col\" className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  {t('identificationDocuments.columns.number')}\n                </th>\n                <th scope=\"col\" className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  {t('identificationDocuments.columns.country')}\n                </th>\n                <th scope=\"col\" className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  {t('identificationDocuments.columns.validFrom')}\n                </th>\n                <th scope=\"col\" className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  {t('identificationDocuments.columns.validTo')}\n                </th>\n                <th scope=\"col\" className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  {t('identificationDocuments.columns.status')}\n                </th>\n                <th scope=\"col\" className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  {t('identificationDocuments.columns.actions')}\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700\">\n              {documents.map((doc) => (\n                <tr key={doc.id}>\n                  <td className=\"px-3 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                    {formatDocumentType(doc.documentType)}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                    {doc.documentNumber}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                    {doc.issuingCountry}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                    {formatDate(doc.issueDate)}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                    {formatDate(doc.expiryDate)}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap text-sm\">\n                    {doc.isVerified ? (\n                      <span className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100\">\n                        {t('identificationDocuments.status.verified')}\n                      </span>\n                    ) : (\n                      <span className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-700 dark:text-yellow-100\">\n                        {t('identificationDocuments.status.pending')}\n                      </span>\n                    )}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap text-sm font-medium\">\n                    <div className=\"flex space-x-2\">\n                      <button\n                        onClick={() => handleDownloadDocument(doc.id)}\n                        className=\"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300\"\n                        disabled={isDownloading === doc.id}\n                      >\n                        {isDownloading === doc.id ? t('identificationDocuments.actions.downloading') : t('identificationDocuments.actions.view')}\n                      </button>\n                      <button\n                        onClick={() => setEditingDocument(doc)}\n                        className=\"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300\"\n                      >\n                        {t('identificationDocuments.actions.edit')}\n                      </button>\n                      <button\n                        onClick={() => handleDeleteDocument(doc.id)}\n                        className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300\"\n                      >\n                        {t('identificationDocuments.actions.delete')}\n                      </button>\n                      {isAdmin && !doc.isVerified && (\n                        <button\n                          onClick={() => handleVerifyDocument(doc.id)}\n                          className=\"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300\"\n                        >\n                          {t('identificationDocuments.actions.verify')}\n                        </button>\n                      )}\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default IdentificationDocumentList; ","import * as React from \"react\";\nfunction XCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(XCircleIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CalendarIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CalendarIcon);\nexport default ForwardRef;","/**\r\n * Überprüft, ob das aktuelle Gerät ein mobiles Gerät ist\r\n * Basierend auf User-Agent und/oder Bildschirmgröße\r\n */\r\nexport const isMobile = (): boolean => {\r\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth < 768;\r\n};\r\n\r\n/**\r\n * Überprüft, ob das Gerät über eine Kamera verfügt\r\n * Versucht, auf die Kameraeinrichtungen zuzugreifen\r\n */\r\nexport const hasCamera = async (): Promise<boolean> => {\r\n  if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\r\n    return false;\r\n  }\r\n\r\n  try {\r\n    const devices = await navigator.mediaDevices.enumerateDevices();\r\n    return devices.some(device => device.kind === 'videoinput');\r\n  } catch (error) {\r\n    console.error('Fehler beim Überprüfen der Kameraverfügbarkeit:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Überprüft, ob der User-Agent auf ein Android-Gerät hinweist\r\n */\r\nexport const isAndroid = (): boolean => {\r\n  return /Android/i.test(navigator.userAgent);\r\n};\r\n\r\n/**\r\n * Überprüft, ob der User-Agent auf ein iOS-Gerät hinweist\r\n */\r\nexport const isIOS = (): boolean => {\r\n  return /iPhone|iPad|iPod/i.test(navigator.userAgent);\r\n}; ","import * as React from \"react\";\nfunction CameraIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CameraIcon);\nexport default ForwardRef;","import React, { useState, useRef, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { isMobile } from '../utils/deviceDetection.ts';\nimport { XMarkIcon, CameraIcon, ArrowPathIcon, CheckIcon } from '@heroicons/react/24/outline';\n\ninterface CameraCaptureProps {\n  onCapture: (imageData: string) => void;\n  onCancel: () => void;\n}\n\nconst CameraCapture: React.FC<CameraCaptureProps> = ({ onCapture, onCancel }) => {\n  const { t } = useTranslation();\n  const [stream, setStream] = useState<MediaStream | null>(null);\n  const [capturedImage, setCapturedImage] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  // Starte die Kamera\n  const startCamera = async () => {\n    try {\n      // Rücksetzen des Fehlers\n      setError(null);\n      \n      // Versuche, die Kamera zu verwenden (Rückkamera bevorzugt)\n      const mediaStream = await navigator.mediaDevices.getUserMedia({ \n        video: { facingMode: 'environment' } \n      });\n      setStream(mediaStream);\n      \n      if (videoRef.current) {\n        videoRef.current.srcObject = mediaStream;\n      }\n    } catch (error) {\n      console.error('Fehler beim Zugriff auf die Kamera:', error);\n      setError(t('camera.accessError'));\n    }\n  };\n\n  // Stoppe die Kamera\n  const stopCamera = () => {\n    if (stream) {\n      stream.getTracks().forEach(track => track.stop());\n      setStream(null);\n    }\n  };\n\n  // Nehme ein Bild auf\n  const captureImage = () => {\n    if (videoRef.current && canvasRef.current) {\n      const canvas = canvasRef.current;\n      const video = videoRef.current;\n      \n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      \n      const ctx = canvas.getContext('2d');\n      if (ctx) {\n        ctx.drawImage(video, 0, 0);\n        const imageData = canvas.toDataURL('image/jpeg', 0.9); // 90% Qualität für bessere Kompression\n        setCapturedImage(imageData);\n        stopCamera();\n      }\n    }\n  };\n\n  // Bild bestätigen\n  const confirmImage = () => {\n    if (capturedImage) {\n      onCapture(capturedImage);\n    }\n  };\n\n  // Neues Bild aufnehmen\n  const retakeImage = () => {\n    setCapturedImage(null);\n    startCamera();\n  };\n\n  // Kamera beim Laden der Komponente starten\n  useEffect(() => {\n    if (isMobile()) {\n      startCamera();\n    }\n    \n    // Aufräumen beim Entfernen der Komponente\n    return () => {\n      stopCamera();\n    };\n  }, []);\n\n  // Falls kein mobiles Gerät, zeige eine Meldung\n  if (!isMobile()) {\n    return (\n      <div className=\"p-4 text-center dark:bg-gray-800 dark:text-white\">\n        <p className=\"mb-4\">{t('camera.onlyMobile')}</p>\n        <div className=\"relative group\">\n          <button \n            className=\"p-2 bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600 rounded-md\"\n            onClick={onCancel}\n          >\n            <XMarkIcon className=\"h-5 w-5\" />\n          </button>\n          <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n            {t('camera.back')}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"camera-capture p-2 dark:bg-gray-800\">\n      <canvas ref={canvasRef} className=\"hidden\" />\n      \n      {error && (\n        <div className=\"error bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded mb-4\">\n          <p>{error}</p>\n          <div className=\"relative group mt-2\">\n            <button \n              className=\"p-2 bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600 rounded-md\"\n              onClick={onCancel}\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n              {t('camera.back')}\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {!error && !capturedImage ? (\n        <>\n          <div className=\"video-container mb-4 rounded overflow-hidden border border-gray-300 dark:border-gray-700\">\n            <video \n              ref={videoRef} \n              autoPlay \n              playsInline \n              className=\"w-full h-auto\"\n            />\n          </div>\n          \n          <div className=\"flex justify-between\">\n            <div className=\"relative group\">\n              <button \n                className=\"p-2 bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600 rounded-md\"\n                onClick={onCancel}\n              >\n                <XMarkIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                Abbrechen\n              </div>\n            </div>\n            <div className=\"relative group\">\n              <button \n                className=\"p-2 bg-blue-500 dark:bg-blue-600 text-white rounded-md hover:bg-blue-600 dark:hover:bg-blue-700\"\n                onClick={captureImage}\n              >\n                <CameraIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                Foto aufnehmen\n              </div>\n            </div>\n          </div>\n        </>\n      ) : !error && capturedImage ? (\n        <>\n          <div className=\"preview-container mb-4 rounded overflow-hidden border border-gray-300 dark:border-gray-700\">\n            <img \n              src={capturedImage} \n              alt=\"Aufgenommenes Dokument\" \n              className=\"w-full h-auto\"\n            />\n          </div>\n          \n          <div className=\"flex justify-between\">\n            <div className=\"relative group\">\n              <button \n                className=\"p-2 bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600 rounded-md\"\n                onClick={retakeImage}\n              >\n                <ArrowPathIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                Neu aufnehmen\n              </div>\n            </div>\n            <div className=\"relative group\">\n              <button \n                className=\"p-2 bg-green-500 dark:bg-green-600 text-white rounded-md hover:bg-green-600 dark:hover:bg-green-700\"\n                onClick={confirmImage}\n              >\n                <CheckIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                Verwenden\n              </div>\n            </div>\n          </div>\n        </>\n      ) : null}\n    </div>\n  );\n};\n\nexport default CameraCapture; ","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { IdentificationDocument } from '../types/interfaces.ts';\nimport * as idDocApi from '../api/identificationDocumentApi.ts';\nimport useMessage from '../hooks/useMessage.ts';\nimport { isMobile } from '../utils/deviceDetection.ts';\nimport CameraCapture from './CameraCapture.tsx';\nimport { recognizeDocument } from '../utils/documentRecognition.ts';\nimport { recognizeDocumentWithAI } from '../utils/aiDocumentRecognition.ts';\nimport { CameraIcon, DocumentTextIcon, ArrowPathIcon as SpinnerIcon, XMarkIcon, CheckIcon } from '@heroicons/react/24/outline';\n\ninterface IdentificationDocumentFormProps {\n  userId: number;\n  document?: IdentificationDocument;\n  onDocumentSaved: () => void;\n  onCancel: () => void;\n}\n\nconst IdentificationDocumentForm: React.FC<IdentificationDocumentFormProps> = ({\n  userId,\n  document,\n  onDocumentSaved,\n  onCancel,\n}) => {\n  const { t } = useTranslation();\n  const [documentType, setDocumentType] = useState(document?.documentType || '');\n  const [documentNumber, setDocumentNumber] = useState(document?.documentNumber || '');\n  const [issueDate, setIssueDate] = useState(document?.issueDate ? document.issueDate.substring(0, 10) : '');\n  const [expiryDate, setExpiryDate] = useState(document?.expiryDate ? document.expiryDate.substring(0, 10) : '');\n  const [issuingCountry, setIssuingCountry] = useState(document?.issuingCountry || '');\n  const [issuingAuthority, setIssuingAuthority] = useState(document?.issuingAuthority || '');\n  const [file, setFile] = useState<File | null>(null);\n  const [imageData, setImageData] = useState<string | null>(null);\n  const [showCamera, setShowCamera] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isRecognizing, setIsRecognizing] = useState<boolean>(false);\n  const [recognitionError, setRecognitionError] = useState<string | null>(null);\n  \n  const { showMessage } = useMessage();\n  \n  // Liste der Dokumenttypen - dynamisch aus Übersetzungen\n  const documentTypes = [\n    { value: 'passport', label: t('identificationDocuments.types.passport') },\n    { value: 'national_id', label: t('identificationDocuments.types.national_id') },\n    { value: 'driving_license', label: t('identificationDocuments.types.driving_license') },\n    { value: 'residence_permit', label: t('identificationDocuments.types.residence_permit') },\n    { value: 'work_permit', label: t('identificationDocuments.types.work_permit') },\n    { value: 'tax_id', label: t('identificationDocuments.types.tax_id') },\n    { value: 'social_security', label: t('identificationDocuments.types.social_security') },\n  ];\n  \n  // Behandle Änderungen der Datei\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      setFile(e.target.files[0]);\n      setImageData(null); // Zurücksetzen des Kamerabilds, wenn eine Datei ausgewählt wird\n    }\n  };\n  \n  // Behandle Kameraaufnahme\n  const handleCameraCapture = (capturedImageData: string) => {\n    setImageData(capturedImageData);\n    setShowCamera(false);\n    setFile(null); // Zurücksetzen der Datei, wenn ein Bild aufgenommen wird\n  };\n  \n  // Abbrechen der Kameraaufnahme\n  const handleCameraCancel = () => {\n    setShowCamera(false);\n  };\n  \n  // Funktion zur automatischen Dokumentenerkennung\n  const handleAutoRecognize = async () => {\n    try {\n      setIsRecognizing(true);\n      setRecognitionError(null);\n      \n      // Stelle sicher, dass ein Bild vorhanden ist\n      if (!file && !imageData) {\n        throw new Error(t('identificationDocuments.form.noDocumentUploaded'));\n      }\n      \n      // Verwende das hochgeladene Bild oder das aufgenommene Foto\n      let documentImage: string | null = null;\n      \n      if (file) {\n        // Konvertiere Datei zu base64\n        documentImage = await new Promise<string>((resolve, reject) => {\n          const reader = new FileReader();\n          reader.onload = () => resolve(reader.result as string);\n          reader.onerror = reject;\n          reader.readAsDataURL(file);\n        });\n      } else if (imageData) {\n        documentImage = imageData;\n      }\n      \n      if (!documentImage) {\n        throw new Error(t('identificationDocuments.form.noImageData'));\n      }\n      \n      // KI-basierte Dokumentenerkennung starten\n      const recognizedData = await recognizeDocumentWithAI(documentImage);\n      \n      console.log(\"Erkannte Daten:\", recognizedData);\n      \n      // Formularfelder mit erkannten Daten befüllen\n      if (recognizedData.documentType) {\n        setDocumentType(recognizedData.documentType);\n      }\n      \n      if (recognizedData.documentNumber) {\n        setDocumentNumber(recognizedData.documentNumber);\n      }\n      \n      if (recognizedData.issueDate) {\n        setIssueDate(recognizedData.issueDate);\n      }\n      \n      if (recognizedData.expiryDate) {\n        setExpiryDate(recognizedData.expiryDate);\n      }\n      \n      if (recognizedData.issuingCountry) {\n        setIssuingCountry(recognizedData.issuingCountry);\n      }\n      \n      if (recognizedData.issuingAuthority) {\n        setIssuingAuthority(recognizedData.issuingAuthority);\n      }\n      \n      // Erfolgsmeldung anzeigen\n      showMessage(t('identificationDocuments.form.recognitionSuccess'), 'success');\n      \n    } catch (error) {\n      console.error(\"Fehler bei der automatischen Erkennung:\", error);\n      setRecognitionError((error as Error).message);\n      showMessage(t('identificationDocuments.form.recognitionError', { error: (error as Error).message }), 'error');\n    } finally {\n      setIsRecognizing(false);\n    }\n  };\n  \n  // Formular absenden\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!documentType || !documentNumber || !issuingCountry) {\n      showMessage(t('identificationDocuments.form.fillRequiredFields'), 'error');\n      return;\n    }\n    \n    setIsLoading(true);\n    \n    try {\n      if (document) {\n        // Aktualisieren eines bestehenden Dokuments\n        if (file) {\n          // Mit Datei aktualisieren\n          const formData = new FormData();\n          if (documentNumber) formData.append('documentNumber', documentNumber);\n          if (issueDate) formData.append('issueDate', issueDate);\n          if (expiryDate) formData.append('expiryDate', expiryDate);\n          if (issuingCountry) formData.append('issuingCountry', issuingCountry);\n          if (issuingAuthority) formData.append('issuingAuthority', issuingAuthority);\n          formData.append('documentFile', file);\n          \n          await idDocApi.updateDocumentWithFile(document.id, formData);\n        } else if (imageData) {\n          // Mit Kamerabild aktualisieren\n          await idDocApi.updateDocumentWithCameraImage(\n            document.id,\n            imageData,\n            {\n              documentNumber,\n              issuingCountry,\n              issueDate,\n              expiryDate,\n              issuingAuthority\n            }\n          );\n        } else {\n          // Nur Textdaten aktualisieren\n          const formData = new FormData();\n          if (documentNumber) formData.append('documentNumber', documentNumber);\n          if (issueDate) formData.append('issueDate', issueDate);\n          if (expiryDate) formData.append('expiryDate', expiryDate);\n          if (issuingCountry) formData.append('issuingCountry', issuingCountry);\n          if (issuingAuthority) formData.append('issuingAuthority', issuingAuthority);\n          \n          await idDocApi.updateDocumentWithFile(document.id, formData);\n        }\n        \n        showMessage(t('identificationDocuments.form.updateSuccess'), 'success');\n      } else {\n        // Erstellen eines neuen Dokuments\n        if (file) {\n          // Mit Datei erstellen\n          const formData = new FormData();\n          formData.append('documentType', documentType);\n          formData.append('documentNumber', documentNumber);\n          formData.append('issuingCountry', issuingCountry);\n          if (issueDate) formData.append('issueDate', issueDate);\n          if (expiryDate) formData.append('expiryDate', expiryDate);\n          if (issuingAuthority) formData.append('issuingAuthority', issuingAuthority);\n          formData.append('documentFile', file);\n          \n          await idDocApi.addDocumentWithFile(userId, formData);\n        } else if (imageData) {\n          // Mit Kamerabild erstellen\n          await idDocApi.addDocumentWithCameraImage(\n            userId,\n            imageData,\n            {\n              documentType,\n              documentNumber,\n              issuingCountry,\n              issueDate,\n              expiryDate,\n              issuingAuthority\n            }\n          );\n        } else {\n          // Ohne Bild erstellen\n          const formData = new FormData();\n          formData.append('documentType', documentType);\n          formData.append('documentNumber', documentNumber);\n          formData.append('issuingCountry', issuingCountry);\n          if (issueDate) formData.append('issueDate', issueDate);\n          if (expiryDate) formData.append('expiryDate', expiryDate);\n          if (issuingAuthority) formData.append('issuingAuthority', issuingAuthority);\n          \n          await idDocApi.addDocumentWithFile(userId, formData);\n        }\n        \n        showMessage(t('identificationDocuments.form.createSuccess'), 'success');\n      }\n      \n      onDocumentSaved();\n    } catch (error: any) {\n      showMessage(t('identificationDocuments.form.error', { error: error.response?.data?.error || t('common.error') }), 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Wenn die Kamera angezeigt wird\n  if (showCamera) {\n    return <CameraCapture onCapture={handleCameraCapture} onCancel={handleCameraCancel} />;\n  }\n  \n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div>\n        <label htmlFor=\"documentType\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('identificationDocuments.form.documentType')} <span className=\"text-red-600 dark:text-red-400\">*</span>\n        </label>\n        <select\n          id=\"documentType\"\n          value={documentType}\n          onChange={(e) => setDocumentType(e.target.value)}\n          className=\"mt-1 block w-full py-2 px-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:text-white\"\n          required\n        >\n          <option value=\"\">{t('identificationDocuments.form.selectDocumentType')}</option>\n          {documentTypes.map((type) => (\n            <option key={type.value} value={type.value}>{type.label}</option>\n          ))}\n        </select>\n      </div>\n      \n      <div>\n        <label htmlFor=\"documentNumber\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('identificationDocuments.form.documentNumber')} <span className=\"text-red-600 dark:text-red-400\">*</span>\n        </label>\n        <input\n          type=\"text\"\n          id=\"documentNumber\"\n          value={documentNumber}\n          onChange={(e) => setDocumentNumber(e.target.value)}\n          className=\"mt-1 block w-full py-2 px-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:text-white\"\n          required\n        />\n      </div>\n      \n      <div>\n        <label htmlFor=\"issuingCountry\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('identificationDocuments.form.issuingCountry')} <span className=\"text-red-600 dark:text-red-400\">*</span>\n        </label>\n        <input\n          type=\"text\"\n          id=\"issuingCountry\"\n          value={issuingCountry}\n          onChange={(e) => setIssuingCountry(e.target.value)}\n          className=\"mt-1 block w-full py-2 px-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:text-white\"\n          required\n        />\n      </div>\n      \n      <div>\n        <label htmlFor=\"issuingAuthority\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('identificationDocuments.form.issuingAuthority')}\n        </label>\n        <input\n          type=\"text\"\n          id=\"issuingAuthority\"\n          value={issuingAuthority}\n          onChange={(e) => setIssuingAuthority(e.target.value)}\n          className=\"mt-1 block w-full py-2 px-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:text-white\"\n        />\n      </div>\n      \n      <div>\n        <label htmlFor=\"issueDate\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('identificationDocuments.form.issueDate')}\n        </label>\n        <input\n          type=\"date\"\n          id=\"issueDate\"\n          value={issueDate}\n          onChange={(e) => setIssueDate(e.target.value)}\n          className=\"mt-1 block w-full py-2 px-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:text-white\"\n        />\n      </div>\n      \n      <div>\n        <label htmlFor=\"expiryDate\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('identificationDocuments.form.expiryDate')}\n        </label>\n        <input\n          type=\"date\"\n          id=\"expiryDate\"\n          value={expiryDate}\n          onChange={(e) => setExpiryDate(e.target.value)}\n          className=\"mt-1 block w-full py-2 px-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:text-white\"\n        />\n      </div>\n      \n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('identificationDocuments.form.documentImage')}\n        </label>\n        <div className=\"mt-1 flex items-center space-x-2\">\n          <label className=\"flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 cursor-pointer\">\n            <DocumentTextIcon className=\"h-5 w-5 mr-2 text-gray-500 dark:text-gray-400\" />\n            {t('identificationDocuments.form.uploadFile')}\n            <input type=\"file\" className=\"sr-only\" onChange={handleFileChange} accept=\"image/*\" />\n          </label>\n          \n          {isMobile() && (\n            <button\n              type=\"button\"\n              onClick={() => setShowCamera(true)}\n              className=\"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600\"\n            >\n              <CameraIcon className=\"h-5 w-5 mr-2 text-gray-500 dark:text-gray-400\" />\n              {t('identificationDocuments.form.takePhoto')}\n            </button>\n          )}\n          \n          <button\n            type=\"button\"\n            onClick={handleAutoRecognize}\n            disabled={isRecognizing || (!file && !imageData)}\n            className={`inline-flex items-center px-4 py-2 border rounded-md shadow-sm text-sm font-medium ${\n              isRecognizing || (!file && !imageData)\n                ? 'bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500 border-gray-300 dark:border-gray-700 cursor-not-allowed'\n                : 'border-blue-300 dark:border-blue-700 text-blue-700 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 hover:bg-blue-100 dark:hover:bg-blue-900/50'\n            }`}\n          >\n            {isRecognizing ? (\n              <>\n                <SpinnerIcon className=\"h-5 w-5 mr-2 animate-spin\" />\n                {t('identificationDocuments.form.recognitionRunning')}\n              </>\n            ) : (\n              t('identificationDocuments.form.autoRecognize')\n            )}\n          </button>\n        </div>\n        \n        {file && (\n          <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n            {t('identificationDocuments.form.selectedFile', { name: file.name })}\n          </p>\n        )}\n        \n        {imageData && (\n          <div className=\"mt-2\">\n            <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-1\">{t('identificationDocuments.form.capturedImage')}</p>\n            <img src={imageData} alt={t('identificationDocuments.form.capturedDocument')} className=\"max-h-40 border dark:border-gray-700 rounded\" />\n          </div>\n        )}\n        \n        {recognitionError && (\n          <p className=\"mt-2 text-sm text-red-600 dark:text-red-400\">\n            {t('identificationDocuments.form.recognitionErrorLabel', { error: recognitionError })}\n          </p>\n        )}\n      </div>\n      \n      <div className=\"flex justify-end space-x-3 pt-4\">\n        <button\n          type=\"button\"\n          onClick={onCancel}\n          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n          title={t('common.cancel')}\n        >\n          <XMarkIcon className=\"h-5 w-5\" />\n        </button>\n        \n        <button\n          type=\"submit\"\n          className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n          disabled={isLoading}\n          title={isLoading ? t('common.saving') : document ? t('identificationDocuments.form.update') : t('common.save')}\n        >\n          {isLoading ? (\n            <SpinnerIcon className=\"h-5 w-5 animate-spin\" />\n          ) : (\n            <CheckIcon className=\"h-5 w-5\" />\n          )}\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default IdentificationDocumentForm; ","import { IdentificationDocument } from '../types/interfaces.ts';\nimport { API_URL } from '../config/api.ts';\n\n/**\n * KI-basierte Dokumenterkennung\n * Diese Funktion sendet ein Bild an die OpenAI API (über einen einfachen Proxy)\n * und erhält strukturierte Dokumentdaten zurück\n * \n * Kostenhinweis: Die OpenAI API ist kostenpflichtig, aber sehr günstig für diesen Anwendungsfall\n * (ca. 0,01-0,02€ pro Erkennung mit GPT-4 Vision)\n */\nexport const recognizeDocumentWithAI = async (imageData: string): Promise<Partial<IdentificationDocument>> => {\n  try {\n    console.log('Starte KI-basierte Dokumentenerkennung...');\n    \n    // Überprüfe das Bild-Format\n    if (!imageData.startsWith('data:image')) {\n      // Wenn es kein Data-URL ist, konvertiere es\n      if (imageData.startsWith('/9j/')) {\n        imageData = 'data:image/jpeg;base64,' + imageData;\n      } else if (imageData.startsWith('iVBOR')) {\n        imageData = 'data:image/png;base64,' + imageData;\n      } else {\n        // Generisches Format\n        imageData = 'data:image/jpeg;base64,' + imageData;\n      }\n    }\n    \n    // Hole den Auth-Token aus dem lokalen Speicher\n    const token = localStorage.getItem('token');\n    if (!token) {\n      throw new Error('Nicht authentifiziert. Bitte melden Sie sich an.');\n    }\n    \n    // Die vollständige API-URL verwenden\n    const apiEndpoint = `${API_URL}/document-recognition`;\n    console.log('Verwende API-Endpunkt:', apiEndpoint);\n    \n    // POST-Anfrage an den API-Endpunkt (ohne nachgestellten Schrägstrich)\n    const response = await fetch(apiEndpoint, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n      credentials: 'include', // Cookies und Auth-Daten senden\n      mode: 'cors', // Explizit CORS-Modus aktivieren\n      body: JSON.stringify({ \n        image: imageData,\n        // Optional weitere Parameter wie Dokumenttyp\n        documentType: 'id_card' \n      })\n    });\n    \n    if (!response.ok) {\n      const errorText = await response.text();\n      throw new Error(`API-Anfrage fehlgeschlagen: ${response.status} ${errorText}`);\n    }\n    \n    const result = await response.json();\n    console.log('KI-Ergebnis:', result);\n    \n    return result;\n  } catch (error) {\n    console.error('Fehler bei der KI-basierten Dokumentenerkennung:', error);\n    \n    // Bei Fehlern ein leeres Objekt zurückgeben\n    return {}; \n  }\n}; "],"names":["console","log","API_URL","apiClient","axiosInstance","interceptors","request","use","config","_config$method","fullUrl","concat","baseURL","url","method","toUpperCase","headers","data","token","localStorage","getItem","error","Promise","reject","response","status","message","userApi","getAll","get","getById","id","create","post","then","catch","initError","update","put","updateRoles","roleIds","updateBranches","branchIds","roleApi","branchId","length","delete","getRoleBranches","updateRoleBranches","branchApi","roleId","getUserBranches","switchBranch","ArrowDownTrayIcon","_ref","svgRef","title","titleId","props","_objectWithoutProperties","_excluded","React","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","strokeLinecap","strokeLinejoin","d","getUserDocuments","async","API_ENDPOINTS","IDENTIFICATION_DOCUMENTS","BY_USER","userId","addDocumentWithFile","formData","addDocumentWithCameraImage","imageData","documentData","_objectSpread","updateDocumentWithFile","docId","BY_ID","updateDocumentWithCameraImage","deleteDocument","verifyDocument","adminId","VERIFY","getDocumentDownloadUrl","window","location","origin","DOWNLOAD","BuildingOfficeIcon","isAdmin","t","useTranslation","documents","setDocuments","useState","loading","setLoading","setError","showAddForm","setShowAddForm","editingDocument","setEditingDocument","isDownloading","setIsDownloading","showMessage","useMessage","user","currentUser","useAuth","loadDocuments","docs","idDocApi","err","useEffect","formatDate","dateString","Date","toLocaleDateString","_unused","_jsxs","className","children","_jsx","IdentificationDocumentForm","onDocumentSaved","onCancel","document","onClick","scope","map","doc","type","documentType","passport","national_id","driving_license","residence_permit","work_permit","tax_id","social_security","documentNumber","issuingCountry","issueDate","expiryDate","isVerified","open","handleDownloadDocument","disabled","confirm","handleDeleteDocument","handleVerifyDocument","XCircleIcon","CalendarIcon","isMobile","test","navigator","userAgent","innerWidth","CameraIcon","onCapture","stream","setStream","capturedImage","setCapturedImage","videoRef","useRef","canvasRef","startCamera","mediaStream","mediaDevices","getUserMedia","video","facingMode","current","srcObject","stopCamera","getTracks","forEach","track","stop","XMarkIcon","_Fragment","src","alt","retakeImage","ArrowPathIcon","confirmImage","CheckIcon","autoPlay","playsInline","captureImage","canvas","width","videoWidth","height","videoHeight","ctx","getContext","drawImage","toDataURL","setDocumentType","setDocumentNumber","setIssueDate","substring","setExpiryDate","setIssuingCountry","issuingAuthority","setIssuingAuthority","file","setFile","setImageData","showCamera","setShowCamera","isLoading","setIsLoading","isRecognizing","setIsRecognizing","recognitionError","setRecognitionError","documentTypes","value","label","handleCameraCapture","capturedImageData","handleCameraCancel","CameraCapture","onSubmit","e","preventDefault","FormData","append","_error$response","_error$response$data","htmlFor","onChange","target","required","DocumentTextIcon","files","accept","Error","documentImage","resolve","reader","FileReader","onload","result","onerror","readAsDataURL","recognizedData","startsWith","apiEndpoint","fetch","credentials","mode","body","JSON","stringify","image","ok","errorText","text","json","recognizeDocumentWithAI","SpinnerIcon","name"],"sourceRoot":""}