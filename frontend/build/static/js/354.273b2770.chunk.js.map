{"version":3,"file":"static/js/354.273b2770.chunk.js","mappings":"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","sources":["utils/dateUtils.ts","components/MarkdownPreview.tsx"],"sourcesContent":["import { format, parseISO, differenceInMinutes, parse, getWeek, getYear, addDays, startOfWeek } from 'date-fns';\nimport { de } from 'date-fns/locale';\n\n/**\n * Utility-Funktionen f√ºr die Datums- und Zeitverarbeitung im Frontend.\n * Diese Funktionen sorgen f√ºr eine konsistente Handhabung von Datum und Zeit\n * in allen Komponenten.\n */\n\n/**\n * Formatiert ein Datum f√ºr die Anzeige im deutschen Format.\n * @param dateString Das zu formatierende Datum im Format YYYY-MM-DD\n * @returns Formatiertes Datum im Format DD.MM.YYYY oder '-' bei Fehler\n */\nexport const formatDate = (dateString: string): string => {\n    if (!dateString) return '-';\n    \n    try {\n        // Wir erstellen ein neues Date-Objekt und setzen die Uhrzeit auf 12:00 Mittag\n        // um Probleme mit Zeitzonen zu vermeiden\n        const dateParts = dateString.split('-');\n        if (dateParts.length !== 3) return '-';\n        \n        const year = parseInt(dateParts[0]);\n        const month = parseInt(dateParts[1]) - 1; // Monate sind 0-basiert in JavaScript\n        const day = parseInt(dateParts[2]);\n        \n        const date = new Date(year, month, day, 12, 0, 0);\n        \n        return date.toLocaleDateString('de-DE', {\n            day: '2-digit',\n            month: '2-digit',\n            year: 'numeric'\n        });\n    } catch (error) {\n        console.error('Fehler beim Formatieren des Datums:', error);\n        return '-';\n    }\n};\n\n/**\n * Formatiert eine Zeit f√ºr die Anzeige basierend auf UTC.\n * @param dateString Das zu formatierende Datum im ISO-Format\n * @returns Formatierte Zeit im Format HH:MM oder '-' bei Fehler\n */\nexport const formatTime = (dateString: string): string => {\n    if (!dateString) return '-';\n    \n    try {\n        // Direkt aus dem ISO-String die Uhrzeit extrahieren ohne Umrechnung\n        const date = parseISO(dateString);\n        \n        // Verwende UTC-Stunden und -Minuten, um die DB-Zeit direkt zu zeigen\n        const hours = date.getUTCHours().toString().padStart(2, '0');\n        const minutes = date.getUTCMinutes().toString().padStart(2, '0');\n        \n        return `${hours}:${minutes}`;\n    } catch (error) {\n        console.error(`Fehler beim Formatieren der Zeit f√ºr ${dateString}:`, error);\n        return '-';\n    }\n};\n\n/**\n * Berechnet die Dauer zwischen zwei Zeitpunkten und formatiert sie als \"Nh Nm\".\n * @param startTime Startzeit im ISO-Format\n * @param endTime Endzeit im ISO-Format\n * @returns Formatierte Dauer als \"Nh Nm\" oder '-' bei Fehler\n */\nexport const calculateDuration = (startTime: string, endTime: string | null): string => {\n    if (!startTime || !endTime) return '-';\n    \n    try {\n        // Entferne das 'Z' am Ende der ISO-Strings, um Zeitzonenumrechnungen zu verhindern\n        const startISOString = startTime.endsWith('Z') \n            ? startTime.substring(0, startTime.length - 1)\n            : startTime;\n        \n        const endISOString = endTime.endsWith('Z') \n            ? endTime.substring(0, endTime.length - 1)\n            : endTime;\n        \n        const start = new Date(startISOString);\n        const end = new Date(endISOString);\n        \n        const durationMs = end.getTime() - start.getTime();\n        const durationMinutes = Math.floor(durationMs / (1000 * 60));\n        \n        const hours = Math.floor(durationMinutes / 60);\n        const minutes = durationMinutes % 60;\n        \n        return `${hours}h ${minutes}m`;\n    } catch (error) {\n        console.error('Fehler bei der Dauerberechnung:', error);\n        return '-';\n    }\n};\n\n/**\n * Konvertiert ein Wochenformat (YYYY-Www) in ein Datum (YYYY-MM-DD) f√ºr den Montag dieser Woche.\n * @param weekString Wochenformat im Format YYYY-Www\n * @returns Datum des Montags der Woche im Format YYYY-MM-DD\n */\nexport const convertWeekToDate = (weekString: string): string => {\n    try {\n        // Format: YYYY-Www\n        const year = parseInt(weekString.substring(0, 4));\n        const week = parseInt(weekString.substring(6));\n        \n        // Alternative Methode zur Berechnung des Montags f√ºr eine Kalenderwoche\n        // Statt parse mit yyyy und ww (was einen Fehler verursacht) verwenden wir\n        // einen direkten Algorithmus zur Berechnung\n        \n        // 1. Beginne mit dem ersten Tag des Jahres\n        const firstDayOfYear = new Date(Date.UTC(year, 0, 1, 12, 0, 0));\n        \n        // 2. Finde den ersten Donnerstag des Jahres (f√ºr ISO-Wochen)\n        // Verschiebe den Tag, bis wir am ersten Donnerstag sind\n        const dayOfWeek = firstDayOfYear.getUTCDay(); // 0 = Sonntag, 4 = Donnerstag\n        const daysToThursday = dayOfWeek <= 4 ? 4 - dayOfWeek : 11 - dayOfWeek; // Falls Sonntag ist 7\n        const firstThursday = new Date(Date.UTC(year, 0, 1 + daysToThursday, 12, 0, 0));\n        \n        // 3. Der erste Donnerstag ist immer in der ersten Woche\n        // Jetzt berechnen wir den Donnerstag der gew√ºnschten Woche\n        const targetThursday = new Date(Date.UTC(\n            firstThursday.getUTCFullYear(),\n            firstThursday.getUTCMonth(),\n            firstThursday.getUTCDate() + (7 * (week - 1)),\n            12, 0, 0\n        ));\n        \n        // 4. Berechne den Montag dieser Woche (3 Tage vor dem Donnerstag)\n        const monday = new Date(Date.UTC(\n            targetThursday.getUTCFullYear(),\n            targetThursday.getUTCMonth(),\n            targetThursday.getUTCDate() - 3,\n            12, 0, 0\n        ));\n        \n        // Formatiere das Datum als YYYY-MM-DD\n        const formattedDate = format(monday, 'yyyy-MM-dd');\n        \n        // Protokolliere das berechnete Datum f√ºr Debug-Zwecke\n        console.log(`Konvertierte Woche ${weekString} zu Datum: ${formattedDate} (Wochentag: ${format(monday, 'EEEE', { locale: de })})`);\n        \n        // Zus√§tzliche Sicherheits√ºberpr√ºfung: Stelle sicher, dass es ein Montag ist\n        if (format(monday, 'EEEE', { locale: de }) !== 'Montag') {\n            console.warn(`Berechnetes Datum ist kein Montag! Korrigiere...`);\n            // Finde den n√§chsten Montag\n            const correctedMonday = startOfWeek(monday, { weekStartsOn: 1 });\n            return format(correctedMonday, 'yyyy-MM-dd');\n        }\n        \n        return formattedDate;\n    } catch (error) {\n        console.error('Fehler beim Konvertieren des Wochendatums:', error);\n        // Im Fehlerfall den letzten Montag als Fallback verwenden\n        const fallbackMonday = startOfWeek(new Date(), { weekStartsOn: 1 });\n        return format(fallbackMonday, 'yyyy-MM-dd');\n    }\n};\n\n/**\n * Pr√ºft, ob ein Worktime-Eintrag f√ºr den ausgew√§hlten Tag relevant ist.\n * @param worktime Der Worktime-Eintrag\n * @param selectedDate Ausgew√§hltes Datum im Format YYYY-MM-DD\n * @returns true, wenn der Eintrag f√ºr den ausgew√§hlten Tag relevant ist\n */\nexport const isWorktimeRelevantForSelectedDate = (worktime: any, selectedDate: string): boolean => {\n    try {\n        if (!worktime || !worktime.startTime) return false;\n        \n        // Extrahiere nur den Datumsteil (YYYY-MM-DD) aus dem startTime ISO-String\n        const dateOnly = worktime.startTime.split('T')[0];\n        \n        // Vergleiche mit selectedDate\n        return dateOnly === selectedDate;\n    } catch (error) {\n        console.error(\"Fehler beim Pr√ºfen der Relevanz eines Worktime-Eintrags:\", error);\n        return false;\n    }\n};\n\n/**\n * Berechnet die Wochentage von Montag bis Sonntag basierend auf einem Startdatum.\n * @param weekStartDate Montag der Woche im Format YYYY-MM-DD\n * @returns Array von Objekten mit date und day Eigenschaften\n */\nexport const getWeekDays = (weekStartDate: string): Array<{ date: string; day: string }> => {\n    if (!weekStartDate) return [];\n    \n    // Beginne mit dem angegebenen Datum als Montag\n    const weekStart = new Date(weekStartDate);\n    \n    // Berechne alle 7 Tage der Woche\n    const weekDays: Array<{ date: string; day: string }> = [];\n    for (let i = 0; i < 7; i++) {\n        const day = addDays(weekStart, i);\n        const dayInfo = {\n            date: format(day, 'yyyy-MM-dd'),\n            day: format(day, 'EEEE', { locale: de })\n        };\n        weekDays.push(dayInfo);\n    }\n    \n    return weekDays;\n};\n\n/**\n * Formatiert ein ISO-DateTime f√ºr die Anzeige im deutschen Format mit Uhrzeit.\n * Diese Funktion wird speziell f√ºr Cerebro-Artikel verwendet.\n * @param dateTimeString Das zu formatierende Datum im ISO-Format (z.B. 2023-06-15T14:30:00Z)\n * @returns Formatiertes Datum und Uhrzeit im Format DD.MM.YYYY HH:MM\n */\nexport const formatDateTimeForCerebro = (dateTimeString: string): string => {\n    if (!dateTimeString) return '-';\n    \n    try {\n        const date = new Date(dateTimeString);\n        \n        // Datum und Uhrzeit im deutschen Format\n        return date.toLocaleDateString('de-DE', {\n            day: '2-digit',\n            month: '2-digit',\n            year: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n        });\n    } catch (error) {\n        console.error('Fehler beim Formatieren des Datums und der Zeit:', error);\n        return '-';\n    }\n};\n\n/**\n * Berechnet die Quinzena (15-Tage-Periode) f√ºr ein gegebenes Datum.\n * Quinzenas sind monatsbasiert:\n * - Erste Quinzena: 1.-15. des Monats\n * - Zweite Quinzena: 16. bis letzter Tag des Monats\n * @param date Datum im Format YYYY-MM-DD\n * @returns Quinzena-String im Format YYYY-MM-Qq (z.B. \"2025-01-Q1\" f√ºr erste Quinzena Januar)\n */\nexport const getQuinzenaFromDate = (date: string): string => {\n    try {\n        const dateObj = new Date(date + 'T12:00:00');\n        const year = dateObj.getFullYear();\n        const month = dateObj.getMonth() + 1; // 1-12\n        const day = dateObj.getDate();\n        \n        // Erste Quinzena: 1.-15., Zweite Quinzena: 16.-Monatsende\n        const quinzena = day <= 15 ? 1 : 2;\n        \n        return `${year}-${String(month).padStart(2, '0')}-Q${quinzena}`;\n    } catch (error) {\n        console.error('Fehler beim Berechnen der Quinzena:', error);\n        const today = new Date();\n        const year = today.getFullYear();\n        const month = today.getMonth() + 1;\n        return `${year}-${String(month).padStart(2, '0')}-Q1`;\n    }\n};\n\n/**\n * Konvertiert eine Quinzena (YYYY-MM-Qq) in das Startdatum (erster Tag der Quinzena).\n * @param quinzenaString Quinzena im Format YYYY-MM-Qq (z.B. \"2025-01-Q1\")\n * @returns Datum des ersten Tages der Quinzena im Format YYYY-MM-DD\n */\nexport const convertQuinzenaToDate = (quinzenaString: string): string => {\n    try {\n        // Format: YYYY-MM-Qq oder YYYY-Qqq (f√ºr R√ºckw√§rtskompatibilit√§t)\n        let year: number, month: number, quinzena: number;\n        \n        if (quinzenaString.includes('-Q')) {\n            // Format: YYYY-MM-Qq oder YYYY-Qqq\n            const parts = quinzenaString.split('-Q');\n            const datePart = parts[0];\n            quinzena = parseInt(parts[1]);\n            \n            if (datePart.includes('-')) {\n                // Format: YYYY-MM-Qq\n                const dateParts = datePart.split('-');\n                year = parseInt(dateParts[0]);\n                month = parseInt(dateParts[1]);\n            } else {\n                // Format: YYYY-Qqq (R√ºckw√§rtskompatibilit√§t - berechne Monat basierend auf Quinzena)\n                year = parseInt(datePart);\n                // F√ºr alte Format: Q1 = Jan, Q2 = Feb, etc. (vereinfacht)\n                month = Math.ceil(quinzena / 2);\n            }\n        } else {\n            throw new Error('Ung√ºltiges Quinzena-Format');\n        }\n        \n        // Erste Quinzena beginnt am 1., zweite am 16.\n        const startDay = quinzena === 1 ? 1 : 16;\n        \n        const quinzenaStart = new Date(Date.UTC(year, month - 1, startDay, 12, 0, 0));\n        return format(quinzenaStart, 'yyyy-MM-dd');\n    } catch (error) {\n        console.error('Fehler beim Konvertieren der Quinzena:', error);\n        const fallback = startOfWeek(new Date(), { weekStartsOn: 1 });\n        return format(fallback, 'yyyy-MM-dd');\n    }\n};\n\n/**\n * Berechnet alle Tage einer Quinzena basierend auf einem Startdatum.\n * Erste Quinzena: 15 Tage (1.-15.), Zweite Quinzena: variabel (16.-Monatsende)\n * @param quinzenaStartDate Erster Tag der Quinzena im Format YYYY-MM-DD\n * @returns Array von Objekten mit date und day Eigenschaften\n */\nexport const getQuinzenaDays = (quinzenaStartDate: string): Array<{ date: string; day: string }> => {\n    if (!quinzenaStartDate) return [];\n    \n    const start = new Date(quinzenaStartDate);\n    const year = start.getFullYear();\n    const month = start.getMonth(); // 0-11\n    const day = start.getDate();\n    \n    // Bestimme Anzahl der Tage in der Quinzena\n    let daysCount: number;\n    if (day === 1) {\n        // Erste Quinzena: immer 15 Tage\n        daysCount = 15;\n    } else {\n        // Zweite Quinzena: 16. bis Monatsende\n        // Berechne letzter Tag des Monats\n        const lastDayOfMonth = new Date(year, month + 1, 0).getDate();\n        daysCount = lastDayOfMonth - 15; // 16. bis Monatsende\n    }\n    \n    const quinzenaDays: Array<{ date: string; day: string }> = [];\n    \n    for (let i = 0; i < daysCount; i++) {\n        const currentDay = addDays(start, i);\n        const dayInfo = {\n            date: format(currentDay, 'yyyy-MM-dd'),\n            day: format(currentDay, 'EEEE', { locale: de })\n        };\n        quinzenaDays.push(dayInfo);\n    }\n    \n    return quinzenaDays;\n};\n\n/**\n * Berechnet die aktuelle Quinzena im Format YYYY-MM-Qq.\n * @returns Quinzena-String im Format YYYY-MM-Qq (z.B. \"2025-01-Q1\")\n */\nexport const getCurrentQuinzena = (): string => {\n    const today = new Date();\n    return getQuinzenaFromDate(format(today, 'yyyy-MM-dd'));\n};\n\n/**\n * Hilfsfunktionen f√ºr die Datumsbehandlung im Frontend\n */\n\n/**\n * Erstellt ein Date-Objekt ohne Zeitzonenverschiebung\n * @param dateString Ein ISO-Zeitstring\n * @returns Date-Objekt mit korrigiertem Zeitzonenversatz\n */\nexport const createLocalDate = (dateString: string): Date => {\n  const date = new Date(dateString);\n  // Korrigiere den Zeitzonenversatz\n  return new Date(date.getTime() + date.getTimezoneOffset() * 60000);\n};\n\n/* CLAUDE-ANCHOR: TIMEZONE-CONVERSION-001 - Zentrale Timezone-sichere Konvertierung f√ºr datetime-local Inputs */\n/**\n * KRITISCH: Konvertiert datetime-local Input-Werte korrekt f√ºr die API.\n * \n * PROBLEM: datetime-local gibt lokale Zeit zur√ºck (z.B. \"2024-01-15T14:01\")\n * Wenn wir einfach \":00.000\" anh√§ngen, wird es als UTC interpretiert ‚Üí 5h Unterschied!\n * \n * L√ñSUNG: Explizit als lokale Zeit interpretieren und korrekt formatieren.\n * \n * @param datetimeLocalValue Wert aus datetime-local Input (Format: \"YYYY-MM-DDTHH:mm\")\n * @returns ISO-String der als lokale Zeit interpretiert wird (ohne 'Z' Suffix)\n * \n * @example\n * Input: \"2024-01-15T14:01\" (User gibt 14:01 ein)\n * Output: \"2024-01-15T14:01:00.000\" (wird als lokale Zeit gespeichert)\n * Nicht: \"2024-01-15T14:01:00.000Z\" (w√ºrde als UTC interpretiert)\n */\nexport const convertDatetimeLocalToApi = (datetimeLocalValue: string): string => {\n    if (!datetimeLocalValue) {\n        throw new Error('Datetime-local Wert ist erforderlich');\n    }\n    \n    try {\n        // datetime-local Format: \"YYYY-MM-DDTHH:mm\"\n        // Wir f√ºgen nur Sekunden und Millisekunden hinzu, KEIN 'Z' Suffix\n        const apiFormat = `${datetimeLocalValue}:00.000`;\n        \n        // Zus√§tzliche Validierung: Pr√ºfe ob das Format g√ºltig ist\n        if (!/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}$/.test(apiFormat)) {\n            throw new Error(`Ung√ºltiges Datumsformat: ${apiFormat}`);\n        }\n        \n        return apiFormat;\n    } catch (error) {\n        console.error('Fehler bei der Datetime-Local Konvertierung:', error);\n        throw new Error(`Konvertierung von datetime-local fehlgeschlagen: ${datetimeLocalValue}`);\n    }\n};\n\n/**\n * KRITISCH: Konvertiert API-Zeitstempel zur√ºck zu datetime-local Format.\n * \n * Wird verwendet beim Bearbeiten von Zeiten - konvertiert DB-Zeit zur√ºck zu Input-Format.\n * Behandelt sowohl UTC-Timestamps (mit 'Z') als auch lokale Timestamps (ohne 'Z').\n * \n * @param apiTimestamp Zeitstempel aus der API (ISO-String)\n * @returns Formatiert f√ºr datetime-local Input (Format: \"YYYY-MM-DDTHH:mm\")\n * \n * @example\n * Input: \"2024-01-15T14:01:00.000Z\" (UTC aus DB)\n * Output: \"2024-01-15T14:01\" (f√ºr datetime-local Input)\n */\nexport const convertApiToDatetimeLocal = (apiTimestamp: string): string => {\n    if (!apiTimestamp) {\n        throw new Error('API-Timestamp ist erforderlich');\n    }\n    \n    try {\n        // Entferne das 'Z' am Ende des Strings, damit JS den Zeitstempel nicht als UTC interpretiert\n        // Dies ist wichtig f√ºr konsistente Zeitbehandlung\n        const localISOString = apiTimestamp.endsWith('Z')\n            ? apiTimestamp.substring(0, apiTimestamp.length - 1)\n            : apiTimestamp;\n        \n        const date = new Date(localISOString);\n        \n        // Validierung: Pr√ºfe ob das Datum g√ºltig ist\n        if (isNaN(date.getTime())) {\n            throw new Error(`Ung√ºltiger Zeitstempel: ${apiTimestamp}`);\n        }\n        \n        // Formatiere f√ºr datetime-local Input: \"YYYY-MM-DDTHH:mm\"\n        const formattedDate = format(date, 'yyyy-MM-dd');\n        const formattedTime = format(date, 'HH:mm');\n        \n        return `${formattedDate}T${formattedTime}`;\n    } catch (error) {\n        console.error('Fehler bei der API-zu-Datetime-Local Konvertierung:', error);\n        throw new Error(`Konvertierung von API-Timestamp fehlgeschlagen: ${apiTimestamp}`);\n    }\n};\n\n/**\n * Formatiert die Gesamtdauer einer Liste von Beratungen in Stunden und Minuten.\n * Ber√ºcksichtigt nur abgeschlossene Beratungen (mit endTime).\n * \n * @param consultations Array von Consultation-Objekten\n * @returns Formatierte Gesamtdauer als \"Xh Ym\" oder \"0h 0m\" bei leerer Liste\n * \n * @example\n * // Bei Beratungen mit Gesamtdauer von 125 Minuten\n * formatTotalDuration(consultations) // \"2h 5m\"\n */\nexport const formatTotalDuration = (consultations: Array<{ startTime: string; endTime: string | null }>): string => {\n    try {\n        // Berechne die Gesamtdauer in Minuten\n        const totalMinutes = consultations.reduce((total, consultation) => {\n            // Nur abgeschlossene Beratungen ber√ºcksichtigen\n            if (!consultation.endTime) return total;\n            \n            // Berechne Dauer dieser Beratung in Minuten\n            const startTime = consultation.startTime.endsWith('Z') \n                ? consultation.startTime.substring(0, consultation.startTime.length - 1)\n                : consultation.startTime;\n            \n            const endTime = consultation.endTime.endsWith('Z') \n                ? consultation.endTime.substring(0, consultation.endTime.length - 1)\n                : consultation.endTime;\n            \n            const start = new Date(startTime);\n            const end = new Date(endTime);\n            \n            const durationMs = end.getTime() - start.getTime();\n            const durationMinutes = Math.floor(durationMs / (1000 * 60));\n            \n            return total + durationMinutes;\n        }, 0);\n        \n        // Konvertiere zu Stunden und Minuten\n        const hours = Math.floor(totalMinutes / 60);\n        const minutes = totalMinutes % 60;\n        \n        return `${hours}h ${minutes}m`;\n    } catch (error) {\n        console.error('Fehler bei der Formatierung der Gesamtdauer:', error);\n        return '0h 0m';\n    }\n};\n\n/**\n * Pr√ºft, ob eine Beratung bereits abgerechnet wurde.\n * \n * @param consultation Consultation-Objekt\n * @returns true wenn abgerechnet, false wenn nicht\n */\nexport const isConsultationInvoiced = (consultation: { invoiceItems?: Array<{ invoice: { status: string } }> }): boolean => {\n    return !!(consultation.invoiceItems && consultation.invoiceItems.length > 0);\n};\n\n/**\n * Holt die Rechnungsinformationen einer Beratung.\n * \n * @param consultation Consultation-Objekt\n * @returns Rechnungsinfo oder null wenn nicht abgerechnet\n */\nexport const getConsultationInvoiceInfo = (consultation: { invoiceItems?: Array<{ invoice: { id: number; invoiceNumber: string; status: string; issueDate: string; total: number } }> }) => {\n    if (!consultation.invoiceItems || consultation.invoiceItems.length === 0) {\n        return null;\n    }\n    \n    // Nimm die erste (und normalerweise einzige) Rechnung\n    const firstItem = consultation.invoiceItems[0];\n    return firstItem.invoice;\n};\n\n/**\n * Erstellt einen benutzerfreundlichen Text f√ºr den Rechnungsstatus.\n * \n * @param status Rechnungsstatus\n * @returns Deutscher Status-Text\n */\nexport const getInvoiceStatusText = (status: 'DRAFT' | 'SENT' | 'PAID' | 'OVERDUE' | 'CANCELLED'): string => {\n    const statusMap = {\n        'DRAFT': 'Entwurf',\n        'SENT': 'Gesendet',\n        'PAID': 'Bezahlt',\n        'OVERDUE': '√úberf√§llig',\n        'CANCELLED': 'Storniert'\n    };\n    return statusMap[status] || status;\n};\n\n/**\n * Gibt die Farbe f√ºr einen Rechnungsstatus zur√ºck.\n * \n * @param status Rechnungsstatus\n * @returns CSS-Klassen f√ºr die Statusfarbe\n */\nexport const getInvoiceStatusColor = (status: 'DRAFT' | 'SENT' | 'PAID' | 'OVERDUE' | 'CANCELLED'): string => {\n    const colorMap = {\n        'DRAFT': 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300',\n        'SENT': 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300',\n        'PAID': 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300',\n        'OVERDUE': 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300',\n        'CANCELLED': 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300'\n    };\n    return colorMap[status] || 'bg-gray-100 text-gray-800';\n}; ","import React from 'react';\n\ninterface MarkdownPreviewProps {\n  content: string;\n  className?: string;\n  maxHeight?: string | number;\n  temporaryAttachments?: Array<{\n    fileName: string;\n    fileType: string;\n    fileSize: number;\n    file?: File;\n  }>;\n  showImagePreview?: boolean;\n  onlyAttachments?: boolean; // Nur Anh√§nge rendern, ohne Text\n  attachmentMetadata?: Array<{\n    id: number;\n    fileName: string;\n    fileType: string;\n    url: string;\n  }>; // Attachment-Metadaten f√ºr bessere Dateityp-Erkennung\n}\n\nconst MarkdownPreview: React.FC<MarkdownPreviewProps> = ({ \n  content, \n  className = \"\", \n  maxHeight = \"150px\",\n  temporaryAttachments = [],\n  showImagePreview = false,\n  onlyAttachments = false,\n  attachmentMetadata = []\n}) => {\n  // Extrahiere alle Anh√§nge aus dem Markdown\n  const extractAttachments = () => {\n    const imageMatches = Array.from(content.matchAll(/!\\[(.*?)\\]\\((.*?)\\)/g)).map(match => ({\n      type: 'image',\n      alt: match[1],\n      url: match[2],\n      isTemporary: match[2] === \"wird nach dem Erstellen hochgeladen\"\n    }));\n    \n    const linkMatches = Array.from(content.matchAll(/\\[(.*?)\\]\\((.*?)\\)/g))\n      .filter(match => !match[0].startsWith('!')) // Bilder ausschlie√üen\n      .map(match => ({\n        type: 'link',\n        alt: match[1],\n        url: match[2],\n        isTemporary: match[2] === \"wird nach dem Erstellen hochgeladen\"\n      }));\n    \n    const allAttachments = [...imageMatches, ...linkMatches];\n    \n    // Duplikate entfernen - gruppieren nach alt (Dateiname) und URL, nur eindeutige behalten\n    const uniqueAttachments = allAttachments.reduce((acc, current) => {\n      const key = `${current.type}-${current.alt}-${current.url}`;\n      if (!acc.some(item => `${item.type}-${item.alt}-${item.url}` === key)) {\n        acc.push(current);\n      }\n      return acc;\n    }, [] as typeof allAttachments);\n    \n    return uniqueAttachments;\n  };\n  \n  // Erstellt tempor√§re URLs f√ºr Dateien\n  const getTemporaryFileUrl = (filename: string): string | null => {\n    const attachment = temporaryAttachments.find(att => att.fileName === filename);\n    if (attachment?.file) {\n      return URL.createObjectURL(attachment.file);\n    }\n    return null;\n  };\n  \n  // Rendere die Anh√§nge als Tags\n  const renderAttachmentTags = () => {\n    const attachments = extractAttachments();\n    \n    // Keine Anh√§nge gefunden\n    if (attachments.length === 0) return null;\n    \n    return (\n      <div className=\"flex flex-wrap gap-2 mt-2\">\n        {attachments.map((attachment, index) => {\n          // URL f√ºr tempor√§re Anh√§nge\n          let url = attachment.url;\n          if (attachment.isTemporary) {\n            const tempUrl = getTemporaryFileUrl(attachment.alt);\n            if (tempUrl) url = tempUrl;\n          }\n          \n          return (\n            <div key={index} className=\"group relative\">\n              {/* Tag */}\n              <div className=\"bg-gray-100 dark:bg-gray-700 rounded px-2 py-1 text-sm flex items-center dark:text-gray-200\">\n                <span className=\"mr-1\">\n                  {attachment.type === 'image' ? \n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                    </svg> : \n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\" />\n                    </svg>\n                  }\n                </span>\n                {attachment.alt}\n              </div>\n              \n              {/* Vorschau beim Hover - nur anzeigen wenn URL verf√ºgbar */}\n              {url && url !== \"wird nach dem Erstellen hochgeladen\" && (\n                <div className=\"hidden group-hover:block absolute z-10 bg-white dark:bg-gray-800 border dark:border-gray-700 shadow-lg p-2 rounded-md -bottom-2 left-1/2 transform -translate-x-1/2 translate-y-full max-w-xs\">\n                  {attachment.type === 'image' ? (\n                    <img \n                      src={url} \n                      alt={attachment.alt} \n                      className=\"max-w-full border rounded dark:border-gray-700\" \n                      style={{ maxHeight: '200px', objectFit: 'contain' }}\n                    />\n                  ) : url.match(/^(https?:\\/\\/|blob:)/) ? (\n                    // F√ºr Links mit http/https einen Preview anzeigen\n                    <div className=\"flex items-center\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-2 dark:text-gray-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\" />\n                      </svg>\n                      <a \n                        href={url} \n                        target=\"_blank\" \n                        rel=\"noopener noreferrer\"\n                        className=\"text-blue-600 dark:text-blue-400 hover:underline\"\n                      >\n                        {attachment.alt}\n                      </a>\n                    </div>\n                  ) : (\n                    // F√ºr andere Dateitypen (PDF, DOC, etc.)\n                    <div className=\"flex items-center\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-2 dark:text-gray-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                      </svg>\n                      <span className=\"dark:text-gray-200\">{attachment.alt}</span>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  // Finde Attachment-Metadaten f√ºr einen Dateinamen oder URL\n  const getAttachmentMetadata = (fileName: string, url?: string) => {\n    // Entferne Emojis und Whitespace vom Dateinamen f√ºr bessere Erkennung\n    const cleanFileName = fileName.replace(/^[\\u{1F300}-\\u{1F9FF}\\s]+/u, '').trim();\n    \n    // Versuche zuerst nach Dateiname zu suchen\n    let metadata = attachmentMetadata.find(meta => meta.fileName === fileName);\n    \n    // Falls nicht gefunden, versuche mit bereinigtem Dateinamen\n    if (!metadata && cleanFileName !== fileName) {\n      metadata = attachmentMetadata.find(meta => meta.fileName === cleanFileName);\n    }\n    \n    // Falls nicht gefunden, versuche auch nach Dateiname ohne Gro√ü-/Kleinschreibung\n    if (!metadata) {\n      metadata = attachmentMetadata.find(meta => meta.fileName.toLowerCase() === fileName.toLowerCase());\n    }\n    \n    // Falls immer noch nicht gefunden, versuche mit bereinigtem Dateinamen ohne Gro√ü-/Kleinschreibung\n    if (!metadata && cleanFileName !== fileName) {\n      metadata = attachmentMetadata.find(meta => meta.fileName.toLowerCase() === cleanFileName.toLowerCase());\n    }\n    \n    // Falls immer noch nicht gefunden und URL vorhanden, versuche die ID aus der URL zu extrahieren\n    if (!metadata && url && attachmentMetadata.length > 0) {\n      // Versuche Attachment-ID aus URL zu extrahieren\n      // Format: /api/tasks/123/attachments/456 oder /api/requests/123/attachments/456\n      let attachmentIdMatch = url.match(/\\/(?:tasks|requests)\\/\\d+\\/attachments\\/(\\d+)/);\n      if (attachmentIdMatch) {\n        const attachmentId = parseInt(attachmentIdMatch[1], 10);\n        metadata = attachmentMetadata.find(meta => meta.id === attachmentId);\n      }\n      \n      // Auch f√ºr Cerebro-Media-URLs: /api/cerebro/media/123/file\n      if (!metadata) {\n        attachmentIdMatch = url.match(/\\/cerebro\\/media\\/(\\d+)\\/file/);\n        if (attachmentIdMatch) {\n          const mediaId = parseInt(attachmentIdMatch[1], 10);\n          metadata = attachmentMetadata.find(meta => meta.id === mediaId);\n        }\n      }\n    }\n    \n    return metadata;\n  };\n  \n  // Rendere Anh√§nge direkt als Vorschau\n  const renderInlineAttachments = () => {\n    const attachments = extractAttachments();\n    \n    // DEBUG: Logging f√ºr Diagnose\n    console.log('üì¶ renderInlineAttachments aufgerufen:', {\n      contentLength: content.length,\n      attachmentsFound: attachments.length,\n      attachmentMetadataCount: attachmentMetadata.length,\n      attachmentMetadata: attachmentMetadata\n    });\n    \n    // Filtere ung√ºltige Anh√§nge heraus\n    const validAttachments = attachments.filter(attachment => {\n      let url = attachment.url;\n      if (attachment.isTemporary) {\n        const tempUrl = getTemporaryFileUrl(attachment.alt);\n        if (tempUrl) url = tempUrl;\n      }\n      return url && url !== \"wird nach dem Erstellen hochgeladen\";\n    });\n    \n    if (validAttachments.length === 0) return null;\n    \n    // Rendere alle Anh√§nge und filtere null-Werte heraus\n    const renderedAttachments = validAttachments\n      .map((attachment, index) => {\n        // Hole Metadaten f√ºr diesen Anhang (mit URL als Fallback)\n        let metadata = getAttachmentMetadata(attachment.alt, attachment.url);\n        \n        // Falls Metadaten nicht per Dateiname gefunden wurden, versuche per URL-ID\n        if (!metadata && attachment.url) {\n          // Versuche Task/Request Attachment-ID\n          let attachmentIdMatch = attachment.url.match(/\\/attachments\\/(\\d+)/);\n          if (attachmentIdMatch) {\n            const attachmentId = parseInt(attachmentIdMatch[1]);\n            metadata = attachmentMetadata.find(meta => meta.id === attachmentId);\n          }\n          \n          // Falls nicht gefunden, versuche Cerebro-Media-ID\n          if (!metadata) {\n            attachmentIdMatch = attachment.url.match(/\\/cerebro\\/media\\/(\\d+)\\/file/);\n            if (attachmentIdMatch) {\n              const mediaId = parseInt(attachmentIdMatch[1]);\n              metadata = attachmentMetadata.find(meta => meta.id === mediaId);\n            }\n          }\n        }\n        \n        // WICHTIG: Wenn es ein Cerebro-Media ist (in attachmentMetadata vorhanden),\n        // zeige es NICHT als Vorschau an, sondern nur als einfachen Link,\n        // da es bereits separat angezeigt wird (wie bei Requests & Tasks)\n        const isCerebroMedia = metadata && attachment.url?.includes('/cerebro/media/');\n        \n        // Bestimme URL: Priorit√§t: Metadaten-URL > Markdown-URL > Tempor√§re URL\n        let url: string = '';\n        if (metadata?.url) {\n          // Verwende URL aus Metadaten (falls verf√ºgbar)\n          url = metadata.url;\n        } else {\n          // Verwende URL aus Markdown\n          url = attachment.url || '';\n        }\n        \n        // Tempor√§re URLs haben Vorrang (f√ºr neue Uploads)\n        if (attachment.isTemporary) {\n          const tempUrl = getTemporaryFileUrl(attachment.alt);\n          if (tempUrl) url = tempUrl;\n        }\n        \n        // Sicherstellen, dass url definiert ist\n        if (!url || url === \"wird nach dem Erstellen hochgeladen\") {\n          return null;\n        }\n        \n        // Pr√ºfe Dateityp basierend auf Metadaten, URL und Dateiname\n        const fileName = attachment.alt.toLowerCase();\n        \n        // Bestimme Dateityp: Priorit√§t: Metadaten > Markdown-Type > URL/Dateiname\n        let isImage = false;\n        let isPdf = false;\n        \n        // DEBUG: Logging f√ºr Diagnose\n        console.log('üîç Attachment Debug:', {\n          alt: attachment.alt,\n          fileName: fileName,\n          url: url,\n          metadata: metadata,\n          attachmentType: attachment.type\n        });\n        \n        // 1. Pr√ºfe Metadaten (h√∂chste Priorit√§t)\n        if (metadata?.fileType) {\n          isImage = metadata.fileType.startsWith('image/');\n          isPdf = metadata.fileType === 'application/pdf';\n          console.log('‚úÖ Metadaten gefunden:', { fileType: metadata.fileType, isImage, isPdf });\n        }\n        \n        // 2. Falls keine Metadaten, pr√ºfe Markdown-Type\n        if (!metadata && attachment.type === 'image') {\n          isImage = true;\n        }\n        \n        // 3. Falls immer noch nicht bestimmt, pr√ºfe URL und Dateiname\n        if (!metadata) {\n          const urlEndsWithPdf = url && url.toLowerCase().endsWith('.pdf');\n          const urlMatchesPdf = url && url.match(/\\.pdf(\\?|$)/i);\n          const fileNameEndsWithPdf = fileName.endsWith('.pdf');\n          const isApiAttachmentPdf = url && (url.includes('/api/requests/attachments/') || url.includes('/api/tasks/attachments/')) && fileNameEndsWithPdf;\n          const isCerebroMediaPdf = url && url.includes('/cerebro/media/') && fileNameEndsWithPdf;\n          \n          isPdf = urlEndsWithPdf || urlMatchesPdf || fileNameEndsWithPdf || isApiAttachmentPdf || isCerebroMediaPdf;\n          \n          console.log('üîç PDF-Erkennung (ohne Metadaten):', {\n            urlEndsWithPdf,\n            urlMatchesPdf,\n            fileNameEndsWithPdf,\n            isApiAttachmentPdf,\n            isPdf\n          });\n        }\n        \n        console.log('üìÑ Finale Entscheidung:', { isImage, isPdf, isExternalLink: url && url.match(/^https?:\\/\\//) && !isImage && !isPdf });\n        \n        const isExternalLink = url && url.match(/^https?:\\/\\//) && !isImage && !isPdf;\n        \n        // WICHTIG: Cerebro-Media-Links werden NICHT als Vorschau angezeigt,\n        // sondern nur als einfacher Link, da sie bereits separat angezeigt werden\n        if (isCerebroMedia) {\n          return (\n            <div key={index} className=\"p-3 flex items-center border rounded-lg bg-gray-50 dark:bg-gray-700/50\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-2 dark:text-gray-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\" />\n              </svg>\n              <a \n                href={url} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\"\n                className=\"text-blue-600 dark:text-blue-400 hover:underline\"\n              >\n                {attachment.alt}\n              </a>\n            </div>\n          );\n        }\n        \n        return (\n          <div key={index} className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n            {isImage ? (\n              // Bild-Vorschau - gro√ü und prominent\n              <div>\n                <img \n                  src={url} \n                  alt={attachment.alt} \n                  className=\"w-full h-auto max-h-96 object-contain\" \n                  style={{ display: 'block' }}\n                />\n              </div>\n            ) : isPdf ? (\n              // PDF-Vorschau\n              <div className=\"p-3\">\n                <div className=\"flex items-center mb-2\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-2 dark:text-gray-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                  </svg>\n                  <span className=\"text-sm font-medium dark:text-gray-200\">{attachment.alt}</span>\n                  <a \n                    href={url} \n                    target=\"_blank\" \n                    rel=\"noopener noreferrer\"\n                    className=\"ml-auto text-blue-600 dark:text-blue-400 hover:underline text-sm\"\n                  >\n                    √ñffnen\n                  </a>\n                </div>\n                <iframe \n                  src={`${url}#view=FitH`} \n                  className=\"w-full rounded border dark:border-gray-600\"\n                  style={{ height: '400px' }}\n                  title={attachment.alt}\n                />\n              </div>\n            ) : isExternalLink ? (\n              // Externer Link-Vorschau mit iframe\n              <div className=\"p-3\">\n                <div className=\"flex items-center mb-2\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-2 dark:text-gray-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\" />\n                  </svg>\n                  <span className=\"text-sm font-medium dark:text-gray-200 flex-grow\">{attachment.alt || url}</span>\n                  <a \n                    href={url} \n                    target=\"_blank\" \n                    rel=\"noopener noreferrer\"\n                    className=\"ml-2 text-blue-600 dark:text-blue-400 hover:underline text-sm\"\n                  >\n                    √ñffnen\n                  </a>\n                </div>\n                <iframe \n                  src={url}\n                  className=\"w-full rounded border dark:border-gray-600\"\n                  style={{ height: '400px' }}\n                  title={attachment.alt || 'Web-Vorschau'}\n                  sandbox=\"allow-same-origin allow-scripts allow-popups allow-forms\"\n                />\n              </div>\n            ) : (\n              // Andere Dateitypen\n              <div className=\"p-3 flex items-center\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-2 dark:text-gray-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                </svg>\n                <a \n                  href={url} \n                  target=\"_blank\" \n                  rel=\"noopener noreferrer\"\n                  className=\"text-blue-600 dark:text-blue-400 hover:underline\"\n                >\n                  {attachment.alt}\n                </a>\n              </div>\n            )}\n          </div>\n        );\n      })\n      .filter((item): item is React.ReactElement => item !== null);\n    \n    // Wenn nach dem Filtern keine Anh√§nge mehr vorhanden sind, null zur√ºckgeben\n    if (renderedAttachments.length === 0) return null;\n    \n    return (\n      <div className=\"flex flex-col gap-3 mt-2\">\n        {renderedAttachments}\n      </div>\n    );\n  };\n\n  // Nur Anh√§nge rendern (ohne Text)\n  if (onlyAttachments) {\n    const attachments = renderInlineAttachments();\n    if (!attachments) return <div className={className}></div>;\n    return (\n      <div className={className}>\n        {attachments}\n      </div>\n    );\n  }\n\n  // F√ºr Worktracker-Tooltips den gesamten Inhalt rendern mit Anhang-Vorschauen\n  if (showImagePreview) {\n    const style: React.CSSProperties = {};\n    if (maxHeight === \"none\") {\n      // Keine maxHeight und kein Overflow wenn maxHeight=\"none\"\n      style.overflowY = 'visible';\n    } else {\n      style.maxHeight = maxHeight !== \"150px\" ? maxHeight : \"100%\";\n      style.overflowY = 'auto';\n    }\n    \n    // Extrahiere Anh√§nge aus dem originalen content\n    const attachments = extractAttachments();\n    \n    // Filtere Bilder heraus, die als gro√üe Vorschau gerendert werden sollen\n    const imagesToRender = attachments.filter(attachment => {\n      // Hole Metadaten f√ºr diesen Anhang (mit URL als Fallback)\n      let metadata = getAttachmentMetadata(attachment.alt, attachment.url);\n      \n      // DEBUG: Logging f√ºr Diagnose\n      if (process.env.NODE_ENV === 'development') {\n        console.log('üîç Bild-Filterung:', {\n          alt: attachment.alt,\n          url: attachment.url,\n          metadata: metadata,\n          attachmentMetadataCount: attachmentMetadata.length,\n          attachmentMetadata: attachmentMetadata\n        });\n      }\n      \n      // Bestimme URL\n      let url: string = '';\n      if (metadata?.url) {\n        url = metadata.url;\n      } else {\n        url = attachment.url || '';\n      }\n      \n      if (attachment.isTemporary) {\n        const tempUrl = getTemporaryFileUrl(attachment.alt);\n        if (tempUrl) url = tempUrl;\n      }\n      \n      if (!url || url === \"wird nach dem Erstellen hochgeladen\") {\n        return false;\n      }\n      \n      // Pr√ºfe ob es ein Bild ist (nicht PDF)\n      let isImage = false;\n      let isPdf = false;\n      \n      if (metadata?.fileType) {\n        isImage = metadata.fileType.startsWith('image/');\n        isPdf = metadata.fileType === 'application/pdf';\n      } else if (attachment.type === 'image') {\n        // Fallback: Wenn kein Metadata, aber type ist 'image', dann ist es ein Bild\n        isImage = true;\n      } else {\n        // Fallback: Pr√ºfe Dateiname oder URL auf Bild-Endungen\n        const imageExtensions = /\\.(jpg|jpeg|png|gif|webp|svg|bmp)(\\?|$)/i;\n        isImage = imageExtensions.test(attachment.alt) || imageExtensions.test(url);\n      }\n      \n      // Nur Bilder rendern, keine PDFs (PDFs werden separat behandelt)\n      return isImage && !isPdf;\n    });\n    \n    // Ersetze Markdown-Links und Bilder im Text durch Platzhalter\n    let processedContent = content;\n    const imageRegex = /!\\[([^\\]]*)\\]\\(([^)]+)\\)/g;\n    const linkRegex = /\\[([^\\]]+)\\]\\(([^)]+)\\)/g;\n    \n    // Ersetze ALLE Bilder komplett aus dem Text (werden separat als gro√üe Vorschau gerendert)\n    // WICHTIG: Muss GLOBAL sein, damit alle Bilder entfernt werden\n    processedContent = processedContent.replace(imageRegex, () => {\n      // Entferne ALLE Bilder komplett - sie werden durch renderFilteredAttachments() gerendert\n      return '';\n    });\n    \n    // Entferne auch alle Leerzeilen, die durch das Entfernen der Bilder entstehen k√∂nnten\n    processedContent = processedContent.replace(/\\n{3,}/g, '\\n\\n').trim();\n    \n    // Ersetze Links durch Text mit Link-Referenz (aber nur wenn es kein Bild ist)\n    processedContent = processedContent.replace(linkRegex, (match, alt, url) => {\n      // √úberspringe Links, die bereits als Bilder behandelt wurden\n      if (match.startsWith('![')) {\n        return match;\n      }\n      return `${alt} [Link]`;\n    });\n    \n    // Rendere nur die Bilder aus imagesToRender als gro√üe Vorschau\n    const renderFilteredAttachments = () => {\n      if (imagesToRender.length === 0) return null;\n      \n      // Entferne Duplikate basierend auf Dateiname und URL\n      const uniqueImages = imagesToRender.reduce((acc, current) => {\n        const key = `${current.alt}-${current.url || ''}`;\n        if (!acc.some(img => `${img.alt}-${img.url || ''}` === key)) {\n          acc.push(current);\n        }\n        return acc;\n      }, [] as typeof imagesToRender);\n      \n      return (\n        <div className=\"flex flex-col gap-3 mt-2\">\n          {uniqueImages.map((attachment, index) => {\n            // Hole Metadaten f√ºr diesen Anhang (mit URL als Fallback)\n            let metadata = getAttachmentMetadata(attachment.alt, attachment.url);\n            \n            // Bestimme URL\n            let url: string = '';\n            if (metadata?.url) {\n              url = metadata.url;\n            } else {\n              url = attachment.url || '';\n            }\n            \n            if (attachment.isTemporary) {\n              const tempUrl = getTemporaryFileUrl(attachment.alt);\n              if (tempUrl) url = tempUrl;\n            }\n            \n            if (!url || url === \"wird nach dem Erstellen hochgeladen\") {\n              return null;\n            }\n            \n            return (\n              <div key={`img-${attachment.alt}-${url}-${index}`} className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n                <img \n                  src={url} \n                  alt={attachment.alt} \n                  className=\"w-full h-auto max-h-96 object-contain\" \n                  style={{ display: 'block' }}\n                />\n              </div>\n            );\n          }).filter((item): item is React.ReactElement => item !== null)}\n        </div>\n      );\n    };\n    \n    return (\n      <div className={`markdown-preview ${className} dark:text-gray-200`} style={style}>\n        {/* Text-Inhalt ohne Bilder */}\n        {processedContent && (\n          <div dangerouslySetInnerHTML={{ __html: processedContent.replace(/\\n/g, '<br/>') }} />\n        )}\n        {/* Bilder als gro√üe Vorschau */}\n        {renderFilteredAttachments()}\n      </div>\n    );\n  }\n\n  // F√ºr Modals nur die Anhang-Tags rendern\n  return (\n    <div className={`markdown-preview ${className}`}>\n      {renderAttachmentTags()}\n    </div>\n  );\n};\n\nexport default MarkdownPreview; "],"names":["formatDate","dateString","dateParts","split","length","year","parseInt","month","day","Date","toLocaleDateString","error","console","formatTime","date","parseISO","hours","getUTCHours","toString","padStart","minutes","getUTCMinutes","concat","calculateDuration","startTime","endTime","startISOString","endsWith","substring","endISOString","start","durationMs","getTime","durationMinutes","Math","floor","convertWeekToDate","weekString","week","dayOfWeek","UTC","getUTCDay","daysToThursday","firstThursday","targetThursday","getUTCFullYear","getUTCMonth","getUTCDate","monday","formattedDate","format","log","locale","de","warn","correctedMonday","startOfWeek","weekStartsOn","fallbackMonday","isWorktimeRelevantForSelectedDate","worktime","selectedDate","getWeekDays","weekStartDate","weekStart","weekDays","i","addDays","dayInfo","push","formatDateTimeForCerebro","dateTimeString","hour","minute","convertQuinzenaToDate","quinzenaString","quinzena","includes","Error","parts","datePart","ceil","startDay","quinzenaStart","fallback","getQuinzenaDays","quinzenaStartDate","getFullYear","getMonth","daysCount","getDate","quinzenaDays","currentDay","getCurrentQuinzena","today","dateObj","String","getQuinzenaFromDate","createLocalDate","getTimezoneOffset","formatTotalDuration","consultations","totalMinutes","reduce","total","consultation","isConsultationInvoiced","invoiceItems","getConsultationInvoiceInfo","invoice","getInvoiceStatusText","status","getInvoiceStatusColor","_ref","content","className","maxHeight","temporaryAttachments","showImagePreview","onlyAttachments","attachmentMetadata","extractAttachments","Array","from","matchAll","map","match","type","alt","url","isTemporary","filter","startsWith","acc","current","key","some","item","getTemporaryFileUrl","filename","attachment","find","att","fileName","file","URL","createObjectURL","getAttachmentMetadata","cleanFileName","replace","trim","metadata","meta","toLowerCase","attachmentIdMatch","attachmentId","id","mediaId","attachments","renderInlineAttachments","contentLength","attachmentsFound","attachmentMetadataCount","validAttachments","tempUrl","renderedAttachments","index","_attachment$url","_metadata","_metadata2","isCerebroMedia","isImage","isPdf","attachmentType","fileType","urlEndsWithPdf","urlMatchesPdf","fileNameEndsWithPdf","isApiAttachmentPdf","isCerebroMediaPdf","isExternalLink","_jsxs","children","_jsx","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","href","target","rel","src","style","display","height","title","sandbox","overflowY","imagesToRender","imageExtensions","test","processedContent","imageRegex","linkRegex","renderFilteredAttachments","uniqueImages","img","dangerouslySetInnerHTML","__html","renderAttachmentTags","objectFit"],"sourceRoot":""}