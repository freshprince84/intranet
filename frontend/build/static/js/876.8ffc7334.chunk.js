"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[876],{7876:(e,r,t)=>{t.r(r),t.d(r,{default:()=>P});var a=t(9379),s=t(5043),l=t(4117),n=t(1637),c=t(905),d=t(35),i=t(6600),o=t(5316),x=t(8533),h=t(9347),m=t(1906),g=t(1369),u=t(4129),b=t(7012),k=t(2704),y=t(7504),j=t(1252),N=t(9399),f=t(3867),A=t(2903),p=t(9422),w=t(9248),v=t(5620),C=t(4399),B=t(887),S=t(3216),E=t(579);const P=()=>{const{t:e}=(0,l.Bd)(),[r,t]=(0,s.useState)([]),[P,I]=(0,s.useState)(!0),[F,L]=(0,s.useState)(1),[O,M]=(0,s.useState)(1),[q,D]=(0,s.useState)(!1),[T,R]=(0,s.useState)(null),[_,K]=(0,s.useState)(!1),U=(0,S.Zp)();(0,s.useEffect)((()=>{Z()}),[F]);const Z=async()=>{try{I(!0);const e=await v.O.getNotifications(F,10);t(e.notifications),M(e.pagination.totalPages)}catch(e){console.error("Fehler beim Laden der Benachrichtigungen:",e)}finally{I(!1)}},z=async e=>{try{await v.O.markAsRead(e),t((r=>r.map((r=>r.id===e?(0,a.A)((0,a.A)({},r),{},{read:!0}):r))))}catch(r){console.error("Fehler beim Markieren als gelesen:",r)}},G=e=>{switch(e.toLowerCase()){case"task":return(0,E.jsx)(g.A,{className:"h-6 w-6 text-blue-600"});case"user":return(0,E.jsx)(u.A,{className:"h-6 w-6 text-blue-600"});case"worktime":return(0,E.jsx)(b.A,{className:"h-6 w-6 text-blue-600"});case"request":return(0,E.jsx)(k.A,{className:"h-6 w-6 text-blue-600"});case"role":return(0,E.jsx)(y.A,{className:"h-6 w-6 text-blue-600"});case"info":return(0,E.jsx)(j.A,{className:"h-6 w-6 text-blue-600"});case"warning":return(0,E.jsx)(N.A,{className:"h-6 w-6 text-yellow-500"});case"error":return(0,E.jsx)(f.A,{className:"h-6 w-6 text-red-600"});default:return(0,E.jsx)(A.A,{className:"h-6 w-6 text-blue-600"})}},H=e=>{try{return(0,C.m)(new Date(e),{addSuffix:!0,locale:B.de})}catch(r){return"Ung\xfcltiges Datum"}};return(0,E.jsx)("div",{className:"min-h-screen p-4 dark:bg-gray-900",children:(0,E.jsxs)("div",{className:"container mx-auto",children:[(0,E.jsxs)("div",{className:"bg-white rounded-lg border border-gray-300 dark:bg-gray-800 dark:border-gray-700 p-6",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,E.jsxs)("div",{className:"flex items-center",children:[(0,E.jsx)(A.A,{className:"h-6 w-6 text-gray-600 dark:text-gray-400 mr-2"}),(0,E.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Benachrichtigungen"})]}),(0,E.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,E.jsxs)("button",{onClick:async()=>{try{await v.O.markAllAsRead(),t((e=>e.map((e=>(0,a.A)((0,a.A)({},e),{},{read:!0})))))}catch(e){console.error("Fehler beim Markieren aller als gelesen:",e)}},disabled:r.every((e=>e.read)),className:"inline-flex items-center px-3 py-2 border rounded-md text-sm font-medium\n                  ".concat(r.every((e=>e.read))?"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed":"bg-blue-50 text-blue-600 hover:bg-blue-100 border-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:border-blue-900 dark:hover:bg-blue-900/50"),children:[(0,E.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Alle gelesen"]}),(0,E.jsxs)("button",{onClick:()=>{K(!0)},disabled:0===r.length,className:"inline-flex items-center px-3 py-2 border rounded-md text-sm font-medium\n                  ".concat(0===r.length?"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed":"bg-red-50 text-red-600 hover:bg-red-100 border-red-200 dark:bg-red-900/30 dark:text-red-400 dark:border-red-900 dark:hover:bg-red-900/50"),children:[(0,E.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Alle l\xf6schen"]})]})]}),P&&0===r.length?(0,E.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,E.jsx)(n.A,{className:"dark:text-blue-400"})}):0===r.length?(0,E.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[(0,E.jsx)(A.A,{className:"h-16 w-16 mb-4 dark:text-gray-500"}),(0,E.jsx)("p",{className:"text-lg",children:"Keine Benachrichtigungen vorhanden"})]}):(0,E.jsx)("div",{className:"space-y-4",children:r.map(((t,a)=>(0,E.jsx)("div",{onClick:()=>(e=>{if(e.read||z(e.id),e.relatedEntityId&&e.relatedEntityType)switch(e.relatedEntityType.toLowerCase()){case"task":U("/tasks/".concat(e.relatedEntityId));break;case"request":U("/requests/".concat(e.relatedEntityId));break;case"user":U("/users/".concat(e.relatedEntityId));break;case"role":U("/roles/".concat(e.relatedEntityId));break;case"worktime":U("/worktime/".concat(e.relatedEntityId))}})(t),className:"p-4 rounded-lg transition-colors cursor-pointer\n                    ".concat(t.read?"bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700":"bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/30 dark:hover:bg-blue-900/50","\n                    ").concat(a<r.length-1?"border-b dark:border-gray-700":""),children:(0,E.jsxs)("div",{className:"flex items-start",children:[(0,E.jsx)("div",{className:"flex-shrink-0 mt-1",children:G(t.type)}),(0,E.jsxs)("div",{className:"ml-4 flex-grow",children:[(0,E.jsxs)("div",{className:"flex items-center",children:[(0,E.jsx)("h3",{className:"text-base ".concat(t.read?"font-medium":"font-semibold"," text-gray-900 dark:text-white"),children:t.title}),!t.read&&(0,E.jsx)("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 rounded-full",children:"Neu"})]}),(0,E.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:t.message}),(0,E.jsx)("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:H(t.createdAt)})]}),(0,E.jsxs)("div",{className:"ml-4 flex-shrink-0 flex space-x-2",children:[!t.read&&(0,E.jsx)(c.A,{title:"Als gelesen markieren",children:(0,E.jsx)("button",{onClick:e=>{e.stopPropagation(),z(t.id)},className:"text-blue-600 hover:text-blue-900 p-1.5 rounded-full hover:bg-blue-50 dark:text-blue-400 dark:hover:text-blue-300 dark:hover:bg-blue-900/30",children:(0,E.jsx)(p.A,{className:"h-5 w-5"})})}),(0,E.jsx)(c.A,{title:e("notification.deleteTitle"),children:(0,E.jsx)("button",{onClick:e=>{var r;e.stopPropagation(),r=t.id,R(r),D(!0)},className:"text-red-600 hover:text-red-900 p-1.5 rounded-full hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-900/30",children:(0,E.jsx)(w.A,{className:"h-5 w-5"})})})]})]})},t.id)))}),O>1&&(0,E.jsx)("div",{className:"flex justify-center mt-6",children:(0,E.jsx)("nav",{className:"flex items-center space-x-2",children:Array.from({length:O},((e,r)=>r+1)).map((e=>(0,E.jsx)("button",{onClick:()=>L(e),className:"px-3 py-1 rounded-md text-sm font-medium\n                      ".concat(F===e?"bg-blue-600 text-white dark:bg-blue-700":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"),children:e},e)))})})]}),(0,E.jsxs)(d.A,{open:q,onClose:()=>D(!1),PaperProps:{className:"dark:bg-gray-800 dark:text-white"},children:[(0,E.jsx)(i.A,{className:"dark:text-white",children:"Benachrichtigung l\xf6schen"}),(0,E.jsx)(o.A,{children:(0,E.jsx)(x.A,{className:"dark:text-gray-300",children:"M\xf6chten Sie diese Benachrichtigung wirklich l\xf6schen?"})}),(0,E.jsxs)(h.A,{children:[(0,E.jsx)(m.A,{onClick:()=>D(!1),color:"primary",className:"dark:text-blue-400",children:"Abbrechen"}),(0,E.jsx)(m.A,{onClick:async()=>{if(null!==T)try{await v.O.deleteNotification(T),t((e=>e.filter((e=>e.id!==T))))}catch(e){console.error("Fehler beim L\xf6schen der Benachrichtigung:",e)}D(!1),R(null)},color:"error",className:"dark:text-red-400",children:e("common.delete")})]})]}),(0,E.jsxs)(d.A,{open:_,onClose:()=>K(!1),PaperProps:{className:"dark:bg-gray-800 dark:text-white"},children:[(0,E.jsx)(i.A,{className:"dark:text-white",children:"Alle Benachrichtigungen l\xf6schen"}),(0,E.jsx)(o.A,{children:(0,E.jsx)(x.A,{className:"dark:text-gray-300",children:"M\xf6chten Sie wirklich alle Benachrichtigungen l\xf6schen? Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden."})}),(0,E.jsxs)(h.A,{children:[(0,E.jsx)(m.A,{onClick:()=>K(!1),color:"primary",className:"dark:text-blue-400",children:"Abbrechen"}),(0,E.jsx)(m.A,{onClick:async()=>{try{await v.O.deleteAllNotifications(),t([])}catch(e){console.error("Fehler beim L\xf6schen aller Benachrichtigungen:",e)}K(!1)},color:"error",className:"dark:text-red-400",children:"Alle l\xf6schen"})]})]})]})})}}}]);
//# sourceMappingURL=876.8ffc7334.chunk.js.map