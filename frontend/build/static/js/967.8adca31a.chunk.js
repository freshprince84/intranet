"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[967],{542:(e,t,r)=>{r.d(t,{Ay:()=>d,Zj:()=>i,i$:()=>n});var a=r(1923),s=r(1801);console.log("DEBUGAUSGABE API-Client: API_URL ist:",s.H$);const l=a.A;l.interceptors.request.use((e=>{var t;const r=`${e.baseURL}${e.url}`;console.log("DEBUGAUSGABE API-Client: Vollst\xe4ndige Request URL:",r),console.log("DEBUGAUSGABE API-Client: Request-Methode:",null===(t=e.method)||void 0===t?void 0:t.toUpperCase()),console.log("DEBUGAUSGABE API-Client: Request-Headers:",e.headers),console.log("DEBUGAUSGABE API-Client: Request-Daten:",e.data);const a=localStorage.getItem("token");return console.log("DEBUGAUSGABE API-Client: Token vorhanden:",!!a),e}),(e=>(console.error("DEBUGAUSGABE API-Client: Fehler im Request Interceptor:",e),Promise.reject(e)))),l.interceptors.response.use((e=>(console.log("DEBUGAUSGABE API-Client: Response erhalten:",e.status,e.config.url),e)),(e=>(console.error("DEBUGAUSGABE API-Client: Fehler im Response Interceptor:",e.message),e.response?(console.error("DEBUGAUSGABE API-Client: Response Status:",e.response.status),console.error("DEBUGAUSGABE API-Client: Response Daten:",e.response.data)):console.error("DEBUGAUSGABE API-Client: Keine Response erhalten"),Promise.reject(e))));const n={getAll:()=>l.get("/users"),getById:e=>l.get(`/users/${e}`),create:e=>{console.log("DEBUGAUSGABE API-Client: userApi.create wird aufgerufen mit Daten:",e);try{return l.post("/users",e).then((e=>(console.log("DEBUGAUSGABE API-Client: userApi.create Antwort:",e),e))).catch((e=>{throw console.error("DEBUGAUSGABE API-Client: userApi.create Fehler:",e.response||e),e}))}catch(t){throw console.error("DEBUGAUSGABE API-Client: Fehler vor dem API-Aufruf in userApi.create:",t),t}},update:(e,t)=>l.put(`/users/${e}`,t),updateRoles:(e,t)=>l.put(`/users/${e}/roles`,{roleIds:t})},i={getAll:()=>(console.log("DEBUGAUSGABE API-Client: roleApi.getAll wird aufgerufen"),l.get("/roles").then((e=>(console.log("DEBUGAUSGABE API-Client: roleApi.getAll erfolgreich:",e.data.length,"Rollen geladen"),e))).catch((e=>{throw console.error("DEBUGAUSGABE API-Client: roleApi.getAll Fehler:",e.message),e}))),getById:e=>(console.log(`DEBUGAUSGABE API-Client: roleApi.getById(${e}) wird aufgerufen`),l.get(`/roles/${e}`)),create:e=>{console.log("DEBUGAUSGABE API-Client: roleApi.create wird aufgerufen mit Daten:",e);try{return l.post("/roles",e).then((e=>(console.log("DEBUGAUSGABE API-Client: roleApi.create Antwort:",e),e))).catch((e=>{throw console.error("DEBUGAUSGABE API-Client: roleApi.create Fehler:",e.response||e),e}))}catch(t){throw console.error("DEBUGAUSGABE API-Client: Fehler vor dem API-Aufruf in roleApi.create:",t),t}},update:(e,t)=>{console.log(`DEBUGAUSGABE API-Client: roleApi.update f\xfcr ID ${e} wird aufgerufen mit Daten:`,t);try{return l.put(`/roles/${e}`,t).then((e=>(console.log("DEBUGAUSGABE API-Client: roleApi.update Antwort:",e),e))).catch((e=>{throw console.error("DEBUGAUSGABE API-Client: roleApi.update Fehler:",e.response||e),e}))}catch(r){throw console.error("DEBUGAUSGABE API-Client: Fehler vor dem API-Aufruf in roleApi.update:",r),r}},delete:e=>(console.log(`DEBUGAUSGABE API-Client: roleApi.delete(${e}) wird aufgerufen`),l.delete(`/roles/${e}`))},d=l},1713:(e,t,r)=>{r.d(t,{DW:()=>j,I5:()=>x,IF:()=>b,P0:()=>o,Pg:()=>f,Yq:()=>d,_2:()=>m,c$:()=>g,fU:()=>c,h4:()=>y,pg:()=>u,uT:()=>h,vv:()=>p});var a=r(4653),s=r(9837),l=r(1620),n=r(6981),i=r(887);const d=e=>{if(!e)return"-";try{const t=e.split("-");if(3!==t.length)return"-";const r=parseInt(t[0]),a=parseInt(t[1])-1,s=parseInt(t[2]);return new Date(r,a,s,12,0,0).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(t){return console.error("Fehler beim Formatieren des Datums:",t),"-"}},c=e=>{if(!e)return"-";try{const t=(0,a.H)(e),r=t.getUTCHours().toString().padStart(2,"0");return`${r}:${t.getUTCMinutes().toString().padStart(2,"0")}`}catch(t){return console.error(`Fehler beim Formatieren der Zeit f\xfcr ${e}:`,t),"-"}},o=(e,t)=>{if(!e||!t)return"-";try{const r=e.endsWith("Z")?e.substring(0,e.length-1):e,a=t.endsWith("Z")?t.substring(0,t.length-1):t,s=new Date(r),l=new Date(a).getTime()-s.getTime(),n=Math.floor(l/6e4),i=Math.floor(n/60);return`${i}h ${n%60}m`}catch(r){return console.error("Fehler bei der Dauerberechnung:",r),"-"}},u=e=>{try{const t=parseInt(e.substring(0,4)),r=parseInt(e.substring(6)),a=new Date(Date.UTC(t,0,1,12,0,0)).getUTCDay(),n=a<=4?4-a:11-a,d=new Date(Date.UTC(t,0,1+n,12,0,0)),c=new Date(Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()+7*(r-1),12,0,0)),o=new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()-3,12,0,0)),u=(0,s.GP)(o,"yyyy-MM-dd");if(console.log(`Konvertierte Woche ${e} zu Datum: ${u} (Wochentag: ${(0,s.GP)(o,"EEEE",{locale:i.de})})`),"Montag"!==(0,s.GP)(o,"EEEE",{locale:i.de})){console.warn("Berechnetes Datum ist kein Montag! Korrigiere...");const e=(0,l.k)(o,{weekStartsOn:1});return(0,s.GP)(e,"yyyy-MM-dd")}return u}catch(t){console.error("Fehler beim Konvertieren des Wochendatums:",t);const e=(0,l.k)(new Date,{weekStartsOn:1});return(0,s.GP)(e,"yyyy-MM-dd")}},h=(e,t)=>{try{if(!e||!e.startTime)return!1;return e.startTime.split("T")[0]===t}catch(r){return console.error("Fehler beim Pr\xfcfen der Relevanz eines Worktime-Eintrags:",r),!1}},m=e=>{if(!e)return[];const t=new Date(e),r=[];for(let a=0;a<7;a++){const e=(0,n.f)(t,a),l={date:(0,s.GP)(e,"yyyy-MM-dd"),day:(0,s.GP)(e,"EEEE",{locale:i.de})};r.push(l)}return r},x=e=>{if(!e)return"-";try{return new Date(e).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return console.error("Fehler beim Formatieren des Datums und der Zeit:",t),"-"}},b=e=>{const t=new Date(e);return new Date(t.getTime()+6e4*t.getTimezoneOffset())},g=e=>{try{const t=e.reduce(((e,t)=>{if(!t.endTime)return e;const r=t.startTime.endsWith("Z")?t.startTime.substring(0,t.startTime.length-1):t.startTime,a=t.endTime.endsWith("Z")?t.endTime.substring(0,t.endTime.length-1):t.endTime,s=new Date(r),l=new Date(a).getTime()-s.getTime();return e+Math.floor(l/6e4)}),0),r=Math.floor(t/60);return`${r}h ${t%60}m`}catch(t){return console.error("Fehler bei der Formatierung der Gesamtdauer:",t),"0h 0m"}},p=e=>!!(e.invoiceItems&&e.invoiceItems.length>0),y=e=>{if(!e.invoiceItems||0===e.invoiceItems.length)return null;return e.invoiceItems[0].invoice},f=e=>({DRAFT:"Entwurf",SENT:"Gesendet",PAID:"Bezahlt",OVERDUE:"\xdcberf\xe4llig",CANCELLED:"Storniert"}[e]||e),j=e=>({DRAFT:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",SENT:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",PAID:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",OVERDUE:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",CANCELLED:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"}[e]||"bg-gray-100 text-gray-800")},7967:(e,r,a)=>{a.r(r),a.d(r,{default:()=>Se});var s=a(5043),l=a(4117),n=a(3216),i=a(542);const d={getAllArticles:async()=>(await i.Ay.get("/cerebro/carticles")).data,getArticleById:async e=>(await i.Ay.get(`/cerebro/carticles/${e}`)).data,getArticleBySlug:async e=>(await i.Ay.get(`/cerebro/carticles/slug/${e}`)).data,getArticlesStructure:async()=>(await i.Ay.get("/cerebro/carticles/structure")).data,createArticle:async e=>(await i.Ay.post("/cerebro/carticles",e)).data,updateArticle:async(e,t)=>(await i.Ay.put(`/cerebro/carticles/${e}`,t)).data,deleteArticle:async e=>{await i.Ay.delete(`/cerebro/carticles/${e}`)},searchArticles:async e=>(await i.Ay.get(`/cerebro/carticles/search?q=${encodeURIComponent(e)}`)).data},c={getMediaByArticle:async e=>(await i.Ay.get(`/cerebro/media/carticle/${e}`)).data,getMediaById:async e=>(await i.Ay.get(`/cerebro/media/${e}`)).data,uploadMedia:async(e,t)=>(await i.Ay.post("/cerebro/media",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})).data,deleteMedia:async e=>{await i.Ay.delete(`/cerebro/media/${e}`)},updateMediaFilename:async(e,t)=>(await i.Ay.put(`/cerebro/media/${e}`,{filename:t})).data},o={getLinksByArticle:async e=>(await i.Ay.get(`/cerebro/links/carticle/${e}`)).data,getLinkById:async e=>(await i.Ay.get(`/cerebro/links/${e}`)).data,getLinkPreview:async e=>(await i.Ay.get(`/cerebro/links/preview?url=${encodeURIComponent(e)}`)).data,createLink:async e=>(await i.Ay.post("/cerebro/links",e)).data,updateLink:async(e,t)=>(await i.Ay.put(`/cerebro/links/${e}`,{title:t})).data,deleteLink:async e=>{await i.Ay.delete(`/cerebro/links/${e}`)},createExternalLink:async e=>(await i.Ay.post("/api/cerebro/links",e)).data,updateExternalLink:async(e,t)=>(await i.Ay.put(`/api/cerebro/links/${e}`,t)).data,deleteExternalLink:async e=>{await i.Ay.delete(`/api/cerebro/links/${e}`)}};var u=a(2760),h=a(3484),m=a(579);const x=e=>{let{limit:t,searchQuery:r}=e;const[a,l]=(0,s.useState)([]),[i,c]=(0,s.useState)(!0),[o,x]=(0,s.useState)(null),[b,g]=(0,s.useState)(r||""),[p,y]=(0,s.useState)("updatedAt"),[f,j]=(0,s.useState)("desc"),w=(0,n.Zp)(),{hasPermission:k}=(0,u.S)(),N=k("cerebro","write","cerebro");(0,s.useEffect)((()=>{(async()=>{try{if(c(!0),r){const e=await d.searchArticles(r);l(e)}else{const e=await d.getAllArticles();l(e)}x(null)}catch(e){console.error("Fehler beim Laden der Artikel:",e),x("Fehler beim Laden der Artikel. Bitte versuchen Sie es sp\xe4ter erneut.")}finally{c(!1)}})()}),[r]);const v=async()=>{if(b.trim())try{c(!0);const e=await d.searchArticles(b);l(e),x(null)}catch(e){console.error("Fehler bei der Suche:",e),x("Fehler bei der Suche. Bitte versuchen Sie es sp\xe4ter erneut.")}finally{c(!1)}else try{c(!0);const e=await d.getAllArticles();l(e),x(null)}catch(e){console.error("Fehler beim Laden der Artikel:",e),x("Fehler beim Laden der Artikel. Bitte versuchen Sie es sp\xe4ter erneut.")}finally{c(!1)}},A=e=>{p===e?j("asc"===f?"desc":"asc"):(y(e),j("asc"))},S=[...a].sort(((e,t)=>{if("title"===p)return"asc"===f?e.title.localeCompare(t.title):t.title.localeCompare(e.title);{const r=new Date(e.updatedAt).getTime(),a=new Date(t.updatedAt).getTime();return"asc"===f?r-a:a-r}})),E=e=>e.creatorFirstName&&e.creatorLastName?`${e.creatorFirstName} ${e.creatorLastName}`:"Unbekannt",D=e=>e.parentId?"Vorhanden":"Keine";return(0,m.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold dark:text-white",children:"Cerebro"}),N&&(0,m.jsxs)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded flex items-center",onClick:()=>{w("/cerebro/create")},children:[(0,m.jsx)(h.OiG,{className:"mr-2"})," Neuer Artikel"]})]}),(0,m.jsx)("div",{className:"mb-6",children:(0,m.jsxs)("div",{className:"flex",children:[(0,m.jsx)("input",{type:"text",className:"w-full md:w-[300px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-l-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"Artikel suchen...",value:b,onChange:e=>g(e.target.value),onKeyDown:e=>"Enter"===e.key&&v()}),(0,m.jsx)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-r-md flex items-center",onClick:v,children:(0,m.jsx)(h.KSO,{})})]})}),o&&(0,m.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:o}),i?(0,m.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,m.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 dark:border-blue-400"})}):(0,m.jsx)(m.Fragment,{children:0===a.length?(0,m.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:b?"Keine Artikel gefunden, die Ihren Suchkriterien entsprechen.":"Noch keine Artikel vorhanden."}):(0,m.jsx)("div",{className:"overflow-x-auto bg-white dark:bg-gray-800 rounded-lg shadow",children:(0,m.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,m.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>A("title"),children:(0,m.jsxs)("div",{className:"flex items-center",children:["Titel","title"===p&&("asc"===f?(0,m.jsx)(h.MPV,{className:"ml-1"}):(0,m.jsx)(h.Bg$,{className:"ml-1"}))]})}),(0,m.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Erstellt von"}),(0,m.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>A("updatedAt"),children:(0,m.jsxs)("div",{className:"flex items-center",children:["Zuletzt aktualisiert","updatedAt"===p&&("asc"===f?(0,m.jsx)(h.EDF,{className:"ml-1"}):(0,m.jsx)(h.HL0,{className:"ml-1"}))]})}),(0,m.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\xdcbergeordnet"})]})}),(0,m.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:S.map((e=>{return(0,m.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>{return t=e.slug,void w(`/cerebro/${t}`);var t},children:[(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,m.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.title})}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,m.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:E(e)})}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,m.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:(t=e.updatedAt,new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))})}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,m.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:D(e)})})]},e.id);var t}))})]})})})]})};var b=a(5475),g=a(9813),p=a(9285),y=a(1286),f=a(4201);a(7716);const j=e=>{let{owner:t,repo:r,path:a,branch:l="main"}=e;const[n,i]=(0,s.useState)(""),[d,c]=(0,s.useState)(!0),[o,u]=(0,s.useState)(null);(0,s.useEffect)((()=>{(async()=>{try{c(!0);const e=`https://raw.githubusercontent.com/${t}/${r}/${l}/${a}`,s=await fetch(e);if(!s.ok)throw new Error(`HTTP Fehler! Status: ${s.status}`);const n=await s.text();i(n),u(null)}catch(e){console.error("Fehler beim Laden der Markdown-Datei:",e),u(`Die Markdown-Datei konnte nicht geladen werden: ${e instanceof Error?e.message:"Unbekannter Fehler"}`),i("")}finally{c(!1)}})()}),[t,r,a,l]);const h={code(e){let{node:t,inline:r,className:a,children:s,...l}=e;const n=/language-(\w+)/.exec(a||"");return!r&&n?(0,m.jsx)("pre",{className:`language-${n[1]} dark:bg-gray-800 dark:border-gray-700`,children:(0,m.jsx)("code",{className:`${a} dark:text-gray-200`,...l,children:String(s).replace(/\n$/,"")})}):(0,m.jsx)("code",{className:`${a||""} dark:bg-gray-800 dark:text-gray-200`,...l,children:s})},h1:e=>(0,m.jsx)("h1",{className:"text-2xl font-bold mb-4 border-b border-gray-200 dark:border-gray-700 pb-2 dark:text-white",...e}),h2:e=>(0,m.jsx)("h2",{className:"text-xl font-bold mt-6 mb-4 border-b border-gray-200 dark:border-gray-700 pb-2 dark:text-white",...e}),h3:e=>(0,m.jsx)("h3",{className:"text-lg font-bold mt-5 mb-3 dark:text-white",...e}),a:e=>(0,m.jsx)("a",{className:"text-blue-600 dark:text-blue-400 hover:underline",target:"_blank",rel:"noopener noreferrer",...e}),table:e=>(0,m.jsx)("table",{className:"border-collapse border border-gray-300 dark:border-gray-700 my-4",...e}),th:e=>(0,m.jsx)("th",{className:"border border-gray-300 dark:border-gray-700 px-4 py-2 bg-gray-100 dark:bg-gray-800 dark:text-gray-200",...e}),td:e=>(0,m.jsx)("td",{className:"border border-gray-300 dark:border-gray-700 px-4 py-2 dark:text-gray-200",...e}),ul:e=>(0,m.jsx)("ul",{className:"list-disc pl-5 mb-4 dark:text-gray-200",...e}),ol:e=>(0,m.jsx)("ol",{className:"list-decimal pl-5 mb-4 dark:text-gray-200",...e}),li:e=>(0,m.jsx)("li",{className:"mb-1 dark:text-gray-200",...e}),img:e=>(0,m.jsx)("img",{className:"max-w-full h-auto my-4",...e}),p:e=>(0,m.jsx)("p",{className:"dark:text-gray-200 mb-4",...e}),blockquote:e=>(0,m.jsx)("blockquote",{className:"border-l-4 border-gray-300 dark:border-gray-700 pl-4 py-2 italic text-gray-600 dark:text-gray-400",...e})};return d?(0,m.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,m.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 dark:border-blue-400"})}):o?(0,m.jsxs)("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:[(0,m.jsx)("h3",{className:"font-bold",children:"Fehler"}),(0,m.jsx)("p",{children:o}),(0,m.jsxs)("p",{className:"mt-2",children:["Pr\xfcfe, ob die Datei",(0,m.jsx)("a",{href:`https://github.com/${t}/${r}/blob/${l}/${a}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline ml-1",children:a})," ","im Repository existiert."]})]}):(0,m.jsxs)("div",{className:"github-markdown-content",children:[(0,m.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-2 mb-4 rounded text-sm flex justify-between items-center",children:[(0,m.jsxs)("span",{className:"dark:text-gray-300",children:["Datei: ",(0,m.jsx)("code",{className:"bg-white dark:bg-gray-800 px-1 py-0.5 rounded",children:a})]}),(0,m.jsx)("a",{href:`https://github.com/${t}/${r}/blob/${l}/${a}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:"Auf GitHub anzeigen \u2192"})]}),(0,m.jsx)("div",{className:"markdown-body dark:bg-gray-800 dark:text-white",children:(0,m.jsx)(g.oz,{components:h,remarkPlugins:[p.A],rehypePlugins:[y.A,f.A],children:n})})]})},w=e=>{let{children:t,language:r="",filename:a=""}=e;const[l,n]=(0,s.useState)(!1),i=a||(r?`${r.toUpperCase()} Code`:"Code");return(0,m.jsxs)("div",{className:"border rounded-md overflow-hidden mb-4 dark:border-gray-700",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-100 dark:bg-gray-800 cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",onClick:()=>n(!l),children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("span",{className:"mr-2 font-bold text-gray-600 dark:text-gray-400",children:l?"\u25b6":"\u25bc"}),(0,m.jsx)("span",{className:"mr-2 text-blue-600 dark:text-blue-400",children:"</>"}),(0,m.jsx)("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:i})]}),(0,m.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded",children:l?"Ausklappen":"Einklappen"})]}),(0,m.jsx)("div",{className:"transition-all duration-300 "+(l?"max-h-0 opacity-0 overflow-hidden":"max-h-full opacity-100"),children:t})]})};var k=a(1713),N=a(1602),v=a(8940),A=a(2704),S=a(1559),E=a(4791),D=a(9642),B=a(9670),C=a(5442),U=a(2811),L=a(9248),G=a(6009),$=a(7012),I=a(8662);const F=()=>(0,m.jsx)(N.A,{className:"h-6 w-6 text-blue-500"}),P=()=>(0,m.jsx)(v.A,{className:"h-6 w-6 text-red-500"}),T=()=>(0,m.jsx)(A.A,{className:"h-6 w-6 text-red-700"}),M=()=>(0,m.jsx)(S.A,{className:"h-6 w-6 text-gray-500"}),R=()=>(0,m.jsx)(E.A,{className:"h-5 w-5 mr-1"}),z=()=>(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-800",viewBox:"0 0 24 24",fill:"currentColor",children:(0,m.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),H=()=>(0,m.jsx)(D.A,{className:"h-5 w-5 text-green-600"}),O=()=>(0,m.jsx)(B.A,{className:"h-5 w-5 mr-1"}),W=()=>(0,m.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),_=()=>(0,m.jsx)(C.A,{className:"h-5 w-5 mr-2"}),q=()=>(0,m.jsx)(G.A,{className:"h-5 w-5 mr-1"}),V=()=>(0,m.jsx)($.A,{className:"h-5 w-5 mr-1"}),Z=e=>{let{media:t}=e;const r=(a=t.mimetype).startsWith("image/")?"image":a.startsWith("video/")?"video":"application/pdf"===a?"pdf":"other";var a;const s=`/uploads/cerebro/${t.path.split("/").pop()}`;return(0,m.jsxs)("div",{className:"border rounded p-3 mb-2 hover:bg-gray-50",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(()=>{switch(r){case"image":return(0,m.jsx)(F,{});case"video":return(0,m.jsx)(P,{});case"pdf":return(0,m.jsx)(T,{});default:return(0,m.jsx)(M,{})}})(),(0,m.jsx)("span",{className:"ml-2 flex-grow",children:t.filename}),(0,m.jsxs)("a",{href:s,download:t.filename,className:"text-blue-600 hover:text-blue-800 flex items-center",children:[(0,m.jsx)(R,{})," Download"]})]}),"image"===r&&(0,m.jsx)("div",{className:"mt-2",children:(0,m.jsx)("img",{src:s,alt:t.filename,className:"max-w-full h-auto rounded",style:{maxHeight:"200px"}})}),"video"===r&&(0,m.jsx)("div",{className:"mt-2",children:(0,m.jsxs)("video",{controls:!0,className:"max-w-full rounded",style:{maxHeight:"200px"},children:[(0,m.jsx)("source",{src:s,type:t.mimetype}),"Ihr Browser unterst\xfctzt das Video-Tag nicht."]})}),"pdf"===r&&(0,m.jsx)("div",{className:"mt-2",children:(0,m.jsx)("iframe",{src:`${s}#view=FitH`,className:"w-full rounded border",style:{height:"200px"},title:t.filename})})]})},K=e=>{let{link:r}=e;const a="google_drive"===r.type,s="youtube"===r.type,l="github_markdown"===r.type,n=l?(e=>{try{let t="",r="",a="",s="";if(e.includes("raw.githubusercontent.com")){const l=e.replace("https://raw.githubusercontent.com/","").split("/");t=l[0],r=l[1],s=l[2],a=l.slice(3).join("/")}else{if(!e.includes("github.com"))return null;{const l=e.replace("https://github.com/","").split("/");t=l[0],r=l[1];const n=-1!==l.indexOf("blob")?l.indexOf("blob"):l.indexOf("raw");s=l[n+1],a=l.slice(n+2).join("/")}}return{owner:t,repo:r,path:a,branch:s}}catch(t){return console.error("Fehler beim Parsen der GitHub-URL:",t),null}})(r.url):null;return(0,m.jsxs)("div",{className:"border rounded p-3 mb-2 hover:bg-gray-50",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[l?(0,m.jsx)(z,{}):(0,m.jsx)(H,{}),(0,m.jsx)("span",{className:"ml-2 flex-grow",children:r.title||r.url}),(0,m.jsxs)("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 flex items-center",children:[(0,m.jsx)(O,{})," ",t("cerebro.actions.open")]})]}),a&&(0,m.jsx)("div",{className:"mt-2",children:(0,m.jsx)("iframe",{src:`${r.url.replace("view","preview")}`,className:"w-full rounded border",style:{height:"300px"},title:r.title||"Google Drive Dokument",allow:"autoplay"})}),s&&(0,m.jsx)("div",{className:"mt-2",children:(0,m.jsx)("iframe",{src:r.url.replace("watch?v=","embed/"),className:"w-full rounded border",style:{height:"300px"},title:r.title||"YouTube Video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),l&&n&&(0,m.jsxs)("div",{className:"mt-2",children:[(0,m.jsxs)("div",{className:"bg-gray-100 p-2 rounded mb-2 flex items-center text-xs",children:[(0,m.jsxs)("span",{className:"font-mono text-gray-600",children:[n.owner,"/",n.repo,"/",n.path]}),(0,m.jsx)("span",{className:"ml-2 px-2 py-1 bg-gray-200 rounded",children:n.branch})]}),(0,m.jsx)(j,{owner:n.owner,repo:n.repo,path:n.path,branch:n.branch})]})]})},Y=()=>{const{t:e}=(0,l.Bd)(),{slug:t}=(0,n.g)(),r=(0,n.Zp)(),{hasPermission:a}=(0,u.S)(),[i,c]=(0,s.useState)(null),[o,h]=(0,s.useState)(!0),[x,f]=(0,s.useState)(null),[N,v]=(0,s.useState)([]),[A,S]=(0,s.useState)([]),[E,D]=(0,s.useState)([]),[B,G]=(0,s.useState)(null),$=a("cerebro","both","button");a("cerebro","both","page");(0,s.useEffect)((()=>{(async()=>{if(t)try{h(!0);const e=await d.getArticleBySlug(t);c(e);const r=e.externalLinks.filter((e=>"github_markdown"===e.type)),a=e.externalLinks.filter((e=>"github_markdown"!==e.type));v(r),S(a),D(e.media),r.length>0&&G(r[0]),f(null)}catch(r){console.error("Fehler beim Laden des Artikels:",r),f(e("cerebro.messages.loadError"))}finally{h(!1)}})()}),[t]);if(o)return(0,m.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,m.jsx)(W,{})});if(x||!i)return(0,m.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[(0,m.jsx)("h3",{className:"font-bold",children:e("common.error")}),(0,m.jsx)("p",{children:x||e("cerebro.messages.articleNotFound")}),(0,m.jsxs)("button",{onClick:()=>r("/cerebro"),className:"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded flex items-center",children:[(0,m.jsx)(_,{})," ",e("cerebro.actions.back")]})]});return(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,m.jsx)("button",{onClick:()=>r("/cerebro"),className:"p-2 rounded-full text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Zur\xfcck",children:(0,m.jsx)(C.A,{className:"h-5 w-5"})}),(0,m.jsx)("div",{className:"flex space-x-2",children:$&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{onClick:()=>r(`/cerebro/${t}/edit`),className:"p-2 rounded-full text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900","aria-label":"Bearbeiten",children:(0,m.jsx)(U.A,{className:"h-5 w-5"})}),(0,m.jsx)("button",{onClick:async()=>{if(i&&window.confirm(e("cerebro.messages.deleteConfirm")))try{await d.deleteArticle(i.id),r("/cerebro")}catch(t){console.error("Fehler beim L\xf6schen des Artikels:",t),alert(e("cerebro.messages.deleteError"))}},className:"p-2 rounded-full text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900","aria-label":"L\xf6schen",children:(0,m.jsx)(L.A,{className:"h-5 w-5"})})]})})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("h1",{className:"text-3xl font-bold dark:text-white",children:i.title}),(0,m.jsxs)("div",{className:"flex text-gray-600 dark:text-gray-400 text-sm mt-2",children:[(0,m.jsxs)("div",{className:"flex items-center mr-4",children:[(0,m.jsx)(q,{}),(0,m.jsxs)("span",{children:["Erstellt von ",i.creatorFirstName," ",i.creatorLastName]})]}),(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(V,{}),(0,m.jsxs)("span",{children:["Aktualisiert am ",(0,k.I5)(i.updatedAt)]})]})]})]}),(0,m.jsxs)("div",{className:"mb-6",children:[N.length>0&&(0,m.jsx)("div",{className:"mb-4",children:(0,m.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-4",children:(0,m.jsxs)("div",{className:"flex",children:[N.map((e=>(0,m.jsx)("button",{className:"py-2 px-4 font-medium text-sm "+((null===B||void 0===B?void 0:B.id)===e.id?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),onClick:()=>G(e),children:e.title||"GitHub"},e.id))),(0,m.jsx)("button",{className:"py-2 px-4 font-medium text-sm "+(B?"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300":"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400"),onClick:()=>G(null),children:"Artikel"})]})})}),(0,m.jsx)("div",{className:"prose dark:prose-invert max-w-none",children:(()=>{if(B){const t=(e=>{try{let t="",r="",a="",s="";if(e.includes("raw.githubusercontent.com")){const l=e.replace("https://raw.githubusercontent.com/","").split("/");t=l[0],r=l[1],s=l[2],a=l.slice(3).join("/")}else{if(!e.includes("github.com"))return null;{const l=e.replace("https://github.com/","").split("/");t=l[0],r=l[1];const n=-1!==l.indexOf("blob")?l.indexOf("blob"):l.indexOf("raw");s=l[n+1],a=l.slice(n+2).join("/")}}return{owner:t,repo:r,path:a,branch:s}}catch(t){return console.error("Fehler beim Parsen der GitHub-URL:",t),null}})(B.url);if(t)return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"bg-gray-100 p-2 rounded mb-4 flex justify-between items-center text-xs",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("span",{className:"font-mono text-gray-600",children:[t.owner,"/",t.repo,"/",t.path]}),(0,m.jsx)("span",{className:"ml-2 px-2 py-1 bg-gray-200 rounded",children:t.branch})]}),(0,m.jsxs)("a",{href:B.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 flex items-center",children:[(0,m.jsx)(O,{})," ",e("cerebro.actions.viewOnGitHub")]})]}),(0,m.jsx)(j,{owner:t.owner,repo:t.repo,path:t.path,branch:t.branch})]})}return(0,m.jsx)(g.oz,{remarkPlugins:[p.A],rehypePlugins:[y.A],components:{code:e=>{let{node:t,className:r,children:a,...s}=e;const l=/language-(\w+)/.exec(r||"");if(!s.inline&&l){const e=l[1],t=String(a).replace(/\n$/,"");if(t.length>500)return(0,m.jsx)(w,{language:e,children:(0,m.jsx)("pre",{className:`language-${e} bg-gray-100 p-4 rounded overflow-auto`,children:(0,m.jsx)("code",{className:r,...s,children:t})})});try{return(0,m.jsx)("div",{className:"bg-gray-800 p-4 rounded overflow-auto",children:(0,m.jsx)("pre",{className:r,children:(0,m.jsx)("code",{...s,children:t})})})}catch(n){return console.error("Error rendering syntax highlighter:",n),(0,m.jsx)("pre",{className:`language-${e} bg-gray-100 p-4 rounded overflow-auto`,children:(0,m.jsx)("code",{className:r,...s,children:t})})}}return(0,m.jsx)("code",{className:r,...s,children:a})}},children:i.content})})()})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsx)("h2",{className:"text-xl font-bold mb-2 dark:text-white",children:"Medien"}),$&&(0,m.jsx)(b.N_,{to:`/cerebro/${t}/media/add`,className:"p-2 rounded-full text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900","aria-label":"Medien hinzuf\xfcgen",children:(0,m.jsx)(I.A,{className:"h-5 w-5"})})]}),0===E.length?(0,m.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Keine Medien vorhanden."}):(0,m.jsx)("div",{className:"grid grid-cols-1 gap-4",children:E.map((e=>(0,m.jsx)(Z,{media:e},e.id)))})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsx)("h2",{className:"text-xl font-bold mb-2 dark:text-white",children:"Externe Links"}),$&&(0,m.jsxs)("div",{className:"flex space-x-2",children:[(0,m.jsx)(b.N_,{to:`/cerebro/${t}/link/add`,className:"p-2 rounded-full text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900","aria-label":"Link hinzuf\xfcgen",children:(0,m.jsx)(I.A,{className:"h-5 w-5"})}),(0,m.jsx)(b.N_,{to:`/cerebro/${t}/github/add`,className:"p-2 rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"GitHub Markdown hinzuf\xfcgen",children:(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,m.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})})]})]}),0===A.length?(0,m.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Keine externen Links vorhanden."}):(0,m.jsx)("div",{className:"grid grid-cols-1 gap-4",children:A.map((e=>(0,m.jsx)(K,{link:e},e.id)))})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{className:"border rounded p-4 dark:border-gray-700",children:[(0,m.jsx)("h2",{className:"text-xl font-bold mb-2 dark:text-white",children:"Verkn\xfcpfte Tasks"}),(0,m.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Keine Tasks verkn\xfcpft."})]}),(0,m.jsxs)("div",{className:"border rounded p-4 dark:border-gray-700",children:[(0,m.jsx)("h2",{className:"text-xl font-bold mb-2 dark:text-white",children:"Verkn\xfcpfte Requests"}),(0,m.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Keine Requests verkn\xfcpft."})]})]})]})};var Q=a(3229),J=a.n(Q);a(372);const X={toolbar:[[{header:[1,2,3,4,5,6,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:[]}],["link","image","video"],["clean"]]},ee=["header","bold","italic","underline","strike","list","bullet","color","background","align","link","image","video"],te=e=>e.match(/(https?:\/\/[^\s]+)/g)||[],re=e=>e.match(/(https?:\/\/.*\.(?:png|jpg|jpeg|gif|webp))/gi)||[],ae=e=>[...e.match(/(https?:\/\/.*\.(?:mp4|webm|ogg))/gi)||[],...e.match(/(https?:\/\/(?:www\.)?youtube\.com\/watch\?v=([^&]+))/gi)||[],...e.match(/(https?:\/\/(?:www\.)?vimeo\.com\/([0-9]+))/gi)||[]],se=e=>e.match(/(https?:\/\/.*\.pdf)/gi)||[],le=()=>{const{t:e}=(0,l.Bd)(),{slug:t}=(0,n.g)(),r=(0,n.Zp)(),{hasPermission:a}=(0,u.S)(),[i,h]=(0,s.useState)({title:"",parentId:null,content:""}),[x,b]=(0,s.useState)(!0),[g,p]=(0,s.useState)(!1),[y,f]=(0,s.useState)(null),[j,w]=(0,s.useState)([]),[k,N]=(0,s.useState)(!0),[v,A]=(0,s.useState)(null),S=(0,s.useCallback)((e=>{h((t=>({...t,content:e})));const t=te(e),r=re(e),a=ae(e),s=se(e);D([...r,...a,...s]),C(t.filter((e=>!r.includes(e)&&!a.includes(e)&&!s.includes(e))))}),[]),[E,D]=(0,s.useState)([]),[B,C]=(0,s.useState)([]),U=a("cerebro","both","button"),L=a("cerebro","both","page"),G=U||L;if((0,s.useEffect)((()=>{(async()=>{try{b(!0);const e=await d.getAllArticles();if(w(e.map((e=>({id:e.id,title:e.title})))),t){const e=await d.getArticleBySlug(t);N(!1),A(e.id),h({title:e.title,parentId:e.parentId,content:e.content||""})}f(null)}catch(r){console.error("Fehler beim Laden der Daten:",r),f(e("cerebro.articleEdit.loadError"))}finally{b(!1)}})()}),[t]),!G)return(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,m.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:e("cerebro.messages.noPermission")}),(0,m.jsx)("button",{className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded",onClick:()=>r("/cerebro"),children:e("cerebro.actions.backToOverview")})]});const $=e=>{const{name:t,value:r}=e.target;h((e=>({...e,[t]:""===r?null:r})))};return(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold mb-6",children:k?"Neuen Artikel erstellen":"Artikel bearbeiten"}),y&&(0,m.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:y}),x?(0,m.jsxs)("div",{className:"text-center py-8",children:[(0,m.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,m.jsx)("p",{className:"mt-2 text-gray-600",children:"Daten werden geladen..."})]}):(0,m.jsxs)("form",{onSubmit:async t=>{var a;if(t.preventDefault(),i.title.trim())try{let e;if(p(!0),k?e=await d.createArticle({title:i.title,parentId:i.parentId,content:i.content}):v&&(e=await d.updateArticle(v,{title:i.title,parentId:i.parentId,content:i.content})),e){const t=te(i.content),r=re(i.content),l=ae(i.content),n=se(i.content),d=[...r,...l,...n];for(const a of d)try{let t="other";a.match(/\.(jpg|jpeg|png|gif|webp)$/i)?t="image":a.match(/\.(mp4|webm|ogg)$/i)||a.includes("youtube.com")||a.includes("vimeo.com")?t="video":a.match(/\.pdf$/i)&&(t="pdf");const r=new FormData;r.append("carticleId",e.id),r.append("url",a),r.append("type",t),r.append("title",`Automatisch erkannt: ${a.split("/").pop()||a}`),r.append("description","Automatisch erkannt aus dem Artikelinhalt"),await c.uploadMedia(r)}catch(s){console.error(`Fehler beim Hinzuf\xfcgen des Mediums ${a}:`,s)}const u=t.filter((e=>!r.includes(e)&&!l.includes(e)&&!n.includes(e)));for(const i of u)try{const t=(a=i).includes("github.com")&&(a.endsWith(".md")||a.includes("/blob/")||a.includes("/raw/"));await o.createExternalLink({carticleSlug:e.slug,url:i,title:`Automatisch erkannt: ${i.split("/").pop()||i}`,type:t?"github":"external"})}catch(s){console.error(`Fehler beim Hinzuf\xfcgen des Links ${i}:`,s)}}r(`/cerebro/${e.slug}`)}catch(s){console.error("Fehler beim Speichern des Artikels:",s),f("Fehler beim Speichern des Artikels. Bitte versuchen Sie es sp\xe4ter erneut."),p(!1)}else f(e("cerebro.articleEdit.titleRequired"))},className:"bg-white rounded-lg shadow p-6",children:[(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{htmlFor:"title",className:"block text-gray-700 font-medium mb-2",children:"Titel *"}),(0,m.jsx)("input",{type:"text",id:"title",name:"title",value:i.title,onChange:$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{htmlFor:"parentId",className:"block text-gray-700 font-medium mb-2",children:"Elternartikel"}),(0,m.jsxs)("select",{id:"parentId",name:"parentId",value:i.parentId||"",onChange:$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,m.jsx)("option",{value:"",children:"Kein Elternartikel (Root)"}),j.filter((e=>e.id!==v)).map((e=>(0,m.jsx)("option",{value:e.id,children:e.title},e.id)))]}),(0,m.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Optional. W\xe4hlen Sie einen \xfcbergeordneten Artikel aus, um eine Hierarchie zu erstellen."})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("label",{className:"block text-gray-700 font-medium mb-2",children:"Inhalt"}),(0,m.jsx)("div",{className:"border border-gray-300 rounded-md",children:(0,m.jsx)(J(),{theme:"snow",value:i.content,onChange:S,modules:X,formats:ee,className:"h-64 mb-12"})}),(E.length>0||B.length>0)&&(0,m.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,m.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Automatisch erkannt:"}),E.length>0&&(0,m.jsxs)("div",{className:"mb-3",children:[(0,m.jsx)("h4",{className:"font-medium text-sm text-gray-700 mb-1",children:"Medien:"}),(0,m.jsx)("ul",{className:"list-disc pl-5 text-sm",children:E.map(((e,t)=>(0,m.jsx)("li",{className:"text-blue-600 hover:underline",children:(0,m.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:e})},t)))})]}),B.length>0&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{className:"font-medium text-sm text-gray-700 mb-1",children:"Links:"}),(0,m.jsx)("ul",{className:"list-disc pl-5 text-sm",children:B.map(((e,t)=>(0,m.jsx)("li",{className:"text-blue-600 hover:underline",children:(0,m.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:e})},t)))})]}),(0,m.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Diese Medien und Links werden automatisch mit dem Artikel gespeichert."})]})]}),(0,m.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,m.jsx)("button",{type:"button",onClick:()=>{r(t?`/cerebro/${t}`:"/cerebro")},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400",disabled:g,children:"Abbrechen"}),(0,m.jsx)("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:g,children:g?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})};var ne=a(7449),ie=a(2174),de=a(7591),ce=a(9265);const oe=()=>(0,m.jsx)(ne.A,{className:"h-5 w-5 text-gray-500"}),ue=e=>{let{articles:t,currentSlug:r,level:a=0,expandedIds:s=new Set,onToggleExpand:l,onArticleClick:i}=e;(0,n.Zp)();return(0,m.jsx)("ul",{className:"pl-"+(a>0?"4":"0"),children:t.map((e=>{const t=e.children&&e.children.length>0,n=s.has(e.id),d=e.slug===r;return(0,m.jsxs)("li",{className:"mb-1",children:[(0,m.jsxs)("div",{className:"flex items-center py-1 px-2 rounded cursor-pointer "+(d?"bg-blue-100 text-blue-800":"hover:bg-gray-100"),onClick:()=>{return t=e.slug,void(i&&i(t));var t},children:[t&&(0,m.jsx)("button",{onClick:t=>((e,t)=>{e.stopPropagation(),l&&l(t)})(t,e.id),className:"mr-1 w-4 h-4 flex items-center justify-center text-gray-500",children:n?(0,m.jsx)(ie.A,{className:"h-4 w-4"}):(0,m.jsx)(I.A,{className:"h-4 w-4"})}),(0,m.jsx)("span",{className:"flex-1 truncate",children:e.title})]}),t&&n&&(0,m.jsx)(ue,{articles:e.children,currentSlug:r,level:a+1,expandedIds:s,onToggleExpand:l,onArticleClick:i})]},e.id)}))})},he=e=>{var t;let{mdFiles:r}=e;const a=(0,n.Zp)(),[i,c]=(0,s.useState)([]),[o,h]=(0,s.useState)([]),[x,g]=(0,s.useState)(null),[p,y]=(0,s.useState)(!0),[f,j]=(0,s.useState)(null),[w,k]=(0,s.useState)(window.innerWidth<720),[N,v]=(0,s.useState)(new Set),[A,S]=(0,s.useState)(window.innerWidth>=720),[E,D]=(0,s.useState)(""),[B,C]=(0,s.useState)(!1),{slug:U}=(0,n.g)(),{hasPermission:L}=(0,u.S)(),{t:G}=(0,l.Bd)();(0,s.useEffect)((()=>{const e=L("cerebro","both","button"),t=L("cerebro","both","page");console.log("Berechtigungspr\xfcfung:"),console.log("cerebro.both.button:",e),console.log("cerebro.both.page:",t),C(e||t)}),[L]),(0,s.useEffect)((()=>{const e=()=>{const e=window.innerWidth<720;k(e),window.innerWidth>=720&&S(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,s.useEffect)((()=>{(async()=>{try{y(!0);const e=await d.getArticlesStructure(),t=e.find((e=>"Markdown-Dateien"===e.title));t?(g(t),v((e=>{const r=new Set(e);return r.add(t.id),r}))):console.warn("Markdown-Ordner nicht gefunden!"),h(e.filter((e=>"Markdown-Dateien"!==e.title))),y(!1)}catch(e){console.error("Fehler beim Laden der Artikelstruktur:",e),j("Fehler beim Laden der Artikelstruktur. Bitte versuchen Sie es sp\xe4ter erneut."),y(!1)}})()}),[]);const $=e=>{v((t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r}))};return(0,m.jsxs)("nav",{className:"h-full overflow-hidden flex flex-col",children:[w&&(0,m.jsx)("button",{className:"fixed top-[85px] left-4 z-40 p-2 rounded-full text-gray-600 hover:bg-gray-100 md:hidden",onClick:()=>{const e=!A;S(e);const t=new CustomEvent("cerebro-sidebar-toggle",{detail:{open:e}});window.dispatchEvent(t)},"aria-label":A?"Men\xfc schlie\xdfen":"Men\xfc \xf6ffnen",children:A?(0,m.jsx)(de.A,{className:"h-5 w-5"}):(0,m.jsx)(ce.A,{className:"h-5 w-5"})}),(0,m.jsx)("div",{className:`\n          bg-white dark:bg-gray-800 flex flex-col h-full\n          ${w?"fixed top-[150px] left-0 z-20 transition-transform duration-300 ease-in-out w-60 max-h-[calc(100vh-228px)] border-r border-gray-200 dark:border-gray-700":"w-full h-full border-r border-gray-200 dark:border-gray-700"}\n          ${w&&!A?"-translate-x-full":"translate-x-0"}\n        `,children:(0,m.jsxs)("div",{className:`p-2 ${w?"pt-4":"pt-6"} flex-grow flex flex-col overflow-hidden`,children:[(0,m.jsxs)("div",{className:"mb-3 flex items-center space-x-2",children:[B&&(0,m.jsxs)("div",{className:"relative group",children:[(0,m.jsx)("button",{className:"p-2 rounded-full text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900",onClick:()=>a("/cerebro/create"),"aria-label":G("cerebro.actions.createArticle"),children:(0,m.jsx)(I.A,{className:"h-5 w-5"})}),(0,m.jsx)("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block bg-gray-800 dark:bg-gray-700 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:G("cerebro.actions.createArticle")})]}),(0,m.jsx)("form",{onSubmit:e=>{e.preventDefault(),E.trim()&&(a(`/cerebro/search?q=${encodeURIComponent(E)}`),w&&S(!1))},className:"flex-1",children:(0,m.jsxs)("div",{className:"flex",children:[(0,m.jsx)("input",{type:"text",value:E,onChange:e=>D(e.target.value),placeholder:"Suchen...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-l-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),(0,m.jsx)("button",{type:"submit",className:"p-2 rounded-r-md border border-l-0 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600","aria-label":"Suchen",children:(0,m.jsx)(oe,{})})]})})]}),(0,m.jsxs)("div",{className:"overflow-y-auto flex-grow",children:[p&&(0,m.jsx)("div",{className:"flex justify-center items-center p-4",children:(0,m.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}),f&&(0,m.jsx)("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-2 py-2 rounded text-sm",children:f}),!p&&o.length>0&&(0,m.jsxs)("div",{className:"space-y-1 mb-4",children:[(0,m.jsx)("h3",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Artikel"}),(0,m.jsx)(ue,{articles:o,currentSlug:U,expandedIds:N,onToggleExpand:$,onArticleClick:e=>a(`/cerebro/${e}`)})]}),!p&&x&&(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("button",{onClick:()=>$(x.id),className:"mr-1 w-4 h-4 flex items-center justify-center text-gray-500 dark:text-gray-400",children:N.has(x.id)?(0,m.jsx)(ie.A,{className:"h-4 w-4"}):(0,m.jsx)(I.A,{className:"h-4 w-4"})}),(0,m.jsx)("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:x.title})]}),N.has(x.id)&&(null===(t=x.children)||void 0===t?void 0:t.length)>0&&(0,m.jsx)("div",{className:"ml-4 mt-2 space-y-1",children:x.children.map((e=>(0,m.jsx)(b.N_,{to:`/cerebro/${e.slug}`,className:"block truncate px-2 py-1 rounded-md "+(e.slug===U?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-700"),children:e.title},e.id)))})]})]})]})})]})},me=()=>{const{slug:e}=(0,n.g)(),t=(0,n.Zp)(),{hasPermission:r}=(0,u.S)(),a=(0,s.useRef)(null),[l,i]=(0,s.useState)(null),[d,o]=(0,s.useState)(""),[h,x]=(0,s.useState)(!1),[b,g]=(0,s.useState)(null),[p,y]=(0,s.useState)(0),f=r("cerebro","both","button"),j=r("cerebro","both","page"),w=e=>["image/jpeg","image/png","image/gif","image/webp","application/pdf","video/mp4","video/webm"].includes(e.type),k=()=>{a.current&&a.current.click()};if(!(f||j))return(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,m.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:"Sie haben keine Berechtigung, Medien hinzuzuf\xfcgen."}),(0,m.jsx)("button",{className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded",onClick:()=>t(`/cerebro/${e}`),children:"Zur\xfcck zum Artikel"})]});return(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Medien hinzuf\xfcgen"}),b&&(0,m.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:b}),(0,m.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,m.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),l)if(d.trim())if(e)if(w(l))try{x(!0),y(0);const r=new FormData;r.append("file",l),r.append("filename",d.trim()),r.append("carticleSlug",e),await c.uploadMedia(r,(e=>{const t=Math.round(100*e.loaded/e.total);y(t)})),t(`/cerebro/${e}`)}catch(a){console.error("Fehler beim Hochladen der Datei:",a),g("Fehler beim Hochladen der Datei. Bitte versuchen Sie es sp\xe4ter erneut."),x(!1)}else g("Dieser Dateityp wird nicht unterst\xfctzt. Erlaubt sind Bilder, PDFs und Videos.");else g("Artikel-ID fehlt.");else g("Bitte geben Sie einen Dateinamen ein.");else g("Bitte w\xe4hlen Sie eine Datei aus.")},children:[l?(()=>{if(!l)return null;const e=l.type;return e.startsWith("image/")?(0,m.jsx)("div",{className:"w-full max-h-60 overflow-hidden bg-gray-100 border rounded mb-4",children:(0,m.jsx)("img",{src:URL.createObjectURL(l),alt:"Vorschau",className:"w-full h-auto object-contain max-h-60"})}):"application/pdf"===e?(0,m.jsx)("div",{className:"flex items-center justify-center h-32 bg-red-50 border rounded mb-4",children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("div",{className:"text-red-600 text-4xl mb-2",children:"PDF"}),(0,m.jsx)("div",{className:"text-sm text-gray-600",children:l.name})]})}):e.startsWith("video/")?(0,m.jsx)("div",{className:"w-full max-h-60 overflow-hidden bg-gray-100 border rounded mb-4",children:(0,m.jsx)("video",{src:URL.createObjectURL(l),controls:!0,className:"w-full h-auto max-h-60",children:"Ihr Browser unterst\xfctzt das Video-Tag nicht."})}):(0,m.jsx)("div",{className:"flex items-center justify-center h-32 bg-gray-50 border rounded mb-4",children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("div",{className:"text-gray-600 text-4xl mb-2",children:"Datei"}),(0,m.jsx)("div",{className:"text-sm text-gray-600",children:l.name})]})})})():(0,m.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center mb-4 cursor-pointer hover:border-blue-500 transition-colors",onClick:k,children:(0,m.jsxs)("div",{className:"text-gray-500",children:[(0,m.jsx)("div",{className:"text-4xl mb-2",children:"+"}),(0,m.jsx)("p",{children:"Klicken Sie, um eine Datei auszuw\xe4hlen"}),(0,m.jsx)("p",{className:"text-sm mt-1",children:"Unterst\xfctzte Dateitypen: JPG, PNG, GIF, WEBP, PDF, MP4, WEBM"})]})}),(0,m.jsx)("input",{type:"file",ref:a,onChange:e=>{const t=e.target.files;if(!t||0===t.length)return i(null),void o("");const r=t[0];i(r),o(r.name),w(r)?g(null):g("Dieser Dateityp wird nicht unterst\xfctzt. Erlaubt sind Bilder, PDFs und Videos.")},className:"hidden",accept:"image/jpeg,image/png,image/gif,image/webp,application/pdf,video/mp4,video/webm"}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{htmlFor:"fileName",className:"block text-gray-700 font-medium mb-2",children:"Dateiname *"}),(0,m.jsx)("input",{type:"text",id:"fileName",value:d,onChange:e=>{o(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Dateiname",required:!0})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("button",{type:"button",onClick:k,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400",children:l?"Andere Datei ausw\xe4hlen":"Datei ausw\xe4hlen"}),l&&(0,m.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["Dateigr\xf6\xdfe: ",(l.size/1024/1024).toFixed(2)," MB"]})]}),h&&p>0&&(0,m.jsx)("div",{className:"mb-6",children:(0,m.jsxs)("div",{className:"relative pt-1",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,m.jsx)("div",{children:(0,m.jsx)("span",{className:"text-xs font-semibold inline-block text-blue-600",children:"Upload-Fortschritt"})}),(0,m.jsx)("div",{className:"text-right",children:(0,m.jsxs)("span",{className:"text-xs font-semibold inline-block text-blue-600",children:[p,"%"]})})]}),(0,m.jsx)("div",{className:"overflow-hidden h-2 text-xs flex rounded bg-blue-200",children:(0,m.jsx)("div",{style:{width:`${p}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500"})})]})}),(0,m.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,m.jsx)("button",{type:"button",onClick:()=>t(`/cerebro/${e}`),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400",disabled:h,children:"Abbrechen"}),(0,m.jsx)("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:h||!l,children:h?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),"Hochladen..."]}):"Datei hochladen"})]})]})})]})},xe=()=>{const{slug:e}=(0,n.g)(),t=(0,n.Zp)(),{hasPermission:r}=(0,u.S)(),[a,l]=(0,s.useState)(""),[i,d]=(0,s.useState)(""),[c,h]=(0,s.useState)(!1),[x,b]=(0,s.useState)(!1),[g,p]=(0,s.useState)(null),[y,f]=(0,s.useState)(null),j=r("cerebro","both","button"),w=r("cerebro","both","page"),k=j||w;(0,s.useEffect)((()=>{if(!a||""===a.trim())return void f(null);const e=setTimeout((()=>{N(a)}),500);return()=>clearTimeout(e)}),[a]);const N=async e=>{try{if(b(!0),!v(e))return p("Bitte geben Sie eine g\xfcltige URL ein."),void b(!1);const t=await o.getLinkPreview(e);f(t),t.title&&!i&&d(t.title),p(null)}catch(t){console.error("Fehler beim Abrufen der Vorschau:",t),p("Fehler beim Abrufen der Vorschau. Bitte \xfcberpr\xfcfen Sie die URL."),f(null)}finally{b(!1)}},v=e=>{try{return new URL(e),!0}catch(t){return!1}};if(!k)return(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,m.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:"Sie haben keine Berechtigung, Links hinzuzuf\xfcgen."}),(0,m.jsx)("button",{className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded",onClick:()=>t(`/cerebro/${e}`),children:"Zur\xfcck zum Artikel"})]});return(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Externen Link hinzuf\xfcgen"}),g&&(0,m.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:g}),(0,m.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,m.jsxs)("form",{onSubmit:async r=>{if(r.preventDefault(),a.trim()&&v(a))if(e)try{h(!0),await o.createExternalLink({url:a.trim(),title:i.trim()||void 0,carticleSlug:e}),t(`/cerebro/${e}`)}catch(s){console.error("Fehler beim Speichern des Links:",s),p("Fehler beim Speichern des Links. Bitte versuchen Sie es sp\xe4ter erneut."),h(!1)}else p("Artikel-ID fehlt.");else p("Bitte geben Sie eine g\xfcltige URL ein.")},children:[(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{htmlFor:"url",className:"block text-gray-700 font-medium mb-2",children:"URL *"}),(0,m.jsx)("input",{type:"url",id:"url",value:a,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://",required:!0}),(0,m.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Geben Sie die vollst\xe4ndige URL ein, einschlie\xdflich 'https://'."})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("label",{htmlFor:"title",className:"block text-gray-700 font-medium mb-2",children:"Titel"}),(0,m.jsx)("input",{type:"text",id:"title",value:i,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Wird automatisch gef\xfcllt, wenn verf\xfcgbar"}),(0,m.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Optional. Wenn leer, wird der Titel automatisch aus der Seite extrahiert."})]}),x?(0,m.jsx)("div",{className:"mb-6 p-4 border rounded bg-gray-50",children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:[(0,m.jsx)("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-blue-500 mr-2"}),"Vorschau wird geladen..."]})}):y?(0,m.jsxs)("div",{className:"mb-6 p-4 border rounded bg-gray-50",children:[(0,m.jsx)("h3",{className:"font-semibold mb-2",children:"Link-Vorschau:"}),(0,m.jsxs)("div",{className:"flex items-start",children:[y.thumbnail&&(0,m.jsx)("img",{src:y.thumbnail,alt:y.title||"Vorschau",className:"w-16 h-16 object-cover mr-3"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"font-medium",children:y.title||a}),(0,m.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:(e=>{if(!e)return"Standard-Link";switch(e){case"google_drive":return"Google Drive Dokument";case"youtube":return"YouTube Video";default:return"Externer Link"}})(y.type)}),(0,m.jsx)("p",{className:"text-sm text-gray-500 mt-1 break-all",children:a})]})]})]}):null,(0,m.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,m.jsx)("button",{type:"button",onClick:()=>t(`/cerebro/${e}`),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400",disabled:c,children:"Abbrechen"}),(0,m.jsx)("button",{type:"submit",className:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:c,children:c?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),"Speichern..."]}):"Link hinzuf\xfcgen"})]})]})})]})},be=e=>{let{articleSlug:t,articleId:r,onLinkAdded:a,onLinkRemoved:l}=e;const[n,i]=(0,s.useState)([]),[d,c]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),[x,b]=(0,s.useState)({url:"",title:"",type:"github_markdown"});(0,s.useEffect)((()=>{if(!r)return;(async()=>{try{c(!0);const e=await o.getLinksByArticle(r);i(e.filter((e=>"github_markdown"===e.type||e.url.includes("github.com")||e.url.includes("raw.githubusercontent.com")))),h(null)}catch(e){console.error("Fehler beim Laden der GitHub-Links:",e),h("Die GitHub-Links konnten nicht geladen werden.")}finally{c(!1)}})()}),[r]);const g=e=>(e.includes("github.com")||e.includes("raw.githubusercontent.com"))&&e.trim().length>0;return(0,m.jsxs)("div",{className:"github-link-manager",children:[(0,m.jsx)("h3",{className:"text-lg font-medium mb-2 dark:text-white",children:"GitHub Markdown-Dateien"}),u&&(0,m.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:u}),(0,m.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),x.url.trim())try{c(!0);let e=x.title.trim();if(!e){const t=x.url.split("/");e=t[t.length-1]}const r={carticleSlug:t,url:x.url,title:`GitHub: ${e}`,type:"github_markdown"},s=await o.createExternalLink(r);i((e=>[...e,s])),b({url:"",title:"",type:"github_markdown"}),h(null),a&&a(s)}catch(r){console.error("Fehler beim Erstellen des GitHub-Links:",r),h("Der GitHub-Link konnte nicht erstellt werden.")}finally{c(!1)}else h("Bitte geben Sie eine g\xfcltige GitHub-URL ein")},className:"mb-4",children:(0,m.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"github-url",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"GitHub URL"}),(0,m.jsx)("input",{id:"github-url",type:"url",value:x.url,onChange:e=>b({...x,url:e.target.value}),placeholder:"https://github.com/username/repo/blob/main/file.md",className:`w-full px-3 py-2 border rounded-md ${!g(x.url)&&x.url.length>0?"border-red-300 dark:border-red-700 focus:ring-red-500 focus:border-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500"} dark:bg-gray-700 dark:text-white`,required:!0}),!g(x.url)&&x.url.length>0&&(0,m.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:"Bitte geben Sie eine g\xfcltige GitHub-URL ein."})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"github-title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Titel (optional)"}),(0,m.jsx)("input",{id:"github-title",type:"text",value:x.title,onChange:e=>b({...x,title:e.target.value}),placeholder:"z.B. Readme, Dokumentation, etc.",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,m.jsx)("button",{type:"submit",disabled:d||!g(x.url),className:"mt-2 px-4 py-2 rounded-md text-white "+(d||!g(x.url)?"bg-blue-400 dark:bg-blue-500/50 cursor-not-allowed":"bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-600"),children:d?"Wird hinzugef\xfcgt...":"GitHub-Link hinzuf\xfcgen"})]})}),(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsx)("h4",{className:"text-md font-medium text-gray-700 dark:text-gray-300",children:"Verkn\xfcpfte Markdown-Dateien"}),d&&0===n.length?(0,m.jsx)("div",{className:"text-gray-500 dark:text-gray-400 italic",children:"Lade GitHub-Links..."}):0===n.length?(0,m.jsx)("div",{className:"text-gray-500 dark:text-gray-400 italic",children:"Keine GitHub-Links vorhanden"}):n.map((e=>(0,m.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-md dark:bg-gray-800",children:[(0,m.jsx)("div",{className:"truncate flex-1",children:(0,m.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:e.title||e.url})}),(0,m.jsx)("button",{onClick:()=>(async e=>{try{c(!0),await o.deleteLink(e),i((t=>t.filter((t=>t.id!==e)))),l&&l(e)}catch(t){console.error("Fehler beim L\xf6schen des GitHub-Links:",t),h("Der GitHub-Link konnte nicht gel\xf6scht werden.")}finally{c(!1)}})(e.id),className:"ml-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300",title:"GitHub-Link entfernen",disabled:d,children:"Entfernen"})]},e.id)))]})]})},ge=()=>{const{slug:e}=(0,n.g)();return e?(0,m.jsx)("div",{className:"w-full p-4",children:(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,m.jsx)("h1",{className:"text-xl font-semibold mb-4 dark:text-white",children:"GitHub-Link hinzuf\xfcgen"}),(0,m.jsx)(be,{articleSlug:e,onLinkAdded:e=>{console.log("Link hinzugef\xfcgt:",e)},onLinkRemoved:e=>{console.log("Link entfernt:",e)}})]})}):(0,m.jsx)("div",{className:"w-full p-4",children:(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,m.jsx)("h1",{className:"text-xl font-semibold mb-4 dark:text-white",children:"Fehler"}),(0,m.jsx)("p",{className:"dark:text-gray-300",children:"Kein Artikel-Slug angegeben."})]})})};a(7542);const pe="freshprince84",ye="intranet",fe="main",je=()=>{const[e,t]=(0,s.useState)(window.innerWidth<768),[r,a]=(0,s.useState)(window.innerWidth>=768),[l,i]=(0,s.useState)(window.innerWidth>=768);return(0,s.useEffect)((()=>{const e=()=>{const e=window.innerWidth<768;t(e),a(window.innerWidth>=768),window.innerWidth>=768&&i(!0)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,s.useEffect)((()=>{const e=e=>{e.detail&&"boolean"===typeof e.detail.open&&i(e.detail.open)};return window.addEventListener("cerebro-sidebar-toggle",e),()=>window.removeEventListener("cerebro-sidebar-toggle",e)}),[]),(0,m.jsxs)("div",{className:"flex min-h-screen w-full "+(r?"fixed-height-container":""),children:[(0,m.jsx)("div",{className:`\n          ${l?"w-60":""}\n          ${e&&!l?"w-0":""} \n          transition-all duration-300 ease-in-out shrink-0\n        `,children:(0,m.jsx)(he,{mdFiles:[]})}),(0,m.jsx)("main",{className:`flex-grow ${e?"overflow-y-container":"overflow-y-auto"} ${e?"px-0 pt-2 pb-16":"pl-4 pt-3 pb-4 "+(r&&l?"pr-10 md:pr-16 lg:pr-20":"pr-4")}`,children:(0,m.jsx)("div",{className:e?"mobile-full-width":"",children:(0,m.jsx)(n.sv,{})})})]})},we=()=>{const{t:e}=(0,l.Bd)();return(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold mb-6 dark:text-white",children:e("cerebro.home.title")}),(0,m.jsx)(j,{owner:pe,repo:ye,path:"docs/core/README.md",branch:fe})]})},ke=()=>{const{t:e}=(0,l.Bd)(),{slug:t}=(0,n.g)(),[r,a]=(0,s.useState)(null),[i,c]=(0,s.useState)(!0),[o,u]=(0,s.useState)(null);return(0,s.useEffect)((()=>{if(!t)return;(async()=>{try{c(!0);const e=await d.getArticleBySlug(t),r=await d.getArticleBySlug("markdown-folder");if(r&&e.parentId===r.id&&e.githubPath)return a({path:e.githubPath,title:e.title}),void c(!1);c(!1)}catch(e){console.log("Artikel nicht in der Datenbank gefunden, versuche als Markdown-Datei zu laden");const r={readme:{path:"docs/core/README.md",title:"Readme - \xdcberblick"},"project-setup":{path:"docs/core/ENTWICKLUNGSUMGEBUNG.md",title:"Projekt-Einrichtung"},dokumentationsstandards:{path:"docs/core/DOKUMENTATIONSSTANDARDS.md",title:"Dokumentationsstandards"},"design-standards":{path:"docs/core/DESIGN_STANDARDS.md",title:"Design-Standards"},"coding-standards":{path:"docs/core/CODING_STANDARDS.md",title:"Coding-Standards"},"modul-zeiterfassung":{path:"docs/modules/MODUL_ZEITERFASSUNG.md",title:"Modul: Zeiterfassung"},"cerebro-wiki":{path:"docs/modules/MODUL_CEREBRO.md",title:"Cerebro Wiki-System"},"modul-teamkontrolle":{path:"docs/modules/MODUL_TEAMKONTROLLE.md",title:"Modul: Teamkontrolle"},"modul-abrechnung":{path:"docs/modules/MODUL_ABRECHNUNG.md",title:"Modul: Abrechnung"},"db-schema":{path:"docs/technical/DATENBANKSCHEMA.md",title:"Datenbankschema"},"api-integration":{path:"docs/technical/API_REFERENZ.md",title:"API-Referenz"},"role-switch":{path:"docs/modules/ROLE_SWITCH.md",title:"Rollenwechsel-Funktionalit\xe4t"},changelog:{path:"docs/core/CHANGELOG.md",title:"\xc4nderungshistorie"}};r[t]?a(r[t]):a({path:`${t}.md`,title:t.charAt(0).toUpperCase()+t.slice(1).replace(/-/g," ")}),c(!1)}})()}),[t]),i?(0,m.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow flex justify-center",children:(0,m.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):r?(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold mb-6 dark:text-white",children:r.title}),(0,m.jsx)(j,{owner:pe,repo:ye,path:r.path,branch:fe})]}):(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,m.jsx)("h1",{className:"text-xl font-semibold mb-4 dark:text-white",children:e("cerebro.fileView.fileNotFound")}),(0,m.jsx)("p",{className:"dark:text-gray-300",children:e("cerebro.fileView.fileNotFoundDescription")})]})},Ne=()=>{const{t:e}=(0,l.Bd)();return(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,m.jsx)("h2",{className:"text-xl font-semibold mb-4 dark:text-white",children:e("cerebro.allArticles.title")}),(0,m.jsx)(x,{})]})},ve=()=>{const{t:e}=(0,l.Bd)(),t=(0,n.zy)(),r=new URLSearchParams(t.search).get("q")||"";return(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,m.jsx)("div",{className:"flex items-center mb-6",children:(0,m.jsxs)("h2",{className:"text-xl font-semibold dark:text-white",children:[e("cerebro.search.title"),' "',r,'"']})}),(0,m.jsx)(x,{searchQuery:r})]})},Ae=()=>{const{slug:e}=(0,n.g)(),[t,r]=(0,s.useState)(!1),[a,l]=(0,s.useState)(!0),[i,c]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{(async()=>{if(e)try{l(!0);const a=await d.getArticleBySlug(e);c(!0);try{const e=await d.getArticleBySlug("markdown-folder");e&&a.parentId===e.id||a.githubPath?r(!0):r(!1)}catch(t){console.warn("Markdown-Ordner nicht gefunden:",t),a.githubPath?r(!0):r(!1)}l(!1)}catch(t){console.log("Artikel nicht in der Datenbank gefunden, versuche als Markdown-Datei:",t),c(!1),r(!0),l(!1)}})()}),[e]),a?(0,m.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow flex justify-center",children:(0,m.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):i&&!t?(0,m.jsx)(Y,{}):(0,m.jsx)(ke,{})},Se=()=>(0,m.jsx)(n.BV,{children:(0,m.jsxs)(n.qh,{path:"/",element:(0,m.jsx)(je,{}),children:[(0,m.jsx)(n.qh,{index:!0,element:(0,m.jsx)(we,{})}),(0,m.jsx)(n.qh,{path:"all",element:(0,m.jsx)(Ne,{})}),(0,m.jsx)(n.qh,{path:"search",element:(0,m.jsx)(ve,{})}),(0,m.jsx)(n.qh,{path:"create",element:(0,m.jsx)(le,{})}),(0,m.jsx)(n.qh,{path:":slug",element:(0,m.jsx)(Ae,{})}),(0,m.jsx)(n.qh,{path:":slug/edit",element:(0,m.jsx)(le,{})}),(0,m.jsx)(n.qh,{path:":slug/media/add",element:(0,m.jsx)(me,{})}),(0,m.jsx)(n.qh,{path:":slug/link/add",element:(0,m.jsx)(xe,{})}),(0,m.jsx)(n.qh,{path:":slug/github/add",element:(0,m.jsx)(ge,{})})]})})}}]);
//# sourceMappingURL=967.8adca31a.chunk.js.map