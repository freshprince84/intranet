"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[844],{844:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var r=a(5043),s=a(2903),n=a(4117),l=a(2672),i=a(2760),o=a(5648),c=a(7855),d=a(1801),m=a(1923),g=a(7488),h=a(8421),u=a(45);const x=["title","titleId"];function b(e,t){let{title:a,titleId:s}=e,n=(0,u.A)(e,x);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const p=r.forwardRef(b);var y=a(6009);const f=["title","titleId"];function v(e,t){let{title:a,titleId:s}=e,n=(0,u.A)(e,f);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"}))}const k=r.forwardRef(v),w=["title","titleId"];function j(e,t){let{title:a,titleId:s}=e,n=(0,u.A)(e,w);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const N=r.forwardRef(j);var R=a(1816);const A=["title","titleId"];function S(e,t){let{title:a,titleId:s}=e,n=(0,u.A)(e,A);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const E=r.forwardRef(S);var D=a(9422),C=a(9379),L=a(1292),U=a(7353),T=a(4493),M=a(5620),I=a(579);const q={taskCreate:!0,taskUpdate:!0,taskDelete:!0,taskStatusChange:!0,requestCreate:!0,requestUpdate:!0,requestDelete:!0,requestStatusChange:!0,userCreate:!0,userUpdate:!0,userDelete:!0,roleCreate:!0,roleUpdate:!0,roleDelete:!0,worktimeStart:!0,worktimeStop:!0},B={task:["taskCreate","taskUpdate","taskDelete","taskStatusChange"],request:["requestCreate","requestUpdate","requestDelete","requestStatusChange"],user:["userCreate","userUpdate","userDelete"],role:["roleCreate","roleUpdate","roleDelete"],worktime:["worktimeStart","worktimeStop"]},P=()=>{const{t:e}=(0,n.Bd)(),[t,a]=(0,r.useState)(q),[s,l]=(0,r.useState)(!0),[i,o]=(0,r.useState)(!1),{showMessage:d}=(0,c.A)();(0,r.useEffect)((()=>{m()}),[]);const m=async()=>{try{l(!0),console.log("Starte Abruf der Benachrichtigungseinstellungen...");const e=await M.f.getUserSettings();if(console.log("Erhaltene Einstellungen:",e.data),null!==e&&void 0!==e&&e.data){const t=(0,C.A)((0,C.A)({},q),e.data);a(t),console.log("Einstellungen aktualisiert:",t)}else console.warn("Keine Daten vom Server erhalten, verwende Standardeinstellungen"),a(q)}catch(t){console.error("Fehler beim Laden der Benachrichtigungseinstellungen:",t),a(q),d(e("notifications.loadSettingsError"),"error")}finally{l(!1)}},g=async r=>{const{name:s,checked:n}=r.target,l=(0,C.A)((0,C.A)({},t),{},{[s]:n});a(l);try{o(!0),await M.f.updateUserSettings(l),d(e("notifications.saveSuccess"),"success")}catch(i){console.error("Fehler beim Speichern der Einstellungen:",i),d(e("notifications.saveError"),"error"),a(t)}finally{o(!1)}},h=e=>{const a=e.toLowerCase();return!!B[a]&&B[a].every((e=>!0===t[e]))},u=e=>{let{checked:t,onChange:a,name:r,label:s,description:n}=e;return(0,I.jsxs)("div",{className:"flex items-center justify-between gap-8 group relative",children:[(0,I.jsx)("div",{className:"flex-1",children:(0,I.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:s})}),(0,I.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer flex-shrink-0",children:[(0,I.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:t,onChange:a,name:r}),(0,I.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]}),n&&(0,I.jsx)("div",{className:"absolute left-0 bottom-[calc(100%+0.5rem)] px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-normal max-w-xs pointer-events-none z-50",children:n})]})},x=(r,s)=>(0,I.jsxs)("div",{className:"mb-6 mt-2",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,I.jsx)("div",{children:(0,I.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:r})}),(0,I.jsx)(u,{checked:h(r),onChange:s=>(async(r,s)=>{const n=r.toLowerCase();if(!B[n])return;const l=(0,C.A)({},t);B[n].forEach((e=>{l[e]=s})),a(l);try{o(!0),await M.f.updateUserSettings(l),d(e("notifications.saveSuccess"),"success")}catch(i){console.error("Fehler beim Speichern der Einstellungen:",i),d(e("notifications.saveError"),"error"),a(t)}finally{o(!1)}})(r,s.target.checked),name:"".concat(r.toLowerCase(),"All"),label:e("notifications.all")})]}),(0,I.jsx)("div",{className:"space-y-4",children:s.map((e=>{let{name:a,label:r,description:s}=e;return(0,I.jsx)(u,{checked:t[a],onChange:g,name:a,label:r,description:s},a)}))})]});return s?(0,I.jsx)(L.A,{children:e("notifications.loading")}):(0,I.jsxs)(U.A,{className:"p-4",children:[(0,I.jsx)(L.A,{variant:"body2",className:"text-gray-600 dark:text-gray-400 mb-6",children:e("notifications.description")}),(0,I.jsx)("div",{className:"mb-8 mt-2",children:(0,I.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,I.jsxs)("div",{className:"group relative",children:[(0,I.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:e("notifications.allNotifications")}),(0,I.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("notifications.allNotificationsDescription")}),(0,I.jsx)("div",{className:"absolute left-0 bottom-[calc(100%+0.5rem)] px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-normal max-w-xs pointer-events-none z-50",children:e("notifications.allNotificationsDescription")})]}),(0,I.jsx)(u,{checked:!!t&&Object.values(t).every((e=>!0===e)),onChange:r=>(async r=>{const s=Object.keys(t).reduce(((e,t)=>(e[t]=r,e)),(0,C.A)({},q));a(s);try{o(!0),await M.f.updateUserSettings(s),d(e("notifications.saveSuccess"),"success")}catch(n){console.error("Fehler beim Speichern der Einstellungen:",n),d(e("notifications.saveError"),"error"),a(t)}finally{o(!1)}})(r.target.checked),name:"allNotifications",label:""})]})}),(0,I.jsx)(T.A,{className:"my-8"}),x(e("notifications.categories.tasks"),[{name:"taskCreate",label:e("notifications.events.taskCreate"),description:e("notifications.events.taskCreateDescription")},{name:"taskUpdate",label:e("notifications.events.taskUpdate"),description:e("notifications.events.taskUpdateDescription")},{name:"taskDelete",label:e("notifications.events.taskDelete"),description:e("notifications.events.taskDeleteDescription")},{name:"taskStatusChange",label:e("notifications.events.taskStatusChange"),description:e("notifications.events.taskStatusChangeDescription")}]),(0,I.jsx)(T.A,{className:"my-8"}),x(e("notifications.categories.requests"),[{name:"requestCreate",label:e("notifications.events.requestCreate"),description:e("notifications.events.requestCreateDescription")},{name:"requestUpdate",label:e("notifications.events.requestUpdate"),description:e("notifications.events.requestUpdateDescription")},{name:"requestDelete",label:e("notifications.events.requestDelete"),description:e("notifications.events.requestDeleteDescription")},{name:"requestStatusChange",label:e("notifications.events.requestStatusChange"),description:e("notifications.events.requestStatusChangeDescription")}]),(0,I.jsx)(T.A,{className:"my-8"}),x(e("notifications.categories.usersAndRoles"),[{name:"userCreate",label:e("notifications.events.userCreate"),description:e("notifications.events.userCreateDescription")},{name:"userUpdate",label:e("notifications.events.userUpdate"),description:e("notifications.events.userUpdateDescription")},{name:"userDelete",label:e("notifications.events.userDelete"),description:e("notifications.events.userDeleteDescription")},{name:"roleCreate",label:e("notifications.events.roleCreate"),description:e("notifications.events.roleCreateDescription")},{name:"roleUpdate",label:e("notifications.events.roleUpdate"),description:e("notifications.events.roleUpdateDescription")},{name:"roleDelete",label:e("notifications.events.roleDelete"),description:e("notifications.events.roleDeleteDescription")}]),(0,I.jsx)(T.A,{className:"my-8"}),x(e("notifications.categories.worktime"),[{name:"worktimeStart",label:e("notifications.events.worktimeStart"),description:e("notifications.events.worktimeStartDescription")},{name:"worktimeStop",label:e("notifications.events.worktimeStop"),description:e("notifications.events.worktimeStopDescription")}])]})};var O=a(6443),F=a(7591);const z=e=>{let{isOpen:t,onClose:a,onSave:s,currentSettings:l}=e;const{t:i}=(0,n.Bd)(),[o,c]=(0,r.useState)({monthlyReportEnabled:!0,monthlyReportDay:l.monthlyReportDay||25,monthlyReportRecipient:l.monthlyReportRecipient||""}),[d,m]=(0,r.useState)(!1),[h,u]=(0,r.useState)({}),x=()=>{c({monthlyReportEnabled:!0,monthlyReportDay:l.monthlyReportDay||25,monthlyReportRecipient:l.monthlyReportRecipient||""}),u({}),a()},b=(e,t)=>{c((a=>(0,C.A)((0,C.A)({},a),{},{[e]:t}))),h[e]&&u((t=>(0,C.A)((0,C.A)({},t),{},{[e]:""})))};return(0,I.jsxs)(O.lG,{open:t,onClose:x,className:"relative z-50",children:[(0,I.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,I.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,I.jsx)(O.lG.Panel,{className:"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:(0,I.jsxs)("div",{className:"p-6",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,I.jsx)(O.lG.Title,{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Automatische Monatsabrechnung einrichten"}),(0,I.jsx)("button",{onClick:x,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,I.jsx)(F.A,{className:"h-6 w-6"})})]}),(0,I.jsx)("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:(0,I.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Konfigurieren Sie die automatische Generierung von monatlichen Beratungsabrechnungen. Diese werden automatisch am gew\xe4hlten Tag des Monats erstellt und an den angegebenen Empf\xe4nger adressiert."})}),(0,I.jsxs)("div",{className:"space-y-4",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{htmlFor:"monthlyReportDay",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Abrechnungstag im Monat"}),(0,I.jsx)("select",{id:"monthlyReportDay",className:"mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ".concat(h.monthlyReportDay?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"),value:o.monthlyReportDay,onChange:e=>b("monthlyReportDay",parseInt(e.target.value)),children:Array.from({length:28},((e,t)=>t+1)).map((e=>(0,I.jsxs)("option",{value:e,children:[e,"."]},e)))}),h.monthlyReportDay&&(0,I.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.monthlyReportDay}),(0,I.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Tag im Monat, an dem die Abrechnung automatisch erstellt wird (1-28)"})]}),(0,I.jsxs)("div",{children:[(0,I.jsxs)("label",{htmlFor:"monthlyReportRecipient",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[i("monthlyReport.recipient")," *"]}),(0,I.jsx)("textarea",{id:"monthlyReportRecipient",rows:3,className:"mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ".concat(h.monthlyReportRecipient?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"),value:o.monthlyReportRecipient,onChange:e=>b("monthlyReportRecipient",e.target.value),placeholder:i("monthlyReport.recipientPlaceholder")}),h.monthlyReportRecipient&&(0,I.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.monthlyReportRecipient}),(0,I.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Vollst\xe4ndige Adresse des Empf\xe4ngers (Arbeitgeber) f\xfcr die monatliche Abrechnung"})]})]}),o.monthlyReportRecipient.trim()&&(0,I.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,I.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Vorschau:"}),(0,I.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,I.jsxs)("p",{children:["\ud83d\udcc5 ",(0,I.jsx)("strong",{children:"Abrechnungszeitraum:"})," ",o.monthlyReportDay,". des Vormonats bis ",o.monthlyReportDay-1,". des aktuellen Monats"]}),(0,I.jsxs)("p",{className:"mt-1",children:["\ud83d\udce7 ",(0,I.jsx)("strong",{children:"Empf\xe4nger:"})]}),(0,I.jsx)("div",{className:"ml-4 mt-1 font-mono text-xs bg-white dark:bg-gray-800 p-2 rounded border",children:o.monthlyReportRecipient.split("\n").map(((e,t)=>(0,I.jsx)("div",{children:e},t)))})]})]}),(0,I.jsxs)("div",{className:"mt-6 flex items-center justify-end space-x-3",children:[(0,I.jsx)("button",{type:"button",onClick:x,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:i("common.cancel"),children:(0,I.jsx)(F.A,{className:"h-5 w-5"})}),(0,I.jsx)("button",{onClick:async()=>{if((()=>{const e={};return o.monthlyReportRecipient.trim()||(e.monthlyReportRecipient=i("monthlyReport.recipientRequired")),(o.monthlyReportDay<1||o.monthlyReportDay>28)&&(e.monthlyReportDay="Abrechnungstag muss zwischen 1 und 28 liegen"),u(e),0===Object.keys(e).length})())try{m(!0),await s(o),g.oR.success(i("monthlyReport.saveSuccess")),a()}catch(e){g.oR.error(i("monthlyReport.saveError"))}finally{m(!1)}},disabled:d||!o.monthlyReportRecipient.trim(),className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",title:d?"Speichere...":"Aktivieren",children:d?(0,I.jsx)(R.A,{className:"h-5 w-5 animate-spin"}):(0,I.jsx)(D.A,{className:"h-5 w-5"})})]})]})})})]})};var V=a(9399),W=a(9248),H=a(4538),Z=a(2704),G=a(7012);const _=["title","titleId"];function K(e,t){let{title:a,titleId:s}=e,n=(0,u.A)(e,_);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const $=r.forwardRef(K),J=()=>{var e;const{t:t}=(0,n.Bd)(),{user:a}=(0,l.As)(),[s,i]=(0,r.useState)([]),[o,c]=(0,r.useState)([]),[h,u]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),[p,y]=(0,r.useState)(null),[f,v]=(0,r.useState)(""),[k,w]=(0,r.useState)(!1),[j,N]=(0,r.useState)(0),[A,S]=(0,r.useState)(""),[E,D]=(0,r.useState)(!1),[C,L]=(0,r.useState)(0);(0,r.useEffect)((()=>{U(),T()}),[]),(0,r.useEffect)((()=>{if(j>0){const e=setTimeout((()=>N(j-1)),1e3);return()=>clearTimeout(e)}}),[j]),(0,r.useEffect)((()=>{if(C>0){const e=setTimeout((()=>L(C-1)),1e3);return()=>clearTimeout(e)}}),[C]);const U=async()=>{try{const e=await m.A.get(d.Sn.DATABASE.TABLES);i(e.data)}catch(e){console.error("Fehler beim Laden der Tabellen:",e),g.oR.error(t("database.loadTablesError"))}},T=async()=>{try{b(!0);const e=await m.A.get(d.Sn.DATABASE.LOGS);c(e.data)}catch(e){console.error(t("database.loadLogsError"),e)}finally{b(!1)}},M=()=>{D(!0),L(5)},q=e=>{switch(e){case"low":return"text-yellow-600 bg-yellow-50 border-yellow-200 dark:text-yellow-400 dark:bg-yellow-900/20 dark:border-yellow-700";case"medium":return"text-orange-600 bg-orange-50 border-orange-200 dark:text-orange-400 dark:bg-orange-900/20 dark:border-orange-700";case"high":return"text-red-600 bg-red-50 border-red-200 dark:text-red-400 dark:bg-red-900/20 dark:border-red-700";default:return"text-gray-600 bg-gray-50 border-gray-200 dark:text-gray-400 dark:bg-gray-700 dark:border-gray-600"}},B=e=>{switch(e){case"success":return"text-green-600 dark:text-green-400";case"error":return"text-red-600 dark:text-red-400";case"start":return"text-blue-600 dark:text-blue-400";default:return"text-gray-600 dark:text-gray-400"}};return a&&a.roles.some((e=>"Admin"===e.role.name))?(0,I.jsxs)("div",{className:"space-y-8",children:[(0,I.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6",children:(0,I.jsxs)("div",{className:"flex items-start",children:[(0,I.jsx)(V.A,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400 mr-3 mt-1"}),(0,I.jsxs)("div",{children:[(0,I.jsx)("h3",{className:"text-lg font-medium text-yellow-800 dark:text-yellow-200 mb-2",children:t("database.warningTitle")}),(0,I.jsxs)("ul",{className:"text-yellow-700 dark:text-yellow-300 text-sm space-y-1",children:[(0,I.jsxs)("li",{children:["\u2022 ",t("database.warning1")]}),(0,I.jsxs)("li",{children:["\u2022 ",t("database.warning2")]}),(0,I.jsxs)("li",{children:["\u2022 ",t("database.warning3")]}),(0,I.jsxs)("li",{children:["\u2022 ",t("database.warning4")]})]})]})]})}),(0,I.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:[(0,I.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,I.jsx)(W.A,{className:"h-5 w-5 mr-2"}),t("database.resetTablesTitle")]}),(0,I.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map((e=>(0,I.jsxs)("div",{className:"border rounded-lg p-4 ".concat(q(e.danger)),children:[(0,I.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,I.jsx)("h4",{className:"font-medium",children:e.displayName}),(0,I.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("high"===e.danger?"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300":"medium"===e.danger?"bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"),children:"high"===e.danger?t("database.danger.high"):"medium"===e.danger?t("database.danger.medium"):t("database.danger.low")})]}),(0,I.jsx)("p",{className:"text-sm mb-3",children:e.description}),(0,I.jsxs)("div",{className:"flex items-center text-sm mb-3",children:[(0,I.jsx)(H.A,{className:"h-4 w-4 mr-1"}),t("database.seedDataRestored")]}),(0,I.jsxs)("div",{className:"space-y-2",children:["client"===e.name&&(0,I.jsx)("button",{onClick:M,disabled:h,className:"w-full p-2 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50 transition-colors flex items-center justify-center",title:t("database.deleteDemoClients"),children:(0,I.jsx)(W.A,{className:"h-5 w-5"})}),(0,I.jsx)("button",{onClick:()=>{return t=e.name,y(t),w(!0),void N(5);var t},disabled:h,className:"w-full p-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 transition-colors flex items-center justify-center",title:t("database.resetAndRefill"),children:(0,I.jsx)(R.A,{className:"h-5 w-5"})})]})]},e.name)))})]}),(0,I.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,I.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center",children:[(0,I.jsx)(Z.A,{className:"h-5 w-5 mr-2"}),t("database.operationsTitle")]}),(0,I.jsx)("button",{onClick:T,disabled:x,className:"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 transition-colors",title:t("common.refresh"),children:(0,I.jsx)(R.A,{className:"h-5 w-5"})})]}),x?(0,I.jsx)("div",{className:"text-center py-4",children:t("database.loadingLogs")}):0===o.length?(0,I.jsx)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:t("database.noLogsAvailable")}):(0,I.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:o.map(((e,a)=>(0,I.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded text-sm",children:[(0,I.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,I.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:new Date(e.timestamp).toLocaleString()}),(0,I.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.operation}),(0,I.jsxs)("span",{className:"font-medium ".concat(B(e.status)),children:["success"===e.status?"\u2713":"error"===e.status?"\u2717":"\u2022"," ",t("database.logStatus.".concat(e.status))]})]}),e.error&&(0,I.jsx)("span",{className:"text-red-600 dark:text-red-400 text-xs max-w-xs truncate",children:e.error})]},a)))})]}),k&&(0,I.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,I.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,I.jsxs)("div",{className:"flex items-center mb-4",children:[(0,I.jsx)(V.A,{className:"h-6 w-6 text-orange-600 mr-2"}),(0,I.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:t("database.confirmResetTitle")})]}),(0,I.jsxs)("div",{className:"mb-4",children:[(0,I.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:t("database.confirmResetMessage",{tableName:null===(e=s.find((e=>e.name===p)))||void 0===e?void 0:e.displayName})}),(0,I.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:t("database.confirmResetWarning")}),j>0&&(0,I.jsxs)("div",{className:"flex items-center text-orange-600 dark:text-orange-400 mb-3",children:[(0,I.jsx)(G.A,{className:"h-4 w-4 mr-1"}),t("database.reflectionTime",{seconds:j})]})]}),(0,I.jsxs)("div",{className:"mb-4",children:[(0,I.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,I.jsx)($,{className:"h-4 w-4 inline mr-1"}),t("database.adminPasswordLabel")]}),(0,I.jsx)("input",{type:"password",value:f,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:t("database.adminPasswordPlaceholder")})]}),(0,I.jsxs)("div",{className:"flex space-x-3",children:[(0,I.jsx)("button",{onClick:async()=>{if(p&&f)if(j>0)g.oR.error(t("database.waitSeconds",{seconds:j}));else try{u(!0),await m.A.post(d.Sn.DATABASE.RESET_TABLE,{tableName:p,adminPassword:f}),g.oR.success(t("database.resetTableSuccess",{tableName:p})),w(!1),y(null),v(""),T()}catch(r){var e,a;g.oR.error((null===(e=r.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||t("database.resetTableError"))}finally{u(!1)}else g.oR.error(t("database.passwordRequired"))},disabled:h||j>0||!f,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50 transition-colors",children:t(h?"database.resetting":"common.confirm")}),(0,I.jsx)("button",{onClick:()=>{w(!1),y(null),v(""),N(0)},disabled:h,className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:t("common.cancel")})]})]})}),E&&(0,I.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,I.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,I.jsxs)("div",{className:"flex items-center mb-4",children:[(0,I.jsx)(V.A,{className:"h-6 w-6 text-orange-600 mr-2"}),(0,I.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:t("database.confirmDeleteDemoClientsTitle")})]}),(0,I.jsxs)("div",{className:"mb-4",children:[(0,I.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:t("database.confirmDeleteDemoClientsMessage")}),(0,I.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:t("database.confirmDeleteDemoClientsWarning")}),C>0&&(0,I.jsxs)("div",{className:"flex items-center text-orange-600 dark:text-orange-400 mb-3",children:[(0,I.jsx)(G.A,{className:"h-4 w-4 mr-1"}),t("database.reflectionTime",{seconds:C})]})]}),(0,I.jsxs)("div",{className:"mb-4",children:[(0,I.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,I.jsx)($,{className:"h-4 w-4 inline mr-1"}),t("database.adminPasswordLabel")]}),(0,I.jsx)("input",{type:"password",value:A,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:t("database.adminPasswordPlaceholder")})]}),(0,I.jsxs)("div",{className:"flex space-x-3",children:[(0,I.jsx)("button",{onClick:async()=>{if(A)if(C>0)g.oR.error(t("database.waitSeconds",{seconds:C}));else try{u(!0);await m.A.post(d.Sn.DATABASE.DELETE_DEMO_CLIENTS,{adminPassword:A});g.oR.success(t("database.deleteDemoClientsSuccess")),D(!1),S(""),T()}catch(r){var e,a;g.oR.error((null===(e=r.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||t("database.deleteDemoClientsError"))}finally{u(!1)}else g.oR.error(t("database.passwordRequired"))},disabled:h||C>0||!A,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50 transition-colors",children:t(h?"database.deleting":"common.confirm")}),(0,I.jsx)("button",{onClick:()=>{D(!1),S(""),L(0)},disabled:h,className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:t("common.cancel")})]})]})})]}):(0,I.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[(0,I.jsx)(V.A,{className:"h-12 w-12 text-red-600 dark:text-red-400 mx-auto mb-4"}),(0,I.jsx)("p",{className:"text-red-800 dark:text-red-200 font-medium",children:t("database.noPermission")}),(0,I.jsx)("p",{className:"text-red-600 dark:text-red-400 text-sm mt-2",children:t("database.adminOnly")})]})};var Q=a(8625),X=a(3216);const Y=()=>{const{user:e}=(0,l.As)(),{isAdmin:t}=(0,i.S)(),{isDarkMode:a,toggleDarkMode:u}=(0,h.D)(),{showMessage:x}=(0,c.A)(),{t:b}=(0,n.Bd)(),{activeLanguage:f,organizationLanguage:v,setUserLanguage:w,isLoading:j}=(0,o.o)(),{resetTour:A,startTour:S}=(0,Q.z)(),C=(0,X.Zp)(),[L,U]=(0,r.useState)(""),[T,M]=(0,r.useState)(!1),[q,B]=(0,r.useState)(null),[O,F]=(0,r.useState)(null),[V,W]=(0,r.useState)(!1),[H,Z]=(0,r.useState)(null),G=(0,r.useRef)(null),[_,K]=(0,r.useState)(!1),[$,Y]=(0,r.useState)("personal"),[ee,te]=(0,r.useState)({monthlyReportEnabled:!1,monthlyReportDay:25,monthlyReportRecipient:""}),[ae,re]=(0,r.useState)(!0),[se,ne]=(0,r.useState)(!1);(0,r.useEffect)((()=>{console.log("User:",e),console.log("Is Admin:",t()),console.log("User Roles:",null===e||void 0===e?void 0:e.roles)}),[e,t]),(0,r.useEffect)((()=>{(async()=>{if(null!==e&&void 0!==e&&e.invoiceSettings)try{te({monthlyReportEnabled:e.invoiceSettings.monthlyReportEnabled||!1,monthlyReportDay:e.invoiceSettings.monthlyReportDay||25,monthlyReportRecipient:e.invoiceSettings.monthlyReportRecipient||""})}catch(H){console.error("Fehler beim Laden der Monatsabrechnungs-Einstellungen:",H),x(b("errors.loadSettingsError"),"error")}finally{re(!1)}else re(!1)})()}),[e,x]);const le=async e=>{try{await m.A.put(d.Sn.USERS.INVOICE_SETTINGS,{monthlyReportEnabled:e.monthlyReportEnabled,monthlyReportDay:e.monthlyReportDay,monthlyReportRecipient:e.monthlyReportRecipient}),te(e),e.monthlyReportEnabled||g.oR.success(b("settings.monthlyReportDisabled"))}catch(H){throw console.error("Fehler beim Speichern der Monatsabrechnungs-Einstellungen:",H),g.oR.error(b("errors.saveMonthlyReportSettingsError")),H}},ie=async e=>{W(!0),Z(null);const t=new FormData;t.append("logo",e);try{console.log("Starting upload..."),console.log("Selected file:",e);const r=localStorage.getItem("token");console.log("Token verf\xfcgbar:",!!r);const s={};r&&(s.Authorization="Bearer ".concat(r));const n=await fetch("".concat(d.H$,"/settings/logo"),{method:"POST",body:t,headers:s});console.log("Response Status:",n.status);const l=await n.text();if(console.log("Response Text:",l),!n.ok)throw new Error(l||b("errors.uploadFailed"));try{const e=JSON.parse(l);console.log("Response Data:",e),x(b("settings.logoUploadSuccess"),"success");const t=document.getElementById("favicon");if(t){(new Date).getTime();try{const e=await fetch("".concat(d.H$,"/settings/logo/base64"));if(e.ok){const a=await e.json();t.href=a.logo}}catch(H){console.error("Favicon konnte nicht aktualisiert werden:",H)}}}catch(a){throw console.error("Fehler beim Parsen der Antwort:",a),new Error(b("errors.invalidResponseFormat"))}B(null),F(null)}catch(r){console.error("Upload error:",r);const e=b("settings.logoUploadError")+": "+(r instanceof Error?r.message:b("errors.unknownError"));Z(e),x(e,"error")}finally{W(!1)}},oe=e=>{Y(e),Z(null)};return e?(0,I.jsx)("div",{className:"min-h-screen dark:bg-gray-900",children:(0,I.jsxs)("div",{className:"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6",children:[(0,I.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,I.jsxs)("div",{className:"flex items-center mb-6",children:[(0,I.jsx)(p,{className:"h-6 w-6 mr-2"}),(0,I.jsx)("h2",{className:"text-xl font-semibold",children:b("settings.title")})]}),(0,I.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-6",children:(0,I.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,I.jsxs)("button",{className:"".concat("personal"===$?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),onClick:()=>oe("personal"),children:[(0,I.jsx)(y.A,{className:"h-4 w-4 mr-2"}),b("settings.personal")]}),(0,I.jsxs)("button",{className:"".concat("notifications"===$?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),onClick:()=>oe("notifications"),children:[(0,I.jsx)(s.A,{className:"h-4 w-4 mr-2"}),b("settings.notifications")]}),(0,I.jsxs)("button",{className:"".concat("system"===$?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),onClick:()=>oe("system"),children:[(0,I.jsx)(k,{className:"h-4 w-4 mr-2"}),b("settings.system")]})]})}),"personal"===$&&(0,I.jsxs)("div",{className:"space-y-6","data-onboarding":"settings-overview",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between border-b pb-6",children:[(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:b("settings.language")}),(0,I.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:[b("settings.userLanguage"),v&&(0,I.jsxs)("span",{className:"block mt-1 text-xs",children:[b("settings.organizationLanguage"),": ",b("de"===v?"worktime.language.german":"es"===v?"worktime.language.spanish":"worktime.language.english")]})]})]}),(0,I.jsxs)("select",{value:L||f||(null===e||void 0===e?void 0:e.language)||"",onChange:async e=>{const t=e.target.value;if(U(t),t&&t!==f){M(!0);try{await w(t),x(b("common.save"),"success")}catch(H){console.error("Fehler beim Speichern der Sprache:",H),x(b("errors.saveLanguageError"),"error")}finally{M(!1)}}},disabled:T||j,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white ml-4",children:[(0,I.jsx)("option",{value:"",children:b("settings.useOrganizationLanguage")}),(0,I.jsx)("option",{value:"de",children:b("worktime.language.german")}),(0,I.jsx)("option",{value:"es",children:b("worktime.language.spanish")}),(0,I.jsx)("option",{value:"en",children:b("worktime.language.english")})]})]}),(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:b("settings.darkMode")}),(0,I.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:b("settings.darkModeDescription")})]}),(0,I.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,I.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:a,onChange:u}),(0,I.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),(0,I.jsx)("div",{className:"border-t pt-6",children:ae?(0,I.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:b("settings.loadingSettings")}):(0,I.jsx)("div",{className:"space-y-4",children:(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:b("settings.monthlyReport")}),(0,I.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[b("settings.monthlyReportDescription"),ee.monthlyReportEnabled&&ee.monthlyReportRecipient&&(0,I.jsxs)("span",{className:"block text-sm text-green-600 dark:text-green-400 mt-1",children:["\u2713 ",b("settings.monthlyReportEnabled")," ",ee.monthlyReportRecipient.split("\n")[0]]})]})]}),(0,I.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,I.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:ee.monthlyReportEnabled,onChange:e=>{e.target.checked?ne(!0):le({monthlyReportEnabled:!1,monthlyReportDay:ee.monthlyReportDay,monthlyReportRecipient:ee.monthlyReportRecipient})}}),(0,I.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})})}),(0,I.jsx)("div",{className:"border-t pt-6",children:(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{className:"flex-1",children:[(0,I.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,I.jsx)(N,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),(0,I.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:b("settings.onboarding.restart")})]}),(0,I.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:b("settings.onboarding.restartDescription")})]}),(0,I.jsx)("button",{onClick:async()=>{try{await A(),x(b("settings.onboarding.restart"),"success"),C("/dashboard"),setTimeout((()=>{S()}),500)}catch(H){console.error("Fehler beim Zur\xfccksetzen der Tour:",H),x(b("errors.unknownError"),"error")}},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors dark:bg-blue-700 dark:hover:bg-blue-800",children:b("onboarding.navigation.restart")})]})})]}),"notifications"===$&&(0,I.jsx)("div",{className:"space-y-4",children:(0,I.jsx)("div",{className:"p-0 -mt-4",children:(0,I.jsx)(P,{})})}),"system"===$&&(0,I.jsxs)("div",{className:"space-y-8",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("h3",{className:"text-lg font-medium mb-2 dark:text-white",children:b("settings.logoUpload")}),(0,I.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:b("settings.logoUploadDescription")})]}),(0,I.jsxs)("div",{className:"flex items-center gap-2",children:[(0,I.jsx)("input",{ref:G,type:"file",accept:"image/png,image/jpeg",onChange:e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){if("image/png"!==a.type&&"image/jpeg"!==a.type)return Z(b("settings.fileUploadError")),void x(b("settings.fileUploadError"),"error");if(a.size>5242880)return Z(b("settings.fileSizeError")),void x(b("settings.fileSizeError"),"error");B(a),F(URL.createObjectURL(a)),Z(null),ie(a)}},className:"hidden",disabled:V}),(0,I.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=G.current)||void 0===e?void 0:e.click()},disabled:V,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:b(V?"settings.logoUploading":"settings.logoUploadButton"),children:V?(0,I.jsx)(R.A,{className:"h-5 w-5 animate-spin"}):(0,I.jsx)(E,{className:"h-5 w-5"})})]})]}),H&&(0,I.jsx)("div",{className:"text-red-600 dark:text-red-400 text-sm mt-2",children:H}),O&&(0,I.jsxs)("div",{className:"mt-4",children:[(0,I.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:b("settings.logoPreview")}),(0,I.jsx)("img",{src:O,alt:"Logo Vorschau",className:"max-w-xs h-auto rounded-lg shadow-sm"})]}),(0,I.jsxs)("div",{className:"border-t pt-6",children:[(0,I.jsx)("h3",{className:"text-lg font-medium mb-4 dark:text-white",children:b("settings.uploadDirectories")}),(0,I.jsxs)("div",{className:"space-y-4",children:[(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{htmlFor:"taskAttachmentsPath",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:b("settings.taskAttachmentsPath")}),(0,I.jsx)("input",{type:"text",id:"taskAttachmentsPath",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white",defaultValue:"uploads/task-attachments",placeholder:b("settings.taskAttachmentsPathPlaceholder")}),(0,I.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:b("settings.taskAttachmentsPathDescription")})]}),(0,I.jsxs)("div",{children:[(0,I.jsx)("label",{htmlFor:"requestAttachmentsPath",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:b("settings.requestAttachmentsPath")}),(0,I.jsx)("input",{type:"text",id:"requestAttachmentsPath",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white",defaultValue:"uploads/request-attachments",placeholder:b("settings.requestAttachmentsPathPlaceholder")}),(0,I.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:b("settings.requestAttachmentsPathDescription")})]}),(0,I.jsx)("div",{className:"mt-4",children:(0,I.jsx)("button",{type:"button",onClick:async()=>{K(!0);try{var e,t;null===(e=document.getElementById("taskAttachmentsPath"))||void 0===e||e.value,null===(t=document.getElementById("requestAttachmentsPath"))||void 0===t||t.value;await new Promise((e=>setTimeout(e,500))),g.oR.success(b("settings.saveDirectoriesSuccess"))}catch(H){console.error("Fehler beim Speichern der Upload-Verzeichnisse:",H),g.oR.error(b("errors.saveUploadDirectoriesError"))}finally{K(!1)}},disabled:_,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:b(_?"settings.savingDirectories":"settings.saveDirectories"),children:_?(0,I.jsx)(R.A,{className:"h-5 w-5 animate-spin"}):(0,I.jsx)(D.A,{className:"h-5 w-5"})})})]})]}),(0,I.jsxs)("div",{className:"border-t pt-6",children:[(0,I.jsx)("h3",{className:"text-lg font-medium mb-4 dark:text-white",children:b("settings.databaseManagement")}),(0,I.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:b("settings.databaseManagementDescription")}),(0,I.jsx)(J,{})]})]})]}),(0,I.jsx)(z,{isOpen:se,onClose:()=>ne(!1),onSave:le,currentSettings:ee})]})}):(0,I.jsx)("div",{children:b("common.loading")})}},1816:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(45),s=a(5043);const n=["title","titleId"];function l(e,t){let{title:a,titleId:l}=e,i=(0,r.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const i=s.forwardRef(l)},2704:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(45),s=a(5043);const n=["title","titleId"];function l(e,t){let{title:a,titleId:l}=e,i=(0,r.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const i=s.forwardRef(l)},4538:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(45),s=a(5043);const n=["title","titleId"];function l(e,t){let{title:a,titleId:l}=e,i=(0,r.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const i=s.forwardRef(l)},6009:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(45),s=a(5043);const n=["title","titleId"];function l(e,t){let{title:a,titleId:l}=e,i=(0,r.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const i=s.forwardRef(l)},7012:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(45),s=a(5043);const n=["title","titleId"];function l(e,t){let{title:a,titleId:l}=e,i=(0,r.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const i=s.forwardRef(l)},9248:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(45),s=a(5043);const n=["title","titleId"];function l(e,t){let{title:a,titleId:l}=e,i=(0,r.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const i=s.forwardRef(l)},9422:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(45),s=a(5043);const n=["title","titleId"];function l(e,t){let{title:a,titleId:l}=e,i=(0,r.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const i=s.forwardRef(l)}}]);
//# sourceMappingURL=844.1ba64f7a.chunk.js.map