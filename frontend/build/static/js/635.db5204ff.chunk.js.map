{"version":3,"file":"static/js/635.db5204ff.chunk.js","mappings":"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","sources":["../node_modules/@heroicons/react/24/outline/esm/ChartBarIcon.js","../node_modules/@heroicons/react/24/outline/esm/DocumentDuplicateIcon.js","../node_modules/@heroicons/react/24/outline/esm/MapPinIcon.js","components/CertificateCreationModal.tsx","components/ContractCreationModal.tsx","components/CertificateEditModal.tsx","components/ContractEditModal.tsx","components/SocialSecurityEditor.tsx","components/OffboardingStartModal.tsx","components/OffboardingCompleteModal.tsx","components/LifecycleView.tsx","components/UserManagementTab.tsx","components/RoleManagementTab.tsx","components/BranchManagementTab.tsx","../node_modules/@heroicons/react/24/outline/esm/UserPlusIcon.js","components/organization/CreateOrganizationModal.tsx","components/organization/JoinOrganizationModal.tsx","components/organization/RoleConfigurationTab.tsx","components/organization/DocumentConfigurationTab.tsx","components/organization/SMTPConfigurationTab.tsx","utils/urlValidation.ts","components/organization/ApiConfigurationTab.tsx","components/organization/EditOrganizationModal.tsx","components/organization/MyJoinRequestsList.tsx","components/organization/OrganizationSettings.tsx","components/organization/ProcessJoinRequestModal.tsx","components/organization/JoinRequestsList.tsx","pages/Organisation.tsx","../node_modules/@heroicons/react/24/outline/esm/EnvelopeIcon.js"],"sourcesContent":["import * as React from \"react\";\nfunction ChartBarIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChartBarIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction DocumentDuplicateIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(DocumentDuplicateIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction MapPinIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(MapPinIcon);\nexport default ForwardRef;","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, DocumentTextIcon, CalendarIcon, UserIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface CertificateCreationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onCertificateCreated: () => void;\n  userId: number;\n  userName: string;\n}\n\ninterface UserData {\n  firstName: string;\n  lastName: string;\n  identificationNumber: string | null;\n  contractStartDate: string | null;\n  contractEndDate: string | null;\n  contractType: string | null;\n  salary: number | null;\n  position: string | null;\n}\n\nconst CertificateCreationModal: React.FC<CertificateCreationModalProps> = ({\n  isOpen,\n  onClose,\n  onCertificateCreated,\n  userId,\n  userName\n}) => {\n  const { t } = useTranslation();\n  const { user: currentUser } = useAuth();\n  const { isHR, isAdmin, loading: permissionsLoading } = usePermissions();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  \n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [activeTab, setActiveTab] = useState<'data' | 'text'>('data');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Form-Daten\n  const [userData, setUserData] = useState<UserData | null>(null);\n  const [issueDate, setIssueDate] = useState(new Date().toISOString().split('T')[0]);\n  const [certificateType, setCertificateType] = useState('employment');\n  const [pdfFile, setPdfFile] = useState<File | null>(null);\n  const [pdfPreviewUrl, setPdfPreviewUrl] = useState<string | null>(null);\n  const [uploading, setUploading] = useState(false);\n  const [availableTemplates, setAvailableTemplates] = useState<Array<{type: string; version: string; path: string}>>([]);\n  const [selectedTemplate, setSelectedTemplate] = useState<string | null>(null);\n  const [useTemplate, setUseTemplate] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Prfe Berechtigung (nur wenn Berechtigungen geladen sind)\n  useEffect(() => {\n    if (permissionsLoading) {\n      return; // Warte bis Berechtigungen geladen sind\n    }\n    \n    if (!isHR() && !isAdmin()) {\n      showMessage('Nur HR oder Admin knnen Arbeitszeugnisse erstellen', 'error');\n      onClose();\n    }\n  }, [isHR, isAdmin, permissionsLoading, onClose, showMessage]);\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n      fetchUserData();\n      fetchTemplates();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  const fetchTemplates = async () => {\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.DOCUMENT_TEMPLATES);\n      const documentTemplates = response.data.documentTemplates || {};\n      const templates: Array<{type: string; version: string; path: string}> = [];\n      \n      if (documentTemplates.employmentCertificate) {\n        templates.push({\n          type: 'employmentCertificate',\n          version: documentTemplates.employmentCertificate.version,\n          path: documentTemplates.employmentCertificate.path\n        });\n      }\n      \n      setAvailableTemplates(templates);\n      if (templates.length > 0) {\n        setSelectedTemplate(templates[0].type);\n        setUseTemplate(true);\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Laden der Templates:', err);\n      // Kein Fehler anzeigen, Templates sind optional\n    }\n  };\n\n  const fetchUserData = async () => {\n    try {\n      const [userResponse, lifecycleResponse] = await Promise.all([\n        axiosInstance.get(API_ENDPOINTS.USERS.BY_ID(userId)),\n        axiosInstance.get(API_ENDPOINTS.LIFECYCLE.BY_USER(userId))\n      ]);\n\n      const user = userResponse.data;\n      const lifecycle = lifecycleResponse.data.lifecycle;\n\n      const userDataObj = {\n        firstName: user.firstName || '',\n        lastName: user.lastName || '',\n        identificationNumber: user.identificationNumber || null,\n        contractStartDate: lifecycle?.contractStartDate || null,\n        contractEndDate: lifecycle?.contractEndDate || null,\n        contractType: lifecycle?.contractType || null,\n        salary: user.salary || null,\n        position: null // TODO: Aus Rollen ableiten\n      };\n\n      setUserData(userDataObj);\n\n      // Automatische Vorausfllung: Ausstellungsdatum auf heute setzen (wenn noch nicht gesetzt)\n      if (!issueDate || issueDate === new Date().toISOString().split('T')[0]) {\n        setIssueDate(new Date().toISOString().split('T')[0]);\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Laden der User-Daten:', err);\n      setError('Fehler beim Laden der Daten');\n    }\n  };\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        showMessage('Nur PDF-Dateien sind erlaubt', 'error');\n        return;\n      }\n      if (file.size > 10 * 1024 * 1024) { // 10MB\n        showMessage('Datei ist zu gro (max. 10MB)', 'error');\n        return;\n      }\n      setPdfFile(file);\n      setUseTemplate(false); // Deaktiviere Template wenn PDF hochgeladen wird\n      // Erstelle Preview-URL\n      const url = URL.createObjectURL(file);\n      setPdfPreviewUrl(url);\n    }\n  };\n\n  // Cleanup: Revoke Object URL beim Unmount oder wenn Datei entfernt wird\n  useEffect(() => {\n    return () => {\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n      }\n    };\n  }, [pdfPreviewUrl]);\n\n  const validateForm = (): string | null => {\n    if (!useTemplate && !pdfFile) {\n      return 'Bitte whlen Sie ein Template oder laden Sie eine PDF-Datei hoch';\n    }\n    if (!issueDate) {\n      return 'Bitte geben Sie ein Ausstellungsdatum an';\n    }\n    const issueDateObj = new Date(issueDate);\n    if (isNaN(issueDateObj.getTime())) {\n      return 'Ungltiges Ausstellungsdatum';\n    }\n    if (issueDateObj > new Date()) {\n      return 'Ausstellungsdatum darf nicht in der Zukunft liegen';\n    }\n    return null;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Client-seitige Validierung\n    const validationError = validateForm();\n    if (validationError) {\n      setError(validationError);\n      showMessage(validationError, 'error');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      let pdfPath: string | undefined = undefined;\n      let templateUsed: string | null = null;\n      let templateVersion: string | null = null;\n\n      // Wenn Template verwendet werden soll und kein PDF hochgeladen wurde\n      if (useTemplate && selectedTemplate && !pdfFile) {\n        const template = availableTemplates.find(t => t.type === selectedTemplate);\n        if (template) {\n          templateUsed = template.type;\n          templateVersion = template.version;\n          // PDF wird vom Backend generiert\n        }\n      } else if (pdfFile) {\n        // PDF wurde hochgeladen - verwende dieses\n        pdfPath = `temp-${Date.now()}-${pdfFile.name}`; // Temporr\n      } else {\n        showMessage('Bitte whlen Sie ein Template oder laden Sie eine PDF-Datei hoch', 'error');\n        setLoading(false);\n        return;\n      }\n\n      const certificateData = {\n        certificateType,\n        issueDate: new Date(issueDate),\n        pdfPath,\n        templateUsed,\n        templateVersion\n      };\n\n      await axiosInstance.post(\n        API_ENDPOINTS.LIFECYCLE.CERTIFICATES(userId),\n        certificateData\n      );\n\n      showMessage('Arbeitszeugnis erfolgreich erstellt', 'success');\n      onCertificateCreated();\n      onClose();\n      \n      // Reset form\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n        setPdfPreviewUrl(null);\n      }\n      setPdfFile(null);\n      setIssueDate(new Date().toISOString().split('T')[0]);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Erstellen des Arbeitszeugnisses:', err);\n      setError(err.response?.data?.message || 'Fehler beim Erstellen des Arbeitszeugnisses');\n      showMessage('Fehler beim Erstellen des Arbeitszeugnisses', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isHR() && !isAdmin()) {\n    return null;\n  }\n\n  return (\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n      {/* Overlay - nur auf Mobile und Desktop (nicht Large Desktop) */}\n      {(!isLargeScreen || isMobile) && (\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n      )}\n\n      <div className=\"fixed inset-0 flex items-start justify-end p-0 sm:p-0\">\n        <Dialog.Panel\n          className={`\n            ${isMobile ? 'w-full h-full' : isLargeScreen ? 'w-[600px]' : 'w-[600px]'}\n            ${isMobile ? '' : 'top-16'}\n            bg-white dark:bg-gray-800 shadow-xl\n            transform transition-transform duration-350 ease-out\n            ${isMobile ? 'rounded-none' : 'rounded-l-lg'}\n            flex flex-col\n            max-h-[calc(100vh-4rem)]\n          `}\n          style={{\n            animation: isMobile ? 'none' : 'slideIn 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94)'\n          }}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <div className=\"flex items-center space-x-3\">\n              <DocumentTextIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n              <Dialog.Title className=\"text-xl font-semibold dark:text-white\">\n                Arbeitszeugnis erstellen\n              </Dialog.Title>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-6\">\n            <div className=\"mb-4\">\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Fr: <span className=\"font-medium dark:text-white\">{userName}</span>\n              </p>\n            </div>\n\n            {/* Tabs */}\n            <div className=\"border-b border-gray-200 dark:border-gray-700 mb-6\">\n              <nav className=\"-mb-px flex space-x-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => setActiveTab('data')}\n                  className={`${\n                    activeTab === 'data'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                >\n                  Daten\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setActiveTab('text')}\n                  className={`${\n                    activeTab === 'text'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                >\n                  PDF hochladen\n                </button>\n              </nav>\n            </div>\n\n            {error && (\n              <div className=\"mb-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\n                <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n              </div>\n            )}\n\n            {/* Tab Content */}\n            {activeTab === 'data' && (\n              <div className=\"space-y-4\">\n                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 mb-4\">\n                  <h3 className=\"text-sm font-semibold dark:text-white mb-3\">\n                    Automatisch erkannte Daten\n                  </h3>\n                  <div className=\"space-y-2 text-sm\">\n                    {userData && (\n                      <>\n                        <div className=\"flex items-center space-x-2\">\n                          <UserIcon className=\"h-4 w-4 text-gray-400\" />\n                          <span className=\"text-gray-600 dark:text-gray-400\">Name:</span>\n                          <span className=\"dark:text-white\">\n                            {userData.firstName} {userData.lastName}\n                          </span>\n                        </div>\n                        {userData.identificationNumber && (\n                          <div className=\"flex items-center space-x-2\">\n                            <DocumentTextIcon className=\"h-4 w-4 text-gray-400\" />\n                            <span className=\"text-gray-600 dark:text-gray-400\">Cdula:</span>\n                            <span className=\"dark:text-white\">{userData.identificationNumber}</span>\n                          </div>\n                        )}\n                        {userData.contractStartDate && (\n                          <div className=\"flex items-center space-x-2\">\n                            <CalendarIcon className=\"h-4 w-4 text-gray-400\" />\n                            <span className=\"text-gray-600 dark:text-gray-400\">Eintrittsdatum:</span>\n                            <span className=\"dark:text-white\">\n                              {new Date(userData.contractStartDate).toLocaleDateString('de-DE')}\n                            </span>\n                          </div>\n                        )}\n                        {userData.contractEndDate && (\n                          <div className=\"flex items-center space-x-2\">\n                            <CalendarIcon className=\"h-4 w-4 text-gray-400\" />\n                            <span className=\"text-gray-600 dark:text-gray-400\">Austrittsdatum:</span>\n                            <span className=\"dark:text-white\">\n                              {new Date(userData.contractEndDate).toLocaleDateString('de-DE')}\n                            </span>\n                          </div>\n                        )}\n                      </>\n                    )}\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Ausstellungsdatum <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={issueDate}\n                    onChange={(e) => {\n                      const value = e.target.value;\n                      setIssueDate(value);\n                      // Validierung: Datum darf nicht in der Zukunft liegen\n                      if (value && new Date(value) > new Date()) {\n                        setError('Ausstellungsdatum darf nicht in der Zukunft liegen');\n                      } else {\n                        setError(null); // Clear error when valid\n                      }\n                    }}\n                    max={new Date().toISOString().split('T')[0]}\n                    className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                      error && issueDate && new Date(issueDate) > new Date()\n                        ? 'border-red-500 dark:border-red-500' \n                        : error && !issueDate\n                        ? 'border-red-500 dark:border-red-500'\n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                    required\n                    aria-invalid={(!issueDate || (issueDate && new Date(issueDate) > new Date())) ? true : undefined}\n                    aria-describedby={(!issueDate || (issueDate && new Date(issueDate) > new Date())) ? \"issueDate-error\" : undefined}\n                  />\n                  {error && (!issueDate || (issueDate && new Date(issueDate) > new Date())) && (\n                    <p id=\"issueDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                      {error}\n                    </p>\n                  )}\n                  {!error && (\n                    <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                      Das Datum darf nicht in der Zukunft liegen\n                    </p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Zertifikat-Typ <span className=\"text-red-500\">*</span>\n                  </label>\n                  <select\n                    value={certificateType}\n                    onChange={(e) => setCertificateType(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    required\n                  >\n                    <option value=\"employment\">Arbeitszeugnis</option>\n                    <option value=\"salary\">Gehaltsbescheinigung</option>\n                    <option value=\"work_experience\">Arbeitsbescheinigung</option>\n                  </select>\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'text' && (\n              <div className=\"space-y-4\">\n                {/* Template-Auswahl */}\n                {availableTemplates.length > 0 && (\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Template verwenden\n                    </label>\n                    <div className=\"flex items-center space-x-3 mb-4\">\n                      <input\n                        type=\"checkbox\"\n                        checked={useTemplate}\n                        onChange={(e) => {\n                          setUseTemplate(e.target.checked);\n                          if (e.target.checked && pdfFile) {\n                            // Wenn Template aktiviert wird, entferne PDF\n                            setPdfFile(null);\n                            if (pdfPreviewUrl) {\n                              URL.revokeObjectURL(pdfPreviewUrl);\n                              setPdfPreviewUrl(null);\n                            }\n                          }\n                        }}\n                        className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                      />\n                      <label className=\"text-sm text-gray-700 dark:text-gray-300\">\n                        Template fr automatische PDF-Generierung verwenden\n                      </label>\n                    </div>\n                    {useTemplate && (\n                      <select\n                        value={selectedTemplate || ''}\n                        onChange={(e) => setSelectedTemplate(e.target.value)}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white mb-4\"\n                      >\n                        {availableTemplates.map((template) => (\n                          <option key={template.type} value={template.type}>\n                            Arbeitszeugnis (Version {template.version})\n                          </option>\n                        ))}\n                      </select>\n                    )}\n                  </div>\n                )}\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                    {useTemplate ? 'ODER PDF-Datei hochladen' : 'PDF-Datei hochladen'} {!useTemplate && <span className=\"text-red-500\">*</span>}\n                  </label>\n                  <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center\">\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      accept=\".pdf\"\n                      onChange={handleFileSelect}\n                      className=\"hidden\"\n                    />\n                    {!pdfFile ? (\n                      <div>\n                        <DocumentTextIcon className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n                        <button\n                          type=\"button\"\n                          onClick={() => fileInputRef.current?.click()}\n                          className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium\"\n                        >\n                          PDF-Datei auswhlen\n                        </button>\n                        <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n                          oder Datei hierher ziehen\n                        </p>\n                        <p className=\"mt-1 text-xs text-gray-400 dark:text-gray-500\">\n                          Max. 10MB\n                        </p>\n                      </div>\n                    ) : (\n                      <div>\n                        <DocumentTextIcon className=\"mx-auto h-12 w-12 text-green-500 mb-4\" />\n                        <p className=\"text-sm font-medium dark:text-white\">{pdfFile.name}</p>\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                          {(pdfFile.size / 1024 / 1024).toFixed(2)} MB\n                        </p>\n                        <button\n                          type=\"button\"\n                          onClick={() => {\n                            setPdfFile(null);\n                            if (pdfPreviewUrl) {\n                              URL.revokeObjectURL(pdfPreviewUrl);\n                              setPdfPreviewUrl(null);\n                            }\n                            if (fileInputRef.current) {\n                              fileInputRef.current.value = '';\n                            }\n                          }}\n                          className=\"mt-2 text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300\"\n                        >\n                          Datei entfernen\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* PDF-Vorschau */}\n                {pdfPreviewUrl && (\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      PDF-Vorschau\n                    </label>\n                    <div className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n                      <iframe \n                        src={`${pdfPreviewUrl}#view=FitH`}\n                        className=\"w-full rounded border dark:border-gray-600\"\n                        style={{ height: '400px' }}\n                        title=\"PDF-Vorschau\"\n                      />\n                    </div>\n                  </div>\n                )}\n\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n              title=\"Abbrechen\"\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleSubmit}\n              disabled={loading || (!pdfFile && !useTemplate)}\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n              title={loading ? 'Wird erstellt...' : 'Erstellen'}\n            >\n              {loading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <CheckIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n        </Dialog.Panel>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default CertificateCreationModal;\n\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, DocumentTextIcon, CalendarIcon, UserIcon, CurrencyDollarIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface ContractCreationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onContractCreated: () => void;\n  userId: number;\n  userName: string;\n}\n\ninterface UserData {\n  firstName: string;\n  lastName: string;\n  identificationNumber: string | null;\n  contractStartDate: string | null;\n  contractEndDate: string | null;\n  contractType: string | null;\n  salary: number | null;\n  position: string | null;\n}\n\nconst ContractCreationModal: React.FC<ContractCreationModalProps> = ({\n  isOpen,\n  onClose,\n  onContractCreated,\n  userId,\n  userName\n}) => {\n  const { t } = useTranslation();\n  const { user: currentUser } = useAuth();\n  const { isHR, isAdmin, loading: permissionsLoading } = usePermissions();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  \n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [activeTab, setActiveTab] = useState<'data' | 'text'>('data');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Form-Daten\n  const [userData, setUserData] = useState<UserData | null>(null);\n  const [contractType, setContractType] = useState('employment');\n  const [startDate, setStartDate] = useState(new Date().toISOString().split('T')[0]);\n  const [endDate, setEndDate] = useState<string>('');\n  const [salary, setSalary] = useState<string>('');\n  const [workingHours, setWorkingHours] = useState<string>('');\n  const [position, setPosition] = useState<string>('');\n  const [pdfFile, setPdfFile] = useState<File | null>(null);\n  const [pdfPreviewUrl, setPdfPreviewUrl] = useState<string | null>(null);\n  const [availableTemplates, setAvailableTemplates] = useState<Array<{type: string; version: string; path: string}>>([]);\n  const [selectedTemplate, setSelectedTemplate] = useState<string | null>(null);\n  const [useTemplate, setUseTemplate] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Prfe Berechtigung (nur wenn Berechtigungen geladen sind)\n  useEffect(() => {\n    if (permissionsLoading) {\n      return; // Warte bis Berechtigungen geladen sind\n    }\n    \n    if (!isHR() && !isAdmin()) {\n      showMessage('Nur HR oder Admin knnen Arbeitsvertrge erstellen', 'error');\n      onClose();\n    }\n  }, [isHR, isAdmin, permissionsLoading, onClose, showMessage]);\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n      fetchUserData();\n      fetchTemplates();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  const fetchTemplates = async () => {\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.DOCUMENT_TEMPLATES);\n      const documentTemplates = response.data.documentTemplates || {};\n      const templates: Array<{type: string; version: string; path: string}> = [];\n      \n      if (documentTemplates.employmentContract) {\n        templates.push({\n          type: 'employmentContract',\n          version: documentTemplates.employmentContract.version,\n          path: documentTemplates.employmentContract.path\n        });\n      }\n      \n      setAvailableTemplates(templates);\n      if (templates.length > 0) {\n        setSelectedTemplate(templates[0].type);\n        setUseTemplate(true);\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Laden der Templates:', err);\n      // Kein Fehler anzeigen, Templates sind optional\n    }\n  };\n\n  const fetchUserData = async () => {\n    try {\n      const [userResponse, lifecycleResponse] = await Promise.all([\n        axiosInstance.get(API_ENDPOINTS.USERS.BY_ID(userId)),\n        axiosInstance.get(API_ENDPOINTS.LIFECYCLE.BY_USER(userId))\n      ]);\n\n      const user = userResponse.data;\n      const lifecycle = lifecycleResponse.data.lifecycle;\n\n      const data: UserData = {\n        firstName: user.firstName || '',\n        lastName: user.lastName || '',\n        identificationNumber: user.identificationNumber || null,\n        contractStartDate: lifecycle?.contractStartDate || null,\n        contractEndDate: lifecycle?.contractEndDate || null,\n        contractType: lifecycle?.contractType || null,\n        salary: user.salary || null,\n        position: null\n      };\n\n      setUserData(data);\n      \n      // Setze Standard-Werte\n      if (data.contractStartDate) {\n        setStartDate(new Date(data.contractStartDate).toISOString().split('T')[0]);\n      }\n      if (data.contractEndDate) {\n        setEndDate(new Date(data.contractEndDate).toISOString().split('T')[0]);\n      }\n      if (data.salary) {\n        setSalary(data.salary.toString());\n      }\n      if (data.contractType) {\n        setContractType(data.contractType);\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Laden der User-Daten:', err);\n      setError('Fehler beim Laden der Daten');\n    }\n  };\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        showMessage('Nur PDF-Dateien sind erlaubt', 'error');\n        return;\n      }\n      if (file.size > 10 * 1024 * 1024) { // 10MB\n        showMessage('Datei ist zu gro (max. 10MB)', 'error');\n        return;\n      }\n      setPdfFile(file);\n      setUseTemplate(false); // Deaktiviere Template wenn PDF hochgeladen wird\n      // Erstelle Preview-URL\n      const url = URL.createObjectURL(file);\n      setPdfPreviewUrl(url);\n    }\n  };\n\n  // Cleanup: Revoke Object URL beim Unmount oder wenn Datei entfernt wird\n  useEffect(() => {\n    return () => {\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n      }\n    };\n  }, [pdfPreviewUrl]);\n\n  const validateForm = (): string | null => {\n    if (!useTemplate && !pdfFile) {\n      return 'Bitte whlen Sie ein Template oder laden Sie eine PDF-Datei hoch';\n    }\n    if (!startDate) {\n      return 'Bitte geben Sie ein Startdatum an';\n    }\n    const startDateObj = new Date(startDate);\n    if (isNaN(startDateObj.getTime())) {\n      return 'Ungltiges Startdatum';\n    }\n    if (endDate) {\n      const endDateObj = new Date(endDate);\n      if (isNaN(endDateObj.getTime())) {\n        return 'Ungltiges Enddatum';\n      }\n      if (endDateObj < startDateObj) {\n        return 'Enddatum muss nach dem Startdatum liegen';\n      }\n    }\n    if (salary && parseFloat(salary) < 0) {\n      return 'Gehalt darf nicht negativ sein';\n    }\n    if (workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168)) {\n      return 'Arbeitsstunden mssen zwischen 0 und 168 liegen';\n    }\n    return null;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Client-seitige Validierung\n    const validationError = validateForm();\n    if (validationError) {\n      setError(validationError);\n      showMessage(validationError, 'error');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      let pdfPath: string | undefined = undefined;\n      let templateUsed: string | null = null;\n      let templateVersion: string | null = null;\n\n      // Wenn Template verwendet werden soll und kein PDF hochgeladen wurde\n      if (useTemplate && selectedTemplate && !pdfFile) {\n        const template = availableTemplates.find(t => t.type === selectedTemplate);\n        if (template) {\n          templateUsed = template.type;\n          templateVersion = template.version;\n          // PDF wird vom Backend generiert\n        }\n      } else if (pdfFile) {\n        // PDF wurde hochgeladen - verwende dieses\n        pdfPath = `temp-${Date.now()}-${pdfFile.name}`; // Temporr\n      } else {\n        showMessage('Bitte whlen Sie ein Template oder laden Sie eine PDF-Datei hoch', 'error');\n        setLoading(false);\n        return;\n      }\n\n      const contractData = {\n        contractType,\n        startDate: new Date(startDate),\n        endDate: endDate ? new Date(endDate) : null,\n        salary: salary ? parseFloat(salary) : null,\n        workingHours: workingHours ? parseFloat(workingHours) : null,\n        position: position || null,\n        pdfPath,\n        templateUsed,\n        templateVersion\n      };\n\n      await axiosInstance.post(\n        API_ENDPOINTS.LIFECYCLE.CONTRACTS(userId),\n        contractData\n      );\n\n      showMessage('Arbeitsvertrag erfolgreich erstellt', 'success');\n      onContractCreated();\n      onClose();\n      \n      // Reset form\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n        setPdfPreviewUrl(null);\n      }\n      setPdfFile(null);\n      setStartDate(new Date().toISOString().split('T')[0]);\n      setEndDate('');\n      setSalary('');\n      setWorkingHours('');\n      setPosition('');\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Erstellen des Arbeitsvertrags:', err);\n      setError(err.response?.data?.message || 'Fehler beim Erstellen des Arbeitsvertrags');\n      showMessage('Fehler beim Erstellen des Arbeitsvertrags', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isHR() && !isAdmin()) {\n    return null;\n  }\n\n  return (\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n      {/* Overlay */}\n      {(!isLargeScreen || isMobile) && (\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n      )}\n\n      <div className=\"fixed inset-0 flex items-start justify-end p-0 sm:p-0\">\n        <Dialog.Panel\n          className={`\n            ${isMobile ? 'w-full h-full' : isLargeScreen ? 'w-[600px]' : 'w-[600px]'}\n            ${isMobile ? '' : 'top-16'}\n            bg-white dark:bg-gray-800 shadow-xl\n            transform transition-transform duration-350 ease-out\n            ${isMobile ? 'rounded-none' : 'rounded-l-lg'}\n            flex flex-col\n            max-h-[calc(100vh-4rem)]\n          `}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <div className=\"flex items-center space-x-3\">\n              <DocumentTextIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n              <Dialog.Title className=\"text-xl font-semibold dark:text-white\">\n                Arbeitsvertrag erstellen\n              </Dialog.Title>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-6\">\n            <div className=\"mb-4\">\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Fr: <span className=\"font-medium dark:text-white\">{userName}</span>\n              </p>\n            </div>\n\n            {/* Tabs */}\n            <div className=\"border-b border-gray-200 dark:border-gray-700 mb-6\">\n              <nav className=\"-mb-px flex space-x-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => setActiveTab('data')}\n                  className={`${\n                    activeTab === 'data'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                >\n                  Vertragsdaten\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setActiveTab('text')}\n                  className={`${\n                    activeTab === 'text'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                >\n                  PDF hochladen\n                </button>\n              </nav>\n            </div>\n\n            {error && (\n              <div className=\"mb-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\n                <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n              </div>\n            )}\n\n            {/* Tab Content */}\n            {activeTab === 'data' && (\n              <div className=\"space-y-4\">\n                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 mb-4\">\n                  <h3 className=\"text-sm font-semibold dark:text-white mb-3\">\n                    Automatisch erkannte Daten\n                  </h3>\n                  <div className=\"space-y-2 text-sm\">\n                    {userData && (\n                      <>\n                        <div className=\"flex items-center space-x-2\">\n                          <UserIcon className=\"h-4 w-4 text-gray-400\" />\n                          <span className=\"text-gray-600 dark:text-gray-400\">Name:</span>\n                          <span className=\"dark:text-white\">\n                            {userData.firstName} {userData.lastName}\n                          </span>\n                        </div>\n                        {userData.identificationNumber && (\n                          <div className=\"flex items-center space-x-2\">\n                            <DocumentTextIcon className=\"h-4 w-4 text-gray-400\" />\n                            <span className=\"text-gray-600 dark:text-gray-400\">Cdula:</span>\n                            <span className=\"dark:text-white\">{userData.identificationNumber}</span>\n                          </div>\n                        )}\n                      </>\n                    )}\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Vertragstyp <span className=\"text-red-500\">*</span>\n                  </label>\n                  <select\n                    value={contractType}\n                    onChange={(e) => setContractType(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  >\n                    <option value=\"employment\">Arbeitsvertrag</option>\n                    <option value=\"amendment\">Vertragsnderung</option>\n                    <option value=\"extension\">Vertragsverlngerung</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Startdatum <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={startDate}\n                    onChange={(e) => {\n                      setStartDate(e.target.value);\n                      setError(null); // Clear error when user starts typing\n                    }}\n                    className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                      error && !startDate \n                        ? 'border-red-500 dark:border-red-500' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                    required\n                    aria-invalid={!startDate}\n                    aria-describedby={!startDate ? \"startDate-error\" : undefined}\n                  />\n                  {error && !startDate && (\n                    <p id=\"startDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                      {error}\n                    </p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Enddatum (optional)\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={endDate}\n                    onChange={(e) => {\n                      setEndDate(e.target.value);\n                      // Wenn Enddatum gesetzt wird, prfe ob es nach Startdatum liegt\n                      if (e.target.value && startDate && new Date(e.target.value) < new Date(startDate)) {\n                        setError('Enddatum muss nach dem Startdatum liegen');\n                      } else {\n                        setError(null); // Clear error when valid\n                      }\n                    }}\n                    min={startDate || undefined}\n                    className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                      error && endDate && startDate && new Date(endDate) < new Date(startDate)\n                        ? 'border-red-500 dark:border-red-500' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                    aria-invalid={endDate && startDate && new Date(endDate) < new Date(startDate) ? true : undefined}\n                    aria-describedby={endDate && startDate && new Date(endDate) < new Date(startDate) ? \"endDate-error\" : undefined}\n                  />\n                  {error && endDate && startDate && new Date(endDate) < new Date(startDate) && (\n                    <p id=\"endDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                      {error}\n                    </p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Position\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={position}\n                    onChange={(e) => setPosition(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    placeholder=\"z.B. Frontend-Entwickler\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Gehalt (optional)\n                  </label>\n                  <div className=\"relative\">\n                    <CurrencyDollarIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                    <input\n                      type=\"number\"\n                      value={salary}\n                      onChange={(e) => {\n                        const value = e.target.value;\n                        setSalary(value);\n                        // Validierung: Gehalt darf nicht negativ sein\n                        if (value && parseFloat(value) < 0) {\n                          setError('Gehalt darf nicht negativ sein');\n                        } else {\n                          setError(null); // Clear error when valid\n                        }\n                      }}\n                      className={`w-full pl-10 pr-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                        error && salary && parseFloat(salary) < 0\n                          ? 'border-red-500 dark:border-red-500' \n                          : 'border-gray-300 dark:border-gray-600'\n                      }`}\n                      placeholder=\"0.00\"\n                      step=\"0.01\"\n                      min=\"0\"\n                      aria-invalid={salary && parseFloat(salary) < 0 ? true : undefined}\n                      aria-describedby={salary && parseFloat(salary) < 0 ? \"salary-error\" : undefined}\n                    />\n                  </div>\n                  {error && salary && parseFloat(salary) < 0 && (\n                    <p id=\"salary-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                      {error}\n                    </p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Arbeitsstunden/Woche (optional)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={workingHours}\n                    onChange={(e) => {\n                      const value = e.target.value;\n                      setWorkingHours(value);\n                      // Validierung: Arbeitsstunden mssen zwischen 0 und 168 liegen\n                      if (value && (parseFloat(value) < 0 || parseFloat(value) > 168)) {\n                        setError('Arbeitsstunden mssen zwischen 0 und 168 liegen');\n                      } else {\n                        setError(null); // Clear error when valid\n                      }\n                    }}\n                    className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                      error && workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168)\n                        ? 'border-red-500 dark:border-red-500' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                    placeholder=\"40\"\n                    step=\"0.1\"\n                    min=\"0\"\n                    max=\"168\"\n                    aria-invalid={workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) ? true : undefined}\n                    aria-describedby={workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) ? \"workingHours-error\" : undefined}\n                  />\n                  {error && workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) && (\n                    <p id=\"workingHours-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                      {error}\n                    </p>\n                  )}\n                  <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                    Maximal 168 Stunden pro Woche (24h  7 Tage)\n                  </p>\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'text' && (\n              <div className=\"space-y-4\">\n                {/* Template-Auswahl */}\n                {availableTemplates.length > 0 && (\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Template verwenden\n                    </label>\n                    <div className=\"flex items-center space-x-3 mb-4\">\n                      <input\n                        type=\"checkbox\"\n                        checked={useTemplate}\n                        onChange={(e) => {\n                          setUseTemplate(e.target.checked);\n                          if (e.target.checked && pdfFile) {\n                            // Wenn Template aktiviert wird, entferne PDF\n                            setPdfFile(null);\n                            if (pdfPreviewUrl) {\n                              URL.revokeObjectURL(pdfPreviewUrl);\n                              setPdfPreviewUrl(null);\n                            }\n                          }\n                        }}\n                        className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                      />\n                      <label className=\"text-sm text-gray-700 dark:text-gray-300\">\n                        Template fr automatische PDF-Generierung verwenden\n                      </label>\n                    </div>\n                    {useTemplate && (\n                      <select\n                        value={selectedTemplate || ''}\n                        onChange={(e) => setSelectedTemplate(e.target.value)}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white mb-4\"\n                      >\n                        {availableTemplates.map((template) => (\n                          <option key={template.type} value={template.type}>\n                            Arbeitsvertrag (Version {template.version})\n                          </option>\n                        ))}\n                      </select>\n                    )}\n                  </div>\n                )}\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                    {useTemplate ? 'ODER PDF-Datei hochladen' : 'PDF-Datei hochladen'} {!useTemplate && <span className=\"text-red-500\">*</span>}\n                  </label>\n                  <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center\">\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      accept=\".pdf\"\n                      onChange={handleFileSelect}\n                      className=\"hidden\"\n                    />\n                    {!pdfFile ? (\n                      <div>\n                        <DocumentTextIcon className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n                        <button\n                          type=\"button\"\n                          onClick={() => fileInputRef.current?.click()}\n                          className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium\"\n                        >\n                          PDF-Datei auswhlen\n                        </button>\n                        <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n                          oder Datei hierher ziehen\n                        </p>\n                        <p className=\"mt-1 text-xs text-gray-400 dark:text-gray-500\">\n                          Max. 10MB\n                        </p>\n                      </div>\n                    ) : (\n                      <div>\n                        <DocumentTextIcon className=\"mx-auto h-12 w-12 text-green-500 mb-4\" />\n                        <p className=\"text-sm font-medium dark:text-white\">{pdfFile.name}</p>\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                          {(pdfFile.size / 1024 / 1024).toFixed(2)} MB\n                        </p>\n                        <button\n                          type=\"button\"\n                          onClick={() => {\n                            setPdfFile(null);\n                            if (pdfPreviewUrl) {\n                              URL.revokeObjectURL(pdfPreviewUrl);\n                              setPdfPreviewUrl(null);\n                            }\n                            if (fileInputRef.current) {\n                              fileInputRef.current.value = '';\n                            }\n                          }}\n                          className=\"mt-2 text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300\"\n                        >\n                          Datei entfernen\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* PDF-Vorschau */}\n                {pdfPreviewUrl && (\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      PDF-Vorschau\n                    </label>\n                    <div className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n                      <iframe \n                        src={`${pdfPreviewUrl}#view=FitH`}\n                        className=\"w-full rounded border dark:border-gray-600\"\n                        style={{ height: '400px' }}\n                        title=\"PDF-Vorschau\"\n                      />\n                    </div>\n                  </div>\n                )}\n\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n              title=\"Abbrechen\"\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleSubmit}\n              disabled={loading || (!pdfFile && !useTemplate) || !startDate}\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n              title={loading ? 'Wird erstellt...' : 'Erstellen'}\n            >\n              {loading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <CheckIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n        </Dialog.Panel>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default ContractCreationModal;\n\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, DocumentTextIcon, CalendarIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface Certificate {\n  id: number;\n  certificateType: string;\n  issueDate: string;\n  templateUsed: string | null;\n  templateVersion: string | null;\n  isLatest: boolean;\n}\n\ninterface CertificateEditModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onCertificateUpdated: () => void;\n  userId: number;\n  certificate: Certificate;\n}\n\nconst CertificateEditModal: React.FC<CertificateEditModalProps> = ({\n  isOpen,\n  onClose,\n  onCertificateUpdated,\n  userId,\n  certificate\n}) => {\n  const { t } = useTranslation();\n  const { isHR, isAdmin, loading: permissionsLoading } = usePermissions();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  \n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Form-Daten\n  const [issueDate, setIssueDate] = useState(\n    certificate.issueDate ? new Date(certificate.issueDate).toISOString().split('T')[0] : new Date().toISOString().split('T')[0]\n  );\n  const [certificateType, setCertificateType] = useState(certificate.certificateType || 'employment');\n  const [pdfFile, setPdfFile] = useState<File | null>(null);\n  const [pdfPreviewUrl, setPdfPreviewUrl] = useState<string | null>(null);\n  const [existingPdfUrl, setExistingPdfUrl] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Prfe Berechtigung (nur wenn Berechtigungen geladen sind)\n  useEffect(() => {\n    if (permissionsLoading) {\n      return; // Warte bis Berechtigungen geladen sind\n    }\n    \n    if (!isHR() && !isAdmin()) {\n      showMessage('Nur HR oder Admin knnen Arbeitszeugnisse bearbeiten', 'error');\n      onClose();\n    }\n  }, [isHR, isAdmin, permissionsLoading, onClose, showMessage]);\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n      // Lade bestehende PDF-URL wenn vorhanden\n      if (certificate.id) {\n        setExistingPdfUrl(API_ENDPOINTS.LIFECYCLE.CERTIFICATE_DOWNLOAD(userId, certificate.id));\n      }\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane, certificate.id, userId]);\n\n  // Cleanup: Revoke Object URL beim Unmount oder wenn Datei entfernt wird\n  useEffect(() => {\n    return () => {\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n      }\n    };\n  }, [pdfPreviewUrl]);\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        showMessage('Nur PDF-Dateien sind erlaubt', 'error');\n        return;\n      }\n      if (file.size > 10 * 1024 * 1024) {\n        showMessage('Datei ist zu gro (max. 10MB)', 'error');\n        return;\n      }\n      setPdfFile(file);\n      // Erstelle Preview-URL fr neue Datei\n      const url = URL.createObjectURL(file);\n      setPdfPreviewUrl(url);\n      setExistingPdfUrl(null); // Verstecke bestehende PDF wenn neue hochgeladen wird\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const updateData: any = {\n        issueDate: new Date(issueDate),\n        certificateType\n      };\n\n      // Nur pdfPath aktualisieren, wenn neue Datei hochgeladen wurde\n      if (pdfFile) {\n        updateData.pdfPath = `temp-${Date.now()}-${pdfFile.name}`;\n        updateData.templateVersion = certificate.templateVersion || '1.0';\n      }\n\n      await axiosInstance.put(\n        API_ENDPOINTS.LIFECYCLE.CERTIFICATE(userId, certificate.id),\n        updateData\n      );\n\n      showMessage('Arbeitszeugnis erfolgreich aktualisiert', 'success');\n      onCertificateUpdated();\n      onClose();\n      \n      // Reset form\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n        setPdfPreviewUrl(null);\n      }\n      setPdfFile(null);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Aktualisieren des Arbeitszeugnisses:', err);\n      setError(err.response?.data?.message || 'Fehler beim Aktualisieren des Arbeitszeugnisses');\n      showMessage('Fehler beim Aktualisieren des Arbeitszeugnisses', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isHR() && !isAdmin()) {\n    return null;\n  }\n\n  return (\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n      {(!isLargeScreen || isMobile) && (\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n      )}\n\n      <div className=\"fixed inset-0 flex items-start justify-end p-0 sm:p-0\">\n        <Dialog.Panel\n          className={`\n            ${isMobile ? 'w-full h-full' : isLargeScreen ? 'w-[600px]' : 'w-[600px]'}\n            ${isMobile ? '' : 'top-16'}\n            bg-white dark:bg-gray-800 shadow-xl\n            transform transition-transform duration-350 ease-out\n            ${isMobile ? 'rounded-none' : 'rounded-l-lg'}\n            flex flex-col\n            max-h-[calc(100vh-4rem)]\n          `}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <div className=\"flex items-center space-x-3\">\n              <DocumentTextIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n              <Dialog.Title className=\"text-xl font-semibold dark:text-white\">\n                Arbeitszeugnis bearbeiten\n              </Dialog.Title>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-6\">\n            {error && (\n              <div className=\"mb-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\n                <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n              </div>\n            )}\n\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Ausstellungsdatum\n                </label>\n                <input\n                  type=\"date\"\n                  value={issueDate}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setIssueDate(value);\n                    // Validierung: Datum darf nicht in der Zukunft liegen\n                    if (value && new Date(value) > new Date()) {\n                      setError('Ausstellungsdatum darf nicht in der Zukunft liegen');\n                    } else {\n                      setError(null); // Clear error when valid\n                    }\n                  }}\n                  max={new Date().toISOString().split('T')[0]}\n                  className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                    error && issueDate && new Date(issueDate) > new Date()\n                      ? 'border-red-500 dark:border-red-500' \n                      : 'border-gray-300 dark:border-gray-600'\n                  }`}\n                  aria-invalid={issueDate && new Date(issueDate) > new Date() ? true : undefined}\n                  aria-describedby={issueDate && new Date(issueDate) > new Date() ? \"issueDate-error\" : undefined}\n                />\n                {error && issueDate && new Date(issueDate) > new Date() && (\n                  <p id=\"issueDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                    {error}\n                  </p>\n                )}\n                {!error && (\n                  <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                    Das Datum darf nicht in der Zukunft liegen\n                  </p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Zertifikat-Typ\n                </label>\n                <select\n                  value={certificateType}\n                  onChange={(e) => setCertificateType(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                >\n                  <option value=\"employment\">Arbeitszeugnis</option>\n                  <option value=\"salary\">Gehaltsbescheinigung</option>\n                  <option value=\"work_experience\">Arbeitsbescheinigung</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  PDF-Datei aktualisieren (optional)\n                </label>\n                <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center\">\n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\".pdf\"\n                    onChange={handleFileSelect}\n                    className=\"hidden\"\n                  />\n                  {!pdfFile ? (\n                    <div>\n                      <DocumentTextIcon className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n                      <button\n                        type=\"button\"\n                        onClick={() => fileInputRef.current?.click()}\n                        className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium\"\n                      >\n                        Neue PDF-Datei auswhlen\n                      </button>\n                      <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n                        oder Datei hierher ziehen\n                      </p>\n                      <p className=\"mt-1 text-xs text-gray-400 dark:text-gray-500\">\n                        Max. 10MB\n                      </p>\n                    </div>\n                  ) : (\n                    <div>\n                      <DocumentTextIcon className=\"mx-auto h-12 w-12 text-green-500 mb-4\" />\n                      <p className=\"text-sm font-medium dark:text-white\">{pdfFile.name}</p>\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                        {(pdfFile.size / 1024 / 1024).toFixed(2)} MB\n                      </p>\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          setPdfFile(null);\n                          if (pdfPreviewUrl) {\n                            URL.revokeObjectURL(pdfPreviewUrl);\n                            setPdfPreviewUrl(null);\n                          }\n                          setExistingPdfUrl(API_ENDPOINTS.LIFECYCLE.CERTIFICATE_DOWNLOAD(userId, certificate.id));\n                          if (fileInputRef.current) {\n                            fileInputRef.current.value = '';\n                          }\n                        }}\n                        className=\"mt-2 text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300\"\n                      >\n                        Datei entfernen\n                      </button>\n                    </div>\n                  )}\n                </div>\n\n                {/* PDF-Vorschau */}\n                {(pdfPreviewUrl || existingPdfUrl) && (\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      PDF-Vorschau\n                    </label>\n                    <div className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n                      <iframe \n                        src={`${pdfPreviewUrl || existingPdfUrl}${pdfPreviewUrl ? '#view=FitH' : '?preview=true#view=FitH'}`}\n                        className=\"w-full rounded border dark:border-gray-600\"\n                        style={{ height: '400px' }}\n                        title=\"PDF-Vorschau\"\n                      />\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4\">\n                <p className=\"text-sm text-yellow-700 dark:text-yellow-300\">\n                  <strong>Hinweis:</strong> Wenn Sie eine neue PDF-Datei hochladen, wird die alte Version ersetzt.\n                  Eine neue Version wird erstellt (isLatest = true).\n                </p>\n              </div>\n            </form>\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n              title=\"Abbrechen\"\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleSubmit}\n              disabled={loading}\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n              title={loading ? 'Wird aktualisiert...' : 'Aktualisieren'}\n            >\n              {loading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <CheckIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n        </Dialog.Panel>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default CertificateEditModal;\n\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, DocumentTextIcon, CalendarIcon, CurrencyDollarIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface Contract {\n  id: number;\n  contractType: string;\n  startDate: string;\n  endDate: string | null;\n  salary: number | null;\n  workingHours: number | null;\n  position: string | null;\n  templateUsed: string | null;\n  templateVersion: string | null;\n  isLatest: boolean;\n}\n\ninterface ContractEditModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onContractUpdated: () => void;\n  userId: number;\n  contract: Contract;\n}\n\nconst ContractEditModal: React.FC<ContractEditModalProps> = ({\n  isOpen,\n  onClose,\n  onContractUpdated,\n  userId,\n  contract\n}) => {\n  const { t } = useTranslation();\n  const { isHR, isAdmin, loading: permissionsLoading } = usePermissions();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  \n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Form-Daten\n  const [contractType, setContractType] = useState(contract.contractType || 'employment');\n  const [startDate, setStartDate] = useState(\n    contract.startDate ? new Date(contract.startDate).toISOString().split('T')[0] : new Date().toISOString().split('T')[0]\n  );\n  const [endDate, setEndDate] = useState(\n    contract.endDate ? new Date(contract.endDate).toISOString().split('T')[0] : ''\n  );\n  const [salary, setSalary] = useState(contract.salary ? contract.salary.toString() : '');\n  const [workingHours, setWorkingHours] = useState(contract.workingHours ? contract.workingHours.toString() : '');\n  const [position, setPosition] = useState(contract.position || '');\n  const [pdfFile, setPdfFile] = useState<File | null>(null);\n  const [pdfPreviewUrl, setPdfPreviewUrl] = useState<string | null>(null);\n  const [existingPdfUrl, setExistingPdfUrl] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Prfe Berechtigung (nur wenn Berechtigungen geladen sind)\n  useEffect(() => {\n    if (permissionsLoading) {\n      return; // Warte bis Berechtigungen geladen sind\n    }\n    \n    if (!isHR() && !isAdmin()) {\n      showMessage('Nur HR oder Admin knnen Arbeitsvertrge bearbeiten', 'error');\n      onClose();\n    }\n  }, [isHR, isAdmin, permissionsLoading, onClose, showMessage]);\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n      // Lade bestehende PDF-URL wenn vorhanden\n      if (contract.id) {\n        setExistingPdfUrl(API_ENDPOINTS.LIFECYCLE.CONTRACT_DOWNLOAD(userId, contract.id));\n      }\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane, contract.id, userId]);\n\n  // Cleanup: Revoke Object URL beim Unmount oder wenn Datei entfernt wird\n  useEffect(() => {\n    return () => {\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n      }\n    };\n  }, [pdfPreviewUrl]);\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        showMessage('Nur PDF-Dateien sind erlaubt', 'error');\n        return;\n      }\n      if (file.size > 10 * 1024 * 1024) {\n        showMessage('Datei ist zu gro (max. 10MB)', 'error');\n        return;\n      }\n      setPdfFile(file);\n      // Erstelle Preview-URL fr neue Datei\n      const url = URL.createObjectURL(file);\n      setPdfPreviewUrl(url);\n      setExistingPdfUrl(null); // Verstecke bestehende PDF wenn neue hochgeladen wird\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!startDate) {\n      showMessage('Bitte geben Sie ein Startdatum an', 'error');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const updateData: any = {\n        contractType,\n        startDate: new Date(startDate),\n        endDate: endDate ? new Date(endDate) : null,\n        salary: salary ? parseFloat(salary) : null,\n        workingHours: workingHours ? parseFloat(workingHours) : null,\n        position: position || null\n      };\n\n      // Nur pdfPath aktualisieren, wenn neue Datei hochgeladen wurde\n      if (pdfFile) {\n        updateData.pdfPath = `temp-${Date.now()}-${pdfFile.name}`;\n        updateData.templateVersion = contract.templateVersion || '1.0';\n      }\n\n      await axiosInstance.put(\n        API_ENDPOINTS.LIFECYCLE.CONTRACT(userId, contract.id),\n        updateData\n      );\n\n      showMessage('Arbeitsvertrag erfolgreich aktualisiert', 'success');\n      onContractUpdated();\n      onClose();\n      \n      // Reset form\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n        setPdfPreviewUrl(null);\n      }\n      setPdfFile(null);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Aktualisieren des Arbeitsvertrags:', err);\n      setError(err.response?.data?.message || 'Fehler beim Aktualisieren des Arbeitsvertrags');\n      showMessage('Fehler beim Aktualisieren des Arbeitsvertrags', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isHR() && !isAdmin()) {\n    return null;\n  }\n\n  return (\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n      {(!isLargeScreen || isMobile) && (\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n      )}\n\n      <div className=\"fixed inset-0 flex items-start justify-end p-0 sm:p-0\">\n        <Dialog.Panel\n          className={`\n            ${isMobile ? 'w-full h-full' : isLargeScreen ? 'w-[600px]' : 'w-[600px]'}\n            ${isMobile ? '' : 'top-16'}\n            bg-white dark:bg-gray-800 shadow-xl\n            transform transition-transform duration-350 ease-out\n            ${isMobile ? 'rounded-none' : 'rounded-l-lg'}\n            flex flex-col\n            max-h-[calc(100vh-4rem)]\n          `}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <div className=\"flex items-center space-x-3\">\n              <DocumentTextIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n              <Dialog.Title className=\"text-xl font-semibold dark:text-white\">\n                Arbeitsvertrag bearbeiten\n              </Dialog.Title>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-6\">\n            {error && (\n              <div className=\"mb-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\n                <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n              </div>\n            )}\n\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Vertragstyp <span className=\"text-red-500\">*</span>\n                </label>\n                <select\n                  value={contractType}\n                  onChange={(e) => setContractType(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                >\n                  <option value=\"employment\">Arbeitsvertrag</option>\n                  <option value=\"amendment\">Vertragsnderung</option>\n                  <option value=\"extension\">Vertragsverlngerung</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Startdatum <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"date\"\n                  value={startDate}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setStartDate(value);\n                    // Wenn Enddatum gesetzt ist, prfe ob es nach Startdatum liegt\n                    if (endDate && value && new Date(endDate) < new Date(value)) {\n                      setError('Enddatum muss nach dem Startdatum liegen');\n                    } else {\n                      setError(null); // Clear error when valid\n                    }\n                  }}\n                  className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                    error && !startDate \n                      ? 'border-red-500 dark:border-red-500' \n                      : 'border-gray-300 dark:border-gray-600'\n                  }`}\n                  required\n                  aria-invalid={!startDate ? true : undefined}\n                  aria-describedby={!startDate ? \"startDate-error\" : undefined}\n                />\n                {error && !startDate && (\n                  <p id=\"startDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                    {error}\n                  </p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Enddatum (optional)\n                </label>\n                <input\n                  type=\"date\"\n                  value={endDate}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setEndDate(value);\n                    // Wenn Enddatum gesetzt wird, prfe ob es nach Startdatum liegt\n                    if (value && startDate && new Date(value) < new Date(startDate)) {\n                      setError('Enddatum muss nach dem Startdatum liegen');\n                    } else {\n                      setError(null); // Clear error when valid\n                    }\n                  }}\n                  min={startDate || undefined}\n                  className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                    error && endDate && startDate && new Date(endDate) < new Date(startDate)\n                      ? 'border-red-500 dark:border-red-500' \n                      : 'border-gray-300 dark:border-gray-600'\n                  }`}\n                  aria-invalid={endDate && startDate && new Date(endDate) < new Date(startDate) ? true : undefined}\n                  aria-describedby={endDate && startDate && new Date(endDate) < new Date(startDate) ? \"endDate-error\" : undefined}\n                />\n                {error && endDate && startDate && new Date(endDate) < new Date(startDate) && (\n                  <p id=\"endDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                    {error}\n                  </p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Position\n                </label>\n                <input\n                  type=\"text\"\n                  value={position}\n                  onChange={(e) => setPosition(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  placeholder=\"z.B. Frontend-Entwickler\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Gehalt (optional)\n                </label>\n                <div className=\"relative\">\n                  <CurrencyDollarIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                  <input\n                    type=\"number\"\n                    value={salary}\n                    onChange={(e) => {\n                      const value = e.target.value;\n                      setSalary(value);\n                      // Validierung: Gehalt darf nicht negativ sein\n                      if (value && parseFloat(value) < 0) {\n                        setError('Gehalt darf nicht negativ sein');\n                      } else {\n                        setError(null); // Clear error when valid\n                      }\n                    }}\n                    className={`w-full pl-10 pr-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                      error && salary && parseFloat(salary) < 0\n                        ? 'border-red-500 dark:border-red-500' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                    placeholder=\"0.00\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    aria-invalid={salary && parseFloat(salary) < 0 ? true : undefined}\n                    aria-describedby={salary && parseFloat(salary) < 0 ? \"salary-error\" : undefined}\n                  />\n                </div>\n                {error && salary && parseFloat(salary) < 0 && (\n                  <p id=\"salary-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                    {error}\n                  </p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Arbeitsstunden/Woche (optional)\n                </label>\n                <input\n                  type=\"number\"\n                  value={workingHours}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setWorkingHours(value);\n                    // Validierung: Arbeitsstunden mssen zwischen 0 und 168 liegen\n                    if (value && (parseFloat(value) < 0 || parseFloat(value) > 168)) {\n                      setError('Arbeitsstunden mssen zwischen 0 und 168 liegen');\n                    } else {\n                      setError(null); // Clear error when valid\n                    }\n                  }}\n                  className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                    error && workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168)\n                      ? 'border-red-500 dark:border-red-500' \n                      : 'border-gray-300 dark:border-gray-600'\n                  }`}\n                  placeholder=\"40\"\n                  step=\"0.1\"\n                  min=\"0\"\n                  max=\"168\"\n                  aria-invalid={workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) ? true : undefined}\n                  aria-describedby={workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) ? \"workingHours-error\" : undefined}\n                />\n                {error && workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) && (\n                  <p id=\"workingHours-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                    {error}\n                  </p>\n                )}\n                <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                  Maximal 168 Stunden pro Woche (24h  7 Tage)\n                </p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  PDF-Datei aktualisieren (optional)\n                </label>\n                <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center\">\n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\".pdf\"\n                    onChange={handleFileSelect}\n                    className=\"hidden\"\n                  />\n                  {!pdfFile ? (\n                    <div>\n                      <DocumentTextIcon className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n                      <button\n                        type=\"button\"\n                        onClick={() => fileInputRef.current?.click()}\n                        className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium\"\n                      >\n                        Neue PDF-Datei auswhlen\n                      </button>\n                      <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n                        oder Datei hierher ziehen\n                      </p>\n                      <p className=\"mt-1 text-xs text-gray-400 dark:text-gray-500\">\n                        Max. 10MB\n                      </p>\n                    </div>\n                  ) : (\n                    <div>\n                      <DocumentTextIcon className=\"mx-auto h-12 w-12 text-green-500 mb-4\" />\n                      <p className=\"text-sm font-medium dark:text-white\">{pdfFile.name}</p>\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                        {(pdfFile.size / 1024 / 1024).toFixed(2)} MB\n                      </p>\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          setPdfFile(null);\n                          if (pdfPreviewUrl) {\n                            URL.revokeObjectURL(pdfPreviewUrl);\n                            setPdfPreviewUrl(null);\n                          }\n                          setExistingPdfUrl(API_ENDPOINTS.LIFECYCLE.CONTRACT_DOWNLOAD(userId, contract.id));\n                          if (fileInputRef.current) {\n                            fileInputRef.current.value = '';\n                          }\n                        }}\n                        className=\"mt-2 text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300\"\n                      >\n                        Datei entfernen\n                      </button>\n                    </div>\n                  )}\n                </div>\n\n                {/* PDF-Vorschau */}\n                {(pdfPreviewUrl || existingPdfUrl) && (\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      PDF-Vorschau\n                    </label>\n                    <div className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n                      <iframe \n                        src={`${pdfPreviewUrl || existingPdfUrl}${pdfPreviewUrl ? '#view=FitH' : '?preview=true#view=FitH'}`}\n                        className=\"w-full rounded border dark:border-gray-600\"\n                        style={{ height: '400px' }}\n                        title=\"PDF-Vorschau\"\n                      />\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4\">\n                <p className=\"text-sm text-yellow-700 dark:text-yellow-300\">\n                  <strong>Hinweis:</strong> Wenn Sie eine neue PDF-Datei hochladen, wird die alte Version ersetzt.\n                  Eine neue Version wird erstellt (isLatest = true).\n                </p>\n              </div>\n            </form>\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n              title=\"Abbrechen\"\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleSubmit}\n              disabled={loading || !startDate}\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n              title={loading ? 'Wird aktualisiert...' : 'Aktualisieren'}\n            >\n              {loading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <CheckIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n        </Dialog.Panel>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default ContractEditModal;\n\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  CheckCircleIcon,\n  ClockIcon,\n  XCircleIcon,\n  PencilIcon,\n  EnvelopeIcon,\n  DocumentTextIcon,\n  XMarkIcon,\n  ArrowPathIcon\n} from '@heroicons/react/24/outline';\n// Social Security Editor Component\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface SocialSecurityRegistration {\n  id: number;\n  registrationType: string;\n  registrationNumber: string | null;\n  provider: string | null;\n  registrationDate: string | null;\n  status: string;\n  notes: string | null;\n  completedAt: string | null;\n}\n\ninterface SocialSecurityEditorProps {\n  userId: number;\n  lifecycleId: number;\n  onUpdate?: () => void;\n}\n\ntype SocialSecurityType = 'arl' | 'eps' | 'pension' | 'caja';\n\nconst SocialSecurityEditor: React.FC<SocialSecurityEditorProps> = ({\n  userId,\n  lifecycleId,\n  onUpdate\n}) => {\n  const { t } = useTranslation();\n  const { isLegal, isAdmin, loading: permissionsLoading } = usePermissions();\n  const { showMessage } = useMessage();\n  \n  const [registrations, setRegistrations] = useState<Record<SocialSecurityType, SocialSecurityRegistration | null>>({\n    arl: null,\n    eps: null,\n    pension: null,\n    caja: null\n  });\n  const [loading, setLoading] = useState(true);\n  const [editingType, setEditingType] = useState<SocialSecurityType | null>(null);\n  const [formData, setFormData] = useState({\n    status: 'pending' as string,\n    registrationNumber: '',\n    provider: '',\n    registrationDate: '',\n    notes: ''\n  });\n  const [saving, setSaving] = useState(false);\n  const loadingRef = useRef(false);\n  const abortControllerRef = useRef<AbortController | null>(null);\n\n  // loadRegistrations auerhalb von useEffect definieren, damit es von handleSave aufgerufen werden kann\n  const loadRegistrations = useCallback(async () => {\n    // Erstelle neuen AbortController\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n    }\n    const abortController = new AbortController();\n    abortControllerRef.current = abortController;\n\n    loadingRef.current = true;\n    setLoading(true);\n    try {\n      const types: SocialSecurityType[] = ['arl', 'eps', 'pension', 'caja'];\n      const registrationPromises = types.map(async (type) => {\n        // Prfe ob Request abgebrochen wurde\n        if (abortController.signal.aborted) {\n          return { type, registration: null };\n        }\n\n        try {\n          const response = await axiosInstance.get(\n            API_ENDPOINTS.LIFECYCLE.SOCIAL_SECURITY(userId, type),\n            {\n              timeout: 5000, // 5 Sekunden Timeout\n              signal: abortController.signal\n            }\n          );\n          return { type, registration: response.data };\n        } catch (error: any) {\n          // Ignoriere Abort-Errors (AbortError oder CanceledError von Axios)\n          if (error.name === 'AbortError' || error.name === 'CanceledError' || abortController.signal.aborted) {\n            return { type, registration: null };\n          }\n          // Behandle 404 als \"nicht vorhanden\" (normal)\n          if (error.response?.status === 404) {\n            return { type, registration: null };\n          }\n          // Behandle Network Errors und Timeouts\n          if (error.code === 'ERR_NETWORK' || error.code === 'ECONNABORTED' || error.message?.includes('ERR_INSUFFICIENT_RESOURCES')) {\n            console.warn(`Network error loading ${type}, treating as not found`);\n            return { type, registration: null };\n          }\n          console.error(`Error loading ${type}:`, error);\n          return { type, registration: null };\n        }\n      });\n\n      const results = await Promise.all(registrationPromises);\n      \n      // Prfe erneut ob Request abgebrochen wurde\n      if (abortController.signal.aborted) {\n        return;\n      }\n\n      const newRegistrations: Record<SocialSecurityType, SocialSecurityRegistration | null> = {\n        arl: null,\n        eps: null,\n        pension: null,\n        caja: null\n      };\n\n      results.forEach(({ type, registration }) => {\n        if (registration) {\n          // Backend gibt zurck: { id, type, status, number, provider, registeredAt, notes, completedAt }\n          // Mappe auf Frontend-Format: { id, registrationType, registrationNumber, provider, registrationDate, status, notes, completedAt }\n          newRegistrations[type as SocialSecurityType] = {\n            id: registration.id || 0,\n            registrationType: type,\n            registrationNumber: registration.number || registration.registrationNumber || null,\n            provider: registration.provider || null,\n            registrationDate: registration.registeredAt || registration.registrationDate || null,\n            status: registration.status || 'pending',\n            notes: registration.notes || null,\n            completedAt: registration.completedAt || null\n          };\n        }\n      });\n\n      setRegistrations(newRegistrations);\n    } catch (error: any) {\n      // Ignoriere Abort-Errors (AbortError oder CanceledError von Axios)\n      if (error.name === 'AbortError' || error.name === 'CanceledError' || abortController.signal.aborted) {\n        return;\n      }\n      console.error('Error loading registrations:', error);\n      showMessage(t('socialSecurity.loadError'), 'error');\n    } finally {\n      // Setze loading immer auf false, auch bei Abbruch\n      setLoading(false);\n      loadingRef.current = false;\n    }\n  }, [userId, t, showMessage]);\n\n  useEffect(() => {\n    // Warte bis Berechtigungen geladen sind\n    if (permissionsLoading) {\n      return;\n    }\n    \n    // Prfe Berechtigung und lade nur einmal pro userId/lifecycleId\n    const hasPermission = isLegal() || isAdmin();\n    if (!hasPermission || !userId || !lifecycleId) {\n      setLoading(false);\n      return;\n    }\n\n    // Verhindere mehrfaches gleichzeitiges Laden\n    if (loadingRef.current) {\n      return;\n    }\n\n    loadRegistrations();\n\n    // Cleanup: Breche Request ab wenn Component unmountet oder Dependencies sich ndern\n    return () => {\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n      loadingRef.current = false;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userId, lifecycleId, permissionsLoading]); // permissionsLoading als Dependency hinzugefgt\n\n  const handleEdit = (type: SocialSecurityType) => {\n    const registration = registrations[type];\n    if (registration) {\n      setFormData({\n        status: registration.status,\n        registrationNumber: registration.registrationNumber || '',\n        provider: registration.provider || '',\n        registrationDate: registration.registrationDate \n          ? new Date(registration.registrationDate).toISOString().split('T')[0]\n          : '',\n        notes: registration.notes || ''\n      });\n    } else {\n      setFormData({\n        status: 'pending',\n        registrationNumber: '',\n        provider: '',\n        registrationDate: '',\n        notes: ''\n      });\n    }\n    setEditingType(type);\n  };\n\n  const handleCancel = () => {\n    setEditingType(null);\n    setFormData({\n      status: 'pending',\n      registrationNumber: '',\n      provider: '',\n      registrationDate: '',\n      notes: ''\n    });\n  };\n\n  const handleSave = async () => {\n    if (!editingType) return;\n    \n    // Prfe Berechtigung nochmal vor dem Speichern\n    if (permissionsLoading) {\n      showMessage(t('common.loading', { defaultValue: 'Berechtigungen werden geladen...' }), 'warning');\n      return;\n    }\n    \n    if (!isLegal() && !isAdmin()) {\n      showMessage(t('lifecycle.noPermission', { defaultValue: 'Keine Berechtigung - nur Legal oder Admin' }), 'error');\n      return;\n    }\n\n    setSaving(true);\n    try {\n      await axiosInstance.put(\n        API_ENDPOINTS.LIFECYCLE.SOCIAL_SECURITY(userId, editingType),\n        {\n          status: formData.status,\n          number: formData.registrationNumber || undefined,\n          provider: formData.provider || undefined,\n          registrationDate: formData.registrationDate \n            ? new Date(formData.registrationDate).toISOString()\n            : undefined,\n          notes: formData.notes || undefined\n        }\n      );\n\n      showMessage('Sozialversicherung erfolgreich aktualisiert', 'success');\n      setEditingType(null);\n      \n      // Warte kurz, damit Backend die Daten aktualisiert hat\n      await new Promise(resolve => setTimeout(resolve, 200));\n      \n      // Lade Registrierungen neu nach Update\n      await loadRegistrations();\n      \n      // onUpdate nur aufrufen, wenn es eine Funktion ist (verhindert Re-Render-Loops)\n      if (onUpdate && typeof onUpdate === 'function') {\n        // Rufe onUpdate auf, um LifecycleView zu aktualisieren\n        onUpdate();\n      }\n    } catch (error: any) {\n      console.error('Error updating social security:', error);\n      showMessage(\n        error.response?.data?.message || t('socialSecurity.updateError'),\n        'error'\n      );\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'registered':\n        return <CheckCircleIcon className=\"h-5 w-5 text-green-500\" />;\n      case 'pending':\n        return <ClockIcon className=\"h-5 w-5 text-yellow-500\" />;\n      case 'failed':\n        return <XCircleIcon className=\"h-5 w-5 text-red-500\" />;\n      case 'not_required':\n        return <CheckCircleIcon className=\"h-5 w-5 text-gray-400\" />;\n      case 'deregistered':\n        return <XCircleIcon className=\"h-5 w-5 text-gray-400\" />;\n      default:\n        return <ClockIcon className=\"h-5 w-5 text-gray-400\" />;\n    }\n  };\n\n  const getStatusLabel = (status: string) => {\n    const labelKey = `lifecycle.socialSecurityStatus.${status}`;\n    return t(labelKey) || status;\n  };\n\n  const getTypeLabel = (type: SocialSecurityType) => {\n    const labels: Record<SocialSecurityType, string> = {\n      arl: 'ARL (Risiko-Arbeit)',\n      eps: 'EPS (Gesundheit)',\n      pension: 'Pension',\n      caja: 'Caja de Compensacin'\n    };\n    return labels[type];\n  };\n\n  // Warte bis Berechtigungen geladen sind\n  if (permissionsLoading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex justify-center items-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isLegal() && !isAdmin()) {\n    return null;\n  }\n\n  if (loading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex justify-center items-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  const types: SocialSecurityType[] = ['arl', 'eps', 'pension', 'caja'];\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-lg font-semibold dark:text-white flex items-center\">\n          <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n          {t('lifecycle.socialSecurity', { defaultValue: 'Sozialversicherungen' })}\n        </h3>\n      </div>\n\n      <div className=\"space-y-4\">\n        {types.map((type) => {\n          const registration = registrations[type];\n          const isEditing = editingType === type;\n\n          return (\n            <div\n              key={type}\n              className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\"\n            >\n              {!isEditing ? (\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex items-start space-x-3 flex-1\">\n                    {getStatusIcon(registration?.status || 'pending')}\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-2 mb-2\">\n                        <h4 className=\"font-medium dark:text-white uppercase\">\n                          {getTypeLabel(type)}\n                        </h4>\n                        <span className=\"text-sm font-medium dark:text-white\">\n                          {getStatusLabel(registration?.status || 'pending')}\n                        </span>\n                      </div>\n                      {registration && (\n                        <div className=\"space-y-1 text-sm text-gray-600 dark:text-gray-400\">\n                          {registration.provider && (\n                            <div>\n                              <span className=\"font-medium\">{t('socialSecurity.provider')}:</span> {registration.provider}\n                            </div>\n                          )}\n                          {registration.registrationNumber && (\n                            <div>\n                              <span className=\"font-medium\">{t('socialSecurity.number')}:</span> {registration.registrationNumber}\n                            </div>\n                          )}\n                          {registration.registrationDate && (\n                            <div>\n                              <span className=\"font-medium\">{t('socialSecurity.registrationDate')}:</span>{' '}\n                              {new Date(registration.registrationDate).toLocaleDateString('de-DE')}\n                            </div>\n                          )}\n                          {registration.notes && (\n                            <div className=\"mt-2\">\n                              <span className=\"font-medium\">{t('socialSecurity.notes')}:</span>\n                              <p className=\"text-gray-500 dark:text-gray-400 mt-1\">\n                                {registration.notes}\n                              </p>\n                            </div>\n                          )}\n                          {registration.completedAt && (\n                            <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n                              {t('socialSecurity.completedAt')}{' '}\n                              {new Date(registration.completedAt).toLocaleDateString('de-DE')}\n                            </div>\n                          )}\n                        </div>\n                      )}\n                      {!registration && (\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                          {t('socialSecurity.notRegistered')}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                  <button\n                    onClick={() => handleEdit(type)}\n                    className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition ml-4\"\n                    title={t('lifecycle.edit', { defaultValue: 'Bearbeiten' })}\n                  >\n                    <PencilIcon className=\"h-5 w-5\" />\n                  </button>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  <h4 className=\"font-medium dark:text-white uppercase mb-3\">\n                    {t('socialSecurity.editType', { type: getTypeLabel(type) })}\n                  </h4>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      {t('socialSecurity.status')} <span className=\"text-red-500\">*</span>\n                    </label>\n                    <select\n                      value={formData.status}\n                      onChange={(e) => setFormData({ ...formData, status: e.target.value })}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    >\n                      <option value=\"not_required\">Nicht erforderlich</option>\n                      <option value=\"pending\">Ausstehend</option>\n                      <option value=\"registered\">Registriert</option>\n                      <option value=\"failed\">Fehlgeschlagen</option>\n                      <option value=\"deregistered\">Abgemeldet</option>\n                    </select>\n                  </div>\n\n                  {formData.status === 'registered' && (\n                    <>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('socialSecurity.registrationNumber')}\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={formData.registrationNumber}\n                          onChange={(e) => setFormData({ ...formData, registrationNumber: e.target.value })}\n                          className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                          placeholder=\"z.B. 123456789\"\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('socialSecurity.provider')}\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={formData.provider}\n                          onChange={(e) => setFormData({ ...formData, provider: e.target.value })}\n                          className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                          placeholder=\"z.B. ARL Sura, EPS Sanitas\"\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('socialSecurity.registrationDate')}\n                        </label>\n                        <input\n                          type=\"date\"\n                          value={formData.registrationDate}\n                          onChange={(e) => setFormData({ ...formData, registrationDate: e.target.value })}\n                          className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                        />\n                      </div>\n                    </>\n                  )}\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      {t('socialSecurity.notes')}\n                    </label>\n                    <textarea\n                      value={formData.notes}\n                      onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                      rows={3}\n                      placeholder={t('socialSecurity.additionalInfo')}\n                    />\n                  </div>\n\n                  <div className=\"flex items-center justify-end space-x-3\">\n                    <button\n                      onClick={handleCancel}\n                      disabled={saving}\n                      className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed\"\n                      title={t('common.cancel')}\n                    >\n                      <XMarkIcon className=\"h-5 w-5\" />\n                    </button>\n                    <button\n                      onClick={handleSave}\n                      disabled={saving}\n                      className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                      title={saving ? t('common.saving') : t('common.save')}\n                    >\n                      {saving ? (\n                        <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                      ) : (\n                        <CheckCircleIcon className=\"h-5 w-5\" />\n                      )}\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default SocialSecurityEditor;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, ExclamationTriangleIcon, CalendarIcon, ArrowPathIcon, ArrowRightIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface OffboardingStartModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onOffboardingStarted: () => void;\n  userId: number;\n  userName: string;\n}\n\nconst OffboardingStartModal: React.FC<OffboardingStartModalProps> = ({\n  isOpen,\n  onClose,\n  onOffboardingStarted,\n  userId,\n  userName\n}) => {\n  const { t } = useTranslation();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  \n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Form-Daten\n  const [exitDate, setExitDate] = useState('');\n  const [exitReason, setExitReason] = useState('');\n  \n  // Validierung\n  const [validationErrors, setValidationErrors] = useState<{\n    exitDate?: string;\n    exitReason?: string;\n  }>({});\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n      // Setze Standard-Datum auf heute\n      const today = new Date().toISOString().split('T')[0];\n      setExitDate(today);\n      setExitReason('');\n      setError(null);\n      setValidationErrors({});\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  const validateForm = (): boolean => {\n    const errors: { exitDate?: string; exitReason?: string } = {};\n\n    // Validierung: exitDate\n    if (!exitDate) {\n      errors.exitDate = t('lifecycle.offboarding.exitDateRequired', { defaultValue: 'Austrittsdatum ist erforderlich' });\n    } else {\n      const selectedDate = new Date(exitDate);\n      const today = new Date();\n      today.setHours(0, 0, 0, 0);\n      \n      // exitDate darf in der Vergangenheit liegen (rckwirkende Erfassung erlaubt)\n      // Aber nicht zu weit in der Zukunft (max. 1 Jahr)\n      const maxDate = new Date();\n      maxDate.setFullYear(maxDate.getFullYear() + 1);\n      \n      if (selectedDate > maxDate) {\n        errors.exitDate = t('lifecycle.offboarding.exitDateTooFar', { defaultValue: 'Austrittsdatum darf nicht mehr als 1 Jahr in der Zukunft liegen' });\n      }\n    }\n\n    // Validierung: exitReason\n    if (!exitReason || exitReason.trim().length === 0) {\n      errors.exitReason = t('lifecycle.offboarding.exitReasonRequired', { defaultValue: 'Austrittsgrund ist erforderlich' });\n    } else if (exitReason.trim().length < 10) {\n      errors.exitReason = t('lifecycle.offboarding.exitReasonTooShort', { defaultValue: 'Austrittsgrund muss mindestens 10 Zeichen lang sein' });\n    }\n\n    setValidationErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      await axiosInstance.put(API_ENDPOINTS.LIFECYCLE.STATUS(userId), {\n        status: 'offboarding',\n        exitDate: exitDate,\n        exitReason: exitReason.trim()\n      });\n\n      showMessage(\n        t('lifecycle.offboarding.started', { defaultValue: 'Offboarding erfolgreich gestartet' }),\n        'success'\n      );\n      \n      onOffboardingStarted();\n      onClose();\n    } catch (err: any) {\n      console.error('Fehler beim Starten des Offboarding:', err);\n      const errorMessage = err.response?.data?.message || \n        t('lifecycle.offboarding.startError', { defaultValue: 'Fehler beim Starten des Offboarding' });\n      setError(errorMessage);\n      showMessage(errorMessage, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderForm = () => (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      {/* Warnung */}\n      <div className=\"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4\">\n        <div className=\"flex items-start\">\n          <ExclamationTriangleIcon className=\"h-5 w-5 text-orange-600 dark:text-orange-400 mt-0.5 mr-3 flex-shrink-0\" />\n          <div className=\"text-sm text-orange-800 dark:text-orange-200\">\n            <p className=\"font-medium mb-1\">\n              {t('lifecycle.offboarding.warningTitle', { defaultValue: 'Wichtiger Hinweis' })}\n            </p>\n            <p>\n              {t('lifecycle.offboarding.warningText', { defaultValue: 'Durch das Starten des Offboarding-Prozesses werden automatisch Tasks erstellt. Dieser Vorgang kann nicht rckgngig gemacht werden.' })}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* User-Info */}\n      <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4\">\n        <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">\n          {t('lifecycle.offboarding.user', { defaultValue: 'Mitarbeiter' })}\n        </p>\n        <p className=\"font-medium dark:text-white\">{userName}</p>\n      </div>\n\n      {/* exitDate */}\n      <div>\n        <label htmlFor=\"exitDate\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n          {t('lifecycle.offboarding.exitDate', { defaultValue: 'Austrittsdatum' })} *\n        </label>\n        <div className=\"relative\">\n          <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n            <CalendarIcon className=\"h-5 w-5 text-gray-400\" />\n          </div>\n          <input\n            type=\"date\"\n            id=\"exitDate\"\n            value={exitDate}\n            onChange={(e) => {\n              setExitDate(e.target.value);\n              if (validationErrors.exitDate) {\n                setValidationErrors(prev => ({ ...prev, exitDate: undefined }));\n              }\n            }}\n            className={`block w-full pl-10 pr-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n              validationErrors.exitDate\n                ? 'border-red-300 dark:border-red-600 focus:ring-red-500 focus:border-red-500'\n                : 'border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500'\n            }`}\n            required\n          />\n        </div>\n        {validationErrors.exitDate && (\n          <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{validationErrors.exitDate}</p>\n        )}\n        <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n          {t('lifecycle.offboarding.exitDateHint', { defaultValue: 'Das Datum, an dem der Mitarbeiter die Organisation verlsst' })}\n        </p>\n      </div>\n\n      {/* exitReason */}\n      <div>\n        <label htmlFor=\"exitReason\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n          {t('lifecycle.offboarding.exitReason', { defaultValue: 'Austrittsgrund' })} *\n        </label>\n        <textarea\n          id=\"exitReason\"\n          value={exitReason}\n          onChange={(e) => {\n            setExitReason(e.target.value);\n            if (validationErrors.exitReason) {\n              setValidationErrors(prev => ({ ...prev, exitReason: undefined }));\n            }\n          }}\n          rows={4}\n          className={`block w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n            validationErrors.exitReason\n              ? 'border-red-300 dark:border-red-600 focus:ring-red-500 focus:border-red-500'\n              : 'border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500'\n          }`}\n          placeholder={t('lifecycle.offboarding.exitReasonPlaceholder', { defaultValue: 'z.B. Kndigung, Vertragsende, etc.' })}\n          required\n        />\n        {validationErrors.exitReason && (\n          <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{validationErrors.exitReason}</p>\n        )}\n        <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n          {t('lifecycle.offboarding.exitReasonHint', { defaultValue: 'Mindestens 10 Zeichen. Beschreiben Sie den Grund fr den Austritt.' })}\n        </p>\n      </div>\n\n      {/* Error-Message */}\n      {error && (\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3\">\n          <p className=\"text-sm text-red-800 dark:text-red-200\">{error}</p>\n        </div>\n      )}\n\n      {/* Buttons */}\n      <div className=\"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n        <button\n          type=\"button\"\n          onClick={onClose}\n          disabled={loading}\n          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed\"\n          title={t('common.cancel', { defaultValue: 'Abbrechen' })}\n        >\n          <XMarkIcon className=\"h-5 w-5\" />\n        </button>\n        <button\n          type=\"submit\"\n          disabled={loading}\n          className=\"p-2 bg-orange-600 dark:bg-orange-700 text-white rounded-md hover:bg-orange-700 dark:hover:bg-orange-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n          title={loading ? t('common.saving', { defaultValue: 'Speichern...' }) : t('lifecycle.offboarding.startButton', { defaultValue: 'Offboarding starten' })}\n        >\n          {loading ? (\n            <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n          ) : (\n            <ArrowRightIcon className=\"h-5 w-5\" />\n          )}\n        </button>\n      </div>\n    </form>\n  );\n\n  if (!isOpen) return null;\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('lifecycle.offboarding.startTitle', { defaultValue: 'Offboarding starten' })}\n              </Dialog.Title>\n              <button\n                onClick={onClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <div className=\"p-4\">\n              {renderForm()}\n            </div>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={onClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('lifecycle.offboarding.startTitle', { defaultValue: 'Offboarding starten' })}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {renderForm()}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default OffboardingStartModal;\n\n","import React, { useState, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Dialog } from '@headlessui/react';\r\nimport { XMarkIcon, ExclamationTriangleIcon, CheckCircleIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\r\nimport axiosInstance from '../config/axios.ts';\r\nimport { API_ENDPOINTS } from '../config/api.ts';\r\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\r\nimport useMessage from '../hooks/useMessage.ts';\r\n\r\ninterface Task {\r\n  id: number;\r\n  title: string;\r\n  description: string | null;\r\n  status: string;\r\n  dueDate: string | null;\r\n  createdAt: string;\r\n}\r\n\r\ninterface OffboardingCompleteModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onOffboardingCompleted: () => void;\r\n  userId: number;\r\n  userName: string;\r\n  offboardingTasks: Task[];\r\n}\r\n\r\nconst OffboardingCompleteModal: React.FC<OffboardingCompleteModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onOffboardingCompleted,\r\n  userId,\r\n  userName,\r\n  offboardingTasks\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const { openSidepane, closeSidepane } = useSidepane();\r\n  const { showMessage } = useMessage();\r\n  \r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\r\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [confirmText, setConfirmText] = useState('');\r\n  \r\n  // Prfe, ob alle Tasks abgeschlossen sind\r\n  const completedTasks = offboardingTasks.filter(task => task.status === 'done');\r\n  const allTasksCompleted = offboardingTasks.length > 0 && completedTasks.length === offboardingTasks.length;\r\n  const requiredConfirmText = userName.trim().toLowerCase();\r\n  \r\n  // Responsive Erkennung\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setIsMobile(window.innerWidth < 640);\r\n      setIsLargeScreen(window.innerWidth > 1070);\r\n    };\r\n    \r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n  \r\n  // Sidepane-Status verwalten\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      openSidepane();\r\n      // Reset form on open\r\n      setConfirmText('');\r\n      setError(null);\r\n    } else {\r\n      closeSidepane();\r\n    }\r\n    \r\n    return () => {\r\n      closeSidepane();\r\n    };\r\n  }, [isOpen, openSidepane, closeSidepane]);\r\n  \r\n  const validateForm = () => {\r\n    if (confirmText.trim().toLowerCase() !== requiredConfirmText) {\r\n      setError(t('lifecycle.offboarding.complete.confirmTextMismatch', { defaultValue: 'Besttigungstext stimmt nicht berein' }));\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n  \r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      await axiosInstance.put(API_ENDPOINTS.LIFECYCLE.STATUS(userId), {\r\n        status: 'archived'\r\n      });\r\n      \r\n      showMessage(\r\n        t('lifecycle.offboarding.complete.success', { defaultValue: 'Offboarding erfolgreich abgeschlossen' }),\r\n        'success'\r\n      );\r\n      \r\n      onOffboardingCompleted();\r\n      onClose();\r\n    } catch (err: any) {\r\n      console.error('Fehler beim Abschlieen des Offboarding:', err);\r\n      const errorMessage = err.response?.data?.message || \r\n        t('lifecycle.offboarding.complete.error', { defaultValue: 'Fehler beim Abschlieen des Offboarding' });\r\n      setError(errorMessage);\r\n      showMessage(errorMessage, 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  const renderForm = () => (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      {/* User Info */}\r\n      <div className=\"bg-gray-50 dark:bg-gray-700 p-3 rounded-md flex items-center space-x-3\">\r\n        <CheckCircleIcon className=\"h-5 w-5 text-gray-500 dark:text-gray-400\" />\r\n        <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n          {t('lifecycle.offboarding.complete.user', { defaultValue: 'Mitarbeiter' })}: {userName}\r\n        </span>\r\n      </div>\r\n      \r\n      {/* Tasks Status */}\r\n      {offboardingTasks.length > 0 && (\r\n        <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-md\">\r\n          <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            {t('lifecycle.offboarding.complete.tasksStatus', { defaultValue: 'Status der Offboarding-Aufgaben' })}\r\n          </h4>\r\n          <div className=\"space-y-2\">\r\n            {offboardingTasks.map((task) => {\r\n                  const isCompleted = task.status === 'done';\r\n              return (\r\n                <div\r\n                  key={task.id}\r\n                  className={`flex items-center space-x-2 text-sm ${\r\n                    isCompleted\r\n                      ? 'text-green-700 dark:text-green-300'\r\n                      : 'text-orange-700 dark:text-orange-300'\r\n                  }`}\r\n                >\r\n                  {isCompleted ? (\r\n                    <CheckCircleIcon className=\"h-4 w-4 flex-shrink-0\" />\r\n                  ) : (\r\n                    <ExclamationTriangleIcon className=\"h-4 w-4 flex-shrink-0\" />\r\n                  )}\r\n                  <span>{task.title}</span>\r\n                  <span className=\"ml-auto text-xs\">\r\n                    {isCompleted\r\n                      ? `(${t('common.done', { defaultValue: 'Abgeschlossen' })})`\r\n                      : `(${t('common.open', { defaultValue: 'Offen' })})`}\r\n                  </span>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Warning wenn nicht alle Tasks abgeschlossen */}\r\n      {!allTasksCompleted && offboardingTasks.length > 0 && (\r\n        <div className=\"bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-400 p-4\">\r\n          <div className=\"flex\">\r\n            <div className=\"flex-shrink-0\">\r\n              <ExclamationTriangleIcon className=\"h-5 w-5 text-orange-400\" aria-hidden=\"true\" />\r\n            </div>\r\n            <div className=\"ml-3\">\r\n              <h3 className=\"text-sm font-medium text-orange-800 dark:text-orange-300\">\r\n                {t('lifecycle.offboarding.complete.warningTitle', { defaultValue: 'Nicht alle Aufgaben abgeschlossen' })}\r\n              </h3>\r\n              <div className=\"mt-2 text-sm text-orange-700 dark:text-orange-200\">\r\n                <p>\r\n                  {t('lifecycle.offboarding.complete.warningText', { \r\n                    defaultValue: 'Es sind noch nicht alle Offboarding-Aufgaben abgeschlossen. Sie knnen das Offboarding trotzdem abschlieen, aber es wird empfohlen, alle Aufgaben zuerst zu erledigen.'\r\n                  })}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Info wenn alle Tasks abgeschlossen */}\r\n      {allTasksCompleted && (\r\n        <div className=\"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-400 p-4\">\r\n          <div className=\"flex\">\r\n            <div className=\"flex-shrink-0\">\r\n              <CheckCircleIcon className=\"h-5 w-5 text-green-400\" aria-hidden=\"true\" />\r\n            </div>\r\n            <div className=\"ml-3\">\r\n              <h3 className=\"text-sm font-medium text-green-800 dark:text-green-300\">\r\n                {t('lifecycle.offboarding.complete.allTasksCompleted', { defaultValue: 'Alle Aufgaben abgeschlossen' })}\r\n              </h3>\r\n              <div className=\"mt-2 text-sm text-green-700 dark:text-green-200\">\r\n                <p>\r\n                  {t('lifecycle.offboarding.complete.allTasksCompletedText', { \r\n                    defaultValue: 'Alle Offboarding-Aufgaben sind abgeschlossen. Sie knnen das Offboarding jetzt abschlieen.'\r\n                  })}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Confirm Text Input */}\r\n      <div>\r\n        <label htmlFor=\"confirmText\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n          {t('lifecycle.offboarding.complete.confirmLabel', { userName }) || \r\n            `Besttigen Sie durch Eingabe des Namens: \"${userName}\"`} *\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"confirmText\"\r\n          value={confirmText}\r\n          onChange={(e) => {\r\n            setConfirmText(e.target.value);\r\n            setError(null);\r\n          }}\r\n          className={`w-full px-3 py-2 border ${\r\n            error && error.includes('Besttigung') ? 'border-red-500' : 'border-gray-300'\r\n          } dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500`}\r\n          placeholder={userName}\r\n          required\r\n        />\r\n        <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\r\n          {t('lifecycle.offboarding.complete.confirmHint', { \r\n            defaultValue: 'Geben Sie den vollstndigen Namen des Mitarbeiters ein, um das Offboarding abzuschlieen'\r\n          })}\r\n        </p>\r\n      </div>\r\n      \r\n      {/* Final Warning */}\r\n      <div className=\"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\r\n        <div className=\"flex\">\r\n          <div className=\"flex-shrink-0\">\r\n            <ExclamationTriangleIcon className=\"h-5 w-5 text-red-400\" aria-hidden=\"true\" />\r\n          </div>\r\n          <div className=\"ml-3\">\r\n            <h3 className=\"text-sm font-medium text-red-800 dark:text-red-300\">\r\n              {t('lifecycle.offboarding.complete.finalWarningTitle', { defaultValue: 'Wichtiger Hinweis' })}\r\n            </h3>\r\n            <div className=\"mt-2 text-sm text-red-700 dark:text-red-200\">\r\n              <p>\r\n                {t('lifecycle.offboarding.complete.finalWarningText', { \r\n                  defaultValue: 'Durch das Abschlieen des Offboarding wird der Mitarbeiter archiviert. Dieser Vorgang kann nicht rckgngig gemacht werden.'\r\n                })}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Submit Button */}\r\n      <div className=\"flex justify-end space-x-3\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={onClose}\r\n          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          disabled={loading}\r\n          title={t('common.cancel', { defaultValue: 'Abbrechen' })}\r\n        >\r\n          <XMarkIcon className=\"h-5 w-5\" />\r\n        </button>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"p-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          disabled={loading || confirmText.trim().toLowerCase() !== requiredConfirmText}\r\n          title={loading ? t('common.saving', { defaultValue: 'Speichern...' }) : t('lifecycle.offboarding.complete.button', { defaultValue: 'Offboarding abschlieen' })}\r\n        >\r\n          {loading ? (\r\n            <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n          ) : (\r\n            <CheckCircleIcon className=\"h-5 w-5\" />\r\n          )}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n  \r\n  if (!isOpen) return null;\r\n  \r\n  // Fr Mobile (unter 640px) - klassisches Modal\r\n  if (isMobile) {\r\n    return (\r\n      <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\r\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\r\n        \r\n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n          <Dialog.Panel className=\"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\r\n            {/* Header */}\r\n            <div className=\"px-6 py-4 border-b dark:border-gray-700\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\r\n                  {t('lifecycle.offboarding.complete.title', { defaultValue: 'Offboarding abschlieen' })}\r\n                </Dialog.Title>\r\n                <button\r\n                  onClick={onClose}\r\n                  className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n                >\r\n                  <XMarkIcon className=\"h-6 w-6\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Form */}\r\n            <div className=\"p-6\">\r\n              {error && (\r\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\r\n                  {error}\r\n                </div>\r\n              )}\r\n              {renderForm()}\r\n            </div>\r\n          </Dialog.Panel>\r\n        </div>\r\n      </Dialog>\r\n    );\r\n  }\r\n  \r\n  // Fr Desktop (ab 640px) - Sidepane\r\n  return (\r\n    <>\r\n      {/* Backdrop - nur wenn offen und <= 1070px */}\r\n      {isOpen && !isLargeScreen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\"\r\n          aria-hidden=\"true\"\r\n          onClick={onClose}\r\n          style={{\r\n            opacity: isOpen ? 1 : 0,\r\n            transition: 'opacity 300ms ease-out'\r\n          }}\r\n        />\r\n      )}\r\n      \r\n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\r\n      <div\r\n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${\r\n          isOpen ? 'translate-x-0' : 'translate-x-full'\r\n        }`}\r\n        style={{\r\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\r\n          pointerEvents: isOpen ? 'auto' : 'none'\r\n        }}\r\n        aria-hidden={!isOpen}\r\n        role=\"dialog\"\r\n        aria-modal={isOpen}\r\n      >\r\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\r\n          <h2 className=\"text-lg font-semibold dark:text-white\">\r\n            {t('lifecycle.offboarding.complete.title', { defaultValue: 'Offboarding abschlieen' })}\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n          >\r\n            <XMarkIcon className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\r\n          {error && (\r\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\r\n              {error}\r\n            </div>\r\n          )}\r\n          {renderForm()}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OffboardingCompleteModal;\r\n\r\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { \n  CheckCircleIcon, \n  ClockIcon, \n  XCircleIcon,\n  DocumentTextIcon,\n  BuildingOfficeIcon,\n  PlusIcon,\n  PencilIcon,\n  ArrowDownTrayIcon,\n  CalendarIcon,\n  UserIcon,\n  ArrowRightIcon\n} from '@heroicons/react/24/outline';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport useMessage from '../hooks/useMessage.ts';\nimport CertificateCreationModal from './CertificateCreationModal.tsx';\nimport ContractCreationModal from './ContractCreationModal.tsx';\nimport CertificateEditModal from './CertificateEditModal.tsx';\nimport ContractEditModal from './ContractEditModal.tsx';\nimport SocialSecurityEditor from './SocialSecurityEditor.tsx';\nimport OffboardingStartModal from './OffboardingStartModal.tsx';\nimport OffboardingCompleteModal from './OffboardingCompleteModal.tsx';\n\ninterface LifecycleViewProps {\n  userId: number;\n  userName: string;\n}\n\ninterface LifecycleData {\n  lifecycle: {\n    id: number;\n    status: string;\n    onboardingStartedAt: string | null;\n    onboardingCompletedAt: string | null;\n    contractStartDate: string | null;\n    contractEndDate: string | null;\n    exitDate: string | null;\n    exitReason: string | null;\n    offboardingStartedAt: string | null;\n    offboardingCompletedAt: string | null;\n  };\n  progress: {\n    completed: number;\n    total: number;\n    percent: number;\n  };\n  socialSecurityRegistrations?: Array<{\n    id: number;\n    registrationType: string;\n    status: string;\n    registrationNumber: string | null;\n    provider: string | null;\n    registrationDate: string | null;\n  }>;\n}\n\ninterface Task {\n  id: number;\n  title: string;\n  description: string | null;\n  status: string;\n  dueDate: string | null;\n  createdAt: string;\n}\n\ninterface Certificate {\n  id: number;\n  certificateType: string;\n  issueDate: string;\n  templateUsed: string | null;\n  templateVersion: string | null;\n  isLatest: boolean;\n  generatedBy: number | null;\n  generatedByUser: {\n    id: number;\n    firstName: string;\n    lastName: string;\n  } | null;\n  createdAt: string;\n}\n\ninterface Contract {\n  id: number;\n  contractType: string;\n  startDate: string;\n  endDate: string | null;\n  salary: number | null;\n  workingHours: number | null;\n  position: string | null;\n  templateUsed: string | null;\n  templateVersion: string | null;\n  isLatest: boolean;\n  generatedBy: number | null;\n  generatedByUser: {\n    id: number;\n    firstName: string;\n    lastName: string;\n  } | null;\n  createdAt: string;\n}\n\nconst LifecycleView: React.FC<LifecycleViewProps> = ({ userId, userName }) => {\n  const { t } = useTranslation();\n  const { isHR, isAdmin } = usePermissions();\n  const { showMessage } = useMessage();\n  \n  const [lifecycleData, setLifecycleData] = useState<LifecycleData | null>(null);\n  const [certificates, setCertificates] = useState<Certificate[]>([]);\n  const [contracts, setContracts] = useState<Contract[]>([]);\n  const [offboardingTasks, setOffboardingTasks] = useState<Task[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Modal States\n  const [isCertificateCreateModalOpen, setIsCertificateCreateModalOpen] = useState(false);\n  const [isContractCreateModalOpen, setIsContractCreateModalOpen] = useState(false);\n  const [editingCertificate, setEditingCertificate] = useState<Certificate | null>(null);\n  const [editingContract, setEditingContract] = useState<Contract | null>(null);\n  \n  const [downloadingCertId, setDownloadingCertId] = useState<number | null>(null);\n  const [downloadingContractId, setDownloadingContractId] = useState<number | null>(null);\n  const [isOffboardingStartModalOpen, setIsOffboardingStartModalOpen] = useState(false);\n  const [isOffboardingCompleteModalOpen, setIsOffboardingCompleteModalOpen] = useState(false);\n  const [isEditContractDatesModalOpen, setIsEditContractDatesModalOpen] = useState(false);\n  const [editingContractStartDate, setEditingContractStartDate] = useState<string>('');\n  const [editingContractEndDate, setEditingContractEndDate] = useState<string>('');\n\n  const fetchDataRef = useRef(false);\n\n  const fetchData = useCallback(async (force: boolean = false) => {\n    // Verhindere mehrfaches gleichzeitiges Laden (auer wenn force=true)\n    if (fetchDataRef.current && !force) {\n      // Wenn bereits geladen wird, warte kurz und versuche es erneut\n      setTimeout(() => {\n        if (!fetchDataRef.current) {\n          fetchData(true);\n        }\n      }, 500);\n      return;\n    }\n    \n    try {\n      fetchDataRef.current = true;\n      setLoading(true);\n      const [lifecycleResponse, certsResponse, contractsResponse, tasksResponse] = await Promise.all([\n        axiosInstance.get(API_ENDPOINTS.LIFECYCLE.BY_USER(userId)),\n        axiosInstance.get(API_ENDPOINTS.LIFECYCLE.CERTIFICATES(userId)),\n        axiosInstance.get(API_ENDPOINTS.LIFECYCLE.CONTRACTS(userId)),\n        axiosInstance.get(API_ENDPOINTS.TASKS.BY_USER(userId)).catch(() => ({ data: [] })) // Optional, falls fehlschlgt\n      ]);\n      \n      setLifecycleData(lifecycleResponse.data);\n      setCertificates(certsResponse.data?.certificates || []);\n      setContracts(contractsResponse.data?.contracts || []);\n      \n      // Filtere Offboarding-Tasks (die 3 spezifischen Tasks)\n      const allTasks = tasksResponse.data || [];\n      const offboardingTaskTitles = [\n        'Crear certificado laboral',\n        'Realizar liquidacin final',\n        'Desafiliar de seguridad social'\n      ];\n      const filteredTasks = allTasks.filter((task: Task) => \n        offboardingTaskTitles.includes(task.title)\n      );\n      setOffboardingTasks(filteredTasks);\n      \n      // Prfe ob automatische Status-nderung ntig ist (wird im Backend gemacht, aber hier prfen wir fr UI-Feedback)\n      if (lifecycleResponse.data?.lifecycle?.status === 'onboarding' && lifecycleResponse.data?.progress?.percent === 100) {\n        // Status wird automatisch im Backend gendert, lade Daten nach kurzer Verzgerung neu\n        setTimeout(() => {\n          fetchData();\n        }, 1000);\n      }\n      \n      setError(null);\n    } catch (err: any) {\n      console.error('Fehler beim Laden der Lebenszyklus-Daten:', err);\n      setError(err.response?.data?.message || 'Fehler beim Laden der Daten');\n      showMessage('Fehler beim Laden der Daten', 'error');\n    } finally {\n      setLoading(false);\n      fetchDataRef.current = false;\n    }\n  }, [userId]); // showMessage entfernt, da es sich ndern kann\n\n  useEffect(() => {\n    fetchDataRef.current = false; // Reset beim userId-Wechsel\n    fetchData();\n  }, [fetchData]);\n\n  const handleDownloadCertificate = async (certId: number) => {\n    setDownloadingCertId(certId);\n    try {\n      const response = await axiosInstance.get(\n        API_ENDPOINTS.LIFECYCLE.CERTIFICATE_DOWNLOAD(userId, certId),\n        { responseType: 'blob' }\n      );\n      \n      const blob = new Blob([response.data], { type: 'application/pdf' });\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = `arbeitszeugnis-${certId}.pdf`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n      \n      showMessage('Arbeitszeugnis erfolgreich heruntergeladen', 'success');\n    } catch (err: any) {\n      console.error('Fehler beim Herunterladen:', err);\n      showMessage('Fehler beim Herunterladen des Arbeitszeugnisses', 'error');\n    } finally {\n      setDownloadingCertId(null);\n    }\n  };\n\n  const handleEditContractDates = () => {\n    if (!lifecycleData?.lifecycle) return;\n    \n    setEditingContractStartDate(\n      lifecycleData.lifecycle.contractStartDate \n        ? new Date(lifecycleData.lifecycle.contractStartDate).toISOString().split('T')[0]\n        : ''\n    );\n    setEditingContractEndDate(\n      lifecycleData.lifecycle.contractEndDate \n        ? new Date(lifecycleData.lifecycle.contractEndDate).toISOString().split('T')[0]\n        : ''\n    );\n    setIsEditContractDatesModalOpen(true);\n  };\n\n  const handleSaveContractDates = async () => {\n    try {\n      await axiosInstance.put(API_ENDPOINTS.LIFECYCLE.STATUS(userId), {\n        status: lifecycleData?.lifecycle.status || 'active',\n        contractStartDate: editingContractStartDate || null,\n        contractEndDate: editingContractEndDate || null\n      });\n      \n      showMessage('Vertragsdaten erfolgreich aktualisiert', 'success');\n      setIsEditContractDatesModalOpen(false);\n      fetchData();\n    } catch (err: any) {\n      console.error('Fehler beim Speichern der Vertragsdaten:', err);\n      showMessage('Fehler beim Speichern der Vertragsdaten', 'error');\n    }\n  };\n\n\n  const handleDownloadContract = async (contractId: number) => {\n    setDownloadingContractId(contractId);\n    try {\n      const response = await axiosInstance.get(\n        API_ENDPOINTS.LIFECYCLE.CONTRACT_DOWNLOAD(userId, contractId),\n        { responseType: 'blob' }\n      );\n      \n      const blob = new Blob([response.data], { type: 'application/pdf' });\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = `arbeitsvertrag-${contractId}.pdf`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n      \n      showMessage('Arbeitsvertrag erfolgreich heruntergeladen', 'success');\n    } catch (err: any) {\n      console.error('Fehler beim Herunterladen:', err);\n      showMessage('Fehler beim Herunterladen des Arbeitsvertrags', 'error');\n    } finally {\n      setDownloadingContractId(null);\n    }\n  };\n\n  const getStatusBadge = (status: string, clickable: boolean = false) => {\n    const statusConfig: Record<string, { color: string; labelKey: string }> = {\n      onboarding: { color: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300', labelKey: 'lifecycle.status.onboarding' },\n      active: { color: 'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300', labelKey: 'lifecycle.status.active' },\n      contract_change: { color: 'bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300', labelKey: 'lifecycle.status.contract_change' },\n      offboarding: { color: 'bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300', labelKey: 'lifecycle.status.offboarding' },\n      archived: { color: 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300', labelKey: 'lifecycle.status.archived' }\n    };\n\n    const config = statusConfig[status] || { color: 'bg-gray-100 text-gray-800', labelKey: status };\n    \n    return (\n      <span className={`px-3 py-1 rounded-full text-sm font-medium ${config.color} ${clickable ? 'cursor-pointer hover:opacity-80' : ''}`}>\n        {t(config.labelKey) || status}\n      </span>\n    );\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('de-DE', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex justify-center items-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\n          <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!lifecycleData) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <p className=\"text-gray-500 dark:text-gray-400\">{t('lifecycle.noData', { defaultValue: 'Keine Lebenszyklus-Daten verfgbar' })}</p>\n      </div>\n    );\n  }\n\n  // Extrahiere socialSecurityRegistrations aus lifecycle (falls direkt vorhanden) oder aus lifecycleData\n  const socialSecurityRegistrations = lifecycleData.lifecycle?.socialSecurityRegistrations || lifecycleData.socialSecurityRegistrations || [];\n  const { lifecycle, progress } = lifecycleData;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Status-Box */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold dark:text-white flex items-center\">\n            <BuildingOfficeIcon className=\"h-5 w-5 mr-2\" />\n            {t('lifecycle.statusTitle')}\n          </h3>\n          <div className=\"flex items-center space-x-3\">\n          {/* Status-Badge (nur Anzeige, keine nderung mglich) */}\n          {getStatusBadge(lifecycle.status)}\n            {/* Offboarding-Start-Button (nur fr HR/Admin, nur wenn Status = \"active\") */}\n            {(isHR() || isAdmin()) && lifecycle.status === 'active' && (\n              <div className=\"relative group\">\n                <button\n                  onClick={() => setIsOffboardingStartModalOpen(true)}\n                  className=\"p-2 bg-orange-600 dark:bg-orange-700 text-white rounded-md hover:bg-orange-700 dark:hover:bg-orange-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500\"\n                >\n                  <ArrowRightIcon className=\"h-5 w-5\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {t('lifecycle.offboarding.startButton', { defaultValue: 'Offboarding starten' })}\n                </div>\n              </div>\n            )}\n            {/* Offboarding-Abschluss-Button (nur fr HR/Admin, nur wenn Status = \"offboarding\") */}\n            {(isHR() || isAdmin()) && lifecycle.status === 'offboarding' && (\n              <div className=\"relative group\">\n                <button\n                  onClick={() => setIsOffboardingCompleteModalOpen(true)}\n                  className=\"p-2 bg-red-600 dark:bg-red-700 text-white rounded-md hover:bg-red-700 dark:hover:bg-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\n                >\n                  <CheckCircleIcon className=\"h-5 w-5\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {t('lifecycle.offboarding.complete.button', { defaultValue: 'Offboarding abschlieen' })}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"space-y-2 text-sm\">\n          {lifecycle.onboardingStartedAt && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.onboardingStarted')}</span>\n              <span className=\"dark:text-white\">\n                {new Date(lifecycle.onboardingStartedAt).toLocaleDateString('de-DE')}\n              </span>\n            </div>\n          )}\n          {lifecycle.onboardingCompletedAt && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.onboardingCompleted')}</span>\n              <span className=\"dark:text-white\">\n                {new Date(lifecycle.onboardingCompletedAt).toLocaleDateString('de-DE')}\n              </span>\n            </div>\n          )}\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.contractStart')}</span>\n            <div className=\"flex items-center space-x-2\">\n              {lifecycle.contractStartDate ? (\n                <span className=\"dark:text-white\">\n                  {new Date(lifecycle.contractStartDate).toLocaleDateString('de-DE')}\n                </span>\n              ) : (\n                <span className=\"text-gray-400 italic text-sm\">{t('lifecycle.notSet', { defaultValue: 'Nicht gesetzt' })}</span>\n              )}\n              {(isHR() || isAdmin()) && (\n                <div className=\"relative group\">\n                  <button\n                    onClick={() => handleEditContractDates()}\n                    className=\"p-1 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition\"\n                  >\n                    <PencilIcon className=\"h-4 w-4\" />\n                  </button>\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                    {t('lifecycle.edit', { defaultValue: 'Bearbeiten' })}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.contractEnd')}</span>\n            <div className=\"flex items-center space-x-2\">\n              {lifecycle.contractEndDate ? (\n                <span className=\"dark:text-white\">\n                  {new Date(lifecycle.contractEndDate).toLocaleDateString('de-DE')}\n                </span>\n              ) : (\n                <span className=\"text-gray-400 italic text-sm\">{t('lifecycle.notSet', { defaultValue: 'Nicht gesetzt' })}</span>\n              )}\n              {(isHR() || isAdmin()) && (\n                <div className=\"relative group\">\n                  <button\n                    onClick={() => handleEditContractDates()}\n                    className=\"p-1 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition\"\n                  >\n                    <PencilIcon className=\"h-4 w-4\" />\n                  </button>\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                    {t('lifecycle.edit', { defaultValue: 'Bearbeiten' })}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n          {lifecycle.offboardingStartedAt && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.offboardingStarted')}</span>\n              <span className=\"dark:text-white\">\n                {new Date(lifecycle.offboardingStartedAt).toLocaleDateString('de-DE')}\n              </span>\n            </div>\n          )}\n          {lifecycle.exitDate && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.exitDate')}</span>\n              <span className=\"dark:text-white\">\n                {new Date(lifecycle.exitDate).toLocaleDateString('de-DE')}\n              </span>\n            </div>\n          )}\n          {lifecycle.exitReason && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.exitReason')}</span>\n              <span className=\"dark:text-white\">{lifecycle.exitReason}</span>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Progress-Bar - Onboarding */}\n      {lifecycle.status === 'onboarding' && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n          <h3 className=\"text-lg font-semibold dark:text-white mb-4\">{t('lifecycle.progressTitle')}</h3>\n          <div className=\"space-y-2\">\n            <div className=\"flex justify-between text-sm mb-2\">\n              <span className=\"text-gray-600 dark:text-gray-400\">\n                {t('lifecycle.progressSteps', { completed: progress.completed, total: progress.total })}\n              </span>\n              <span className=\"font-medium dark:text-white\">{progress.percent}%</span>\n            </div>\n            <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3\">\n              <div\n                className=\"bg-blue-600 h-3 rounded-full transition-all duration-300\"\n                style={{ width: `${progress.percent}%` }}\n              ></div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Progress-Bar - Offboarding */}\n      {lifecycle.status === 'offboarding' && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n          <h3 className=\"text-lg font-semibold dark:text-white mb-4\">{t('lifecycle.offboarding.progressTitle', { defaultValue: 'Offboarding-Fortschritt' })}</h3>\n          <div className=\"space-y-4\">\n            {/* Progress-Bar */}\n            {(() => {\n              const completedTasks = offboardingTasks.filter(task => task.status === 'done').length;\n              const totalTasks = offboardingTasks.length || 3; // Fallback: 3 Tasks\n              const percent = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;\n              \n              return (\n                <>\n                  <div className=\"flex justify-between text-sm mb-2\">\n                    <span className=\"text-gray-600 dark:text-gray-400\">\n                      {t('lifecycle.offboarding.progressSteps', { completed: completedTasks, total: totalTasks }) || `${completedTasks} von ${totalTasks} Schritten abgeschlossen`}\n                    </span>\n                    <span className=\"font-medium dark:text-white\">{percent}%</span>\n                  </div>\n                  <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3\">\n                    <div\n                      className=\"bg-orange-600 h-3 rounded-full transition-all duration-300\"\n                      style={{ width: `${percent}%` }}\n                    ></div>\n                  </div>\n                </>\n              );\n            })()}\n            \n            {/* Offboarding-Tasks Liste */}\n            {offboardingTasks.length > 0 && (\n              <div className=\"mt-4 space-y-2\">\n                <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  {t('lifecycle.offboarding.tasksTitle', { defaultValue: 'Offboarding-Aufgaben' })}\n                </h4>\n                {offboardingTasks.map((task) => {\n                  const isCompleted = task.status === 'done';\n                  return (\n                    <div\n                      key={task.id}\n                      className={`flex items-center justify-between p-3 rounded-lg border ${\n                        isCompleted\n                          ? 'bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800'\n                          : 'bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600'\n                      }`}\n                    >\n                      <div className=\"flex items-center space-x-3 flex-1\">\n                        {isCompleted ? (\n                          <CheckCircleIcon className=\"h-5 w-5 text-green-600 dark:text-green-400 flex-shrink-0\" />\n                        ) : (\n                          <ClockIcon className=\"h-5 w-5 text-orange-600 dark:text-orange-400 flex-shrink-0\" />\n                        )}\n                        <div className=\"flex-1 min-w-0\">\n                          <p className={`text-sm font-medium ${isCompleted ? 'text-green-800 dark:text-green-200' : 'text-gray-800 dark:text-gray-200'}`}>\n                            {task.title}\n                          </p>\n                          {task.description && (\n                            <p className=\"text-xs text-gray-600 dark:text-gray-400 mt-1 truncate\">\n                              {task.description}\n                            </p>\n                          )}\n                        </div>\n                      </div>\n                      <span className={`text-xs px-2 py-1 rounded ${\n                        isCompleted\n                          ? 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200'\n                          : 'bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200'\n                      }`}>\n                        {isCompleted\n                          ? t('common.done', { defaultValue: 'Abgeschlossen' })\n                          : t('common.open', { defaultValue: 'Offen' })}\n                      </span>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Dokumente - Arbeitszeugnisse */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold dark:text-white flex items-center\">\n            <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n            {t('lifecycle.certificates')}\n          </h3>\n          {(isHR() || isAdmin()) && (\n            <div className=\"relative group\">\n              <button\n                onClick={() => setIsCertificateCreateModalOpen(true)}\n                className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n                style={{ width: '30.19px', height: '30.19px' }}\n                aria-label={t('lifecycle.createCertificate')}\n              >\n                <PlusIcon className=\"h-4 w-4\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('lifecycle.createCertificate')}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {certificates.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n            <DocumentTextIcon className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n            <p>{t('lifecycle.noCertificates')}</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {certificates.map((cert) => (\n              <div\n                key={cert.id}\n                className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition\"\n              >\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <h4 className=\"font-medium dark:text-white\">\n                        {t('lifecycle.certificate')}\n                        {cert.certificateType !== 'employment' && ` (${cert.certificateType})`}\n                      </h4>\n                      {cert.isLatest && (\n                        <span className=\"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 flex items-center\">\n                          <CheckCircleIcon className=\"h-3 w-3 mr-1\" />\n                          {t('lifecycle.current')}\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"space-y-1 text-sm text-gray-600 dark:text-gray-400\">\n                      <div className=\"flex items-center space-x-2\">\n                        <CalendarIcon className=\"h-4 w-4\" />\n                        <span>{t('lifecycle.issuedOn')} {formatDate(cert.issueDate)}</span>\n                      </div>\n                      {cert.generatedByUser && (\n                        <div className=\"flex items-center space-x-2\">\n                          <UserIcon className=\"h-4 w-4\" />\n                          <span>\n                            {t('lifecycle.createdBy')} {cert.generatedByUser.firstName} {cert.generatedByUser.lastName}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2 ml-4\">\n                    {(isHR() || isAdmin()) && (\n                      <div className=\"relative group\">\n                        <button\n                          onClick={() => setEditingCertificate(cert)}\n                          className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition\"\n                        >\n                          <PencilIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('lifecycle.edit')}\n                        </div>\n                      </div>\n                    )}\n                    <div className=\"relative group\">\n                      <button\n                        onClick={() => handleDownloadCertificate(cert.id)}\n                        disabled={downloadingCertId === cert.id}\n                        className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        {downloadingCertId === cert.id ? (\n                          <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600\"></div>\n                        ) : (\n                          <ArrowDownTrayIcon className=\"h-5 w-5\" />\n                        )}\n                      </button>\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                        {t('lifecycle.download')}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Dokumente - Arbeitsvertrge */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center mb-4\">\n          {(isHR() || isAdmin()) && (\n            <div className=\"relative group mr-3\">\n              <button\n                onClick={() => setIsContractCreateModalOpen(true)}\n                className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n                style={{ width: '30.19px', height: '30.19px' }}\n                aria-label={t('lifecycle.createContract')}\n              >\n                <PlusIcon className=\"h-4 w-4\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('lifecycle.createContract')}\n              </div>\n            </div>\n          )}\n          <h3 className=\"text-lg font-semibold dark:text-white flex items-center\">\n            <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n            {t('lifecycle.contracts')}\n          </h3>\n        </div>\n\n        {contracts.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n            <DocumentTextIcon className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n            <p>{t('lifecycle.noContracts')}</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {contracts.map((contract) => (\n              <div\n                key={contract.id}\n                className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition\"\n              >\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <h4 className=\"font-medium dark:text-white\">\n                        {t('lifecycle.contract')}\n                        {contract.contractType !== 'employment' && ` (${contract.contractType})`}\n                      </h4>\n                      {contract.isLatest && (\n                        <span className=\"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 flex items-center\">\n                          <CheckCircleIcon className=\"h-3 w-3 mr-1\" />\n                          {t('lifecycle.current')}\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"space-y-1 text-sm text-gray-600 dark:text-gray-400\">\n                      <div className=\"flex items-center space-x-2\">\n                        <CalendarIcon className=\"h-4 w-4\" />\n                        <span>\n                          {formatDate(contract.startDate)}\n                          {contract.endDate && ` - ${formatDate(contract.endDate)}`}\n                        </span>\n                      </div>\n                      {contract.position && (\n                        <div>{t('lifecycle.position')} {contract.position}</div>\n                      )}\n                      {contract.salary && (\n                        <div>{t('lifecycle.salary')} {contract.salary.toLocaleString('de-DE', { style: 'currency', currency: 'EUR' })}</div>\n                      )}\n                      {contract.workingHours && (\n                        <div>{t('lifecycle.workingHours')} {contract.workingHours}h/Woche</div>\n                      )}\n                      {contract.generatedByUser && (\n                        <div className=\"flex items-center space-x-2\">\n                          <UserIcon className=\"h-4 w-4\" />\n                          <span>\n                            {t('lifecycle.createdBy')} {contract.generatedByUser.firstName} {contract.generatedByUser.lastName}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2 ml-4\">\n                    {(isHR() || isAdmin()) && (\n                      <div className=\"relative group\">\n                        <button\n                          onClick={() => setEditingContract(contract)}\n                          className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition\"\n                        >\n                          <PencilIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('lifecycle.edit')}\n                        </div>\n                      </div>\n                    )}\n                    <div className=\"relative group\">\n                      <button\n                        onClick={() => handleDownloadContract(contract.id)}\n                        disabled={downloadingContractId === contract.id}\n                        className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        {downloadingContractId === contract.id ? (\n                          <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600\"></div>\n                        ) : (\n                          <ArrowDownTrayIcon className=\"h-5 w-5\" />\n                        )}\n                      </button>\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                        {t('lifecycle.download')}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Social Security Editor - Nur fr Legal/Admin */}\n      {lifecycleData?.lifecycle && (\n        <SocialSecurityEditor\n          userId={userId}\n          lifecycleId={lifecycleData.lifecycle.id}\n          onUpdate={() => fetchData(true)}\n        />\n      )}\n\n      {/* Modals */}\n      <CertificateCreationModal\n        isOpen={isCertificateCreateModalOpen}\n        onClose={() => setIsCertificateCreateModalOpen(false)}\n        onCertificateCreated={() => {\n          fetchData();\n          setIsCertificateCreateModalOpen(false);\n        }}\n        userId={userId}\n        userName={userName}\n      />\n\n      <ContractCreationModal\n        isOpen={isContractCreateModalOpen}\n        onClose={() => setIsContractCreateModalOpen(false)}\n        onContractCreated={() => {\n          fetchData();\n          setIsContractCreateModalOpen(false);\n        }}\n        userId={userId}\n        userName={userName}\n      />\n\n      {editingCertificate && (\n        <CertificateEditModal\n          isOpen={!!editingCertificate}\n          onClose={() => setEditingCertificate(null)}\n          onCertificateUpdated={() => {\n            fetchData();\n            setEditingCertificate(null);\n          }}\n          userId={userId}\n          certificate={editingCertificate}\n        />\n      )}\n\n      {editingContract && (\n        <ContractEditModal\n          isOpen={!!editingContract}\n          onClose={() => setEditingContract(null)}\n          onContractUpdated={() => {\n            fetchData();\n            setEditingContract(null);\n          }}\n          userId={userId}\n          contract={editingContract}\n        />\n      )}\n\n      {/* Offboarding-Start-Modal */}\n      <OffboardingStartModal\n        isOpen={isOffboardingStartModalOpen}\n        onClose={() => setIsOffboardingStartModalOpen(false)}\n        onOffboardingStarted={() => {\n          fetchData();\n          setIsOffboardingStartModalOpen(false);\n        }}\n        userId={userId}\n        userName={userName}\n      />\n      \n      {/* Offboarding-Abschluss-Modal */}\n      <OffboardingCompleteModal\n        isOpen={isOffboardingCompleteModalOpen}\n        onClose={() => setIsOffboardingCompleteModalOpen(false)}\n        onOffboardingCompleted={() => {\n          fetchData();\n          setIsOffboardingCompleteModalOpen(false);\n        }}\n        userId={userId}\n        userName={userName}\n        offboardingTasks={offboardingTasks}\n      />\n\n      {/* Modal zum Bearbeiten der Vertragsdaten */}\n      {isEditContractDatesModalOpen && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md mx-4\">\n            <h2 className=\"text-xl font-semibold dark:text-white mb-4\">\n              {t('lifecycle.editContractDates', { defaultValue: 'Vertragsdaten bearbeiten' })}\n            </h2>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  {t('lifecycle.contractStart', { defaultValue: 'Vertragsbeginn' })} *\n                </label>\n                <input\n                  type=\"date\"\n                  value={editingContractStartDate}\n                  onChange={(e) => setEditingContractStartDate(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  {t('lifecycle.contractEnd', { defaultValue: 'Vertragsende' })} (optional)\n                </label>\n                <input\n                  type=\"date\"\n                  value={editingContractEndDate}\n                  onChange={(e) => setEditingContractEndDate(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                />\n                <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                  {t('lifecycle.contractEndHint', { defaultValue: 'Nur bei befristeten Vertrgen ausfllen' })}\n                </p>\n              </div>\n            </div>\n            \n            <div className=\"flex justify-end space-x-3 mt-6\">\n              <button\n                onClick={() => setIsEditContractDatesModalOpen(false)}\n                className=\"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition\"\n              >\n                {t('common.cancel', { defaultValue: 'Abbrechen' })}\n              </button>\n              <button\n                onClick={handleSaveContractDates}\n                disabled={!editingContractStartDate}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {t('common.save', { defaultValue: 'Speichern' })}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LifecycleView;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { userApi, roleApi, branchApi } from '../api/apiClient.ts';\nimport { User, Role } from '../types/interfaces.ts';\nimport { CheckIcon, PlusIcon, PencilIcon, DocumentTextIcon, UserCircleIcon, ShieldCheckIcon, XMarkIcon, ArrowPathIcon, BuildingOfficeIcon, MapPinIcon } from '@heroicons/react/24/outline';\nimport useMessage from '../hooks/useMessage.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport IdentificationDocumentList from './IdentificationDocumentList.tsx';\nimport IdentificationDocumentForm from './IdentificationDocumentForm.tsx';\nimport LifecycleView from './LifecycleView.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface UserManagementTabProps {\n  onError: (error: string) => void;\n}\n\n// Lnder und Sprachen werden dynamisch aus bersetzungen geladen\n\n// Definiere Rollen, die immer vorhanden sein sollten (z.B. Admin-Rolle)\nconst fixedRoles = [1, 2, 999]; // Admin (1), User (2) und Hamburger (999) sind fixe Rollen\n\n// Vertragstypen fr Kolumbien (CO)\nconst CONTRACT_TYPES = [\n  { code: 'tiempo_completo', name: 'Tiempo Completo (>21 Tage/Monat)' },\n  { code: 'tiempo_parcial_7', name: 'Tiempo Parcial (7 Tage/Monat)' },\n  { code: 'tiempo_parcial_14', name: 'Tiempo Parcial (14 Tage/Monat)' },\n  { code: 'tiempo_parcial_21', name: 'Tiempo Parcial (21 Tage/Monat)' },\n  { code: 'prestacion_de_servicios', name: 'Prestacin de Servicios' },\n  { code: 'externo', name: 'Externo' }\n];\n\n// Gemeinsame Debug-Komponente hinzufgen\nconst RoleDebugInfo = ({ title, data }: { title: string, data: any }) => (\n  <div className=\"mb-2 p-2 border border-gray-300 rounded bg-gray-50\">\n    <h5 className=\"font-bold text-sm\">{title}</h5>\n    <pre className=\"text-xs overflow-auto max-h-24\">\n      {JSON.stringify(data, null, 2)}\n    </pre>\n  </div>\n);\n\nconst UserManagementTab = ({ onError }: UserManagementTabProps): JSX.Element => {\n  const { t } = useTranslation();\n  \n  // Lnder fr die Auswahl (dynamisch aus bersetzungen)\n  const COUNTRIES = [\n    { code: 'CO', name: t('countries.CO') },\n    { code: 'CH', name: t('countries.CH') },\n    { code: 'DE', name: t('countries.DE') },\n    { code: 'AT', name: t('countries.AT') }\n  ];\n\n  // Lnder fr die Payroll-Auswahl (dynamisch aus bersetzungen)\n  const PAYROLL_COUNTRIES = [\n    { code: 'CH', name: t('countries.CH') },\n    { code: 'CO', name: t('countries.CO') }\n  ];\n\n  // Sprachen fr die Auswahl (dynamisch aus bersetzungen)\n  const LANGUAGES = [\n    { code: 'es', name: t('languages.es') },\n    { code: 'de', name: t('languages.de') },\n    { code: 'en', name: t('languages.en') }\n  ];\n  \n  // Benutzer-States\n  const [users, setUsers] = useState<User[]>([]);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [userFormData, setUserFormData] = useState<Partial<User>>({});\n  const [isEditingUser, setIsEditingUser] = useState(false);\n  const [selectedRoles, setSelectedRoles] = useState<number[]>([]);\n  const [lifecycleRefreshKey, setLifecycleRefreshKey] = useState(0);\n  const [isDebugMode, setIsDebugMode] = useState(false);\n  const [roleWarning, setRoleWarning] = useState<string | null>(null);\n  const { showMessage } = useMessage();\n  const { isAdmin } = usePermissions();\n  \n  // Neuer State fr Rollen\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [loadingRoles, setLoadingRoles] = useState(false);\n  \n  // State fr Branches\n  const [branches, setBranches] = useState<Array<{ id: number; name: string }>>([]);\n  const [loadingBranches, setLoadingBranches] = useState(false);\n  const [selectedBranches, setSelectedBranches] = useState<number[]>([]);\n  \n  // Neuer State fr die aktive Unterseite\n  const [activeUserTab, setActiveUserTab] = useState<'details' | 'documents' | 'roles' | 'branches' | 'lifecycle'>('details');\n  \n  // State fr Active/Inactive Filter\n  const [userFilterTab, setUserFilterTab] = useState<'active' | 'inactive'>('active');\n  \n  // State fr Benutzererstellung\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n  const [isMobile, setIsMobile] = useState<boolean>(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [showDocumentUpload, setShowDocumentUpload] = useState(false);\n  const [newUserFormData, setNewUserFormData] = useState({\n    email: '',\n    password: '',\n    firstName: '',\n    lastName: ''\n  });\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isCreateModalOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isCreateModalOpen, openSidepane, closeSidepane]);\n\n  // Alle Benutzer (fr Filterung)\n  const [allUsers, setAllUsers] = useState<User[]>([]);\n\n  // Initialisierung - Laden von Benutzern\n  useEffect(() => {\n    fetchAllUsers();\n  }, []);\n\n  // Benutzerdaten laden - Verwende gefilterten Endpoint, damit nur Benutzer der eigenen Organisation angezeigt werden\n  const fetchAllUsers = async () => {\n    try {\n      const response = await userApi.getAll();\n      setAllUsers(response.data);\n      // Initial: Nur aktive Benutzer anzeigen\n      filterUsersByActiveStatus('active', response.data);\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Benutzer nach Active/Inactive filtern und alphabetisch sortieren\n  const filterUsersByActiveStatus = (status: 'active' | 'inactive', usersToFilter: User[] = allUsers) => {\n    const filtered = usersToFilter.filter(user => {\n      const isActive = user.active !== undefined ? user.active : true; // Default: true\n      return status === 'active' ? isActive : !isActive;\n    });\n    \n    // Alphabetisch sortieren nach username, dann firstName\n    const sorted = filtered.sort((a, b) => {\n      const aUsername = (a.username || '').toLowerCase();\n      const bUsername = (b.username || '').toLowerCase();\n      const aFirstName = (a.firstName || '').toLowerCase();\n      const bFirstName = (b.firstName || '').toLowerCase();\n      \n      // Zuerst nach username sortieren\n      if (aUsername !== bUsername) {\n        return aUsername.localeCompare(bUsername);\n      }\n      // Wenn username gleich, nach Vorname sortieren\n      return aFirstName.localeCompare(bFirstName);\n    });\n    \n    setUsers(sorted);\n  };\n\n  // Wenn Filter-Tab wechselt, Benutzerliste neu filtern\n  useEffect(() => {\n    if (allUsers.length > 0) {\n      filterUsersByActiveStatus(userFilterTab, allUsers);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userFilterTab]);\n  \n  // Rollen laden - Wird erst aufgerufen, wenn ein Benutzer ausgewhlt wurde\n  const fetchRoles = async () => {\n    try {\n      setLoadingRoles(true);\n      \n      // Fallback-Rollen fr den Notfall bereithalten\n      const fallbackRoles = [\n        { id: 1, name: 'admin', description: 'Administrator mit allen Rechten', permissions: [] },\n        { id: 2, name: 'user', description: 'Standardbenutzer', permissions: [] },\n        { id: 999, name: 'hamburger', description: 'Hamburger-Rolle fr neue Benutzer', permissions: [] }\n      ];\n      \n      try {\n        const response = await roleApi.getAll();\n        if (response.data && Array.isArray(response.data) && response.data.length > 0) {\n          setRoles(response.data);\n          console.log(`${response.data.length} Rollen erfolgreich geladen`);\n        } else {\n          console.warn('Keine Rollen vom Server erhalten, verwende Fallback');\n          setRoles(fallbackRoles);\n        }\n      } catch (error) {\n        console.warn('Fehler beim Laden der Rollen, verwende Fallback:', error);\n        setRoles(fallbackRoles);\n      }\n    } finally {\n      setLoadingRoles(false);\n    }\n  };\n\n  // Branches laden - Wird erst aufgerufen, wenn ein Benutzer ausgewhlt wurde\n  const fetchBranches = async () => {\n    try {\n      setLoadingBranches(true);\n      \n      try {\n        const response = await branchApi.getAll();\n        if (response.data && Array.isArray(response.data) && response.data.length > 0) {\n          setBranches(response.data);\n          console.log(`${response.data.length} Branches erfolgreich geladen`);\n        } else {\n          console.warn('Keine Branches vom Server erhalten');\n          setBranches([]);\n        }\n      } catch (error) {\n        console.warn('Fehler beim Laden der Branches:', error);\n        setBranches([]);\n      }\n    } finally {\n      setLoadingBranches(false);\n    }\n  };\n\n  // Detaillierte Benutzerdaten laden\n  const fetchUserDetails = async (userId: number) => {\n    try {\n      if (!userId || isNaN(userId)) {\n        setSelectedUser(null);\n        return;\n      }\n      \n      console.log('Lade Benutzerdetails fr ID:', userId);\n      const response = await userApi.getById(userId);\n      \n      const userData = {\n        ...response.data,\n        active: response.data.active !== undefined ? response.data.active : true,\n        birthday: response.data.birthday ? new Date(response.data.birthday).toISOString().split('T')[0] : null\n      };\n      \n      // Extrahiere Rollen-IDs aus der verschachtelten Struktur\n      let roleIds: number[] = [];\n      \n      if (response.data.roles && Array.isArray(response.data.roles)) {\n        console.log('Rollenstruktur (Typ):', typeof response.data.roles, 'Lnge:', response.data.roles.length);\n        \n        // Struktur: roles: [{ role: { id, name, ... } }]\n        if (response.data.roles.length > 0 && response.data.roles[0].role) {\n          roleIds = response.data.roles.map(userRole => userRole.role.id);\n          console.log('Extrahierte Rollen-IDs aus verschachtelter Struktur:', roleIds);\n        }\n        // Fallback fr andere Formate\n        else if (response.data.roles.length > 0) {\n          if (typeof response.data.roles[0] === 'number') {\n            roleIds = response.data.roles;\n          } else if (response.data.roles[0].roleId) {\n            roleIds = response.data.roles.map(role => role.roleId);\n          } else if (response.data.roles[0].id) {\n            roleIds = response.data.roles.map(role => role.id);\n          }\n        }\n      } else {\n        console.warn('Rollen fehlen oder sind kein Array:', response.data.roles);\n      }\n      \n      // Wenn keine Rollen gefunden wurden, probieren wir, diese aus roles in der Response direkt zu extrahieren\n      if (roleIds.length === 0 && response.data.role) {\n        console.log('Versuche Rollen aus role-Eigenschaft zu extrahieren:', response.data.role);\n        if (Array.isArray(response.data.role)) {\n          roleIds = response.data.role.map((r: any) => r.id);\n        } else if (typeof response.data.role === 'object' && response.data.role !== null) {\n          roleIds = [response.data.role.id];\n        }\n      }\n      \n      console.log('Endgltige extrahierte Rollen-IDs:', roleIds);\n      \n      // Extrahiere Branch-IDs aus der verschachtelten Struktur\n      let branchIds: number[] = [];\n      \n      if (response.data.branches && Array.isArray(response.data.branches)) {\n        console.log('Branches-Struktur (Typ):', typeof response.data.branches, 'Lnge:', response.data.branches.length);\n        \n        // Struktur: branches: [{ branch: { id, name, ... } }]\n        if (response.data.branches.length > 0 && response.data.branches[0].branch) {\n          branchIds = response.data.branches.map(userBranch => userBranch.branch.id);\n          console.log('Extrahierte Branch-IDs aus verschachtelter Struktur:', branchIds);\n        }\n        // Fallback fr andere Formate\n        else if (response.data.branches.length > 0) {\n          if (typeof response.data.branches[0] === 'number') {\n            branchIds = response.data.branches;\n          } else if (response.data.branches[0].branchId) {\n            branchIds = response.data.branches.map(branch => branch.branchId);\n          } else if (response.data.branches[0].id) {\n            branchIds = response.data.branches.map(branch => branch.id);\n          }\n        }\n      } else {\n        console.warn('Branches fehlen oder sind kein Array:', response.data.branches);\n      }\n      \n      console.log('Endgltige extrahierte Branch-IDs:', branchIds);\n      \n      setSelectedUser(userData);\n      setUserFormData(userData);\n      setSelectedRoles(roleIds);\n      setSelectedBranches(branchIds);\n      \n      // Rollen nur einmal laden, wenn sie noch nicht geladen wurden\n      if (roles.length === 0) {\n        await fetchRoles();\n      }\n      \n      // Branches nur einmal laden, wenn sie noch nicht geladen wurden\n      if (branches.length === 0) {\n        await fetchBranches();\n      }\n    } catch (err) {\n      console.error('Fehler beim Laden der Benutzerdetails:', err);\n      handleError(err);\n    }\n  };\n\n  // Fehlerbehandlung\n  const handleError = (err: any) => {\n    let message = 'Ein Fehler ist aufgetreten';\n    if (err.response?.data?.message) {\n      message = err.response.data.message;\n    } else if (err instanceof Error) {\n      message = err.message;\n    }\n    \n    // Fehler \"Ungltige Rollen-ID\" nicht weitergeben, wenn kein Benutzer ausgewhlt ist\n    if (message.includes('Ungltige Rollen-ID') && !selectedUser) {\n      console.warn('Fehler unterdrckt, da kein Benutzer ausgewhlt ist:', message);\n      return;\n    }\n    \n    onError(message);\n  };\n\n  // Handler fr Auswahl eines Benutzers\n  const handleUserSelect = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    const userId = parseInt(event.target.value, 10);\n    if (userId && !isNaN(userId)) {\n      fetchUserDetails(userId);\n    } else {\n      setSelectedUser(null);\n      setUserFormData({});\n      setSelectedRoles([]);\n    }\n  };\n\n  // Erweitere den handleUserInputChange\n  const handleUserInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value, type } = e.target;\n    let finalValue: string | number | null = value;\n    \n    // Korrekte Typenkonvertierung fr numerische Felder\n    if (type === 'number') {\n      // Wenn das Feld leer ist, setzen wir null statt NaN\n      finalValue = value === '' ? null : Number(value);\n    }\n    \n    setUserFormData({ ...userFormData, [name]: finalValue });\n    setIsEditingUser(true); // Aktiviere Edit-Modus sobald etwas gendert wird\n  };\n\n  // Abbrechen der Bearbeitung\n  const handleCancelEdit = () => {\n    if (selectedUser) {\n      setUserFormData({\n        ...selectedUser,\n        birthday: selectedUser.birthday ? new Date(selectedUser.birthday).toISOString().split('T')[0] : null\n      });\n    }\n    setIsEditingUser(false);\n  };\n\n  // Speichern der Benutzerdaten\n  const handleUserSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!selectedUser || !selectedUser.id) {\n      onError('Kein Benutzer ausgewhlt');\n      showMessage('Kein Benutzer ausgewhlt', 'error');\n      return;\n    }\n\n    try {\n      // Validierung\n      if (!userFormData.username?.trim()) throw new Error('Benutzername ist erforderlich');\n      if (!userFormData.email?.trim()) throw new Error('E-Mail ist erforderlich');\n      // firstName, lastName, birthday werden nur von KI aus Dokument gesetzt, nicht manuell validiert\n\n      // Bereite die Daten korrekt vor\n      // Contract, Salary, Normal Working Hours werden zu Lifecycle verschoben\n      // firstName, lastName, birthday werden nur von KI aus Dokument gesetzt, nicht manuell editierbar\n      const dataToSend = {\n        username: userFormData.username,\n        email: userFormData.email,\n        bankDetails: userFormData.bankDetails || null,\n        gender: userFormData.gender || null,\n        phoneNumber: userFormData.phoneNumber || null,\n        language: userFormData.language || null,\n        // Payroll-Felder bleiben (sind separate Sektion)\n        hourlyRate: userFormData.hourlyRate === null || userFormData.hourlyRate === undefined || userFormData.hourlyRate === '' as any\n          ? null \n          : typeof userFormData.hourlyRate === 'string' \n            ? userFormData.hourlyRate  // Keine Konvertierung fr Decimal-Werte, da sie als Strings bergeben werden sollten\n            : userFormData.hourlyRate.toString(),  // Konvertierung zu String fr Decimal-Werte\n        monthlySalary: userFormData.monthlySalary === null || userFormData.monthlySalary === undefined || userFormData.monthlySalary === '' as any\n          ? null \n          : typeof userFormData.monthlySalary === 'string' \n            ? parseFloat(userFormData.monthlySalary) \n            : userFormData.monthlySalary,\n        payrollCountry: userFormData.payrollCountry || null,\n        contractType: userFormData.contractType || null,\n      };\n\n      console.log('Sende Daten zum Server:', dataToSend);\n\n      // Update Benutzerdaten\n      const response = await userApi.update(selectedUser.id, dataToSend);\n\n      if (response.data) {\n        const updatedData = {\n          ...response.data,\n          birthday: response.data.birthday ? new Date(response.data.birthday).toISOString().split('T')[0] : null\n        };\n        setSelectedUser(updatedData);\n        setUserFormData({\n          ...updatedData,\n          birthday: updatedData.birthday ? new Date(updatedData.birthday).toISOString().split('T')[0] : null\n        });\n        \n        // Optimistisches Update: User in allUsers und users aktualisieren\n        setAllUsers(prevUsers => \n          prevUsers.map(user => \n            user.id === updatedData.id ? updatedData : user\n          )\n        );\n        \n        // Benutzerliste neu filtern basierend auf aktuellem Tab\n        filterUsersByActiveStatus(userFilterTab, allUsers.map(user => \n          user.id === updatedData.id ? updatedData : user\n        ));\n        \n        showMessage('Benutzerprofil erfolgreich aktualisiert', 'success');\n        setIsEditingUser(false);\n      }\n    } catch (err) {\n      console.error('Fehler beim Speichern der Benutzerdaten:', err);\n      // Bei Fehler: Rollback durch vollstndiges Reload\n      await fetchAllUsers();\n      if (err.response?.status === 400) {\n        const errorMsg = `Validierungsfehler: ${err.response?.data?.message || 'Bitte berprfe die eingegebenen Daten'}`;\n        onError(errorMsg);\n        showMessage(errorMsg, 'error');\n      } else if (err.response?.status === 404) {\n        onError('Benutzer wurde nicht gefunden');\n        showMessage('Benutzer wurde nicht gefunden', 'error');\n      } else {\n        handleError(err);\n      }\n    }\n  };\n\n  // Benutzer aktivieren/deaktivieren\n  const handleToggleActive = async () => {\n    if (!selectedUser || !selectedUser.id) {\n      showMessage('Kein Benutzer ausgewhlt', 'error');\n      return;\n    }\n\n    // Verhindere, dass der Admin-Benutzer sich selbst deaktiviert\n    const currentUserId = parseInt(localStorage.getItem('userId') || '0', 10);\n    if (selectedUser.id === currentUserId) {\n      showMessage('Du kannst dich nicht selbst deaktivieren', 'warning');\n      return;\n    }\n\n    try {\n      // Aktueller Status: wenn undefined, dann true (Default)\n      const currentActiveStatus = selectedUser.active !== undefined ? selectedUser.active : true;\n      const newActiveStatus = !currentActiveStatus;\n      \n      console.log('Toggle active:', { \n        currentActiveStatus, \n        newActiveStatus, \n        selectedUser,\n        selectedUserActive: selectedUser.active,\n        userId: selectedUser.id\n      });\n      \n      const updatePayload = { active: newActiveStatus };\n      console.log('Sending update payload:', updatePayload, 'Type of active:', typeof newActiveStatus);\n      \n      // Update Benutzer\n      const response = await userApi.update(selectedUser.id, updatePayload);\n      \n      console.log('Update response:', response.data);\n\n      if (response.data) {\n        const updatedData = {\n          ...response.data,\n          active: response.data.active !== undefined ? response.data.active : true,\n          birthday: response.data.birthday ? new Date(response.data.birthday).toISOString().split('T')[0] : null\n        };\n        \n        console.log('Updated user data:', updatedData);\n        \n        setSelectedUser(updatedData);\n        setUserFormData({\n          ...updatedData,\n          birthday: updatedData.birthday ? new Date(updatedData.birthday).toISOString().split('T')[0] : null\n        });\n        \n        // Optimistisches Update: Berechne den aktualisierten Array direkt (vor State-Update)\n        // Dies verhindert Race Conditions bei schnellen, aufeinanderfolgenden Updates\n        const updatedAllUsers = allUsers.map(user => \n          user.id === updatedData.id ? updatedData : user\n        );\n        \n        // Update State mit dem berechneten Array\n        setAllUsers(updatedAllUsers);\n        \n        // Filtere mit dem aktualisierten Array (nicht mit allUsers, da State-Update asynchron ist)\n        filterUsersByActiveStatus(userFilterTab, updatedAllUsers);\n        \n        // fetchAllUsers() entfernt - optimistisches Update reicht aus\n        // Backend speichert korrekt, State ist bereits aktualisiert\n        // Nur bei Fehler wird fetchAllUsers() aufgerufen (siehe catch-Block)\n        \n        showMessage(\n          newActiveStatus \n            ? 'Benutzer erfolgreich aktiviert' \n            : 'Benutzer erfolgreich deaktiviert',\n          'success'\n        );\n      }\n    } catch (err) {\n      console.error('Fehler beim Aktivieren/Deaktivieren des Benutzers:', err);\n      handleError(err);\n      // Bei Fehler: Benutzerliste neu laden\n      await fetchAllUsers();\n    }\n  };\n\n  // Toggle Rolle fr einen Benutzer (hinzufgen/entfernen)\n  const toggleRole = async (roleId: number) => {\n    if (!roleId || !selectedUser) return;\n    \n    // Prfe, ob es sich um eine fixe Rolle handelt - Nur fr Admin-Benutzer (ID: 1) sind Admin-Rollen (ID: 1) nicht entfernbar\n    if (roleId === 1 && selectedUser.id === 1 && selectedRoles.includes(roleId)) {\n      showMessage('Die Admin-Rolle kann vom Admin-Benutzer nicht entfernt werden', 'warning');\n      return;\n    }\n    \n    try {\n      console.log('Toggle Rolle:', roleId, 'fr Benutzer:', selectedUser.id);\n      console.log('Aktuelle ausgewhlte Rollen:', selectedRoles);\n      \n      // berprfen, ob die Rolle bereits zugewiesen ist\n      const isRoleSelected = selectedRoles.includes(roleId);\n      \n      const newSelectedRoles = isRoleSelected\n        ? selectedRoles.filter(id => id !== roleId)\n        : [...selectedRoles, roleId];\n      \n      console.log('Neue ausgewhlte Rollen:', newSelectedRoles);\n      \n      // Optimistisches UI-Update\n      setSelectedRoles(newSelectedRoles);\n      \n      // API-Aufruf zur Aktualisierung der Rollen\n      console.log('Sende Rollenaktualisierung an API:', { userId: selectedUser.id, roleIds: newSelectedRoles });\n      const response = await userApi.updateRoles(selectedUser.id, newSelectedRoles);\n      console.log('API-Antwort bei Rollenaktualisierung:', response.data);\n      \n      // Benutzer nach dem Update neu laden\n      await fetchUserDetails(selectedUser.id);\n      \n      // Erfolgsmeldung anzeigen mit showMessage statt setUserSuccess\n      showMessage(\n        isRoleSelected\n          ? `Rolle erfolgreich entfernt`\n          : `Rolle erfolgreich zugewiesen`,\n        'success'\n      );\n    } catch (error) {\n      // Bei Fehler auf vorherigen Zustand zurcksetzen\n      console.error('Fehler beim Aktualisieren der Rollen:', error);\n      fetchUserDetails(selectedUser.id);\n      handleError(error);\n      showMessage('Fehler beim Aktualisieren der Rollen', 'error');\n    }\n  };\n\n  // Toggle Branch fr einen Benutzer (hinzufgen/entfernen)\n  const toggleBranch = async (branchId: number) => {\n    if (!branchId || !selectedUser) return;\n    \n    try {\n      console.log('Toggle Branch:', branchId, 'fr Benutzer:', selectedUser.id);\n      console.log('Aktuelle ausgewhlte Branches:', selectedBranches);\n      \n      // berprfen, ob die Branch bereits zugewiesen ist\n      const isBranchSelected = selectedBranches.includes(branchId);\n      \n      const newSelectedBranches = isBranchSelected\n        ? selectedBranches.filter(id => id !== branchId)\n        : [...selectedBranches, branchId];\n      \n      console.log('Neue ausgewhlte Branches:', newSelectedBranches);\n      \n      // Optimistisches UI-Update\n      setSelectedBranches(newSelectedBranches);\n      \n      // API-Aufruf zur Aktualisierung der Branches\n      console.log('Sende Branch-Aktualisierung an API:', { userId: selectedUser.id, branchIds: newSelectedBranches });\n      const response = await userApi.updateBranches(selectedUser.id, newSelectedBranches);\n      console.log('API-Antwort bei Branch-Aktualisierung:', response.data);\n      \n      // Benutzer nach dem Update neu laden\n      await fetchUserDetails(selectedUser.id);\n      \n      // Erfolgsmeldung anzeigen\n      showMessage(\n        isBranchSelected\n          ? `Branch erfolgreich entfernt`\n          : `Branch erfolgreich zugewiesen`,\n        'success'\n      );\n    } catch (error) {\n      // Bei Fehler auf vorherigen Zustand zurcksetzen\n      console.error('Fehler beim Aktualisieren der Branches:', error);\n      fetchUserDetails(selectedUser.id);\n      handleError(error);\n      showMessage('Fehler beim Aktualisieren der Branches', 'error');\n    }\n  };\n\n  // Initialisiere FormData wenn Benutzer ausgewhlt wird\n  useEffect(() => {\n    if (selectedUser) {\n      setUserFormData({\n        ...selectedUser,\n        birthday: selectedUser.birthday ? new Date(selectedUser.birthday).toISOString().split('T')[0] : null\n      });\n      setIsEditingUser(false); // Starte im Read-Only Modus\n    }\n  }, [selectedUser]);\n\n  // Handler fr neue Benutzer-Formular\n  const handleNewUserInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setNewUserFormData({ ...newUserFormData, [name]: value });\n  };\n\n  // Neuen Benutzer erstellen\n  const handleCreateUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Validierung\n    if (!newUserFormData.email || !newUserFormData.password || !newUserFormData.firstName || !newUserFormData.lastName) {\n      showMessage('Bitte fllen Sie alle Felder aus', 'error');\n      return;\n    }\n\n    // E-Mail-Format validieren\n    if (!newUserFormData.email.match(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/)) {\n      showMessage('Ungltiges E-Mail-Format', 'error');\n      return;\n    }\n\n    try {\n      const response = await userApi.create(newUserFormData);\n      \n      // Optimistisches Update: User zu allUsers hinzufgen\n      if (response.data) {\n        const newUser = {\n          ...response.data,\n          active: response.data.active !== undefined ? response.data.active : true\n        };\n        setAllUsers(prevUsers => [newUser, ...prevUsers]);\n        \n        // Wenn aktueller Tab \"active\" ist und neuer User aktiv ist, auch zu users hinzufgen\n        if (userFilterTab === 'active' && newUser.active) {\n          setUsers(prevUsers => [newUser, ...prevUsers]);\n        }\n      }\n      \n      showMessage('Benutzer erfolgreich erstellt', 'success');\n      setIsCreateModalOpen(false);\n      setNewUserFormData({\n        email: '',\n        password: '',\n        firstName: '',\n        lastName: ''\n      });\n    } catch (err: any) {\n      // Bei Fehler: Rollback durch vollstndiges Reload\n      await fetchAllUsers();\n      const errorMessage = err.response?.data?.message || 'Fehler beim Erstellen des Benutzers';\n      showMessage(errorMessage, 'error');\n      onError(errorMessage);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 pb-6\">\n      {/* Die lokale Erfolgsmeldungs-Anzeige wird entfernt, da wir jetzt HeaderMessage verwenden */}\n      {/* {userSuccess && (\n        <div className=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4\">\n          {userSuccess}\n        </div>\n      )} */}\n\n      {/* Titelzeile: Button links, Dropdown rechts */}\n      <div className=\"mb-6\">\n        <div className=\"flex items-start gap-4\">\n          {/* Linke Seite: \"Neuer Benutzer\"-Button */}\n          <div className=\"flex items-center pt-8\">\n            {isAdmin() && (\n              <div className=\"relative group\">\n                <button\n                  onClick={() => setIsCreateModalOpen(true)}\n                  className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                  style={{ width: '30.19px', height: '30.19px' }}\n                  aria-label={t('users.create')}\n                >\n                  <PlusIcon className=\"h-4 w-4\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {t('users.create')}\n                </div>\n              </div>\n            )}\n          </div>\n          \n          {/* Rechts: Benutzer-Dropdown mit Active/Inactive Tabs */}\n          <div className=\"flex-1\">\n            {/* Active/Inactive Tabs */}\n            <div className=\"flex gap-2 mb-2\">\n              <button\n                type=\"button\"\n                onClick={() => setUserFilterTab('active')}\n                className={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${\n                  userFilterTab === 'active'\n                    ? 'bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400'\n                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600'\n                }`}\n              >\n                {t('users.active')}\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setUserFilterTab('inactive')}\n                className={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${\n                  userFilterTab === 'inactive'\n                    ? 'bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400'\n                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600'\n                }`}\n              >\n                {t('users.inactive')}\n              </button>\n            </div>\n            \n            <select\n              id=\"userSelect\"\n              onChange={handleUserSelect}\n              className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n            >\n              <option value=\"\">-- {t('common.select')} --</option>\n              {users.map(user => (\n                <option key={user.id} value={user.id}>\n                  {user.firstName} {user.lastName} ({user.username})\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {selectedUser && (\n        <div>\n          {/* Tabs fr Benutzerdetails, Dokumente und Rollen - zusammenhngende Box ohne Shadow/Border */}\n          <div className=\"bg-white dark:bg-gray-800 mb-6\">\n            {/* Tab-Navigation */}\n            <div className=\"border-b border-gray-200 dark:border-gray-700\">\n              <nav className=\"flex -mb-px\">\n                <button\n                  onClick={() => setActiveUserTab('details')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'details'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <UserCircleIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('users.title')}\n                </button>\n                <button\n                  onClick={() => setActiveUserTab('documents')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'documents'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <DocumentTextIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('profile.documents')}\n                </button>\n                <button\n                  onClick={() => setActiveUserTab('roles')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'roles'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <ShieldCheckIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('roles.title')}\n                </button>\n                <button\n                  onClick={() => setActiveUserTab('branches')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'branches'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <MapPinIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('branches.title') || 'Niederlassungen'}\n                </button>\n                <button\n                  onClick={() => setActiveUserTab('lifecycle')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'lifecycle'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <BuildingOfficeIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('lifecycle.tabTitle')}\n                </button>\n              </nav>\n          </div>\n\n            {/* Tab-Inhalte */}\n          {/* Benutzerdetails Formular */}\n          {activeUserTab === 'details' && (\n              <form onSubmit={handleUserSubmit} className=\"p-6\">\n              {/* Benutzerdetails - gleiche Reihenfolge wie Profile.tsx */}\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\n                {/* 1. Username, Email (nebeneinander - 2 Spalten) */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('users.form.username')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"username\"\n                    value={userFormData.username || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('users.form.email')}\n                  </label>\n                  <input\n                    type=\"email\"\n                    name=\"email\"\n                    value={userFormData.email || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                {/* 2. Language (allein - 1 Spalte) */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.language')} <span className=\"text-red-500\">*</span>\n                  </label>\n                  <select\n                    name=\"language\"\n                    value={userFormData.language || 'es'}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    required\n                  >\n                    {LANGUAGES.map((language) => (\n                      <option key={language.code} value={language.code}>\n                        {language.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                {/* 3. Dokumenten-Upload (prominent - volle Breite) */}\n                {selectedUser && (\n                  <div className=\"sm:col-span-2\">\n                    <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <h3 className=\"text-sm font-medium text-blue-900 dark:text-blue-200 mb-1\">\n                            {t('profile.identificationDocument') || 'Identifikationsdokument'}\n                          </h3>\n                          <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n                            {t('profile.uploadDocumentHint') || 'Bitte laden Sie das Identifikationsdokument (Cdula oder Pasaporte) hoch. Die Felder werden automatisch ausgefllt.'}\n                          </p>\n                        </div>\n                        {!showDocumentUpload && (\n                          <button\n                            type=\"button\"\n                            onClick={() => setShowDocumentUpload(true)}\n                            className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600\"\n                          >\n                            <DocumentTextIcon className=\"h-5 w-5 inline mr-2\" />\n                            {t('profile.uploadDocument') || 'Dokument hochladen'}\n                          </button>\n                        )}\n                      </div>\n                      {showDocumentUpload && (\n                        <div className=\"mt-4\">\n                          <IdentificationDocumentForm\n                            userId={selectedUser.id}\n                            onDocumentSaved={async () => {\n                              setShowDocumentUpload(false);\n                              await fetchUserDetails(selectedUser.id); // Aktualisiere Profil nach Upload\n                              showMessage('Dokument erfolgreich hochgeladen. Felder werden automatisch ausgefllt.', 'success');\n                            }}\n                            onCancel={() => setShowDocumentUpload(false)}\n                          />\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n\n                {/* 4. ID-Dokument-Daten (readonly, alle Felder - korrekte Reihenfolge) */}\n                {selectedUser.identificationDocuments && selectedUser.identificationDocuments.length > 0 && (\n                  <>\n                    {(() => {\n                      const latestDoc = selectedUser.identificationDocuments[0];\n                      return (\n                        <>\n                          {/* 1. Vorname */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('users.form.firstName')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={selectedUser.firstName || ''}\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 2. Nachname */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('users.form.lastName')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={selectedUser.lastName || ''}\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 3. Geburtsdatum */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('profile.birthday')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={selectedUser.birthday ? new Date(selectedUser.birthday).toISOString().split('T')[0] : ''}\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 4. Land */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('profile.country')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={selectedUser.country ? COUNTRIES.find(c => c.code === selectedUser.country)?.name || selectedUser.country : ''}\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 5. Geschlecht (editierbar, falls KI nicht richtig erkannt hat) */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('profile.gender')}\n                            </label>\n                            <select\n                              name=\"gender\"\n                              value={userFormData.gender || ''}\n                              onChange={handleUserInputChange}\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                            >\n                              <option value=\"\">{t('profile.selectGender')}</option>\n                              <option value=\"male\">{t('profile.genderMale')}</option>\n                              <option value=\"female\">{t('profile.genderFemale')}</option>\n                              <option value=\"other\">{t('profile.genderOther')}</option>\n                            </select>\n                          </div>\n\n                          {/* 6. Dokument-Typ */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('profile.identificationType')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={\n                                latestDoc.documentType\n                                  ? (() => {\n                                      const typeMap: Record<string, string> = {\n                                        passport: t('identificationDocuments.types.passport'),\n                                        national_id: t('identificationDocuments.types.national_id'),\n                                        driving_license: t('identificationDocuments.types.driving_license'),\n                                        residence_permit: t('identificationDocuments.types.residence_permit'),\n                                        work_permit: t('identificationDocuments.types.work_permit'),\n                                        tax_id: t('identificationDocuments.types.tax_id'),\n                                        social_security: t('identificationDocuments.types.social_security'),\n                                      };\n                                      return typeMap[latestDoc.documentType] || latestDoc.documentType;\n                                    })()\n                                  : ''\n                              }\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 7. Dokument-Nummer */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('profile.identificationNumber')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={selectedUser.identificationNumber || latestDoc.documentNumber || ''}\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 8. Ausstellungsdatum */}\n                          {latestDoc.issueDate && (\n                            <div>\n                              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('profile.identificationIssueDate') || 'Ausstellungsdatum'}\n                              </label>\n                              <input\n                                type=\"text\"\n                                value={new Date(latestDoc.issueDate).toISOString().split('T')[0]}\n                                disabled\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                                readOnly\n                              />\n                            </div>\n                          )}\n\n                          {/* 9. Ablaufdatum */}\n                          {latestDoc.expiryDate && (\n                            <div>\n                              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('profile.identificationExpiryDate')}\n                              </label>\n                              <input\n                                type=\"text\"\n                                value={new Date(latestDoc.expiryDate).toISOString().split('T')[0]}\n                                disabled\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                                readOnly\n                              />\n                            </div>\n                          )}\n                        </>\n                      );\n                    })()}\n                  </>\n                )}\n\n                {/* 5. Phone Number (allein - 1 Spalte, da Geschlecht jetzt in ID-Dokument-Daten) */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.phoneNumber')}\n                  </label>\n                  <input\n                    type=\"tel\"\n                    name=\"phoneNumber\"\n                    value={userFormData.phoneNumber || ''}\n                    onChange={handleUserInputChange}\n                    placeholder=\"+573001234567\"\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                    {t('profile.phoneNumberHint')}\n                  </p>\n                </div>\n\n                {/* 6. Finanzdaten (Bank Details - 1 Spalte) */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.bankDetails')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"bankDetails\"\n                    value={userFormData.bankDetails || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                {/* Contract, Salary, Normal Working Hours ENTFERNEN - werden zu Lifecycle verschoben */}\n              </div>\n\n              {/* Lohnabrechnung-Einstellungen */}\n              <div className=\"mt-4 border-t pt-4\">\n                <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('users.form.payrollSettings')}</h3>\n                \n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      {t('users.form.payrollCountry')}\n                    </label>\n                    <select\n                      name=\"payrollCountry\"\n                      value={userFormData.payrollCountry || selectedUser.payrollCountry || 'CH'}\n                      onChange={handleUserInputChange}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    >\n                      {PAYROLL_COUNTRIES.map(country => (\n                        <option key={country.code} value={country.code}>\n                          {country.name}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  \n                  {(userFormData.payrollCountry === 'CO' || \n                    (selectedUser.payrollCountry === 'CO' && !userFormData.payrollCountry)) && (\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('users.form.contractType')}\n                      </label>\n                      <select\n                        name=\"contractType\"\n                        value={userFormData.contractType || ''}\n                        onChange={handleUserInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                      >\n                        <option value=\"\">Bitte auswhlen</option>\n                        {CONTRACT_TYPES.map(type => (\n                          <option key={type.code} value={type.code}>\n                            {type.name}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  )}\n                </div>\n                \n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      {t('users.form.hourlyRate')} ({(userFormData.payrollCountry || selectedUser.payrollCountry) === 'CH' ? 'CHF' : 'COP'})\n                    </label>\n                    <input\n                      type=\"number\"\n                      name=\"hourlyRate\"\n                      min=\"0\"\n                      step={(userFormData.payrollCountry || selectedUser.payrollCountry) === 'CH' ? '0.05' : '1'}\n                      value={userFormData.hourlyRate === null || userFormData.hourlyRate === undefined ? '' : userFormData.hourlyRate}\n                      onChange={handleUserInputChange}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                      placeholder={(userFormData.payrollCountry || selectedUser.payrollCountry) === 'CH' ? 'z.B. 45.00' : 'z.B. 50000'}\n                    />\n                  </div>\n                  \n                  {((userFormData.payrollCountry === 'CO' || selectedUser.payrollCountry === 'CO') && \n                    (userFormData.contractType !== 'servicios_externos' && selectedUser.contractType !== 'servicios_externos') &&\n                    (userFormData.contractType || selectedUser.contractType)) && (\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('users.form.monthlySalary')} (COP)\n                      </label>\n                      <input\n                        type=\"number\"\n                        name=\"monthlySalary\"\n                        min=\"0\"\n                        step=\"1000\"\n                        value={userFormData.monthlySalary === null || userFormData.monthlySalary === undefined ? '' : userFormData.monthlySalary}\n                        onChange={handleUserInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                        placeholder=\"z.B. 3500000\"\n                      />\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {isEditingUser && (\n                <div className=\"mt-4 flex justify-end gap-3\">\n                  <div className=\"relative group\">\n                    <button\n                      type=\"button\"\n                      onClick={handleCancelEdit}\n                      className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                    >\n                      <XMarkIcon className=\"h-5 w-5\" />\n                    </button>\n                    <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                      {t('common.cancel')}\n                    </div>\n                  </div>\n                  <div className=\"relative group\">\n                    <button\n                      type=\"submit\"\n                      className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                    >\n                      <CheckIcon className=\"h-5 w-5\" />\n                    </button>\n                    <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                      {t('common.save')}\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Status-Badge und Activate/Deactivate Button unter den Profil-Feldern */}\n              <div className=\"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center\">\n                {selectedUser.active !== undefined && (\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                    selectedUser.active \n                      ? 'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300' \n                      : 'bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300'\n                  }`}>\n                    {selectedUser.active ? t('users.active') : t('users.inactive')}\n                  </span>\n                )}\n                {isAdmin() && (\n                  <button\n                    onClick={handleToggleActive}\n                    className={`relative group flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n                      selectedUser.active\n                        ? 'bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30'\n                        : 'bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/20 dark:text-green-400 dark:hover:bg-green-900/30'\n                    }`}\n                  >\n                    {selectedUser.active ? (\n                      <>\n                        <XMarkIcon className=\"h-5 w-5\" />\n                        {t('users.deactivate')}\n                      </>\n                    ) : (\n                      <>\n                        <CheckIcon className=\"h-5 w-5\" />\n                        {t('users.activate')}\n                      </>\n                    )}\n                  </button>\n                )}\n              </div>\n            </form>\n          )}\n\n          {/* Identifikationsdokumente Tab */}\n          {activeUserTab === 'documents' && (\n              <div className=\"p-6\">\n            <IdentificationDocumentList userId={selectedUser.id} isAdmin={true} />\n              </div>\n          )}\n\n          {/* Rollen Tab */}\n          {activeUserTab === 'roles' && (\n              <div className=\"p-6\">\n              {/* Rollenzuweisung - nur anzeigen, wenn Rollen geladen wurden */}\n              {loadingRoles ? (\n                <div className=\"mt-4 mb-4\">\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('roleAssignment.title')}</h3>\n                  <p className=\"dark:text-gray-300\">{t('roleAssignment.loading')}</p>\n                </div>\n              ) : roles.length > 0 && (\n                <div>\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('roleAssignment.title')}</h3>\n                  \n                  {/* berprfung auf unbekannte Rollen */}\n                  {selectedRoles.some(roleId => !roles.some(role => role.id === roleId)) && (\n                    <div className=\"bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-400 dark:border-yellow-700 text-yellow-700 dark:text-yellow-300 px-4 py-3 rounded mb-4\">\n                      <p className=\"font-bold\">{t('roleAssignment.unknownRolesWarning')}</p>\n                      <p>{t('roleAssignment.unknownRolesMessage', { ids: selectedRoles.filter(roleId => !roles.some(role => role.id === roleId)).join(', ') })}</p>\n                      <p className=\"mt-2 text-sm\">{t('roleAssignment.availableRoleIds', { ids: roles.map(r => r.id).join(', ') })}</p>\n                    </div>\n                  )}\n                  \n                  {/* Aktuell zugewiesene Rollen */}\n                  <div className=\"mb-4\">\n                    <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('roleAssignment.currentRoles')}</h4>\n                    {selectedRoles.length === 0 ? (\n                      <p className=\"text-gray-500 dark:text-gray-400 italic\">{t('roleAssignment.noRolesAssigned')}</p>\n                    ) : (\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {/* Bekannte zugewiesene Rollen */}\n                        {roles\n                          .filter(role => selectedRoles.includes(role.id))\n                          .map(role => {\n                            // Eine Rolle ist nur dann nicht entfernbar, wenn es sich um die Admin-Rolle (ID: 1) fr den Admin-Benutzer (ID: 1) handelt\n                            const isFixedRole = role.id === 1 && selectedUser && selectedUser.id === 1;\n                            return (\n                              <div \n                                key={role.id} \n                                className={`border rounded-lg p-4 ${isFixedRole ? 'border-green-500 bg-green-50 dark:bg-green-900/20 dark:border-green-700 cursor-not-allowed' : 'border-blue-500 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-700 cursor-pointer'}`}\n                                onClick={() => !isFixedRole && toggleRole(role.id)}\n                              >\n                                <div className=\"flex justify-between items-center\">\n                                  <div>\n                                    <h4 className=\"font-medium flex items-center dark:text-white\">\n                                      {role.name}\n                                      {isFixedRole && (\n                                        <span className=\"ml-2 text-xs bg-green-600 text-white px-2 py-0.5 rounded-full\">\n                                          {t('roleAssignment.fixed')}\n                                        </span>\n                                      )}\n                                    </h4>\n                                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">{role.description}</p>\n                                  </div>\n                                  <div className={`flex items-center ${isFixedRole ? 'text-gray-400 dark:text-gray-500' : 'text-blue-600 dark:text-blue-400'}`}>\n                                    <span className=\"mr-2 text-sm\">{isFixedRole ? t('roleAssignment.fixedAssigned') : t('roleAssignment.remove')}</span>\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n                                    </svg>\n                                  </div>\n                                </div>\n                              </div>\n                            );\n                          })}\n                        \n                        {/* Unbekannte zugewiesene Rollen */}\n                        {selectedRoles\n                          .filter(roleId => !roles.some(role => role.id === roleId))\n                          .map(roleId => (\n                            <div \n                              key={`unknown-${roleId}`} \n                              className=\"border border-orange-500 bg-orange-50 rounded-lg p-4\"\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium\">{t('roleAssignment.unknownRole', { id: roleId })}</h4>\n                                  <p className=\"text-sm text-orange-600\">{t('roleAssignment.unknownRoleDescription')}</p>\n                                </div>\n                                <div className=\"flex items-center text-orange-600\">\n                                  <span className=\"mr-2 text-sm\">{t('roleAssignment.remove')}</span>\n                                  <button \n                                    onClick={() => toggleRole(roleId)}\n                                    className=\"focus:outline-none\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n                                    </svg>\n                                  </button>\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    )}\n                  </div>\n                  \n                  {/* Verfgbare Rollen */}\n                  <div>\n                    <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('roleAssignment.availableRoles')}</h4>\n                    {roles.filter(role => !selectedRoles.includes(role.id)).length === 0 ? (\n                      <p className=\"text-gray-500 dark:text-gray-400 italic\">{t('roleAssignment.noRolesAvailable')}</p>\n                    ) : (\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {roles\n                          .filter(role => !selectedRoles.includes(role.id))\n                          .map(role => (\n                            <div \n                              key={role.id} \n                              className=\"border border-gray-300 rounded-lg p-4 cursor-pointer hover:border-blue-300 hover:bg-blue-50\"\n                              onClick={() => toggleRole(role.id)}\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium\">{role.name}</h4>\n                                  <p className=\"text-sm text-gray-600\">{role.description}</p>\n                                </div>\n                                <div className=\"flex items-center text-gray-500 hover:text-blue-600\">\n                                  <span className=\"mr-2 text-sm\">{t('roleAssignment.add')}</span>\n                                  <PlusIcon className=\"h-5 w-5\" />\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Branches Tab */}\n          {activeUserTab === 'branches' && (\n              <div className=\"p-6\">\n              {/* Branch-Zuweisung - nur anzeigen, wenn Branches geladen wurden */}\n              {loadingBranches ? (\n                <div className=\"mt-4 mb-4\">\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('branchAssignment.title') || 'Niederlassungszuweisung'}</h3>\n                  <p className=\"dark:text-gray-300\">{t('branchAssignment.loading') || 'Lade Niederlassungen...'}</p>\n                </div>\n              ) : branches.length > 0 && (\n                <div>\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('branchAssignment.title') || 'Niederlassungszuweisung'}</h3>\n                  \n                  {/* berprfung auf unbekannte Branches */}\n                  {selectedBranches.some(branchId => !branches.some(branch => branch.id === branchId)) && (\n                    <div className=\"bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-400 dark:border-yellow-700 text-yellow-700 dark:text-yellow-300 px-4 py-3 rounded mb-4\">\n                      <p className=\"font-bold\">{t('branchAssignment.unknownBranchesWarning') || 'Unbekannte Niederlassungen zugewiesen'}</p>\n                      <p>{t('branchAssignment.unknownBranchesMessage', { ids: selectedBranches.filter(branchId => !branches.some(branch => branch.id === branchId)).join(', ') }) || `Die folgenden Niederlassungs-IDs sind zugewiesen, aber nicht verfgbar: ${selectedBranches.filter(branchId => !branches.some(branch => branch.id === branchId)).join(', ')}`}</p>\n                      <p className=\"mt-2 text-sm\">{t('branchAssignment.availableBranchIds', { ids: branches.map(b => b.id).join(', ') }) || `Verfgbare Niederlassungs-IDs: ${branches.map(b => b.id).join(', ')}`}</p>\n                    </div>\n                  )}\n                  \n                  {/* Aktuell zugewiesene Branches */}\n                  <div className=\"mb-4\">\n                    <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('branchAssignment.currentBranches') || 'Aktuell zugewiesene Niederlassungen'}</h4>\n                    {selectedBranches.length === 0 ? (\n                      <p className=\"text-gray-500 dark:text-gray-400 italic\">{t('branchAssignment.noBranchesAssigned') || 'Keine Niederlassungen zugewiesen'}</p>\n                    ) : (\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {/* Bekannte zugewiesene Branches */}\n                        {branches\n                          .filter(branch => selectedBranches.includes(branch.id))\n                          .map(branch => (\n                            <div \n                              key={branch.id} \n                              className=\"border border-blue-500 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-700 rounded-lg p-4 cursor-pointer\"\n                              onClick={() => toggleBranch(branch.id)}\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium dark:text-white\">\n                                    {branch.name}\n                                  </h4>\n                                </div>\n                                <div className=\"flex items-center text-blue-600 dark:text-blue-400\">\n                                  <span className=\"mr-2 text-sm\">{t('branchAssignment.remove') || 'Entfernen'}</span>\n                                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n                                  </svg>\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                        \n                        {/* Unbekannte zugewiesene Branches */}\n                        {selectedBranches\n                          .filter(branchId => !branches.some(branch => branch.id === branchId))\n                          .map(branchId => (\n                            <div \n                              key={`unknown-${branchId}`} \n                              className=\"border border-orange-500 bg-orange-50 rounded-lg p-4\"\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium\">{t('branchAssignment.unknownBranch', { id: branchId }) || `Unbekannte Niederlassung (ID: ${branchId})`}</h4>\n                                  <p className=\"text-sm text-orange-600\">{t('branchAssignment.unknownBranchDescription') || 'Diese Niederlassung existiert nicht mehr oder ist nicht verfgbar.'}</p>\n                                </div>\n                                <div className=\"flex items-center text-orange-600\">\n                                  <span className=\"mr-2 text-sm\">{t('branchAssignment.remove') || 'Entfernen'}</span>\n                                  <button \n                                    onClick={() => toggleBranch(branchId)}\n                                    className=\"focus:outline-none\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n                                    </svg>\n                                  </button>\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    )}\n                  </div>\n                  \n                  {/* Verfgbare Branches */}\n                  <div>\n                    <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('branchAssignment.availableBranches') || 'Verfgbare Niederlassungen'}</h4>\n                    {branches.filter(branch => !selectedBranches.includes(branch.id)).length === 0 ? (\n                      <p className=\"text-gray-500 dark:text-gray-400 italic\">{t('branchAssignment.noBranchesAvailable') || 'Keine weiteren Niederlassungen verfgbar'}</p>\n                    ) : (\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {branches\n                          .filter(branch => !selectedBranches.includes(branch.id))\n                          .map(branch => (\n                            <div \n                              key={branch.id} \n                              className=\"border border-gray-300 dark:border-gray-600 rounded-lg p-4 cursor-pointer hover:border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20\"\n                              onClick={() => toggleBranch(branch.id)}\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium dark:text-white\">{branch.name}</h4>\n                                </div>\n                                <div className=\"flex items-center text-gray-500 hover:text-blue-600 dark:hover:text-blue-400\">\n                                  <span className=\"mr-2 text-sm\">{t('branchAssignment.add') || 'Hinzufgen'}</span>\n                                  <PlusIcon className=\"h-5 w-5\" />\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n              {!loadingBranches && branches.length === 0 && (\n                <div className=\"mt-4 mb-4\">\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('branchAssignment.title') || 'Niederlassungszuweisung'}</h3>\n                  <p className=\"text-gray-500 dark:text-gray-400\">{t('branchAssignment.noBranchesFound') || 'Keine Niederlassungen gefunden'}</p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Lebenszyklus Tab */}\n          {activeUserTab === 'lifecycle' && selectedUser && (\n              <div className=\"p-6\">\n            <LifecycleView \n              key={`lifecycle-${selectedUser.id}-${lifecycleRefreshKey}`}\n              userId={selectedUser.id} \n              userName={`${selectedUser.firstName} ${selectedUser.lastName}`}\n            />\n              </div>\n          )}\n          </div>\n        </div>\n      )}\n\n      {/* Sidepane/Modal fr Benutzererstellung */}\n      {isCreateModalOpen && (\n        <>\n          {/* Fr Mobile (unter 640px) - klassisches Modal */}\n          {isMobile ? (\n            <Dialog open={isCreateModalOpen} onClose={() => setIsCreateModalOpen(false)} className=\"relative z-50\">\n              <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n              \n              <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                  {/* Header */}\n                  <div className=\"px-6 py-4 border-b dark:border-gray-700\">\n                    <div className=\"flex items-center justify-between\">\n                      <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                        {t('organisation.createUser.title')}\n                      </Dialog.Title>\n                      <button\n                        onClick={() => setIsCreateModalOpen(false)}\n                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                      >\n                        <XMarkIcon className=\"h-6 w-6\" />\n                      </button>\n                    </div>\n                  </div>\n                  \n                  {/* Form */}\n                  <form onSubmit={handleCreateUser} className=\"p-6\">\n                    <div className=\"space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.email')} *\n                        </label>\n                        <input\n                          type=\"email\"\n                          name=\"email\"\n                          value={newUserFormData.email}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.password')} *\n                        </label>\n                        <input\n                          type=\"password\"\n                          name=\"password\"\n                          value={newUserFormData.password}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.firstName')} *\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"firstName\"\n                          value={newUserFormData.firstName}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.lastName')} *\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"lastName\"\n                          value={newUserFormData.lastName}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                    </div>\n                    \n                    {/* Footer */}\n                    <div className=\"mt-6 flex justify-end gap-3\">\n                      <div className=\"relative group\">\n                        <button\n                          type=\"button\"\n                          onClick={() => setIsCreateModalOpen(false)}\n                          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                        >\n                          <XMarkIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('common.cancel')}\n                        </div>\n                      </div>\n                      <div className=\"relative group\">\n                        <button\n                          type=\"submit\"\n                          className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                        >\n                          <CheckIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('organisation.createUser.create')}\n                        </div>\n                      </div>\n                    </div>\n                  </form>\n                </Dialog.Panel>\n              </div>\n            </Dialog>\n          ) : (\n            // Fr Desktop (ab 640px) - Sidepane\n            // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n            <>\n              {/* Backdrop - nur wenn offen und <= 1070px */}\n              {/* Hinweis: onClick entfernt, da Backdrop pointer-events: none hat, damit Hauptinhalt interaktiv bleibt */}\n              {isCreateModalOpen && !isLargeScreen && (\n                <div \n                  className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n                  aria-hidden=\"true\" \n                  style={{\n                    opacity: isCreateModalOpen ? 1 : 0,\n                    transition: 'opacity 300ms ease-out'\n                  }}\n                />\n              )}\n              \n              {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n              <div \n                className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isCreateModalOpen ? 'translate-x-0' : 'translate-x-full'}`}\n                style={{\n                  transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n                  pointerEvents: isCreateModalOpen ? 'auto' : 'none'\n                }}\n                aria-hidden={!isCreateModalOpen}\n                role=\"dialog\"\n                aria-modal={isCreateModalOpen}\n              >\n                <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n                  <h2 className=\"text-lg font-semibold dark:text-white\">\n                    {t('organisation.createUser.title')}\n                  </h2>\n                  <button\n                    onClick={() => setIsCreateModalOpen(false)}\n                    className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                  >\n                    <XMarkIcon className=\"h-6 w-6\" />\n                  </button>\n                </div>\n\n                <div className=\"flex flex-col flex-1 min-h-0\">\n                  <form onSubmit={handleCreateUser} className=\"flex flex-col flex-1 min-h-0\">\n                    <div className=\"p-4 overflow-y-auto flex-1 min-h-0 space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.email')} *\n                        </label>\n                      <input\n                        type=\"email\"\n                        name=\"email\"\n                        value={newUserFormData.email}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('organisation.createUser.password')} *\n                      </label>\n                      <input\n                        type=\"password\"\n                        name=\"password\"\n                        value={newUserFormData.password}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('organisation.createUser.firstName')} *\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"firstName\"\n                        value={newUserFormData.firstName}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('organisation.createUser.lastName')} *\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"lastName\"\n                        value={newUserFormData.lastName}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                      </div>\n                    </div>\n                    \n                    {/* Footer */}\n                    <div className=\"flex justify-end gap-3 border-t dark:border-gray-700 pt-4 px-4 flex-shrink-0\">\n                      <div className=\"relative group\">\n                        <button\n                          type=\"button\"\n                          onClick={() => setIsCreateModalOpen(false)}\n                          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                        >\n                          <XMarkIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('common.cancel')}\n                        </div>\n                      </div>\n                      <div className=\"relative group\">\n                        <button\n                          type=\"submit\"\n                          className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                        >\n                          <CheckIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('organisation.createUser.create')}\n                        </div>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default UserManagementTab; ","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { roleApi, branchApi } from '../api/apiClient.ts';\nimport { Role, AccessLevel } from '../types/interfaces.ts';\nimport { PencilIcon, TrashIcon, PlusIcon, FunnelIcon, XMarkIcon, CheckIcon, ArrowPathIcon, DocumentDuplicateIcon, ChevronDownIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport axiosInstance from '../config/axios.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport FilterPane from '../components/FilterPane.tsx';\nimport SavedFilterTags from '../components/SavedFilterTags.tsx';\nimport { FilterCondition } from '../components/FilterRow.tsx';\nimport { useError } from '../contexts/ErrorContext.tsx';\nimport { ErrorCategory } from '../services/ErrorHandler.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface RoleManagementTabProps {\n  onRolesChange?: () => void;\n  onError: (error: string) => void;\n  readOnly?: boolean;\n}\n\n// Definiere Seiten, die immer sichtbar sein sollen (ohne Berechtigungsprfung)\nconst alwaysVisiblePages = ['dashboard', 'worktracker', 'cerebro', 'settings', 'profile'];\n\n// ALLE SEITEN IM SYSTEM (synchron mit Backend)\nconst defaultPages = [\n  'dashboard',\n  'worktracker',\n  'consultations',\n  'team_worktime_control', // = workcenter\n  'payroll', // = lohnabrechnung\n  'organization_management', // = organisation (Hauptseite)\n  'cerebro',\n  'settings',\n  'profile'\n];\n\n// ALLE TABELLEN IM SYSTEM (synchron mit Backend)\nconst defaultTables = [\n  'requests',           // auf dashboard\n  'tasks',             // auf worktracker\n  'reservations',      // auf worktracker (in To Do's Box)\n  'users',             // auf organization_management\n  'roles',             // auf organization_management\n  'organization',      // auf organization_management\n  'organization_join_requests', // auf organization_management\n  'organization_users',  // auf organization_management\n  'team_worktime',     // auf team_worktime_control\n  'worktime',          // auf worktracker\n  'clients',           // auf consultations\n  'consultation_invoices', // auf consultations\n  'branches',          // auf settings/system\n  'notifications',     // allgemein\n  'settings',          // auf settings\n  'monthly_reports'    // auf consultations/reports\n];\n\n// ALLE BUTTONS IM SYSTEM (synchron mit Backend)\nconst defaultButtons = [\n  // Database Management Buttons (Settings/System)\n  'database_reset_table',\n  'database_logs',\n  \n  // Invoice Functions Buttons\n  'invoice_create',\n  'invoice_download', \n  'invoice_mark_paid',\n  'invoice_settings',\n  \n  // Todo/Task Buttons (Worktracker)\n  'todo_create',\n  'todo_edit',\n  'todo_delete',\n  'task_create',\n  'task_edit', \n  'task_delete',\n  \n  // User Management Buttons\n  'user_create',\n  'user_edit',\n  'user_delete',\n  'role_assign',\n  'role_create',\n  'role_edit',\n  'role_delete',\n  \n  // Organization Management Buttons\n  'organization_create',\n  'organization_edit',\n  'organization_delete',\n  \n  // Worktime Buttons\n  'worktime_start',\n  'worktime_stop', \n  'worktime_edit',\n  'worktime_delete',\n  \n  // General Cerebro Button\n  'cerebro',\n  \n  // Consultation Buttons\n  'consultation_start',\n  'consultation_stop',\n  'consultation_edit',\n  \n  // Client Management Buttons\n  'client_create',\n  'client_edit',\n  'client_delete',\n  \n  // Settings Buttons\n  'settings_system',\n  'settings_notifications',\n  'settings_profile',\n  \n  // Payroll Buttons\n  'payroll_generate',\n  'payroll_export',\n  'payroll_edit'\n];\n\n// Definiert die Zuordnung von Tabellen zu ihren bergeordneten Seiten\nconst tableToPageMapping = {\n  'requests': 'dashboard',\n  'tasks': 'worktracker',\n  'reservations': 'worktracker',\n  'users': 'organization_management',\n  'roles': 'organization_management',\n  'organization': 'organization_management',\n  'organization_join_requests': 'organization_management',\n  'organization_users': 'organization_management',\n  'team_worktime': 'team_worktime_control',\n  'worktime': 'worktracker',\n  'clients': 'consultations',\n  'consultation_invoices': 'consultations',\n  'branches': 'settings',\n  'notifications': 'general',\n  'settings': 'settings',\n  'monthly_reports': 'consultations'\n};\n\n// Definiert die Zuordnung von Buttons zu ihren bergeordneten Seiten/Bereichen\nconst buttonToPageMapping = {\n  'database_reset_table': 'settings',\n  'database_logs': 'settings',\n  'invoice_create': 'consultations',\n  'invoice_download': 'consultations',\n  'invoice_mark_paid': 'consultations',\n  'invoice_settings': 'consultations',\n  'todo_create': 'worktracker',\n  'todo_edit': 'worktracker',\n  'todo_delete': 'worktracker',\n  'task_create': 'worktracker',\n  'task_edit': 'worktracker',\n  'task_delete': 'worktracker',\n  'user_create': 'organization_management',\n  'user_edit': 'organization_management',\n  'user_delete': 'organization_management',\n  'role_assign': 'organization_management',\n  'role_create': 'organization_management',\n  'role_edit': 'organization_management',\n  'role_delete': 'organization_management',\n  'organization_create': 'organization_management',\n  'organization_edit': 'organization_management',\n  'organization_delete': 'organization_management',\n  'worktime_start': 'worktracker',\n  'worktime_stop': 'worktracker',\n  'worktime_edit': 'worktracker',\n  'worktime_delete': 'worktracker',\n  'cerebro': 'cerebro',\n  'consultation_start': 'consultations',\n  'consultation_stop': 'consultations',\n  'consultation_edit': 'consultations',\n  'client_create': 'consultations',\n  'client_edit': 'consultations',\n  'client_delete': 'consultations',\n  'settings_system': 'settings',\n  'settings_notifications': 'settings',\n  'settings_profile': 'settings',\n  'payroll_generate': 'payroll',\n  'payroll_export': 'payroll',\n  'payroll_edit': 'payroll'\n};\n\n// Definiert die Zuordnung von Buttons zu ihren zugehrigen Tabellen\nconst buttonToTableMapping: Record<string, string | null> = {\n  // Worktime Buttons  worktime Tabelle\n  'worktime_start': 'worktime',\n  'worktime_stop': 'worktime',\n  'worktime_edit': 'worktime',\n  'worktime_delete': 'worktime',\n  // Task/Todo Buttons  tasks Tabelle\n  'task_create': 'tasks',\n  'task_edit': 'tasks',\n  'task_delete': 'tasks',\n  'todo_create': 'tasks',\n  'todo_edit': 'tasks',\n  'todo_delete': 'tasks',\n  // Client Buttons  clients Tabelle\n  'client_create': 'clients',\n  'client_edit': 'clients',\n  'client_delete': 'clients',\n  'consultation_start': 'clients',\n  'consultation_stop': 'clients',\n  'consultation_edit': 'clients',\n  // Invoice Buttons  consultation_invoices Tabelle\n  'invoice_create': 'consultation_invoices',\n  'invoice_download': 'consultation_invoices',\n  'invoice_mark_paid': 'consultation_invoices',\n  'invoice_settings': 'consultation_invoices',\n  // User Management Buttons  users/roles Tabellen\n  'user_create': 'users',\n  'user_edit': 'users',\n  'user_delete': 'users',\n  'role_assign': 'roles',\n  'role_create': 'roles',\n  'role_edit': 'roles',\n  'role_delete': 'roles',\n  // Organization Management Buttons  organization Tabelle\n  'organization_create': 'organization',\n  'organization_edit': 'organization',\n  'organization_delete': 'organization',\n  // Settings Buttons  settings Tabelle\n  'settings_system': 'settings',\n  'settings_notifications': 'settings',\n  'settings_profile': 'settings',\n  // Buttons ohne direkte Tabelle-Zuordnung\n  'database_reset_table': null,\n  'database_logs': null,\n  'cerebro': null,\n  'payroll_generate': null,\n  'payroll_export': null,\n  'payroll_edit': null\n};\n\n// Display-Name-Mapping fr Seiten (DB-Interne Bezeichnung  Frontend-Bezeichnung)\n// Wird dynamisch aus bersetzungen geladen\n\n// Display-Name-Mapping fr Tabellen (DB-Interne Bezeichnung  Frontend-Bezeichnung)\n// Wird dynamisch aus bersetzungen geladen\n\n// Display-Name-Mapping fr Buttons wird dynamisch in der Komponente geladen\n\n// TableID fr gespeicherte Filter\nconst ROLES_TABLE_ID = 'roles-table';\n\n// Standardrollen-IDs (fr Rollen ohne Organisation)\nconst STANDARD_ROLE_IDS = [1, 2, 999]; // Admin (1), User (2), Hamburger (999)\n\n// Standardrollen-Namen (drfen nicht bearbeitet/gelscht werden, egal von welcher Organisation)\nconst STANDARD_ROLE_NAMES = ['Admin', 'User', 'Hamburger'];\n\n// Helper-Funktion zur Prfung ob es sich um eine Standardrolle handelt\nconst isStandardRole = (roleId: number, roleName?: string): boolean => {\n  // Prfe zuerst auf Standard-IDs (fr Rollen ohne Organisation)\n  if (STANDARD_ROLE_IDS.includes(roleId)) {\n    return true;\n  }\n  // Prfe auf Standard-Namen (fr Rollen in Organisationen)\n  if (roleName && STANDARD_ROLE_NAMES.includes(roleName)) {\n    return true;\n  }\n  return false;\n};\n\ninterface RoleFormData {\n  name: string;\n  description: string;\n  permissions: {\n    entity: string;\n    entityType: string;\n    accessLevel: AccessLevel;\n  }[];\n}\n\n\n// RoleCard-Komponente fr mobile Ansicht\nconst RoleCard: React.FC<{\n  role: Role;\n  onEdit: (role: Role) => void;\n  onDelete: (roleId: number) => void;\n  onCopy: (role: Role) => void;\n  canEdit: boolean;\n  canDelete: boolean;\n  canCopy: boolean;\n}> = ({ role, onEdit, onDelete, onCopy, canEdit, canDelete, canCopy }) => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4 mb-4\">\n      {/* Header mit Rollenname und Aktionen */}\n      <div className=\"flex justify-between items-start mb-2\">\n        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">{role.name}</h3>\n        \n        <div className=\"flex space-x-2\">\n          {canCopy && (\n            <div className=\"relative group\">\n              <button\n                onClick={() => onCopy(role)}\n                className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n              >\n                <DocumentDuplicateIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('roles.actions.copy')}\n              </div>\n            </div>\n          )}\n          \n          {canEdit && (\n            <div className=\"relative group\">\n              <button\n                onClick={() => onEdit(role)}\n                className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n              >\n                <PencilIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('roles.actions.edit')}\n              </div>\n            </div>\n          )}\n          \n          {canDelete && (\n            <div className=\"relative group\">\n              <button\n                onClick={() => onDelete(role.id)}\n                className=\"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 p-1\"\n              >\n                <TrashIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('roles.actions.delete')}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* Beschreibung */}\n      <p className=\"text-sm text-gray-600 dark:text-gray-400\">{role.description || t('roles.noDescription')}</p>\n      \n      {/* Branch-Zuweisungen */}\n      <div className=\"mt-2\">\n        <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n          {role.allBranches ? (\n            <span className=\"inline-flex items-center px-2 py-0.5 rounded bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300\">\n              {t('roles.form.allBranches') || 'Alle Branches'}\n            </span>\n          ) : role.branches && role.branches.length > 0 ? (\n            <span className=\"inline-flex items-center px-2 py-0.5 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300\">\n              {role.branches.length} {t('roles.form.specificBranches') || 'Branches'}\n            </span>\n          ) : (\n            <span className=\"inline-flex items-center px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400\">\n              {t('roles.form.noBranches') || 'Keine Branches'}\n            </span>\n          )}\n        </span>\n      </div>\n      \n      {/* Berechtigungen - kompakt */}\n      <div className=\"mt-2\">\n        <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-1\">{t('roles.permissions')}:</h4>\n        <div className=\"flex flex-wrap gap-1\">\n          {role.permissions\n            .filter(perm => perm.accessLevel !== 'none') // Nur relevante Berechtigungen anzeigen\n            .slice(0, 8) // Begrenze die Anzahl der angezeigten Berechtigungen\n            .map(permission => (\n              <span \n                key={`${permission.entity}-${permission.entityType}`}\n                className=\"text-xs bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 px-2 py-1 rounded\"\n              >\n                {permission.entity}: {permission.accessLevel}\n              </span>\n            ))}\n          {role.permissions.filter(perm => perm.accessLevel !== 'none').length > 8 && (\n            <span className=\"text-xs bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-300 px-2 py-1 rounded\">\n                +{role.permissions.filter(perm => perm.accessLevel !== 'none').length - 8} {t('common.showMore')}\n            </span>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst RoleManagementTab: React.FC<RoleManagementTabProps> = ({ onRolesChange, onError, readOnly = false }) => {\n  const { t } = useTranslation();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingRole, setEditingRole] = useState<Role | null>(null);\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [loading, setLoading] = useState(true);\n  \n  // Display-Name-Mapping fr Seiten (dynamisch aus bersetzungen)\n  const pageDisplayNames = useMemo(() => ({\n    'dashboard': t('roles.pages.dashboard'),\n    'worktracker': t('roles.pages.worktracker'),\n    'consultations': t('roles.pages.consultations'),\n    'team_worktime_control': t('roles.pages.team_worktime_control'),\n    'payroll': t('roles.pages.payroll'),\n    'organization_management': t('roles.pages.organization_management'), // Organisation-Seite (Hauptseite)\n    'cerebro': t('roles.pages.cerebro'),\n    'settings': t('roles.pages.settings'),\n    'profile': t('roles.pages.profile')\n  }), [t]);\n\n  // Display-Name-Mapping fr Tabellen (dynamisch aus bersetzungen)\n  const tableDisplayNames = useMemo(() => ({\n    'tasks': t('roles.tables.tasks'),\n    'reservations': t('roles.tables.reservations'),\n    'worktime': t('roles.tables.worktime'),\n    'users': t('roles.tables.users'),\n    'roles': t('roles.tables.roles'),\n    'organization': t('roles.tables.organization'),\n    'organization_join_requests': t('roles.tables.organization_join_requests'),\n    'organization_users': t('roles.tables.organization_users'),\n    'clients': t('roles.tables.clients'),\n    'consultation_invoices': t('roles.tables.consultation_invoices'),\n    'requests': t('roles.tables.requests'),\n    'team_worktime': t('roles.tables.team_worktime'),\n    'settings': t('roles.tables.settings'),\n    'notifications': t('roles.tables.notifications'),\n    'branches': t('roles.tables.branches'),\n    'monthly_reports': t('roles.tables.monthly_reports')\n  }), [t]);\n\n  // Display-Name-Mapping fr Buttons (dynamisch aus bersetzungen)\n  const buttonDisplayNames = useMemo(() => ({\n    'worktime_start': t('roles.buttons.worktime_start'),\n    'worktime_stop': t('roles.buttons.worktime_stop'),\n    'worktime_edit': t('roles.buttons.worktime_edit'),\n    'worktime_delete': t('roles.buttons.worktime_delete'),\n    'task_create': t('roles.buttons.task_create'),\n    'task_edit': t('roles.buttons.task_edit'),\n    'task_delete': t('roles.buttons.task_delete'),\n    'todo_create': t('roles.buttons.todo_create'),\n    'todo_edit': t('roles.buttons.todo_edit'),\n    'todo_delete': t('roles.buttons.todo_delete'),\n    'client_create': t('roles.buttons.client_create'),\n    'client_edit': t('roles.buttons.client_edit'),\n    'client_delete': t('roles.buttons.client_delete'),\n    'consultation_start': t('roles.buttons.consultation_start'),\n    'consultation_stop': t('roles.buttons.consultation_stop'),\n    'consultation_edit': t('roles.buttons.consultation_edit'),\n    'invoice_create': t('roles.buttons.invoice_create'),\n    'invoice_download': t('roles.buttons.invoice_download'),\n    'invoice_mark_paid': t('roles.buttons.invoice_mark_paid'),\n    'invoice_settings': t('roles.buttons.invoice_settings'),\n    'user_create': t('roles.buttons.user_create'),\n    'user_edit': t('roles.buttons.user_edit'),\n    'user_delete': t('roles.buttons.user_delete'),\n    'role_assign': t('roles.buttons.role_assign'),\n    'role_create': t('roles.buttons.role_create'),\n    'role_edit': t('roles.buttons.role_edit'),\n    'role_delete': t('roles.buttons.role_delete'),\n    'organization_create': t('roles.buttons.organization_create'),\n    'organization_edit': t('roles.buttons.organization_edit'),\n    'organization_delete': t('roles.buttons.organization_delete'),\n    'settings_system': t('roles.buttons.settings_system'),\n    'settings_notifications': t('roles.buttons.settings_notifications'),\n    'settings_profile': t('roles.buttons.settings_profile'),\n    'database_reset_table': t('roles.buttons.database_reset_table'),\n    'database_logs': t('roles.buttons.database_logs'),\n    'payroll_generate': t('roles.buttons.payroll_generate'),\n    'payroll_export': t('roles.buttons.payroll_export'),\n    'payroll_edit': t('roles.buttons.payroll_edit'),\n    'cerebro': t('roles.buttons.cerebro')\n  }), [t]);\n  const [formData, setFormData] = useState<RoleFormData>({\n    name: '',\n    description: '',\n    permissions: [\n      // Seiten-Berechtigungen\n      ...defaultPages.map(page => ({\n        entity: page,\n        entityType: 'page',\n        accessLevel: 'none' as AccessLevel\n      })),\n      // Tabellen-Berechtigungen\n      ...defaultTables.map(table => ({\n        entity: table,\n        entityType: 'table',\n        accessLevel: 'none' as AccessLevel\n      })),\n      // Button-Berechtigungen\n      ...defaultButtons.map(button => ({\n        entity: button,\n        entityType: 'button',\n        accessLevel: 'none' as AccessLevel\n      }))\n    ]\n  });\n  const [error, setError] = useState<string | null>(null);\n  const { hasPermission } = usePermissions();\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n  \n  // States fr Branch-Zuweisungen\n  const [allBranches, setAllBranches] = useState<boolean>(true);\n  const [selectedBranchIds, setSelectedBranchIds] = useState<number[]>([]);\n  const [branches, setBranches] = useState<Array<{ id: number; name: string }>>([]);\n  const [loadingBranches, setLoadingBranches] = useState(false);\n  \n  // Neue State-Variablen fr erweiterte Filterbedingungen\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  \n  // Filter State Management (Controlled Mode)\n  const [activeFilterName, setActiveFilterName] = useState<string>('Alle');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n  \n  // Responsiveness Hook (640px wie Standard)\n  const [isMobile, setIsMobile] = useState<boolean>(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  \n  // Neue Fehlerbehandlung hinzufgen\n  const { handleError, handleValidationError } = useError();\n  \n  // Neue State-Variablen fr die Berechtigungen\n  const [isAddPermissionModalOpen, setIsAddPermissionModalOpen] = useState(false);\n  const [selectedPermission, setSelectedPermission] = useState<string | null>(null);\n  const [displayLimit, setDisplayLimit] = useState<number>(10);\n  \n  // berwache Bildschirmgre\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isModalOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isModalOpen, openSidepane, closeSidepane]);\n\n  // Funktion zum Laden der Branches\n  const fetchBranches = useCallback(async () => {\n    setLoadingBranches(true);\n    try {\n      const response = await branchApi.getAll();\n      setBranches(response.data);\n    } catch (error) {\n      console.error('Fehler beim Laden der Branches:', error);\n    } finally {\n      setLoadingBranches(false);\n    }\n  }, []);\n\n  // Aktualisiere die fetchRoles-Funktion, um den neuen ErrorHandler zu nutzen\n  const fetchRoles = useCallback(async () => {\n    setLoading(true);\n    console.log('DEBUGAUSGABE: Hole Rollen vom Server...');\n    \n    try {\n      const response = await roleApi.getAll();\n      console.log('DEBUGAUSGABE: Rollen erfolgreich geholt:', response.data);\n      setRoles(response.data);\n      setError(null);\n    } catch (error) {\n      console.error('DEBUGAUSGABE: Fehler beim Abrufen der Rollen:', error);\n      // Nutze den neuen ErrorHandler\n      handleError(error, { \n        component: 'RoleManagementTab', \n        action: 'fetchRoles' \n      });\n      // Rufe auch den bergebenen onError auf, falls vorhanden\n      if (onError) {\n        onError('Fehler beim Laden der Rollen');\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [handleError, onError]);\n\n  // Direkt Rollen laden\n  useEffect(() => {\n    fetchRoles();\n  }, [fetchRoles]);\n\n  // Branches beim ffnen des Modals laden\n  useEffect(() => {\n    if (isModalOpen) {\n      fetchBranches();\n    }\n  }, [isModalOpen, fetchBranches]);\n\n  // Speichern einer Rolle\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n\n    // Validierung: Wenn allBranches = false, mssen Branches ausgewhlt sein\n    if (!allBranches && selectedBranchIds.length === 0) {\n      handleError(t('roles.form.branchSelectionRequired') || 'Bitte whlen Sie mindestens eine Branch aus oder aktivieren Sie \"Fr alle Branches gltig\"', {\n        component: 'RoleManagementTab'\n      });\n      return;\n    }\n    \n    if (!formData.name) {\n      handleValidationError('Rollenname darf nicht leer sein', { name: 'Rollenname ist erforderlich' });\n      return;\n    }\n    \n    if (editingRole) {\n      // Stelle sicher, dass die immer sichtbaren Seiten auch tatschlich auf 'both' gesetzt sind\n      const updatedPermissions = formData.permissions.map(permission => {\n        if (permission.entityType === 'page' && alwaysVisiblePages.includes(permission.entity)) {\n          return { ...permission, accessLevel: 'both' };\n        }\n        return permission;\n      });\n      \n      // Filtere nur die relevanten Berechtigungen (nicht 'none')\n      const filteredPermissions = updatedPermissions\n        .filter(permission => permission.accessLevel !== 'none')\n        .map(permission => ({\n          entity: permission.entity,\n          entityType: permission.entityType,\n          accessLevel: permission.accessLevel\n        }));\n      \n      if (!editingRole.id || isNaN(editingRole.id)) {\n        console.warn('DEBUGAUSGABE: Ungltige Rollen-ID erkannt, Bearbeitung abgebrochen');\n        handleError('Ungltige Rollen-ID, Bearbeitung abgebrochen', { \n          component: 'RoleManagementTab',\n          roleId: editingRole.id\n        });\n        return;\n      }\n      \n      // berprfen, ob es sich um eine geschtzte Rolle handelt\n      if (isStandardRole(editingRole.id, editingRole.name)) {\n        console.warn(`DEBUGAUSGABE: Versuch, geschtzte Rolle mit ID ${editingRole.id} zu bearbeiten`);\n        handleError({\n          message: 'Geschtzte Systemrollen knnen nicht bearbeitet werden',\n          name: 'PermissionError'\n        }, {\n          component: 'RoleManagementTab',\n          roleId: editingRole.id,\n          category: ErrorCategory.PERMISSION\n        });\n        setIsModalOpen(false);\n        return;\n      }\n      \n      // berprfen, ob die Rolle noch in der aktuellen Liste existiert\n      const roleExists = roles.some(r => r.id === editingRole.id);\n      if (!roleExists) {\n        console.error(`DEBUGAUSGABE: Rolle mit ID ${editingRole.id} existiert nicht in der aktuellen Liste`);\n        handleError(`Rolle mit ID ${editingRole.id} existiert nicht mehr. Bitte aktualisieren Sie die Seite.`, {\n          component: 'RoleManagementTab',\n          roleId: editingRole.id\n        });\n        setIsModalOpen(false);\n        // Rollen neu laden, um die Anzeige zu aktualisieren\n        await fetchRoles();\n        return;\n      }\n      \n      console.log(`DEBUGAUSGABE: Bearbeite Rolle mit ID ${editingRole.id}`);\n      \n      try {\n        console.log('DEBUGAUSGABE: Sende Aktualisierung an API:', {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions\n        });\n        \n        const dataToSend = {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions,\n          allBranches: allBranches,\n          branchIds: allBranches ? [] : selectedBranchIds\n        };\n        \n        console.log('DEBUGAUSGABE: Vor dem API-Aufruf roleApi.update');\n        const response = await roleApi.update(editingRole.id, dataToSend);\n        console.log('DEBUGAUSGABE: Nach dem API-Aufruf roleApi.update');\n        console.log('DEBUGAUSGABE: API-Antwort bei Rollenaktualisierung:', response);\n        await fetchRoles();\n      } catch (updateError) {\n        console.error('DEBUGAUSGABE: Fehler bei Rollenaktualisierung:', updateError);\n        if (updateError.response) {\n          // Spezifischere Fehlerbehandlung\n          if (updateError.response.data.meta && updateError.response.data.meta.cause === \"Record to update not found.\") {\n            handleError('Diese Rolle existiert nicht mehr in der Datenbank. Die Anzeige wird aktualisiert.', {\n              component: 'RoleManagementTab',\n              roleId: editingRole.id\n            });\n            setIsModalOpen(false);\n            // Rollenliste aktualisieren, um Frontend zu synchronisieren\n            await fetchRoles();\n          } else {\n            handleError(updateError.response.data.message || 'Fehler beim Aktualisieren der Rolle', {\n              component: 'RoleManagementTab',\n              roleId: editingRole.id\n            });\n          }\n        } else {\n          handleError('Fehler beim Aktualisieren der Rolle', {\n            component: 'RoleManagementTab',\n            roleId: editingRole.id\n          });\n        }\n        return;\n      }\n    } else {\n      // Erstellen einer neuen Rolle\n      try {\n        // Stelle sicher, dass die immer sichtbaren Seiten auch tatschlich auf 'both' gesetzt sind\n        const updatedPermissions = formData.permissions.map(permission => {\n          if (permission.entityType === 'page' && alwaysVisiblePages.includes(permission.entity)) {\n            return { ...permission, accessLevel: 'both' };\n          }\n          return permission;\n        });\n        \n        // Filtere nur die relevanten Berechtigungen (nicht 'none')\n        const filteredPermissions = updatedPermissions\n          .filter(permission => permission.accessLevel !== 'none')\n          .map(permission => ({\n            entity: permission.entity,\n            entityType: permission.entityType,\n            accessLevel: permission.accessLevel\n          }));\n        \n        console.log('DEBUGAUSGABE: Sende Daten an API fr neue Rolle:', {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions\n        });\n        \n        const dataToSend = {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions,\n          allBranches: allBranches,\n          branchIds: allBranches ? [] : selectedBranchIds\n        };\n        \n        console.log('DEBUGAUSGABE: Vor dem API-Aufruf roleApi.create');\n        const response = await roleApi.create(dataToSend);\n        console.log('DEBUGAUSGABE: Nach dem API-Aufruf roleApi.create');\n        console.log('DEBUGAUSGABE: API-Antwort beim Erstellen der Rolle:', response);\n        await fetchRoles();\n      } catch (createError) {\n        console.error('DEBUGAUSGABE: Fehler bei API-Anfrage zum Erstellen der Rolle:', createError);\n        if (createError.response) {\n          handleError(createError.response.data.message || 'Fehler beim Erstellen der Rolle', {\n            component: 'RoleManagementTab'\n          });\n        } else {\n          handleError('Fehler beim Erstellen der Rolle', {\n            component: 'RoleManagementTab'\n          });\n        }\n        return;\n      }\n    }\n    \n    if (onRolesChange) onRolesChange();\n    \n    setIsModalOpen(false);\n    resetForm();\n  };\n\n  // Lschen einer Rolle\n  const handleDelete = async (roleId: number) => {\n    if (!roleId || isNaN(roleId)) {\n      console.warn('Ungltige Rollen-ID erkannt, Lschvorgang abgebrochen');\n      handleError('Ungltige Rollen-ID, Lschvorgang abgebrochen', {\n        component: 'RoleManagementTab',\n        roleId: roleId\n      });\n      return;\n    }\n    \n    // Finde die Rolle in der Liste, um den Namen zu prfen\n    const role = roles.find(r => r.id === roleId);\n    \n    // berprfen, ob es sich um eine geschtzte Rolle handelt\n    if (role && isStandardRole(roleId, role.name)) {\n      console.warn(`Versuch, geschtzte Rolle mit ID ${roleId} (${role.name}) zu lschen`);\n      handleError('Geschtzte Systemrollen knnen nicht gelscht werden', {\n        component: 'RoleManagementTab',\n        roleId: roleId\n      });\n      return;\n    }\n    \n    if (!window.confirm('Mchten Sie diese Rolle wirklich lschen?')) return;\n    \n    try {\n      console.log(`Starte Lschvorgang fr Rolle mit ID ${roleId}`);\n      \n      // berprfen, ob die Rolle in der aktuellen Liste existiert\n      const roleExists = roles.some(r => r.id === roleId);\n      if (!roleExists) {\n        console.error(`Rolle mit ID ${roleId} existiert nicht in der aktuellen Liste`);\n        handleError(`Rolle mit ID ${roleId} existiert nicht mehr. Bitte aktualisieren Sie die Seite.`, {\n          component: 'RoleManagementTab',\n          roleId: roleId\n        });\n        // Rollen neu laden, um die Anzeige zu aktualisieren\n        await fetchRoles();\n        return;\n      }\n      \n      // Bei Mock-Daten lokales Lschen (wird nicht verwendet)\n      if (false) {\n        console.log('Lsche Mock-Rolle');\n        const updatedRoles = roles.filter(role => role.id !== roleId);\n        setRoles(updatedRoles);\n      } else {\n        console.log('Sende Lschanfrage an API');\n        \n        try {\n          const response = await roleApi.delete(roleId);\n          console.log('API-Antwort beim Lschen der Rolle:', response);\n          \n          // Nach erfolgreichem Lschen die Rollenliste aktualisieren\n          await fetchRoles();\n          console.log('Rollenliste nach Lschen aktualisiert');\n        } catch (deleteError) {\n          console.error('API-Fehler beim Lschen der Rolle:', deleteError);\n          \n          if (deleteError.response) {\n            console.error('API-Fehlerdaten:', deleteError.response.data);\n            \n            // Spezifischere Fehlerbehandlung\n            if (deleteError.response.data.meta && deleteError.response.data.meta.cause === \"Record to delete does not exist.\") {\n              handleError('Diese Rolle existiert nicht mehr in der Datenbank. Die Anzeige wird aktualisiert.', {\n                component: 'RoleManagementTab',\n                roleId: roleId\n              });\n              // Rollenliste aktualisieren, um Frontend zu synchronisieren\n              await fetchRoles();\n            } else {\n              handleError(deleteError.response.data.message || t('roleManagement.deleteError'), {\n                component: 'RoleManagementTab',\n                roleId: roleId\n              });\n            }\n          } else {\n            handleError(t('roleManagement.networkError'), {\n              component: 'RoleManagementTab',\n              roleId: roleId\n            });\n          }\n          return;\n        }\n      }\n      \n      console.log('Rolle erfolgreich gelscht');\n      if (onRolesChange) onRolesChange();\n    } catch (err) {\n      console.error(t('roleManagement.unhandledError'), err);\n      handleError(err);\n      \n      // Bei einem unbehandelten Fehler trotzdem versuchen, die Rollenliste zu aktualisieren\n      try {\n        await fetchRoles();\n      } catch (refreshError) {\n        console.error('Fehler beim Aktualisieren der Rollenliste nach fehlgeschlagenem Lschvorgang:', refreshError);\n      }\n    }\n  };\n\n  // Kopieren einer Rolle (fr Standardrollen)\n  const handleCopyRole = async (role: Role) => {\n    try {\n      if (!role || !role.id) {\n        handleError('Ungltige Rolle zum Kopieren', {\n          component: 'RoleManagementTab'\n        });\n        return;\n      }\n\n      // Kopie der Rolle erstellen mit angepasstem Namen\n      const copiedRoleData = {\n        name: `${role.name}-Kopie`,\n        description: role.description || '',\n        permissions: role.permissions\n          .filter(permission => permission.accessLevel !== 'none')\n          .map(permission => ({\n            entity: permission.entity,\n            entityType: permission.entityType,\n            accessLevel: permission.accessLevel\n          }))\n      };\n\n      console.log('DEBUGAUSGABE: Kopiere Rolle:', role.name, 'mit Daten:', copiedRoleData);\n\n      // Rolle erstellen\n      const response = await roleApi.create(copiedRoleData);\n      console.log('DEBUGAUSGABE: Rolle erfolgreich kopiert:', response.data);\n\n      // Optimistisches Update: Neue Rolle zur Liste hinzufgen\n      setRoles(prevRoles => [response.data, ...prevRoles]);\n      \n      // Bearbeitungsmodal fr die kopierte Rolle ffnen\n      prepareRoleForEditing(response.data);\n      \n      if (onRolesChange) onRolesChange();\n    } catch (err) {\n      console.error('DEBUGAUSGABE: Fehler beim Kopieren der Rolle:', err);\n      handleError(err, {\n        component: 'RoleManagementTab',\n        roleId: role.id\n      });\n    }\n  };\n\n  // Rolle zum Bearbeiten vorbereiten\n  const prepareRoleForEditing = async (role: Role) => {\n    // Verhindere das Bearbeiten von geschtzten Rollen\n    if (isStandardRole(role.id, role.name)) {\n      handleError('Geschtzte Systemrollen knnen nicht bearbeitet werden', {\n        component: 'RoleManagementTab',\n        roleId: role.id\n      });\n      return;\n    }\n    \n    // Alle mglichen Berechtigungen erstellen (Seiten, Tabellen und Buttons)\n    const allPermissions = [\n      ...defaultPages.map(page => ({\n        entity: page,\n        entityType: 'page',\n        // Fr die immer sichtbaren Seiten 'both' als Standard setzen\n        accessLevel: alwaysVisiblePages.includes(page) ? 'both' as AccessLevel : 'none' as AccessLevel\n      })),\n      ...defaultTables.map(table => ({\n        entity: table,\n        entityType: 'table',\n        accessLevel: 'none' as AccessLevel\n      })),\n      ...defaultButtons.map(button => ({\n        entity: button,\n        entityType: 'button',\n        accessLevel: 'none' as AccessLevel\n      }))\n    ];\n\n    // Vorhandene Berechtigungen bernehmen\n    role.permissions.forEach(permission => {\n      const existingPermIndex = allPermissions.findIndex(\n        p => p.entity === permission.entity && p.entityType === permission.entityType\n      );\n      \n      if (existingPermIndex !== -1) {\n        // Stelle sicher, dass alwaysVisiblePages immer 'both' als AccessLevel haben\n        if (permission.entityType === 'page' && alwaysVisiblePages.includes(permission.entity)) {\n          allPermissions[existingPermIndex].accessLevel = 'both';\n        } else {\n          allPermissions[existingPermIndex].accessLevel = permission.accessLevel;\n        }\n      }\n    });\n\n    setFormData({\n      name: role.name,\n      description: role.description || '',\n      permissions: allPermissions\n    });\n    \n    // Lade Branch-Zuweisungen der Rolle\n    if (role.id) {\n      try {\n        const branchResponse = await roleApi.getRoleBranches(role.id);\n        const branchData = branchResponse.data;\n        setAllBranches(branchData.allBranches || false);\n        setSelectedBranchIds(branchData.branches?.map((b: any) => b.id) || []);\n      } catch (error) {\n        console.error('Fehler beim Laden der Branch-Zuweisungen:', error);\n        setAllBranches(true);\n        setSelectedBranchIds([]);\n      }\n    }\n    \n    setEditingRole(role);\n    setIsModalOpen(true);\n  };\n\n  // Formular fr neue Rolle zurcksetzen\n  const resetForm = () => {\n    setEditingRole(null);\n    setAllBranches(true);\n    setSelectedBranchIds([]);\n    setFormData({\n      name: '',\n      description: '',\n      permissions: [\n        // Seiten-Berechtigungen\n        ...defaultPages.map(page => ({\n          entity: page,\n          entityType: 'page',\n          // Fr die immer sichtbaren Seiten 'both' als Standard setzen\n          accessLevel: alwaysVisiblePages.includes(page) ? 'both' as AccessLevel : 'none' as AccessLevel\n        })),\n        // Tabellen-Berechtigungen\n        ...defaultTables.map(table => ({\n          entity: table,\n          entityType: 'table',\n          accessLevel: 'none' as AccessLevel\n        })),\n        // Button-Berechtigungen\n        ...defaultButtons.map(button => ({\n          entity: button,\n          entityType: 'button',\n          accessLevel: 'none' as AccessLevel\n        }))\n      ]\n    });\n  };\n\n  // Setzt alle Seitenberechtigungen (auer die immer sichtbaren) auf den gleichen Wert\n  const setAllPagePermissions = (accessLevel: AccessLevel) => {\n    const newPermissions = [...formData.permissions];\n    \n    formData.permissions\n      .filter(p => p.entityType === 'page' && !alwaysVisiblePages.includes(p.entity))\n      .forEach(permission => {\n        const permIndex = formData.permissions.indexOf(permission);\n        newPermissions[permIndex] = {\n          ...permission,\n          accessLevel\n        };\n      });\n    \n    setFormData({ ...formData, permissions: newPermissions });\n  };\n\n  // Setzt alle Tabellen-Berechtigungen auf den gleichen Wert\n  const setAllTablePermissions = (accessLevel: AccessLevel) => {\n    const newPermissions = [...formData.permissions];\n    \n    formData.permissions\n      .filter(p => p.entityType === 'table')\n      .forEach(permission => {\n        const permIndex = formData.permissions.indexOf(permission);\n        newPermissions[permIndex] = {\n          ...permission,\n          accessLevel\n        };\n      });\n    \n    setFormData({ ...formData, permissions: newPermissions });\n  };\n\n  // Setzt alle Button-Berechtigungen auf den gleichen Wert\n  const setAllButtonPermissions = (accessLevel: AccessLevel) => {\n    const newPermissions = [...formData.permissions];\n    \n    formData.permissions\n      .filter(p => p.entityType === 'button')\n      .forEach(permission => {\n        const permIndex = formData.permissions.indexOf(permission);\n        newPermissions[permIndex] = {\n          ...permission,\n          accessLevel\n        };\n      });\n    \n    setFormData({ ...formData, permissions: newPermissions });\n  };\n\n  // Funktion zum Zhlen der aktiven Filter\n  const getActiveFilterCount = () => {\n    return filterConditions.length;\n  };\n\n  // Filtern und sortieren der Rollen\n  const filteredAndSortedRoles = useMemo(() => {\n    return roles\n      .filter(role => {\n        // Globale Suche\n        if (searchTerm) {\n          const searchLower = searchTerm.toLowerCase();\n          const matchesSearch = \n            role.name.toLowerCase().includes(searchLower) ||\n            (role.description && role.description.toLowerCase().includes(searchLower));\n          \n          if (!matchesSearch) return false;\n        }\n        \n        // Prfe erweiterte Filterbedingungen, wenn vorhanden\n        if (filterConditions.length > 0) {\n          // Implementiere die logische Verknpfung der Bedingungen (UND/ODER)\n          let result = filterConditions.length > 0;\n          \n          for (let i = 0; i < filterConditions.length; i++) {\n            const condition = filterConditions[i];\n            let conditionMet = false;\n            \n            switch (condition.column) {\n              case 'name':\n                if (condition.operator === 'equals') {\n                  conditionMet = role.name.toLowerCase() === (condition.value as string || '').toLowerCase();\n                } else if (condition.operator === 'contains') {\n                  conditionMet = role.name.toLowerCase().includes((condition.value as string || '').toLowerCase());\n                } else if (condition.operator === 'startsWith') {\n                  conditionMet = role.name.toLowerCase().startsWith((condition.value as string || '').toLowerCase());\n                }\n                break;\n              \n              case 'description':\n                if (!role.description) {\n                  conditionMet = false;\n                  break;\n                }\n                \n                if (condition.operator === 'equals') {\n                  conditionMet = role.description.toLowerCase() === (condition.value as string || '').toLowerCase();\n                } else if (condition.operator === 'contains') {\n                  conditionMet = role.description.toLowerCase().includes((condition.value as string || '').toLowerCase());\n                } else if (condition.operator === 'startsWith') {\n                  conditionMet = role.description.toLowerCase().startsWith((condition.value as string || '').toLowerCase());\n                }\n                break;\n              \n              case 'permissions':\n                // Vereinfachter Filter fr Berechtigungen - zhle die Anzahl der Berechtigungen mit dem angegebenen Level\n                const accessLevel = condition.value as AccessLevel;\n                const count = role.permissions.filter(p => p.accessLevel === accessLevel).length;\n                \n                if (condition.operator === 'greaterThan') {\n                  conditionMet = count > 0;\n                } else if (condition.operator === 'equals') {\n                  conditionMet = count > 0;\n                }\n                break;\n            }\n            \n            // Verknpfe das Ergebnis dieser Bedingung mit dem Gesamtergebnis\n            if (i === 0) {\n              result = conditionMet;\n            } else {\n              const operator = filterLogicalOperators[i - 1];\n              result = operator === 'AND' ? (result && conditionMet) : (result || conditionMet);\n            }\n          }\n          \n          if (!result) return false;\n        }\n        \n        return true;\n      })\n      .sort((a, b) => {\n        return a.name.localeCompare(b.name);\n      });\n  }, [roles, searchTerm, filterConditions, filterLogicalOperators]);\n\n  // Mobile Ansicht renderRoles-Funktion\n  const renderRoles = () => {\n    if (roles.length === 0) {\n      return (\n        <div className=\"p-4 bg-gray-50 rounded text-center\">\n          <p>Keine Rollen gefunden. Erstellen Sie eine neue Rolle mit dem Button oben.</p>\n        </div>\n      );\n    }\n    \n    if (isMobile) {\n      // Mobile Ansicht mit Karten\n      return (\n        <>\n          <div className=\"space-y-4\">\n            {filteredAndSortedRoles.slice(0, displayLimit).map((role) => (\n              <RoleCard \n                key={role.id} \n                role={role} \n                onEdit={prepareRoleForEditing}\n                onDelete={handleDelete}\n                onCopy={handleCopyRole}\n                canEdit={!readOnly && hasPermission('roles', 'write', 'table') && !isStandardRole(role.id, role.name)}\n                canDelete={!readOnly && hasPermission('roles', 'write', 'table') && !isStandardRole(role.id, role.name)}\n                canCopy={!readOnly && hasPermission('roles', 'write', 'table') && isStandardRole(role.id, role.name)}\n              />\n            ))}\n          </div>\n          \n          {/* \"Mehr anzeigen\" Button - Mobil */}\n          {filteredAndSortedRoles.length > displayLimit && (\n            <div className=\"mt-4 flex justify-center\">\n              <div className=\"relative group\">\n                <button\n                  className=\"p-2 text-blue-600 bg-white border border-blue-300 rounded-md hover:bg-blue-50 dark:bg-gray-800 dark:text-blue-400 dark:border-gray-700 dark:hover:bg-gray-700\"\n                  onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n                >\n                  <ChevronDownIcon className=\"h-5 w-5\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {`Mehr anzeigen (${filteredAndSortedRoles.length - displayLimit} verbleibend)`}\n                </div>\n              </div>\n            </div>\n          )}\n        </>\n      );\n    } else {\n      // Card-Ansicht fr grere Bildschirme\n      return (\n        <>\n          <div className=\"space-y-4\">\n            {filteredAndSortedRoles.slice(0, displayLimit).map((role) => (\n              <RoleCard \n                key={role.id} \n                role={role} \n                onEdit={prepareRoleForEditing}\n                onDelete={handleDelete}\n                onCopy={handleCopyRole}\n                canEdit={!readOnly && hasPermission('roles', 'write', 'table') && !isStandardRole(role.id, role.name)}\n                canDelete={!readOnly && hasPermission('roles', 'write', 'table') && !isStandardRole(role.id, role.name)}\n                canCopy={!readOnly && hasPermission('roles', 'write', 'table') && isStandardRole(role.id, role.name)}\n              />\n            ))}\n          </div>\n          \n          {/* \"Mehr anzeigen\" Button - Desktop */}\n          {filteredAndSortedRoles.length > displayLimit && (\n            <div className=\"mt-4 flex justify-center\">\n              <div className=\"relative group\">\n                <button\n                  className=\"p-2 text-blue-600 bg-white border border-blue-300 rounded-md hover:bg-blue-50 dark:bg-gray-800 dark:text-blue-400 dark:border-gray-700 dark:hover:bg-gray-700\"\n                  onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n                >\n                  <ChevronDownIcon className=\"h-5 w-5\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {`Mehr anzeigen (${filteredAndSortedRoles.length - displayLimit} verbleibend)`}\n                </div>\n              </div>\n            </div>\n          )}\n        </>\n      );\n    }\n  };\n\n  // Standard-Filter erstellen und speichern\n  useEffect(() => {\n    const createStandardFilters = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        \n        if (!token) {\n          console.error('Nicht authentifiziert');\n          return;\n        }\n\n        // Prfen, ob die Standard-Filter bereits existieren\n        const existingFiltersResponse = await axiosInstance.get(\n          API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(ROLES_TABLE_ID)\n        );\n\n        const existingFilters = existingFiltersResponse.data || [];\n        const alleFilterExists = existingFilters.some(filter => filter.name === 'Alle');\n\n        // Erstelle \"Alle\"-Filter, wenn er noch nicht existiert\n        if (!alleFilterExists) {\n          const alleFilter = {\n            tableId: ROLES_TABLE_ID,\n            name: 'Alle',\n            conditions: [],\n            operators: []\n          };\n\n          await axiosInstance.post(\n            API_ENDPOINTS.SAVED_FILTERS.BASE,\n            alleFilter\n          );\n          console.log('Alle-Filter fr Rollen erstellt');\n        }\n      } catch (error) {\n        console.error('Fehler beim Erstellen der Standard-Filter:', error);\n      }\n    };\n\n    createStandardFilters();\n  }, []);\n\n  // Initialer Default-Filter setzen (Controlled Mode)\n  useEffect(() => {\n    const setInitialFilter = async () => {\n      try {\n        const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(ROLES_TABLE_ID));\n        const filters = response.data;\n        \n        const alleFilter = filters.find((filter: any) => filter.name === 'Alle');\n        if (alleFilter) {\n          setActiveFilterName('Alle');\n          setSelectedFilterId(alleFilter.id);\n          applyFilterConditions(alleFilter.conditions, alleFilter.operators);\n        }\n      } catch (error) {\n        console.error('Fehler beim Setzen des initialen Filters:', error);\n      }\n    };\n\n    setInitialFilter();\n  }, []);\n\n  // Funktion zum Anwenden von Filterbedingungen\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n  };\n  \n  // Funktion zum Zurcksetzen der Filter\n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n  \n  // Filter Change Handler (Controlled Mode)\n  const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators);\n  };\n\n  return (\n    <div>\n      {/* Spaltenanzeige und Suche */}\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between mb-4\">\n          {/* Linke Seite: \"Neue Rolle erstellen\"-Button */}\n          <div className=\"flex items-center\">\n            {!readOnly && hasPermission('roles', 'write', 'table') && (\n              <div className=\"relative group\">\n                <button\n                  onClick={() => setIsModalOpen(true)}\n                  className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n                  style={{ width: '30.19px', height: '30.19px' }}\n                  aria-label={t('roles.createRole')}\n                >\n                  <PlusIcon className=\"h-4 w-4\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {t('roles.createRole')}\n                </div>\n              </div>\n            )}\n          </div>\n          \n          {/* Mitte: Titel - Kein Titel in der Mitte notwendig bei dieser Komponente, da der Tab-Header bereits den Titel zeigt */}\n          <div></div>\n          \n          {/* Rechte Seite: Suchfeld, Filter-Button, Spalten-Konfiguration */}\n          <div className=\"flex items-center gap-1.5\">\n            <input\n              type=\"text\"\n              placeholder=\"Suchen...\"\n              className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n            />\n            <div className=\"relative group ml-1\">\n              <button\n                className={`p-2 rounded-md ${getActiveFilterCount() > 0 ? 'bg-blue-50 text-blue-600' : 'hover:bg-gray-100'}`}\n                onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n              >\n                <FunnelIcon className=\"w-5 h-5\" />\n                {getActiveFilterCount() > 0 && (\n                  <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 text-white rounded-full text-xs flex items-center justify-center\">\n                    {getActiveFilterCount()}\n                  </span>\n                )}\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                Filter\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Filter-Modal */}\n        {isFilterModalOpen && (\n          <FilterPane\n            columns={[\n              { id: 'name', label: 'Name' },\n              { id: 'description', label: 'Beschreibung' },\n              { id: 'permissions', label: 'Berechtigungen' }\n            ]}\n            onApply={applyFilterConditions}\n            onReset={resetFilterConditions}\n            savedConditions={filterConditions}\n            savedOperators={filterLogicalOperators}\n            tableId={ROLES_TABLE_ID}\n          />\n        )}\n        \n        {/* Gespeicherte Filter als Tags anzeigen */}\n        <SavedFilterTags\n          tableId={ROLES_TABLE_ID}\n          onSelectFilter={applyFilterConditions}\n          onReset={resetFilterConditions}\n          activeFilterName={activeFilterName}\n          selectedFilterId={selectedFilterId}\n          onFilterChange={handleFilterChange}\n          defaultFilterName=\"Alle\"\n        />\n\n        {loading ? (\n          <div className=\"flex justify-center items-center py-8\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n          </div>\n        ) : (\n          renderRoles()\n        )}\n      </div>\n\n      {/* Modal/Sidepane fr Rollenerstellung/Bearbeitung */}\n      {isModalOpen && (\n        <>\n          {/* Mobile (unter 640px) - Modal */}\n          {isMobile ? (\n            <Dialog open={isModalOpen} onClose={() => setIsModalOpen(false)} className=\"relative z-50\">\n              <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n              \n              <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[calc(100vh-2rem)] flex flex-col overflow-hidden\">\n                  {/* Header */}\n                  <div className=\"px-6 py-4 border-b dark:border-gray-700 flex-shrink-0\">\n                    <div className=\"flex items-center justify-between\">\n                      <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                        {editingRole ? t('roles.editRole') : t('roles.createRole')}\n                      </Dialog.Title>\n                      <button\n                        onClick={() => setIsModalOpen(false)}\n                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                      >\n                        <XMarkIcon className=\"h-6 w-6\" />\n                      </button>\n                    </div>\n                  </div>\n                  \n                  {/* Form */}\n                  <form onSubmit={handleSubmit} className=\"flex flex-col flex-1 min-h-0\">\n                    {/* Content - scrollbarer Bereich */}\n                    <div className=\"flex-1 overflow-y-auto min-h-0\">\n                      <div className=\"p-6 space-y-5\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Name</label>\n                  <input\n                    type=\"text\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Beschreibung</label>\n                  <input\n                    type=\"text\"\n                    value={formData.description}\n                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n                  </div>\n                  \n                  {/* Branch-Zuweisungen */}\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      {t('roles.form.branchAssignment') || 'Branch-Zuweisung'}\n                    </label>\n                    <div className=\"space-y-3\">\n                      <label className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          checked={allBranches}\n                          onChange={(e) => {\n                            setAllBranches(e.target.checked);\n                            if (e.target.checked) {\n                              setSelectedBranchIds([]);\n                            }\n                          }}\n                          className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                        />\n                        <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                          {t('roles.form.allBranches') || 'Fr alle Branches gltig'}\n                        </span>\n                      </label>\n                      \n                      {!allBranches && (\n                        <div className=\"ml-6\">\n                          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                            {t('roles.form.specificBranches') || 'Spezifische Branches:'}\n                          </label>\n                          {loadingBranches ? (\n                            <div className=\"text-sm text-gray-500\">Lade Branches...</div>\n                          ) : branches.length === 0 ? (\n                            <div className=\"text-sm text-gray-500\">Keine Branches verfgbar</div>\n                          ) : (\n                            <div className=\"space-y-2 max-h-40 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-md p-2\">\n                              {branches.map((branch) => (\n                                <label key={branch.id} className=\"flex items-center\">\n                                  <input\n                                    type=\"checkbox\"\n                                    checked={selectedBranchIds.includes(branch.id)}\n                                    onChange={(e) => {\n                                      if (e.target.checked) {\n                                        setSelectedBranchIds([...selectedBranchIds, branch.id]);\n                                      } else {\n                                        setSelectedBranchIds(selectedBranchIds.filter(id => id !== branch.id));\n                                      }\n                                    }}\n                                    className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                                  />\n                                  <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                                    {branch.name}\n                                  </span>\n                                </label>\n                              ))}\n                            </div>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  \n                  <div className=\"mt-2\">\n                    <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('roles.form.detailedPermissions')}</label>\n                        {/* Bulk Actions - kompakt integriert */}\n                        <div className=\"flex flex-wrap items-center gap-1.5\">\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllPagePermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800\"\n                            >\n                              {t('roles.form.pagesChecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.activateAllPages')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllPagePermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              {t('roles.form.pagesUnchecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.deactivateAllPages')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllTablePermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800\"\n                            >\n                              {t('roles.form.tablesChecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.activateAllTables')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllTablePermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              {t('roles.form.tablesUnchecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.deactivateAllTables')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllButtonPermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800\"\n                            >\n                              {t('roles.form.buttonsChecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.activateAllButtons')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllButtonPermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              {t('roles.form.buttonsUnchecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.deactivateAllButtons')}\n                            </div>\n                          </div>\n                        </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-1 gap-4 overflow-y-auto border rounded-lg p-4 dark:border-gray-600\">\n                    {formData.permissions\n                      .filter(permission => \n                        permission.entityType === 'page'\n                      )\n                      .map((permission, index) => {\n                        const permIndex = formData.permissions.indexOf(permission);\n                        const isActive = permission.accessLevel === 'both';\n                        return (\n                          <div key={`permission-page-${permission.entity}-${index}`}>\n                            <div className=\"flex items-center justify-between\">\n                              <span className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{pageDisplayNames[permission.entity] || permission.entity}</span>\n                              <label className={`inline-flex items-center ${alwaysVisiblePages.includes(permission.entity) ? 'cursor-not-allowed opacity-80' : 'cursor-pointer'}`}>\n                                <input\n                                  type=\"checkbox\"\n                                  className=\"sr-only peer\"\n                                  checked={isActive}\n                                  disabled={alwaysVisiblePages.includes(permission.entity)}\n                                  onChange={() => {\n                                    const newPermissions = [...formData.permissions];\n                                    newPermissions[permIndex] = {\n                                      ...permission,\n                                      accessLevel: isActive ? 'none' : 'both'\n                                    };\n                                    setFormData({ ...formData, permissions: newPermissions });\n                                  }}\n                                />\n                                <div className={`relative w-11 h-6 ${alwaysVisiblePages.includes(permission.entity) ? 'bg-blue-600 dark:bg-blue-700' : 'bg-gray-200 dark:bg-gray-700'} peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700`}>\n                                  {alwaysVisiblePages.includes(permission.entity) && (\n                                    <span className=\"absolute inset-0 flex items-center justify-center text-xs text-white font-medium\">\n                                      Fix\n                                    </span>\n                                  )}\n                                </div>\n                              </label>\n                            </div>\n                            \n                            {/* Tabellen-Berechtigungen mit zugehrigen Buttons gruppiert */}\n                            {formData.permissions\n                              .filter(tablePerm => \n                                tablePerm.entityType === 'table' && \n                                tableToPageMapping[tablePerm.entity] === permission.entity\n                              )\n                              .sort((a, b) => {\n                                const aName = tableDisplayNames[a.entity] || a.entity;\n                                const bName = tableDisplayNames[b.entity] || b.entity;\n                                // Sortierung: users, roles, organization zuerst (in dieser Reihenfolge)\n                                const priorityOrder = ['users', 'roles', 'organization'];\n                                const aIndex = priorityOrder.indexOf(a.entity);\n                                const bIndex = priorityOrder.indexOf(b.entity);\n                                if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;\n                                if (aIndex !== -1) return -1;\n                                if (bIndex !== -1) return 1;\n                                return aName.localeCompare(bName);\n                              })\n                              .map((tablePerm, tableIndex) => {\n                                const tablePermIndex = formData.permissions.indexOf(tablePerm);\n                                const isTableActive = tablePerm.accessLevel === 'both';\n                                const tableEntity = tablePerm.entity;\n                                const tableDisplayName = tableDisplayNames[tableEntity] || tableEntity;\n                                \n                                // Finde alle Buttons, die zu dieser Tabelle gehren\n                                // Filtere Duplikate: task_* und todo_* sind dasselbe, nur task_* behalten\n                                const relatedButtons = formData.permissions\n                                  .filter(buttonPerm => \n                                    buttonPerm.entityType === 'button' && \n                                    buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                    buttonToTableMapping[buttonPerm.entity] === tableEntity &&\n                                    // Entferne todo_* Buttons wenn task_* existiert (sind dasselbe)\n                                    !(tableEntity === 'tasks' && buttonPerm.entity.startsWith('todo_'))\n                                  )\n                                  .sort((a, b) => {\n                                    const aName = buttonDisplayNames[a.entity] || a.entity;\n                                    const bName = buttonDisplayNames[b.entity] || b.entity;\n                                    // Logische Reihenfolge: Start, Stop, Erstellen, Bearbeiten, Lschen, dann alphabetisch\n                                    const order = [\n                                      t('roleManagement.buttonOrder.start'),\n                                      t('roleManagement.buttonOrder.stop'),\n                                      t('roleManagement.buttonOrder.create'),\n                                      t('roleManagement.buttonOrder.edit'),\n                                      t('roleManagement.buttonOrder.delete')\n                                    ];\n                                    const aIndex = order.indexOf(aName);\n                                    const bIndex = order.indexOf(bName);\n                                    if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;\n                                    if (aIndex !== -1) return -1;\n                                    if (bIndex !== -1) return 1;\n                                    return aName.localeCompare(bName);\n                                  });\n                                \n                                return (\n                                  <div key={`table-permission-${tableEntity}-${tableIndex}`} className=\"mt-3\">\n                                    {/* Tabelle selbst */}\n                                    <div className=\"flex items-center justify-between pl-6 border-l-2 border-blue-300 dark:border-blue-600\">\n                                      <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\"> {tableDisplayName}</span>\n                                      <label className=\"inline-flex items-center cursor-pointer\">\n                                        <input\n                                          type=\"checkbox\"\n                                          className=\"sr-only peer\"\n                                          checked={isTableActive}\n                                          onChange={() => {\n                                            const newPermissions = [...formData.permissions];\n                                            newPermissions[tablePermIndex] = {\n                                              ...tablePerm,\n                                              accessLevel: isTableActive ? 'none' : 'both'\n                                            };\n                                            setFormData({ ...formData, permissions: newPermissions });\n                                          }}\n                                        />\n                                        <div className=\"relative w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                        </div>\n                                      </label>\n                                    </div>\n                                    \n                                    {/* Zu dieser Tabelle gehrige Buttons */}\n                                    {relatedButtons.map((buttonPerm, buttonIndex) => {\n                                      const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                      const isButtonActive = buttonPerm.accessLevel === 'both';\n                                      const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                      return (\n                                        <div key={`button-permission-${buttonPerm.entity}-${buttonIndex}`} \n                                          className=\"flex items-center justify-between mt-2 pl-12 border-l-2 border-gray-300 dark:border-gray-600\">\n                                          <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                          <label className=\"inline-flex items-center cursor-pointer\">\n                                            <input\n                                              type=\"checkbox\"\n                                              className=\"sr-only peer\"\n                                              checked={isButtonActive}\n                                              onChange={() => {\n                                                const newPermissions = [...formData.permissions];\n                                                newPermissions[buttonPermIndex] = {\n                                                  ...buttonPerm,\n                                                  accessLevel: isButtonActive ? 'none' : 'both'\n                                                };\n                                                setFormData({ ...formData, permissions: newPermissions });\n                                              }}\n                                            />\n                                            <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                            </div>\n                                          </label>\n                                        </div>\n                                      );\n                                    })}\n                                  </div>\n                                );\n                              })\n                            }\n                              \n                              {/* Button-Berechtigungen ohne Tabelle-Zuordnung (am Ende) */}\n                              {formData.permissions\n                                .filter(buttonPerm => \n                                  buttonPerm.entityType === 'button' && \n                                  buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                  !buttonToTableMapping[buttonPerm.entity]\n                                )\n                                .sort((a, b) => {\n                                  const aName = buttonDisplayNames[a.entity] || a.entity;\n                                  const bName = buttonDisplayNames[b.entity] || b.entity;\n                                  return aName.localeCompare(bName);\n                                })\n                                .map((buttonPerm, buttonIndex) => {\n                                  const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                  const isButtonActive = buttonPerm.accessLevel === 'both';\n                                  const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                  return (\n                                    <div key={`button-permission-${buttonPerm.entity}-${buttonIndex}`} \n                                      className=\"flex items-center justify-between mt-2 pl-6 border-l-2 border-gray-300 dark:border-gray-600\">\n                                      <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                      <label className=\"inline-flex items-center cursor-pointer\">\n                                        <input\n                                          type=\"checkbox\"\n                                          className=\"sr-only peer\"\n                                          checked={isButtonActive}\n                                          onChange={() => {\n                                            const newPermissions = [...formData.permissions];\n                                            newPermissions[buttonPermIndex] = {\n                                              ...buttonPerm,\n                                              accessLevel: isButtonActive ? 'none' : 'both'\n                                            };\n                                            setFormData({ ...formData, permissions: newPermissions });\n                                          }}\n                                        />\n                                        <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                        </div>\n                                      </label>\n                          </div>\n                        );\n                      })\n                    }\n                            </div>\n                          );\n                        })\n                      }\n                    </div>\n                  </div>\n                    </div>\n                  </div>\n                  \n                  {/* Footer */}\n                  <div className=\"px-6 py-4 bg-gray-50 dark:bg-gray-700 flex justify-end gap-2 border-t dark:border-gray-600 flex-shrink-0\">\n                    <div className=\"relative group\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setIsModalOpen(false)}\n                        className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                      >\n                        <XMarkIcon className=\"h-5 w-5\" />\n                      </button>\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                        Abbrechen\n                      </div>\n                    </div>\n                    <div className=\"relative group\">\n                      <button\n                        type=\"submit\"\n                        className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                      >\n                        <CheckIcon className=\"h-5 w-5\" />\n                      </button>\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                        {editingRole ? 'Aktualisieren' : 'Erstellen'}\n                      </div>\n                    </div>\n                  </div>\n                </form>\n              </Dialog.Panel>\n            </div>\n          </Dialog>\n          ) : (\n            /* Desktop (ab 640px) - Sidepane */\n            /* WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition */\n            <>\n              {/* Backdrop - nur wenn offen und <= 1070px */}\n              {/* Hinweis: onClick entfernt, da Backdrop pointer-events: none hat, damit Hauptinhalt interaktiv bleibt */}\n              {isModalOpen && !isLargeScreen && (\n                <div \n                  className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n                  aria-hidden=\"true\" \n                  style={{\n                    opacity: isModalOpen ? 1 : 0,\n                    transition: 'opacity 300ms ease-out'\n                  }}\n                />\n              )}\n              \n              {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n              <div \n                className={`fixed top-16 bottom-0 right-0 max-w-2xl w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isModalOpen ? 'translate-x-0' : 'translate-x-full'}`}\n                style={{\n                  transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n                  pointerEvents: isModalOpen ? 'auto' : 'none'\n                }}\n                aria-hidden={!isModalOpen}\n                role=\"dialog\"\n                aria-modal={isModalOpen}\n              >\n                <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n                  <h2 className=\"text-lg font-semibold dark:text-white\">\n                    {editingRole ? 'Rolle bearbeiten' : 'Neue Rolle erstellen'}\n                  </h2>\n                  <button\n                    onClick={() => setIsModalOpen(false)}\n                    className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                  >\n                    <XMarkIcon className=\"h-6 w-6\" />\n                  </button>\n                </div>\n\n                <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n                  <form onSubmit={handleSubmit} className=\"space-y-5\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('roles.form.name')}</label>\n                        <input\n                          type=\"text\"\n                          value={formData.name}\n                          onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                          className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('roles.form.description')}</label>\n                        <input\n                          type=\"text\"\n                          value={formData.description}\n                          onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                          className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                        />\n                      </div>\n                    </div>\n                    \n                    <div className=\"mt-2\">\n                      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Detaillierte Berechtigungen</label>\n                        {/* Bulk Actions */}\n                        <div className=\"flex flex-wrap items-center gap-1.5\">\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllPagePermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800\"\n                            >\n                              Seiten \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Seiten aktivieren\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllPagePermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              Seiten \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Seiten deaktivieren\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllTablePermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800\"\n                            >\n                              Tabellen \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Tabellen aktivieren\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllTablePermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              Tabellen \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Tabellen deaktivieren\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllButtonPermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800\"\n                            >\n                              Buttons \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Buttons aktivieren\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllButtonPermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              Buttons \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Buttons deaktivieren\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <div className=\"grid grid-cols-1 gap-4 overflow-y-auto border rounded-lg p-4 dark:border-gray-600 max-h-[60vh]\">\n                        {formData.permissions\n                          .filter(permission => \n                            permission.entityType === 'page'\n                          )\n                          .map((permission, index) => {\n                            const permIndex = formData.permissions.indexOf(permission);\n                            const isActive = permission.accessLevel === 'both';\n                            return (\n                              <div key={`permission-page-desktop-${permission.entity}-${index}`}>\n                                <div className=\"flex items-center justify-between\">\n                                  <span className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{pageDisplayNames[permission.entity] || permission.entity}</span>\n                                  <label className={`inline-flex items-center ${alwaysVisiblePages.includes(permission.entity) ? 'cursor-not-allowed opacity-80' : 'cursor-pointer'}`}>\n                                    <input\n                                      type=\"checkbox\"\n                                      className=\"sr-only peer\"\n                                      checked={isActive}\n                                      disabled={alwaysVisiblePages.includes(permission.entity)}\n                                      onChange={() => {\n                                        const newPermissions = [...formData.permissions];\n                                        newPermissions[permIndex] = {\n                                          ...permission,\n                                          accessLevel: isActive ? 'none' : 'both'\n                                        };\n                                        setFormData({ ...formData, permissions: newPermissions });\n                                      }}\n                                    />\n                                    <div className={`relative w-11 h-6 ${alwaysVisiblePages.includes(permission.entity) ? 'bg-blue-600 dark:bg-blue-700' : 'bg-gray-200 dark:bg-gray-700'} peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700`}>\n                                      {alwaysVisiblePages.includes(permission.entity) && (\n                                        <span className=\"absolute inset-0 flex items-center justify-center text-xs text-white font-medium\">\n                                          Fix\n                                        </span>\n                                      )}\n                                    </div>\n                                  </label>\n                                </div>\n                                \n                                {/* Tabellen-Berechtigungen mit zugehrigen Buttons gruppiert */}\n                                {formData.permissions\n                                  .filter(tablePerm => \n                                    tablePerm.entityType === 'table' && \n                                    tableToPageMapping[tablePerm.entity] === permission.entity\n                                  )\n                                  .sort((a, b) => {\n                                    const aName = tableDisplayNames[a.entity] || a.entity;\n                                    const bName = tableDisplayNames[b.entity] || b.entity;\n                                    return aName.localeCompare(bName);\n                                  })\n                                  .map((tablePerm, tableIndex) => {\n                                    const tablePermIndex = formData.permissions.indexOf(tablePerm);\n                                    const isTableActive = tablePerm.accessLevel === 'both';\n                                    const tableEntity = tablePerm.entity;\n                                    const tableDisplayName = tableDisplayNames[tableEntity] || tableEntity;\n                                    \n                                    // Finde alle Buttons, die zu dieser Tabelle gehren\n                                    const relatedButtons = formData.permissions\n                                      .filter(buttonPerm => \n                                        buttonPerm.entityType === 'button' && \n                                        buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                        buttonToTableMapping[buttonPerm.entity] === tableEntity &&\n                                        !(tableEntity === 'tasks' && buttonPerm.entity.startsWith('todo_'))\n                                      )\n                                      .sort((a, b) => {\n                                        const aName = buttonDisplayNames[a.entity] || a.entity;\n                                        const bName = buttonDisplayNames[b.entity] || b.entity;\n                                        const order = [\n                                      t('roleManagement.buttonOrder.start'),\n                                      t('roleManagement.buttonOrder.stop'),\n                                      t('roleManagement.buttonOrder.create'),\n                                      t('roleManagement.buttonOrder.edit'),\n                                      t('roleManagement.buttonOrder.delete')\n                                    ];\n                                        const aIndex = order.indexOf(aName);\n                                        const bIndex = order.indexOf(bName);\n                                        if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;\n                                        if (aIndex !== -1) return -1;\n                                        if (bIndex !== -1) return 1;\n                                        return aName.localeCompare(bName);\n                                      });\n                                    \n                                    return (\n                                      <div key={`table-permission-desktop-${tableEntity}-${tableIndex}`} className=\"mt-3\">\n                                        {/* Tabelle selbst */}\n                                        <div className=\"flex items-center justify-between pl-6 border-l-2 border-blue-300 dark:border-blue-600\">\n                                          <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\"> {tableDisplayName}</span>\n                                          <label className=\"inline-flex items-center cursor-pointer\">\n                                            <input\n                                              type=\"checkbox\"\n                                              className=\"sr-only peer\"\n                                              checked={isTableActive}\n                                              onChange={() => {\n                                                const newPermissions = [...formData.permissions];\n                                                newPermissions[tablePermIndex] = {\n                                                  ...tablePerm,\n                                                  accessLevel: isTableActive ? 'none' : 'both'\n                                                };\n                                                setFormData({ ...formData, permissions: newPermissions });\n                                              }}\n                                            />\n                                            <div className=\"relative w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                            </div>\n                                          </label>\n                                        </div>\n                                        \n                                        {/* Zu dieser Tabelle gehrige Buttons */}\n                                        {relatedButtons.map((buttonPerm, buttonIndex) => {\n                                          const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                          const isButtonActive = buttonPerm.accessLevel === 'both';\n                                          const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                          return (\n                                            <div key={`button-permission-desktop-${buttonPerm.entity}-${buttonIndex}`} \n                                              className=\"flex items-center justify-between mt-2 pl-12 border-l-2 border-gray-300 dark:border-gray-600\">\n                                              <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                              <label className=\"inline-flex items-center cursor-pointer\">\n                                                <input\n                                                  type=\"checkbox\"\n                                                  className=\"sr-only peer\"\n                                                  checked={isButtonActive}\n                                                  onChange={() => {\n                                                    const newPermissions = [...formData.permissions];\n                                                    newPermissions[buttonPermIndex] = {\n                                                      ...buttonPerm,\n                                                      accessLevel: isButtonActive ? 'none' : 'both'\n                                                    };\n                                                    setFormData({ ...formData, permissions: newPermissions });\n                                                  }}\n                                                />\n                                                <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                                </div>\n                                              </label>\n                                            </div>\n                                          );\n                                        })}\n                                      </div>\n                                    );\n                                  })\n                                }\n                                  \n                                {/* Button-Berechtigungen ohne Tabelle-Zuordnung (am Ende) */}\n                                {formData.permissions\n                                  .filter(buttonPerm => \n                                    buttonPerm.entityType === 'button' && \n                                    buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                    !buttonToTableMapping[buttonPerm.entity]\n                                  )\n                                  .sort((a, b) => {\n                                    const aName = buttonDisplayNames[a.entity] || a.entity;\n                                    const bName = buttonDisplayNames[b.entity] || b.entity;\n                                    return aName.localeCompare(bName);\n                                  })\n                                  .map((buttonPerm, buttonIndex) => {\n                                    const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                    const isButtonActive = buttonPerm.accessLevel === 'both';\n                                    const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                    return (\n                                      <div key={`button-permission-desktop-${buttonPerm.entity}-${buttonIndex}`} \n                                        className=\"flex items-center justify-between mt-2 pl-6 border-l-2 border-gray-300 dark:border-gray-600\">\n                                        <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                        <label className=\"inline-flex items-center cursor-pointer\">\n                                          <input\n                                            type=\"checkbox\"\n                                            className=\"sr-only peer\"\n                                            checked={isButtonActive}\n                                            onChange={() => {\n                                              const newPermissions = [...formData.permissions];\n                                              newPermissions[buttonPermIndex] = {\n                                                ...buttonPerm,\n                                                accessLevel: isButtonActive ? 'none' : 'both'\n                                              };\n                                              setFormData({ ...formData, permissions: newPermissions });\n                                            }}\n                                          />\n                                          <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                          </div>\n                                        </label>\n                                      </div>\n                                    );\n                                  })\n                                }\n                              </div>\n                            );\n                          })\n                        }\n                      </div>\n                    </div>\n\n                    {/* Buttons */}\n                    <div className=\"flex justify-end pt-4 gap-2\">\n                      <div className=\"relative group\">\n                        <button\n                          type=\"button\"\n                          onClick={() => setIsModalOpen(false)}\n                          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                        >\n                          <XMarkIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          Abbrechen\n                        </div>\n                      </div>\n                      <div className=\"relative group\">\n                        <button\n                          type=\"submit\"\n                          className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors\"\n                        >\n                          <CheckIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {editingRole ? 'Aktualisieren' : 'Erstellen'}\n                        </div>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default RoleManagementTab; ","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { PencilIcon, TrashIcon, PlusIcon, XMarkIcon, CheckIcon, FunnelIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport axiosInstance from '../config/axios.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport FilterPane from '../components/FilterPane.tsx';\nimport SavedFilterTags from '../components/SavedFilterTags.tsx';\nimport { FilterCondition } from '../components/FilterRow.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface Branch {\n    id: number;\n    name: string;\n    whatsappSettings?: any;\n    lobbyPmsSettings?: any;\n    boldPaymentSettings?: any;\n    doorSystemSettings?: any;\n    emailSettings?: any;\n}\n\ninterface BranchManagementTabProps {\n    onError: (error: string) => void;\n}\n\n// BranchCard-Komponente fr mobile und Desktop-Ansicht\nconst BranchCard: React.FC<{\n    branch: Branch;\n    onEdit: (branch: Branch) => void;\n    onDelete: (branchId: number) => void;\n    canEdit: boolean;\n    canDelete: boolean;\n}> = ({ branch, onEdit, onDelete, canEdit, canDelete }) => {\n    const { t } = useTranslation();\n    return (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4\">\n            {/* Header mit Branchname und Aktionen */}\n            <div className=\"flex justify-between items-start mb-2\">\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">{branch.name}</h3>\n                \n                <div className=\"flex space-x-2\">\n                    {canEdit && (\n                        <div className=\"relative group\">\n                            <button\n                                onClick={() => onEdit(branch)}\n                                className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n                            >\n                                <PencilIcon className=\"h-5 w-5\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('common.edit', { defaultValue: 'Bearbeiten' })}\n                            </div>\n                        </div>\n                    )}\n                    \n                    {canDelete && (\n                        <div className=\"relative group\">\n                            <button\n                                onClick={() => onDelete(branch.id)}\n                                className=\"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 p-1\"\n                            >\n                                <TrashIcon className=\"h-5 w-5\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('common.delete', { defaultValue: 'Lschen' })}\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\n// TableID fr gespeicherte Filter\nconst BRANCHES_TABLE_ID = 'branches-table';\n\nconst BranchManagementTab: React.FC<BranchManagementTabProps> = ({ onError }) => {\n    const { t } = useTranslation();\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [editingBranch, setEditingBranch] = useState<Branch | null>(null);\n    const [branches, setBranches] = useState<Branch[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [formData, setFormData] = useState({ \n        name: '',\n        whatsappSettings: {\n            provider: 'whatsapp-business-api' as 'twilio' | 'whatsapp-business-api',\n            apiKey: '',\n            apiSecret: '',\n            phoneNumberId: '',\n            ai: {\n                enabled: false,\n                model: 'gpt-4o',\n                systemPrompt: '',\n                rules: [] as string[],\n                sources: [] as string[],\n                temperature: 0.7,\n                maxTokens: 500\n            }\n        },\n        lobbyPmsSettings: {\n            apiUrl: '',\n            apiKey: '',\n            propertyId: '',\n            autoCreateTasks: false,\n            lateCheckInThreshold: '22:00',\n            notificationChannels: ['email'] as string[],\n            autoSendInvitation: false\n        },\n        boldPaymentSettings: {\n            apiKey: '',\n            merchantId: '',\n            environment: 'sandbox' as 'sandbox' | 'production'\n        },\n        doorSystemSettings: {\n            clientId: '',\n            clientSecret: '',\n            username: '',\n            password: '',\n            apiUrl: 'https://euopen.ttlock.com',\n            lockIds: [] as string[],\n            appName: 'TTLock'\n        },\n        emailSettings: {\n            smtpHost: '',\n            smtpPort: 587,\n            smtpUser: '',\n            smtpPass: '',\n            smtpFromEmail: '',\n            smtpFromName: '',\n            imap: {\n                enabled: false,\n                host: '',\n                port: 993,\n                secure: true,\n                user: '',\n                password: '',\n                folder: 'INBOX',\n                processedFolder: ''\n            }\n        }\n    });\n    const [activeSettingsTab, setActiveSettingsTab] = useState<'whatsapp' | 'lobbypms' | 'boldpayment' | 'doorsystem' | 'email'>('whatsapp');\n    const [showSecrets, setShowSecrets] = useState<Record<string, boolean>>({});\n    const [searchTerm, setSearchTerm] = useState('');\n    const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n    const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n    const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n    const [activeFilterName, setActiveFilterName] = useState<string>('');\n    const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n    const [displayLimit, setDisplayLimit] = useState(10);\n    const { hasPermission } = usePermissions();\n    const { openSidepane, closeSidepane } = useSidepane();\n\n    // Berechtigungen prfen\n    const canCreate = hasPermission('branches', 'write', 'table');\n    const canEdit = hasPermission('branches', 'write', 'table');\n    const canDelete = hasPermission('branches', 'write', 'table');\n\n    // Branches laden\n    const fetchBranches = useCallback(async () => {\n        setLoading(true);\n        try {\n            const response = await axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE);\n            setBranches(response.data);\n        } catch (error: any) {\n            console.error('Fehler beim Laden der Niederlassungen:', error);\n            const errorMessage = error.response?.data?.message || t('branches.loadError');\n            onError(errorMessage);\n        } finally {\n            setLoading(false);\n        }\n    }, [onError]);\n\n    useEffect(() => {\n        fetchBranches();\n    }, [fetchBranches]);\n\n    // Sidepane ffnen/schlieen basierend auf Modal-Status\n    useEffect(() => {\n        if (isModalOpen) {\n            openSidepane();\n        } else {\n            closeSidepane();\n        }\n        \n        return () => {\n            closeSidepane();\n        };\n    }, [isModalOpen, openSidepane, closeSidepane]);\n\n    // Formular zurcksetzen\n    const resetForm = () => {\n        setFormData({ \n            name: '',\n            whatsappSettings: {\n                provider: 'whatsapp-business-api' as 'twilio' | 'whatsapp-business-api',\n                apiKey: '',\n                apiSecret: '',\n                phoneNumberId: '',\n                ai: {\n                    enabled: false,\n                    model: 'gpt-4o',\n                    systemPrompt: '',\n                    rules: [] as string[],\n                    sources: [] as string[],\n                    temperature: 0.7,\n                    maxTokens: 500\n                }\n            },\n            lobbyPmsSettings: {\n                apiUrl: '',\n                apiKey: '',\n                propertyId: '',\n                autoCreateTasks: false,\n                lateCheckInThreshold: '22:00',\n                notificationChannels: ['email'] as string[],\n                autoSendInvitation: false\n            },\n            boldPaymentSettings: {\n                apiKey: '',\n                merchantId: '',\n                environment: 'sandbox' as 'sandbox' | 'production'\n            },\n            doorSystemSettings: {\n                clientId: '',\n                clientSecret: '',\n                username: '',\n                password: '',\n                apiUrl: 'https://euopen.ttlock.com',\n                lockIds: [] as string[],\n                appName: 'TTLock'\n            },\n            sireSettings: {\n                enabled: false,\n                autoRegisterOnCheckIn: false,\n                apiUrl: '',\n                apiKey: '',\n                apiSecret: '',\n                propertyCode: ''\n            },\n            emailSettings: {\n                smtpHost: '',\n                smtpPort: 587,\n                smtpUser: '',\n                smtpPass: '',\n                smtpFromEmail: '',\n                smtpFromName: '',\n                imap: {\n                    enabled: false,\n                    host: '',\n                    port: 993,\n                    secure: true,\n                    user: '',\n                    password: '',\n                    folder: 'INBOX',\n                    processedFolder: ''\n                }\n            }\n        });\n        setActiveSettingsTab('whatsapp');\n        setEditingBranch(null);\n    };\n\n    // Modal ffnen fr neue Branch\n    const handleCreate = () => {\n        resetForm();\n        setIsModalOpen(true);\n    };\n\n    // Modal ffnen fr Bearbeitung\n    const handleEdit = async (branch: Branch) => {\n        setEditingBranch(branch);\n        const existingWhatsapp = branch.whatsappSettings || {};\n        const existingLobbyPms = branch.lobbyPmsSettings || {};\n        const existingBoldPayment = branch.boldPaymentSettings || {};\n        const existingDoorSystem = branch.doorSystemSettings || {};\n        const existingEmail = branch.emailSettings || {};\n        \n        setFormData({ \n            name: branch.name,\n            whatsappSettings: {\n                provider: existingWhatsapp.provider || 'whatsapp-business-api',\n                apiKey: existingWhatsapp.apiKey || '',\n                apiSecret: existingWhatsapp.apiSecret || '',\n                phoneNumberId: existingWhatsapp.phoneNumberId || '',\n                ai: existingWhatsapp.ai || {\n                    enabled: false,\n                    model: 'gpt-4o',\n                    systemPrompt: '',\n                    rules: [],\n                    sources: [],\n                    temperature: 0.7,\n                    maxTokens: 500\n                }\n            },\n            lobbyPmsSettings: {\n                apiUrl: existingLobbyPms.apiUrl || '',\n                apiKey: existingLobbyPms.apiKey || '',\n                propertyId: existingLobbyPms.propertyId || '',\n                autoCreateTasks: existingLobbyPms.autoCreateTasks || false,\n                lateCheckInThreshold: existingLobbyPms.lateCheckInThreshold || '22:00',\n                notificationChannels: existingLobbyPms.notificationChannels || ['email'],\n                autoSendInvitation: existingLobbyPms.autoSendInvitation || false\n            },\n            boldPaymentSettings: {\n                apiKey: existingBoldPayment.apiKey || '',\n                merchantId: existingBoldPayment.merchantId || '',\n                environment: existingBoldPayment.environment || 'sandbox'\n            },\n            doorSystemSettings: {\n                clientId: existingDoorSystem.clientId || '',\n                clientSecret: existingDoorSystem.clientSecret || '',\n                username: existingDoorSystem.username || '',\n                password: existingDoorSystem.password || '',\n                apiUrl: existingDoorSystem.apiUrl || 'https://euopen.ttlock.com',\n                lockIds: existingDoorSystem.lockIds || [],\n                appName: existingDoorSystem.appName || 'TTLock'\n            },\n            emailSettings: {\n                smtpHost: existingEmail.smtpHost || '',\n                smtpPort: existingEmail.smtpPort || 587,\n                smtpUser: existingEmail.smtpUser || '',\n                smtpPass: existingEmail.smtpPass || '',\n                smtpFromEmail: existingEmail.smtpFromEmail || '',\n                smtpFromName: existingEmail.smtpFromName || '',\n                imap: existingEmail.imap || {\n                    enabled: false,\n                    host: '',\n                    port: 993,\n                    secure: true,\n                    user: '',\n                    password: '',\n                    folder: 'INBOX',\n                    processedFolder: ''\n                }\n            }\n        });\n        setIsModalOpen(true);\n    };\n\n    // Modal schlieen\n    const handleCloseModal = () => {\n        setIsModalOpen(false);\n        resetForm();\n    };\n\n    // Formular absenden\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        \n        if (!formData.name.trim()) {\n            onError(t('branches.nameRequired'));\n            return;\n        }\n\n        try {\n            if (editingBranch) {\n                // Branch aktualisieren\n                await axiosInstance.put(API_ENDPOINTS.BRANCHES.UPDATE(editingBranch.id), {\n                    name: formData.name.trim(),\n                    whatsappSettings: formData.whatsappSettings,\n                    lobbyPmsSettings: formData.lobbyPmsSettings,\n                    boldPaymentSettings: formData.boldPaymentSettings,\n                    doorSystemSettings: formData.doorSystemSettings,\n                    emailSettings: formData.emailSettings\n                });\n            } else {\n                // Neue Branch erstellen\n                await axiosInstance.post(API_ENDPOINTS.BRANCHES.CREATE, {\n                    name: formData.name.trim()\n                });\n            }\n            \n            await fetchBranches();\n            handleCloseModal();\n        } catch (error: any) {\n            console.error('Fehler beim Speichern der Niederlassung:', error);\n            const errorMessage = error.response?.data?.message || t('branches.saveError');\n            onError(errorMessage);\n        }\n    };\n\n    // Branch lschen\n    const handleDelete = async (branchId: number) => {\n        if (!window.confirm(t('branches.deleteConfirm', { defaultValue: 'Mchten Sie diese Niederlassung wirklich lschen?' }))) {\n            return;\n        }\n\n        try {\n            await axiosInstance.delete(API_ENDPOINTS.BRANCHES.DELETE(branchId));\n            await fetchBranches();\n        } catch (error: any) {\n            console.error('Fehler beim Lschen der Niederlassung:', error);\n            const errorMessage = error.response?.data?.message || t('branches.deleteError');\n            onError(errorMessage);\n        }\n    };\n\n    // Funktion zum Zhlen der aktiven Filter\n    const getActiveFilterCount = () => {\n        return filterConditions.length;\n    };\n\n    // Filtern und sortieren der Branches\n    const filteredAndSortedBranches = useMemo(() => {\n        return branches\n            .filter(branch => {\n                // Globale Suche\n                if (searchTerm) {\n                    const searchLower = searchTerm.toLowerCase();\n                    const matchesSearch = branch.name.toLowerCase().includes(searchLower);\n                    \n                    if (!matchesSearch) return false;\n                }\n                \n                // Prfe erweiterte Filterbedingungen, wenn vorhanden\n                if (filterConditions.length > 0) {\n                    let result = filterConditions.length > 0;\n                    \n                    for (let i = 0; i < filterConditions.length; i++) {\n                        const condition = filterConditions[i];\n                        let conditionMet = false;\n                        \n                        switch (condition.column) {\n                            case 'name':\n                                if (condition.operator === 'equals') {\n                                    conditionMet = branch.name.toLowerCase() === (condition.value as string || '').toLowerCase();\n                                } else if (condition.operator === 'contains') {\n                                    conditionMet = branch.name.toLowerCase().includes((condition.value as string || '').toLowerCase());\n                                } else if (condition.operator === 'startsWith') {\n                                    conditionMet = branch.name.toLowerCase().startsWith((condition.value as string || '').toLowerCase());\n                                }\n                                break;\n                        }\n                        \n                        // Verknpfe das Ergebnis dieser Bedingung mit dem Gesamtergebnis\n                        if (i === 0) {\n                            result = conditionMet;\n                        } else {\n                            const operator = filterLogicalOperators[i - 1];\n                            result = operator === 'AND' ? (result && conditionMet) : (result || conditionMet);\n                        }\n                    }\n                    \n                    if (!result) return false;\n                }\n                \n                return true;\n            })\n            .sort((a, b) => {\n                return a.name.localeCompare(b.name);\n            });\n    }, [branches, searchTerm, filterConditions, filterLogicalOperators]);\n\n    // Funktion zum Anwenden von Filterbedingungen\n    const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n        setFilterConditions(conditions);\n        setFilterLogicalOperators(operators);\n    };\n    \n    // Funktion zum Zurcksetzen der Filter\n    const resetFilterConditions = () => {\n        setFilterConditions([]);\n        setFilterLogicalOperators([]);\n        setActiveFilterName('');\n        setSelectedFilterId(null);\n    };\n    \n    // Filter Change Handler (Controlled Mode)\n    const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n        setActiveFilterName(name);\n        setSelectedFilterId(id);\n        applyFilterConditions(conditions, operators);\n    };\n\n    // Standard-Filter erstellen und speichern\n    useEffect(() => {\n        const createStandardFilters = async () => {\n            try {\n                const token = localStorage.getItem('token');\n                \n                if (!token) {\n                    console.error(t('common.notAuthenticated'));\n                    return;\n                }\n\n                // Prfen, ob die Standard-Filter bereits existieren\n                const existingFiltersResponse = await axiosInstance.get(\n                    API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(BRANCHES_TABLE_ID)\n                );\n\n                const existingFilters = existingFiltersResponse.data || [];\n                const alleFilterExists = existingFilters.some((filter: any) => filter.name === 'Alle');\n\n                // Erstelle \"Alle\"-Filter, wenn er noch nicht existiert\n                if (!alleFilterExists) {\n                    const alleFilter = {\n                        tableId: BRANCHES_TABLE_ID,\n                        name: 'Alle',\n                        conditions: [],\n                        operators: []\n                    };\n\n                    await axiosInstance.post(\n                        API_ENDPOINTS.SAVED_FILTERS.BASE,\n                        alleFilter\n                    );\n                    console.log(t('branches.filterCreated'));\n                }\n            } catch (error) {\n                console.error(t('branches.createStandardFiltersError'), error);\n            }\n        };\n\n        createStandardFilters();\n    }, []);\n\n    // Initialer Default-Filter setzen (Controlled Mode)\n    useEffect(() => {\n        const setInitialFilter = async () => {\n            try {\n                const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(BRANCHES_TABLE_ID));\n                const filters = response.data;\n                \n                const alleFilter = filters.find((filter: any) => filter.name === 'Alle');\n                if (alleFilter) {\n                    setActiveFilterName('Alle');\n                    setSelectedFilterId(alleFilter.id);\n                    applyFilterConditions(alleFilter.conditions, alleFilter.operators);\n                }\n            } catch (error) {\n                console.error(t('branches.setInitialFilterError'), error);\n            }\n        };\n\n        setInitialFilter();\n    }, []);\n\n    // Branches rendern\n    const renderBranches = () => {\n        if (filteredAndSortedBranches.length === 0) {\n            return (\n                <div className=\"p-4 bg-gray-50 dark:bg-gray-700 rounded text-center\">\n                    <p className=\"text-gray-600 dark:text-gray-400\">\n                        {t('branches.noBranches', { defaultValue: 'Keine Niederlassungen gefunden. Erstellen Sie eine neue Niederlassung mit dem Button oben.' })}\n                    </p>\n                </div>\n            );\n        }\n        \n        // Card-Ansicht\n        return (\n            <>\n                <div className=\"space-y-4\">\n                    {filteredAndSortedBranches.slice(0, displayLimit).map((branch) => (\n                        <BranchCard \n                            key={branch.id} \n                            branch={branch} \n                            onEdit={handleEdit}\n                            onDelete={handleDelete}\n                            canEdit={canEdit}\n                            canDelete={canDelete}\n                        />\n                    ))}\n                </div>\n                \n                {/* \"Mehr anzeigen\" Button */}\n                {filteredAndSortedBranches.length > displayLimit && (\n                    <div className=\"mt-4 flex justify-center\">\n                        <button\n                            className=\"px-4 py-2 text-sm font-medium text-blue-600 bg-white border border-blue-300 rounded-md hover:bg-blue-50 dark:bg-gray-800 dark:text-blue-400 dark:border-gray-700 dark:hover:bg-gray-700\"\n                            onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n                        >\n                            {t('common.showMore', { defaultValue: 'Mehr anzeigen' })} ({filteredAndSortedBranches.length - displayLimit} {t('common.remaining', { defaultValue: 'verbleibend' })})\n                        </button>\n                    </div>\n                )}\n            </>\n        );\n    };\n\n    // Mobile-Erkennung\n    const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n    \n    useEffect(() => {\n        const handleResize = () => {\n            setIsMobile(window.innerWidth < 640);\n        };\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, []);\n\n    return (\n        <div>\n            {/* Spaltenanzeige und Suche */}\n            <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between mb-4\">\n                    {/* Linke Seite: \"Neue Niederlassung erstellen\"-Button */}\n                    <div className=\"flex items-center\">\n                        {canCreate && (\n                            <div className=\"relative group\">\n                                <button\n                                    onClick={handleCreate}\n                                    className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n                                    style={{ width: '30.19px', height: '30.19px' }}\n                                    aria-label={t('branches.create', { defaultValue: 'Neue Niederlassung' })}\n                                >\n                                    <PlusIcon className=\"h-4 w-4\" />\n                                </button>\n                                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                    {t('branches.create', { defaultValue: 'Neue Niederlassung' })}\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                    \n                    {/* Mitte: Titel - Kein Titel in der Mitte notwendig bei dieser Komponente, da der Tab-Header bereits den Titel zeigt */}\n                    <div></div>\n                    \n                    {/* Rechte Seite: Suchfeld, Filter-Button */}\n                    <div className=\"flex items-center gap-1.5\">\n                        <input\n                            type=\"text\"\n                            placeholder={t('common.search', { defaultValue: 'Suchen...' })}\n                            className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                        />\n                        <div className=\"relative group ml-1\">\n                            <button\n                                className={`p-2 rounded-md ${getActiveFilterCount() > 0 ? 'bg-blue-50 text-blue-600' : 'hover:bg-gray-100'} relative`}\n                                onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n                            >\n                                <FunnelIcon className=\"w-5 h-5\" />\n                                {getActiveFilterCount() > 0 && (\n                                    <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 text-white rounded-full text-xs flex items-center justify-center\">\n                                        {getActiveFilterCount()}\n                                    </span>\n                                )}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('common.filter', { defaultValue: 'Filter' })}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Filter-Modal */}\n                {isFilterModalOpen && (\n                    <FilterPane\n                        columns={[\n                            { id: 'name', label: t('branches.name', { defaultValue: 'Name' }) }\n                        ]}\n                        onApply={applyFilterConditions}\n                        onReset={resetFilterConditions}\n                        savedConditions={filterConditions}\n                        savedOperators={filterLogicalOperators}\n                        tableId={BRANCHES_TABLE_ID}\n                    />\n                )}\n                \n                {/* Gespeicherte Filter als Tags anzeigen */}\n                <SavedFilterTags\n                    tableId={BRANCHES_TABLE_ID}\n                    onSelectFilter={applyFilterConditions}\n                    onReset={resetFilterConditions}\n                    activeFilterName={activeFilterName}\n                    selectedFilterId={selectedFilterId}\n                    onFilterChange={handleFilterChange}\n                    defaultFilterName=\"Alle\"\n                />\n\n                {loading ? (\n                    <div className=\"flex justify-center items-center py-8\">\n                        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n                    </div>\n                ) : (\n                    renderBranches()\n                )}\n            </div>\n\n            {/* Modal/Sidepane fr Branch-Erstellung/Bearbeitung */}\n            {isModalOpen && (\n                <>\n                    {/* Mobile (unter 640px) - Modal */}\n                    {isMobile ? (\n                        <Dialog open={isModalOpen} onClose={handleCloseModal} className=\"relative z-50\">\n                            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n                            \n                            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                                <Dialog.Panel className=\"mx-auto max-w-sm w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                                    {/* Header */}\n                                    <div className=\"px-6 py-4 border-b dark:border-gray-700 flex-shrink-0\">\n                                        <div className=\"flex items-center justify-between\">\n                                            <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                                                {editingBranch \n                                                    ? t('branches.edit', { defaultValue: 'Niederlassung bearbeiten' })\n                                                    : t('branches.create', { defaultValue: 'Neue Niederlassung' })\n                                                }\n                                            </Dialog.Title>\n                                            <button\n                                                onClick={handleCloseModal}\n                                                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                            >\n                                                <XMarkIcon className=\"h-6 w-6\" />\n                                            </button>\n                                        </div>\n                                    </div>\n                                    \n                                    {/* Form */}\n                                    <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n                                        <div>\n                                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                {t('branches.name', { defaultValue: 'Name' })}\n                                            </label>\n                                            <input\n                                                type=\"text\"\n                                                value={formData.name}\n                                                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                required\n                                                autoFocus\n                                            />\n                                        </div>\n\n                                        {/* Settings Tabs - nur beim Bearbeiten */}\n                                        {editingBranch && (\n                                            <>\n                                                {/* Tab Navigation */}\n                                                <div className=\"border-b border-gray-200 dark:border-gray-700 mb-4\">\n                                                    <nav className=\"-mb-px flex space-x-2 overflow-x-auto\">\n                                                        {['whatsapp', 'lobbypms', 'boldpayment', 'doorsystem', 'email'].map((tab) => (\n                                                            <button\n                                                                key={tab}\n                                                                type=\"button\"\n                                                                onClick={() => setActiveSettingsTab(tab as any)}\n                                                                className={`py-2 px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ${\n                                                                    activeSettingsTab === tab\n                                                                        ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                                                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                                                                }`}\n                                                            >\n                                                                {tab === 'whatsapp' ? 'WhatsApp' : tab === 'lobbypms' ? 'LobbyPMS' : tab === 'boldpayment' ? 'Bold Payment' : tab === 'doorsystem' ? 'TTLock' : 'Email'}\n                                                            </button>\n                                                        ))}\n                                                    </nav>\n                                                </div>\n\n                                                {/* Tab Content */}\n                                                <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n                                                    {/* WhatsApp Settings Tab */}\n                                                    {activeSettingsTab === 'whatsapp' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                WhatsApp Settings\n                                                            </h4>\n                                                \n                                                <div className=\"space-y-4\">\n                                                    <div>\n                                                        <label htmlFor=\"whatsappProvider\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                            Provider\n                                                        </label>\n                                                        <select\n                                                            id=\"whatsappProvider\"\n                                                            value={formData.whatsappSettings.provider}\n                                                            onChange={(e) => setFormData({\n                                                                ...formData,\n                                                                whatsappSettings: {\n                                                                    ...formData.whatsappSettings,\n                                                                    provider: e.target.value as 'twilio' | 'whatsapp-business-api'\n                                                                }\n                                                            })}\n                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                        >\n                                                            <option value=\"twilio\">Twilio</option>\n                                                            <option value=\"whatsapp-business-api\">WhatsApp Business API</option>\n                                                        </select>\n                                                    </div>\n\n                                                    <div>\n                                                        <label htmlFor=\"whatsappApiKey\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                            API Key / Access Token\n                                                        </label>\n                                                        <div className=\"relative\">\n                                                            <input\n                                                                type={showSecrets['whatsappApiKey'] ? 'text' : 'password'}\n                                                                id=\"whatsappApiKey\"\n                                                                value={formData.whatsappSettings.apiKey}\n                                                                onChange={(e) => setFormData({\n                                                                    ...formData,\n                                                                    whatsappSettings: {\n                                                                        ...formData.whatsappSettings,\n                                                                        apiKey: e.target.value\n                                                                    }\n                                                                })}\n                                                                placeholder=\"API Key / Access Token\"\n                                                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                            />\n                                                            <button\n                                                                type=\"button\"\n                                                                onClick={() => setShowSecrets(prev => ({ ...prev, whatsappApiKey: !prev.whatsappApiKey }))}\n                                                                className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                            >\n                                                                {showSecrets['whatsappApiKey'] ? (\n                                                                    <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                    </svg>\n                                                                ) : (\n                                                                    <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                    </svg>\n                                                                )}\n                                                            </button>\n                                                        </div>\n                                                    </div>\n\n                                                    <div>\n                                                        <label htmlFor=\"whatsappPhoneNumberId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                            Phone Number ID\n                                                        </label>\n                                                        <input\n                                                            type=\"text\"\n                                                            id=\"whatsappPhoneNumberId\"\n                                                            value={formData.whatsappSettings.phoneNumberId}\n                                                            onChange={(e) => setFormData({\n                                                                ...formData,\n                                                                whatsappSettings: {\n                                                                    ...formData.whatsappSettings,\n                                                                    phoneNumberId: e.target.value\n                                                                }\n                                                            })}\n                                                            placeholder=\"Phone Number ID\"\n                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                        />\n                                                    </div>\n\n                                                    {/* AI Configuration */}\n                                                    <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4\">\n                                                        <div className=\"flex items-center justify-between mb-4\">\n                                                            <h5 className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                                                KI-Konfiguration (AI)\n                                                            </h5>\n                                                            <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                <input\n                                                                    type=\"checkbox\"\n                                                                    checked={formData.whatsappSettings.ai.enabled}\n                                                                    onChange={(e) => setFormData({\n                                                                        ...formData,\n                                                                        whatsappSettings: {\n                                                                            ...formData.whatsappSettings,\n                                                                            ai: {\n                                                                                ...formData.whatsappSettings.ai,\n                                                                                enabled: e.target.checked\n                                                                            }\n                                                                        }\n                                                                    })}\n                                                                    className=\"sr-only peer\"\n                                                                />\n                                                                <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                    {formData.whatsappSettings.ai.enabled ? 'Aktiviert' : 'Deaktiviert'}\n                                                                </span>\n                                                            </label>\n                                                        </div>\n\n                                                        {formData.whatsappSettings.ai.enabled && (\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label htmlFor=\"aiModel\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Modell\n                                                                    </label>\n                                                                    <select\n                                                                        id=\"aiModel\"\n                                                                        value={formData.whatsappSettings.ai.model}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    model: e.target.value\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    >\n                                                                        <option value=\"gpt-4o\">GPT-4o</option>\n                                                                        <option value=\"gpt-4\">GPT-4</option>\n                                                                        <option value=\"gpt-3.5-turbo\">GPT-3.5 Turbo</option>\n                                                                    </select>\n                                                                </div>\n\n                                                                <div>\n                                                                    <label htmlFor=\"aiSystemPrompt\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        System Prompt\n                                                                    </label>\n                                                                    <textarea\n                                                                        id=\"aiSystemPrompt\"\n                                                                        value={formData.whatsappSettings.ai.systemPrompt}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    systemPrompt: e.target.value\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={4}\n                                                                        placeholder=\"Du bist ein hilfreicher Assistent fr...\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Regeln (eine pro Zeile)\n                                                                    </label>\n                                                                    <textarea\n                                                                        value={formData.whatsappSettings.ai.rules.join('\\n')}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    rules: e.target.value.split('\\n').filter(r => r.trim())\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={3}\n                                                                        placeholder=\"Antworte immer auf Spanisch&#10;Sei freundlich und professionell\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Quellen/URLs (eine pro Zeile)\n                                                                    </label>\n                                                                    <textarea\n                                                                        value={formData.whatsappSettings.ai.sources.join('\\n')}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    sources: e.target.value.split('\\n').filter(s => s.trim())\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={2}\n                                                                        placeholder=\"https://wiki.example.com/manila-procedures&#10;https://wiki.example.com/faq\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div className=\"grid grid-cols-2 gap-4\">\n                                                                    <div>\n                                                                        <label htmlFor=\"aiTemperature\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                            Temperature ({formData.whatsappSettings.ai.temperature})\n                                                                        </label>\n                                                                        <input\n                                                                            type=\"range\"\n                                                                            id=\"aiTemperature\"\n                                                                            min=\"0\"\n                                                                            max=\"2\"\n                                                                            step=\"0.1\"\n                                                                            value={formData.whatsappSettings.ai.temperature}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                whatsappSettings: {\n                                                                                    ...formData.whatsappSettings,\n                                                                                    ai: {\n                                                                                        ...formData.whatsappSettings.ai,\n                                                                                        temperature: parseFloat(e.target.value)\n                                                                                    }\n                                                                                }\n                                                                            })}\n                                                                            className=\"mt-1 block w-full\"\n                                                                        />\n                                                                    </div>\n\n                                                                    <div>\n                                                                        <label htmlFor=\"aiMaxTokens\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                            Max Tokens\n                                                                        </label>\n                                                                        <input\n                                                                            type=\"number\"\n                                                                            id=\"aiMaxTokens\"\n                                                                            min=\"100\"\n                                                                            max=\"4000\"\n                                                                            step=\"100\"\n                                                                            value={formData.whatsappSettings.ai.maxTokens}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                whatsappSettings: {\n                                                                                    ...formData.whatsappSettings,\n                                                                                    ai: {\n                                                                                        ...formData.whatsappSettings.ai,\n                                                                                        maxTokens: parseInt(e.target.value) || 500\n                                                                                    }\n                                                                                }\n                                                                            })}\n                                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                        />\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        )}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                                    {/* LobbyPMS Settings Tab */}\n                                                    {activeSettingsTab === 'lobbypms' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                LobbyPMS Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API URL\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.lobbyPmsSettings.apiUrl}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, apiUrl: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"https://api.lobbypms.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API Key\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['lobbyPmsApiKey'] ? 'text' : 'password'}\n                                                                        value={formData.lobbyPmsSettings.apiKey}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, apiKey: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"API Key\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Property ID\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.lobbyPmsSettings.propertyId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, propertyId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Property ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* Bold Payment Settings Tab */}\n                                                    {activeSettingsTab === 'boldpayment' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                Bold Payment Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API Key\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['boldPaymentApiKey'] ? 'text' : 'password'}\n                                                                        value={formData.boldPaymentSettings.apiKey}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, apiKey: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"API Key\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Merchant ID\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['boldPaymentMerchantId'] ? 'text' : 'password'}\n                                                                        value={formData.boldPaymentSettings.merchantId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, merchantId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Merchant ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Environment\n                                                                    </label>\n                                                                    <select\n                                                                        value={formData.boldPaymentSettings.environment}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, environment: e.target.value as 'sandbox' | 'production' }\n                                                                        })}\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    >\n                                                                        <option value=\"sandbox\">Sandbox</option>\n                                                                        <option value=\"production\">Production</option>\n                                                                    </select>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* TTLock Settings Tab */}\n                                                    {activeSettingsTab === 'doorsystem' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                TTLock Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Client ID\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.doorSystemSettings.clientId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, clientId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Client ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Client Secret\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['doorSystemClientSecret'] ? 'text' : 'password'}\n                                                                        value={formData.doorSystemSettings.clientSecret}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, clientSecret: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Client Secret\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Username\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.doorSystemSettings.username}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, username: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Username\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Password\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['doorSystemPassword'] ? 'text' : 'password'}\n                                                                        value={formData.doorSystemSettings.password}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, password: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Password\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* Email Settings Tab */}\n                                                    {activeSettingsTab === 'email' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                Email Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Host\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpHost}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpHost: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"smtp.example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Port\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"number\"\n                                                                        value={formData.emailSettings.smtpPort}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpPort: parseInt(e.target.value) || 587 }\n                                                                        })}\n                                                                        placeholder=\"587\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP User\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpUser}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpUser: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"user@example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Password\n                                                                    </label>\n                                                                    <div className=\"relative\">\n                                                                        <input\n                                                                            type={showSecrets['emailSmtpPass'] ? 'text' : 'password'}\n                                                                            value={formData.emailSettings.smtpPass}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                emailSettings: { ...formData.emailSettings, smtpPass: e.target.value }\n                                                                            })}\n                                                                            placeholder=\"Password\"\n                                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                                        />\n                                                                        <button\n                                                                            type=\"button\"\n                                                                            onClick={() => setShowSecrets({ ...showSecrets, emailSmtpPass: !showSecrets['emailSmtpPass'] })}\n                                                                            className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                                        >\n                                                                            {showSecrets['emailSmtpPass'] ? (\n                                                                                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                                </svg>\n                                                                            ) : (\n                                                                                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                                </svg>\n                                                                            )}\n                                                                        </button>\n                                                                    </div>\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP From Email\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"email\"\n                                                                        value={formData.emailSettings.smtpFromEmail}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpFromEmail: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"noreply@example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP From Name\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpFromName}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpFromName: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Branch Name\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                {/* IMAP Settings Section */}\n                                                                <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4\">\n                                                                    <div className=\"flex items-center justify-between mb-4\">\n                                                                        <h5 className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                                                            IMAP Settings (Email Reading)\n                                                                        </h5>\n                                                                        <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                            <input\n                                                                                type=\"checkbox\"\n                                                                                checked={formData.emailSettings.imap.enabled}\n                                                                                onChange={(e) => setFormData({\n                                                                                    ...formData,\n                                                                                    emailSettings: {\n                                                                                        ...formData.emailSettings,\n                                                                                        imap: {\n                                                                                            ...formData.emailSettings.imap,\n                                                                                            enabled: e.target.checked\n                                                                                        }\n                                                                                    }\n                                                                                })}\n                                                                                className=\"sr-only peer\"\n                                                                            />\n                                                                            <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                            <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                                {formData.emailSettings.imap.enabled ? 'Enabled' : 'Disabled'}\n                                                                            </span>\n                                                                        </label>\n                                                                    </div>\n\n                                                                    {formData.emailSettings.imap.enabled && (\n                                                                        <div className=\"space-y-4\">\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Host\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.host}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, host: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"imap.example.com\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Port\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"number\"\n                                                                                    value={formData.emailSettings.imap.port}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, port: parseInt(e.target.value) || 993 }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"993\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                                    <input\n                                                                                        type=\"checkbox\"\n                                                                                        checked={formData.emailSettings.imap.secure}\n                                                                                        onChange={(e) => setFormData({\n                                                                                            ...formData,\n                                                                                            emailSettings: {\n                                                                                                ...formData.emailSettings,\n                                                                                                imap: { ...formData.emailSettings.imap, secure: e.target.checked }\n                                                                                            }\n                                                                                        })}\n                                                                                        className=\"sr-only peer\"\n                                                                                    />\n                                                                                    <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                                    <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                                        Secure (SSL/TLS)\n                                                                                    </span>\n                                                                                </label>\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP User\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.user}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, user: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"user@example.com\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Password\n                                                                                </label>\n                                                                                <div className=\"relative\">\n                                                                                    <input\n                                                                                        type={showSecrets['emailImapPass'] ? 'text' : 'password'}\n                                                                                        value={formData.emailSettings.imap.password}\n                                                                                        onChange={(e) => setFormData({\n                                                                                            ...formData,\n                                                                                            emailSettings: {\n                                                                                                ...formData.emailSettings,\n                                                                                                imap: { ...formData.emailSettings.imap, password: e.target.value }\n                                                                                            }\n                                                                                        })}\n                                                                                        placeholder=\"Password\"\n                                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                                                    />\n                                                                                    <button\n                                                                                        type=\"button\"\n                                                                                        onClick={() => setShowSecrets({ ...showSecrets, emailImapPass: !showSecrets['emailImapPass'] })}\n                                                                                        className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                                                    >\n                                                                                        {showSecrets['emailImapPass'] ? (\n                                                                                            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                                            </svg>\n                                                                                        ) : (\n                                                                                            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                                            </svg>\n                                                                                        )}\n                                                                                    </button>\n                                                                                </div>\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Folder\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.folder}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, folder: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"INBOX\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    Processed Folder (optional)\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.processedFolder}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, processedFolder: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"Processed\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                        </div>\n                                                                    )}\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            </>\n                                        )}\n\n                                        {/* Buttons */}\n                                        <div className=\"flex justify-end pt-4 gap-2\">\n                                            <div className=\"relative group\">\n                                                <button\n                                                    type=\"button\"\n                                                    onClick={handleCloseModal}\n                                                    className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                                                >\n                                                    <XMarkIcon className=\"h-5 w-5\" />\n                                                </button>\n                                                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                                    {t('common.cancel', { defaultValue: 'Abbrechen' })}\n                                                </div>\n                                            </div>\n                                            <div className=\"relative group\">\n                                                <button\n                                                    type=\"submit\"\n                                                    className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors\"\n                                                >\n                                                    <CheckIcon className=\"h-5 w-5\" />\n                                                </button>\n                                                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                                    {editingBranch ? t('common.update', { defaultValue: 'Aktualisieren' }) : t('common.create', { defaultValue: 'Erstellen' })}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </form>\n                                </Dialog.Panel>\n                            </div>\n                        </Dialog>\n                    ) : (\n                        // Desktop - Sidepane (dynamische Breite basierend auf Tab-Anzahl)\n                        <div className=\"fixed inset-y-0 right-0 w-full sm:min-w-[500px] sm:max-w-[600px] bg-white dark:bg-gray-800 shadow-xl z-50 flex flex-col\">\n                            {/* Header */}\n                            <div className=\"px-6 py-4 border-b dark:border-gray-700 flex-shrink-0\">\n                                <div className=\"flex items-center justify-between\">\n                                    <h2 className=\"text-lg font-semibold dark:text-white\">\n                                        {editingBranch \n                                            ? t('branches.edit', { defaultValue: 'Niederlassung bearbeiten' })\n                                            : t('branches.create', { defaultValue: 'Neue Niederlassung' })\n                                        }\n                                    </h2>\n                                    <button\n                                        onClick={handleCloseModal}\n                                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                    >\n                                        <XMarkIcon className=\"h-6 w-6\" />\n                                    </button>\n                                </div>\n                            </div>\n                            \n                            {/* Form */}\n                            <form onSubmit={handleSubmit} className=\"flex flex-col flex-1 min-h-0\">\n                                <div className=\"flex-1 overflow-y-auto min-h-0\">\n                                    <div className=\"p-6 space-y-4\">\n                                        <div>\n                                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                {t('branches.name', { defaultValue: 'Name' })}\n                                            </label>\n                                            <input\n                                                type=\"text\"\n                                                value={formData.name}\n                                                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                required\n                                                autoFocus\n                                            />\n                                        </div>\n\n                                        {/* Settings Tabs - nur beim Bearbeiten */}\n                                        {editingBranch && (\n                                            <>\n                                                {/* Tab Navigation */}\n                                                <div className=\"border-b border-gray-200 dark:border-gray-700 mb-4\">\n                                                    <nav className=\"-mb-px flex space-x-2 overflow-x-auto\">\n                                                        {['whatsapp', 'lobbypms', 'boldpayment', 'doorsystem', 'email'].map((tab) => (\n                                                            <button\n                                                                key={tab}\n                                                                type=\"button\"\n                                                                onClick={() => setActiveSettingsTab(tab as any)}\n                                                                className={`py-2 px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ${\n                                                                    activeSettingsTab === tab\n                                                                        ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                                                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                                                                }`}\n                                                            >\n                                                                {tab === 'whatsapp' ? 'WhatsApp' : tab === 'lobbypms' ? 'LobbyPMS' : tab === 'boldpayment' ? 'Bold Payment' : tab === 'doorsystem' ? 'TTLock' : 'Email'}\n                                                            </button>\n                                                        ))}\n                                                    </nav>\n                                                </div>\n\n                                                {/* Tab Content */}\n                                                <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n                                                    {/* WhatsApp Settings Tab */}\n                                                    {activeSettingsTab === 'whatsapp' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                WhatsApp Settings\n                                                            </h4>\n                                                            \n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label htmlFor=\"whatsappProviderDesktop\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Provider\n                                                                    </label>\n                                                                    <select\n                                                                        id=\"whatsappProviderDesktop\"\n                                                                        value={formData.whatsappSettings.provider}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                provider: e.target.value as 'twilio' | 'whatsapp-business-api'\n                                                                            }\n                                                                        })}\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    >\n                                                                        <option value=\"twilio\">Twilio</option>\n                                                                        <option value=\"whatsapp-business-api\">WhatsApp Business API</option>\n                                                                    </select>\n                                                                </div>\n\n                                                    <div>\n                                                        <label htmlFor=\"whatsappApiKey\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                            API Key / Access Token\n                                                        </label>\n                                                        <div className=\"relative\">\n                                                            <input\n                                                                type={showSecrets['whatsappApiKey'] ? 'text' : 'password'}\n                                                                id=\"whatsappApiKey\"\n                                                                value={formData.whatsappSettings.apiKey}\n                                                                onChange={(e) => setFormData({\n                                                                    ...formData,\n                                                                    whatsappSettings: {\n                                                                        ...formData.whatsappSettings,\n                                                                        apiKey: e.target.value\n                                                                    }\n                                                                })}\n                                                                placeholder=\"API Key / Access Token\"\n                                                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                            />\n                                                            <button\n                                                                type=\"button\"\n                                                                onClick={() => setShowSecrets(prev => ({ ...prev, whatsappApiKey: !prev.whatsappApiKey }))}\n                                                                className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                            >\n                                                                {showSecrets['whatsappApiKey'] ? (\n                                                                    <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                    </svg>\n                                                                ) : (\n                                                                    <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                    </svg>\n                                                                )}\n                                                            </button>\n                                                        </div>\n                                                    </div>\n\n                                                    <div>\n                                                        <label htmlFor=\"whatsappPhoneNumberId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                            Phone Number ID\n                                                        </label>\n                                                        <input\n                                                            type=\"text\"\n                                                            id=\"whatsappPhoneNumberId\"\n                                                            value={formData.whatsappSettings.phoneNumberId}\n                                                            onChange={(e) => setFormData({\n                                                                ...formData,\n                                                                whatsappSettings: {\n                                                                    ...formData.whatsappSettings,\n                                                                    phoneNumberId: e.target.value\n                                                                }\n                                                            })}\n                                                            placeholder=\"Phone Number ID\"\n                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                        />\n                                                    </div>\n\n                                                    {/* AI Configuration */}\n                                                    <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4\">\n                                                        <div className=\"flex items-center justify-between mb-4\">\n                                                            <h5 className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                                                KI-Konfiguration (AI)\n                                                            </h5>\n                                                            <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                <input\n                                                                    type=\"checkbox\"\n                                                                    checked={formData.whatsappSettings.ai.enabled}\n                                                                    onChange={(e) => setFormData({\n                                                                        ...formData,\n                                                                        whatsappSettings: {\n                                                                            ...formData.whatsappSettings,\n                                                                            ai: {\n                                                                                ...formData.whatsappSettings.ai,\n                                                                                enabled: e.target.checked\n                                                                            }\n                                                                        }\n                                                                    })}\n                                                                    className=\"sr-only peer\"\n                                                                />\n                                                                <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                    {formData.whatsappSettings.ai.enabled ? 'Aktiviert' : 'Deaktiviert'}\n                                                                </span>\n                                                            </label>\n                                                        </div>\n\n                                                        {formData.whatsappSettings.ai.enabled && (\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label htmlFor=\"aiModelDesktop\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Modell\n                                                                    </label>\n                                                                    <select\n                                                                        id=\"aiModelDesktop\"\n                                                                        value={formData.whatsappSettings.ai.model}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    model: e.target.value\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    >\n                                                                        <option value=\"gpt-4o\">GPT-4o</option>\n                                                                        <option value=\"gpt-4\">GPT-4</option>\n                                                                        <option value=\"gpt-3.5-turbo\">GPT-3.5 Turbo</option>\n                                                                    </select>\n                                                                </div>\n\n                                                                <div>\n                                                                    <label htmlFor=\"aiSystemPromptDesktop\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        System Prompt\n                                                                    </label>\n                                                                    <textarea\n                                                                        id=\"aiSystemPromptDesktop\"\n                                                                        value={formData.whatsappSettings.ai.systemPrompt}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    systemPrompt: e.target.value\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={4}\n                                                                        placeholder=\"Du bist ein hilfreicher Assistent fr...\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Regeln (eine pro Zeile)\n                                                                    </label>\n                                                                    <textarea\n                                                                        value={formData.whatsappSettings.ai.rules.join('\\n')}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    rules: e.target.value.split('\\n').filter(r => r.trim())\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={3}\n                                                                        placeholder=\"Antworte immer auf Spanisch&#10;Sei freundlich und professionell\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Quellen/URLs (eine pro Zeile)\n                                                                    </label>\n                                                                    <textarea\n                                                                        value={formData.whatsappSettings.ai.sources.join('\\n')}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    sources: e.target.value.split('\\n').filter(s => s.trim())\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={2}\n                                                                        placeholder=\"https://wiki.example.com/manila-procedures&#10;https://wiki.example.com/faq\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div className=\"grid grid-cols-2 gap-4\">\n                                                                    <div>\n                                                                        <label htmlFor=\"aiTemperatureDesktop\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                            Temperature ({formData.whatsappSettings.ai.temperature})\n                                                                        </label>\n                                                                        <input\n                                                                            type=\"range\"\n                                                                            id=\"aiTemperatureDesktop\"\n                                                                            min=\"0\"\n                                                                            max=\"2\"\n                                                                            step=\"0.1\"\n                                                                            value={formData.whatsappSettings.ai.temperature}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                whatsappSettings: {\n                                                                                    ...formData.whatsappSettings,\n                                                                                    ai: {\n                                                                                        ...formData.whatsappSettings.ai,\n                                                                                        temperature: parseFloat(e.target.value)\n                                                                                    }\n                                                                                }\n                                                                            })}\n                                                                            className=\"mt-1 block w-full\"\n                                                                        />\n                                                                    </div>\n\n                                                                    <div>\n                                                                        <label htmlFor=\"aiMaxTokensDesktop\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                            Max Tokens\n                                                                        </label>\n                                                                        <input\n                                                                            type=\"number\"\n                                                                            id=\"aiMaxTokensDesktop\"\n                                                                            min=\"100\"\n                                                                            max=\"4000\"\n                                                                            step=\"100\"\n                                                                            value={formData.whatsappSettings.ai.maxTokens}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                whatsappSettings: {\n                                                                                    ...formData.whatsappSettings,\n                                                                                    ai: {\n                                                                                        ...formData.whatsappSettings.ai,\n                                                                                        maxTokens: parseInt(e.target.value) || 500\n                                                                                    }\n                                                                                }\n                                                                            })}\n                                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                        />\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        )}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                                    {/* LobbyPMS Settings Tab */}\n                                                    {activeSettingsTab === 'lobbypms' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                LobbyPMS Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API URL\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.lobbyPmsSettings.apiUrl}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, apiUrl: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"https://api.lobbypms.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API Key\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['lobbyPmsApiKey'] ? 'text' : 'password'}\n                                                                        value={formData.lobbyPmsSettings.apiKey}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, apiKey: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"API Key\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Property ID\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.lobbyPmsSettings.propertyId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, propertyId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Property ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* Bold Payment Settings Tab */}\n                                                    {activeSettingsTab === 'boldpayment' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                Bold Payment Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API Key\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['boldPaymentApiKey'] ? 'text' : 'password'}\n                                                                        value={formData.boldPaymentSettings.apiKey}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, apiKey: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"API Key\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Merchant ID\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['boldPaymentMerchantId'] ? 'text' : 'password'}\n                                                                        value={formData.boldPaymentSettings.merchantId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, merchantId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Merchant ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Environment\n                                                                    </label>\n                                                                    <select\n                                                                        value={formData.boldPaymentSettings.environment}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, environment: e.target.value as 'sandbox' | 'production' }\n                                                                        })}\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    >\n                                                                        <option value=\"sandbox\">Sandbox</option>\n                                                                        <option value=\"production\">Production</option>\n                                                                    </select>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* TTLock Settings Tab */}\n                                                    {activeSettingsTab === 'doorsystem' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                TTLock Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Client ID\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.doorSystemSettings.clientId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, clientId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Client ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Client Secret\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['doorSystemClientSecret'] ? 'text' : 'password'}\n                                                                        value={formData.doorSystemSettings.clientSecret}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, clientSecret: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Client Secret\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Username\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.doorSystemSettings.username}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, username: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Username\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Password\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['doorSystemPassword'] ? 'text' : 'password'}\n                                                                        value={formData.doorSystemSettings.password}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, password: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Password\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* Email Settings Tab */}\n                                                    {activeSettingsTab === 'email' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                Email Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Host\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpHost}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpHost: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"smtp.example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Port\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"number\"\n                                                                        value={formData.emailSettings.smtpPort}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpPort: parseInt(e.target.value) || 587 }\n                                                                        })}\n                                                                        placeholder=\"587\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP User\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpUser}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpUser: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"user@example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Password\n                                                                    </label>\n                                                                    <div className=\"relative\">\n                                                                        <input\n                                                                            type={showSecrets['emailSmtpPass'] ? 'text' : 'password'}\n                                                                            value={formData.emailSettings.smtpPass}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                emailSettings: { ...formData.emailSettings, smtpPass: e.target.value }\n                                                                            })}\n                                                                            placeholder=\"Password\"\n                                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                                        />\n                                                                        <button\n                                                                            type=\"button\"\n                                                                            onClick={() => setShowSecrets({ ...showSecrets, emailSmtpPass: !showSecrets['emailSmtpPass'] })}\n                                                                            className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                                        >\n                                                                            {showSecrets['emailSmtpPass'] ? (\n                                                                                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                                </svg>\n                                                                            ) : (\n                                                                                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                                </svg>\n                                                                            )}\n                                                                        </button>\n                                                                    </div>\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP From Email\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"email\"\n                                                                        value={formData.emailSettings.smtpFromEmail}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpFromEmail: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"noreply@example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP From Name\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpFromName}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpFromName: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Branch Name\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                {/* IMAP Settings Section */}\n                                                                <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4\">\n                                                                    <div className=\"flex items-center justify-between mb-4\">\n                                                                        <h5 className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                                                            IMAP Settings (Email Reading)\n                                                                        </h5>\n                                                                        <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                            <input\n                                                                                type=\"checkbox\"\n                                                                                checked={formData.emailSettings.imap.enabled}\n                                                                                onChange={(e) => setFormData({\n                                                                                    ...formData,\n                                                                                    emailSettings: {\n                                                                                        ...formData.emailSettings,\n                                                                                        imap: {\n                                                                                            ...formData.emailSettings.imap,\n                                                                                            enabled: e.target.checked\n                                                                                        }\n                                                                                    }\n                                                                                })}\n                                                                                className=\"sr-only peer\"\n                                                                            />\n                                                                            <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                            <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                                {formData.emailSettings.imap.enabled ? 'Enabled' : 'Disabled'}\n                                                                            </span>\n                                                                        </label>\n                                                                    </div>\n\n                                                                    {formData.emailSettings.imap.enabled && (\n                                                                        <div className=\"space-y-4\">\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Host\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.host}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, host: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"imap.example.com\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Port\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"number\"\n                                                                                    value={formData.emailSettings.imap.port}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, port: parseInt(e.target.value) || 993 }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"993\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                                    <input\n                                                                                        type=\"checkbox\"\n                                                                                        checked={formData.emailSettings.imap.secure}\n                                                                                        onChange={(e) => setFormData({\n                                                                                            ...formData,\n                                                                                            emailSettings: {\n                                                                                                ...formData.emailSettings,\n                                                                                                imap: { ...formData.emailSettings.imap, secure: e.target.checked }\n                                                                                            }\n                                                                                        })}\n                                                                                        className=\"sr-only peer\"\n                                                                                    />\n                                                                                    <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                                    <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                                        Secure (SSL/TLS)\n                                                                                    </span>\n                                                                                </label>\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP User\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.user}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, user: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"user@example.com\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Password\n                                                                                </label>\n                                                                                <div className=\"relative\">\n                                                                                    <input\n                                                                                        type={showSecrets['emailImapPass'] ? 'text' : 'password'}\n                                                                                        value={formData.emailSettings.imap.password}\n                                                                                        onChange={(e) => setFormData({\n                                                                                            ...formData,\n                                                                                            emailSettings: {\n                                                                                                ...formData.emailSettings,\n                                                                                                imap: { ...formData.emailSettings.imap, password: e.target.value }\n                                                                                            }\n                                                                                        })}\n                                                                                        placeholder=\"Password\"\n                                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                                                    />\n                                                                                    <button\n                                                                                        type=\"button\"\n                                                                                        onClick={() => setShowSecrets({ ...showSecrets, emailImapPass: !showSecrets['emailImapPass'] })}\n                                                                                        className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                                                    >\n                                                                                        {showSecrets['emailImapPass'] ? (\n                                                                                            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                                            </svg>\n                                                                                        ) : (\n                                                                                            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                                            </svg>\n                                                                                        )}\n                                                                                    </button>\n                                                                                </div>\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Folder\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.folder}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, folder: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"INBOX\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    Processed Folder (optional)\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.processedFolder}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, processedFolder: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"Processed\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                        </div>\n                                                                    )}\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            </>\n                                        )}\n                                    </div>\n                                </div>\n\n                                {/* Buttons */}\n                                <div className=\"flex justify-end pt-4 gap-2 px-6 pb-6 border-t dark:border-gray-700\">\n                                    <div className=\"relative group\">\n                                        <button\n                                            type=\"button\"\n                                            onClick={handleCloseModal}\n                                            className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                                        >\n                                            <XMarkIcon className=\"h-5 w-5\" />\n                                        </button>\n                                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                            {t('common.cancel', { defaultValue: 'Abbrechen' })}\n                                        </div>\n                                    </div>\n                                    <div className=\"relative group\">\n                                        <button\n                                            type=\"submit\"\n                                            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors\"\n                                        >\n                                            <CheckIcon className=\"h-5 w-5\" />\n                                        </button>\n                                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                            {editingBranch ? t('common.update', { defaultValue: 'Aktualisieren' }) : t('common.create', { defaultValue: 'Erstellen' })}\n                                        </div>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                    )}\n                </>\n            )}\n        </div>\n    );\n};\n\nexport default BranchManagementTab;\n","import * as React from \"react\";\nfunction UserPlusIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(UserPlusIcon);\nexport default ForwardRef;","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { CreateOrganizationRequest } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\nimport { useAuth } from '../../hooks/useAuth.tsx';\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n}\n\nconst CreateOrganizationModal: React.FC<Props> = ({ isOpen, onClose, onSuccess }) => {\n  const { t } = useTranslation();\n  const [formData, setFormData] = useState<CreateOrganizationRequest>({\n    name: '',\n    displayName: '',\n    domain: ''\n  });\n  const [loading, setLoading] = useState<boolean>(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  const { fetchCurrentUser } = useAuth();\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    \n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    \n    if (!formData.name.trim()) {\n      newErrors.name = t('organization.create.nameRequired');\n    }\n    \n    if (!formData.displayName.trim()) {\n      newErrors.displayName = t('organization.create.displayNameRequired');\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    // Fehler fr dieses Feld lschen\n    if (errors[name]) {\n      setErrors(prev => ({ ...prev, [name]: '' }));\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      showMessage(t('joinRequest.fillRequired'), 'error');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      await organizationService.createOrganization(formData);\n      setErrors({});\n      showMessage(t('organization.create.createSuccess'), 'success');\n      \n      // WICHTIG: User und Berechtigungen neu laden nach Erstellen der Organisation\n      // Der User wurde der Admin-Rolle zugeordnet und hat jetzt neue Berechtigungen\n      await fetchCurrentUser();\n      \n      // Formular zurcksetzen\n      setFormData({\n        name: '',\n        displayName: '',\n        domain: ''\n      });\n      onClose();\n      if (onSuccess) {\n        onSuccess();\n      }\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('organization.create.createError');\n      showMessage(errorMessage, 'error');\n      setErrors({ submit: errorMessage });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    // Formular zurcksetzen\n    setFormData({\n      name: '',\n      displayName: '',\n      domain: ''\n    });\n    setErrors({});\n    onClose();\n  };\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('organization.create.title')}\n              </Dialog.Title>\n              <button\n                onClick={handleClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-4\">\n              {errors.submit && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {errors.submit}\n                </div>\n              )}\n\n              <div className=\"space-y-4\">\n                <div>\n                  <label \n                    htmlFor=\"name\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.create.name')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"name\"\n                    name=\"name\"\n                    value={formData.name}\n                    onChange={handleChange}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.name \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  />\n                  {errors.name && (\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.name}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"displayName\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.create.displayName')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"displayName\"\n                    name=\"displayName\"\n                    value={formData.displayName}\n                    onChange={handleChange}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.displayName \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  />\n                  {errors.displayName && (\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"domain\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.create.domain')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"domain\"\n                    name=\"domain\"\n                    value={formData.domain}\n                    onChange={handleChange}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                  title={t('joinRequest.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title={loading ? t('organization.create.creating') : t('organization.create.createButton')}\n                >\n                  {loading ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={handleClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('organization.create.title')}\n          </h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {errors.submit && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {errors.submit}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label \n                htmlFor=\"name\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.create.name')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleChange}\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                  errors.name \n                    ? 'border-red-300 dark:border-red-600' \n                    : 'border-gray-300 dark:border-gray-600'\n                }`}\n              />\n              {errors.name && (\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.name}</p>\n              )}\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"displayName\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.create.displayName')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"displayName\"\n                name=\"displayName\"\n                value={formData.displayName}\n                onChange={handleChange}\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                  errors.displayName \n                    ? 'border-red-300 dark:border-red-600' \n                    : 'border-gray-300 dark:border-gray-600'\n                }`}\n              />\n              {errors.displayName && (\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\n              )}\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"domain\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.create.domain')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"domain\"\n                name=\"domain\"\n                value={formData.domain}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"flex justify-end pt-4 gap-2\">\n              <button\n                type=\"button\"\n                onClick={handleClose}\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                title={t('common.cancel')}\n              >\n                <XMarkIcon className=\"h-5 w-5\" />\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                title={loading ? t('organization.create.creating') : t('organization.create.createButton')}\n              >\n                {loading ? (\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                ) : (\n                  <CheckIcon className=\"h-5 w-5\" />\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default CreateOrganizationModal; ","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { CreateJoinRequestRequest, Organization } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n}\n\nconst JoinOrganizationModal: React.FC<Props> = ({ isOpen, onClose, onSuccess }) => {\n  const { t } = useTranslation();\n  const [formData, setFormData] = useState<CreateJoinRequestRequest>({\n    organizationName: '',\n    message: ''\n  });\n  const [loading, setLoading] = useState<boolean>(false);\n  const [searching, setSearching] = useState<boolean>(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [organizations, setOrganizations] = useState<Organization[]>([]);\n  const [showDropdown, setShowDropdown] = useState<boolean>(false);\n  const [selectedOrganization, setSelectedOrganization] = useState<Organization | null>(null);\n  const searchTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const { showMessage } = useMessage();\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    \n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  // Click outside handler fr Dropdown\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setShowDropdown(false);\n      }\n    };\n\n    if (showDropdown) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showDropdown]);\n\n  const searchOrganizations = async (searchTerm: string) => {\n    if (searchTerm.length < 2) {\n      setOrganizations([]);\n      setShowDropdown(false);\n      return;\n    }\n\n    try {\n      setSearching(true);\n      const results = await organizationService.searchOrganizations(searchTerm);\n      setOrganizations(results);\n      setShowDropdown(true);\n    } catch (err: any) {\n      console.error('Fehler bei der Organisationen-Suche:', err);\n      setOrganizations([]);\n    } finally {\n      setSearching(false);\n    }\n  };\n\n  const handleOrganizationInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setFormData(prev => ({ ...prev, organizationName: value }));\n    setSelectedOrganization(null);\n    \n    // Fehler lschen\n    if (errors.organizationName) {\n      setErrors(prev => ({ ...prev, organizationName: '' }));\n    }\n\n    // Debounce fr Suche\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n\n    searchTimeoutRef.current = setTimeout(() => {\n      searchOrganizations(value);\n    }, 300);\n  };\n\n  const handleSelectOrganization = (org: Organization) => {\n    setSelectedOrganization(org);\n    setFormData(prev => ({ ...prev, organizationName: org.name }));\n    setShowDropdown(false);\n    setOrganizations([]);\n  };\n\n  const handleMessageChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setFormData(prev => ({ ...prev, message: e.target.value }));\n    if (errors.message) {\n      setErrors(prev => ({ ...prev, message: '' }));\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    \n    if (!formData.organizationName.trim()) {\n      newErrors.organizationName = t('organization.join.nameRequired');\n    } else if (!selectedOrganization) {\n      newErrors.organizationName = t('organization.join.selectFromList');\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      showMessage(t('joinRequest.fillRequired'), 'error');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      await organizationService.createJoinRequest(formData);\n      setErrors({});\n      showMessage(t('organization.join.sendSuccess'), 'success');\n      // Formular zurcksetzen\n      setFormData({\n        organizationName: '',\n        message: ''\n      });\n      setSelectedOrganization(null);\n      setOrganizations([]);\n      onClose();\n      if (onSuccess) {\n        onSuccess();\n      }\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('organization.join.sendError');\n      showMessage(errorMessage, 'error');\n      setErrors({ submit: errorMessage });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    // Formular zurcksetzen\n    setFormData({\n      organizationName: '',\n      message: ''\n    });\n    setSelectedOrganization(null);\n    setOrganizations([]);\n    setErrors({});\n    setShowDropdown(false);\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n    onClose();\n  };\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('organization.join.title')}\n              </Dialog.Title>\n              <button\n                onClick={handleClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-4\">\n              {errors.submit && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {errors.submit}\n                </div>\n              )}\n\n              <div className=\"space-y-4\">\n                <div className=\"relative\" ref={dropdownRef}>\n                  <label \n                    htmlFor=\"organizationName\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.join.search')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"organizationName\"\n                    name=\"organizationName\"\n                    value={formData.organizationName}\n                    onChange={handleOrganizationInputChange}\n                    placeholder={t('organization.join.searchPlaceholder')}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.organizationName \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  />\n                  {errors.organizationName && (\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.organizationName}</p>\n                  )}\n                  \n                  {/* Autocomplete Dropdown */}\n                  {showDropdown && (organizations.length > 0 || searching) && (\n                    <div className=\"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto\">\n                      {searching ? (\n                        <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\n                          {t('organization.join.searching')}\n                        </div>\n                      ) : organizations.length > 0 ? (\n                        organizations.map(org => (\n                          <button\n                            key={org.id}\n                            type=\"button\"\n                            onClick={() => handleSelectOrganization(org)}\n                            className=\"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 focus:bg-gray-100 dark:focus:bg-gray-700 focus:outline-none\"\n                          >\n                            <div className=\"font-medium text-gray-900 dark:text-white\">\n                              {org.displayName || org.name}\n                            </div>\n                            {org.displayName && (\n                              <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                                {org.name}\n                              </div>\n                            )}\n                          </button>\n                        ))\n                      ) : (\n                        <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\n                          {t('organization.join.noOrganizations')}\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"message\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.join.message')}\n                  </label>\n                  <textarea\n                    id=\"message\"\n                    name=\"message\"\n                    value={formData.message || ''}\n                    onChange={handleMessageChange}\n                    rows={3}\n                    placeholder={t('organization.join.messagePlaceholder')}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                  title={t('joinRequest.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title={loading ? t('organization.join.sending') : t('organization.join.send')}\n                >\n                  {loading ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={handleClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('organization.join.title')}\n          </h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {errors.submit && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {errors.submit}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"relative\" ref={dropdownRef}>\n              <label \n                htmlFor=\"organizationName\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.join.search')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"organizationName\"\n                name=\"organizationName\"\n                value={formData.organizationName}\n                onChange={handleOrganizationInputChange}\n                placeholder={t('organization.join.searchPlaceholder')}\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                  errors.organizationName \n                    ? 'border-red-300 dark:border-red-600' \n                    : 'border-gray-300 dark:border-gray-600'\n                }`}\n              />\n              {errors.organizationName && (\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.organizationName}</p>\n              )}\n              \n              {/* Autocomplete Dropdown */}\n              {showDropdown && (organizations.length > 0 || searching) && (\n                <div className=\"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto\">\n                  {searching ? (\n                    <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\n                      {t('organization.join.searching')}\n                    </div>\n                  ) : organizations.length > 0 ? (\n                    organizations.map(org => (\n                      <button\n                        key={org.id}\n                        type=\"button\"\n                        onClick={() => handleSelectOrganization(org)}\n                        className=\"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 focus:bg-gray-100 dark:focus:bg-gray-700 focus:outline-none\"\n                      >\n                        <div className=\"font-medium text-gray-900 dark:text-white\">\n                          {org.displayName || org.name}\n                        </div>\n                        {org.displayName && (\n                          <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                            {org.name}\n                          </div>\n                        )}\n                      </button>\n                    ))\n                  ) : (\n                    <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\n                      {t('organization.join.noOrganizations')}\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"message\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.join.message')}\n              </label>\n              <textarea\n                id=\"message\"\n                name=\"message\"\n                value={formData.message || ''}\n                onChange={handleMessageChange}\n                rows={3}\n                placeholder={t('organization.join.messagePlaceholder')}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"flex justify-end pt-4 gap-2\">\n              <button\n                type=\"button\"\n                onClick={handleClose}\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                title={t('common.cancel')}\n              >\n                <XMarkIcon className=\"h-5 w-5\" />\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                title={loading ? t('organization.join.sending') : t('organization.join.send')}\n              >\n                {loading ? (\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                ) : (\n                  <CheckIcon className=\"h-5 w-5\" />\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default JoinOrganizationModal; ","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../../config/axios.ts';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport { roleApi } from '../../api/apiClient.ts';\nimport { Role } from '../../types/interfaces.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\n\ninterface Organization {\n  id: number;\n  displayName?: string;\n  name?: string;\n  settings?: any;\n}\n\ninterface RoleConfigurationTabProps {\n  organization: Organization | null;\n  onSave?: () => void;\n}\n\nconst RoleConfigurationTab: React.FC<RoleConfigurationTabProps> = ({\n  organization,\n  onSave\n}) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [lifecycleRoles, setLifecycleRoles] = useState<{\n    adminRoleId?: number | null;\n    hrRoleId?: number | null;\n    legalRoleId?: number | null;\n    employeeRoleIds?: number[];\n  }>({});\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [loadingRoles, setLoadingRoles] = useState(false);\n\n  useEffect(() => {\n    if (organization) {\n      loadRoles();\n      loadLifecycleRoles();\n    }\n  }, [organization]);\n\n  const loadRoles = async () => {\n    setLoadingRoles(true);\n    try {\n      const response = await roleApi.getAll();\n      if (response.data && Array.isArray(response.data)) {\n        setRoles(response.data);\n      }\n    } catch (error) {\n      console.error('Fehler beim Laden der Rollen:', error);\n      showMessage(\n        t('lifecycle.loadRolesError', { defaultValue: 'Fehler beim Laden der Rollen' }),\n        'error'\n      );\n    } finally {\n      setLoadingRoles(false);\n    }\n  };\n\n  const loadLifecycleRoles = async () => {\n    setLoading(true);\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.LIFECYCLE_ROLES);\n      setLifecycleRoles(response.data.lifecycleRoles || {});\n    } catch (error: any) {\n      console.error('Fehler beim Laden der Lebenszyklus-Rollen:', error);\n      // Wenn 404, dann gibt es noch keine Konfiguration - das ist OK\n      if (error.response?.status !== 404) {\n        showMessage(\n          error.response?.data?.message || t('lifecycle.loadLifecycleRolesError', { defaultValue: 'Fehler beim Laden der Konfiguration' }),\n          'error'\n        );\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      // Konvertiere zu Number oder null (verhindert, dass 0 oder undefined als String gesendet wird)\n      const prepareRoleId = (id: number | null | undefined): number | null => {\n        if (id === null || id === undefined || id === 0) {\n          return null;\n        }\n        return Number(id);\n      };\n\n      await axiosInstance.put(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.LIFECYCLE_ROLES, {\n        adminRoleId: prepareRoleId(lifecycleRoles.adminRoleId),\n        hrRoleId: prepareRoleId(lifecycleRoles.hrRoleId),\n        legalRoleId: prepareRoleId(lifecycleRoles.legalRoleId),\n        employeeRoleIds: (lifecycleRoles.employeeRoleIds || []).map(prepareRoleId).filter((id): id is number => id !== null)\n      });\n      showMessage(\n        t('lifecycle.rolesSaved', { defaultValue: 'Rollen-Konfiguration erfolgreich gespeichert' }),\n        'success'\n      );\n      if (onSave) {\n        onSave();\n      }\n    } catch (error: any) {\n      console.error('Fehler beim Speichern:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.saveError', { defaultValue: 'Fehler beim Speichern' }),\n        'error'\n      );\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleAssignStandardRoles = () => {\n    // Finde Standard-Rollen\n    const adminRole = roles.find(r => r.name.toLowerCase().includes('admin') || r.name.toLowerCase().includes('administrator'));\n    const hrRole = roles.find(r => r.name.toLowerCase().includes('hr') || r.name.toLowerCase().includes('human'));\n    const legalRole = roles.find(r => r.name.toLowerCase() === 'derecho' || r.name.toLowerCase().includes('legal'));\n\n    setLifecycleRoles({\n      ...lifecycleRoles,\n      adminRoleId: adminRole?.id || null,\n      hrRoleId: hrRole?.id || null,\n      legalRoleId: legalRole?.id || null\n    });\n\n    showMessage(\n      t('lifecycle.standardRolesAssigned', { defaultValue: 'Standard-Rollen zugewiesen' }),\n      'success'\n    );\n  };\n\n  if (loading && !lifecycleRoles) {\n    return (\n      <div className=\"flex items-center justify-center py-8\">\n        <ArrowPathIcon className=\"h-6 w-6 animate-spin text-gray-400\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold dark:text-white\">\n            {t('organization.lifecycleRoles.title', { defaultValue: 'Lebenszyklus-Rollen' })}\n          </h3>\n          <button\n            onClick={handleAssignStandardRoles}\n            className=\"px-3 py-1.5 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors\"\n          >\n            {t('lifecycle.assignStandardRoles', { defaultValue: 'Standard-Rollen zuweisen' })}\n          </button>\n        </div>\n        \n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              {t('organization.lifecycleRoles.admin', { defaultValue: 'Admin-Rolle' })}\n            </label>\n            <select\n              value={lifecycleRoles.adminRoleId || ''}\n              onChange={(e) => {\n                const value = e.target.value;\n                setLifecycleRoles({ \n                ...lifecycleRoles, \n                  adminRoleId: (value && value !== '' && !isNaN(parseInt(value, 10))) ? parseInt(value, 10) : null \n                });\n              }}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              disabled={loadingRoles}\n            >\n              <option value=\"\">{t('common.pleaseSelect')}</option>\n              {roles.map(role => (\n                <option key={role.id} value={role.id}>\n                  {role.name}\n                </option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              {t('organization.lifecycleRoles.hr', { defaultValue: 'HR-Rolle' })}\n            </label>\n            <select\n              value={lifecycleRoles.hrRoleId || ''}\n              onChange={(e) => {\n                const value = e.target.value;\n                setLifecycleRoles({ \n                ...lifecycleRoles, \n                  hrRoleId: (value && value !== '' && !isNaN(parseInt(value, 10))) ? parseInt(value, 10) : null \n                });\n              }}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              disabled={loadingRoles}\n            >\n              <option value=\"\">{t('common.pleaseSelect')}</option>\n              {roles.map(role => (\n                <option key={role.id} value={role.id}>\n                  {role.name}\n                </option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              {t('organization.lifecycleRoles.legal', { defaultValue: 'Legal-Rolle' })}\n            </label>\n            <select\n              value={lifecycleRoles.legalRoleId || ''}\n              onChange={(e) => {\n                const value = e.target.value;\n                setLifecycleRoles({ \n                ...lifecycleRoles, \n                  legalRoleId: (value && value !== '' && !isNaN(parseInt(value, 10))) ? parseInt(value, 10) : null \n                });\n              }}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              disabled={loadingRoles}\n            >\n              <option value=\"\">{t('common.pleaseSelect')}</option>\n              {roles.map(role => (\n                <option key={role.id} value={role.id}>\n                  {role.name}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n        \n        <div className=\"mt-6 flex justify-end\">\n          <button\n            onClick={handleSave}\n            disabled={saving || loadingRoles}\n            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            title={saving ? t('common.saving', { defaultValue: 'Speichere...' }) : t('common.save', { defaultValue: 'Speichern' })}\n          >\n            {saving ? (\n              <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n            ) : (\n              <CheckIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RoleConfigurationTab;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { DocumentTextIcon, ArrowPathIcon, CheckIcon, PlusIcon, TrashIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../../config/axios.ts';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { organizationService } from '../../services/organizationService.ts';\n\ninterface Organization {\n  id: number;\n  displayName?: string;\n  name?: string;\n  settings?: any;\n}\n\ninterface DocumentConfigurationTabProps {\n  organization: Organization | null;\n  onSave?: () => void;\n}\n\ninterface DocumentTemplate {\n  id?: number;\n  name: string;\n  type: 'certificate' | 'contract';\n  filePath?: string;\n  version?: string;\n}\n\nconst DocumentConfigurationTab: React.FC<DocumentConfigurationTabProps> = ({\n  organization,\n  onSave\n}) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [templates, setTemplates] = useState<DocumentTemplate[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [templateType, setTemplateType] = useState<'certificate' | 'contract'>('certificate');\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (organization) {\n      loadTemplates();\n    }\n  }, [organization]);\n\n  const loadTemplates = async () => {\n    setLoading(true);\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.DOCUMENT_TEMPLATES);\n      const documentTemplates = response.data.documentTemplates || {};\n      \n      // Konvertiere zu Template-Array\n      const templatesList: DocumentTemplate[] = [];\n      if (documentTemplates.employmentCertificate) {\n        templatesList.push({\n          name: 'Arbeitszeugnis',\n          type: 'certificate',\n          filePath: documentTemplates.employmentCertificate.path,\n          version: documentTemplates.employmentCertificate.version\n        });\n      }\n      if (documentTemplates.employmentContract) {\n        templatesList.push({\n          name: 'Arbeitsvertrag',\n          type: 'contract',\n          filePath: documentTemplates.employmentContract.path,\n          version: documentTemplates.employmentContract.version\n        });\n      }\n      \n      setTemplates(templatesList);\n    } catch (error: any) {\n      console.error('Fehler beim Laden der Templates:', error);\n      if (error.response?.status !== 404) {\n        showMessage(\n          error.response?.data?.message || t('lifecycle.loadTemplatesError', { defaultValue: 'Fehler beim Laden der Templates' }),\n          'error'\n        );\n      }\n      setTemplates([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    // Prfe Dateityp\n    if (file.type !== 'application/pdf') {\n      showMessage(\n        t('lifecycle.onlyPdfAllowed', { defaultValue: 'Nur PDF-Dateien sind erlaubt' }),\n        'error'\n      );\n      return;\n    }\n\n    setUploading(true);\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('type', templateType === 'certificate' ? 'employmentCertificate' : 'employmentContract');\n\n      const response = await axiosInstance.post(\n        API_ENDPOINTS.ORGANIZATION_LIFECYCLE.UPLOAD_TEMPLATE,\n        formData,\n        {\n          headers: { 'Content-Type': 'multipart/form-data' }\n        }\n      );\n      \n      showMessage(\n        response.data.message || t('lifecycle.templateUploaded', { defaultValue: 'Template erfolgreich hochgeladen' }),\n        'success'\n      );\n      \n      // Lade Templates neu\n      loadTemplates();\n    } catch (error: any) {\n      console.error('Fehler beim Hochladen:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.uploadError', { defaultValue: 'Fehler beim Hochladen' }),\n        'error'\n      );\n    } finally {\n      setUploading(false);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    }\n  };\n\n  const handleDeleteTemplate = async (templateType: 'certificate' | 'contract') => {\n    if (!window.confirm(t('lifecycle.deleteTemplateConfirm', { defaultValue: 'Template wirklich lschen?' }))) {\n      return;\n    }\n\n    try {\n      // Hole aktuelle Organisation\n      const orgResponse = await axiosInstance.get(API_ENDPOINTS.ORGANIZATIONS.CURRENT);\n      const settings = orgResponse.data.settings || {};\n      \n      // Entferne Template\n      if (settings.documentTemplates) {\n        const typeKey = templateType === 'certificate' ? 'employmentCertificate' : 'employmentContract';\n        delete settings.documentTemplates[typeKey];\n        \n        // Aktualisiere Organisation\n        await axiosInstance.put(API_ENDPOINTS.ORGANIZATIONS.CURRENT, {\n          settings\n        });\n      }\n      \n      showMessage(\n        t('lifecycle.templateDeleted', { defaultValue: 'Template erfolgreich gelscht' }),\n        'success'\n      );\n      \n      // Lade Templates neu\n      loadTemplates();\n    } catch (error: any) {\n      console.error('Fehler beim Lschen:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.deleteError', { defaultValue: 'Fehler beim Lschen' }),\n        'error'\n      );\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-8\">\n        <ArrowPathIcon className=\"h-6 w-6 animate-spin text-gray-400\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold flex items-center dark:text-white\">\n            <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n            {t('organization.documentTemplates', { defaultValue: 'Dokumenten-Templates' })}\n          </h3>\n          <div className=\"flex items-center space-x-2\">\n            <select\n              value={templateType}\n              onChange={(e) => setTemplateType(e.target.value as 'certificate' | 'contract')}\n              className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n            >\n              <option value=\"certificate\">Arbeitszeugnis</option>\n              <option value=\"contract\">Arbeitsvertrag</option>\n            </select>\n            <button\n              onClick={() => fileInputRef.current?.click()}\n              disabled={uploading}\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              title={uploading ? t('common.uploading', { defaultValue: 'Lade hoch...' }) : t('lifecycle.uploadTemplate', { defaultValue: 'Template hochladen' })}\n            >\n              {uploading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <PlusIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\".pdf\"\n            onChange={handleFileUpload}\n            className=\"hidden\"\n          />\n        </div>\n        \n        {templates.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n            <DocumentTextIcon className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n            <p>{t('lifecycle.noTemplates', { defaultValue: 'Keine Templates vorhanden' })}</p>\n            <p className=\"text-sm mt-2\">{t('lifecycle.uploadFirstTemplate', { defaultValue: 'Laden Sie Ihr erstes Template hoch' })}</p>\n          </div>\n        ) : (\n          <div className=\"space-y-2\">\n            {templates.map((template) => (\n              <div\n                key={template.type}\n                className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\"\n              >\n                <div>\n                  <div className=\"font-medium dark:text-white\">{template.name}</div>\n                  <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                    {template.type === 'certificate' \n                      ? t('lifecycle.certificate', { defaultValue: 'Arbeitszeugnis' })\n                      : t('lifecycle.contract', { defaultValue: 'Arbeitsvertrag' })}\n                    {template.version && ` - Version ${template.version}`}\n                  </div>\n                  {template.filePath && (\n                    <div className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">\n                      {template.filePath}\n                    </div>\n                  )}\n                </div>\n                <button\n                  onClick={() => handleDeleteTemplate(template.type)}\n                  className=\"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 rounded-md\"\n                  title={t('common.delete', { defaultValue: 'Lschen' })}\n                >\n                  <TrashIcon className=\"h-5 w-5\" />\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n      \n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold flex items-center dark:text-white\">\n            <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n            {t('organization.documentSignatures', { defaultValue: 'Dokumenten-Signaturen' })}\n          </h3>\n        </div>\n        \n        <SignatureUploadSection \n          organization={organization}\n          onUpload={loadTemplates}\n        />\n      </div>\n      \n      <FieldPositionConfiguration \n        organization={organization}\n        onSave={onSave}\n      />\n    </div>\n  );\n};\n\ninterface SignatureUploadSectionProps {\n  organization: Organization | null;\n  onUpload: () => void;\n}\n\nconst SignatureUploadSection: React.FC<SignatureUploadSectionProps> = ({\n  organization,\n  onUpload\n}) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [signatures, setSignatures] = useState<Array<{\n    type: 'certificate' | 'contract';\n    signerName: string;\n    signerPosition?: string;\n    path: string;\n    position?: {\n      x: number;\n      y: number;\n      page: number;\n    };\n  }>>([]);\n  const [loading, setLoading] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [signatureType, setSignatureType] = useState<'certificate' | 'contract'>('certificate');\n  const [signerName, setSignerName] = useState('');\n  const [signerPosition, setSignerPosition] = useState('');\n  const [positionX, setPositionX] = useState<string>('400');\n  const [positionY, setPositionY] = useState<string>('100');\n  const [positionPage, setPositionPage] = useState<string>('1');\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (organization) {\n      loadSignatures();\n    }\n  }, [organization]);\n\n  const loadSignatures = async () => {\n    setLoading(true);\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.DOCUMENT_SIGNATURES);\n      const documentSignatures = response.data.documentSignatures || {};\n      \n      const signaturesList: Array<{\n        type: 'certificate' | 'contract';\n        signerName: string;\n        signerPosition?: string;\n        path: string;\n        position?: {\n          x: number;\n          y: number;\n          page: number;\n        };\n      }> = [];\n      \n      if (documentSignatures.employmentCertificate) {\n        signaturesList.push({\n          type: 'certificate',\n          signerName: documentSignatures.employmentCertificate.signerName,\n          signerPosition: documentSignatures.employmentCertificate.signerPosition,\n          path: documentSignatures.employmentCertificate.path,\n          position: documentSignatures.employmentCertificate.position\n        });\n      }\n      if (documentSignatures.employmentContract) {\n        signaturesList.push({\n          type: 'contract',\n          signerName: documentSignatures.employmentContract.signerName,\n          signerPosition: documentSignatures.employmentContract.signerPosition,\n          path: documentSignatures.employmentContract.path,\n          position: documentSignatures.employmentContract.position\n        });\n      }\n      \n      setSignatures(signaturesList);\n    } catch (error: any) {\n      console.error('Fehler beim Laden der Signaturen:', error);\n      if (error.response?.status !== 404) {\n        showMessage(\n          error.response?.data?.message || t('lifecycle.loadSignaturesError', { defaultValue: 'Fehler beim Laden der Signaturen' }),\n          'error'\n        );\n      }\n      setSignatures([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    // Prfe Dateityp\n    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'application/pdf'];\n    if (!allowedTypes.includes(file.type)) {\n      showMessage(\n        t('lifecycle.onlyImageOrPdfAllowed', { defaultValue: 'Nur Bilder (JPEG, PNG, GIF) oder PDF-Dateien sind erlaubt' }),\n        'error'\n      );\n      return;\n    }\n\n    if (!signerName.trim()) {\n      showMessage(\n        t('lifecycle.signerNameRequired', { defaultValue: 'Name des Unterzeichners ist erforderlich' }),\n        'error'\n      );\n      return;\n    }\n\n    setUploading(true);\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('type', signatureType === 'certificate' ? 'employmentCertificate' : 'employmentContract');\n      formData.append('signerName', signerName);\n      if (signerPosition) {\n        formData.append('signerPosition', signerPosition);\n      }\n      // Positionen hinzufgen\n      formData.append('positionX', positionX || '400');\n      formData.append('positionY', positionY || '100');\n      formData.append('page', positionPage || '1');\n\n      const response = await axiosInstance.post(\n        API_ENDPOINTS.ORGANIZATION_LIFECYCLE.UPLOAD_SIGNATURE,\n        formData,\n        {\n          headers: { 'Content-Type': 'multipart/form-data' }\n        }\n      );\n      \n      showMessage(\n        response.data.message || t('lifecycle.signatureUploaded', { defaultValue: 'Signatur erfolgreich hochgeladen' }),\n        'success'\n      );\n      \n      // Reset form\n      setSignerName('');\n      setSignerPosition('');\n      setPositionX('400');\n      setPositionY('100');\n      setPositionPage('1');\n      \n      // Lade Signaturen neu\n      loadSignatures();\n      onUpload();\n    } catch (error: any) {\n      console.error('Fehler beim Hochladen:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.uploadError', { defaultValue: 'Fehler beim Hochladen' }),\n        'error'\n      );\n    } finally {\n      setUploading(false);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    }\n  };\n\n  const handleDeleteSignature = async (signatureType: 'certificate' | 'contract') => {\n    if (!window.confirm(t('lifecycle.deleteSignatureConfirm', { defaultValue: 'Signatur wirklich lschen?' }))) {\n      return;\n    }\n\n    try {\n      const orgResponse = await axiosInstance.get(API_ENDPOINTS.ORGANIZATIONS.CURRENT);\n      const settings = orgResponse.data.settings || {};\n      \n      if (settings.documentSignatures) {\n        const typeKey = signatureType === 'certificate' ? 'employmentCertificate' : 'employmentContract';\n        delete settings.documentSignatures[typeKey];\n        \n        await axiosInstance.put(API_ENDPOINTS.ORGANIZATIONS.CURRENT, {\n          settings\n        });\n      }\n      \n      showMessage(\n        t('lifecycle.signatureDeleted', { defaultValue: 'Signatur erfolgreich gelscht' }),\n        'success'\n      );\n      \n      loadSignatures();\n    } catch (error: any) {\n      console.error('Fehler beim Lschen:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.deleteError', { defaultValue: 'Fehler beim Lschen' }),\n        'error'\n      );\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-4\">\n        <ArrowPathIcon className=\"h-5 w-5 animate-spin text-gray-400\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"border border-gray-300 dark:border-gray-600 rounded-lg p-4\">\n        <div className=\"space-y-3\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              {t('lifecycle.signatureType', { defaultValue: 'Signatur-Typ' })}\n            </label>\n            <select\n              value={signatureType}\n              onChange={(e) => setSignatureType(e.target.value as 'certificate' | 'contract')}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n            >\n              <option value=\"certificate\">{t('lifecycle.certificate', { defaultValue: 'Arbeitszeugnis' })}</option>\n              <option value=\"contract\">{t('lifecycle.contract', { defaultValue: 'Arbeitsvertrag' })}</option>\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              {t('lifecycle.signerName', { defaultValue: 'Name des Unterzeichners' })} <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"text\"\n              value={signerName}\n              onChange={(e) => setSignerName(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n              placeholder={t('lifecycle.signerNamePlaceholder', { defaultValue: 'z.B. Stefan Bossart' })}\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              {t('lifecycle.signerPosition', { defaultValue: 'Position' })}\n            </label>\n            <input\n              type=\"text\"\n              value={signerPosition}\n              onChange={(e) => setSignerPosition(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n              placeholder={t('lifecycle.signerPositionPlaceholder', { defaultValue: 'z.B. Geschftsfhrer' })}\n            />\n          </div>\n          \n          <div className=\"border-t border-gray-200 dark:border-gray-700 pt-3\">\n            <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\n              {t('lifecycle.signaturePosition', { defaultValue: 'Signatur-Position im PDF' })}\n            </h4>\n            <div className=\"grid grid-cols-3 gap-3\">\n              <div>\n                <label className=\"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1\">\n                  {t('lifecycle.positionX', { defaultValue: 'X (horizontal)' })}\n                </label>\n                <input\n                  type=\"number\"\n                  value={positionX}\n                  onChange={(e) => setPositionX(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                  placeholder=\"400\"\n                  min=\"0\"\n                />\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                  {t('lifecycle.positionXHint', { defaultValue: '0 = links' })}\n                </p>\n              </div>\n              <div>\n                <label className=\"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1\">\n                  {t('lifecycle.positionY', { defaultValue: 'Y (vertikal)' })}\n                </label>\n                <input\n                  type=\"number\"\n                  value={positionY}\n                  onChange={(e) => setPositionY(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                  placeholder=\"100\"\n                  min=\"0\"\n                />\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                  {t('lifecycle.positionYHint', { defaultValue: '0 = unten' })}\n                </p>\n              </div>\n              <div>\n                <label className=\"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1\">\n                  {t('lifecycle.positionPage', { defaultValue: 'Seite' })}\n                </label>\n                <input\n                  type=\"number\"\n                  value={positionPage}\n                  onChange={(e) => setPositionPage(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                  placeholder=\"1\"\n                  min=\"1\"\n                />\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                  {t('lifecycle.positionPageHint', { defaultValue: 'Seitennummer' })}\n                </p>\n              </div>\n            </div>\n            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n              {t('lifecycle.signaturePositionHint', { defaultValue: 'Koordinaten in PDF-Punkten (1 Punkt = 1/72 Zoll). A4: 595 x 842 Punkte. Standard: X=400, Y=100, Seite=1' })}\n            </p>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              {t('lifecycle.signatureFile', { defaultValue: 'Signatur-Datei' })} <span className=\"text-red-500\">*</span>\n            </label>\n            <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center\">\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\"image/jpeg,image/png,image/gif,application/pdf\"\n                onChange={handleFileUpload}\n                className=\"hidden\"\n              />\n              <button\n                onClick={() => fileInputRef.current?.click()}\n                disabled={uploading || !signerName.trim()}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {uploading ? (\n                  <span className=\"flex items-center space-x-2\">\n                    <ArrowPathIcon className=\"h-4 w-4 animate-spin\" />\n                    <span>{t('common.uploading', { defaultValue: 'Lade hoch...' })}</span>\n                  </span>\n                ) : (\n                  t('lifecycle.selectSignatureFile', { defaultValue: 'Datei auswhlen' })\n                )}\n              </button>\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n                {t('lifecycle.signatureFileHint', { defaultValue: 'JPEG, PNG, GIF oder PDF (max. 5MB)' })}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      {signatures.length > 0 && (\n        <div className=\"space-y-2\">\n          <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n            {t('lifecycle.uploadedSignatures', { defaultValue: 'Hochgeladene Signaturen' })}\n          </h4>\n          {signatures.map((signature) => (\n            <div\n              key={signature.type}\n              className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\"\n            >\n              <div>\n                <div className=\"font-medium dark:text-white\">\n                  {signature.type === 'certificate' \n                    ? t('lifecycle.certificate', { defaultValue: 'Arbeitszeugnis' })\n                    : t('lifecycle.contract', { defaultValue: 'Arbeitsvertrag' })}\n                </div>\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                  {signature.signerName}\n                  {signature.signerPosition && ` - ${signature.signerPosition}`}\n                </div>\n                {signature.position && (\n                  <div className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">\n                    {t('lifecycle.position', { defaultValue: 'Position' })}: X={signature.position.x}, Y={signature.position.y}, {t('lifecycle.page', { defaultValue: 'Seite' })} {signature.position.page}\n                  </div>\n                )}\n              </div>\n              <button\n                onClick={() => handleDeleteSignature(signature.type)}\n                className=\"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 rounded-md\"\n                title={t('common.delete', { defaultValue: 'Lschen' })}\n              >\n                <TrashIcon className=\"h-5 w-5\" />\n              </button>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\ninterface FieldPositionConfigurationProps {\n  organization: Organization | null;\n  onSave?: () => void;\n}\n\nconst FieldPositionConfiguration: React.FC<FieldPositionConfigurationProps> = ({\n  organization,\n  onSave\n}) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [templateType, setTemplateType] = useState<'certificate' | 'contract'>('certificate');\n  const [fields, setFields] = useState<Record<string, { x: number; y: number; fontSize?: number }>>({});\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  // Standard-Felder fr Certificate und Contract\n  const certificateFields = ['userName', 'organizationName', 'currentDate', 'identificationNumber', 'startDate', 'endDate'];\n  const contractFields = ['userName', 'organizationName', 'currentDate', 'identificationNumber', 'startDate', 'endDate', 'position', 'salary', 'workingHours'];\n\n  useEffect(() => {\n    if (organization) {\n      loadFields();\n    }\n  }, [organization, templateType]);\n\n  const loadFields = async () => {\n    try {\n      const settings = organization?.settings as any;\n      const templateSettings = settings?.documentTemplates?.[templateType === 'certificate' ? 'employmentCertificate' : 'employmentContract'];\n      const savedFields = templateSettings?.fields || {};\n      \n      // Standard-Positionen (A4: 595.28 x 841.89 Punkte)\n      // Y-Koordinate: 0 ist unten, 841.89 ist oben (PDF-Koordinatensystem)\n      const pageHeight = 841.89;\n      const margin = 50;\n      const lineHeight = 20;\n      let currentY = pageHeight - margin - 30;\n      \n      // Lade gespeicherte Felder oder verwende Standard-Werte (synchronisiert mit Backend)\n      const defaultFields: Record<string, { x: number; y: number; fontSize?: number }> = {};\n      const fieldList = templateType === 'certificate' ? certificateFields : contractFields;\n      \n      // Standard-Positionen (wie im Backend getDefaultFieldPositions)\n      const defaultPositions: Record<string, { x: number; y: number; fontSize?: number }> = {\n        userName: { x: margin, y: currentY, fontSize: 14 },\n        organizationName: { x: margin, y: currentY - lineHeight, fontSize: 12 },\n        currentDate: { x: margin, y: currentY - lineHeight * 2, fontSize: 12 },\n        identificationNumber: { x: margin, y: currentY - lineHeight * 3, fontSize: 12 },\n        startDate: { x: margin, y: currentY - lineHeight * 4, fontSize: 12 },\n        endDate: { x: margin, y: currentY - lineHeight * 5, fontSize: 12 }\n      };\n      \n      if (templateType === 'contract') {\n        defaultPositions.position = { x: margin, y: currentY - lineHeight * 6, fontSize: 12 };\n        defaultPositions.salary = { x: margin, y: currentY - lineHeight * 7, fontSize: 12 };\n        defaultPositions.workingHours = { x: margin, y: currentY - lineHeight * 8, fontSize: 12 };\n      }\n      \n      fieldList.forEach((fieldName) => {\n        defaultFields[fieldName] = savedFields[fieldName] || defaultPositions[fieldName] || {\n          x: margin,\n          y: currentY,\n          fontSize: fieldName === 'userName' ? 14 : 12\n        };\n      });\n      \n      setFields(defaultFields);\n    } catch (error) {\n      console.error('Fehler beim Laden der Felder:', error);\n    }\n  };\n\n  const handleFieldChange = (fieldName: string, property: 'x' | 'y' | 'fontSize', value: string) => {\n    setFields(prev => ({\n      ...prev,\n      [fieldName]: {\n        ...prev[fieldName],\n        [property]: property === 'fontSize' ? parseFloat(value) || 12 : parseFloat(value) || 0\n      }\n    }));\n  };\n\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      const orgResponse = await axiosInstance.get(API_ENDPOINTS.ORGANIZATIONS.CURRENT);\n      const currentSettings = orgResponse.data.settings || {};\n      \n      if (!currentSettings.documentTemplates) {\n        currentSettings.documentTemplates = {};\n      }\n      \n      const typeKey = templateType === 'certificate' ? 'employmentCertificate' : 'employmentContract';\n      if (!currentSettings.documentTemplates[typeKey]) {\n        currentSettings.documentTemplates[typeKey] = {};\n      }\n      \n      currentSettings.documentTemplates[typeKey].fields = fields;\n      \n      await organizationService.updateOrganization({\n        settings: currentSettings\n      });\n      \n      showMessage(\n        t('lifecycle.fieldPositionsSaved', { defaultValue: 'Feld-Positionen erfolgreich gespeichert' }),\n        'success'\n      );\n      \n      if (onSave) {\n        onSave();\n      }\n    } catch (error: any) {\n      console.error('Fehler beim Speichern:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.saveError', { defaultValue: 'Fehler beim Speichern' }),\n        'error'\n      );\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleReset = async () => {\n    if (window.confirm(t('lifecycle.resetFieldPositionsConfirm', { defaultValue: 'Positionen auf Standardwerte zurcksetzen?' }))) {\n      // Setze Felder auf Standard-Werte zurck\n      const pageHeight = 841.89;\n      const margin = 50;\n      const lineHeight = 20;\n      let currentY = pageHeight - margin - 30;\n      \n      const defaultPositions: Record<string, { x: number; y: number; fontSize?: number }> = {\n        userName: { x: margin, y: currentY, fontSize: 14 },\n        organizationName: { x: margin, y: currentY - lineHeight, fontSize: 12 },\n        currentDate: { x: margin, y: currentY - lineHeight * 2, fontSize: 12 },\n        identificationNumber: { x: margin, y: currentY - lineHeight * 3, fontSize: 12 },\n        startDate: { x: margin, y: currentY - lineHeight * 4, fontSize: 12 },\n        endDate: { x: margin, y: currentY - lineHeight * 5, fontSize: 12 }\n      };\n      \n      if (templateType === 'contract') {\n        defaultPositions.position = { x: margin, y: currentY - lineHeight * 6, fontSize: 12 };\n        defaultPositions.salary = { x: margin, y: currentY - lineHeight * 7, fontSize: 12 };\n        defaultPositions.workingHours = { x: margin, y: currentY - lineHeight * 8, fontSize: 12 };\n      }\n      \n      const fieldList = templateType === 'certificate' ? certificateFields : contractFields;\n      const resetFields: Record<string, { x: number; y: number; fontSize?: number }> = {};\n      \n      fieldList.forEach((fieldName) => {\n        resetFields[fieldName] = defaultPositions[fieldName] || {\n          x: margin,\n          y: currentY,\n          fontSize: fieldName === 'userName' ? 14 : 12\n        };\n      });\n      \n      setFields(resetFields);\n    }\n  };\n\n  const fieldList = templateType === 'certificate' ? certificateFields : contractFields;\n  const fieldLabels: Record<string, string> = {\n    userName: t('lifecycle.fieldUserName', { defaultValue: 'Benutzername' }),\n    organizationName: t('lifecycle.fieldOrganizationName', { defaultValue: 'Organisationsname' }),\n    currentDate: t('lifecycle.fieldCurrentDate', { defaultValue: 'Aktuelles Datum' }),\n    identificationNumber: t('lifecycle.fieldIdentificationNumber', { defaultValue: 'Ausweisnummer' }),\n    startDate: t('lifecycle.fieldStartDate', { defaultValue: 'Startdatum' }),\n    endDate: t('lifecycle.fieldEndDate', { defaultValue: 'Enddatum' }),\n    position: t('lifecycle.fieldPosition', { defaultValue: 'Position' }),\n    salary: t('lifecycle.fieldSalary', { defaultValue: 'Gehalt' }),\n    workingHours: t('lifecycle.fieldWorkingHours', { defaultValue: 'Arbeitsstunden' })\n  };\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-lg font-semibold dark:text-white\">\n          {t('organization.fieldPositions', { defaultValue: 'Feld-Positionen konfigurieren' })}\n        </h3>\n        <div className=\"flex items-center space-x-2\">\n          <select\n            value={templateType}\n            onChange={(e) => setTemplateType(e.target.value as 'certificate' | 'contract')}\n            className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n          >\n            <option value=\"certificate\">{t('lifecycle.certificate', { defaultValue: 'Certificado Laboral' })}</option>\n            <option value=\"contract\">{t('lifecycle.contract', { defaultValue: 'Contrato de Trabajo' })}</option>\n          </select>\n        </div>\n      </div>\n      \n      <div className=\"space-y-4\">\n        <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3\">\n          <p className=\"text-sm text-blue-800 dark:text-blue-200 font-medium mb-1\">\n            {t('lifecycle.fieldPositionsInfo', { defaultValue: 'Konfigurieren Sie die Positionen der Felder im Template-PDF.' })}\n          </p>\n          <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n            {t('lifecycle.fieldPositionsHint', { defaultValue: 'Koordinaten in PDF-Punkten. A4: 595 x 842 Punkte. Y=0 ist unten, Y=842 ist oben. X=0 ist links, X=595 ist rechts.' })}\n          </p>\n        </div>\n        \n        <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n          {fieldList.map((fieldName) => (\n            <div key={fieldName} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-3\">\n              <div className=\"font-medium text-sm dark:text-white mb-2\">\n                {fieldLabels[fieldName] || fieldName}\n              </div>\n              <div className=\"grid grid-cols-3 gap-2\">\n                <div>\n                  <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\n                    X\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={fields[fieldName]?.x || 0}\n                    onChange={(e) => handleFieldChange(fieldName, 'x', e.target.value)}\n                    className=\"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                    min=\"0\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\n                    Y\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={fields[fieldName]?.y || 0}\n                    onChange={(e) => handleFieldChange(fieldName, 'y', e.target.value)}\n                    className=\"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                    min=\"0\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\n                    {t('lifecycle.fontSize', { defaultValue: 'Schriftgre' })}\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={fields[fieldName]?.fontSize || 12}\n                    onChange={(e) => handleFieldChange(fieldName, 'fontSize', e.target.value)}\n                    className=\"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                    min=\"8\"\n                    max=\"72\"\n                  />\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n        \n        <div className=\"flex items-center justify-end space-x-2 pt-2 border-t border-gray-200 dark:border-gray-700\">\n          <button\n            onClick={handleReset}\n            className=\"p-2 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-white\"\n            title={t('common.reset', { defaultValue: 'Zurcksetzen' })}\n          >\n            <ArrowPathIcon className=\"h-5 w-5\" />\n          </button>\n          <button\n            onClick={handleSave}\n            disabled={saving}\n            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-blue-700 dark:hover:bg-blue-800\"\n            title={saving ? t('common.saving', { defaultValue: 'Speichern...' }) : t('common.save', { defaultValue: 'Speichern' })}\n          >\n            {saving ? (\n              <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n            ) : (\n              <CheckIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DocumentConfigurationTab;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { EnvelopeIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { Organization } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface Props {\n  organization: Organization | null;\n  onSave?: () => void;\n}\n\nconst SMTPConfigurationTab: React.FC<Props> = ({ organization, onSave }) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [loading, setLoading] = useState(false);\n  const [smtpSettings, setSmtpSettings] = useState({\n    smtpHost: '',\n    smtpPort: '587',\n    smtpUser: '',\n    smtpPass: '',\n    smtpFromEmail: '',\n    smtpFromName: ''\n  });\n  const [showPassword, setShowPassword] = useState(false);\n\n  useEffect(() => {\n    if (organization?.settings) {\n      const settings = organization.settings as any;\n      setSmtpSettings({\n        smtpHost: settings.smtpHost || '',\n        smtpPort: settings.smtpPort?.toString() || '587',\n        smtpUser: settings.smtpUser || '',\n        smtpPass: settings.smtpPass || '',\n        smtpFromEmail: settings.smtpFromEmail || (organization?.domain ? `noreply@${organization.domain}` : ''),\n        smtpFromName: settings.smtpFromName || organization?.displayName || ''\n      });\n    }\n  }, [organization]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setSmtpSettings(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!smtpSettings.smtpHost || !smtpSettings.smtpUser || !smtpSettings.smtpPass) {\n      showMessage(t('organization.smtp.requiredFields'), 'error');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      \n      const settings = {\n        ...(organization?.settings || {}),\n        smtpHost: smtpSettings.smtpHost,\n        smtpPort: parseInt(smtpSettings.smtpPort) || 587,\n        smtpUser: smtpSettings.smtpUser,\n        smtpPass: smtpSettings.smtpPass,\n        smtpFromEmail: smtpSettings.smtpFromEmail,\n        smtpFromName: smtpSettings.smtpFromName\n      };\n\n      await organizationService.updateOrganization({\n        settings: settings\n      });\n      \n      showMessage(t('organization.smtp.saveSuccess'), 'success');\n      if (onSave) {\n        onSave();\n      }\n    } catch (error: any) {\n      const errorMessage = error.response?.data?.message || t('organization.smtp.saveError');\n      showMessage(errorMessage, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClear = () => {\n    setSmtpSettings({\n      smtpHost: '',\n      smtpPort: '587',\n      smtpUser: '',\n      smtpPass: '',\n      smtpFromEmail: organization?.domain ? `noreply@${organization.domain}` : '',\n      smtpFromName: organization?.displayName || ''\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-2 mb-4\">\n        <EnvelopeIcon className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n          {t('organization.smtp.title')}\n        </h3>\n      </div>\n\n      <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">\n        {t('organization.smtp.description')}\n      </p>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div>\n          <label htmlFor=\"smtpHost\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n            {t('organization.smtp.host')} <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"text\"\n            id=\"smtpHost\"\n            name=\"smtpHost\"\n            value={smtpSettings.smtpHost}\n            onChange={handleChange}\n            placeholder=\"smtp.example.com\"\n            required\n            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n          />\n          <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n            {t('organization.smtp.hostHint')}\n          </p>\n        </div>\n\n        <div>\n          <label htmlFor=\"smtpPort\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n            {t('organization.smtp.port')} <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"number\"\n            id=\"smtpPort\"\n            name=\"smtpPort\"\n            value={smtpSettings.smtpPort}\n            onChange={handleChange}\n            placeholder=\"587\"\n            required\n            min=\"1\"\n            max=\"65535\"\n            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n          />\n          <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n            {t('organization.smtp.portHint')}\n          </p>\n        </div>\n\n        <div>\n          <label htmlFor=\"smtpUser\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n            {t('organization.smtp.user')} <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"text\"\n            id=\"smtpUser\"\n            name=\"smtpUser\"\n            value={smtpSettings.smtpUser}\n            onChange={handleChange}\n            placeholder=\"noreply@example.com\"\n            required\n            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n          />\n          <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n            {t('organization.smtp.userHint')}\n          </p>\n        </div>\n\n        <div>\n          <label htmlFor=\"smtpPass\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n            {t('organization.smtp.password')} <span className=\"text-red-500\">*</span>\n          </label>\n          <div className=\"relative\">\n            <input\n              type={showPassword ? 'text' : 'password'}\n              id=\"smtpPass\"\n              name=\"smtpPass\"\n              value={smtpSettings.smtpPass}\n              onChange={handleChange}\n              placeholder=\"\"\n              required\n              className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n            />\n            <button\n              type=\"button\"\n              onClick={() => setShowPassword(!showPassword)}\n              className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n            >\n              {showPassword ? (\n                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                </svg>\n              ) : (\n                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                </svg>\n              )}\n            </button>\n          </div>\n          <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n            {t('organization.smtp.passwordHint')}\n          </p>\n        </div>\n\n        <div className=\"border-t pt-4\">\n          <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\n            {t('organization.smtp.fromSettings')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"smtpFromEmail\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.smtp.fromEmail')}\n              </label>\n              <input\n                type=\"email\"\n                id=\"smtpFromEmail\"\n                name=\"smtpFromEmail\"\n                value={smtpSettings.smtpFromEmail}\n                onChange={handleChange}\n                placeholder=\"noreply@example.com\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                {t('organization.smtp.fromEmailHint')}\n              </p>\n            </div>\n\n            <div>\n              <label htmlFor=\"smtpFromName\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.smtp.fromName')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"smtpFromName\"\n                name=\"smtpFromName\"\n                value={smtpSettings.smtpFromName}\n                onChange={handleChange}\n                placeholder={organization?.displayName || 'Intranet'}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                {t('organization.smtp.fromNameHint')}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md p-4\">\n          <p className=\"text-sm text-blue-800 dark:text-blue-200\">\n            <strong>{t('organization.smtp.infoTitle')}</strong>\n          </p>\n          <ul className=\"mt-2 text-sm text-blue-700 dark:text-blue-300 list-disc list-inside space-y-1\">\n            <li>{t('organization.smtp.info1')}</li>\n            <li>{t('organization.smtp.info2')}</li>\n            <li>{t('organization.smtp.info3')}</li>\n          </ul>\n        </div>\n\n        <div className=\"flex justify-end gap-2 pt-4\">\n          <button\n            type=\"button\"\n            onClick={handleClear}\n            className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n            title={t('organization.smtp.clear')}\n          >\n            <ArrowPathIcon className=\"h-5 w-5\" />\n          </button>\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n            title={loading ? t('organization.saving') : t('common.save')}\n          >\n            {loading ? (\n              <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n            ) : (\n              <CheckIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default SMTPConfigurationTab;\n\n","/**\n * URL-Validierung fr API-Endpunkte (Frontend)\n * \n * Verhindert SSRF durch Whitelist-basierte Validierung\n */\n\nconst ALLOWED_DOMAINS = {\n  lobbyPms: ['app.lobbypms.com'],\n  ttlock: ['open.ttlock.com', 'euopen.ttlock.com', 'api.sciener.com'],\n  sire: ['api.sire.gov.co'],\n  boldPayment: ['api.bold.co', 'sandbox.bold.co'],\n} as const;\n\nexport type ApiService = keyof typeof ALLOWED_DOMAINS;\n\n/**\n * Validiert eine API-URL gegen eine Whitelist\n * \n * @param url - Die zu validierende URL\n * @param service - Der API-Service\n * @returns true wenn URL gltig ist, false sonst\n */\nexport const validateApiUrl = (url: string, service: ApiService): boolean => {\n  if (!url || typeof url !== 'string') {\n    return false;\n  }\n\n  try {\n    const parsed = new URL(url);\n    const allowedDomains = ALLOWED_DOMAINS[service];\n\n    return allowedDomains.some(domain => {\n      // Exakte bereinstimmung\n      if (parsed.hostname === domain) {\n        return true;\n      }\n\n      // Subdomain (z.B. api.app.lobbypms.com)\n      if (parsed.hostname.endsWith(`.${domain}`)) {\n        return true;\n      }\n\n      return false;\n    });\n  } catch (error) {\n    // Ungltige URL\n    return false;\n  }\n};\n\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { KeyIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { Organization, OrganizationSettings } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport { validateApiUrl } from '../../utils/urlValidation.ts';\n\n// Feste LobbyPMS API URL\nconst LOBBYPMS_API_URL = 'https://app.lobbypms.com/api';\n\ninterface Props {\n  organization: Organization | null;\n  onSave?: () => void;\n}\n\nconst ApiConfigurationTab: React.FC<Props> = ({ organization, onSave }) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const { canManageOrganization, loading: permissionsLoading } = usePermissions();\n  const [loading, setLoading] = useState(false);\n  const [apiSettings, setApiSettings] = useState({\n    // LobbyPMS\n    lobbyPmsApiKey: '',\n    lobbyPmsPropertyId: '',\n    lobbyPmsSyncEnabled: false,\n    lobbyPmsAutoCreateTasks: false,\n    lobbyPmsAutoSendReservationInvitation: true, // Default: true (Rckwrtskompatibilitt)\n    lobbyPmsLateCheckInThreshold: '22:00',\n    \n    // TTLock\n    ttlockClientId: '',\n    ttlockClientSecret: '',\n    ttlockApiUrl: 'https://open.ttlock.com',\n    ttlockUsername: '',\n    ttlockPassword: '',\n    ttlockPasscodeType: 'auto' as 'auto' | 'custom',\n    \n    // SIRE\n    sireApiUrl: '',\n    sireApiKey: '',\n    sireApiSecret: '',\n    sireEnabled: false,\n    sireAutoRegisterOnCheckIn: false,\n    sirePropertyCode: '',\n    \n    // Bold Payment\n    boldPaymentApiKey: '',\n    boldPaymentMerchantId: '',\n    boldPaymentEnvironment: 'sandbox' as 'sandbox' | 'production',\n    \n    // WhatsApp\n    whatsappProvider: 'twilio' as 'twilio' | 'whatsapp-business-api',\n    whatsappApiKey: '',\n    whatsappApiSecret: '',\n    whatsappPhoneNumberId: ''\n  });\n  const [showSecrets, setShowSecrets] = useState<Record<string, boolean>>({});\n\n  useEffect(() => {\n    if (organization?.settings) {\n      const settings = organization.settings as OrganizationSettings;\n      const lobbyPms = settings.lobbyPms || {};\n      const doorSystem = settings.doorSystem || {};\n      const sire = settings.sire || {};\n      const boldPayment = settings.boldPayment || {};\n      const whatsapp = settings.whatsapp || {};\n      \n      setApiSettings({\n        lobbyPmsApiKey: lobbyPms.apiKey || '',\n        lobbyPmsPropertyId: lobbyPms.propertyId || '',\n        lobbyPmsSyncEnabled: lobbyPms.syncEnabled || false,\n        lobbyPmsAutoCreateTasks: lobbyPms.autoCreateTasks || false,\n        lobbyPmsAutoSendReservationInvitation: lobbyPms.autoSendReservationInvitation !== false, // Default: true\n        lobbyPmsLateCheckInThreshold: lobbyPms.lateCheckInThreshold || '22:00',\n        \n        ttlockClientId: doorSystem.clientId || '',\n        ttlockClientSecret: doorSystem.clientSecret || '',\n        ttlockApiUrl: doorSystem.apiUrl || 'https://open.ttlock.com',\n        ttlockUsername: doorSystem.username || '',\n        ttlockPassword: '', // Password wird nicht angezeigt (aus Sicherheitsgrnden)\n        ttlockPasscodeType: (doorSystem.passcodeType as 'auto' | 'custom') || 'auto',\n        \n        sireApiUrl: sire.apiUrl || '',\n        sireApiKey: sire.apiKey || '',\n        sireApiSecret: sire.apiSecret || '',\n        sireEnabled: sire.enabled || false,\n        sireAutoRegisterOnCheckIn: sire.autoRegisterOnCheckIn || false,\n        sirePropertyCode: sire.propertyCode || '',\n        \n        boldPaymentApiKey: boldPayment.apiKey || '',\n        boldPaymentMerchantId: boldPayment.merchantId || '',\n        boldPaymentEnvironment: boldPayment.environment || 'sandbox',\n        \n        whatsappProvider: (whatsapp.provider as 'twilio' | 'whatsapp-business-api') || 'twilio',\n        whatsappApiKey: whatsapp.apiKey || '',\n        whatsappApiSecret: whatsapp.apiSecret || '',\n        whatsappPhoneNumberId: whatsapp.phoneNumberId || ''\n      });\n    }\n  }, [organization]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value, type } = e.target;\n    const checked = (e.target as HTMLInputElement).checked;\n    \n    setApiSettings(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n\n  const toggleShowSecret = (key: string) => {\n    setShowSecrets(prev => ({\n      ...prev,\n      [key]: !prev[key]\n    }));\n  };\n\n  const handleClear = () => {\n    setApiSettings({\n      lobbyPmsApiKey: '',\n      lobbyPmsPropertyId: '',\n      lobbyPmsSyncEnabled: false,\n      lobbyPmsAutoCreateTasks: false,\n      lobbyPmsAutoSendReservationInvitation: true,\n      lobbyPmsLateCheckInThreshold: '22:00',\n      ttlockClientId: '',\n      ttlockClientSecret: '',\n      ttlockApiUrl: 'https://open.ttlock.com',\n      ttlockUsername: '',\n      ttlockPassword: '',\n      ttlockPasscodeType: 'auto' as 'auto' | 'custom',\n      sireApiUrl: '',\n      sireApiKey: '',\n      sireApiSecret: '',\n      sireEnabled: false,\n      sireAutoRegisterOnCheckIn: false,\n      sirePropertyCode: '',\n        boldPaymentApiKey: '',\n        boldPaymentMerchantId: '',\n        boldPaymentEnvironment: 'sandbox',\n        whatsappProvider: 'twilio' as 'twilio' | 'whatsapp-business-api',\n        whatsappApiKey: '',\n        whatsappApiSecret: '',\n        whatsappPhoneNumberId: ''\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    //  VALIDIERUNG: Prfe Pflichtfelder\n    if (apiSettings.lobbyPmsSyncEnabled) {\n      if (!apiSettings.lobbyPmsApiKey) {\n        showMessage(t('organization.api.validation.apiKeyRequired'), 'error');\n        return;\n      }\n    }\n\n    //  URL-VALIDIERUNG: Prfe alle URLs\n    if (apiSettings.ttlockApiUrl && !validateApiUrl(apiSettings.ttlockApiUrl, 'ttlock')) {\n      showMessage(t('organization.api.validation.invalidUrl'), 'error');\n      return;\n    }\n    if (apiSettings.sireApiUrl && !validateApiUrl(apiSettings.sireApiUrl, 'sire')) {\n      showMessage(t('organization.api.validation.invalidUrl'), 'error');\n      return;\n    }\n\n    //  ZEITFORMAT-VALIDIERUNG: Prfe lateCheckInThreshold\n    if (apiSettings.lobbyPmsLateCheckInThreshold && !/^([0-1][0-9]|2[0-3]):[0-5][0-9]$/.test(apiSettings.lobbyPmsLateCheckInThreshold)) {\n      showMessage(t('organization.api.validation.invalidTimeFormat'), 'error');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      \n      const currentSettings = (organization?.settings || {}) as OrganizationSettings;\n      const settings: OrganizationSettings = {\n        ...currentSettings,\n        lobbyPms: {\n          ...currentSettings.lobbyPms,\n          apiUrl: LOBBYPMS_API_URL, // Feste URL\n          apiKey: apiSettings.lobbyPmsApiKey || undefined,\n          propertyId: apiSettings.lobbyPmsPropertyId || undefined,\n          syncEnabled: apiSettings.lobbyPmsSyncEnabled,\n          autoCreateTasks: apiSettings.lobbyPmsAutoCreateTasks,\n          autoSendReservationInvitation: apiSettings.lobbyPmsAutoSendReservationInvitation,\n          lateCheckInThreshold: apiSettings.lobbyPmsLateCheckInThreshold || undefined\n        },\n        doorSystem: {\n          ...currentSettings.doorSystem,\n          provider: 'ttlock' as const,\n          apiUrl: apiSettings.ttlockApiUrl || undefined,\n          clientId: apiSettings.ttlockClientId || undefined,\n          clientSecret: apiSettings.ttlockClientSecret || undefined,\n          username: apiSettings.ttlockUsername || undefined,\n          password: apiSettings.ttlockPassword || undefined, // Wird MD5-gehasht im Backend\n          passcodeType: apiSettings.ttlockPasscodeType || 'auto'\n        },\n        sire: {\n          ...currentSettings.sire,\n          apiUrl: apiSettings.sireApiUrl || undefined,\n          apiKey: apiSettings.sireApiKey || undefined,\n          apiSecret: apiSettings.sireApiSecret || undefined,\n          enabled: apiSettings.sireEnabled,\n          autoRegisterOnCheckIn: apiSettings.sireAutoRegisterOnCheckIn,\n          propertyCode: apiSettings.sirePropertyCode || undefined\n        },\n        boldPayment: {\n          ...currentSettings.boldPayment,\n          apiKey: apiSettings.boldPaymentApiKey || undefined,\n          merchantId: apiSettings.boldPaymentMerchantId || undefined,\n          environment: apiSettings.boldPaymentEnvironment\n        },\n        whatsapp: {\n          ...currentSettings.whatsapp,\n          provider: apiSettings.whatsappProvider,\n          apiKey: apiSettings.whatsappApiKey || undefined,\n          apiSecret: apiSettings.whatsappApiSecret || undefined,\n          phoneNumberId: apiSettings.whatsappPhoneNumberId || undefined\n        }\n      };\n\n      await organizationService.updateOrganization({\n        settings: settings\n      });\n      \n      showMessage(t('organization.api.saveSuccess'), 'success');\n      if (onSave) {\n        onSave();\n      }\n    } catch (error: any) {\n      console.error('Error saving API settings:', error);\n      \n      // Detaillierte Fehlermeldung\n      let errorMessage = t('organization.api.saveError');\n      \n      if (error.response?.data) {\n        const data = error.response.data;\n        \n        // Spezifische Fehlermeldung vom Backend\n        if (data.message) {\n          errorMessage = data.message;\n        }\n        \n        // Validierungsfehler anzeigen\n        if (data.errors && Array.isArray(data.errors)) {\n          const validationErrors = data.errors\n            .map((err: any) => `${err.path?.join('.') || ''}: ${err.message || ''}`)\n            .filter((msg: string) => msg)\n            .join(', ');\n          \n          if (validationErrors) {\n            errorMessage += ` (${validationErrors})`;\n          }\n          \n          // URL-Fehler anzeigen (wenn errors Strings sind)\n          if (data.errors.length > 0 && typeof data.errors[0] === 'string') {\n            errorMessage = data.errors.join(', ');\n          }\n        }\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      showMessage(errorMessage, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const SecretInput: React.FC<{\n    name: string;\n    value: string;\n    onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n    placeholder?: string;\n    label: string;\n    required?: boolean;\n  }> = ({ name, value, onChange, placeholder, label, required = false }) => {\n    const showSecret = showSecrets[name] || false;\n    \n    return (\n      <div>\n        <label htmlFor={name} className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n          {label} {required && <span className=\"text-red-500\">*</span>}\n        </label>\n        <div className=\"relative\">\n          <input\n            type={showSecret ? 'text' : 'password'}\n            id={name}\n            name={name}\n            value={value}\n            onChange={onChange}\n            placeholder={placeholder || ''}\n            required={required}\n            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n          />\n          <button\n            type=\"button\"\n            onClick={() => toggleShowSecret(name)}\n            className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            {showSecret ? (\n              <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n              </svg>\n            ) : (\n              <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n              </svg>\n            )}\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  //  BERECHTIGUNGSPRFUNG\n  if (permissionsLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-8\">\n        <ArrowPathIcon className=\"h-6 w-6 animate-spin text-gray-400\" />\n        <span className=\"ml-3 text-gray-600 dark:text-gray-400\">{t('common.loadingPermissions')}</span>\n      </div>\n    );\n  }\n\n  if (!canManageOrganization()) {\n    return (\n      <div className=\"text-center py-8\">\n        <p className=\"text-gray-500 dark:text-gray-400\">{t('organization.api.noPermission')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-2 mb-4\">\n        <KeyIcon className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n          {t('organization.api.title')}\n        </h3>\n      </div>\n\n      <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">\n        {t('organization.api.description')}\n      </p>\n\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        {/* LobbyPMS */}\n        <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n            {t('organization.api.lobbyPms.title')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <SecretInput\n              name=\"lobbyPmsApiKey\"\n              value={apiSettings.lobbyPmsApiKey}\n              onChange={handleChange}\n              label={t('organization.api.lobbyPms.apiKey')}\n              placeholder=\"API Token\"\n            />\n\n            <div>\n              <label htmlFor=\"lobbyPmsPropertyId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.lobbyPms.propertyId')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"lobbyPmsPropertyId\"\n                name=\"lobbyPmsPropertyId\"\n                value={apiSettings.lobbyPmsPropertyId}\n                onChange={handleChange}\n                placeholder=\"Property ID\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  name=\"lobbyPmsSyncEnabled\"\n                  checked={apiSettings.lobbyPmsSyncEnabled}\n                  onChange={handleChange}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                  {t('organization.api.lobbyPms.syncEnabled')}\n                </span>\n              </label>\n\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  name=\"lobbyPmsAutoCreateTasks\"\n                  checked={apiSettings.lobbyPmsAutoCreateTasks}\n                  onChange={handleChange}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                  {t('organization.api.lobbyPms.autoCreateTasks')}\n                </span>\n              </label>\n\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  name=\"lobbyPmsAutoSendReservationInvitation\"\n                  checked={apiSettings.lobbyPmsAutoSendReservationInvitation}\n                  onChange={handleChange}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                  {t('organization.api.lobbyPms.autoSendReservationInvitation', 'Automatisch Einladung bei Reservation-Erstellung senden')}\n                </span>\n              </label>\n            </div>\n\n            <div>\n              <label htmlFor=\"lobbyPmsLateCheckInThreshold\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.lobbyPms.lateCheckInThreshold')}\n              </label>\n              <input\n                type=\"time\"\n                id=\"lobbyPmsLateCheckInThreshold\"\n                name=\"lobbyPmsLateCheckInThreshold\"\n                value={apiSettings.lobbyPmsLateCheckInThreshold}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* TTLock */}\n        <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n            {t('organization.api.ttlock.title')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"ttlockApiUrl\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.ttlock.apiUrl')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"ttlockApiUrl\"\n                name=\"ttlockApiUrl\"\n                value={apiSettings.ttlockApiUrl}\n                onChange={handleChange}\n                placeholder=\"https://open.ttlock.com\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"ttlockClientId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.ttlock.clientId')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"ttlockClientId\"\n                name=\"ttlockClientId\"\n                value={apiSettings.ttlockClientId}\n                onChange={handleChange}\n                placeholder=\"Client ID\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <SecretInput\n              name=\"ttlockClientSecret\"\n              value={apiSettings.ttlockClientSecret}\n              onChange={handleChange}\n              label={t('organization.api.ttlock.clientSecret')}\n              placeholder=\"Client Secret\"\n            />\n\n            <div>\n              <label htmlFor=\"ttlockUsername\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.ttlock.username')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"ttlockUsername\"\n                name=\"ttlockUsername\"\n                value={apiSettings.ttlockUsername}\n                onChange={handleChange}\n                placeholder=\"TTLock App Username (z.B. +573024498991)\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                {t('organization.api.ttlock.usernameHint')}\n              </p>\n            </div>\n\n            <SecretInput\n              name=\"ttlockPassword\"\n              value={apiSettings.ttlockPassword}\n              onChange={handleChange}\n              label={t('organization.api.ttlock.password')}\n              placeholder=\"TTLock App Password\"\n            />\n            <p className=\"text-xs text-gray-500 dark:text-gray-400 -mt-2\">\n              {t('organization.api.ttlock.passwordHint')}\n            </p>\n\n            <div>\n              <label htmlFor=\"ttlockPasscodeType\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.ttlock.passcodeType')}\n              </label>\n              <select\n                id=\"ttlockPasscodeType\"\n                name=\"ttlockPasscodeType\"\n                value={apiSettings.ttlockPasscodeType}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              >\n                <option value=\"auto\">{t('organization.api.ttlock.passcodeTypeAuto')}</option>\n                <option value=\"custom\">{t('organization.api.ttlock.passcodeTypeCustom')}</option>\n              </select>\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                {t('organization.api.ttlock.passcodeTypeHint')}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* SIRE */}\n        <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n            {t('organization.api.sire.title')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"sireApiUrl\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.sire.apiUrl')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"sireApiUrl\"\n                name=\"sireApiUrl\"\n                value={apiSettings.sireApiUrl}\n                onChange={handleChange}\n                placeholder=\"https://api.sire.gov.co\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <SecretInput\n              name=\"sireApiKey\"\n              value={apiSettings.sireApiKey}\n              onChange={handleChange}\n              label={t('organization.api.sire.apiKey')}\n              placeholder=\"API Key\"\n            />\n\n            <SecretInput\n              name=\"sireApiSecret\"\n              value={apiSettings.sireApiSecret}\n              onChange={handleChange}\n              label={t('organization.api.sire.apiSecret')}\n              placeholder=\"API Secret\"\n            />\n\n            <div>\n              <label htmlFor=\"sirePropertyCode\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.sire.propertyCode')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"sirePropertyCode\"\n                name=\"sirePropertyCode\"\n                value={apiSettings.sirePropertyCode}\n                onChange={handleChange}\n                placeholder=\"Property Code\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  name=\"sireEnabled\"\n                  checked={apiSettings.sireEnabled}\n                  onChange={handleChange}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                  {t('organization.api.sire.enabled')}\n                </span>\n              </label>\n\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  name=\"sireAutoRegisterOnCheckIn\"\n                  checked={apiSettings.sireAutoRegisterOnCheckIn}\n                  onChange={handleChange}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                  {t('organization.api.sire.autoRegisterOnCheckIn')}\n                </span>\n              </label>\n            </div>\n          </div>\n        </div>\n\n        {/* Bold Payment */}\n        <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n            {t('organization.api.boldPayment.title')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <SecretInput\n              name=\"boldPaymentApiKey\"\n              value={apiSettings.boldPaymentApiKey}\n              onChange={handleChange}\n              label={t('organization.api.boldPayment.apiKey')}\n              placeholder=\"API Key\"\n            />\n\n            <div>\n              <label htmlFor=\"boldPaymentMerchantId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.boldPayment.merchantId')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"boldPaymentMerchantId\"\n                name=\"boldPaymentMerchantId\"\n                value={apiSettings.boldPaymentMerchantId}\n                onChange={handleChange}\n                placeholder=\"Merchant ID\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"boldPaymentEnvironment\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.boldPayment.environment')}\n              </label>\n              <select\n                id=\"boldPaymentEnvironment\"\n                name=\"boldPaymentEnvironment\"\n                value={apiSettings.boldPaymentEnvironment}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              >\n                <option value=\"sandbox\">{t('organization.api.boldPayment.sandbox')}</option>\n                <option value=\"production\">{t('organization.api.boldPayment.production')}</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* WhatsApp */}\n        <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n            {t('organization.api.whatsapp.title')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"whatsappProvider\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.whatsapp.provider')}\n              </label>\n              <select\n                id=\"whatsappProvider\"\n                name=\"whatsappProvider\"\n                value={apiSettings.whatsappProvider}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              >\n                <option value=\"twilio\">{t('organization.api.whatsapp.providerTwilio')}</option>\n                <option value=\"whatsapp-business-api\">{t('organization.api.whatsapp.providerBusinessApi')}</option>\n              </select>\n            </div>\n\n            <SecretInput\n              name=\"whatsappApiKey\"\n              value={apiSettings.whatsappApiKey}\n              onChange={handleChange}\n              label={t('organization.api.whatsapp.apiKey')}\n              placeholder=\"API Key / Access Token\"\n            />\n\n            <SecretInput\n              name=\"whatsappApiSecret\"\n              value={apiSettings.whatsappApiSecret}\n              onChange={handleChange}\n              label={t('organization.api.whatsapp.apiSecret')}\n              placeholder=\"API Secret (optional)\"\n            />\n\n            <div>\n              <label htmlFor=\"whatsappPhoneNumberId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.whatsapp.phoneNumberId')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"whatsappPhoneNumberId\"\n                name=\"whatsappPhoneNumberId\"\n                value={apiSettings.whatsappPhoneNumberId}\n                onChange={handleChange}\n                placeholder=\"Phone Number ID\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex justify-end gap-2 pt-4\">\n          <button\n            type=\"button\"\n            onClick={handleClear}\n            className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n            title={t('organization.api.clear')}\n          >\n            <ArrowPathIcon className=\"h-5 w-5\" />\n          </button>\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n            title={loading ? t('organization.saving') : t('common.save')}\n          >\n            {loading ? (\n              <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n            ) : (\n              <CheckIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default ApiConfigurationTab;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { UpdateOrganizationRequest, Organization } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\nimport { useLanguage } from '../../hooks/useLanguage.ts';\nimport { useAuth } from '../../hooks/useAuth.tsx';\nimport RoleConfigurationTab from './RoleConfigurationTab.tsx';\nimport DocumentConfigurationTab from './DocumentConfigurationTab.tsx';\nimport SMTPConfigurationTab from './SMTPConfigurationTab.tsx';\nimport ApiConfigurationTab from './ApiConfigurationTab.tsx';\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n  organization: Organization | null;\n}\n\nconst EditOrganizationModal: React.FC<Props> = ({ isOpen, onClose, onSuccess, organization }) => {\n  const { t } = useTranslation();\n  const { fetchCurrentUser } = useAuth();\n  const [formData, setFormData] = useState<UpdateOrganizationRequest>({\n    displayName: '',\n    domain: '',\n    logo: '',\n    country: null,\n    nit: null,\n    settings: {}\n  });\n  const [selectedCountry, setSelectedCountry] = useState<string>('');\n  const [nit, setNit] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  const { organizationLanguage, setOrganizationLanguage } = useLanguage();\n  const [selectedOrgLanguage, setSelectedOrgLanguage] = useState<string>('');\n  const [savingOrgLanguage, setSavingOrgLanguage] = useState<boolean>(false);\n  const [activeTab, setActiveTab] = useState<'general' | 'roles' | 'documents' | 'smtp' | 'api'>('general');\n  const [logoFile, setLogoFile] = useState<File | null>(null);\n  const [logoPreview, setLogoPreview] = useState<string | null>(null);\n\n  // Lnder-Liste\n  const COUNTRIES = [\n    { code: 'CO', name: t('countries.CO') },\n    { code: 'CH', name: t('countries.CH') },\n    { code: 'DE', name: t('countries.DE') },\n    { code: 'AT', name: t('countries.AT') }\n  ];\n\n  // Lade Organisations-Daten wenn Modal geffnet wird\n  useEffect(() => {\n    if (isOpen && organization) {\n      const orgSettings = organization.settings || {};\n      setFormData({\n        displayName: organization.displayName || '',\n        domain: organization.domain || '',\n        logo: organization.logo || '',\n        country: organization.country || null,\n        nit: organization.nit || null,\n        settings: orgSettings\n      });\n      \n      // Setze Land direkt aus organization (statt aus settings)\n      setSelectedCountry(organization.country || '');\n      setNit(organization.nit || '');\n      \n      // Setze Logo-Preview wenn Logo vorhanden\n      if (organization.logo) {\n        setLogoPreview(organization.logo);\n      } else {\n        setLogoPreview(null);\n      }\n      setLogoFile(null);\n      \n      // Lade Organisation-Sprache\n      const loadOrgLanguage = async () => {\n        try {\n          const langResponse = await organizationService.getOrganizationLanguage();\n          setSelectedOrgLanguage(langResponse.language || '');\n        } catch (langError) {\n          console.error(t('organization.loadLanguageError'), langError);\n          setSelectedOrgLanguage('');\n        }\n      };\n      \n      loadOrgLanguage();\n    }\n  }, [isOpen, organization, t]);\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    \n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value } = e.target;\n    if (name === 'country') {\n      setSelectedCountry(value);\n      setFormData(prev => ({\n        ...prev,\n        country: value || null\n      }));\n      // Wenn Country nicht \"CO\" ist, NIT zurcksetzen\n      if (value !== 'CO') {\n        setNit('');\n        setFormData(prev => ({\n          ...prev,\n          nit: null\n        }));\n      }\n    } else if (name === 'nit') {\n      setNit(value);\n      setFormData(prev => ({\n        ...prev,\n        nit: value || null\n      }));\n    } else {\n      setFormData(prev => ({ ...prev, [name]: value }));\n    }\n    // Fehler fr dieses Feld lschen\n    if (errors[name]) {\n      setErrors(prev => ({ ...prev, [name]: '' }));\n    }\n  };\n\n  const handleLogoFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    // Prfe Dateityp\n    if (!file.type.match('image/(png|jpeg|jpg)')) {\n      showMessage(t('organization.logoInvalidType') || 'Nur PNG und JPEG Dateien sind erlaubt', 'error');\n      return;\n    }\n\n    // Prfe Dateigre (max 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      showMessage(t('organization.logoTooLarge') || 'Logo darf maximal 5MB gro sein', 'error');\n      return;\n    }\n\n    setLogoFile(file);\n\n    // Erstelle Preview\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      const base64String = reader.result as string;\n      setLogoPreview(base64String);\n      setFormData(prev => ({ ...prev, logo: base64String }));\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    try {\n      setLoading(true);\n      setErrors({});\n      await organizationService.updateOrganization(formData);\n      showMessage(t('organization.updateSuccess'), 'success');\n      \n      // User-Daten neu laden, damit das Logo im Header aktualisiert wird\n      try {\n        await fetchCurrentUser();\n      } catch (error) {\n        console.error('Fehler beim Neuladen der User-Daten:', error);\n      }\n      \n      onClose();\n      if (onSuccess) {\n        onSuccess();\n      }\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('organization.updateError');\n      showMessage(errorMessage, 'error');\n      setErrors({ submit: errorMessage });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    // Formular zurcksetzen\n    if (organization) {\n      const orgSettings = organization.settings || {};\n      setFormData({\n        displayName: organization.displayName || '',\n        domain: organization.domain || '',\n        logo: organization.logo || '',\n        country: organization.country || null,\n        nit: organization.nit || null,\n        settings: orgSettings\n      });\n      setSelectedCountry(organization.country || '');\n      setNit(organization.nit || '');\n    }\n    setErrors({});\n    onClose();\n  };\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('organization.edit.title')}\n              </Dialog.Title>\n              <button\n                onClick={handleClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-4\">\n              {errors.submit && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {errors.submit}\n                </div>\n              )}\n\n              <div className=\"space-y-4\">\n                <div>\n                  <label \n                    htmlFor=\"displayName\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.displayName')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"displayName\"\n                    name=\"displayName\"\n                    value={formData.displayName || ''}\n                    onChange={handleChange}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.displayName \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  />\n                  {errors.displayName && (\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"domain\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.domain')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"domain\"\n                    name=\"domain\"\n                    value={formData.domain || ''}\n                    onChange={handleChange}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  />\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"logo-mobile\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.logo') || 'Logo'}\n                  </label>\n                  <input\n                    type=\"file\"\n                    id=\"logo-mobile\"\n                    name=\"logo\"\n                    accept=\"image/png,image/jpeg,image/jpg\"\n                    onChange={handleLogoFileChange}\n                    className=\"mt-1 block w-full text-sm text-gray-500 dark:text-gray-400\n                      file:mr-4 file:py-2 file:px-4\n                      file:rounded-md file:border-0\n                      file:text-sm file:font-semibold\n                      file:bg-blue-50 file:text-blue-700\n                      hover:file:bg-blue-100\n                      dark:file:bg-blue-900 dark:file:text-blue-300\n                      dark:hover:file:bg-blue-800\"\n                  />\n                  {logoPreview && (\n                    <div className=\"mt-2\">\n                      <img \n                        src={logoPreview} \n                        alt=\"Logo Preview\" \n                        className=\"h-20 w-auto border border-gray-300 dark:border-gray-600 rounded\"\n                      />\n                    </div>\n                  )}\n                  {formData.logo && !logoPreview && (\n                    <div className=\"mt-2\">\n                      <img \n                        src={formData.logo} \n                        alt=\"Current Logo\" \n                        className=\"h-20 w-auto border border-gray-300 dark:border-gray-600 rounded\"\n                      />\n                    </div>\n                  )}\n                </div>\n\n                {/* Land */}\n                <div className=\"border-t pt-4\">\n                  <label \n                    htmlFor=\"country\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.country')}\n                  </label>\n                  <select\n                    id=\"country\"\n                    name=\"country\"\n                    value={selectedCountry}\n                    onChange={handleChange}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  >\n                    <option value=\"\">{t('organization.selectCountry')}</option>\n                    {COUNTRIES.map((country) => (\n                      <option key={country.code} value={country.code}>\n                        {country.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                {/* Organisation-Sprache */}\n                <div className=\"border-t pt-4\">\n                  <label \n                    htmlFor=\"organizationLanguage\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.language')}\n                  </label>\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">\n                    {t('organization.languageDescription')}\n                  </p>\n                  <select\n                    id=\"organizationLanguage\"\n                    value={selectedOrgLanguage || organizationLanguage || ''}\n                    onChange={async (e) => {\n                      const newLanguage = e.target.value;\n                      setSelectedOrgLanguage(newLanguage);\n                      if (newLanguage && newLanguage !== organizationLanguage) {\n                        setSavingOrgLanguage(true);\n                        try {\n                          await setOrganizationLanguage(newLanguage);\n                          showMessage(t('common.save'), 'success');\n                        } catch (error) {\n                          console.error(t('organization.saveLanguageError'), error);\n                          showMessage(t('worktime.messages.orgLanguageError'), 'error');\n                        } finally {\n                          setSavingOrgLanguage(false);\n                        }\n                      }\n                    }}\n                    disabled={savingOrgLanguage || loading}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed\"\n                  >\n                    <option value=\"\">{t('settings.useOrganizationLanguage')} ({t('worktime.language.fallback')}: {t('worktime.language.german')})</option>\n                    <option value=\"de\">{t('worktime.language.german')}</option>\n                    <option value=\"es\">{t('worktime.language.spanish')}</option>\n                    <option value=\"en\">{t('worktime.language.english')}</option>\n                  </select>\n                </div>\n              </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                  title={t('common.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title={loading ? t('organization.saving') : t('common.save')}\n                >\n                  {loading ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={handleClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('organization.edit.title')}\n          </h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        {/* Tabs Navigation */}\n        <div className=\"border-b border-gray-200 dark:border-gray-700\">\n          <nav className=\"-mb-px flex space-x-4 px-4\" aria-label=\"Tabs\">\n            <button\n              type=\"button\"\n              onClick={() => setActiveTab('general')}\n              className={`${\n                activeTab === 'general'\n                  ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n              } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n            >\n              {t('organization.tabs.general')}\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setActiveTab('roles')}\n              className={`${\n                activeTab === 'roles'\n                  ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n              } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n            >\n              {t('organization.tabs.roles')}\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setActiveTab('documents')}\n              className={`${\n                activeTab === 'documents'\n                  ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n              } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n            >\n              {t('organization.tabs.documents')}\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setActiveTab('smtp')}\n              className={`${\n                activeTab === 'smtp'\n                  ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n              } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n            >\n              {t('organization.tabs.smtp')}\n            </button>\n            {selectedCountry === 'CO' && (\n              <button\n                type=\"button\"\n                onClick={() => setActiveTab('api')}\n                className={`${\n                  activeTab === 'api'\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n              >\n                {t('organization.tabs.api')}\n              </button>\n            )}\n          </nav>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {errors.submit && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {errors.submit}\n            </div>\n          )}\n\n          {activeTab === 'general' && (\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label \n                htmlFor=\"displayName\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.displayName')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"displayName\"\n                name=\"displayName\"\n                value={formData.displayName || ''}\n                onChange={handleChange}\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                  errors.displayName \n                    ? 'border-red-300 dark:border-red-600' \n                    : 'border-gray-300 dark:border-gray-600'\n                }`}\n              />\n              {errors.displayName && (\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\n              )}\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"domain\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.domain')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"domain\"\n                name=\"domain\"\n                value={formData.domain || ''}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"logo\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.logo') || 'Logo'}\n              </label>\n              <input\n                type=\"file\"\n                id=\"logo\"\n                name=\"logo\"\n                accept=\"image/png,image/jpeg,image/jpg\"\n                onChange={handleLogoFileChange}\n                className=\"mt-1 block w-full text-sm text-gray-500 dark:text-gray-400\n                  file:mr-4 file:py-2 file:px-4\n                  file:rounded-md file:border-0\n                  file:text-sm file:font-semibold\n                  file:bg-blue-50 file:text-blue-700\n                  hover:file:bg-blue-100\n                  dark:file:bg-blue-900 dark:file:text-blue-300\n                  dark:hover:file:bg-blue-800\"\n              />\n              {logoPreview && (\n                <div className=\"mt-2\">\n                  <img \n                    src={logoPreview} \n                    alt=\"Logo Preview\" \n                    className=\"h-20 w-auto border border-gray-300 dark:border-gray-600 rounded\"\n                  />\n                </div>\n              )}\n              {formData.logo && !logoPreview && (\n                <div className=\"mt-2\">\n                  <img \n                    src={formData.logo} \n                    alt=\"Current Logo\" \n                    className=\"h-20 w-auto border border-gray-300 dark:border-gray-600 rounded\"\n                  />\n                </div>\n              )}\n            </div>\n\n            {/* Land */}\n            <div className=\"border-t pt-4\">\n              <label \n                htmlFor=\"country\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.country')}\n              </label>\n              <select\n                id=\"country\"\n                name=\"country\"\n                value={selectedCountry}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              >\n                <option value=\"\">{t('organization.selectCountry')}</option>\n                {COUNTRIES.map((country) => (\n                  <option key={country.code} value={country.code}>\n                    {country.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* NIT (nur fr Kolumbien) */}\n            {selectedCountry === 'CO' && (\n              <div>\n                <label \n                  htmlFor=\"nit\" \n                  className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                >\n                  {t('organization.nit')}\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"nit\"\n                  name=\"nit\"\n                  value={nit}\n                  onChange={handleChange}\n                  placeholder={t('organization.nitDescription')}\n                  className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                />\n                <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                  {t('organization.nitDescription')}\n                </p>\n              </div>\n            )}\n\n            {/* Organisation-Sprache */}\n            <div className=\"border-t pt-4\">\n              <label \n                htmlFor=\"organizationLanguage\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.language')}\n              </label>\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">\n                {t('organization.languageDescription')}\n              </p>\n              <select\n                id=\"organizationLanguage\"\n                value={selectedOrgLanguage || organizationLanguage || ''}\n                onChange={async (e) => {\n                  const newLanguage = e.target.value;\n                  setSelectedOrgLanguage(newLanguage);\n                  if (newLanguage && newLanguage !== organizationLanguage) {\n                    setSavingOrgLanguage(true);\n                    try {\n                      await setOrganizationLanguage(newLanguage);\n                      showMessage(t('common.save'), 'success');\n                    } catch (error) {\n                      console.error('Fehler beim Speichern der Organisation-Sprache:', error);\n                      showMessage(t('worktime.messages.orgLanguageError'), 'error');\n                    } finally {\n                      setSavingOrgLanguage(false);\n                    }\n                  }\n                }}\n                disabled={savingOrgLanguage || loading}\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed\"\n              >\n                <option value=\"\">{t('settings.useOrganizationLanguage')} ({t('worktime.language.fallback')}: {t('worktime.language.german')})</option>\n                <option value=\"de\">{t('worktime.language.german')}</option>\n                <option value=\"es\">{t('worktime.language.spanish')}</option>\n                <option value=\"en\">{t('worktime.language.english')}</option>\n              </select>\n            </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                  title={t('common.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title={loading ? t('organization.saving') : t('common.save')}\n                >\n                  {loading ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          )}\n\n          {activeTab === 'roles' && (\n            <RoleConfigurationTab \n              organization={organization}\n              onSave={() => {\n                if (onSuccess) {\n                  onSuccess();\n                }\n              }}\n            />\n          )}\n\n          {activeTab === 'documents' && (\n            <DocumentConfigurationTab \n              organization={organization}\n              onSave={() => {\n                if (onSuccess) {\n                  onSuccess();\n                }\n              }}\n            />\n          )}\n\n          {activeTab === 'smtp' && (\n            <SMTPConfigurationTab \n              organization={organization}\n              onSave={() => {\n                if (onSuccess) {\n                  onSuccess();\n                }\n              }}\n            />\n          )}\n\n          {activeTab === 'api' && selectedCountry === 'CO' && (\n            <ApiConfigurationTab \n              organization={organization}\n              onSave={() => {\n                if (onSuccess) {\n                  onSuccess();\n                }\n              }}\n            />\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default EditOrganizationModal;\n\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { XMarkIcon, ArrowPathIcon, FunnelIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { OrganizationJoinRequest } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport FilterPane from '../FilterPane.tsx';\nimport SavedFilterTags from '../SavedFilterTags.tsx';\nimport { FilterCondition } from '../FilterRow.tsx';\nimport axiosInstance from '../../config/axios.ts';\n\n// Status-Badge Funktionen\nconst getStatusColor = (status: string) => {\n  switch (status) {\n    case 'pending':\n      return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300';\n    case 'approved':\n      return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300';\n    case 'rejected':\n      return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300';\n    case 'withdrawn':\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\n    default:\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\n  }\n};\n\nconst getStatusText = (status: string, t: any) => {\n  switch (status) {\n    case 'pending':\n      return t('joinRequestsList.status.pending');\n    case 'approved':\n      return t('joinRequestsList.status.approved');\n    case 'rejected':\n      return t('joinRequestsList.status.rejected');\n    case 'withdrawn':\n      return t('joinRequestsList.status.withdrawn');\n    default:\n      return status;\n  }\n};\n\nconst MY_JOIN_REQUESTS_TABLE_ID = 'my-join-requests-table';\n\nconst MyJoinRequestsList: React.FC = () => {\n  const { t } = useTranslation();\n  const [joinRequests, setJoinRequests] = useState<OrganizationJoinRequest[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isFilterPanelOpen, setIsFilterPanelOpen] = useState<boolean>(false);\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const { showMessage } = useMessage();\n  const mountedRef = useRef(true);\n  const [withdrawingId, setWithdrawingId] = useState<number | null>(null);\n  \n  // Filter State Management (Controlled Mode)\n  const [activeFilterName, setActiveFilterName] = useState<string>('Alle');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n\n  useEffect(() => {\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    console.log('MyJoinRequestsList: useEffect called - component mounted');\n    \n    // WICHTIG: State beim Mount zurcksetzen, um Caching zwischen Usern zu vermeiden\n    console.log('MyJoinRequestsList: Resetting state on mount to prevent data leaks');\n    setJoinRequests([]);\n    setError(null);\n    setLoading(true);\n    \n    let isMounted = true;\n    \n    const fetchMyJoinRequests = async () => {\n      if (!isMounted) {\n        console.log('MyJoinRequestsList: Component unmounted, skipping fetch');\n        return;\n      }\n      \n      console.log('MyJoinRequestsList: Starting fetch');\n      \n      // Timeout nach 10 Sekunden\n      const timeoutId = setTimeout(() => {\n        if (isMounted) {\n          console.error('Request timeout after 10 seconds');\n          setError('Anfrage dauert zu lange. Bitte Seite neu laden.');\n          setLoading(false);\n        }\n      }, 10000);\n      \n      try {\n        console.log('MyJoinRequestsList: Setting loading to true');\n        setLoading(true);\n        setError(null);\n        \n        // Debug: Log die URL die aufgerufen wird\n        console.log('MyJoinRequestsList: Fetching my join requests from:', API_ENDPOINTS.ORGANIZATIONS.MY_JOIN_REQUESTS);\n        \n        const requests = await organizationService.getMyJoinRequests();\n        \n        console.log('MyJoinRequestsList: Received requests:', requests);\n        console.log('MyJoinRequestsList: Requests type:', typeof requests);\n        console.log('MyJoinRequestsList: Requests isArray:', Array.isArray(requests));\n        console.log('MyJoinRequestsList: Requests length:', requests?.length || 0);\n        \n        // SICHERHEIT: Validiere, dass alle Anfragen wirklich Arrays sind\n        if (!Array.isArray(requests)) {\n          console.error(' MyJoinRequestsList: Response is not an array!', requests);\n          throw new Error('Ungltige Antwort vom Server');\n        }\n        \n        clearTimeout(timeoutId);\n        \n        // State immer setzen, auch wenn Component unmounted ist\n        // (React kann den State trotzdem setzen, wenn Component wieder gemountet wird)\n        if (isMounted) {\n          console.log('MyJoinRequestsList: Setting joinRequests state');\n          setJoinRequests(requests);\n          console.log('MyJoinRequestsList: State updated with', requests.length, 'requests');\n        } else {\n          console.log('MyJoinRequestsList: Component was unmounted, but setting state anyway');\n          setJoinRequests(requests);\n        }\n      } catch (err: any) {\n        clearTimeout(timeoutId);\n        \n        if (!isMounted) {\n          console.log('MyJoinRequestsList: Component unmounted during error, skipping error handling');\n          return;\n        }\n        \n        console.error('MyJoinRequestsList: Error fetching my join requests:', err);\n        console.error('MyJoinRequestsList: Error response:', err.response);\n        console.error('MyJoinRequestsList: Error status:', err.response?.status);\n        console.error('MyJoinRequestsList: Error data:', err.response?.data);\n        \n        const errorMessage = err.response?.data?.message || err.message || t('myJoinRequests.loadError');\n        setError(errorMessage);\n        setTimeout(() => {\n          showMessage(errorMessage, 'error');\n        }, 0);\n      } finally {\n        if (isMounted) {\n          console.log('MyJoinRequestsList: Setting loading to false');\n          setLoading(false);\n        } else {\n          // Auch wenn unmounted, loading auf false setzen\n          console.log('MyJoinRequestsList: Component unmounted, but setting loading to false anyway');\n          setLoading(false);\n        }\n      }\n    };\n\n    // IMMER neu laden beim Mount (auch beim Tab-Wechsel zurck)\n    fetchMyJoinRequests();\n    \n    return () => {\n      console.log('MyJoinRequestsList: useEffect cleanup - component unmounting');\n      isMounted = false;\n      mountedRef.current = false;\n      // State beim Unmount zurcksetzen\n      setJoinRequests([]);\n      setError(null);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleWithdraw = async (requestId: number) => {\n    if (!window.confirm(t('myJoinRequests.confirmWithdraw'))) {\n      return;\n    }\n\n    try {\n      setWithdrawingId(requestId);\n      await organizationService.withdrawJoinRequest(requestId);\n      \n      // Update local state\n      setJoinRequests(prev => \n        prev.map(req => \n          req.id === requestId \n            ? { ...req, status: 'withdrawn' as const, processedAt: new Date().toISOString() }\n            : req\n        )\n      );\n      \n      showMessage(t('myJoinRequests.withdrawSuccess'), 'success');\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('myJoinRequests.withdrawError');\n      showMessage(errorMessage, 'error');\n    } finally {\n      setWithdrawingId(null);\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('de-DE', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // Filter-Funktionen\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n  };\n\n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n\n  // Filter Change Handler (Controlled Mode)\n  const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators);\n  };\n\n  const getActiveFilterCount = () => {\n    return filterConditions.length;\n  };\n\n  // Initialer Default-Filter setzen (Controlled Mode)\n  useEffect(() => {\n    const setInitialFilter = async () => {\n      try {\n        const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(MY_JOIN_REQUESTS_TABLE_ID));\n        const filters = response.data;\n        \n        const alleFilter = filters.find((filter: any) => filter.name === 'Alle');\n        if (alleFilter) {\n          setActiveFilterName('Alle');\n          setSelectedFilterId(alleFilter.id);\n          applyFilterConditions(alleFilter.conditions, alleFilter.operators);\n        }\n      } catch (error) {\n        console.error('Fehler beim Setzen des initialen Filters:', error);\n      }\n    };\n\n    setInitialFilter();\n  }, []);\n\n  // Standard-Filter erstellen und speichern\n  useEffect(() => {\n    const createStandardFilters = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        \n        if (!token) {\n          console.error('Nicht authentifiziert');\n          return;\n        }\n\n        // Prfen, ob die Standard-Filter bereits existieren\n        const existingFiltersResponse = await axiosInstance.get(\n          API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(MY_JOIN_REQUESTS_TABLE_ID)\n        );\n\n        const existingFilters = existingFiltersResponse.data || [];\n        const alleFilterExists = existingFilters.some((filter: any) => filter.name === 'Alle');\n\n        // Erstelle \"Alle\"-Filter, wenn er noch nicht existiert\n        if (!alleFilterExists) {\n          const alleFilter = {\n            tableId: MY_JOIN_REQUESTS_TABLE_ID,\n            name: 'Alle',\n            conditions: [],\n            operators: []\n          };\n\n          await axiosInstance.post(\n            API_ENDPOINTS.SAVED_FILTERS.BASE,\n            alleFilter\n          );\n          console.log('Alle-Filter fr Meine Beitrittsanfragen erstellt');\n        }\n      } catch (error) {\n        console.error('Fehler beim Erstellen der Standard-Filter:', error);\n      }\n    };\n\n    createStandardFilters();\n  }, []);\n\n  // Gefilterte Join-Requests\n  const filteredJoinRequests = useMemo(() => {\n    let filtered = [...joinRequests];\n\n    // Suchfeld-Filter\n    if (searchTerm) {\n      const searchLower = searchTerm.toLowerCase();\n      filtered = filtered.filter(request => {\n        const orgName = (request.organization.displayName || request.organization.name || '').toLowerCase();\n        const message = request.message?.toLowerCase() || '';\n        return orgName.includes(searchLower) || message.includes(searchLower);\n      });\n    }\n\n    // Filter-Bedingungen aus FilterPane\n    if (filterConditions.length > 0) {\n      filtered = filterConditions.reduce((acc, condition, index) => {\n        if (!condition.column || condition.value === null || condition.value === '') {\n          return acc;\n        }\n\n        const operator = condition.operator;\n        const value = condition.value;\n\n        return acc.filter(request => {\n          switch (condition.column) {\n            case 'organization':\n              const orgName = (request.organization.displayName || request.organization.name || '').toLowerCase();\n              const searchValue = String(value).toLowerCase();\n              \n              if (operator === 'contains') {\n                return orgName.includes(searchValue);\n              } else if (operator === 'equals') {\n                return orgName === searchValue;\n              } else if (operator === 'startsWith') {\n                return orgName.startsWith(searchValue);\n              }\n              return false;\n\n            case 'message':\n              const message = request.message?.toLowerCase() || '';\n              const msgValue = String(value).toLowerCase();\n              \n              if (operator === 'contains') {\n                return message.includes(msgValue);\n              } else if (operator === 'equals') {\n                return message === msgValue;\n              } else if (operator === 'startsWith') {\n                return message.startsWith(msgValue);\n              }\n              return false;\n\n            case 'status':\n              if (operator === 'equals') {\n                return request.status === value;\n              }\n              return false;\n\n            default:\n              return true;\n          }\n        });\n      }, filtered);\n    }\n\n    return filtered;\n  }, [joinRequests, searchTerm, filterConditions, filterLogicalOperators]);\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n      {/* Titelzeile mit Icon, Suchfeld, Filter-Button */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <h2 className=\"text-xl font-semibold dark:text-white\">\n          {t('myJoinRequests.title')}\n        </h2>\n        \n        <div className=\"flex items-center gap-1.5\">\n          {/* Suchfeld */}\n          <input\n            type=\"text\"\n            placeholder={t('common.search', { defaultValue: 'Suchen...' })}\n            className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n\n          {/* Filter-Button */}\n          <button\n            className={`p-2 rounded-md border ${getActiveFilterCount() > 0 ? 'border-blue-300 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700'} relative`}\n            onClick={() => setIsFilterPanelOpen(!isFilterPanelOpen)}\n            title={t('common.filter')}\n          >\n            <FunnelIcon className=\"h-5 w-5\" />\n            {getActiveFilterCount() > 0 && (\n              <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center\">\n                {getActiveFilterCount()}\n              </span>\n            )}\n          </button>\n        </div>\n      </div>\n\n      {/* Filter-Panel */}\n      {isFilterPanelOpen && (\n        <div className=\"mb-4\">\n          <FilterPane\n            columns={[\n              { id: 'organization', label: t('myJoinRequests.filter.organization', { defaultValue: 'Organisation' }) },\n              { id: 'message', label: t('joinRequestsList.filter.message') },\n              { id: 'status', label: t('joinRequestsList.status.title', { defaultValue: 'Status' }) }\n            ]}\n            onApply={applyFilterConditions}\n            onReset={resetFilterConditions}\n            savedConditions={filterConditions}\n            savedOperators={filterLogicalOperators}\n            tableId={MY_JOIN_REQUESTS_TABLE_ID}\n          />\n        </div>\n      )}\n\n      {/* Gespeicherte Filter als Tags anzeigen */}\n      <SavedFilterTags\n        tableId={MY_JOIN_REQUESTS_TABLE_ID}\n        onSelectFilter={applyFilterConditions}\n        onReset={resetFilterConditions}\n        activeFilterName={activeFilterName}\n        selectedFilterId={selectedFilterId}\n        onFilterChange={handleFilterChange}\n        defaultFilterName=\"Alle\"\n      />\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"mb-4 p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded\">\n          {error}\n        </div>\n      )}\n\n      {/* Loading State */}\n      {loading ? (\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('myJoinRequests.loading')}</span>\n        </div>\n      ) : joinRequests.length === 0 ? (\n        <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n          {t('myJoinRequests.noRequests')}\n        </div>\n      ) : (\n        /* Cards fr Join-Requests */\n        <div className=\"space-y-4\">\n          {filteredJoinRequests.map(request => (\n            <div\n              key={request.id}\n              className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\"\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                        {request.organization.displayName || request.organization.name}\n                      </h3>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        {formatDate(request.createdAt)}\n                      </p>\n                    </div>\n                    <span className={`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(request.status)}`}>\n                      {getStatusText(request.status, t)}\n                    </span>\n                  </div>\n\n                  {request.message && (\n                    <div className=\"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\n                      <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                        <span className=\"font-medium\">{t('joinRequestsList.filter.message')}:</span> {request.message}\n                      </p>\n                    </div>\n                  )}\n\n                  {request.response && (\n                    <div className=\"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-700\">\n                      <p className=\"text-sm text-blue-700 dark:text-blue-300\">\n                        <span className=\"font-medium\">{t('joinRequestsList.response')}:</span> {request.response}\n                      </p>\n                    </div>\n                  )}\n\n                  {request.processor && (\n                    <div className=\"mt-2 text-sm text-gray-600 dark:text-gray-400\">\n                      {t('myJoinRequests.processedBy')}: {request.processor.firstName} {request.processor.lastName}\n                      {request.processedAt && ` - ${formatDate(request.processedAt)}`}\n                    </div>\n                  )}\n\n                  {request.status === 'pending' && (\n                    <div className=\"mt-4 flex items-center gap-2\">\n                      <button \n                        onClick={() => handleWithdraw(request.id)}\n                        disabled={withdrawingId === request.id}\n                        className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md dark:bg-red-700 dark:hover:bg-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 flex items-center disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        {withdrawingId === request.id ? (\n                          <>\n                            <ArrowPathIcon className=\"h-4 w-4 mr-1 animate-spin\" />\n                            {t('myJoinRequests.withdrawing')}\n                          </>\n                        ) : (\n                          <>\n                            <XMarkIcon className=\"h-4 w-4 mr-1\" />\n                            {t('myJoinRequests.withdraw')}\n                          </>\n                        )}\n                      </button>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MyJoinRequestsList;\n\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { BuildingOfficeIcon, PlusIcon, UserPlusIcon, UserGroupIcon, ShieldCheckIcon, EnvelopeIcon, ChartBarIcon, PencilIcon } from '@heroicons/react/24/outline';\nimport { useTranslation } from 'react-i18next';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { Organization } from '../../types/organization.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useOrganization } from '../../contexts/OrganizationContext.tsx';\nimport { useAuth } from '../../hooks/useAuth.tsx';\nimport CreateOrganizationModal from './CreateOrganizationModal.tsx';\nimport JoinOrganizationModal from './JoinOrganizationModal.tsx';\nimport EditOrganizationModal from './EditOrganizationModal.tsx';\nimport MyJoinRequestsList from './MyJoinRequestsList.tsx';\n\ninterface OrganizationStats {\n  currentUsers: number;\n  maxUsers: number;\n  availableSlots: number;\n  utilizationPercent: number;\n  _count: {\n    roles: number;\n    joinRequests: number;\n    invitations: number;\n  };\n}\n\nconst OrganizationSettings: React.FC = () => {\n  const [organization, setOrganization] = useState<Organization | null>(null);\n  const [stats, setStats] = useState<OrganizationStats | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [loadingStats, setLoadingStats] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState<boolean>(false);\n  const [isJoinModalOpen, setIsJoinModalOpen] = useState<boolean>(false);\n  const [isEditModalOpen, setIsEditModalOpen] = useState<boolean>(false);\n  const { canViewOrganization, canManageOrganization, loading: permissionsLoading } = usePermissions();\n  const { showMessage } = useMessage();\n  const { t } = useTranslation();\n  const { refreshOrganization } = useOrganization();\n  const { fetchCurrentUser } = useAuth();\n\n  const fetchOrganization = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      //  PERFORMANCE: Settings nur laden wenn wirklich bentigt (in Settings-Seite)\n      const org = await organizationService.getCurrentOrganization(undefined, true);\n      setOrganization(org);\n      \n      // Statistiken laden\n      try {\n        setLoadingStats(true);\n        const statsData = await organizationService.getOrganizationStats();\n        setStats(statsData);\n      } catch (statsErr: any) {\n        console.error('Fehler beim Laden der Statistiken:', statsErr);\n        // Statistiken-Fehler nicht kritisch, keine Error-Message\n      } finally {\n        setLoadingStats(false);\n      }\n    } catch (err: any) {\n      // Prfe ob es ein 404-Fehler ist (keine Organisation gefunden)\n      if (err.response?.status === 404 && err.response?.data?.hasOrganization === false) {\n        // Benutzer hat keine Organisation - das ist OK, setze Error aber nicht kritisch\n        // Verwende IMMER die bersetzung, nicht die Backend-Nachricht\n        setError(t('organization.notFound'));\n        setOrganization(null);\n        // Zeige Info-Message statt Error\n        showMessage(t('organization.notFound'), 'info');\n      } else {\n        // Andere Fehler - kritisch\n        const errorMessage = err.response?.data?.message || t('organization.loadError');\n        setError(errorMessage);\n        showMessage(errorMessage, 'error');\n      }\n    } finally {\n      setLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const hasInitialLoadRef = useRef(false);\n\n  useEffect(() => {\n    // Warte bis Berechtigungen geladen sind\n    if (permissionsLoading) {\n      return;\n    }\n\n    // Nur einmal beim initialen Load ausfhren\n    if (hasInitialLoadRef.current) {\n      return;\n    }\n\n    const hasPermission = canViewOrganization();\n    if (hasPermission) {\n      hasInitialLoadRef.current = true;\n      fetchOrganization();\n    } else {\n      setError(t('organization.noPermission'));\n      setLoading(false);\n      hasInitialLoadRef.current = true;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [permissionsLoading]);\n\n  const handleEditSuccess = () => {\n    fetchOrganization();\n    // Aktualisiere auch den OrganizationContext\n    refreshOrganization();\n  };\n\n  if (permissionsLoading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('common.loadingPermissions')}</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (!canViewOrganization()) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n          <div className=\"p-4 text-red-600 dark:text-red-400\">\n          {t('organization.noPermission')}\n        </div>\n      </div>\n    );\n  }\n\n  const handleCreateSuccess = () => {\n    fetchOrganization();\n  };\n\n  const handleJoinSuccess = async () => {\n    // Nach Beitritt: Organisation neu laden\n    fetchOrganization();\n    // WICHTIG: User-Rollen neu laden, damit neue Rolle sichtbar wird\n    // OnboardingContext erkennt dann automatisch die neue Rolle\n    await fetchCurrentUser();\n  };\n\n  return (\n    <>\n      <div className=\"space-y-4\">\n        {/* Titelzeile mit Action-Buttons */}\n        <div className=\"flex items-center mb-4 sm:mb-4\">\n          {/* Linke Seite: Action-Buttons */}\n          <div className=\"flex items-center\" data-onboarding=\"organization-buttons\">\n            {/* Button: Neue Organisation erstellen - immer sichtbar (nicht nur fr Admins) */}\n            <button\n              onClick={() => setIsCreateModalOpen(true)}\n              data-onboarding=\"create-organization-button\"\n              className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n              style={{ width: '30.19px', height: '30.19px' }}\n              title={t('organization.createOrganization')}\n              aria-label={t('organization.createOrganization')}\n            >\n              <PlusIcon className=\"h-4 w-4\" />\n            </button>\n            \n            {/* Button: Organisation beitreten - immer sichtbar */}\n            <button\n              onClick={() => setIsJoinModalOpen(true)}\n              data-onboarding=\"join-organization-button\"\n              className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center ml-2\"\n              style={{ width: '30.19px', height: '30.19px' }}\n              title={t('organization.joinOrganization')}\n              aria-label={t('organization.joinOrganization')}\n            >\n              <UserPlusIcon className=\"h-4 w-4\" />\n            </button>\n          </div>\n        </div>\n\n      {/* Loading State */}\n      {loading ? (\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('common.loadingOrganization')}</span>\n        </div>\n      ) : (\n        <>\n          {/* Error/Info Display */}\n          {error && (\n            <div className={`mb-4 p-4 border rounded ${\n              !organization \n                ? 'bg-blue-50 dark:bg-blue-900/30 border-blue-400 dark:border-blue-700 text-blue-700 dark:text-blue-300'\n                : 'bg-red-100 dark:bg-red-900 border-red-400 dark:border-red-700 text-red-700 dark:text-red-300'\n            }`}>\n              <div className=\"flex items-start\">\n                <div className=\"flex-shrink-0\">\n                  {!organization ? (\n                    <UserGroupIcon className=\"h-5 w-5\" />\n                  ) : (\n                    <span className=\"text-red-600 dark:text-red-400\"></span>\n                  )}\n                </div>\n                <div className=\"ml-3 flex-1\">\n                  <p className=\"font-medium\">{error}</p>\n                  {!organization && (\n                    <p className=\"mt-2 text-sm\">{t('organization.createOrJoinHint')}</p>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Card-Ansicht - nur anzeigen wenn Organisation existiert */}\n          {organization ? (\n            <>\n            {/* Card mit Organisations-Infos */}\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-4\">\n            <div>\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white flex items-center\">\n                        <BuildingOfficeIcon className=\"h-5 w-5 mr-2\" />\n                        {organization.displayName || organization.name}\n                      </h3>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n                        {organization.domain || t('organization.noDomain')}\n                      </p>\n            </div>\n                    {canManageOrganization() && (\n                      <button\n                        onClick={() => setIsEditModalOpen(true)}\n                        className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n                        title={t('organization.edit.title')}\n                      >\n                        <PencilIcon className=\"h-5 w-5\" />\n                      </button>\n                    )}\n            </div>\n\n                  {/* Organisations-Infos */}\n                  <div className=\"space-y-3\">\n                    {organization.subscriptionPlan && (\n            <div>\n                        <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">{t('organization.subscriptionPlan')}:</span>\n                        <span className=\"ml-2 text-sm text-gray-900 dark:text-white capitalize\">{organization.subscriptionPlan}</span>\n              </div>\n            )}\n              </div>\n\n                  {/* Statistiken direkt in der Card */}\n          {stats && (\n                    <>\n            <div className=\"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700\">\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">{t('organization.statistics')}</h3>\n              {loadingStats ? (\n                <div className=\"flex items-center justify-center py-4\">\n                  <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-2\"></div>\n                  <span className=\"text-sm text-gray-500 dark:text-gray-400\">{t('common.loadingStatistics')}</span>\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {/* Benutzer Card */}\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0 bg-blue-100 dark:bg-blue-900/30 rounded-lg p-3\">\n                        <UserGroupIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.users')}</p>\n                        <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                          {stats.currentUsers} / {stats.maxUsers}\n                        </p>\n                            {stats.utilizationPercent !== undefined && (\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                            {stats.utilizationPercent}% {t('organization.utilizationPercent')}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Rollen Card */}\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0 bg-purple-100 dark:bg-purple-900/30 rounded-lg p-3\">\n                        <ShieldCheckIcon className=\"h-6 w-6 text-purple-600 dark:text-purple-400\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.roles')}</p>\n                        <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                          {stats._count.roles}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Beitrittsanfragen Card */}\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg p-3\">\n                        <EnvelopeIcon className=\"h-6 w-6 text-yellow-600 dark:text-yellow-400\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.joinRequests')}</p>\n                        <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                          {stats._count.joinRequests}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Einladungen Card */}\n                  {stats._count.invitations !== undefined && (\n                    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                      <div className=\"flex items-center\">\n                        <div className=\"flex-shrink-0 bg-green-100 dark:bg-green-900/30 rounded-lg p-3\">\n                          <EnvelopeIcon className=\"h-6 w-6 text-green-600 dark:text-green-400\" />\n                        </div>\n                        <div className=\"ml-4\">\n                          <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.invitations')}</p>\n                          <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                            {stats._count.invitations}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Auslastung Card */}\n                  {stats.utilizationPercent !== undefined && (\n                    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                      <div className=\"flex items-center\">\n                        <div className=\"flex-shrink-0 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg p-3\">\n                          <ChartBarIcon className=\"h-6 w-6 text-indigo-600 dark:text-indigo-400\" />\n                        </div>\n                        <div className=\"ml-4\">\n                          <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.utilization')}</p>\n                          <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                            {stats.utilizationPercent}%\n                          </p>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                            {stats.availableSlots} {t('organization.availableSlots')}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n                    </>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            </>\n          ) : (\n            /* Keine Organisation - zeige Hinweis */\n            <div className=\"text-center py-8\">\n            <UserGroupIcon className=\"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500 mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n              {t('organization.notFound')}\n            </h3>\n            <p className=\"text-gray-600 dark:text-gray-400\">\n              {t('organization.createOrJoinHint')}\n            </p>\n          </div>\n        )}\n        </>\n      )}\n      </div>\n\n      {/* Meine Beitrittsanfragen - immer anzeigen */}\n      <MyJoinRequestsList />\n\n      {/* Modals */}\n      <CreateOrganizationModal\n        isOpen={isCreateModalOpen}\n        onClose={() => setIsCreateModalOpen(false)}\n        onSuccess={handleCreateSuccess}\n      />\n\n      <JoinOrganizationModal\n        isOpen={isJoinModalOpen}\n        onClose={() => setIsJoinModalOpen(false)}\n        onSuccess={handleJoinSuccess}\n      />\n\n      <EditOrganizationModal\n        isOpen={isEditModalOpen}\n        onClose={() => setIsEditModalOpen(false)}\n        onSuccess={handleEditSuccess}\n        organization={organization}\n      />\n    </>\n  );\n};\n\nexport default OrganizationSettings; ","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon, XCircleIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { OrganizationJoinRequest, ProcessJoinRequestRequest } from '../../types/organization.ts';\nimport { roleApi } from '../../api/apiClient.ts';\nimport { Role } from '../../types/interfaces.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  joinRequest: OrganizationJoinRequest | null;\n  onSuccess: () => void;\n}\n\nconst ProcessJoinRequestModal: React.FC<Props> = ({ isOpen, onClose, joinRequest, onSuccess }) => {\n  const { t } = useTranslation();\n  const [action, setAction] = useState<'approve' | 'reject'>('approve');\n  const [roleId, setRoleId] = useState<number | null>(null);\n  const [response, setResponse] = useState<string>('');\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [loadingRoles, setLoadingRoles] = useState<boolean>(false);\n  const [saving, setSaving] = useState<boolean>(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    \n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  useEffect(() => {\n    if (isOpen && joinRequest) {\n      // Reset form when modal opens\n      setAction('approve');\n      setRoleId(null);\n      setResponse('');\n      setErrors({});\n      \n      // Load roles for the organization\n      if (joinRequest.organizationId) {\n        fetchRoles();\n      }\n    }\n  }, [isOpen, joinRequest]);\n\n  const fetchRoles = async () => {\n    try {\n      setLoadingRoles(true);\n      const response = await roleApi.getAll();\n      if (response.data && Array.isArray(response.data)) {\n        setRoles(response.data);\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Laden der Rollen:', err);\n      showMessage(t('joinRequest.loadRolesError'), 'error');\n    } finally {\n      setLoadingRoles(false);\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    \n    if (action === 'approve' && !roleId) {\n      newErrors.roleId = t('joinRequest.selectRoleError');\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      showMessage(t('joinRequest.fillRequired'), 'error');\n      return;\n    }\n    \n    if (!joinRequest) {\n      return;\n    }\n    \n    try {\n      setSaving(true);\n      const data: ProcessJoinRequestRequest = {\n        action,\n        response: response.trim() || undefined,\n        roleId: action === 'approve' ? roleId || undefined : undefined\n      };\n      \n      await organizationService.processJoinRequest(joinRequest.id, data);\n      showMessage(\n        action === 'approve' ? t('joinRequest.approveSuccess') : t('joinRequest.rejectSuccess'),\n        'success'\n      );\n      \n      // Reset form\n      setAction('approve');\n      setRoleId(null);\n      setResponse('');\n      setErrors({});\n      \n      onClose();\n      onSuccess();\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('joinRequest.processError');\n      showMessage(errorMessage, 'error');\n      setErrors({ submit: errorMessage });\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleClose = () => {\n    setAction('approve');\n    setRoleId(null);\n    setResponse('');\n    setErrors({});\n    onClose();\n  };\n\n  if (!joinRequest) {\n    return null;\n  }\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('joinRequest.title')}\n              </Dialog.Title>\n              <button\n                onClick={handleClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-4\">\n              {errors.submit && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {errors.submit}\n                </div>\n              )}\n\n              <div className=\"space-y-4\">\n                {/* Antragsteller Info */}\n                <div className=\"p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\n                  <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">{t('joinRequest.applicant')}:</p>\n                  <p className=\"text-sm text-gray-900 dark:text-white\">\n                    {joinRequest.requester.firstName} {joinRequest.requester.lastName}\n                  </p>\n                  <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.requester.email}</p>\n                  {joinRequest.message && (\n                    <div className=\"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600\">\n                      <p className=\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">{t('joinRequest.message')}:</p>\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.message}</p>\n                    </div>\n                  )}\n                </div>\n\n                {/* Aktion (Genehmigen/Ablehnen) */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('joinRequest.actionRequired')}\n                  </label>\n                  <div className=\"flex gap-4 mt-2\">\n                    <label className=\"flex items-center\">\n                      <input\n                        type=\"radio\"\n                        value=\"approve\"\n                        checked={action === 'approve'}\n                        onChange={(e) => {\n                          setAction(e.target.value as 'approve' | 'reject');\n                          setErrors({});\n                        }}\n                        className=\"mr-2 text-blue-600 focus:ring-blue-500\"\n                      />\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300\">{t('joinRequest.approve')}</span>\n                    </label>\n                    <label className=\"flex items-center\">\n                      <input\n                        type=\"radio\"\n                        value=\"reject\"\n                        checked={action === 'reject'}\n                        onChange={(e) => {\n                          setAction(e.target.value as 'approve' | 'reject');\n                          setErrors({});\n                        }}\n                        className=\"mr-2 text-red-600 focus:ring-red-500\"\n                      />\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300\">{t('joinRequest.reject')}</span>\n                    </label>\n                  </div>\n                </div>\n\n                {/* Rollenauswahl (nur bei Genehmigung) */}\n                {action === 'approve' && (\n                  <div>\n                    <label \n                      htmlFor=\"roleId\" \n                      className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                    >\n                      {t('joinRequest.assignRole')}\n                    </label>\n                    {loadingRoles ? (\n                      <div className=\"flex items-center py-2\">\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"></div>\n                        <span className=\"text-sm text-gray-500 dark:text-gray-400\">{t('joinRequest.loadingRoles')}</span>\n                      </div>\n                    ) : (\n                      <select\n                        id=\"roleId\"\n                        value={roleId || ''}\n                        onChange={(e) => {\n                          setRoleId(Number(e.target.value) || null);\n                          if (errors.roleId) {\n                            setErrors(prev => ({ ...prev, roleId: '' }));\n                          }\n                        }}\n                        className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                          errors.roleId \n                            ? 'border-red-300 dark:border-red-600' \n                            : 'border-gray-300 dark:border-gray-600'\n                        }`}\n                      >\n                        <option value=\"\">{t('joinRequest.selectRole')}</option>\n                        {roles.map(role => (\n                          <option key={role.id} value={role.id}>\n                            {role.name} {role.description ? `- ${role.description}` : ''}\n                          </option>\n                        ))}\n                      </select>\n                    )}\n                    {errors.roleId && (\n                      <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.roleId}</p>\n                    )}\n                  </div>\n                )}\n\n                {/* Antwort-Message */}\n                <div>\n                  <label \n                    htmlFor=\"response\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('joinRequest.response')}\n                  </label>\n                  <textarea\n                    id=\"response\"\n                    value={response}\n                    onChange={(e) => setResponse(e.target.value)}\n                    rows={3}\n                    placeholder={t('joinRequest.addOptional', { type: action === 'approve' ? t('joinRequest.welcomeMessage') : t('joinRequest.rejectionReason') })}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                  title={t('joinRequest.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={saving}\n                  className={`p-2 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${\n                    action === 'approve'\n                      ? 'bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:ring-green-500'\n                      : 'bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 focus:ring-red-500'\n                  }`}\n                  title={saving ? (action === 'approve' ? t('joinRequest.approving') : t('joinRequest.rejecting')) : (action === 'approve' ? t('joinRequest.approve') : t('joinRequest.reject'))}\n                >\n                  {saving ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : action === 'approve' ? (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  ) : (\n                    <XCircleIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={handleClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('joinRequest.title')}\n          </h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {errors.submit && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {errors.submit}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {/* Antragsteller Info */}\n            <div className=\"p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\n              <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">{t('joinRequest.applicant')}:</p>\n              <p className=\"text-sm text-gray-900 dark:text-white\">\n                {joinRequest.requester.firstName} {joinRequest.requester.lastName}\n              </p>\n              <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.requester.email}</p>\n              {joinRequest.message && (\n                <div className=\"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600\">\n                  <p className=\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">{t('joinRequest.message')}:</p>\n                  <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.message}</p>\n                </div>\n              )}\n            </div>\n\n            {/* Aktion (Genehmigen/Ablehnen) */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('joinRequest.actionRequired')}\n              </label>\n              <div className=\"flex gap-4 mt-2\">\n                <label className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                    value=\"approve\"\n                    checked={action === 'approve'}\n                    onChange={(e) => {\n                      setAction(e.target.value as 'approve' | 'reject');\n                      setErrors({});\n                    }}\n                    className=\"mr-2 text-blue-600 focus:ring-blue-500\"\n                  />\n                  <span className=\"text-sm text-gray-700 dark:text-gray-300\">{t('joinRequest.approve')}</span>\n                </label>\n                <label className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                    value=\"reject\"\n                    checked={action === 'reject'}\n                    onChange={(e) => {\n                      setAction(e.target.value as 'approve' | 'reject');\n                      setErrors({});\n                    }}\n                    className=\"mr-2 text-red-600 focus:ring-red-500\"\n                  />\n                  <span className=\"text-sm text-gray-700 dark:text-gray-300\">{t('joinRequest.reject')}</span>\n                </label>\n              </div>\n            </div>\n\n            {/* Rollenauswahl (nur bei Genehmigung) */}\n            {action === 'approve' && (\n              <div>\n                <label \n                  htmlFor=\"roleId\" \n                  className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                >\n                  {t('joinRequest.assignRole')}\n                </label>\n                {loadingRoles ? (\n                  <div className=\"flex items-center py-2\">\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"></div>\n                    <span className=\"text-sm text-gray-500 dark:text-gray-400\">{t('joinRequest.loadingRoles')}</span>\n                  </div>\n                ) : (\n                  <select\n                    id=\"roleId\"\n                    value={roleId || ''}\n                    onChange={(e) => {\n                      setRoleId(Number(e.target.value) || null);\n                      if (errors.roleId) {\n                        setErrors(prev => ({ ...prev, roleId: '' }));\n                      }\n                    }}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.roleId \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  >\n                    <option value=\"\">{t('joinRequest.selectRole')}</option>\n                    {roles.map(role => (\n                      <option key={role.id} value={role.id}>\n                        {role.name} {role.description ? `- ${role.description}` : ''}\n                      </option>\n                    ))}\n                  </select>\n                )}\n                {errors.roleId && (\n                  <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.roleId}</p>\n                )}\n              </div>\n            )}\n\n            {/* Antwort-Message */}\n            <div>\n              <label \n                htmlFor=\"response\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('joinRequest.response')}\n              </label>\n              <textarea\n                id=\"response\"\n                value={response}\n                onChange={(e) => setResponse(e.target.value)}\n                rows={3}\n                placeholder={t('joinRequest.addOptional', { type: action === 'approve' ? t('joinRequest.welcomeMessage') : t('joinRequest.rejectionReason') })}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"flex justify-end pt-4 gap-2\">\n              <button\n                type=\"button\"\n                onClick={handleClose}\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                title={t('common.cancel')}\n              >\n                <XMarkIcon className=\"h-5 w-5\" />\n              </button>\n              <button\n                type=\"submit\"\n                disabled={saving}\n                className={`p-2 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${\n                  action === 'approve'\n                    ? 'bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:ring-green-500'\n                    : 'bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 focus:ring-red-500'\n                }`}\n                title={saving ? (action === 'approve' ? 'Genehmige...' : 'Lehne ab...') : (action === 'approve' ? 'Genehmigen' : 'Ablehnen')}\n              >\n                {saving ? (\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                ) : action === 'approve' ? (\n                  <CheckIcon className=\"h-5 w-5\" />\n                ) : (\n                  <XCircleIcon className=\"h-5 w-5\" />\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ProcessJoinRequestModal;\n\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { UserPlusIcon, FunnelIcon, PencilIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { OrganizationJoinRequest } from '../../types/organization.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport FilterPane from '../FilterPane.tsx';\nimport SavedFilterTags from '../SavedFilterTags.tsx';\nimport { FilterCondition } from '../FilterRow.tsx';\nimport ProcessJoinRequestModal from './ProcessJoinRequestModal.tsx';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport axiosInstance from '../../config/axios.ts';\n\n// Status-Badge Funktionen\nconst getStatusColor = (status: string) => {\n  switch (status) {\n    case 'pending':\n      return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300';\n    case 'approved':\n      return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300';\n    case 'rejected':\n      return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300';\n    case 'withdrawn':\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\n    default:\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\n  }\n};\n\nconst getStatusText = (status: string, t: any) => {\n  switch (status) {\n    case 'pending':\n      return t('joinRequestsList.status.pending');\n    case 'approved':\n      return t('joinRequestsList.status.approved');\n    case 'rejected':\n      return t('joinRequestsList.status.rejected');\n    case 'withdrawn':\n      return t('joinRequestsList.status.withdrawn');\n    default:\n      return status;\n  }\n};\n\nconst JOIN_REQUESTS_TABLE_ID = 'join-requests-table';\n\nconst JoinRequestsList: React.FC = () => {\n  const { t } = useTranslation();\n  const [joinRequests, setJoinRequests] = useState<OrganizationJoinRequest[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isFilterPanelOpen, setIsFilterPanelOpen] = useState<boolean>(false);\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const [isProcessModalOpen, setIsProcessModalOpen] = useState<boolean>(false);\n  const [selectedRequest, setSelectedRequest] = useState<OrganizationJoinRequest | null>(null);\n  \n  // Filter State Management (Controlled Mode)\n  const [activeFilterName, setActiveFilterName] = useState<string>('Alle');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n  \n  const { canViewJoinRequests, canManageJoinRequests, loading: permissionsLoading } = usePermissions();\n  const { showMessage } = useMessage();\n  const mountedRef = useRef(true);\n  const hasInitialLoadRef = useRef(false);\n\n  // Debug: Log permissionsLoading nderungen\n  useEffect(() => {\n    console.log('[JoinRequestsList] permissionsLoading gendert:', permissionsLoading);\n  }, [permissionsLoading]);\n\n  // Reset beim Mount - wichtig fr Neuladen wenn Komponente neu gemountet wird\n  useEffect(() => {\n    console.log('[JoinRequestsList] Component mounted, reset hasInitialLoadRef');\n    hasInitialLoadRef.current = false;\n    mountedRef.current = true;\n    \n    return () => {\n      console.log('[JoinRequestsList] Component unmounting');\n      mountedRef.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    console.log('[JoinRequestsList] useEffect triggered', { \n      permissionsLoading, \n      hasInitialLoad: hasInitialLoadRef.current,\n      joinRequestsCount: joinRequests.length \n    });\n    \n    // Warte bis Berechtigungen geladen sind\n    if (permissionsLoading) {\n      console.log('[JoinRequestsList] Warte auf Berechtigungen...');\n      return;\n    }\n\n    // Prfe Berechtigung direkt\n    const hasPermission = canViewJoinRequests();\n    console.log('[JoinRequestsList] Berechtigung geprft:', hasPermission);\n    \n    if (!hasPermission) {\n      console.log('[JoinRequestsList] Keine Berechtigung zum Anzeigen');\n      setError(t('joinRequestsList.noPermission'));\n      setLoading(false);\n      hasInitialLoadRef.current = true;\n      return;\n    }\n\n    // WICHTIG: Nur laden wenn noch nicht erfolgreich geladen wurde\n    // Das verhindert unntige Re-Fetches bei jedem permissionsLoading-Change\n    if (hasInitialLoadRef.current) {\n      console.log('[JoinRequestsList] Bereits geladen, berspringe Fetch');\n      return;\n    }\n\n    console.log('[JoinRequestsList] Starte Fetch der Join Requests...');\n    \n    const fetchJoinRequests = async () => {\n      if (!mountedRef.current) {\n        console.log('[JoinRequestsList] Component unmounted, breche ab');\n        return;\n      }\n      \n      try {\n        console.log('[JoinRequestsList] Setze loading auf true');\n        setLoading(true);\n        setError(null);\n        \n        console.log('[JoinRequestsList] Rufe organizationService.getJoinRequests() auf...');\n        console.log('[JoinRequestsList] API Endpoint:', API_ENDPOINTS.ORGANIZATIONS.JOIN_REQUESTS);\n        \n        const requests = await organizationService.getJoinRequests();\n        \n        console.log('[JoinRequestsList] Antwort erhalten:', requests);\n        console.log('[JoinRequestsList] Antwort Typ:', typeof requests);\n        console.log('[JoinRequestsList] Ist Array:', Array.isArray(requests));\n        console.log('[JoinRequestsList] Ist null/undefined:', requests === null || requests === undefined);\n        \n        if (!mountedRef.current) {\n          console.log('[JoinRequestsList] Component whrend Request unmounted');\n          return;\n        }\n        \n        // Validiere, dass die Antwort vorhanden ist\n        if (requests === null || requests === undefined) {\n          console.error('[JoinRequestsList]  Antwort ist null oder undefined!');\n          throw new Error('Ungltige Antwort vom Server: Antwort ist null oder undefined');\n        }\n        \n        // Validiere, dass die Antwort ein Array ist\n        if (!Array.isArray(requests)) {\n          console.error('[JoinRequestsList]  Antwort ist kein Array!', requests);\n          throw new Error('Ungltige Antwort vom Server: Erwartetes Array, erhalten: ' + typeof requests);\n        }\n        \n        console.log('[JoinRequestsList]  Setze', requests.length, 'Join Requests');\n        setJoinRequests(requests);\n        setError(null); // Fehler zurcksetzen bei Erfolg\n        hasInitialLoadRef.current = true; // Nur bei Erfolg setzen\n      } catch (err: any) {\n        console.error('[JoinRequestsList]  Fehler beim Laden:', err);\n        console.error('[JoinRequestsList] Fehler Details:', {\n          message: err.message,\n          response: err.response,\n          status: err.response?.status,\n          data: err.response?.data,\n          stack: err.stack\n        });\n        \n        if (!mountedRef.current) {\n          console.log('[JoinRequestsList] Component whrend Error-Handling unmounted');\n          return;\n        }\n        \n        const errorMessage = err.response?.data?.message || err.message || t('joinRequestsList.loadError', { defaultValue: 'Fehler beim Laden der Beitrittsanfragen' });\n        console.log('[JoinRequestsList] Zeige Fehlermeldung:', errorMessage);\n        setError(errorMessage);\n        // showMessage nur auerhalb useEffect verwenden, um Re-Renders zu vermeiden\n        // Verwende setTimeout, um es asynchron auszufhren\n        setTimeout(() => {\n          showMessage(errorMessage, 'error');\n        }, 0);\n        // Bei Fehler NICHT hasInitialLoadRef setzen, damit bei nchstem permissionsLoading-Change neu geladen wird\n      } finally {\n        if (mountedRef.current) {\n          console.log('[JoinRequestsList] Setze loading auf false');\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchJoinRequests();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [permissionsLoading]); // canViewJoinRequests ist eine Funktion, nicht als Dependency\n\n  const handleOpenProcessModal = (request: OrganizationJoinRequest) => {\n    if (!canManageJoinRequests()) {\n      const errorMessage = t('joinRequestsList.noPermissionEdit');\n      setError(errorMessage);\n      showMessage(errorMessage, 'error');\n      return;\n    }\n    setSelectedRequest(request);\n    setIsProcessModalOpen(true);\n  };\n\n  const handleProcessSuccess = async () => {\n    // Neulade die Liste nach erfolgreicher Bearbeitung\n    // Reset das Flag, damit neu geladen werden kann\n    hasInitialLoadRef.current = false;\n    \n    try {\n      setLoading(true);\n      const requests = await organizationService.getJoinRequests();\n      setJoinRequests(requests);\n      setError(null);\n      hasInitialLoadRef.current = true;\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || 'Fehler beim Laden der Beitrittsanfragen';\n      setError(errorMessage);\n      hasInitialLoadRef.current = true;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Filter-Funktionen\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n  };\n\n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n\n  // Filter Change Handler (Controlled Mode)\n  const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators);\n  };\n\n  const getActiveFilterCount = () => {\n    return filterConditions.length;\n  };\n\n  // Initialer Default-Filter setzen (Controlled Mode)\n  useEffect(() => {\n    const setInitialFilter = async () => {\n      try {\n        const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(JOIN_REQUESTS_TABLE_ID));\n        const filters = response.data;\n        \n        const alleFilter = filters.find((filter: any) => filter.name === 'Alle');\n        if (alleFilter) {\n          setActiveFilterName('Alle');\n          setSelectedFilterId(alleFilter.id);\n          applyFilterConditions(alleFilter.conditions, alleFilter.operators);\n        }\n      } catch (error) {\n        console.error('Fehler beim Setzen des initialen Filters:', error);\n      }\n    };\n\n    setInitialFilter();\n  }, []);\n\n  // Standard-Filter erstellen und speichern\n  useEffect(() => {\n    const createStandardFilters = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        \n        if (!token) {\n          console.error('Nicht authentifiziert');\n          return;\n        }\n\n        // Prfen, ob die Standard-Filter bereits existieren\n        const existingFiltersResponse = await axiosInstance.get(\n          API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(JOIN_REQUESTS_TABLE_ID)\n        );\n\n        const existingFilters = existingFiltersResponse.data || [];\n        const alleFilterExists = existingFilters.some((filter: any) => filter.name === 'Alle');\n\n        // Erstelle \"Alle\"-Filter, wenn er noch nicht existiert\n        if (!alleFilterExists) {\n          const alleFilter = {\n            tableId: JOIN_REQUESTS_TABLE_ID,\n            name: 'Alle',\n            conditions: [],\n            operators: []\n          };\n\n          await axiosInstance.post(\n            API_ENDPOINTS.SAVED_FILTERS.BASE,\n            alleFilter\n          );\n          console.log('Alle-Filter fr Join Requests erstellt');\n        }\n      } catch (error) {\n        console.error('Fehler beim Erstellen der Standard-Filter:', error);\n      }\n    };\n\n    createStandardFilters();\n  }, []);\n\n  // Gefilterte Join-Requests\n  const filteredJoinRequests = useMemo(() => {\n    let filtered = [...joinRequests];\n\n    // Suchfeld-Filter\n    if (searchTerm) {\n      const searchLower = searchTerm.toLowerCase();\n      filtered = filtered.filter(request => {\n        const requesterName = `${request.requester.firstName} ${request.requester.lastName}`.toLowerCase();\n        const requesterEmail = request.requester.email?.toLowerCase() || '';\n        const message = request.message?.toLowerCase() || '';\n        return requesterName.includes(searchLower) || requesterEmail.includes(searchLower) || message.includes(searchLower);\n      });\n    }\n\n    // Filter-Bedingungen aus FilterPane\n    if (filterConditions.length > 0) {\n      filtered = filterConditions.reduce((acc, condition, index) => {\n        if (!condition.column || condition.value === null || condition.value === '') {\n          return acc;\n        }\n\n        const operator = condition.operator;\n        const value = condition.value;\n\n        return acc.filter(request => {\n          switch (condition.column) {\n            case 'requester':\n              const requesterName = `${request.requester.firstName} ${request.requester.lastName}`.toLowerCase();\n              const requesterEmail = request.requester.email?.toLowerCase() || '';\n              const searchValue = String(value).toLowerCase();\n              \n              if (operator === 'contains') {\n                return requesterName.includes(searchValue) || requesterEmail.includes(searchValue);\n              } else if (operator === 'equals') {\n                return requesterName === searchValue || requesterEmail === searchValue;\n              } else if (operator === 'startsWith') {\n                return requesterName.startsWith(searchValue) || requesterEmail.startsWith(searchValue);\n    }\n              return false;\n\n            case 'message':\n              const message = request.message?.toLowerCase() || '';\n              const msgValue = String(value).toLowerCase();\n              \n              if (operator === 'contains') {\n                return message.includes(msgValue);\n              } else if (operator === 'equals') {\n                return message === msgValue;\n              } else if (operator === 'startsWith') {\n                return message.startsWith(msgValue);\n              }\n              return false;\n\n            case 'status':\n              if (operator === 'equals') {\n                return request.status === value;\n              }\n              return false;\n\n            default:\n              return true;\n          }\n        });\n      }, filtered);\n    }\n\n    return filtered;\n  }, [joinRequests, searchTerm, filterConditions, filterLogicalOperators]);\n\n  if (permissionsLoading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('joinRequestsList.loadingPermissions')}</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (!canViewJoinRequests()) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n      <div className=\"p-4 text-red-600 dark:text-red-400\">\n        {t('joinRequestsList.noPermission')}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 sm:p-6 mb-6\">\n      {/* Titelzeile mit Icon, Suchfeld, Filter-Button */}\n      <div className=\"flex items-center justify-between mb-4 sm:mb-4\">\n        <h2 className=\"text-xl sm:text-xl font-semibold flex items-center dark:text-white\">\n          <UserPlusIcon className=\"h-6 w-6 sm:h-6 sm:w-6 mr-2 sm:mr-2\" />\n          {t('joinRequestsList.title')}\n        </h2>\n        \n        <div className=\"flex items-center gap-1.5\">\n          {/* Suchfeld */}\n          <input\n            type=\"text\"\n            placeholder={t('common.search', { defaultValue: 'Suchen...' })}\n            className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n\n          {/* Filter-Button */}\n          <button\n            className={`p-2 rounded-md border ${getActiveFilterCount() > 0 ? 'border-blue-300 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700'} relative`}\n            onClick={() => setIsFilterPanelOpen(!isFilterPanelOpen)}\n            title={t('common.filter')}\n          >\n            <FunnelIcon className=\"h-5 w-5\" />\n            {getActiveFilterCount() > 0 && (\n              <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center\">\n                {getActiveFilterCount()}\n              </span>\n            )}\n          </button>\n        </div>\n      </div>\n\n      {/* Filter-Panel */}\n      {isFilterPanelOpen && (\n        <div className=\"mb-4\">\n          <FilterPane\n            columns={[\n              { id: 'requester', label: t('joinRequestsList.filter.requester') },\n              { id: 'message', label: t('joinRequestsList.filter.message') },\n              { id: 'status', label: t('joinRequestsList.status.title', { defaultValue: 'Status' }) }\n            ]}\n            onApply={applyFilterConditions}\n            onReset={resetFilterConditions}\n            savedConditions={filterConditions}\n            savedOperators={filterLogicalOperators}\n            tableId={JOIN_REQUESTS_TABLE_ID}\n          />\n        </div>\n      )}\n\n      {/* Gespeicherte Filter als Tags anzeigen */}\n      <SavedFilterTags\n        tableId={JOIN_REQUESTS_TABLE_ID}\n        onSelectFilter={applyFilterConditions}\n        onReset={resetFilterConditions}\n        activeFilterName={activeFilterName}\n        selectedFilterId={selectedFilterId}\n        onFilterChange={handleFilterChange}\n        defaultFilterName=\"Alle\"\n      />\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"mb-4 p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded\">\n          {error}\n        </div>\n      )}\n\n      {/* Loading State */}\n      {loading ? (\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('joinRequestsList.loading')}</span>\n        </div>\n      ) : filteredJoinRequests.length === 0 ? (\n        <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n          {joinRequests.length === 0 \n            ? t('joinRequestsList.noRequests')\n            : t('joinRequestsList.noMatching')}\n        </div>\n      ) : (\n        /* Cards fr Join-Requests */\n        <div className=\"space-y-4\">\n          {filteredJoinRequests.map(request => (\n            <div\n              key={request.id}\n              className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\"\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                        {request.requester.firstName} {request.requester.lastName}\n                      </h3>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        {request.requester.email}\n              </p>\n                    </div>\n                    <span className={`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(request.status)}`}>\n                      {getStatusText(request.status, t)}\n                    </span>\n                  </div>\n\n                  {request.message && (\n                    <div className=\"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\n                      <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                        <span className=\"font-medium\">{t('joinRequestsList.filter.message')}:</span> {request.message}\n                      </p>\n                    </div>\n                  )}\n\n                  {request.response && (\n                    <div className=\"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-700\">\n                      <p className=\"text-sm text-blue-700 dark:text-blue-300\">\n                        <span className=\"font-medium\">{t('joinRequestsList.response')}:</span> {request.response}\n                      </p>\n                    </div>\n                  )}\n\n              {request.status === 'pending' && canManageJoinRequests() && (\n                    <div className=\"mt-4 flex items-center gap-2\">\n                  <button \n                        onClick={() => handleOpenProcessModal(request)}\n                        className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center\"\n                      >\n                        <PencilIcon className=\"h-4 w-4 mr-1\" />\n                        {t('joinRequestsList.edit')}\n                  </button>\n                </div>\n              )}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Process Join Request Modal */}\n      <ProcessJoinRequestModal\n        isOpen={isProcessModalOpen}\n        onClose={() => {\n          setIsProcessModalOpen(false);\n          setSelectedRequest(null);\n        }}\n        joinRequest={selectedRequest}\n        onSuccess={handleProcessSuccess}\n      />\n    </div>\n  );\n};\n\nexport default JoinRequestsList; ","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { UserGroupIcon, UserIcon, ShieldCheckIcon, MapPinIcon } from '@heroicons/react/24/outline';\nimport UserManagementTab from '../components/UserManagementTab.tsx';\nimport RoleManagementTab from '../components/RoleManagementTab.tsx';\nimport BranchManagementTab from '../components/BranchManagementTab.tsx';\nimport useMessage from '../hooks/useMessage.ts';\nimport OrganizationSettings from '../components/organization/OrganizationSettings.tsx';\nimport JoinRequestsList from '../components/organization/JoinRequestsList.tsx';\n\nconst Organisation: React.FC = () => {\n  const { t } = useTranslation();\n  // Gemeinsame States\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const { showMessage } = useMessage();\n\n  const { \n    isAdmin, \n    hasPermission, \n    canViewOrganization,\n    loading: permissionsLoading\n  } = usePermissions();\n\n  // Berechtigungen prfen\n  const canViewOrganisation = hasPermission('organization_management', 'read', 'page');\n  const canViewUsers = hasPermission('users', 'read', 'table');\n  const canViewRoles = hasPermission('roles', 'read', 'table');\n  const canViewBranches = hasPermission('branches', 'read', 'table');\n  const canViewOrg = canViewOrganization();\n\n  const [activeTabState, setActiveTabState] = useState<'users' | 'roles' | 'branches' | 'organization'>('users');\n  const isInitialized = useRef(false);\n\n  // Tab beim ersten Laden basierend auf Berechtigungen setzen (nur wenn Berechtigungen geladen sind)\n  // Reihenfolge: users -> roles -> branches -> organization\n  useEffect(() => {\n    if (!permissionsLoading && !isInitialized.current) {\n      let defaultTab: 'users' | 'roles' | 'branches' | 'organization' = 'organization'; // Fallback\n      \n      if (canViewUsers) {\n        defaultTab = 'users';\n      } else if (canViewRoles) {\n        defaultTab = 'roles';\n      } else if (canViewBranches) {\n        defaultTab = 'branches';\n      } else if (canViewOrg) {\n        defaultTab = 'organization';\n      }\n      \n      setActiveTabState(defaultTab);\n      isInitialized.current = true;\n    }\n  }, [permissionsLoading, canViewUsers, canViewRoles, canViewBranches, canViewOrg]);\n\n  // Tab-Wechsel Handler - Fehler beim Wechsel zurcksetzen\n  const handleTabChange = (tab: 'users' | 'roles' | 'branches' | 'organization') => {\n    // Prfe Berechtigung fr den Tab\n    if (tab === 'users' && !canViewUsers) {\n      return; // Tab nicht aktivierbar\n    }\n    if (tab === 'roles' && !canViewRoles) {\n      return; // Tab nicht aktivierbar\n    }\n    if (tab === 'branches' && !canViewBranches) {\n      return; // Tab nicht aktivierbar\n    }\n    if (tab === 'organization' && !canViewOrg) {\n      return; // Tab nicht aktivierbar\n    }\n    setActiveTabState(tab);\n    setError(null);\n  };\n\n  // Gemeinsame Fehlerbehandlung\n  const handleError = (err: any) => {\n    let message = t('errors.unknownError');\n    if (err.response?.data?.message) {\n      message = err.response.data.message;\n    } else if (err instanceof Error) {\n      message = err.message;\n    }\n    setError(message);\n    showMessage(message, 'error');\n  };\n\n  // Keine Berechtigung fr die Seite\n  if (!canViewOrganisation) {\n    return <div className=\"p-4 text-red-600 dark:text-red-400\">{t('organisation.noPermission')}</div>;\n  }\n\n  return (\n    <div className=\"min-h-screen dark:bg-gray-900\">\n      <div className=\"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6\">\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n          {/* Header mit Icon */}\n          <div className=\"flex items-center mb-6\">\n            <UserGroupIcon className=\"h-6 w-6 mr-2 dark:text-white\" />\n            <h2 className=\"text-xl font-semibold dark:text-white\">{t('organisation.title')}</h2>\n          </div>\n\n          {/* Tabs fr Navigation */}\n          <div className=\"border-b border-gray-200 dark:border-gray-700 mb-6\">\n            <nav className=\"-mb-px flex space-x-4 sm:space-x-8 overflow-x-auto overflow-y-hidden\">\n              {/* Users Tab - immer sichtbar, aber mit Pro-Badge wenn nicht berechtigt */}\n              <button\n                className={`${\n                  activeTabState === 'users' && canViewUsers\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                    : !canViewUsers\n                    ? 'border-transparent text-gray-400 dark:text-gray-500 cursor-not-allowed opacity-60'\n                    : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                } whitespace-nowrap py-2 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center relative flex-shrink-0`}\n                onClick={() => canViewUsers && handleTabChange('users')}\n                disabled={!canViewUsers}\n              >\n                <UserIcon className=\"h-3 w-3 sm:h-5 sm:w-5 mr-1 sm:mr-2\" />\n                {t('organisation.tabs.users')}\n                {!canViewUsers && (\n                  <span className=\"ml-1 sm:ml-2 px-1 sm:px-2 py-0.5 text-[0.625rem] sm:text-xs font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded\">\n                    PRO\n                  </span>\n                )}\n              </button>\n\n              {/* Roles Tab - immer sichtbar, aber mit Pro-Badge wenn nicht berechtigt */}\n              <button\n                className={`${\n                  activeTabState === 'roles' && canViewRoles\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                    : !canViewRoles\n                    ? 'border-transparent text-gray-400 dark:text-gray-500 cursor-not-allowed opacity-60'\n                    : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                } whitespace-nowrap py-2 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center relative flex-shrink-0`}\n                onClick={() => canViewRoles && handleTabChange('roles')}\n                disabled={!canViewRoles}\n              >\n                <ShieldCheckIcon className=\"h-3 w-3 sm:h-5 sm:w-5 mr-1 sm:mr-2\" />\n                {t('organisation.tabs.roles')}\n                {!canViewRoles && (\n                  <span className=\"ml-1 sm:ml-2 px-1 sm:px-2 py-0.5 text-[0.625rem] sm:text-xs font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded\">\n                    PRO\n                  </span>\n                )}\n              </button>\n\n              {/* Branches Tab - immer sichtbar, aber mit Pro-Badge wenn nicht berechtigt */}\n              <button\n                className={`${\n                  activeTabState === 'branches' && canViewBranches\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                    : !canViewBranches\n                    ? 'border-transparent text-gray-400 dark:text-gray-500 cursor-not-allowed opacity-60'\n                    : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                } whitespace-nowrap py-2 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center relative flex-shrink-0`}\n                onClick={() => canViewBranches && handleTabChange('branches')}\n                disabled={!canViewBranches}\n              >\n                <MapPinIcon className=\"h-3 w-3 sm:h-5 sm:w-5 mr-1 sm:mr-2\" />\n                {t('organisation.tabs.branches', { defaultValue: 'Niederlassungen' })}\n                {!canViewBranches && (\n                  <span className=\"ml-1 sm:ml-2 px-1 sm:px-2 py-0.5 text-[0.625rem] sm:text-xs font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded\">\n                    PRO\n                  </span>\n                )}\n              </button>\n\n              {/* Organization Tab - sichtbar wenn berechtigt */}\n              {canViewOrg && (\n                <button\n                  className={`${\n                    activeTabState === 'organization'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                  } whitespace-nowrap py-2 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center flex-shrink-0`}\n                  onClick={() => handleTabChange('organization')}\n                >\n                  <UserGroupIcon className=\"h-3 w-3 sm:h-5 sm:w-5 mr-1 sm:mr-2\" />\n                  {t('organisation.tabs.organization')}\n                </button>\n              )}\n            </nav>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4\">\n              <p className=\"font-bold\">{t('organisation.error')}</p>\n              <p>{error}</p>\n            </div>\n          )}\n\n          {loading && <div className=\"p-4 dark:text-gray-300\">{t('organisation.loading')}</div>}\n\n          {/* Tab Inhalte */}\n          <div className=\"mt-6\">\n            {activeTabState === 'users' ? (\n              canViewUsers ? (\n                <UserManagementTab onError={handleError} />\n              ) : (\n                <div className=\"p-8 text-center\">\n                  <div className=\"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6\">\n                    <span className=\"inline-block px-3 py-1 text-sm font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded mb-4\">\n                      PRO\n                    </span>\n                    <p className=\"text-gray-700 dark:text-gray-300 mt-4\">\n                      {t('organisation.proFeature.users')}\n                    </p>\n                  </div>\n                </div>\n              )\n            ) : activeTabState === 'roles' ? (\n              canViewRoles ? (\n                <RoleManagementTab onError={handleError} />\n              ) : (\n                <div className=\"p-8 text-center\">\n                  <div className=\"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6\">\n                    <span className=\"inline-block px-3 py-1 text-sm font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded mb-4\">\n                      PRO\n                    </span>\n                    <p className=\"text-gray-700 dark:text-gray-300 mt-4\">\n                      {t('organisation.proFeature.roles')}\n                    </p>\n                  </div>\n                </div>\n              )\n            ) : activeTabState === 'branches' ? (\n              canViewBranches ? (\n                <BranchManagementTab onError={handleError} />\n              ) : (\n                <div className=\"p-8 text-center\">\n                  <div className=\"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6\">\n                    <span className=\"inline-block px-3 py-1 text-sm font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded mb-4\">\n                      PRO\n                    </span>\n                    <p className=\"text-gray-700 dark:text-gray-300 mt-4\">\n                      {t('organisation.proFeature.branches', { defaultValue: 'Niederlassungs-Verwaltung ist eine PRO-Funktion' })}\n                    </p>\n                  </div>\n                </div>\n              )\n            ) : activeTabState === 'organization' && canViewOrg ? (\n              <div className=\"space-y-6\">\n                <OrganizationSettings />\n                <JoinRequestsList />\n              </div>\n            ) : (\n              <div className=\"p-4 text-red-600 dark:text-red-400\">\n                {t('organisation.noPermissionForPage')}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Organisation;\n\n\n","import * as React from \"react\";\nfunction EnvelopeIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(EnvelopeIcon);\nexport default ForwardRef;"],"names":["ChartBarIcon","_ref","svgRef","title","titleId","props","_objectWithoutProperties","_excluded","React","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","id","strokeLinecap","strokeLinejoin","d","DocumentDuplicateIcon","MapPinIcon","isOpen","onClose","onCertificateCreated","userId","userName","t","useTranslation","user","currentUser","useAuth","isHR","isAdmin","loading","permissionsLoading","usePermissions","openSidepane","closeSidepane","useSidepane","showMessage","useMessage","isMobile","setIsMobile","useState","window","innerWidth","isLargeScreen","setIsLargeScreen","activeTab","setActiveTab","setLoading","error","setError","userData","setUserData","issueDate","setIssueDate","Date","toISOString","split","certificateType","setCertificateType","pdfFile","setPdfFile","pdfPreviewUrl","setPdfPreviewUrl","uploading","setUploading","availableTemplates","setAvailableTemplates","selectedTemplate","setSelectedTemplate","useTemplate","setUseTemplate","fileInputRef","useRef","useEffect","handleResize","addEventListener","removeEventListener","fetchUserData","fetchTemplates","async","documentTemplates","axiosInstance","get","API_ENDPOINTS","ORGANIZATION_LIFECYCLE","DOCUMENT_TEMPLATES","data","templates","employmentCertificate","push","type","version","path","length","err","console","userResponse","lifecycleResponse","Promise","all","USERS","BY_ID","LIFECYCLE","BY_USER","lifecycle","userDataObj","firstName","lastName","identificationNumber","contractStartDate","contractEndDate","contractType","salary","position","URL","revokeObjectURL","_jsxs","Dialog","open","className","children","_jsx","Panel","concat","style","animation","DocumentTextIcon","Title","onClick","XMarkIcon","_Fragment","UserIcon","CalendarIcon","toLocaleDateString","value","onChange","e","target","max","required","undefined","checked","map","template","accept","event","_event$target$files","file","files","size","url","createObjectURL","name","toFixed","current","_fileInputRef$current","click","src","height","preventDefault","validationError","validateForm","issueDateObj","isNaN","getTime","pdfPath","templateUsed","templateVersion","find","now","certificateData","post","CERTIFICATES","_err$response","_err$response$data","response","message","disabled","ArrowPathIcon","CheckIcon","onContractCreated","setContractType","startDate","setStartDate","endDate","setEndDate","setSalary","workingHours","setWorkingHours","setPosition","employmentContract","toString","min","placeholder","CurrencyDollarIcon","parseFloat","step","startDateObj","endDateObj","contractData","CONTRACTS","onCertificateUpdated","certificate","existingPdfUrl","setExistingPdfUrl","CERTIFICATE_DOWNLOAD","handleSubmit","updateData","put","CERTIFICATE","onSubmit","onContractUpdated","contract","CONTRACT_DOWNLOAD","CONTRACT","lifecycleId","onUpdate","isLegal","registrations","setRegistrations","arl","eps","pension","caja","editingType","setEditingType","formData","setFormData","status","registrationNumber","provider","registrationDate","notes","saving","setSaving","loadingRef","abortControllerRef","loadRegistrations","useCallback","abort","abortController","AbortController","registrationPromises","signal","aborted","registration","SOCIAL_SECURITY","timeout","_error$response","_error$message","code","includes","warn","results","newRegistrations","forEach","_ref2","registrationType","number","registeredAt","completedAt","handleCancel","handleSave","defaultValue","resolve","setTimeout","_error$response2","_error$response2$data","getStatusIcon","CheckCircleIcon","ClockIcon","XCircleIcon","getStatusLabel","labelKey","getTypeLabel","isEditing","_objectSpread","rows","handleEdit","PencilIcon","onOffboardingStarted","exitDate","setExitDate","exitReason","setExitReason","validationErrors","setValidationErrors","today","errors","selectedDate","setHours","maxDate","setFullYear","getFullYear","trim","keys","STATUS","errorMessage","renderForm","ExclamationTriangleIcon","htmlFor","prev","ArrowRightIcon","opacity","transition","pointerEvents","role","onOffboardingCompleted","offboardingTasks","confirmText","setConfirmText","completedTasks","filter","task","allTasksCompleted","requiredConfirmText","toLowerCase","isCompleted","_lifecycleData$lifecy","lifecycleData","setLifecycleData","certificates","setCertificates","contracts","setContracts","setOffboardingTasks","isCertificateCreateModalOpen","setIsCertificateCreateModalOpen","isContractCreateModalOpen","setIsContractCreateModalOpen","editingCertificate","setEditingCertificate","editingContract","setEditingContract","downloadingCertId","setDownloadingCertId","downloadingContractId","setDownloadingContractId","isOffboardingStartModalOpen","setIsOffboardingStartModalOpen","isOffboardingCompleteModalOpen","setIsOffboardingCompleteModalOpen","isEditContractDatesModalOpen","setIsEditContractDatesModalOpen","editingContractStartDate","setEditingContractStartDate","editingContractEndDate","setEditingContractEndDate","fetchDataRef","fetchData","force","arguments","_certsResponse$data","_contractsResponse$da","_lifecycleResponse$da","_lifecycleResponse$da2","_lifecycleResponse$da3","_lifecycleResponse$da4","certsResponse","contractsResponse","tasksResponse","TASKS","catch","allTasks","offboardingTaskTitles","filteredTasks","progress","percent","handleEditContractDates","formatDate","dateString","year","month","day","socialSecurityRegistrations","BuildingOfficeIcon","clickable","config","onboarding","color","active","contract_change","offboarding","archived","getStatusBadge","onboardingStartedAt","onboardingCompletedAt","offboardingStartedAt","completed","total","width","totalTasks","Math","round","description","PlusIcon","cert","isLatest","generatedByUser","certId","responseType","blob","Blob","downloadUrl","link","document","createElement","href","download","body","appendChild","removeChild","handleDownloadCertificate","ArrowDownTrayIcon","toLocaleString","currency","contractId","handleDownloadContract","SocialSecurityEditor","CertificateCreationModal","ContractCreationModal","CertificateEditModal","ContractEditModal","OffboardingStartModal","OffboardingCompleteModal","CONTRACT_TYPES","onError","COUNTRIES","PAYROLL_COUNTRIES","LANGUAGES","users","setUsers","selectedUser","setSelectedUser","userFormData","setUserFormData","isEditingUser","setIsEditingUser","selectedRoles","setSelectedRoles","lifecycleRefreshKey","setLifecycleRefreshKey","isDebugMode","setIsDebugMode","roleWarning","setRoleWarning","roles","setRoles","loadingRoles","setLoadingRoles","branches","setBranches","loadingBranches","setLoadingBranches","selectedBranches","setSelectedBranches","activeUserTab","setActiveUserTab","userFilterTab","setUserFilterTab","isCreateModalOpen","setIsCreateModalOpen","showDocumentUpload","setShowDocumentUpload","newUserFormData","setNewUserFormData","email","password","allUsers","setAllUsers","fetchAllUsers","userApi","getAll","filterUsersByActiveStatus","handleError","sorted","isActive","sort","a","b","aUsername","username","bUsername","aFirstName","bFirstName","localeCompare","fetchUserDetails","log","getById","birthday","roleIds","Array","isArray","userRole","roleId","r","branchIds","branch","userBranch","branchId","fallbackRoles","permissions","roleApi","fetchRoles","branchApi","fetchBranches","Error","handleUserInputChange","finalValue","Number","toggleRole","isRoleSelected","newSelectedRoles","updateRoles","toggleBranch","isBranchSelected","newSelectedBranches","updateBranches","handleNewUserInputChange","handleCreateUser","match","create","newUser","prevUsers","_err$response5","_err$response5$data","parseInt","UserCircleIcon","ShieldCheckIcon","_userFormData$usernam","_userFormData$email","dataToSend","bankDetails","gender","phoneNumber","language","hourlyRate","monthlySalary","payrollCountry","update","updatedData","_err$response2","_err$response4","_err$response3","_err$response3$data","errorMsg","IdentificationDocumentForm","onDocumentSaved","onCancel","identificationDocuments","_COUNTRIES$find","latestDoc","readOnly","country","c","documentType","passport","national_id","driving_license","residence_permit","work_permit","tax_id","social_security","documentNumber","expiryDate","handleCancelEdit","currentUserId","localStorage","getItem","currentActiveStatus","newActiveStatus","selectedUserActive","updatePayload","updatedAllUsers","IdentificationDocumentList","some","ids","join","isFixedRole","fillRule","clipRule","LifecycleView","alwaysVisiblePages","defaultPages","defaultTables","defaultButtons","tableToPageMapping","buttonToPageMapping","buttonToTableMapping","ROLES_TABLE_ID","STANDARD_ROLE_IDS","STANDARD_ROLE_NAMES","isStandardRole","roleName","RoleCard","onEdit","onDelete","onCopy","canEdit","canDelete","canCopy","TrashIcon","allBranches","perm","accessLevel","slice","permission","entity","entityType","onRolesChange","isModalOpen","setIsModalOpen","editingRole","setEditingRole","pageDisplayNames","useMemo","tableDisplayNames","buttonDisplayNames","page","table","button","hasPermission","searchTerm","setSearchTerm","isFilterModalOpen","setIsFilterModalOpen","setAllBranches","selectedBranchIds","setSelectedBranchIds","filterConditions","setFilterConditions","filterLogicalOperators","setFilterLogicalOperators","activeFilterName","setActiveFilterName","selectedFilterId","setSelectedFilterId","handleValidationError","useError","isAddPermissionModalOpen","setIsAddPermissionModalOpen","selectedPermission","setSelectedPermission","displayLimit","setDisplayLimit","component","action","filteredPermissions","category","ErrorCategory","PERMISSION","updateError","meta","cause","createError","resetForm","handleDelete","confirm","delete","deleteError","refreshError","handleCopyRole","copiedRoleData","prevRoles","prepareRoleForEditing","allPermissions","existingPermIndex","findIndex","p","_branchData$branches","branchData","getRoleBranches","setAllPagePermissions","newPermissions","permIndex","indexOf","setAllTablePermissions","setAllButtonPermissions","getActiveFilterCount","filteredAndSortedRoles","searchLower","result","i","condition","conditionMet","column","operator","startsWith","count","existingFilters","SAVED_FILTERS","BY_TABLE","alleFilter","tableId","conditions","operators","BASE","createStandardFilters","applyFilterConditions","setInitialFilter","resetFilterConditions","FunnelIcon","FilterPane","columns","label","onApply","onReset","savedConditions","savedOperators","SavedFilterTags","onSelectFilter","onFilterChange","handleFilterChange","defaultFilterName","prevLimit","ChevronDownIcon","index","tablePerm","aName","bName","priorityOrder","aIndex","bIndex","tableIndex","tablePermIndex","isTableActive","tableEntity","tableDisplayName","relatedButtons","buttonPerm","order","buttonIndex","buttonPermIndex","isButtonActive","buttonDisplayName","BranchCard","BRANCHES_TABLE_ID","editingBranch","setEditingBranch","whatsappSettings","apiKey","apiSecret","phoneNumberId","ai","enabled","model","systemPrompt","rules","sources","temperature","maxTokens","lobbyPmsSettings","apiUrl","propertyId","autoCreateTasks","lateCheckInThreshold","notificationChannels","autoSendInvitation","boldPaymentSettings","merchantId","environment","doorSystemSettings","clientId","clientSecret","lockIds","appName","emailSettings","smtpHost","smtpPort","smtpUser","smtpPass","smtpFromEmail","smtpFromName","imap","host","port","secure","folder","processedFolder","activeSettingsTab","setActiveSettingsTab","showSecrets","setShowSecrets","canCreate","BRANCHES","_error$response$data","sireSettings","autoRegisterOnCheckIn","propertyCode","existingWhatsapp","existingLobbyPms","existingBoldPayment","existingDoorSystem","existingEmail","handleCloseModal","UPDATE","CREATE","DELETE","_error$response3","_error$response3$data","filteredAndSortedBranches","handleCreate","autoFocus","tab","whatsappApiKey","s","emailSmtpPass","emailImapPass","UserPlusIcon","onSuccess","displayName","domain","setErrors","fetchCurrentUser","checkScreenSize","handleChange","newErrors","organizationService","createOrganization","submit","handleClose","organizationName","searching","setSearching","organizations","setOrganizations","showDropdown","setShowDropdown","selectedOrganization","setSelectedOrganization","searchTimeoutRef","dropdownRef","handleClickOutside","contains","handleOrganizationInputChange","clearTimeout","searchOrganizations","handleSelectOrganization","org","handleMessageChange","createJoinRequest","organization","onSave","lifecycleRoles","setLifecycleRoles","loadRoles","loadLifecycleRoles","LIFECYCLE_ROLES","handleAssignStandardRoles","adminRole","hrRole","legalRole","adminRoleId","hrRoleId","legalRoleId","prepareRoleId","employeeRoleIds","SignatureUploadSection","onUpload","signatures","setSignatures","signatureType","setSignatureType","signerName","setSignerName","signerPosition","setSignerPosition","positionX","setPositionX","positionY","setPositionY","positionPage","setPositionPage","loadSignatures","documentSignatures","DOCUMENT_SIGNATURES","signaturesList","_error$response5","_error$response6","_error$response6$data","_event$target$files2","FormData","append","UPLOAD_SIGNATURE","headers","_error$response7","_error$response7$data","_fileInputRef$current2","signature","x","y","settings","ORGANIZATIONS","CURRENT","typeKey","_error$response8","_error$response8$data","handleDeleteSignature","FieldPositionConfiguration","_ref3","templateType","setTemplateType","fields","setFields","certificateFields","contractFields","loadFields","_settings$documentTem","templateSettings","savedFields","margin","lineHeight","currentY","defaultFields","fieldList","defaultPositions","fontSize","currentDate","fieldName","handleFieldChange","property","fieldLabels","_fields$fieldName","_fields$fieldName2","_fields$fieldName3","resetFields","currentSettings","updateOrganization","_error$response9","_error$response9$data","setTemplates","loadTemplates","templatesList","filePath","UPLOAD_TEMPLATE","_error$response4","_error$response4$data","handleDeleteTemplate","smtpSettings","setSmtpSettings","showPassword","setShowPassword","_settings$smtpPort","EnvelopeIcon","handleClear","ALLOWED_DOMAINS","lobbyPms","ttlock","sire","boldPayment","validateApiUrl","service","parsed","hostname","endsWith","canManageOrganization","apiSettings","setApiSettings","lobbyPmsApiKey","lobbyPmsPropertyId","lobbyPmsSyncEnabled","lobbyPmsAutoCreateTasks","lobbyPmsAutoSendReservationInvitation","lobbyPmsLateCheckInThreshold","ttlockClientId","ttlockClientSecret","ttlockApiUrl","ttlockUsername","ttlockPassword","ttlockPasscodeType","sireApiUrl","sireApiKey","sireApiSecret","sireEnabled","sireAutoRegisterOnCheckIn","sirePropertyCode","boldPaymentApiKey","boldPaymentMerchantId","boldPaymentEnvironment","whatsappProvider","whatsappApiSecret","whatsappPhoneNumberId","doorSystem","whatsapp","syncEnabled","autoSendReservationInvitation","passcodeType","SecretInput","showSecret","toggleShowSecret","key","KeyIcon","test","_err$path","msg","logo","nit","selectedCountry","setSelectedCountry","setNit","organizationLanguage","setOrganizationLanguage","useLanguage","selectedOrgLanguage","setSelectedOrgLanguage","savingOrgLanguage","setSavingOrgLanguage","logoFile","setLogoFile","logoPreview","setLogoPreview","orgSettings","langResponse","getOrganizationLanguage","langError","loadOrgLanguage","handleLogoFileChange","_e$target$files","reader","FileReader","onloadend","base64String","readAsDataURL","alt","newLanguage","RoleConfigurationTab","DocumentConfigurationTab","SMTPConfigurationTab","ApiConfigurationTab","getStatusColor","getStatusText","MY_JOIN_REQUESTS_TABLE_ID","MyJoinRequestsList","joinRequests","setJoinRequests","isFilterPanelOpen","setIsFilterPanelOpen","mountedRef","withdrawingId","setWithdrawingId","isMounted","timeoutId","MY_JOIN_REQUESTS","requests","getMyJoinRequests","fetchMyJoinRequests","hour","minute","filteredJoinRequests","filtered","request","_request$message","orgName","reduce","acc","_request$message2","searchValue","String","msgValue","createdAt","processor","processedAt","requestId","withdrawJoinRequest","req","_err$response4$data","handleWithdraw","OrganizationSettings","setOrganization","stats","setStats","loadingStats","setLoadingStats","isJoinModalOpen","setIsJoinModalOpen","isEditModalOpen","setIsEditModalOpen","canViewOrganization","refreshOrganization","useOrganization","fetchOrganization","getCurrentOrganization","statsData","getOrganizationStats","statsErr","_err$response2$data","hasOrganization","hasInitialLoadRef","UserGroupIcon","subscriptionPlan","currentUsers","maxUsers","utilizationPercent","_count","invitations","availableSlots","CreateOrganizationModal","handleCreateSuccess","JoinOrganizationModal","EditOrganizationModal","handleEditSuccess","joinRequest","setAction","setRoleId","setResponse","organizationId","processJoinRequest","requester","JOIN_REQUESTS_TABLE_ID","JoinRequestsList","isProcessModalOpen","setIsProcessModalOpen","selectedRequest","setSelectedRequest","canViewJoinRequests","canManageJoinRequests","hasInitialLoad","joinRequestsCount","JOIN_REQUESTS","getJoinRequests","stack","fetchJoinRequests","_request$requester$em","requesterName","requesterEmail","_request$requester$em2","handleOpenProcessModal","ProcessJoinRequestModal","Organisation","canViewOrganisation","canViewUsers","canViewRoles","canViewBranches","canViewOrg","activeTabState","setActiveTabState","isInitialized","defaultTab","handleTabChange","UserManagementTab","RoleManagementTab","BranchManagementTab"],"sourceRoot":""}