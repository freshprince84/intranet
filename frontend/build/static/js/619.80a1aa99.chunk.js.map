{"version":3,"file":"static/js/619.80a1aa99.chunk.js","mappings":"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","sources":["components/tours/CreateTourBookingModal.tsx","components/CertificateCreationModal.tsx","components/ContractCreationModal.tsx","components/CertificateEditModal.tsx","components/ContractEditModal.tsx","components/SocialSecurityEditor.tsx","components/OffboardingStartModal.tsx","components/OffboardingCompleteModal.tsx","components/LifecycleView.tsx","components/UserManagementTab.tsx","components/RoleManagementTab.tsx","components/BranchManagementTab.tsx","components/tours/CreateTourProviderModal.tsx","components/tours/EditTourProviderModal.tsx","components/tours/TourProvidersTab.tsx","types/tour.ts","components/tours/CreateTourModal.tsx","components/tours/EditTourModal.tsx","components/tours/TourDetailsModal.tsx","components/tours/TourExportDialog.tsx","components/tours/ToursTab.tsx","components/organization/CreateOrganizationModal.tsx","components/organization/JoinOrganizationModal.tsx","components/organization/RoleConfigurationTab.tsx","components/organization/DocumentConfigurationTab.tsx","components/organization/SMTPConfigurationTab.tsx","utils/urlValidation.ts","components/organization/ApiConfigurationTab.tsx","components/organization/EditOrganizationModal.tsx","components/organization/MyJoinRequestsList.tsx","components/organization/OrganizationSettings.tsx","components/organization/ProcessJoinRequestModal.tsx","components/organization/JoinRequestsList.tsx","pages/Organisation.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../../config/axios.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport { useAuth } from '../../hooks/useAuth.tsx';\nimport { Tour, TourBooking, TourBookingStatus } from '../../types/tour.ts';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface CreateTourBookingModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onBookingCreated: (newBooking: TourBooking) => void;\n    tour?: Tour | null;\n}\n\nconst CreateTourBookingModal = ({ isOpen, onClose, onBookingCreated, tour: preselectedTour }: CreateTourBookingModalProps) => {\n    const { t } = useTranslation();\n    const { user } = useAuth();\n    const { showMessage } = useMessage();\n    \n    const [tourId, setTourId] = useState<number | ''>(preselectedTour?.id || '');\n    const [tourDate, setTourDate] = useState('');\n    const [numberOfParticipants, setNumberOfParticipants] = useState<number | ''>(1);\n    const [customerName, setCustomerName] = useState('');\n    const [customerEmail, setCustomerEmail] = useState('');\n    const [customerPhone, setCustomerPhone] = useState('');\n    const [customerNotes, setCustomerNotes] = useState('');\n    \n    const [tours, setTours] = useState<Tour[]>([]);\n    const [selectedTour, setSelectedTour] = useState<Tour | null>(preselectedTour || null);\n    const [error, setError] = useState<string | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [loadingData, setLoadingData] = useState(true);\n\n    // Lade Touren\n    useEffect(() => {\n        const loadData = async () => {\n            try {\n                setLoadingData(true);\n                const response = await axiosInstance.get(API_ENDPOINTS.TOURS.BASE, {\n                    params: { isActive: true }\n                });\n                const toursData = response.data?.data || response.data || [];\n                setTours(Array.isArray(toursData) ? toursData : []);\n            } catch (err: any) {\n                console.error('Fehler beim Laden der Touren:', err);\n                showMessage(t('errors.loadError'), 'error');\n            } finally {\n                setLoadingData(false);\n            }\n        };\n        \n        if (isOpen) {\n            loadData();\n        }\n    }, [isOpen, t, showMessage]);\n\n    // Setze preselectedTour wenn vorhanden\n    useEffect(() => {\n        if (preselectedTour) {\n            setTourId(preselectedTour.id);\n            setSelectedTour(preselectedTour);\n        }\n    }, [preselectedTour]);\n\n    // Update selectedTour when tourId changes\n    useEffect(() => {\n        if (tourId) {\n            const tour = tours.find(t => t.id === Number(tourId));\n            setSelectedTour(tour || null);\n        } else {\n            setSelectedTour(null);\n        }\n    }, [tourId, tours]);\n\n    // Reset form when modal opens/closes\n    useEffect(() => {\n        if (!isOpen) {\n            if (!preselectedTour) {\n                setTourId('');\n            }\n            setTourDate('');\n            setNumberOfParticipants(1);\n            setCustomerName('');\n            setCustomerEmail('');\n            setCustomerPhone('');\n            setCustomerNotes('');\n            setError(null);\n        }\n    }, [isOpen, preselectedTour]);\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError(null);\n\n        // Validierungen\n        if (!tourId) {\n            setError(t('tourBookings.validation.tourRequired', { defaultValue: 'Tour ist erforderlich' }));\n            return;\n        }\n\n        if (!tourDate) {\n            setError(t('tourBookings.validation.tourDateRequired', { defaultValue: 'Tour-Datum ist erforderlich' }));\n            return;\n        }\n\n        const tourDateObj = new Date(tourDate);\n        if (tourDateObj < new Date()) {\n            setError(t('tours.validation.tourDateFuture', { defaultValue: 'Tour-Datum muss in der Zukunft liegen' }));\n            return;\n        }\n\n        if (!numberOfParticipants || Number(numberOfParticipants) < 1) {\n            setError(t('tourBookings.validation.numberOfParticipantsMin', { defaultValue: 'Anzahl Teilnehmer muss >= 1 sein' }));\n            return;\n        }\n\n        if (!customerName.trim() || customerName.trim().length < 2) {\n            setError(t('tourBookings.validation.customerNameMinLength', { defaultValue: 'Kundenname muss mindestens 2 Zeichen lang sein' }));\n            return;\n        }\n\n        if (!customerPhone.trim() && !customerEmail.trim()) {\n            setError(t('tourBookings.validation.contactRequired', { defaultValue: 'Mindestens eine Kontaktinformation (Telefon oder E-Mail) ist erforderlich' }));\n            return;\n        }\n\n        // Validierung: Anzahl Teilnehmer zwischen min/max\n        if (selectedTour) {\n            const numPart = Number(numberOfParticipants);\n            if (selectedTour.minParticipants && numPart < selectedTour.minParticipants) {\n                setError(t('tours.validation.numberOfParticipantsRange', { \n                    defaultValue: 'Anzahl der Teilnehmer muss zwischen {min} und {max} sein',\n                    min: selectedTour.minParticipants,\n                    max: selectedTour.maxParticipants || ''\n                }));\n                return;\n            }\n            if (selectedTour.maxParticipants && numPart > selectedTour.maxParticipants) {\n                setError(t('tours.validation.numberOfParticipantsRange', { \n                    defaultValue: 'Anzahl der Teilnehmer muss zwischen {min} und {max} sein',\n                    min: selectedTour.minParticipants || 1,\n                    max: selectedTour.maxParticipants\n                }));\n                return;\n            }\n        }\n\n        setLoading(true);\n        try {\n            const response = await axiosInstance.post(API_ENDPOINTS.TOUR_BOOKINGS.BASE, {\n                tourId: Number(tourId),\n                tourDate,\n                numberOfParticipants: Number(numberOfParticipants),\n                customerName: customerName.trim(),\n                customerEmail: customerEmail.trim() || null,\n                customerPhone: customerPhone.trim() || null,\n                customerNotes: customerNotes.trim() || null\n            });\n\n            if (response.data?.success && response.data?.data) {\n                showMessage(\n                    t('tourBookings.created', { defaultValue: 'Tour-Buchung erfolgreich erstellt' }),\n                    'success'\n                );\n                onBookingCreated(response.data.data);\n                onClose();\n            } else {\n                throw new Error(response.data?.message || 'Fehler beim Erstellen der Buchung');\n            }\n        } catch (err: any) {\n            console.error('Fehler beim Erstellen der Buchung:', err);\n            const errorMessage = err.response?.data?.message || err.message || t('errors.unknownError');\n            setError(errorMessage);\n            showMessage(errorMessage, 'error');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                    <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\n                        <Dialog.Title className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                            {t('tourBookings.create', { defaultValue: 'Neue Tour-Buchung' })}\n                        </Dialog.Title>\n                        <button\n                            onClick={onClose}\n                            className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n                        >\n                            <XMarkIcon className=\"h-6 w-6\" />\n                        </button>\n                    </div>\n\n                    <form onSubmit={handleSubmit} className=\"p-4 space-y-4\">\n                        {error && (\n                            <div className=\"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg p-3\">\n                                <p className=\"text-sm text-red-800 dark:text-red-200\">{error}</p>\n                            </div>\n                        )}\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tourBookings.tour', { defaultValue: 'Tour' })} *\n                            </label>\n                            <select\n                                value={tourId}\n                                onChange={(e) => setTourId(e.target.value ? Number(e.target.value) : '')}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                required\n                                disabled={loading || loadingData || !!preselectedTour}\n                            >\n                                <option value=\"\">{t('common.select', { defaultValue: 'Bitte whlen' })}</option>\n                                {tours.filter(t => t.isActive && t.title).map(tour => (\n                                    <option key={tour.id} value={tour.id}>\n                                        {tour.title || '-'}\n                                    </option>\n                                ))}\n                            </select>\n                            {selectedTour && (\n                                <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                                    {selectedTour.minParticipants && selectedTour.maxParticipants\n                                        ? t('tourBookings.participantsRange', { \n                                            defaultValue: 'Teilnehmer: {min} - {max}',\n                                            min: selectedTour.minParticipants,\n                                            max: selectedTour.maxParticipants\n                                        })\n                                        : selectedTour.minParticipants\n                                        ? t('tourBookings.participantsMin', { \n                                            defaultValue: 'Min. Teilnehmer: {min}',\n                                            min: selectedTour.minParticipants\n                                        })\n                                        : selectedTour.maxParticipants\n                                        ? t('tourBookings.participantsMax', { \n                                            defaultValue: 'Max. Teilnehmer: {max}',\n                                            max: selectedTour.maxParticipants\n                                        })\n                                        : null}\n                                </p>\n                            )}\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tourBookings.tourDate', { defaultValue: 'Tour-Datum' })} *\n                            </label>\n                            <input\n                                type=\"datetime-local\"\n                                value={tourDate}\n                                onChange={(e) => setTourDate(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                required\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tourBookings.numberOfParticipants', { defaultValue: 'Anzahl Teilnehmer' })} *\n                            </label>\n                            <input\n                                type=\"number\"\n                                min={selectedTour?.minParticipants || 1}\n                                max={selectedTour?.maxParticipants || undefined}\n                                value={numberOfParticipants}\n                                onChange={(e) => setNumberOfParticipants(e.target.value ? Number(e.target.value) : '')}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                required\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tourBookings.customerName', { defaultValue: 'Kundenname' })} *\n                            </label>\n                            <input\n                                type=\"text\"\n                                value={customerName}\n                                onChange={(e) => setCustomerName(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                required\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tourBookings.customerPhone', { defaultValue: 'Telefon' })}\n                            </label>\n                            <input\n                                type=\"tel\"\n                                value={customerPhone}\n                                onChange={(e) => setCustomerPhone(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tourBookings.customerEmail', { defaultValue: 'E-Mail' })}\n                            </label>\n                            <input\n                                type=\"email\"\n                                value={customerEmail}\n                                onChange={(e) => setCustomerEmail(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tourBookings.customerNotes', { defaultValue: 'Notizen' })}\n                            </label>\n                            <textarea\n                                value={customerNotes}\n                                onChange={(e) => setCustomerNotes(e.target.value)}\n                                rows={3}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div className=\"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                            <button\n                                type=\"button\"\n                                onClick={onClose}\n                                className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n                            >\n                                {t('common.cancel', 'Abbrechen')}\n                            </button>\n                            <button\n                                type=\"submit\"\n                                disabled={loading || loadingData}\n                                className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                                {loading ? t('common.saving', 'Speichere...') : t('common.save', 'Speichern')}\n                            </button>\n                        </div>\n                    </form>\n                </Dialog.Panel>\n            </div>\n        </Dialog>\n    );\n};\n\nexport default CreateTourBookingModal;\n\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, DocumentTextIcon, CalendarIcon, UserIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface CertificateCreationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onCertificateCreated: () => void;\n  userId: number;\n  userName: string;\n}\n\ninterface UserData {\n  firstName: string;\n  lastName: string;\n  identificationNumber: string | null;\n  contractStartDate: string | null;\n  contractEndDate: string | null;\n  contractType: string | null;\n  salary: number | null;\n  position: string | null;\n}\n\nconst CertificateCreationModal: React.FC<CertificateCreationModalProps> = ({\n  isOpen,\n  onClose,\n  onCertificateCreated,\n  userId,\n  userName\n}) => {\n  const { t } = useTranslation();\n  const { user: currentUser } = useAuth();\n  const { isHR, isAdmin, loading: permissionsLoading } = usePermissions();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  \n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [activeTab, setActiveTab] = useState<'data' | 'text'>('data');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Form-Daten\n  const [userData, setUserData] = useState<UserData | null>(null);\n  const [issueDate, setIssueDate] = useState(new Date().toISOString().split('T')[0]);\n  const [certificateType, setCertificateType] = useState('employment');\n  const [pdfFile, setPdfFile] = useState<File | null>(null);\n  const [pdfPreviewUrl, setPdfPreviewUrl] = useState<string | null>(null);\n  const [uploading, setUploading] = useState(false);\n  const [availableTemplates, setAvailableTemplates] = useState<Array<{type: string; version: string; path: string}>>([]);\n  const [selectedTemplate, setSelectedTemplate] = useState<string | null>(null);\n  const [useTemplate, setUseTemplate] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Prfe Berechtigung (nur wenn Berechtigungen geladen sind)\n  useEffect(() => {\n    if (permissionsLoading) {\n      return; // Warte bis Berechtigungen geladen sind\n    }\n    \n    if (!isHR() && !isAdmin()) {\n      showMessage('Nur HR oder Admin knnen Arbeitszeugnisse erstellen', 'error');\n      onClose();\n    }\n  }, [isHR, isAdmin, permissionsLoading, onClose, showMessage]);\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n      fetchUserData();\n      fetchTemplates();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  const fetchTemplates = async () => {\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.DOCUMENT_TEMPLATES);\n      const documentTemplates = response.data.documentTemplates || {};\n      const templates: Array<{type: string; version: string; path: string}> = [];\n      \n      if (documentTemplates.employmentCertificate) {\n        templates.push({\n          type: 'employmentCertificate',\n          version: documentTemplates.employmentCertificate.version,\n          path: documentTemplates.employmentCertificate.path\n        });\n      }\n      \n      setAvailableTemplates(templates);\n      if (templates.length > 0) {\n        setSelectedTemplate(templates[0].type);\n        setUseTemplate(true);\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Laden der Templates:', err);\n      // Kein Fehler anzeigen, Templates sind optional\n    }\n  };\n\n  const fetchUserData = async () => {\n    try {\n      const [userResponse, lifecycleResponse] = await Promise.all([\n        axiosInstance.get(API_ENDPOINTS.USERS.BY_ID(userId)),\n        axiosInstance.get(API_ENDPOINTS.LIFECYCLE.BY_USER(userId))\n      ]);\n\n      const user = userResponse.data;\n      const lifecycle = lifecycleResponse.data.lifecycle;\n\n      const userDataObj = {\n        firstName: user.firstName || '',\n        lastName: user.lastName || '',\n        identificationNumber: user.identificationNumber || null,\n        contractStartDate: lifecycle?.contractStartDate || null,\n        contractEndDate: lifecycle?.contractEndDate || null,\n        contractType: lifecycle?.contractType || null,\n        salary: user.salary || null,\n        position: null // TODO: Aus Rollen ableiten\n      };\n\n      setUserData(userDataObj);\n\n      // Automatische Vorausfllung: Ausstellungsdatum auf heute setzen (wenn noch nicht gesetzt)\n      if (!issueDate || issueDate === new Date().toISOString().split('T')[0]) {\n        setIssueDate(new Date().toISOString().split('T')[0]);\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Laden der User-Daten:', err);\n      setError('Fehler beim Laden der Daten');\n    }\n  };\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        showMessage('Nur PDF-Dateien sind erlaubt', 'error');\n        return;\n      }\n      if (file.size > 10 * 1024 * 1024) { // 10MB\n        showMessage('Datei ist zu gro (max. 10MB)', 'error');\n        return;\n      }\n      setPdfFile(file);\n      setUseTemplate(false); // Deaktiviere Template wenn PDF hochgeladen wird\n      // Erstelle Preview-URL\n      const url = URL.createObjectURL(file);\n      setPdfPreviewUrl(url);\n    }\n  };\n\n  // Cleanup: Revoke Object URL beim Unmount oder wenn Datei entfernt wird\n  useEffect(() => {\n    return () => {\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n      }\n    };\n  }, [pdfPreviewUrl]);\n\n  const validateForm = (): string | null => {\n    if (!useTemplate && !pdfFile) {\n      return 'Bitte whlen Sie ein Template oder laden Sie eine PDF-Datei hoch';\n    }\n    if (!issueDate) {\n      return 'Bitte geben Sie ein Ausstellungsdatum an';\n    }\n    const issueDateObj = new Date(issueDate);\n    if (isNaN(issueDateObj.getTime())) {\n      return 'Ungltiges Ausstellungsdatum';\n    }\n    if (issueDateObj > new Date()) {\n      return 'Ausstellungsdatum darf nicht in der Zukunft liegen';\n    }\n    return null;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Client-seitige Validierung\n    const validationError = validateForm();\n    if (validationError) {\n      setError(validationError);\n      showMessage(validationError, 'error');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      let pdfPath: string | undefined = undefined;\n      let templateUsed: string | null = null;\n      let templateVersion: string | null = null;\n\n      // Wenn Template verwendet werden soll und kein PDF hochgeladen wurde\n      if (useTemplate && selectedTemplate && !pdfFile) {\n        const template = availableTemplates.find(t => t.type === selectedTemplate);\n        if (template) {\n          templateUsed = template.type;\n          templateVersion = template.version;\n          // PDF wird vom Backend generiert\n        }\n      } else if (pdfFile) {\n        // PDF wurde hochgeladen - verwende dieses\n        pdfPath = `temp-${Date.now()}-${pdfFile.name}`; // Temporr\n      } else {\n        showMessage('Bitte whlen Sie ein Template oder laden Sie eine PDF-Datei hoch', 'error');\n        setLoading(false);\n        return;\n      }\n\n      const certificateData = {\n        certificateType,\n        issueDate: new Date(issueDate),\n        pdfPath,\n        templateUsed,\n        templateVersion\n      };\n\n      await axiosInstance.post(\n        API_ENDPOINTS.LIFECYCLE.CERTIFICATES(userId),\n        certificateData\n      );\n\n      showMessage('Arbeitszeugnis erfolgreich erstellt', 'success');\n      onCertificateCreated();\n      onClose();\n      \n      // Reset form\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n        setPdfPreviewUrl(null);\n      }\n      setPdfFile(null);\n      setIssueDate(new Date().toISOString().split('T')[0]);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Erstellen des Arbeitszeugnisses:', err);\n      setError(err.response?.data?.message || 'Fehler beim Erstellen des Arbeitszeugnisses');\n      showMessage('Fehler beim Erstellen des Arbeitszeugnisses', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isHR() && !isAdmin()) {\n    return null;\n  }\n\n  return (\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n      {/* Overlay - nur auf Mobile und Desktop (nicht Large Desktop) */}\n      {(!isLargeScreen || isMobile) && (\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n      )}\n\n      <div className=\"fixed inset-0 flex items-start justify-end p-0 sm:p-0\">\n        <Dialog.Panel\n          className={`\n            ${isMobile ? 'w-full h-full' : isLargeScreen ? 'w-[600px]' : 'w-[600px]'}\n            ${isMobile ? '' : 'top-16'}\n            bg-white dark:bg-gray-800 shadow-xl\n            transform transition-transform duration-350 ease-out\n            ${isMobile ? 'rounded-none' : 'rounded-l-lg'}\n            flex flex-col\n            max-h-[calc(100vh-4rem)]\n            ${isMobile ? '' : 'sidepane-panel-container'}\n          `}\n          style={{\n            animation: isMobile ? 'none' : 'slideIn 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94)'\n          }}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <div className=\"flex items-center space-x-3\">\n              <DocumentTextIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n              <Dialog.Title className=\"text-xl font-semibold dark:text-white\">\n                Arbeitszeugnis erstellen\n              </Dialog.Title>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-6\">\n            <div className=\"mb-4\">\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Fr: <span className=\"font-medium dark:text-white\">{userName}</span>\n              </p>\n            </div>\n\n            {/* Tabs */}\n            <div className=\"border-b border-gray-200 dark:border-gray-700 mb-6\">\n              <nav className=\"-mb-px flex space-x-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => setActiveTab('data')}\n                  className={`${\n                    activeTab === 'data'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                >\n                  Daten\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setActiveTab('text')}\n                  className={`${\n                    activeTab === 'text'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                >\n                  PDF hochladen\n                </button>\n              </nav>\n            </div>\n\n            {error && (\n              <div className=\"mb-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\n                <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n              </div>\n            )}\n\n            {/* Tab Content */}\n            {activeTab === 'data' && (\n              <div className=\"space-y-4\">\n                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 mb-4\">\n                  <h3 className=\"text-sm font-semibold dark:text-white mb-3\">\n                    Automatisch erkannte Daten\n                  </h3>\n                  <div className=\"space-y-2 text-sm\">\n                    {userData && (\n                      <>\n                        <div className=\"flex items-center space-x-2\">\n                          <UserIcon className=\"h-4 w-4 text-gray-400\" />\n                          <span className=\"text-gray-600 dark:text-gray-400\">Name:</span>\n                          <span className=\"dark:text-white\">\n                            {userData.firstName} {userData.lastName}\n                          </span>\n                        </div>\n                        {userData.identificationNumber && (\n                          <div className=\"flex items-center space-x-2\">\n                            <DocumentTextIcon className=\"h-4 w-4 text-gray-400\" />\n                            <span className=\"text-gray-600 dark:text-gray-400\">Cdula:</span>\n                            <span className=\"dark:text-white\">{userData.identificationNumber}</span>\n                          </div>\n                        )}\n                        {userData.contractStartDate && (\n                          <div className=\"flex items-center space-x-2\">\n                            <CalendarIcon className=\"h-4 w-4 text-gray-400\" />\n                            <span className=\"text-gray-600 dark:text-gray-400\">Eintrittsdatum:</span>\n                            <span className=\"dark:text-white\">\n                              {new Date(userData.contractStartDate).toLocaleDateString('de-DE')}\n                            </span>\n                          </div>\n                        )}\n                        {userData.contractEndDate && (\n                          <div className=\"flex items-center space-x-2\">\n                            <CalendarIcon className=\"h-4 w-4 text-gray-400\" />\n                            <span className=\"text-gray-600 dark:text-gray-400\">Austrittsdatum:</span>\n                            <span className=\"dark:text-white\">\n                              {new Date(userData.contractEndDate).toLocaleDateString('de-DE')}\n                            </span>\n                          </div>\n                        )}\n                      </>\n                    )}\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Ausstellungsdatum <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={issueDate}\n                    onChange={(e) => {\n                      const value = e.target.value;\n                      setIssueDate(value);\n                      // Validierung: Datum darf nicht in der Zukunft liegen\n                      if (value && new Date(value) > new Date()) {\n                        setError('Ausstellungsdatum darf nicht in der Zukunft liegen');\n                      } else {\n                        setError(null); // Clear error when valid\n                      }\n                    }}\n                    max={new Date().toISOString().split('T')[0]}\n                    className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                      error && issueDate && new Date(issueDate) > new Date()\n                        ? 'border-red-500 dark:border-red-500' \n                        : error && !issueDate\n                        ? 'border-red-500 dark:border-red-500'\n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                    required\n                    aria-invalid={(!issueDate || (issueDate && new Date(issueDate) > new Date())) ? true : undefined}\n                    aria-describedby={(!issueDate || (issueDate && new Date(issueDate) > new Date())) ? \"issueDate-error\" : undefined}\n                  />\n                  {error && (!issueDate || (issueDate && new Date(issueDate) > new Date())) && (\n                    <p id=\"issueDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                      {error}\n                    </p>\n                  )}\n                  {!error && (\n                    <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                      Das Datum darf nicht in der Zukunft liegen\n                    </p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Zertifikat-Typ <span className=\"text-red-500\">*</span>\n                  </label>\n                  <select\n                    value={certificateType}\n                    onChange={(e) => setCertificateType(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    required\n                  >\n                    <option value=\"employment\">Arbeitszeugnis</option>\n                    <option value=\"salary\">Gehaltsbescheinigung</option>\n                    <option value=\"work_experience\">Arbeitsbescheinigung</option>\n                  </select>\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'text' && (\n              <div className=\"space-y-4\">\n                {/* Template-Auswahl */}\n                {availableTemplates.length > 0 && (\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Template verwenden\n                    </label>\n                    <div className=\"flex items-center space-x-3 mb-4\">\n                      <input\n                        type=\"checkbox\"\n                        checked={useTemplate}\n                        onChange={(e) => {\n                          setUseTemplate(e.target.checked);\n                          if (e.target.checked && pdfFile) {\n                            // Wenn Template aktiviert wird, entferne PDF\n                            setPdfFile(null);\n                            if (pdfPreviewUrl) {\n                              URL.revokeObjectURL(pdfPreviewUrl);\n                              setPdfPreviewUrl(null);\n                            }\n                          }\n                        }}\n                        className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                      />\n                      <label className=\"text-sm text-gray-700 dark:text-gray-300\">\n                        Template fr automatische PDF-Generierung verwenden\n                      </label>\n                    </div>\n                    {useTemplate && (\n                      <select\n                        value={selectedTemplate || ''}\n                        onChange={(e) => setSelectedTemplate(e.target.value)}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white mb-4\"\n                      >\n                        {availableTemplates.map((template) => (\n                          <option key={template.type} value={template.type}>\n                            Arbeitszeugnis (Version {template.version})\n                          </option>\n                        ))}\n                      </select>\n                    )}\n                  </div>\n                )}\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                    {useTemplate ? 'ODER PDF-Datei hochladen' : 'PDF-Datei hochladen'} {!useTemplate && <span className=\"text-red-500\">*</span>}\n                  </label>\n                  <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center\">\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      accept=\".pdf\"\n                      onChange={handleFileSelect}\n                      className=\"hidden\"\n                    />\n                    {!pdfFile ? (\n                      <div>\n                        <DocumentTextIcon className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n                        <button\n                          type=\"button\"\n                          onClick={() => fileInputRef.current?.click()}\n                          className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium\"\n                        >\n                          PDF-Datei auswhlen\n                        </button>\n                        <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n                          oder Datei hierher ziehen\n                        </p>\n                        <p className=\"mt-1 text-xs text-gray-400 dark:text-gray-500\">\n                          Max. 10MB\n                        </p>\n                      </div>\n                    ) : (\n                      <div>\n                        <DocumentTextIcon className=\"mx-auto h-12 w-12 text-green-500 mb-4\" />\n                        <p className=\"text-sm font-medium dark:text-white\">{pdfFile.name}</p>\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                          {(pdfFile.size / 1024 / 1024).toFixed(2)} MB\n                        </p>\n                        <button\n                          type=\"button\"\n                          onClick={() => {\n                            setPdfFile(null);\n                            if (pdfPreviewUrl) {\n                              URL.revokeObjectURL(pdfPreviewUrl);\n                              setPdfPreviewUrl(null);\n                            }\n                            if (fileInputRef.current) {\n                              fileInputRef.current.value = '';\n                            }\n                          }}\n                          className=\"mt-2 text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300\"\n                        >\n                          Datei entfernen\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* PDF-Vorschau */}\n                {pdfPreviewUrl && (\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      PDF-Vorschau\n                    </label>\n                    <div className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n                      <iframe \n                        src={`${pdfPreviewUrl}#view=FitH`}\n                        className=\"w-full rounded border dark:border-gray-600\"\n                        style={{ height: '400px' }}\n                        title=\"PDF-Vorschau\"\n                      />\n                    </div>\n                  </div>\n                )}\n\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n              title=\"Abbrechen\"\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleSubmit}\n              disabled={loading || (!pdfFile && !useTemplate)}\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n              title={loading ? 'Wird erstellt...' : 'Erstellen'}\n            >\n              {loading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <CheckIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n        </Dialog.Panel>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default CertificateCreationModal;\n\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, DocumentTextIcon, CalendarIcon, UserIcon, CurrencyDollarIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface ContractCreationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onContractCreated: () => void;\n  userId: number;\n  userName: string;\n}\n\ninterface UserData {\n  firstName: string;\n  lastName: string;\n  identificationNumber: string | null;\n  contractStartDate: string | null;\n  contractEndDate: string | null;\n  contractType: string | null;\n  salary: number | null;\n  position: string | null;\n}\n\nconst ContractCreationModal: React.FC<ContractCreationModalProps> = ({\n  isOpen,\n  onClose,\n  onContractCreated,\n  userId,\n  userName\n}) => {\n  const { t } = useTranslation();\n  const { user: currentUser } = useAuth();\n  const { isHR, isAdmin, loading: permissionsLoading } = usePermissions();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  \n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [activeTab, setActiveTab] = useState<'data' | 'text'>('data');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Form-Daten\n  const [userData, setUserData] = useState<UserData | null>(null);\n  const [contractType, setContractType] = useState('employment');\n  const [startDate, setStartDate] = useState(new Date().toISOString().split('T')[0]);\n  const [endDate, setEndDate] = useState<string>('');\n  const [salary, setSalary] = useState<string>('');\n  const [workingHours, setWorkingHours] = useState<string>('');\n  const [position, setPosition] = useState<string>('');\n  const [pdfFile, setPdfFile] = useState<File | null>(null);\n  const [pdfPreviewUrl, setPdfPreviewUrl] = useState<string | null>(null);\n  const [availableTemplates, setAvailableTemplates] = useState<Array<{type: string; version: string; path: string}>>([]);\n  const [selectedTemplate, setSelectedTemplate] = useState<string | null>(null);\n  const [useTemplate, setUseTemplate] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Prfe Berechtigung (nur wenn Berechtigungen geladen sind)\n  useEffect(() => {\n    if (permissionsLoading) {\n      return; // Warte bis Berechtigungen geladen sind\n    }\n    \n    if (!isHR() && !isAdmin()) {\n      showMessage('Nur HR oder Admin knnen Arbeitsvertrge erstellen', 'error');\n      onClose();\n    }\n  }, [isHR, isAdmin, permissionsLoading, onClose, showMessage]);\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n      fetchUserData();\n      fetchTemplates();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  const fetchTemplates = async () => {\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.DOCUMENT_TEMPLATES);\n      const documentTemplates = response.data.documentTemplates || {};\n      const templates: Array<{type: string; version: string; path: string}> = [];\n      \n      if (documentTemplates.employmentContract) {\n        templates.push({\n          type: 'employmentContract',\n          version: documentTemplates.employmentContract.version,\n          path: documentTemplates.employmentContract.path\n        });\n      }\n      \n      setAvailableTemplates(templates);\n      if (templates.length > 0) {\n        setSelectedTemplate(templates[0].type);\n        setUseTemplate(true);\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Laden der Templates:', err);\n      // Kein Fehler anzeigen, Templates sind optional\n    }\n  };\n\n  const fetchUserData = async () => {\n    try {\n      const [userResponse, lifecycleResponse] = await Promise.all([\n        axiosInstance.get(API_ENDPOINTS.USERS.BY_ID(userId)),\n        axiosInstance.get(API_ENDPOINTS.LIFECYCLE.BY_USER(userId))\n      ]);\n\n      const user = userResponse.data;\n      const lifecycle = lifecycleResponse.data.lifecycle;\n\n      const data: UserData = {\n        firstName: user.firstName || '',\n        lastName: user.lastName || '',\n        identificationNumber: user.identificationNumber || null,\n        contractStartDate: lifecycle?.contractStartDate || null,\n        contractEndDate: lifecycle?.contractEndDate || null,\n        contractType: lifecycle?.contractType || null,\n        salary: user.salary || null,\n        position: null\n      };\n\n      setUserData(data);\n      \n      // Setze Standard-Werte\n      if (data.contractStartDate) {\n        setStartDate(new Date(data.contractStartDate).toISOString().split('T')[0]);\n      }\n      if (data.contractEndDate) {\n        setEndDate(new Date(data.contractEndDate).toISOString().split('T')[0]);\n      }\n      if (data.salary) {\n        setSalary(data.salary.toString());\n      }\n      if (data.contractType) {\n        setContractType(data.contractType);\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Laden der User-Daten:', err);\n      setError('Fehler beim Laden der Daten');\n    }\n  };\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        showMessage('Nur PDF-Dateien sind erlaubt', 'error');\n        return;\n      }\n      if (file.size > 10 * 1024 * 1024) { // 10MB\n        showMessage('Datei ist zu gro (max. 10MB)', 'error');\n        return;\n      }\n      setPdfFile(file);\n      setUseTemplate(false); // Deaktiviere Template wenn PDF hochgeladen wird\n      // Erstelle Preview-URL\n      const url = URL.createObjectURL(file);\n      setPdfPreviewUrl(url);\n    }\n  };\n\n  // Cleanup: Revoke Object URL beim Unmount oder wenn Datei entfernt wird\n  useEffect(() => {\n    return () => {\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n      }\n    };\n  }, [pdfPreviewUrl]);\n\n  const validateForm = (): string | null => {\n    if (!useTemplate && !pdfFile) {\n      return 'Bitte whlen Sie ein Template oder laden Sie eine PDF-Datei hoch';\n    }\n    if (!startDate) {\n      return 'Bitte geben Sie ein Startdatum an';\n    }\n    const startDateObj = new Date(startDate);\n    if (isNaN(startDateObj.getTime())) {\n      return 'Ungltiges Startdatum';\n    }\n    if (endDate) {\n      const endDateObj = new Date(endDate);\n      if (isNaN(endDateObj.getTime())) {\n        return 'Ungltiges Enddatum';\n      }\n      if (endDateObj < startDateObj) {\n        return 'Enddatum muss nach dem Startdatum liegen';\n      }\n    }\n    if (salary && parseFloat(salary) < 0) {\n      return 'Gehalt darf nicht negativ sein';\n    }\n    if (workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168)) {\n      return 'Arbeitsstunden mssen zwischen 0 und 168 liegen';\n    }\n    return null;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Client-seitige Validierung\n    const validationError = validateForm();\n    if (validationError) {\n      setError(validationError);\n      showMessage(validationError, 'error');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      let pdfPath: string | undefined = undefined;\n      let templateUsed: string | null = null;\n      let templateVersion: string | null = null;\n\n      // Wenn Template verwendet werden soll und kein PDF hochgeladen wurde\n      if (useTemplate && selectedTemplate && !pdfFile) {\n        const template = availableTemplates.find(t => t.type === selectedTemplate);\n        if (template) {\n          templateUsed = template.type;\n          templateVersion = template.version;\n          // PDF wird vom Backend generiert\n        }\n      } else if (pdfFile) {\n        // PDF wurde hochgeladen - verwende dieses\n        pdfPath = `temp-${Date.now()}-${pdfFile.name}`; // Temporr\n      } else {\n        showMessage('Bitte whlen Sie ein Template oder laden Sie eine PDF-Datei hoch', 'error');\n        setLoading(false);\n        return;\n      }\n\n      const contractData = {\n        contractType,\n        startDate: new Date(startDate),\n        endDate: endDate ? new Date(endDate) : null,\n        salary: salary ? parseFloat(salary) : null,\n        workingHours: workingHours ? parseFloat(workingHours) : null,\n        position: position || null,\n        pdfPath,\n        templateUsed,\n        templateVersion\n      };\n\n      await axiosInstance.post(\n        API_ENDPOINTS.LIFECYCLE.CONTRACTS(userId),\n        contractData\n      );\n\n      showMessage('Arbeitsvertrag erfolgreich erstellt', 'success');\n      onContractCreated();\n      onClose();\n      \n      // Reset form\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n        setPdfPreviewUrl(null);\n      }\n      setPdfFile(null);\n      setStartDate(new Date().toISOString().split('T')[0]);\n      setEndDate('');\n      setSalary('');\n      setWorkingHours('');\n      setPosition('');\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Erstellen des Arbeitsvertrags:', err);\n      setError(err.response?.data?.message || 'Fehler beim Erstellen des Arbeitsvertrags');\n      showMessage('Fehler beim Erstellen des Arbeitsvertrags', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isHR() && !isAdmin()) {\n    return null;\n  }\n\n  return (\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n      {/* Overlay */}\n      {(!isLargeScreen || isMobile) && (\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n      )}\n\n      <div className=\"fixed inset-0 flex items-start justify-end p-0 sm:p-0\">\n        <Dialog.Panel\n          className={`\n            ${isMobile ? 'w-full h-full' : isLargeScreen ? 'w-[600px]' : 'w-[600px]'}\n            ${isMobile ? '' : 'top-16'}\n            bg-white dark:bg-gray-800 shadow-xl\n            transform transition-transform duration-350 ease-out\n            ${isMobile ? 'rounded-none' : 'rounded-l-lg'}\n            flex flex-col\n            max-h-[calc(100vh-4rem)]\n            ${isMobile ? '' : 'sidepane-panel-container'}\n          `}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <div className=\"flex items-center space-x-3\">\n              <DocumentTextIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n              <Dialog.Title className=\"text-xl font-semibold dark:text-white\">\n                Arbeitsvertrag erstellen\n              </Dialog.Title>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-6\">\n            <div className=\"mb-4\">\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Fr: <span className=\"font-medium dark:text-white\">{userName}</span>\n              </p>\n            </div>\n\n            {/* Tabs */}\n            <div className=\"border-b border-gray-200 dark:border-gray-700 mb-6\">\n              <nav className=\"-mb-px flex space-x-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => setActiveTab('data')}\n                  className={`${\n                    activeTab === 'data'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                >\n                  Vertragsdaten\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setActiveTab('text')}\n                  className={`${\n                    activeTab === 'text'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                >\n                  PDF hochladen\n                </button>\n              </nav>\n            </div>\n\n            {error && (\n              <div className=\"mb-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\n                <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n              </div>\n            )}\n\n            {/* Tab Content */}\n            {activeTab === 'data' && (\n              <div className=\"space-y-4\">\n                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 mb-4\">\n                  <h3 className=\"text-sm font-semibold dark:text-white mb-3\">\n                    Automatisch erkannte Daten\n                  </h3>\n                  <div className=\"space-y-2 text-sm\">\n                    {userData && (\n                      <>\n                        <div className=\"flex items-center space-x-2\">\n                          <UserIcon className=\"h-4 w-4 text-gray-400\" />\n                          <span className=\"text-gray-600 dark:text-gray-400\">Name:</span>\n                          <span className=\"dark:text-white\">\n                            {userData.firstName} {userData.lastName}\n                          </span>\n                        </div>\n                        {userData.identificationNumber && (\n                          <div className=\"flex items-center space-x-2\">\n                            <DocumentTextIcon className=\"h-4 w-4 text-gray-400\" />\n                            <span className=\"text-gray-600 dark:text-gray-400\">Cdula:</span>\n                            <span className=\"dark:text-white\">{userData.identificationNumber}</span>\n                          </div>\n                        )}\n                      </>\n                    )}\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Vertragstyp <span className=\"text-red-500\">*</span>\n                  </label>\n                  <select\n                    value={contractType}\n                    onChange={(e) => setContractType(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  >\n                    <option value=\"employment\">Arbeitsvertrag</option>\n                    <option value=\"amendment\">Vertragsnderung</option>\n                    <option value=\"extension\">Vertragsverlngerung</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Startdatum <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={startDate}\n                    onChange={(e) => {\n                      setStartDate(e.target.value);\n                      setError(null); // Clear error when user starts typing\n                    }}\n                    className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                      error && !startDate \n                        ? 'border-red-500 dark:border-red-500' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                    required\n                    aria-invalid={!startDate}\n                    aria-describedby={!startDate ? \"startDate-error\" : undefined}\n                  />\n                  {error && !startDate && (\n                    <p id=\"startDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                      {error}\n                    </p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Enddatum (optional)\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={endDate}\n                    onChange={(e) => {\n                      setEndDate(e.target.value);\n                      // Wenn Enddatum gesetzt wird, prfe ob es nach Startdatum liegt\n                      if (e.target.value && startDate && new Date(e.target.value) < new Date(startDate)) {\n                        setError('Enddatum muss nach dem Startdatum liegen');\n                      } else {\n                        setError(null); // Clear error when valid\n                      }\n                    }}\n                    min={startDate || undefined}\n                    className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                      error && endDate && startDate && new Date(endDate) < new Date(startDate)\n                        ? 'border-red-500 dark:border-red-500' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                    aria-invalid={endDate && startDate && new Date(endDate) < new Date(startDate) ? true : undefined}\n                    aria-describedby={endDate && startDate && new Date(endDate) < new Date(startDate) ? \"endDate-error\" : undefined}\n                  />\n                  {error && endDate && startDate && new Date(endDate) < new Date(startDate) && (\n                    <p id=\"endDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                      {error}\n                    </p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Position\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={position}\n                    onChange={(e) => setPosition(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    placeholder=\"z.B. Frontend-Entwickler\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Gehalt (optional)\n                  </label>\n                  <div className=\"relative\">\n                    <CurrencyDollarIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                    <input\n                      type=\"number\"\n                      value={salary}\n                      onChange={(e) => {\n                        const value = e.target.value;\n                        setSalary(value);\n                        // Validierung: Gehalt darf nicht negativ sein\n                        if (value && parseFloat(value) < 0) {\n                          setError('Gehalt darf nicht negativ sein');\n                        } else {\n                          setError(null); // Clear error when valid\n                        }\n                      }}\n                      className={`w-full pl-10 pr-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                        error && salary && parseFloat(salary) < 0\n                          ? 'border-red-500 dark:border-red-500' \n                          : 'border-gray-300 dark:border-gray-600'\n                      }`}\n                      placeholder=\"0.00\"\n                      step=\"0.01\"\n                      min=\"0\"\n                      aria-invalid={salary && parseFloat(salary) < 0 ? true : undefined}\n                      aria-describedby={salary && parseFloat(salary) < 0 ? \"salary-error\" : undefined}\n                    />\n                  </div>\n                  {error && salary && parseFloat(salary) < 0 && (\n                    <p id=\"salary-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                      {error}\n                    </p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Arbeitsstunden/Woche (optional)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={workingHours}\n                    onChange={(e) => {\n                      const value = e.target.value;\n                      setWorkingHours(value);\n                      // Validierung: Arbeitsstunden mssen zwischen 0 und 168 liegen\n                      if (value && (parseFloat(value) < 0 || parseFloat(value) > 168)) {\n                        setError('Arbeitsstunden mssen zwischen 0 und 168 liegen');\n                      } else {\n                        setError(null); // Clear error when valid\n                      }\n                    }}\n                    className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                      error && workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168)\n                        ? 'border-red-500 dark:border-red-500' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                    placeholder=\"40\"\n                    step=\"0.1\"\n                    min=\"0\"\n                    max=\"168\"\n                    aria-invalid={workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) ? true : undefined}\n                    aria-describedby={workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) ? \"workingHours-error\" : undefined}\n                  />\n                  {error && workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) && (\n                    <p id=\"workingHours-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                      {error}\n                    </p>\n                  )}\n                  <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                    Maximal 168 Stunden pro Woche (24h  7 Tage)\n                  </p>\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'text' && (\n              <div className=\"space-y-4\">\n                {/* Template-Auswahl */}\n                {availableTemplates.length > 0 && (\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Template verwenden\n                    </label>\n                    <div className=\"flex items-center space-x-3 mb-4\">\n                      <input\n                        type=\"checkbox\"\n                        checked={useTemplate}\n                        onChange={(e) => {\n                          setUseTemplate(e.target.checked);\n                          if (e.target.checked && pdfFile) {\n                            // Wenn Template aktiviert wird, entferne PDF\n                            setPdfFile(null);\n                            if (pdfPreviewUrl) {\n                              URL.revokeObjectURL(pdfPreviewUrl);\n                              setPdfPreviewUrl(null);\n                            }\n                          }\n                        }}\n                        className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                      />\n                      <label className=\"text-sm text-gray-700 dark:text-gray-300\">\n                        Template fr automatische PDF-Generierung verwenden\n                      </label>\n                    </div>\n                    {useTemplate && (\n                      <select\n                        value={selectedTemplate || ''}\n                        onChange={(e) => setSelectedTemplate(e.target.value)}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white mb-4\"\n                      >\n                        {availableTemplates.map((template) => (\n                          <option key={template.type} value={template.type}>\n                            Arbeitsvertrag (Version {template.version})\n                          </option>\n                        ))}\n                      </select>\n                    )}\n                  </div>\n                )}\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                    {useTemplate ? 'ODER PDF-Datei hochladen' : 'PDF-Datei hochladen'} {!useTemplate && <span className=\"text-red-500\">*</span>}\n                  </label>\n                  <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center\">\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      accept=\".pdf\"\n                      onChange={handleFileSelect}\n                      className=\"hidden\"\n                    />\n                    {!pdfFile ? (\n                      <div>\n                        <DocumentTextIcon className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n                        <button\n                          type=\"button\"\n                          onClick={() => fileInputRef.current?.click()}\n                          className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium\"\n                        >\n                          PDF-Datei auswhlen\n                        </button>\n                        <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n                          oder Datei hierher ziehen\n                        </p>\n                        <p className=\"mt-1 text-xs text-gray-400 dark:text-gray-500\">\n                          Max. 10MB\n                        </p>\n                      </div>\n                    ) : (\n                      <div>\n                        <DocumentTextIcon className=\"mx-auto h-12 w-12 text-green-500 mb-4\" />\n                        <p className=\"text-sm font-medium dark:text-white\">{pdfFile.name}</p>\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                          {(pdfFile.size / 1024 / 1024).toFixed(2)} MB\n                        </p>\n                        <button\n                          type=\"button\"\n                          onClick={() => {\n                            setPdfFile(null);\n                            if (pdfPreviewUrl) {\n                              URL.revokeObjectURL(pdfPreviewUrl);\n                              setPdfPreviewUrl(null);\n                            }\n                            if (fileInputRef.current) {\n                              fileInputRef.current.value = '';\n                            }\n                          }}\n                          className=\"mt-2 text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300\"\n                        >\n                          Datei entfernen\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* PDF-Vorschau */}\n                {pdfPreviewUrl && (\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      PDF-Vorschau\n                    </label>\n                    <div className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n                      <iframe \n                        src={`${pdfPreviewUrl}#view=FitH`}\n                        className=\"w-full rounded border dark:border-gray-600\"\n                        style={{ height: '400px' }}\n                        title=\"PDF-Vorschau\"\n                      />\n                    </div>\n                  </div>\n                )}\n\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n              title=\"Abbrechen\"\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleSubmit}\n              disabled={loading || (!pdfFile && !useTemplate) || !startDate}\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n              title={loading ? 'Wird erstellt...' : 'Erstellen'}\n            >\n              {loading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <CheckIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n        </Dialog.Panel>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default ContractCreationModal;\n\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, DocumentTextIcon, CalendarIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface Certificate {\n  id: number;\n  certificateType: string;\n  issueDate: string;\n  templateUsed: string | null;\n  templateVersion: string | null;\n  isLatest: boolean;\n}\n\ninterface CertificateEditModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onCertificateUpdated: () => void;\n  userId: number;\n  certificate: Certificate;\n}\n\nconst CertificateEditModal: React.FC<CertificateEditModalProps> = ({\n  isOpen,\n  onClose,\n  onCertificateUpdated,\n  userId,\n  certificate\n}) => {\n  const { t } = useTranslation();\n  const { isHR, isAdmin, loading: permissionsLoading } = usePermissions();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  \n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Form-Daten\n  const [issueDate, setIssueDate] = useState(\n    certificate.issueDate ? new Date(certificate.issueDate).toISOString().split('T')[0] : new Date().toISOString().split('T')[0]\n  );\n  const [certificateType, setCertificateType] = useState(certificate.certificateType || 'employment');\n  const [pdfFile, setPdfFile] = useState<File | null>(null);\n  const [pdfPreviewUrl, setPdfPreviewUrl] = useState<string | null>(null);\n  const [existingPdfUrl, setExistingPdfUrl] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Prfe Berechtigung (nur wenn Berechtigungen geladen sind)\n  useEffect(() => {\n    if (permissionsLoading) {\n      return; // Warte bis Berechtigungen geladen sind\n    }\n    \n    if (!isHR() && !isAdmin()) {\n      showMessage('Nur HR oder Admin knnen Arbeitszeugnisse bearbeiten', 'error');\n      onClose();\n    }\n  }, [isHR, isAdmin, permissionsLoading, onClose, showMessage]);\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n      // Lade bestehende PDF-URL wenn vorhanden\n      if (certificate.id) {\n        setExistingPdfUrl(API_ENDPOINTS.LIFECYCLE.CERTIFICATE_DOWNLOAD(userId, certificate.id));\n      }\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane, certificate.id, userId]);\n\n  // Cleanup: Revoke Object URL beim Unmount oder wenn Datei entfernt wird\n  useEffect(() => {\n    return () => {\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n      }\n    };\n  }, [pdfPreviewUrl]);\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        showMessage('Nur PDF-Dateien sind erlaubt', 'error');\n        return;\n      }\n      if (file.size > 10 * 1024 * 1024) {\n        showMessage('Datei ist zu gro (max. 10MB)', 'error');\n        return;\n      }\n      setPdfFile(file);\n      // Erstelle Preview-URL fr neue Datei\n      const url = URL.createObjectURL(file);\n      setPdfPreviewUrl(url);\n      setExistingPdfUrl(null); // Verstecke bestehende PDF wenn neue hochgeladen wird\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const updateData: any = {\n        issueDate: new Date(issueDate),\n        certificateType\n      };\n\n      // Nur pdfPath aktualisieren, wenn neue Datei hochgeladen wurde\n      if (pdfFile) {\n        updateData.pdfPath = `temp-${Date.now()}-${pdfFile.name}`;\n        updateData.templateVersion = certificate.templateVersion || '1.0';\n      }\n\n      await axiosInstance.put(\n        API_ENDPOINTS.LIFECYCLE.CERTIFICATE(userId, certificate.id),\n        updateData\n      );\n\n      showMessage('Arbeitszeugnis erfolgreich aktualisiert', 'success');\n      onCertificateUpdated();\n      onClose();\n      \n      // Reset form\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n        setPdfPreviewUrl(null);\n      }\n      setPdfFile(null);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Aktualisieren des Arbeitszeugnisses:', err);\n      setError(err.response?.data?.message || 'Fehler beim Aktualisieren des Arbeitszeugnisses');\n      showMessage('Fehler beim Aktualisieren des Arbeitszeugnisses', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isHR() && !isAdmin()) {\n    return null;\n  }\n\n  return (\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n      {(!isLargeScreen || isMobile) && (\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n      )}\n\n      <div className=\"fixed inset-0 flex items-start justify-end p-0 sm:p-0\">\n        <Dialog.Panel\n          className={`\n            ${isMobile ? 'w-full h-full' : isLargeScreen ? 'w-[600px]' : 'w-[600px]'}\n            ${isMobile ? '' : 'top-16'}\n            bg-white dark:bg-gray-800 shadow-xl\n            transform transition-transform duration-350 ease-out\n            ${isMobile ? 'rounded-none' : 'rounded-l-lg'}\n            flex flex-col\n            max-h-[calc(100vh-4rem)]\n            ${isMobile ? '' : 'sidepane-panel-container'}\n          `}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <div className=\"flex items-center space-x-3\">\n              <DocumentTextIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n              <Dialog.Title className=\"text-xl font-semibold dark:text-white\">\n                Arbeitszeugnis bearbeiten\n              </Dialog.Title>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-6\">\n            {error && (\n              <div className=\"mb-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\n                <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n              </div>\n            )}\n\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Ausstellungsdatum\n                </label>\n                <input\n                  type=\"date\"\n                  value={issueDate}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setIssueDate(value);\n                    // Validierung: Datum darf nicht in der Zukunft liegen\n                    if (value && new Date(value) > new Date()) {\n                      setError('Ausstellungsdatum darf nicht in der Zukunft liegen');\n                    } else {\n                      setError(null); // Clear error when valid\n                    }\n                  }}\n                  max={new Date().toISOString().split('T')[0]}\n                  className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                    error && issueDate && new Date(issueDate) > new Date()\n                      ? 'border-red-500 dark:border-red-500' \n                      : 'border-gray-300 dark:border-gray-600'\n                  }`}\n                  aria-invalid={issueDate && new Date(issueDate) > new Date() ? true : undefined}\n                  aria-describedby={issueDate && new Date(issueDate) > new Date() ? \"issueDate-error\" : undefined}\n                />\n                {error && issueDate && new Date(issueDate) > new Date() && (\n                  <p id=\"issueDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                    {error}\n                  </p>\n                )}\n                {!error && (\n                  <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                    Das Datum darf nicht in der Zukunft liegen\n                  </p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Zertifikat-Typ\n                </label>\n                <select\n                  value={certificateType}\n                  onChange={(e) => setCertificateType(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                >\n                  <option value=\"employment\">Arbeitszeugnis</option>\n                  <option value=\"salary\">Gehaltsbescheinigung</option>\n                  <option value=\"work_experience\">Arbeitsbescheinigung</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  PDF-Datei aktualisieren (optional)\n                </label>\n                <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center\">\n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\".pdf\"\n                    onChange={handleFileSelect}\n                    className=\"hidden\"\n                  />\n                  {!pdfFile ? (\n                    <div>\n                      <DocumentTextIcon className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n                      <button\n                        type=\"button\"\n                        onClick={() => fileInputRef.current?.click()}\n                        className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium\"\n                      >\n                        Neue PDF-Datei auswhlen\n                      </button>\n                      <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n                        oder Datei hierher ziehen\n                      </p>\n                      <p className=\"mt-1 text-xs text-gray-400 dark:text-gray-500\">\n                        Max. 10MB\n                      </p>\n                    </div>\n                  ) : (\n                    <div>\n                      <DocumentTextIcon className=\"mx-auto h-12 w-12 text-green-500 mb-4\" />\n                      <p className=\"text-sm font-medium dark:text-white\">{pdfFile.name}</p>\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                        {(pdfFile.size / 1024 / 1024).toFixed(2)} MB\n                      </p>\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          setPdfFile(null);\n                          if (pdfPreviewUrl) {\n                            URL.revokeObjectURL(pdfPreviewUrl);\n                            setPdfPreviewUrl(null);\n                          }\n                          setExistingPdfUrl(API_ENDPOINTS.LIFECYCLE.CERTIFICATE_DOWNLOAD(userId, certificate.id));\n                          if (fileInputRef.current) {\n                            fileInputRef.current.value = '';\n                          }\n                        }}\n                        className=\"mt-2 text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300\"\n                      >\n                        Datei entfernen\n                      </button>\n                    </div>\n                  )}\n                </div>\n\n                {/* PDF-Vorschau */}\n                {(pdfPreviewUrl || existingPdfUrl) && (\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      PDF-Vorschau\n                    </label>\n                    <div className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n                      <iframe \n                        src={`${pdfPreviewUrl || existingPdfUrl}${pdfPreviewUrl ? '#view=FitH' : '?preview=true#view=FitH'}`}\n                        className=\"w-full rounded border dark:border-gray-600\"\n                        style={{ height: '400px' }}\n                        title=\"PDF-Vorschau\"\n                      />\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4\">\n                <p className=\"text-sm text-yellow-700 dark:text-yellow-300\">\n                  <strong>Hinweis:</strong> Wenn Sie eine neue PDF-Datei hochladen, wird die alte Version ersetzt.\n                  Eine neue Version wird erstellt (isLatest = true).\n                </p>\n              </div>\n            </form>\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n              title=\"Abbrechen\"\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleSubmit}\n              disabled={loading}\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n              title={loading ? 'Wird aktualisiert...' : 'Aktualisieren'}\n            >\n              {loading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <CheckIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n        </Dialog.Panel>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default CertificateEditModal;\n\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, DocumentTextIcon, CalendarIcon, CurrencyDollarIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface Contract {\n  id: number;\n  contractType: string;\n  startDate: string;\n  endDate: string | null;\n  salary: number | null;\n  workingHours: number | null;\n  position: string | null;\n  templateUsed: string | null;\n  templateVersion: string | null;\n  isLatest: boolean;\n}\n\ninterface ContractEditModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onContractUpdated: () => void;\n  userId: number;\n  contract: Contract;\n}\n\nconst ContractEditModal: React.FC<ContractEditModalProps> = ({\n  isOpen,\n  onClose,\n  onContractUpdated,\n  userId,\n  contract\n}) => {\n  const { t } = useTranslation();\n  const { isHR, isAdmin, loading: permissionsLoading } = usePermissions();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  \n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Form-Daten\n  const [contractType, setContractType] = useState(contract.contractType || 'employment');\n  const [startDate, setStartDate] = useState(\n    contract.startDate ? new Date(contract.startDate).toISOString().split('T')[0] : new Date().toISOString().split('T')[0]\n  );\n  const [endDate, setEndDate] = useState(\n    contract.endDate ? new Date(contract.endDate).toISOString().split('T')[0] : ''\n  );\n  const [salary, setSalary] = useState(contract.salary ? contract.salary.toString() : '');\n  const [workingHours, setWorkingHours] = useState(contract.workingHours ? contract.workingHours.toString() : '');\n  const [position, setPosition] = useState(contract.position || '');\n  const [pdfFile, setPdfFile] = useState<File | null>(null);\n  const [pdfPreviewUrl, setPdfPreviewUrl] = useState<string | null>(null);\n  const [existingPdfUrl, setExistingPdfUrl] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Prfe Berechtigung (nur wenn Berechtigungen geladen sind)\n  useEffect(() => {\n    if (permissionsLoading) {\n      return; // Warte bis Berechtigungen geladen sind\n    }\n    \n    if (!isHR() && !isAdmin()) {\n      showMessage('Nur HR oder Admin knnen Arbeitsvertrge bearbeiten', 'error');\n      onClose();\n    }\n  }, [isHR, isAdmin, permissionsLoading, onClose, showMessage]);\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n      // Lade bestehende PDF-URL wenn vorhanden\n      if (contract.id) {\n        setExistingPdfUrl(API_ENDPOINTS.LIFECYCLE.CONTRACT_DOWNLOAD(userId, contract.id));\n      }\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane, contract.id, userId]);\n\n  // Cleanup: Revoke Object URL beim Unmount oder wenn Datei entfernt wird\n  useEffect(() => {\n    return () => {\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n      }\n    };\n  }, [pdfPreviewUrl]);\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        showMessage('Nur PDF-Dateien sind erlaubt', 'error');\n        return;\n      }\n      if (file.size > 10 * 1024 * 1024) {\n        showMessage('Datei ist zu gro (max. 10MB)', 'error');\n        return;\n      }\n      setPdfFile(file);\n      // Erstelle Preview-URL fr neue Datei\n      const url = URL.createObjectURL(file);\n      setPdfPreviewUrl(url);\n      setExistingPdfUrl(null); // Verstecke bestehende PDF wenn neue hochgeladen wird\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!startDate) {\n      showMessage('Bitte geben Sie ein Startdatum an', 'error');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const updateData: any = {\n        contractType,\n        startDate: new Date(startDate),\n        endDate: endDate ? new Date(endDate) : null,\n        salary: salary ? parseFloat(salary) : null,\n        workingHours: workingHours ? parseFloat(workingHours) : null,\n        position: position || null\n      };\n\n      // Nur pdfPath aktualisieren, wenn neue Datei hochgeladen wurde\n      if (pdfFile) {\n        updateData.pdfPath = `temp-${Date.now()}-${pdfFile.name}`;\n        updateData.templateVersion = contract.templateVersion || '1.0';\n      }\n\n      await axiosInstance.put(\n        API_ENDPOINTS.LIFECYCLE.CONTRACT(userId, contract.id),\n        updateData\n      );\n\n      showMessage('Arbeitsvertrag erfolgreich aktualisiert', 'success');\n      onContractUpdated();\n      onClose();\n      \n      // Reset form\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n        setPdfPreviewUrl(null);\n      }\n      setPdfFile(null);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Aktualisieren des Arbeitsvertrags:', err);\n      setError(err.response?.data?.message || 'Fehler beim Aktualisieren des Arbeitsvertrags');\n      showMessage('Fehler beim Aktualisieren des Arbeitsvertrags', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isHR() && !isAdmin()) {\n    return null;\n  }\n\n  return (\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n      {(!isLargeScreen || isMobile) && (\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n      )}\n\n      <div className=\"fixed inset-0 flex items-start justify-end p-0 sm:p-0\">\n        <Dialog.Panel\n          className={`\n            ${isMobile ? 'w-full h-full' : isLargeScreen ? 'w-[600px]' : 'w-[600px]'}\n            ${isMobile ? '' : 'top-16'}\n            bg-white dark:bg-gray-800 shadow-xl\n            transform transition-transform duration-350 ease-out\n            ${isMobile ? 'rounded-none' : 'rounded-l-lg'}\n            flex flex-col\n            max-h-[calc(100vh-4rem)]\n            ${isMobile ? '' : 'sidepane-panel-container'}\n          `}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <div className=\"flex items-center space-x-3\">\n              <DocumentTextIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n              <Dialog.Title className=\"text-xl font-semibold dark:text-white\">\n                Arbeitsvertrag bearbeiten\n              </Dialog.Title>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-6\">\n            {error && (\n              <div className=\"mb-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\n                <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n              </div>\n            )}\n\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Vertragstyp <span className=\"text-red-500\">*</span>\n                </label>\n                <select\n                  value={contractType}\n                  onChange={(e) => setContractType(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                >\n                  <option value=\"employment\">Arbeitsvertrag</option>\n                  <option value=\"amendment\">Vertragsnderung</option>\n                  <option value=\"extension\">Vertragsverlngerung</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Startdatum <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"date\"\n                  value={startDate}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setStartDate(value);\n                    // Wenn Enddatum gesetzt ist, prfe ob es nach Startdatum liegt\n                    if (endDate && value && new Date(endDate) < new Date(value)) {\n                      setError('Enddatum muss nach dem Startdatum liegen');\n                    } else {\n                      setError(null); // Clear error when valid\n                    }\n                  }}\n                  className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                    error && !startDate \n                      ? 'border-red-500 dark:border-red-500' \n                      : 'border-gray-300 dark:border-gray-600'\n                  }`}\n                  required\n                  aria-invalid={!startDate ? true : undefined}\n                  aria-describedby={!startDate ? \"startDate-error\" : undefined}\n                />\n                {error && !startDate && (\n                  <p id=\"startDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                    {error}\n                  </p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Enddatum (optional)\n                </label>\n                <input\n                  type=\"date\"\n                  value={endDate}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setEndDate(value);\n                    // Wenn Enddatum gesetzt wird, prfe ob es nach Startdatum liegt\n                    if (value && startDate && new Date(value) < new Date(startDate)) {\n                      setError('Enddatum muss nach dem Startdatum liegen');\n                    } else {\n                      setError(null); // Clear error when valid\n                    }\n                  }}\n                  min={startDate || undefined}\n                  className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                    error && endDate && startDate && new Date(endDate) < new Date(startDate)\n                      ? 'border-red-500 dark:border-red-500' \n                      : 'border-gray-300 dark:border-gray-600'\n                  }`}\n                  aria-invalid={endDate && startDate && new Date(endDate) < new Date(startDate) ? true : undefined}\n                  aria-describedby={endDate && startDate && new Date(endDate) < new Date(startDate) ? \"endDate-error\" : undefined}\n                />\n                {error && endDate && startDate && new Date(endDate) < new Date(startDate) && (\n                  <p id=\"endDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                    {error}\n                  </p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Position\n                </label>\n                <input\n                  type=\"text\"\n                  value={position}\n                  onChange={(e) => setPosition(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  placeholder=\"z.B. Frontend-Entwickler\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Gehalt (optional)\n                </label>\n                <div className=\"relative\">\n                  <CurrencyDollarIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                  <input\n                    type=\"number\"\n                    value={salary}\n                    onChange={(e) => {\n                      const value = e.target.value;\n                      setSalary(value);\n                      // Validierung: Gehalt darf nicht negativ sein\n                      if (value && parseFloat(value) < 0) {\n                        setError('Gehalt darf nicht negativ sein');\n                      } else {\n                        setError(null); // Clear error when valid\n                      }\n                    }}\n                    className={`w-full pl-10 pr-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                      error && salary && parseFloat(salary) < 0\n                        ? 'border-red-500 dark:border-red-500' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                    placeholder=\"0.00\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    aria-invalid={salary && parseFloat(salary) < 0 ? true : undefined}\n                    aria-describedby={salary && parseFloat(salary) < 0 ? \"salary-error\" : undefined}\n                  />\n                </div>\n                {error && salary && parseFloat(salary) < 0 && (\n                  <p id=\"salary-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                    {error}\n                  </p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Arbeitsstunden/Woche (optional)\n                </label>\n                <input\n                  type=\"number\"\n                  value={workingHours}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setWorkingHours(value);\n                    // Validierung: Arbeitsstunden mssen zwischen 0 und 168 liegen\n                    if (value && (parseFloat(value) < 0 || parseFloat(value) > 168)) {\n                      setError('Arbeitsstunden mssen zwischen 0 und 168 liegen');\n                    } else {\n                      setError(null); // Clear error when valid\n                    }\n                  }}\n                  className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                    error && workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168)\n                      ? 'border-red-500 dark:border-red-500' \n                      : 'border-gray-300 dark:border-gray-600'\n                  }`}\n                  placeholder=\"40\"\n                  step=\"0.1\"\n                  min=\"0\"\n                  max=\"168\"\n                  aria-invalid={workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) ? true : undefined}\n                  aria-describedby={workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) ? \"workingHours-error\" : undefined}\n                />\n                {error && workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) && (\n                  <p id=\"workingHours-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                    {error}\n                  </p>\n                )}\n                <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                  Maximal 168 Stunden pro Woche (24h  7 Tage)\n                </p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  PDF-Datei aktualisieren (optional)\n                </label>\n                <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center\">\n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\".pdf\"\n                    onChange={handleFileSelect}\n                    className=\"hidden\"\n                  />\n                  {!pdfFile ? (\n                    <div>\n                      <DocumentTextIcon className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n                      <button\n                        type=\"button\"\n                        onClick={() => fileInputRef.current?.click()}\n                        className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium\"\n                      >\n                        Neue PDF-Datei auswhlen\n                      </button>\n                      <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n                        oder Datei hierher ziehen\n                      </p>\n                      <p className=\"mt-1 text-xs text-gray-400 dark:text-gray-500\">\n                        Max. 10MB\n                      </p>\n                    </div>\n                  ) : (\n                    <div>\n                      <DocumentTextIcon className=\"mx-auto h-12 w-12 text-green-500 mb-4\" />\n                      <p className=\"text-sm font-medium dark:text-white\">{pdfFile.name}</p>\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                        {(pdfFile.size / 1024 / 1024).toFixed(2)} MB\n                      </p>\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          setPdfFile(null);\n                          if (pdfPreviewUrl) {\n                            URL.revokeObjectURL(pdfPreviewUrl);\n                            setPdfPreviewUrl(null);\n                          }\n                          setExistingPdfUrl(API_ENDPOINTS.LIFECYCLE.CONTRACT_DOWNLOAD(userId, contract.id));\n                          if (fileInputRef.current) {\n                            fileInputRef.current.value = '';\n                          }\n                        }}\n                        className=\"mt-2 text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300\"\n                      >\n                        Datei entfernen\n                      </button>\n                    </div>\n                  )}\n                </div>\n\n                {/* PDF-Vorschau */}\n                {(pdfPreviewUrl || existingPdfUrl) && (\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      PDF-Vorschau\n                    </label>\n                    <div className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n                      <iframe \n                        src={`${pdfPreviewUrl || existingPdfUrl}${pdfPreviewUrl ? '#view=FitH' : '?preview=true#view=FitH'}`}\n                        className=\"w-full rounded border dark:border-gray-600\"\n                        style={{ height: '400px' }}\n                        title=\"PDF-Vorschau\"\n                      />\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4\">\n                <p className=\"text-sm text-yellow-700 dark:text-yellow-300\">\n                  <strong>Hinweis:</strong> Wenn Sie eine neue PDF-Datei hochladen, wird die alte Version ersetzt.\n                  Eine neue Version wird erstellt (isLatest = true).\n                </p>\n              </div>\n            </form>\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n              title=\"Abbrechen\"\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleSubmit}\n              disabled={loading || !startDate}\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n              title={loading ? 'Wird aktualisiert...' : 'Aktualisieren'}\n            >\n              {loading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <CheckIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n        </Dialog.Panel>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default ContractEditModal;\n\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  CheckCircleIcon,\n  ClockIcon,\n  XCircleIcon,\n  PencilIcon,\n  EnvelopeIcon,\n  DocumentTextIcon,\n  XMarkIcon,\n  ArrowPathIcon\n} from '@heroicons/react/24/outline';\n// Social Security Editor Component\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface SocialSecurityRegistration {\n  id: number;\n  registrationType: string;\n  registrationNumber: string | null;\n  provider: string | null;\n  registrationDate: string | null;\n  status: string;\n  notes: string | null;\n  completedAt: string | null;\n}\n\ninterface SocialSecurityEditorProps {\n  userId: number;\n  lifecycleId: number;\n  onUpdate?: () => void;\n}\n\ntype SocialSecurityType = 'arl' | 'eps' | 'pension' | 'caja';\n\nconst SocialSecurityEditor: React.FC<SocialSecurityEditorProps> = ({\n  userId,\n  lifecycleId,\n  onUpdate\n}) => {\n  const { t } = useTranslation();\n  const { isLegal, isAdmin, loading: permissionsLoading } = usePermissions();\n  const { showMessage } = useMessage();\n  \n  const [registrations, setRegistrations] = useState<Record<SocialSecurityType, SocialSecurityRegistration | null>>({\n    arl: null,\n    eps: null,\n    pension: null,\n    caja: null\n  });\n  const [loading, setLoading] = useState(true);\n  const [editingType, setEditingType] = useState<SocialSecurityType | null>(null);\n  const [formData, setFormData] = useState({\n    status: 'pending' as string,\n    registrationNumber: '',\n    provider: '',\n    registrationDate: '',\n    notes: ''\n  });\n  const [saving, setSaving] = useState(false);\n  const loadingRef = useRef(false);\n  const abortControllerRef = useRef<AbortController | null>(null);\n\n  // loadRegistrations auerhalb von useEffect definieren, damit es von handleSave aufgerufen werden kann\n  const loadRegistrations = useCallback(async () => {\n    // Erstelle neuen AbortController\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n    }\n    const abortController = new AbortController();\n    abortControllerRef.current = abortController;\n\n    loadingRef.current = true;\n    setLoading(true);\n    try {\n      const types: SocialSecurityType[] = ['arl', 'eps', 'pension', 'caja'];\n      const registrationPromises = types.map(async (type) => {\n        // Prfe ob Request abgebrochen wurde\n        if (abortController.signal.aborted) {\n          return { type, registration: null };\n        }\n\n        try {\n          const response = await axiosInstance.get(\n            API_ENDPOINTS.LIFECYCLE.SOCIAL_SECURITY(userId, type),\n            {\n              timeout: 5000, // 5 Sekunden Timeout\n              signal: abortController.signal\n            }\n          );\n          return { type, registration: response.data };\n        } catch (error: any) {\n          // Ignoriere Abort-Errors (AbortError oder CanceledError von Axios)\n          if (error.name === 'AbortError' || error.name === 'CanceledError' || abortController.signal.aborted) {\n            return { type, registration: null };\n          }\n          // Behandle 404 als \"nicht vorhanden\" (normal)\n          if (error.response?.status === 404) {\n            return { type, registration: null };\n          }\n          // Behandle Network Errors und Timeouts\n          if (error.code === 'ERR_NETWORK' || error.code === 'ECONNABORTED' || error.message?.includes('ERR_INSUFFICIENT_RESOURCES')) {\n            console.warn(`Network error loading ${type}, treating as not found`);\n            return { type, registration: null };\n          }\n          console.error(`Error loading ${type}:`, error);\n          return { type, registration: null };\n        }\n      });\n\n      const results = await Promise.all(registrationPromises);\n      \n      // Prfe erneut ob Request abgebrochen wurde\n      if (abortController.signal.aborted) {\n        return;\n      }\n\n      const newRegistrations: Record<SocialSecurityType, SocialSecurityRegistration | null> = {\n        arl: null,\n        eps: null,\n        pension: null,\n        caja: null\n      };\n\n      results.forEach(({ type, registration }) => {\n        if (registration) {\n          // Backend gibt zurck: { id, type, status, number, provider, registeredAt, notes, completedAt }\n          // Mappe auf Frontend-Format: { id, registrationType, registrationNumber, provider, registrationDate, status, notes, completedAt }\n          newRegistrations[type as SocialSecurityType] = {\n            id: registration.id || 0,\n            registrationType: type,\n            registrationNumber: registration.number || registration.registrationNumber || null,\n            provider: registration.provider || null,\n            registrationDate: registration.registeredAt || registration.registrationDate || null,\n            status: registration.status || 'pending',\n            notes: registration.notes || null,\n            completedAt: registration.completedAt || null\n          };\n        }\n      });\n\n      setRegistrations(newRegistrations);\n    } catch (error: any) {\n      // Ignoriere Abort-Errors (AbortError oder CanceledError von Axios)\n      if (error.name === 'AbortError' || error.name === 'CanceledError' || abortController.signal.aborted) {\n        return;\n      }\n      console.error('Error loading registrations:', error);\n      showMessage(t('socialSecurity.loadError'), 'error');\n    } finally {\n      // Setze loading immer auf false, auch bei Abbruch\n      setLoading(false);\n      loadingRef.current = false;\n    }\n  }, [userId, t, showMessage]);\n\n  useEffect(() => {\n    // Warte bis Berechtigungen geladen sind\n    if (permissionsLoading) {\n      return;\n    }\n    \n    // Prfe Berechtigung und lade nur einmal pro userId/lifecycleId\n    const hasPermission = isLegal() || isAdmin();\n    if (!hasPermission || !userId || !lifecycleId) {\n      setLoading(false);\n      return;\n    }\n\n    // Verhindere mehrfaches gleichzeitiges Laden\n    if (loadingRef.current) {\n      return;\n    }\n\n    loadRegistrations();\n\n    // Cleanup: Breche Request ab wenn Component unmountet oder Dependencies sich ndern\n    return () => {\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n      loadingRef.current = false;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userId, lifecycleId, permissionsLoading]); // permissionsLoading als Dependency hinzugefgt\n\n  const handleEdit = (type: SocialSecurityType) => {\n    const registration = registrations[type];\n    if (registration) {\n      setFormData({\n        status: registration.status,\n        registrationNumber: registration.registrationNumber || '',\n        provider: registration.provider || '',\n        registrationDate: registration.registrationDate \n          ? new Date(registration.registrationDate).toISOString().split('T')[0]\n          : '',\n        notes: registration.notes || ''\n      });\n    } else {\n      setFormData({\n        status: 'pending',\n        registrationNumber: '',\n        provider: '',\n        registrationDate: '',\n        notes: ''\n      });\n    }\n    setEditingType(type);\n  };\n\n  const handleCancel = () => {\n    setEditingType(null);\n    setFormData({\n      status: 'pending',\n      registrationNumber: '',\n      provider: '',\n      registrationDate: '',\n      notes: ''\n    });\n  };\n\n  const handleSave = async () => {\n    if (!editingType) return;\n    \n    // Prfe Berechtigung nochmal vor dem Speichern\n    if (permissionsLoading) {\n      showMessage(t('common.loading', { defaultValue: 'Berechtigungen werden geladen...' }), 'warning');\n      return;\n    }\n    \n    if (!isLegal() && !isAdmin()) {\n      showMessage(t('lifecycle.noPermission', { defaultValue: 'Keine Berechtigung - nur Legal oder Admin' }), 'error');\n      return;\n    }\n\n    setSaving(true);\n    try {\n      await axiosInstance.put(\n        API_ENDPOINTS.LIFECYCLE.SOCIAL_SECURITY(userId, editingType),\n        {\n          status: formData.status,\n          number: formData.registrationNumber || undefined,\n          provider: formData.provider || undefined,\n          registrationDate: formData.registrationDate \n            ? new Date(formData.registrationDate).toISOString()\n            : undefined,\n          notes: formData.notes || undefined\n        }\n      );\n\n      showMessage('Sozialversicherung erfolgreich aktualisiert', 'success');\n      setEditingType(null);\n      \n      // Warte kurz, damit Backend die Daten aktualisiert hat\n      await new Promise(resolve => setTimeout(resolve, 200));\n      \n      // Lade Registrierungen neu nach Update\n      await loadRegistrations();\n      \n      // onUpdate nur aufrufen, wenn es eine Funktion ist (verhindert Re-Render-Loops)\n      if (onUpdate && typeof onUpdate === 'function') {\n        // Rufe onUpdate auf, um LifecycleView zu aktualisieren\n        onUpdate();\n      }\n    } catch (error: any) {\n      console.error('Error updating social security:', error);\n      showMessage(\n        error.response?.data?.message || t('socialSecurity.updateError'),\n        'error'\n      );\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'registered':\n        return <CheckCircleIcon className=\"h-5 w-5 text-green-500\" />;\n      case 'pending':\n        return <ClockIcon className=\"h-5 w-5 text-yellow-500\" />;\n      case 'failed':\n        return <XCircleIcon className=\"h-5 w-5 text-red-500\" />;\n      case 'not_required':\n        return <CheckCircleIcon className=\"h-5 w-5 text-gray-400\" />;\n      case 'deregistered':\n        return <XCircleIcon className=\"h-5 w-5 text-gray-400\" />;\n      default:\n        return <ClockIcon className=\"h-5 w-5 text-gray-400\" />;\n    }\n  };\n\n  const getStatusLabel = (status: string) => {\n    const labelKey = `lifecycle.socialSecurityStatus.${status}`;\n    return t(labelKey) || status;\n  };\n\n  const getTypeLabel = (type: SocialSecurityType) => {\n    const labels: Record<SocialSecurityType, string> = {\n      arl: 'ARL (Risiko-Arbeit)',\n      eps: 'EPS (Gesundheit)',\n      pension: 'Pension',\n      caja: 'Caja de Compensacin'\n    };\n    return labels[type];\n  };\n\n  // Warte bis Berechtigungen geladen sind\n  if (permissionsLoading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex justify-center items-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isLegal() && !isAdmin()) {\n    return null;\n  }\n\n  if (loading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex justify-center items-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  const types: SocialSecurityType[] = ['arl', 'eps', 'pension', 'caja'];\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-lg font-semibold dark:text-white flex items-center\">\n          <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n          {t('lifecycle.socialSecurity', { defaultValue: 'Sozialversicherungen' })}\n        </h3>\n      </div>\n\n      <div className=\"space-y-4\">\n        {types.map((type) => {\n          const registration = registrations[type];\n          const isEditing = editingType === type;\n\n          return (\n            <div\n              key={type}\n              className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\"\n            >\n              {!isEditing ? (\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex items-start space-x-3 flex-1\">\n                    {getStatusIcon(registration?.status || 'pending')}\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-2 mb-2\">\n                        <h4 className=\"font-medium dark:text-white uppercase\">\n                          {getTypeLabel(type)}\n                        </h4>\n                        <span className=\"text-sm font-medium dark:text-white\">\n                          {getStatusLabel(registration?.status || 'pending')}\n                        </span>\n                      </div>\n                      {registration && (\n                        <div className=\"space-y-1 text-sm text-gray-600 dark:text-gray-400\">\n                          {registration.provider && (\n                            <div>\n                              <span className=\"font-medium\">{t('socialSecurity.provider')}:</span> {registration.provider}\n                            </div>\n                          )}\n                          {registration.registrationNumber && (\n                            <div>\n                              <span className=\"font-medium\">{t('socialSecurity.number')}:</span> {registration.registrationNumber}\n                            </div>\n                          )}\n                          {registration.registrationDate && (\n                            <div>\n                              <span className=\"font-medium\">{t('socialSecurity.registrationDate')}:</span>{' '}\n                              {new Date(registration.registrationDate).toLocaleDateString('de-DE')}\n                            </div>\n                          )}\n                          {registration.notes && (\n                            <div className=\"mt-2\">\n                              <span className=\"font-medium\">{t('socialSecurity.notes')}:</span>\n                              <p className=\"text-gray-500 dark:text-gray-400 mt-1\">\n                                {registration.notes}\n                              </p>\n                            </div>\n                          )}\n                          {registration.completedAt && (\n                            <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n                              {t('socialSecurity.completedAt')}{' '}\n                              {new Date(registration.completedAt).toLocaleDateString('de-DE')}\n                            </div>\n                          )}\n                        </div>\n                      )}\n                      {!registration && (\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                          {t('socialSecurity.notRegistered')}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                  <button\n                    onClick={() => handleEdit(type)}\n                    className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition ml-4\"\n                    title={t('lifecycle.edit', { defaultValue: 'Bearbeiten' })}\n                  >\n                    <PencilIcon className=\"h-5 w-5\" />\n                  </button>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  <h4 className=\"font-medium dark:text-white uppercase mb-3\">\n                    {t('socialSecurity.editType', { type: getTypeLabel(type) })}\n                  </h4>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      {t('socialSecurity.status')} <span className=\"text-red-500\">*</span>\n                    </label>\n                    <select\n                      value={formData.status}\n                      onChange={(e) => setFormData({ ...formData, status: e.target.value })}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    >\n                      <option value=\"not_required\">Nicht erforderlich</option>\n                      <option value=\"pending\">Ausstehend</option>\n                      <option value=\"registered\">Registriert</option>\n                      <option value=\"failed\">Fehlgeschlagen</option>\n                      <option value=\"deregistered\">Abgemeldet</option>\n                    </select>\n                  </div>\n\n                  {formData.status === 'registered' && (\n                    <>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('socialSecurity.registrationNumber')}\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={formData.registrationNumber}\n                          onChange={(e) => setFormData({ ...formData, registrationNumber: e.target.value })}\n                          className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                          placeholder=\"z.B. 123456789\"\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('socialSecurity.provider')}\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={formData.provider}\n                          onChange={(e) => setFormData({ ...formData, provider: e.target.value })}\n                          className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                          placeholder=\"z.B. ARL Sura, EPS Sanitas\"\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('socialSecurity.registrationDate')}\n                        </label>\n                        <input\n                          type=\"date\"\n                          value={formData.registrationDate}\n                          onChange={(e) => setFormData({ ...formData, registrationDate: e.target.value })}\n                          className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                        />\n                      </div>\n                    </>\n                  )}\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      {t('socialSecurity.notes')}\n                    </label>\n                    <textarea\n                      value={formData.notes}\n                      onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                      rows={3}\n                      placeholder={t('socialSecurity.additionalInfo')}\n                    />\n                  </div>\n\n                  <div className=\"flex items-center justify-end space-x-3\">\n                    <button\n                      onClick={handleCancel}\n                      disabled={saving}\n                      className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed\"\n                      title={t('common.cancel')}\n                    >\n                      <XMarkIcon className=\"h-5 w-5\" />\n                    </button>\n                    <button\n                      onClick={handleSave}\n                      disabled={saving}\n                      className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                      title={saving ? t('common.saving') : t('common.save')}\n                    >\n                      {saving ? (\n                        <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                      ) : (\n                        <CheckCircleIcon className=\"h-5 w-5\" />\n                      )}\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default SocialSecurityEditor;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, ExclamationTriangleIcon, CalendarIcon, ArrowPathIcon, ArrowRightIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface OffboardingStartModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onOffboardingStarted: () => void;\n  userId: number;\n  userName: string;\n}\n\nconst OffboardingStartModal: React.FC<OffboardingStartModalProps> = ({\n  isOpen,\n  onClose,\n  onOffboardingStarted,\n  userId,\n  userName\n}) => {\n  const { t } = useTranslation();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  \n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Form-Daten\n  const [exitDate, setExitDate] = useState('');\n  const [exitReason, setExitReason] = useState('');\n  \n  // Validierung\n  const [validationErrors, setValidationErrors] = useState<{\n    exitDate?: string;\n    exitReason?: string;\n  }>({});\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n      // Setze Standard-Datum auf heute\n      const today = new Date().toISOString().split('T')[0];\n      setExitDate(today);\n      setExitReason('');\n      setError(null);\n      setValidationErrors({});\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  const validateForm = (): boolean => {\n    const errors: { exitDate?: string; exitReason?: string } = {};\n\n    // Validierung: exitDate\n    if (!exitDate) {\n      errors.exitDate = t('lifecycle.offboarding.exitDateRequired', { defaultValue: 'Austrittsdatum ist erforderlich' });\n    } else {\n      const selectedDate = new Date(exitDate);\n      const today = new Date();\n      today.setHours(0, 0, 0, 0);\n      \n      // exitDate darf in der Vergangenheit liegen (rckwirkende Erfassung erlaubt)\n      // Aber nicht zu weit in der Zukunft (max. 1 Jahr)\n      const maxDate = new Date();\n      maxDate.setFullYear(maxDate.getFullYear() + 1);\n      \n      if (selectedDate > maxDate) {\n        errors.exitDate = t('lifecycle.offboarding.exitDateTooFar', { defaultValue: 'Austrittsdatum darf nicht mehr als 1 Jahr in der Zukunft liegen' });\n      }\n    }\n\n    // Validierung: exitReason\n    if (!exitReason || exitReason.trim().length === 0) {\n      errors.exitReason = t('lifecycle.offboarding.exitReasonRequired', { defaultValue: 'Austrittsgrund ist erforderlich' });\n    } else if (exitReason.trim().length < 10) {\n      errors.exitReason = t('lifecycle.offboarding.exitReasonTooShort', { defaultValue: 'Austrittsgrund muss mindestens 10 Zeichen lang sein' });\n    }\n\n    setValidationErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      await axiosInstance.put(API_ENDPOINTS.LIFECYCLE.STATUS(userId), {\n        status: 'offboarding',\n        exitDate: exitDate,\n        exitReason: exitReason.trim()\n      });\n\n      showMessage(\n        t('lifecycle.offboarding.started', { defaultValue: 'Offboarding erfolgreich gestartet' }),\n        'success'\n      );\n      \n      onOffboardingStarted();\n      onClose();\n    } catch (err: any) {\n      console.error('Fehler beim Starten des Offboarding:', err);\n      const errorMessage = err.response?.data?.message || \n        t('lifecycle.offboarding.startError', { defaultValue: 'Fehler beim Starten des Offboarding' });\n      setError(errorMessage);\n      showMessage(errorMessage, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderForm = () => (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      {/* Warnung */}\n      <div className=\"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4\">\n        <div className=\"flex items-start\">\n          <ExclamationTriangleIcon className=\"h-5 w-5 text-orange-600 dark:text-orange-400 mt-0.5 mr-3 flex-shrink-0\" />\n          <div className=\"text-sm text-orange-800 dark:text-orange-200\">\n            <p className=\"font-medium mb-1\">\n              {t('lifecycle.offboarding.warningTitle', { defaultValue: 'Wichtiger Hinweis' })}\n            </p>\n            <p>\n              {t('lifecycle.offboarding.warningText', { defaultValue: 'Durch das Starten des Offboarding-Prozesses werden automatisch Tasks erstellt. Dieser Vorgang kann nicht rckgngig gemacht werden.' })}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* User-Info */}\n      <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4\">\n        <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">\n          {t('lifecycle.offboarding.user', { defaultValue: 'Mitarbeiter' })}\n        </p>\n        <p className=\"font-medium dark:text-white\">{userName}</p>\n      </div>\n\n      {/* exitDate */}\n      <div>\n        <label htmlFor=\"exitDate\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n          {t('lifecycle.offboarding.exitDate', { defaultValue: 'Austrittsdatum' })} *\n        </label>\n        <div className=\"relative\">\n          <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n            <CalendarIcon className=\"h-5 w-5 text-gray-400\" />\n          </div>\n          <input\n            type=\"date\"\n            id=\"exitDate\"\n            value={exitDate}\n            onChange={(e) => {\n              setExitDate(e.target.value);\n              if (validationErrors.exitDate) {\n                setValidationErrors(prev => ({ ...prev, exitDate: undefined }));\n              }\n            }}\n            className={`block w-full pl-10 pr-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n              validationErrors.exitDate\n                ? 'border-red-300 dark:border-red-600 focus:ring-red-500 focus:border-red-500'\n                : 'border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500'\n            }`}\n            required\n          />\n        </div>\n        {validationErrors.exitDate && (\n          <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{validationErrors.exitDate}</p>\n        )}\n        <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n          {t('lifecycle.offboarding.exitDateHint', { defaultValue: 'Das Datum, an dem der Mitarbeiter die Organisation verlsst' })}\n        </p>\n      </div>\n\n      {/* exitReason */}\n      <div>\n        <label htmlFor=\"exitReason\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n          {t('lifecycle.offboarding.exitReason', { defaultValue: 'Austrittsgrund' })} *\n        </label>\n        <textarea\n          id=\"exitReason\"\n          value={exitReason}\n          onChange={(e) => {\n            setExitReason(e.target.value);\n            if (validationErrors.exitReason) {\n              setValidationErrors(prev => ({ ...prev, exitReason: undefined }));\n            }\n          }}\n          rows={4}\n          className={`block w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n            validationErrors.exitReason\n              ? 'border-red-300 dark:border-red-600 focus:ring-red-500 focus:border-red-500'\n              : 'border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500'\n          }`}\n          placeholder={t('lifecycle.offboarding.exitReasonPlaceholder', { defaultValue: 'z.B. Kndigung, Vertragsende, etc.' })}\n          required\n        />\n        {validationErrors.exitReason && (\n          <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{validationErrors.exitReason}</p>\n        )}\n        <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n          {t('lifecycle.offboarding.exitReasonHint', { defaultValue: 'Mindestens 10 Zeichen. Beschreiben Sie den Grund fr den Austritt.' })}\n        </p>\n      </div>\n\n      {/* Error-Message */}\n      {error && (\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3\">\n          <p className=\"text-sm text-red-800 dark:text-red-200\">{error}</p>\n        </div>\n      )}\n\n      {/* Buttons */}\n      <div className=\"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n        <button\n          type=\"button\"\n          onClick={onClose}\n          disabled={loading}\n          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed\"\n          title={t('common.cancel', { defaultValue: 'Abbrechen' })}\n        >\n          <XMarkIcon className=\"h-5 w-5\" />\n        </button>\n        <button\n          type=\"submit\"\n          disabled={loading}\n          className=\"p-2 bg-orange-600 dark:bg-orange-700 text-white rounded-md hover:bg-orange-700 dark:hover:bg-orange-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n          title={loading ? t('common.saving', { defaultValue: 'Speichern...' }) : t('lifecycle.offboarding.startButton', { defaultValue: 'Offboarding starten' })}\n        >\n          {loading ? (\n            <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n          ) : (\n            <ArrowRightIcon className=\"h-5 w-5\" />\n          )}\n        </button>\n      </div>\n    </form>\n  );\n\n  if (!isOpen) return null;\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('lifecycle.offboarding.startTitle', { defaultValue: 'Offboarding starten' })}\n              </Dialog.Title>\n              <button\n                onClick={onClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <div className=\"p-4\">\n              {renderForm()}\n            </div>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={onClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('lifecycle.offboarding.startTitle', { defaultValue: 'Offboarding starten' })}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {renderForm()}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default OffboardingStartModal;\n\n","import React, { useState, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Dialog } from '@headlessui/react';\r\nimport { XMarkIcon, ExclamationTriangleIcon, CheckCircleIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\r\nimport axiosInstance from '../config/axios.ts';\r\nimport { API_ENDPOINTS } from '../config/api.ts';\r\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\r\nimport useMessage from '../hooks/useMessage.ts';\r\n\r\ninterface Task {\r\n  id: number;\r\n  title: string;\r\n  description: string | null;\r\n  status: string;\r\n  dueDate: string | null;\r\n  createdAt: string;\r\n}\r\n\r\ninterface OffboardingCompleteModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onOffboardingCompleted: () => void;\r\n  userId: number;\r\n  userName: string;\r\n  offboardingTasks: Task[];\r\n}\r\n\r\nconst OffboardingCompleteModal: React.FC<OffboardingCompleteModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onOffboardingCompleted,\r\n  userId,\r\n  userName,\r\n  offboardingTasks\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const { openSidepane, closeSidepane } = useSidepane();\r\n  const { showMessage } = useMessage();\r\n  \r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\r\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [confirmText, setConfirmText] = useState('');\r\n  \r\n  // Prfe, ob alle Tasks abgeschlossen sind\r\n  const completedTasks = offboardingTasks.filter(task => task.status === 'done');\r\n  const allTasksCompleted = offboardingTasks.length > 0 && completedTasks.length === offboardingTasks.length;\r\n  const requiredConfirmText = userName.trim().toLowerCase();\r\n  \r\n  // Responsive Erkennung\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setIsMobile(window.innerWidth < 640);\r\n      setIsLargeScreen(window.innerWidth > 1070);\r\n    };\r\n    \r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n  \r\n  // Sidepane-Status verwalten\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      openSidepane();\r\n      // Reset form on open\r\n      setConfirmText('');\r\n      setError(null);\r\n    } else {\r\n      closeSidepane();\r\n    }\r\n    \r\n    return () => {\r\n      closeSidepane();\r\n    };\r\n  }, [isOpen, openSidepane, closeSidepane]);\r\n  \r\n  const validateForm = () => {\r\n    if (confirmText.trim().toLowerCase() !== requiredConfirmText) {\r\n      setError(t('lifecycle.offboarding.complete.confirmTextMismatch', { defaultValue: 'Besttigungstext stimmt nicht berein' }));\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n  \r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      await axiosInstance.put(API_ENDPOINTS.LIFECYCLE.STATUS(userId), {\r\n        status: 'archived'\r\n      });\r\n      \r\n      showMessage(\r\n        t('lifecycle.offboarding.complete.success', { defaultValue: 'Offboarding erfolgreich abgeschlossen' }),\r\n        'success'\r\n      );\r\n      \r\n      onOffboardingCompleted();\r\n      onClose();\r\n    } catch (err: any) {\r\n      console.error('Fehler beim Abschlieen des Offboarding:', err);\r\n      const errorMessage = err.response?.data?.message || \r\n        t('lifecycle.offboarding.complete.error', { defaultValue: 'Fehler beim Abschlieen des Offboarding' });\r\n      setError(errorMessage);\r\n      showMessage(errorMessage, 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  const renderForm = () => (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      {/* User Info */}\r\n      <div className=\"bg-gray-50 dark:bg-gray-700 p-3 rounded-md flex items-center space-x-3\">\r\n        <CheckCircleIcon className=\"h-5 w-5 text-gray-500 dark:text-gray-400\" />\r\n        <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n          {t('lifecycle.offboarding.complete.user', { defaultValue: 'Mitarbeiter' })}: {userName}\r\n        </span>\r\n      </div>\r\n      \r\n      {/* Tasks Status */}\r\n      {offboardingTasks.length > 0 && (\r\n        <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-md\">\r\n          <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            {t('lifecycle.offboarding.complete.tasksStatus', { defaultValue: 'Status der Offboarding-Aufgaben' })}\r\n          </h4>\r\n          <div className=\"space-y-2\">\r\n            {offboardingTasks.map((task) => {\r\n                  const isCompleted = task.status === 'done';\r\n              return (\r\n                <div\r\n                  key={task.id}\r\n                  className={`flex items-center space-x-2 text-sm ${\r\n                    isCompleted\r\n                      ? 'text-green-700 dark:text-green-300'\r\n                      : 'text-orange-700 dark:text-orange-300'\r\n                  }`}\r\n                >\r\n                  {isCompleted ? (\r\n                    <CheckCircleIcon className=\"h-4 w-4 flex-shrink-0\" />\r\n                  ) : (\r\n                    <ExclamationTriangleIcon className=\"h-4 w-4 flex-shrink-0\" />\r\n                  )}\r\n                  <span>{task.title}</span>\r\n                  <span className=\"ml-auto text-xs\">\r\n                    {isCompleted\r\n                      ? `(${t('common.done', { defaultValue: 'Abgeschlossen' })})`\r\n                      : `(${t('common.open', { defaultValue: 'Offen' })})`}\r\n                  </span>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Warning wenn nicht alle Tasks abgeschlossen */}\r\n      {!allTasksCompleted && offboardingTasks.length > 0 && (\r\n        <div className=\"bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-400 p-4\">\r\n          <div className=\"flex\">\r\n            <div className=\"flex-shrink-0\">\r\n              <ExclamationTriangleIcon className=\"h-5 w-5 text-orange-400\" aria-hidden=\"true\" />\r\n            </div>\r\n            <div className=\"ml-3\">\r\n              <h3 className=\"text-sm font-medium text-orange-800 dark:text-orange-300\">\r\n                {t('lifecycle.offboarding.complete.warningTitle', { defaultValue: 'Nicht alle Aufgaben abgeschlossen' })}\r\n              </h3>\r\n              <div className=\"mt-2 text-sm text-orange-700 dark:text-orange-200\">\r\n                <p>\r\n                  {t('lifecycle.offboarding.complete.warningText', { \r\n                    defaultValue: 'Es sind noch nicht alle Offboarding-Aufgaben abgeschlossen. Sie knnen das Offboarding trotzdem abschlieen, aber es wird empfohlen, alle Aufgaben zuerst zu erledigen.'\r\n                  })}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Info wenn alle Tasks abgeschlossen */}\r\n      {allTasksCompleted && (\r\n        <div className=\"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-400 p-4\">\r\n          <div className=\"flex\">\r\n            <div className=\"flex-shrink-0\">\r\n              <CheckCircleIcon className=\"h-5 w-5 text-green-400\" aria-hidden=\"true\" />\r\n            </div>\r\n            <div className=\"ml-3\">\r\n              <h3 className=\"text-sm font-medium text-green-800 dark:text-green-300\">\r\n                {t('lifecycle.offboarding.complete.allTasksCompleted', { defaultValue: 'Alle Aufgaben abgeschlossen' })}\r\n              </h3>\r\n              <div className=\"mt-2 text-sm text-green-700 dark:text-green-200\">\r\n                <p>\r\n                  {t('lifecycle.offboarding.complete.allTasksCompletedText', { \r\n                    defaultValue: 'Alle Offboarding-Aufgaben sind abgeschlossen. Sie knnen das Offboarding jetzt abschlieen.'\r\n                  })}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Confirm Text Input */}\r\n      <div>\r\n        <label htmlFor=\"confirmText\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n          {t('lifecycle.offboarding.complete.confirmLabel', { userName }) || \r\n            `Besttigen Sie durch Eingabe des Namens: \"${userName}\"`} *\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"confirmText\"\r\n          value={confirmText}\r\n          onChange={(e) => {\r\n            setConfirmText(e.target.value);\r\n            setError(null);\r\n          }}\r\n          className={`w-full px-3 py-2 border ${\r\n            error && error.includes('Besttigung') ? 'border-red-500' : 'border-gray-300'\r\n          } dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500`}\r\n          placeholder={userName}\r\n          required\r\n        />\r\n        <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\r\n          {t('lifecycle.offboarding.complete.confirmHint', { \r\n            defaultValue: 'Geben Sie den vollstndigen Namen des Mitarbeiters ein, um das Offboarding abzuschlieen'\r\n          })}\r\n        </p>\r\n      </div>\r\n      \r\n      {/* Final Warning */}\r\n      <div className=\"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\r\n        <div className=\"flex\">\r\n          <div className=\"flex-shrink-0\">\r\n            <ExclamationTriangleIcon className=\"h-5 w-5 text-red-400\" aria-hidden=\"true\" />\r\n          </div>\r\n          <div className=\"ml-3\">\r\n            <h3 className=\"text-sm font-medium text-red-800 dark:text-red-300\">\r\n              {t('lifecycle.offboarding.complete.finalWarningTitle', { defaultValue: 'Wichtiger Hinweis' })}\r\n            </h3>\r\n            <div className=\"mt-2 text-sm text-red-700 dark:text-red-200\">\r\n              <p>\r\n                {t('lifecycle.offboarding.complete.finalWarningText', { \r\n                  defaultValue: 'Durch das Abschlieen des Offboarding wird der Mitarbeiter archiviert. Dieser Vorgang kann nicht rckgngig gemacht werden.'\r\n                })}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Submit Button */}\r\n      <div className=\"flex justify-end space-x-3\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={onClose}\r\n          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          disabled={loading}\r\n          title={t('common.cancel', { defaultValue: 'Abbrechen' })}\r\n        >\r\n          <XMarkIcon className=\"h-5 w-5\" />\r\n        </button>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"p-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          disabled={loading || confirmText.trim().toLowerCase() !== requiredConfirmText}\r\n          title={loading ? t('common.saving', { defaultValue: 'Speichern...' }) : t('lifecycle.offboarding.complete.button', { defaultValue: 'Offboarding abschlieen' })}\r\n        >\r\n          {loading ? (\r\n            <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n          ) : (\r\n            <CheckCircleIcon className=\"h-5 w-5\" />\r\n          )}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n  \r\n  if (!isOpen) return null;\r\n  \r\n  // Fr Mobile (unter 640px) - klassisches Modal\r\n  if (isMobile) {\r\n    return (\r\n      <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\r\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\r\n        \r\n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n          <Dialog.Panel className=\"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\r\n            {/* Header */}\r\n            <div className=\"px-6 py-4 border-b dark:border-gray-700\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\r\n                  {t('lifecycle.offboarding.complete.title', { defaultValue: 'Offboarding abschlieen' })}\r\n                </Dialog.Title>\r\n                <button\r\n                  onClick={onClose}\r\n                  className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n                >\r\n                  <XMarkIcon className=\"h-6 w-6\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Form */}\r\n            <div className=\"p-6\">\r\n              {error && (\r\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\r\n                  {error}\r\n                </div>\r\n              )}\r\n              {renderForm()}\r\n            </div>\r\n          </Dialog.Panel>\r\n        </div>\r\n      </Dialog>\r\n    );\r\n  }\r\n  \r\n  // Fr Desktop (ab 640px) - Sidepane\r\n  return (\r\n    <>\r\n      {/* Backdrop - nur wenn offen und <= 1070px */}\r\n      {isOpen && !isLargeScreen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\"\r\n          aria-hidden=\"true\"\r\n          onClick={onClose}\r\n          style={{\r\n            opacity: isOpen ? 1 : 0,\r\n            transition: 'opacity 300ms ease-out'\r\n          }}\r\n        />\r\n      )}\r\n      \r\n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\r\n      <div\r\n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${\r\n          isOpen ? 'translate-x-0' : 'translate-x-full'\r\n        }`}\r\n        style={{\r\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\r\n          pointerEvents: isOpen ? 'auto' : 'none'\r\n        }}\r\n        aria-hidden={!isOpen}\r\n        role=\"dialog\"\r\n        aria-modal={isOpen}\r\n      >\r\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\r\n          <h2 className=\"text-lg font-semibold dark:text-white\">\r\n            {t('lifecycle.offboarding.complete.title', { defaultValue: 'Offboarding abschlieen' })}\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n          >\r\n            <XMarkIcon className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\r\n          {error && (\r\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\r\n              {error}\r\n            </div>\r\n          )}\r\n          {renderForm()}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OffboardingCompleteModal;\r\n\r\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { \n  CheckCircleIcon, \n  ClockIcon, \n  XCircleIcon,\n  DocumentTextIcon,\n  BuildingOfficeIcon,\n  PlusIcon,\n  PencilIcon,\n  ArrowDownTrayIcon,\n  CalendarIcon,\n  UserIcon,\n  ArrowRightIcon\n} from '@heroicons/react/24/outline';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport useMessage from '../hooks/useMessage.ts';\nimport CertificateCreationModal from './CertificateCreationModal.tsx';\nimport ContractCreationModal from './ContractCreationModal.tsx';\nimport CertificateEditModal from './CertificateEditModal.tsx';\nimport ContractEditModal from './ContractEditModal.tsx';\nimport SocialSecurityEditor from './SocialSecurityEditor.tsx';\nimport OffboardingStartModal from './OffboardingStartModal.tsx';\nimport OffboardingCompleteModal from './OffboardingCompleteModal.tsx';\n\ninterface LifecycleViewProps {\n  userId: number;\n  userName: string;\n}\n\ninterface LifecycleData {\n  lifecycle: {\n    id: number;\n    status: string;\n    onboardingStartedAt: string | null;\n    onboardingCompletedAt: string | null;\n    contractStartDate: string | null;\n    contractEndDate: string | null;\n    exitDate: string | null;\n    exitReason: string | null;\n    offboardingStartedAt: string | null;\n    offboardingCompletedAt: string | null;\n  };\n  progress: {\n    completed: number;\n    total: number;\n    percent: number;\n  };\n  socialSecurityRegistrations?: Array<{\n    id: number;\n    registrationType: string;\n    status: string;\n    registrationNumber: string | null;\n    provider: string | null;\n    registrationDate: string | null;\n  }>;\n}\n\ninterface Task {\n  id: number;\n  title: string;\n  description: string | null;\n  status: string;\n  dueDate: string | null;\n  createdAt: string;\n}\n\ninterface Certificate {\n  id: number;\n  certificateType: string;\n  issueDate: string;\n  templateUsed: string | null;\n  templateVersion: string | null;\n  isLatest: boolean;\n  generatedBy: number | null;\n  generatedByUser: {\n    id: number;\n    firstName: string;\n    lastName: string;\n  } | null;\n  createdAt: string;\n}\n\ninterface Contract {\n  id: number;\n  contractType: string;\n  startDate: string;\n  endDate: string | null;\n  salary: number | null;\n  workingHours: number | null;\n  position: string | null;\n  templateUsed: string | null;\n  templateVersion: string | null;\n  isLatest: boolean;\n  generatedBy: number | null;\n  generatedByUser: {\n    id: number;\n    firstName: string;\n    lastName: string;\n  } | null;\n  createdAt: string;\n}\n\nconst LifecycleView: React.FC<LifecycleViewProps> = ({ userId, userName }) => {\n  const { t } = useTranslation();\n  const { isHR, isAdmin } = usePermissions();\n  const { showMessage } = useMessage();\n  \n  const [lifecycleData, setLifecycleData] = useState<LifecycleData | null>(null);\n  const [certificates, setCertificates] = useState<Certificate[]>([]);\n  const [contracts, setContracts] = useState<Contract[]>([]);\n  const [offboardingTasks, setOffboardingTasks] = useState<Task[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Modal States\n  const [isCertificateCreateModalOpen, setIsCertificateCreateModalOpen] = useState(false);\n  const [isContractCreateModalOpen, setIsContractCreateModalOpen] = useState(false);\n  const [editingCertificate, setEditingCertificate] = useState<Certificate | null>(null);\n  const [editingContract, setEditingContract] = useState<Contract | null>(null);\n  \n  const [downloadingCertId, setDownloadingCertId] = useState<number | null>(null);\n  const [downloadingContractId, setDownloadingContractId] = useState<number | null>(null);\n  const [isOffboardingStartModalOpen, setIsOffboardingStartModalOpen] = useState(false);\n  const [isOffboardingCompleteModalOpen, setIsOffboardingCompleteModalOpen] = useState(false);\n  const [isEditContractDatesModalOpen, setIsEditContractDatesModalOpen] = useState(false);\n  const [editingContractStartDate, setEditingContractStartDate] = useState<string>('');\n  const [editingContractEndDate, setEditingContractEndDate] = useState<string>('');\n\n  const fetchDataRef = useRef(false);\n\n  const fetchData = useCallback(async (force: boolean = false) => {\n    // Verhindere mehrfaches gleichzeitiges Laden (auer wenn force=true)\n    if (fetchDataRef.current && !force) {\n      // Wenn bereits geladen wird, warte kurz und versuche es erneut\n      setTimeout(() => {\n        if (!fetchDataRef.current) {\n          fetchData(true);\n        }\n      }, 500);\n      return;\n    }\n    \n    try {\n      fetchDataRef.current = true;\n      setLoading(true);\n      const [lifecycleResponse, certsResponse, contractsResponse, tasksResponse] = await Promise.all([\n        axiosInstance.get(API_ENDPOINTS.LIFECYCLE.BY_USER(userId)),\n        axiosInstance.get(API_ENDPOINTS.LIFECYCLE.CERTIFICATES(userId)),\n        axiosInstance.get(API_ENDPOINTS.LIFECYCLE.CONTRACTS(userId)),\n        axiosInstance.get(API_ENDPOINTS.TASKS.BY_USER(userId)).catch(() => ({ data: [] })) // Optional, falls fehlschlgt\n      ]);\n      \n      setLifecycleData(lifecycleResponse.data);\n      setCertificates(certsResponse.data?.certificates || []);\n      setContracts(contractsResponse.data?.contracts || []);\n      \n      // Filtere Offboarding-Tasks (die 3 spezifischen Tasks)\n      const allTasks = tasksResponse.data || [];\n      const offboardingTaskTitles = [\n        'Crear certificado laboral',\n        'Realizar liquidacin final',\n        'Desafiliar de seguridad social'\n      ];\n      const filteredTasks = allTasks.filter((task: Task) => \n        offboardingTaskTitles.includes(task.title)\n      );\n      setOffboardingTasks(filteredTasks);\n      \n      // Prfe ob automatische Status-nderung ntig ist (wird im Backend gemacht, aber hier prfen wir fr UI-Feedback)\n      if (lifecycleResponse.data?.lifecycle?.status === 'onboarding' && lifecycleResponse.data?.progress?.percent === 100) {\n        // Status wird automatisch im Backend gendert, lade Daten nach kurzer Verzgerung neu\n        setTimeout(() => {\n          fetchData();\n        }, 1000);\n      }\n      \n      setError(null);\n    } catch (err: any) {\n      console.error('Fehler beim Laden der Lebenszyklus-Daten:', err);\n      setError(err.response?.data?.message || 'Fehler beim Laden der Daten');\n      showMessage('Fehler beim Laden der Daten', 'error');\n    } finally {\n      setLoading(false);\n      fetchDataRef.current = false;\n    }\n  }, [userId]); // showMessage entfernt, da es sich ndern kann\n\n  useEffect(() => {\n    fetchDataRef.current = false; // Reset beim userId-Wechsel\n    fetchData();\n  }, [fetchData]);\n\n  const handleDownloadCertificate = async (certId: number) => {\n    setDownloadingCertId(certId);\n    try {\n      const response = await axiosInstance.get(\n        API_ENDPOINTS.LIFECYCLE.CERTIFICATE_DOWNLOAD(userId, certId),\n        { responseType: 'blob' }\n      );\n      \n      const blob = new Blob([response.data], { type: 'application/pdf' });\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = `arbeitszeugnis-${certId}.pdf`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n      \n      showMessage('Arbeitszeugnis erfolgreich heruntergeladen', 'success');\n    } catch (err: any) {\n      console.error('Fehler beim Herunterladen:', err);\n      showMessage('Fehler beim Herunterladen des Arbeitszeugnisses', 'error');\n    } finally {\n      setDownloadingCertId(null);\n    }\n  };\n\n  const handleEditContractDates = () => {\n    if (!lifecycleData?.lifecycle) return;\n    \n    setEditingContractStartDate(\n      lifecycleData.lifecycle.contractStartDate \n        ? new Date(lifecycleData.lifecycle.contractStartDate).toISOString().split('T')[0]\n        : ''\n    );\n    setEditingContractEndDate(\n      lifecycleData.lifecycle.contractEndDate \n        ? new Date(lifecycleData.lifecycle.contractEndDate).toISOString().split('T')[0]\n        : ''\n    );\n    setIsEditContractDatesModalOpen(true);\n  };\n\n  const handleSaveContractDates = async () => {\n    try {\n      await axiosInstance.put(API_ENDPOINTS.LIFECYCLE.STATUS(userId), {\n        status: lifecycleData?.lifecycle.status || 'active',\n        contractStartDate: editingContractStartDate || null,\n        contractEndDate: editingContractEndDate || null\n      });\n      \n      showMessage('Vertragsdaten erfolgreich aktualisiert', 'success');\n      setIsEditContractDatesModalOpen(false);\n      fetchData();\n    } catch (err: any) {\n      console.error('Fehler beim Speichern der Vertragsdaten:', err);\n      showMessage('Fehler beim Speichern der Vertragsdaten', 'error');\n    }\n  };\n\n\n  const handleDownloadContract = async (contractId: number) => {\n    setDownloadingContractId(contractId);\n    try {\n      const response = await axiosInstance.get(\n        API_ENDPOINTS.LIFECYCLE.CONTRACT_DOWNLOAD(userId, contractId),\n        { responseType: 'blob' }\n      );\n      \n      const blob = new Blob([response.data], { type: 'application/pdf' });\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = `arbeitsvertrag-${contractId}.pdf`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n      \n      showMessage('Arbeitsvertrag erfolgreich heruntergeladen', 'success');\n    } catch (err: any) {\n      console.error('Fehler beim Herunterladen:', err);\n      showMessage('Fehler beim Herunterladen des Arbeitsvertrags', 'error');\n    } finally {\n      setDownloadingContractId(null);\n    }\n  };\n\n  const getStatusBadge = (status: string, clickable: boolean = false) => {\n    const statusConfig: Record<string, { color: string; labelKey: string }> = {\n      onboarding: { color: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300', labelKey: 'lifecycle.status.onboarding' },\n      active: { color: 'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300', labelKey: 'lifecycle.status.active' },\n      contract_change: { color: 'bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300', labelKey: 'lifecycle.status.contract_change' },\n      offboarding: { color: 'bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300', labelKey: 'lifecycle.status.offboarding' },\n      archived: { color: 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300', labelKey: 'lifecycle.status.archived' }\n    };\n\n    const config = statusConfig[status] || { color: 'bg-gray-100 text-gray-800', labelKey: status };\n    \n    return (\n      <span className={`px-3 py-1 rounded-full text-sm font-medium ${config.color} ${clickable ? 'cursor-pointer hover:opacity-80' : ''}`}>\n        {t(config.labelKey) || status}\n      </span>\n    );\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('de-DE', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex justify-center items-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\n          <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!lifecycleData) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <p className=\"text-gray-500 dark:text-gray-400\">{t('lifecycle.noData', { defaultValue: 'Keine Lebenszyklus-Daten verfgbar' })}</p>\n      </div>\n    );\n  }\n\n  // Extrahiere socialSecurityRegistrations aus lifecycle (falls direkt vorhanden) oder aus lifecycleData\n  const socialSecurityRegistrations = lifecycleData.lifecycle?.socialSecurityRegistrations || lifecycleData.socialSecurityRegistrations || [];\n  const { lifecycle, progress } = lifecycleData;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Status-Box */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold dark:text-white flex items-center\">\n            <BuildingOfficeIcon className=\"h-5 w-5 mr-2\" />\n            {t('lifecycle.statusTitle')}\n          </h3>\n          <div className=\"flex items-center space-x-3\">\n          {/* Status-Badge (nur Anzeige, keine nderung mglich) */}\n          {getStatusBadge(lifecycle.status)}\n            {/* Offboarding-Start-Button (nur fr HR/Admin, nur wenn Status = \"active\") */}\n            {(isHR() || isAdmin()) && lifecycle.status === 'active' && (\n              <div className=\"relative group\">\n                <button\n                  onClick={() => setIsOffboardingStartModalOpen(true)}\n                  className=\"p-2 bg-orange-600 dark:bg-orange-700 text-white rounded-md hover:bg-orange-700 dark:hover:bg-orange-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500\"\n                >\n                  <ArrowRightIcon className=\"h-5 w-5\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {t('lifecycle.offboarding.startButton', { defaultValue: 'Offboarding starten' })}\n                </div>\n              </div>\n            )}\n            {/* Offboarding-Abschluss-Button (nur fr HR/Admin, nur wenn Status = \"offboarding\") */}\n            {(isHR() || isAdmin()) && lifecycle.status === 'offboarding' && (\n              <div className=\"relative group\">\n                <button\n                  onClick={() => setIsOffboardingCompleteModalOpen(true)}\n                  className=\"p-2 bg-red-600 dark:bg-red-700 text-white rounded-md hover:bg-red-700 dark:hover:bg-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\n                >\n                  <CheckCircleIcon className=\"h-5 w-5\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {t('lifecycle.offboarding.complete.button', { defaultValue: 'Offboarding abschlieen' })}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"space-y-2 text-sm\">\n          {lifecycle.onboardingStartedAt && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.onboardingStarted')}</span>\n              <span className=\"dark:text-white\">\n                {new Date(lifecycle.onboardingStartedAt).toLocaleDateString('de-DE')}\n              </span>\n            </div>\n          )}\n          {lifecycle.onboardingCompletedAt && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.onboardingCompleted')}</span>\n              <span className=\"dark:text-white\">\n                {new Date(lifecycle.onboardingCompletedAt).toLocaleDateString('de-DE')}\n              </span>\n            </div>\n          )}\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.contractStart')}</span>\n            <div className=\"flex items-center space-x-2\">\n              {lifecycle.contractStartDate ? (\n                <span className=\"dark:text-white\">\n                  {new Date(lifecycle.contractStartDate).toLocaleDateString('de-DE')}\n                </span>\n              ) : (\n                <span className=\"text-gray-400 italic text-sm\">{t('lifecycle.notSet', { defaultValue: 'Nicht gesetzt' })}</span>\n              )}\n              {(isHR() || isAdmin()) && (\n                <div className=\"relative group\">\n                  <button\n                    onClick={() => handleEditContractDates()}\n                    className=\"p-1 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition\"\n                  >\n                    <PencilIcon className=\"h-4 w-4\" />\n                  </button>\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                    {t('lifecycle.edit', { defaultValue: 'Bearbeiten' })}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.contractEnd')}</span>\n            <div className=\"flex items-center space-x-2\">\n              {lifecycle.contractEndDate ? (\n                <span className=\"dark:text-white\">\n                  {new Date(lifecycle.contractEndDate).toLocaleDateString('de-DE')}\n                </span>\n              ) : (\n                <span className=\"text-gray-400 italic text-sm\">{t('lifecycle.notSet', { defaultValue: 'Nicht gesetzt' })}</span>\n              )}\n              {(isHR() || isAdmin()) && (\n                <div className=\"relative group\">\n                  <button\n                    onClick={() => handleEditContractDates()}\n                    className=\"p-1 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition\"\n                  >\n                    <PencilIcon className=\"h-4 w-4\" />\n                  </button>\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                    {t('lifecycle.edit', { defaultValue: 'Bearbeiten' })}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n          {lifecycle.offboardingStartedAt && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.offboardingStarted')}</span>\n              <span className=\"dark:text-white\">\n                {new Date(lifecycle.offboardingStartedAt).toLocaleDateString('de-DE')}\n              </span>\n            </div>\n          )}\n          {lifecycle.exitDate && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.exitDate')}</span>\n              <span className=\"dark:text-white\">\n                {new Date(lifecycle.exitDate).toLocaleDateString('de-DE')}\n              </span>\n            </div>\n          )}\n          {lifecycle.exitReason && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.exitReason')}</span>\n              <span className=\"dark:text-white\">{lifecycle.exitReason}</span>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Progress-Bar - Onboarding */}\n      {lifecycle.status === 'onboarding' && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n          <h3 className=\"text-lg font-semibold dark:text-white mb-4\">{t('lifecycle.progressTitle')}</h3>\n          <div className=\"space-y-2\">\n            <div className=\"flex justify-between text-sm mb-2\">\n              <span className=\"text-gray-600 dark:text-gray-400\">\n                {t('lifecycle.progressSteps', { completed: progress.completed, total: progress.total })}\n              </span>\n              <span className=\"font-medium dark:text-white\">{progress.percent}%</span>\n            </div>\n            <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3\">\n              <div\n                className=\"bg-blue-600 h-3 rounded-full transition-all duration-300\"\n                style={{ width: `${progress.percent}%` }}\n              ></div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Progress-Bar - Offboarding */}\n      {lifecycle.status === 'offboarding' && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n          <h3 className=\"text-lg font-semibold dark:text-white mb-4\">{t('lifecycle.offboarding.progressTitle', { defaultValue: 'Offboarding-Fortschritt' })}</h3>\n          <div className=\"space-y-4\">\n            {/* Progress-Bar */}\n            {(() => {\n              const completedTasks = offboardingTasks.filter(task => task.status === 'done').length;\n              const totalTasks = offboardingTasks.length || 3; // Fallback: 3 Tasks\n              const percent = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;\n              \n              return (\n                <>\n                  <div className=\"flex justify-between text-sm mb-2\">\n                    <span className=\"text-gray-600 dark:text-gray-400\">\n                      {t('lifecycle.offboarding.progressSteps', { completed: completedTasks, total: totalTasks }) || `${completedTasks} von ${totalTasks} Schritten abgeschlossen`}\n                    </span>\n                    <span className=\"font-medium dark:text-white\">{percent}%</span>\n                  </div>\n                  <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3\">\n                    <div\n                      className=\"bg-orange-600 h-3 rounded-full transition-all duration-300\"\n                      style={{ width: `${percent}%` }}\n                    ></div>\n                  </div>\n                </>\n              );\n            })()}\n            \n            {/* Offboarding-Tasks Liste */}\n            {offboardingTasks.length > 0 && (\n              <div className=\"mt-4 space-y-2\">\n                <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  {t('lifecycle.offboarding.tasksTitle', { defaultValue: 'Offboarding-Aufgaben' })}\n                </h4>\n                {offboardingTasks.map((task) => {\n                  const isCompleted = task.status === 'done';\n                  return (\n                    <div\n                      key={task.id}\n                      className={`flex items-center justify-between p-3 rounded-lg border ${\n                        isCompleted\n                          ? 'bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800'\n                          : 'bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600'\n                      }`}\n                    >\n                      <div className=\"flex items-center space-x-3 flex-1\">\n                        {isCompleted ? (\n                          <CheckCircleIcon className=\"h-5 w-5 text-green-600 dark:text-green-400 flex-shrink-0\" />\n                        ) : (\n                          <ClockIcon className=\"h-5 w-5 text-orange-600 dark:text-orange-400 flex-shrink-0\" />\n                        )}\n                        <div className=\"flex-1 min-w-0\">\n                          <p className={`text-sm font-medium ${isCompleted ? 'text-green-800 dark:text-green-200' : 'text-gray-800 dark:text-gray-200'}`}>\n                            {task.title}\n                          </p>\n                          {task.description && (\n                            <p className=\"text-xs text-gray-600 dark:text-gray-400 mt-1 truncate\">\n                              {task.description}\n                            </p>\n                          )}\n                        </div>\n                      </div>\n                      <span className={`text-xs px-2 py-1 rounded ${\n                        isCompleted\n                          ? 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200'\n                          : 'bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200'\n                      }`}>\n                        {isCompleted\n                          ? t('common.done', { defaultValue: 'Abgeschlossen' })\n                          : t('common.open', { defaultValue: 'Offen' })}\n                      </span>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Dokumente - Arbeitszeugnisse */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold dark:text-white flex items-center\">\n            <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n            {t('lifecycle.certificates')}\n          </h3>\n          {(isHR() || isAdmin()) && (\n            <div className=\"relative group\">\n              <button\n                onClick={() => setIsCertificateCreateModalOpen(true)}\n                className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n                style={{ width: '30.19px', height: '30.19px' }}\n                aria-label={t('lifecycle.createCertificate')}\n              >\n                <PlusIcon className=\"h-4 w-4\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('lifecycle.createCertificate')}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {certificates.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n            <DocumentTextIcon className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n            <p>{t('lifecycle.noCertificates')}</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {certificates.map((cert) => (\n              <div\n                key={cert.id}\n                className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition\"\n              >\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <h4 className=\"font-medium dark:text-white\">\n                        {t('lifecycle.certificate')}\n                        {cert.certificateType !== 'employment' && ` (${cert.certificateType})`}\n                      </h4>\n                      {cert.isLatest && (\n                        <span className=\"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 flex items-center\">\n                          <CheckCircleIcon className=\"h-3 w-3 mr-1\" />\n                          {t('lifecycle.current')}\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"space-y-1 text-sm text-gray-600 dark:text-gray-400\">\n                      <div className=\"flex items-center space-x-2\">\n                        <CalendarIcon className=\"h-4 w-4\" />\n                        <span>{t('lifecycle.issuedOn')} {formatDate(cert.issueDate)}</span>\n                      </div>\n                      {cert.generatedByUser && (\n                        <div className=\"flex items-center space-x-2\">\n                          <UserIcon className=\"h-4 w-4\" />\n                          <span>\n                            {t('lifecycle.createdBy')} {cert.generatedByUser.firstName} {cert.generatedByUser.lastName}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2 ml-4\">\n                    {(isHR() || isAdmin()) && (\n                      <div className=\"relative group\">\n                        <button\n                          onClick={() => setEditingCertificate(cert)}\n                          className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition\"\n                        >\n                          <PencilIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('lifecycle.edit')}\n                        </div>\n                      </div>\n                    )}\n                    <div className=\"relative group\">\n                      <button\n                        onClick={() => handleDownloadCertificate(cert.id)}\n                        disabled={downloadingCertId === cert.id}\n                        className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        {downloadingCertId === cert.id ? (\n                          <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600\"></div>\n                        ) : (\n                          <ArrowDownTrayIcon className=\"h-5 w-5\" />\n                        )}\n                      </button>\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                        {t('lifecycle.download')}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Dokumente - Arbeitsvertrge */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center mb-4\">\n          {(isHR() || isAdmin()) && (\n            <div className=\"relative group mr-3\">\n              <button\n                onClick={() => setIsContractCreateModalOpen(true)}\n                className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n                style={{ width: '30.19px', height: '30.19px' }}\n                aria-label={t('lifecycle.createContract')}\n              >\n                <PlusIcon className=\"h-4 w-4\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('lifecycle.createContract')}\n              </div>\n            </div>\n          )}\n          <h3 className=\"text-lg font-semibold dark:text-white flex items-center\">\n            <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n            {t('lifecycle.contracts')}\n          </h3>\n        </div>\n\n        {contracts.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n            <DocumentTextIcon className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n            <p>{t('lifecycle.noContracts')}</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {contracts.map((contract) => (\n              <div\n                key={contract.id}\n                className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition\"\n              >\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <h4 className=\"font-medium dark:text-white\">\n                        {t('lifecycle.contract')}\n                        {contract.contractType !== 'employment' && ` (${contract.contractType})`}\n                      </h4>\n                      {contract.isLatest && (\n                        <span className=\"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 flex items-center\">\n                          <CheckCircleIcon className=\"h-3 w-3 mr-1\" />\n                          {t('lifecycle.current')}\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"space-y-1 text-sm text-gray-600 dark:text-gray-400\">\n                      <div className=\"flex items-center space-x-2\">\n                        <CalendarIcon className=\"h-4 w-4\" />\n                        <span>\n                          {formatDate(contract.startDate)}\n                          {contract.endDate && ` - ${formatDate(contract.endDate)}`}\n                        </span>\n                      </div>\n                      {contract.position && (\n                        <div>{t('lifecycle.position')} {contract.position}</div>\n                      )}\n                      {contract.salary && (\n                        <div>{t('lifecycle.salary')} {contract.salary.toLocaleString('de-DE', { style: 'currency', currency: 'EUR' })}</div>\n                      )}\n                      {contract.workingHours && (\n                        <div>{t('lifecycle.workingHours')} {contract.workingHours}h/Woche</div>\n                      )}\n                      {contract.generatedByUser && (\n                        <div className=\"flex items-center space-x-2\">\n                          <UserIcon className=\"h-4 w-4\" />\n                          <span>\n                            {t('lifecycle.createdBy')} {contract.generatedByUser.firstName} {contract.generatedByUser.lastName}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2 ml-4\">\n                    {(isHR() || isAdmin()) && (\n                      <div className=\"relative group\">\n                        <button\n                          onClick={() => setEditingContract(contract)}\n                          className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition\"\n                        >\n                          <PencilIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('lifecycle.edit')}\n                        </div>\n                      </div>\n                    )}\n                    <div className=\"relative group\">\n                      <button\n                        onClick={() => handleDownloadContract(contract.id)}\n                        disabled={downloadingContractId === contract.id}\n                        className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        {downloadingContractId === contract.id ? (\n                          <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600\"></div>\n                        ) : (\n                          <ArrowDownTrayIcon className=\"h-5 w-5\" />\n                        )}\n                      </button>\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                        {t('lifecycle.download')}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Social Security Editor - Nur fr Legal/Admin */}\n      {lifecycleData?.lifecycle && (\n        <SocialSecurityEditor\n          userId={userId}\n          lifecycleId={lifecycleData.lifecycle.id}\n          onUpdate={() => fetchData(true)}\n        />\n      )}\n\n      {/* Modals */}\n      <CertificateCreationModal\n        isOpen={isCertificateCreateModalOpen}\n        onClose={() => setIsCertificateCreateModalOpen(false)}\n        onCertificateCreated={() => {\n          fetchData();\n          setIsCertificateCreateModalOpen(false);\n        }}\n        userId={userId}\n        userName={userName}\n      />\n\n      <ContractCreationModal\n        isOpen={isContractCreateModalOpen}\n        onClose={() => setIsContractCreateModalOpen(false)}\n        onContractCreated={() => {\n          fetchData();\n          setIsContractCreateModalOpen(false);\n        }}\n        userId={userId}\n        userName={userName}\n      />\n\n      {editingCertificate && (\n        <CertificateEditModal\n          isOpen={!!editingCertificate}\n          onClose={() => setEditingCertificate(null)}\n          onCertificateUpdated={() => {\n            fetchData();\n            setEditingCertificate(null);\n          }}\n          userId={userId}\n          certificate={editingCertificate}\n        />\n      )}\n\n      {editingContract && (\n        <ContractEditModal\n          isOpen={!!editingContract}\n          onClose={() => setEditingContract(null)}\n          onContractUpdated={() => {\n            fetchData();\n            setEditingContract(null);\n          }}\n          userId={userId}\n          contract={editingContract}\n        />\n      )}\n\n      {/* Offboarding-Start-Modal */}\n      <OffboardingStartModal\n        isOpen={isOffboardingStartModalOpen}\n        onClose={() => setIsOffboardingStartModalOpen(false)}\n        onOffboardingStarted={() => {\n          fetchData();\n          setIsOffboardingStartModalOpen(false);\n        }}\n        userId={userId}\n        userName={userName}\n      />\n      \n      {/* Offboarding-Abschluss-Modal */}\n      <OffboardingCompleteModal\n        isOpen={isOffboardingCompleteModalOpen}\n        onClose={() => setIsOffboardingCompleteModalOpen(false)}\n        onOffboardingCompleted={() => {\n          fetchData();\n          setIsOffboardingCompleteModalOpen(false);\n        }}\n        userId={userId}\n        userName={userName}\n        offboardingTasks={offboardingTasks}\n      />\n\n      {/* Modal zum Bearbeiten der Vertragsdaten */}\n      {isEditContractDatesModalOpen && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md mx-4\">\n            <h2 className=\"text-xl font-semibold dark:text-white mb-4\">\n              {t('lifecycle.editContractDates', { defaultValue: 'Vertragsdaten bearbeiten' })}\n            </h2>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  {t('lifecycle.contractStart', { defaultValue: 'Vertragsbeginn' })} *\n                </label>\n                <input\n                  type=\"date\"\n                  value={editingContractStartDate}\n                  onChange={(e) => setEditingContractStartDate(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  {t('lifecycle.contractEnd', { defaultValue: 'Vertragsende' })} (optional)\n                </label>\n                <input\n                  type=\"date\"\n                  value={editingContractEndDate}\n                  onChange={(e) => setEditingContractEndDate(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                />\n                <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                  {t('lifecycle.contractEndHint', { defaultValue: 'Nur bei befristeten Vertrgen ausfllen' })}\n                </p>\n              </div>\n            </div>\n            \n            <div className=\"flex justify-end space-x-3 mt-6\">\n              <button\n                onClick={() => setIsEditContractDatesModalOpen(false)}\n                className=\"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition\"\n              >\n                {t('common.cancel', { defaultValue: 'Abbrechen' })}\n              </button>\n              <button\n                onClick={handleSaveContractDates}\n                disabled={!editingContractStartDate}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {t('common.save', { defaultValue: 'Speichern' })}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LifecycleView;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { userApi, roleApi, branchApi } from '../api/apiClient.ts';\nimport { User, Role } from '../types/interfaces.ts';\nimport { CheckIcon, PlusIcon, PencilIcon, DocumentTextIcon, UserCircleIcon, ShieldCheckIcon, XMarkIcon, ArrowPathIcon, BuildingOfficeIcon, MapPinIcon } from '@heroicons/react/24/outline';\nimport useMessage from '../hooks/useMessage.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport IdentificationDocumentList from './IdentificationDocumentList.tsx';\nimport IdentificationDocumentForm from './IdentificationDocumentForm.tsx';\nimport LifecycleView from './LifecycleView.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface UserManagementTabProps {\n  onError: (error: string) => void;\n}\n\n// Lnder und Sprachen werden dynamisch aus bersetzungen geladen\n\n// Definiere Rollen, die immer vorhanden sein sollten (z.B. Admin-Rolle)\nconst fixedRoles = [1, 2, 999]; // Admin (1), User (2) und Hamburger (999) sind fixe Rollen\n\n// Vertragstypen fr Kolumbien (CO)\nconst CONTRACT_TYPES = [\n  { code: 'tiempo_completo', name: 'Tiempo Completo (>21 Tage/Monat)' },\n  { code: 'tiempo_parcial_7', name: 'Tiempo Parcial (7 Tage/Monat)' },\n  { code: 'tiempo_parcial_14', name: 'Tiempo Parcial (14 Tage/Monat)' },\n  { code: 'tiempo_parcial_21', name: 'Tiempo Parcial (21 Tage/Monat)' },\n  { code: 'prestacion_de_servicios', name: 'Prestacin de Servicios' },\n  { code: 'externo', name: 'Externo' }\n];\n\n// Gemeinsame Debug-Komponente hinzufgen\nconst RoleDebugInfo = ({ title, data }: { title: string, data: any }) => (\n  <div className=\"mb-2 p-2 border border-gray-300 rounded bg-gray-50\">\n    <h5 className=\"font-bold text-sm\">{title}</h5>\n    <pre className=\"text-xs overflow-auto max-h-24\">\n      {JSON.stringify(data, null, 2)}\n    </pre>\n  </div>\n);\n\nconst UserManagementTab = ({ onError }: UserManagementTabProps): JSX.Element => {\n  const { t } = useTranslation();\n  \n  // Lnder fr die Auswahl (dynamisch aus bersetzungen)\n  const COUNTRIES = [\n    { code: 'CO', name: t('countries.CO') },\n    { code: 'CH', name: t('countries.CH') },\n    { code: 'DE', name: t('countries.DE') },\n    { code: 'AT', name: t('countries.AT') }\n  ];\n\n  // Lnder fr die Payroll-Auswahl (dynamisch aus bersetzungen)\n  const PAYROLL_COUNTRIES = [\n    { code: 'CH', name: t('countries.CH') },\n    { code: 'CO', name: t('countries.CO') }\n  ];\n\n  // Sprachen fr die Auswahl (dynamisch aus bersetzungen)\n  const LANGUAGES = [\n    { code: 'es', name: t('languages.es') },\n    { code: 'de', name: t('languages.de') },\n    { code: 'en', name: t('languages.en') }\n  ];\n  \n  // Benutzer-States\n  const [users, setUsers] = useState<User[]>([]);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [userFormData, setUserFormData] = useState<Partial<User>>({});\n  const [isEditingUser, setIsEditingUser] = useState(false);\n  const [selectedRoles, setSelectedRoles] = useState<number[]>([]);\n  const [lifecycleRefreshKey, setLifecycleRefreshKey] = useState(0);\n  const [isDebugMode, setIsDebugMode] = useState(false);\n  const [roleWarning, setRoleWarning] = useState<string | null>(null);\n  const { showMessage } = useMessage();\n  const { isAdmin } = usePermissions();\n  \n  // Neuer State fr Rollen\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [loadingRoles, setLoadingRoles] = useState(false);\n  \n  // State fr Branches\n  const [branches, setBranches] = useState<Array<{ id: number; name: string }>>([]);\n  const [loadingBranches, setLoadingBranches] = useState(false);\n  const [selectedBranches, setSelectedBranches] = useState<number[]>([]);\n  \n  // Neuer State fr die aktive Unterseite\n  const [activeUserTab, setActiveUserTab] = useState<'details' | 'documents' | 'roles' | 'branches' | 'lifecycle'>('details');\n  \n  // State fr Active/Inactive Filter\n  const [userFilterTab, setUserFilterTab] = useState<'active' | 'inactive'>('active');\n  \n  // State fr Benutzererstellung\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n  const [isMobile, setIsMobile] = useState<boolean>(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [showDocumentUpload, setShowDocumentUpload] = useState(false);\n  const [newUserFormData, setNewUserFormData] = useState({\n    email: '',\n    password: '',\n    firstName: '',\n    lastName: ''\n  });\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isCreateModalOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isCreateModalOpen, openSidepane, closeSidepane]);\n\n  // Alle Benutzer (fr Filterung)\n  const [allUsers, setAllUsers] = useState<User[]>([]);\n\n  // Initialisierung - Laden von Benutzern\n  useEffect(() => {\n    fetchAllUsers();\n  }, []);\n\n  // Benutzerdaten laden - Verwende gefilterten Endpoint, damit nur Benutzer der eigenen Organisation angezeigt werden\n  const fetchAllUsers = async () => {\n    try {\n      const response = await userApi.getAll();\n      setAllUsers(response.data);\n      // Initial: Nur aktive Benutzer anzeigen\n      filterUsersByActiveStatus('active', response.data);\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Benutzer nach Active/Inactive filtern und alphabetisch sortieren\n  const filterUsersByActiveStatus = (status: 'active' | 'inactive', usersToFilter: User[] = allUsers) => {\n    const filtered = usersToFilter.filter(user => {\n      const isActive = user.active !== undefined ? user.active : true; // Default: true\n      return status === 'active' ? isActive : !isActive;\n    });\n    \n    // Alphabetisch sortieren nach username, dann firstName\n    const sorted = filtered.sort((a, b) => {\n      const aUsername = (a.username || '').toLowerCase();\n      const bUsername = (b.username || '').toLowerCase();\n      const aFirstName = (a.firstName || '').toLowerCase();\n      const bFirstName = (b.firstName || '').toLowerCase();\n      \n      // Zuerst nach username sortieren\n      if (aUsername !== bUsername) {\n        return aUsername.localeCompare(bUsername);\n      }\n      // Wenn username gleich, nach Vorname sortieren\n      return aFirstName.localeCompare(bFirstName);\n    });\n    \n    setUsers(sorted);\n  };\n\n  // Wenn Filter-Tab wechselt, Benutzerliste neu filtern\n  useEffect(() => {\n    if (allUsers.length > 0) {\n      filterUsersByActiveStatus(userFilterTab, allUsers);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userFilterTab]);\n  \n  // Rollen laden - Wird erst aufgerufen, wenn ein Benutzer ausgewhlt wurde\n  const fetchRoles = async () => {\n    try {\n      setLoadingRoles(true);\n      \n      // Fallback-Rollen fr den Notfall bereithalten\n      const fallbackRoles = [\n        { id: 1, name: 'admin', description: 'Administrator mit allen Rechten', permissions: [] },\n        { id: 2, name: 'user', description: 'Standardbenutzer', permissions: [] },\n        { id: 999, name: 'hamburger', description: 'Hamburger-Rolle fr neue Benutzer', permissions: [] }\n      ];\n      \n      try {\n        const response = await roleApi.getAll();\n        if (response.data && Array.isArray(response.data) && response.data.length > 0) {\n          setRoles(response.data);\n          console.log(`${response.data.length} Rollen erfolgreich geladen`);\n        } else {\n          console.warn('Keine Rollen vom Server erhalten, verwende Fallback');\n          setRoles(fallbackRoles);\n        }\n      } catch (error) {\n        console.warn('Fehler beim Laden der Rollen, verwende Fallback:', error);\n        setRoles(fallbackRoles);\n      }\n    } finally {\n      setLoadingRoles(false);\n    }\n  };\n\n  // Branches laden - Wird erst aufgerufen, wenn ein Benutzer ausgewhlt wurde\n  const fetchBranches = async () => {\n    try {\n      setLoadingBranches(true);\n      \n      try {\n        const response = await branchApi.getAll();\n        if (response.data && Array.isArray(response.data) && response.data.length > 0) {\n          setBranches(response.data);\n          console.log(`${response.data.length} Branches erfolgreich geladen`);\n        } else {\n          console.warn('Keine Branches vom Server erhalten');\n          setBranches([]);\n        }\n      } catch (error) {\n        console.warn('Fehler beim Laden der Branches:', error);\n        setBranches([]);\n      }\n    } finally {\n      setLoadingBranches(false);\n    }\n  };\n\n  // Detaillierte Benutzerdaten laden\n  const fetchUserDetails = async (userId: number) => {\n    try {\n      if (!userId || isNaN(userId)) {\n        setSelectedUser(null);\n        return;\n      }\n      \n      console.log('Lade Benutzerdetails fr ID:', userId);\n      const response = await userApi.getById(userId);\n      \n      const userData = {\n        ...response.data,\n        active: response.data.active !== undefined ? response.data.active : true,\n        birthday: response.data.birthday ? new Date(response.data.birthday).toISOString().split('T')[0] : null\n      };\n      \n      // Extrahiere Rollen-IDs aus der verschachtelten Struktur\n      let roleIds: number[] = [];\n      \n      if (response.data.roles && Array.isArray(response.data.roles)) {\n        console.log('Rollenstruktur (Typ):', typeof response.data.roles, 'Lnge:', response.data.roles.length);\n        \n        // Struktur: roles: [{ role: { id, name, ... } }]\n        if (response.data.roles.length > 0 && response.data.roles[0].role) {\n          roleIds = response.data.roles.map(userRole => userRole.role.id);\n          console.log('Extrahierte Rollen-IDs aus verschachtelter Struktur:', roleIds);\n        }\n        // Fallback fr andere Formate\n        else if (response.data.roles.length > 0) {\n          if (typeof response.data.roles[0] === 'number') {\n            roleIds = response.data.roles;\n          } else if (response.data.roles[0].roleId) {\n            roleIds = response.data.roles.map(role => role.roleId);\n          } else if (response.data.roles[0].id) {\n            roleIds = response.data.roles.map(role => role.id);\n          }\n        }\n      } else {\n        console.warn('Rollen fehlen oder sind kein Array:', response.data.roles);\n      }\n      \n      // Wenn keine Rollen gefunden wurden, probieren wir, diese aus roles in der Response direkt zu extrahieren\n      if (roleIds.length === 0 && response.data.role) {\n        console.log('Versuche Rollen aus role-Eigenschaft zu extrahieren:', response.data.role);\n        if (Array.isArray(response.data.role)) {\n          roleIds = response.data.role.map((r: any) => r.id);\n        } else if (typeof response.data.role === 'object' && response.data.role !== null) {\n          roleIds = [response.data.role.id];\n        }\n      }\n      \n      console.log('Endgltige extrahierte Rollen-IDs:', roleIds);\n      \n      // Extrahiere Branch-IDs aus der verschachtelten Struktur\n      let branchIds: number[] = [];\n      \n      if (response.data.branches && Array.isArray(response.data.branches)) {\n        console.log('Branches-Struktur (Typ):', typeof response.data.branches, 'Lnge:', response.data.branches.length);\n        \n        // Struktur: branches: [{ branch: { id, name, ... } }]\n        if (response.data.branches.length > 0 && response.data.branches[0].branch) {\n          branchIds = response.data.branches.map(userBranch => userBranch.branch.id);\n          console.log('Extrahierte Branch-IDs aus verschachtelter Struktur:', branchIds);\n        }\n        // Fallback fr andere Formate\n        else if (response.data.branches.length > 0) {\n          if (typeof response.data.branches[0] === 'number') {\n            branchIds = response.data.branches;\n          } else if (response.data.branches[0].branchId) {\n            branchIds = response.data.branches.map(branch => branch.branchId);\n          } else if (response.data.branches[0].id) {\n            branchIds = response.data.branches.map(branch => branch.id);\n          }\n        }\n      } else {\n        console.warn('Branches fehlen oder sind kein Array:', response.data.branches);\n      }\n      \n      console.log('Endgltige extrahierte Branch-IDs:', branchIds);\n      \n      setSelectedUser(userData);\n      setUserFormData(userData);\n      setSelectedRoles(roleIds);\n      setSelectedBranches(branchIds);\n      \n      // Rollen nur einmal laden, wenn sie noch nicht geladen wurden\n      if (roles.length === 0) {\n        await fetchRoles();\n      }\n      \n      // Branches nur einmal laden, wenn sie noch nicht geladen wurden\n      if (branches.length === 0) {\n        await fetchBranches();\n      }\n    } catch (err) {\n      console.error('Fehler beim Laden der Benutzerdetails:', err);\n      handleError(err);\n    }\n  };\n\n  // Fehlerbehandlung\n  const handleError = (err: any) => {\n    let message = 'Ein Fehler ist aufgetreten';\n    if (err.response?.data?.message) {\n      message = err.response.data.message;\n    } else if (err instanceof Error) {\n      message = err.message;\n    }\n    \n    // Fehler \"Ungltige Rollen-ID\" nicht weitergeben, wenn kein Benutzer ausgewhlt ist\n    if (message.includes('Ungltige Rollen-ID') && !selectedUser) {\n      console.warn('Fehler unterdrckt, da kein Benutzer ausgewhlt ist:', message);\n      return;\n    }\n    \n    onError(message);\n  };\n\n  // Handler fr Auswahl eines Benutzers\n  const handleUserSelect = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    const userId = parseInt(event.target.value, 10);\n    if (userId && !isNaN(userId)) {\n      fetchUserDetails(userId);\n    } else {\n      setSelectedUser(null);\n      setUserFormData({});\n      setSelectedRoles([]);\n    }\n  };\n\n  // Erweitere den handleUserInputChange\n  const handleUserInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value, type } = e.target;\n    let finalValue: string | number | null = value;\n    \n    // Korrekte Typenkonvertierung fr numerische Felder\n    if (type === 'number') {\n      // Wenn das Feld leer ist, setzen wir null statt NaN\n      finalValue = value === '' ? null : Number(value);\n    }\n    \n    setUserFormData({ ...userFormData, [name]: finalValue });\n    setIsEditingUser(true); // Aktiviere Edit-Modus sobald etwas gendert wird\n  };\n\n  // Abbrechen der Bearbeitung\n  const handleCancelEdit = () => {\n    if (selectedUser) {\n      setUserFormData({\n        ...selectedUser,\n        birthday: selectedUser.birthday ? new Date(selectedUser.birthday).toISOString().split('T')[0] : null\n      });\n    }\n    setIsEditingUser(false);\n  };\n\n  // Speichern der Benutzerdaten\n  const handleUserSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!selectedUser || !selectedUser.id) {\n      onError('Kein Benutzer ausgewhlt');\n      showMessage('Kein Benutzer ausgewhlt', 'error');\n      return;\n    }\n\n    try {\n      // Validierung\n      if (!userFormData.username?.trim()) throw new Error('Benutzername ist erforderlich');\n      if (!userFormData.email?.trim()) throw new Error('E-Mail ist erforderlich');\n      // firstName, lastName, birthday werden nur von KI aus Dokument gesetzt, nicht manuell validiert\n\n      // Bereite die Daten korrekt vor\n      // Contract, Salary, Normal Working Hours werden zu Lifecycle verschoben\n      // firstName, lastName, birthday werden nur von KI aus Dokument gesetzt, nicht manuell editierbar\n      const dataToSend = {\n        username: userFormData.username,\n        email: userFormData.email,\n        bankDetails: userFormData.bankDetails || null,\n        gender: userFormData.gender || null,\n        phoneNumber: userFormData.phoneNumber || null,\n        language: userFormData.language || null,\n        // Payroll-Felder bleiben (sind separate Sektion)\n        hourlyRate: userFormData.hourlyRate === null || userFormData.hourlyRate === undefined || userFormData.hourlyRate === '' as any\n          ? null \n          : typeof userFormData.hourlyRate === 'string' \n            ? userFormData.hourlyRate  // Keine Konvertierung fr Decimal-Werte, da sie als Strings bergeben werden sollten\n            : userFormData.hourlyRate.toString(),  // Konvertierung zu String fr Decimal-Werte\n        monthlySalary: userFormData.monthlySalary === null || userFormData.monthlySalary === undefined || userFormData.monthlySalary === '' as any\n          ? null \n          : typeof userFormData.monthlySalary === 'string' \n            ? parseFloat(userFormData.monthlySalary) \n            : userFormData.monthlySalary,\n        payrollCountry: userFormData.payrollCountry || null,\n        contractType: userFormData.contractType || null,\n      };\n\n      console.log('Sende Daten zum Server:', dataToSend);\n\n      // Update Benutzerdaten\n      const response = await userApi.update(selectedUser.id, dataToSend);\n\n      if (response.data) {\n        const updatedData = {\n          ...response.data,\n          birthday: response.data.birthday ? new Date(response.data.birthday).toISOString().split('T')[0] : null\n        };\n        setSelectedUser(updatedData);\n        setUserFormData({\n          ...updatedData,\n          birthday: updatedData.birthday ? new Date(updatedData.birthday).toISOString().split('T')[0] : null\n        });\n        \n        // Optimistisches Update: User in allUsers und users aktualisieren\n        setAllUsers(prevUsers => \n          prevUsers.map(user => \n            user.id === updatedData.id ? updatedData : user\n          )\n        );\n        \n        // Benutzerliste neu filtern basierend auf aktuellem Tab\n        filterUsersByActiveStatus(userFilterTab, allUsers.map(user => \n          user.id === updatedData.id ? updatedData : user\n        ));\n        \n        showMessage('Benutzerprofil erfolgreich aktualisiert', 'success');\n        setIsEditingUser(false);\n      }\n    } catch (err) {\n      console.error('Fehler beim Speichern der Benutzerdaten:', err);\n      // Bei Fehler: Rollback durch vollstndiges Reload\n      await fetchAllUsers();\n      if (err.response?.status === 400) {\n        const errorMsg = `Validierungsfehler: ${err.response?.data?.message || 'Bitte berprfe die eingegebenen Daten'}`;\n        onError(errorMsg);\n        showMessage(errorMsg, 'error');\n      } else if (err.response?.status === 404) {\n        onError('Benutzer wurde nicht gefunden');\n        showMessage('Benutzer wurde nicht gefunden', 'error');\n      } else {\n        handleError(err);\n      }\n    }\n  };\n\n  // Benutzer aktivieren/deaktivieren\n  const handleToggleActive = async () => {\n    if (!selectedUser || !selectedUser.id) {\n      showMessage('Kein Benutzer ausgewhlt', 'error');\n      return;\n    }\n\n    // Verhindere, dass der Admin-Benutzer sich selbst deaktiviert\n    const currentUserId = parseInt(localStorage.getItem('userId') || '0', 10);\n    if (selectedUser.id === currentUserId) {\n      showMessage('Du kannst dich nicht selbst deaktivieren', 'warning');\n      return;\n    }\n\n    try {\n      // Aktueller Status: wenn undefined, dann true (Default)\n      const currentActiveStatus = selectedUser.active !== undefined ? selectedUser.active : true;\n      const newActiveStatus = !currentActiveStatus;\n      \n      console.log('Toggle active:', { \n        currentActiveStatus, \n        newActiveStatus, \n        selectedUser,\n        selectedUserActive: selectedUser.active,\n        userId: selectedUser.id\n      });\n      \n      const updatePayload = { active: newActiveStatus };\n      console.log('Sending update payload:', updatePayload, 'Type of active:', typeof newActiveStatus);\n      \n      // Update Benutzer\n      const response = await userApi.update(selectedUser.id, updatePayload);\n      \n      console.log('Update response:', response.data);\n\n      if (response.data) {\n        const updatedData = {\n          ...response.data,\n          active: response.data.active !== undefined ? response.data.active : true,\n          birthday: response.data.birthday ? new Date(response.data.birthday).toISOString().split('T')[0] : null\n        };\n        \n        console.log('Updated user data:', updatedData);\n        \n        setSelectedUser(updatedData);\n        setUserFormData({\n          ...updatedData,\n          birthday: updatedData.birthday ? new Date(updatedData.birthday).toISOString().split('T')[0] : null\n        });\n        \n        // Optimistisches Update: Berechne den aktualisierten Array direkt (vor State-Update)\n        // Dies verhindert Race Conditions bei schnellen, aufeinanderfolgenden Updates\n        const updatedAllUsers = allUsers.map(user => \n          user.id === updatedData.id ? updatedData : user\n        );\n        \n        // Update State mit dem berechneten Array\n        setAllUsers(updatedAllUsers);\n        \n        // Filtere mit dem aktualisierten Array (nicht mit allUsers, da State-Update asynchron ist)\n        filterUsersByActiveStatus(userFilterTab, updatedAllUsers);\n        \n        // fetchAllUsers() entfernt - optimistisches Update reicht aus\n        // Backend speichert korrekt, State ist bereits aktualisiert\n        // Nur bei Fehler wird fetchAllUsers() aufgerufen (siehe catch-Block)\n        \n        showMessage(\n          newActiveStatus \n            ? 'Benutzer erfolgreich aktiviert' \n            : 'Benutzer erfolgreich deaktiviert',\n          'success'\n        );\n      }\n    } catch (err) {\n      console.error('Fehler beim Aktivieren/Deaktivieren des Benutzers:', err);\n      handleError(err);\n      // Bei Fehler: Benutzerliste neu laden\n      await fetchAllUsers();\n    }\n  };\n\n  // Toggle Rolle fr einen Benutzer (hinzufgen/entfernen)\n  const toggleRole = async (roleId: number) => {\n    if (!roleId || !selectedUser) return;\n    \n    // Prfe, ob es sich um eine fixe Rolle handelt - Nur fr Admin-Benutzer (ID: 1) sind Admin-Rollen (ID: 1) nicht entfernbar\n    if (roleId === 1 && selectedUser.id === 1 && selectedRoles.includes(roleId)) {\n      showMessage('Die Admin-Rolle kann vom Admin-Benutzer nicht entfernt werden', 'warning');\n      return;\n    }\n    \n    try {\n      console.log('Toggle Rolle:', roleId, 'fr Benutzer:', selectedUser.id);\n      console.log('Aktuelle ausgewhlte Rollen:', selectedRoles);\n      \n      // berprfen, ob die Rolle bereits zugewiesen ist\n      const isRoleSelected = selectedRoles.includes(roleId);\n      \n      const newSelectedRoles = isRoleSelected\n        ? selectedRoles.filter(id => id !== roleId)\n        : [...selectedRoles, roleId];\n      \n      console.log('Neue ausgewhlte Rollen:', newSelectedRoles);\n      \n      // Optimistisches UI-Update\n      setSelectedRoles(newSelectedRoles);\n      \n      // API-Aufruf zur Aktualisierung der Rollen\n      console.log('Sende Rollenaktualisierung an API:', { userId: selectedUser.id, roleIds: newSelectedRoles });\n      const response = await userApi.updateRoles(selectedUser.id, newSelectedRoles);\n      console.log('API-Antwort bei Rollenaktualisierung:', response.data);\n      \n      // Benutzer nach dem Update neu laden\n      await fetchUserDetails(selectedUser.id);\n      \n      // Erfolgsmeldung anzeigen mit showMessage statt setUserSuccess\n      showMessage(\n        isRoleSelected\n          ? `Rolle erfolgreich entfernt`\n          : `Rolle erfolgreich zugewiesen`,\n        'success'\n      );\n    } catch (error) {\n      // Bei Fehler auf vorherigen Zustand zurcksetzen\n      console.error('Fehler beim Aktualisieren der Rollen:', error);\n      fetchUserDetails(selectedUser.id);\n      handleError(error);\n      showMessage('Fehler beim Aktualisieren der Rollen', 'error');\n    }\n  };\n\n  // Toggle Branch fr einen Benutzer (hinzufgen/entfernen)\n  const toggleBranch = async (branchId: number) => {\n    if (!branchId || !selectedUser) return;\n    \n    try {\n      console.log('Toggle Branch:', branchId, 'fr Benutzer:', selectedUser.id);\n      console.log('Aktuelle ausgewhlte Branches:', selectedBranches);\n      \n      // berprfen, ob die Branch bereits zugewiesen ist\n      const isBranchSelected = selectedBranches.includes(branchId);\n      \n      const newSelectedBranches = isBranchSelected\n        ? selectedBranches.filter(id => id !== branchId)\n        : [...selectedBranches, branchId];\n      \n      console.log('Neue ausgewhlte Branches:', newSelectedBranches);\n      \n      // Optimistisches UI-Update\n      setSelectedBranches(newSelectedBranches);\n      \n      // API-Aufruf zur Aktualisierung der Branches\n      console.log('Sende Branch-Aktualisierung an API:', { userId: selectedUser.id, branchIds: newSelectedBranches });\n      const response = await userApi.updateBranches(selectedUser.id, newSelectedBranches);\n      console.log('API-Antwort bei Branch-Aktualisierung:', response.data);\n      \n      // Benutzer nach dem Update neu laden\n      await fetchUserDetails(selectedUser.id);\n      \n      // Erfolgsmeldung anzeigen\n      showMessage(\n        isBranchSelected\n          ? `Branch erfolgreich entfernt`\n          : `Branch erfolgreich zugewiesen`,\n        'success'\n      );\n    } catch (error) {\n      // Bei Fehler auf vorherigen Zustand zurcksetzen\n      console.error('Fehler beim Aktualisieren der Branches:', error);\n      fetchUserDetails(selectedUser.id);\n      handleError(error);\n      showMessage('Fehler beim Aktualisieren der Branches', 'error');\n    }\n  };\n\n  // Initialisiere FormData wenn Benutzer ausgewhlt wird\n  useEffect(() => {\n    if (selectedUser) {\n      setUserFormData({\n        ...selectedUser,\n        birthday: selectedUser.birthday ? new Date(selectedUser.birthday).toISOString().split('T')[0] : null\n      });\n      setIsEditingUser(false); // Starte im Read-Only Modus\n    }\n  }, [selectedUser]);\n\n  // Handler fr neue Benutzer-Formular\n  const handleNewUserInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setNewUserFormData({ ...newUserFormData, [name]: value });\n  };\n\n  // Neuen Benutzer erstellen\n  const handleCreateUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Validierung\n    if (!newUserFormData.email || !newUserFormData.password || !newUserFormData.firstName || !newUserFormData.lastName) {\n      showMessage('Bitte fllen Sie alle Felder aus', 'error');\n      return;\n    }\n\n    // E-Mail-Format validieren\n    if (!newUserFormData.email.match(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/)) {\n      showMessage('Ungltiges E-Mail-Format', 'error');\n      return;\n    }\n\n    try {\n      const response = await userApi.create(newUserFormData);\n      \n      // Optimistisches Update: User zu allUsers hinzufgen\n      if (response.data) {\n        const newUser = {\n          ...response.data,\n          active: response.data.active !== undefined ? response.data.active : true\n        };\n        setAllUsers(prevUsers => [newUser, ...prevUsers]);\n        \n        // Wenn aktueller Tab \"active\" ist und neuer User aktiv ist, auch zu users hinzufgen\n        if (userFilterTab === 'active' && newUser.active) {\n          setUsers(prevUsers => [newUser, ...prevUsers]);\n        }\n      }\n      \n      showMessage('Benutzer erfolgreich erstellt', 'success');\n      setIsCreateModalOpen(false);\n      setNewUserFormData({\n        email: '',\n        password: '',\n        firstName: '',\n        lastName: ''\n      });\n    } catch (err: any) {\n      // Bei Fehler: Rollback durch vollstndiges Reload\n      await fetchAllUsers();\n      const errorMessage = err.response?.data?.message || 'Fehler beim Erstellen des Benutzers';\n      showMessage(errorMessage, 'error');\n      onError(errorMessage);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 pb-6\">\n      {/* Die lokale Erfolgsmeldungs-Anzeige wird entfernt, da wir jetzt HeaderMessage verwenden */}\n      {/* {userSuccess && (\n        <div className=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4\">\n          {userSuccess}\n        </div>\n      )} */}\n\n      {/* Titelzeile: Button links, Dropdown rechts */}\n      <div className=\"mb-6\">\n        <div className=\"flex items-start gap-4\">\n          {/* Linke Seite: \"Neuer Benutzer\"-Button */}\n          <div className=\"flex items-center pt-8\">\n            {isAdmin() && (\n              <div className=\"relative group\">\n                <button\n                  onClick={() => setIsCreateModalOpen(true)}\n                  className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                  style={{ width: '30.19px', height: '30.19px' }}\n                  aria-label={t('users.create')}\n                >\n                  <PlusIcon className=\"h-4 w-4\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {t('users.create')}\n                </div>\n              </div>\n            )}\n          </div>\n          \n          {/* Rechts: Benutzer-Dropdown mit Active/Inactive Tabs */}\n          <div className=\"flex-1\">\n            {/* Active/Inactive Tabs */}\n            <div className=\"flex gap-2 mb-2\">\n              <button\n                type=\"button\"\n                onClick={() => setUserFilterTab('active')}\n                className={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${\n                  userFilterTab === 'active'\n                    ? 'bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400'\n                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600'\n                }`}\n              >\n                {t('users.active')}\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setUserFilterTab('inactive')}\n                className={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${\n                  userFilterTab === 'inactive'\n                    ? 'bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400'\n                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600'\n                }`}\n              >\n                {t('users.inactive')}\n              </button>\n            </div>\n            \n            <select\n              id=\"userSelect\"\n              onChange={handleUserSelect}\n              className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n            >\n              <option value=\"\">-- {t('common.select')} --</option>\n              {users.map(user => (\n                <option key={user.id} value={user.id}>\n                  {user.firstName} {user.lastName} ({user.username})\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {selectedUser && (\n        <div>\n          {/* Tabs fr Benutzerdetails, Dokumente und Rollen - zusammenhngende Box ohne Shadow/Border */}\n          <div className=\"bg-white dark:bg-gray-800 mb-6\">\n            {/* Tab-Navigation */}\n            <div className=\"border-b border-gray-200 dark:border-gray-700\">\n              <nav className=\"flex -mb-px\">\n                <button\n                  onClick={() => setActiveUserTab('details')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'details'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <UserCircleIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('users.title')}\n                </button>\n                <button\n                  onClick={() => setActiveUserTab('documents')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'documents'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <DocumentTextIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('profile.documents')}\n                </button>\n                <button\n                  onClick={() => setActiveUserTab('roles')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'roles'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <ShieldCheckIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('roles.title')}\n                </button>\n                <button\n                  onClick={() => setActiveUserTab('branches')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'branches'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <MapPinIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('branches.title') || 'Niederlassungen'}\n                </button>\n                <button\n                  onClick={() => setActiveUserTab('lifecycle')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'lifecycle'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <BuildingOfficeIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('lifecycle.tabTitle')}\n                </button>\n              </nav>\n          </div>\n\n            {/* Tab-Inhalte */}\n          {/* Benutzerdetails Formular */}\n          {activeUserTab === 'details' && (\n              <form onSubmit={handleUserSubmit} className=\"p-6\">\n              {/* Benutzerdetails - gleiche Reihenfolge wie Profile.tsx */}\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\n                {/* 1. Username, Email (nebeneinander - 2 Spalten) */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('users.form.username')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"username\"\n                    value={userFormData.username || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('users.form.email')}\n                  </label>\n                  <input\n                    type=\"email\"\n                    name=\"email\"\n                    value={userFormData.email || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                {/* 2. Language (allein - 1 Spalte) */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.language')} <span className=\"text-red-500\">*</span>\n                  </label>\n                  <select\n                    name=\"language\"\n                    value={userFormData.language || 'es'}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    required\n                  >\n                    {LANGUAGES.map((language) => (\n                      <option key={language.code} value={language.code}>\n                        {language.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                {/* 3. Dokumenten-Upload (prominent - volle Breite) */}\n                {selectedUser && (\n                  <div className=\"sm:col-span-2\">\n                    <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <h3 className=\"text-sm font-medium text-blue-900 dark:text-blue-200 mb-1\">\n                            {t('profile.identificationDocument') || 'Identifikationsdokument'}\n                          </h3>\n                          <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n                            {t('profile.uploadDocumentHint') || 'Bitte laden Sie das Identifikationsdokument (Cdula oder Pasaporte) hoch. Die Felder werden automatisch ausgefllt.'}\n                          </p>\n                        </div>\n                        {!showDocumentUpload && (\n                          <button\n                            type=\"button\"\n                            onClick={() => setShowDocumentUpload(true)}\n                            className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600\"\n                          >\n                            <DocumentTextIcon className=\"h-5 w-5 inline mr-2\" />\n                            {t('profile.uploadDocument') || 'Dokument hochladen'}\n                          </button>\n                        )}\n                      </div>\n                      {showDocumentUpload && (\n                        <div className=\"mt-4\">\n                          <IdentificationDocumentForm\n                            userId={selectedUser.id}\n                            onDocumentSaved={async () => {\n                              setShowDocumentUpload(false);\n                              await fetchUserDetails(selectedUser.id); // Aktualisiere Profil nach Upload\n                              showMessage('Dokument erfolgreich hochgeladen. Felder werden automatisch ausgefllt.', 'success');\n                            }}\n                            onCancel={() => setShowDocumentUpload(false)}\n                          />\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n\n                {/* 4. ID-Dokument-Daten (readonly, alle Felder - korrekte Reihenfolge) */}\n                {selectedUser.identificationDocuments && selectedUser.identificationDocuments.length > 0 && (\n                  <>\n                    {(() => {\n                      const latestDoc = selectedUser.identificationDocuments[0];\n                      return (\n                        <>\n                          {/* 1. Vorname */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('users.form.firstName')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={selectedUser.firstName || ''}\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 2. Nachname */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('users.form.lastName')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={selectedUser.lastName || ''}\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 3. Geburtsdatum */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('profile.birthday')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={selectedUser.birthday ? new Date(selectedUser.birthday).toISOString().split('T')[0] : ''}\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 4. Land */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('profile.country')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={selectedUser.country ? COUNTRIES.find(c => c.code === selectedUser.country)?.name || selectedUser.country : ''}\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 5. Geschlecht (editierbar, falls KI nicht richtig erkannt hat) */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('profile.gender')}\n                            </label>\n                            <select\n                              name=\"gender\"\n                              value={userFormData.gender || ''}\n                              onChange={handleUserInputChange}\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                            >\n                              <option value=\"\">{t('profile.selectGender')}</option>\n                              <option value=\"male\">{t('profile.genderMale')}</option>\n                              <option value=\"female\">{t('profile.genderFemale')}</option>\n                              <option value=\"other\">{t('profile.genderOther')}</option>\n                            </select>\n                          </div>\n\n                          {/* 6. Dokument-Typ */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('profile.identificationType')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={\n                                latestDoc.documentType\n                                  ? (() => {\n                                      const typeMap: Record<string, string> = {\n                                        passport: t('identificationDocuments.types.passport'),\n                                        national_id: t('identificationDocuments.types.national_id'),\n                                        driving_license: t('identificationDocuments.types.driving_license'),\n                                        residence_permit: t('identificationDocuments.types.residence_permit'),\n                                        work_permit: t('identificationDocuments.types.work_permit'),\n                                        tax_id: t('identificationDocuments.types.tax_id'),\n                                        social_security: t('identificationDocuments.types.social_security'),\n                                      };\n                                      return typeMap[latestDoc.documentType] || latestDoc.documentType;\n                                    })()\n                                  : ''\n                              }\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 7. Dokument-Nummer */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('profile.identificationNumber')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={selectedUser.identificationNumber || latestDoc.documentNumber || ''}\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 8. Ausstellungsdatum */}\n                          {latestDoc.issueDate && (\n                            <div>\n                              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('profile.identificationIssueDate') || 'Ausstellungsdatum'}\n                              </label>\n                              <input\n                                type=\"text\"\n                                value={new Date(latestDoc.issueDate).toISOString().split('T')[0]}\n                                disabled\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                                readOnly\n                              />\n                            </div>\n                          )}\n\n                          {/* 9. Ablaufdatum */}\n                          {latestDoc.expiryDate && (\n                            <div>\n                              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('profile.identificationExpiryDate')}\n                              </label>\n                              <input\n                                type=\"text\"\n                                value={new Date(latestDoc.expiryDate).toISOString().split('T')[0]}\n                                disabled\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                                readOnly\n                              />\n                            </div>\n                          )}\n                        </>\n                      );\n                    })()}\n                  </>\n                )}\n\n                {/* 5. Phone Number (allein - 1 Spalte, da Geschlecht jetzt in ID-Dokument-Daten) */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.phoneNumber')}\n                  </label>\n                  <input\n                    type=\"tel\"\n                    name=\"phoneNumber\"\n                    value={userFormData.phoneNumber || ''}\n                    onChange={handleUserInputChange}\n                    placeholder=\"+573001234567\"\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                    {t('profile.phoneNumberHint')}\n                  </p>\n                </div>\n\n                {/* 6. Finanzdaten (Bank Details - 1 Spalte) */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.bankDetails')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"bankDetails\"\n                    value={userFormData.bankDetails || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                {/* Contract, Salary, Normal Working Hours ENTFERNEN - werden zu Lifecycle verschoben */}\n              </div>\n\n              {/* Lohnabrechnung-Einstellungen */}\n              <div className=\"mt-4 border-t pt-4\">\n                <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('users.form.payrollSettings')}</h3>\n                \n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      {t('users.form.payrollCountry')}\n                    </label>\n                    <select\n                      name=\"payrollCountry\"\n                      value={userFormData.payrollCountry || selectedUser.payrollCountry || 'CH'}\n                      onChange={handleUserInputChange}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    >\n                      {PAYROLL_COUNTRIES.map(country => (\n                        <option key={country.code} value={country.code}>\n                          {country.name}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  \n                  {(userFormData.payrollCountry === 'CO' || \n                    (selectedUser.payrollCountry === 'CO' && !userFormData.payrollCountry)) && (\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('users.form.contractType')}\n                      </label>\n                      <select\n                        name=\"contractType\"\n                        value={userFormData.contractType || ''}\n                        onChange={handleUserInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                      >\n                        <option value=\"\">Bitte auswhlen</option>\n                        {CONTRACT_TYPES.map(type => (\n                          <option key={type.code} value={type.code}>\n                            {type.name}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  )}\n                </div>\n                \n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      {t('users.form.hourlyRate')} ({(userFormData.payrollCountry || selectedUser.payrollCountry) === 'CH' ? 'CHF' : 'COP'})\n                    </label>\n                    <input\n                      type=\"number\"\n                      name=\"hourlyRate\"\n                      min=\"0\"\n                      step={(userFormData.payrollCountry || selectedUser.payrollCountry) === 'CH' ? '0.05' : '1'}\n                      value={userFormData.hourlyRate === null || userFormData.hourlyRate === undefined ? '' : userFormData.hourlyRate}\n                      onChange={handleUserInputChange}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                      placeholder={(userFormData.payrollCountry || selectedUser.payrollCountry) === 'CH' ? 'z.B. 45.00' : 'z.B. 50000'}\n                    />\n                  </div>\n                  \n                  {((userFormData.payrollCountry === 'CO' || selectedUser.payrollCountry === 'CO') && \n                    (userFormData.contractType !== 'servicios_externos' && selectedUser.contractType !== 'servicios_externos') &&\n                    (userFormData.contractType || selectedUser.contractType)) && (\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('users.form.monthlySalary')} (COP)\n                      </label>\n                      <input\n                        type=\"number\"\n                        name=\"monthlySalary\"\n                        min=\"0\"\n                        step=\"1000\"\n                        value={userFormData.monthlySalary === null || userFormData.monthlySalary === undefined ? '' : userFormData.monthlySalary}\n                        onChange={handleUserInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                        placeholder=\"z.B. 3500000\"\n                      />\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {isEditingUser && (\n                <div className=\"mt-4 flex justify-end gap-3\">\n                  <div className=\"relative group\">\n                    <button\n                      type=\"button\"\n                      onClick={handleCancelEdit}\n                      className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                    >\n                      <XMarkIcon className=\"h-5 w-5\" />\n                    </button>\n                    <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                      {t('common.cancel')}\n                    </div>\n                  </div>\n                  <div className=\"relative group\">\n                    <button\n                      type=\"submit\"\n                      className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                    >\n                      <CheckIcon className=\"h-5 w-5\" />\n                    </button>\n                    <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                      {t('common.save')}\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Status-Badge und Activate/Deactivate Button unter den Profil-Feldern */}\n              <div className=\"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center\">\n                {selectedUser.active !== undefined && (\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                    selectedUser.active \n                      ? 'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300' \n                      : 'bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300'\n                  }`}>\n                    {selectedUser.active ? t('users.active') : t('users.inactive')}\n                  </span>\n                )}\n                {isAdmin() && (\n                  <button\n                    onClick={handleToggleActive}\n                    className={`relative group flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n                      selectedUser.active\n                        ? 'bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30'\n                        : 'bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/20 dark:text-green-400 dark:hover:bg-green-900/30'\n                    }`}\n                  >\n                    {selectedUser.active ? (\n                      <>\n                        <XMarkIcon className=\"h-5 w-5\" />\n                        {t('users.deactivate')}\n                      </>\n                    ) : (\n                      <>\n                        <CheckIcon className=\"h-5 w-5\" />\n                        {t('users.activate')}\n                      </>\n                    )}\n                  </button>\n                )}\n              </div>\n            </form>\n          )}\n\n          {/* Identifikationsdokumente Tab */}\n          {activeUserTab === 'documents' && (\n              <div className=\"p-6\">\n            <IdentificationDocumentList userId={selectedUser.id} isAdmin={true} />\n              </div>\n          )}\n\n          {/* Rollen Tab */}\n          {activeUserTab === 'roles' && (\n              <div className=\"p-6\">\n              {/* Rollenzuweisung - nur anzeigen, wenn Rollen geladen wurden */}\n              {loadingRoles ? (\n                <div className=\"mt-4 mb-4\">\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('roleAssignment.title')}</h3>\n                  <p className=\"dark:text-gray-300\">{t('roleAssignment.loading')}</p>\n                </div>\n              ) : roles.length > 0 && (\n                <div>\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('roleAssignment.title')}</h3>\n                  \n                  {/* berprfung auf unbekannte Rollen */}\n                  {selectedRoles.some(roleId => !roles.some(role => role.id === roleId)) && (\n                    <div className=\"bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-400 dark:border-yellow-700 text-yellow-700 dark:text-yellow-300 px-4 py-3 rounded mb-4\">\n                      <p className=\"font-bold\">{t('roleAssignment.unknownRolesWarning')}</p>\n                      <p>{t('roleAssignment.unknownRolesMessage', { ids: selectedRoles.filter(roleId => !roles.some(role => role.id === roleId)).join(', ') })}</p>\n                      <p className=\"mt-2 text-sm\">{t('roleAssignment.availableRoleIds', { ids: roles.map(r => r.id).join(', ') })}</p>\n                    </div>\n                  )}\n                  \n                  {/* Aktuell zugewiesene Rollen */}\n                  <div className=\"mb-4\">\n                    <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('roleAssignment.currentRoles')}</h4>\n                    {selectedRoles.length === 0 ? (\n                      <p className=\"text-gray-500 dark:text-gray-400 italic\">{t('roleAssignment.noRolesAssigned')}</p>\n                    ) : (\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {/* Bekannte zugewiesene Rollen */}\n                        {roles\n                          .filter(role => selectedRoles.includes(role.id))\n                          .map(role => {\n                            // Eine Rolle ist nur dann nicht entfernbar, wenn es sich um die Admin-Rolle (ID: 1) fr den Admin-Benutzer (ID: 1) handelt\n                            const isFixedRole = role.id === 1 && selectedUser && selectedUser.id === 1;\n                            return (\n                              <div \n                                key={role.id} \n                                className={`border rounded-lg p-4 ${isFixedRole ? 'border-green-500 bg-green-50 dark:bg-green-900/20 dark:border-green-700 cursor-not-allowed' : 'border-blue-500 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-700 cursor-pointer'}`}\n                                onClick={() => !isFixedRole && toggleRole(role.id)}\n                              >\n                                <div className=\"flex justify-between items-center\">\n                                  <div>\n                                    <h4 className=\"font-medium flex items-center dark:text-white\">\n                                      {role.name}\n                                      {isFixedRole && (\n                                        <span className=\"ml-2 text-xs bg-green-600 text-white px-2 py-0.5 rounded-full\">\n                                          {t('roleAssignment.fixed')}\n                                        </span>\n                                      )}\n                                    </h4>\n                                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">{role.description}</p>\n                                  </div>\n                                  <div className={`flex items-center ${isFixedRole ? 'text-gray-400 dark:text-gray-500' : 'text-blue-600 dark:text-blue-400'}`}>\n                                    <span className=\"mr-2 text-sm\">{isFixedRole ? t('roleAssignment.fixedAssigned') : t('roleAssignment.remove')}</span>\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n                                    </svg>\n                                  </div>\n                                </div>\n                              </div>\n                            );\n                          })}\n                        \n                        {/* Unbekannte zugewiesene Rollen */}\n                        {selectedRoles\n                          .filter(roleId => !roles.some(role => role.id === roleId))\n                          .map(roleId => (\n                            <div \n                              key={`unknown-${roleId}`} \n                              className=\"border border-orange-500 bg-orange-50 rounded-lg p-4\"\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium\">{t('roleAssignment.unknownRole', { id: roleId })}</h4>\n                                  <p className=\"text-sm text-orange-600\">{t('roleAssignment.unknownRoleDescription')}</p>\n                                </div>\n                                <div className=\"flex items-center text-orange-600\">\n                                  <span className=\"mr-2 text-sm\">{t('roleAssignment.remove')}</span>\n                                  <button \n                                    onClick={() => toggleRole(roleId)}\n                                    className=\"focus:outline-none\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n                                    </svg>\n                                  </button>\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    )}\n                  </div>\n                  \n                  {/* Verfgbare Rollen */}\n                  <div>\n                    <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('roleAssignment.availableRoles')}</h4>\n                    {roles.filter(role => !selectedRoles.includes(role.id)).length === 0 ? (\n                      <p className=\"text-gray-500 dark:text-gray-400 italic\">{t('roleAssignment.noRolesAvailable')}</p>\n                    ) : (\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {roles\n                          .filter(role => !selectedRoles.includes(role.id))\n                          .map(role => (\n                            <div \n                              key={role.id} \n                              className=\"border border-gray-300 rounded-lg p-4 cursor-pointer hover:border-blue-300 hover:bg-blue-50\"\n                              onClick={() => toggleRole(role.id)}\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium\">{role.name}</h4>\n                                  <p className=\"text-sm text-gray-600\">{role.description}</p>\n                                </div>\n                                <div className=\"flex items-center text-gray-500 hover:text-blue-600\">\n                                  <span className=\"mr-2 text-sm\">{t('roleAssignment.add')}</span>\n                                  <PlusIcon className=\"h-5 w-5\" />\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Branches Tab */}\n          {activeUserTab === 'branches' && (\n              <div className=\"p-6\">\n              {/* Branch-Zuweisung - nur anzeigen, wenn Branches geladen wurden */}\n              {loadingBranches ? (\n                <div className=\"mt-4 mb-4\">\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('branchAssignment.title') || 'Niederlassungszuweisung'}</h3>\n                  <p className=\"dark:text-gray-300\">{t('branchAssignment.loading') || 'Lade Niederlassungen...'}</p>\n                </div>\n              ) : branches.length > 0 && (\n                <div>\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('branchAssignment.title') || 'Niederlassungszuweisung'}</h3>\n                  \n                  {/* berprfung auf unbekannte Branches */}\n                  {selectedBranches.some(branchId => !branches.some(branch => branch.id === branchId)) && (\n                    <div className=\"bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-400 dark:border-yellow-700 text-yellow-700 dark:text-yellow-300 px-4 py-3 rounded mb-4\">\n                      <p className=\"font-bold\">{t('branchAssignment.unknownBranchesWarning') || 'Unbekannte Niederlassungen zugewiesen'}</p>\n                      <p>{t('branchAssignment.unknownBranchesMessage', { ids: selectedBranches.filter(branchId => !branches.some(branch => branch.id === branchId)).join(', ') }) || `Die folgenden Niederlassungs-IDs sind zugewiesen, aber nicht verfgbar: ${selectedBranches.filter(branchId => !branches.some(branch => branch.id === branchId)).join(', ')}`}</p>\n                      <p className=\"mt-2 text-sm\">{t('branchAssignment.availableBranchIds', { ids: branches.map(b => b.id).join(', ') }) || `Verfgbare Niederlassungs-IDs: ${branches.map(b => b.id).join(', ')}`}</p>\n                    </div>\n                  )}\n                  \n                  {/* Aktuell zugewiesene Branches */}\n                  <div className=\"mb-4\">\n                    <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('branchAssignment.currentBranches') || 'Aktuell zugewiesene Niederlassungen'}</h4>\n                    {selectedBranches.length === 0 ? (\n                      <p className=\"text-gray-500 dark:text-gray-400 italic\">{t('branchAssignment.noBranchesAssigned') || 'Keine Niederlassungen zugewiesen'}</p>\n                    ) : (\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {/* Bekannte zugewiesene Branches */}\n                        {branches\n                          .filter(branch => selectedBranches.includes(branch.id))\n                          .map(branch => (\n                            <div \n                              key={branch.id} \n                              className=\"border border-blue-500 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-700 rounded-lg p-4 cursor-pointer\"\n                              onClick={() => toggleBranch(branch.id)}\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium dark:text-white\">\n                                    {branch.name}\n                                  </h4>\n                                </div>\n                                <div className=\"flex items-center text-blue-600 dark:text-blue-400\">\n                                  <span className=\"mr-2 text-sm\">{t('branchAssignment.remove') || 'Entfernen'}</span>\n                                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n                                  </svg>\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                        \n                        {/* Unbekannte zugewiesene Branches */}\n                        {selectedBranches\n                          .filter(branchId => !branches.some(branch => branch.id === branchId))\n                          .map(branchId => (\n                            <div \n                              key={`unknown-${branchId}`} \n                              className=\"border border-orange-500 bg-orange-50 rounded-lg p-4\"\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium\">{t('branchAssignment.unknownBranch', { id: branchId }) || `Unbekannte Niederlassung (ID: ${branchId})`}</h4>\n                                  <p className=\"text-sm text-orange-600\">{t('branchAssignment.unknownBranchDescription') || 'Diese Niederlassung existiert nicht mehr oder ist nicht verfgbar.'}</p>\n                                </div>\n                                <div className=\"flex items-center text-orange-600\">\n                                  <span className=\"mr-2 text-sm\">{t('branchAssignment.remove') || 'Entfernen'}</span>\n                                  <button \n                                    onClick={() => toggleBranch(branchId)}\n                                    className=\"focus:outline-none\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n                                    </svg>\n                                  </button>\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    )}\n                  </div>\n                  \n                  {/* Verfgbare Branches */}\n                  <div>\n                    <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('branchAssignment.availableBranches') || 'Verfgbare Niederlassungen'}</h4>\n                    {branches.filter(branch => !selectedBranches.includes(branch.id)).length === 0 ? (\n                      <p className=\"text-gray-500 dark:text-gray-400 italic\">{t('branchAssignment.noBranchesAvailable') || 'Keine weiteren Niederlassungen verfgbar'}</p>\n                    ) : (\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {branches\n                          .filter(branch => !selectedBranches.includes(branch.id))\n                          .map(branch => (\n                            <div \n                              key={branch.id} \n                              className=\"border border-gray-300 dark:border-gray-600 rounded-lg p-4 cursor-pointer hover:border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20\"\n                              onClick={() => toggleBranch(branch.id)}\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium dark:text-white\">{branch.name}</h4>\n                                </div>\n                                <div className=\"flex items-center text-gray-500 hover:text-blue-600 dark:hover:text-blue-400\">\n                                  <span className=\"mr-2 text-sm\">{t('branchAssignment.add') || 'Hinzufgen'}</span>\n                                  <PlusIcon className=\"h-5 w-5\" />\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n              {!loadingBranches && branches.length === 0 && (\n                <div className=\"mt-4 mb-4\">\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('branchAssignment.title') || 'Niederlassungszuweisung'}</h3>\n                  <p className=\"text-gray-500 dark:text-gray-400\">{t('branchAssignment.noBranchesFound') || 'Keine Niederlassungen gefunden'}</p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Lebenszyklus Tab */}\n          {activeUserTab === 'lifecycle' && selectedUser && (\n              <div className=\"p-6\">\n            <LifecycleView \n              key={`lifecycle-${selectedUser.id}-${lifecycleRefreshKey}`}\n              userId={selectedUser.id} \n              userName={`${selectedUser.firstName} ${selectedUser.lastName}`}\n            />\n              </div>\n          )}\n          </div>\n        </div>\n      )}\n\n      {/* Sidepane/Modal fr Benutzererstellung */}\n      {isCreateModalOpen && (\n        <>\n          {/* Fr Mobile (unter 640px) - klassisches Modal */}\n          {isMobile ? (\n            <Dialog open={isCreateModalOpen} onClose={() => setIsCreateModalOpen(false)} className=\"relative z-50\">\n              <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n              \n              <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                  {/* Header */}\n                  <div className=\"px-6 py-4 border-b dark:border-gray-700\">\n                    <div className=\"flex items-center justify-between\">\n                      <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                        {t('organisation.createUser.title')}\n                      </Dialog.Title>\n                      <button\n                        onClick={() => setIsCreateModalOpen(false)}\n                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                      >\n                        <XMarkIcon className=\"h-6 w-6\" />\n                      </button>\n                    </div>\n                  </div>\n                  \n                  {/* Form */}\n                  <form onSubmit={handleCreateUser} className=\"p-6\">\n                    <div className=\"space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.email')} *\n                        </label>\n                        <input\n                          type=\"email\"\n                          name=\"email\"\n                          value={newUserFormData.email}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.password')} *\n                        </label>\n                        <input\n                          type=\"password\"\n                          name=\"password\"\n                          value={newUserFormData.password}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.firstName')} *\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"firstName\"\n                          value={newUserFormData.firstName}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.lastName')} *\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"lastName\"\n                          value={newUserFormData.lastName}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                    </div>\n                    \n                    {/* Footer */}\n                    <div className=\"mt-6 flex justify-end gap-3\">\n                      <div className=\"relative group\">\n                        <button\n                          type=\"button\"\n                          onClick={() => setIsCreateModalOpen(false)}\n                          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                        >\n                          <XMarkIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('common.cancel')}\n                        </div>\n                      </div>\n                      <div className=\"relative group\">\n                        <button\n                          type=\"submit\"\n                          className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                        >\n                          <CheckIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('organisation.createUser.create')}\n                        </div>\n                      </div>\n                    </div>\n                  </form>\n                </Dialog.Panel>\n              </div>\n            </Dialog>\n          ) : (\n            // Fr Desktop (ab 640px) - Sidepane\n            // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n            <>\n              {/* Backdrop - nur wenn offen und <= 1070px */}\n              {/* Hinweis: onClick entfernt, da Backdrop pointer-events: none hat, damit Hauptinhalt interaktiv bleibt */}\n              {isCreateModalOpen && !isLargeScreen && (\n                <div \n                  className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n                  aria-hidden=\"true\" \n                  style={{\n                    opacity: isCreateModalOpen ? 1 : 0,\n                    transition: 'opacity 300ms ease-out'\n                  }}\n                />\n              )}\n              \n              {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n              <div \n                className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isCreateModalOpen ? 'translate-x-0' : 'translate-x-full'}`}\n                style={{\n                  transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n                  pointerEvents: isCreateModalOpen ? 'auto' : 'none'\n                }}\n                aria-hidden={!isCreateModalOpen}\n                role=\"dialog\"\n                aria-modal={isCreateModalOpen}\n              >\n                <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n                  <h2 className=\"text-lg font-semibold dark:text-white\">\n                    {t('organisation.createUser.title')}\n                  </h2>\n                  <button\n                    onClick={() => setIsCreateModalOpen(false)}\n                    className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                  >\n                    <XMarkIcon className=\"h-6 w-6\" />\n                  </button>\n                </div>\n\n                <div className=\"flex flex-col flex-1 min-h-0\">\n                  <form onSubmit={handleCreateUser} className=\"flex flex-col flex-1 min-h-0\">\n                    <div className=\"p-4 overflow-y-auto flex-1 min-h-0 space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.email')} *\n                        </label>\n                      <input\n                        type=\"email\"\n                        name=\"email\"\n                        value={newUserFormData.email}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('organisation.createUser.password')} *\n                      </label>\n                      <input\n                        type=\"password\"\n                        name=\"password\"\n                        value={newUserFormData.password}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('organisation.createUser.firstName')} *\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"firstName\"\n                        value={newUserFormData.firstName}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('organisation.createUser.lastName')} *\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"lastName\"\n                        value={newUserFormData.lastName}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                      </div>\n                    </div>\n                    \n                    {/* Footer */}\n                    <div className=\"flex justify-end gap-3 border-t dark:border-gray-700 pt-4 px-4 flex-shrink-0\">\n                      <div className=\"relative group\">\n                        <button\n                          type=\"button\"\n                          onClick={() => setIsCreateModalOpen(false)}\n                          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                        >\n                          <XMarkIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('common.cancel')}\n                        </div>\n                      </div>\n                      <div className=\"relative group\">\n                        <button\n                          type=\"submit\"\n                          className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                        >\n                          <CheckIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('organisation.createUser.create')}\n                        </div>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default UserManagementTab; ","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { roleApi, branchApi } from '../api/apiClient.ts';\nimport { Role, AccessLevel } from '../types/interfaces.ts';\nimport { PencilIcon, TrashIcon, PlusIcon, FunnelIcon, XMarkIcon, CheckIcon, ArrowPathIcon, DocumentDuplicateIcon, ChevronDownIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport axiosInstance from '../config/axios.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport FilterPane from '../components/FilterPane.tsx';\nimport SavedFilterTags from '../components/SavedFilterTags.tsx';\nimport { FilterCondition } from '../components/FilterRow.tsx';\nimport { useError } from '../contexts/ErrorContext.tsx';\nimport { ErrorCategory } from '../services/ErrorHandler.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface RoleManagementTabProps {\n  onRolesChange?: () => void;\n  onError: (error: string) => void;\n  readOnly?: boolean;\n}\n\n// Definiere Seiten, die immer sichtbar sein sollen (ohne Berechtigungsprfung)\nconst alwaysVisiblePages = ['dashboard', 'worktracker', 'cerebro', 'settings', 'profile'];\n\n// ALLE SEITEN IM SYSTEM (synchron mit Backend)\nconst defaultPages = [\n  'dashboard',\n  'worktracker',\n  'consultations',\n  'team_worktime_control', // = workcenter\n  'payroll', // = lohnabrechnung\n  'organization_management', // = organisation (Hauptseite)\n  'cerebro',\n  'settings',\n  'profile',\n  'tour_management', // NEU: Touren-Verwaltung\n  'password_manager' // NEU: Passwort-Manager\n];\n\n// ALLE TABELLEN IM SYSTEM (synchron mit Backend)\nconst defaultTables = [\n  'requests',           // auf dashboard\n  'tasks',             // auf worktracker\n  'reservations',      // auf worktracker (in To Do's Box)\n  'users',             // auf organization_management\n  'roles',             // auf organization_management\n  'organization',      // auf organization_management\n  'organization_join_requests', // auf organization_management\n  'organization_users',  // auf organization_management\n  'team_worktime',     // auf team_worktime_control\n  'worktime',          // auf worktracker\n  'clients',           // auf consultations\n  'consultation_invoices', // auf consultations\n  'branches',          // auf settings/system\n  'notifications',     // allgemein\n  'settings',          // auf settings\n  'monthly_reports',    // auf consultations/reports\n  'tours',             // NEU: auf tour_management\n  'tour_bookings'      // NEU: auf tour_management\n];\n\n// ALLE BUTTONS IM SYSTEM (synchron mit Backend)\nconst defaultButtons = [\n  // Database Management Buttons (Settings/System)\n  'database_reset_table',\n  'database_logs',\n  \n  // Invoice Functions Buttons\n  'invoice_create',\n  'invoice_download', \n  'invoice_mark_paid',\n  'invoice_settings',\n  \n  // Todo/Task Buttons (Worktracker)\n  'todo_create',\n  'todo_edit',\n  'todo_delete',\n  'task_create',\n  'task_edit', \n  'task_delete',\n  \n  // User Management Buttons\n  'user_create',\n  'user_edit',\n  'user_delete',\n  'role_assign',\n  'role_create',\n  'role_edit',\n  'role_delete',\n  \n  // Organization Management Buttons\n  'organization_create',\n  'organization_edit',\n  'organization_delete',\n  \n  // Worktime Buttons\n  'worktime_start',\n  'worktime_stop', \n  'worktime_edit',\n  'worktime_delete',\n  \n  // General Cerebro Button\n  'cerebro',\n  \n  // Consultation Buttons\n  'consultation_start',\n  'consultation_stop',\n  'consultation_edit',\n  \n  // Client Management Buttons\n  'client_create',\n  'client_edit',\n  'client_delete',\n  \n  // Settings Buttons\n  'settings_system',\n  'settings_notifications',\n  'settings_profile',\n  \n  // Payroll Buttons\n  'payroll_generate',\n  'payroll_export',\n  'payroll_edit',\n  \n  // Tour Management Buttons\n  'tour_create',\n  'tour_edit',\n  'tour_delete',\n  'tour_view',\n  'tour_booking_create',\n  'tour_booking_edit',\n  'tour_booking_cancel',\n  'tour_provider_create',\n  'tour_provider_edit',\n  'tour_provider_delete',\n  \n  // Password Manager Buttons\n  'password_entry_create',\n  'password_entry_edit',\n  'password_entry_delete'\n];\n\n// Definiert die Zuordnung von Tabellen zu ihren bergeordneten Seiten\nconst tableToPageMapping = {\n  'requests': 'dashboard',\n  'tasks': 'worktracker',\n  'reservations': 'worktracker',\n  'users': 'organization_management',\n  'roles': 'organization_management',\n  'organization': 'organization_management',\n  'organization_join_requests': 'organization_management',\n  'organization_users': 'organization_management',\n  'team_worktime': 'team_worktime_control',\n  'worktime': 'worktracker',\n  'clients': 'consultations',\n  'consultation_invoices': 'consultations',\n  'branches': 'settings',\n  'notifications': 'general',\n  'settings': 'settings',\n  'monthly_reports': 'consultations',\n  'tours': 'tour_management',\n  'tour_bookings': 'tour_management'\n};\n\n// Definiert die Zuordnung von Buttons zu ihren bergeordneten Seiten/Bereichen\nconst buttonToPageMapping = {\n  'database_reset_table': 'settings',\n  'database_logs': 'settings',\n  'invoice_create': 'consultations',\n  'invoice_download': 'consultations',\n  'invoice_mark_paid': 'consultations',\n  'invoice_settings': 'consultations',\n  'todo_create': 'worktracker',\n  'todo_edit': 'worktracker',\n  'todo_delete': 'worktracker',\n  'task_create': 'worktracker',\n  'task_edit': 'worktracker',\n  'task_delete': 'worktracker',\n  'user_create': 'organization_management',\n  'user_edit': 'organization_management',\n  'user_delete': 'organization_management',\n  'role_assign': 'organization_management',\n  'role_create': 'organization_management',\n  'role_edit': 'organization_management',\n  'role_delete': 'organization_management',\n  'organization_create': 'organization_management',\n  'organization_edit': 'organization_management',\n  'organization_delete': 'organization_management',\n  'worktime_start': 'worktracker',\n  'worktime_stop': 'worktracker',\n  'worktime_edit': 'worktracker',\n  'worktime_delete': 'worktracker',\n  'cerebro': 'cerebro',\n  'consultation_start': 'consultations',\n  'consultation_stop': 'consultations',\n  'consultation_edit': 'consultations',\n  'client_create': 'consultations',\n  'client_edit': 'consultations',\n  'client_delete': 'consultations',\n  'settings_system': 'settings',\n  'settings_notifications': 'settings',\n  'settings_profile': 'settings',\n  'payroll_generate': 'payroll',\n  'payroll_export': 'payroll',\n  'payroll_edit': 'payroll',\n  'tour_create': 'tour_management',\n  'tour_edit': 'tour_management',\n  'tour_delete': 'tour_management',\n  'tour_view': 'tour_management',\n  'tour_booking_create': 'tour_management',\n  'tour_booking_edit': 'tour_management',\n  'tour_booking_cancel': 'tour_management',\n  'tour_provider_create': 'tour_management',\n  'tour_provider_edit': 'tour_management',\n  'tour_provider_delete': 'tour_management',\n  'password_entry_create': 'password_manager',\n  'password_entry_edit': 'password_manager',\n  'password_entry_delete': 'password_manager'\n};\n\n// Definiert die Zuordnung von Buttons zu ihren zugehrigen Tabellen\nconst buttonToTableMapping: Record<string, string | null> = {\n  // Worktime Buttons  worktime Tabelle\n  'worktime_start': 'worktime',\n  'worktime_stop': 'worktime',\n  'worktime_edit': 'worktime',\n  'worktime_delete': 'worktime',\n  // Task/Todo Buttons  tasks Tabelle\n  'task_create': 'tasks',\n  'task_edit': 'tasks',\n  'task_delete': 'tasks',\n  'todo_create': 'tasks',\n  'todo_edit': 'tasks',\n  'todo_delete': 'tasks',\n  // Client Buttons  clients Tabelle\n  'client_create': 'clients',\n  'client_edit': 'clients',\n  'client_delete': 'clients',\n  'consultation_start': 'clients',\n  'consultation_stop': 'clients',\n  'consultation_edit': 'clients',\n  // Invoice Buttons  consultation_invoices Tabelle\n  'invoice_create': 'consultation_invoices',\n  'invoice_download': 'consultation_invoices',\n  'invoice_mark_paid': 'consultation_invoices',\n  'invoice_settings': 'consultation_invoices',\n  // User Management Buttons  users/roles Tabellen\n  'user_create': 'users',\n  'user_edit': 'users',\n  'user_delete': 'users',\n  'role_assign': 'roles',\n  'role_create': 'roles',\n  'role_edit': 'roles',\n  'role_delete': 'roles',\n  // Organization Management Buttons  organization Tabelle\n  'organization_create': 'organization',\n  'organization_edit': 'organization',\n  'organization_delete': 'organization',\n  // Settings Buttons  settings Tabelle\n  'settings_system': 'settings',\n  'settings_notifications': 'settings',\n  'settings_profile': 'settings',\n  // Tour Management Buttons  tours/tour_bookings Tabellen\n  'tour_create': 'tours',\n  'tour_edit': 'tours',\n  'tour_delete': 'tours',\n  'tour_view': 'tours',\n  'tour_booking_create': 'tour_bookings',\n  'tour_booking_edit': 'tour_bookings',\n  'tour_booking_cancel': 'tour_bookings',\n  'tour_provider_create': null, // Keine direkte Tabelle\n  'tour_provider_edit': null,\n  'tour_provider_delete': null,\n  // Password Manager Buttons  keine direkte Tabelle (entry-level permissions)\n  'password_entry_create': null,\n  'password_entry_edit': null,\n  'password_entry_delete': null,\n  // Buttons ohne direkte Tabelle-Zuordnung\n  'database_reset_table': null,\n  'database_logs': null,\n  'cerebro': null,\n  'payroll_generate': null,\n  'payroll_export': null,\n  'payroll_edit': null\n};\n\n// Display-Name-Mapping fr Seiten (DB-Interne Bezeichnung  Frontend-Bezeichnung)\n// Wird dynamisch aus bersetzungen geladen\n\n// Display-Name-Mapping fr Tabellen (DB-Interne Bezeichnung  Frontend-Bezeichnung)\n// Wird dynamisch aus bersetzungen geladen\n\n// Display-Name-Mapping fr Buttons wird dynamisch in der Komponente geladen\n\n// TableID fr gespeicherte Filter\nconst ROLES_TABLE_ID = 'roles-table';\n\n// Standardrollen-IDs (fr Rollen ohne Organisation)\nconst STANDARD_ROLE_IDS = [1, 2, 999]; // Admin (1), User (2), Hamburger (999)\n\n// Standardrollen-Namen (drfen nicht bearbeitet/gelscht werden, egal von welcher Organisation)\nconst STANDARD_ROLE_NAMES = ['Admin', 'User', 'Hamburger'];\n\n// Helper-Funktion zur Prfung ob es sich um eine Standardrolle handelt\nconst isStandardRole = (roleId: number, roleName?: string): boolean => {\n  // Prfe zuerst auf Standard-IDs (fr Rollen ohne Organisation)\n  if (STANDARD_ROLE_IDS.includes(roleId)) {\n    return true;\n  }\n  // Prfe auf Standard-Namen (fr Rollen in Organisationen)\n  if (roleName && STANDARD_ROLE_NAMES.includes(roleName)) {\n    return true;\n  }\n  return false;\n};\n\ninterface RoleFormData {\n  name: string;\n  description: string;\n  permissions: {\n    entity: string;\n    entityType: string;\n    accessLevel: AccessLevel;\n  }[];\n}\n\n\n// RoleCard-Komponente fr mobile Ansicht\nconst RoleCard: React.FC<{\n  role: Role;\n  onEdit: (role: Role) => void;\n  onDelete: (roleId: number) => void;\n  onCopy: (role: Role) => void;\n  canEdit: boolean;\n  canDelete: boolean;\n  canCopy: boolean;\n}> = ({ role, onEdit, onDelete, onCopy, canEdit, canDelete, canCopy }) => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4 mb-4\">\n      {/* Header mit Rollenname und Aktionen */}\n      <div className=\"flex justify-between items-start mb-2\">\n        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">{role.name}</h3>\n        \n        <div className=\"flex space-x-2\">\n          {canCopy && (\n            <div className=\"relative group\">\n              <button\n                onClick={() => onCopy(role)}\n                className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n              >\n                <DocumentDuplicateIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('roles.actions.copy')}\n              </div>\n            </div>\n          )}\n          \n          {canEdit && (\n            <div className=\"relative group\">\n              <button\n                onClick={() => onEdit(role)}\n                className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n              >\n                <PencilIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('roles.actions.edit')}\n              </div>\n            </div>\n          )}\n          \n          {canDelete && (\n            <div className=\"relative group\">\n              <button\n                onClick={() => onDelete(role.id)}\n                className=\"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 p-1\"\n              >\n                <TrashIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('roles.actions.delete')}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* Beschreibung */}\n      <p className=\"text-sm text-gray-600 dark:text-gray-400\">{role.description || t('roles.noDescription')}</p>\n      \n      {/* Branch-Zuweisungen */}\n      <div className=\"mt-2\">\n        <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n          {role.allBranches ? (\n            <span className=\"inline-flex items-center px-2 py-0.5 rounded bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300\">\n              {t('roles.form.allBranches') || 'Alle Branches'}\n            </span>\n          ) : role.branches && role.branches.length > 0 ? (\n            <span className=\"inline-flex items-center px-2 py-0.5 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300\">\n              {role.branches.length} {t('roles.form.specificBranches') || 'Branches'}\n            </span>\n          ) : (\n            <span className=\"inline-flex items-center px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400\">\n              {t('roles.form.noBranches') || 'Keine Branches'}\n            </span>\n          )}\n        </span>\n      </div>\n      \n      {/* Berechtigungen - kompakt */}\n      <div className=\"mt-2\">\n        <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-1\">{t('roles.permissions')}:</h4>\n        <div className=\"flex flex-wrap gap-1\">\n          {role.permissions\n            .filter(perm => perm.accessLevel !== 'none') // Nur relevante Berechtigungen anzeigen\n            .slice(0, 8) // Begrenze die Anzahl der angezeigten Berechtigungen\n            .map(permission => (\n              <span \n                key={`${permission.entity}-${permission.entityType}`}\n                className=\"text-xs bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 px-2 py-1 rounded\"\n              >\n                {permission.entity}: {permission.accessLevel}\n              </span>\n            ))}\n          {role.permissions.filter(perm => perm.accessLevel !== 'none').length > 8 && (\n            <span className=\"text-xs bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-300 px-2 py-1 rounded\">\n                +{role.permissions.filter(perm => perm.accessLevel !== 'none').length - 8} {t('common.showMore')}\n            </span>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst RoleManagementTab: React.FC<RoleManagementTabProps> = ({ onRolesChange, onError, readOnly = false }) => {\n  const { t } = useTranslation();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingRole, setEditingRole] = useState<Role | null>(null);\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [loading, setLoading] = useState(true);\n  \n  // Display-Name-Mapping fr Seiten (dynamisch aus bersetzungen)\n  const pageDisplayNames = useMemo(() => ({\n    'dashboard': t('roles.pages.dashboard'),\n    'worktracker': t('roles.pages.worktracker'),\n    'consultations': t('roles.pages.consultations'),\n    'team_worktime_control': t('roles.pages.team_worktime_control'),\n    'payroll': t('roles.pages.payroll'),\n    'organization_management': t('roles.pages.organization_management'), // Organisation-Seite (Hauptseite)\n    'cerebro': t('roles.pages.cerebro'),\n    'settings': t('roles.pages.settings'),\n    'profile': t('roles.pages.profile'),\n    'tour_management': t('roles.pages.tour_management', 'Touren-Verwaltung'),\n    'password_manager': t('roles.pages.password_manager', 'Passwort-Manager')\n  }), [t]);\n\n  // Display-Name-Mapping fr Tabellen (dynamisch aus bersetzungen)\n  const tableDisplayNames = useMemo(() => ({\n    'tasks': t('roles.tables.tasks'),\n    'reservations': t('roles.tables.reservations'),\n    'worktime': t('roles.tables.worktime'),\n    'users': t('roles.tables.users'),\n    'roles': t('roles.tables.roles'),\n    'organization': t('roles.tables.organization'),\n    'organization_join_requests': t('roles.tables.organization_join_requests'),\n    'organization_users': t('roles.tables.organization_users'),\n    'clients': t('roles.tables.clients'),\n    'consultation_invoices': t('roles.tables.consultation_invoices'),\n    'requests': t('roles.tables.requests'),\n    'team_worktime': t('roles.tables.team_worktime'),\n    'settings': t('roles.tables.settings'),\n    'notifications': t('roles.tables.notifications'),\n    'branches': t('roles.tables.branches'),\n    'monthly_reports': t('roles.tables.monthly_reports'),\n    'tours': t('roles.tables.tours', 'Touren'),\n    'tour_bookings': t('roles.tables.tour_bookings', 'Tour-Buchungen')\n  }), [t]);\n\n  // Display-Name-Mapping fr Buttons (dynamisch aus bersetzungen)\n  const buttonDisplayNames = useMemo(() => ({\n    'worktime_start': t('roles.buttons.worktime_start'),\n    'worktime_stop': t('roles.buttons.worktime_stop'),\n    'worktime_edit': t('roles.buttons.worktime_edit'),\n    'worktime_delete': t('roles.buttons.worktime_delete'),\n    'task_create': t('roles.buttons.task_create'),\n    'task_edit': t('roles.buttons.task_edit'),\n    'task_delete': t('roles.buttons.task_delete'),\n    'todo_create': t('roles.buttons.todo_create'),\n    'todo_edit': t('roles.buttons.todo_edit'),\n    'todo_delete': t('roles.buttons.todo_delete'),\n    'client_create': t('roles.buttons.client_create'),\n    'client_edit': t('roles.buttons.client_edit'),\n    'client_delete': t('roles.buttons.client_delete'),\n    'consultation_start': t('roles.buttons.consultation_start'),\n    'consultation_stop': t('roles.buttons.consultation_stop'),\n    'consultation_edit': t('roles.buttons.consultation_edit'),\n    'invoice_create': t('roles.buttons.invoice_create'),\n    'invoice_download': t('roles.buttons.invoice_download'),\n    'invoice_mark_paid': t('roles.buttons.invoice_mark_paid'),\n    'invoice_settings': t('roles.buttons.invoice_settings'),\n    'user_create': t('roles.buttons.user_create'),\n    'user_edit': t('roles.buttons.user_edit'),\n    'user_delete': t('roles.buttons.user_delete'),\n    'role_assign': t('roles.buttons.role_assign'),\n    'role_create': t('roles.buttons.role_create'),\n    'role_edit': t('roles.buttons.role_edit'),\n    'role_delete': t('roles.buttons.role_delete'),\n    'organization_create': t('roles.buttons.organization_create'),\n    'organization_edit': t('roles.buttons.organization_edit'),\n    'organization_delete': t('roles.buttons.organization_delete'),\n    'settings_system': t('roles.buttons.settings_system'),\n    'settings_notifications': t('roles.buttons.settings_notifications'),\n    'settings_profile': t('roles.buttons.settings_profile'),\n    'database_reset_table': t('roles.buttons.database_reset_table'),\n    'database_logs': t('roles.buttons.database_logs'),\n    'payroll_generate': t('roles.buttons.payroll_generate'),\n    'payroll_export': t('roles.buttons.payroll_export'),\n    'payroll_edit': t('roles.buttons.payroll_edit'),\n    'cerebro': t('roles.buttons.cerebro')\n  }), [t]);\n  const [formData, setFormData] = useState<RoleFormData>({\n    name: '',\n    description: '',\n    permissions: [\n      // Seiten-Berechtigungen\n      ...defaultPages.map(page => ({\n        entity: page,\n        entityType: 'page',\n        accessLevel: 'none' as AccessLevel\n      })),\n      // Tabellen-Berechtigungen\n      ...defaultTables.map(table => ({\n        entity: table,\n        entityType: 'table',\n        accessLevel: 'none' as AccessLevel\n      })),\n      // Button-Berechtigungen\n      ...defaultButtons.map(button => ({\n        entity: button,\n        entityType: 'button',\n        accessLevel: 'none' as AccessLevel\n      }))\n    ]\n  });\n  const [error, setError] = useState<string | null>(null);\n  const { hasPermission } = usePermissions();\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n  \n  // States fr Branch-Zuweisungen\n  const [allBranches, setAllBranches] = useState<boolean>(true);\n  const [selectedBranchIds, setSelectedBranchIds] = useState<number[]>([]);\n  const [branches, setBranches] = useState<Array<{ id: number; name: string }>>([]);\n  const [loadingBranches, setLoadingBranches] = useState(false);\n  \n  // Neue State-Variablen fr erweiterte Filterbedingungen\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  \n  // Filter State Management (Controlled Mode)\n  const [activeFilterName, setActiveFilterName] = useState<string>('Alle');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n  \n  // Responsiveness Hook (640px wie Standard)\n  const [isMobile, setIsMobile] = useState<boolean>(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  \n  // Neue Fehlerbehandlung hinzufgen\n  const { handleError, handleValidationError } = useError();\n  \n  // Neue State-Variablen fr die Berechtigungen\n  const [isAddPermissionModalOpen, setIsAddPermissionModalOpen] = useState(false);\n  const [selectedPermission, setSelectedPermission] = useState<string | null>(null);\n  const [displayLimit, setDisplayLimit] = useState<number>(10);\n  \n  // berwache Bildschirmgre\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isModalOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isModalOpen, openSidepane, closeSidepane]);\n\n  // Funktion zum Laden der Branches\n  const fetchBranches = useCallback(async () => {\n    setLoadingBranches(true);\n    try {\n      const response = await branchApi.getAll();\n      setBranches(response.data);\n    } catch (error) {\n      console.error('Fehler beim Laden der Branches:', error);\n    } finally {\n      setLoadingBranches(false);\n    }\n  }, []);\n\n  // Aktualisiere die fetchRoles-Funktion, um den neuen ErrorHandler zu nutzen\n  const fetchRoles = useCallback(async () => {\n    setLoading(true);\n    console.log('DEBUGAUSGABE: Hole Rollen vom Server...');\n    \n    try {\n      const response = await roleApi.getAll();\n      console.log('DEBUGAUSGABE: Rollen erfolgreich geholt:', response.data);\n      setRoles(response.data);\n      setError(null);\n    } catch (error) {\n      console.error('DEBUGAUSGABE: Fehler beim Abrufen der Rollen:', error);\n      // Nutze den neuen ErrorHandler\n      handleError(error, { \n        component: 'RoleManagementTab', \n        action: 'fetchRoles' \n      });\n      // Rufe auch den bergebenen onError auf, falls vorhanden\n      if (onError) {\n        onError('Fehler beim Laden der Rollen');\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [handleError, onError]);\n\n  // Direkt Rollen laden\n  useEffect(() => {\n    fetchRoles();\n  }, [fetchRoles]);\n\n  // Branches beim ffnen des Modals laden\n  useEffect(() => {\n    if (isModalOpen) {\n      fetchBranches();\n    }\n  }, [isModalOpen, fetchBranches]);\n\n  // Speichern einer Rolle\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n\n    // Validierung: Wenn allBranches = false, mssen Branches ausgewhlt sein\n    if (!allBranches && selectedBranchIds.length === 0) {\n      handleError(t('roles.form.branchSelectionRequired') || 'Bitte whlen Sie mindestens eine Branch aus oder aktivieren Sie \"Fr alle Branches gltig\"', {\n        component: 'RoleManagementTab'\n      });\n      return;\n    }\n    \n    if (!formData.name) {\n      handleValidationError('Rollenname darf nicht leer sein', { name: 'Rollenname ist erforderlich' });\n      return;\n    }\n    \n    if (editingRole) {\n      // Stelle sicher, dass die immer sichtbaren Seiten auch tatschlich auf 'both' gesetzt sind\n      const updatedPermissions = formData.permissions.map(permission => {\n        if (permission.entityType === 'page' && alwaysVisiblePages.includes(permission.entity)) {\n          return { ...permission, accessLevel: 'both' };\n        }\n        return permission;\n      });\n      \n      // Filtere nur die relevanten Berechtigungen (nicht 'none')\n      const filteredPermissions = updatedPermissions\n        .filter(permission => permission.accessLevel !== 'none')\n        .map(permission => ({\n          entity: permission.entity,\n          entityType: permission.entityType,\n          accessLevel: permission.accessLevel\n        }));\n      \n      if (!editingRole.id || isNaN(editingRole.id)) {\n        console.warn('DEBUGAUSGABE: Ungltige Rollen-ID erkannt, Bearbeitung abgebrochen');\n        handleError('Ungltige Rollen-ID, Bearbeitung abgebrochen', { \n          component: 'RoleManagementTab',\n          roleId: editingRole.id\n        });\n        return;\n      }\n      \n      // berprfen, ob es sich um eine geschtzte Rolle handelt\n      if (isStandardRole(editingRole.id, editingRole.name)) {\n        console.warn(`DEBUGAUSGABE: Versuch, geschtzte Rolle mit ID ${editingRole.id} zu bearbeiten`);\n        handleError({\n          message: 'Geschtzte Systemrollen knnen nicht bearbeitet werden',\n          name: 'PermissionError'\n        }, {\n          component: 'RoleManagementTab',\n          roleId: editingRole.id,\n          category: ErrorCategory.PERMISSION\n        });\n        setIsModalOpen(false);\n        return;\n      }\n      \n      // berprfen, ob die Rolle noch in der aktuellen Liste existiert\n      const roleExists = roles.some(r => r.id === editingRole.id);\n      if (!roleExists) {\n        console.error(`DEBUGAUSGABE: Rolle mit ID ${editingRole.id} existiert nicht in der aktuellen Liste`);\n        handleError(`Rolle mit ID ${editingRole.id} existiert nicht mehr. Bitte aktualisieren Sie die Seite.`, {\n          component: 'RoleManagementTab',\n          roleId: editingRole.id\n        });\n        setIsModalOpen(false);\n        // Rollen neu laden, um die Anzeige zu aktualisieren\n        await fetchRoles();\n        return;\n      }\n      \n      console.log(`DEBUGAUSGABE: Bearbeite Rolle mit ID ${editingRole.id}`);\n      \n      try {\n        console.log('DEBUGAUSGABE: Sende Aktualisierung an API:', {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions\n        });\n        \n        const dataToSend = {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions,\n          allBranches: allBranches,\n          branchIds: allBranches ? [] : selectedBranchIds\n        };\n        \n        console.log('DEBUGAUSGABE: Vor dem API-Aufruf roleApi.update');\n        const response = await roleApi.update(editingRole.id, dataToSend);\n        console.log('DEBUGAUSGABE: Nach dem API-Aufruf roleApi.update');\n        console.log('DEBUGAUSGABE: API-Antwort bei Rollenaktualisierung:', response);\n        await fetchRoles();\n      } catch (updateError) {\n        console.error('DEBUGAUSGABE: Fehler bei Rollenaktualisierung:', updateError);\n        if (updateError.response) {\n          // Spezifischere Fehlerbehandlung\n          if (updateError.response.data.meta && updateError.response.data.meta.cause === \"Record to update not found.\") {\n            handleError('Diese Rolle existiert nicht mehr in der Datenbank. Die Anzeige wird aktualisiert.', {\n              component: 'RoleManagementTab',\n              roleId: editingRole.id\n            });\n            setIsModalOpen(false);\n            // Rollenliste aktualisieren, um Frontend zu synchronisieren\n            await fetchRoles();\n          } else {\n            handleError(updateError.response.data.message || 'Fehler beim Aktualisieren der Rolle', {\n              component: 'RoleManagementTab',\n              roleId: editingRole.id\n            });\n          }\n        } else {\n          handleError('Fehler beim Aktualisieren der Rolle', {\n            component: 'RoleManagementTab',\n            roleId: editingRole.id\n          });\n        }\n        return;\n      }\n    } else {\n      // Erstellen einer neuen Rolle\n      try {\n        // Stelle sicher, dass die immer sichtbaren Seiten auch tatschlich auf 'both' gesetzt sind\n        const updatedPermissions = formData.permissions.map(permission => {\n          if (permission.entityType === 'page' && alwaysVisiblePages.includes(permission.entity)) {\n            return { ...permission, accessLevel: 'both' };\n          }\n          return permission;\n        });\n        \n        // Filtere nur die relevanten Berechtigungen (nicht 'none')\n        const filteredPermissions = updatedPermissions\n          .filter(permission => permission.accessLevel !== 'none')\n          .map(permission => ({\n            entity: permission.entity,\n            entityType: permission.entityType,\n            accessLevel: permission.accessLevel\n          }));\n        \n        console.log('DEBUGAUSGABE: Sende Daten an API fr neue Rolle:', {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions\n        });\n        \n        const dataToSend = {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions,\n          allBranches: allBranches,\n          branchIds: allBranches ? [] : selectedBranchIds\n        };\n        \n        console.log('DEBUGAUSGABE: Vor dem API-Aufruf roleApi.create');\n        const response = await roleApi.create(dataToSend);\n        console.log('DEBUGAUSGABE: Nach dem API-Aufruf roleApi.create');\n        console.log('DEBUGAUSGABE: API-Antwort beim Erstellen der Rolle:', response);\n        await fetchRoles();\n      } catch (createError) {\n        console.error('DEBUGAUSGABE: Fehler bei API-Anfrage zum Erstellen der Rolle:', createError);\n        if (createError.response) {\n          handleError(createError.response.data.message || 'Fehler beim Erstellen der Rolle', {\n            component: 'RoleManagementTab'\n          });\n        } else {\n          handleError('Fehler beim Erstellen der Rolle', {\n            component: 'RoleManagementTab'\n          });\n        }\n        return;\n      }\n    }\n    \n    if (onRolesChange) onRolesChange();\n    \n    setIsModalOpen(false);\n    resetForm();\n  };\n\n  // Lschen einer Rolle\n  const handleDelete = async (roleId: number) => {\n    if (!roleId || isNaN(roleId)) {\n      console.warn('Ungltige Rollen-ID erkannt, Lschvorgang abgebrochen');\n      handleError('Ungltige Rollen-ID, Lschvorgang abgebrochen', {\n        component: 'RoleManagementTab',\n        roleId: roleId\n      });\n      return;\n    }\n    \n    // Finde die Rolle in der Liste, um den Namen zu prfen\n    const role = roles.find(r => r.id === roleId);\n    \n    // berprfen, ob es sich um eine geschtzte Rolle handelt\n    if (role && isStandardRole(roleId, role.name)) {\n      console.warn(`Versuch, geschtzte Rolle mit ID ${roleId} (${role.name}) zu lschen`);\n      handleError('Geschtzte Systemrollen knnen nicht gelscht werden', {\n        component: 'RoleManagementTab',\n        roleId: roleId\n      });\n      return;\n    }\n    \n    if (!window.confirm('Mchten Sie diese Rolle wirklich lschen?')) return;\n    \n    try {\n      console.log(`Starte Lschvorgang fr Rolle mit ID ${roleId}`);\n      \n      // berprfen, ob die Rolle in der aktuellen Liste existiert\n      const roleExists = roles.some(r => r.id === roleId);\n      if (!roleExists) {\n        console.error(`Rolle mit ID ${roleId} existiert nicht in der aktuellen Liste`);\n        handleError(`Rolle mit ID ${roleId} existiert nicht mehr. Bitte aktualisieren Sie die Seite.`, {\n          component: 'RoleManagementTab',\n          roleId: roleId\n        });\n        // Rollen neu laden, um die Anzeige zu aktualisieren\n        await fetchRoles();\n        return;\n      }\n      \n      // Bei Mock-Daten lokales Lschen (wird nicht verwendet)\n      if (false) {\n        console.log('Lsche Mock-Rolle');\n        const updatedRoles = roles.filter(role => role.id !== roleId);\n        setRoles(updatedRoles);\n      } else {\n        console.log('Sende Lschanfrage an API');\n        \n        try {\n          const response = await roleApi.delete(roleId);\n          console.log('API-Antwort beim Lschen der Rolle:', response);\n          \n          // Nach erfolgreichem Lschen die Rollenliste aktualisieren\n          await fetchRoles();\n          console.log('Rollenliste nach Lschen aktualisiert');\n        } catch (deleteError) {\n          console.error('API-Fehler beim Lschen der Rolle:', deleteError);\n          \n          if (deleteError.response) {\n            console.error('API-Fehlerdaten:', deleteError.response.data);\n            \n            // Spezifischere Fehlerbehandlung\n            if (deleteError.response.data.meta && deleteError.response.data.meta.cause === \"Record to delete does not exist.\") {\n              handleError('Diese Rolle existiert nicht mehr in der Datenbank. Die Anzeige wird aktualisiert.', {\n                component: 'RoleManagementTab',\n                roleId: roleId\n              });\n              // Rollenliste aktualisieren, um Frontend zu synchronisieren\n              await fetchRoles();\n            } else {\n              handleError(deleteError.response.data.message || t('roleManagement.deleteError'), {\n                component: 'RoleManagementTab',\n                roleId: roleId\n              });\n            }\n          } else {\n            handleError(t('roleManagement.networkError'), {\n              component: 'RoleManagementTab',\n              roleId: roleId\n            });\n          }\n          return;\n        }\n      }\n      \n      console.log('Rolle erfolgreich gelscht');\n      if (onRolesChange) onRolesChange();\n    } catch (err) {\n      console.error(t('roleManagement.unhandledError'), err);\n      handleError(err);\n      \n      // Bei einem unbehandelten Fehler trotzdem versuchen, die Rollenliste zu aktualisieren\n      try {\n        await fetchRoles();\n      } catch (refreshError) {\n        console.error('Fehler beim Aktualisieren der Rollenliste nach fehlgeschlagenem Lschvorgang:', refreshError);\n      }\n    }\n  };\n\n  // Kopieren einer Rolle (fr Standardrollen)\n  const handleCopyRole = async (role: Role) => {\n    try {\n      if (!role || !role.id) {\n        handleError('Ungltige Rolle zum Kopieren', {\n          component: 'RoleManagementTab'\n        });\n        return;\n      }\n\n      // Kopie der Rolle erstellen mit angepasstem Namen\n      const copiedRoleData = {\n        name: `${role.name}-Kopie`,\n        description: role.description || '',\n        permissions: role.permissions\n          .filter(permission => permission.accessLevel !== 'none')\n          .map(permission => ({\n            entity: permission.entity,\n            entityType: permission.entityType,\n            accessLevel: permission.accessLevel\n          }))\n      };\n\n      console.log('DEBUGAUSGABE: Kopiere Rolle:', role.name, 'mit Daten:', copiedRoleData);\n\n      // Rolle erstellen\n      const response = await roleApi.create(copiedRoleData);\n      console.log('DEBUGAUSGABE: Rolle erfolgreich kopiert:', response.data);\n\n      // Optimistisches Update: Neue Rolle zur Liste hinzufgen\n      setRoles(prevRoles => [response.data, ...prevRoles]);\n      \n      // Bearbeitungsmodal fr die kopierte Rolle ffnen\n      prepareRoleForEditing(response.data);\n      \n      if (onRolesChange) onRolesChange();\n    } catch (err) {\n      console.error('DEBUGAUSGABE: Fehler beim Kopieren der Rolle:', err);\n      handleError(err, {\n        component: 'RoleManagementTab',\n        roleId: role.id\n      });\n    }\n  };\n\n  // Rolle zum Bearbeiten vorbereiten\n  const prepareRoleForEditing = async (role: Role) => {\n    // Verhindere das Bearbeiten von geschtzten Rollen\n    if (isStandardRole(role.id, role.name)) {\n      handleError('Geschtzte Systemrollen knnen nicht bearbeitet werden', {\n        component: 'RoleManagementTab',\n        roleId: role.id\n      });\n      return;\n    }\n    \n    // Alle mglichen Berechtigungen erstellen (Seiten, Tabellen und Buttons)\n    const allPermissions = [\n      ...defaultPages.map(page => ({\n        entity: page,\n        entityType: 'page',\n        // Fr die immer sichtbaren Seiten 'both' als Standard setzen\n        accessLevel: alwaysVisiblePages.includes(page) ? 'both' as AccessLevel : 'none' as AccessLevel\n      })),\n      ...defaultTables.map(table => ({\n        entity: table,\n        entityType: 'table',\n        accessLevel: 'none' as AccessLevel\n      })),\n      ...defaultButtons.map(button => ({\n        entity: button,\n        entityType: 'button',\n        accessLevel: 'none' as AccessLevel\n      }))\n    ];\n\n    // Vorhandene Berechtigungen bernehmen\n    role.permissions.forEach(permission => {\n      const existingPermIndex = allPermissions.findIndex(\n        p => p.entity === permission.entity && p.entityType === permission.entityType\n      );\n      \n      if (existingPermIndex !== -1) {\n        // Stelle sicher, dass alwaysVisiblePages immer 'both' als AccessLevel haben\n        if (permission.entityType === 'page' && alwaysVisiblePages.includes(permission.entity)) {\n          allPermissions[existingPermIndex].accessLevel = 'both';\n        } else {\n          allPermissions[existingPermIndex].accessLevel = permission.accessLevel;\n        }\n      }\n    });\n\n    setFormData({\n      name: role.name,\n      description: role.description || '',\n      permissions: allPermissions\n    });\n    \n    // Lade Branch-Zuweisungen der Rolle\n    if (role.id) {\n      try {\n        const branchResponse = await roleApi.getRoleBranches(role.id);\n        const branchData = branchResponse.data;\n        setAllBranches(branchData.allBranches || false);\n        setSelectedBranchIds(branchData.branches?.map((b: any) => b.id) || []);\n      } catch (error) {\n        console.error('Fehler beim Laden der Branch-Zuweisungen:', error);\n        setAllBranches(true);\n        setSelectedBranchIds([]);\n      }\n    }\n    \n    setEditingRole(role);\n    setIsModalOpen(true);\n  };\n\n  // Formular fr neue Rolle zurcksetzen\n  const resetForm = () => {\n    setEditingRole(null);\n    setAllBranches(true);\n    setSelectedBranchIds([]);\n    setFormData({\n      name: '',\n      description: '',\n      permissions: [\n        // Seiten-Berechtigungen\n        ...defaultPages.map(page => ({\n          entity: page,\n          entityType: 'page',\n          // Fr die immer sichtbaren Seiten 'both' als Standard setzen\n          accessLevel: alwaysVisiblePages.includes(page) ? 'both' as AccessLevel : 'none' as AccessLevel\n        })),\n        // Tabellen-Berechtigungen\n        ...defaultTables.map(table => ({\n          entity: table,\n          entityType: 'table',\n          accessLevel: 'none' as AccessLevel\n        })),\n        // Button-Berechtigungen\n        ...defaultButtons.map(button => ({\n          entity: button,\n          entityType: 'button',\n          accessLevel: 'none' as AccessLevel\n        }))\n      ]\n    });\n  };\n\n  // Setzt alle Seitenberechtigungen (auer die immer sichtbaren) auf den gleichen Wert\n  const setAllPagePermissions = (accessLevel: AccessLevel) => {\n    const newPermissions = [...formData.permissions];\n    \n    formData.permissions\n      .filter(p => p.entityType === 'page' && !alwaysVisiblePages.includes(p.entity))\n      .forEach(permission => {\n        const permIndex = formData.permissions.indexOf(permission);\n        newPermissions[permIndex] = {\n          ...permission,\n          accessLevel\n        };\n      });\n    \n    setFormData({ ...formData, permissions: newPermissions });\n  };\n\n  // Setzt alle Tabellen-Berechtigungen auf den gleichen Wert\n  const setAllTablePermissions = (accessLevel: AccessLevel) => {\n    const newPermissions = [...formData.permissions];\n    \n    formData.permissions\n      .filter(p => p.entityType === 'table')\n      .forEach(permission => {\n        const permIndex = formData.permissions.indexOf(permission);\n        newPermissions[permIndex] = {\n          ...permission,\n          accessLevel\n        };\n      });\n    \n    setFormData({ ...formData, permissions: newPermissions });\n  };\n\n  // Setzt alle Button-Berechtigungen auf den gleichen Wert\n  const setAllButtonPermissions = (accessLevel: AccessLevel) => {\n    const newPermissions = [...formData.permissions];\n    \n    formData.permissions\n      .filter(p => p.entityType === 'button')\n      .forEach(permission => {\n        const permIndex = formData.permissions.indexOf(permission);\n        newPermissions[permIndex] = {\n          ...permission,\n          accessLevel\n        };\n      });\n    \n    setFormData({ ...formData, permissions: newPermissions });\n  };\n\n  // Funktion zum Zhlen der aktiven Filter\n  const getActiveFilterCount = () => {\n    return filterConditions.length;\n  };\n\n  // Filtern und sortieren der Rollen\n  const filteredAndSortedRoles = useMemo(() => {\n    return roles\n      .filter(role => {\n        // Globale Suche\n        if (searchTerm) {\n          const searchLower = searchTerm.toLowerCase();\n          const matchesSearch = \n            role.name.toLowerCase().includes(searchLower) ||\n            (role.description && role.description.toLowerCase().includes(searchLower));\n          \n          if (!matchesSearch) return false;\n        }\n        \n        // Prfe erweiterte Filterbedingungen, wenn vorhanden\n        if (filterConditions.length > 0) {\n          // Implementiere die logische Verknpfung der Bedingungen (UND/ODER)\n          let result = filterConditions.length > 0;\n          \n          for (let i = 0; i < filterConditions.length; i++) {\n            const condition = filterConditions[i];\n            let conditionMet = false;\n            \n            switch (condition.column) {\n              case 'name':\n                if (condition.operator === 'equals') {\n                  conditionMet = role.name.toLowerCase() === (condition.value as string || '').toLowerCase();\n                } else if (condition.operator === 'contains') {\n                  conditionMet = role.name.toLowerCase().includes((condition.value as string || '').toLowerCase());\n                } else if (condition.operator === 'startsWith') {\n                  conditionMet = role.name.toLowerCase().startsWith((condition.value as string || '').toLowerCase());\n                }\n                break;\n              \n              case 'description':\n                if (!role.description) {\n                  conditionMet = false;\n                  break;\n                }\n                \n                if (condition.operator === 'equals') {\n                  conditionMet = role.description.toLowerCase() === (condition.value as string || '').toLowerCase();\n                } else if (condition.operator === 'contains') {\n                  conditionMet = role.description.toLowerCase().includes((condition.value as string || '').toLowerCase());\n                } else if (condition.operator === 'startsWith') {\n                  conditionMet = role.description.toLowerCase().startsWith((condition.value as string || '').toLowerCase());\n                }\n                break;\n              \n              case 'permissions':\n                // Vereinfachter Filter fr Berechtigungen - zhle die Anzahl der Berechtigungen mit dem angegebenen Level\n                const accessLevel = condition.value as AccessLevel;\n                const count = role.permissions.filter(p => p.accessLevel === accessLevel).length;\n                \n                if (condition.operator === 'greaterThan') {\n                  conditionMet = count > 0;\n                } else if (condition.operator === 'equals') {\n                  conditionMet = count > 0;\n                }\n                break;\n            }\n            \n            // Verknpfe das Ergebnis dieser Bedingung mit dem Gesamtergebnis\n            if (i === 0) {\n              result = conditionMet;\n            } else {\n              const operator = filterLogicalOperators[i - 1];\n              result = operator === 'AND' ? (result && conditionMet) : (result || conditionMet);\n            }\n          }\n          \n          if (!result) return false;\n        }\n        \n        return true;\n      })\n      .sort((a, b) => {\n        return a.name.localeCompare(b.name);\n      });\n  }, [roles, searchTerm, filterConditions, filterLogicalOperators]);\n\n  // Mobile Ansicht renderRoles-Funktion\n  const renderRoles = () => {\n    if (roles.length === 0) {\n      return (\n        <div className=\"p-4 bg-gray-50 rounded text-center\">\n          <p>Keine Rollen gefunden. Erstellen Sie eine neue Rolle mit dem Button oben.</p>\n        </div>\n      );\n    }\n    \n    if (isMobile) {\n      // Mobile Ansicht mit Karten\n      return (\n        <>\n          <div className=\"space-y-4\">\n            {filteredAndSortedRoles.slice(0, displayLimit).map((role) => (\n              <RoleCard \n                key={role.id} \n                role={role} \n                onEdit={prepareRoleForEditing}\n                onDelete={handleDelete}\n                onCopy={handleCopyRole}\n                canEdit={!readOnly && hasPermission('roles', 'write', 'table') && !isStandardRole(role.id, role.name)}\n                canDelete={!readOnly && hasPermission('roles', 'write', 'table') && !isStandardRole(role.id, role.name)}\n                canCopy={!readOnly && hasPermission('roles', 'write', 'table') && isStandardRole(role.id, role.name)}\n              />\n            ))}\n          </div>\n          \n          {/* \"Mehr anzeigen\" Button - Mobil */}\n          {filteredAndSortedRoles.length > displayLimit && (\n            <div className=\"mt-4 flex justify-center\">\n              <div className=\"relative group\">\n                <button\n                  className=\"p-2 text-blue-600 bg-white border border-blue-300 rounded-md hover:bg-blue-50 dark:bg-gray-800 dark:text-blue-400 dark:border-gray-700 dark:hover:bg-gray-700\"\n                  onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n                >\n                  <ChevronDownIcon className=\"h-5 w-5\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {`Mehr anzeigen (${filteredAndSortedRoles.length - displayLimit} verbleibend)`}\n                </div>\n              </div>\n            </div>\n          )}\n        </>\n      );\n    } else {\n      // Card-Ansicht fr grere Bildschirme\n      return (\n        <>\n          <div className=\"space-y-4\">\n            {filteredAndSortedRoles.slice(0, displayLimit).map((role) => (\n              <RoleCard \n                key={role.id} \n                role={role} \n                onEdit={prepareRoleForEditing}\n                onDelete={handleDelete}\n                onCopy={handleCopyRole}\n                canEdit={!readOnly && hasPermission('roles', 'write', 'table') && !isStandardRole(role.id, role.name)}\n                canDelete={!readOnly && hasPermission('roles', 'write', 'table') && !isStandardRole(role.id, role.name)}\n                canCopy={!readOnly && hasPermission('roles', 'write', 'table') && isStandardRole(role.id, role.name)}\n              />\n            ))}\n          </div>\n          \n          {/* \"Mehr anzeigen\" Button - Desktop */}\n          {filteredAndSortedRoles.length > displayLimit && (\n            <div className=\"mt-4 flex justify-center\">\n              <div className=\"relative group\">\n                <button\n                  className=\"p-2 text-blue-600 bg-white border border-blue-300 rounded-md hover:bg-blue-50 dark:bg-gray-800 dark:text-blue-400 dark:border-gray-700 dark:hover:bg-gray-700\"\n                  onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n                >\n                  <ChevronDownIcon className=\"h-5 w-5\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {`Mehr anzeigen (${filteredAndSortedRoles.length - displayLimit} verbleibend)`}\n                </div>\n              </div>\n            </div>\n          )}\n        </>\n      );\n    }\n  };\n\n  // Standard-Filter erstellen und speichern\n  useEffect(() => {\n    const createStandardFilters = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        \n        if (!token) {\n          console.error('Nicht authentifiziert');\n          return;\n        }\n\n        // Prfen, ob die Standard-Filter bereits existieren\n        const existingFiltersResponse = await axiosInstance.get(\n          API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(ROLES_TABLE_ID)\n        );\n\n        const existingFilters = existingFiltersResponse.data || [];\n        const alleFilterExists = existingFilters.some(filter => filter.name === 'Alle');\n\n        // Erstelle \"Alle\"-Filter, wenn er noch nicht existiert\n        if (!alleFilterExists) {\n          const alleFilter = {\n            tableId: ROLES_TABLE_ID,\n            name: 'Alle',\n            conditions: [],\n            operators: []\n          };\n\n          await axiosInstance.post(\n            API_ENDPOINTS.SAVED_FILTERS.BASE,\n            alleFilter\n          );\n          console.log('Alle-Filter fr Rollen erstellt');\n        }\n      } catch (error) {\n        console.error('Fehler beim Erstellen der Standard-Filter:', error);\n      }\n    };\n\n    createStandardFilters();\n  }, []);\n\n  // Initialer Default-Filter setzen (Controlled Mode)\n  useEffect(() => {\n    const setInitialFilter = async () => {\n      try {\n        const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(ROLES_TABLE_ID));\n        const filters = response.data;\n        \n        const alleFilter = filters.find((filter: any) => filter.name === 'Alle');\n        if (alleFilter) {\n          setActiveFilterName('Alle');\n          setSelectedFilterId(alleFilter.id);\n          applyFilterConditions(alleFilter.conditions, alleFilter.operators);\n        }\n      } catch (error) {\n        console.error('Fehler beim Setzen des initialen Filters:', error);\n      }\n    };\n\n    setInitialFilter();\n  }, []);\n\n  // Funktion zum Anwenden von Filterbedingungen\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n  };\n  \n  // Funktion zum Zurcksetzen der Filter\n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n  \n  // Filter Change Handler (Controlled Mode)\n  const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators);\n  };\n\n  return (\n    <div>\n      {/* Spaltenanzeige und Suche */}\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between mb-4\">\n          {/* Linke Seite: \"Neue Rolle erstellen\"-Button */}\n          <div className=\"flex items-center\">\n            {!readOnly && hasPermission('roles', 'write', 'table') && (\n              <div className=\"relative group\">\n                <button\n                  onClick={() => setIsModalOpen(true)}\n                  className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n                  style={{ width: '30.19px', height: '30.19px' }}\n                  aria-label={t('roles.createRole')}\n                >\n                  <PlusIcon className=\"h-4 w-4\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {t('roles.createRole')}\n                </div>\n              </div>\n            )}\n          </div>\n          \n          {/* Mitte: Titel - Kein Titel in der Mitte notwendig bei dieser Komponente, da der Tab-Header bereits den Titel zeigt */}\n          <div></div>\n          \n          {/* Rechte Seite: Suchfeld, Filter-Button, Spalten-Konfiguration */}\n          <div className=\"flex items-center gap-1.5\">\n            <input\n              type=\"text\"\n              placeholder=\"Suchen...\"\n              className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n            />\n            <div className=\"relative group ml-1\">\n              <button\n                className={`p-2 rounded-md ${getActiveFilterCount() > 0 ? 'bg-blue-50 text-blue-600' : 'hover:bg-gray-100'}`}\n                onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n              >\n                <FunnelIcon className=\"w-5 h-5\" />\n                {getActiveFilterCount() > 0 && (\n                  <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 text-white rounded-full text-xs flex items-center justify-center\">\n                    {getActiveFilterCount()}\n                  </span>\n                )}\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                Filter\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Filter-Modal */}\n        {isFilterModalOpen && (\n          <FilterPane\n            columns={[\n              { id: 'name', label: 'Name' },\n              { id: 'description', label: 'Beschreibung' },\n              { id: 'permissions', label: 'Berechtigungen' }\n            ]}\n            onApply={applyFilterConditions}\n            onReset={resetFilterConditions}\n            savedConditions={filterConditions}\n            savedOperators={filterLogicalOperators}\n            tableId={ROLES_TABLE_ID}\n          />\n        )}\n        \n        {/* Gespeicherte Filter als Tags anzeigen */}\n        <SavedFilterTags\n          tableId={ROLES_TABLE_ID}\n          onSelectFilter={applyFilterConditions}\n          onReset={resetFilterConditions}\n          activeFilterName={activeFilterName}\n          selectedFilterId={selectedFilterId}\n          onFilterChange={handleFilterChange}\n          defaultFilterName=\"Alle\"\n        />\n\n        {loading ? (\n          <div className=\"flex justify-center items-center py-8\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n          </div>\n        ) : (\n          renderRoles()\n        )}\n      </div>\n\n      {/* Modal/Sidepane fr Rollenerstellung/Bearbeitung */}\n      {isModalOpen && (\n        <>\n          {/* Mobile (unter 640px) - Modal */}\n          {isMobile ? (\n            <Dialog open={isModalOpen} onClose={() => setIsModalOpen(false)} className=\"relative z-50\">\n              <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n              \n              <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[calc(100vh-2rem)] flex flex-col overflow-hidden\">\n                  {/* Header */}\n                  <div className=\"px-6 py-4 border-b dark:border-gray-700 flex-shrink-0\">\n                    <div className=\"flex items-center justify-between\">\n                      <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                        {editingRole ? t('roles.editRole') : t('roles.createRole')}\n                      </Dialog.Title>\n                      <button\n                        onClick={() => setIsModalOpen(false)}\n                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                      >\n                        <XMarkIcon className=\"h-6 w-6\" />\n                      </button>\n                    </div>\n                  </div>\n                  \n                  {/* Form */}\n                  <form onSubmit={handleSubmit} className=\"flex flex-col flex-1 min-h-0\">\n                    {/* Content - scrollbarer Bereich */}\n                    <div className=\"flex-1 overflow-y-auto min-h-0\">\n                      <div className=\"p-6 space-y-5\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Name</label>\n                  <input\n                    type=\"text\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Beschreibung</label>\n                  <input\n                    type=\"text\"\n                    value={formData.description}\n                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n                  </div>\n                  \n                  {/* Branch-Zuweisungen */}\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      {t('roles.form.branchAssignment') || 'Branch-Zuweisung'}\n                    </label>\n                    <div className=\"space-y-3\">\n                      <label className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          checked={allBranches}\n                          onChange={(e) => {\n                            setAllBranches(e.target.checked);\n                            if (e.target.checked) {\n                              setSelectedBranchIds([]);\n                            }\n                          }}\n                          className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                        />\n                        <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                          {t('roles.form.allBranches') || 'Fr alle Branches gltig'}\n                        </span>\n                      </label>\n                      \n                      {!allBranches && (\n                        <div className=\"ml-6\">\n                          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                            {t('roles.form.specificBranches') || 'Spezifische Branches:'}\n                          </label>\n                          {loadingBranches ? (\n                            <div className=\"text-sm text-gray-500\">Lade Branches...</div>\n                          ) : branches.length === 0 ? (\n                            <div className=\"text-sm text-gray-500\">Keine Branches verfgbar</div>\n                          ) : (\n                            <div className=\"space-y-2 max-h-40 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-md p-2\">\n                              {branches.map((branch) => (\n                                <label key={branch.id} className=\"flex items-center\">\n                                  <input\n                                    type=\"checkbox\"\n                                    checked={selectedBranchIds.includes(branch.id)}\n                                    onChange={(e) => {\n                                      if (e.target.checked) {\n                                        setSelectedBranchIds([...selectedBranchIds, branch.id]);\n                                      } else {\n                                        setSelectedBranchIds(selectedBranchIds.filter(id => id !== branch.id));\n                                      }\n                                    }}\n                                    className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                                  />\n                                  <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                                    {branch.name}\n                                  </span>\n                                </label>\n                              ))}\n                            </div>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  \n                  <div className=\"mt-2\">\n                    <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('roles.form.detailedPermissions')}</label>\n                        {/* Bulk Actions - kompakt integriert */}\n                        <div className=\"flex flex-wrap items-center gap-1.5\">\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllPagePermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800\"\n                            >\n                              {t('roles.form.pagesChecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.activateAllPages')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllPagePermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              {t('roles.form.pagesUnchecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.deactivateAllPages')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllTablePermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800\"\n                            >\n                              {t('roles.form.tablesChecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.activateAllTables')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllTablePermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              {t('roles.form.tablesUnchecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.deactivateAllTables')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllButtonPermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800\"\n                            >\n                              {t('roles.form.buttonsChecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.activateAllButtons')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllButtonPermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              {t('roles.form.buttonsUnchecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.deactivateAllButtons')}\n                            </div>\n                          </div>\n                        </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-1 gap-4 overflow-y-auto border rounded-lg p-4 dark:border-gray-600\">\n                    {formData.permissions\n                      .filter(permission => \n                        permission.entityType === 'page'\n                      )\n                      .map((permission, index) => {\n                        const permIndex = formData.permissions.indexOf(permission);\n                        const isActive = permission.accessLevel === 'both';\n                        return (\n                          <div key={`permission-page-${permission.entity}-${index}`}>\n                            <div className=\"flex items-center justify-between\">\n                              <span className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{pageDisplayNames[permission.entity] || permission.entity}</span>\n                              <label className={`inline-flex items-center ${alwaysVisiblePages.includes(permission.entity) ? 'cursor-not-allowed opacity-80' : 'cursor-pointer'}`}>\n                                <input\n                                  type=\"checkbox\"\n                                  className=\"sr-only peer\"\n                                  checked={isActive}\n                                  disabled={alwaysVisiblePages.includes(permission.entity)}\n                                  onChange={() => {\n                                    const newPermissions = [...formData.permissions];\n                                    newPermissions[permIndex] = {\n                                      ...permission,\n                                      accessLevel: isActive ? 'none' : 'both'\n                                    };\n                                    setFormData({ ...formData, permissions: newPermissions });\n                                  }}\n                                />\n                                <div className={`relative w-11 h-6 ${alwaysVisiblePages.includes(permission.entity) ? 'bg-blue-600 dark:bg-blue-700' : 'bg-gray-200 dark:bg-gray-700'} peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700`}>\n                                  {alwaysVisiblePages.includes(permission.entity) && (\n                                    <span className=\"absolute inset-0 flex items-center justify-center text-xs text-white font-medium\">\n                                      Fix\n                                    </span>\n                                  )}\n                                </div>\n                              </label>\n                            </div>\n                            \n                            {/* Tabellen-Berechtigungen mit zugehrigen Buttons gruppiert */}\n                            {formData.permissions\n                              .filter(tablePerm => \n                                tablePerm.entityType === 'table' && \n                                tableToPageMapping[tablePerm.entity] === permission.entity\n                              )\n                              .sort((a, b) => {\n                                const aName = tableDisplayNames[a.entity] || a.entity;\n                                const bName = tableDisplayNames[b.entity] || b.entity;\n                                // Sortierung: users, roles, organization zuerst (in dieser Reihenfolge)\n                                const priorityOrder = ['users', 'roles', 'organization'];\n                                const aIndex = priorityOrder.indexOf(a.entity);\n                                const bIndex = priorityOrder.indexOf(b.entity);\n                                if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;\n                                if (aIndex !== -1) return -1;\n                                if (bIndex !== -1) return 1;\n                                return aName.localeCompare(bName);\n                              })\n                              .map((tablePerm, tableIndex) => {\n                                const tablePermIndex = formData.permissions.indexOf(tablePerm);\n                                const isTableActive = tablePerm.accessLevel === 'both';\n                                const tableEntity = tablePerm.entity;\n                                const tableDisplayName = tableDisplayNames[tableEntity] || tableEntity;\n                                \n                                // Finde alle Buttons, die zu dieser Tabelle gehren\n                                // Filtere Duplikate: task_* und todo_* sind dasselbe, nur task_* behalten\n                                const relatedButtons = formData.permissions\n                                  .filter(buttonPerm => \n                                    buttonPerm.entityType === 'button' && \n                                    buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                    buttonToTableMapping[buttonPerm.entity] === tableEntity &&\n                                    // Entferne todo_* Buttons wenn task_* existiert (sind dasselbe)\n                                    !(tableEntity === 'tasks' && buttonPerm.entity.startsWith('todo_'))\n                                  )\n                                  .sort((a, b) => {\n                                    const aName = buttonDisplayNames[a.entity] || a.entity;\n                                    const bName = buttonDisplayNames[b.entity] || b.entity;\n                                    // Logische Reihenfolge: Start, Stop, Erstellen, Bearbeiten, Lschen, dann alphabetisch\n                                    const order = [\n                                      t('roleManagement.buttonOrder.start'),\n                                      t('roleManagement.buttonOrder.stop'),\n                                      t('roleManagement.buttonOrder.create'),\n                                      t('roleManagement.buttonOrder.edit'),\n                                      t('roleManagement.buttonOrder.delete')\n                                    ];\n                                    const aIndex = order.indexOf(aName);\n                                    const bIndex = order.indexOf(bName);\n                                    if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;\n                                    if (aIndex !== -1) return -1;\n                                    if (bIndex !== -1) return 1;\n                                    return aName.localeCompare(bName);\n                                  });\n                                \n                                return (\n                                  <div key={`table-permission-${tableEntity}-${tableIndex}`} className=\"mt-3\">\n                                    {/* Tabelle selbst */}\n                                    <div className=\"flex items-center justify-between pl-6 border-l-2 border-blue-300 dark:border-blue-600\">\n                                      <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\"> {tableDisplayName}</span>\n                                      <label className=\"inline-flex items-center cursor-pointer\">\n                                        <input\n                                          type=\"checkbox\"\n                                          className=\"sr-only peer\"\n                                          checked={isTableActive}\n                                          onChange={() => {\n                                            const newPermissions = [...formData.permissions];\n                                            newPermissions[tablePermIndex] = {\n                                              ...tablePerm,\n                                              accessLevel: isTableActive ? 'none' : 'both'\n                                            };\n                                            setFormData({ ...formData, permissions: newPermissions });\n                                          }}\n                                        />\n                                        <div className=\"relative w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                        </div>\n                                      </label>\n                                    </div>\n                                    \n                                    {/* Zu dieser Tabelle gehrige Buttons */}\n                                    {relatedButtons.map((buttonPerm, buttonIndex) => {\n                                      const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                      const isButtonActive = buttonPerm.accessLevel === 'both';\n                                      const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                      return (\n                                        <div key={`button-permission-${buttonPerm.entity}-${buttonIndex}`} \n                                          className=\"flex items-center justify-between mt-2 pl-12 border-l-2 border-gray-300 dark:border-gray-600\">\n                                          <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                          <label className=\"inline-flex items-center cursor-pointer\">\n                                            <input\n                                              type=\"checkbox\"\n                                              className=\"sr-only peer\"\n                                              checked={isButtonActive}\n                                              onChange={() => {\n                                                const newPermissions = [...formData.permissions];\n                                                newPermissions[buttonPermIndex] = {\n                                                  ...buttonPerm,\n                                                  accessLevel: isButtonActive ? 'none' : 'both'\n                                                };\n                                                setFormData({ ...formData, permissions: newPermissions });\n                                              }}\n                                            />\n                                            <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                            </div>\n                                          </label>\n                                        </div>\n                                      );\n                                    })}\n                                  </div>\n                                );\n                              })\n                            }\n                              \n                              {/* Button-Berechtigungen ohne Tabelle-Zuordnung (am Ende) */}\n                              {formData.permissions\n                                .filter(buttonPerm => \n                                  buttonPerm.entityType === 'button' && \n                                  buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                  !buttonToTableMapping[buttonPerm.entity]\n                                )\n                                .sort((a, b) => {\n                                  const aName = buttonDisplayNames[a.entity] || a.entity;\n                                  const bName = buttonDisplayNames[b.entity] || b.entity;\n                                  return aName.localeCompare(bName);\n                                })\n                                .map((buttonPerm, buttonIndex) => {\n                                  const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                  const isButtonActive = buttonPerm.accessLevel === 'both';\n                                  const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                  return (\n                                    <div key={`button-permission-${buttonPerm.entity}-${buttonIndex}`} \n                                      className=\"flex items-center justify-between mt-2 pl-6 border-l-2 border-gray-300 dark:border-gray-600\">\n                                      <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                      <label className=\"inline-flex items-center cursor-pointer\">\n                                        <input\n                                          type=\"checkbox\"\n                                          className=\"sr-only peer\"\n                                          checked={isButtonActive}\n                                          onChange={() => {\n                                            const newPermissions = [...formData.permissions];\n                                            newPermissions[buttonPermIndex] = {\n                                              ...buttonPerm,\n                                              accessLevel: isButtonActive ? 'none' : 'both'\n                                            };\n                                            setFormData({ ...formData, permissions: newPermissions });\n                                          }}\n                                        />\n                                        <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                        </div>\n                                      </label>\n                          </div>\n                        );\n                      })\n                    }\n                            </div>\n                          );\n                        })\n                      }\n                    </div>\n                  </div>\n                    </div>\n                  </div>\n                  \n                  {/* Footer */}\n                  <div className=\"px-6 py-4 bg-gray-50 dark:bg-gray-700 flex justify-end gap-2 border-t dark:border-gray-600 flex-shrink-0\">\n                    <div className=\"relative group\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setIsModalOpen(false)}\n                        className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                      >\n                        <XMarkIcon className=\"h-5 w-5\" />\n                      </button>\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                        Abbrechen\n                      </div>\n                    </div>\n                    <div className=\"relative group\">\n                      <button\n                        type=\"submit\"\n                        className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                      >\n                        <CheckIcon className=\"h-5 w-5\" />\n                      </button>\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                        {editingRole ? 'Aktualisieren' : 'Erstellen'}\n                      </div>\n                    </div>\n                  </div>\n                </form>\n              </Dialog.Panel>\n            </div>\n          </Dialog>\n          ) : (\n            /* Desktop (ab 640px) - Sidepane */\n            /* WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition */\n            <>\n              {/* Backdrop - nur wenn offen und <= 1070px */}\n              {/* Hinweis: onClick entfernt, da Backdrop pointer-events: none hat, damit Hauptinhalt interaktiv bleibt */}\n              {isModalOpen && !isLargeScreen && (\n                <div \n                  className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n                  aria-hidden=\"true\" \n                  style={{\n                    opacity: isModalOpen ? 1 : 0,\n                    transition: 'opacity 300ms ease-out'\n                  }}\n                />\n              )}\n              \n              {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n              <div \n                className={`fixed top-16 bottom-0 right-0 max-w-2xl w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isModalOpen ? 'translate-x-0' : 'translate-x-full'}`}\n                style={{\n                  transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n                  pointerEvents: isModalOpen ? 'auto' : 'none'\n                }}\n                aria-hidden={!isModalOpen}\n                role=\"dialog\"\n                aria-modal={isModalOpen}\n              >\n                <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n                  <h2 className=\"text-lg font-semibold dark:text-white\">\n                    {editingRole ? 'Rolle bearbeiten' : 'Neue Rolle erstellen'}\n                  </h2>\n                  <button\n                    onClick={() => setIsModalOpen(false)}\n                    className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                  >\n                    <XMarkIcon className=\"h-6 w-6\" />\n                  </button>\n                </div>\n\n                <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n                  <form onSubmit={handleSubmit} className=\"space-y-5\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('roles.form.name')}</label>\n                        <input\n                          type=\"text\"\n                          value={formData.name}\n                          onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                          className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('roles.form.description')}</label>\n                        <input\n                          type=\"text\"\n                          value={formData.description}\n                          onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                          className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                        />\n                      </div>\n                    </div>\n                    \n                    <div className=\"mt-2\">\n                      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Detaillierte Berechtigungen</label>\n                        {/* Bulk Actions */}\n                        <div className=\"flex flex-wrap items-center gap-1.5\">\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllPagePermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800\"\n                            >\n                              Seiten \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Seiten aktivieren\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllPagePermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              Seiten \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Seiten deaktivieren\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllTablePermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800\"\n                            >\n                              Tabellen \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Tabellen aktivieren\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllTablePermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              Tabellen \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Tabellen deaktivieren\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllButtonPermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800\"\n                            >\n                              Buttons \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Buttons aktivieren\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllButtonPermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              Buttons \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Buttons deaktivieren\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <div className=\"grid grid-cols-1 gap-4 overflow-y-auto border rounded-lg p-4 dark:border-gray-600 max-h-[60vh]\">\n                        {formData.permissions\n                          .filter(permission => \n                            permission.entityType === 'page'\n                          )\n                          .map((permission, index) => {\n                            const permIndex = formData.permissions.indexOf(permission);\n                            const isActive = permission.accessLevel === 'both';\n                            return (\n                              <div key={`permission-page-desktop-${permission.entity}-${index}`}>\n                                <div className=\"flex items-center justify-between\">\n                                  <span className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{pageDisplayNames[permission.entity] || permission.entity}</span>\n                                  <label className={`inline-flex items-center ${alwaysVisiblePages.includes(permission.entity) ? 'cursor-not-allowed opacity-80' : 'cursor-pointer'}`}>\n                                    <input\n                                      type=\"checkbox\"\n                                      className=\"sr-only peer\"\n                                      checked={isActive}\n                                      disabled={alwaysVisiblePages.includes(permission.entity)}\n                                      onChange={() => {\n                                        const newPermissions = [...formData.permissions];\n                                        newPermissions[permIndex] = {\n                                          ...permission,\n                                          accessLevel: isActive ? 'none' : 'both'\n                                        };\n                                        setFormData({ ...formData, permissions: newPermissions });\n                                      }}\n                                    />\n                                    <div className={`relative w-11 h-6 ${alwaysVisiblePages.includes(permission.entity) ? 'bg-blue-600 dark:bg-blue-700' : 'bg-gray-200 dark:bg-gray-700'} peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700`}>\n                                      {alwaysVisiblePages.includes(permission.entity) && (\n                                        <span className=\"absolute inset-0 flex items-center justify-center text-xs text-white font-medium\">\n                                          Fix\n                                        </span>\n                                      )}\n                                    </div>\n                                  </label>\n                                </div>\n                                \n                                {/* Tabellen-Berechtigungen mit zugehrigen Buttons gruppiert */}\n                                {formData.permissions\n                                  .filter(tablePerm => \n                                    tablePerm.entityType === 'table' && \n                                    tableToPageMapping[tablePerm.entity] === permission.entity\n                                  )\n                                  .sort((a, b) => {\n                                    const aName = tableDisplayNames[a.entity] || a.entity;\n                                    const bName = tableDisplayNames[b.entity] || b.entity;\n                                    return aName.localeCompare(bName);\n                                  })\n                                  .map((tablePerm, tableIndex) => {\n                                    const tablePermIndex = formData.permissions.indexOf(tablePerm);\n                                    const isTableActive = tablePerm.accessLevel === 'both';\n                                    const tableEntity = tablePerm.entity;\n                                    const tableDisplayName = tableDisplayNames[tableEntity] || tableEntity;\n                                    \n                                    // Finde alle Buttons, die zu dieser Tabelle gehren\n                                    const relatedButtons = formData.permissions\n                                      .filter(buttonPerm => \n                                        buttonPerm.entityType === 'button' && \n                                        buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                        buttonToTableMapping[buttonPerm.entity] === tableEntity &&\n                                        !(tableEntity === 'tasks' && buttonPerm.entity.startsWith('todo_'))\n                                      )\n                                      .sort((a, b) => {\n                                        const aName = buttonDisplayNames[a.entity] || a.entity;\n                                        const bName = buttonDisplayNames[b.entity] || b.entity;\n                                        const order = [\n                                      t('roleManagement.buttonOrder.start'),\n                                      t('roleManagement.buttonOrder.stop'),\n                                      t('roleManagement.buttonOrder.create'),\n                                      t('roleManagement.buttonOrder.edit'),\n                                      t('roleManagement.buttonOrder.delete')\n                                    ];\n                                        const aIndex = order.indexOf(aName);\n                                        const bIndex = order.indexOf(bName);\n                                        if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;\n                                        if (aIndex !== -1) return -1;\n                                        if (bIndex !== -1) return 1;\n                                        return aName.localeCompare(bName);\n                                      });\n                                    \n                                    return (\n                                      <div key={`table-permission-desktop-${tableEntity}-${tableIndex}`} className=\"mt-3\">\n                                        {/* Tabelle selbst */}\n                                        <div className=\"flex items-center justify-between pl-6 border-l-2 border-blue-300 dark:border-blue-600\">\n                                          <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\"> {tableDisplayName}</span>\n                                          <label className=\"inline-flex items-center cursor-pointer\">\n                                            <input\n                                              type=\"checkbox\"\n                                              className=\"sr-only peer\"\n                                              checked={isTableActive}\n                                              onChange={() => {\n                                                const newPermissions = [...formData.permissions];\n                                                newPermissions[tablePermIndex] = {\n                                                  ...tablePerm,\n                                                  accessLevel: isTableActive ? 'none' : 'both'\n                                                };\n                                                setFormData({ ...formData, permissions: newPermissions });\n                                              }}\n                                            />\n                                            <div className=\"relative w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                            </div>\n                                          </label>\n                                        </div>\n                                        \n                                        {/* Zu dieser Tabelle gehrige Buttons */}\n                                        {relatedButtons.map((buttonPerm, buttonIndex) => {\n                                          const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                          const isButtonActive = buttonPerm.accessLevel === 'both';\n                                          const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                          return (\n                                            <div key={`button-permission-desktop-${buttonPerm.entity}-${buttonIndex}`} \n                                              className=\"flex items-center justify-between mt-2 pl-12 border-l-2 border-gray-300 dark:border-gray-600\">\n                                              <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                              <label className=\"inline-flex items-center cursor-pointer\">\n                                                <input\n                                                  type=\"checkbox\"\n                                                  className=\"sr-only peer\"\n                                                  checked={isButtonActive}\n                                                  onChange={() => {\n                                                    const newPermissions = [...formData.permissions];\n                                                    newPermissions[buttonPermIndex] = {\n                                                      ...buttonPerm,\n                                                      accessLevel: isButtonActive ? 'none' : 'both'\n                                                    };\n                                                    setFormData({ ...formData, permissions: newPermissions });\n                                                  }}\n                                                />\n                                                <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                                </div>\n                                              </label>\n                                            </div>\n                                          );\n                                        })}\n                                      </div>\n                                    );\n                                  })\n                                }\n                                  \n                                {/* Button-Berechtigungen ohne Tabelle-Zuordnung (am Ende) */}\n                                {formData.permissions\n                                  .filter(buttonPerm => \n                                    buttonPerm.entityType === 'button' && \n                                    buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                    !buttonToTableMapping[buttonPerm.entity]\n                                  )\n                                  .sort((a, b) => {\n                                    const aName = buttonDisplayNames[a.entity] || a.entity;\n                                    const bName = buttonDisplayNames[b.entity] || b.entity;\n                                    return aName.localeCompare(bName);\n                                  })\n                                  .map((buttonPerm, buttonIndex) => {\n                                    const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                    const isButtonActive = buttonPerm.accessLevel === 'both';\n                                    const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                    return (\n                                      <div key={`button-permission-desktop-${buttonPerm.entity}-${buttonIndex}`} \n                                        className=\"flex items-center justify-between mt-2 pl-6 border-l-2 border-gray-300 dark:border-gray-600\">\n                                        <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                        <label className=\"inline-flex items-center cursor-pointer\">\n                                          <input\n                                            type=\"checkbox\"\n                                            className=\"sr-only peer\"\n                                            checked={isButtonActive}\n                                            onChange={() => {\n                                              const newPermissions = [...formData.permissions];\n                                              newPermissions[buttonPermIndex] = {\n                                                ...buttonPerm,\n                                                accessLevel: isButtonActive ? 'none' : 'both'\n                                              };\n                                              setFormData({ ...formData, permissions: newPermissions });\n                                            }}\n                                          />\n                                          <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                          </div>\n                                        </label>\n                                      </div>\n                                    );\n                                  })\n                                }\n                              </div>\n                            );\n                          })\n                        }\n                      </div>\n                    </div>\n\n                    {/* Buttons */}\n                    <div className=\"flex justify-end pt-4 gap-2\">\n                      <div className=\"relative group\">\n                        <button\n                          type=\"button\"\n                          onClick={() => setIsModalOpen(false)}\n                          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                        >\n                          <XMarkIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          Abbrechen\n                        </div>\n                      </div>\n                      <div className=\"relative group\">\n                        <button\n                          type=\"submit\"\n                          className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors\"\n                        >\n                          <CheckIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {editingRole ? 'Aktualisieren' : 'Erstellen'}\n                        </div>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default RoleManagementTab; ","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { PencilIcon, TrashIcon, PlusIcon, XMarkIcon, CheckIcon, FunnelIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport axiosInstance from '../config/axios.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport FilterPane from '../components/FilterPane.tsx';\nimport SavedFilterTags from '../components/SavedFilterTags.tsx';\nimport { FilterCondition } from '../components/FilterRow.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface Branch {\n    id: number;\n    name: string;\n    whatsappSettings?: any;\n    lobbyPmsSettings?: any;\n    boldPaymentSettings?: any;\n    doorSystemSettings?: any;\n    emailSettings?: any;\n}\n\ninterface BranchManagementTabProps {\n    onError: (error: string) => void;\n}\n\n// BranchCard-Komponente fr mobile und Desktop-Ansicht\nconst BranchCard: React.FC<{\n    branch: Branch;\n    onEdit: (branch: Branch) => void;\n    onDelete: (branchId: number) => void;\n    canEdit: boolean;\n    canDelete: boolean;\n}> = ({ branch, onEdit, onDelete, canEdit, canDelete }) => {\n    const { t } = useTranslation();\n    return (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4\">\n            {/* Header mit Branchname und Aktionen */}\n            <div className=\"flex justify-between items-start mb-2\">\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">{branch.name}</h3>\n                \n                <div className=\"flex space-x-2\">\n                    {canEdit && (\n                        <div className=\"relative group\">\n                            <button\n                                onClick={() => onEdit(branch)}\n                                className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n                            >\n                                <PencilIcon className=\"h-5 w-5\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('common.edit', { defaultValue: 'Bearbeiten' })}\n                            </div>\n                        </div>\n                    )}\n                    \n                    {canDelete && (\n                        <div className=\"relative group\">\n                            <button\n                                onClick={() => onDelete(branch.id)}\n                                className=\"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 p-1\"\n                            >\n                                <TrashIcon className=\"h-5 w-5\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('common.delete', { defaultValue: 'Lschen' })}\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\n// TableID fr gespeicherte Filter\nconst BRANCHES_TABLE_ID = 'branches-table';\n\nconst BranchManagementTab: React.FC<BranchManagementTabProps> = ({ onError }) => {\n    const { t } = useTranslation();\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [editingBranch, setEditingBranch] = useState<Branch | null>(null);\n    const [branches, setBranches] = useState<Branch[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [formData, setFormData] = useState({ \n        name: '',\n        whatsappSettings: {\n            provider: 'whatsapp-business-api' as 'twilio' | 'whatsapp-business-api',\n            apiKey: '',\n            apiSecret: '',\n            phoneNumberId: '',\n            ai: {\n                enabled: false,\n                model: 'gpt-4o',\n                systemPrompt: '',\n                rules: [] as string[],\n                sources: [] as string[],\n                temperature: 0.7,\n                maxTokens: 500\n            }\n        },\n        lobbyPmsSettings: {\n            apiUrl: '',\n            apiKey: '',\n            propertyId: '',\n            autoCreateTasks: false,\n            lateCheckInThreshold: '22:00',\n            notificationChannels: ['email'] as string[],\n            autoSendInvitation: false\n        },\n        boldPaymentSettings: {\n            apiKey: '',\n            merchantId: '',\n            environment: 'sandbox' as 'sandbox' | 'production'\n        },\n        doorSystemSettings: {\n            clientId: '',\n            clientSecret: '',\n            username: '',\n            password: '',\n            apiUrl: 'https://euopen.ttlock.com',\n            lockIds: [] as string[],\n            appName: 'TTLock'\n        },\n        emailSettings: {\n            smtpHost: '',\n            smtpPort: 587,\n            smtpUser: '',\n            smtpPass: '',\n            smtpFromEmail: '',\n            smtpFromName: '',\n            imap: {\n                enabled: false,\n                host: '',\n                port: 993,\n                secure: true,\n                user: '',\n                password: '',\n                folder: 'INBOX',\n                processedFolder: ''\n            }\n        }\n    });\n    const [activeSettingsTab, setActiveSettingsTab] = useState<'whatsapp' | 'lobbypms' | 'boldpayment' | 'doorsystem' | 'email'>('whatsapp');\n    const [showSecrets, setShowSecrets] = useState<Record<string, boolean>>({});\n    const [searchTerm, setSearchTerm] = useState('');\n    const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n    const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n    const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n    const [activeFilterName, setActiveFilterName] = useState<string>('');\n    const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n    const [displayLimit, setDisplayLimit] = useState(10);\n    const { hasPermission } = usePermissions();\n    const { openSidepane, closeSidepane } = useSidepane();\n\n    // Berechtigungen prfen\n    const canCreate = hasPermission('branches', 'write', 'table');\n    const canEdit = hasPermission('branches', 'write', 'table');\n    const canDelete = hasPermission('branches', 'write', 'table');\n\n    // Branches laden\n    const fetchBranches = useCallback(async () => {\n        setLoading(true);\n        try {\n            const response = await axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE);\n            setBranches(response.data);\n        } catch (error: any) {\n            console.error('Fehler beim Laden der Niederlassungen:', error);\n            const errorMessage = error.response?.data?.message || t('branches.loadError');\n            onError(errorMessage);\n        } finally {\n            setLoading(false);\n        }\n    }, [onError]);\n\n    useEffect(() => {\n        fetchBranches();\n    }, [fetchBranches]);\n\n    // Sidepane ffnen/schlieen basierend auf Modal-Status\n    useEffect(() => {\n        if (isModalOpen) {\n            openSidepane();\n        } else {\n            closeSidepane();\n        }\n        \n        return () => {\n            closeSidepane();\n        };\n    }, [isModalOpen, openSidepane, closeSidepane]);\n\n    // Formular zurcksetzen\n    const resetForm = () => {\n        setFormData({ \n            name: '',\n            whatsappSettings: {\n                provider: 'whatsapp-business-api' as 'twilio' | 'whatsapp-business-api',\n                apiKey: '',\n                apiSecret: '',\n                phoneNumberId: '',\n                ai: {\n                    enabled: false,\n                    model: 'gpt-4o',\n                    systemPrompt: '',\n                    rules: [] as string[],\n                    sources: [] as string[],\n                    temperature: 0.7,\n                    maxTokens: 500\n                }\n            },\n            lobbyPmsSettings: {\n                apiUrl: '',\n                apiKey: '',\n                propertyId: '',\n                autoCreateTasks: false,\n                lateCheckInThreshold: '22:00',\n                notificationChannels: ['email'] as string[],\n                autoSendInvitation: false\n            },\n            boldPaymentSettings: {\n                apiKey: '',\n                merchantId: '',\n                environment: 'sandbox' as 'sandbox' | 'production'\n            },\n            doorSystemSettings: {\n                clientId: '',\n                clientSecret: '',\n                username: '',\n                password: '',\n                apiUrl: 'https://euopen.ttlock.com',\n                lockIds: [] as string[],\n                appName: 'TTLock'\n            },\n            sireSettings: {\n                enabled: false,\n                autoRegisterOnCheckIn: false,\n                apiUrl: '',\n                apiKey: '',\n                apiSecret: '',\n                propertyCode: ''\n            },\n            emailSettings: {\n                smtpHost: '',\n                smtpPort: 587,\n                smtpUser: '',\n                smtpPass: '',\n                smtpFromEmail: '',\n                smtpFromName: '',\n                imap: {\n                    enabled: false,\n                    host: '',\n                    port: 993,\n                    secure: true,\n                    user: '',\n                    password: '',\n                    folder: 'INBOX',\n                    processedFolder: ''\n                }\n            }\n        });\n        setActiveSettingsTab('whatsapp');\n        setEditingBranch(null);\n    };\n\n    // Modal ffnen fr neue Branch\n    const handleCreate = () => {\n        resetForm();\n        setIsModalOpen(true);\n    };\n\n    // Modal ffnen fr Bearbeitung\n    const handleEdit = async (branch: Branch) => {\n        setEditingBranch(branch);\n        const existingWhatsapp = branch.whatsappSettings || {};\n        const existingLobbyPms = branch.lobbyPmsSettings || {};\n        const existingBoldPayment = branch.boldPaymentSettings || {};\n        const existingDoorSystem = branch.doorSystemSettings || {};\n        const existingEmail = branch.emailSettings || {};\n        \n        setFormData({ \n            name: branch.name,\n            whatsappSettings: {\n                provider: existingWhatsapp.provider || 'whatsapp-business-api',\n                apiKey: existingWhatsapp.apiKey || '',\n                apiSecret: existingWhatsapp.apiSecret || '',\n                phoneNumberId: existingWhatsapp.phoneNumberId || '',\n                ai: existingWhatsapp.ai || {\n                    enabled: false,\n                    model: 'gpt-4o',\n                    systemPrompt: '',\n                    rules: [],\n                    sources: [],\n                    temperature: 0.7,\n                    maxTokens: 500\n                }\n            },\n            lobbyPmsSettings: {\n                apiUrl: existingLobbyPms.apiUrl || '',\n                apiKey: existingLobbyPms.apiKey || '',\n                propertyId: existingLobbyPms.propertyId || '',\n                autoCreateTasks: existingLobbyPms.autoCreateTasks || false,\n                lateCheckInThreshold: existingLobbyPms.lateCheckInThreshold || '22:00',\n                notificationChannels: existingLobbyPms.notificationChannels || ['email'],\n                autoSendInvitation: existingLobbyPms.autoSendInvitation || false\n            },\n            boldPaymentSettings: {\n                apiKey: existingBoldPayment.apiKey || '',\n                merchantId: existingBoldPayment.merchantId || '',\n                environment: existingBoldPayment.environment || 'sandbox'\n            },\n            doorSystemSettings: {\n                clientId: existingDoorSystem.clientId || '',\n                clientSecret: existingDoorSystem.clientSecret || '',\n                username: existingDoorSystem.username || '',\n                password: existingDoorSystem.password || '',\n                apiUrl: existingDoorSystem.apiUrl || 'https://euopen.ttlock.com',\n                lockIds: existingDoorSystem.lockIds || [],\n                appName: existingDoorSystem.appName || 'TTLock'\n            },\n            emailSettings: {\n                smtpHost: existingEmail.smtpHost || '',\n                smtpPort: existingEmail.smtpPort || 587,\n                smtpUser: existingEmail.smtpUser || '',\n                smtpPass: existingEmail.smtpPass || '',\n                smtpFromEmail: existingEmail.smtpFromEmail || '',\n                smtpFromName: existingEmail.smtpFromName || '',\n                imap: existingEmail.imap || {\n                    enabled: false,\n                    host: '',\n                    port: 993,\n                    secure: true,\n                    user: '',\n                    password: '',\n                    folder: 'INBOX',\n                    processedFolder: ''\n                }\n            }\n        });\n        setIsModalOpen(true);\n    };\n\n    // Modal schlieen\n    const handleCloseModal = () => {\n        setIsModalOpen(false);\n        resetForm();\n    };\n\n    // Formular absenden\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        \n        if (!formData.name.trim()) {\n            onError(t('branches.nameRequired'));\n            return;\n        }\n\n        try {\n            if (editingBranch) {\n                // Branch aktualisieren\n                await axiosInstance.put(API_ENDPOINTS.BRANCHES.UPDATE(editingBranch.id), {\n                    name: formData.name.trim(),\n                    whatsappSettings: formData.whatsappSettings,\n                    lobbyPmsSettings: formData.lobbyPmsSettings,\n                    boldPaymentSettings: formData.boldPaymentSettings,\n                    doorSystemSettings: formData.doorSystemSettings,\n                    emailSettings: formData.emailSettings\n                });\n            } else {\n                // Neue Branch erstellen\n                await axiosInstance.post(API_ENDPOINTS.BRANCHES.CREATE, {\n                    name: formData.name.trim()\n                });\n            }\n            \n            await fetchBranches();\n            handleCloseModal();\n        } catch (error: any) {\n            console.error('Fehler beim Speichern der Niederlassung:', error);\n            const errorMessage = error.response?.data?.message || t('branches.saveError');\n            onError(errorMessage);\n        }\n    };\n\n    // Branch lschen\n    const handleDelete = async (branchId: number) => {\n        if (!window.confirm(t('branches.deleteConfirm', { defaultValue: 'Mchten Sie diese Niederlassung wirklich lschen?' }))) {\n            return;\n        }\n\n        try {\n            await axiosInstance.delete(API_ENDPOINTS.BRANCHES.DELETE(branchId));\n            await fetchBranches();\n        } catch (error: any) {\n            console.error('Fehler beim Lschen der Niederlassung:', error);\n            const errorMessage = error.response?.data?.message || t('branches.deleteError');\n            onError(errorMessage);\n        }\n    };\n\n    // Funktion zum Zhlen der aktiven Filter\n    const getActiveFilterCount = () => {\n        return filterConditions.length;\n    };\n\n    // Filtern und sortieren der Branches\n    const filteredAndSortedBranches = useMemo(() => {\n        return branches\n            .filter(branch => {\n                // Globale Suche\n                if (searchTerm) {\n                    const searchLower = searchTerm.toLowerCase();\n                    const matchesSearch = branch.name.toLowerCase().includes(searchLower);\n                    \n                    if (!matchesSearch) return false;\n                }\n                \n                // Prfe erweiterte Filterbedingungen, wenn vorhanden\n                if (filterConditions.length > 0) {\n                    let result = filterConditions.length > 0;\n                    \n                    for (let i = 0; i < filterConditions.length; i++) {\n                        const condition = filterConditions[i];\n                        let conditionMet = false;\n                        \n                        switch (condition.column) {\n                            case 'name':\n                                if (condition.operator === 'equals') {\n                                    conditionMet = branch.name.toLowerCase() === (condition.value as string || '').toLowerCase();\n                                } else if (condition.operator === 'contains') {\n                                    conditionMet = branch.name.toLowerCase().includes((condition.value as string || '').toLowerCase());\n                                } else if (condition.operator === 'startsWith') {\n                                    conditionMet = branch.name.toLowerCase().startsWith((condition.value as string || '').toLowerCase());\n                                }\n                                break;\n                        }\n                        \n                        // Verknpfe das Ergebnis dieser Bedingung mit dem Gesamtergebnis\n                        if (i === 0) {\n                            result = conditionMet;\n                        } else {\n                            const operator = filterLogicalOperators[i - 1];\n                            result = operator === 'AND' ? (result && conditionMet) : (result || conditionMet);\n                        }\n                    }\n                    \n                    if (!result) return false;\n                }\n                \n                return true;\n            })\n            .sort((a, b) => {\n                return a.name.localeCompare(b.name);\n            });\n    }, [branches, searchTerm, filterConditions, filterLogicalOperators]);\n\n    // Funktion zum Anwenden von Filterbedingungen\n    const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n        setFilterConditions(conditions);\n        setFilterLogicalOperators(operators);\n    };\n    \n    // Funktion zum Zurcksetzen der Filter\n    const resetFilterConditions = () => {\n        setFilterConditions([]);\n        setFilterLogicalOperators([]);\n        setActiveFilterName('');\n        setSelectedFilterId(null);\n    };\n    \n    // Filter Change Handler (Controlled Mode)\n    const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n        setActiveFilterName(name);\n        setSelectedFilterId(id);\n        applyFilterConditions(conditions, operators);\n    };\n\n    // Standard-Filter erstellen und speichern\n    useEffect(() => {\n        const createStandardFilters = async () => {\n            try {\n                const token = localStorage.getItem('token');\n                \n                if (!token) {\n                    console.error(t('common.notAuthenticated'));\n                    return;\n                }\n\n                // Prfen, ob die Standard-Filter bereits existieren\n                const existingFiltersResponse = await axiosInstance.get(\n                    API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(BRANCHES_TABLE_ID)\n                );\n\n                const existingFilters = existingFiltersResponse.data || [];\n                const alleFilterExists = existingFilters.some((filter: any) => filter.name === 'Alle');\n\n                // Erstelle \"Alle\"-Filter, wenn er noch nicht existiert\n                if (!alleFilterExists) {\n                    const alleFilter = {\n                        tableId: BRANCHES_TABLE_ID,\n                        name: 'Alle',\n                        conditions: [],\n                        operators: []\n                    };\n\n                    await axiosInstance.post(\n                        API_ENDPOINTS.SAVED_FILTERS.BASE,\n                        alleFilter\n                    );\n                    console.log(t('branches.filterCreated'));\n                }\n            } catch (error) {\n                console.error(t('branches.createStandardFiltersError'), error);\n            }\n        };\n\n        createStandardFilters();\n    }, []);\n\n    // Initialer Default-Filter setzen (Controlled Mode)\n    useEffect(() => {\n        const setInitialFilter = async () => {\n            try {\n                const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(BRANCHES_TABLE_ID));\n                const filters = response.data;\n                \n                const alleFilter = filters.find((filter: any) => filter.name === 'Alle');\n                if (alleFilter) {\n                    setActiveFilterName('Alle');\n                    setSelectedFilterId(alleFilter.id);\n                    applyFilterConditions(alleFilter.conditions, alleFilter.operators);\n                }\n            } catch (error) {\n                console.error(t('branches.setInitialFilterError'), error);\n            }\n        };\n\n        setInitialFilter();\n    }, []);\n\n    // Branches rendern\n    const renderBranches = () => {\n        if (filteredAndSortedBranches.length === 0) {\n            return (\n                <div className=\"p-4 bg-gray-50 dark:bg-gray-700 rounded text-center\">\n                    <p className=\"text-gray-600 dark:text-gray-400\">\n                        {t('branches.noBranches', { defaultValue: 'Keine Niederlassungen gefunden. Erstellen Sie eine neue Niederlassung mit dem Button oben.' })}\n                    </p>\n                </div>\n            );\n        }\n        \n        // Card-Ansicht\n        return (\n            <>\n                <div className=\"space-y-4\">\n                    {filteredAndSortedBranches.slice(0, displayLimit).map((branch) => (\n                        <BranchCard \n                            key={branch.id} \n                            branch={branch} \n                            onEdit={handleEdit}\n                            onDelete={handleDelete}\n                            canEdit={canEdit}\n                            canDelete={canDelete}\n                        />\n                    ))}\n                </div>\n                \n                {/* \"Mehr anzeigen\" Button */}\n                {filteredAndSortedBranches.length > displayLimit && (\n                    <div className=\"mt-4 flex justify-center\">\n                        <button\n                            className=\"px-4 py-2 text-sm font-medium text-blue-600 bg-white border border-blue-300 rounded-md hover:bg-blue-50 dark:bg-gray-800 dark:text-blue-400 dark:border-gray-700 dark:hover:bg-gray-700\"\n                            onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n                        >\n                            {t('common.showMore', { defaultValue: 'Mehr anzeigen' })} ({filteredAndSortedBranches.length - displayLimit} {t('common.remaining', { defaultValue: 'verbleibend' })})\n                        </button>\n                    </div>\n                )}\n            </>\n        );\n    };\n\n    // Mobile-Erkennung\n    const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n    \n    useEffect(() => {\n        const handleResize = () => {\n            setIsMobile(window.innerWidth < 640);\n        };\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, []);\n\n    return (\n        <div>\n            {/* Spaltenanzeige und Suche */}\n            <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between mb-4\">\n                    {/* Linke Seite: \"Neue Niederlassung erstellen\"-Button */}\n                    <div className=\"flex items-center\">\n                        {canCreate && (\n                            <div className=\"relative group\">\n                                <button\n                                    onClick={handleCreate}\n                                    className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n                                    style={{ width: '30.19px', height: '30.19px' }}\n                                    aria-label={t('branches.create', { defaultValue: 'Neue Niederlassung' })}\n                                >\n                                    <PlusIcon className=\"h-4 w-4\" />\n                                </button>\n                                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                    {t('branches.create', { defaultValue: 'Neue Niederlassung' })}\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                    \n                    {/* Mitte: Titel - Kein Titel in der Mitte notwendig bei dieser Komponente, da der Tab-Header bereits den Titel zeigt */}\n                    <div></div>\n                    \n                    {/* Rechte Seite: Suchfeld, Filter-Button */}\n                    <div className=\"flex items-center gap-1.5\">\n                        <input\n                            type=\"text\"\n                            placeholder={t('common.search', { defaultValue: 'Suchen...' })}\n                            className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                        />\n                        <div className=\"relative group ml-1\">\n                            <button\n                                className={`p-2 rounded-md ${getActiveFilterCount() > 0 ? 'bg-blue-50 text-blue-600' : 'hover:bg-gray-100'} relative`}\n                                onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n                            >\n                                <FunnelIcon className=\"w-5 h-5\" />\n                                {getActiveFilterCount() > 0 && (\n                                    <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 text-white rounded-full text-xs flex items-center justify-center\">\n                                        {getActiveFilterCount()}\n                                    </span>\n                                )}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('common.filter', { defaultValue: 'Filter' })}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Filter-Modal */}\n                {isFilterModalOpen && (\n                    <FilterPane\n                        columns={[\n                            { id: 'name', label: t('branches.name', { defaultValue: 'Name' }) }\n                        ]}\n                        onApply={applyFilterConditions}\n                        onReset={resetFilterConditions}\n                        savedConditions={filterConditions}\n                        savedOperators={filterLogicalOperators}\n                        tableId={BRANCHES_TABLE_ID}\n                    />\n                )}\n                \n                {/* Gespeicherte Filter als Tags anzeigen */}\n                <SavedFilterTags\n                    tableId={BRANCHES_TABLE_ID}\n                    onSelectFilter={applyFilterConditions}\n                    onReset={resetFilterConditions}\n                    activeFilterName={activeFilterName}\n                    selectedFilterId={selectedFilterId}\n                    onFilterChange={handleFilterChange}\n                    defaultFilterName=\"Alle\"\n                />\n\n                {loading ? (\n                    <div className=\"flex justify-center items-center py-8\">\n                        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n                    </div>\n                ) : (\n                    renderBranches()\n                )}\n            </div>\n\n            {/* Modal/Sidepane fr Branch-Erstellung/Bearbeitung */}\n            {isModalOpen && (\n                <>\n                    {/* Mobile (unter 640px) - Modal */}\n                    {isMobile ? (\n                        <Dialog open={isModalOpen} onClose={handleCloseModal} className=\"relative z-50\">\n                            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n                            \n                            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                                <Dialog.Panel className=\"mx-auto max-w-sm w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                                    {/* Header */}\n                                    <div className=\"px-6 py-4 border-b dark:border-gray-700 flex-shrink-0\">\n                                        <div className=\"flex items-center justify-between\">\n                                            <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                                                {editingBranch \n                                                    ? t('branches.edit', { defaultValue: 'Niederlassung bearbeiten' })\n                                                    : t('branches.create', { defaultValue: 'Neue Niederlassung' })\n                                                }\n                                            </Dialog.Title>\n                                            <button\n                                                onClick={handleCloseModal}\n                                                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                            >\n                                                <XMarkIcon className=\"h-6 w-6\" />\n                                            </button>\n                                        </div>\n                                    </div>\n                                    \n                                    {/* Form */}\n                                    <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n                                        <div>\n                                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                {t('branches.name', { defaultValue: 'Name' })}\n                                            </label>\n                                            <input\n                                                type=\"text\"\n                                                value={formData.name}\n                                                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                required\n                                                autoFocus\n                                            />\n                                        </div>\n\n                                        {/* Settings Tabs - nur beim Bearbeiten */}\n                                        {editingBranch && (\n                                            <>\n                                                {/* Tab Navigation */}\n                                                <div className=\"border-b border-gray-200 dark:border-gray-700 mb-4\">\n                                                    <nav className=\"-mb-px flex space-x-2 overflow-x-auto\">\n                                                        {['whatsapp', 'lobbypms', 'boldpayment', 'doorsystem', 'email'].map((tab) => (\n                                                            <button\n                                                                key={tab}\n                                                                type=\"button\"\n                                                                onClick={() => setActiveSettingsTab(tab as any)}\n                                                                className={`py-2 px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ${\n                                                                    activeSettingsTab === tab\n                                                                        ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                                                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                                                                }`}\n                                                            >\n                                                                {tab === 'whatsapp' ? 'WhatsApp' : tab === 'lobbypms' ? 'LobbyPMS' : tab === 'boldpayment' ? 'Bold Payment' : tab === 'doorsystem' ? 'TTLock' : 'Email'}\n                                                            </button>\n                                                        ))}\n                                                    </nav>\n                                                </div>\n\n                                                {/* Tab Content */}\n                                                <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n                                                    {/* WhatsApp Settings Tab */}\n                                                    {activeSettingsTab === 'whatsapp' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                WhatsApp Settings\n                                                            </h4>\n                                                \n                                                <div className=\"space-y-4\">\n                                                    <div>\n                                                        <label htmlFor=\"whatsappProvider\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                            Provider\n                                                        </label>\n                                                        <select\n                                                            id=\"whatsappProvider\"\n                                                            value={formData.whatsappSettings.provider}\n                                                            onChange={(e) => setFormData({\n                                                                ...formData,\n                                                                whatsappSettings: {\n                                                                    ...formData.whatsappSettings,\n                                                                    provider: e.target.value as 'twilio' | 'whatsapp-business-api'\n                                                                }\n                                                            })}\n                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                        >\n                                                            <option value=\"twilio\">Twilio</option>\n                                                            <option value=\"whatsapp-business-api\">WhatsApp Business API</option>\n                                                        </select>\n                                                    </div>\n\n                                                    <div>\n                                                        <label htmlFor=\"whatsappApiKey\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                            API Key / Access Token\n                                                        </label>\n                                                        <div className=\"relative\">\n                                                            <input\n                                                                type={showSecrets['whatsappApiKey'] ? 'text' : 'password'}\n                                                                id=\"whatsappApiKey\"\n                                                                value={formData.whatsappSettings.apiKey}\n                                                                onChange={(e) => setFormData({\n                                                                    ...formData,\n                                                                    whatsappSettings: {\n                                                                        ...formData.whatsappSettings,\n                                                                        apiKey: e.target.value\n                                                                    }\n                                                                })}\n                                                                placeholder=\"API Key / Access Token\"\n                                                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                            />\n                                                            <button\n                                                                type=\"button\"\n                                                                onClick={() => setShowSecrets(prev => ({ ...prev, whatsappApiKey: !prev.whatsappApiKey }))}\n                                                                className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                            >\n                                                                {showSecrets['whatsappApiKey'] ? (\n                                                                    <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                    </svg>\n                                                                ) : (\n                                                                    <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                    </svg>\n                                                                )}\n                                                            </button>\n                                                        </div>\n                                                    </div>\n\n                                                    <div>\n                                                        <label htmlFor=\"whatsappPhoneNumberId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                            Phone Number ID\n                                                        </label>\n                                                        <input\n                                                            type=\"text\"\n                                                            id=\"whatsappPhoneNumberId\"\n                                                            value={formData.whatsappSettings.phoneNumberId}\n                                                            onChange={(e) => setFormData({\n                                                                ...formData,\n                                                                whatsappSettings: {\n                                                                    ...formData.whatsappSettings,\n                                                                    phoneNumberId: e.target.value\n                                                                }\n                                                            })}\n                                                            placeholder=\"Phone Number ID\"\n                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                        />\n                                                    </div>\n\n                                                    {/* AI Configuration */}\n                                                    <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4\">\n                                                        <div className=\"flex items-center justify-between mb-4\">\n                                                            <h5 className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                                                KI-Konfiguration (AI)\n                                                            </h5>\n                                                            <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                <input\n                                                                    type=\"checkbox\"\n                                                                    checked={formData.whatsappSettings.ai.enabled}\n                                                                    onChange={(e) => setFormData({\n                                                                        ...formData,\n                                                                        whatsappSettings: {\n                                                                            ...formData.whatsappSettings,\n                                                                            ai: {\n                                                                                ...formData.whatsappSettings.ai,\n                                                                                enabled: e.target.checked\n                                                                            }\n                                                                        }\n                                                                    })}\n                                                                    className=\"sr-only peer\"\n                                                                />\n                                                                <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                    {formData.whatsappSettings.ai.enabled ? 'Aktiviert' : 'Deaktiviert'}\n                                                                </span>\n                                                            </label>\n                                                        </div>\n\n                                                        {formData.whatsappSettings.ai.enabled && (\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label htmlFor=\"aiModel\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Modell\n                                                                    </label>\n                                                                    <select\n                                                                        id=\"aiModel\"\n                                                                        value={formData.whatsappSettings.ai.model}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    model: e.target.value\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    >\n                                                                        <option value=\"gpt-4o\">GPT-4o</option>\n                                                                        <option value=\"gpt-4\">GPT-4</option>\n                                                                        <option value=\"gpt-3.5-turbo\">GPT-3.5 Turbo</option>\n                                                                    </select>\n                                                                </div>\n\n                                                                <div>\n                                                                    <label htmlFor=\"aiSystemPrompt\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        System Prompt\n                                                                    </label>\n                                                                    <textarea\n                                                                        id=\"aiSystemPrompt\"\n                                                                        value={formData.whatsappSettings.ai.systemPrompt}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    systemPrompt: e.target.value\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={4}\n                                                                        placeholder=\"Du bist ein hilfreicher Assistent fr...\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Regeln (eine pro Zeile)\n                                                                    </label>\n                                                                    <textarea\n                                                                        value={formData.whatsappSettings.ai.rules.join('\\n')}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    rules: e.target.value.split('\\n').filter(r => r.trim())\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={3}\n                                                                        placeholder=\"Antworte immer auf Spanisch&#10;Sei freundlich und professionell\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Quellen/URLs (eine pro Zeile)\n                                                                    </label>\n                                                                    <textarea\n                                                                        value={formData.whatsappSettings.ai.sources.join('\\n')}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    sources: e.target.value.split('\\n').filter(s => s.trim())\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={2}\n                                                                        placeholder=\"https://wiki.example.com/manila-procedures&#10;https://wiki.example.com/faq\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div className=\"grid grid-cols-2 gap-4\">\n                                                                    <div>\n                                                                        <label htmlFor=\"aiTemperature\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                            Temperature ({formData.whatsappSettings.ai.temperature})\n                                                                        </label>\n                                                                        <input\n                                                                            type=\"range\"\n                                                                            id=\"aiTemperature\"\n                                                                            min=\"0\"\n                                                                            max=\"2\"\n                                                                            step=\"0.1\"\n                                                                            value={formData.whatsappSettings.ai.temperature}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                whatsappSettings: {\n                                                                                    ...formData.whatsappSettings,\n                                                                                    ai: {\n                                                                                        ...formData.whatsappSettings.ai,\n                                                                                        temperature: parseFloat(e.target.value)\n                                                                                    }\n                                                                                }\n                                                                            })}\n                                                                            className=\"mt-1 block w-full\"\n                                                                        />\n                                                                    </div>\n\n                                                                    <div>\n                                                                        <label htmlFor=\"aiMaxTokens\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                            Max Tokens\n                                                                        </label>\n                                                                        <input\n                                                                            type=\"number\"\n                                                                            id=\"aiMaxTokens\"\n                                                                            min=\"100\"\n                                                                            max=\"4000\"\n                                                                            step=\"100\"\n                                                                            value={formData.whatsappSettings.ai.maxTokens}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                whatsappSettings: {\n                                                                                    ...formData.whatsappSettings,\n                                                                                    ai: {\n                                                                                        ...formData.whatsappSettings.ai,\n                                                                                        maxTokens: parseInt(e.target.value) || 500\n                                                                                    }\n                                                                                }\n                                                                            })}\n                                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                        />\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        )}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                                    {/* LobbyPMS Settings Tab */}\n                                                    {activeSettingsTab === 'lobbypms' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                LobbyPMS Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API URL\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.lobbyPmsSettings.apiUrl}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, apiUrl: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"https://api.lobbypms.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API Key\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['lobbyPmsApiKey'] ? 'text' : 'password'}\n                                                                        value={formData.lobbyPmsSettings.apiKey}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, apiKey: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"API Key\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Property ID\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.lobbyPmsSettings.propertyId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, propertyId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Property ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* Bold Payment Settings Tab */}\n                                                    {activeSettingsTab === 'boldpayment' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                Bold Payment Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API Key\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['boldPaymentApiKey'] ? 'text' : 'password'}\n                                                                        value={formData.boldPaymentSettings.apiKey}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, apiKey: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"API Key\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Merchant ID\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['boldPaymentMerchantId'] ? 'text' : 'password'}\n                                                                        value={formData.boldPaymentSettings.merchantId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, merchantId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Merchant ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Environment\n                                                                    </label>\n                                                                    <select\n                                                                        value={formData.boldPaymentSettings.environment}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, environment: e.target.value as 'sandbox' | 'production' }\n                                                                        })}\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    >\n                                                                        <option value=\"sandbox\">Sandbox</option>\n                                                                        <option value=\"production\">Production</option>\n                                                                    </select>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* TTLock Settings Tab */}\n                                                    {activeSettingsTab === 'doorsystem' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                TTLock Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Client ID\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.doorSystemSettings.clientId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, clientId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Client ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Client Secret\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['doorSystemClientSecret'] ? 'text' : 'password'}\n                                                                        value={formData.doorSystemSettings.clientSecret}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, clientSecret: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Client Secret\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Username\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.doorSystemSettings.username}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, username: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Username\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Password\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['doorSystemPassword'] ? 'text' : 'password'}\n                                                                        value={formData.doorSystemSettings.password}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, password: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Password\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* Email Settings Tab */}\n                                                    {activeSettingsTab === 'email' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                Email Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Host\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpHost}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpHost: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"smtp.example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Port\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"number\"\n                                                                        value={formData.emailSettings.smtpPort}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpPort: parseInt(e.target.value) || 587 }\n                                                                        })}\n                                                                        placeholder=\"587\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP User\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpUser}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpUser: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"user@example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Password\n                                                                    </label>\n                                                                    <div className=\"relative\">\n                                                                        <input\n                                                                            type={showSecrets['emailSmtpPass'] ? 'text' : 'password'}\n                                                                            value={formData.emailSettings.smtpPass}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                emailSettings: { ...formData.emailSettings, smtpPass: e.target.value }\n                                                                            })}\n                                                                            placeholder=\"Password\"\n                                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                                        />\n                                                                        <button\n                                                                            type=\"button\"\n                                                                            onClick={() => setShowSecrets({ ...showSecrets, emailSmtpPass: !showSecrets['emailSmtpPass'] })}\n                                                                            className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                                        >\n                                                                            {showSecrets['emailSmtpPass'] ? (\n                                                                                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                                </svg>\n                                                                            ) : (\n                                                                                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                                </svg>\n                                                                            )}\n                                                                        </button>\n                                                                    </div>\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP From Email\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"email\"\n                                                                        value={formData.emailSettings.smtpFromEmail}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpFromEmail: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"noreply@example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP From Name\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpFromName}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpFromName: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Branch Name\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                {/* IMAP Settings Section */}\n                                                                <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4\">\n                                                                    <div className=\"flex items-center justify-between mb-4\">\n                                                                        <h5 className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                                                            IMAP Settings (Email Reading)\n                                                                        </h5>\n                                                                        <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                            <input\n                                                                                type=\"checkbox\"\n                                                                                checked={formData.emailSettings.imap.enabled}\n                                                                                onChange={(e) => setFormData({\n                                                                                    ...formData,\n                                                                                    emailSettings: {\n                                                                                        ...formData.emailSettings,\n                                                                                        imap: {\n                                                                                            ...formData.emailSettings.imap,\n                                                                                            enabled: e.target.checked\n                                                                                        }\n                                                                                    }\n                                                                                })}\n                                                                                className=\"sr-only peer\"\n                                                                            />\n                                                                            <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                            <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                                {formData.emailSettings.imap.enabled ? 'Enabled' : 'Disabled'}\n                                                                            </span>\n                                                                        </label>\n                                                                    </div>\n\n                                                                    {formData.emailSettings.imap.enabled && (\n                                                                        <div className=\"space-y-4\">\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Host\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.host}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, host: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"imap.example.com\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Port\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"number\"\n                                                                                    value={formData.emailSettings.imap.port}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, port: parseInt(e.target.value) || 993 }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"993\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                                    <input\n                                                                                        type=\"checkbox\"\n                                                                                        checked={formData.emailSettings.imap.secure}\n                                                                                        onChange={(e) => setFormData({\n                                                                                            ...formData,\n                                                                                            emailSettings: {\n                                                                                                ...formData.emailSettings,\n                                                                                                imap: { ...formData.emailSettings.imap, secure: e.target.checked }\n                                                                                            }\n                                                                                        })}\n                                                                                        className=\"sr-only peer\"\n                                                                                    />\n                                                                                    <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                                    <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                                        Secure (SSL/TLS)\n                                                                                    </span>\n                                                                                </label>\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP User\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.user}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, user: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"user@example.com\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Password\n                                                                                </label>\n                                                                                <div className=\"relative\">\n                                                                                    <input\n                                                                                        type={showSecrets['emailImapPass'] ? 'text' : 'password'}\n                                                                                        value={formData.emailSettings.imap.password}\n                                                                                        onChange={(e) => setFormData({\n                                                                                            ...formData,\n                                                                                            emailSettings: {\n                                                                                                ...formData.emailSettings,\n                                                                                                imap: { ...formData.emailSettings.imap, password: e.target.value }\n                                                                                            }\n                                                                                        })}\n                                                                                        placeholder=\"Password\"\n                                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                                                    />\n                                                                                    <button\n                                                                                        type=\"button\"\n                                                                                        onClick={() => setShowSecrets({ ...showSecrets, emailImapPass: !showSecrets['emailImapPass'] })}\n                                                                                        className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                                                    >\n                                                                                        {showSecrets['emailImapPass'] ? (\n                                                                                            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                                            </svg>\n                                                                                        ) : (\n                                                                                            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                                            </svg>\n                                                                                        )}\n                                                                                    </button>\n                                                                                </div>\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Folder\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.folder}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, folder: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"INBOX\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    Processed Folder (optional)\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.processedFolder}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, processedFolder: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"Processed\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                        </div>\n                                                                    )}\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            </>\n                                        )}\n\n                                        {/* Buttons */}\n                                        <div className=\"flex justify-end pt-4 gap-2\">\n                                            <div className=\"relative group\">\n                                                <button\n                                                    type=\"button\"\n                                                    onClick={handleCloseModal}\n                                                    className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                                                >\n                                                    <XMarkIcon className=\"h-5 w-5\" />\n                                                </button>\n                                                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                                    {t('common.cancel', { defaultValue: 'Abbrechen' })}\n                                                </div>\n                                            </div>\n                                            <div className=\"relative group\">\n                                                <button\n                                                    type=\"submit\"\n                                                    className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors\"\n                                                >\n                                                    <CheckIcon className=\"h-5 w-5\" />\n                                                </button>\n                                                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                                    {editingBranch ? t('common.update', { defaultValue: 'Aktualisieren' }) : t('common.create', { defaultValue: 'Erstellen' })}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </form>\n                                </Dialog.Panel>\n                            </div>\n                        </Dialog>\n                    ) : (\n                        // Desktop - Sidepane (dynamische Breite basierend auf Tab-Anzahl)\n                        <div className=\"fixed inset-y-0 right-0 w-full sm:min-w-[500px] sm:max-w-[600px] bg-white dark:bg-gray-800 shadow-xl z-50 flex flex-col\">\n                            {/* Header */}\n                            <div className=\"px-6 py-4 border-b dark:border-gray-700 flex-shrink-0\">\n                                <div className=\"flex items-center justify-between\">\n                                    <h2 className=\"text-lg font-semibold dark:text-white\">\n                                        {editingBranch \n                                            ? t('branches.edit', { defaultValue: 'Niederlassung bearbeiten' })\n                                            : t('branches.create', { defaultValue: 'Neue Niederlassung' })\n                                        }\n                                    </h2>\n                                    <button\n                                        onClick={handleCloseModal}\n                                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                    >\n                                        <XMarkIcon className=\"h-6 w-6\" />\n                                    </button>\n                                </div>\n                            </div>\n                            \n                            {/* Form */}\n                            <form onSubmit={handleSubmit} className=\"flex flex-col flex-1 min-h-0\">\n                                <div className=\"flex-1 overflow-y-auto min-h-0\">\n                                    <div className=\"p-6 space-y-4\">\n                                        <div>\n                                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                {t('branches.name', { defaultValue: 'Name' })}\n                                            </label>\n                                            <input\n                                                type=\"text\"\n                                                value={formData.name}\n                                                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                required\n                                                autoFocus\n                                            />\n                                        </div>\n\n                                        {/* Settings Tabs - nur beim Bearbeiten */}\n                                        {editingBranch && (\n                                            <>\n                                                {/* Tab Navigation */}\n                                                <div className=\"border-b border-gray-200 dark:border-gray-700 mb-4\">\n                                                    <nav className=\"-mb-px flex space-x-2 overflow-x-auto\">\n                                                        {['whatsapp', 'lobbypms', 'boldpayment', 'doorsystem', 'email'].map((tab) => (\n                                                            <button\n                                                                key={tab}\n                                                                type=\"button\"\n                                                                onClick={() => setActiveSettingsTab(tab as any)}\n                                                                className={`py-2 px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ${\n                                                                    activeSettingsTab === tab\n                                                                        ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                                                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                                                                }`}\n                                                            >\n                                                                {tab === 'whatsapp' ? 'WhatsApp' : tab === 'lobbypms' ? 'LobbyPMS' : tab === 'boldpayment' ? 'Bold Payment' : tab === 'doorsystem' ? 'TTLock' : 'Email'}\n                                                            </button>\n                                                        ))}\n                                                    </nav>\n                                                </div>\n\n                                                {/* Tab Content */}\n                                                <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n                                                    {/* WhatsApp Settings Tab */}\n                                                    {activeSettingsTab === 'whatsapp' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                WhatsApp Settings\n                                                            </h4>\n                                                            \n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label htmlFor=\"whatsappProviderDesktop\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Provider\n                                                                    </label>\n                                                                    <select\n                                                                        id=\"whatsappProviderDesktop\"\n                                                                        value={formData.whatsappSettings.provider}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                provider: e.target.value as 'twilio' | 'whatsapp-business-api'\n                                                                            }\n                                                                        })}\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    >\n                                                                        <option value=\"twilio\">Twilio</option>\n                                                                        <option value=\"whatsapp-business-api\">WhatsApp Business API</option>\n                                                                    </select>\n                                                                </div>\n\n                                                    <div>\n                                                        <label htmlFor=\"whatsappApiKey\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                            API Key / Access Token\n                                                        </label>\n                                                        <div className=\"relative\">\n                                                            <input\n                                                                type={showSecrets['whatsappApiKey'] ? 'text' : 'password'}\n                                                                id=\"whatsappApiKey\"\n                                                                value={formData.whatsappSettings.apiKey}\n                                                                onChange={(e) => setFormData({\n                                                                    ...formData,\n                                                                    whatsappSettings: {\n                                                                        ...formData.whatsappSettings,\n                                                                        apiKey: e.target.value\n                                                                    }\n                                                                })}\n                                                                placeholder=\"API Key / Access Token\"\n                                                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                            />\n                                                            <button\n                                                                type=\"button\"\n                                                                onClick={() => setShowSecrets(prev => ({ ...prev, whatsappApiKey: !prev.whatsappApiKey }))}\n                                                                className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                            >\n                                                                {showSecrets['whatsappApiKey'] ? (\n                                                                    <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                    </svg>\n                                                                ) : (\n                                                                    <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                    </svg>\n                                                                )}\n                                                            </button>\n                                                        </div>\n                                                    </div>\n\n                                                    <div>\n                                                        <label htmlFor=\"whatsappPhoneNumberId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                            Phone Number ID\n                                                        </label>\n                                                        <input\n                                                            type=\"text\"\n                                                            id=\"whatsappPhoneNumberId\"\n                                                            value={formData.whatsappSettings.phoneNumberId}\n                                                            onChange={(e) => setFormData({\n                                                                ...formData,\n                                                                whatsappSettings: {\n                                                                    ...formData.whatsappSettings,\n                                                                    phoneNumberId: e.target.value\n                                                                }\n                                                            })}\n                                                            placeholder=\"Phone Number ID\"\n                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                        />\n                                                    </div>\n\n                                                    {/* AI Configuration */}\n                                                    <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4\">\n                                                        <div className=\"flex items-center justify-between mb-4\">\n                                                            <h5 className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                                                KI-Konfiguration (AI)\n                                                            </h5>\n                                                            <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                <input\n                                                                    type=\"checkbox\"\n                                                                    checked={formData.whatsappSettings.ai.enabled}\n                                                                    onChange={(e) => setFormData({\n                                                                        ...formData,\n                                                                        whatsappSettings: {\n                                                                            ...formData.whatsappSettings,\n                                                                            ai: {\n                                                                                ...formData.whatsappSettings.ai,\n                                                                                enabled: e.target.checked\n                                                                            }\n                                                                        }\n                                                                    })}\n                                                                    className=\"sr-only peer\"\n                                                                />\n                                                                <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                    {formData.whatsappSettings.ai.enabled ? 'Aktiviert' : 'Deaktiviert'}\n                                                                </span>\n                                                            </label>\n                                                        </div>\n\n                                                        {formData.whatsappSettings.ai.enabled && (\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label htmlFor=\"aiModelDesktop\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Modell\n                                                                    </label>\n                                                                    <select\n                                                                        id=\"aiModelDesktop\"\n                                                                        value={formData.whatsappSettings.ai.model}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    model: e.target.value\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    >\n                                                                        <option value=\"gpt-4o\">GPT-4o</option>\n                                                                        <option value=\"gpt-4\">GPT-4</option>\n                                                                        <option value=\"gpt-3.5-turbo\">GPT-3.5 Turbo</option>\n                                                                    </select>\n                                                                </div>\n\n                                                                <div>\n                                                                    <label htmlFor=\"aiSystemPromptDesktop\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        System Prompt\n                                                                    </label>\n                                                                    <textarea\n                                                                        id=\"aiSystemPromptDesktop\"\n                                                                        value={formData.whatsappSettings.ai.systemPrompt}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    systemPrompt: e.target.value\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={4}\n                                                                        placeholder=\"Du bist ein hilfreicher Assistent fr...\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Regeln (eine pro Zeile)\n                                                                    </label>\n                                                                    <textarea\n                                                                        value={formData.whatsappSettings.ai.rules.join('\\n')}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    rules: e.target.value.split('\\n').filter(r => r.trim())\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={3}\n                                                                        placeholder=\"Antworte immer auf Spanisch&#10;Sei freundlich und professionell\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Quellen/URLs (eine pro Zeile)\n                                                                    </label>\n                                                                    <textarea\n                                                                        value={formData.whatsappSettings.ai.sources.join('\\n')}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    sources: e.target.value.split('\\n').filter(s => s.trim())\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={2}\n                                                                        placeholder=\"https://wiki.example.com/manila-procedures&#10;https://wiki.example.com/faq\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div className=\"grid grid-cols-2 gap-4\">\n                                                                    <div>\n                                                                        <label htmlFor=\"aiTemperatureDesktop\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                            Temperature ({formData.whatsappSettings.ai.temperature})\n                                                                        </label>\n                                                                        <input\n                                                                            type=\"range\"\n                                                                            id=\"aiTemperatureDesktop\"\n                                                                            min=\"0\"\n                                                                            max=\"2\"\n                                                                            step=\"0.1\"\n                                                                            value={formData.whatsappSettings.ai.temperature}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                whatsappSettings: {\n                                                                                    ...formData.whatsappSettings,\n                                                                                    ai: {\n                                                                                        ...formData.whatsappSettings.ai,\n                                                                                        temperature: parseFloat(e.target.value)\n                                                                                    }\n                                                                                }\n                                                                            })}\n                                                                            className=\"mt-1 block w-full\"\n                                                                        />\n                                                                    </div>\n\n                                                                    <div>\n                                                                        <label htmlFor=\"aiMaxTokensDesktop\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                            Max Tokens\n                                                                        </label>\n                                                                        <input\n                                                                            type=\"number\"\n                                                                            id=\"aiMaxTokensDesktop\"\n                                                                            min=\"100\"\n                                                                            max=\"4000\"\n                                                                            step=\"100\"\n                                                                            value={formData.whatsappSettings.ai.maxTokens}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                whatsappSettings: {\n                                                                                    ...formData.whatsappSettings,\n                                                                                    ai: {\n                                                                                        ...formData.whatsappSettings.ai,\n                                                                                        maxTokens: parseInt(e.target.value) || 500\n                                                                                    }\n                                                                                }\n                                                                            })}\n                                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                        />\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        )}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                                    {/* LobbyPMS Settings Tab */}\n                                                    {activeSettingsTab === 'lobbypms' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                LobbyPMS Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API URL\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.lobbyPmsSettings.apiUrl}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, apiUrl: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"https://api.lobbypms.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API Key\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['lobbyPmsApiKey'] ? 'text' : 'password'}\n                                                                        value={formData.lobbyPmsSettings.apiKey}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, apiKey: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"API Key\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Property ID\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.lobbyPmsSettings.propertyId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, propertyId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Property ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* Bold Payment Settings Tab */}\n                                                    {activeSettingsTab === 'boldpayment' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                Bold Payment Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API Key\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['boldPaymentApiKey'] ? 'text' : 'password'}\n                                                                        value={formData.boldPaymentSettings.apiKey}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, apiKey: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"API Key\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Merchant ID\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['boldPaymentMerchantId'] ? 'text' : 'password'}\n                                                                        value={formData.boldPaymentSettings.merchantId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, merchantId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Merchant ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Environment\n                                                                    </label>\n                                                                    <select\n                                                                        value={formData.boldPaymentSettings.environment}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, environment: e.target.value as 'sandbox' | 'production' }\n                                                                        })}\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    >\n                                                                        <option value=\"sandbox\">Sandbox</option>\n                                                                        <option value=\"production\">Production</option>\n                                                                    </select>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* TTLock Settings Tab */}\n                                                    {activeSettingsTab === 'doorsystem' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                TTLock Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Client ID\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.doorSystemSettings.clientId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, clientId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Client ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Client Secret\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['doorSystemClientSecret'] ? 'text' : 'password'}\n                                                                        value={formData.doorSystemSettings.clientSecret}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, clientSecret: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Client Secret\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Username\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.doorSystemSettings.username}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, username: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Username\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Password\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['doorSystemPassword'] ? 'text' : 'password'}\n                                                                        value={formData.doorSystemSettings.password}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, password: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Password\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* Email Settings Tab */}\n                                                    {activeSettingsTab === 'email' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                Email Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Host\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpHost}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpHost: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"smtp.example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Port\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"number\"\n                                                                        value={formData.emailSettings.smtpPort}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpPort: parseInt(e.target.value) || 587 }\n                                                                        })}\n                                                                        placeholder=\"587\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP User\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpUser}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpUser: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"user@example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Password\n                                                                    </label>\n                                                                    <div className=\"relative\">\n                                                                        <input\n                                                                            type={showSecrets['emailSmtpPass'] ? 'text' : 'password'}\n                                                                            value={formData.emailSettings.smtpPass}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                emailSettings: { ...formData.emailSettings, smtpPass: e.target.value }\n                                                                            })}\n                                                                            placeholder=\"Password\"\n                                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                                        />\n                                                                        <button\n                                                                            type=\"button\"\n                                                                            onClick={() => setShowSecrets({ ...showSecrets, emailSmtpPass: !showSecrets['emailSmtpPass'] })}\n                                                                            className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                                        >\n                                                                            {showSecrets['emailSmtpPass'] ? (\n                                                                                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                                </svg>\n                                                                            ) : (\n                                                                                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                                </svg>\n                                                                            )}\n                                                                        </button>\n                                                                    </div>\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP From Email\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"email\"\n                                                                        value={formData.emailSettings.smtpFromEmail}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpFromEmail: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"noreply@example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP From Name\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpFromName}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpFromName: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Branch Name\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                {/* IMAP Settings Section */}\n                                                                <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4\">\n                                                                    <div className=\"flex items-center justify-between mb-4\">\n                                                                        <h5 className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                                                            IMAP Settings (Email Reading)\n                                                                        </h5>\n                                                                        <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                            <input\n                                                                                type=\"checkbox\"\n                                                                                checked={formData.emailSettings.imap.enabled}\n                                                                                onChange={(e) => setFormData({\n                                                                                    ...formData,\n                                                                                    emailSettings: {\n                                                                                        ...formData.emailSettings,\n                                                                                        imap: {\n                                                                                            ...formData.emailSettings.imap,\n                                                                                            enabled: e.target.checked\n                                                                                        }\n                                                                                    }\n                                                                                })}\n                                                                                className=\"sr-only peer\"\n                                                                            />\n                                                                            <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                            <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                                {formData.emailSettings.imap.enabled ? 'Enabled' : 'Disabled'}\n                                                                            </span>\n                                                                        </label>\n                                                                    </div>\n\n                                                                    {formData.emailSettings.imap.enabled && (\n                                                                        <div className=\"space-y-4\">\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Host\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.host}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, host: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"imap.example.com\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Port\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"number\"\n                                                                                    value={formData.emailSettings.imap.port}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, port: parseInt(e.target.value) || 993 }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"993\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                                    <input\n                                                                                        type=\"checkbox\"\n                                                                                        checked={formData.emailSettings.imap.secure}\n                                                                                        onChange={(e) => setFormData({\n                                                                                            ...formData,\n                                                                                            emailSettings: {\n                                                                                                ...formData.emailSettings,\n                                                                                                imap: { ...formData.emailSettings.imap, secure: e.target.checked }\n                                                                                            }\n                                                                                        })}\n                                                                                        className=\"sr-only peer\"\n                                                                                    />\n                                                                                    <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                                    <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                                        Secure (SSL/TLS)\n                                                                                    </span>\n                                                                                </label>\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP User\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.user}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, user: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"user@example.com\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Password\n                                                                                </label>\n                                                                                <div className=\"relative\">\n                                                                                    <input\n                                                                                        type={showSecrets['emailImapPass'] ? 'text' : 'password'}\n                                                                                        value={formData.emailSettings.imap.password}\n                                                                                        onChange={(e) => setFormData({\n                                                                                            ...formData,\n                                                                                            emailSettings: {\n                                                                                                ...formData.emailSettings,\n                                                                                                imap: { ...formData.emailSettings.imap, password: e.target.value }\n                                                                                            }\n                                                                                        })}\n                                                                                        placeholder=\"Password\"\n                                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                                                    />\n                                                                                    <button\n                                                                                        type=\"button\"\n                                                                                        onClick={() => setShowSecrets({ ...showSecrets, emailImapPass: !showSecrets['emailImapPass'] })}\n                                                                                        className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                                                    >\n                                                                                        {showSecrets['emailImapPass'] ? (\n                                                                                            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                                            </svg>\n                                                                                        ) : (\n                                                                                            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                                            </svg>\n                                                                                        )}\n                                                                                    </button>\n                                                                                </div>\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Folder\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.folder}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, folder: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"INBOX\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    Processed Folder (optional)\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.processedFolder}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, processedFolder: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"Processed\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                        </div>\n                                                                    )}\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            </>\n                                        )}\n                                    </div>\n                                </div>\n\n                                {/* Buttons */}\n                                <div className=\"flex justify-end pt-4 gap-2 px-6 pb-6 border-t dark:border-gray-700\">\n                                    <div className=\"relative group\">\n                                        <button\n                                            type=\"button\"\n                                            onClick={handleCloseModal}\n                                            className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                                        >\n                                            <XMarkIcon className=\"h-5 w-5\" />\n                                        </button>\n                                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                            {t('common.cancel', { defaultValue: 'Abbrechen' })}\n                                        </div>\n                                    </div>\n                                    <div className=\"relative group\">\n                                        <button\n                                            type=\"submit\"\n                                            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors\"\n                                        >\n                                            <CheckIcon className=\"h-5 w-5\" />\n                                        </button>\n                                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                            {editingBranch ? t('common.update', { defaultValue: 'Aktualisieren' }) : t('common.create', { defaultValue: 'Erstellen' })}\n                                        </div>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                    )}\n                </>\n            )}\n        </div>\n    );\n};\n\nexport default BranchManagementTab;\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../../config/axios.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport { useAuth } from '../../hooks/useAuth.tsx';\nimport { TourProvider } from '../../types/tour.ts';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface Branch {\n    id: number;\n    name: string;\n}\n\ninterface CreateTourProviderModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onProviderCreated: (newProvider: TourProvider) => void;\n}\n\nconst CreateTourProviderModal = ({ isOpen, onClose, onProviderCreated }: CreateTourProviderModalProps) => {\n    const { t } = useTranslation();\n    const { user } = useAuth();\n    const { showMessage } = useMessage();\n    \n    const [name, setName] = useState('');\n    const [phone, setPhone] = useState('');\n    const [email, setEmail] = useState('');\n    const [contactPerson, setContactPerson] = useState('');\n    const [notes, setNotes] = useState('');\n    const [branchId, setBranchId] = useState<number | ''>('');\n    \n    const [branches, setBranches] = useState<Branch[]>([]);\n    const [error, setError] = useState<string | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [loadingData, setLoadingData] = useState(true);\n\n    // Lade Branches\n    useEffect(() => {\n        const loadData = async () => {\n            try {\n                setLoadingData(true);\n                const branchesRes = await axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE);\n                setBranches(branchesRes.data?.data || branchesRes.data || []);\n            } catch (err: any) {\n                console.error('Fehler beim Laden der Daten:', err);\n                showMessage(t('errors.loadError'), 'error');\n            } finally {\n                setLoadingData(false);\n            }\n        };\n        \n        if (isOpen) {\n            loadData();\n        }\n    }, [isOpen, t, showMessage]);\n\n    // Reset form when modal opens/closes\n    useEffect(() => {\n        if (!isOpen) {\n            setName('');\n            setPhone('');\n            setEmail('');\n            setContactPerson('');\n            setNotes('');\n            setBranchId('');\n            setError(null);\n        }\n    }, [isOpen]);\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError(null);\n\n        // Validierung\n        if (!name.trim()) {\n            setError(t('tours.providers.validation.nameRequired', { defaultValue: 'Name ist erforderlich' }));\n            return;\n        }\n\n        setLoading(true);\n        try {\n            const response = await axiosInstance.post(API_ENDPOINTS.TOUR_PROVIDERS.BASE, {\n                name: name.trim(),\n                phone: phone.trim() || null,\n                email: email.trim() || null,\n                contactPerson: contactPerson.trim() || null,\n                notes: notes.trim() || null,\n                branchId: branchId ? Number(branchId) : null\n            });\n\n            if (response.data?.success && response.data?.data) {\n                showMessage(\n                    t('tours.providers.created', { defaultValue: 'Tour-Provider erfolgreich erstellt' }),\n                    'success'\n                );\n                onProviderCreated(response.data.data);\n                onClose();\n            } else {\n                throw new Error(response.data?.message || 'Fehler beim Erstellen des Providers');\n            }\n        } catch (err: any) {\n            console.error('Fehler beim Erstellen des Providers:', err);\n            const errorMessage = err.response?.data?.message || err.message || t('errors.unknownError');\n            setError(errorMessage);\n            showMessage(errorMessage, 'error');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                    <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\n                        <Dialog.Title className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                            {t('tours.providers.create', { defaultValue: 'Neuer Tour-Provider' })}\n                        </Dialog.Title>\n                        <button\n                            onClick={onClose}\n                            className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n                        >\n                            <XMarkIcon className=\"h-6 w-6\" />\n                        </button>\n                    </div>\n\n                    <form onSubmit={handleSubmit} className=\"p-4 space-y-4\">\n                        {error && (\n                            <div className=\"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg p-3\">\n                                <p className=\"text-sm text-red-800 dark:text-red-200\">{error}</p>\n                            </div>\n                        )}\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.name', { defaultValue: 'Name' })} *\n                            </label>\n                            <input\n                                type=\"text\"\n                                value={name}\n                                onChange={(e) => setName(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                required\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.contactPerson', { defaultValue: 'Ansprechpartner' })}\n                            </label>\n                            <input\n                                type=\"text\"\n                                value={contactPerson}\n                                onChange={(e) => setContactPerson(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.phone', { defaultValue: 'Telefon' })}\n                            </label>\n                            <input\n                                type=\"tel\"\n                                value={phone}\n                                onChange={(e) => setPhone(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.email', { defaultValue: 'E-Mail' })}\n                            </label>\n                            <input\n                                type=\"email\"\n                                value={email}\n                                onChange={(e) => setEmail(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.branch', { defaultValue: 'Niederlassung' })}\n                            </label>\n                            <select\n                                value={branchId}\n                                onChange={(e) => setBranchId(e.target.value ? Number(e.target.value) : '')}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            >\n                                <option value=\"\">{t('common.all', { defaultValue: 'Alle' })}</option>\n                                {branches.map(branch => (\n                                    <option key={branch.id} value={branch.id}>\n                                        {branch.name}\n                                    </option>\n                                ))}\n                            </select>\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.notes', { defaultValue: 'Notizen' })}\n                            </label>\n                            <textarea\n                                value={notes}\n                                onChange={(e) => setNotes(e.target.value)}\n                                rows={3}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div className=\"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                            <button\n                                type=\"button\"\n                                onClick={onClose}\n                                className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n                            >\n                                {t('common.cancel', 'Abbrechen')}\n                            </button>\n                            <button\n                                type=\"submit\"\n                                disabled={loading || loadingData}\n                                className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                                {loading ? t('common.saving', 'Speichere...') : t('common.save', 'Speichern')}\n                            </button>\n                        </div>\n                    </form>\n                </Dialog.Panel>\n            </div>\n        </Dialog>\n    );\n};\n\nexport default CreateTourProviderModal;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../../config/axios.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport { useAuth } from '../../hooks/useAuth.tsx';\nimport { TourProvider } from '../../types/tour.ts';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface Branch {\n    id: number;\n    name: string;\n}\n\ninterface EditTourProviderModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    provider: TourProvider | null;\n    onProviderUpdated: (updatedProvider: TourProvider) => void;\n}\n\nconst EditTourProviderModal = ({ isOpen, onClose, provider, onProviderUpdated }: EditTourProviderModalProps) => {\n    const { t } = useTranslation();\n    const { user } = useAuth();\n    const { showMessage } = useMessage();\n    \n    const [name, setName] = useState('');\n    const [phone, setPhone] = useState('');\n    const [email, setEmail] = useState('');\n    const [contactPerson, setContactPerson] = useState('');\n    const [notes, setNotes] = useState('');\n    const [branchId, setBranchId] = useState<number | ''>('');\n    \n    const [branches, setBranches] = useState<Branch[]>([]);\n    const [error, setError] = useState<string | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [loadingData, setLoadingData] = useState(true);\n\n    // Lade Branches und setze Form-Daten\n    useEffect(() => {\n        const loadData = async () => {\n            try {\n                setLoadingData(true);\n                const branchesRes = await axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE);\n                setBranches(branchesRes.data?.data || branchesRes.data || []);\n            } catch (err: any) {\n                console.error('Fehler beim Laden der Daten:', err);\n                showMessage(t('errors.loadError'), 'error');\n            } finally {\n                setLoadingData(false);\n            }\n        };\n        \n        if (isOpen) {\n            loadData();\n        }\n    }, [isOpen, t, showMessage]);\n\n    // Setze Form-Daten wenn Provider geladen wird\n    useEffect(() => {\n        if (provider) {\n            setName(provider.name || '');\n            setPhone(provider.phone || '');\n            setEmail(provider.email || '');\n            setContactPerson(provider.contactPerson || '');\n            setNotes(provider.notes || '');\n            setBranchId(provider.branchId || '');\n        } else {\n            setName('');\n            setPhone('');\n            setEmail('');\n            setContactPerson('');\n            setNotes('');\n            setBranchId('');\n        }\n        setError(null);\n    }, [provider, isOpen]);\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!provider) return;\n        setError(null);\n\n        // Validierung\n        if (!name.trim()) {\n            setError(t('tours.providers.validation.nameRequired', { defaultValue: 'Name ist erforderlich' }));\n            return;\n        }\n\n        setLoading(true);\n        try {\n            const response = await axiosInstance.put(API_ENDPOINTS.TOUR_PROVIDERS.BY_ID(provider.id), {\n                name: name.trim(),\n                phone: phone.trim() || null,\n                email: email.trim() || null,\n                contactPerson: contactPerson.trim() || null,\n                notes: notes.trim() || null,\n                branchId: branchId ? Number(branchId) : null\n            });\n\n            if (response.data?.success && response.data?.data) {\n                showMessage(\n                    t('tours.providers.updated', { defaultValue: 'Tour-Provider erfolgreich aktualisiert' }),\n                    'success'\n                );\n                onProviderUpdated(response.data.data);\n                onClose();\n            } else {\n                throw new Error(response.data?.message || 'Fehler beim Aktualisieren des Providers');\n            }\n        } catch (err: any) {\n            console.error('Fehler beim Aktualisieren des Providers:', err);\n            const errorMessage = err.response?.data?.message || err.message || t('errors.unknownError');\n            setError(errorMessage);\n            showMessage(errorMessage, 'error');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (!provider) return null;\n\n    return (\n        <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                    <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\n                        <Dialog.Title className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                            {t('tours.providers.edit', { defaultValue: 'Tour-Provider bearbeiten' })}\n                        </Dialog.Title>\n                        <button\n                            onClick={onClose}\n                            className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n                        >\n                            <XMarkIcon className=\"h-6 w-6\" />\n                        </button>\n                    </div>\n\n                    <form onSubmit={handleSubmit} className=\"p-4 space-y-4\">\n                        {error && (\n                            <div className=\"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg p-3\">\n                                <p className=\"text-sm text-red-800 dark:text-red-200\">{error}</p>\n                            </div>\n                        )}\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.name', { defaultValue: 'Name' })} *\n                            </label>\n                            <input\n                                type=\"text\"\n                                value={name}\n                                onChange={(e) => setName(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                required\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.contactPerson', { defaultValue: 'Ansprechpartner' })}\n                            </label>\n                            <input\n                                type=\"text\"\n                                value={contactPerson}\n                                onChange={(e) => setContactPerson(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.phone', { defaultValue: 'Telefon' })}\n                            </label>\n                            <input\n                                type=\"tel\"\n                                value={phone}\n                                onChange={(e) => setPhone(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.email', { defaultValue: 'E-Mail' })}\n                            </label>\n                            <input\n                                type=\"email\"\n                                value={email}\n                                onChange={(e) => setEmail(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.branch', { defaultValue: 'Niederlassung' })}\n                            </label>\n                            <select\n                                value={branchId}\n                                onChange={(e) => setBranchId(e.target.value ? Number(e.target.value) : '')}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            >\n                                <option value=\"\">{t('common.all', { defaultValue: 'Alle' })}</option>\n                                {branches.map(branch => (\n                                    <option key={branch.id} value={branch.id}>\n                                        {branch.name}\n                                    </option>\n                                ))}\n                            </select>\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.notes', { defaultValue: 'Notizen' })}\n                            </label>\n                            <textarea\n                                value={notes}\n                                onChange={(e) => setNotes(e.target.value)}\n                                rows={3}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div className=\"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                            <button\n                                type=\"button\"\n                                onClick={onClose}\n                                className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n                            >\n                                {t('common.cancel', 'Abbrechen')}\n                            </button>\n                            <button\n                                type=\"submit\"\n                                disabled={loading || loadingData}\n                                className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                                {loading ? t('common.saving', 'Speichere...') : t('common.save', 'Speichern')}\n                            </button>\n                        </div>\n                    </form>\n                </Dialog.Panel>\n            </div>\n        </Dialog>\n    );\n};\n\nexport default EditTourProviderModal;\n\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { PencilIcon, TrashIcon, PlusIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport axiosInstance from '../../config/axios.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport { TourProvider } from '../../types/tour.ts';\nimport CreateTourProviderModal from './CreateTourProviderModal.tsx';\nimport EditTourProviderModal from './EditTourProviderModal.tsx';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface TourProvidersTabProps {\n    onError: (error: string) => void;\n}\n\n// ProviderCard-Komponente fr mobile und Desktop-Ansicht\nconst ProviderCard: React.FC<{\n    provider: TourProvider;\n    onEdit: (provider: TourProvider) => void;\n    onDelete: (providerId: number) => void;\n    canEdit: boolean;\n    canDelete: boolean;\n}> = ({ provider, onEdit, onDelete, canEdit, canDelete }) => {\n    const { t } = useTranslation();\n    return (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4\">\n            {/* Header mit Provider-Name und Aktionen */}\n            <div className=\"flex justify-between items-start mb-2\">\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">{provider.name}</h3>\n                \n                <div className=\"flex space-x-2\">\n                    {canEdit && (\n                        <div className=\"relative group\">\n                            <button\n                                onClick={() => onEdit(provider)}\n                                className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n                            >\n                                <PencilIcon className=\"h-5 w-5\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('common.edit', { defaultValue: 'Bearbeiten' })}\n                            </div>\n                        </div>\n                    )}\n                    \n                    {canDelete && (\n                        <div className=\"relative group\">\n                            <button\n                                onClick={() => onDelete(provider.id)}\n                                className=\"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 p-1\"\n                            >\n                                <TrashIcon className=\"h-5 w-5\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('common.delete', { defaultValue: 'Lschen' })}\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            {/* Details */}\n            <div className=\"space-y-1 text-sm text-gray-600 dark:text-gray-400\">\n                {provider.contactPerson && (\n                    <p>\n                        <span className=\"font-medium\">{t('tours.providers.contactPerson', { defaultValue: 'Ansprechpartner' })}:</span>{' '}\n                        {provider.contactPerson}\n                    </p>\n                )}\n                {provider.phone && (\n                    <p>\n                        <span className=\"font-medium\">{t('tours.providers.phone', { defaultValue: 'Telefon' })}:</span>{' '}\n                        {provider.phone}\n                    </p>\n                )}\n                {provider.email && (\n                    <p>\n                        <span className=\"font-medium\">{t('tours.providers.email', { defaultValue: 'E-Mail' })}:</span>{' '}\n                        {provider.email}\n                    </p>\n                )}\n                {provider.notes && (\n                    <p className=\"mt-2 text-xs\">\n                        <span className=\"font-medium\">{t('tours.providers.notes', { defaultValue: 'Notizen' })}:</span>{' '}\n                        {provider.notes}\n                    </p>\n                )}\n            </div>\n        </div>\n    );\n};\n\nconst TourProvidersTab: React.FC<TourProvidersTabProps> = ({ onError }) => {\n    const { t } = useTranslation();\n    const { showMessage } = useMessage();\n    const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n    const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n    const [editingProvider, setEditingProvider] = useState<TourProvider | null>(null);\n    const [providers, setProviders] = useState<TourProvider[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [searchTerm, setSearchTerm] = useState('');\n    const { hasPermission } = usePermissions();\n\n    // Berechtigungen prfen\n    const canCreate = hasPermission('tour_providers', 'write', 'table');\n    const canEdit = hasPermission('tour_providers', 'write', 'table');\n    const canDelete = hasPermission('tour_providers', 'write', 'table');\n\n    // Providers laden\n    const fetchProviders = useCallback(async () => {\n        setLoading(true);\n        try {\n            const response = await axiosInstance.get(API_ENDPOINTS.TOUR_PROVIDERS.BASE);\n            const data = response.data?.data || response.data || [];\n            setProviders(Array.isArray(data) ? data : []);\n        } catch (error: any) {\n            console.error('Fehler beim Laden der Tour-Provider:', error);\n            const errorMessage = error.response?.data?.message || t('tours.providers.loadError', { defaultValue: 'Fehler beim Laden der Provider' });\n            onError(errorMessage);\n            showMessage(errorMessage, 'error');\n        } finally {\n            setLoading(false);\n        }\n    }, [onError, t, showMessage]);\n\n    useEffect(() => {\n        fetchProviders();\n    }, [fetchProviders]);\n\n    // Gefilterte Provider\n    const filteredProviders = providers.filter(provider => {\n        if (!searchTerm) return true;\n        const search = searchTerm.toLowerCase();\n        return (\n            provider.name.toLowerCase().includes(search) ||\n            provider.contactPerson?.toLowerCase().includes(search) ||\n            provider.phone?.toLowerCase().includes(search) ||\n            provider.email?.toLowerCase().includes(search) ||\n            provider.notes?.toLowerCase().includes(search)\n        );\n    });\n\n    // Handler fr Create\n    const handleCreate = () => {\n        setIsCreateModalOpen(true);\n    };\n\n    // Handler fr Edit\n    const handleEdit = (provider: TourProvider) => {\n        setEditingProvider(provider);\n        setIsEditModalOpen(true);\n    };\n\n    // Handler fr Delete\n    const handleDelete = async (providerId: number) => {\n        if (!window.confirm(t('tours.providers.deleteConfirm', { defaultValue: 'Mchten Sie diesen Provider wirklich lschen?' }))) {\n            return;\n        }\n\n        try {\n            await axiosInstance.delete(API_ENDPOINTS.TOUR_PROVIDERS.BY_ID(providerId));\n            showMessage(\n                t('tours.providers.deleted', { defaultValue: 'Tour-Provider erfolgreich gelscht' }),\n                'success'\n            );\n            fetchProviders();\n        } catch (error: any) {\n            console.error('Fehler beim Lschen des Providers:', error);\n            const errorMessage = error.response?.data?.message || t('errors.unknownError');\n            onError(errorMessage);\n            showMessage(errorMessage, 'error');\n        }\n    };\n\n    // Handler fr Provider erstellt\n    const handleProviderCreated = (newProvider: TourProvider) => {\n        fetchProviders();\n    };\n\n    // Handler fr Provider aktualisiert\n    const handleProviderUpdated = (updatedProvider: TourProvider) => {\n        fetchProviders();\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex justify-center items-center py-12\">\n                <div className=\"text-gray-500 dark:text-gray-400\">{t('common.loading', { defaultValue: 'Lade...' })}</div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"space-y-4\">\n            {/* Header mit Suche und Create-Button */}\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n                <div className=\"flex-1 w-full sm:max-w-md\">\n                    <input\n                        type=\"text\"\n                        placeholder={t('tours.providers.search', { defaultValue: 'Provider suchen...' })}\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                        className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                </div>\n                {canCreate && (\n                    <div className=\"relative group\">\n                        <button \n                            onClick={handleCreate}\n                            className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                            style={{ width: '30.19px', height: '30.19px' }}\n                            aria-label={t('tours.providers.create', { defaultValue: 'Neuer Provider' })}\n                        >\n                            <PlusIcon className=\"h-4 w-4\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                            {t('tours.providers.create', { defaultValue: 'Neuer Provider' })}\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            {/* Provider-Liste */}\n            {filteredProviders.length === 0 ? (\n                <div className=\"text-center py-12 text-gray-500 dark:text-gray-400\">\n                    {searchTerm\n                        ? t('tours.providers.noResults', { defaultValue: 'Keine Provider gefunden' })\n                        : t('tours.providers.empty', { defaultValue: 'Keine Tour-Provider vorhanden' })}\n                </div>\n            ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {filteredProviders.map(provider => (\n                        <ProviderCard\n                            key={provider.id}\n                            provider={provider}\n                            onEdit={handleEdit}\n                            onDelete={handleDelete}\n                            canEdit={canEdit}\n                            canDelete={canDelete}\n                        />\n                    ))}\n                </div>\n            )}\n\n            {/* Modals */}\n            <CreateTourProviderModal\n                isOpen={isCreateModalOpen}\n                onClose={() => setIsCreateModalOpen(false)}\n                onProviderCreated={handleProviderCreated}\n            />\n            <EditTourProviderModal\n                isOpen={isEditModalOpen}\n                onClose={() => {\n                    setIsEditModalOpen(false);\n                    setEditingProvider(null);\n                }}\n                provider={editingProvider}\n                onProviderUpdated={handleProviderUpdated}\n            />\n        </div>\n    );\n};\n\nexport default TourProvidersTab;\n\n","export enum TourType {\r\n  OWN = 'own',\r\n  EXTERNAL = 'external'\r\n}\r\n\r\nexport enum TourBookingStatus {\r\n  CONFIRMED = 'confirmed',\r\n  CANCELLED = 'cancelled',\r\n  COMPLETED = 'completed',\r\n  NO_SHOW = 'no_show'\r\n}\r\n\r\nexport enum MessageDirection {\r\n  OUTGOING = 'outgoing',\r\n  INCOMING = 'incoming'\r\n}\r\n\r\nexport enum MessageStatus {\r\n  SENT = 'sent',\r\n  DELIVERED = 'delivered',\r\n  READ = 'read',\r\n  FAILED = 'failed'\r\n}\r\n\r\nexport interface Tour {\r\n  id: number;\r\n  title: string;\r\n  description?: string | null;\r\n  type: TourType;\r\n  isActive: boolean;\r\n  duration?: number | null;\r\n  maxParticipants?: number | null;\r\n  minParticipants?: number | null;\r\n  price?: number | string | null;\r\n  currency?: string | null;\r\n  location?: string | null;\r\n  meetingPoint?: string | null;\r\n  includes?: string | null;\r\n  excludes?: string | null;\r\n  requirements?: string | null;\r\n  totalCommission?: number | string | null;\r\n  totalCommissionPercent?: number | string | null;\r\n  sellerCommissionPercent?: number | string | null;\r\n  sellerCommissionFixed?: number | string | null;\r\n  externalProviderId?: number | null;\r\n  externalProvider?: TourProvider | null;\r\n  externalBookingUrl?: string | null;\r\n  imageUrl?: string | null;\r\n  galleryUrls?: string[] | null;\r\n  availableFrom?: string | null;\r\n  availableTo?: string | null;\r\n  recurringSchedule?: any | null;\r\n  organizationId: number;\r\n  branchId?: number | null;\r\n  branch?: { id: number; name: string } | null;\r\n  createdById?: number | null;\r\n  createdBy?: { id: number; firstName: string; lastName: string } | null;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface TourProvider {\r\n  id: number;\r\n  name: string;\r\n  phone?: string | null;\r\n  email?: string | null;\r\n  contactPerson?: string | null;\r\n  notes?: string | null;\r\n  organizationId: number;\r\n  branchId?: number | null;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface TourBooking {\r\n  id: number;\r\n  tourId: number;\r\n  tour?: Tour | null;\r\n  bookingDate: string;\r\n  tourDate: string;\r\n  numberOfParticipants: number;\r\n  totalPrice: number | string;\r\n  currency: string;\r\n  customerName: string;\r\n  customerEmail?: string | null;\r\n  customerPhone?: string | null;\r\n  customerNotes?: string | null;\r\n  paymentStatus: 'pending' | 'paid' | 'partially_paid' | 'refunded';\r\n  amountPaid?: number | string | null;\r\n  amountPending?: number | string | null;\r\n  paymentLink?: string | null;\r\n  paymentDeadline?: string | null;\r\n  autoCancelEnabled?: boolean;\r\n  reservedUntil?: string | null;\r\n  bookedById?: number | null;\r\n  bookedBy?: { id: number; firstName: string; lastName: string } | null;\r\n  commissionAmount?: number | string | null;\r\n  commissionCalculatedAt?: string | null;\r\n  status: TourBookingStatus;\r\n  cancelledBy?: string | null;\r\n  cancelledAt?: string | null;\r\n  cancelledReason?: string | null;\r\n  isExternal: boolean;\r\n  externalBookingId?: string | null;\r\n  externalStatus?: string | null;\r\n  externalMessage?: string | null;\r\n  alternativeTours?: number[] | null;\r\n  organizationId: number;\r\n  branchId?: number | null;\r\n  branch?: { id: number; name: string } | null;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface TourReservation {\r\n  id: number;\r\n  tourId: number;\r\n  tour?: Tour | null;\r\n  bookingId: number;\r\n  booking?: TourBooking | null;\r\n  reservationId: number;\r\n  reservation?: any | null;\r\n  tourPrice: number | string;\r\n  accommodationPrice: number | string;\r\n  currency: string;\r\n  tourPricePaid?: number | string | null;\r\n  tourPricePending?: number | string | null;\r\n  accommodationPaid?: number | string | null;\r\n  accommodationPending?: number | string | null;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface TourWhatsAppMessage {\r\n  id: number;\r\n  bookingId: number;\r\n  booking?: TourBooking | null;\r\n  direction: MessageDirection;\r\n  message: string;\r\n  phoneNumber: string;\r\n  sentAt: string;\r\n  status: MessageStatus;\r\n  errorMessage?: string | null;\r\n  processed: boolean;\r\n  processedAt?: string | null;\r\n  action?: string | null;\r\n  extractedData?: any | null;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\n\r\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../../config/axios.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport { useAuth } from '../../hooks/useAuth.tsx';\nimport { Tour, TourType, TourProvider } from '../../types/tour.ts';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface Branch {\n    id: number;\n    name: string;\n}\n\ninterface CreateTourModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onTourCreated: (newTour: Tour) => void;\n}\n\nconst CreateTourModal = ({ isOpen, onClose, onTourCreated }: CreateTourModalProps) => {\n    const { t } = useTranslation();\n    const { user } = useAuth();\n    const { showMessage } = useMessage();\n    \n    const [title, setTitle] = useState('');\n    const [description, setDescription] = useState('');\n    const [type, setType] = useState<TourType>(TourType.OWN);\n    const [isActive, setIsActive] = useState(true);\n    const [duration, setDuration] = useState<number | ''>('');\n    const [maxParticipants, setMaxParticipants] = useState<number | ''>('');\n    const [minParticipants, setMinParticipants] = useState<number | ''>('');\n    const [price, setPrice] = useState<number | ''>('');\n    const [currency, setCurrency] = useState('COP');\n    const [location, setLocation] = useState('');\n    const [meetingPoint, setMeetingPoint] = useState('');\n    const [includes, setIncludes] = useState('');\n    const [excludes, setExcludes] = useState('');\n    const [requirements, setRequirements] = useState('');\n    const [totalCommission, setTotalCommission] = useState<number | ''>('');\n    const [totalCommissionPercent, setTotalCommissionPercent] = useState<number | ''>('');\n    const [sellerCommissionPercent, setSellerCommissionPercent] = useState<number | ''>('');\n    const [sellerCommissionFixed, setSellerCommissionFixed] = useState<number | ''>('');\n    const [externalProviderId, setExternalProviderId] = useState<number | ''>('');\n    const [externalBookingUrl, setExternalBookingUrl] = useState('');\n    const [branchId, setBranchId] = useState<number | ''>('');\n    const [imageFile, setImageFile] = useState<File | null>(null);\n    const [imagePreview, setImagePreview] = useState<string | null>(null);\n    const [galleryFiles, setGalleryFiles] = useState<File[]>([]);\n    const [galleryPreviews, setGalleryPreviews] = useState<string[]>([]);\n    const [uploadingImage, setUploadingImage] = useState(false);\n    \n    const [branches, setBranches] = useState<Branch[]>([]);\n    const [tourProviders, setTourProviders] = useState<TourProvider[]>([]);\n    const [error, setError] = useState<string | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [loadingData, setLoadingData] = useState(true);\n\n    // Lade Branches und TourProviders\n    useEffect(() => {\n        const loadData = async () => {\n            try {\n                setLoadingData(true);\n                const [branchesRes, providersRes] = await Promise.all([\n                    axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE),\n                    axiosInstance.get(API_ENDPOINTS.TOUR_PROVIDERS?.BASE || '/api/tour-providers')\n                ]);\n                \n                setBranches(branchesRes.data?.data || branchesRes.data || []);\n                setTourProviders(providersRes.data?.data || providersRes.data || []);\n            } catch (err: any) {\n                console.error('Fehler beim Laden der Daten:', err);\n                showMessage(t('errors.loadError'), 'error');\n            } finally {\n                setLoadingData(false);\n            }\n        };\n        \n        if (isOpen) {\n            loadData();\n        }\n    }, [isOpen, t, showMessage]);\n\n    // Reset form when modal opens/closes\n    useEffect(() => {\n        if (!isOpen) {\n            setTitle('');\n            setDescription('');\n            setType(TourType.OWN);\n            setIsActive(true);\n            setDuration('');\n            setMaxParticipants('');\n            setMinParticipants('');\n            setPrice('');\n            setCurrency('COP');\n            setLocation('');\n            setMeetingPoint('');\n            setIncludes('');\n            setExcludes('');\n            setRequirements('');\n            setTotalCommission('');\n            setTotalCommissionPercent('');\n            setSellerCommissionPercent('');\n            setSellerCommissionFixed('');\n            setExternalProviderId('');\n            setExternalBookingUrl('');\n            setBranchId('');\n            setImageFile(null);\n            setImagePreview(null);\n            setGalleryFiles([]);\n            setGalleryPreviews([]);\n            setError(null);\n        }\n    }, [isOpen]);\n    \n    // Bild-Vorschau erstellen\n    const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        if (file) {\n            setImageFile(file);\n            const reader = new FileReader();\n            reader.onloadend = () => {\n                setImagePreview(reader.result as string);\n            };\n            reader.readAsDataURL(file);\n        }\n    };\n    \n    const handleGalleryChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const files = Array.from(e.target.files || []);\n        if (files.length > 0) {\n            setGalleryFiles(prev => [...prev, ...files]);\n            files.forEach(file => {\n                const reader = new FileReader();\n                reader.onloadend = () => {\n                    setGalleryPreviews(prev => [...prev, reader.result as string]);\n                };\n                reader.readAsDataURL(file);\n            });\n        }\n    };\n    \n    const removeGalleryImage = (index: number) => {\n        setGalleryFiles(prev => prev.filter((_, i) => i !== index));\n        setGalleryPreviews(prev => prev.filter((_, i) => i !== index));\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError(null);\n\n        // Validierungen\n        if (!title.trim() || title.trim().length < 3) {\n            setError(t('tours.validation.titleMinLength', { defaultValue: 'Titel muss mindestens 3 Zeichen lang sein' }));\n            return;\n        }\n\n        const maxPart = maxParticipants ? Number(maxParticipants) : null;\n        const minPart = minParticipants ? Number(minParticipants) : null;\n        if (maxPart !== null && minPart !== null && maxPart < minPart) {\n            setError(t('tours.validation.maxParticipantsMin', { defaultValue: 'Maximale Teilnehmeranzahl muss >= minimale Teilnehmeranzahl sein' }));\n            return;\n        }\n\n        if (type === TourType.EXTERNAL && !externalProviderId) {\n            setError(t('tours.validation.externalProviderRequired', { defaultValue: 'Externer Anbieter ist bei externen Touren erforderlich' }));\n            return;\n        }\n\n        // availableFrom <= availableTo Validierung (falls beide gesetzt) - wird im Backend validiert\n\n        // Preise >= 0\n        if (price !== '' && Number(price) < 0) {\n            setError(t('tours.validation.priceNonNegative', { defaultValue: 'Preis muss >= 0 sein' }));\n            return;\n        }\n\n        if (totalCommission !== '' && Number(totalCommission) < 0) {\n            setError(t('tours.validation.commissionNonNegative', { defaultValue: 'Kommission muss >= 0 sein' }));\n            return;\n        }\n\n        setLoading(true);\n\n        try {\n            const tourData: any = {\n                title,\n                description: description || null,\n                type,\n                isActive,\n                duration: duration ? Number(duration) : null,\n                maxParticipants: maxParticipants ? Number(maxParticipants) : null,\n                minParticipants: minParticipants ? Number(minParticipants) : null,\n                price: price ? Number(price) : null,\n                currency: currency || 'COP',\n                location: location || null,\n                meetingPoint: meetingPoint || null,\n                includes: includes || null,\n                excludes: excludes || null,\n                requirements: requirements || null,\n                totalCommission: totalCommission ? Number(totalCommission) : null,\n                totalCommissionPercent: totalCommissionPercent ? Number(totalCommissionPercent) : null,\n                sellerCommissionPercent: sellerCommissionPercent ? Number(sellerCommissionPercent) : null,\n                sellerCommissionFixed: sellerCommissionFixed ? Number(sellerCommissionFixed) : null,\n                externalProviderId: externalProviderId ? Number(externalProviderId) : null,\n                externalBookingUrl: externalBookingUrl || null,\n                branchId: branchId ? Number(branchId) : null\n            };\n\n            const response = await axiosInstance.post(API_ENDPOINTS.TOURS.BASE, tourData);\n            \n            if (response.data.success) {\n                const createdTour = response.data.data;\n                \n                // Hauptbild hochladen (falls vorhanden)\n                if (imageFile && createdTour.id) {\n                    try {\n                        setUploadingImage(true);\n                        const formData = new FormData();\n                        formData.append('image', imageFile);\n                        await axiosInstance.post(API_ENDPOINTS.TOURS.UPLOAD_IMAGE(createdTour.id), formData, {\n                            headers: { 'Content-Type': 'multipart/form-data' }\n                        });\n                    } catch (imgErr: any) {\n                        console.error('Fehler beim Hochladen des Hauptbildes:', imgErr);\n                        showMessage(t('tours.imageUploadError', 'Tour erstellt, aber Fehler beim Hochladen des Bildes'), 'warning');\n                    } finally {\n                        setUploadingImage(false);\n                    }\n                }\n                \n                // Galerie-Bilder hochladen (falls vorhanden)\n                if (galleryFiles.length > 0 && createdTour.id) {\n                    try {\n                        setUploadingImage(true);\n                        for (const file of galleryFiles) {\n                            const formData = new FormData();\n                            formData.append('image', file);\n                            await axiosInstance.post(API_ENDPOINTS.TOURS.UPLOAD_GALLERY(createdTour.id), formData, {\n                                headers: { 'Content-Type': 'multipart/form-data' }\n                            });\n                        }\n                    } catch (galleryErr: any) {\n                        console.error('Fehler beim Hochladen der Galerie-Bilder:', galleryErr);\n                        showMessage(t('tours.galleryUploadError', 'Tour erstellt, aber Fehler beim Hochladen der Galerie-Bilder'), 'warning');\n                    } finally {\n                        setUploadingImage(false);\n                    }\n                }\n                \n                showMessage(t('tours.createSuccess', 'Tour erfolgreich erstellt'), 'success');\n                // Lade Tour neu, um Bilder zu erhalten\n                const updatedResponse = await axiosInstance.get(API_ENDPOINTS.TOURS.BY_ID(createdTour.id));\n                onTourCreated(updatedResponse.data.data);\n                onClose();\n            } else {\n                setError(response.data.message || t('errors.saveError'));\n            }\n        } catch (err: any) {\n            console.error('Fehler beim Erstellen der Tour:', err);\n            const errorMessage = err.response?.data?.message || t('errors.saveError');\n            setError(errorMessage);\n            showMessage(errorMessage, 'error');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[90vh] overflow-y-auto\">\n                    <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\n                        <Dialog.Title className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n                            {t('tours.create', 'Neue Tour erstellen')}\n                        </Dialog.Title>\n                        <button\n                            onClick={onClose}\n                            className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n                        >\n                            <XMarkIcon className=\"h-6 w-6\" />\n                        </button>\n                    </div>\n\n                    <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n                        {error && (\n                            <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-200 px-4 py-3 rounded\">\n                                {error}\n                            </div>\n                        )}\n\n                        {/* Grundinformationen */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.basicInfo', 'Grundinformationen')}\n                            </h3>\n                            \n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.name', 'Titel')} *\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    value={title}\n                                    onChange={(e) => setTitle(e.target.value)}\n                                    required\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.description', 'Beschreibung')}\n                                </label>\n                                <textarea\n                                    value={description}\n                                    onChange={(e) => setDescription(e.target.value)}\n                                    rows={4}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.type', 'Typ')} *\n                                    </label>\n                                    <select\n                                        value={type}\n                                        onChange={(e) => setType(e.target.value as TourType)}\n                                        required\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    >\n                                        <option value={TourType.OWN}>{t('tours.typeOwn', 'Eigene Tour')}</option>\n                                        <option value={TourType.EXTERNAL}>{t('tours.typeExternal', 'Externe Tour')}</option>\n                                    </select>\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.status', 'Status')}\n                                    </label>\n                                    <select\n                                        value={isActive ? 'true' : 'false'}\n                                        onChange={(e) => setIsActive(e.target.value === 'true')}\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    >\n                                        <option value=\"true\">{t('tours.statusActive', 'Aktiv')}</option>\n                                        <option value=\"false\">{t('tours.statusInactive', 'Inaktiv')}</option>\n                                    </select>\n                                </div>\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.branch', 'Niederlassung')}\n                                </label>\n                                <select\n                                    value={branchId}\n                                    onChange={(e) => setBranchId(e.target.value ? Number(e.target.value) : '')}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                >\n                                    <option value=\"\">{t('common.all', 'Alle')}</option>\n                                    {branches.map(branch => (\n                                        <option key={branch.id} value={branch.id}>{branch.name}</option>\n                                    ))}\n                                </select>\n                            </div>\n                        </div>\n\n                        {/* Tour-Details */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.details', 'Tour-Details')}\n                            </h3>\n                            \n                            <div className=\"grid grid-cols-3 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.duration', 'Dauer (Stunden)')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={duration}\n                                        onChange={(e) => setDuration(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.minParticipants', 'Min. Teilnehmer')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={minParticipants}\n                                        onChange={(e) => setMinParticipants(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.maxParticipants', 'Max. Teilnehmer')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={maxParticipants}\n                                        onChange={(e) => setMaxParticipants(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n\n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.price', 'Preis')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={price}\n                                        onChange={(e) => setPrice(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.currency', 'Whrung')}\n                                    </label>\n                                    <input\n                                        type=\"text\"\n                                        value={currency}\n                                        onChange={(e) => setCurrency(e.target.value)}\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.location', 'Ort')}\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    value={location}\n                                    onChange={(e) => setLocation(e.target.value)}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.meetingPoint', 'Treffpunkt')}\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    value={meetingPoint}\n                                    onChange={(e) => setMeetingPoint(e.target.value)}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n                        </div>\n\n                        {/* Externe Tour-Informationen */}\n                        {type === TourType.EXTERNAL && (\n                            <div className=\"space-y-4\">\n                                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                    {t('tours.externalInfo', 'Externe Tour-Informationen')}\n                                </h3>\n                                \n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.externalProvider', 'Externer Anbieter')}\n                                    </label>\n                                    <select\n                                        value={externalProviderId}\n                                        onChange={(e) => setExternalProviderId(e.target.value ? Number(e.target.value) : '')}\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    >\n                                        <option value=\"\">{t('common.select', 'Auswhlen')}</option>\n                                        {tourProviders.map(provider => (\n                                            <option key={provider.id} value={provider.id}>{provider.name}</option>\n                                        ))}\n                                    </select>\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.externalBookingUrl', 'Externe Buchungs-URL')}\n                                    </label>\n                                    <input\n                                        type=\"url\"\n                                        value={externalBookingUrl}\n                                        onChange={(e) => setExternalBookingUrl(e.target.value)}\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Kommissionen */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.commissions', 'Kommissionen')}\n                            </h3>\n                            \n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.totalCommission', 'Gesamtkommission')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={totalCommission}\n                                        onChange={(e) => setTotalCommission(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.totalCommissionPercent', 'Gesamtkommission (%)')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={totalCommissionPercent}\n                                        onChange={(e) => setTotalCommissionPercent(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        max=\"100\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.sellerCommissionPercent', 'Verkufer-Kommission (%)')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={sellerCommissionPercent}\n                                        onChange={(e) => setSellerCommissionPercent(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        max=\"100\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.sellerCommissionFixed', 'Verkufer-Kommission (Fix)')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={sellerCommissionFixed}\n                                        onChange={(e) => setSellerCommissionFixed(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Zustzliche Informationen */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.additionalInfo', 'Zustzliche Informationen')}\n                            </h3>\n                            \n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.includes', 'Enthlt')}\n                                </label>\n                                <textarea\n                                    value={includes}\n                                    onChange={(e) => setIncludes(e.target.value)}\n                                    rows={3}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.excludes', 'Nicht enthalten')}\n                                </label>\n                                <textarea\n                                    value={excludes}\n                                    onChange={(e) => setExcludes(e.target.value)}\n                                    rows={3}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.requirements', 'Anforderungen')}\n                                </label>\n                                <textarea\n                                    value={requirements}\n                                    onChange={(e) => setRequirements(e.target.value)}\n                                    rows={3}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n                        </div>\n\n                        <div className=\"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                            <button\n                                type=\"button\"\n                                onClick={onClose}\n                                className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n                            >\n                                {t('common.cancel', 'Abbrechen')}\n                            </button>\n                            <button\n                                type=\"submit\"\n                                disabled={loading || loadingData}\n                                className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                                {loading ? t('common.saving', 'Speichere...') : t('common.save', 'Speichern')}\n                            </button>\n                        </div>\n                    </form>\n                </Dialog.Panel>\n            </div>\n        </Dialog>\n    );\n};\n\nexport default CreateTourModal;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../../config/axios.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport { useAuth } from '../../hooks/useAuth.tsx';\nimport { Tour, TourType, TourProvider } from '../../types/tour.ts';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface Branch {\n    id: number;\n    name: string;\n}\n\ninterface EditTourModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onTourUpdated: (updatedTour: Tour) => void;\n    tour: Tour | null;\n}\n\nconst EditTourModal = ({ isOpen, onClose, onTourUpdated, tour }: EditTourModalProps) => {\n    const { t } = useTranslation();\n    const { user } = useAuth();\n    const { showMessage } = useMessage();\n    \n    const [title, setTitle] = useState(tour?.title || '');\n    const [description, setDescription] = useState(tour?.description || '');\n    const [type, setType] = useState<TourType>(tour?.type || TourType.OWN);\n    const [isActive, setIsActive] = useState(tour?.isActive ?? true);\n    const [duration, setDuration] = useState<number | ''>(tour?.duration || '');\n    const [maxParticipants, setMaxParticipants] = useState<number | ''>(tour?.maxParticipants || '');\n    const [minParticipants, setMinParticipants] = useState<number | ''>(tour?.minParticipants || '');\n    const [price, setPrice] = useState<number | ''>(tour?.price ? (typeof tour.price === 'string' ? parseFloat(tour.price) : tour.price) : '');\n    const [currency, setCurrency] = useState(tour?.currency || 'COP');\n    const [location, setLocation] = useState(tour?.location || '');\n    const [meetingPoint, setMeetingPoint] = useState(tour?.meetingPoint || '');\n    const [includes, setIncludes] = useState(tour?.includes || '');\n    const [excludes, setExcludes] = useState(tour?.excludes || '');\n    const [requirements, setRequirements] = useState(tour?.requirements || '');\n    const [totalCommission, setTotalCommission] = useState<number | ''>(tour?.totalCommission ? (typeof tour.totalCommission === 'string' ? parseFloat(tour.totalCommission) : tour.totalCommission) : '');\n    const [totalCommissionPercent, setTotalCommissionPercent] = useState<number | ''>(tour?.totalCommissionPercent ? (typeof tour.totalCommissionPercent === 'string' ? parseFloat(tour.totalCommissionPercent) : tour.totalCommissionPercent) : '');\n    const [sellerCommissionPercent, setSellerCommissionPercent] = useState<number | ''>(tour?.sellerCommissionPercent ? (typeof tour.sellerCommissionPercent === 'string' ? parseFloat(tour.sellerCommissionPercent) : tour.sellerCommissionPercent) : '');\n    const [sellerCommissionFixed, setSellerCommissionFixed] = useState<number | ''>(tour?.sellerCommissionFixed ? (typeof tour.sellerCommissionFixed === 'string' ? parseFloat(tour.sellerCommissionFixed) : tour.sellerCommissionFixed) : '');\n    const [externalProviderId, setExternalProviderId] = useState<number | ''>(tour?.externalProviderId || '');\n    const [externalBookingUrl, setExternalBookingUrl] = useState(tour?.externalBookingUrl || '');\n    const [branchId, setBranchId] = useState<number | ''>(tour?.branchId || '');\n    const [imageFile, setImageFile] = useState<File | null>(null);\n    const [imagePreview, setImagePreview] = useState<string | null>(tour?.imageUrl ? `${API_BASE_URL || ''}${tour.imageUrl}` : null);\n    const [galleryFiles, setGalleryFiles] = useState<File[]>([]);\n    const [galleryPreviews, setGalleryPreviews] = useState<string[]>(tour?.galleryUrls?.map(url => `${API_BASE_URL || ''}${url}`) || []);\n    const [uploadingImage, setUploadingImage] = useState(false);\n    \n    const [branches, setBranches] = useState<Branch[]>([]);\n    const [tourProviders, setTourProviders] = useState<TourProvider[]>([]);\n    const [error, setError] = useState<string | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [loadingData, setLoadingData] = useState(true);\n\n    // Lade Branches und TourProviders\n    useEffect(() => {\n        const loadData = async () => {\n            try {\n                setLoadingData(true);\n                const [branchesRes, providersRes] = await Promise.all([\n                    axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE),\n                    axiosInstance.get(API_ENDPOINTS.TOUR_PROVIDERS?.BASE || '/api/tour-providers')\n                ]);\n                \n                setBranches(branchesRes.data?.data || branchesRes.data || []);\n                setTourProviders(providersRes.data?.data || providersRes.data || []);\n            } catch (err: any) {\n                console.error('Fehler beim Laden der Daten:', err);\n                showMessage(t('errors.loadError'), 'error');\n            } finally {\n                setLoadingData(false);\n            }\n        };\n        \n        if (isOpen) {\n            loadData();\n        }\n    }, [isOpen, t, showMessage]);\n\n    // Update form when tour changes\n    useEffect(() => {\n        if (tour) {\n            setTitle(tour.title || '');\n            setDescription(tour.description || '');\n            setType(tour.type || TourType.OWN);\n            setIsActive(tour.isActive ?? true);\n            setDuration(tour.duration || '');\n            setMaxParticipants(tour.maxParticipants || '');\n            setMinParticipants(tour.minParticipants || '');\n            setPrice(tour.price ? (typeof tour.price === 'string' ? parseFloat(tour.price) : tour.price) : '');\n            setCurrency(tour.currency || 'COP');\n            setLocation(tour.location || '');\n            setMeetingPoint(tour.meetingPoint || '');\n            setIncludes(tour.includes || '');\n            setExcludes(tour.excludes || '');\n            setRequirements(tour.requirements || '');\n            setTotalCommission(tour.totalCommission ? (typeof tour.totalCommission === 'string' ? parseFloat(tour.totalCommission) : tour.totalCommission) : '');\n            setTotalCommissionPercent(tour.totalCommissionPercent ? (typeof tour.totalCommissionPercent === 'string' ? parseFloat(tour.totalCommissionPercent) : tour.totalCommissionPercent) : '');\n            setSellerCommissionPercent(tour.sellerCommissionPercent ? (typeof tour.sellerCommissionPercent === 'string' ? parseFloat(tour.sellerCommissionPercent) : tour.sellerCommissionPercent) : '');\n            setSellerCommissionFixed(tour.sellerCommissionFixed ? (typeof tour.sellerCommissionFixed === 'string' ? parseFloat(tour.sellerCommissionFixed) : tour.sellerCommissionFixed) : '');\n            setExternalProviderId(tour.externalProviderId || '');\n            setExternalBookingUrl(tour.externalBookingUrl || '');\n            setBranchId(tour.branchId || '');\n            setImagePreview(tour.imageUrl ? `${API_BASE_URL || ''}${tour.imageUrl}` : null);\n            setGalleryPreviews(tour.galleryUrls?.map(url => `${API_BASE_URL || ''}${url}`) || []);\n        }\n    }, [tour]);\n    \n    // Bild-Vorschau erstellen\n    const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        if (file) {\n            setImageFile(file);\n            const reader = new FileReader();\n            reader.onloadend = () => {\n                setImagePreview(reader.result as string);\n            };\n            reader.readAsDataURL(file);\n        }\n    };\n    \n    const handleGalleryChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const files = Array.from(e.target.files || []);\n        if (files.length > 0) {\n            setGalleryFiles(prev => [...prev, ...files]);\n            files.forEach(file => {\n                const reader = new FileReader();\n                reader.onloadend = () => {\n                    setGalleryPreviews(prev => [...prev, reader.result as string]);\n                };\n                reader.readAsDataURL(file);\n            });\n        }\n    };\n    \n    const removeGalleryImage = async (index: number) => {\n        // Wenn es ein existierendes Bild ist (aus tour.galleryUrls), lsche es vom Server\n        const currentGallery = tour.galleryUrls || [];\n        if (index < currentGallery.length) {\n            try {\n                await axiosInstance.delete(API_ENDPOINTS.TOURS.DELETE_GALLERY_IMAGE(tour.id, index));\n                // Lade Tour neu\n                const response = await axiosInstance.get(API_ENDPOINTS.TOURS.BY_ID(tour.id));\n                if (response.data.success) {\n                    onTourUpdated(response.data.data);\n                }\n            } catch (err: any) {\n                console.error('Fehler beim Lschen des Galerie-Bildes:', err);\n                showMessage(err.response?.data?.message || t('errors.deleteError'), 'error');\n            }\n        } else {\n            // Wenn es ein neues Bild ist (noch nicht hochgeladen), entferne es nur aus dem State\n            const newIndex = index - currentGallery.length;\n            setGalleryFiles(prev => prev.filter((_, i) => i !== newIndex));\n            setGalleryPreviews(prev => prev.filter((_, i) => i !== index));\n        }\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError(null);\n\n        // Validierungen\n        if (!title.trim() || title.trim().length < 3) {\n            setError(t('tours.validation.titleMinLength', { defaultValue: 'Titel muss mindestens 3 Zeichen lang sein' }));\n            return;\n        }\n\n        const maxPart = maxParticipants ? Number(maxParticipants) : null;\n        const minPart = minParticipants ? Number(minParticipants) : null;\n        if (maxPart !== null && minPart !== null && maxPart < minPart) {\n            setError(t('tours.validation.maxParticipantsMin', { defaultValue: 'Maximale Teilnehmeranzahl muss >= minimale Teilnehmeranzahl sein' }));\n            return;\n        }\n\n        if (type === TourType.EXTERNAL && !externalProviderId) {\n            setError(t('tours.validation.externalProviderRequired', { defaultValue: 'Externer Anbieter ist bei externen Touren erforderlich' }));\n            return;\n        }\n\n        // Preise >= 0\n        if (price !== '' && Number(price) < 0) {\n            setError(t('tours.validation.priceNonNegative', { defaultValue: 'Preis muss >= 0 sein' }));\n            return;\n        }\n\n        if (totalCommission !== '' && Number(totalCommission) < 0) {\n            setError(t('tours.validation.commissionNonNegative', { defaultValue: 'Kommission muss >= 0 sein' }));\n            return;\n        }\n\n        setLoading(true);\n\n        try {\n            const tourData: any = {\n                title,\n                description: description || null,\n                type,\n                isActive,\n                duration: duration ? Number(duration) : null,\n                maxParticipants: maxParticipants ? Number(maxParticipants) : null,\n                minParticipants: minParticipants ? Number(minParticipants) : null,\n                price: price ? Number(price) : null,\n                currency: currency || 'COP',\n                location: location || null,\n                meetingPoint: meetingPoint || null,\n                includes: includes || null,\n                excludes: excludes || null,\n                requirements: requirements || null,\n                totalCommission: totalCommission ? Number(totalCommission) : null,\n                totalCommissionPercent: totalCommissionPercent ? Number(totalCommissionPercent) : null,\n                sellerCommissionPercent: sellerCommissionPercent ? Number(sellerCommissionPercent) : null,\n                sellerCommissionFixed: sellerCommissionFixed ? Number(sellerCommissionFixed) : null,\n                externalProviderId: externalProviderId ? Number(externalProviderId) : null,\n                externalBookingUrl: externalBookingUrl || null,\n                branchId: branchId ? Number(branchId) : null\n            };\n\n            const response = await axiosInstance.put(API_ENDPOINTS.TOURS.BY_ID(tour.id), tourData);\n            \n            if (response.data.success) {\n                const updatedTour = response.data.data;\n                \n                // Hauptbild hochladen (falls gendert)\n                if (imageFile) {\n                    try {\n                        setUploadingImage(true);\n                        const formData = new FormData();\n                        formData.append('image', imageFile);\n                        await axiosInstance.post(API_ENDPOINTS.TOURS.UPLOAD_IMAGE(tour.id), formData, {\n                            headers: { 'Content-Type': 'multipart/form-data' }\n                        });\n                    } catch (imgErr: any) {\n                        console.error('Fehler beim Hochladen des Hauptbildes:', imgErr);\n                        showMessage(t('tours.imageUploadError', 'Tour aktualisiert, aber Fehler beim Hochladen des Bildes'), 'warning');\n                    } finally {\n                        setUploadingImage(false);\n                    }\n                }\n                \n                // Neue Galerie-Bilder hochladen (falls vorhanden)\n                if (galleryFiles.length > 0) {\n                    try {\n                        setUploadingImage(true);\n                        for (const file of galleryFiles) {\n                            const formData = new FormData();\n                            formData.append('image', file);\n                            await axiosInstance.post(API_ENDPOINTS.TOURS.UPLOAD_GALLERY(tour.id), formData, {\n                                headers: { 'Content-Type': 'multipart/form-data' }\n                            });\n                        }\n                    } catch (galleryErr: any) {\n                        console.error('Fehler beim Hochladen der Galerie-Bilder:', galleryErr);\n                        showMessage(t('tours.galleryUploadError', 'Tour aktualisiert, aber Fehler beim Hochladen der Galerie-Bilder'), 'warning');\n                    } finally {\n                        setUploadingImage(false);\n                    }\n                }\n                \n                showMessage(t('tours.updateSuccess', 'Tour erfolgreich aktualisiert'), 'success');\n                // Lade Tour neu, um aktualisierte Bilder zu erhalten\n                const updatedResponse = await axiosInstance.get(API_ENDPOINTS.TOURS.BY_ID(tour.id));\n                onTourUpdated(updatedResponse.data.data);\n                onClose();\n            } else {\n                setError(response.data.message || t('errors.saveError'));\n            }\n        } catch (err: any) {\n            console.error('Fehler beim Aktualisieren der Tour:', err);\n            const errorMessage = err.response?.data?.message || t('errors.saveError');\n            setError(errorMessage);\n            showMessage(errorMessage, 'error');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (!isOpen || !tour) return null;\n\n    return (\n        <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[90vh] overflow-y-auto\">\n                    <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\n                        <Dialog.Title className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n                            {t('tours.edit', 'Tour bearbeiten')}\n                        </Dialog.Title>\n                        <button\n                            onClick={onClose}\n                            className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n                        >\n                            <XMarkIcon className=\"h-6 w-6\" />\n                        </button>\n                    </div>\n\n                    <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n                        {error && (\n                            <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-200 px-4 py-3 rounded\">\n                                {error}\n                            </div>\n                        )}\n\n                        {/* Grundinformationen */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.basicInfo', 'Grundinformationen')}\n                            </h3>\n                            \n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.name', 'Titel')} *\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    value={title}\n                                    onChange={(e) => setTitle(e.target.value)}\n                                    required\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.description', 'Beschreibung')}\n                                </label>\n                                <textarea\n                                    value={description}\n                                    onChange={(e) => setDescription(e.target.value)}\n                                    rows={4}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.type', 'Typ')} *\n                                    </label>\n                                    <select\n                                        value={type}\n                                        onChange={(e) => setType(e.target.value as TourType)}\n                                        required\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    >\n                                        <option value={TourType.OWN}>{t('tours.typeOwn', 'Eigene Tour')}</option>\n                                        <option value={TourType.EXTERNAL}>{t('tours.typeExternal', 'Externe Tour')}</option>\n                                    </select>\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.status', 'Status')}\n                                    </label>\n                                    <select\n                                        value={isActive ? 'true' : 'false'}\n                                        onChange={(e) => setIsActive(e.target.value === 'true')}\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    >\n                                        <option value=\"true\">{t('tours.statusActive', 'Aktiv')}</option>\n                                        <option value=\"false\">{t('tours.statusInactive', 'Inaktiv')}</option>\n                                    </select>\n                                </div>\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.branch', 'Niederlassung')}\n                                </label>\n                                <select\n                                    value={branchId}\n                                    onChange={(e) => setBranchId(e.target.value ? Number(e.target.value) : '')}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                >\n                                    <option value=\"\">{t('common.all', 'Alle')}</option>\n                                    {branches.map(branch => (\n                                        <option key={branch.id} value={branch.id}>{branch.name}</option>\n                                    ))}\n                                </select>\n                            </div>\n                        </div>\n\n                        {/* Tour-Details */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.details', 'Tour-Details')}\n                            </h3>\n                            \n                            <div className=\"grid grid-cols-3 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.duration', 'Dauer (Stunden)')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={duration}\n                                        onChange={(e) => setDuration(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.minParticipants', 'Min. Teilnehmer')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={minParticipants}\n                                        onChange={(e) => setMinParticipants(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.maxParticipants', 'Max. Teilnehmer')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={maxParticipants}\n                                        onChange={(e) => setMaxParticipants(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n\n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.price', 'Preis')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={price}\n                                        onChange={(e) => setPrice(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.currency', 'Whrung')}\n                                    </label>\n                                    <input\n                                        type=\"text\"\n                                        value={currency}\n                                        onChange={(e) => setCurrency(e.target.value)}\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.location', 'Ort')}\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    value={location}\n                                    onChange={(e) => setLocation(e.target.value)}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.meetingPoint', 'Treffpunkt')}\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    value={meetingPoint}\n                                    onChange={(e) => setMeetingPoint(e.target.value)}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n                        </div>\n\n                        {/* Externe Tour-Informationen */}\n                        {type === TourType.EXTERNAL && (\n                            <div className=\"space-y-4\">\n                                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                    {t('tours.externalInfo', 'Externe Tour-Informationen')}\n                                </h3>\n                                \n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.externalProvider', 'Externer Anbieter')}\n                                    </label>\n                                    <select\n                                        value={externalProviderId}\n                                        onChange={(e) => setExternalProviderId(e.target.value ? Number(e.target.value) : '')}\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    >\n                                        <option value=\"\">{t('common.select', 'Auswhlen')}</option>\n                                        {tourProviders.map(provider => (\n                                            <option key={provider.id} value={provider.id}>{provider.name}</option>\n                                        ))}\n                                    </select>\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.externalBookingUrl', 'Externe Buchungs-URL')}\n                                    </label>\n                                    <input\n                                        type=\"url\"\n                                        value={externalBookingUrl}\n                                        onChange={(e) => setExternalBookingUrl(e.target.value)}\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Kommissionen */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.commissions', 'Kommissionen')}\n                            </h3>\n                            \n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.totalCommission', 'Gesamtkommission')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={totalCommission}\n                                        onChange={(e) => setTotalCommission(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.totalCommissionPercent', 'Gesamtkommission (%)')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={totalCommissionPercent}\n                                        onChange={(e) => setTotalCommissionPercent(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        max=\"100\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.sellerCommissionPercent', 'Verkufer-Kommission (%)')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={sellerCommissionPercent}\n                                        onChange={(e) => setSellerCommissionPercent(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        max=\"100\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.sellerCommissionFixed', 'Verkufer-Kommission (Fix)')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={sellerCommissionFixed}\n                                        onChange={(e) => setSellerCommissionFixed(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Zustzliche Informationen */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.additionalInfo', 'Zustzliche Informationen')}\n                            </h3>\n                            \n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.includes', 'Enthlt')}\n                                </label>\n                                <textarea\n                                    value={includes}\n                                    onChange={(e) => setIncludes(e.target.value)}\n                                    rows={3}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.excludes', 'Nicht enthalten')}\n                                </label>\n                                <textarea\n                                    value={excludes}\n                                    onChange={(e) => setExcludes(e.target.value)}\n                                    rows={3}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.requirements', 'Anforderungen')}\n                                </label>\n                                <textarea\n                                    value={requirements}\n                                    onChange={(e) => setRequirements(e.target.value)}\n                                    rows={3}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n                        </div>\n\n                        {/* Bild-Upload */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.images', 'Bilder')}\n                            </h3>\n                            \n                            {/* Hauptbild */}\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.mainImage', 'Hauptbild')}\n                                </label>\n                                <input\n                                    type=\"file\"\n                                    accept=\"image/*\"\n                                    onChange={handleImageChange}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                                {imagePreview && (\n                                    <div className=\"mt-2\">\n                                        <img\n                                            src={imagePreview}\n                                            alt=\"Vorschau\"\n                                            className=\"max-w-xs h-48 object-cover rounded-md border border-gray-300 dark:border-gray-600\"\n                                        />\n                                    </div>\n                                )}\n                            </div>\n                            \n                            {/* Galerie */}\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.gallery', 'Galerie')}\n                                </label>\n                                <input\n                                    type=\"file\"\n                                    accept=\"image/*\"\n                                    multiple\n                                    onChange={handleGalleryChange}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                                {galleryPreviews.length > 0 && (\n                                    <div className=\"mt-2 grid grid-cols-3 gap-2\">\n                                        {galleryPreviews.map((preview, index) => (\n                                            <div key={index} className=\"relative\">\n                                                <img\n                                                    src={preview}\n                                                    alt={`Galerie ${index + 1}`}\n                                                    className=\"w-full h-32 object-cover rounded-md border border-gray-300 dark:border-gray-600\"\n                                                />\n                                                <button\n                                                    type=\"button\"\n                                                    onClick={() => removeGalleryImage(index)}\n                                                    className=\"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 hover:bg-red-600\"\n                                                >\n                                                    <XMarkIcon className=\"h-4 w-4\" />\n                                                </button>\n                                            </div>\n                                        ))}\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n\n                        <div className=\"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                            <button\n                                type=\"button\"\n                                onClick={onClose}\n                                className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n                            >\n                                {t('common.cancel', 'Abbrechen')}\n                            </button>\n                            <button\n                                type=\"submit\"\n                                disabled={loading || loadingData || uploadingImage}\n                                className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                                {loading ? t('common.saving', 'Speichere...') : t('common.save', 'Speichern')}\n                            </button>\n                        </div>\n                    </form>\n                </Dialog.Panel>\n            </div>\n        </Dialog>\n    );\n};\n\nexport default EditTourModal;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../../config/axios.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, MapPinIcon, ClockIcon, UsersIcon, CurrencyDollarIcon, BuildingOfficeIcon, UserIcon, PlusIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport { Tour, TourType, TourBooking } from '../../types/tour.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { format } from 'date-fns';\nimport { de } from 'date-fns/locale';\nimport CreateTourBookingModal from './CreateTourBookingModal.tsx';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\n\ninterface TourDetailsModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    tourId: number;\n    onTourUpdated?: (updatedTour: Tour) => void;\n}\n\nconst TourDetailsModal = ({ isOpen, onClose, tourId, onTourUpdated }: TourDetailsModalProps) => {\n    const { t } = useTranslation();\n    const { showMessage } = useMessage();\n    const { hasPermission } = usePermissions();\n    const [tour, setTour] = useState<Tour | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const [isCreateBookingModalOpen, setIsCreateBookingModalOpen] = useState(false);\n\n    useEffect(() => {\n        if (isOpen && tourId) {\n            loadTour();\n        }\n    }, [isOpen, tourId]);\n\n    const loadTour = async () => {\n        try {\n            setLoading(true);\n            setError(null);\n            const response = await axiosInstance.get(API_ENDPOINTS.TOURS.BY_ID(tourId));\n            if (response.data.success) {\n                setTour(response.data.data);\n            } else {\n                setError(response.data.message || t('errors.loadError'));\n            }\n        } catch (err: any) {\n            console.error('Fehler beim Laden der Tour:', err);\n            const errorMessage = err.response?.data?.message || t('errors.loadError');\n            setError(errorMessage);\n            showMessage(errorMessage, 'error');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[90vh] overflow-y-auto\">\n                    <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\n                        <Dialog.Title className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n                            {t('tours.details', 'Tour-Details')}\n                        </Dialog.Title>\n                        <div className=\"flex items-center gap-3\">\n                            {hasPermission('tour_bookings', 'write', 'table') && tour && tour.isActive && (\n                                <div className=\"relative group\">\n                                    <button\n                                        onClick={() => setIsCreateBookingModalOpen(true)}\n                                        className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                                        style={{ width: '30.19px', height: '30.19px' }}\n                                        aria-label={t('tourBookings.create', 'Buchung erstellen')}\n                                    >\n                                        <PlusIcon className=\"h-4 w-4\" />\n                                    </button>\n                                    <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                        {t('tourBookings.create', 'Buchung erstellen')}\n                                    </div>\n                                </div>\n                            )}\n                            <button\n                                onClick={onClose}\n                                className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n                            >\n                                <XMarkIcon className=\"h-6 w-6\" />\n                            </button>\n                        </div>\n                    </div>\n\n                    <div className=\"p-6\">\n                        {loading ? (\n                            <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                                {t('common.loading')}\n                            </div>\n                        ) : error ? (\n                            <div className=\"text-center py-8 text-red-500 dark:text-red-400\">\n                                {error}\n                            </div>\n                        ) : !tour ? (\n                            <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                                {t('tours.notFound', 'Tour nicht gefunden')}\n                            </div>\n                        ) : (\n                            <div className=\"space-y-6\">\n                                {/* Header */}\n                                <div>\n                                    <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n                                        {tour.title || '-'}\n                                    </h2>\n                                    <div className=\"flex items-center gap-2\">\n                                        <span className={`px-3 py-1 text-sm rounded-full ${\n                                            tour.type === TourType.OWN\n                                                ? 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'\n                                                : 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200'\n                                        }`}>\n                                            {tour.type === TourType.OWN ? t('tours.typeOwn') : t('tours.typeExternal')}\n                                        </span>\n                                        <span className={`px-3 py-1 text-sm rounded-full ${\n                                            tour.isActive\n                                                ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\n                                                : 'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200'\n                                        }`}>\n                                            {tour.isActive ? t('tours.statusActive') : t('tours.statusInactive')}\n                                        </span>\n                                    </div>\n                                </div>\n\n                                {/* Beschreibung */}\n                                {tour.description && (\n                                    <div>\n                                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n                                            {t('tours.description')}\n                                        </h3>\n                                        <p className=\"text-gray-700 dark:text-gray-300 whitespace-pre-wrap\">\n                                            {tour.description}\n                                        </p>\n                                    </div>\n                                )}\n\n                                {/* Tour-Details Grid */}\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                    {/* Linke Spalte */}\n                                    <div className=\"space-y-4\">\n                                        {tour.duration && (\n                                            <div className=\"flex items-start gap-3\">\n                                                <ClockIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.duration')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {tour.duration} {t('common.hours', 'h')}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {(tour.minParticipants || tour.maxParticipants) && (\n                                            <div className=\"flex items-start gap-3\">\n                                                <UsersIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.participants', 'Teilnehmer')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {tour.minParticipants && tour.maxParticipants\n                                                            ? `${tour.minParticipants} - ${tour.maxParticipants}`\n                                                            : tour.minParticipants\n                                                            ? `${tour.minParticipants}+`\n                                                            : tour.maxParticipants\n                                                            ? `bis ${tour.maxParticipants}`\n                                                            : '-'}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {tour.price && (\n                                            <div className=\"flex items-start gap-3\">\n                                                <CurrencyDollarIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.price')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white font-semibold\">\n                                                        {Number(tour.price).toLocaleString()} {tour.currency || 'COP'}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {tour.location && (\n                                            <div className=\"flex items-start gap-3\">\n                                                <MapPinIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.location')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {tour.location}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {tour.meetingPoint && (\n                                            <div className=\"flex items-start gap-3\">\n                                                <MapPinIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.meetingPoint')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {tour.meetingPoint}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n                                    </div>\n\n                                    {/* Rechte Spalte */}\n                                    <div className=\"space-y-4\">\n                                        {tour.branch && (\n                                            <div className=\"flex items-start gap-3\">\n                                                <BuildingOfficeIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.branch')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {tour.branch.name}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {tour.createdBy && (\n                                            <div className=\"flex items-start gap-3\">\n                                                <UserIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.columns.createdBy')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {tour.createdBy.firstName} {tour.createdBy.lastName}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {tour.createdAt && (\n                                            <div>\n                                                <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                    {t('common.createdAt', 'Erstellt am')}\n                                                </div>\n                                                <div className=\"text-gray-900 dark:text-white\">\n                                                    {format(new Date(tour.createdAt), 'dd.MM.yyyy HH:mm', { locale: de })}\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {tour.externalProvider && (\n                                            <div>\n                                                <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                    {t('tours.externalProvider')}\n                                                </div>\n                                                <div className=\"text-gray-900 dark:text-white\">\n                                                    {tour.externalProvider.name}\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {tour.externalBookingUrl && (\n                                            <div>\n                                                <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                    {t('tours.externalBookingUrl')}\n                                                </div>\n                                                <a\n                                                    href={tour.externalBookingUrl}\n                                                    target=\"_blank\"\n                                                    rel=\"noopener noreferrer\"\n                                                    className=\"text-blue-600 dark:text-blue-400 hover:underline\"\n                                                >\n                                                    {tour.externalBookingUrl}\n                                                </a>\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n\n                                {/* Kommissionen */}\n                                {(tour.totalCommission || tour.totalCommissionPercent || tour.sellerCommissionPercent || tour.sellerCommissionFixed) && (\n                                    <div className=\"border-t border-gray-200 dark:border-gray-700 pt-6\">\n                                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n                                            {t('tours.commissions')}\n                                        </h3>\n                                        <div className=\"grid grid-cols-2 gap-4\">\n                                            {tour.totalCommission && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.totalCommission')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {Number(tour.totalCommission).toLocaleString()} {tour.currency || 'COP'}\n                                                    </div>\n                                                </div>\n                                            )}\n                                            {tour.totalCommissionPercent && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.totalCommissionPercent')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {Number(tour.totalCommissionPercent)}%\n                                                    </div>\n                                                </div>\n                                            )}\n                                            {tour.sellerCommissionPercent && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.sellerCommissionPercent')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {Number(tour.sellerCommissionPercent)}%\n                                                    </div>\n                                                </div>\n                                            )}\n                                            {tour.sellerCommissionFixed && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.sellerCommissionFixed')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {Number(tour.sellerCommissionFixed).toLocaleString()} {tour.currency || 'COP'}\n                                                    </div>\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                )}\n\n                                {/* Zustzliche Informationen */}\n                                {(tour.includes || tour.excludes || tour.requirements) && (\n                                    <div className=\"border-t border-gray-200 dark:border-gray-700 pt-6\">\n                                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n                                            {t('tours.additionalInfo')}\n                                        </h3>\n                                        <div className=\"space-y-4\">\n                                            {tour.includes && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1\">\n                                                        {t('tours.includes')}\n                                                    </div>\n                                                    <p className=\"text-gray-700 dark:text-gray-300 whitespace-pre-wrap\">\n                                                        {tour.includes}\n                                                    </p>\n                                                </div>\n                                            )}\n                                            {tour.excludes && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1\">\n                                                        {t('tours.excludes')}\n                                                    </div>\n                                                    <p className=\"text-gray-700 dark:text-gray-300 whitespace-pre-wrap\">\n                                                        {tour.excludes}\n                                                    </p>\n                                                </div>\n                                            )}\n                                            {tour.requirements && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1\">\n                                                        {t('tours.requirements')}\n                                                    </div>\n                                                    <p className=\"text-gray-700 dark:text-gray-300 whitespace-pre-wrap\">\n                                                        {tour.requirements}\n                                                    </p>\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                )}\n\n                                {/* Verfgbarkeit */}\n                                {(tour.availableFrom || tour.availableTo) && (\n                                    <div className=\"border-t border-gray-200 dark:border-gray-700 pt-6\">\n                                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n                                            {t('tours.availability', 'Verfgbarkeit')}\n                                        </h3>\n                                        <div className=\"grid grid-cols-2 gap-4\">\n                                            {tour.availableFrom && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.availableFrom', 'Verfgbar ab')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {format(new Date(tour.availableFrom), 'dd.MM.yyyy', { locale: de })}\n                                                    </div>\n                                                </div>\n                                            )}\n                                            {tour.availableTo && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.availableTo', 'Verfgbar bis')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {format(new Date(tour.availableTo), 'dd.MM.yyyy', { locale: de })}\n                                                    </div>\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        )}\n                    </div>\n\n                    <div className=\"flex justify-end p-6 border-t border-gray-200 dark:border-gray-700\">\n                        <button\n                            onClick={onClose}\n                            className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n                        >\n                            {t('common.close', 'Schlieen')}\n                        </button>\n                    </div>\n                </Dialog.Panel>\n            </div>\n            \n            {/* Create Tour Booking Modal */}\n            {tour && (\n                <CreateTourBookingModal\n                    isOpen={isCreateBookingModalOpen}\n                    onClose={() => setIsCreateBookingModalOpen(false)}\n                    tour={tour}\n                    onBookingCreated={async (newBooking: TourBooking) => {\n                        showMessage(\n                            t('tourBookings.created', { defaultValue: 'Tour-Buchung erfolgreich erstellt' }),\n                            'success'\n                        );\n                        setIsCreateBookingModalOpen(false);\n                    }}\n                />\n            )}\n        </Dialog>\n    );\n};\n\nexport default TourDetailsModal;\n\n","import React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, ArrowDownTrayIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../../config/axios.ts';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface TourExportDialogProps {\n    isOpen: boolean;\n    onClose: () => void;\n    tourCount: number;\n}\n\nconst TourExportDialog = ({ isOpen, onClose, tourCount }: TourExportDialogProps) => {\n    const { t } = useTranslation();\n    const { showMessage } = useMessage();\n    \n    const [selectedFields, setSelectedFields] = useState<string[]>([\n        'id', 'title', 'description', 'type', 'price', 'currency', 'duration',\n        'maxParticipants', 'minParticipants', 'location', 'meetingPoint',\n        'imageUrl', 'galleryUrls', 'availableFrom', 'availableTo'\n    ]);\n    const [exporting, setExporting] = useState(false);\n    const [format, setFormat] = useState<'json' | 'csv'>('json');\n\n    const availableFields = [\n        { id: 'id', label: t('tours.columns.title', 'Titel') },\n        { id: 'title', label: t('tours.name', 'Titel') },\n        { id: 'description', label: t('tours.description', 'Beschreibung') },\n        { id: 'type', label: t('tours.type', 'Typ') },\n        { id: 'price', label: t('tours.price', 'Preis') },\n        { id: 'currency', label: t('tours.currency', 'Whrung') },\n        { id: 'duration', label: t('tours.duration', 'Dauer') },\n        { id: 'maxParticipants', label: t('tours.maxParticipants', 'Max. Teilnehmer') },\n        { id: 'minParticipants', label: t('tours.minParticipants', 'Min. Teilnehmer') },\n        { id: 'location', label: t('tours.location', 'Ort') },\n        { id: 'meetingPoint', label: t('tours.meetingPoint', 'Treffpunkt') },\n        { id: 'includes', label: t('tours.includes', 'Enthlt') },\n        { id: 'excludes', label: t('tours.excludes', 'Nicht enthalten') },\n        { id: 'requirements', label: t('tours.requirements', 'Anforderungen') },\n        { id: 'imageUrl', label: t('tours.mainImage', 'Hauptbild') },\n        { id: 'galleryUrls', label: t('tours.gallery', 'Galerie') },\n        { id: 'availableFrom', label: t('tours.availableFrom', 'Verfgbar ab') },\n        { id: 'availableTo', label: t('tours.availableTo', 'Verfgbar bis') },\n        { id: 'externalBookingUrl', label: t('tours.externalBookingUrl', 'Externe Buchungs-URL') },\n        { id: 'branch', label: t('tours.branch', 'Niederlassung') },\n        { id: 'externalProvider', label: t('tours.externalProvider', 'Externer Anbieter') }\n    ];\n\n    const toggleField = (fieldId: string) => {\n        setSelectedFields(prev =>\n            prev.includes(fieldId)\n                ? prev.filter(f => f !== fieldId)\n                : [...prev, fieldId]\n        );\n    };\n\n    const selectAll = () => {\n        setSelectedFields(availableFields.map(f => f.id));\n    };\n\n    const deselectAll = () => {\n        setSelectedFields([]);\n    };\n\n    const handleExport = async () => {\n        if (selectedFields.length === 0) {\n            showMessage(t('tours.export.noFieldsSelected', 'Bitte whlen Sie mindestens ein Feld aus'), 'error');\n            return;\n        }\n\n        setExporting(true);\n        try {\n            const fieldsParam = selectedFields.join(',');\n            const response = await axiosInstance.get(API_ENDPOINTS.TOURS.EXPORT, {\n                params: { fields: fieldsParam }\n            });\n\n            const tours = response.data.tours || response.data;\n\n            if (format === 'json') {\n                // JSON-Export\n                const blob = new Blob([JSON.stringify(tours, null, 2)], { type: 'application/json' });\n                const url = window.URL.createObjectURL(blob);\n                const a = document.createElement('a');\n                a.href = url;\n                a.download = `tours-export-${new Date().toISOString().split('T')[0]}.json`;\n                document.body.appendChild(a);\n                a.click();\n                document.body.removeChild(a);\n                window.URL.revokeObjectURL(url);\n            } else {\n                // CSV-Export\n                if (!Array.isArray(tours) || tours.length === 0) {\n                    showMessage(t('tours.export.noData', 'Keine Daten zum Exportieren'), 'warning');\n                    return;\n                }\n\n                // CSV-Header\n                const headers = selectedFields.map(fieldId => {\n                    const field = availableFields.find(f => f.id === fieldId);\n                    return field?.label || fieldId;\n                });\n\n                // CSV-Rows\n                const rows = tours.map((tour: any) => {\n                    return selectedFields.map(fieldId => {\n                        let value = tour[fieldId];\n                        if (value === null || value === undefined) return '';\n                        if (typeof value === 'object') {\n                            if (fieldId === 'branch') return value?.name || '';\n                            if (fieldId === 'externalProvider') return value?.name || '';\n                            if (fieldId === 'galleryUrls' && Array.isArray(value)) return value.join('; ');\n                            return JSON.stringify(value);\n                        }\n                        if (typeof value === 'boolean') return value ? 'Ja' : 'Nein';\n                        return String(value);\n                    });\n                });\n\n                // CSV-String erstellen\n                const csvContent = [\n                    headers.join(','),\n                    ...rows.map(row => row.map(cell => `\"${String(cell).replace(/\"/g, '\"\"')}\"`).join(','))\n                ].join('\\n');\n\n                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n                const url = window.URL.createObjectURL(blob);\n                const a = document.createElement('a');\n                a.href = url;\n                a.download = `tours-export-${new Date().toISOString().split('T')[0]}.csv`;\n                document.body.appendChild(a);\n                a.click();\n                document.body.removeChild(a);\n                window.URL.revokeObjectURL(url);\n            }\n\n            showMessage(t('tours.export.success', 'Export erfolgreich'), 'success');\n            onClose();\n        } catch (err: any) {\n            console.error('Fehler beim Exportieren:', err);\n            showMessage(err.response?.data?.message || t('tours.export.error', 'Fehler beim Exportieren'), 'error');\n        } finally {\n            setExporting(false);\n        }\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-2xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                    <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\n                        <Dialog.Title className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n                            {t('tours.export.title', 'Touren exportieren')} ({tourCount})\n                        </Dialog.Title>\n                        <button\n                            onClick={onClose}\n                            className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n                        >\n                            <XMarkIcon className=\"h-6 w-6\" />\n                        </button>\n                    </div>\n\n                    <div className=\"p-6 space-y-6\">\n                        {/* Format-Auswahl */}\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                                {t('tours.export.format', 'Export-Format')}\n                            </label>\n                            <div className=\"flex gap-4\">\n                                <label className=\"flex items-center\">\n                                    <input\n                                        type=\"radio\"\n                                        value=\"json\"\n                                        checked={format === 'json'}\n                                        onChange={(e) => setFormat(e.target.value as 'json' | 'csv')}\n                                        className=\"mr-2\"\n                                    />\n                                    JSON\n                                </label>\n                                <label className=\"flex items-center\">\n                                    <input\n                                        type=\"radio\"\n                                        value=\"csv\"\n                                        checked={format === 'csv'}\n                                        onChange={(e) => setFormat(e.target.value as 'json' | 'csv')}\n                                        className=\"mr-2\"\n                                    />\n                                    CSV\n                                </label>\n                            </div>\n                        </div>\n\n                        {/* Feldauswahl */}\n                        <div>\n                            <div className=\"flex items-center justify-between mb-3\">\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                    {t('tours.export.selectFields', 'Felder auswhlen')}\n                                </label>\n                                <div className=\"flex gap-2\">\n                                    <button\n                                        type=\"button\"\n                                        onClick={selectAll}\n                                        className=\"text-sm text-blue-600 dark:text-blue-400 hover:underline\"\n                                    >\n                                        {t('common.selectAll', 'Alle auswhlen')}\n                                    </button>\n                                    <span className=\"text-gray-400\">|</span>\n                                    <button\n                                        type=\"button\"\n                                        onClick={deselectAll}\n                                        className=\"text-sm text-blue-600 dark:text-blue-400 hover:underline\"\n                                    >\n                                        {t('common.deselectAll', 'Alle abwhlen')}\n                                    </button>\n                                </div>\n                            </div>\n                            <div className=\"border border-gray-300 dark:border-gray-600 rounded-md p-4 max-h-96 overflow-y-auto\">\n                                <div className=\"grid grid-cols-2 gap-2\">\n                                    {availableFields.map(field => (\n                                        <label key={field.id} className=\"flex items-center\">\n                                            <input\n                                                type=\"checkbox\"\n                                                checked={selectedFields.includes(field.id)}\n                                                onChange={() => toggleField(field.id)}\n                                                className=\"mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                                            />\n                                            <span className=\"text-sm text-gray-700 dark:text-gray-300\">\n                                                {field.label}\n                                            </span>\n                                        </label>\n                                    ))}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"flex justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700\">\n                        <button\n                            type=\"button\"\n                            onClick={onClose}\n                            className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n                        >\n                            {t('common.cancel', 'Abbrechen')}\n                        </button>\n                        <button\n                            type=\"button\"\n                            onClick={handleExport}\n                            disabled={exporting || selectedFields.length === 0}\n                            className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n                        >\n                            <ArrowDownTrayIcon className=\"h-4 w-4\" />\n                            {exporting ? t('common.exporting', 'Exportiere...') : t('common.export', 'Exportieren')}\n                        </button>\n                    </div>\n                </Dialog.Panel>\n            </div>\n        </Dialog>\n    );\n};\n\nexport default TourExportDialog;\n\n","import React, { useState, useEffect, useMemo, useCallback, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { PencilIcon, PlusIcon, ArrowsUpDownIcon, FunnelIcon, InformationCircleIcon, Squares2X2Icon, TableCellsIcon, ArrowDownTrayIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport axiosInstance from '../../config/axios.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport { useTableSettings } from '../../hooks/useTableSettings.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport TableColumnConfig from '../TableColumnConfig.tsx';\nimport FilterPane from '../FilterPane.tsx';\nimport SavedFilterTags from '../SavedFilterTags.tsx';\nimport CreateTourModal from './CreateTourModal.tsx';\nimport EditTourModal from './EditTourModal.tsx';\nimport TourDetailsModal from './TourDetailsModal.tsx';\nimport TourExportDialog from './TourExportDialog.tsx';\nimport { Tour, TourType } from '../../types/tour.ts';\nimport { FilterCondition } from '../FilterRow.tsx';\nimport { applyFilters, evaluateUserRoleCondition } from '../../utils/filterLogic.ts';\n\ninterface ToursTabProps {\n    onError: (error: string) => void;\n}\n\ninterface TourSortConfig {\n    key: 'title' | 'type' | 'price' | 'location' | 'duration' | 'branch' | 'createdBy' | 'isActive';\n    direction: 'asc' | 'desc';\n}\n\nconst TOURS_TABLE_ID = 'worktracker-tours';\n\nconst defaultTourColumnOrder = ['title', 'type', 'price', 'location', 'duration', 'branch', 'isActive', 'actions'];\n\nconst defaultTourCardSortDirections: Record<string, 'asc' | 'desc'> = {\n    title: 'asc',\n    type: 'asc',\n    price: 'asc',\n    location: 'asc',\n    duration: 'asc',\n    branch: 'asc',\n    createdBy: 'asc',\n    isActive: 'asc'\n};\n\nconst tourCardToTableMapping: Record<string, string> = {\n    'title': 'title',\n    'type': 'type',\n    'price': 'price',\n    'location': 'location',\n    'duration': 'duration',\n    'branch': 'branch',\n    'createdBy': 'createdBy',\n    'isActive': 'isActive'\n};\n\nconst getTourCardMetadataFromColumnOrder = (columnOrder: string[]): string[] => {\n    const cardMetadata: string[] = [];\n    columnOrder.forEach(tableCol => {\n        const cardMeta = tourCardToTableMapping[tableCol] || [];\n        if (cardMeta && typeof cardMeta === 'string') {\n            cardMetadata.push(cardMeta);\n        }\n    });\n    return cardMetadata;\n};\n\nconst getTourHiddenCardMetadata = (hiddenTableColumns: string[]): Set<string> => {\n    const hiddenCardMetadata = new Set<string>();\n    hiddenTableColumns.forEach(tableCol => {\n        const cardMeta = tourCardToTableMapping[tableCol];\n        if (cardMeta) {\n            hiddenCardMetadata.add(cardMeta);\n        }\n    });\n    return hiddenCardMetadata;\n};\n\nconst ToursTab: React.FC<ToursTabProps> = ({ onError }) => {\n    const { t } = useTranslation();\n    const { hasPermission } = usePermissions();\n    const { showMessage } = useMessage();\n    \n    // Tour-States\n    const [tours, setTours] = useState<Tour[]>([]);\n    const [toursLoading, setToursLoading] = useState(false);\n    const [toursError, setToursError] = useState<string | null>(null);\n    const [tourSearchTerm, setTourSearchTerm] = useState('');\n    const [tourFilterConditions, setTourFilterConditions] = useState<FilterCondition[]>([]);\n    const [tourFilterLogicalOperators, setTourFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n    const [tourFilterSortDirections, setTourFilterSortDirections] = useState<Array<{ column: string; direction: 'asc' | 'desc'; priority: number; conditionIndex: number }>>([]);\n    const [tourActiveFilterName, setTourActiveFilterName] = useState<string>(t('tours.filters.current', 'Aktuell'));\n    const [tourSelectedFilterId, setTourSelectedFilterId] = useState<number | null>(null);\n    const [isCreateTourModalOpen, setIsCreateTourModalOpen] = useState(false);\n    const [isEditTourModalOpen, setIsEditTourModalOpen] = useState(false);\n    const [isTourDetailsModalOpen, setIsTourDetailsModalOpen] = useState(false);\n    const [isTourExportDialogOpen, setIsTourExportDialogOpen] = useState(false);\n    const [selectedTour, setSelectedTour] = useState<Tour | null>(null);\n    const [selectedTourId, setSelectedTourId] = useState<number | null>(null);\n    const [displayLimit, setDisplayLimit] = useState<number>(10);\n    const [draggedColumn, setDraggedColumn] = useState<string | null>(null);\n    const [dragOverColumn, setDragOverColumn] = useState<string | null>(null);\n    const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n    \n    // Tabellen-Einstellungen\n    const {\n        settings,\n        isLoading: isLoadingSettings,\n        updateColumnOrder,\n        updateHiddenColumns,\n        toggleColumnVisibility,\n        isColumnVisible,\n        updateViewMode\n    } = useTableSettings(TOURS_TABLE_ID, {\n        defaultColumnOrder: defaultTourColumnOrder,\n        defaultHiddenColumns: [],\n        defaultViewMode: 'cards'\n    });\n    \n    // Tours-Spalten\n    const availableTourColumns = useMemo(() => [\n        { id: 'title', label: t('tours.columns.title', 'Titel'), shortLabel: t('tours.columns.title', 'Titel').substring(0, 4) },\n        { id: 'type', label: t('tours.columns.type', 'Typ'), shortLabel: t('tours.columns.type', 'Typ').substring(0, 3) },\n        { id: 'price', label: t('tours.columns.price', 'Preis'), shortLabel: t('tours.columns.price', 'Preis').substring(0, 3) },\n        { id: 'location', label: t('tours.columns.location', 'Ort'), shortLabel: t('tours.columns.location', 'Ort').substring(0, 3) },\n        { id: 'duration', label: t('tours.columns.duration', 'Dauer'), shortLabel: t('tours.columns.duration', 'Dauer').substring(0, 3) },\n        { id: 'branch', label: t('tours.columns.branch', 'Niederlassung'), shortLabel: t('tours.columns.branch', 'Niederlassung').substring(0, 5) },\n        { id: 'createdBy', label: t('tours.columns.createdBy', 'Erstellt von'), shortLabel: t('tours.columns.createdBy', 'Erstellt von').substring(0, 5) },\n        { id: 'isActive', label: t('tours.columns.status', 'Status'), shortLabel: t('tours.columns.status', 'Status').substring(0, 3) },\n        { id: 'actions', label: t('tours.columns.actions', 'Aktionen'), shortLabel: t('common.actions').substring(0, 3) },\n    ], [t]);\n    \n    const tourFilterOnlyColumns = useMemo(() => [\n        { id: 'description', label: t('tours.columns.description', 'Beschreibung'), shortLabel: t('tours.columns.description', 'Beschreibung').substring(0, 3) },\n        { id: 'maxParticipants', label: t('tours.columns.maxParticipants', 'Max. Teilnehmer'), shortLabel: t('tours.columns.maxParticipants', 'Max. Teilnehmer').substring(0, 3) },\n        { id: 'minParticipants', label: t('tours.columns.minParticipants', 'Min. Teilnehmer'), shortLabel: t('tours.columns.minParticipants', 'Min. Teilnehmer').substring(0, 3) },\n    ], [t]);\n    \n    // Tabellen-Header-Sortierung fr Tours\n    const [tourTableSortConfig, setTourTableSortConfig] = useState<TourSortConfig>({ key: 'title', direction: 'asc' });\n    \n    // Lokale Sortierrichtungen fr Tours Cards\n    const [tourCardSortDirections, setTourCardSortDirections] = useState<Record<string, 'asc' | 'desc'>>(() => {\n        return defaultTourCardSortDirections;\n    });\n    \n    const handleTourCardSortDirectionChange = (columnId: string, direction: 'asc' | 'desc') => {\n        setTourCardSortDirections(prev => ({\n            ...prev,\n            [columnId]: direction\n        }));\n    };\n    \n    const viewMode = settings?.viewMode || 'cards';\n    \n    // Card-Metadaten-Reihenfolge aus columnOrder ableiten\n    const cardMetadataOrder = useMemo(() => {\n        return getTourCardMetadataFromColumnOrder(settings?.columnOrder || defaultTourColumnOrder);\n    }, [settings?.columnOrder]);\n    \n    // Versteckte Card-Metadaten aus hiddenColumns ableiten\n    const hiddenCardMetadata = useMemo(() => {\n        return getTourHiddenCardMetadata(settings?.hiddenColumns || []);\n    }, [settings?.hiddenColumns]);\n    \n    // Sichtbare Card-Metadaten\n    const visibleCardMetadata = useMemo(() => {\n        return new Set(cardMetadataOrder.filter(meta => !hiddenCardMetadata.has(meta)));\n    }, [cardMetadataOrder, hiddenCardMetadata]);\n    \n    // Funktion zum Laden der Tours\n    const loadTours = useCallback(async (filterId?: number, filterConditions?: any[], background = false) => {\n        try {\n            if (!background) {\n                setToursLoading(true);\n                setToursError(null);\n            }\n            \n            const params: any = {};\n            if (filterId) {\n                params.filterId = filterId;\n            } else if (filterConditions && filterConditions.length > 0) {\n                params.filterConditions = JSON.stringify({\n                    conditions: filterConditions,\n                    operators: tourFilterLogicalOperators\n                });\n            }\n            \n            const response = await axiosInstance.get(API_ENDPOINTS.TOURS.BASE, { params });\n            if (response.data.success) {\n                const rawData = response.data.data || [];\n                const toursData = Array.isArray(rawData) \n                    ? rawData.filter((tour: Tour | null) => \n                        tour != null && \n                        typeof tour === 'object' && \n                        tour.title != null && \n                        typeof tour.title === 'string'\n                    )\n                    : [];\n                if (!background) {\n                    setTours(toursData);\n                }\n            } else {\n                const errorMessage = response.data.message || t('errors.loadError');\n                if (!background) {\n                    setToursError(errorMessage);\n                    showMessage(errorMessage, 'error');\n                }\n            }\n        } catch (err: any) {\n            console.error('Fehler beim Laden der Touren:', err);\n            const errorMessage = err.response?.data?.message || t('errors.loadError');\n            if (!background) {\n                setToursError(errorMessage);\n                showMessage(errorMessage, 'error');\n            }\n        } finally {\n            if (!background) {\n                setToursLoading(false);\n            }\n        }\n    }, [tourFilterLogicalOperators, t, showMessage]);\n    \n    //  MEMORY: Cleanup - Alle groen Arrays beim Unmount lschen\n    useEffect(() => {\n        return () => {\n            setTours([]);\n            setTourFilterConditions([]);\n        };\n    }, []); // Nur beim Unmount ausfhren\n    \n    // Lade Tours beim Mount\n    useEffect(() => {\n        if (hasPermission('tours', 'read', 'table')) {\n            loadTours();\n        }\n    }, [loadTours, hasPermission]);\n    \n    // Tour-Filter-Funktionen\n    const applyTourFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[], sortDirections: Array<{ column: string; direction: 'asc' | 'desc'; priority: number; conditionIndex: number }>) => {\n        setTourFilterConditions(conditions);\n        setTourFilterLogicalOperators(operators);\n        setTourFilterSortDirections(sortDirections);\n        loadTours(undefined, conditions, false);\n    };\n    \n    const resetTourFilterConditions = () => {\n        setTourFilterConditions([]);\n        setTourFilterLogicalOperators([]);\n        setTourFilterSortDirections([]);\n        setTourActiveFilterName(t('tours.filters.current', 'Aktuell'));\n        setTourSelectedFilterId(null);\n        loadTours();\n    };\n    \n    const handleTourFilterChange = (filterId: number | null, filterName: string) => {\n        setTourSelectedFilterId(filterId);\n        setTourActiveFilterName(filterName);\n        if (filterId) {\n            loadTours(filterId);\n        } else {\n            resetTourFilterConditions();\n        }\n    };\n    \n    const handleTourSort = (key: TourSortConfig['key']) => {\n        if (viewMode === 'table') {\n            setTourTableSortConfig(current => ({\n                key,\n                direction: current.key === key && current.direction === 'asc' ? 'desc' : 'asc'\n            }));\n        }\n    };\n    \n    // Drag & Drop Handler\n    const handleDragStart = (columnId: string) => {\n        setDraggedColumn(columnId);\n    };\n    \n    const handleDragOver = (e: React.DragEvent, columnId: string) => {\n        e.preventDefault();\n        if (draggedColumn && draggedColumn !== columnId) {\n            setDragOverColumn(columnId);\n        }\n    };\n    \n    const handleDrop = (e: React.DragEvent, columnId: string) => {\n        e.preventDefault();\n            if (draggedColumn && draggedColumn !== columnId) {\n                const columnOrder = settings?.columnOrder || defaultTourColumnOrder;\n                const dragIndex = columnOrder.indexOf(draggedColumn);\n                const hoverIndex = columnOrder.indexOf(columnId);\n\n                if (dragIndex > -1 && hoverIndex > -1) {\n                    const newColumnOrder = [...columnOrder];\n                const draggedColumn_ = newColumnOrder[dragIndex];\n                newColumnOrder.splice(dragIndex, 1);\n                newColumnOrder.splice(hoverIndex, 0, draggedColumn_);\n                updateColumnOrder(newColumnOrder);\n            }\n        }\n        setDraggedColumn(null);\n        setDragOverColumn(null);\n    };\n    \n    const handleDragEnd = () => {\n        setDraggedColumn(null);\n        setDragOverColumn(null);\n    };\n    \n    // Filtern und sortieren der Spalten gem den Benutzereinstellungen\n    const completeColumnOrder = useMemo(() => {\n        const currentOrder = settings?.columnOrder || [];\n        const validOrder = currentOrder.filter(id => id != null && typeof id === 'string');\n        const missingColumns = defaultTourColumnOrder.filter(id => !validOrder.includes(id));\n        return [...validOrder, ...missingColumns];\n    }, [settings?.columnOrder]);\n    \n    const visibleColumnIds = completeColumnOrder.filter(id => id != null && typeof id === 'string' && isColumnVisible(id));\n    \n    const getActiveFilterCount = () => {\n        return tourFilterConditions.length;\n    };\n    \n    // Filter- und Sortierlogik fr Tours\n    const filteredAndSortedTours = useMemo(() => {\n        // Sicherstellen, dass tours ein Array ist\n        if (!Array.isArray(tours)) {\n            return [];\n        }\n        \n        const validTours = tours.filter(tour => tour != null && tour.title != null && typeof tour.title === 'string');\n        \n        let filtered = validTours.filter(tour => {\n            // Such-Filter\n            if (tourSearchTerm) {\n                const searchLower = tourSearchTerm.toLowerCase();\n                const matchesSearch = \n                    (tour.title && tour.title.toLowerCase().includes(searchLower)) ||\n                    (tour.description && tour.description.toLowerCase().includes(searchLower)) ||\n                    (tour.location && tour.location.toLowerCase().includes(searchLower));\n                \n                if (!matchesSearch) return false;\n            }\n            \n            return true;\n        });\n\n        // Erweiterte Filterbedingungen anwenden\n        if (tourFilterConditions.length > 0) {\n            const columnEvaluators: any = {\n                'title': (tour: Tour, cond: FilterCondition) => {\n                    if (!tour || !tour.title) return false;\n                    const value = (cond.value as string || '').toLowerCase();\n                    const title = (tour.title || '').toLowerCase();\n                    if (cond.operator === 'equals') return tour.title === cond.value;\n                    if (cond.operator === 'contains') return title.includes(value);\n                    if (cond.operator === 'startsWith') return title.startsWith(value);\n                    if (cond.operator === 'endsWith') return title.endsWith(value);\n                    return null;\n                },\n                'type': (tour: Tour, cond: FilterCondition) => {\n                    if (!tour || !tour.type) return false;\n                    if (cond.operator === 'equals') return tour.type === cond.value;\n                    if (cond.operator === 'notEquals') return tour.type !== cond.value;\n                    return null;\n                },\n                'isActive': (tour: Tour, cond: FilterCondition) => {\n                    const value = cond.value === 'true' || cond.value === true || cond.value === '1';\n                    if (cond.operator === 'equals') return tour.isActive === value;\n                    if (cond.operator === 'notEquals') return tour.isActive !== value;\n                    return null;\n                },\n                'price': (tour: Tour, cond: FilterCondition) => {\n                    const price = typeof tour.price === 'string' ? parseFloat(tour.price) : (tour.price || 0);\n                    const compareValue = typeof cond.value === 'string' ? parseFloat(cond.value) : (cond.value || 0);\n                    if (isNaN(price) || isNaN(compareValue)) return false;\n                    if (cond.operator === 'equals') return Math.abs(price - compareValue) < 0.01;\n                    if (cond.operator === 'greaterThan') return price > compareValue;\n                    if (cond.operator === 'lessThan') return price < compareValue;\n                    return null;\n                },\n                'location': (tour: Tour, cond: FilterCondition) => {\n                    const value = (cond.value as string || '').toLowerCase();\n                    const location = (tour.location || '').toLowerCase();\n                    if (cond.operator === 'equals') return tour.location === cond.value;\n                    if (cond.operator === 'contains') return location.includes(value);\n                    if (cond.operator === 'startsWith') return location.startsWith(value);\n                    if (cond.operator === 'endsWith') return location.endsWith(value);\n                    return null;\n                },\n                'branch': (tour: Tour, cond: FilterCondition) => {\n                    const branchName = (tour.branch?.name || '').toLowerCase();\n                    const value = (cond.value as string || '').toLowerCase();\n                    if (cond.operator === 'equals') return branchName === value;\n                    if (cond.operator === 'contains') return branchName.includes(value);\n                    return null;\n                },\n                'createdBy': (tour: Tour, cond: FilterCondition) => {\n                    const createdByName = tour.createdBy\n                        ? `${tour.createdBy.firstName} ${tour.createdBy.lastName}`\n                        : '';\n                    return evaluateUserRoleCondition(\n                        tour.createdById || null,\n                        null,\n                        cond,\n                        createdByName\n                    );\n                }\n            };\n\n            const getFieldValue = (tour: Tour | null, columnId: string): any => {\n                if (!tour) return '';\n                switch (columnId) {\n                    case 'title': return tour.title || '';\n                    case 'type': return tour.type || '';\n                    case 'price': return typeof tour.price === 'string' ? parseFloat(tour.price) : (tour.price || 0);\n                    case 'location': return tour.location || '';\n                    case 'duration': return tour.duration || 0;\n                    case 'branch': return tour.branch?.name || '';\n                    case 'createdBy': return tour.createdBy ? `${tour.createdBy.firstName} ${tour.createdBy.lastName}` : '';\n                    case 'isActive': return tour.isActive;\n                    default: return '';\n                }\n            };\n\n            filtered = applyFilters(\n                filtered,\n                tourFilterConditions,\n                tourFilterLogicalOperators,\n                getFieldValue,\n                columnEvaluators\n            );\n        }\n        \n        // Hilfsfunktion zum Extrahieren von Werten fr Sortierung\n        const getTourSortValue = (tour: Tour | null, columnId: string): any => {\n            if (!tour) return '';\n            switch (columnId) {\n                case 'title':\n                    return (tour.title || '').toLowerCase();\n                case 'type':\n                    return (tour.type || '').toLowerCase();\n                case 'price':\n                    return typeof tour.price === 'string' ? parseFloat(tour.price) : (tour.price || 0);\n                case 'location':\n                    return (tour.location || '').toLowerCase();\n                case 'duration':\n                    return tour.duration || 0;\n                case 'branch':\n                    return (tour.branch?.name || '').toLowerCase();\n                case 'createdBy':\n                    return tour.createdBy ? `${tour.createdBy.firstName} ${tour.createdBy.lastName}`.toLowerCase() : '';\n                case 'isActive':\n                    return tour.isActive ? 1 : 0;\n                default:\n                    return '';\n            }\n        };\n        \n        // Sortierung basierend auf Prioritten\n        const sorted = filtered.sort((a, b) => {\n            // Null-Check fr a und b\n            if (!a || !b) {\n                if (!a && !b) return 0;\n                if (!a) return 1;\n                if (!b) return -1;\n            }\n            \n            // 1. Prioritt: Filter-Sortierung (hchste Prioritt)\n            if (tourFilterSortDirections.length > 0) {\n                for (const sortDir of tourFilterSortDirections.sort((x, y) => x.priority - y.priority)) {\n                    const valueA = getTourSortValue(a, sortDir.column);\n                    const valueB = getTourSortValue(b, sortDir.column);\n                    \n                    let comparison = 0;\n                    if (typeof valueA === 'number' && typeof valueB === 'number') {\n                        comparison = valueA - valueB;\n                    } else {\n                        comparison = String(valueA).localeCompare(String(valueB));\n                    }\n                    \n                    if (sortDir.direction === 'desc') {\n                        comparison = -comparison;\n                    }\n                    \n                    if (comparison !== 0) {\n                        return comparison;\n                    }\n                }\n                return 0;\n            }\n            \n            // 2. Prioritt: Table-Header-Sortierung (temporre berschreibung, auch wenn Filter aktiv)\n            if (viewMode === 'table' && tourTableSortConfig.key) {\n                const valueA = getTourSortValue(a, tourTableSortConfig.key);\n                const valueB = getTourSortValue(b, tourTableSortConfig.key);\n                \n                let comparison = 0;\n                if (typeof valueA === 'number' && typeof valueB === 'number') {\n                    comparison = valueA - valueB;\n                } else {\n                    comparison = String(valueA).localeCompare(String(valueB));\n                }\n                \n                if (comparison !== 0) {\n                    return tourTableSortConfig.direction === 'asc' ? comparison : -comparison;\n                }\n            }\n            \n            // 3. Prioritt: Cards-Mode Multi-Sortierung (wenn kein Filter aktiv, Cards-Mode)\n            if (viewMode === 'cards' && tourFilterConditions.length === 0) {\n                const sortableColumns = ['title', 'type', 'price', 'location', 'duration', 'branch', 'createdBy', 'isActive'];\n                \n                for (const columnId of sortableColumns) {\n                    const direction = tourCardSortDirections[columnId] || 'asc';\n                    const valueA = getTourSortValue(a, columnId);\n                    const valueB = getTourSortValue(b, columnId);\n                    \n                    let comparison = 0;\n                    if (typeof valueA === 'number' && typeof valueB === 'number') {\n                        comparison = valueA - valueB;\n                    } else {\n                        comparison = String(valueA).localeCompare(String(valueB));\n                    }\n                    \n                    if (direction === 'desc') {\n                        comparison = -comparison;\n                    }\n                    \n                    if (comparison !== 0) {\n                        return comparison;\n                    }\n                }\n                return 0;\n            }\n            \n            // 4. Fallback: Titel (alphabetisch)\n            const titleA = (a?.title || '').toLowerCase();\n            const titleB = (b?.title || '').toLowerCase();\n            return titleA.localeCompare(titleB);\n        });\n        \n        return sorted;\n    }, [tours, tourSearchTerm, tourFilterConditions, tourFilterLogicalOperators, tourFilterSortDirections, viewMode, tourTableSortConfig, tourCardSortDirections]);\n\n    return (\n        <div className=\"space-y-4\">\n            {/* Header mit Suche, View-Toggle, Filter, Export, Create */}\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n                {/* Linke Seite: Suche */}\n                <div className=\"flex-1 w-full sm:max-w-md\">\n                    <input\n                        type=\"text\"\n                        placeholder={t('common.search') + '...'}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n                        value={tourSearchTerm}\n                        onChange={(e) => setTourSearchTerm(e.target.value)}\n                    />\n                </div>\n                \n                {/* Rechte Seite: View-Toggle, Filter, Export, Create */}\n                <div className=\"flex items-center gap-1.5\">\n                    {/* View-Mode Toggle */}\n                    <div className=\"relative group\">\n                        <button\n                            className={`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                                viewMode === 'cards' ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : ''\n                            }`}\n                            onClick={() => updateViewMode(viewMode === 'table' ? 'cards' : 'table')}\n                        >\n                            {viewMode === 'table' ? (\n                                <Squares2X2Icon className=\"h-5 w-5\" />\n                            ) : (\n                                <TableCellsIcon className=\"h-5 w-5\" />\n                            )}\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                            {viewMode === 'table' ? t('common.viewAsCards') : t('common.viewAsTable')}\n                        </div>\n                    </div>\n                    \n                    {/* Filter-Button */}\n                    <div className=\"relative group ml-1\">\n                        <button\n                            className={`p-2 rounded-md ${getActiveFilterCount() > 0 ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'hover:bg-gray-100 dark:hover:bg-gray-700'} relative`}\n                            onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n                        >\n                            <FunnelIcon className=\"h-5 w-5\" />\n                            {getActiveFilterCount() > 0 && (\n                                <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 text-white rounded-full text-xs flex items-center justify-center\">\n                                    {getActiveFilterCount()}\n                                </span>\n                            )}\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                            {t('common.filter')}\n                        </div>\n                    </div>\n                    \n                    {/* Export-Button */}\n                    {hasPermission('tour_edit', 'write', 'button') && (\n                        <div className=\"relative group\">\n                            <button\n                                onClick={() => setIsTourExportDialogOpen(true)}\n                                className=\"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700\"\n                            >\n                                <ArrowDownTrayIcon className=\"h-5 w-5\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('tours.export', 'Exportieren')}\n                            </div>\n                        </div>\n                    )}\n                    \n                    {/* Spalten-Konfiguration */}\n                    <div className=\"ml-1\">\n                        <TableColumnConfig\n                            columns={viewMode === 'cards'\n                                ? [\n                                    { id: 'title', label: t('tours.columns.title', 'Titel') },\n                                    { id: 'type', label: t('tours.columns.type', 'Typ') },\n                                    { id: 'price', label: t('tours.columns.price', 'Preis') },\n                                    { id: 'location', label: t('tours.columns.location', 'Ort') },\n                                    { id: 'duration', label: t('tours.columns.duration', 'Dauer') },\n                                    { id: 'branch', label: t('tours.columns.branch', 'Niederlassung') },\n                                    { id: 'createdBy', label: t('tours.columns.createdBy', 'Erstellt von') },\n                                    { id: 'isActive', label: t('tours.columns.status', 'Status') }\n                                ]\n                                : availableTourColumns}\n                            visibleColumns={viewMode === 'cards'\n                                ? Array.from(visibleCardMetadata)\n                                : visibleColumnIds}\n                            columnOrder={viewMode === 'cards'\n                                ? cardMetadataOrder\n                                : settings.columnOrder}\n                            onToggleColumnVisibility={(columnId) => {\n                                if (viewMode === 'cards') {\n                                    const tableColumn = tourCardToTableMapping[columnId];\n                                    if (tableColumn) {\n                                        toggleColumnVisibility(tableColumn);\n                                    }\n                                } else {\n                                    toggleColumnVisibility(columnId);\n                                }\n                            }}\n                            onColumnOrderChange={(newOrder) => {\n                                if (viewMode === 'cards') {\n                                    const newTableOrder = newOrder.map(cardMeta => tourCardToTableMapping[cardMeta] || cardMeta).filter(Boolean);\n                                    updateColumnOrder(newTableOrder);\n                                } else {\n                                    updateColumnOrder(newOrder);\n                                }\n                            }}\n                            modalTitle={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n                            sortDirections={viewMode === 'cards' ? tourCardSortDirections : undefined}\n                            onSortDirectionChange={viewMode === 'cards' ? handleTourCardSortDirectionChange : undefined}\n                            showSortDirection={viewMode === 'cards'}\n                            onClose={() => {}}\n                        />\n                    </div>\n                    \n                    {/* Create-Button */}\n                    {hasPermission('tour_create', 'write', 'button') && (\n                        <div className=\"relative group\">\n                            <button\n                                onClick={() => setIsCreateTourModalOpen(true)}\n                                className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                                style={{ width: '30.19px', height: '30.19px' }}\n                                aria-label={t('tours.create', 'Neue Tour erstellen')}\n                            >\n                                <PlusIcon className=\"h-4 w-4\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('tours.create', 'Neue Tour erstellen')}\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            {/* Filter-Pane */}\n            {isFilterModalOpen && (\n                <div className=\"px-3 sm:px-4 md:px-6\">\n                    <FilterPane\n                        columns={[...availableTourColumns, ...tourFilterOnlyColumns]}\n                        onApply={applyTourFilterConditions}\n                        onReset={resetTourFilterConditions}\n                        savedConditions={tourFilterConditions}\n                        savedOperators={tourFilterLogicalOperators}\n                        savedSortDirections={tourFilterSortDirections}\n                        onSortDirectionsChange={setTourFilterSortDirections}\n                        tableId={TOURS_TABLE_ID}\n                    />\n                </div>\n            )}\n\n            {/* Gespeicherte Filter als Tags */}\n            <SavedFilterTags\n                tableId={TOURS_TABLE_ID}\n                onSelectFilter={applyTourFilterConditions}\n                onReset={resetTourFilterConditions}\n                activeFilterName={tourActiveFilterName}\n                selectedFilterId={tourSelectedFilterId}\n                onFilterChange={handleTourFilterChange}\n                defaultFilterName={t('tours.filters.current', 'Aktuell')}\n            />\n\n            {/* Table View */}\n            {viewMode === 'table' && (\n                <div className=\"overflow-x-auto -mx-3 sm:-mx-4 md:-mx-6\">\n                    <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n                        <thead className=\"bg-gray-50 dark:bg-gray-800\">\n                            <tr>\n                                {visibleColumnIds.map(columnId => {\n                                    const column = availableTourColumns.find(col => col.id === columnId);\n                                    if (!column) return null;\n                                    \n                                    return (\n                                        <th\n                                            key={columnId}\n                                            scope=\"col\"\n                                            className={`px-3 sm:px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${columnId === dragOverColumn ? 'bg-blue-100 dark:bg-blue-800' : ''}`}\n                                            draggable={true}\n                                            onDragStart={() => handleDragStart(columnId)}\n                                            onDragOver={(e) => handleDragOver(e, columnId)}\n                                            onDrop={(e) => handleDrop(e, columnId)}\n                                            onDragEnd={handleDragEnd}\n                                        >\n                                            <div className=\"flex items-center\">\n                                                {window.innerWidth <= 640 ? column.shortLabel : column.label}\n                                                {columnId !== 'actions' && (\n                                                    <button \n                                                        onClick={() => handleTourSort(columnId as TourSortConfig['key'])}\n                                                        className=\"ml-1 focus:outline-none\"\n                                                    >\n                                                        <ArrowsUpDownIcon className=\"h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                                                    </button>\n                                                )}\n                                            </div>\n                                        </th>\n                                    );\n                                })}\n                            </tr>\n                        </thead>\n                        <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                            {toursLoading ? (\n                                <tr>\n                                    <td colSpan={visibleColumnIds.length} className=\"px-3 sm:px-4 md:px-6 py-8 text-center text-gray-500 dark:text-gray-400\">\n                                        {t('common.loading')}\n                                    </td>\n                                </tr>\n                            ) : toursError ? (\n                                <tr>\n                                    <td colSpan={visibleColumnIds.length} className=\"px-3 sm:px-4 md:px-6 py-8 text-center text-red-500 dark:text-red-400\">\n                                        {toursError}\n                                    </td>\n                                </tr>\n                            ) : filteredAndSortedTours.length === 0 ? (\n                                <tr>\n                                    <td colSpan={visibleColumnIds.length} className=\"px-3 sm:px-4 md:px-6 py-8 text-center text-gray-500 dark:text-gray-400\">\n                                        {t('tours.noTours')}\n                                    </td>\n                                </tr>\n                            ) : (\n                                <>\n                                    {filteredAndSortedTours.slice(0, displayLimit).filter(tour => tour != null && tour.title != null).map(tour => (\n                                        <tr \n                                            key={tour.id} \n                                            className=\"hover:bg-gray-50 dark:hover:bg-gray-700\"\n                                        >\n                                            {visibleColumnIds.map(columnId => {\n                                                switch (columnId) {\n                                                    case 'title':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4\">\n                                                                <div className=\"text-sm text-gray-900 dark:text-gray-200 break-words\">\n                                                                    {tour?.title || '-'}\n                                                                </div>\n                                                            </td>\n                                                        );\n                                                    case 'type':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                                                    {tour.type === TourType.OWN ? t('tours.typeOwn') : t('tours.typeExternal')}\n                                                                </div>\n                                                            </td>\n                                                        );\n                                                    case 'price':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                                                    {tour.price ? `${Number(tour.price).toLocaleString()} ${tour.currency || 'COP'}` : '-'}\n                                                                </div>\n                                                            </td>\n                                                        );\n                                                    case 'location':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                                                    {tour.location || '-'}\n                                                                </div>\n                                                            </td>\n                                                        );\n                                                    case 'duration':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                                                    {tour.duration ? `${tour.duration} ${t('common.hours', 'h')}` : '-'}\n                                                                </div>\n                                                            </td>\n                                                        );\n                                                    case 'branch':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                                                    {tour.branch?.name || '-'}\n                                                                </div>\n                                                            </td>\n                                                        );\n                                                    case 'createdBy':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                                                    {tour.createdBy ? `${tour.createdBy.firstName} ${tour.createdBy.lastName}` : '-'}\n                                                                </div>\n                                                            </td>\n                                                        );\n                                                    case 'isActive':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                {hasPermission('tour_edit', 'write', 'button') ? (\n                                                                    <button\n                                                                        onClick={async (e) => {\n                                                                            e.stopPropagation();\n                                                                            try {\n                                                                                await axiosInstance.put(API_ENDPOINTS.TOURS.TOGGLE_ACTIVE(tour.id));\n                                                                                showMessage(\n                                                                                    tour.isActive \n                                                                                        ? t('tours.deactivated', { defaultValue: 'Tour deaktiviert' })\n                                                                                        : t('tours.activated', { defaultValue: 'Tour aktiviert' }),\n                                                                                    'success'\n                                                                                );\n                                                                                await loadTours();\n                                                                            } catch (err: any) {\n                                                                                console.error('Fehler beim Toggle der Tour:', err);\n                                                                                showMessage(\n                                                                                    err.response?.data?.message || t('errors.unknownError'),\n                                                                                    'error'\n                                                                                );\n                                                                            }\n                                                                        }}\n                                                                        className={`px-2 py-1 text-xs rounded transition-colors ${\n                                                                            tour.isActive \n                                                                                ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 hover:bg-green-200 dark:hover:bg-green-800' \n                                                                                : 'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700'\n                                                                        }`}\n                                                                    >\n                                                                        {tour.isActive ? t('tours.statusActive') : t('tours.statusInactive')}\n                                                                    </button>\n                                                                ) : (\n                                                                    <span className={`px-2 py-1 text-xs rounded ${\n                                                                        tour.isActive \n                                                                            ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' \n                                                                            : 'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200'\n                                                                    }`}>\n                                                                        {tour.isActive ? t('tours.statusActive') : t('tours.statusInactive')}\n                                                                    </span>\n                                                                )}\n                                                            </td>\n                                                        );\n                                                    case 'actions':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                <div className=\"flex space-x-2 action-buttons\">\n                                                                    <div className=\"relative group\">\n                                                                        <button\n                                                                            onClick={(e) => {\n                                                                                e.stopPropagation();\n                                                                                setSelectedTourId(tour.id);\n                                                                                setIsTourDetailsModalOpen(true);\n                                                                            }}\n                                                                            className=\"p-1.5 text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                                        >\n                                                                            <InformationCircleIcon className=\"h-4 w-4\" />\n                                                                        </button>\n                                                                        <div className=\"absolute right-full mr-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                                                            {t('common.viewDetails', 'Details anzeigen')}\n                                                                        </div>\n                                                                    </div>\n                                                                    {hasPermission('tour_edit', 'write', 'button') && (\n                                                                        <div className=\"relative group\">\n                                                                            <button\n                                                                                onClick={(e) => {\n                                                                                    e.stopPropagation();\n                                                                                    setSelectedTour(tour);\n                                                                                    setIsEditTourModalOpen(true);\n                                                                                }}\n                                                                                className=\"p-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                                                                            >\n                                                                                <PencilIcon className=\"h-4 w-4\" />\n                                                                            </button>\n                                                                            <div className=\"absolute right-full mr-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                                                                {t('tours.edit', 'Bearbeiten')}\n                                                                            </div>\n                                                                        </div>\n                                                                    )}\n                                                                </div>\n                                                            </td>\n                                                        );\n                                                    default:\n                                                        return null;\n                                                }\n                                            })}\n                                        </tr>\n                                    ))}\n                                </>\n                            )}\n                        </tbody>\n                    </table>\n                </div>\n            )}\n\n            {/* Card View */}\n            {viewMode === 'cards' && (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {toursLoading ? (\n                        <div className=\"col-span-full text-center py-8 text-gray-500 dark:text-gray-400\">\n                            {t('common.loading')}\n                        </div>\n                    ) : toursError ? (\n                        <div className=\"col-span-full text-center py-8 text-red-500 dark:text-red-400\">\n                            {toursError}\n                        </div>\n                    ) : filteredAndSortedTours.length === 0 ? (\n                        <div className=\"col-span-full text-center py-8 text-gray-500 dark:text-gray-400\">\n                            {t('tours.noTours')}\n                        </div>\n                    ) : (\n                        filteredAndSortedTours.slice(0, displayLimit).filter(tour => tour != null && tour.title != null).map((tour) => (\n                            <div\n                                key={tour.id}\n                                className=\"bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 p-4 hover:shadow-md transition-shadow\"\n                            >\n                                <div className=\"flex items-start justify-between mb-2\">\n                                    <h4 className=\"text-lg font-semibold dark:text-white\">{tour?.title || '-'}</h4>\n                                    {hasPermission('tour_edit', 'write', 'button') ? (\n                                        <button\n                                            onClick={async () => {\n                                                try {\n                                                    await axiosInstance.put(API_ENDPOINTS.TOURS.TOGGLE_ACTIVE(tour.id));\n                                                    showMessage(\n                                                        tour.isActive \n                                                            ? t('tours.deactivated', { defaultValue: 'Tour deaktiviert' })\n                                                            : t('tours.activated', { defaultValue: 'Tour aktiviert' }),\n                                                        'success'\n                                                    );\n                                                    await loadTours();\n                                                } catch (err: any) {\n                                                    console.error('Fehler beim Toggle der Tour:', err);\n                                                    showMessage(\n                                                        err.response?.data?.message || t('errors.unknownError'),\n                                                        'error'\n                                                    );\n                                                }\n                                            }}\n                                            className={`px-2 py-1 text-xs rounded transition-colors ${\n                                                tour.isActive \n                                                    ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 hover:bg-green-200 dark:hover:bg-green-800' \n                                                    : 'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700'\n                                            }`}\n                                        >\n                                            {tour.isActive ? t('tours.statusActive') : t('tours.statusInactive')}\n                                        </button>\n                                    ) : (\n                                        <span className={`px-2 py-1 text-xs rounded ${\n                                            tour.isActive \n                                                ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' \n                                                : 'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200'\n                                        }`}>\n                                            {tour.isActive ? t('tours.statusActive') : t('tours.statusInactive')}\n                                        </span>\n                                    )}\n                                </div>\n                                \n                                {tour.description && (\n                                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-2\">\n                                        {tour.description}\n                                    </p>\n                                )}\n\n                                <div className=\"flex items-center justify-between mt-4\">\n                                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                                        <span className=\"font-medium\">{t('tours.type')}:</span>{' '}\n                                        {tour.type === TourType.OWN ? t('tours.typeOwn') : t('tours.typeExternal')}\n                                    </div>\n                                    {tour.price && (\n                                        <div className=\"text-sm font-semibold dark:text-white\">\n                                            {Number(tour.price).toLocaleString()} {tour.currency || 'COP'}\n                                        </div>\n                                    )}\n                                </div>\n                                \n                                {hasPermission('tour_edit', 'write', 'button') && (\n                                    <div className=\"mt-4 flex justify-end\">\n                                        <button\n                                            onClick={() => {\n                                                setSelectedTour(tour);\n                                                setIsEditTourModalOpen(true);\n                                            }}\n                                            className=\"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm\"\n                                        >\n                                            {t('tours.edit', 'Bearbeiten')}\n                                        </button>\n                                    </div>\n                                )}\n                            </div>\n                        ))\n                    )}\n                </div>\n            )}\n\n            {/* \"Mehr anzeigen\" Button */}\n            {filteredAndSortedTours.length > displayLimit && (\n                <div className=\"mt-4 flex justify-center\">\n                    <button\n                        className=\"px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-700 border border-blue-300 dark:border-gray-600 rounded-md hover:bg-blue-50 dark:hover:bg-gray-600\"\n                        onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n                    >\n                        {t('common.showMore')} ({filteredAndSortedTours.length - displayLimit} {t('common.remaining')})\n                    </button>\n                </div>\n            )}\n\n            {/* Modals */}\n            <CreateTourModal\n                isOpen={isCreateTourModalOpen}\n                onClose={() => setIsCreateTourModalOpen(false)}\n                onTourCreated={async () => {\n                    await loadTours();\n                }}\n            />\n            \n            {selectedTour && (\n                <EditTourModal\n                    isOpen={isEditTourModalOpen}\n                    onClose={() => {\n                        setIsEditTourModalOpen(false);\n                        setSelectedTour(null);\n                    }}\n                    onTourUpdated={async () => {\n                        await loadTours();\n                        setIsEditTourModalOpen(false);\n                        setSelectedTour(null);\n                    }}\n                    tour={selectedTour}\n                />\n            )}\n            \n            {selectedTourId && (\n                <TourDetailsModal\n                    isOpen={isTourDetailsModalOpen}\n                    onClose={() => {\n                        setIsTourDetailsModalOpen(false);\n                        setSelectedTourId(null);\n                    }}\n                    tourId={selectedTourId}\n                    onTourUpdated={async () => {\n                        await loadTours();\n                    }}\n                />\n            )}\n            \n            <TourExportDialog\n                isOpen={isTourExportDialogOpen}\n                onClose={() => setIsTourExportDialogOpen(false)}\n                tourCount={filteredAndSortedTours.length}\n            />\n        </div>\n    );\n};\n\nexport default ToursTab;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { CreateOrganizationRequest } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\nimport { useAuth } from '../../hooks/useAuth.tsx';\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n}\n\nconst CreateOrganizationModal: React.FC<Props> = ({ isOpen, onClose, onSuccess }) => {\n  const { t } = useTranslation();\n  const [formData, setFormData] = useState<CreateOrganizationRequest>({\n    name: '',\n    displayName: '',\n    domain: ''\n  });\n  const [loading, setLoading] = useState<boolean>(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  const { fetchCurrentUser } = useAuth();\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    \n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    \n    if (!formData.name.trim()) {\n      newErrors.name = t('organization.create.nameRequired');\n    }\n    \n    if (!formData.displayName.trim()) {\n      newErrors.displayName = t('organization.create.displayNameRequired');\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    // Fehler fr dieses Feld lschen\n    if (errors[name]) {\n      setErrors(prev => ({ ...prev, [name]: '' }));\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      showMessage(t('joinRequest.fillRequired'), 'error');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      await organizationService.createOrganization(formData);\n      setErrors({});\n      showMessage(t('organization.create.createSuccess'), 'success');\n      \n      // WICHTIG: User und Berechtigungen neu laden nach Erstellen der Organisation\n      // Der User wurde der Admin-Rolle zugeordnet und hat jetzt neue Berechtigungen\n      await fetchCurrentUser();\n      \n      // Formular zurcksetzen\n      setFormData({\n        name: '',\n        displayName: '',\n        domain: ''\n      });\n      onClose();\n      if (onSuccess) {\n        onSuccess();\n      }\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('organization.create.createError');\n      showMessage(errorMessage, 'error');\n      setErrors({ submit: errorMessage });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    // Formular zurcksetzen\n    setFormData({\n      name: '',\n      displayName: '',\n      domain: ''\n    });\n    setErrors({});\n    onClose();\n  };\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('organization.create.title')}\n              </Dialog.Title>\n              <button\n                onClick={handleClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-4\">\n              {errors.submit && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {errors.submit}\n                </div>\n              )}\n\n              <div className=\"space-y-4\">\n                <div>\n                  <label \n                    htmlFor=\"name\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.create.name')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"name\"\n                    name=\"name\"\n                    value={formData.name}\n                    onChange={handleChange}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.name \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  />\n                  {errors.name && (\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.name}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"displayName\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.create.displayName')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"displayName\"\n                    name=\"displayName\"\n                    value={formData.displayName}\n                    onChange={handleChange}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.displayName \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  />\n                  {errors.displayName && (\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"domain\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.create.domain')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"domain\"\n                    name=\"domain\"\n                    value={formData.domain}\n                    onChange={handleChange}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                  title={t('joinRequest.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title={loading ? t('organization.create.creating') : t('organization.create.createButton')}\n                >\n                  {loading ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={handleClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('organization.create.title')}\n          </h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {errors.submit && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {errors.submit}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label \n                htmlFor=\"name\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.create.name')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleChange}\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                  errors.name \n                    ? 'border-red-300 dark:border-red-600' \n                    : 'border-gray-300 dark:border-gray-600'\n                }`}\n              />\n              {errors.name && (\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.name}</p>\n              )}\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"displayName\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.create.displayName')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"displayName\"\n                name=\"displayName\"\n                value={formData.displayName}\n                onChange={handleChange}\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                  errors.displayName \n                    ? 'border-red-300 dark:border-red-600' \n                    : 'border-gray-300 dark:border-gray-600'\n                }`}\n              />\n              {errors.displayName && (\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\n              )}\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"domain\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.create.domain')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"domain\"\n                name=\"domain\"\n                value={formData.domain}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"flex justify-end pt-4 gap-2\">\n              <button\n                type=\"button\"\n                onClick={handleClose}\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                title={t('common.cancel')}\n              >\n                <XMarkIcon className=\"h-5 w-5\" />\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                title={loading ? t('organization.create.creating') : t('organization.create.createButton')}\n              >\n                {loading ? (\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                ) : (\n                  <CheckIcon className=\"h-5 w-5\" />\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default CreateOrganizationModal; ","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { CreateJoinRequestRequest, Organization } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n}\n\nconst JoinOrganizationModal: React.FC<Props> = ({ isOpen, onClose, onSuccess }) => {\n  const { t } = useTranslation();\n  const [formData, setFormData] = useState<CreateJoinRequestRequest>({\n    organizationName: '',\n    message: ''\n  });\n  const [loading, setLoading] = useState<boolean>(false);\n  const [searching, setSearching] = useState<boolean>(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [organizations, setOrganizations] = useState<Organization[]>([]);\n  const [showDropdown, setShowDropdown] = useState<boolean>(false);\n  const [selectedOrganization, setSelectedOrganization] = useState<Organization | null>(null);\n  const searchTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const { showMessage } = useMessage();\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    \n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  // Click outside handler fr Dropdown\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setShowDropdown(false);\n      }\n    };\n\n    if (showDropdown) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showDropdown]);\n\n  const searchOrganizations = async (searchTerm: string) => {\n    if (searchTerm.length < 2) {\n      setOrganizations([]);\n      setShowDropdown(false);\n      return;\n    }\n\n    try {\n      setSearching(true);\n      const results = await organizationService.searchOrganizations(searchTerm);\n      setOrganizations(results);\n      setShowDropdown(true);\n    } catch (err: any) {\n      console.error('Fehler bei der Organisationen-Suche:', err);\n      setOrganizations([]);\n    } finally {\n      setSearching(false);\n    }\n  };\n\n  const handleOrganizationInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setFormData(prev => ({ ...prev, organizationName: value }));\n    setSelectedOrganization(null);\n    \n    // Fehler lschen\n    if (errors.organizationName) {\n      setErrors(prev => ({ ...prev, organizationName: '' }));\n    }\n\n    // Debounce fr Suche\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n\n    searchTimeoutRef.current = setTimeout(() => {\n      searchOrganizations(value);\n    }, 300);\n  };\n\n  const handleSelectOrganization = (org: Organization) => {\n    setSelectedOrganization(org);\n    setFormData(prev => ({ ...prev, organizationName: org.name }));\n    setShowDropdown(false);\n    setOrganizations([]);\n  };\n\n  const handleMessageChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setFormData(prev => ({ ...prev, message: e.target.value }));\n    if (errors.message) {\n      setErrors(prev => ({ ...prev, message: '' }));\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    \n    if (!formData.organizationName.trim()) {\n      newErrors.organizationName = t('organization.join.nameRequired');\n    } else if (!selectedOrganization) {\n      newErrors.organizationName = t('organization.join.selectFromList');\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      showMessage(t('joinRequest.fillRequired'), 'error');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      await organizationService.createJoinRequest(formData);\n      setErrors({});\n      showMessage(t('organization.join.sendSuccess'), 'success');\n      // Formular zurcksetzen\n      setFormData({\n        organizationName: '',\n        message: ''\n      });\n      setSelectedOrganization(null);\n      setOrganizations([]);\n      onClose();\n      if (onSuccess) {\n        onSuccess();\n      }\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('organization.join.sendError');\n      showMessage(errorMessage, 'error');\n      setErrors({ submit: errorMessage });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    // Formular zurcksetzen\n    setFormData({\n      organizationName: '',\n      message: ''\n    });\n    setSelectedOrganization(null);\n    setOrganizations([]);\n    setErrors({});\n    setShowDropdown(false);\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n    onClose();\n  };\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('organization.join.title')}\n              </Dialog.Title>\n              <button\n                onClick={handleClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-4\">\n              {errors.submit && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {errors.submit}\n                </div>\n              )}\n\n              <div className=\"space-y-4\">\n                <div className=\"relative\" ref={dropdownRef}>\n                  <label \n                    htmlFor=\"organizationName\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.join.search')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"organizationName\"\n                    name=\"organizationName\"\n                    value={formData.organizationName}\n                    onChange={handleOrganizationInputChange}\n                    placeholder={t('organization.join.searchPlaceholder')}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.organizationName \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  />\n                  {errors.organizationName && (\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.organizationName}</p>\n                  )}\n                  \n                  {/* Autocomplete Dropdown */}\n                  {showDropdown && (organizations.length > 0 || searching) && (\n                    <div className=\"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto\">\n                      {searching ? (\n                        <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\n                          {t('organization.join.searching')}\n                        </div>\n                      ) : organizations.length > 0 ? (\n                        organizations.map(org => (\n                          <button\n                            key={org.id}\n                            type=\"button\"\n                            onClick={() => handleSelectOrganization(org)}\n                            className=\"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 focus:bg-gray-100 dark:focus:bg-gray-700 focus:outline-none\"\n                          >\n                            <div className=\"font-medium text-gray-900 dark:text-white\">\n                              {org.displayName || org.name}\n                            </div>\n                            {org.displayName && (\n                              <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                                {org.name}\n                              </div>\n                            )}\n                          </button>\n                        ))\n                      ) : (\n                        <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\n                          {t('organization.join.noOrganizations')}\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"message\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.join.message')}\n                  </label>\n                  <textarea\n                    id=\"message\"\n                    name=\"message\"\n                    value={formData.message || ''}\n                    onChange={handleMessageChange}\n                    rows={3}\n                    placeholder={t('organization.join.messagePlaceholder')}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                  title={t('joinRequest.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title={loading ? t('organization.join.sending') : t('organization.join.send')}\n                >\n                  {loading ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={handleClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('organization.join.title')}\n          </h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {errors.submit && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {errors.submit}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"relative\" ref={dropdownRef}>\n              <label \n                htmlFor=\"organizationName\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.join.search')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"organizationName\"\n                name=\"organizationName\"\n                value={formData.organizationName}\n                onChange={handleOrganizationInputChange}\n                placeholder={t('organization.join.searchPlaceholder')}\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                  errors.organizationName \n                    ? 'border-red-300 dark:border-red-600' \n                    : 'border-gray-300 dark:border-gray-600'\n                }`}\n              />\n              {errors.organizationName && (\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.organizationName}</p>\n              )}\n              \n              {/* Autocomplete Dropdown */}\n              {showDropdown && (organizations.length > 0 || searching) && (\n                <div className=\"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto\">\n                  {searching ? (\n                    <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\n                      {t('organization.join.searching')}\n                    </div>\n                  ) : organizations.length > 0 ? (\n                    organizations.map(org => (\n                      <button\n                        key={org.id}\n                        type=\"button\"\n                        onClick={() => handleSelectOrganization(org)}\n                        className=\"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 focus:bg-gray-100 dark:focus:bg-gray-700 focus:outline-none\"\n                      >\n                        <div className=\"font-medium text-gray-900 dark:text-white\">\n                          {org.displayName || org.name}\n                        </div>\n                        {org.displayName && (\n                          <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                            {org.name}\n                          </div>\n                        )}\n                      </button>\n                    ))\n                  ) : (\n                    <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\n                      {t('organization.join.noOrganizations')}\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"message\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.join.message')}\n              </label>\n              <textarea\n                id=\"message\"\n                name=\"message\"\n                value={formData.message || ''}\n                onChange={handleMessageChange}\n                rows={3}\n                placeholder={t('organization.join.messagePlaceholder')}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"flex justify-end pt-4 gap-2\">\n              <button\n                type=\"button\"\n                onClick={handleClose}\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                title={t('common.cancel')}\n              >\n                <XMarkIcon className=\"h-5 w-5\" />\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                title={loading ? t('organization.join.sending') : t('organization.join.send')}\n              >\n                {loading ? (\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                ) : (\n                  <CheckIcon className=\"h-5 w-5\" />\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default JoinOrganizationModal; ","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../../config/axios.ts';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport { roleApi } from '../../api/apiClient.ts';\nimport { Role } from '../../types/interfaces.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\n\ninterface Organization {\n  id: number;\n  displayName?: string;\n  name?: string;\n  settings?: any;\n}\n\ninterface RoleConfigurationTabProps {\n  organization: Organization | null;\n  onSave?: () => void;\n}\n\nconst RoleConfigurationTab: React.FC<RoleConfigurationTabProps> = ({\n  organization,\n  onSave\n}) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [lifecycleRoles, setLifecycleRoles] = useState<{\n    adminRoleId?: number | null;\n    hrRoleId?: number | null;\n    legalRoleId?: number | null;\n    employeeRoleIds?: number[];\n  }>({});\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [loadingRoles, setLoadingRoles] = useState(false);\n\n  useEffect(() => {\n    if (organization) {\n      loadRoles();\n      loadLifecycleRoles();\n    }\n  }, [organization]);\n\n  const loadRoles = async () => {\n    setLoadingRoles(true);\n    try {\n      const response = await roleApi.getAll();\n      if (response.data && Array.isArray(response.data)) {\n        setRoles(response.data);\n      }\n    } catch (error) {\n      console.error('Fehler beim Laden der Rollen:', error);\n      showMessage(\n        t('lifecycle.loadRolesError', { defaultValue: 'Fehler beim Laden der Rollen' }),\n        'error'\n      );\n    } finally {\n      setLoadingRoles(false);\n    }\n  };\n\n  const loadLifecycleRoles = async () => {\n    setLoading(true);\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.LIFECYCLE_ROLES);\n      setLifecycleRoles(response.data.lifecycleRoles || {});\n    } catch (error: any) {\n      console.error('Fehler beim Laden der Lebenszyklus-Rollen:', error);\n      // Wenn 404, dann gibt es noch keine Konfiguration - das ist OK\n      if (error.response?.status !== 404) {\n        showMessage(\n          error.response?.data?.message || t('lifecycle.loadLifecycleRolesError', { defaultValue: 'Fehler beim Laden der Konfiguration' }),\n          'error'\n        );\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      // Konvertiere zu Number oder null (verhindert, dass 0 oder undefined als String gesendet wird)\n      const prepareRoleId = (id: number | null | undefined): number | null => {\n        if (id === null || id === undefined || id === 0) {\n          return null;\n        }\n        return Number(id);\n      };\n\n      await axiosInstance.put(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.LIFECYCLE_ROLES, {\n        adminRoleId: prepareRoleId(lifecycleRoles.adminRoleId),\n        hrRoleId: prepareRoleId(lifecycleRoles.hrRoleId),\n        legalRoleId: prepareRoleId(lifecycleRoles.legalRoleId),\n        employeeRoleIds: (lifecycleRoles.employeeRoleIds || []).map(prepareRoleId).filter((id): id is number => id !== null)\n      });\n      showMessage(\n        t('lifecycle.rolesSaved', { defaultValue: 'Rollen-Konfiguration erfolgreich gespeichert' }),\n        'success'\n      );\n      if (onSave) {\n        onSave();\n      }\n    } catch (error: any) {\n      console.error('Fehler beim Speichern:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.saveError', { defaultValue: 'Fehler beim Speichern' }),\n        'error'\n      );\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleAssignStandardRoles = () => {\n    // Finde Standard-Rollen\n    const adminRole = roles.find(r => r.name.toLowerCase().includes('admin') || r.name.toLowerCase().includes('administrator'));\n    const hrRole = roles.find(r => r.name.toLowerCase().includes('hr') || r.name.toLowerCase().includes('human'));\n    const legalRole = roles.find(r => r.name.toLowerCase() === 'derecho' || r.name.toLowerCase().includes('legal'));\n\n    setLifecycleRoles({\n      ...lifecycleRoles,\n      adminRoleId: adminRole?.id || null,\n      hrRoleId: hrRole?.id || null,\n      legalRoleId: legalRole?.id || null\n    });\n\n    showMessage(\n      t('lifecycle.standardRolesAssigned', { defaultValue: 'Standard-Rollen zugewiesen' }),\n      'success'\n    );\n  };\n\n  if (loading && !lifecycleRoles) {\n    return (\n      <div className=\"flex items-center justify-center py-8\">\n        <ArrowPathIcon className=\"h-6 w-6 animate-spin text-gray-400\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold dark:text-white\">\n            {t('organization.lifecycleRoles.title', { defaultValue: 'Lebenszyklus-Rollen' })}\n          </h3>\n          <button\n            onClick={handleAssignStandardRoles}\n            className=\"px-3 py-1.5 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors\"\n          >\n            {t('lifecycle.assignStandardRoles', { defaultValue: 'Standard-Rollen zuweisen' })}\n          </button>\n        </div>\n        \n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              {t('organization.lifecycleRoles.admin', { defaultValue: 'Admin-Rolle' })}\n            </label>\n            <select\n              value={lifecycleRoles.adminRoleId || ''}\n              onChange={(e) => {\n                const value = e.target.value;\n                setLifecycleRoles({ \n                ...lifecycleRoles, \n                  adminRoleId: (value && value !== '' && !isNaN(parseInt(value, 10))) ? parseInt(value, 10) : null \n                });\n              }}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              disabled={loadingRoles}\n            >\n              <option value=\"\">{t('common.pleaseSelect')}</option>\n              {roles.map(role => (\n                <option key={role.id} value={role.id}>\n                  {role.name}\n                </option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              {t('organization.lifecycleRoles.hr', { defaultValue: 'HR-Rolle' })}\n            </label>\n            <select\n              value={lifecycleRoles.hrRoleId || ''}\n              onChange={(e) => {\n                const value = e.target.value;\n                setLifecycleRoles({ \n                ...lifecycleRoles, \n                  hrRoleId: (value && value !== '' && !isNaN(parseInt(value, 10))) ? parseInt(value, 10) : null \n                });\n              }}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              disabled={loadingRoles}\n            >\n              <option value=\"\">{t('common.pleaseSelect')}</option>\n              {roles.map(role => (\n                <option key={role.id} value={role.id}>\n                  {role.name}\n                </option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              {t('organization.lifecycleRoles.legal', { defaultValue: 'Legal-Rolle' })}\n            </label>\n            <select\n              value={lifecycleRoles.legalRoleId || ''}\n              onChange={(e) => {\n                const value = e.target.value;\n                setLifecycleRoles({ \n                ...lifecycleRoles, \n                  legalRoleId: (value && value !== '' && !isNaN(parseInt(value, 10))) ? parseInt(value, 10) : null \n                });\n              }}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              disabled={loadingRoles}\n            >\n              <option value=\"\">{t('common.pleaseSelect')}</option>\n              {roles.map(role => (\n                <option key={role.id} value={role.id}>\n                  {role.name}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n        \n        <div className=\"mt-6 flex justify-end\">\n          <button\n            onClick={handleSave}\n            disabled={saving || loadingRoles}\n            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            title={saving ? t('common.saving', { defaultValue: 'Speichere...' }) : t('common.save', { defaultValue: 'Speichern' })}\n          >\n            {saving ? (\n              <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n            ) : (\n              <CheckIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RoleConfigurationTab;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { DocumentTextIcon, ArrowPathIcon, CheckIcon, PlusIcon, TrashIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../../config/axios.ts';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { organizationService } from '../../services/organizationService.ts';\n\ninterface Organization {\n  id: number;\n  displayName?: string;\n  name?: string;\n  settings?: any;\n}\n\ninterface DocumentConfigurationTabProps {\n  organization: Organization | null;\n  onSave?: () => void;\n}\n\ninterface DocumentTemplate {\n  id?: number;\n  name: string;\n  type: 'certificate' | 'contract';\n  filePath?: string;\n  version?: string;\n}\n\nconst DocumentConfigurationTab: React.FC<DocumentConfigurationTabProps> = ({\n  organization,\n  onSave\n}) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [templates, setTemplates] = useState<DocumentTemplate[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [templateType, setTemplateType] = useState<'certificate' | 'contract'>('certificate');\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (organization) {\n      loadTemplates();\n    }\n  }, [organization]);\n\n  const loadTemplates = async () => {\n    setLoading(true);\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.DOCUMENT_TEMPLATES);\n      const documentTemplates = response.data.documentTemplates || {};\n      \n      // Konvertiere zu Template-Array\n      const templatesList: DocumentTemplate[] = [];\n      if (documentTemplates.employmentCertificate) {\n        templatesList.push({\n          name: 'Arbeitszeugnis',\n          type: 'certificate',\n          filePath: documentTemplates.employmentCertificate.path,\n          version: documentTemplates.employmentCertificate.version\n        });\n      }\n      if (documentTemplates.employmentContract) {\n        templatesList.push({\n          name: 'Arbeitsvertrag',\n          type: 'contract',\n          filePath: documentTemplates.employmentContract.path,\n          version: documentTemplates.employmentContract.version\n        });\n      }\n      \n      setTemplates(templatesList);\n    } catch (error: any) {\n      console.error('Fehler beim Laden der Templates:', error);\n      if (error.response?.status !== 404) {\n        showMessage(\n          error.response?.data?.message || t('lifecycle.loadTemplatesError', { defaultValue: 'Fehler beim Laden der Templates' }),\n          'error'\n        );\n      }\n      setTemplates([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    // Prfe Dateityp\n    if (file.type !== 'application/pdf') {\n      showMessage(\n        t('lifecycle.onlyPdfAllowed', { defaultValue: 'Nur PDF-Dateien sind erlaubt' }),\n        'error'\n      );\n      return;\n    }\n\n    setUploading(true);\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('type', templateType === 'certificate' ? 'employmentCertificate' : 'employmentContract');\n\n      const response = await axiosInstance.post(\n        API_ENDPOINTS.ORGANIZATION_LIFECYCLE.UPLOAD_TEMPLATE,\n        formData,\n        {\n          headers: { 'Content-Type': 'multipart/form-data' }\n        }\n      );\n      \n      showMessage(\n        response.data.message || t('lifecycle.templateUploaded', { defaultValue: 'Template erfolgreich hochgeladen' }),\n        'success'\n      );\n      \n      // Lade Templates neu\n      loadTemplates();\n    } catch (error: any) {\n      console.error('Fehler beim Hochladen:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.uploadError', { defaultValue: 'Fehler beim Hochladen' }),\n        'error'\n      );\n    } finally {\n      setUploading(false);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    }\n  };\n\n  const handleDeleteTemplate = async (templateType: 'certificate' | 'contract') => {\n    if (!window.confirm(t('lifecycle.deleteTemplateConfirm', { defaultValue: 'Template wirklich lschen?' }))) {\n      return;\n    }\n\n    try {\n      // Hole aktuelle Organisation\n      const orgResponse = await axiosInstance.get(API_ENDPOINTS.ORGANIZATIONS.CURRENT);\n      const settings = orgResponse.data.settings || {};\n      \n      // Entferne Template\n      if (settings.documentTemplates) {\n        const typeKey = templateType === 'certificate' ? 'employmentCertificate' : 'employmentContract';\n        delete settings.documentTemplates[typeKey];\n        \n        // Aktualisiere Organisation\n        await axiosInstance.put(API_ENDPOINTS.ORGANIZATIONS.CURRENT, {\n          settings\n        });\n      }\n      \n      showMessage(\n        t('lifecycle.templateDeleted', { defaultValue: 'Template erfolgreich gelscht' }),\n        'success'\n      );\n      \n      // Lade Templates neu\n      loadTemplates();\n    } catch (error: any) {\n      console.error('Fehler beim Lschen:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.deleteError', { defaultValue: 'Fehler beim Lschen' }),\n        'error'\n      );\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-8\">\n        <ArrowPathIcon className=\"h-6 w-6 animate-spin text-gray-400\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold flex items-center dark:text-white\">\n            <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n            {t('organization.documentTemplates', { defaultValue: 'Dokumenten-Templates' })}\n          </h3>\n          <div className=\"flex items-center space-x-2\">\n            <select\n              value={templateType}\n              onChange={(e) => setTemplateType(e.target.value as 'certificate' | 'contract')}\n              className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n            >\n              <option value=\"certificate\">Arbeitszeugnis</option>\n              <option value=\"contract\">Arbeitsvertrag</option>\n            </select>\n            <button\n              onClick={() => fileInputRef.current?.click()}\n              disabled={uploading}\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              title={uploading ? t('common.uploading', { defaultValue: 'Lade hoch...' }) : t('lifecycle.uploadTemplate', { defaultValue: 'Template hochladen' })}\n            >\n              {uploading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <PlusIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\".pdf\"\n            onChange={handleFileUpload}\n            className=\"hidden\"\n          />\n        </div>\n        \n        {templates.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n            <DocumentTextIcon className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n            <p>{t('lifecycle.noTemplates', { defaultValue: 'Keine Templates vorhanden' })}</p>\n            <p className=\"text-sm mt-2\">{t('lifecycle.uploadFirstTemplate', { defaultValue: 'Laden Sie Ihr erstes Template hoch' })}</p>\n          </div>\n        ) : (\n          <div className=\"space-y-2\">\n            {templates.map((template) => (\n              <div\n                key={template.type}\n                className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\"\n              >\n                <div>\n                  <div className=\"font-medium dark:text-white\">{template.name}</div>\n                  <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                    {template.type === 'certificate' \n                      ? t('lifecycle.certificate', { defaultValue: 'Arbeitszeugnis' })\n                      : t('lifecycle.contract', { defaultValue: 'Arbeitsvertrag' })}\n                    {template.version && ` - Version ${template.version}`}\n                  </div>\n                  {template.filePath && (\n                    <div className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">\n                      {template.filePath}\n                    </div>\n                  )}\n                </div>\n                <button\n                  onClick={() => handleDeleteTemplate(template.type)}\n                  className=\"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 rounded-md\"\n                  title={t('common.delete', { defaultValue: 'Lschen' })}\n                >\n                  <TrashIcon className=\"h-5 w-5\" />\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n      \n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold flex items-center dark:text-white\">\n            <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n            {t('organization.documentSignatures', { defaultValue: 'Dokumenten-Signaturen' })}\n          </h3>\n        </div>\n        \n        <SignatureUploadSection \n          organization={organization}\n          onUpload={loadTemplates}\n        />\n      </div>\n      \n      <FieldPositionConfiguration \n        organization={organization}\n        onSave={onSave}\n      />\n    </div>\n  );\n};\n\ninterface SignatureUploadSectionProps {\n  organization: Organization | null;\n  onUpload: () => void;\n}\n\nconst SignatureUploadSection: React.FC<SignatureUploadSectionProps> = ({\n  organization,\n  onUpload\n}) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [signatures, setSignatures] = useState<Array<{\n    type: 'certificate' | 'contract';\n    signerName: string;\n    signerPosition?: string;\n    path: string;\n    position?: {\n      x: number;\n      y: number;\n      page: number;\n    };\n  }>>([]);\n  const [loading, setLoading] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [signatureType, setSignatureType] = useState<'certificate' | 'contract'>('certificate');\n  const [signerName, setSignerName] = useState('');\n  const [signerPosition, setSignerPosition] = useState('');\n  const [positionX, setPositionX] = useState<string>('400');\n  const [positionY, setPositionY] = useState<string>('100');\n  const [positionPage, setPositionPage] = useState<string>('1');\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (organization) {\n      loadSignatures();\n    }\n  }, [organization]);\n\n  const loadSignatures = async () => {\n    setLoading(true);\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.DOCUMENT_SIGNATURES);\n      const documentSignatures = response.data.documentSignatures || {};\n      \n      const signaturesList: Array<{\n        type: 'certificate' | 'contract';\n        signerName: string;\n        signerPosition?: string;\n        path: string;\n        position?: {\n          x: number;\n          y: number;\n          page: number;\n        };\n      }> = [];\n      \n      if (documentSignatures.employmentCertificate) {\n        signaturesList.push({\n          type: 'certificate',\n          signerName: documentSignatures.employmentCertificate.signerName,\n          signerPosition: documentSignatures.employmentCertificate.signerPosition,\n          path: documentSignatures.employmentCertificate.path,\n          position: documentSignatures.employmentCertificate.position\n        });\n      }\n      if (documentSignatures.employmentContract) {\n        signaturesList.push({\n          type: 'contract',\n          signerName: documentSignatures.employmentContract.signerName,\n          signerPosition: documentSignatures.employmentContract.signerPosition,\n          path: documentSignatures.employmentContract.path,\n          position: documentSignatures.employmentContract.position\n        });\n      }\n      \n      setSignatures(signaturesList);\n    } catch (error: any) {\n      console.error('Fehler beim Laden der Signaturen:', error);\n      if (error.response?.status !== 404) {\n        showMessage(\n          error.response?.data?.message || t('lifecycle.loadSignaturesError', { defaultValue: 'Fehler beim Laden der Signaturen' }),\n          'error'\n        );\n      }\n      setSignatures([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    // Prfe Dateityp\n    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'application/pdf'];\n    if (!allowedTypes.includes(file.type)) {\n      showMessage(\n        t('lifecycle.onlyImageOrPdfAllowed', { defaultValue: 'Nur Bilder (JPEG, PNG, GIF) oder PDF-Dateien sind erlaubt' }),\n        'error'\n      );\n      return;\n    }\n\n    if (!signerName.trim()) {\n      showMessage(\n        t('lifecycle.signerNameRequired', { defaultValue: 'Name des Unterzeichners ist erforderlich' }),\n        'error'\n      );\n      return;\n    }\n\n    setUploading(true);\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('type', signatureType === 'certificate' ? 'employmentCertificate' : 'employmentContract');\n      formData.append('signerName', signerName);\n      if (signerPosition) {\n        formData.append('signerPosition', signerPosition);\n      }\n      // Positionen hinzufgen\n      formData.append('positionX', positionX || '400');\n      formData.append('positionY', positionY || '100');\n      formData.append('page', positionPage || '1');\n\n      const response = await axiosInstance.post(\n        API_ENDPOINTS.ORGANIZATION_LIFECYCLE.UPLOAD_SIGNATURE,\n        formData,\n        {\n          headers: { 'Content-Type': 'multipart/form-data' }\n        }\n      );\n      \n      showMessage(\n        response.data.message || t('lifecycle.signatureUploaded', { defaultValue: 'Signatur erfolgreich hochgeladen' }),\n        'success'\n      );\n      \n      // Reset form\n      setSignerName('');\n      setSignerPosition('');\n      setPositionX('400');\n      setPositionY('100');\n      setPositionPage('1');\n      \n      // Lade Signaturen neu\n      loadSignatures();\n      onUpload();\n    } catch (error: any) {\n      console.error('Fehler beim Hochladen:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.uploadError', { defaultValue: 'Fehler beim Hochladen' }),\n        'error'\n      );\n    } finally {\n      setUploading(false);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    }\n  };\n\n  const handleDeleteSignature = async (signatureType: 'certificate' | 'contract') => {\n    if (!window.confirm(t('lifecycle.deleteSignatureConfirm', { defaultValue: 'Signatur wirklich lschen?' }))) {\n      return;\n    }\n\n    try {\n      const orgResponse = await axiosInstance.get(API_ENDPOINTS.ORGANIZATIONS.CURRENT);\n      const settings = orgResponse.data.settings || {};\n      \n      if (settings.documentSignatures) {\n        const typeKey = signatureType === 'certificate' ? 'employmentCertificate' : 'employmentContract';\n        delete settings.documentSignatures[typeKey];\n        \n        await axiosInstance.put(API_ENDPOINTS.ORGANIZATIONS.CURRENT, {\n          settings\n        });\n      }\n      \n      showMessage(\n        t('lifecycle.signatureDeleted', { defaultValue: 'Signatur erfolgreich gelscht' }),\n        'success'\n      );\n      \n      loadSignatures();\n    } catch (error: any) {\n      console.error('Fehler beim Lschen:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.deleteError', { defaultValue: 'Fehler beim Lschen' }),\n        'error'\n      );\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-4\">\n        <ArrowPathIcon className=\"h-5 w-5 animate-spin text-gray-400\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"border border-gray-300 dark:border-gray-600 rounded-lg p-4\">\n        <div className=\"space-y-3\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              {t('lifecycle.signatureType', { defaultValue: 'Signatur-Typ' })}\n            </label>\n            <select\n              value={signatureType}\n              onChange={(e) => setSignatureType(e.target.value as 'certificate' | 'contract')}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n            >\n              <option value=\"certificate\">{t('lifecycle.certificate', { defaultValue: 'Arbeitszeugnis' })}</option>\n              <option value=\"contract\">{t('lifecycle.contract', { defaultValue: 'Arbeitsvertrag' })}</option>\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              {t('lifecycle.signerName', { defaultValue: 'Name des Unterzeichners' })} <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"text\"\n              value={signerName}\n              onChange={(e) => setSignerName(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n              placeholder={t('lifecycle.signerNamePlaceholder', { defaultValue: 'z.B. Stefan Bossart' })}\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              {t('lifecycle.signerPosition', { defaultValue: 'Position' })}\n            </label>\n            <input\n              type=\"text\"\n              value={signerPosition}\n              onChange={(e) => setSignerPosition(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n              placeholder={t('lifecycle.signerPositionPlaceholder', { defaultValue: 'z.B. Geschftsfhrer' })}\n            />\n          </div>\n          \n          <div className=\"border-t border-gray-200 dark:border-gray-700 pt-3\">\n            <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\n              {t('lifecycle.signaturePosition', { defaultValue: 'Signatur-Position im PDF' })}\n            </h4>\n            <div className=\"grid grid-cols-3 gap-3\">\n              <div>\n                <label className=\"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1\">\n                  {t('lifecycle.positionX', { defaultValue: 'X (horizontal)' })}\n                </label>\n                <input\n                  type=\"number\"\n                  value={positionX}\n                  onChange={(e) => setPositionX(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                  placeholder=\"400\"\n                  min=\"0\"\n                />\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                  {t('lifecycle.positionXHint', { defaultValue: '0 = links' })}\n                </p>\n              </div>\n              <div>\n                <label className=\"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1\">\n                  {t('lifecycle.positionY', { defaultValue: 'Y (vertikal)' })}\n                </label>\n                <input\n                  type=\"number\"\n                  value={positionY}\n                  onChange={(e) => setPositionY(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                  placeholder=\"100\"\n                  min=\"0\"\n                />\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                  {t('lifecycle.positionYHint', { defaultValue: '0 = unten' })}\n                </p>\n              </div>\n              <div>\n                <label className=\"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1\">\n                  {t('lifecycle.positionPage', { defaultValue: 'Seite' })}\n                </label>\n                <input\n                  type=\"number\"\n                  value={positionPage}\n                  onChange={(e) => setPositionPage(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                  placeholder=\"1\"\n                  min=\"1\"\n                />\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                  {t('lifecycle.positionPageHint', { defaultValue: 'Seitennummer' })}\n                </p>\n              </div>\n            </div>\n            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n              {t('lifecycle.signaturePositionHint', { defaultValue: 'Koordinaten in PDF-Punkten (1 Punkt = 1/72 Zoll). A4: 595 x 842 Punkte. Standard: X=400, Y=100, Seite=1' })}\n            </p>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              {t('lifecycle.signatureFile', { defaultValue: 'Signatur-Datei' })} <span className=\"text-red-500\">*</span>\n            </label>\n            <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center\">\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\"image/jpeg,image/png,image/gif,application/pdf\"\n                onChange={handleFileUpload}\n                className=\"hidden\"\n              />\n              <button\n                onClick={() => fileInputRef.current?.click()}\n                disabled={uploading || !signerName.trim()}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {uploading ? (\n                  <span className=\"flex items-center space-x-2\">\n                    <ArrowPathIcon className=\"h-4 w-4 animate-spin\" />\n                    <span>{t('common.uploading', { defaultValue: 'Lade hoch...' })}</span>\n                  </span>\n                ) : (\n                  t('lifecycle.selectSignatureFile', { defaultValue: 'Datei auswhlen' })\n                )}\n              </button>\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n                {t('lifecycle.signatureFileHint', { defaultValue: 'JPEG, PNG, GIF oder PDF (max. 5MB)' })}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      {signatures.length > 0 && (\n        <div className=\"space-y-2\">\n          <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n            {t('lifecycle.uploadedSignatures', { defaultValue: 'Hochgeladene Signaturen' })}\n          </h4>\n          {signatures.map((signature) => (\n            <div\n              key={signature.type}\n              className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\"\n            >\n              <div>\n                <div className=\"font-medium dark:text-white\">\n                  {signature.type === 'certificate' \n                    ? t('lifecycle.certificate', { defaultValue: 'Arbeitszeugnis' })\n                    : t('lifecycle.contract', { defaultValue: 'Arbeitsvertrag' })}\n                </div>\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                  {signature.signerName}\n                  {signature.signerPosition && ` - ${signature.signerPosition}`}\n                </div>\n                {signature.position && (\n                  <div className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">\n                    {t('lifecycle.position', { defaultValue: 'Position' })}: X={signature.position.x}, Y={signature.position.y}, {t('lifecycle.page', { defaultValue: 'Seite' })} {signature.position.page}\n                  </div>\n                )}\n              </div>\n              <button\n                onClick={() => handleDeleteSignature(signature.type)}\n                className=\"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 rounded-md\"\n                title={t('common.delete', { defaultValue: 'Lschen' })}\n              >\n                <TrashIcon className=\"h-5 w-5\" />\n              </button>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\ninterface FieldPositionConfigurationProps {\n  organization: Organization | null;\n  onSave?: () => void;\n}\n\nconst FieldPositionConfiguration: React.FC<FieldPositionConfigurationProps> = ({\n  organization,\n  onSave\n}) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [templateType, setTemplateType] = useState<'certificate' | 'contract'>('certificate');\n  const [fields, setFields] = useState<Record<string, { x: number; y: number; fontSize?: number }>>({});\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  // Standard-Felder fr Certificate und Contract\n  const certificateFields = ['userName', 'organizationName', 'currentDate', 'identificationNumber', 'startDate', 'endDate'];\n  const contractFields = ['userName', 'organizationName', 'currentDate', 'identificationNumber', 'startDate', 'endDate', 'position', 'salary', 'workingHours'];\n\n  useEffect(() => {\n    if (organization) {\n      loadFields();\n    }\n  }, [organization, templateType]);\n\n  const loadFields = async () => {\n    try {\n      const settings = organization?.settings as any;\n      const templateSettings = settings?.documentTemplates?.[templateType === 'certificate' ? 'employmentCertificate' : 'employmentContract'];\n      const savedFields = templateSettings?.fields || {};\n      \n      // Standard-Positionen (A4: 595.28 x 841.89 Punkte)\n      // Y-Koordinate: 0 ist unten, 841.89 ist oben (PDF-Koordinatensystem)\n      const pageHeight = 841.89;\n      const margin = 50;\n      const lineHeight = 20;\n      let currentY = pageHeight - margin - 30;\n      \n      // Lade gespeicherte Felder oder verwende Standard-Werte (synchronisiert mit Backend)\n      const defaultFields: Record<string, { x: number; y: number; fontSize?: number }> = {};\n      const fieldList = templateType === 'certificate' ? certificateFields : contractFields;\n      \n      // Standard-Positionen (wie im Backend getDefaultFieldPositions)\n      const defaultPositions: Record<string, { x: number; y: number; fontSize?: number }> = {\n        userName: { x: margin, y: currentY, fontSize: 14 },\n        organizationName: { x: margin, y: currentY - lineHeight, fontSize: 12 },\n        currentDate: { x: margin, y: currentY - lineHeight * 2, fontSize: 12 },\n        identificationNumber: { x: margin, y: currentY - lineHeight * 3, fontSize: 12 },\n        startDate: { x: margin, y: currentY - lineHeight * 4, fontSize: 12 },\n        endDate: { x: margin, y: currentY - lineHeight * 5, fontSize: 12 }\n      };\n      \n      if (templateType === 'contract') {\n        defaultPositions.position = { x: margin, y: currentY - lineHeight * 6, fontSize: 12 };\n        defaultPositions.salary = { x: margin, y: currentY - lineHeight * 7, fontSize: 12 };\n        defaultPositions.workingHours = { x: margin, y: currentY - lineHeight * 8, fontSize: 12 };\n      }\n      \n      fieldList.forEach((fieldName) => {\n        defaultFields[fieldName] = savedFields[fieldName] || defaultPositions[fieldName] || {\n          x: margin,\n          y: currentY,\n          fontSize: fieldName === 'userName' ? 14 : 12\n        };\n      });\n      \n      setFields(defaultFields);\n    } catch (error) {\n      console.error('Fehler beim Laden der Felder:', error);\n    }\n  };\n\n  const handleFieldChange = (fieldName: string, property: 'x' | 'y' | 'fontSize', value: string) => {\n    setFields(prev => ({\n      ...prev,\n      [fieldName]: {\n        ...prev[fieldName],\n        [property]: property === 'fontSize' ? parseFloat(value) || 12 : parseFloat(value) || 0\n      }\n    }));\n  };\n\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      const orgResponse = await axiosInstance.get(API_ENDPOINTS.ORGANIZATIONS.CURRENT);\n      const currentSettings = orgResponse.data.settings || {};\n      \n      if (!currentSettings.documentTemplates) {\n        currentSettings.documentTemplates = {};\n      }\n      \n      const typeKey = templateType === 'certificate' ? 'employmentCertificate' : 'employmentContract';\n      if (!currentSettings.documentTemplates[typeKey]) {\n        currentSettings.documentTemplates[typeKey] = {};\n      }\n      \n      currentSettings.documentTemplates[typeKey].fields = fields;\n      \n      await organizationService.updateOrganization({\n        settings: currentSettings\n      });\n      \n      showMessage(\n        t('lifecycle.fieldPositionsSaved', { defaultValue: 'Feld-Positionen erfolgreich gespeichert' }),\n        'success'\n      );\n      \n      if (onSave) {\n        onSave();\n      }\n    } catch (error: any) {\n      console.error('Fehler beim Speichern:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.saveError', { defaultValue: 'Fehler beim Speichern' }),\n        'error'\n      );\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleReset = async () => {\n    if (window.confirm(t('lifecycle.resetFieldPositionsConfirm', { defaultValue: 'Positionen auf Standardwerte zurcksetzen?' }))) {\n      // Setze Felder auf Standard-Werte zurck\n      const pageHeight = 841.89;\n      const margin = 50;\n      const lineHeight = 20;\n      let currentY = pageHeight - margin - 30;\n      \n      const defaultPositions: Record<string, { x: number; y: number; fontSize?: number }> = {\n        userName: { x: margin, y: currentY, fontSize: 14 },\n        organizationName: { x: margin, y: currentY - lineHeight, fontSize: 12 },\n        currentDate: { x: margin, y: currentY - lineHeight * 2, fontSize: 12 },\n        identificationNumber: { x: margin, y: currentY - lineHeight * 3, fontSize: 12 },\n        startDate: { x: margin, y: currentY - lineHeight * 4, fontSize: 12 },\n        endDate: { x: margin, y: currentY - lineHeight * 5, fontSize: 12 }\n      };\n      \n      if (templateType === 'contract') {\n        defaultPositions.position = { x: margin, y: currentY - lineHeight * 6, fontSize: 12 };\n        defaultPositions.salary = { x: margin, y: currentY - lineHeight * 7, fontSize: 12 };\n        defaultPositions.workingHours = { x: margin, y: currentY - lineHeight * 8, fontSize: 12 };\n      }\n      \n      const fieldList = templateType === 'certificate' ? certificateFields : contractFields;\n      const resetFields: Record<string, { x: number; y: number; fontSize?: number }> = {};\n      \n      fieldList.forEach((fieldName) => {\n        resetFields[fieldName] = defaultPositions[fieldName] || {\n          x: margin,\n          y: currentY,\n          fontSize: fieldName === 'userName' ? 14 : 12\n        };\n      });\n      \n      setFields(resetFields);\n    }\n  };\n\n  const fieldList = templateType === 'certificate' ? certificateFields : contractFields;\n  const fieldLabels: Record<string, string> = {\n    userName: t('lifecycle.fieldUserName', { defaultValue: 'Benutzername' }),\n    organizationName: t('lifecycle.fieldOrganizationName', { defaultValue: 'Organisationsname' }),\n    currentDate: t('lifecycle.fieldCurrentDate', { defaultValue: 'Aktuelles Datum' }),\n    identificationNumber: t('lifecycle.fieldIdentificationNumber', { defaultValue: 'Ausweisnummer' }),\n    startDate: t('lifecycle.fieldStartDate', { defaultValue: 'Startdatum' }),\n    endDate: t('lifecycle.fieldEndDate', { defaultValue: 'Enddatum' }),\n    position: t('lifecycle.fieldPosition', { defaultValue: 'Position' }),\n    salary: t('lifecycle.fieldSalary', { defaultValue: 'Gehalt' }),\n    workingHours: t('lifecycle.fieldWorkingHours', { defaultValue: 'Arbeitsstunden' })\n  };\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-lg font-semibold dark:text-white\">\n          {t('organization.fieldPositions', { defaultValue: 'Feld-Positionen konfigurieren' })}\n        </h3>\n        <div className=\"flex items-center space-x-2\">\n          <select\n            value={templateType}\n            onChange={(e) => setTemplateType(e.target.value as 'certificate' | 'contract')}\n            className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n          >\n            <option value=\"certificate\">{t('lifecycle.certificate', { defaultValue: 'Certificado Laboral' })}</option>\n            <option value=\"contract\">{t('lifecycle.contract', { defaultValue: 'Contrato de Trabajo' })}</option>\n          </select>\n        </div>\n      </div>\n      \n      <div className=\"space-y-4\">\n        <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3\">\n          <p className=\"text-sm text-blue-800 dark:text-blue-200 font-medium mb-1\">\n            {t('lifecycle.fieldPositionsInfo', { defaultValue: 'Konfigurieren Sie die Positionen der Felder im Template-PDF.' })}\n          </p>\n          <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n            {t('lifecycle.fieldPositionsHint', { defaultValue: 'Koordinaten in PDF-Punkten. A4: 595 x 842 Punkte. Y=0 ist unten, Y=842 ist oben. X=0 ist links, X=595 ist rechts.' })}\n          </p>\n        </div>\n        \n        <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n          {fieldList.map((fieldName) => (\n            <div key={fieldName} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-3\">\n              <div className=\"font-medium text-sm dark:text-white mb-2\">\n                {fieldLabels[fieldName] || fieldName}\n              </div>\n              <div className=\"grid grid-cols-3 gap-2\">\n                <div>\n                  <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\n                    X\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={fields[fieldName]?.x || 0}\n                    onChange={(e) => handleFieldChange(fieldName, 'x', e.target.value)}\n                    className=\"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                    min=\"0\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\n                    Y\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={fields[fieldName]?.y || 0}\n                    onChange={(e) => handleFieldChange(fieldName, 'y', e.target.value)}\n                    className=\"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                    min=\"0\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\n                    {t('lifecycle.fontSize', { defaultValue: 'Schriftgre' })}\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={fields[fieldName]?.fontSize || 12}\n                    onChange={(e) => handleFieldChange(fieldName, 'fontSize', e.target.value)}\n                    className=\"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                    min=\"8\"\n                    max=\"72\"\n                  />\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n        \n        <div className=\"flex items-center justify-end space-x-2 pt-2 border-t border-gray-200 dark:border-gray-700\">\n          <button\n            onClick={handleReset}\n            className=\"p-2 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-white\"\n            title={t('common.reset', { defaultValue: 'Zurcksetzen' })}\n          >\n            <ArrowPathIcon className=\"h-5 w-5\" />\n          </button>\n          <button\n            onClick={handleSave}\n            disabled={saving}\n            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-blue-700 dark:hover:bg-blue-800\"\n            title={saving ? t('common.saving', { defaultValue: 'Speichern...' }) : t('common.save', { defaultValue: 'Speichern' })}\n          >\n            {saving ? (\n              <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n            ) : (\n              <CheckIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DocumentConfigurationTab;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { EnvelopeIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { Organization } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface Props {\n  organization: Organization | null;\n  onSave?: () => void;\n}\n\nconst SMTPConfigurationTab: React.FC<Props> = ({ organization, onSave }) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [loading, setLoading] = useState(false);\n  const [smtpSettings, setSmtpSettings] = useState({\n    smtpHost: '',\n    smtpPort: '587',\n    smtpUser: '',\n    smtpPass: '',\n    smtpFromEmail: '',\n    smtpFromName: ''\n  });\n  const [showPassword, setShowPassword] = useState(false);\n\n  useEffect(() => {\n    if (organization?.settings) {\n      const settings = organization.settings as any;\n      setSmtpSettings({\n        smtpHost: settings.smtpHost || '',\n        smtpPort: settings.smtpPort?.toString() || '587',\n        smtpUser: settings.smtpUser || '',\n        smtpPass: settings.smtpPass || '',\n        smtpFromEmail: settings.smtpFromEmail || (organization?.domain ? `noreply@${organization.domain}` : ''),\n        smtpFromName: settings.smtpFromName || organization?.displayName || ''\n      });\n    }\n  }, [organization]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setSmtpSettings(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!smtpSettings.smtpHost || !smtpSettings.smtpUser || !smtpSettings.smtpPass) {\n      showMessage(t('organization.smtp.requiredFields'), 'error');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      \n      const settings = {\n        ...(organization?.settings || {}),\n        smtpHost: smtpSettings.smtpHost,\n        smtpPort: parseInt(smtpSettings.smtpPort) || 587,\n        smtpUser: smtpSettings.smtpUser,\n        smtpPass: smtpSettings.smtpPass,\n        smtpFromEmail: smtpSettings.smtpFromEmail,\n        smtpFromName: smtpSettings.smtpFromName\n      };\n\n      await organizationService.updateOrganization({\n        settings: settings\n      });\n      \n      showMessage(t('organization.smtp.saveSuccess'), 'success');\n      if (onSave) {\n        onSave();\n      }\n    } catch (error: any) {\n      const errorMessage = error.response?.data?.message || t('organization.smtp.saveError');\n      showMessage(errorMessage, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClear = () => {\n    setSmtpSettings({\n      smtpHost: '',\n      smtpPort: '587',\n      smtpUser: '',\n      smtpPass: '',\n      smtpFromEmail: organization?.domain ? `noreply@${organization.domain}` : '',\n      smtpFromName: organization?.displayName || ''\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-2 mb-4\">\n        <EnvelopeIcon className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n          {t('organization.smtp.title')}\n        </h3>\n      </div>\n\n      <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">\n        {t('organization.smtp.description')}\n      </p>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div>\n          <label htmlFor=\"smtpHost\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n            {t('organization.smtp.host')} <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"text\"\n            id=\"smtpHost\"\n            name=\"smtpHost\"\n            value={smtpSettings.smtpHost}\n            onChange={handleChange}\n            placeholder=\"smtp.example.com\"\n            required\n            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n          />\n          <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n            {t('organization.smtp.hostHint')}\n          </p>\n        </div>\n\n        <div>\n          <label htmlFor=\"smtpPort\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n            {t('organization.smtp.port')} <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"number\"\n            id=\"smtpPort\"\n            name=\"smtpPort\"\n            value={smtpSettings.smtpPort}\n            onChange={handleChange}\n            placeholder=\"587\"\n            required\n            min=\"1\"\n            max=\"65535\"\n            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n          />\n          <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n            {t('organization.smtp.portHint')}\n          </p>\n        </div>\n\n        <div>\n          <label htmlFor=\"smtpUser\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n            {t('organization.smtp.user')} <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"text\"\n            id=\"smtpUser\"\n            name=\"smtpUser\"\n            value={smtpSettings.smtpUser}\n            onChange={handleChange}\n            placeholder=\"noreply@example.com\"\n            required\n            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n          />\n          <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n            {t('organization.smtp.userHint')}\n          </p>\n        </div>\n\n        <div>\n          <label htmlFor=\"smtpPass\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n            {t('organization.smtp.password')} <span className=\"text-red-500\">*</span>\n          </label>\n          <div className=\"relative\">\n            <input\n              type={showPassword ? 'text' : 'password'}\n              id=\"smtpPass\"\n              name=\"smtpPass\"\n              value={smtpSettings.smtpPass}\n              onChange={handleChange}\n              placeholder=\"\"\n              required\n              className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n            />\n            <button\n              type=\"button\"\n              onClick={() => setShowPassword(!showPassword)}\n              className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n            >\n              {showPassword ? (\n                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                </svg>\n              ) : (\n                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                </svg>\n              )}\n            </button>\n          </div>\n          <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n            {t('organization.smtp.passwordHint')}\n          </p>\n        </div>\n\n        <div className=\"border-t pt-4\">\n          <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\n            {t('organization.smtp.fromSettings')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"smtpFromEmail\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.smtp.fromEmail')}\n              </label>\n              <input\n                type=\"email\"\n                id=\"smtpFromEmail\"\n                name=\"smtpFromEmail\"\n                value={smtpSettings.smtpFromEmail}\n                onChange={handleChange}\n                placeholder=\"noreply@example.com\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                {t('organization.smtp.fromEmailHint')}\n              </p>\n            </div>\n\n            <div>\n              <label htmlFor=\"smtpFromName\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.smtp.fromName')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"smtpFromName\"\n                name=\"smtpFromName\"\n                value={smtpSettings.smtpFromName}\n                onChange={handleChange}\n                placeholder={organization?.displayName || 'Intranet'}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                {t('organization.smtp.fromNameHint')}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md p-4\">\n          <p className=\"text-sm text-blue-800 dark:text-blue-200\">\n            <strong>{t('organization.smtp.infoTitle')}</strong>\n          </p>\n          <ul className=\"mt-2 text-sm text-blue-700 dark:text-blue-300 list-disc list-inside space-y-1\">\n            <li>{t('organization.smtp.info1')}</li>\n            <li>{t('organization.smtp.info2')}</li>\n            <li>{t('organization.smtp.info3')}</li>\n          </ul>\n        </div>\n\n        <div className=\"flex justify-end gap-2 pt-4\">\n          <button\n            type=\"button\"\n            onClick={handleClear}\n            className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n            title={t('organization.smtp.clear')}\n          >\n            <ArrowPathIcon className=\"h-5 w-5\" />\n          </button>\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n            title={loading ? t('organization.saving') : t('common.save')}\n          >\n            {loading ? (\n              <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n            ) : (\n              <CheckIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default SMTPConfigurationTab;\n\n","/**\n * URL-Validierung fr API-Endpunkte (Frontend)\n * \n * Verhindert SSRF durch Whitelist-basierte Validierung\n */\n\nconst ALLOWED_DOMAINS = {\n  lobbyPms: ['app.lobbypms.com'],\n  ttlock: ['open.ttlock.com', 'euopen.ttlock.com', 'api.sciener.com'],\n  sire: ['api.sire.gov.co'],\n  boldPayment: ['api.bold.co', 'sandbox.bold.co'],\n} as const;\n\nexport type ApiService = keyof typeof ALLOWED_DOMAINS;\n\n/**\n * Validiert eine API-URL gegen eine Whitelist\n * \n * @param url - Die zu validierende URL\n * @param service - Der API-Service\n * @returns true wenn URL gltig ist, false sonst\n */\nexport const validateApiUrl = (url: string, service: ApiService): boolean => {\n  if (!url || typeof url !== 'string') {\n    return false;\n  }\n\n  try {\n    const parsed = new URL(url);\n    const allowedDomains = ALLOWED_DOMAINS[service];\n\n    return allowedDomains.some(domain => {\n      // Exakte bereinstimmung\n      if (parsed.hostname === domain) {\n        return true;\n      }\n\n      // Subdomain (z.B. api.app.lobbypms.com)\n      if (parsed.hostname.endsWith(`.${domain}`)) {\n        return true;\n      }\n\n      return false;\n    });\n  } catch (error) {\n    // Ungltige URL\n    return false;\n  }\n};\n\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { KeyIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { Organization, OrganizationSettings } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport { validateApiUrl } from '../../utils/urlValidation.ts';\n\n// Feste LobbyPMS API URL\nconst LOBBYPMS_API_URL = 'https://api.lobbypms.com';\n\ninterface Props {\n  organization: Organization | null;\n  onSave?: () => void;\n}\n\nconst ApiConfigurationTab: React.FC<Props> = ({ organization, onSave }) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const { canManageOrganization, loading: permissionsLoading } = usePermissions();\n  const [loading, setLoading] = useState(false);\n  const [apiSettings, setApiSettings] = useState({\n    // LobbyPMS\n    lobbyPmsApiKey: '',\n    lobbyPmsPropertyId: '',\n    lobbyPmsSyncEnabled: false,\n    lobbyPmsAutoCreateTasks: false,\n    lobbyPmsAutoSendReservationInvitation: true, // Default: true (Rckwrtskompatibilitt)\n    lobbyPmsLateCheckInThreshold: '22:00',\n    \n    // TTLock\n    ttlockClientId: '',\n    ttlockClientSecret: '',\n    ttlockApiUrl: 'https://open.ttlock.com',\n    ttlockUsername: '',\n    ttlockPassword: '',\n    ttlockPasscodeType: 'auto' as 'auto' | 'custom',\n    \n    // SIRE\n    sireApiUrl: '',\n    sireApiKey: '',\n    sireApiSecret: '',\n    sireEnabled: false,\n    sireAutoRegisterOnCheckIn: false,\n    sirePropertyCode: '',\n    \n    // Bold Payment\n    boldPaymentApiKey: '',\n    boldPaymentMerchantId: '',\n    boldPaymentEnvironment: 'sandbox' as 'sandbox' | 'production',\n    \n    // WhatsApp\n    whatsappProvider: 'twilio' as 'twilio' | 'whatsapp-business-api',\n    whatsappApiKey: '',\n    whatsappApiSecret: '',\n    whatsappPhoneNumberId: ''\n  });\n  const [showSecrets, setShowSecrets] = useState<Record<string, boolean>>({});\n\n  useEffect(() => {\n    if (organization?.settings) {\n      const settings = organization.settings as OrganizationSettings;\n      const lobbyPms = settings.lobbyPms || {};\n      const doorSystem = settings.doorSystem || {};\n      const sire = settings.sire || {};\n      const boldPayment = settings.boldPayment || {};\n      const whatsapp = settings.whatsapp || {};\n      \n      setApiSettings({\n        lobbyPmsApiKey: lobbyPms.apiKey || '',\n        lobbyPmsPropertyId: lobbyPms.propertyId || '',\n        lobbyPmsSyncEnabled: lobbyPms.syncEnabled || false,\n        lobbyPmsAutoCreateTasks: lobbyPms.autoCreateTasks || false,\n        lobbyPmsAutoSendReservationInvitation: lobbyPms.autoSendReservationInvitation !== false, // Default: true\n        lobbyPmsLateCheckInThreshold: lobbyPms.lateCheckInThreshold || '22:00',\n        \n        ttlockClientId: doorSystem.clientId || '',\n        ttlockClientSecret: doorSystem.clientSecret || '',\n        ttlockApiUrl: doorSystem.apiUrl || 'https://open.ttlock.com',\n        ttlockUsername: doorSystem.username || '',\n        ttlockPassword: '', // Password wird nicht angezeigt (aus Sicherheitsgrnden)\n        ttlockPasscodeType: (doorSystem.passcodeType as 'auto' | 'custom') || 'auto',\n        \n        sireApiUrl: sire.apiUrl || '',\n        sireApiKey: sire.apiKey || '',\n        sireApiSecret: sire.apiSecret || '',\n        sireEnabled: sire.enabled || false,\n        sireAutoRegisterOnCheckIn: sire.autoRegisterOnCheckIn || false,\n        sirePropertyCode: sire.propertyCode || '',\n        \n        boldPaymentApiKey: boldPayment.apiKey || '',\n        boldPaymentMerchantId: boldPayment.merchantId || '',\n        boldPaymentEnvironment: boldPayment.environment || 'sandbox',\n        \n        whatsappProvider: (whatsapp.provider as 'twilio' | 'whatsapp-business-api') || 'twilio',\n        whatsappApiKey: whatsapp.apiKey || '',\n        whatsappApiSecret: whatsapp.apiSecret || '',\n        whatsappPhoneNumberId: whatsapp.phoneNumberId || ''\n      });\n    }\n  }, [organization]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value, type } = e.target;\n    const checked = (e.target as HTMLInputElement).checked;\n    \n    setApiSettings(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n\n  const toggleShowSecret = (key: string) => {\n    setShowSecrets(prev => ({\n      ...prev,\n      [key]: !prev[key]\n    }));\n  };\n\n  const handleClear = () => {\n    setApiSettings({\n      lobbyPmsApiKey: '',\n      lobbyPmsPropertyId: '',\n      lobbyPmsSyncEnabled: false,\n      lobbyPmsAutoCreateTasks: false,\n      lobbyPmsAutoSendReservationInvitation: true,\n      lobbyPmsLateCheckInThreshold: '22:00',\n      ttlockClientId: '',\n      ttlockClientSecret: '',\n      ttlockApiUrl: 'https://open.ttlock.com',\n      ttlockUsername: '',\n      ttlockPassword: '',\n      ttlockPasscodeType: 'auto' as 'auto' | 'custom',\n      sireApiUrl: '',\n      sireApiKey: '',\n      sireApiSecret: '',\n      sireEnabled: false,\n      sireAutoRegisterOnCheckIn: false,\n      sirePropertyCode: '',\n        boldPaymentApiKey: '',\n        boldPaymentMerchantId: '',\n        boldPaymentEnvironment: 'sandbox',\n        whatsappProvider: 'twilio' as 'twilio' | 'whatsapp-business-api',\n        whatsappApiKey: '',\n        whatsappApiSecret: '',\n        whatsappPhoneNumberId: ''\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    //  VALIDIERUNG: Prfe Pflichtfelder\n    if (apiSettings.lobbyPmsSyncEnabled) {\n      if (!apiSettings.lobbyPmsApiKey) {\n        showMessage(t('organization.api.validation.apiKeyRequired'), 'error');\n        return;\n      }\n    }\n\n    //  URL-VALIDIERUNG: Prfe alle URLs\n    if (apiSettings.ttlockApiUrl && !validateApiUrl(apiSettings.ttlockApiUrl, 'ttlock')) {\n      showMessage(t('organization.api.validation.invalidUrl'), 'error');\n      return;\n    }\n    if (apiSettings.sireApiUrl && !validateApiUrl(apiSettings.sireApiUrl, 'sire')) {\n      showMessage(t('organization.api.validation.invalidUrl'), 'error');\n      return;\n    }\n\n    //  ZEITFORMAT-VALIDIERUNG: Prfe lateCheckInThreshold\n    if (apiSettings.lobbyPmsLateCheckInThreshold && !/^([0-1][0-9]|2[0-3]):[0-5][0-9]$/.test(apiSettings.lobbyPmsLateCheckInThreshold)) {\n      showMessage(t('organization.api.validation.invalidTimeFormat'), 'error');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      \n      const currentSettings = (organization?.settings || {}) as OrganizationSettings;\n      const settings: OrganizationSettings = {\n        ...currentSettings,\n        lobbyPms: {\n          ...currentSettings.lobbyPms,\n          apiUrl: LOBBYPMS_API_URL, // Feste URL\n          apiKey: apiSettings.lobbyPmsApiKey || undefined,\n          propertyId: apiSettings.lobbyPmsPropertyId || undefined,\n          syncEnabled: apiSettings.lobbyPmsSyncEnabled,\n          autoCreateTasks: apiSettings.lobbyPmsAutoCreateTasks,\n          autoSendReservationInvitation: apiSettings.lobbyPmsAutoSendReservationInvitation,\n          lateCheckInThreshold: apiSettings.lobbyPmsLateCheckInThreshold || undefined\n        },\n        doorSystem: {\n          ...currentSettings.doorSystem,\n          provider: 'ttlock' as const,\n          apiUrl: apiSettings.ttlockApiUrl || undefined,\n          clientId: apiSettings.ttlockClientId || undefined,\n          clientSecret: apiSettings.ttlockClientSecret || undefined,\n          username: apiSettings.ttlockUsername || undefined,\n          password: apiSettings.ttlockPassword || undefined, // Wird MD5-gehasht im Backend\n          passcodeType: apiSettings.ttlockPasscodeType || 'auto'\n        },\n        sire: {\n          ...currentSettings.sire,\n          apiUrl: apiSettings.sireApiUrl || undefined,\n          apiKey: apiSettings.sireApiKey || undefined,\n          apiSecret: apiSettings.sireApiSecret || undefined,\n          enabled: apiSettings.sireEnabled,\n          autoRegisterOnCheckIn: apiSettings.sireAutoRegisterOnCheckIn,\n          propertyCode: apiSettings.sirePropertyCode || undefined\n        },\n        boldPayment: {\n          ...currentSettings.boldPayment,\n          apiKey: apiSettings.boldPaymentApiKey || undefined,\n          merchantId: apiSettings.boldPaymentMerchantId || undefined,\n          environment: apiSettings.boldPaymentEnvironment\n        },\n        whatsapp: {\n          ...currentSettings.whatsapp,\n          provider: apiSettings.whatsappProvider,\n          apiKey: apiSettings.whatsappApiKey || undefined,\n          apiSecret: apiSettings.whatsappApiSecret || undefined,\n          phoneNumberId: apiSettings.whatsappPhoneNumberId || undefined\n        }\n      };\n\n      await organizationService.updateOrganization({\n        settings: settings\n      });\n      \n      showMessage(t('organization.api.saveSuccess'), 'success');\n      if (onSave) {\n        onSave();\n      }\n    } catch (error: any) {\n      console.error('Error saving API settings:', error);\n      \n      // Detaillierte Fehlermeldung\n      let errorMessage = t('organization.api.saveError');\n      \n      if (error.response?.data) {\n        const data = error.response.data;\n        \n        // Spezifische Fehlermeldung vom Backend\n        if (data.message) {\n          errorMessage = data.message;\n        }\n        \n        // Validierungsfehler anzeigen\n        if (data.errors && Array.isArray(data.errors)) {\n          const validationErrors = data.errors\n            .map((err: any) => `${err.path?.join('.') || ''}: ${err.message || ''}`)\n            .filter((msg: string) => msg)\n            .join(', ');\n          \n          if (validationErrors) {\n            errorMessage += ` (${validationErrors})`;\n          }\n          \n          // URL-Fehler anzeigen (wenn errors Strings sind)\n          if (data.errors.length > 0 && typeof data.errors[0] === 'string') {\n            errorMessage = data.errors.join(', ');\n          }\n        }\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      showMessage(errorMessage, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const SecretInput: React.FC<{\n    name: string;\n    value: string;\n    onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n    placeholder?: string;\n    label: string;\n    required?: boolean;\n  }> = ({ name, value, onChange, placeholder, label, required = false }) => {\n    const showSecret = showSecrets[name] || false;\n    \n    return (\n      <div>\n        <label htmlFor={name} className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n          {label} {required && <span className=\"text-red-500\">*</span>}\n        </label>\n        <div className=\"relative\">\n          <input\n            type={showSecret ? 'text' : 'password'}\n            id={name}\n            name={name}\n            value={value}\n            onChange={onChange}\n            placeholder={placeholder || ''}\n            required={required}\n            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n          />\n          <button\n            type=\"button\"\n            onClick={() => toggleShowSecret(name)}\n            className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            {showSecret ? (\n              <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n              </svg>\n            ) : (\n              <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n              </svg>\n            )}\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  //  BERECHTIGUNGSPRFUNG\n  if (permissionsLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-8\">\n        <ArrowPathIcon className=\"h-6 w-6 animate-spin text-gray-400\" />\n        <span className=\"ml-3 text-gray-600 dark:text-gray-400\">{t('common.loadingPermissions')}</span>\n      </div>\n    );\n  }\n\n  if (!canManageOrganization()) {\n    return (\n      <div className=\"text-center py-8\">\n        <p className=\"text-gray-500 dark:text-gray-400\">{t('organization.api.noPermission')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-2 mb-4\">\n        <KeyIcon className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n          {t('organization.api.title')}\n        </h3>\n      </div>\n\n      <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">\n        {t('organization.api.description')}\n      </p>\n\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        {/* LobbyPMS */}\n        <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n            {t('organization.api.lobbyPms.title')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <SecretInput\n              name=\"lobbyPmsApiKey\"\n              value={apiSettings.lobbyPmsApiKey}\n              onChange={handleChange}\n              label={t('organization.api.lobbyPms.apiKey')}\n              placeholder=\"API Token\"\n            />\n\n            <div>\n              <label htmlFor=\"lobbyPmsPropertyId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.lobbyPms.propertyId')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"lobbyPmsPropertyId\"\n                name=\"lobbyPmsPropertyId\"\n                value={apiSettings.lobbyPmsPropertyId}\n                onChange={handleChange}\n                placeholder=\"Property ID\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  name=\"lobbyPmsSyncEnabled\"\n                  checked={apiSettings.lobbyPmsSyncEnabled}\n                  onChange={handleChange}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                  {t('organization.api.lobbyPms.syncEnabled')}\n                </span>\n              </label>\n\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  name=\"lobbyPmsAutoCreateTasks\"\n                  checked={apiSettings.lobbyPmsAutoCreateTasks}\n                  onChange={handleChange}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                  {t('organization.api.lobbyPms.autoCreateTasks')}\n                </span>\n              </label>\n\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  name=\"lobbyPmsAutoSendReservationInvitation\"\n                  checked={apiSettings.lobbyPmsAutoSendReservationInvitation}\n                  onChange={handleChange}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                  {t('organization.api.lobbyPms.autoSendReservationInvitation', 'Automatisch Einladung bei Reservation-Erstellung senden')}\n                </span>\n              </label>\n            </div>\n\n            <div>\n              <label htmlFor=\"lobbyPmsLateCheckInThreshold\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.lobbyPms.lateCheckInThreshold')}\n              </label>\n              <input\n                type=\"time\"\n                id=\"lobbyPmsLateCheckInThreshold\"\n                name=\"lobbyPmsLateCheckInThreshold\"\n                value={apiSettings.lobbyPmsLateCheckInThreshold}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* TTLock */}\n        <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n            {t('organization.api.ttlock.title')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"ttlockApiUrl\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.ttlock.apiUrl')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"ttlockApiUrl\"\n                name=\"ttlockApiUrl\"\n                value={apiSettings.ttlockApiUrl}\n                onChange={handleChange}\n                placeholder=\"https://open.ttlock.com\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"ttlockClientId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.ttlock.clientId')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"ttlockClientId\"\n                name=\"ttlockClientId\"\n                value={apiSettings.ttlockClientId}\n                onChange={handleChange}\n                placeholder=\"Client ID\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <SecretInput\n              name=\"ttlockClientSecret\"\n              value={apiSettings.ttlockClientSecret}\n              onChange={handleChange}\n              label={t('organization.api.ttlock.clientSecret')}\n              placeholder=\"Client Secret\"\n            />\n\n            <div>\n              <label htmlFor=\"ttlockUsername\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.ttlock.username')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"ttlockUsername\"\n                name=\"ttlockUsername\"\n                value={apiSettings.ttlockUsername}\n                onChange={handleChange}\n                placeholder=\"TTLock App Username (z.B. +573024498991)\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                {t('organization.api.ttlock.usernameHint')}\n              </p>\n            </div>\n\n            <SecretInput\n              name=\"ttlockPassword\"\n              value={apiSettings.ttlockPassword}\n              onChange={handleChange}\n              label={t('organization.api.ttlock.password')}\n              placeholder=\"TTLock App Password\"\n            />\n            <p className=\"text-xs text-gray-500 dark:text-gray-400 -mt-2\">\n              {t('organization.api.ttlock.passwordHint')}\n            </p>\n\n            <div>\n              <label htmlFor=\"ttlockPasscodeType\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.ttlock.passcodeType')}\n              </label>\n              <select\n                id=\"ttlockPasscodeType\"\n                name=\"ttlockPasscodeType\"\n                value={apiSettings.ttlockPasscodeType}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              >\n                <option value=\"auto\">{t('organization.api.ttlock.passcodeTypeAuto')}</option>\n                <option value=\"custom\">{t('organization.api.ttlock.passcodeTypeCustom')}</option>\n              </select>\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                {t('organization.api.ttlock.passcodeTypeHint')}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* SIRE */}\n        <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n            {t('organization.api.sire.title')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"sireApiUrl\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.sire.apiUrl')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"sireApiUrl\"\n                name=\"sireApiUrl\"\n                value={apiSettings.sireApiUrl}\n                onChange={handleChange}\n                placeholder=\"https://api.sire.gov.co\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <SecretInput\n              name=\"sireApiKey\"\n              value={apiSettings.sireApiKey}\n              onChange={handleChange}\n              label={t('organization.api.sire.apiKey')}\n              placeholder=\"API Key\"\n            />\n\n            <SecretInput\n              name=\"sireApiSecret\"\n              value={apiSettings.sireApiSecret}\n              onChange={handleChange}\n              label={t('organization.api.sire.apiSecret')}\n              placeholder=\"API Secret\"\n            />\n\n            <div>\n              <label htmlFor=\"sirePropertyCode\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.sire.propertyCode')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"sirePropertyCode\"\n                name=\"sirePropertyCode\"\n                value={apiSettings.sirePropertyCode}\n                onChange={handleChange}\n                placeholder=\"Property Code\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  name=\"sireEnabled\"\n                  checked={apiSettings.sireEnabled}\n                  onChange={handleChange}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                  {t('organization.api.sire.enabled')}\n                </span>\n              </label>\n\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  name=\"sireAutoRegisterOnCheckIn\"\n                  checked={apiSettings.sireAutoRegisterOnCheckIn}\n                  onChange={handleChange}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                  {t('organization.api.sire.autoRegisterOnCheckIn')}\n                </span>\n              </label>\n            </div>\n          </div>\n        </div>\n\n        {/* Bold Payment */}\n        <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n            {t('organization.api.boldPayment.title')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <SecretInput\n              name=\"boldPaymentApiKey\"\n              value={apiSettings.boldPaymentApiKey}\n              onChange={handleChange}\n              label={t('organization.api.boldPayment.apiKey')}\n              placeholder=\"API Key\"\n            />\n\n            <div>\n              <label htmlFor=\"boldPaymentMerchantId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.boldPayment.merchantId')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"boldPaymentMerchantId\"\n                name=\"boldPaymentMerchantId\"\n                value={apiSettings.boldPaymentMerchantId}\n                onChange={handleChange}\n                placeholder=\"Merchant ID\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"boldPaymentEnvironment\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.boldPayment.environment')}\n              </label>\n              <select\n                id=\"boldPaymentEnvironment\"\n                name=\"boldPaymentEnvironment\"\n                value={apiSettings.boldPaymentEnvironment}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              >\n                <option value=\"sandbox\">{t('organization.api.boldPayment.sandbox')}</option>\n                <option value=\"production\">{t('organization.api.boldPayment.production')}</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* WhatsApp */}\n        <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n            {t('organization.api.whatsapp.title')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"whatsappProvider\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.whatsapp.provider')}\n              </label>\n              <select\n                id=\"whatsappProvider\"\n                name=\"whatsappProvider\"\n                value={apiSettings.whatsappProvider}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              >\n                <option value=\"twilio\">{t('organization.api.whatsapp.providerTwilio')}</option>\n                <option value=\"whatsapp-business-api\">{t('organization.api.whatsapp.providerBusinessApi')}</option>\n              </select>\n            </div>\n\n            <SecretInput\n              name=\"whatsappApiKey\"\n              value={apiSettings.whatsappApiKey}\n              onChange={handleChange}\n              label={t('organization.api.whatsapp.apiKey')}\n              placeholder=\"API Key / Access Token\"\n            />\n\n            <SecretInput\n              name=\"whatsappApiSecret\"\n              value={apiSettings.whatsappApiSecret}\n              onChange={handleChange}\n              label={t('organization.api.whatsapp.apiSecret')}\n              placeholder=\"API Secret (optional)\"\n            />\n\n            <div>\n              <label htmlFor=\"whatsappPhoneNumberId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.whatsapp.phoneNumberId')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"whatsappPhoneNumberId\"\n                name=\"whatsappPhoneNumberId\"\n                value={apiSettings.whatsappPhoneNumberId}\n                onChange={handleChange}\n                placeholder=\"Phone Number ID\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex justify-end gap-2 pt-4\">\n          <button\n            type=\"button\"\n            onClick={handleClear}\n            className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n            title={t('organization.api.clear')}\n          >\n            <ArrowPathIcon className=\"h-5 w-5\" />\n          </button>\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n            title={loading ? t('organization.saving') : t('common.save')}\n          >\n            {loading ? (\n              <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n            ) : (\n              <CheckIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default ApiConfigurationTab;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { UpdateOrganizationRequest, Organization } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\nimport { useLanguage } from '../../hooks/useLanguage.ts';\nimport { useAuth } from '../../hooks/useAuth.tsx';\nimport RoleConfigurationTab from './RoleConfigurationTab.tsx';\nimport DocumentConfigurationTab from './DocumentConfigurationTab.tsx';\nimport SMTPConfigurationTab from './SMTPConfigurationTab.tsx';\nimport ApiConfigurationTab from './ApiConfigurationTab.tsx';\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n  organization: Organization | null;\n}\n\nconst EditOrganizationModal: React.FC<Props> = ({ isOpen, onClose, onSuccess, organization }) => {\n  const { t } = useTranslation();\n  const { fetchCurrentUser } = useAuth();\n  const [formData, setFormData] = useState<UpdateOrganizationRequest>({\n    displayName: '',\n    domain: '',\n    logo: '',\n    country: null,\n    nit: null,\n    settings: {}\n  });\n  const [selectedCountry, setSelectedCountry] = useState<string>('');\n  const [nit, setNit] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  const { organizationLanguage, setOrganizationLanguage } = useLanguage();\n  const [selectedOrgLanguage, setSelectedOrgLanguage] = useState<string>('');\n  const [savingOrgLanguage, setSavingOrgLanguage] = useState<boolean>(false);\n  const [activeTab, setActiveTab] = useState<'general' | 'roles' | 'documents' | 'smtp' | 'api'>('general');\n  const [logoFile, setLogoFile] = useState<File | null>(null);\n  const [logoPreview, setLogoPreview] = useState<string | null>(null);\n\n  // Lnder-Liste\n  const COUNTRIES = [\n    { code: 'CO', name: t('countries.CO') },\n    { code: 'CH', name: t('countries.CH') },\n    { code: 'DE', name: t('countries.DE') },\n    { code: 'AT', name: t('countries.AT') }\n  ];\n\n  // Lade Organisations-Daten wenn Modal geffnet wird\n  useEffect(() => {\n    if (isOpen && organization) {\n      const orgSettings = organization.settings || {};\n      setFormData({\n        displayName: organization.displayName || '',\n        domain: organization.domain || '',\n        logo: organization.logo || '',\n        country: organization.country || null,\n        nit: organization.nit || null,\n        settings: orgSettings\n      });\n      \n      // Setze Land direkt aus organization (statt aus settings)\n      setSelectedCountry(organization.country || '');\n      setNit(organization.nit || '');\n      \n      // Setze Logo-Preview wenn Logo vorhanden\n      if (organization.logo) {\n        setLogoPreview(organization.logo);\n      } else {\n        setLogoPreview(null);\n      }\n      setLogoFile(null);\n      \n      // Lade Organisation-Sprache\n      const loadOrgLanguage = async () => {\n        try {\n          const langResponse = await organizationService.getOrganizationLanguage();\n          setSelectedOrgLanguage(langResponse.language || '');\n        } catch (langError) {\n          console.error(t('organization.loadLanguageError'), langError);\n          setSelectedOrgLanguage('');\n        }\n      };\n      \n      loadOrgLanguage();\n    }\n  }, [isOpen, organization, t]);\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    \n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value } = e.target;\n    if (name === 'country') {\n      setSelectedCountry(value);\n      setFormData(prev => ({\n        ...prev,\n        country: value || null\n      }));\n      // Wenn Country nicht \"CO\" ist, NIT zurcksetzen\n      if (value !== 'CO') {\n        setNit('');\n        setFormData(prev => ({\n          ...prev,\n          nit: null\n        }));\n      }\n    } else if (name === 'nit') {\n      setNit(value);\n      setFormData(prev => ({\n        ...prev,\n        nit: value || null\n      }));\n    } else {\n      setFormData(prev => ({ ...prev, [name]: value }));\n    }\n    // Fehler fr dieses Feld lschen\n    if (errors[name]) {\n      setErrors(prev => ({ ...prev, [name]: '' }));\n    }\n  };\n\n  const handleLogoFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    // Prfe Dateityp\n    if (!file.type.match('image/(png|jpeg|jpg)')) {\n      showMessage(t('organization.logoInvalidType') || 'Nur PNG und JPEG Dateien sind erlaubt', 'error');\n      return;\n    }\n\n    // Prfe Dateigre (max 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      showMessage(t('organization.logoTooLarge') || 'Logo darf maximal 5MB gro sein', 'error');\n      return;\n    }\n\n    setLogoFile(file);\n\n    // Erstelle Preview\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      const base64String = reader.result as string;\n      setLogoPreview(base64String);\n      setFormData(prev => ({ ...prev, logo: base64String }));\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    try {\n      setLoading(true);\n      setErrors({});\n      await organizationService.updateOrganization(formData);\n      showMessage(t('organization.updateSuccess'), 'success');\n      \n      // User-Daten neu laden, damit das Logo im Header aktualisiert wird\n      try {\n        await fetchCurrentUser();\n      } catch (error) {\n        console.error('Fehler beim Neuladen der User-Daten:', error);\n      }\n      \n      onClose();\n      if (onSuccess) {\n        onSuccess();\n      }\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('organization.updateError');\n      showMessage(errorMessage, 'error');\n      setErrors({ submit: errorMessage });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    // Formular zurcksetzen\n    if (organization) {\n      const orgSettings = organization.settings || {};\n      setFormData({\n        displayName: organization.displayName || '',\n        domain: organization.domain || '',\n        logo: organization.logo || '',\n        country: organization.country || null,\n        nit: organization.nit || null,\n        settings: orgSettings\n      });\n      setSelectedCountry(organization.country || '');\n      setNit(organization.nit || '');\n    }\n    setErrors({});\n    onClose();\n  };\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('organization.edit.title')}\n              </Dialog.Title>\n              <button\n                onClick={handleClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-4\">\n              {errors.submit && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {errors.submit}\n                </div>\n              )}\n\n              <div className=\"space-y-4\">\n                <div>\n                  <label \n                    htmlFor=\"displayName\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.displayName')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"displayName\"\n                    name=\"displayName\"\n                    value={formData.displayName || ''}\n                    onChange={handleChange}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.displayName \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  />\n                  {errors.displayName && (\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"domain\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.domain')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"domain\"\n                    name=\"domain\"\n                    value={formData.domain || ''}\n                    onChange={handleChange}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  />\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"logo-mobile\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.logo') || 'Logo'}\n                  </label>\n                  <input\n                    type=\"file\"\n                    id=\"logo-mobile\"\n                    name=\"logo\"\n                    accept=\"image/png,image/jpeg,image/jpg\"\n                    onChange={handleLogoFileChange}\n                    className=\"mt-1 block w-full text-sm text-gray-500 dark:text-gray-400\n                      file:mr-4 file:py-2 file:px-4\n                      file:rounded-md file:border-0\n                      file:text-sm file:font-semibold\n                      file:bg-blue-50 file:text-blue-700\n                      hover:file:bg-blue-100\n                      dark:file:bg-blue-900 dark:file:text-blue-300\n                      dark:hover:file:bg-blue-800\"\n                  />\n                  {logoPreview && (\n                    <div className=\"mt-2\">\n                      <img \n                        src={logoPreview} \n                        alt=\"Logo Preview\" \n                        className=\"h-20 w-auto border border-gray-300 dark:border-gray-600 rounded\"\n                      />\n                    </div>\n                  )}\n                  {formData.logo && !logoPreview && (\n                    <div className=\"mt-2\">\n                      <img \n                        src={formData.logo} \n                        alt=\"Current Logo\" \n                        className=\"h-20 w-auto border border-gray-300 dark:border-gray-600 rounded\"\n                      />\n                    </div>\n                  )}\n                </div>\n\n                {/* Land */}\n                <div className=\"border-t pt-4\">\n                  <label \n                    htmlFor=\"country\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.country')}\n                  </label>\n                  <select\n                    id=\"country\"\n                    name=\"country\"\n                    value={selectedCountry}\n                    onChange={handleChange}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  >\n                    <option value=\"\">{t('organization.selectCountry')}</option>\n                    {COUNTRIES.map((country) => (\n                      <option key={country.code} value={country.code}>\n                        {country.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                {/* Organisation-Sprache */}\n                <div className=\"border-t pt-4\">\n                  <label \n                    htmlFor=\"organizationLanguage\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.language')}\n                  </label>\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">\n                    {t('organization.languageDescription')}\n                  </p>\n                  <select\n                    id=\"organizationLanguage\"\n                    value={selectedOrgLanguage || organizationLanguage || ''}\n                    onChange={async (e) => {\n                      const newLanguage = e.target.value;\n                      setSelectedOrgLanguage(newLanguage);\n                      if (newLanguage && newLanguage !== organizationLanguage) {\n                        setSavingOrgLanguage(true);\n                        try {\n                          await setOrganizationLanguage(newLanguage);\n                          showMessage(t('common.save'), 'success');\n                        } catch (error) {\n                          console.error(t('organization.saveLanguageError'), error);\n                          showMessage(t('worktime.messages.orgLanguageError'), 'error');\n                        } finally {\n                          setSavingOrgLanguage(false);\n                        }\n                      }\n                    }}\n                    disabled={savingOrgLanguage || loading}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed\"\n                  >\n                    <option value=\"\">{t('settings.useOrganizationLanguage')} ({t('worktime.language.fallback')}: {t('worktime.language.german')})</option>\n                    <option value=\"de\">{t('worktime.language.german')}</option>\n                    <option value=\"es\">{t('worktime.language.spanish')}</option>\n                    <option value=\"en\">{t('worktime.language.english')}</option>\n                  </select>\n                </div>\n              </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                  title={t('common.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title={loading ? t('organization.saving') : t('common.save')}\n                >\n                  {loading ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={handleClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('organization.edit.title')}\n          </h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        {/* Tabs Navigation */}\n        <div className=\"border-b border-gray-200 dark:border-gray-700\">\n          <nav className=\"-mb-px flex space-x-4 px-4\" aria-label=\"Tabs\">\n            <button\n              type=\"button\"\n              onClick={() => setActiveTab('general')}\n              className={`${\n                activeTab === 'general'\n                  ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n              } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n            >\n              {t('organization.tabs.general')}\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setActiveTab('roles')}\n              className={`${\n                activeTab === 'roles'\n                  ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n              } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n            >\n              {t('organization.tabs.roles')}\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setActiveTab('documents')}\n              className={`${\n                activeTab === 'documents'\n                  ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n              } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n            >\n              {t('organization.tabs.documents')}\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setActiveTab('smtp')}\n              className={`${\n                activeTab === 'smtp'\n                  ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n              } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n            >\n              {t('organization.tabs.smtp')}\n            </button>\n            {selectedCountry === 'CO' && (\n              <button\n                type=\"button\"\n                onClick={() => setActiveTab('api')}\n                className={`${\n                  activeTab === 'api'\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n              >\n                {t('organization.tabs.api')}\n              </button>\n            )}\n          </nav>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {errors.submit && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {errors.submit}\n            </div>\n          )}\n\n          {activeTab === 'general' && (\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label \n                htmlFor=\"displayName\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.displayName')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"displayName\"\n                name=\"displayName\"\n                value={formData.displayName || ''}\n                onChange={handleChange}\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                  errors.displayName \n                    ? 'border-red-300 dark:border-red-600' \n                    : 'border-gray-300 dark:border-gray-600'\n                }`}\n              />\n              {errors.displayName && (\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\n              )}\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"domain\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.domain')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"domain\"\n                name=\"domain\"\n                value={formData.domain || ''}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"logo\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.logo') || 'Logo'}\n              </label>\n              <input\n                type=\"file\"\n                id=\"logo\"\n                name=\"logo\"\n                accept=\"image/png,image/jpeg,image/jpg\"\n                onChange={handleLogoFileChange}\n                className=\"mt-1 block w-full text-sm text-gray-500 dark:text-gray-400\n                  file:mr-4 file:py-2 file:px-4\n                  file:rounded-md file:border-0\n                  file:text-sm file:font-semibold\n                  file:bg-blue-50 file:text-blue-700\n                  hover:file:bg-blue-100\n                  dark:file:bg-blue-900 dark:file:text-blue-300\n                  dark:hover:file:bg-blue-800\"\n              />\n              {logoPreview && (\n                <div className=\"mt-2\">\n                  <img \n                    src={logoPreview} \n                    alt=\"Logo Preview\" \n                    className=\"h-20 w-auto border border-gray-300 dark:border-gray-600 rounded\"\n                  />\n                </div>\n              )}\n              {formData.logo && !logoPreview && (\n                <div className=\"mt-2\">\n                  <img \n                    src={formData.logo} \n                    alt=\"Current Logo\" \n                    className=\"h-20 w-auto border border-gray-300 dark:border-gray-600 rounded\"\n                  />\n                </div>\n              )}\n            </div>\n\n            {/* Land */}\n            <div className=\"border-t pt-4\">\n              <label \n                htmlFor=\"country\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.country')}\n              </label>\n              <select\n                id=\"country\"\n                name=\"country\"\n                value={selectedCountry}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              >\n                <option value=\"\">{t('organization.selectCountry')}</option>\n                {COUNTRIES.map((country) => (\n                  <option key={country.code} value={country.code}>\n                    {country.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* NIT (nur fr Kolumbien) */}\n            {selectedCountry === 'CO' && (\n              <div>\n                <label \n                  htmlFor=\"nit\" \n                  className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                >\n                  {t('organization.nit')}\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"nit\"\n                  name=\"nit\"\n                  value={nit}\n                  onChange={handleChange}\n                  placeholder={t('organization.nitDescription')}\n                  className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                />\n                <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                  {t('organization.nitDescription')}\n                </p>\n              </div>\n            )}\n\n            {/* Organisation-Sprache */}\n            <div className=\"border-t pt-4\">\n              <label \n                htmlFor=\"organizationLanguage\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.language')}\n              </label>\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">\n                {t('organization.languageDescription')}\n              </p>\n              <select\n                id=\"organizationLanguage\"\n                value={selectedOrgLanguage || organizationLanguage || ''}\n                onChange={async (e) => {\n                  const newLanguage = e.target.value;\n                  setSelectedOrgLanguage(newLanguage);\n                  if (newLanguage && newLanguage !== organizationLanguage) {\n                    setSavingOrgLanguage(true);\n                    try {\n                      await setOrganizationLanguage(newLanguage);\n                      showMessage(t('common.save'), 'success');\n                    } catch (error) {\n                      console.error('Fehler beim Speichern der Organisation-Sprache:', error);\n                      showMessage(t('worktime.messages.orgLanguageError'), 'error');\n                    } finally {\n                      setSavingOrgLanguage(false);\n                    }\n                  }\n                }}\n                disabled={savingOrgLanguage || loading}\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed\"\n              >\n                <option value=\"\">{t('settings.useOrganizationLanguage')} ({t('worktime.language.fallback')}: {t('worktime.language.german')})</option>\n                <option value=\"de\">{t('worktime.language.german')}</option>\n                <option value=\"es\">{t('worktime.language.spanish')}</option>\n                <option value=\"en\">{t('worktime.language.english')}</option>\n              </select>\n            </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                  title={t('common.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title={loading ? t('organization.saving') : t('common.save')}\n                >\n                  {loading ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          )}\n\n          {activeTab === 'roles' && (\n            <RoleConfigurationTab \n              organization={organization}\n              onSave={() => {\n                if (onSuccess) {\n                  onSuccess();\n                }\n              }}\n            />\n          )}\n\n          {activeTab === 'documents' && (\n            <DocumentConfigurationTab \n              organization={organization}\n              onSave={() => {\n                if (onSuccess) {\n                  onSuccess();\n                }\n              }}\n            />\n          )}\n\n          {activeTab === 'smtp' && (\n            <SMTPConfigurationTab \n              organization={organization}\n              onSave={() => {\n                if (onSuccess) {\n                  onSuccess();\n                }\n              }}\n            />\n          )}\n\n          {activeTab === 'api' && selectedCountry === 'CO' && (\n            <ApiConfigurationTab \n              organization={organization}\n              onSave={() => {\n                if (onSuccess) {\n                  onSuccess();\n                }\n              }}\n            />\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default EditOrganizationModal;\n\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { XMarkIcon, ArrowPathIcon, FunnelIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { OrganizationJoinRequest } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport FilterPane from '../FilterPane.tsx';\nimport SavedFilterTags from '../SavedFilterTags.tsx';\nimport { FilterCondition } from '../FilterRow.tsx';\nimport axiosInstance from '../../config/axios.ts';\n\n// Status-Badge Funktionen\nconst getStatusColor = (status: string) => {\n  switch (status) {\n    case 'pending':\n      return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300';\n    case 'approved':\n      return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300';\n    case 'rejected':\n      return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300';\n    case 'withdrawn':\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\n    default:\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\n  }\n};\n\nconst getStatusText = (status: string, t: any) => {\n  switch (status) {\n    case 'pending':\n      return t('joinRequestsList.status.pending');\n    case 'approved':\n      return t('joinRequestsList.status.approved');\n    case 'rejected':\n      return t('joinRequestsList.status.rejected');\n    case 'withdrawn':\n      return t('joinRequestsList.status.withdrawn');\n    default:\n      return status;\n  }\n};\n\nconst MY_JOIN_REQUESTS_TABLE_ID = 'my-join-requests-table';\n\nconst MyJoinRequestsList: React.FC = () => {\n  const { t } = useTranslation();\n  const [joinRequests, setJoinRequests] = useState<OrganizationJoinRequest[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isFilterPanelOpen, setIsFilterPanelOpen] = useState<boolean>(false);\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const { showMessage } = useMessage();\n  const mountedRef = useRef(true);\n  const [withdrawingId, setWithdrawingId] = useState<number | null>(null);\n  \n  // Filter State Management (Controlled Mode)\n  const [activeFilterName, setActiveFilterName] = useState<string>('Alle');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n\n  useEffect(() => {\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    console.log('MyJoinRequestsList: useEffect called - component mounted');\n    \n    // WICHTIG: State beim Mount zurcksetzen, um Caching zwischen Usern zu vermeiden\n    console.log('MyJoinRequestsList: Resetting state on mount to prevent data leaks');\n    setJoinRequests([]);\n    setError(null);\n    setLoading(true);\n    \n    let isMounted = true;\n    \n    const fetchMyJoinRequests = async () => {\n      if (!isMounted) {\n        console.log('MyJoinRequestsList: Component unmounted, skipping fetch');\n        return;\n      }\n      \n      console.log('MyJoinRequestsList: Starting fetch');\n      \n      // Timeout nach 10 Sekunden\n      const timeoutId = setTimeout(() => {\n        if (isMounted) {\n          console.error('Request timeout after 10 seconds');\n          setError('Anfrage dauert zu lange. Bitte Seite neu laden.');\n          setLoading(false);\n        }\n      }, 10000);\n      \n      try {\n        console.log('MyJoinRequestsList: Setting loading to true');\n        setLoading(true);\n        setError(null);\n        \n        // Debug: Log die URL die aufgerufen wird\n        console.log('MyJoinRequestsList: Fetching my join requests from:', API_ENDPOINTS.ORGANIZATIONS.MY_JOIN_REQUESTS);\n        \n        const requests = await organizationService.getMyJoinRequests();\n        \n        console.log('MyJoinRequestsList: Received requests:', requests);\n        console.log('MyJoinRequestsList: Requests type:', typeof requests);\n        console.log('MyJoinRequestsList: Requests isArray:', Array.isArray(requests));\n        console.log('MyJoinRequestsList: Requests length:', requests?.length || 0);\n        \n        // SICHERHEIT: Validiere, dass alle Anfragen wirklich Arrays sind\n        if (!Array.isArray(requests)) {\n          console.error(' MyJoinRequestsList: Response is not an array!', requests);\n          throw new Error('Ungltige Antwort vom Server');\n        }\n        \n        clearTimeout(timeoutId);\n        \n        // State immer setzen, auch wenn Component unmounted ist\n        // (React kann den State trotzdem setzen, wenn Component wieder gemountet wird)\n        if (isMounted) {\n          console.log('MyJoinRequestsList: Setting joinRequests state');\n          setJoinRequests(requests);\n          console.log('MyJoinRequestsList: State updated with', requests.length, 'requests');\n        } else {\n          console.log('MyJoinRequestsList: Component was unmounted, but setting state anyway');\n          setJoinRequests(requests);\n        }\n      } catch (err: any) {\n        clearTimeout(timeoutId);\n        \n        if (!isMounted) {\n          console.log('MyJoinRequestsList: Component unmounted during error, skipping error handling');\n          return;\n        }\n        \n        console.error('MyJoinRequestsList: Error fetching my join requests:', err);\n        console.error('MyJoinRequestsList: Error response:', err.response);\n        console.error('MyJoinRequestsList: Error status:', err.response?.status);\n        console.error('MyJoinRequestsList: Error data:', err.response?.data);\n        \n        const errorMessage = err.response?.data?.message || err.message || t('myJoinRequests.loadError');\n        setError(errorMessage);\n        setTimeout(() => {\n          showMessage(errorMessage, 'error');\n        }, 0);\n      } finally {\n        if (isMounted) {\n          console.log('MyJoinRequestsList: Setting loading to false');\n          setLoading(false);\n        } else {\n          // Auch wenn unmounted, loading auf false setzen\n          console.log('MyJoinRequestsList: Component unmounted, but setting loading to false anyway');\n          setLoading(false);\n        }\n      }\n    };\n\n    // IMMER neu laden beim Mount (auch beim Tab-Wechsel zurck)\n    fetchMyJoinRequests();\n    \n    return () => {\n      console.log('MyJoinRequestsList: useEffect cleanup - component unmounting');\n      isMounted = false;\n      mountedRef.current = false;\n      // State beim Unmount zurcksetzen\n      setJoinRequests([]);\n      setError(null);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleWithdraw = async (requestId: number) => {\n    if (!window.confirm(t('myJoinRequests.confirmWithdraw'))) {\n      return;\n    }\n\n    try {\n      setWithdrawingId(requestId);\n      await organizationService.withdrawJoinRequest(requestId);\n      \n      // Update local state\n      setJoinRequests(prev => \n        prev.map(req => \n          req.id === requestId \n            ? { ...req, status: 'withdrawn' as const, processedAt: new Date().toISOString() }\n            : req\n        )\n      );\n      \n      showMessage(t('myJoinRequests.withdrawSuccess'), 'success');\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('myJoinRequests.withdrawError');\n      showMessage(errorMessage, 'error');\n    } finally {\n      setWithdrawingId(null);\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('de-DE', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // Filter-Funktionen\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n  };\n\n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n\n  // Filter Change Handler (Controlled Mode)\n  const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators);\n  };\n\n  const getActiveFilterCount = () => {\n    return filterConditions.length;\n  };\n\n  // Initialer Default-Filter setzen (Controlled Mode)\n  useEffect(() => {\n    const setInitialFilter = async () => {\n      try {\n        const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(MY_JOIN_REQUESTS_TABLE_ID));\n        const filters = response.data;\n        \n        const alleFilter = filters.find((filter: any) => filter.name === 'Alle');\n        if (alleFilter) {\n          setActiveFilterName('Alle');\n          setSelectedFilterId(alleFilter.id);\n          applyFilterConditions(alleFilter.conditions, alleFilter.operators);\n        }\n      } catch (error) {\n        console.error('Fehler beim Setzen des initialen Filters:', error);\n      }\n    };\n\n    setInitialFilter();\n  }, []);\n\n  // Standard-Filter erstellen und speichern\n  useEffect(() => {\n    const createStandardFilters = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        \n        if (!token) {\n          console.error('Nicht authentifiziert');\n          return;\n        }\n\n        // Prfen, ob die Standard-Filter bereits existieren\n        const existingFiltersResponse = await axiosInstance.get(\n          API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(MY_JOIN_REQUESTS_TABLE_ID)\n        );\n\n        const existingFilters = existingFiltersResponse.data || [];\n        const alleFilterExists = existingFilters.some((filter: any) => filter.name === 'Alle');\n\n        // Erstelle \"Alle\"-Filter, wenn er noch nicht existiert\n        if (!alleFilterExists) {\n          const alleFilter = {\n            tableId: MY_JOIN_REQUESTS_TABLE_ID,\n            name: 'Alle',\n            conditions: [],\n            operators: []\n          };\n\n          await axiosInstance.post(\n            API_ENDPOINTS.SAVED_FILTERS.BASE,\n            alleFilter\n          );\n          console.log('Alle-Filter fr Meine Beitrittsanfragen erstellt');\n        }\n      } catch (error) {\n        console.error('Fehler beim Erstellen der Standard-Filter:', error);\n      }\n    };\n\n    createStandardFilters();\n  }, []);\n\n  // Gefilterte Join-Requests\n  const filteredJoinRequests = useMemo(() => {\n    let filtered = [...joinRequests];\n\n    // Suchfeld-Filter\n    if (searchTerm) {\n      const searchLower = searchTerm.toLowerCase();\n      filtered = filtered.filter(request => {\n        const orgName = (request.organization.displayName || request.organization.name || '').toLowerCase();\n        const message = request.message?.toLowerCase() || '';\n        return orgName.includes(searchLower) || message.includes(searchLower);\n      });\n    }\n\n    // Filter-Bedingungen aus FilterPane\n    if (filterConditions.length > 0) {\n      filtered = filterConditions.reduce((acc, condition, index) => {\n        if (!condition.column || condition.value === null || condition.value === '') {\n          return acc;\n        }\n\n        const operator = condition.operator;\n        const value = condition.value;\n\n        return acc.filter(request => {\n          switch (condition.column) {\n            case 'organization':\n              const orgName = (request.organization.displayName || request.organization.name || '').toLowerCase();\n              const searchValue = String(value).toLowerCase();\n              \n              if (operator === 'contains') {\n                return orgName.includes(searchValue);\n              } else if (operator === 'equals') {\n                return orgName === searchValue;\n              } else if (operator === 'startsWith') {\n                return orgName.startsWith(searchValue);\n              }\n              return false;\n\n            case 'message':\n              const message = request.message?.toLowerCase() || '';\n              const msgValue = String(value).toLowerCase();\n              \n              if (operator === 'contains') {\n                return message.includes(msgValue);\n              } else if (operator === 'equals') {\n                return message === msgValue;\n              } else if (operator === 'startsWith') {\n                return message.startsWith(msgValue);\n              }\n              return false;\n\n            case 'status':\n              if (operator === 'equals') {\n                return request.status === value;\n              }\n              return false;\n\n            default:\n              return true;\n          }\n        });\n      }, filtered);\n    }\n\n    return filtered;\n  }, [joinRequests, searchTerm, filterConditions, filterLogicalOperators]);\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n      {/* Titelzeile mit Icon, Suchfeld, Filter-Button */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <h2 className=\"text-xl font-semibold dark:text-white\">\n          {t('myJoinRequests.title')}\n        </h2>\n        \n        <div className=\"flex items-center gap-1.5\">\n          {/* Suchfeld */}\n          <input\n            type=\"text\"\n            placeholder={t('common.search', { defaultValue: 'Suchen...' })}\n            className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n\n          {/* Filter-Button */}\n          <button\n            className={`p-2 rounded-md border ${getActiveFilterCount() > 0 ? 'border-blue-300 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700'} relative`}\n            onClick={() => setIsFilterPanelOpen(!isFilterPanelOpen)}\n            title={t('common.filter')}\n          >\n            <FunnelIcon className=\"h-5 w-5\" />\n            {getActiveFilterCount() > 0 && (\n              <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center\">\n                {getActiveFilterCount()}\n              </span>\n            )}\n          </button>\n        </div>\n      </div>\n\n      {/* Filter-Panel */}\n      {isFilterPanelOpen && (\n        <div className=\"mb-4\">\n          <FilterPane\n            columns={[\n              { id: 'organization', label: t('myJoinRequests.filter.organization', { defaultValue: 'Organisation' }) },\n              { id: 'message', label: t('joinRequestsList.filter.message') },\n              { id: 'status', label: t('joinRequestsList.status.title', { defaultValue: 'Status' }) }\n            ]}\n            onApply={applyFilterConditions}\n            onReset={resetFilterConditions}\n            savedConditions={filterConditions}\n            savedOperators={filterLogicalOperators}\n            tableId={MY_JOIN_REQUESTS_TABLE_ID}\n          />\n        </div>\n      )}\n\n      {/* Gespeicherte Filter als Tags anzeigen */}\n      <SavedFilterTags\n        tableId={MY_JOIN_REQUESTS_TABLE_ID}\n        onSelectFilter={applyFilterConditions}\n        onReset={resetFilterConditions}\n        activeFilterName={activeFilterName}\n        selectedFilterId={selectedFilterId}\n        onFilterChange={handleFilterChange}\n        defaultFilterName=\"Alle\"\n      />\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"mb-4 p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded\">\n          {error}\n        </div>\n      )}\n\n      {/* Loading State */}\n      {loading ? (\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('myJoinRequests.loading')}</span>\n        </div>\n      ) : joinRequests.length === 0 ? (\n        <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n          {t('myJoinRequests.noRequests')}\n        </div>\n      ) : (\n        /* Cards fr Join-Requests */\n        <div className=\"space-y-4\">\n          {filteredJoinRequests.map(request => (\n            <div\n              key={request.id}\n              className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\"\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                        {request.organization.displayName || request.organization.name}\n                      </h3>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        {formatDate(request.createdAt)}\n                      </p>\n                    </div>\n                    <span className={`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(request.status)}`}>\n                      {getStatusText(request.status, t)}\n                    </span>\n                  </div>\n\n                  {request.message && (\n                    <div className=\"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\n                      <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                        <span className=\"font-medium\">{t('joinRequestsList.filter.message')}:</span> {request.message}\n                      </p>\n                    </div>\n                  )}\n\n                  {request.response && (\n                    <div className=\"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-700\">\n                      <p className=\"text-sm text-blue-700 dark:text-blue-300\">\n                        <span className=\"font-medium\">{t('joinRequestsList.response')}:</span> {request.response}\n                      </p>\n                    </div>\n                  )}\n\n                  {request.processor && (\n                    <div className=\"mt-2 text-sm text-gray-600 dark:text-gray-400\">\n                      {t('myJoinRequests.processedBy')}: {request.processor.firstName} {request.processor.lastName}\n                      {request.processedAt && ` - ${formatDate(request.processedAt)}`}\n                    </div>\n                  )}\n\n                  {request.status === 'pending' && (\n                    <div className=\"mt-4 flex items-center gap-2\">\n                      <button \n                        onClick={() => handleWithdraw(request.id)}\n                        disabled={withdrawingId === request.id}\n                        className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md dark:bg-red-700 dark:hover:bg-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 flex items-center disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        {withdrawingId === request.id ? (\n                          <>\n                            <ArrowPathIcon className=\"h-4 w-4 mr-1 animate-spin\" />\n                            {t('myJoinRequests.withdrawing')}\n                          </>\n                        ) : (\n                          <>\n                            <XMarkIcon className=\"h-4 w-4 mr-1\" />\n                            {t('myJoinRequests.withdraw')}\n                          </>\n                        )}\n                      </button>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MyJoinRequestsList;\n\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { BuildingOfficeIcon, PlusIcon, UserPlusIcon, UserGroupIcon, ShieldCheckIcon, EnvelopeIcon, ChartBarIcon, PencilIcon } from '@heroicons/react/24/outline';\nimport { useTranslation } from 'react-i18next';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { Organization } from '../../types/organization.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useOrganization } from '../../contexts/OrganizationContext.tsx';\nimport { useAuth } from '../../hooks/useAuth.tsx';\nimport CreateOrganizationModal from './CreateOrganizationModal.tsx';\nimport JoinOrganizationModal from './JoinOrganizationModal.tsx';\nimport EditOrganizationModal from './EditOrganizationModal.tsx';\nimport MyJoinRequestsList from './MyJoinRequestsList.tsx';\n\ninterface OrganizationStats {\n  currentUsers: number;\n  maxUsers: number;\n  availableSlots: number;\n  utilizationPercent: number;\n  _count: {\n    roles: number;\n    joinRequests: number;\n    invitations: number;\n  };\n}\n\nconst OrganizationSettings: React.FC = () => {\n  const [organization, setOrganization] = useState<Organization | null>(null);\n  const [stats, setStats] = useState<OrganizationStats | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [loadingStats, setLoadingStats] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState<boolean>(false);\n  const [isJoinModalOpen, setIsJoinModalOpen] = useState<boolean>(false);\n  const [isEditModalOpen, setIsEditModalOpen] = useState<boolean>(false);\n  const { canViewOrganization, canManageOrganization, loading: permissionsLoading } = usePermissions();\n  const { showMessage } = useMessage();\n  const { t } = useTranslation();\n  const { refreshOrganization } = useOrganization();\n  const { fetchCurrentUser } = useAuth();\n\n  const fetchOrganization = useCallback(async (includeSettings = false) => {\n    try {\n      setLoading(true);\n      setError(null);\n      //  PERFORMANCE: Settings nur laden wenn wirklich bentigt (beim Bearbeiten)\n      const org = await organizationService.getCurrentOrganization(undefined, includeSettings);\n      setOrganization(org);\n      \n      // Statistiken laden\n      try {\n        setLoadingStats(true);\n        const statsData = await organizationService.getOrganizationStats();\n        setStats(statsData);\n      } catch (statsErr: any) {\n        console.error('Fehler beim Laden der Statistiken:', statsErr);\n        // Statistiken-Fehler nicht kritisch, keine Error-Message\n      } finally {\n        setLoadingStats(false);\n      }\n    } catch (err: any) {\n      // Prfe ob es ein 404-Fehler ist (keine Organisation gefunden)\n      if (err.response?.status === 404 && err.response?.data?.hasOrganization === false) {\n        // Benutzer hat keine Organisation - das ist OK, setze Error aber nicht kritisch\n        // Verwende IMMER die bersetzung, nicht die Backend-Nachricht\n        setError(t('organization.notFound'));\n        setOrganization(null);\n        // Zeige Info-Message statt Error\n        showMessage(t('organization.notFound'), 'info');\n      } else {\n        // Andere Fehler - kritisch\n        const errorMessage = err.response?.data?.message || t('organization.loadError');\n        setError(errorMessage);\n        showMessage(errorMessage, 'error');\n      }\n    } finally {\n      setLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const hasInitialLoadRef = useRef(false);\n\n  useEffect(() => {\n    // Warte bis Berechtigungen geladen sind\n    if (permissionsLoading) {\n      return;\n    }\n\n    // Nur einmal beim initialen Load ausfhren\n    if (hasInitialLoadRef.current) {\n      return;\n    }\n\n    const hasPermission = canViewOrganization();\n    if (hasPermission) {\n    hasInitialLoadRef.current = true;\n    //  PERFORMANCE: Initial OHNE Settings laden (nur beim Bearbeiten)\n    fetchOrganization(false);\n    } else {\n      setError(t('organization.noPermission'));\n      setLoading(false);\n      hasInitialLoadRef.current = true;\n    }\n    \n    //  MEMORY: Cleanup - Settings aus State entfernen beim Unmount\n    return () => {\n      setOrganization(null);\n      setStats(null);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [permissionsLoading]);\n\n  const handleEditSuccess = () => {\n    //  PERFORMANCE: Nach Bearbeiten Settings laden (fr Anzeige)\n    fetchOrganization(true);\n    // Aktualisiere auch den OrganizationContext\n    refreshOrganization();\n  };\n\n  //  MEMORY: Settings beim Schlieen des Modals lschen\n  const handleEditModalClose = () => {\n    setIsEditModalOpen(false);\n    // Settings aus State entfernen (nur Settings, nicht die gesamte Organization)\n    if (organization?.settings) {\n      setOrganization({\n        ...organization,\n        settings: undefined\n      });\n    }\n  };\n\n  if (permissionsLoading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('common.loadingPermissions')}</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (!canViewOrganization()) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n          <div className=\"p-4 text-red-600 dark:text-red-400\">\n          {t('organization.noPermission')}\n        </div>\n      </div>\n    );\n  }\n\n  const handleCreateSuccess = () => {\n    //  PERFORMANCE: Nach Erstellen OHNE Settings laden (nicht bentigt)\n    fetchOrganization(false);\n  };\n\n  const handleJoinSuccess = async () => {\n    // Nach Beitritt: Organisation neu laden (OHNE Settings, nicht bentigt)\n    fetchOrganization(false);\n    // WICHTIG: User-Rollen neu laden, damit neue Rolle sichtbar wird\n    // OnboardingContext erkennt dann automatisch die neue Rolle\n    await fetchCurrentUser();\n  };\n\n  return (\n    <>\n      <div className=\"space-y-4\">\n        {/* Titelzeile mit Action-Buttons */}\n        <div className=\"flex items-center mb-4 sm:mb-4\">\n          {/* Linke Seite: Action-Buttons */}\n          <div className=\"flex items-center\" data-onboarding=\"organization-buttons\">\n            {/* Button: Neue Organisation erstellen - immer sichtbar (nicht nur fr Admins) */}\n            <button\n              onClick={() => setIsCreateModalOpen(true)}\n              data-onboarding=\"create-organization-button\"\n              className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n              style={{ width: '30.19px', height: '30.19px' }}\n              title={t('organization.createOrganization')}\n              aria-label={t('organization.createOrganization')}\n            >\n              <PlusIcon className=\"h-4 w-4\" />\n            </button>\n            \n            {/* Button: Organisation beitreten - immer sichtbar */}\n            <button\n              onClick={() => setIsJoinModalOpen(true)}\n              data-onboarding=\"join-organization-button\"\n              className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center ml-2\"\n              style={{ width: '30.19px', height: '30.19px' }}\n              title={t('organization.joinOrganization')}\n              aria-label={t('organization.joinOrganization')}\n            >\n              <UserPlusIcon className=\"h-4 w-4\" />\n            </button>\n          </div>\n        </div>\n\n      {/* Loading State */}\n      {loading ? (\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('common.loadingOrganization')}</span>\n        </div>\n      ) : (\n        <>\n          {/* Error/Info Display */}\n          {error && (\n            <div className={`mb-4 p-4 border rounded ${\n              !organization \n                ? 'bg-blue-50 dark:bg-blue-900/30 border-blue-400 dark:border-blue-700 text-blue-700 dark:text-blue-300'\n                : 'bg-red-100 dark:bg-red-900 border-red-400 dark:border-red-700 text-red-700 dark:text-red-300'\n            }`}>\n              <div className=\"flex items-start\">\n                <div className=\"flex-shrink-0\">\n                  {!organization ? (\n                    <UserGroupIcon className=\"h-5 w-5\" />\n                  ) : (\n                    <span className=\"text-red-600 dark:text-red-400\"></span>\n                  )}\n                </div>\n                <div className=\"ml-3 flex-1\">\n                  <p className=\"font-medium\">{error}</p>\n                  {!organization && (\n                    <p className=\"mt-2 text-sm\">{t('organization.createOrJoinHint')}</p>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Card-Ansicht - nur anzeigen wenn Organisation existiert */}\n          {organization ? (\n            <>\n            {/* Card mit Organisations-Infos */}\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-4\">\n            <div>\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white flex items-center\">\n                        <BuildingOfficeIcon className=\"h-5 w-5 mr-2\" />\n                        {organization.displayName || organization.name}\n                      </h3>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n                        {organization.domain || t('organization.noDomain')}\n                      </p>\n            </div>\n                    {canManageOrganization() && (\n                      <button\n                        onClick={async () => {\n                          //  PERFORMANCE: Settings nur laden wenn Bearbeiten-Modal geffnet wird\n                          if (!organization?.settings) {\n                            await fetchOrganization(true);\n                          }\n                          setIsEditModalOpen(true);\n                        }}\n                        className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n                        title={t('organization.edit.title')}\n                      >\n                        <PencilIcon className=\"h-5 w-5\" />\n                      </button>\n                    )}\n            </div>\n\n                  {/* Organisations-Infos */}\n                  <div className=\"space-y-3\">\n                    {organization.subscriptionPlan && (\n            <div>\n                        <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">{t('organization.subscriptionPlan')}:</span>\n                        <span className=\"ml-2 text-sm text-gray-900 dark:text-white capitalize\">{organization.subscriptionPlan}</span>\n              </div>\n            )}\n              </div>\n\n                  {/* Statistiken direkt in der Card */}\n          {stats && (\n                    <>\n            <div className=\"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700\">\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">{t('organization.statistics')}</h3>\n              {loadingStats ? (\n                <div className=\"flex items-center justify-center py-4\">\n                  <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-2\"></div>\n                  <span className=\"text-sm text-gray-500 dark:text-gray-400\">{t('common.loadingStatistics')}</span>\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {/* Benutzer Card */}\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0 bg-blue-100 dark:bg-blue-900/30 rounded-lg p-3\">\n                        <UserGroupIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.users')}</p>\n                        <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                          {stats.currentUsers} / {stats.maxUsers}\n                        </p>\n                            {stats.utilizationPercent !== undefined && (\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                            {stats.utilizationPercent}% {t('organization.utilizationPercent')}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Rollen Card */}\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0 bg-purple-100 dark:bg-purple-900/30 rounded-lg p-3\">\n                        <ShieldCheckIcon className=\"h-6 w-6 text-purple-600 dark:text-purple-400\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.roles')}</p>\n                        <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                          {stats._count.roles}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Beitrittsanfragen Card */}\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg p-3\">\n                        <EnvelopeIcon className=\"h-6 w-6 text-yellow-600 dark:text-yellow-400\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.joinRequests')}</p>\n                        <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                          {stats._count.joinRequests}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Einladungen Card */}\n                  {stats._count.invitations !== undefined && (\n                    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                      <div className=\"flex items-center\">\n                        <div className=\"flex-shrink-0 bg-green-100 dark:bg-green-900/30 rounded-lg p-3\">\n                          <EnvelopeIcon className=\"h-6 w-6 text-green-600 dark:text-green-400\" />\n                        </div>\n                        <div className=\"ml-4\">\n                          <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.invitations')}</p>\n                          <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                            {stats._count.invitations}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Auslastung Card */}\n                  {stats.utilizationPercent !== undefined && (\n                    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                      <div className=\"flex items-center\">\n                        <div className=\"flex-shrink-0 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg p-3\">\n                          <ChartBarIcon className=\"h-6 w-6 text-indigo-600 dark:text-indigo-400\" />\n                        </div>\n                        <div className=\"ml-4\">\n                          <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.utilization')}</p>\n                          <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                            {stats.utilizationPercent}%\n                          </p>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                            {stats.availableSlots} {t('organization.availableSlots')}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n                    </>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            </>\n          ) : (\n            /* Keine Organisation - zeige Hinweis */\n            <div className=\"text-center py-8\">\n            <UserGroupIcon className=\"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500 mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n              {t('organization.notFound')}\n            </h3>\n            <p className=\"text-gray-600 dark:text-gray-400\">\n              {t('organization.createOrJoinHint')}\n            </p>\n          </div>\n        )}\n        </>\n      )}\n      </div>\n\n      {/* Meine Beitrittsanfragen - immer anzeigen */}\n      <MyJoinRequestsList />\n\n      {/* Modals */}\n      <CreateOrganizationModal\n        isOpen={isCreateModalOpen}\n        onClose={() => setIsCreateModalOpen(false)}\n        onSuccess={handleCreateSuccess}\n      />\n\n      <JoinOrganizationModal\n        isOpen={isJoinModalOpen}\n        onClose={() => setIsJoinModalOpen(false)}\n        onSuccess={handleJoinSuccess}\n      />\n\n      <EditOrganizationModal\n        isOpen={isEditModalOpen}\n        onClose={handleEditModalClose}\n        onSuccess={handleEditSuccess}\n        organization={organization}\n      />\n    </>\n  );\n};\n\nexport default OrganizationSettings; ","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon, XCircleIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { OrganizationJoinRequest, ProcessJoinRequestRequest } from '../../types/organization.ts';\nimport { roleApi } from '../../api/apiClient.ts';\nimport { Role } from '../../types/interfaces.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  joinRequest: OrganizationJoinRequest | null;\n  onSuccess: () => void;\n}\n\nconst ProcessJoinRequestModal: React.FC<Props> = ({ isOpen, onClose, joinRequest, onSuccess }) => {\n  const { t } = useTranslation();\n  const [action, setAction] = useState<'approve' | 'reject'>('approve');\n  const [roleId, setRoleId] = useState<number | null>(null);\n  const [response, setResponse] = useState<string>('');\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [loadingRoles, setLoadingRoles] = useState<boolean>(false);\n  const [saving, setSaving] = useState<boolean>(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    \n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  useEffect(() => {\n    if (isOpen && joinRequest) {\n      // Reset form when modal opens\n      setAction('approve');\n      setRoleId(null);\n      setResponse('');\n      setErrors({});\n      \n      // Load roles for the organization\n      if (joinRequest.organizationId) {\n        fetchRoles();\n      }\n    }\n  }, [isOpen, joinRequest]);\n\n  const fetchRoles = async () => {\n    try {\n      setLoadingRoles(true);\n      const response = await roleApi.getAll();\n      if (response.data && Array.isArray(response.data)) {\n        setRoles(response.data);\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Laden der Rollen:', err);\n      showMessage(t('joinRequest.loadRolesError'), 'error');\n    } finally {\n      setLoadingRoles(false);\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    \n    if (action === 'approve' && !roleId) {\n      newErrors.roleId = t('joinRequest.selectRoleError');\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      showMessage(t('joinRequest.fillRequired'), 'error');\n      return;\n    }\n    \n    if (!joinRequest) {\n      return;\n    }\n    \n    try {\n      setSaving(true);\n      const data: ProcessJoinRequestRequest = {\n        action,\n        response: response.trim() || undefined,\n        roleId: action === 'approve' ? roleId || undefined : undefined\n      };\n      \n      await organizationService.processJoinRequest(joinRequest.id, data);\n      showMessage(\n        action === 'approve' ? t('joinRequest.approveSuccess') : t('joinRequest.rejectSuccess'),\n        'success'\n      );\n      \n      // Reset form\n      setAction('approve');\n      setRoleId(null);\n      setResponse('');\n      setErrors({});\n      \n      onClose();\n      onSuccess();\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('joinRequest.processError');\n      showMessage(errorMessage, 'error');\n      setErrors({ submit: errorMessage });\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleClose = () => {\n    setAction('approve');\n    setRoleId(null);\n    setResponse('');\n    setErrors({});\n    onClose();\n  };\n\n  if (!joinRequest) {\n    return null;\n  }\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('joinRequest.title')}\n              </Dialog.Title>\n              <button\n                onClick={handleClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-4\">\n              {errors.submit && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {errors.submit}\n                </div>\n              )}\n\n              <div className=\"space-y-4\">\n                {/* Antragsteller Info */}\n                <div className=\"p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\n                  <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">{t('joinRequest.applicant')}:</p>\n                  <p className=\"text-sm text-gray-900 dark:text-white\">\n                    {joinRequest.requester.firstName} {joinRequest.requester.lastName}\n                  </p>\n                  <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.requester.email}</p>\n                  {joinRequest.message && (\n                    <div className=\"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600\">\n                      <p className=\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">{t('joinRequest.message')}:</p>\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.message}</p>\n                    </div>\n                  )}\n                </div>\n\n                {/* Aktion (Genehmigen/Ablehnen) */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('joinRequest.actionRequired')}\n                  </label>\n                  <div className=\"flex gap-4 mt-2\">\n                    <label className=\"flex items-center\">\n                      <input\n                        type=\"radio\"\n                        value=\"approve\"\n                        checked={action === 'approve'}\n                        onChange={(e) => {\n                          setAction(e.target.value as 'approve' | 'reject');\n                          setErrors({});\n                        }}\n                        className=\"mr-2 text-blue-600 focus:ring-blue-500\"\n                      />\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300\">{t('joinRequest.approve')}</span>\n                    </label>\n                    <label className=\"flex items-center\">\n                      <input\n                        type=\"radio\"\n                        value=\"reject\"\n                        checked={action === 'reject'}\n                        onChange={(e) => {\n                          setAction(e.target.value as 'approve' | 'reject');\n                          setErrors({});\n                        }}\n                        className=\"mr-2 text-red-600 focus:ring-red-500\"\n                      />\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300\">{t('joinRequest.reject')}</span>\n                    </label>\n                  </div>\n                </div>\n\n                {/* Rollenauswahl (nur bei Genehmigung) */}\n                {action === 'approve' && (\n                  <div>\n                    <label \n                      htmlFor=\"roleId\" \n                      className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                    >\n                      {t('joinRequest.assignRole')}\n                    </label>\n                    {loadingRoles ? (\n                      <div className=\"flex items-center py-2\">\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"></div>\n                        <span className=\"text-sm text-gray-500 dark:text-gray-400\">{t('joinRequest.loadingRoles')}</span>\n                      </div>\n                    ) : (\n                      <select\n                        id=\"roleId\"\n                        value={roleId || ''}\n                        onChange={(e) => {\n                          setRoleId(Number(e.target.value) || null);\n                          if (errors.roleId) {\n                            setErrors(prev => ({ ...prev, roleId: '' }));\n                          }\n                        }}\n                        className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                          errors.roleId \n                            ? 'border-red-300 dark:border-red-600' \n                            : 'border-gray-300 dark:border-gray-600'\n                        }`}\n                      >\n                        <option value=\"\">{t('joinRequest.selectRole')}</option>\n                        {roles.map(role => (\n                          <option key={role.id} value={role.id}>\n                            {role.name} {role.description ? `- ${role.description}` : ''}\n                          </option>\n                        ))}\n                      </select>\n                    )}\n                    {errors.roleId && (\n                      <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.roleId}</p>\n                    )}\n                  </div>\n                )}\n\n                {/* Antwort-Message */}\n                <div>\n                  <label \n                    htmlFor=\"response\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('joinRequest.response')}\n                  </label>\n                  <textarea\n                    id=\"response\"\n                    value={response}\n                    onChange={(e) => setResponse(e.target.value)}\n                    rows={3}\n                    placeholder={t('joinRequest.addOptional', { type: action === 'approve' ? t('joinRequest.welcomeMessage') : t('joinRequest.rejectionReason') })}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                  title={t('joinRequest.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={saving}\n                  className={`p-2 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${\n                    action === 'approve'\n                      ? 'bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:ring-green-500'\n                      : 'bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 focus:ring-red-500'\n                  }`}\n                  title={saving ? (action === 'approve' ? t('joinRequest.approving') : t('joinRequest.rejecting')) : (action === 'approve' ? t('joinRequest.approve') : t('joinRequest.reject'))}\n                >\n                  {saving ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : action === 'approve' ? (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  ) : (\n                    <XCircleIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={handleClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('joinRequest.title')}\n          </h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {errors.submit && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {errors.submit}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {/* Antragsteller Info */}\n            <div className=\"p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\n              <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">{t('joinRequest.applicant')}:</p>\n              <p className=\"text-sm text-gray-900 dark:text-white\">\n                {joinRequest.requester.firstName} {joinRequest.requester.lastName}\n              </p>\n              <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.requester.email}</p>\n              {joinRequest.message && (\n                <div className=\"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600\">\n                  <p className=\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">{t('joinRequest.message')}:</p>\n                  <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.message}</p>\n                </div>\n              )}\n            </div>\n\n            {/* Aktion (Genehmigen/Ablehnen) */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('joinRequest.actionRequired')}\n              </label>\n              <div className=\"flex gap-4 mt-2\">\n                <label className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                    value=\"approve\"\n                    checked={action === 'approve'}\n                    onChange={(e) => {\n                      setAction(e.target.value as 'approve' | 'reject');\n                      setErrors({});\n                    }}\n                    className=\"mr-2 text-blue-600 focus:ring-blue-500\"\n                  />\n                  <span className=\"text-sm text-gray-700 dark:text-gray-300\">{t('joinRequest.approve')}</span>\n                </label>\n                <label className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                    value=\"reject\"\n                    checked={action === 'reject'}\n                    onChange={(e) => {\n                      setAction(e.target.value as 'approve' | 'reject');\n                      setErrors({});\n                    }}\n                    className=\"mr-2 text-red-600 focus:ring-red-500\"\n                  />\n                  <span className=\"text-sm text-gray-700 dark:text-gray-300\">{t('joinRequest.reject')}</span>\n                </label>\n              </div>\n            </div>\n\n            {/* Rollenauswahl (nur bei Genehmigung) */}\n            {action === 'approve' && (\n              <div>\n                <label \n                  htmlFor=\"roleId\" \n                  className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                >\n                  {t('joinRequest.assignRole')}\n                </label>\n                {loadingRoles ? (\n                  <div className=\"flex items-center py-2\">\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"></div>\n                    <span className=\"text-sm text-gray-500 dark:text-gray-400\">{t('joinRequest.loadingRoles')}</span>\n                  </div>\n                ) : (\n                  <select\n                    id=\"roleId\"\n                    value={roleId || ''}\n                    onChange={(e) => {\n                      setRoleId(Number(e.target.value) || null);\n                      if (errors.roleId) {\n                        setErrors(prev => ({ ...prev, roleId: '' }));\n                      }\n                    }}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.roleId \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  >\n                    <option value=\"\">{t('joinRequest.selectRole')}</option>\n                    {roles.map(role => (\n                      <option key={role.id} value={role.id}>\n                        {role.name} {role.description ? `- ${role.description}` : ''}\n                      </option>\n                    ))}\n                  </select>\n                )}\n                {errors.roleId && (\n                  <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.roleId}</p>\n                )}\n              </div>\n            )}\n\n            {/* Antwort-Message */}\n            <div>\n              <label \n                htmlFor=\"response\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('joinRequest.response')}\n              </label>\n              <textarea\n                id=\"response\"\n                value={response}\n                onChange={(e) => setResponse(e.target.value)}\n                rows={3}\n                placeholder={t('joinRequest.addOptional', { type: action === 'approve' ? t('joinRequest.welcomeMessage') : t('joinRequest.rejectionReason') })}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"flex justify-end pt-4 gap-2\">\n              <button\n                type=\"button\"\n                onClick={handleClose}\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                title={t('common.cancel')}\n              >\n                <XMarkIcon className=\"h-5 w-5\" />\n              </button>\n              <button\n                type=\"submit\"\n                disabled={saving}\n                className={`p-2 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${\n                  action === 'approve'\n                    ? 'bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:ring-green-500'\n                    : 'bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 focus:ring-red-500'\n                }`}\n                title={saving ? (action === 'approve' ? 'Genehmige...' : 'Lehne ab...') : (action === 'approve' ? 'Genehmigen' : 'Ablehnen')}\n              >\n                {saving ? (\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                ) : action === 'approve' ? (\n                  <CheckIcon className=\"h-5 w-5\" />\n                ) : (\n                  <XCircleIcon className=\"h-5 w-5\" />\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ProcessJoinRequestModal;\n\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { UserPlusIcon, FunnelIcon, PencilIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { OrganizationJoinRequest } from '../../types/organization.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport FilterPane from '../FilterPane.tsx';\nimport SavedFilterTags from '../SavedFilterTags.tsx';\nimport { FilterCondition } from '../FilterRow.tsx';\nimport ProcessJoinRequestModal from './ProcessJoinRequestModal.tsx';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport axiosInstance from '../../config/axios.ts';\n\n// Status-Badge Funktionen\nconst getStatusColor = (status: string) => {\n  switch (status) {\n    case 'pending':\n      return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300';\n    case 'approved':\n      return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300';\n    case 'rejected':\n      return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300';\n    case 'withdrawn':\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\n    default:\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\n  }\n};\n\nconst getStatusText = (status: string, t: any) => {\n  switch (status) {\n    case 'pending':\n      return t('joinRequestsList.status.pending');\n    case 'approved':\n      return t('joinRequestsList.status.approved');\n    case 'rejected':\n      return t('joinRequestsList.status.rejected');\n    case 'withdrawn':\n      return t('joinRequestsList.status.withdrawn');\n    default:\n      return status;\n  }\n};\n\nconst JOIN_REQUESTS_TABLE_ID = 'join-requests-table';\n\nconst JoinRequestsList: React.FC = () => {\n  const { t } = useTranslation();\n  const [joinRequests, setJoinRequests] = useState<OrganizationJoinRequest[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isFilterPanelOpen, setIsFilterPanelOpen] = useState<boolean>(false);\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const [isProcessModalOpen, setIsProcessModalOpen] = useState<boolean>(false);\n  const [selectedRequest, setSelectedRequest] = useState<OrganizationJoinRequest | null>(null);\n  \n  // Filter State Management (Controlled Mode)\n  const [activeFilterName, setActiveFilterName] = useState<string>('Alle');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n  \n  const { canViewJoinRequests, canManageJoinRequests, loading: permissionsLoading } = usePermissions();\n  const { showMessage } = useMessage();\n  const mountedRef = useRef(true);\n  const hasInitialLoadRef = useRef(false);\n\n  // Debug: Log permissionsLoading nderungen\n  useEffect(() => {\n    console.log('[JoinRequestsList] permissionsLoading gendert:', permissionsLoading);\n  }, [permissionsLoading]);\n\n  // Reset beim Mount - wichtig fr Neuladen wenn Komponente neu gemountet wird\n  useEffect(() => {\n    console.log('[JoinRequestsList] Component mounted, reset hasInitialLoadRef');\n    hasInitialLoadRef.current = false;\n    mountedRef.current = true;\n    \n    return () => {\n      console.log('[JoinRequestsList] Component unmounting');\n      mountedRef.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    console.log('[JoinRequestsList] useEffect triggered', { \n      permissionsLoading, \n      hasInitialLoad: hasInitialLoadRef.current,\n      joinRequestsCount: joinRequests.length \n    });\n    \n    // Warte bis Berechtigungen geladen sind\n    if (permissionsLoading) {\n      console.log('[JoinRequestsList] Warte auf Berechtigungen...');\n      return;\n    }\n\n    // Prfe Berechtigung direkt\n    const hasPermission = canViewJoinRequests();\n    console.log('[JoinRequestsList] Berechtigung geprft:', hasPermission);\n    \n    if (!hasPermission) {\n      console.log('[JoinRequestsList] Keine Berechtigung zum Anzeigen');\n      setError(t('joinRequestsList.noPermission'));\n      setLoading(false);\n      hasInitialLoadRef.current = true;\n      return;\n    }\n\n    // WICHTIG: Nur laden wenn noch nicht erfolgreich geladen wurde\n    // Das verhindert unntige Re-Fetches bei jedem permissionsLoading-Change\n    if (hasInitialLoadRef.current) {\n      console.log('[JoinRequestsList] Bereits geladen, berspringe Fetch');\n      return;\n    }\n\n    console.log('[JoinRequestsList] Starte Fetch der Join Requests...');\n    \n    const fetchJoinRequests = async () => {\n      if (!mountedRef.current) {\n        console.log('[JoinRequestsList] Component unmounted, breche ab');\n        return;\n      }\n      \n      try {\n        console.log('[JoinRequestsList] Setze loading auf true');\n        setLoading(true);\n        setError(null);\n        \n        console.log('[JoinRequestsList] Rufe organizationService.getJoinRequests() auf...');\n        console.log('[JoinRequestsList] API Endpoint:', API_ENDPOINTS.ORGANIZATIONS.JOIN_REQUESTS);\n        \n        const requests = await organizationService.getJoinRequests();\n        \n        console.log('[JoinRequestsList] Antwort erhalten:', requests);\n        console.log('[JoinRequestsList] Antwort Typ:', typeof requests);\n        console.log('[JoinRequestsList] Ist Array:', Array.isArray(requests));\n        console.log('[JoinRequestsList] Ist null/undefined:', requests === null || requests === undefined);\n        \n        if (!mountedRef.current) {\n          console.log('[JoinRequestsList] Component whrend Request unmounted');\n          return;\n        }\n        \n        // Validiere, dass die Antwort vorhanden ist\n        if (requests === null || requests === undefined) {\n          console.error('[JoinRequestsList]  Antwort ist null oder undefined!');\n          throw new Error('Ungltige Antwort vom Server: Antwort ist null oder undefined');\n        }\n        \n        // Validiere, dass die Antwort ein Array ist\n        if (!Array.isArray(requests)) {\n          console.error('[JoinRequestsList]  Antwort ist kein Array!', requests);\n          throw new Error('Ungltige Antwort vom Server: Erwartetes Array, erhalten: ' + typeof requests);\n        }\n        \n        console.log('[JoinRequestsList]  Setze', requests.length, 'Join Requests');\n        setJoinRequests(requests);\n        setError(null); // Fehler zurcksetzen bei Erfolg\n        hasInitialLoadRef.current = true; // Nur bei Erfolg setzen\n      } catch (err: any) {\n        console.error('[JoinRequestsList]  Fehler beim Laden:', err);\n        console.error('[JoinRequestsList] Fehler Details:', {\n          message: err.message,\n          response: err.response,\n          status: err.response?.status,\n          data: err.response?.data,\n          stack: err.stack\n        });\n        \n        if (!mountedRef.current) {\n          console.log('[JoinRequestsList] Component whrend Error-Handling unmounted');\n          return;\n        }\n        \n        const errorMessage = err.response?.data?.message || err.message || t('joinRequestsList.loadError', { defaultValue: 'Fehler beim Laden der Beitrittsanfragen' });\n        console.log('[JoinRequestsList] Zeige Fehlermeldung:', errorMessage);\n        setError(errorMessage);\n        // showMessage nur auerhalb useEffect verwenden, um Re-Renders zu vermeiden\n        // Verwende setTimeout, um es asynchron auszufhren\n        setTimeout(() => {\n          showMessage(errorMessage, 'error');\n        }, 0);\n        // Bei Fehler NICHT hasInitialLoadRef setzen, damit bei nchstem permissionsLoading-Change neu geladen wird\n      } finally {\n        if (mountedRef.current) {\n          console.log('[JoinRequestsList] Setze loading auf false');\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchJoinRequests();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [permissionsLoading]); // canViewJoinRequests ist eine Funktion, nicht als Dependency\n\n  const handleOpenProcessModal = (request: OrganizationJoinRequest) => {\n    if (!canManageJoinRequests()) {\n      const errorMessage = t('joinRequestsList.noPermissionEdit');\n      setError(errorMessage);\n      showMessage(errorMessage, 'error');\n      return;\n    }\n    setSelectedRequest(request);\n    setIsProcessModalOpen(true);\n  };\n\n  const handleProcessSuccess = async () => {\n    // Neulade die Liste nach erfolgreicher Bearbeitung\n    // Reset das Flag, damit neu geladen werden kann\n    hasInitialLoadRef.current = false;\n    \n    try {\n      setLoading(true);\n      const requests = await organizationService.getJoinRequests();\n      setJoinRequests(requests);\n      setError(null);\n      hasInitialLoadRef.current = true;\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || 'Fehler beim Laden der Beitrittsanfragen';\n      setError(errorMessage);\n      hasInitialLoadRef.current = true;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Filter-Funktionen\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n  };\n\n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n\n  // Filter Change Handler (Controlled Mode)\n  const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators);\n  };\n\n  const getActiveFilterCount = () => {\n    return filterConditions.length;\n  };\n\n  // Initialer Default-Filter setzen (Controlled Mode)\n  useEffect(() => {\n    const setInitialFilter = async () => {\n      try {\n        const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(JOIN_REQUESTS_TABLE_ID));\n        const filters = response.data;\n        \n        const alleFilter = filters.find((filter: any) => filter.name === 'Alle');\n        if (alleFilter) {\n          setActiveFilterName('Alle');\n          setSelectedFilterId(alleFilter.id);\n          applyFilterConditions(alleFilter.conditions, alleFilter.operators);\n        }\n      } catch (error) {\n        console.error('Fehler beim Setzen des initialen Filters:', error);\n      }\n    };\n\n    setInitialFilter();\n  }, []);\n\n  // Standard-Filter erstellen und speichern\n  useEffect(() => {\n    const createStandardFilters = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        \n        if (!token) {\n          console.error('Nicht authentifiziert');\n          return;\n        }\n\n        // Prfen, ob die Standard-Filter bereits existieren\n        const existingFiltersResponse = await axiosInstance.get(\n          API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(JOIN_REQUESTS_TABLE_ID)\n        );\n\n        const existingFilters = existingFiltersResponse.data || [];\n        const alleFilterExists = existingFilters.some((filter: any) => filter.name === 'Alle');\n\n        // Erstelle \"Alle\"-Filter, wenn er noch nicht existiert\n        if (!alleFilterExists) {\n          const alleFilter = {\n            tableId: JOIN_REQUESTS_TABLE_ID,\n            name: 'Alle',\n            conditions: [],\n            operators: []\n          };\n\n          await axiosInstance.post(\n            API_ENDPOINTS.SAVED_FILTERS.BASE,\n            alleFilter\n          );\n          console.log('Alle-Filter fr Join Requests erstellt');\n        }\n      } catch (error) {\n        console.error('Fehler beim Erstellen der Standard-Filter:', error);\n      }\n    };\n\n    createStandardFilters();\n  }, []);\n\n  // Gefilterte Join-Requests\n  const filteredJoinRequests = useMemo(() => {\n    let filtered = [...joinRequests];\n\n    // Suchfeld-Filter\n    if (searchTerm) {\n      const searchLower = searchTerm.toLowerCase();\n      filtered = filtered.filter(request => {\n        const requesterName = `${request.requester.firstName} ${request.requester.lastName}`.toLowerCase();\n        const requesterEmail = request.requester.email?.toLowerCase() || '';\n        const message = request.message?.toLowerCase() || '';\n        return requesterName.includes(searchLower) || requesterEmail.includes(searchLower) || message.includes(searchLower);\n      });\n    }\n\n    // Filter-Bedingungen aus FilterPane\n    if (filterConditions.length > 0) {\n      filtered = filterConditions.reduce((acc, condition, index) => {\n        if (!condition.column || condition.value === null || condition.value === '') {\n          return acc;\n        }\n\n        const operator = condition.operator;\n        const value = condition.value;\n\n        return acc.filter(request => {\n          switch (condition.column) {\n            case 'requester':\n              const requesterName = `${request.requester.firstName} ${request.requester.lastName}`.toLowerCase();\n              const requesterEmail = request.requester.email?.toLowerCase() || '';\n              const searchValue = String(value).toLowerCase();\n              \n              if (operator === 'contains') {\n                return requesterName.includes(searchValue) || requesterEmail.includes(searchValue);\n              } else if (operator === 'equals') {\n                return requesterName === searchValue || requesterEmail === searchValue;\n              } else if (operator === 'startsWith') {\n                return requesterName.startsWith(searchValue) || requesterEmail.startsWith(searchValue);\n    }\n              return false;\n\n            case 'message':\n              const message = request.message?.toLowerCase() || '';\n              const msgValue = String(value).toLowerCase();\n              \n              if (operator === 'contains') {\n                return message.includes(msgValue);\n              } else if (operator === 'equals') {\n                return message === msgValue;\n              } else if (operator === 'startsWith') {\n                return message.startsWith(msgValue);\n              }\n              return false;\n\n            case 'status':\n              if (operator === 'equals') {\n                return request.status === value;\n              }\n              return false;\n\n            default:\n              return true;\n          }\n        });\n      }, filtered);\n    }\n\n    return filtered;\n  }, [joinRequests, searchTerm, filterConditions, filterLogicalOperators]);\n\n  if (permissionsLoading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('joinRequestsList.loadingPermissions')}</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (!canViewJoinRequests()) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n      <div className=\"p-4 text-red-600 dark:text-red-400\">\n        {t('joinRequestsList.noPermission')}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 sm:p-6 mb-6\">\n      {/* Titelzeile mit Icon, Suchfeld, Filter-Button */}\n      <div className=\"flex items-center justify-between mb-4 sm:mb-4\">\n        <h2 className=\"text-xl sm:text-xl font-semibold flex items-center dark:text-white\">\n          <UserPlusIcon className=\"h-6 w-6 sm:h-6 sm:w-6 mr-2 sm:mr-2\" />\n          {t('joinRequestsList.title')}\n        </h2>\n        \n        <div className=\"flex items-center gap-1.5\">\n          {/* Suchfeld */}\n          <input\n            type=\"text\"\n            placeholder={t('common.search', { defaultValue: 'Suchen...' })}\n            className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n\n          {/* Filter-Button */}\n          <button\n            className={`p-2 rounded-md border ${getActiveFilterCount() > 0 ? 'border-blue-300 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700'} relative`}\n            onClick={() => setIsFilterPanelOpen(!isFilterPanelOpen)}\n            title={t('common.filter')}\n          >\n            <FunnelIcon className=\"h-5 w-5\" />\n            {getActiveFilterCount() > 0 && (\n              <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center\">\n                {getActiveFilterCount()}\n              </span>\n            )}\n          </button>\n        </div>\n      </div>\n\n      {/* Filter-Panel */}\n      {isFilterPanelOpen && (\n        <div className=\"mb-4\">\n          <FilterPane\n            columns={[\n              { id: 'requester', label: t('joinRequestsList.filter.requester') },\n              { id: 'message', label: t('joinRequestsList.filter.message') },\n              { id: 'status', label: t('joinRequestsList.status.title', { defaultValue: 'Status' }) }\n            ]}\n            onApply={applyFilterConditions}\n            onReset={resetFilterConditions}\n            savedConditions={filterConditions}\n            savedOperators={filterLogicalOperators}\n            tableId={JOIN_REQUESTS_TABLE_ID}\n          />\n        </div>\n      )}\n\n      {/* Gespeicherte Filter als Tags anzeigen */}\n      <SavedFilterTags\n        tableId={JOIN_REQUESTS_TABLE_ID}\n        onSelectFilter={applyFilterConditions}\n        onReset={resetFilterConditions}\n        activeFilterName={activeFilterName}\n        selectedFilterId={selectedFilterId}\n        onFilterChange={handleFilterChange}\n        defaultFilterName=\"Alle\"\n      />\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"mb-4 p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded\">\n          {error}\n        </div>\n      )}\n\n      {/* Loading State */}\n      {loading ? (\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('joinRequestsList.loading')}</span>\n        </div>\n      ) : filteredJoinRequests.length === 0 ? (\n        <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n          {joinRequests.length === 0 \n            ? t('joinRequestsList.noRequests')\n            : t('joinRequestsList.noMatching')}\n        </div>\n      ) : (\n        /* Cards fr Join-Requests */\n        <div className=\"space-y-4\">\n          {filteredJoinRequests.map(request => (\n            <div\n              key={request.id}\n              className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\"\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                        {request.requester.firstName} {request.requester.lastName}\n                      </h3>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        {request.requester.email}\n              </p>\n                    </div>\n                    <span className={`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(request.status)}`}>\n                      {getStatusText(request.status, t)}\n                    </span>\n                  </div>\n\n                  {request.message && (\n                    <div className=\"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\n                      <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                        <span className=\"font-medium\">{t('joinRequestsList.filter.message')}:</span> {request.message}\n                      </p>\n                    </div>\n                  )}\n\n                  {request.response && (\n                    <div className=\"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-700\">\n                      <p className=\"text-sm text-blue-700 dark:text-blue-300\">\n                        <span className=\"font-medium\">{t('joinRequestsList.response')}:</span> {request.response}\n                      </p>\n                    </div>\n                  )}\n\n              {request.status === 'pending' && canManageJoinRequests() && (\n                    <div className=\"mt-4 flex items-center gap-2\">\n                  <button \n                        onClick={() => handleOpenProcessModal(request)}\n                        className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center\"\n                      >\n                        <PencilIcon className=\"h-4 w-4 mr-1\" />\n                        {t('joinRequestsList.edit')}\n                  </button>\n                </div>\n              )}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Process Join Request Modal */}\n      <ProcessJoinRequestModal\n        isOpen={isProcessModalOpen}\n        onClose={() => {\n          setIsProcessModalOpen(false);\n          setSelectedRequest(null);\n        }}\n        joinRequest={selectedRequest}\n        onSuccess={handleProcessSuccess}\n      />\n    </div>\n  );\n};\n\nexport default JoinRequestsList; ","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { UserGroupIcon, UserIcon, ShieldCheckIcon, MapPinIcon, TruckIcon } from '@heroicons/react/24/outline';\nimport UserManagementTab from '../components/UserManagementTab.tsx';\nimport RoleManagementTab from '../components/RoleManagementTab.tsx';\nimport BranchManagementTab from '../components/BranchManagementTab.tsx';\nimport TourProvidersTab from '../components/tours/TourProvidersTab.tsx';\nimport ToursTab from '../components/tours/ToursTab.tsx';\nimport useMessage from '../hooks/useMessage.ts';\nimport OrganizationSettings from '../components/organization/OrganizationSettings.tsx';\nimport JoinRequestsList from '../components/organization/JoinRequestsList.tsx';\n\nconst Organisation: React.FC = () => {\n  const { t } = useTranslation();\n  // Gemeinsame States\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const { showMessage } = useMessage();\n\n  const { \n    isAdmin, \n    hasPermission, \n    canViewOrganization,\n    loading: permissionsLoading\n  } = usePermissions();\n\n  // Berechtigungen prfen\n  const canViewOrganisation = hasPermission('organization_management', 'read', 'page');\n  const canViewUsers = hasPermission('users', 'read', 'table');\n  const canViewRoles = hasPermission('roles', 'read', 'table');\n  const canViewBranches = hasPermission('branches', 'read', 'table');\n  const canViewProviders = hasPermission('tour_providers', 'read', 'table');\n  const canViewOrg = canViewOrganization();\n\n  const [activeTabState, setActiveTabState] = useState<'users' | 'roles' | 'branches' | 'providers' | 'organization'>('users');\n  const [providersViewMode, setProvidersViewMode] = useState<'tours' | 'providers'>('tours');\n  const isInitialized = useRef(false);\n\n  // Tab beim ersten Laden basierend auf Berechtigungen setzen (nur wenn Berechtigungen geladen sind)\n  // Reihenfolge: users -> roles -> branches -> providers -> organization\n  useEffect(() => {\n    if (!permissionsLoading && !isInitialized.current) {\n      let defaultTab: 'users' | 'roles' | 'branches' | 'providers' | 'organization' = 'organization'; // Fallback\n      \n      if (canViewUsers) {\n        defaultTab = 'users';\n      } else if (canViewRoles) {\n        defaultTab = 'roles';\n      } else if (canViewBranches) {\n        defaultTab = 'branches';\n      } else if (canViewProviders) {\n        defaultTab = 'providers';\n      } else if (canViewOrg) {\n        defaultTab = 'organization';\n      }\n      \n      setActiveTabState(defaultTab);\n      isInitialized.current = true;\n    }\n  }, [permissionsLoading, canViewUsers, canViewRoles, canViewBranches, canViewProviders, canViewOrg]);\n\n  // Tab-Wechsel Handler - Fehler beim Wechsel zurcksetzen\n  const handleTabChange = (tab: 'users' | 'roles' | 'branches' | 'providers' | 'organization') => {\n    // Prfe Berechtigung fr den Tab\n    if (tab === 'users' && !canViewUsers) {\n      return; // Tab nicht aktivierbar\n    }\n    if (tab === 'roles' && !canViewRoles) {\n      return; // Tab nicht aktivierbar\n    }\n    if (tab === 'branches' && !canViewBranches) {\n      return; // Tab nicht aktivierbar\n    }\n    if (tab === 'providers' && !canViewProviders) {\n      return; // Tab nicht aktivierbar\n    }\n    if (tab === 'organization' && !canViewOrg) {\n      return; // Tab nicht aktivierbar\n    }\n    setActiveTabState(tab);\n    setError(null);\n  };\n\n  // Gemeinsame Fehlerbehandlung\n  const handleError = (err: any) => {\n    let message = t('errors.unknownError');\n    if (err.response?.data?.message) {\n      message = err.response.data.message;\n    } else if (err instanceof Error) {\n      message = err.message;\n    }\n    setError(message);\n    showMessage(message, 'error');\n  };\n\n  // Keine Berechtigung fr die Seite\n  if (!canViewOrganisation) {\n    return <div className=\"p-4 text-red-600 dark:text-red-400\">{t('organisation.noPermission')}</div>;\n  }\n\n  return (\n    <div className=\"min-h-screen dark:bg-gray-900\">\n      <div className=\"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6\">\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n          {/* Header mit Icon */}\n          <div className=\"flex items-center mb-6\">\n            <UserGroupIcon className=\"h-6 w-6 mr-2 dark:text-white\" />\n            <h2 className=\"text-xl font-semibold dark:text-white\">{t('organisation.title')}</h2>\n          </div>\n\n          {/* Tabs fr Navigation */}\n          <div className=\"border-b border-gray-200 dark:border-gray-700 mb-6\">\n            <nav className=\"-mb-px flex space-x-4 sm:space-x-8 overflow-x-auto overflow-y-hidden\">\n              {/* Users Tab - immer sichtbar, aber mit Pro-Badge wenn nicht berechtigt */}\n              <button\n                className={`${\n                  activeTabState === 'users' && canViewUsers\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                    : !canViewUsers\n                    ? 'border-transparent text-gray-400 dark:text-gray-500 cursor-not-allowed opacity-60'\n                    : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                } whitespace-nowrap py-2 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center relative flex-shrink-0`}\n                onClick={() => canViewUsers && handleTabChange('users')}\n                disabled={!canViewUsers}\n              >\n                <UserIcon className=\"h-3 w-3 sm:h-5 sm:w-5 mr-1 sm:mr-2\" />\n                {t('organisation.tabs.users')}\n                {!canViewUsers && (\n                  <span className=\"ml-1 sm:ml-2 px-1 sm:px-2 py-0.5 text-[0.625rem] sm:text-xs font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded\">\n                    PRO\n                  </span>\n                )}\n              </button>\n\n              {/* Roles Tab - immer sichtbar, aber mit Pro-Badge wenn nicht berechtigt */}\n              <button\n                className={`${\n                  activeTabState === 'roles' && canViewRoles\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                    : !canViewRoles\n                    ? 'border-transparent text-gray-400 dark:text-gray-500 cursor-not-allowed opacity-60'\n                    : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                } whitespace-nowrap py-2 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center relative flex-shrink-0`}\n                onClick={() => canViewRoles && handleTabChange('roles')}\n                disabled={!canViewRoles}\n              >\n                <ShieldCheckIcon className=\"h-3 w-3 sm:h-5 sm:w-5 mr-1 sm:mr-2\" />\n                {t('organisation.tabs.roles')}\n                {!canViewRoles && (\n                  <span className=\"ml-1 sm:ml-2 px-1 sm:px-2 py-0.5 text-[0.625rem] sm:text-xs font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded\">\n                    PRO\n                  </span>\n                )}\n              </button>\n\n              {/* Branches Tab - immer sichtbar, aber mit Pro-Badge wenn nicht berechtigt */}\n              <button\n                className={`${\n                  activeTabState === 'branches' && canViewBranches\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                    : !canViewBranches\n                    ? 'border-transparent text-gray-400 dark:text-gray-500 cursor-not-allowed opacity-60'\n                    : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                } whitespace-nowrap py-2 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center relative flex-shrink-0`}\n                onClick={() => canViewBranches && handleTabChange('branches')}\n                disabled={!canViewBranches}\n              >\n                <MapPinIcon className=\"h-3 w-3 sm:h-5 sm:w-5 mr-1 sm:mr-2\" />\n                {t('organisation.tabs.branches', { defaultValue: 'Niederlassungen' })}\n                {!canViewBranches && (\n                  <span className=\"ml-1 sm:ml-2 px-1 sm:px-2 py-0.5 text-[0.625rem] sm:text-xs font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded\">\n                    PRO\n                  </span>\n                )}\n              </button>\n\n              {/* Providers Tab - immer sichtbar, aber mit Pro-Badge wenn nicht berechtigt */}\n              <button\n                className={`${\n                  activeTabState === 'providers' && canViewProviders\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                    : !canViewProviders\n                    ? 'border-transparent text-gray-400 dark:text-gray-500 cursor-not-allowed opacity-60'\n                    : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                } whitespace-nowrap py-2 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center relative flex-shrink-0`}\n                onClick={() => canViewProviders && handleTabChange('providers')}\n                disabled={!canViewProviders}\n              >\n                <TruckIcon className=\"h-3 w-3 sm:h-5 sm:w-5 mr-1 sm:mr-2\" />\n                {t('organisation.tabs.providers', { defaultValue: 'Proveedores' })}\n                {!canViewProviders && (\n                  <span className=\"ml-1 sm:ml-2 px-1 sm:px-2 py-0.5 text-[0.625rem] sm:text-xs font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded\">\n                    PRO\n                  </span>\n                )}\n              </button>\n\n              {/* Organization Tab - sichtbar wenn berechtigt */}\n              {canViewOrg && (\n                <button\n                  className={`${\n                    activeTabState === 'organization'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                  } whitespace-nowrap py-2 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center flex-shrink-0`}\n                  onClick={() => handleTabChange('organization')}\n                >\n                  <UserGroupIcon className=\"h-3 w-3 sm:h-5 sm:w-5 mr-1 sm:mr-2\" />\n                  {t('organisation.tabs.organization')}\n                </button>\n              )}\n            </nav>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4\">\n              <p className=\"font-bold\">{t('organisation.error')}</p>\n              <p>{error}</p>\n            </div>\n          )}\n\n          {loading && <div className=\"p-4 dark:text-gray-300\">{t('organisation.loading')}</div>}\n\n          {/* Tab Inhalte */}\n          <div className=\"mt-6\">\n            {activeTabState === 'users' ? (\n              canViewUsers ? (\n                <UserManagementTab onError={handleError} />\n              ) : (\n                <div className=\"p-8 text-center\">\n                  <div className=\"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6\">\n                    <span className=\"inline-block px-3 py-1 text-sm font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded mb-4\">\n                      PRO\n                    </span>\n                    <p className=\"text-gray-700 dark:text-gray-300 mt-4\">\n                      {t('organisation.proFeature.users')}\n                    </p>\n                  </div>\n                </div>\n              )\n            ) : activeTabState === 'roles' ? (\n              canViewRoles ? (\n                <RoleManagementTab onError={handleError} />\n              ) : (\n                <div className=\"p-8 text-center\">\n                  <div className=\"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6\">\n                    <span className=\"inline-block px-3 py-1 text-sm font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded mb-4\">\n                      PRO\n                    </span>\n                    <p className=\"text-gray-700 dark:text-gray-300 mt-4\">\n                      {t('organisation.proFeature.roles')}\n                    </p>\n                  </div>\n                </div>\n              )\n            ) : activeTabState === 'branches' ? (\n              canViewBranches ? (\n                <BranchManagementTab onError={handleError} />\n              ) : (\n                <div className=\"p-8 text-center\">\n                  <div className=\"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6\">\n                    <span className=\"inline-block px-3 py-1 text-sm font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded mb-4\">\n                      PRO\n                    </span>\n                    <p className=\"text-gray-700 dark:text-gray-300 mt-4\">\n                      {t('organisation.proFeature.branches', { defaultValue: 'Niederlassungs-Verwaltung ist eine PRO-Funktion' })}\n                    </p>\n                  </div>\n                </div>\n              )\n            ) : activeTabState === 'providers' ? (\n              canViewProviders ? (\n                <div className=\"space-y-4\">\n                  {/* Switch fr Tours/Providers */}\n                  <div className=\"flex gap-2 mb-4\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setProvidersViewMode('tours')}\n                      className={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${\n                        providersViewMode === 'tours'\n                          ? 'bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400'\n                          : 'bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600'\n                      }`}\n                    >\n                      {t('tours.title', 'Touren')}\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setProvidersViewMode('providers')}\n                      className={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${\n                        providersViewMode === 'providers'\n                          ? 'bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400'\n                          : 'bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600'\n                      }`}\n                    >\n                      {t('organisation.tabs.providers', { defaultValue: 'Proveedores' })}\n                    </button>\n                  </div>\n                  \n                  {/* Bedingtes Rendering */}\n                  {providersViewMode === 'tours' ? (\n                    <ToursTab onError={handleError} />\n                  ) : (\n                    <TourProvidersTab onError={handleError} />\n                  )}\n                </div>\n              ) : (\n                <div className=\"p-8 text-center\">\n                  <div className=\"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6\">\n                    <span className=\"inline-block px-3 py-1 text-sm font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded mb-4\">\n                      PRO\n                    </span>\n                    <p className=\"text-gray-700 dark:text-gray-300 mt-4\">\n                      {t('organisation.proFeature.providers', { defaultValue: 'Tour-Provider-Verwaltung ist eine PRO-Funktion' })}\n                    </p>\n                  </div>\n                </div>\n              )\n            ) : activeTabState === 'organization' && canViewOrg ? (\n              <div className=\"space-y-6\">\n                <OrganizationSettings />\n                <JoinRequestsList />\n              </div>\n            ) : (\n              <div className=\"p-4 text-red-600 dark:text-red-400\">\n                {t('organisation.noPermissionForPage')}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Organisation;\n\n\n"],"names":["_ref","isOpen","onClose","onBookingCreated","tour","preselectedTour","t","useTranslation","user","useAuth","showMessage","useMessage","tourId","setTourId","useState","id","tourDate","setTourDate","numberOfParticipants","setNumberOfParticipants","customerName","setCustomerName","customerEmail","setCustomerEmail","customerPhone","setCustomerPhone","customerNotes","setCustomerNotes","tours","setTours","selectedTour","setSelectedTour","error","setError","loading","setLoading","loadingData","setLoadingData","useEffect","async","_response$data","response","axiosInstance","get","API_ENDPOINTS","TOURS","BASE","params","isActive","toursData","data","Array","isArray","err","console","loadData","find","Number","_jsxs","Dialog","open","className","children","_jsx","Panel","Title","defaultValue","onClick","XMarkIcon","onSubmit","e","preventDefault","Date","trim","length","numPart","minParticipants","min","max","maxParticipants","_response$data2","_response$data3","post","TOUR_BOOKINGS","_response$data4","success","Error","message","_err$response","_err$response$data","errorMessage","value","onChange","target","required","disabled","filter","title","map","type","undefined","rows","onCertificateCreated","userId","userName","currentUser","isHR","isAdmin","permissionsLoading","usePermissions","openSidepane","closeSidepane","useSidepane","isMobile","setIsMobile","window","innerWidth","isLargeScreen","setIsLargeScreen","activeTab","setActiveTab","userData","setUserData","issueDate","setIssueDate","toISOString","split","certificateType","setCertificateType","pdfFile","setPdfFile","pdfPreviewUrl","setPdfPreviewUrl","uploading","setUploading","availableTemplates","setAvailableTemplates","selectedTemplate","setSelectedTemplate","useTemplate","setUseTemplate","fileInputRef","useRef","handleResize","addEventListener","removeEventListener","fetchUserData","fetchTemplates","documentTemplates","ORGANIZATION_LIFECYCLE","DOCUMENT_TEMPLATES","templates","employmentCertificate","push","version","path","userResponse","lifecycleResponse","Promise","all","USERS","BY_ID","LIFECYCLE","BY_USER","lifecycle","userDataObj","firstName","lastName","identificationNumber","contractStartDate","contractEndDate","contractType","salary","position","URL","revokeObjectURL","concat","style","animation","DocumentTextIcon","_Fragment","UserIcon","CalendarIcon","toLocaleDateString","checked","template","ref","accept","event","_event$target$files","file","files","size","url","createObjectURL","name","toFixed","current","_fileInputRef$current","click","src","height","validationError","validateForm","issueDateObj","isNaN","getTime","pdfPath","templateUsed","templateVersion","now","certificateData","CERTIFICATES","ArrowPathIcon","CheckIcon","onContractCreated","setContractType","startDate","setStartDate","endDate","setEndDate","setSalary","workingHours","setWorkingHours","setPosition","employmentContract","toString","placeholder","CurrencyDollarIcon","parseFloat","step","startDateObj","endDateObj","contractData","CONTRACTS","onCertificateUpdated","certificate","existingPdfUrl","setExistingPdfUrl","CERTIFICATE_DOWNLOAD","handleSubmit","updateData","put","CERTIFICATE","onContractUpdated","contract","CONTRACT_DOWNLOAD","CONTRACT","lifecycleId","onUpdate","isLegal","registrations","setRegistrations","arl","eps","pension","caja","editingType","setEditingType","formData","setFormData","status","registrationNumber","provider","registrationDate","notes","saving","setSaving","loadingRef","abortControllerRef","loadRegistrations","useCallback","abort","abortController","AbortController","registrationPromises","signal","aborted","registration","SOCIAL_SECURITY","timeout","_error$response","_error$message","code","includes","warn","results","newRegistrations","forEach","_ref2","registrationType","number","registeredAt","completedAt","handleCancel","handleSave","resolve","setTimeout","_error$response2","_error$response2$data","getStatusIcon","CheckCircleIcon","ClockIcon","XCircleIcon","getStatusLabel","labelKey","getTypeLabel","isEditing","_objectSpread","handleEdit","PencilIcon","onOffboardingStarted","exitDate","setExitDate","exitReason","setExitReason","validationErrors","setValidationErrors","today","errors","selectedDate","setHours","maxDate","setFullYear","getFullYear","Object","keys","STATUS","renderForm","ExclamationTriangleIcon","htmlFor","prev","ArrowRightIcon","opacity","transition","pointerEvents","role","onOffboardingCompleted","offboardingTasks","confirmText","setConfirmText","completedTasks","task","allTasksCompleted","requiredConfirmText","toLowerCase","isCompleted","_lifecycleData$lifecy","lifecycleData","setLifecycleData","certificates","setCertificates","contracts","setContracts","setOffboardingTasks","isCertificateCreateModalOpen","setIsCertificateCreateModalOpen","isContractCreateModalOpen","setIsContractCreateModalOpen","editingCertificate","setEditingCertificate","editingContract","setEditingContract","downloadingCertId","setDownloadingCertId","downloadingContractId","setDownloadingContractId","isOffboardingStartModalOpen","setIsOffboardingStartModalOpen","isOffboardingCompleteModalOpen","setIsOffboardingCompleteModalOpen","isEditContractDatesModalOpen","setIsEditContractDatesModalOpen","editingContractStartDate","setEditingContractStartDate","editingContractEndDate","setEditingContractEndDate","fetchDataRef","fetchData","force","arguments","_certsResponse$data","_contractsResponse$da","_lifecycleResponse$da","_lifecycleResponse$da2","_lifecycleResponse$da3","_lifecycleResponse$da4","certsResponse","contractsResponse","tasksResponse","TASKS","catch","allTasks","offboardingTaskTitles","filteredTasks","progress","percent","handleEditContractDates","formatDate","dateString","year","month","day","socialSecurityRegistrations","BuildingOfficeIcon","clickable","config","onboarding","color","active","contract_change","offboarding","archived","getStatusBadge","onboardingStartedAt","onboardingCompletedAt","offboardingStartedAt","completed","total","width","totalTasks","Math","round","description","PlusIcon","cert","isLatest","generatedByUser","certId","responseType","blob","Blob","downloadUrl","link","document","createElement","href","download","body","appendChild","removeChild","handleDownloadCertificate","ArrowDownTrayIcon","toLocaleString","currency","contractId","handleDownloadContract","SocialSecurityEditor","CertificateCreationModal","ContractCreationModal","CertificateEditModal","ContractEditModal","OffboardingStartModal","OffboardingCompleteModal","CONTRACT_TYPES","onError","COUNTRIES","PAYROLL_COUNTRIES","LANGUAGES","users","setUsers","selectedUser","setSelectedUser","userFormData","setUserFormData","isEditingUser","setIsEditingUser","selectedRoles","setSelectedRoles","lifecycleRefreshKey","setLifecycleRefreshKey","isDebugMode","setIsDebugMode","roleWarning","setRoleWarning","roles","setRoles","loadingRoles","setLoadingRoles","branches","setBranches","loadingBranches","setLoadingBranches","selectedBranches","setSelectedBranches","activeUserTab","setActiveUserTab","userFilterTab","setUserFilterTab","isCreateModalOpen","setIsCreateModalOpen","showDocumentUpload","setShowDocumentUpload","newUserFormData","setNewUserFormData","email","password","allUsers","setAllUsers","fetchAllUsers","userApi","getAll","filterUsersByActiveStatus","handleError","sorted","sort","a","b","aUsername","username","bUsername","aFirstName","bFirstName","localeCompare","fetchUserDetails","log","getById","birthday","roleIds","userRole","roleId","r","branchIds","branch","userBranch","branchId","fallbackRoles","permissions","roleApi","fetchRoles","branchApi","fetchBranches","handleUserInputChange","finalValue","toggleRole","isRoleSelected","newSelectedRoles","updateRoles","toggleBranch","isBranchSelected","newSelectedBranches","updateBranches","handleNewUserInputChange","handleCreateUser","match","create","newUser","prevUsers","_err$response5","_err$response5$data","parseInt","UserCircleIcon","ShieldCheckIcon","MapPinIcon","_userFormData$usernam","_userFormData$email","dataToSend","bankDetails","gender","phoneNumber","language","hourlyRate","monthlySalary","payrollCountry","update","updatedData","_err$response2","_err$response4","_err$response3","_err$response3$data","errorMsg","IdentificationDocumentForm","onDocumentSaved","onCancel","identificationDocuments","_COUNTRIES$find","latestDoc","readOnly","country","c","documentType","passport","national_id","driving_license","residence_permit","work_permit","tax_id","social_security","documentNumber","expiryDate","handleCancelEdit","currentUserId","localStorage","getItem","currentActiveStatus","newActiveStatus","selectedUserActive","updatePayload","updatedAllUsers","IdentificationDocumentList","some","ids","join","isFixedRole","xmlns","viewBox","fill","fillRule","d","clipRule","LifecycleView","alwaysVisiblePages","defaultPages","defaultTables","defaultButtons","tableToPageMapping","buttonToPageMapping","buttonToTableMapping","ROLES_TABLE_ID","STANDARD_ROLE_IDS","STANDARD_ROLE_NAMES","isStandardRole","roleName","RoleCard","onEdit","onDelete","onCopy","canEdit","canDelete","canCopy","DocumentDuplicateIcon","TrashIcon","allBranches","perm","accessLevel","slice","permission","entity","entityType","onRolesChange","isModalOpen","setIsModalOpen","editingRole","setEditingRole","pageDisplayNames","useMemo","tableDisplayNames","buttonDisplayNames","page","table","button","hasPermission","searchTerm","setSearchTerm","isFilterModalOpen","setIsFilterModalOpen","setAllBranches","selectedBranchIds","setSelectedBranchIds","filterConditions","setFilterConditions","filterLogicalOperators","setFilterLogicalOperators","activeFilterName","setActiveFilterName","selectedFilterId","setSelectedFilterId","handleValidationError","useError","isAddPermissionModalOpen","setIsAddPermissionModalOpen","selectedPermission","setSelectedPermission","displayLimit","setDisplayLimit","component","action","filteredPermissions","category","ErrorCategory","PERMISSION","updateError","meta","cause","createError","resetForm","handleDelete","confirm","delete","deleteError","refreshError","handleCopyRole","copiedRoleData","prevRoles","prepareRoleForEditing","allPermissions","existingPermIndex","findIndex","p","_branchData$branches","branchData","getRoleBranches","setAllPagePermissions","newPermissions","permIndex","indexOf","setAllTablePermissions","setAllButtonPermissions","getActiveFilterCount","filteredAndSortedRoles","searchLower","result","i","condition","conditionMet","column","operator","startsWith","count","existingFilters","SAVED_FILTERS","BY_TABLE","alleFilter","tableId","conditions","operators","createStandardFilters","applyFilterConditions","setInitialFilter","resetFilterConditions","FunnelIcon","FilterPane","columns","label","onApply","onReset","savedConditions","savedOperators","SavedFilterTags","onSelectFilter","onFilterChange","handleFilterChange","defaultFilterName","prevLimit","ChevronDownIcon","index","tablePerm","aName","bName","priorityOrder","aIndex","bIndex","tableIndex","tablePermIndex","isTableActive","tableEntity","tableDisplayName","relatedButtons","buttonPerm","order","buttonIndex","buttonPermIndex","isButtonActive","buttonDisplayName","BranchCard","BRANCHES_TABLE_ID","editingBranch","setEditingBranch","whatsappSettings","apiKey","apiSecret","phoneNumberId","ai","enabled","model","systemPrompt","rules","sources","temperature","maxTokens","lobbyPmsSettings","apiUrl","propertyId","autoCreateTasks","lateCheckInThreshold","notificationChannels","autoSendInvitation","boldPaymentSettings","merchantId","environment","doorSystemSettings","clientId","clientSecret","lockIds","appName","emailSettings","smtpHost","smtpPort","smtpUser","smtpPass","smtpFromEmail","smtpFromName","imap","host","port","secure","folder","processedFolder","activeSettingsTab","setActiveSettingsTab","showSecrets","setShowSecrets","canCreate","BRANCHES","_error$response$data","sireSettings","autoRegisterOnCheckIn","propertyCode","existingWhatsapp","existingLobbyPms","existingBoldPayment","existingDoorSystem","existingEmail","handleCloseModal","UPDATE","CREATE","DELETE","_error$response3","_error$response3$data","filteredAndSortedBranches","handleCreate","autoFocus","tab","whatsappApiKey","stroke","strokeLinecap","strokeLinejoin","strokeWidth","s","emailSmtpPass","emailImapPass","onProviderCreated","setName","phone","setPhone","setEmail","contactPerson","setContactPerson","setNotes","setBranchId","_branchesRes$data","branchesRes","TOUR_PROVIDERS","onProviderUpdated","ProviderCard","isEditModalOpen","setIsEditModalOpen","editingProvider","setEditingProvider","providers","setProviders","fetchProviders","filteredProviders","_provider$contactPers","_provider$phone","_provider$email","_provider$notes","search","providerId","CreateTourProviderModal","newProvider","EditTourProviderModal","updatedProvider","TourType","onTourCreated","setTitle","setDescription","setType","OWN","setIsActive","duration","setDuration","setMaxParticipants","setMinParticipants","price","setPrice","setCurrency","location","setLocation","meetingPoint","setMeetingPoint","setIncludes","excludes","setExcludes","requirements","setRequirements","totalCommission","setTotalCommission","totalCommissionPercent","setTotalCommissionPercent","sellerCommissionPercent","setSellerCommissionPercent","sellerCommissionFixed","setSellerCommissionFixed","externalProviderId","setExternalProviderId","externalBookingUrl","setExternalBookingUrl","imageFile","setImageFile","imagePreview","setImagePreview","galleryFiles","setGalleryFiles","galleryPreviews","setGalleryPreviews","uploadingImage","setUploadingImage","tourProviders","setTourProviders","_API_ENDPOINTS$TOUR_P","_providersRes$data","providersRes","maxPart","minPart","EXTERNAL","tourData","createdTour","FormData","append","UPLOAD_IMAGE","headers","imgErr","UPLOAD_GALLERY","galleryErr","updatedResponse","_tour$isActive","_tour$galleryUrls","onTourUpdated","imageUrl","API_BASE_URL","galleryUrls","_tour$isActive2","_tour$galleryUrls2","_err$response2$data","_e$target$files","reader","FileReader","onloadend","readAsDataURL","alt","multiple","from","preview","currentGallery","DELETE_GALLERY_IMAGE","newIndex","_","removeGalleryImage","setTour","isCreateBookingModalOpen","setIsCreateBookingModalOpen","loadTour","UsersIcon","createdBy","createdAt","format","locale","de","externalProvider","rel","availableFrom","availableTo","CreateTourBookingModal","tourCount","selectedFields","setSelectedFields","exporting","setExporting","setFormat","availableFields","selectAll","f","deselectAll","field","toggleField","fieldId","fieldsParam","EXPORT","fields","JSON","stringify","String","csvContent","row","cell","replace","TOURS_TABLE_ID","defaultTourColumnOrder","defaultTourCardSortDirections","tourCardToTableMapping","toursLoading","setToursLoading","toursError","setToursError","tourSearchTerm","setTourSearchTerm","tourFilterConditions","setTourFilterConditions","tourFilterLogicalOperators","setTourFilterLogicalOperators","tourFilterSortDirections","setTourFilterSortDirections","tourActiveFilterName","setTourActiveFilterName","tourSelectedFilterId","setTourSelectedFilterId","isCreateTourModalOpen","setIsCreateTourModalOpen","isEditTourModalOpen","setIsEditTourModalOpen","isTourDetailsModalOpen","setIsTourDetailsModalOpen","isTourExportDialogOpen","setIsTourExportDialogOpen","selectedTourId","setSelectedTourId","draggedColumn","setDraggedColumn","dragOverColumn","setDragOverColumn","settings","isLoading","isLoadingSettings","updateColumnOrder","updateHiddenColumns","toggleColumnVisibility","isColumnVisible","updateViewMode","useTableSettings","defaultColumnOrder","defaultHiddenColumns","defaultViewMode","availableTourColumns","shortLabel","substring","tourFilterOnlyColumns","tourTableSortConfig","setTourTableSortConfig","key","direction","tourCardSortDirections","setTourCardSortDirections","viewMode","cardMetadataOrder","columnOrder","cardMetadata","tableCol","cardMeta","getTourCardMetadataFromColumnOrder","hiddenCardMetadata","hiddenTableColumns","Set","add","getTourHiddenCardMetadata","hiddenColumns","visibleCardMetadata","has","loadTours","filterId","background","rawData","applyTourFilterConditions","sortDirections","resetTourFilterConditions","handleDragEnd","visibleColumnIds","validOrder","missingColumns","filteredAndSortedTours","filtered","columnEvaluators","cond","endsWith","compareValue","abs","_tour$branch","branchName","createdByName","evaluateUserRoleCondition","createdById","getFieldValue","columnId","_tour$branch2","applyFilters","getTourSortValue","_tour$branch3","sortDir","x","y","priority","valueA","valueB","comparison","sortableColumns","titleA","titleB","Squares2X2Icon","TableCellsIcon","TableColumnConfig","visibleColumns","onToggleColumnVisibility","tableColumn","onColumnOrderChange","newOrder","newTableOrder","Boolean","modalTitle","onSortDirectionChange","handleTourCardSortDirectionChange","showSortDirection","savedSortDirections","onSortDirectionsChange","handleTourFilterChange","filterName","col","scope","draggable","onDragStart","handleDragStart","onDragOver","handleDragOver","onDrop","handleDrop","dragIndex","hoverIndex","newColumnOrder","draggedColumn_","splice","onDragEnd","handleTourSort","ArrowsUpDownIcon","colSpan","_tour$branch4","stopPropagation","TOGGLE_ACTIVE","InformationCircleIcon","CreateTourModal","EditTourModal","TourDetailsModal","TourExportDialog","onSuccess","displayName","domain","setErrors","fetchCurrentUser","checkScreenSize","handleChange","newErrors","organizationService","createOrganization","submit","handleClose","organizationName","searching","setSearching","organizations","setOrganizations","showDropdown","setShowDropdown","selectedOrganization","setSelectedOrganization","searchTimeoutRef","dropdownRef","handleClickOutside","contains","handleOrganizationInputChange","clearTimeout","searchOrganizations","handleSelectOrganization","org","handleMessageChange","createJoinRequest","organization","onSave","lifecycleRoles","setLifecycleRoles","loadRoles","loadLifecycleRoles","LIFECYCLE_ROLES","handleAssignStandardRoles","adminRole","hrRole","legalRole","adminRoleId","hrRoleId","legalRoleId","prepareRoleId","employeeRoleIds","SignatureUploadSection","onUpload","signatures","setSignatures","signatureType","setSignatureType","signerName","setSignerName","signerPosition","setSignerPosition","positionX","setPositionX","positionY","setPositionY","positionPage","setPositionPage","React","loadSignatures","documentSignatures","DOCUMENT_SIGNATURES","signaturesList","_error$response5","_error$response6","_error$response6$data","_event$target$files2","UPLOAD_SIGNATURE","_error$response7","_error$response7$data","_fileInputRef$current2","signature","ORGANIZATIONS","CURRENT","typeKey","_error$response8","_error$response8$data","handleDeleteSignature","FieldPositionConfiguration","_ref3","templateType","setTemplateType","setFields","certificateFields","contractFields","loadFields","_settings$documentTem","templateSettings","savedFields","margin","lineHeight","currentY","defaultFields","fieldList","defaultPositions","fontSize","currentDate","fieldName","handleFieldChange","property","fieldLabels","_fields$fieldName","_fields$fieldName2","_fields$fieldName3","resetFields","currentSettings","updateOrganization","_error$response9","_error$response9$data","setTemplates","loadTemplates","templatesList","filePath","UPLOAD_TEMPLATE","_error$response4","_error$response4$data","handleDeleteTemplate","smtpSettings","setSmtpSettings","showPassword","setShowPassword","_settings$smtpPort","EnvelopeIcon","handleClear","ALLOWED_DOMAINS","lobbyPms","ttlock","sire","boldPayment","validateApiUrl","service","parsed","hostname","canManageOrganization","apiSettings","setApiSettings","lobbyPmsApiKey","lobbyPmsPropertyId","lobbyPmsSyncEnabled","lobbyPmsAutoCreateTasks","lobbyPmsAutoSendReservationInvitation","lobbyPmsLateCheckInThreshold","ttlockClientId","ttlockClientSecret","ttlockApiUrl","ttlockUsername","ttlockPassword","ttlockPasscodeType","sireApiUrl","sireApiKey","sireApiSecret","sireEnabled","sireAutoRegisterOnCheckIn","sirePropertyCode","boldPaymentApiKey","boldPaymentMerchantId","boldPaymentEnvironment","whatsappProvider","whatsappApiSecret","whatsappPhoneNumberId","doorSystem","whatsapp","syncEnabled","autoSendReservationInvitation","passcodeType","SecretInput","showSecret","toggleShowSecret","KeyIcon","test","_err$path","msg","logo","nit","selectedCountry","setSelectedCountry","setNit","organizationLanguage","setOrganizationLanguage","useLanguage","selectedOrgLanguage","setSelectedOrgLanguage","savingOrgLanguage","setSavingOrgLanguage","logoFile","setLogoFile","logoPreview","setLogoPreview","orgSettings","langResponse","getOrganizationLanguage","langError","loadOrgLanguage","handleLogoFileChange","base64String","newLanguage","RoleConfigurationTab","DocumentConfigurationTab","SMTPConfigurationTab","ApiConfigurationTab","getStatusColor","getStatusText","MY_JOIN_REQUESTS_TABLE_ID","MyJoinRequestsList","joinRequests","setJoinRequests","isFilterPanelOpen","setIsFilterPanelOpen","mountedRef","withdrawingId","setWithdrawingId","isMounted","timeoutId","MY_JOIN_REQUESTS","requests","getMyJoinRequests","fetchMyJoinRequests","hour","minute","filteredJoinRequests","request","_request$message","orgName","reduce","acc","_request$message2","searchValue","msgValue","processor","processedAt","requestId","withdrawJoinRequest","req","_err$response4$data","handleWithdraw","OrganizationSettings","setOrganization","stats","setStats","loadingStats","setLoadingStats","isJoinModalOpen","setIsJoinModalOpen","canViewOrganization","refreshOrganization","useOrganization","fetchOrganization","includeSettings","getCurrentOrganization","statsData","getOrganizationStats","statsErr","hasOrganization","hasInitialLoadRef","UserPlusIcon","UserGroupIcon","subscriptionPlan","currentUsers","maxUsers","utilizationPercent","_count","invitations","ChartBarIcon","availableSlots","CreateOrganizationModal","handleCreateSuccess","JoinOrganizationModal","EditOrganizationModal","handleEditModalClose","handleEditSuccess","joinRequest","setAction","setRoleId","setResponse","organizationId","processJoinRequest","requester","JOIN_REQUESTS_TABLE_ID","JoinRequestsList","isProcessModalOpen","setIsProcessModalOpen","selectedRequest","setSelectedRequest","canViewJoinRequests","canManageJoinRequests","hasInitialLoad","joinRequestsCount","JOIN_REQUESTS","getJoinRequests","stack","fetchJoinRequests","_request$requester$em","requesterName","requesterEmail","_request$requester$em2","handleOpenProcessModal","ProcessJoinRequestModal","Organisation","canViewOrganisation","canViewUsers","canViewRoles","canViewBranches","canViewProviders","canViewOrg","activeTabState","setActiveTabState","providersViewMode","setProvidersViewMode","isInitialized","defaultTab","handleTabChange","TruckIcon","UserManagementTab","RoleManagementTab","BranchManagementTab","ToursTab","TourProvidersTab"],"sourceRoot":""}