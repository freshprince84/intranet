"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[692],{568:(e,t,r)=>{r.d(t,{w:()=>s});var a=r(5043);function s(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{debounceMs:s=100,enabled:l=!0,additionalElementRef:o}=r,n=(0,a.useRef)();(0,a.useEffect)((()=>{n.current=t}),[t]),(0,a.useEffect)((()=>{if(!l||!e.current)return;const t=e.current,r={current:null},a=()=>{r.current&&clearTimeout(r.current),r.current=setTimeout((()=>{var e;null===(e=n.current)||void 0===e||e.call(n)}),s)},i=new ResizeObserver((()=>{a()}));i.observe(t),null!==o&&void 0!==o&&o.current&&i.observe(o.current);const d=()=>{a()};return window.addEventListener("resize",d),()=>{i.disconnect(),window.removeEventListener("resize",d),r.current&&clearTimeout(r.current)}}),[l,s,e,o])}},4426:(e,t,r)=>{r.d(t,{A:()=>v});var a=r(5043),s=r(4117),l=r(6582),o=r(7591),n=r(1816),i=r(9422),d=r(9379),u=r(9248),c=r(9938),p=r(1923),g=r(1801),h=r(579);const m=e=>{let{condition:t,onChange:r,onDelete:l,onAdd:o,columns:n,isFirst:i,isLast:m}=e;const{t:f}=(0,s.Bd)(),[x,b]=(0,a.useState)([]),[v,y]=(0,a.useState)([]),[w,k]=(0,a.useState)([]),[_,j]=(0,a.useState)([]),[A,N]=(0,a.useState)([]),[S,E]=(0,a.useState)(!1),[T,D]=(0,a.useState)(!1),[C,R]=(0,a.useState)(!1),[F,q]=(0,a.useState)(!1);(0,a.useEffect)((()=>{b(((e,t)=>{const r=[{value:"equals",label:t("filter.operators.equals")},{value:"contains",label:t("filter.operators.contains")},{value:"startsWith",label:t("filter.operators.startsWith")},{value:"endsWith",label:t("filter.operators.endsWith")}],a=[{value:"equals",label:t("filter.operators.isExactly")},{value:"after",label:t("filter.operators.after")},{value:"before",label:t("filter.operators.before")},{value:"between",label:t("filter.operators.between")}],s=[{value:"equals",label:t("filter.operators.isEqual")},{value:"greaterThan",label:t("filter.operators.greaterThan")},{value:"lessThan",label:t("filter.operators.lessThan")}],l=[{value:"equals",label:t("filter.operators.equals")},{value:"notEquals",label:t("filter.operators.notEquals")}];return"dueDate"===e||"startTime"===e||"checkInDate"===e||"checkOutDate"===e||"arrivalTime"===e||"time"===e?a:"duration"===e||"amount"===e?s:"status"===e||"paymentStatus"===e||"roomNumber"===e||"type"===e||"branch"===e||"responsible"===e||"qualityControl"===e||"responsibleAndQualityControl"===e?l:r})(t.column,f))}),[t.column,f]),(0,a.useEffect)((()=>{const e=new AbortController;return(async()=>{if(localStorage.getItem("token")){if("requestedBy"===t.column||"responsible"===t.column||"qualityControl"===t.column||"responsibleAndQualityControl"===t.column){E(!0);try{const t=await p.A.get("/users/dropdown",{signal:e.signal});y(t.data)}catch(a){a.name}finally{e.signal.aborted||E(!1)}n.some((e=>"requestedBy"===e.id||"createTodo"===e.id));const r=n.some((e=>"responsible"===e.id||"qualityControl"===e.id));if(("responsible"===t.column||"responsibleAndQualityControl"===t.column)&&r){D(!0);try{const t=await p.A.get("/roles",{signal:e.signal});k(t.data)}catch(a){a.name}finally{e.signal.aborted||D(!1)}}}if("branch"===t.column){R(!0);try{const t=await p.A.get(g.Sn.BRANCHES.BASE,{signal:e.signal});j(t.data)}catch(a){a.name}finally{e.signal.aborted||R(!1)}}if("roomNumber"===t.column){q(!0);try{var r;const t=await p.A.get(g.Sn.RESERVATION.BASE,{signal:e.signal}),a=(null===(r=t.data)||void 0===r?void 0:r.data)||t.data||[],s=new Set;a.forEach((e=>{e.roomDescription&&""!==e.roomDescription.trim()&&s.add(e.roomDescription.trim()),e.roomNumber&&""!==e.roomNumber.trim()&&!e.roomNumber.toLowerCase().startsWith("cama")&&s.add(e.roomNumber.trim())}));const l=Array.from(s).sort();N(l)}catch(a){a.name}finally{e.signal.aborted||q(!1)}}}})(),()=>{e.abort()}}),[t.column]);return(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("div",{className:"w-[180px] flex-shrink-0",children:(0,h.jsxs)("select",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs bg-white dark:bg-gray-800 text-gray-900 dark:text-white w-full",value:t.column,onChange:e=>{var a;return r((0,d.A)((0,d.A)({},t),{},{column:e.target.value,operator:(null===(a=x[0])||void 0===a?void 0:a.value)||"equals",value:null}))},children:[(0,h.jsx)("option",{value:"",children:f("filter.row.selectColumn")}),n.map((e=>(0,h.jsx)("option",{value:e.id,children:e.label},e.id)))]})}),(0,h.jsx)("div",{className:"w-[140px] flex-shrink-0",children:(0,h.jsx)("select",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs bg-white dark:bg-gray-800 text-gray-900 dark:text-white w-full",value:t.operator,onChange:e=>r((0,d.A)((0,d.A)({},t),{},{operator:e.target.value})),children:x.map((e=>(0,h.jsx)("option",{value:e.value,children:e.label},e.value)))})}),(0,h.jsx)("div",{className:"flex-1 min-w-0",children:((e,r,a,s)=>{if("status"===e){const e=n.some((e=>"requestedBy"===e.id||"createTodo"===e.id)),t=n.some((e=>"responsible"===e.id||"qualityControl"===e.id)),r=n.some((e=>"client"===e.id))&&!n.some((e=>"responsible"===e.id));return n.some((e=>"checkInDate"===e.id||"checkOutDate"===e.id||"roomNumber"===e.id))?(0,h.jsxs)("select",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:a||"",onChange:e=>s(e.target.value),children:[(0,h.jsx)("option",{value:"",children:f("filter.row.pleaseSelect")}),(0,h.jsx)("option",{value:"potential",children:f("reservations.status.potential","Potenzielle Reservierung")}),(0,h.jsx)("option",{value:"confirmed",children:f("reservations.status.confirmed","Best\xe4tigt")}),(0,h.jsx)("option",{value:"notification_sent",children:f("reservations.status.notification_sent","Benachrichtigung gesendet")}),(0,h.jsx)("option",{value:"checked_in",children:f("reservations.status.checked_in","Eingecheckt")}),(0,h.jsx)("option",{value:"checked_out",children:f("reservations.status.checked_out","Ausgecheckt")}),(0,h.jsx)("option",{value:"cancelled",children:f("reservations.status.cancelled","Storniert")}),(0,h.jsx)("option",{value:"no_show",children:f("reservations.status.no_show","Nicht erschienen")})]}):e?(0,h.jsxs)("select",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:a||"",onChange:e=>s(e.target.value),children:[(0,h.jsx)("option",{value:"",children:f("filter.row.pleaseSelect")}),(0,h.jsx)("option",{value:"approval",children:f("filter.row.status.approval")}),(0,h.jsx)("option",{value:"approved",children:f("filter.row.status.approved")}),(0,h.jsx)("option",{value:"to_improve",children:f("filter.row.status.to_improve")}),(0,h.jsx)("option",{value:"denied",children:f("filter.row.status.denied")})]}):t?(0,h.jsxs)("select",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:a||"",onChange:e=>s(e.target.value),children:[(0,h.jsx)("option",{value:"",children:f("filter.row.pleaseSelect")}),(0,h.jsx)("option",{value:"open",children:f("filter.row.status.open")}),(0,h.jsx)("option",{value:"in_progress",children:f("filter.row.status.in_progress")}),(0,h.jsx)("option",{value:"improval",children:f("filter.row.status.improval")}),(0,h.jsx)("option",{value:"quality_control",children:f("filter.row.status.quality_control")}),(0,h.jsx)("option",{value:"done",children:f("filter.row.status.done")})]}):r?(0,h.jsxs)("select",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:a||"",onChange:e=>s(e.target.value),children:[(0,h.jsx)("option",{value:"",children:f("filter.row.pleaseSelect")}),(0,h.jsx)("option",{value:"DRAFT",children:f("filter.row.status.draft")}),(0,h.jsx)("option",{value:"SENT",children:f("filter.row.status.sent")}),(0,h.jsx)("option",{value:"PAID",children:f("filter.row.status.paid")}),(0,h.jsx)("option",{value:"OVERDUE",children:f("filter.row.status.overdue")}),(0,h.jsx)("option",{value:"CANCELLED",children:f("filter.row.status.cancelled")})]}):(0,h.jsxs)("select",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:a||"",onChange:e=>s(e.target.value),children:[(0,h.jsx)("option",{value:"",children:f("filter.row.pleaseSelect")}),(0,h.jsx)("option",{value:"open",children:f("filter.row.status.open")}),(0,h.jsx)("option",{value:"in_progress",children:f("filter.row.status.in_progress")}),(0,h.jsx)("option",{value:"done",children:f("filter.row.status.done")})]})}if("requestedBy"===e||"responsible"===e||"responsibleAndQualityControl"===e){n.some((e=>"requestedBy"===e.id||"createTodo"===e.id));const t=n.some((e=>"responsible"===e.id||"qualityControl"===e.id)),r=("responsible"===e||"responsibleAndQualityControl"===e)&&t;return(0,h.jsxs)("select",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:a||"",onChange:e=>s(e.target.value),disabled:S||r&&T,children:[(0,h.jsx)("option",{value:"",children:f("filter.row.pleaseSelect")}),v.length>0&&(0,h.jsx)("optgroup",{label:f("filter.row.groups.users"),children:v.map((e=>(0,h.jsxs)("option",{value:"user-".concat(e.id),children:[e.firstName," ",e.lastName]},"user-".concat(e.id))))}),r&&w.length>0&&(0,h.jsx)("optgroup",{label:f("filter.row.groups.roles"),children:w.map((e=>(0,h.jsx)("option",{value:"role-".concat(e.id),children:e.name},"role-".concat(e.id))))}),(S||r&&T)&&(0,h.jsx)("option",{value:"",disabled:!0,children:f("filter.row.loadingData")})]})}if("qualityControl"===e)return(0,h.jsxs)("select",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:a||"",onChange:e=>s(e.target.value),disabled:S,children:[(0,h.jsx)("option",{value:"",children:f("filter.row.pleaseSelect")}),v.length>0&&(0,h.jsx)("optgroup",{label:f("filter.row.groups.users"),children:v.map((e=>(0,h.jsxs)("option",{value:"user-".concat(e.id),children:[e.firstName," ",e.lastName]},"user-".concat(e.id))))}),S&&(0,h.jsx)("option",{value:"",disabled:!0,children:f("filter.row.loadingUsers")})]});if("type"===e){if(n.some((e=>"requestedBy"===e.id||"createTodo"===e.id)))return(0,h.jsxs)("select",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:a||"",onChange:e=>s(e.target.value),children:[(0,h.jsx)("option",{value:"",children:f("filter.row.pleaseSelect")}),(0,h.jsx)("option",{value:"event",children:f("requests.types.event")}),(0,h.jsx)("option",{value:"repair",children:f("requests.types.repair")}),(0,h.jsx)("option",{value:"improvement_suggestion",children:f("requests.types.improvement_suggestion")}),(0,h.jsx)("option",{value:"buy_order",children:f("requests.types.buy_order")}),(0,h.jsx)("option",{value:"employment_certificate",children:f("requests.types.employment_certificate")}),(0,h.jsx)("option",{value:"vacation",children:f("requests.types.vacation")}),(0,h.jsx)("option",{value:"permit",children:f("requests.types.permit")}),(0,h.jsx)("option",{value:"sick_leave",children:f("requests.types.sick_leave")}),(0,h.jsx)("option",{value:"other",children:f("requests.types.other")})]})}if("paymentStatus"===e){if(n.some((e=>"checkInDate"===e.id||"checkOutDate"===e.id||"roomNumber"===e.id)))return(0,h.jsxs)("select",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:a||"",onChange:e=>s(e.target.value),children:[(0,h.jsx)("option",{value:"",children:f("filter.row.pleaseSelect")}),(0,h.jsx)("option",{value:"pending",children:f("reservations.paymentStatus.pending","Ausstehend")}),(0,h.jsx)("option",{value:"paid",children:f("reservations.paymentStatus.paid","Bezahlt")}),(0,h.jsx)("option",{value:"partially_paid",children:f("reservations.paymentStatus.partially_paid","Teilweise bezahlt")}),(0,h.jsx)("option",{value:"refunded",children:f("reservations.paymentStatus.refunded","Erstattet")})]})}if("roomNumber"===e){if(n.some((e=>"checkInDate"===e.id||"checkOutDate"===e.id||"roomNumber"===e.id)))return(0,h.jsxs)("select",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:a||"",onChange:e=>s(e.target.value),disabled:F,children:[(0,h.jsx)("option",{value:"",children:f("filter.row.pleaseSelect")}),A.length>0&&A.map((e=>(0,h.jsx)("option",{value:e,children:e},e))),F&&(0,h.jsx)("option",{value:"",disabled:!0,children:f("filter.row.loadingData")})]})}if("branch"===e)return(0,h.jsxs)("select",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:a||"",onChange:e=>s(e.target.value),disabled:C,children:[(0,h.jsx)("option",{value:"",children:f("filter.row.pleaseSelect")}),_.length>0&&_.map((e=>(0,h.jsx)("option",{value:e.name,children:e.name},e.id))),C&&(0,h.jsx)("option",{value:"",disabled:!0,children:f("filter.row.loadingData")})]});if("dueDate"===e||"startTime"===e||"checkInDate"===e||"checkOutDate"===e||"arrivalTime"===e||"time"===e){const e="__TODAY__"===a||"__THIS_WEEK__"===a||"__THIS_MONTH__"===a||"__THIS_YEAR__"===a||"__WEEK_START__"===a||"__WEEK_END__"===a||"__MONTH_START__"===a||"__MONTH_END__"===a||"__YEAR_START__"===a||"__YEAR_END__"===a;let r="custom";return"__TODAY__"===a?r="today":"__THIS_WEEK__"===a?r="thisWeek":"__THIS_MONTH__"===a?r="thisMonth":"__THIS_YEAR__"===a?r="thisYear":"__WEEK_START__"===a||"__WEEK_END__"===a?r="thisWeek":"__MONTH_START__"===a||"__MONTH_END__"===a?r="thisMonth":"__YEAR_START__"!==a&&"__YEAR_END__"!==a||(r="thisYear"),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsxs)("select",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-xs bg-white dark:bg-gray-800 text-gray-900 dark:text-white w-full",value:r,onChange:e=>{const r=e.target.value;s("today"===r?(0,d.A)((0,d.A)({},t),{},{value:"__TODAY__",operator:"equals"}):"thisWeek"===r?(0,d.A)((0,d.A)({},t),{},{value:"__THIS_WEEK__",operator:"equals"}):"thisMonth"===r?(0,d.A)((0,d.A)({},t),{},{value:"__THIS_MONTH__",operator:"equals"}):"thisYear"===r?(0,d.A)((0,d.A)({},t),{},{value:"__THIS_YEAR__",operator:"equals"}):(0,d.A)((0,d.A)({},t),{},{value:""}))},children:[(0,h.jsx)("option",{value:"custom",children:f("filter.row.placeholders.custom",{defaultValue:"Benutzerdefiniert"})}),(0,h.jsx)("option",{value:"today",children:f("filter.row.placeholders.today",{defaultValue:"Heute"})}),(0,h.jsx)("option",{value:"thisWeek",children:f("filter.row.placeholders.thisWeek",{defaultValue:"Diese Woche"})}),(0,h.jsx)("option",{value:"thisMonth",children:f("filter.row.placeholders.thisMonth",{defaultValue:"Dieser Monat"})}),(0,h.jsx)("option",{value:"thisYear",children:f("filter.row.placeholders.thisYear",{defaultValue:"Dieses Jahr"})})]}),!e&&(0,h.jsx)("input",{type:"date",className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md text-xs w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:a||"",onChange:e=>s((0,d.A)((0,d.A)({},t),{},{value:e.target.value}))}),e&&(0,h.jsxs)("div",{className:"px-2 py-1 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md text-blue-700 dark:text-blue-300 text-xs",children:["\ud83d\udcc5 ","__TODAY__"===a&&f("filter.row.placeholders.today",{defaultValue:"Heute"}),"__WEEK_START__"===a||"__WEEK_END__"===a?f("filter.row.placeholders.thisWeek",{defaultValue:"Diese Woche"}):"","__MONTH_START__"===a||"__MONTH_END__"===a?f("filter.row.placeholders.thisMonth",{defaultValue:"Dieser Monat"}):"","__YEAR_START__"===a||"__YEAR_END__"===a?f("filter.row.placeholders.thisYear",{defaultValue:"Dieses Jahr"}):""]})]})}return(0,h.jsx)("input",{type:"text",className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 text-xs bg-white dark:bg-gray-800 text-gray-900 dark:text-white w-full",value:a||"",onChange:e=>s(e.target.value),placeholder:f("filter.row.enterValue")})})(t.column,t.operator,t.value,(e=>r((0,d.A)((0,d.A)({},t),{},{value:e}))))}),(0,h.jsxs)("div",{className:"w-[60px] flex-shrink-0 flex gap-1 justify-end",children:[(0,h.jsxs)("div",{className:"relative group",children:[(0,h.jsx)("button",{type:"button",onClick:l,className:"p-1 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-500 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed",disabled:i&&!m,children:(0,h.jsx)(u.A,{className:"h-4 w-4"})}),(0,h.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:f("filter.row.removeCondition")})]}),m?(0,h.jsxs)("div",{className:"relative group",children:[(0,h.jsx)("button",{type:"button",onClick:o,className:"p-1 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-500 rounded-md transition-colors",children:(0,h.jsx)(c.A,{className:"h-4 w-4"})}),(0,h.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:f("filter.row.addCondition")})]}):(0,h.jsx)("div",{className:"w-[28px] flex-shrink-0"})]})]})};var f=r(8662);const x=e=>{let{operator:t,onChange:r}=e;const{t:l}=(0,s.Bd)(),[o,n]=(0,a.useState)(!1),i=(0,a.useRef)(null);(0,a.useEffect)((()=>{const e=e=>{i.current&&!i.current.contains(e.target)&&n(!1)};return o&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[o]);const d=e=>{r(e),n(!1)};return(0,h.jsxs)("div",{className:"flex items-center justify-start my-4 relative pl-[180px]",ref:i,children:[(0,h.jsx)("button",{type:"button",onClick:()=>n(!o),className:"px-0.5 py-0.5 border border-gray-300 dark:border-gray-600 rounded-md text-xs font-medium bg-white dark:bg-gray-800 text-gray-900 dark:text-white text-center flex items-center justify-center gap-1",style:{width:"42px",minWidth:"42px",maxWidth:"42px",overflow:"hidden"},children:"AND"===t?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(f.A,{className:"h-3 w-3 flex-shrink-0"}),(0,h.jsx)("span",{className:"truncate",children:l("filter.logicalOperators.and")})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("span",{className:"text-xs",children:"\u2228"}),(0,h.jsx)("span",{className:"truncate",children:l("filter.logicalOperators.or")})]})}),o&&(0,h.jsxs)("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50 min-w-[42px]",children:[(0,h.jsxs)("button",{type:"button",onClick:()=>d("AND"),className:"w-full px-2 py-1 text-xs text-left hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-1.5 ".concat("AND"===t?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300"),children:[(0,h.jsx)(f.A,{className:"h-3 w-3 flex-shrink-0"}),(0,h.jsx)("span",{children:l("filter.logicalOperators.and")})]}),(0,h.jsxs)("button",{type:"button",onClick:()=>d("OR"),className:"w-full px-2 py-1 text-xs text-left hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-1.5 ".concat("OR"===t?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300"),children:[(0,h.jsx)("span",{className:"text-xs",children:"\u2228"}),(0,h.jsx)("span",{children:l("filter.logicalOperators.or")})]})]})]})};var b=r(7855);const v=e=>{let{columns:t,onApply:r,onReset:d,savedConditions:u,savedOperators:c,tableId:f}=e;const{t:v}=(0,s.Bd)(),{showMessage:y}=(0,b.A)(),[w,k]=(0,a.useState)(u&&u.length>0?u:[{column:"",operator:"equals",value:null}]),[_,j]=(0,a.useState)(c&&c.length>0?c:[]),[A,N]=(0,a.useState)(!1),[S,E]=(0,a.useState)(""),[T,D]=(0,a.useState)([]);(0,a.useEffect)((()=>{const e=new AbortController;return(async()=>{try{if(!localStorage.getItem("token"))return;const t=await p.A.get(g.Sn.SAVED_FILTERS.BY_TABLE(f),{signal:e.signal});D(t.data.map((e=>({id:e.id,name:e.name}))))}catch(t){"AbortError"!==t.name&&console.error(v("filter.loadError"),t)}})(),()=>{e.abort()}}),[f]);const C=(0,a.useRef)(u),R=(0,a.useRef)(c);(0,a.useEffect)((()=>{const e=(t=C.current,r=u,!(!t&&!r||t&&r&&t.length===r.length&&t.every(((e,t)=>{const a=r[t];return e.column===a.column&&e.operator===a.operator&&e.value===a.value}))));var t,r;const a=!((e,t)=>!e&&!t||!(!e||!t)&&e.length===t.length&&e.every(((e,r)=>e===t[r])))(R.current,c);e&&u&&(u.length>0?k(u):0===u.length&&k([{column:"",operator:"equals",value:null}]),C.current=u),a&&void 0!==c&&(j(c),R.current=c)}),[u,c]);const F=()=>{k([...w,{column:"",operator:"equals",value:null}]),w.length>0&&j([..._,"AND"])};return(0,h.jsxs)("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-lg",children:[(0,h.jsx)("h3",{className:"text-base font-medium text-gray-700 dark:text-gray-200 mb-3",children:v("filter.title")}),(0,h.jsx)("div",{className:"space-y-2",children:w.map(((e,r)=>(0,h.jsxs)(a.Fragment,{children:[(0,h.jsx)(m,{condition:e,onChange:e=>((e,t)=>{const r=[...w];r[e]=t,k(r)})(r,e),onDelete:()=>(e=>{const t=[...w];if(t.splice(e,1),k(t),e>0){const t=[..._];t.splice(e-1,1),j(t)}})(r),onAdd:F,columns:t,isFirst:0===r,isLast:r===w.length-1}),r<w.length-1&&(0,h.jsx)(x,{operator:_[r]||"AND",onChange:e=>((e,t)=>{const r=[..._];r[e]=t,j(r)})(r,e)})]},r)))}),A?(0,h.jsxs)("div",{className:"mt-4 flex gap-2 items-center",children:[(0,h.jsx)("input",{type:"text",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white flex-grow",placeholder:v("filter.filterName"),value:S,onChange:e=>E(e.target.value)}),(0,h.jsx)("button",{onClick:async()=>{if(!S.trim())return void y(v("filter.noName"),"error");if("Archiv"===S||"Aktuell"===S)return void y(v("filter.reservedNames"),"error");if(T.some((e=>("Archiv"===e.name||"Aktuell"===e.name)&&e.name===S)))return void y(v("filter.cannotOverwriteStandard"),"error");const e=w.filter((e=>""!==e.column));if(0!==e.length)try{if(!localStorage.getItem("token"))return void y(v("filter.notAuthenticated"),"error");await p.A.post(g.Sn.SAVED_FILTERS.BASE,{tableId:f,name:S,conditions:e,operators:_});y(v("filter.saveSuccess"),"success"),N(!1),E(""),window.refreshSavedFilters&&window.refreshSavedFilters()}catch(t){console.error("Fehler beim Speichern des Filters:",t),y(v("filter.saveError"),"error")}else y(v("filter.noConditions"),"error")},className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors",title:v("filter.saveFilter"),children:(0,h.jsx)(l.A,{className:"h-5 w-5"})}),(0,h.jsx)("button",{onClick:()=>N(!1),className:"p-2 bg-white text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700 transition-colors",title:v("filter.cancel"),children:(0,h.jsx)(o.A,{className:"h-5 w-5"})})]}):(0,h.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,h.jsx)("button",{onClick:()=>{k([{column:"",operator:"equals",value:null}]),j([]),d()},className:"p-2 bg-white text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700 transition-colors",title:v("filter.reset"),children:(0,h.jsx)(n.A,{className:"h-5 w-5"})}),(0,h.jsx)("button",{onClick:()=>N(!0),className:"p-2 bg-white text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700 transition-colors",title:v("filter.save"),children:(0,h.jsx)(l.A,{className:"h-5 w-5"})}),(0,h.jsx)("button",{onClick:()=>{const e=w.filter((e=>""!==e.column));r(e,_)},className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors",title:v("filter.apply"),children:(0,h.jsx)(i.A,{className:"h-5 w-5"})})]})]})}},7829:(e,t,r)=>{r.d(t,{A:()=>x});var a=r(5043),s=r(7950),l=r(4117),o=r(2517),n=r(9422),i=r(7591),d=r(2811),u=r(9248),c=r(1923),p=r(1801),g=r(7855),h=r(9462),m=(r(8018),r(568)),f=r(579);const x=e=>{let{tableId:t,onSelectFilter:r,onReset:x,activeFilterName:b,selectedFilterId:v,onFilterChange:y,defaultFilterName:w="Heute"}=e;const{t:k}=(0,l.Bd)(),{showMessage:_}=(0,g.A)(),j=(0,h.b)(),A=e=>"Archiv"===e||"tasks.filters.archive"===e||"requests.filters.archiv"===e?k("worktracker-todos"===t?"tasks.filters.archive":"requests.filters.archiv"):"Aktuell"===e||"tasks.filters.current"===e||"requests.filters.aktuell"===e?k("worktracker-todos"===t?"tasks.filters.current":"requests.filters.aktuell"):"Heute"===e||"Hoy"===e?k("common.today","Heute"):"Woche"===e?k("common.week","Woche"):"Aktive"===e?k("common.active","Aktive"):"Alle"===e||"Todos"===e?k("common.all","Alle"):e,N=j.getFilters(t),S=j.getFilterGroups(t),E=j.isLoading(t),T=j.getError(t),[D,C]=(0,a.useState)([]),R=(0,a.useRef)(null),F=(0,a.useRef)(new Map),[q,I]=(0,a.useState)(4),[M,L]=(0,a.useState)(0),[O,W]=(0,a.useState)(new Map),[V,z]=(0,a.useState)(!0),[H,B]=(0,a.useState)(!1),[P,Y]=(0,a.useState)(null),[G,U]=(0,a.useState)(null),[K,Q]=(0,a.useState)(null),[J,X]=(0,a.useState)(new Set),Z=(0,a.useRef)(new Map),$=(0,a.useRef)(new Map),[ee,te]=(0,a.useState)(new Map);(0,a.useEffect)((()=>{const e=()=>{const e=new Map;J.forEach((t=>{const r=$.current.get(t);if(r){const a=r.getBoundingClientRect();e.set(t,{top:a.bottom+window.scrollY+4,left:a.left+window.scrollX})}})),te(e)};return J.size>0&&(e(),window.addEventListener("scroll",e,!0),window.addEventListener("resize",e)),()=>{window.removeEventListener("scroll",e,!0),window.removeEventListener("resize",e)}}),[J]);const[re,ae]=(0,a.useState)(null),[se,le]=(0,a.useState)(""),oe=(0,a.useCallback)((async()=>{await j.refreshFilters(t)}),[t,j]),ne=(0,a.useCallback)((async e=>{try{const r=await c.A.get(p.Sn.SAVED_FILTERS.BY_TABLE(t)),a=r.data.filter((t=>e.includes(t.name)));if(a.length>5){const e=a.sort(((e,t)=>new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime())).slice(0,a.length-5);for(const t of e)await c.A.delete(p.Sn.SAVED_FILTERS.BY_ID(t.id));await oe()}}catch(T){0}}),[t,oe]),ie=(0,a.useCallback)((async()=>{if("consultations-table"===t)try{0;const e=(await c.A.get(p.Sn.CLIENTS.RECENT)).data.map((e=>e.name));0,C(e),await ne(e)}catch(T){0}}),[t,ne]);(0,a.useEffect)((()=>{const e=()=>{ie()};return window.addEventListener("consultationChanged",e),()=>{window.removeEventListener("consultationChanged",e)}}),[ie]),(0,a.useEffect)((()=>{ie()}),[ie]);const{loadFilters:de}=j;(0,a.useEffect)((()=>{de(t)}),[t,de]),(0,a.useEffect)((()=>(window.refreshSavedFilters=oe,()=>{delete window.refreshSavedFilters})),[oe]),(0,a.useEffect)((()=>{const e=e=>{H&&!e.target.closest(".relative")&&B(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[H]),(0,a.useEffect)((()=>{const e=e=>{Array.from(J).every((t=>{const r=Z.current.get(t);if(!r)return!0;const a=e.target.closest('[data-group-id="'.concat(t,'"]'));return!r.contains(e.target)&&!a}))&&J.size>0&&X(new Set)};return J.size>0&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[J]);const ue=e=>{y?y(e.name,e.id,e.conditions,e.operators):r(e.conditions,e.operators)},ce=async(e,r)=>{e.stopPropagation();const a=N.find((e=>e.id===r));if(a&&pe(a.name))_(k("filter.cannotDeleteStandard",{defaultValue:"Standard-Filter k\xf6nnen nicht gel\xf6scht werden"}),"error");else try{if(!localStorage.getItem("token"))return void _(k("filter.notAuthenticated",{defaultValue:"Nicht authentifiziert"}),"error");await c.A.delete(p.Sn.SAVED_FILTERS.BY_ID(r)),await j.refreshFilters(t),(v===r||!y&&r)&&(y?y("",null,[],[]):x()),_(k("filter.deleteSuccess",{defaultValue:"Filter erfolgreich gel\xf6scht"}),"success")}catch(s){0,_(k("filter.deleteError",{defaultValue:"Fehler beim L\xf6schen des Filters"}),"error")}},pe=e=>{if(["Archiv","Aktuell","Aktive","Alle","Heute","Woche","Hoy","Todos","tasks.filters.archive","tasks.filters.current","requests.filters.archiv","requests.filters.aktuell"].includes(e))return!0;if("consultations-table"===t){if("Archiv"===e||"Heute"===e||"Woche"===e)return!0;if(D.includes(e))return!0}return!1},ge=(0,a.useMemo)((()=>{const e=N.filter((e=>null!=e&&!e.groupId));if("consultations-table"===t){0;const t=e.find((e=>null!=e&&"Heute"===e.name)),r=e.find((e=>null!=e&&"Woche"===e.name)),a=e.find((e=>null!=e&&"Archiv"===e.name)),s=D.map((t=>e.find((e=>null!=e&&e.name===t)))).filter((e=>null!=e));0;const l=e.filter((e=>null!=e&&!["Heute","Woche","Archiv"].includes(e.name)&&!D.includes(e.name)));0;const o=[];return t&&o.push(t),r&&o.push(r),o.push(...s),o.push(...l),a&&o.push(a),o}if("requests-table"===t||"worktracker-todos"===t){const t=e.find((e=>null!=e&&"Aktuell"===e.name)),r=e.find((e=>null!=e&&"Archiv"===e.name)),a=e.filter((e=>null!=e&&"Aktuell"!==e.name&&"Archiv"!==e.name)),s=[];return t&&s.push(t),s.push(...a),r&&s.push(r),s}return e}),[N,D,t]),he=0===N.length&&E,me=(0,a.useMemo)((()=>he?Array(3).fill(null).map(((e,r)=>({id:"placeholder-".concat(r),name:0===r?"Heute":1===r?"Woche":"\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588",isPlaceholder:!0,tableId:t,conditions:[],operators:[]}))):[]),[he,t]),fe=he?me:ge.filter((e=>null!=e)),xe=he?me.length:V?ge.length:q,be=(0,a.useMemo)((()=>{if(0===ge.length)return 75;if(O.size>0){const e=Array.from(O.values());return e.reduce(((e,t)=>e+t),0)/e.length}return ge.filter((e=>null!=e)).reduce(((e,t)=>{const r=pe(t.name)?0:18;return e+(4.5*t.name.length+24+r)}),0)/ge.filter((e=>null!=e)).length}),[ge,O]),ve=(0,a.useCallback)((()=>{if(!R.current)return 0;const e=R.current,t=e.parentElement;if(!t)return e.clientWidth;const r=window.getComputedStyle(t),a=parseFloat(r.marginLeft)||0,s=parseFloat(r.marginRight)||0;if(a<0||s<0){const r=t.clientWidth+Math.abs(Math.min(0,a))+Math.abs(Math.min(0,s));if(0===r){const t=Math.abs(a)+Math.abs(s);return e.clientWidth+t}return r}return e.clientWidth}),[]),ye=(0,a.useCallback)((()=>{if(!R.current||0===ge.length)return;if(V)return;const e=ve();if(e<100)return void requestAnimationFrame((()=>{requestAnimationFrame((()=>{R.current&&ye()}))}));if(Math.abs(e-M)<10&&M>0)return;L(e);const t=e-4;let r=0,a=0;if(ge.forEach((e=>{const t=O.get(e.id);t&&(r+=t+6,a++)})),a===ge.length&&r>0){const e=r-6;if(e<=t)return void I(ge.length);const a=t-60-6;if(e<=a)return void I(ge.length);let s=0,l=0;for(const t of ge){const e=O.get(t.id)||be;if(!(s+e+6<=a))break;s+=e+6,l++}return void I(Math.max(1,l))}if(Math.max(1,Math.floor(t/(be+6)))>=ge.length)I(ge.length);else{const e=t-60-6,r=Math.max(1,Math.floor(e/(be+6)));r>=ge.length?I(ge.length):I(Math.max(1,r))}}),[ge,be,M,V,O,ve]);(0,m.w)(R,ye,{debounceMs:100}),(0,a.useEffect)((()=>{if(!R.current)return;const e=R.current.parentElement;if(!e)return;const t=window.getComputedStyle(e),r=parseFloat(t.marginLeft)||0,a=parseFloat(t.marginRight)||0;if(r<0||a<0){const t=new ResizeObserver((()=>{requestAnimationFrame((()=>{ye()}))}));return t.observe(e),()=>{t.disconnect()}}}),[ye]),(0,a.useLayoutEffect)((()=>{if(0===ge.length)return;const e=new Map;let t=!1;const r=V?ge.length:Math.min(q+5,ge.length);ge.slice(0,r).forEach((r=>{const a=F.current.get(r.id);if(a){const s=a.offsetWidth;s>0&&(e.set(r.id,s),t=!0)}}));let a=null,s=null;if(t){const t=V;a=setTimeout((()=>{W(e),t&&(z(!1),s=setTimeout((()=>{R.current&&ye()}),0))}),0)}return()=>{a&&clearTimeout(a),s&&clearTimeout(s)}}),[ge,q,V,ye]),(0,a.useLayoutEffect)((()=>{if(!V&&R.current){const e=setTimeout((()=>{requestAnimationFrame((()=>{requestAnimationFrame((()=>{R.current&&ye()}))}))}),50);return()=>{clearTimeout(e)}}}),[ye,V]),(0,a.useEffect)((()=>{ge.length>0&&(z(!0),W(new Map))}),[ge.length]);const we=(0,a.useMemo)((()=>[...S].sort(((e,t)=>e.order-t.order))),[S]),ke=(e,t,r)=>{e.preventDefault(),e.dataTransfer.dropEffect="move","filter"===r?U(t):Q(t)},_e=()=>{Y(null),U(null),Q(null)},je=async(e,r,a)=>{if(e.preventDefault(),P)if("filter"!==a||P!==r)try{if("group"===a)await c.A.post(p.Sn.SAVED_FILTERS.GROUPS.ADD_FILTER(P,r)),_(k("filter.addToGroupSuccess",{defaultValue:"Filter zur Gruppe hinzugef\xfcgt"}),"success");else{const e=N.find((e=>e.id===r));if(!e)return void _e();if(e.groupId)await c.A.post(p.Sn.SAVED_FILTERS.GROUPS.ADD_FILTER(P,e.groupId)),_(k("filter.addToGroupSuccess",{defaultValue:"Filter zur Gruppe hinzugef\xfcgt"}),"success");else{const r="Gruppe ".concat(S.length+1),a=(await c.A.post(p.Sn.SAVED_FILTERS.GROUPS.CREATE,{tableId:t,name:r})).data;await Promise.all([c.A.post(p.Sn.SAVED_FILTERS.GROUPS.ADD_FILTER(P,a.id)),c.A.post(p.Sn.SAVED_FILTERS.GROUPS.ADD_FILTER(e.id,a.id))]),_(k("filter.createGroupSuccess",{defaultValue:"Gruppe erstellt"}),"success")}}await oe()}catch(s){0,_(k("filter.groupError",{defaultValue:"Fehler beim Gruppieren der Filter"}),"error")}finally{_e()}else _e()},Ae=e=>{X((t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r}))},Ne=()=>{ae(null),le("")},Se=async e=>{if(se.trim())try{await c.A.put(p.Sn.SAVED_FILTERS.GROUPS.UPDATE(e),{name:se.trim()}),_(k("filter.renameGroupSuccess",{defaultValue:"Gruppe umbenannt"}),"success"),await oe(),ae(null),le("")}catch(a){var t,r;0;const e=(null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Fehler beim Umbenennen der Gruppe";_(e,"error")}else _(k("filter.groupNameRequired",{defaultValue:"Gruppenname darf nicht leer sein"}),"error")},Ee=()=>y?v:null;return E?(0,f.jsx)("div",{className:"flex justify-center items-center py-2",children:k("common.loadingFilters")}):T?(0,f.jsx)("div",{className:"text-red-500 py-2",children:T}):0===N.length&&0===S.length?null:(0,f.jsx)("div",{ref:R,className:"filter-tags-container flex items-center gap-1.5 sm:gap-2 mb-3 mt-1 overflow-x-auto",children:(0,f.jsxs)("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-1 min-w-0 flex-nowrap",children:[we.map((e=>{const t=e.filters.find((e=>Ee()===e.id)),r="Roles"===(a=e.name)||"Rollen"===a?k("filter.row.groups.roles","Rollen"):"Users"===a||"Benutzer"===a||"Usuarios"===a?k("filter.row.groups.users","Benutzer"):a;var a;const l=t?A(t.name):"".concat(r," (").concat(e.filters.length,")");return(0,f.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,f.jsxs)("div",{className:"relative group",children:[(0,f.jsxs)("button",{ref:t=>{return r=e.id,void((a=t)?$.current.set(r,a):$.current.delete(r));var r,a},"data-group-id":e.id,onClick:()=>Ae(e.id),onDragOver:t=>ke(t,e.id,"group"),onDrop:t=>je(t,e.id,"group"),className:"flex items-center px-2 sm:px-3 py-0.5 sm:py-1 rounded-full text-xs sm:text-sm font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300 border border-purple-300 dark:border-purple-700 hover:bg-purple-200 dark:hover:bg-purple-800 transition-colors ".concat(K===e.id?"ring-2 ring-purple-500":""," ").concat(t?"ring-2 ring-purple-500":""),children:[(0,f.jsx)("span",{className:"truncate max-w-[4rem] sm:max-w-[100px]",children:l}),(0,f.jsx)(o.A,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-0.5 sm:ml-1 transition-transform ".concat(J.has(e.id)?"rotate-180":"")})]}),(0,f.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:t?l:"".concat(r," (").concat(e.filters.length,")")})]}),J.has(e.id)&&ee.has(e.id)&&(0,s.createPortal)((0,f.jsxs)("div",{ref:t=>{return r=e.id,void((a=t)?Z.current.set(r,a):Z.current.delete(r));var r,a},style:{position:"fixed",top:"".concat(ee.get(e.id).top,"px"),left:"".concat(ee.get(e.id).left,"px"),zIndex:100},className:"bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 py-1 min-w-[200px]",children:[e.filters.map((t=>(0,f.jsx)("div",{onClick:()=>{ue(t),Ae(e.id)},className:"flex items-center justify-between px-3 py-2 text-sm cursor-pointer transition-colors ".concat(Ee()===t.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"," ").concat(pe(t.name)?"font-bold":""),children:(0,f.jsx)("span",{className:"truncate flex-1",children:A(t.name)})},t.id))),(0,f.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-700 mt-1 pt-1",children:re===e.id?(0,f.jsxs)("div",{className:"px-3 py-2",children:[(0,f.jsx)("input",{type:"text",value:se,onChange:e=>le(e.target.value),onKeyDown:t=>{"Enter"===t.key?Se(e.id):"Escape"===t.key&&Ne()},className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0,onClick:e=>e.stopPropagation()}),(0,f.jsxs)("div",{className:"flex gap-2 mt-2 justify-end",children:[(0,f.jsxs)("div",{className:"relative group",children:[(0,f.jsx)("button",{onClick:t=>{t.stopPropagation(),Se(e.id)},className:"p-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:(0,f.jsx)(n.A,{className:"h-4 w-4"})}),(0,f.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:"Speichern"})]}),(0,f.jsxs)("div",{className:"relative group",children:[(0,f.jsx)("button",{onClick:e=>{e.stopPropagation(),Ne()},className:"p-2 rounded-md bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-400 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors",children:(0,f.jsx)(i.A,{className:"h-4 w-4"})}),(0,f.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:"Abbrechen"})]})]})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"relative group",children:[(0,f.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{ae(e.id),le(e.name)})(e)},className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 w-full text-left transition-colors",children:(0,f.jsx)(d.A,{className:"h-4 w-4"})}),(0,f.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:"Gruppe umbenennen"})]}),(0,f.jsxs)("div",{className:"relative group",children:[(0,f.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{await c.A.delete(p.Sn.SAVED_FILTERS.GROUPS.DELETE(e)),_(k("filter.ungroupSuccess",{defaultValue:"Gruppe aufgel\xf6st"}),"success"),await oe(),X((t=>{const r=new Set(t);return r.delete(e),r}))}catch(t){_(k("filter.ungroupError",{defaultValue:"Fehler beim Aufl\xf6sen der Gruppe"}),"error")}})(e.id)},className:"flex items-center gap-2 px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 w-full text-left transition-colors",children:(0,f.jsx)(u.A,{className:"h-4 w-4"})}),(0,f.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:k("filter.ungroup")})]})]})})]}),document.body)]},e.id)})),fe.slice(0,xe).map((e=>(0,f.jsxs)("div",{ref:t=>{t&&!e.isPlaceholder?F.current.set(e.id,t):t||F.current.delete(e.id)},draggable:!0,onDragStart:t=>((e,t)=>{e.dataTransfer.effectAllowed="move",Y(t)})(t,e.id),onDragOver:t=>ke(t,e.id,"filter"),onDrop:t=>je(t,e.id,"filter"),onDragEnd:_e,onClick:()=>!e.isPlaceholder&&ue(e),className:"relative group flex items-center px-2 sm:px-3 py-0.5 sm:py-1 rounded-full text-xs sm:text-sm font-medium cursor-pointer transition-colors flex-shrink-0 ".concat(e.isPlaceholder?"bg-gray-200 dark:bg-gray-600 text-gray-400 dark:text-gray-500 animate-pulse cursor-default":P===e.id?"opacity-50":G===e.id?"ring-2 ring-blue-500":Ee()===e.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 border border-blue-300 dark:border-blue-700":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-600"," ").concat(!e.isPlaceholder&&pe(e.name)?"font-bold":""),children:[(0,f.jsx)("span",{className:"truncate max-w-[4rem] sm:max-w-[100px]",children:e.isPlaceholder&&"\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588"===e.name?(0,f.jsx)("span",{className:"inline-block w-16 h-4 bg-gray-300 dark:bg-gray-500 rounded animate-pulse"}):A(e.name)}),!e.isPlaceholder&&!pe(e.name)&&(0,f.jsx)("button",{onClick:t=>ce(t,e.id),className:"ml-1 sm:ml-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 focus:outline-none",children:(0,f.jsx)(i.A,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),(0,f.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:e.isPlaceholder?k("common.loading"):A(e.name)})]},e.id))),!he&&ge.length>q&&(0,f.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,f.jsxs)("div",{className:"relative group",children:[(0,f.jsxs)("button",{onClick:()=>B(!H),className:"inline-flex items-center px-2 sm:px-3 py-0.5 sm:py-1 rounded-full text-xs sm:text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors border border-gray-300 dark:border-gray-600",children:[(0,f.jsxs)("span",{children:["+",ge.length-q]}),(0,f.jsx)(o.A,{className:"h-3 w-3 sm:h-4 sm:w-4 ml-0.5 sm:ml-1 transition-transform ".concat(H?"rotate-180":"")})]}),(0,f.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:"Weitere Filter anzeigen"})]}),H&&(0,f.jsx)("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50 min-w-[200px] max-w-[300px]",children:ge.slice(q).map((e=>(0,f.jsxs)("div",{onClick:()=>{ue(e),B(!1)},className:"flex items-center justify-between px-3 py-2 text-sm cursor-pointer transition-colors ".concat(Ee()===e.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"," ").concat(pe(e.name)?"font-bold":""),children:[(0,f.jsx)("span",{className:"truncate flex-1",children:A(e.name)}),!pe(e.name)&&(0,f.jsx)("button",{onClick:t=>{t.stopPropagation(),ce(t,e.id),B(!1)},className:"ml-2 flex-shrink-0 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 focus:outline-none",children:(0,f.jsx)(i.A,{className:"h-4 w-4"})})]},e.id)))})]})]})})}}}]);
//# sourceMappingURL=692.3ee51e37.chunk.js.map