"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[151],{1663:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"}))}const l=r.forwardRef(s)},1909:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5"}))}const l=r.forwardRef(s)},2302:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const l=r.forwardRef(s)},2311:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const l=r.forwardRef(s)},2517:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const l=r.forwardRef(s)},2704:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const l=r.forwardRef(s)},3315:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const l=r.forwardRef(s)},4129:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const l=r.forwardRef(s)},4832:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const l=r.forwardRef(s)},4850:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}const l=r.forwardRef(s)},5835:(e,t,a)=>{a.r(t),a.d(t,{default:()=>re});var r=a(5043),s=a(5590),l=a(1923),n=a(1801),i=a(9837),d=a(6981);function o(e,t,a){return(0,d.f)(e,-t,a)}var c=a(4399),m=a(887),x=a(4117),u=a(1909),g=a(4850),h=a(1663),b=a(8010),p=a(2302),y=a(2811),f=a(4129),k=a(7012),v=a(6238),j=a(6018),w=a(6443),N=a(7591),T=a(579);const A=e=>{let{isOpen:t,onClose:a,onConfirm:s,userName:l}=e;const n=new Date,d=(0,i.GP)(n,"yyyy-MM-dd"),o=(0,i.GP)(n,"HH:mm:ss"),[c,m]=(0,r.useState)(d),[x,u]=(0,r.useState)(o),[g,h]=(0,r.useState)(!1);return(0,T.jsx)(j.e,{appear:!0,show:t,as:r.Fragment,children:(0,T.jsxs)(w.lG,{as:"div",className:"relative z-10",onClose:a,children:[(0,T.jsx)(j.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,T.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,T.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,T.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,T.jsx)(j.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,T.jsxs)(w.lG.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[(0,T.jsxs)("div",{className:"flex justify-between items-start",children:[(0,T.jsx)(w.lG.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",children:"Zeiterfassung stoppen"}),(0,T.jsxs)("button",{type:"button",className:"bg-white dark:bg-gray-800 rounded-md text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:a,children:[(0,T.jsx)("span",{className:"sr-only",children:"Schlie\xdfen"}),(0,T.jsx)(N.A,{className:"h-6 w-6","aria-hidden":"true"})]})]}),(0,T.jsx)("div",{className:"mt-2",children:(0,T.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Sie sind dabei, die Zeiterfassung von ",(0,T.jsx)("strong",{className:"dark:text-gray-300",children:l})," zu stoppen. Bitte geben Sie die Endzeit an."]})}),(0,T.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,T.jsxs)("div",{children:[(0,T.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Datum"}),(0,T.jsx)("input",{type:"date",id:"date",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white",value:c,onChange:e=>m(e.target.value)})]}),(0,T.jsxs)("div",{children:[(0,T.jsx)("label",{htmlFor:"time",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Zeit"}),(0,T.jsx)("input",{type:"time",id:"time",step:"1",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white",value:x,onChange:e=>u(e.target.value)})]})]}),(0,T.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,T.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 shadow-sm hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",onClick:a,disabled:g,children:"Abbrechen"}),(0,T.jsx)("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",onClick:async()=>{try{h(!0);const e=`${c}T${x}`;await s(e)}catch(e){console.error("Fehler beim Stoppen der Zeiterfassung:",e)}finally{h(!1)}},disabled:g,children:g?"Wird gestoppt...":"Zeiterfassung stoppen"})]})]})})})})]})})};var S=a(9248),C=a(1816),E=a(9422);const D=e=>{let{isOpen:t,onClose:a,onSave:s,userName:l,entries:n,selectedDate:i}=e;const[d,o]=(0,r.useState)([]),[c,m]=(0,r.useState)(!1),[x,u]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(n&&n.length>0){const e=n.map((e=>{const t=e.startTime.split("T")[0],a=e.startTime.split("T")[1].substring(0,8),r=e.endTime?e.endTime.split("T")[1].substring(0,8):null;return{...e,date:t,startTimeTime:a,endTimeTime:r,isDeleted:!1,isModified:!1}}));o(e)}else o([])}),[n]);const g=e=>{const t=e.filter((e=>!e.isDeleted));for(let a=0;a<t.length;a++){const e=t[a],r=e.startTimeTime,s=e.endTimeTime;if(s&&r>=s)return u(`Eintrag ${a+1}: Die Endzeit muss nach der Startzeit liegen.`),!1;for(let l=a+1;l<t.length;l++){const e=t[l],n=e.startTimeTime,i=e.endTimeTime;if(s&&i&&r<i&&s>n||s&&!i&&s>n||i&&!s&&i>r)return u(`Es gibt eine \xdcberlappung zwischen Eintrag ${a+1} und Eintrag ${l+1}.`),!1}}return u(null),!0};return(0,T.jsx)(j.e,{appear:!0,show:t,as:r.Fragment,children:(0,T.jsxs)(w.lG,{as:"div",className:"relative z-10",onClose:a,children:[(0,T.jsx)(j.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,T.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,T.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,T.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,T.jsx)(j.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,T.jsxs)(w.lG.Panel,{className:"w-full max-w-xl transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[(0,T.jsxs)("div",{className:"flex justify-between items-start",children:[(0,T.jsx)(w.lG.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white",children:"Zeiterfassungen bearbeiten"}),(0,T.jsxs)("button",{type:"button",className:"bg-white dark:bg-gray-800 rounded-md text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:a,children:[(0,T.jsx)("span",{className:"sr-only",children:"Schlie\xdfen"}),(0,T.jsx)(N.A,{className:"h-6 w-6","aria-hidden":"true"})]})]}),(0,T.jsx)("div",{className:"mt-2",children:(0,T.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Bearbeiten Sie die Zeiterfassungen von ",(0,T.jsx)("strong",{className:"dark:text-gray-300",children:l})," f\xfcr den ",(0,T.jsx)("strong",{className:"dark:text-gray-300",children:i.split("-").reverse().join(".")}),"."]})}),x&&(0,T.jsx)("div",{className:"mt-2 p-2 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded",children:x}),(0,T.jsx)("div",{className:"mt-4",children:(0,T.jsx)("div",{className:"overflow-hidden border dark:border-gray-700 rounded-lg",children:(0,T.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,T.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Nr."}),(0,T.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Startzeit"}),(0,T.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Endzeit"}),(0,T.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Aktion"})]})}),(0,T.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:0===d.length?(0,T.jsx)("tr",{children:(0,T.jsx)("td",{colSpan:4,className:"px-4 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"Keine Zeiterfassungen f\xfcr diesen Tag vorhanden."})}):d.map(((e,t)=>(0,T.jsxs)("tr",{className:e.isDeleted?"bg-red-50 dark:bg-red-900":"",children:[(0,T.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t+1}),(0,T.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(0,T.jsx)("input",{type:"time",step:"1",className:`rounded-md border ${e.isDeleted?"border-red-300 bg-red-50 dark:border-red-700 dark:bg-red-900":"border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white"} shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm`,value:e.startTimeTime.substring(0,5),onChange:e=>((e,t)=>{const a=[...d];a[e].startTimeTime!==t&&(a[e].startTimeTime=t,a[e].isModified=!0,o(a),g(a))})(t,e.target.value+":00"),disabled:e.isDeleted})}),(0,T.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:(0,T.jsx)("input",{type:"time",step:"1",className:`rounded-md border ${e.isDeleted?"border-red-300 bg-red-50 dark:border-red-700 dark:bg-red-900":"border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white"} shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm`,value:e.endTimeTime?e.endTimeTime.substring(0,5):"",onChange:e=>{const a=e.target.value?e.target.value+":00":null;((e,t)=>{const a=[...d];a[e].endTimeTime!==t&&(a[e].endTimeTime=t,a[e].isModified=!0,o(a),g(a))})(t,a)},disabled:e.isDeleted})}),(0,T.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-right text-sm font-medium",children:(0,T.jsx)("button",{type:"button",onClick:()=>(e=>{const t=[...d];t[e].isDeleted=!t[e].isDeleted,t[e].isModified=!0,o(t)})(t),className:"p-1 rounded "+(e.isDeleted?"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300":"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300"),title:e.isDeleted?"Wiederherstellen":"Zum L\xf6schen markieren",children:(0,T.jsx)(S.A,{className:"h-5 w-5"})})})]},e.id)))})]})})}),(0,T.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,T.jsx)("button",{type:"button",className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",onClick:a,disabled:c,title:"Abbrechen",children:(0,T.jsx)(N.A,{className:"h-5 w-5"})}),(0,T.jsx)("button",{type:"button",className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",onClick:async()=>{if(g(d))try{m(!0);const e=d.filter((e=>e.isModified||e.isDeleted)).map((e=>{const t=`${e.date}T${e.startTimeTime}`,a=e.endTimeTime?`${e.date}T${e.endTimeTime}`:null;return{...e,startTime:t,endTime:a}}));e.length>0&&await s(e),a()}catch(x){console.error("Fehler beim Speichern der Zeiterfassungen:",x),u("Beim Speichern der Zeiterfassungen ist ein Fehler aufgetreten.")}finally{m(!1)}},disabled:c||Boolean(x),title:c?"Wird gespeichert...":"Speichern",children:c?(0,T.jsx)(C.A,{className:"h-5 w-5 animate-spin"}):(0,T.jsx)(E.A,{className:"h-5 w-5"})})]})]})})})})]})})};var L=a(4426),M=a(7829),W=a(2023),I=a(2760),$=a(1713);var F=a(8897),O=a(957),H=a(637);const R=["name","startTime","duration","pauseTime","branch","actions"],q={name:"asc",startTime:"asc",duration:"asc",pauseTime:"asc",branch:"asc"},B={name:["name"],startTime:["startTime"],duration:["duration"],pauseTime:["pauseTime"],branch:["branch"],actions:[]},z={name:"name",startTime:"startTime",duration:"duration",pauseTime:"pauseTime",branch:"branch"},Z="workcenter-table",_=e=>{let{activeUsers:t,allWorktimes:a,loading:s,selectedDate:j,onDateChange:w,onStopWorktime:N,onRefresh:S,showTodos:C=!1,showRequests:E=!1}=e;const{t:_}=(0,x.Bd)(),V=(0,r.useMemo)((()=>[{id:"name",label:_("teamWorktime.columns.name")},{id:"startTime",label:_("teamWorktime.columns.startTime")},{id:"duration",label:_("teamWorktime.columns.duration")},{id:"pauseTime",label:_("teamWorktime.columns.pauseTime")},{id:"branch",label:_("teamWorktime.columns.branch")},{id:"actions",label:_("teamWorktime.columns.actions")}]),[_]),[G,P]=(0,r.useState)(!1),[K,U]=(0,r.useState)(!1),[Y,Q]=(0,r.useState)(null),[J,X]=(0,r.useState)(""),[ee,te]=(0,r.useState)({key:"startTime",direction:"asc"}),[ae,re]=(0,r.useState)(!1),[se,le]=(0,r.useState)(null),[ne,ie]=(0,r.useState)(!1),[de,oe]=(0,r.useState)(10),[ce,me]=(0,r.useState)([]),[xe,ue]=(0,r.useState)([]),[ge,he]=(0,r.useState)(_("teamWorktime.filters.active")),[be,pe]=(0,r.useState)(null),[ye,fe]=(0,r.useState)({}),[ke,ve]=(0,r.useState)({}),[je,we]=(0,r.useState)(new Set),[Ne,Te]=(0,r.useState)(!1),[Ae,Se]=(0,r.useState)(!1),{hasPermission:Ce}=(0,I.S)();(0,r.useEffect)((()=>{(async()=>{if(C&&j)try{Te(!0);const e=await l.A.get(n.Sn.TEAM_WORKTIME.ANALYTICS.TODOS_BY_USER,{params:{date:j}}),t={};e.data.forEach((e=>{t[e.userId]=e.todos})),fe(t)}catch(e){console.error("Fehler beim Laden der To-Dos:",e)}finally{Te(!1)}})()}),[C,j]),(0,r.useEffect)((()=>{(async()=>{if(E&&j)try{Se(!0);const e=await l.A.get(n.Sn.TEAM_WORKTIME.ANALYTICS.REQUESTS_BY_USER,{params:{date:j}}),t={};e.data.forEach((e=>{t[e.userId]=e.requests})),ve(t)}catch(e){console.error("Fehler beim Laden der Requests:",e)}finally{Se(!1)}})()}),[E,j]);const Ee=e=>{we((t=>{const a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a}))},{settings:De,updateColumnOrder:Le,updateHiddenColumns:Me,isColumnVisible:We,updateViewMode:Ie}=(0,W.F)("team_worktime_active",{defaultColumnOrder:R,defaultHiddenColumns:[],defaultViewMode:"cards"}),$e=De.columnOrder,Fe=De.hiddenColumns,Oe=De.viewMode||"cards",[He,Re]=(0,r.useState)((()=>q)),qe=(0,r.useMemo)((()=>(e=>{const t=[];return e.forEach((e=>{const a=B[e];a&&a.length>0&&t.push(...a)})),t})(De.columnOrder||R)),[De.columnOrder]),Be=(0,r.useMemo)((()=>(e=>{const t=new Set;return e.forEach((e=>{(B[e]||[]).forEach((e=>t.add(e)))})),t})(De.hiddenColumns||[])),[De.hiddenColumns]),ze=(0,r.useMemo)((()=>new Set(qe.filter((e=>!Be.has(e))))),[qe,Be]);(0,r.useEffect)((()=>{document.querySelectorAll(".dashboard-workcenter-wrapper").forEach((e=>{"cards"===Oe?e.classList.add("cards-mode"):e.classList.remove("cards-mode")}))}),[Oe]);const Ze=e=>{Q(e),P(!0)},_e=()=>{P(!1),Q(null)},Ve=e=>{Q(e),U(!0)},Ge=()=>{U(!1),Q(null)},Pe=e=>{le(e)},Ke=(0,r.useCallback)((e=>{e.preventDefault()}),[]),Ue=(0,r.useCallback)(((e,t)=>{if(e.preventDefault(),!se||se===t)return;const a=[...$e],r=a.indexOf(se),s=a.indexOf(t);a.splice(r,1),a.splice(s,0,se),Le(a)}),[se,$e,Le]),Ye=()=>{le(null)},Qe=()=>ce.length,Je=(0,r.useMemo)((()=>{const e=[...a];t.filter((e=>e.startTime.split("T")[0]===j)).forEach((t=>{e.find((e=>e.id===t.id))||e.push(t)}));const r=e.reduce(((e,t)=>{const a=t.user.id;e[a]||(e[a]={user:t.user,branch:t.branch,entries:[],startTime:(0,$.IF)(t.startTime),endTime:t.endTime?(0,$.IF)(t.endTime):null,totalDuration:0,activeEntries:[],hasActiveWorktime:!1});const r=e[a];r.entries.push(t);const s=(0,$.IF)(t.startTime);if(s<r.startTime&&(r.startTime=s),t.endTime){const e=(0,$.IF)(t.endTime);(!r.endTime||e>r.endTime)&&(r.endTime=e)}else r.hasActiveWorktime=!0,r.activeEntries.push(t);if(t.endTime){const e=(0,$.IF)(t.endTime).getTime()-(0,$.IF)(t.startTime).getTime();r.totalDuration+=e}return e}),{});let s=Object.values(r).filter((e=>{const t=`${e.user.firstName} ${e.user.lastName}`.toLowerCase(),a=e.user.username.toLowerCase(),r=e.branch.name.toLowerCase(),s=J.toLowerCase();if(J&&!(t.includes(s)||a.includes(s)||r.includes(s)))return!1;if(ce.length>0){let a=ce.length>0;for(let s=0;s<ce.length;s++){const l=ce[s];let n=!1;switch(l.column){case"name":"equals"===l.operator?n=t===(l.value||"").toLowerCase():"contains"===l.operator?n=t.includes((l.value||"").toLowerCase()):"startsWith"===l.operator&&(n=t.startsWith((l.value||"").toLowerCase()));break;case"branch":"equals"===l.operator?n=r===(l.value||"").toLowerCase():"contains"===l.operator?n=r.includes((l.value||"").toLowerCase()):"startsWith"===l.operator&&(n=r.startsWith((l.value||"").toLowerCase()));break;case"hasActiveWorktime":if("equals"===l.operator){const t="true"===l.value;n=e.hasActiveWorktime===t}break;case"duration":if("greaterThan"===l.operator){const t=60*parseInt(l.value||"0")*60*1e3;n=e.totalDuration>t}else if("lessThan"===l.operator){const t=60*parseInt(l.value||"0")*60*1e3;n=e.totalDuration<t}else if("equals"===l.operator){const t=60*parseInt(l.value||"0")*60*1e3,a=18e5;n=Math.abs(e.totalDuration-t)<=a}}if(0===s)a=n;else{a="AND"===xe[s-1]?a&&n:a||n}}if(!a)return!1}return!0}));if("cards"===Oe){const e=qe.filter((e=>ze.has(e)));s.sort(((t,a)=>{for(const r of e){const e=He[r]||"asc";let s,l;switch(r){case"name":s=`${t.user.firstName} ${t.user.lastName}`.toLowerCase(),l=`${a.user.firstName} ${a.user.lastName}`.toLowerCase();break;case"startTime":s=t.startTime.getTime(),l=a.startTime.getTime();break;case"duration":s=t.totalDuration,l=a.totalDuration;break;case"pauseTime":s=t.endTime?t.endTime.getTime()-t.startTime.getTime()-t.totalDuration:0,l=a.endTime?a.endTime.getTime()-a.startTime.getTime()-a.totalDuration:0;break;case"branch":s=t.branch.name.toLowerCase(),l=a.branch.name.toLowerCase();break;default:continue}let n=0;if(n="number"===typeof s&&"number"===typeof l?s-l:String(s).localeCompare(String(l)),"desc"===e&&(n=-n),0!==n)return n}return 0}))}else ee.key&&s.sort(((e,t)=>{let a,r;return"name"===ee.key?(a=`${e.user.firstName} ${e.user.lastName}`,r=`${t.user.firstName} ${t.user.lastName}`):"startTime"===ee.key?(a=e.startTime.getTime(),r=t.startTime.getTime()):"duration"===ee.key?(a=e.totalDuration,r=t.totalDuration):"branch"===ee.key?(a=e.branch.name,r=t.branch.name):(a=e[ee.key],r=t[ee.key]),a<r?"asc"===ee.direction?-1:1:a>r?"asc"===ee.direction?1:-1:0}));return s}),[a,t,J,ee,j,ce,xe,Oe,qe,ze,He]),Xe=(e,t)=>{const a=(null===ee||void 0===ee?void 0:ee.key)===e;return(0,T.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer group relative",onClick:()=>{return t=e,void te((e=>({key:t,direction:e.key===t&&"asc"===e.direction?"desc":"asc"})));var t},draggable:!0,onDragStart:()=>Pe(e),onDragOver:Ke,onDrop:t=>Ue(t,e),onDragEnd:Ye,children:(0,T.jsxs)("div",{className:"flex items-center "+(se===e?"opacity-50":""),children:[(0,T.jsx)(u.A,{className:"h-3 w-3 mr-1 text-gray-400 dark:text-gray-500"}),t," ",a&&("asc"===ee.direction?"\u2191":"\u2193")]})},e)};r.useEffect((()=>{(async()=>{try{const e=localStorage.getItem("token");if(!e)return void console.error("Nicht authentifiziert");const t=(await l.A.get(`${n.Sn.SAVED_FILTERS.BY_TABLE(Z)}`,{headers:{Authorization:`Bearer ${e}`}})).data||[],a=t.some((e=>"Aktive"===e.name||e.name===_("teamWorktime.filters.active")||"Active"===e.name||"Activo"===e.name)),r=t.some((e=>"Alle"===e.name||e.name===_("teamWorktime.filters.all")||"All"===e.name||"Todos"===e.name));if(!a){const t={tableId:Z,name:_("teamWorktime.filters.active"),conditions:[{column:"hasActiveWorktime",operator:"equals",value:"true"}],operators:[]};await l.A.post(`${n.Sn.SAVED_FILTERS.BASE}`,t,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),console.log("Aktive-Filter f\xfcr Workcenter erstellt")}if(!r){const t={tableId:Z,name:_("teamWorktime.filters.all"),conditions:[],operators:[]};await l.A.post(`${n.Sn.SAVED_FILTERS.BASE}`,t,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),console.log("Alle-Filter f\xfcr Workcenter erstellt")}}catch(e){console.error("Fehler beim Erstellen der Standard-Filter:",e)}})()}),[_]),r.useEffect((()=>{(async()=>{try{const e=await l.A.get(n.Sn.SAVED_FILTERS.BY_TABLE(Z)),t=e.data.find((e=>e.name===_("teamWorktime.filters.active")||"Aktive"===e.name||"Active"===e.name||"Activo"===e.name));t&&(he(_("teamWorktime.filters.active")),pe(t.id),et(t.conditions,t.operators))}catch(e){console.error("Fehler beim Setzen des initialen Filters:",e)}})()}),[_]);const et=(e,t)=>{me(e),ue(t)},tt=()=>{me([]),ue([]),he(""),pe(null)},at=(0,r.useMemo)((()=>{const e=new Date;e.setHours(0,0,0,0);const[t,a,r]=j.split("-").map(Number),s=new Date(t,a-1,r);return s.setHours(0,0,0,0),s.getTime()<e.getTime()}),[j]);return(0,T.jsxs)("div",{children:[(0,T.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,T.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,T.jsx)("button",{type:"button",onClick:()=>{const[e,t,a]=j.split("-").map(Number),r=o(new Date(e,t-1,a),1);w((0,i.GP)(r,"yyyy-MM-dd"))},className:"p-1 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Vorheriger Tag",children:(0,T.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,T.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,T.jsx)("div",{className:"relative w-[180px]",children:(0,T.jsx)("input",{type:"date",id:"date-select",className:"block w-full pl-3 pr-8 py-2 text-base border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:j,onChange:e=>w(e.target.value)})}),at&&(0,T.jsx)("button",{type:"button",onClick:()=>{const[e,t,a]=j.split("-").map(Number),r=new Date(e,t-1,a),s=(0,d.f)(r,1);w((0,i.GP)(s,"yyyy-MM-dd"))},className:"p-1 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",title:"N\xe4chster Tag",children:(0,T.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,T.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),(0,T.jsxs)("div",{className:"flex items-center",children:[(0,T.jsx)("input",{type:"text",className:"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"Suchen...",value:J,onChange:e=>X(e.target.value)}),(0,T.jsx)("button",{type:"button",className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 ml-1 "+("cards"===Oe?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":""),onClick:()=>Ie("table"===Oe?"cards":"table"),title:"table"===Oe?"Als Cards anzeigen":"Als Tabelle anzeigen",children:"table"===Oe?(0,T.jsx)(g.A,{className:"h-5 w-5"}):(0,T.jsx)(h.A,{className:"h-5 w-5"})}),(0,T.jsxs)("button",{type:"button",className:`p-2 rounded-md ${Qe()>0?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"hover:bg-gray-100 dark:hover:bg-gray-700"} ml-1 relative`,onClick:()=>re(!ae),title:"Filter anzeigen",children:[(0,T.jsx)(b.A,{className:"h-5 w-5"}),Qe()>0&&(0,T.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center z-10",style:{position:"absolute",top:"-0.25rem",right:"-0.25rem"},children:Qe()})]}),(0,T.jsx)("div",{className:"ml-1",children:(0,T.jsx)(F.A,{columns:"cards"===Oe?[{id:"name",label:_("teamWorktime.columns.name")},{id:"startTime",label:_("teamWorktime.columns.startTime")},{id:"duration",label:_("teamWorktime.columns.duration")},{id:"pauseTime",label:_("teamWorktime.columns.pauseTime")},{id:"branch",label:_("teamWorktime.columns.branch")}]:V,visibleColumns:"cards"===Oe?Array.from(ze):$e.filter((e=>!Fe.includes(e))),columnOrder:"cards"===Oe?qe:$e,onToggleColumnVisibility:e=>{if("cards"===Oe){const t=z[e];if(t){const e=Fe.includes(t)?Fe.filter((e=>e!==t)):[...Fe,t];Me(e)}}else{const t=Fe.includes(e)?Fe.filter((t=>t!==e)):[...Fe,e];Me(t)}},onMoveColumn:(e,t)=>{if("cards"===Oe){const a=[...qe],r=a[e];a.splice(e,1),a.splice(t,0,r);const s=[],l=new Set;a.forEach((e=>{const t=z[e];t&&!l.has(t)&&(l.add(t),s.push(t))})),V.forEach((e=>{s.includes(e.id)||"actions"===e.id||s.push(e.id)})),Le(s)}else{const a=[...$e],r=a[e];a.splice(e,1),a.splice(t,0,r),Le(a)}},sortDirections:"cards"===Oe?He:void 0,onSortDirectionChange:"cards"===Oe?(e,t)=>{Re((a=>({...a,[e]:t})))}:void 0,showSortDirection:"cards"===Oe,buttonTitle:"cards"===Oe?"Sortieren & anzeigen":"Spalten konfigurieren",modalTitle:"cards"===Oe?"Sortieren & anzeigen":"Spalten konfigurieren",onClose:()=>{}})})]})]}),ae&&(0,T.jsx)(L.A,{columns:[{id:"name",label:_("teamWorktime.columns.name")},{id:"branch",label:_("teamWorktime.columns.branch")},{id:"hasActiveWorktime",label:_("worktime.active")},{id:"duration",label:_("teamWorktime.columns.duration")}],onApply:et,onReset:tt,savedConditions:ce,savedOperators:xe,tableId:Z}),(0,T.jsx)(M.A,{tableId:Z,onSelectFilter:et,onReset:tt,activeFilterName:ge,selectedFilterId:be,onFilterChange:(e,t,a,r)=>{he(e),pe(t),et(a,r)},defaultFilterName:_("teamWorktime.filters.active")}),"table"===Oe?(0,T.jsx)("div",{className:"dashboard-workcenter-wrapper border-0 rounded-lg overflow-hidden",children:(0,T.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,T.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,T.jsx)("tr",{children:$e.filter((e=>!Fe.includes(e))).map((e=>{const t=V.find((t=>t.id===e));return t?"actions"===e?(0,T.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",draggable:!0,onDragStart:()=>Pe(e),onDragOver:Ke,onDrop:t=>Ue(t,e),onDragEnd:Ye,children:t.label},e):Xe(e,t.label):null}))})}),(0,T.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:0===Je.length?(0,T.jsx)("tr",{children:(0,T.jsx)("td",{colSpan:$e.filter((e=>!Fe.includes(e))).length,className:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400",children:"Keine Zeiterfassungen gefunden"})}):Je.slice(0,de).map((e=>{const t=e.endTime?e.endTime.getTime()-e.startTime.getTime()-e.totalDuration:0,a=ye[e.user.id]||null,s=ke[e.user.id]||null,l=je.has(e.user.id),n=C&&a&&a.total>0||E&&s&&s.total>0;return(0,T.jsxs)(r.Fragment,{children:[(0,T.jsx)("tr",{children:$e.filter((e=>!Fe.includes(e))).map((a=>"name"===a?(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,T.jsx)("div",{className:"flex items-center",children:(0,T.jsxs)("div",{children:[(0,T.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[e.user.firstName," ",e.user.lastName]}),(0,T.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.user.username})]})})},a):"startTime"===a?(0,T.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,T.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:(0,i.GP)(e.startTime,"dd.MM.yyyy")}),(0,T.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:(0,i.GP)(e.startTime,"HH:mm:ss")})]},a):"duration"===a?(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,T.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:(0,c.m)(new Date(Date.now()-e.totalDuration),{locale:m.de,addSuffix:!1})})},a):"pauseTime"===a?(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,T.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:t>0?(0,c.m)(new Date(Date.now()-t),{locale:m.de,addSuffix:!1}):"-"})},a):"branch"===a?(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.branch.name},a):"actions"===a?(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,T.jsxs)("div",{className:"flex flex-row space-x-2 justify-end items-center",children:[e.hasActiveWorktime&&(0,T.jsx)("button",{onClick:()=>Ze(e),className:"p-1 bg-red-600 text-white rounded hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600",title:"Zeiterfassung stoppen",children:(0,T.jsx)(p.A,{className:"h-5 w-5 text-white fill-white"})}),Ce("team_worktime_control","both","page")&&Ce("team_worktime","both","table")&&(0,T.jsx)("button",{onClick:()=>Ve(e),className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 edit-button",title:"Zeiterfassungen bearbeiten",children:(0,T.jsx)(y.A,{className:"h-5 w-5"})})]})},a):null))}),(C||E)&&n&&(0,T.jsx)("tr",{className:"bg-gray-50 dark:bg-gray-800/50",children:(0,T.jsx)("td",{colSpan:$e.filter((e=>!Fe.includes(e))).length,className:"px-6 py-3",children:(0,T.jsxs)("div",{className:"ml-4 border-l-2 border-blue-200 dark:border-blue-700 pl-4",children:[C&&a&&a.total>0&&(0,T.jsxs)("div",{className:"mb-3",children:[(0,T.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,T.jsxs)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["To-Dos (",j,"): ",a.completed," erledigt | ",a.open," offen | ",a.inProgress," in Bearbeitung"]}),(0,T.jsx)("button",{onClick:()=>Ee(e.user.id),className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:l?"Weniger anzeigen \u25b2":"Details anzeigen \u25bc"})]}),l&&a.details&&a.details.length>0&&(0,T.jsx)("div",{className:"mt-2 space-y-1",children:a.details.map((e=>(0,T.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[(0,T.jsx)("span",{className:"done"===e.status?"text-green-600 dark:text-green-400":"text-gray-400",children:"done"===e.status?"\u2713":"\u25cb"}),(0,T.jsx)("span",{className:"font-medium",children:e.title}),(0,T.jsxs)("span",{className:"text-gray-400",children:["(",e.status,")"]}),(0,T.jsxs)("span",{className:"text-gray-400",children:["- ",(0,i.GP)(new Date(e.updatedAt),"HH:mm")]})]},e.id)))})]}),E&&s&&s.total>0&&(0,T.jsxs)("div",{children:[(0,T.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,T.jsxs)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Requests (",j,"): ",s.approved," genehmigt | ",s.pending," offen"]}),!C&&(0,T.jsx)("button",{onClick:()=>Ee(e.user.id),className:"text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:l?"Weniger anzeigen \u25b2":"Details anzeigen \u25bc"})]}),l&&s.details&&s.details.length>0&&(0,T.jsx)("div",{className:"mt-2 space-y-1",children:s.details.map((e=>(0,T.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[(0,T.jsx)("span",{className:"approved"===e.status?"text-green-600 dark:text-green-400":"text-gray-400",children:"approved"===e.status?"\u2713":"\u25cb"}),(0,T.jsx)("span",{className:"font-medium",children:e.title}),(0,T.jsxs)("span",{className:"text-gray-400",children:["(",e.status,")"]}),(0,T.jsxs)("span",{className:"text-gray-400",children:["- ",(0,i.GP)(new Date(e.createdAt),"HH:mm")]})]},e.id)))})]})]})})})]},e.user.id)}))})]})}):(0,T.jsx)("div",{className:"dashboard-workcenter-wrapper",children:0===Je.length?(0,T.jsx)("div",{className:"text-center py-8 text-sm text-gray-500 dark:text-gray-400",children:"Keine Zeiterfassungen gefunden"}):(0,T.jsx)(H.A,{gap:"md",children:Je.slice(0,de).map((e=>{const t=e.endTime?e.endTime.getTime()-e.startTime.getTime()-e.totalDuration:0,a=ye[e.user.id]||null,r=ke[e.user.id]||null,s=je.has(e.user.id),l=C&&a&&a.total>0||E&&r&&r.total>0,n=[],d=[],o=[];ze.has("name")&&d.push({label:"Name",value:`${e.user.firstName} ${e.user.lastName} (${e.user.username})`,icon:(0,T.jsx)(f.A,{className:"h-4 w-4"})}),ze.has("startTime")&&d.push({label:"Startzeit",value:`${(0,i.GP)(e.startTime,"dd.MM.yyyy")} ${(0,i.GP)(e.startTime,"HH:mm:ss")}`,icon:(0,T.jsx)(k.A,{className:"h-4 w-4"})}),ze.has("duration")&&o.push({label:"Arbeitszeit",value:(0,c.m)(new Date(Date.now()-e.totalDuration),{locale:m.de,addSuffix:!1}),icon:(0,T.jsx)(k.A,{className:"h-4 w-4"})}),ze.has("pauseTime")&&o.push({label:"Pausen",value:t>0?(0,c.m)(new Date(Date.now()-t),{locale:m.de,addSuffix:!1}):"-",icon:(0,T.jsx)(k.A,{className:"h-4 w-4"})}),ze.has("branch")&&n.push({label:"Niederlassung",value:e.branch.name,icon:(0,T.jsx)(v.A,{className:"h-4 w-4"})});const x=(0,T.jsxs)("div",{className:"flex flex-row space-x-2 justify-end items-center",children:[e.hasActiveWorktime&&(0,T.jsx)("button",{onClick:()=>Ze(e),className:"p-1 bg-red-600 text-white rounded hover:bg-red-700 dark:bg-red-500 dark:hover:bg-red-600",title:"Zeiterfassung stoppen",children:(0,T.jsx)(p.A,{className:"h-5 w-5 text-white fill-white"})}),Ce("team_worktime_control","both","page")&&Ce("team_worktime","both","table")&&(0,T.jsx)("button",{onClick:()=>Ve(e),className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300",title:"Zeiterfassungen bearbeiten",children:(0,T.jsx)(y.A,{className:"h-5 w-5"})})]}),u=l?(0,T.jsxs)("div",{children:[C&&a&&a.total>0&&(0,T.jsxs)("div",{className:"mb-3",children:[(0,T.jsxs)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["To-Dos (",j,"): ",a.completed," erledigt | ",a.open," offen | ",a.inProgress," in Bearbeitung"]}),a.details&&a.details.length>0&&(0,T.jsx)("div",{className:"mt-2 space-y-1",children:a.details.map((e=>(0,T.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[(0,T.jsx)("span",{className:"done"===e.status?"text-green-600 dark:text-green-400":"text-gray-400",children:"done"===e.status?"\u2713":"\u25cb"}),(0,T.jsx)("span",{className:"font-medium",children:e.title}),(0,T.jsxs)("span",{className:"text-gray-400",children:["(",e.status,")"]}),(0,T.jsxs)("span",{className:"text-gray-400",children:["- ",(0,i.GP)(new Date(e.updatedAt),"HH:mm")]})]},e.id)))})]}),E&&r&&r.total>0&&(0,T.jsxs)("div",{children:[(0,T.jsxs)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Requests (",j,"): ",r.approved," genehmigt | ",r.pending," offen"]}),r.details&&r.details.length>0&&(0,T.jsx)("div",{className:"mt-2 space-y-1",children:r.details.map((e=>(0,T.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[(0,T.jsx)("span",{className:"approved"===e.status?"text-green-600 dark:text-green-400":"text-gray-400",children:"approved"===e.status?"\u2713":"\u25cb"}),(0,T.jsx)("span",{className:"font-medium",children:e.title}),(0,T.jsxs)("span",{className:"text-gray-400",children:["(",e.status,")"]}),(0,T.jsxs)("span",{className:"text-gray-400",children:["- ",(0,i.GP)(new Date(e.createdAt),"HH:mm")]})]},e.id)))})]})]}):null;return(0,T.jsxs)(O.A,{title:`${e.user.firstName} ${e.user.lastName}`,metadata:n,actions:x,expandable:u?{isExpanded:s,content:u,onToggle:()=>Ee(e.user.id)}:void 0,children:[d.length>0&&(0,T.jsx)("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 mb-3 sm:mb-4",children:d.map(((e,t)=>(0,T.jsxs)("div",{className:"flex items-center gap-1 sm:gap-1.5 text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400",children:[e.icon&&(0,T.jsx)("span",{className:"flex-shrink-0",children:e.icon}),(0,T.jsxs)("span",{className:"font-medium mr-1 whitespace-nowrap",children:[e.label,":"]}),(0,T.jsx)("span",{className:e.className||"text-gray-900 dark:text-white",children:(e.value,e.value)})]},t)))}),o.length>0&&(0,T.jsx)("div",{className:"flex flex-col gap-2 mb-3 sm:mb-4",children:o.map(((e,t)=>(0,T.jsxs)("div",{className:"flex items-center gap-1 sm:gap-1.5 text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400",children:[e.icon&&(0,T.jsx)("span",{className:"flex-shrink-0",children:e.icon}),(0,T.jsxs)("span",{className:"font-medium mr-1 whitespace-nowrap",children:[e.label,":"]}),(0,T.jsx)("span",{className:e.className||"text-gray-900 dark:text-white",children:(e.value,e.value)})]},t)))})]},e.user.id)}))})}),Je.length>de&&(0,T.jsx)("div",{className:"mt-4 flex justify-center",children:(0,T.jsxs)("button",{className:"px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-700 border border-blue-300 dark:border-blue-600 rounded-md hover:bg-blue-50 dark:hover:bg-gray-600",onClick:()=>oe((e=>e+10)),children:["Mehr anzeigen (",Je.length-de," verbleibend)"]})}),G&&Y&&(0,T.jsx)(A,{isOpen:G,onClose:_e,onConfirm:async e=>{if(!Y)return;const t=Y.activeEntries.length>0?Y.activeEntries.reduce(((e,t)=>{const a=(0,$.IF)(e.startTime);return(0,$.IF)(t.startTime)>a?t:e}),Y.activeEntries[0]):null;t?await N(t.user.id,e):await N(Y.user.id,e),_e()},userName:`${Y.user.firstName} ${Y.user.lastName}`}),K&&Y&&(0,T.jsx)(D,{isOpen:K,onClose:Ge,onSave:async e=>{try{await(async e=>{try{const t=e.filter((e=>!e.isDeleted)),a=e.filter((e=>e.isDeleted)).map((e=>e.id)),r=t.map((e=>l.A.put(`/worktime/${e.id}`,{startTime:e.startTime,endTime:e.endTime}))),s=a.map((e=>l.A.delete(`/worktime/${e}`)));return await Promise.all([...r,...s]),{success:!0}}catch(t){throw console.error("Fehler beim Aktualisieren der Zeiterfassungen:",t),t}})(e),S(),alert(_("teamWorktime.messages.saveSuccess")),Ge()}catch(t){console.error("Fehler beim Aktualisieren der Zeiterfassungen:",t);let e=_("teamWorktime.messages.unknownError");t.response?401===t.response.status?e=_("teamWorktime.messages.unauthorized"):403===t.response.status?e=_("teamWorktime.messages.forbidden"):404===t.response.status?e=_("teamWorktime.messages.notFound"):500===t.response.status?e=_("teamWorktime.messages.serverError"):t.response.data&&t.response.data.message&&(e=t.response.data.message):e=t.request?_("teamWorktime.messages.noResponse"):t.message||_("teamWorktime.messages.error"),alert(_("teamWorktime.messages.saveError")+" "+e)}},userName:`${Y.user.firstName} ${Y.user.lastName}`,entries:Y.entries,selectedDate:j})]})};var V=a(1369);function G(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const P=r.forwardRef(G);var K=a(2517),U=a(3315);const Y="todo-analytics-table",Q=["time","title","status","responsible","qualityControl","branch"],J=e=>{let{selectedDate:t}=e;const{t:a}=(0,x.Bd)(),[s,d]=(0,r.useState)([]),[o,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)(null),[p,y]=(0,r.useState)(""),[j,w]=(0,r.useState)([]),[N,A]=(0,r.useState)([]),[S,E]=(0,r.useState)(""),[D,I]=(0,r.useState)(null),[$,F]=(0,r.useState)(!1),{settings:R,isLoading:q,updateColumnOrder:B,updateHiddenColumns:z,toggleColumnVisibility:Z,isColumnVisible:_,updateViewMode:G}=(0,W.F)(Y,{defaultColumnOrder:Q,defaultViewMode:"table"}),J=(null===R||void 0===R?void 0:R.columnOrder)||Q,X=(null===R||void 0===R?void 0:R.hiddenColumns)||[],ee=J.filter((e=>!X.includes(e))),te=(null===R||void 0===R?void 0:R.viewMode)||"table",[ae,re]=(0,r.useState)(te);(0,r.useEffect)((()=>{null!==R&&void 0!==R&&R.viewMode&&R.viewMode!==ae&&re(R.viewMode)}),[null===R||void 0===R?void 0:R.viewMode]);const[se,le]=(0,r.useState)(new Set),ne=e=>{le((t=>{const a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a}))},[ie,de]=(0,r.useState)(null),[oe,ce]=(0,r.useState)(!1),[me,xe]=(0,r.useState)(!1),[ue,ge]=(0,r.useState)(null),[he,be]=(0,r.useState)(!1),[pe,ye]=(0,r.useState)(!1),[fe,ke]=(0,r.useState)(new Set),ve=(0,r.useMemo)((()=>[{id:"time",label:"Zeit"},{id:"title",label:"To-Do"},{id:"status",label:"Status"},{id:"responsible",label:"Verantwortlich"},{id:"qualityControl",label:"Qualit\xe4tskontrolle"},{id:"branch",label:"Niederlassung"}]),[]);(0,r.useEffect)((()=>{t&&(async()=>{try{c(!0),u(null);const e={date:t};j.forEach((t=>{"branch"===t.column&&t.value&&(e.branchId=t.value),"responsible"===t.column&&t.value&&(e.userId=t.value),"status"===t.column&&t.value}));const a=await l.A.get(n.Sn.TEAM_WORKTIME.ANALYTICS.TODOS_CHRONOLOGICAL,{params:e});d(a.data||[])}catch(m){console.error("Fehler beim Laden der To-Dos:",m),u("Fehler beim Laden der To-Dos")}finally{c(!1)}})()}),[t,j]),(0,r.useEffect)((()=>{(async()=>{if(t&&me)try{ce(!0);const e=await l.A.get(n.Sn.TEAM_WORKTIME.ANALYTICS.TODOS_FREQUENCY,{params:{date:t}});de(e.data)}catch(m){console.error("Fehler beim Laden der H\xe4ufigkeitsanalyse:",m)}finally{ce(!1)}})()}),[t,me]),(0,r.useEffect)((()=>{(async()=>{if(t&&pe)try{be(!0);const e=await l.A.get(n.Sn.TEAM_WORKTIME.ANALYTICS.TODOS_SHIFTS,{params:{date:t}});ge(e.data)}catch(m){console.error("Fehler beim Laden der Schicht-Analyse:",m)}finally{be(!1)}})()}),[t,pe]);const je=(0,r.useCallback)(((e,t)=>{w(e),A(t),F(!1)}),[]),we=(0,r.useCallback)((()=>{w([]),A([]),E(""),I(null)}),[]),Ne=(0,r.useCallback)(((e,t,a,r)=>{E(e),I(t),je(a,r)}),[je]),Te=(0,r.useCallback)((()=>j.filter((e=>""!==e.column&&null!==e.value)).length),[j]),Ae=e=>{switch(e){case"done":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"in_progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400";case"quality_control":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400";case"open":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"improval":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},Se=e=>({done:"Erledigt",in_progress:"In Bearbeitung",quality_control:"Qualit\xe4tskontrolle",open:"Offen",improval:"Nachbesserung"}[e]||e),Ce=(0,r.useMemo)((()=>{let e=[...s];if(p){const t=p.toLowerCase();e=e.filter((e=>e.title.toLowerCase().includes(t)||e.branch.name.toLowerCase().includes(t)||e.responsible&&`${e.responsible.firstName} ${e.responsible.lastName}`.toLowerCase().includes(t)))}return j.forEach(((t,a)=>{if(""===t.column||null===t.value)return;const r=t.operator||"equals",s=t.value;e=e.filter((e=>{switch(t.column){case"status":return"equals"!==r||e.status===s;case"title":return"contains"!==r||e.title.toLowerCase().includes(String(s).toLowerCase());default:return!0}}))})),e}),[s,p,j]),Ee=(0,r.useMemo)((()=>({total:Ce.length,done:Ce.filter((e=>"done"===e.status)).length,inProgress:Ce.filter((e=>"in_progress"===e.status)).length,open:Ce.filter((e=>"open"===e.status)).length,qualityControl:Ce.filter((e=>"quality_control"===e.status)).length,improval:Ce.filter((e=>"improval"===e.status)).length})),[Ce]);return m?(0,T.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-400 px-4 py-3 rounded",children:m}):(0,T.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 todo-analytics-wrapper",children:[(0,T.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,T.jsxs)("div",{className:"flex items-center",children:[(0,T.jsx)(V.A,{className:"h-6 w-6 mr-2 dark:text-white"}),(0,T.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:"To-Do-Auswertungen"})]}),(0,T.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,T.jsx)("input",{type:"text",placeholder:"Suchen...",className:"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:p,onChange:e=>y(e.target.value)}),(0,T.jsx)("button",{className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 "+("cards"===ae?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":""),onClick:()=>{const e="table"===ae?"cards":"table";re(e),G&&G(e)},title:"table"===ae?"Als Cards anzeigen":"Als Tabelle anzeigen",children:"table"===ae?(0,T.jsx)(g.A,{className:"h-5 w-5"}):(0,T.jsx)(h.A,{className:"h-5 w-5"})}),(0,T.jsxs)("button",{className:`p-2 rounded-md ${Te()>0?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"hover:bg-gray-100 dark:hover:bg-gray-700"} ml-1 relative`,onClick:()=>F(!$),title:"Filter",style:{position:"relative"},children:[(0,T.jsx)(b.A,{className:"h-5 w-5"}),Te()>0&&(0,T.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center z-10",children:Te()})]})]})]}),$&&(0,T.jsx)(L.A,{columns:ve,onApply:je,onReset:we,savedConditions:j,savedOperators:N,tableId:Y}),(0,T.jsx)(M.A,{tableId:Y,onSelectFilter:je,onReset:we,activeFilterName:S,selectedFilterId:D,onFilterChange:Ne,defaultFilterName:"Alle"}),(0,T.jsxs)("div",{className:"mb-4 flex items-center gap-2",children:[(0,T.jsxs)("button",{onClick:()=>xe(!me),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,T.jsx)(C.A,{className:"h-4 w-4 transition-transform "+(me?"rotate-180":"")}),"H\xe4ufigkeitsanalyse ",me?"ausblenden":"anzeigen"]}),(0,T.jsxs)("button",{onClick:()=>ye(!pe),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,T.jsx)(k.A,{className:"h-4 w-4 transition-transform "+(pe?"rotate-180":"")}),"Schicht-Analyse ",pe?"ausblenden":"anzeigen"]})]}),me&&(0,T.jsxs)("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,T.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,T.jsx)(C.A,{className:"h-5 w-5"}),"H\xe4ufigkeitsanalyse"]}),oe?(0,T.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,T.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"Lade Analyse..."})}):ie?(0,T.jsxs)("div",{className:"space-y-6",children:[(0,T.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,T.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[(0,T.jsx)("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Gesamt To-Dos"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:ie.summary.totalTasks})]}),(0,T.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[(0,T.jsx)("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Erledigt"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:ie.summary.completedTasks})]}),(0,T.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800",children:[(0,T.jsx)("div",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Nie erledigt"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-yellow-700 dark:text-yellow-300",children:ie.summary.neverCompletedTasks})]}),(0,T.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800",children:[(0,T.jsx)("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Erledigungsrate"}),(0,T.jsxs)("div",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:[ie.summary.completionRate,"%"]})]})]}),ie.userStats&&ie.userStats.length>0&&(0,T.jsxs)("div",{children:[(0,T.jsx)("h4",{className:"text-base font-medium text-gray-900 dark:text-white mb-3",children:"Erledigungen pro User"}),(0,T.jsx)("div",{className:"overflow-x-auto",children:(0,T.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,T.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User"}),(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Erledigt"}),(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Letzte Erledigung"})]})}),(0,T.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-800",children:ie.userStats.slice(0,10).map((e=>(0,T.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.user?`${e.user.firstName} ${e.user.lastName}`:"Unbekannt"}),(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.completedCount}),(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.lastCompletedAt?(0,i.GP)(new Date(e.lastCompletedAt),"HH:mm"):"-"})]},e.userId)))})]})})]}),ie.taskStats&&ie.taskStats.length>0&&(0,T.jsxs)("div",{children:[(0,T.jsx)("h4",{className:"text-base font-medium text-gray-900 dark:text-white mb-3",children:"To-Dos: H\xe4ufig erledigt / Nie erledigt"}),(0,T.jsx)("div",{className:"overflow-x-auto",children:(0,T.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,T.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"To-Do"}),(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Niederlassung"}),(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Erledigt"})]})}),(0,T.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-800",children:ie.taskStats.slice(0,20).map((e=>(0,T.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800 "+(e.neverCompleted?"bg-red-50 dark:bg-red-900/10":""),children:[(0,T.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white",children:e.title}),(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,T.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Ae(e.currentStatus)}`,children:Se(e.currentStatus)})}),(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.branch.name}),(0,T.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[e.completedCount,"x ",e.neverCompleted&&(0,T.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"(nie)"})]})]},e.taskId)))})]})})]}),ie.statusAverages&&Object.keys(ie.statusAverages).length>0&&(0,T.jsxs)("div",{children:[(0,T.jsx)("h4",{className:"text-base font-medium text-gray-900 dark:text-white mb-3",children:"Durchschnittliche Zeit pro Status"}),(0,T.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Object.entries(ie.statusAverages).map((e=>{let[t,a]=e;return(0,T.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[(0,T.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:Se(t)}),(0,T.jsxs)("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[a.averageHours.toFixed(1),"h"]}),(0,T.jsxs)("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:[a.taskCount," To-Do(s)"]})]},t)}))})]}),ie.summary&&(0,T.jsxs)("div",{children:[(0,T.jsx)("h4",{className:"text-base font-medium text-gray-900 dark:text-white mb-3",children:"Status-Verteilung"}),(0,T.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:(0,T.jsxs)("div",{className:"relative",style:{height:"200px"},children:[(0,T.jsxs)("div",{className:"absolute right-0 h-full flex flex-col justify-between text-xs text-gray-500 dark:text-gray-400 pr-1",children:[(0,T.jsx)("span",{children:ie.summary.totalTasks}),(0,T.jsx)("span",{children:Math.round(.75*ie.summary.totalTasks)}),(0,T.jsx)("span",{children:Math.round(.5*ie.summary.totalTasks)}),(0,T.jsx)("span",{children:Math.round(.25*ie.summary.totalTasks)}),(0,T.jsx)("span",{children:"0"})]}),(0,T.jsxs)("div",{className:"absolute inset-0 flex flex-col justify-between pointer-events-none pr-8",children:[(0,T.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"}),(0,T.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"}),(0,T.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"}),(0,T.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"}),(0,T.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})]}),(0,T.jsxs)("div",{className:"absolute inset-0 flex items-end justify-around gap-2 pr-8 pb-1",children:[(0,T.jsxs)("div",{className:"flex flex-col items-center gap-1 flex-1",children:[(0,T.jsx)("div",{className:"w-full bg-green-500 dark:bg-green-600 rounded-t",style:{height:(ie.summary.completedTasks>0?ie.summary.completedTasks/ie.summary.totalTasks*100:0)+"%",minHeight:ie.summary.completedTasks>0?"4px":"0px"},title:`Erledigt: ${ie.summary.completedTasks}`}),(0,T.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Erledigt"}),(0,T.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:ie.summary.completedTasks})]}),(0,T.jsxs)("div",{className:"flex flex-col items-center gap-1 flex-1",children:[(0,T.jsx)("div",{className:"w-full bg-yellow-500 dark:bg-yellow-600 rounded-t",style:{height:(ie.summary.totalTasks-ie.summary.completedTasks-ie.summary.neverCompletedTasks>0?(ie.summary.totalTasks-ie.summary.completedTasks-ie.summary.neverCompletedTasks)/ie.summary.totalTasks*100:0)+"%",minHeight:ie.summary.totalTasks-ie.summary.completedTasks-ie.summary.neverCompletedTasks>0?"4px":"0px"},title:"Offen: "+(ie.summary.totalTasks-ie.summary.completedTasks-ie.summary.neverCompletedTasks)}),(0,T.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Offen"}),(0,T.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:ie.summary.totalTasks-ie.summary.completedTasks-ie.summary.neverCompletedTasks})]}),(0,T.jsxs)("div",{className:"flex flex-col items-center gap-1 flex-1",children:[(0,T.jsx)("div",{className:"w-full bg-red-500 dark:bg-red-600 rounded-t",style:{height:(ie.summary.neverCompletedTasks>0?ie.summary.neverCompletedTasks/ie.summary.totalTasks*100:0)+"%",minHeight:ie.summary.neverCompletedTasks>0?"4px":"0px"},title:`Nie erledigt: ${ie.summary.neverCompletedTasks}`}),(0,T.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium",children:"Nie erledigt"}),(0,T.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:ie.summary.neverCompletedTasks})]})]})]})})]})]}):(0,T.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"Keine Daten verf\xfcgbar"})]}),pe&&(0,T.jsxs)("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,T.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,T.jsx)(k.A,{className:"h-5 w-5"}),"Schicht-basierte Analyse"]}),he?(0,T.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,T.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"Lade Analyse..."})}):ue?(0,T.jsxs)("div",{className:"space-y-6",children:[(0,T.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,T.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[(0,T.jsx)("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Gesamt Schichten"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:ue.summary.totalShifts})]}),(0,T.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[(0,T.jsx)("div",{className:"text-sm text-green-600 dark:text-green-400",children:"To-Dos in Schichten"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:ue.summary.totalTasksInShifts})]}),(0,T.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800",children:[(0,T.jsx)("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Gesamt Stunden"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:ue.summary.totalDurationHours||"0.00"})]}),(0,T.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800",children:[(0,T.jsx)("div",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"\xd8 Dauer"}),(0,T.jsxs)("div",{className:"text-2xl font-bold text-yellow-700 dark:text-yellow-300",children:[ue.summary.averageDurationHours||"-","h"]})]}),(0,T.jsxs)("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4 border border-indigo-200 dark:border-indigo-800",children:[(0,T.jsx)("div",{className:"text-sm text-indigo-600 dark:text-indigo-400",children:"\xd8 To-Dos/Schicht"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-indigo-700 dark:text-indigo-300",children:ue.summary.totalShifts>0?(ue.summary.totalTasksInShifts/ue.summary.totalShifts).toFixed(1):"0"})]})]}),ue.shifts&&ue.shifts.length>0&&(0,T.jsxs)("div",{children:[(0,T.jsx)("h4",{className:"text-base font-medium text-gray-900 dark:text-white mb-3",children:"Schichten mit To-Dos"}),(0,T.jsx)("div",{className:"overflow-x-auto",children:(0,T.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,T.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"User"}),(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Niederlassung"}),(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Zeit"}),(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Dauer"}),(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"To-Dos"})]})}),(0,T.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-800",children:ue.shifts.map((e=>{const t=fe.has(e.workTimeId);return(0,T.jsxs)(r.Fragment,{children:[(0,T.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,T.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:[e.user.firstName," ",e.user.lastName]}),(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.branch.name}),(0,T.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[(0,i.GP)(new Date(e.startTime),"HH:mm"),e.endTime&&` - ${(0,i.GP)(new Date(e.endTime),"HH:mm")}`]}),(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.durationHours?`${e.durationHours}h`:"L\xe4uft"}),(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:(0,T.jsxs)("div",{className:"flex items-center gap-2",children:[(0,T.jsx)("span",{children:e.linkedTasksCount}),e.linkedTasksCount>0&&(0,T.jsx)("button",{onClick:()=>{return t=e.workTimeId,void ke((e=>{const a=new Set(e);return a.has(t)?a.delete(t):a.add(t),a}));var t},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"To-Dos anzeigen",children:t?(0,T.jsx)(P,{className:"h-4 w-4"}):(0,T.jsx)(K.A,{className:"h-4 w-4"})})]})})]}),t&&e.linkedTasksCount>0&&(0,T.jsx)("tr",{className:"bg-gray-50 dark:bg-gray-800/50",children:(0,T.jsx)("td",{colSpan:5,className:"px-6 py-4",children:(0,T.jsxs)("div",{className:"ml-4 border-l-2 border-blue-200 dark:border-blue-700 pl-4",children:[(0,T.jsx)("h5",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Verkn\xfcpfte To-Dos:"}),(0,T.jsx)("div",{className:"space-y-2",children:e.linkedTasks.map((e=>(0,T.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-600 dark:text-gray-400",children:[(0,T.jsx)("span",{className:`px-2 py-1 rounded-full ${Ae(e.status)}`,children:Se(e.status)}),(0,T.jsx)("span",{className:"font-medium",children:e.title}),e.responsible&&(0,T.jsxs)("span",{className:"text-gray-400",children:["(",e.responsible.firstName," ",e.responsible.lastName,")"]})]},e.id)))})]})})})]},e.workTimeId)}))})]})})]}),ue.tasksWithShifts&&ue.tasksWithShifts.length>0&&(0,T.jsxs)("div",{children:[(0,T.jsx)("h4",{className:"text-base font-medium text-gray-900 dark:text-white mb-3",children:"To-Dos mit Schicht-Verteilung"}),(0,T.jsx)("div",{className:"overflow-x-auto",children:(0,T.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,T.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,T.jsxs)("tr",{children:[(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"To-Do"}),(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Schichten"}),(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Gesamt Zeit"})]})}),(0,T.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-800",children:ue.tasksWithShifts.slice(0,30).map((e=>(0,T.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,T.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white",children:e.task.title}),(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,T.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Ae(e.task.status)}`,children:Se(e.task.status)})}),(0,T.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[e.shiftCount,"x"]}),(0,T.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[e.totalDurationHours,"h"]})]},e.task.id)))})]})})]})]}):(0,T.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"Keine Schicht-Daten verf\xfcgbar"})]}),(0,T.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[(0,T.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[(0,T.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Gesamt"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Ee.total})]}),(0,T.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[(0,T.jsx)("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Erledigt"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:Ee.done})]}),(0,T.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[(0,T.jsx)("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"In Bearbeitung"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-blue-700 dark:text-blue-300",children:Ee.inProgress})]}),(0,T.jsxs)("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800",children:[(0,T.jsx)("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"Qualit\xe4tskontrolle"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:Ee.qualityControl})]}),(0,T.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800",children:[(0,T.jsx)("div",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Offen"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-yellow-700 dark:text-yellow-300",children:Ee.open})]}),(0,T.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800",children:[(0,T.jsx)("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Nachbesserung"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-red-700 dark:text-red-300",children:Ee.improval})]})]}),Ce.length>0&&(0,T.jsxs)("div",{className:"mb-6 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[(0,T.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,T.jsx)(U.A,{className:"h-5 w-5"}),"Status-Verteilung (chronologische To-Dos)"]}),(0,T.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:(0,T.jsxs)("div",{className:"relative",style:{height:"200px"},children:[(0,T.jsxs)("div",{className:"absolute right-0 h-full flex flex-col justify-between text-xs text-gray-500 dark:text-gray-400 pr-1",children:[(0,T.jsx)("span",{children:Ee.total}),(0,T.jsx)("span",{children:Math.round(.75*Ee.total)}),(0,T.jsx)("span",{children:Math.round(.5*Ee.total)}),(0,T.jsx)("span",{children:Math.round(.25*Ee.total)}),(0,T.jsx)("span",{children:"0"})]}),(0,T.jsxs)("div",{className:"absolute inset-0 flex flex-col justify-between pointer-events-none pr-8",children:[(0,T.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"}),(0,T.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"}),(0,T.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"}),(0,T.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"}),(0,T.jsx)("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})]}),(0,T.jsxs)("div",{className:"absolute inset-0 flex items-end justify-around gap-1 sm:gap-2 pr-8 pb-1",children:[(0,T.jsxs)("div",{className:"flex flex-col items-center gap-1 flex-1",children:[(0,T.jsx)("div",{className:"w-full bg-green-500 dark:bg-green-600 rounded-t transition-all hover:opacity-80",style:{height:(Ee.total>0?Ee.done/Ee.total*100:0)+"%",minHeight:Ee.done>0?"4px":"0px"},title:`Erledigt: ${Ee.done}`}),(0,T.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium text-center",children:"Erledigt"}),(0,T.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:Ee.done})]}),(0,T.jsxs)("div",{className:"flex flex-col items-center gap-1 flex-1",children:[(0,T.jsx)("div",{className:"w-full bg-blue-500 dark:bg-blue-600 rounded-t transition-all hover:opacity-80",style:{height:(Ee.total>0?Ee.inProgress/Ee.total*100:0)+"%",minHeight:Ee.inProgress>0?"4px":"0px"},title:`In Bearbeitung: ${Ee.inProgress}`}),(0,T.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium text-center",children:"In Bearbeitung"}),(0,T.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:Ee.inProgress})]}),(0,T.jsxs)("div",{className:"flex flex-col items-center gap-1 flex-1",children:[(0,T.jsx)("div",{className:"w-full bg-purple-500 dark:bg-purple-600 rounded-t transition-all hover:opacity-80",style:{height:(Ee.total>0?Ee.qualityControl/Ee.total*100:0)+"%",minHeight:Ee.qualityControl>0?"4px":"0px"},title:`Qualit\xe4tskontrolle: ${Ee.qualityControl}`}),(0,T.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium text-center",children:"QK"}),(0,T.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:Ee.qualityControl})]}),(0,T.jsxs)("div",{className:"flex flex-col items-center gap-1 flex-1",children:[(0,T.jsx)("div",{className:"w-full bg-yellow-500 dark:bg-yellow-600 rounded-t transition-all hover:opacity-80",style:{height:(Ee.total>0?Ee.open/Ee.total*100:0)+"%",minHeight:Ee.open>0?"4px":"0px"},title:`Offen: ${Ee.open}`}),(0,T.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium text-center",children:"Offen"}),(0,T.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:Ee.open})]}),(0,T.jsxs)("div",{className:"flex flex-col items-center gap-1 flex-1",children:[(0,T.jsx)("div",{className:"w-full bg-red-500 dark:bg-red-600 rounded-t transition-all hover:opacity-80",style:{height:(Ee.total>0?Ee.improval/Ee.total*100:0)+"%",minHeight:Ee.improval>0?"4px":"0px"},title:`Nachbesserung: ${Ee.improval}`}),(0,T.jsx)("span",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium text-center",children:"Nachbesserung"}),(0,T.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-500",children:Ee.improval})]})]})]})})]}),o?(0,T.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,T.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"Lade To-Dos..."})}):"table"===ae?(0,T.jsx)("div",{className:"overflow-x-auto",children:(0,T.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,T.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,T.jsx)("tr",{children:J.filter((e=>ee.includes(e))).map((e=>{const t=ve.find((t=>t.id===e));return t?(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t.label},e):null}))})}),(0,T.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-800",children:0===Ce.length?(0,T.jsx)("tr",{children:(0,T.jsx)("td",{colSpan:J.filter((e=>ee.includes(e))).length,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"Keine To-Dos f\xfcr dieses Datum gefunden"})}):Ce.map((e=>{const t=se.has(e.id),a=e.statusHistory&&e.statusHistory.length>0;return(0,T.jsxs)(r.Fragment,{children:[(0,T.jsx)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:J.filter((e=>ee.includes(e))).map((r=>{switch(r){case"time":return(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:(0,i.GP)(new Date(e.updatedAt),"HH:mm")},r);case"title":return(0,T.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white",children:(0,T.jsxs)("div",{className:"flex items-center gap-2",children:[a&&(0,T.jsx)("button",{onClick:()=>ne(e.id),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:"Status-Historie anzeigen",children:t?(0,T.jsx)(P,{className:"h-4 w-4"}):(0,T.jsx)(K.A,{className:"h-4 w-4"})}),(0,T.jsx)("span",{children:e.title})]})},r);case"status":return(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,T.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Ae(e.status)}`,children:Se(e.status)})},r);case"responsible":return(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.responsible?`${e.responsible.firstName} ${e.responsible.lastName}`:"-"},r);case"qualityControl":return(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.qualityControl?`${e.qualityControl.firstName} ${e.qualityControl.lastName}`:"-"},r);case"branch":return(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.branch.name},r);default:return null}}))}),t&&a&&(0,T.jsx)("tr",{className:"bg-gray-50 dark:bg-gray-800/50",children:(0,T.jsx)("td",{colSpan:J.filter((e=>ee.includes(e))).length,className:"px-6 py-4",children:(0,T.jsxs)("div",{className:"ml-4 border-l-2 border-blue-200 dark:border-blue-700 pl-4",children:[(0,T.jsxs)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[(0,T.jsx)(C.A,{className:"h-4 w-4"}),"Status-Wechsel"]}),(0,T.jsx)("div",{className:"space-y-2",children:e.statusHistory.map(((e,t)=>(0,T.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-600 dark:text-gray-400",children:[(0,T.jsx)("span",{className:"font-medium",children:(0,i.GP)(new Date(e.changedAt),"HH:mm:ss")}),(0,T.jsx)("span",{className:"text-gray-400",children:"\u2192"}),(0,T.jsx)("span",{className:`px-2 py-1 rounded-full ${Ae(e.oldStatus||"open")}`,children:Se(e.oldStatus||"open")}),(0,T.jsx)("span",{className:"text-gray-400",children:"\u2192"}),(0,T.jsx)("span",{className:`px-2 py-1 rounded-full ${Ae(e.newStatus)}`,children:Se(e.newStatus)}),(0,T.jsx)("span",{className:"text-gray-400",children:"von"}),(0,T.jsxs)("span",{className:"font-medium",children:[e.user.firstName," ",e.user.lastName]})]},e.id)))})]})})})]},e.id)}))})]})}):(0,T.jsx)("div",{className:"-mx-6",children:0===Ce.length?(0,T.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[(0,T.jsx)(V.A,{className:"h-10 w-10 mb-4 text-gray-400 dark:text-gray-500"}),(0,T.jsx)("div",{className:"text-sm",children:"Keine To-Dos gefunden"})]}):(0,T.jsx)(H.A,{children:Ce.map((e=>{const t=[];ee.includes("branch")&&t.push({icon:(0,T.jsx)(v.A,{className:"h-4 w-4"}),label:"Niederlassung",value:e.branch.name,section:"left"}),ee.includes("responsible")&&t.push({icon:(0,T.jsx)(f.A,{className:"h-4 w-4"}),label:"Verantwortlich",value:e.responsible?`${e.responsible.firstName} ${e.responsible.lastName}`:"-",section:"main"}),ee.includes("qualityControl")&&t.push({icon:(0,T.jsx)(f.A,{className:"h-4 w-4"}),label:"Qualit\xe4tskontrolle",value:e.qualityControl?`${e.qualityControl.firstName} ${e.qualityControl.lastName}`:"-",section:"main"}),ee.includes("time")&&t.push({icon:(0,T.jsx)(k.A,{className:"h-4 w-4"}),label:"Zeit",value:(0,i.GP)(new Date(e.updatedAt),"HH:mm"),section:"right"});const a=e.statusHistory&&e.statusHistory.length>0,r=se.has(e.id),s=a?(0,T.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,T.jsxs)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[(0,T.jsx)(C.A,{className:"h-4 w-4"}),"Status-Wechsel"]}),(0,T.jsx)("div",{className:"space-y-2",children:e.statusHistory.map((e=>(0,T.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-600 dark:text-gray-400",children:[(0,T.jsx)("span",{className:"font-medium",children:(0,i.GP)(new Date(e.changedAt),"HH:mm:ss")}),(0,T.jsx)("span",{className:"text-gray-400",children:"\u2192"}),(0,T.jsx)("span",{className:`px-2 py-1 rounded-full ${Ae(e.oldStatus||"open")}`,children:Se(e.oldStatus||"open")}),(0,T.jsx)("span",{className:"text-gray-400",children:"\u2192"}),(0,T.jsx)("span",{className:`px-2 py-1 rounded-full ${Ae(e.newStatus)}`,children:Se(e.newStatus)}),(0,T.jsx)("span",{className:"text-gray-400",children:"von"}),(0,T.jsxs)("span",{className:"font-medium",children:[e.user.firstName," ",e.user.lastName]})]},e.id)))})]}):null;return(0,T.jsx)(O.A,{title:e.title,status:{label:Se(e.status),color:Ae(e.status)},metadata:t,expandable:s?{isExpanded:r,content:s,onToggle:()=>ne(e.id)}:void 0},e.id)}))})})]})};var X=a(2704);const ee="request-analytics-table",te=["time","title","status","requester","responsible","branch"],ae=e=>{let{selectedDate:t}=e;const{t:a}=(0,x.Bd)(),[s,d]=(0,r.useState)([]),[o,c]=(0,r.useState)(!1),[m,u]=(0,r.useState)(null),[p,y]=(0,r.useState)(""),[j,w]=(0,r.useState)([]),[N,A]=(0,r.useState)([]),[S,C]=(0,r.useState)(""),[E,D]=(0,r.useState)(null),[I,$]=(0,r.useState)(!1),{settings:F,isLoading:R,updateColumnOrder:q,updateHiddenColumns:B,toggleColumnVisibility:z,isColumnVisible:Z,updateViewMode:_}=(0,W.F)(ee,{defaultColumnOrder:te,defaultViewMode:"table"}),V=(null===F||void 0===F?void 0:F.columnOrder)||te,G=(null===F||void 0===F?void 0:F.hiddenColumns)||[],P=V.filter((e=>!G.includes(e))),K=(null===F||void 0===F?void 0:F.viewMode)||"table",[U,Y]=(0,r.useState)(K);(0,r.useEffect)((()=>{null!==F&&void 0!==F&&F.viewMode&&F.viewMode!==U&&Y(F.viewMode)}),[null===F||void 0===F?void 0:F.viewMode]);const Q=(0,r.useMemo)((()=>[{id:"time",label:"Zeit"},{id:"title",label:"Request"},{id:"status",label:"Status"},{id:"requester",label:"Antragsteller"},{id:"responsible",label:"Verantwortlich"},{id:"branch",label:"Niederlassung"}]),[]);(0,r.useEffect)((()=>{t&&(async()=>{try{c(!0),u(null);const e={date:t};j.forEach((t=>{"branch"===t.column&&t.value&&(e.branchId=t.value),"requester"===t.column&&t.value&&(e.userId=t.value),"status"===t.column&&t.value}));const a=await l.A.get(n.Sn.TEAM_WORKTIME.ANALYTICS.REQUESTS_CHRONOLOGICAL,{params:e});d(a.data||[])}catch(m){console.error("Fehler beim Laden der Requests:",m),u("Fehler beim Laden der Requests")}finally{c(!1)}})()}),[t,j]);const J=(0,r.useCallback)(((e,t)=>{w(e),A(t),$(!1)}),[]),ae=(0,r.useCallback)((()=>{w([]),A([]),C(""),D(null)}),[]),re=(0,r.useCallback)(((e,t,a,r)=>{C(e),D(t),J(a,r)}),[J]),se=(0,r.useCallback)((()=>j.filter((e=>""!==e.column&&null!==e.value)).length),[j]),le=e=>{switch(e){case"approved":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400";case"approval":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400";case"denied":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400";case"to_improve":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},ne=e=>({approved:"Genehmigt",approval:"Offen",denied:"Abgelehnt",to_improve:"Nachbesserung"}[e]||e),ie=(0,r.useMemo)((()=>{let e=[...s];if(p){const t=p.toLowerCase();e=e.filter((e=>e.title.toLowerCase().includes(t)||e.branch.name.toLowerCase().includes(t)||`${e.requester.firstName} ${e.requester.lastName}`.toLowerCase().includes(t)||`${e.responsible.firstName} ${e.responsible.lastName}`.toLowerCase().includes(t)))}return j.forEach((t=>{if(""===t.column||null===t.value)return;const a=t.operator||"equals",r=t.value;e=e.filter((e=>{switch(t.column){case"status":return"equals"!==a||e.status===r;case"title":return"contains"!==a||e.title.toLowerCase().includes(String(r).toLowerCase());default:return!0}}))})),e}),[s,p,j]),de=(0,r.useMemo)((()=>({total:ie.length,approved:ie.filter((e=>"approved"===e.status)).length,pending:ie.filter((e=>"approval"===e.status)).length,denied:ie.filter((e=>"denied"===e.status)).length,toImprove:ie.filter((e=>"to_improve"===e.status)).length})),[ie]);return m?(0,T.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-400 px-4 py-3 rounded",children:m}):(0,T.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 request-analytics-wrapper",children:[(0,T.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,T.jsxs)("div",{className:"flex items-center",children:[(0,T.jsx)(X.A,{className:"h-6 w-6 mr-2 dark:text-white"}),(0,T.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:"Request-Auswertungen"})]}),(0,T.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,T.jsx)("input",{type:"text",placeholder:"Suchen...",className:"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:p,onChange:e=>y(e.target.value)}),(0,T.jsx)("button",{className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 "+("cards"===U?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":""),onClick:()=>{const e="table"===U?"cards":"table";Y(e),_&&_(e)},title:"table"===U?"Als Cards anzeigen":"Als Tabelle anzeigen",children:"table"===U?(0,T.jsx)(g.A,{className:"h-5 w-5"}):(0,T.jsx)(h.A,{className:"h-5 w-5"})}),(0,T.jsxs)("button",{className:`p-2 rounded-md ${se()>0?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"hover:bg-gray-100 dark:hover:bg-gray-700"} ml-1 relative`,onClick:()=>$(!I),title:"Filter",style:{position:"relative"},children:[(0,T.jsx)(b.A,{className:"h-5 w-5"}),se()>0&&(0,T.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center z-10",children:se()})]})]})]}),I&&(0,T.jsx)(L.A,{columns:Q,onApply:J,onReset:ae,savedConditions:j,savedOperators:N,tableId:ee}),(0,T.jsx)(M.A,{tableId:ee,onSelectFilter:J,onReset:ae,activeFilterName:S,selectedFilterId:E,onFilterChange:re,defaultFilterName:"Alle"}),(0,T.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,T.jsxs)("div",{className:"bg-white dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[(0,T.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Gesamt"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:de.total})]}),(0,T.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[(0,T.jsx)("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Genehmigt"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:de.approved})]}),(0,T.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-4 border border-yellow-200 dark:border-yellow-800",children:[(0,T.jsx)("div",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Offen"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-yellow-700 dark:text-yellow-300",children:de.pending})]}),(0,T.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800",children:[(0,T.jsx)("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Abgelehnt"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-red-700 dark:text-red-300",children:de.denied})]}),(0,T.jsxs)("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 border border-orange-200 dark:border-orange-800",children:[(0,T.jsx)("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Nachbesserung"}),(0,T.jsx)("div",{className:"text-2xl font-bold text-orange-700 dark:text-orange-300",children:de.toImprove})]})]}),o?(0,T.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,T.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:"Lade Requests..."})}):"table"===U?(0,T.jsx)("div",{className:"overflow-x-auto",children:(0,T.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,T.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,T.jsx)("tr",{children:V.filter((e=>P.includes(e))).map((e=>{const t=Q.find((t=>t.id===e));return t?(0,T.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t.label},e):null}))})}),(0,T.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-800",children:0===ie.length?(0,T.jsx)("tr",{children:(0,T.jsx)("td",{colSpan:V.filter((e=>P.includes(e))).length,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"Keine Requests f\xfcr dieses Datum gefunden"})}):ie.map((e=>(0,T.jsx)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:V.filter((e=>P.includes(e))).map((t=>{switch(t){case"time":return(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:(0,i.GP)(new Date(e.createdAt),"HH:mm")},t);case"title":return(0,T.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900 dark:text-white",children:e.title},t);case"status":return(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,T.jsx)("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${le(e.status)}`,children:ne(e.status)})},t);case"requester":return(0,T.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[e.requester.firstName," ",e.requester.lastName]},t);case"responsible":return(0,T.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[e.responsible.firstName," ",e.responsible.lastName]},t);case"branch":return(0,T.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.branch.name},t);default:return null}}))},e.id)))})]})}):(0,T.jsx)("div",{className:"-mx-6",children:0===ie.length?(0,T.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[(0,T.jsx)(X.A,{className:"h-10 w-10 mb-4 text-gray-400 dark:text-gray-500"}),(0,T.jsx)("div",{className:"text-sm",children:"Keine Requests gefunden"})]}):(0,T.jsx)(H.A,{children:ie.map((e=>{const t=[];return P.includes("branch")&&t.push({icon:(0,T.jsx)(v.A,{className:"h-4 w-4"}),label:"Niederlassung",value:e.branch.name,section:"left"}),P.includes("requester")&&t.push({icon:(0,T.jsx)(f.A,{className:"h-4 w-4"}),label:"Antragsteller",value:`${e.requester.firstName} ${e.requester.lastName}`,section:"main"}),P.includes("responsible")&&t.push({icon:(0,T.jsx)(f.A,{className:"h-4 w-4"}),label:"Verantwortlich",value:`${e.responsible.firstName} ${e.responsible.lastName}`,section:"main"}),P.includes("time")&&t.push({icon:(0,T.jsx)(k.A,{className:"h-4 w-4"}),label:"Zeit",value:(0,i.GP)(new Date(e.createdAt),"HH:mm"),section:"right"}),(0,T.jsx)(O.A,{title:e.title,status:{label:ne(e.status),color:le(e.status)},metadata:t},e.id)}))})})]})},re=()=>{const[e,t]=(0,r.useState)([]),[a,d]=(0,r.useState)([]),[o,c]=(0,r.useState)((0,i.GP)(new Date,"yyyy-MM-dd")),[m,x]=(0,r.useState)("worktimes"),[u,g]=(0,r.useState)(!1),[h,b]=(0,r.useState)(null),p=(0,r.useCallback)((async()=>{try{g(!0),b(null);const e=await l.A.get(n.Sn.TEAM_WORKTIME.ACTIVE);t(e.data)}catch(h){console.error("Fehler beim Laden der aktiven Benutzer:",h),b("Fehler beim Laden der aktiven Benutzer")}finally{g(!1)}}),[]),y=(0,r.useCallback)((async()=>{try{g(!0),b(null);const e=await l.A.get(`${n.Sn.TEAM_WORKTIME.USER_DAY}?date=${o}`);d(e.data)}catch(h){console.error("Fehler beim Laden der Zeiterfassungen:",h),b("Fehler beim Laden der Zeiterfassungen")}finally{g(!1)}}),[o]);return(0,r.useEffect)((()=>{p(),y();const e=setInterval(p,3e4);return()=>clearInterval(e)}),[p,y]),(0,r.useEffect)((()=>{y()}),[o,y]),(0,T.jsx)("div",{className:"h-auto",children:(0,T.jsx)("div",{className:"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6",children:(0,T.jsx)("div",{className:"py-1",children:(0,T.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,T.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,T.jsxs)("div",{className:"flex items-center pl-2 sm:pl-0",children:[(0,T.jsx)(s.A,{className:"h-6 w-6 text-gray-900 dark:text-white mr-2"}),(0,T.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Workcenter"})]})}),h&&(0,T.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-400 px-4 py-3 rounded mb-4",children:h}),(0,T.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-6",children:(0,T.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,T.jsx)("button",{onClick:()=>x("worktimes"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("worktimes"===m?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:"Arbeitszeiten & Aktivit\xe4ten"}),(0,T.jsx)("button",{onClick:()=>x("todos"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("todos"===m?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:"To-Do-Auswertungen"}),(0,T.jsx)("button",{onClick:()=>x("requests"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("requests"===m?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:"Request-Auswertungen"})]})}),"worktimes"===m&&(0,T.jsx)(_,{activeUsers:e,allWorktimes:a,loading:u,selectedDate:o,onDateChange:c,onStopWorktime:async(e,t)=>{try{g(!0),b(null),await l.A.post(n.Sn.TEAM_WORKTIME.STOP_USER,{userId:e,endTime:new Date((new Date).getTime()-6e4*(new Date).getTimezoneOffset())}),p()}catch(h){console.error("Fehler beim Stoppen der Benutzer-Zeiterfassung:",h),b("Fehler beim Stoppen der Benutzer-Zeiterfassung")}finally{g(!1)}},onRefresh:p,showTodos:!0,showRequests:!0}),"todos"===m&&(0,T.jsx)(J,{selectedDate:o}),"requests"===m&&(0,T.jsx)(ae,{selectedDate:o})]})})})})}},6238:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const l=r.forwardRef(s)},6365:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const l=r.forwardRef(s)},7012:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const l=r.forwardRef(s)},7030:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 9h16.5m-16.5 6.75h16.5"}))}const l=r.forwardRef(s)},8010:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const l=r.forwardRef(s)},8224:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const l=r.forwardRef(s)},9531:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const l=r.forwardRef(s)},9626:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(5043);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const l=r.forwardRef(s)}}]);
//# sourceMappingURL=151.2aadc43f.chunk.js.map