"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[781],{1052:(e,t,r)=>{r.d(t,{F2:()=>l,Rj:()=>i,go:()=>s});const a={request:{criticalHours:24},todo:{criticalHours:24}};const n={hourly:{criticalHours:2},daily:{criticalHours:6},standard:{criticalHours:24}};function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"request",r=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;if(!e)return"none";const i=new Date,d=new Date(e),o=(i.getTime()-d.getTime())/36e5;if(o<=0)return"none";let c;if(r)c=r;else if("todo"===t&&s){const e=function(e,t){const r=e.toLowerCase(),a=(t||"").toLowerCase();return r.includes("st\xfcndlich")||a.includes("st\xfcndlich")?"hourly":r.includes("t\xe4glich")||a.includes("t\xe4glich")?"daily":"standard"}(s,l);c=n[e]}else c=a[t];return o>=c.criticalHours?"critical":"expired"}function l(e){switch(e){case"expired":return{borderClass:"border-orange-500 dark:border-orange-600",bgClass:"bg-orange-50 dark:bg-orange-900/20",textClass:"text-orange-700 dark:text-orange-300",badgeClass:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300"};case"critical":return{borderClass:"border-red-500 dark:border-red-600",bgClass:"bg-red-50 dark:bg-red-900/20",textClass:"text-red-700 dark:text-red-700",badgeClass:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"};default:return{borderClass:"",bgClass:"",textClass:"",badgeClass:""}}}function i(e){let t=arguments.length>4?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F\xe4lligkeit",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e=>e.toLocaleDateString(),n=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const i=s(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"request",void 0,arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0),d=l(i);return{icon:t,label:r,value:e?a(new Date(e)):"-",className:"none"!==i?n?d.badgeClass:d.textClass:void 0}}},1252:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(45),n=r(5043);const s=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,i=(0,a.A)(e,s);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),r?n.createElement("title",{id:l},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))}const i=n.forwardRef(l)},1853:(e,t,r)=>{r.d(t,{Iw:()=>n,qY:()=>a});r(5043),r(579);const a=(e,t)=>{if("task"===t)switch(e){case"open":default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"in_progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"improval":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"quality_control":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300";case"done":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}if("request"===t)switch(e){case"approval":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"approved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"to_improve":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"denied":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}if("invoice"===t)switch(e){case"DRAFT":default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"SENT":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"PAID":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"OVERDUE":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"CANCELLED":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"}return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},n=(e,t,r)=>{if(r){if("task"===t){const t="tasks.status.".concat(e),a=r(t);if(a!==t)return a}if("request"===t){const t="requests.status.".concat(e),a=r(t);if(a!==t)return a}if("invoice"===t){const t="invoices.status.".concat(e.toLowerCase()),a=r(t);if(a!==t)return a}}if("task"===t)switch(e){case"open":return"Offen";case"in_progress":return"In Bearbeitung";case"improval":return"Nachbesserung";case"quality_control":return"Qualit\xe4tskontrolle";case"done":return"Erledigt";default:return e}if("request"===t)switch(e){case"approval":return"Offen";case"approved":return"Genehmigt";case"to_improve":return"Nachbesserung";case"denied":return"Abgelehnt";default:return e}if("invoice"===t)switch(e){case"DRAFT":return"Entwurf";case"SENT":return"Gesendet";case"PAID":return"Bezahlt";case"OVERDUE":return"\xdcberf\xe4llig";case"CANCELLED":return"Storniert";default:return e}return e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," ")}},3744:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(45),n=r(5043);const s=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,i=(0,a.A)(e,s);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),r?n.createElement("title",{id:l},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const i=n.forwardRef(l)},7988:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(45),n=r(5043);const s=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,i=(0,a.A)(e,s);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),r?n.createElement("title",{id:l},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const i=n.forwardRef(l)},8658:(e,t,r)=>{r.d(t,{G:()=>o});var a=r(5043),n=r(4117),s=r(1923),l=r(1801),i=r(1713),d=r(579);const o=e=>{var t;let{isOpen:r,onClose:o,selectedDate:c}=e;const{t:g}=(0,n.Bd)(),u=new Date,x="".concat(u.getFullYear(),"-").concat((u.getMonth()+1).toString().padStart(2,"0"),"-").concat(u.getDate().toString().padStart(2,"0")),[m,h]=(0,a.useState)([]),[b,k]=(0,a.useState)(c||x),[y,f]=(0,a.useState)(!0),[p,w]=(0,a.useState)("0h 0m"),[v,j]=(0,a.useState)(null),[T,N]=(0,a.useState)(null),C=()=>{if(!v)return!1;try{return v.startTime.split("T")[0]===b}catch(T){return console.error("Fehler beim Pr\xfcfen der Relevanz der aktiven Zeiterfassung:",T),!1}},E=(0,a.useCallback)((async()=>{try{N(null),f(!0);if(!localStorage.getItem("token"))return N(g("worktime.tracker.notAuthenticated")),void f(!1);const e=b,t=[...(await s.A.get("".concat(l.Sn.WORKTIME.BASE,"?date=").concat(e))).data].sort(((e,t)=>new Date(e.startTime).getTime()-new Date(t.startTime).getTime()));h(t);const r=await s.A.get(l.Sn.WORKTIME.ACTIVE);r.data&&Object.keys(r.data).length>0?j(r.data):j(null),f(!1)}catch(T){console.error("Fehler beim Laden der Zeiterfassungen:",T),N(g("worktime.list.loadError")),f(!1)}}),[b,g]);if((0,a.useEffect)((()=>{r&&E()}),[r,E]),(0,a.useEffect)((()=>{let e=0;if(m.filter((e=>(0,i.uT)(e,b))).forEach((t=>{if(t.endTime)try{const r=new Date(t.startTime),a=new Date(t.endTime).getTime()-r.getTime();if(a>0){const t=Math.floor(a/6e4);e+=t}}catch(T){console.error("Fehler bei der Berechnung:",T)}})),v&&C())try{const t=new Date("".concat(v.startTime.split("Z")[0])),r=(new Date).getTime()-t.getTime();if(r>0){const t=Math.floor(r/6e4);e+=t}}catch(T){console.error("Fehler bei der Berechnung der aktiven Zeiterfassung:",T)}const t=Math.floor(e/60),r=e%60,a="".concat(t,"h ").concat(r,"m");w(a)}),[m,v,b]),!r)return null;const A=m.filter((e=>(0,i.uT)(e,b)));return(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 w-full max-w-4xl max-h-[90vh] flex flex-col",children:[(0,d.jsxs)("div",{className:"p-4 border-b dark:border-gray-700 flex items-center justify-between",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:g("worktime.modal.title",{date:(0,i.Yq)(b)})}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("input",{type:"date",value:b,onChange:e=>{k(e.target.value)},className:"border dark:border-gray-600 rounded-md px-3 py-2 dark:bg-gray-700 dark:text-white"}),(0,d.jsx)("button",{onClick:o,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"\u2715"})]})]}),(0,d.jsx)("div",{className:"overflow-y-auto flex-grow",children:y?(0,d.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-gray-300"})}):0===m.filter((e=>(0,i.uT)(e,b)&&(null!==e.endTime||C()))).length?(0,d.jsx)("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:g("worktime.modal.noEntries")}):(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,d.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:g("worktime.list.columns.start")}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:g("worktime.list.columns.end")}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:g("worktime.list.columns.duration")}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:g("worktime.list.columns.branch")})]})}),(0,d.jsxs)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:[A.filter((e=>null!==e.endTime)).sort(((e,t)=>new Date(e.startTime).getTime()-new Date(t.startTime).getTime())).map((e=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:(0,i.fU)(e.startTime)}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:e.endTime?(0,i.fU)(e.endTime):"-"}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:(0,i.P0)(e.startTime,e.endTime)}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:e.branch.name})]},e.id))),C()&&(0,d.jsxs)("tr",{className:"bg-green-50 dark:bg-green-900/30 hover:bg-green-100 dark:hover:bg-green-900/50",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:(0,i.fU)(v.startTime)}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:(0,d.jsx)("span",{className:"italic",children:g("worktime.active")})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200 font-medium text-green-600 dark:text-green-400",children:(()=>{if(!v)return"-";const e=v.startTime.endsWith("Z")?v.startTime.substring(0,v.startTime.length-1):v.startTime,t=new Date(e),r=(new Date).getTime()-t.getTime(),a=Math.floor(r/6e4),n=Math.floor(a/60),s=a%60;return"".concat(n,"h ").concat(s,"m (").concat(g("worktime.modal.running"),")")})()}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:(null===(t=v.branch)||void 0===t?void 0:t.name)||g("common.unknown")})]})]}),(0,d.jsx)("tfoot",{className:"bg-gray-100 dark:bg-gray-700",children:(0,d.jsxs)("tr",{children:[(0,d.jsxs)("td",{colSpan:2,className:"px-6 py-3 text-right text-sm font-medium text-gray-700 dark:text-gray-300",children:[g("worktime.modal.totalDuration"),":"]}),(0,d.jsx)("td",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900 dark:text-white",children:p}),(0,d.jsx)("td",{})]})})]})})]})})}},8662:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(45),n=r(5043);const s=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,i=(0,a.A)(e,s);return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),r?n.createElement("title",{id:l},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const i=n.forwardRef(l)}}]);
//# sourceMappingURL=781.8c27c668.chunk.js.map