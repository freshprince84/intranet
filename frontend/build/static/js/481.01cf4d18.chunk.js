"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[481],{481:(e,t,a)=>{a.r(t),a.d(t,{default:()=>de});var r=a(5043),s=a(4117),l=a(3216),n=a(1252),d=a(4294),i=a(2760),c=a(579);const o=e=>new Intl.NumberFormat("de-CH",{style:"currency",currency:"CHF"}).format(e),x=()=>{const{t:e}=(0,s.Bd)(),{hasPermission:t}=(0,i.S)(),[a,l]=(0,r.useState)(null),[x,m]=(0,r.useState)(!0),[u,g]=(0,r.useState)(null);(0,r.useEffect)((()=>{t("payroll","read")?h():m(!1)}),[t]);const h=async()=>{try{m(!0),setTimeout((()=>{l({totalHours:160,totalEarnings:8e3,deductions:1200,netPay:6800,period:"Oktober 2024"}),m(!1)}),500)}catch(u){console.error("Fehler beim Laden der Lohndaten:",u),g(e("payroll.payrollComponent.loadError")),m(!1)}};return t("payroll","read")?x?(0,c.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:(0,c.jsxs)("div",{className:"animate-pulse",children:[(0,c.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-4"}),(0,c.jsx)("div",{className:"space-y-3",children:[...Array(4)].map(((e,t)=>(0,c.jsx)("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded"},t)))})]})}):(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,c.jsxs)("div",{className:"flex",children:[(0,c.jsx)(n.A,{className:"h-6 w-6 text-blue-600 dark:text-blue-400 flex-shrink-0"}),(0,c.jsxs)("div",{className:"ml-3",children:[(0,c.jsx)("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:e("payroll.payrollComponent.futureDevelopment")}),(0,c.jsx)("p",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:e("payroll.payrollComponent.futureDevelopmentDescription")})]})]})}),(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:[(0,c.jsxs)("div",{className:"flex items-center mb-6",children:[(0,c.jsx)(d.A,{className:"h-8 w-8 mr-3 text-blue-600 dark:text-blue-400"}),(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("payroll.payrollComponent.title")})]}),u?(0,c.jsx)("div",{className:"text-center text-red-600 dark:text-red-400",children:u}):a?(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,c.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,c.jsx)("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("payroll.payrollComponent.totalHours")}),(0,c.jsxs)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[a.totalHours,"h"]})]}),(0,c.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,c.jsx)("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("payroll.payrollComponent.grossPay")}),(0,c.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o(a.totalEarnings)})]}),(0,c.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,c.jsx)("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("payroll.payrollComponent.deductions")}),(0,c.jsxs)("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:["-",o(a.deductions)]})]}),(0,c.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,c.jsx)("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("payroll.payrollComponent.netPay")}),(0,c.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:o(a.netPay)})]})]}):(0,c.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400",children:e("payroll.payrollComponent.noData")})]})]}):(0,c.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:(0,c.jsx)("p",{className:"text-red-800 dark:text-red-200",children:e("payroll.payrollComponent.noPermission")})})};var m=a(8010),u=a(4850),g=a(1663),h=a(1909),b=a(7449),y=a(2517),p=a(2811),N=a(8416),j=a(2683),k=a(6238),v=a(7988),f=a(7591),w=a(8662),A=a(9248),S=a(9422),C=a(9837),D=a(887),E=a(1801),L=a(1923),T=a(2023),R=a(8897),F=a(4426),M=a(7829),O=a(6443),P=a(4129),I=a(7012),B=a(1816),z=a(7488),U=a(1713);const H=e=>{const t={DRAFT:{label:"Entwurf",color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},SENT:{label:"Gesendet",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},PAID:{label:"Bezahlt",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"},OVERDUE:{label:"\xdcberf\xe4llig",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"},CANCELLED:{label:"Storniert",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"}}[e];return(0,c.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.color}`,children:t.label})},G=e=>{let{isOpen:t,onClose:a,invoiceId:s,onInvoiceUpdated:l}=e;const[n,d]=(0,r.useState)(null),[i,o]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[u,g]=(0,r.useState)(!1);(0,r.useEffect)((()=>{t&&s&&h()}),[t,s]);const h=async()=>{try{o(!0);const e=await L.A.get(E.Sn.CONSULTATION_INVOICES.BY_ID(s));d(e.data),m(null)}catch(x){console.error("Fehler beim Laden der Rechnungsdetails:",x),m("Fehler beim Laden der Rechnungsdetails")}finally{o(!1)}},b=()=>null!==n&&void 0!==n&&n.payments?n.payments.reduce(((e,t)=>e+Number(t.amount)),0):0,y=()=>n?Number(n.total)-b():0;return t?(0,c.jsxs)(O.lG,{open:t,onClose:a,className:"relative z-50",children:[(0,c.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,c.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,c.jsx)(O.lG.Panel,{className:"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[90vh] overflow-y-auto",children:(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsx)(O.lG.Title,{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Rechnungsdetails"}),n&&H(n.status)]}),(0,c.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,c.jsx)(f.A,{className:"h-6 w-6"})})]}),i?(0,c.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,c.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),(0,c.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),(0,c.jsx)("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"})]}):x?(0,c.jsx)("div",{className:"text-center text-red-600 dark:text-red-400 py-6",children:x}):n?(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6",children:[(0,c.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Rechnungsinformationen"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rechnungsnummer"}),(0,c.jsx)("p",{className:"text-gray-900 dark:text-white font-mono",children:n.invoiceNumber})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rechnungsdatum"}),(0,c.jsx)("p",{className:"text-gray-900 dark:text-white",children:(0,C.GP)(new Date(n.issueDate),"dd.MM.yyyy",{locale:D.de})})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"F\xe4lligkeitsdatum"}),(0,c.jsx)("p",{className:"text-gray-900 dark:text-white",children:(0,C.GP)(new Date(n.dueDate),"dd.MM.yyyy",{locale:D.de})})]})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,c.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,c.jsxs)("h3",{className:"text-lg font-medium text-blue-800 dark:text-blue-200 mb-3 flex items-center",children:[(0,c.jsx)(P.A,{className:"h-5 w-5 mr-2"}),"Kunde"]}),(0,c.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,c.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:n.client.name}),n.client.company&&(0,c.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:n.client.company}),n.client.email&&(0,c.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:n.client.email}),n.client.phone&&(0,c.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:n.client.phone}),n.client.address&&(0,c.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:n.client.address})]})]}),(0,c.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[(0,c.jsxs)("h3",{className:"text-lg font-medium text-green-800 dark:text-green-200 mb-3 flex items-center",children:[(0,c.jsx)(k.A,{className:"h-5 w-5 mr-2"}),"Berater"]}),(0,c.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,c.jsxs)("p",{className:"font-medium text-gray-900 dark:text-white",children:[n.user.firstName," ",n.user.lastName]}),(0,c.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:n.user.email})]})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,c.jsx)(I.A,{className:"h-5 w-5 mr-2"}),"Abgerechnete Beratungen (",n.items.length,")"]}),(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,c.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Datum & Zeit"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Dauer"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Niederlassung"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Stundensatz"}),(0,c.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Betrag"})]})}),(0,c.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:n.items.map((e=>(0,c.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"font-medium",children:(0,U.fU)(e.workTime.startTime)}),(0,c.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:(0,C.GP)(new Date(e.workTime.startTime),"dd.MM.yyyy",{locale:D.de})})]})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:(0,U.P0)(e.workTime.startTime,e.workTime.endTime)}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:e.workTime.branch.name}),(0,c.jsxs)("td",{className:"px-4 py-2 text-right text-sm text-gray-900 dark:text-gray-200",children:[n.currency," ",Number(e.unitPrice).toFixed(2)]}),(0,c.jsxs)("td",{className:"px-4 py-2 text-right text-sm text-gray-900 dark:text-gray-200",children:[n.currency," ",Number(e.amount).toFixed(2)]})]},e.id)))})]})})]}),(0,c.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6",children:[(0,c.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Rechnungssumme"}),(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{children:"Zwischensumme:"}),(0,c.jsxs)("span",{children:[n.currency," ",Number(n.subtotal).toFixed(2)]})]}),n.vatRate&&n.vatAmount&&(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsxs)("span",{children:["MwSt. (",Number(n.vatRate).toFixed(1),"%):"]}),(0,c.jsxs)("span",{children:[n.currency," ",Number(n.vatAmount).toFixed(2)]})]}),(0,c.jsxs)("div",{className:"flex justify-between border-t border-gray-200 dark:border-gray-600 pt-2 font-bold",children:[(0,c.jsx)("span",{children:"Gesamtbetrag:"}),(0,c.jsxs)("span",{children:[n.currency," ",Number(n.total).toFixed(2)]})]})]})]}),n.payments.length>0&&(0,c.jsxs)("div",{children:[(0,c.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,c.jsx)(j.A,{className:"h-5 w-5 mr-2"}),"Zahlungen (",n.payments.length,")"]}),(0,c.jsxs)("div",{className:"space-y-3",children:[n.payments.map((e=>(0,c.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:(0,c.jsx)("div",{className:"flex justify-between items-start",children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("p",{className:"font-medium text-green-800 dark:text-green-200",children:[n.currency," ",Number(e.amount).toFixed(2)]}),(0,c.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400",children:(0,C.GP)(new Date(e.paymentDate),"dd.MM.yyyy HH:mm",{locale:D.de})}),(0,c.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.paymentMethod,e.reference&&` - ${e.reference}`]})]})})},e.id))),(0,c.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-blue-600 dark:text-blue-400",children:"Bezahlt:"}),(0,c.jsxs)("span",{className:"ml-2 font-medium",children:[n.currency," ",b().toFixed(2)]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:"text-blue-600 dark:text-blue-400",children:"Ausstehend:"}),(0,c.jsxs)("span",{className:"ml-2 font-medium",children:[n.currency," ",y().toFixed(2)]})]})]})})]})]}),n.notes&&(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Notizen"}),(0,c.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:(0,c.jsx)("p",{className:"text-gray-900 dark:text-white whitespace-pre-wrap",children:n.notes})})]}),(0,c.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,c.jsx)("button",{onClick:async()=>{if(n)try{const e=await L.A.get(E.Sn.CONSULTATION_INVOICES.GENERATE_PDF(n.id),{responseType:"blob",headers:{Accept:"application/pdf"}}),t=new Blob([e.data],{type:"application/pdf"}),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`Rechnung_${n.invoiceNumber}.pdf`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a),z.oR.success("PDF erfolgreich heruntergeladen")}catch(x){var e,t;console.error("Fehler beim Download der PDF:",x),z.oR.error((null===(e=x.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Fehler beim Download der PDF")}},className:"p-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 rounded-md",title:"PDF herunterladen",children:(0,c.jsx)(N.A,{className:"h-5 w-5"})}),"PAID"!==n.status&&"CANCELLED"!==n.status&&y()>0&&(0,c.jsx)("button",{onClick:async()=>{if(n)try{g(!0),await L.A.post(E.Sn.CONSULTATION_INVOICES.MARK_PAID(n.id),{amount:n.total,paymentDate:(new Date).toISOString(),paymentMethod:"Manual",reference:"Manuelle Zahlung"}),z.oR.success("Rechnung als bezahlt markiert"),h(),l()}catch(x){var e,t;z.oR.error((null===(e=x.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Fehler beim Markieren als bezahlt")}finally{g(!1)}},disabled:u,className:"p-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-green-700 dark:hover:bg-green-800 disabled:opacity-50 disabled:cursor-not-allowed",title:u?"Verarbeitung...":"Als bezahlt markieren",children:u?(0,c.jsx)(B.A,{className:"h-5 w-5 animate-spin"}):(0,c.jsx)(j.A,{className:"h-5 w-5"})}),(0,c.jsx)("button",{onClick:a,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800",title:"Schlie\xdfen",children:(0,c.jsx)(f.A,{className:"h-5 w-5"})})]})]}):null]})})})]}):null};var $=a(6400),_=a(5657),V=a(957),q=a(637);const K=["expand","invoiceNumber","client","issueDate","dueDate","total","status","actions"],Z="invoice-management",W={invoiceNumber:"asc",client:"asc",issueDate:"desc",dueDate:"asc",total:"asc",status:"asc"},Y={expand:[],invoiceNumber:["invoiceNumber"],client:["client"],issueDate:["issueDate"],dueDate:["dueDate"],total:["total"],status:["status"],actions:[]},J=e=>{var t;let{selectedInvoiceId:a}=e;const{t:l}=(0,s.Bd)(),{hasPermission:n}=(0,i.S)(),{openSidepane:d,closeSidepane:o}=(0,_.N)(),[x,O]=(0,r.useState)(window.innerWidth>1070),[P,I]=(0,r.useState)([]),[B,U]=(0,r.useState)(!0),[H,J]=(0,r.useState)(null),[Q,X]=(0,r.useState)(""),[ee,te]=(0,r.useState)({key:"issueDate",direction:"desc"}),[ae,re]=(0,r.useState)(!1),[se,le]=(0,r.useState)([]),[ne,de]=(0,r.useState)([]),[ie,ce]=(0,r.useState)(""),[oe,xe]=(0,r.useState)(null),[me,ue]=(0,r.useState)(a||null),[ge,he]=(0,r.useState)(!1),[be,ye]=(0,r.useState)(new Set),[pe,Ne]=(0,r.useState)(!1),[je,ke]=(0,r.useState)(null),[ve,fe]=(0,r.useState)({}),we=n("consultation_invoices","read","table"),Ae=n("invoice_mark_paid","write","button"),Se=n("invoice_download","read","button"),{settings:Ce,isLoading:De,updateColumnOrder:Ee,updateHiddenColumns:Le,toggleColumnVisibility:Te,isColumnVisible:Re,updateViewMode:Fe}=(0,T.F)(Z,{defaultColumnOrder:K,defaultHiddenColumns:[],defaultViewMode:"cards"}),[Me,Oe]=(0,r.useState)(!1),Pe=(0,r.useMemo)((()=>[{id:"expand",label:"",shortLabel:""},{id:"invoiceNumber",label:l("invoices.columns.invoiceNumber"),shortLabel:l("invoices.columns.invoiceNumber").substring(0,2)},{id:"client",label:l("invoices.columns.client"),shortLabel:l("invoices.columns.client")},{id:"issueDate",label:l("invoices.columns.issueDate"),shortLabel:l("common.today").substring(0,3)},{id:"dueDate",label:l("invoices.columns.dueDate"),shortLabel:l("invoices.columns.dueDate").substring(0,5)},{id:"total",label:l("invoices.columns.total"),shortLabel:l("invoices.columns.total")},{id:"status",label:l("invoices.columns.status"),shortLabel:l("invoices.columns.status")},{id:"actions",label:l("common.actions"),shortLabel:l("common.actions").substring(0,3)}]),[l]),Ie=(0,r.useMemo)((()=>({DRAFT:{label:l("invoices.status.draft"),color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},SENT:{label:l("invoices.status.sent"),color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},PAID:{label:l("invoices.status.paid"),color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"},OVERDUE:{label:l("invoices.status.overdue"),color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"},CANCELLED:{label:l("invoices.status.cancelled"),color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"}})),[l]),Be=e=>{const t=Ie[e];return(0,c.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.color}`,children:t.label})},ze=Ce.viewMode||"cards",[Ue,He]=(0,r.useState)((()=>W)),Ge=(0,r.useMemo)((()=>(e=>{const t=[];return e.forEach((e=>{const a=Y[e];a&&a.length>0&&t.push(...a)})),t})(Ce.columnOrder||K)),[Ce.columnOrder]),$e=(0,r.useMemo)((()=>(e=>{const t=new Set;return e.forEach((e=>{(Y[e]||[]).forEach((e=>t.add(e)))})),t})(Ce.hiddenColumns||[])),[Ce.hiddenColumns]),_e=(0,r.useMemo)((()=>new Set(Ge.filter((e=>!$e.has(e))))),[Ge,$e]);(0,r.useEffect)((()=>{const e=document.querySelector(".dashboard-invoices-wrapper");e&&("cards"===ze?e.classList.add("cards-mode"):e.classList.remove("cards-mode"))}),[ze]),(0,r.useEffect)((()=>{Ve()}),[]),(0,r.useEffect)((()=>{if(a&&P.length>0){P.find((e=>e.id===a))&&(ue(a),he(!0))}}),[a,P]);const Ve=async()=>{try{U(!0);const e=await L.A.get(E.Sn.CONSULTATION_INVOICES.BASE);I(e.data),J(null)}catch(H){console.error("Fehler beim Laden der Rechnungen:",H),J("Fehler beim Laden der Rechnungen")}finally{U(!1)}},qe=async(e,t)=>{try{const a=await L.A.get(E.Sn.CONSULTATION_INVOICES.GENERATE_PDF(e),{responseType:"blob",headers:{Accept:"application/pdf"}}),r=new Blob([a.data],{type:"application/pdf"}),s=window.URL.createObjectURL(r),l=document.createElement("a");l.href=s,l.download=`Rechnung_${t}.pdf`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(s),z.oR.success("PDF erfolgreich heruntergeladen")}catch(H){var a,r;console.error("Fehler beim Download der PDF:",H),z.oR.error((null===(a=H.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||"Fehler beim Download der PDF")}},Ke=async e=>{try{var t;await L.A.post(E.Sn.CONSULTATION_INVOICES.MARK_PAID(e),{amount:(null===(t=P.find((t=>t.id===e)))||void 0===t?void 0:t.total)||0,paymentDate:(new Date).toISOString(),paymentMethod:"Manual",reference:"Manuelle Zahlung"}),z.oR.success("Rechnung als bezahlt markiert"),Ve()}catch(H){var a,r;z.oR.error((null===(a=H.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||"Fehler beim Markieren als bezahlt")}},Ze=e=>{ye((t=>{const a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a}))};(0,r.useEffect)((()=>{const e=()=>{O(window.innerWidth>1070)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,r.useEffect)((()=>(pe?d():o(),()=>{o()})),[pe,d,o]);const We=e=>{ke(e),Ne(!0)},Ye=()=>{Ne(!1),ke(null),fe({})},Je=(e,t)=>{le(e),de(t)},Qe=()=>{le([]),de([]),ce(""),xe(null)},Xe=(0,r.useMemo)((()=>{let e=P;if(Q){const t=Q.toLowerCase();e=e.filter((e=>e.invoiceNumber.toLowerCase().includes(t)||e.client.name.toLowerCase().includes(t)||e.client.company&&e.client.company.toLowerCase().includes(t)||`${e.user.firstName} ${e.user.lastName}`.toLowerCase().includes(t)))}if(se.length>0){const t={client:(e,t)=>{const a=e.client.name.toLowerCase(),r=(t.value||"").toLowerCase();return"contains"===t.operator?a.includes(r):"equals"===t.operator?e.client.name===t.value:null},status:(e,t)=>"equals"===t.operator?e.status===t.value:null,total:(e,t)=>{const a=e.total,r=parseFloat(t.value);return!isNaN(r)&&("greaterThan"===t.operator?a>r:"lessThan"===t.operator?a<r:"equals"===t.operator?Math.abs(a-r)<.01:null)}},a=(e,t)=>{switch(t){case"client":return e.client.name;case"status":return e.status;case"total":return e.total;default:return e[t]}};e=(0,$.W5)(e,se,ne,a,t)}if("cards"===ze){const t=Ge.filter((e=>_e.has(e)));e.sort(((e,a)=>{for(const r of t){const t=Ue[r]||"asc";let s,l;switch(r){case"invoiceNumber":s=e.invoiceNumber.toLowerCase(),l=a.invoiceNumber.toLowerCase();break;case"client":s=e.client.name.toLowerCase(),l=a.client.name.toLowerCase();break;case"issueDate":s=new Date(e.issueDate).getTime(),l=new Date(a.issueDate).getTime();break;case"dueDate":s=new Date(e.dueDate).getTime(),l=new Date(a.dueDate).getTime();break;case"total":s=Number(e.total),l=Number(a.total);break;case"status":s=e.status.toLowerCase(),l=a.status.toLowerCase();break;default:continue}let n=0;if(n="number"===typeof s&&"number"===typeof l?s-l:String(s).localeCompare(String(l)),"desc"===t&&(n=-n),0!==n)return n}return 0}))}else e.sort(((e,t)=>{let a,r;switch(ee.key){case"issueDate":a=new Date(e.issueDate).getTime(),r=new Date(t.issueDate).getTime();break;case"dueDate":a=new Date(e.dueDate).getTime(),r=new Date(t.dueDate).getTime();break;case"client.name":a=e.client.name,r=t.client.name;break;case"total":a=e.total,r=t.total;break;case"invoiceNumber":a=e.invoiceNumber,r=t.invoiceNumber;break;default:return 0}return a<r?"asc"===ee.direction?-1:1:a>r?"asc"===ee.direction?1:-1:0}));return e}),[P,Q,se,ne,ee,ze,Ge,_e,Ue]),et=(e,t,a)=>(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer select-none",onClick:()=>{return a&&(e=a,void te((t=>({key:e,direction:t.key===e&&"asc"===t.direction?"desc":"asc"}))));var e},children:(0,c.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,c.jsx)("span",{children:t}),a&&ee.key===a&&(0,c.jsx)("span",{children:"asc"===ee.direction?"\u2191":"\u2193"})]})},e);return B&&0===P.length?(0,c.jsxs)("div",{className:"animate-pulse",children:[(0,c.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-4"}),(0,c.jsx)("div",{className:"space-y-3",children:[...Array(5)].map(((e,t)=>(0,c.jsx)("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded"},t)))})]}):we?(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Beratungsrechnungen"}),(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsxs)("button",{onClick:()=>re(!0),className:`p-2 rounded-md ${se.length>0?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"} hover:bg-gray-200 dark:hover:bg-gray-600 relative`,title:"Filter",children:[(0,c.jsx)(m.A,{className:"h-5 w-5"}),se.length>0&&(0,c.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center",children:se.length})]}),(0,c.jsx)("button",{type:"button",className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 "+("cards"===ze?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":""),onClick:()=>Fe("table"===ze?"cards":"table"),title:l("table"===ze?"common.viewAsCards":"common.viewAsTable"),children:"table"===ze?(0,c.jsx)(u.A,{className:"h-5 w-5"}):(0,c.jsx)(g.A,{className:"h-5 w-5"})}),(0,c.jsx)("button",{onClick:()=>Oe(!0),className:"p-2 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600",title:l("cards"===ze?"tableColumn.sortAndDisplay":"tableColumn.configure"),children:(0,c.jsx)(h.A,{className:"h-5 w-5"})})]})]}),(0,c.jsxs)("div",{className:"relative mb-6",children:[(0,c.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,c.jsx)(b.A,{className:"h-5 w-5 text-gray-400"})}),(0,c.jsx)("input",{type:"text",value:Q,onChange:e=>X(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechnungen durchsuchen..."})]}),(0,c.jsx)(M.A,{tableId:Z,onSelectFilter:Je,onReset:Qe,activeFilterName:ie,selectedFilterId:oe,onFilterChange:(e,t,a,r)=>{ce(e),xe(t),Je(a,r)}}),H?(0,c.jsx)("div",{className:"text-center text-red-600 dark:text-red-400 py-6",children:H}):"table"===ze?(0,c.jsx)("div",{className:"dashboard-invoices-wrapper overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,c.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,c.jsx)("tr",{children:Ce.columnOrder.filter((e=>Re(e))).map((e=>{const t=Pe.find((t=>t.id===e));if(!t)return null;switch(e){case"expand":return(0,c.jsx)("th",{className:"px-6 py-3 text-left w-12"},"expand");case"invoiceNumber":return et("invoiceNumber",t.label,"invoiceNumber");case"client":return et("client",t.label,"client.name");case"issueDate":return et("issueDate",t.label,"issueDate");case"dueDate":return et("dueDate",t.label,"dueDate");case"total":return et("total",t.label,"total");case"status":return et("status",t.label,"status");default:return et(e,t.label)}}))})}),(0,c.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Xe.map((e=>{var t;return(0,c.jsxs)(r.Fragment,{children:[(0,c.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[Re("expand")&&(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("button",{onClick:()=>Ze(e.id),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:be.has(e.id)?"Einklappen":"Ausklappen",children:(0,c.jsx)(y.A,{className:"h-4 w-4 transition-transform "+(be.has(e.id)?"rotate-180":"")})})}),Re("invoiceNumber")&&(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-200",children:e.invoiceNumber}),Re("client")&&(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"font-medium",children:e.client.name}),e.client.company&&(0,c.jsx)("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:e.client.company})]})}),Re("issueDate")&&(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:(0,C.GP)(new Date(e.issueDate),"dd.MM.yyyy",{locale:D.de})}),Re("dueDate")&&(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:(0,C.GP)(new Date(e.dueDate),"dd.MM.yyyy",{locale:D.de})}),Re("total")&&(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:[e.currency," ",Number(e.total).toFixed(2)]}),Re("status")&&(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Be(e.status)}),Re("actions")&&(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,c.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,c.jsx)("button",{onClick:()=>We(e),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:l("common.edit"),children:(0,c.jsx)(p.A,{className:"h-5 w-5"})}),Se&&(0,c.jsx)("button",{onClick:()=>qe(e.id,e.invoiceNumber),className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300",title:"PDF herunterladen",children:(0,c.jsx)(N.A,{className:"h-5 w-5"})}),Ae&&"PAID"!==e.status&&"CANCELLED"!==e.status&&(0,c.jsx)("button",{onClick:()=>Ke(e.id),className:"text-yellow-600 hover:text-yellow-800 dark:text-yellow-400 dark:hover:text-yellow-300",title:"Als bezahlt markieren",children:(0,c.jsx)(j.A,{className:"h-5 w-5"})})]})})]}),be.has(e.id)&&(0,c.jsx)("tr",{className:"bg-gray-50 dark:bg-gray-900",children:(0,c.jsx)("td",{colSpan:Ce.columnOrder.filter((e=>Re(e))).length,className:"px-6 py-4",children:(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsx)("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Rechnungsdetails & Positionen"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Rechnungsnummer"}),(0,c.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-200",children:e.invoiceNumber})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Berater"}),(0,c.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-200",children:e.user?`${e.user.firstName} ${e.user.lastName}`:"Unbekannt"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Zahlungsbedingungen"}),(0,c.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-200",children:e.paymentTerms})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Untertotal"}),(0,c.jsxs)("div",{className:"text-sm text-gray-900 dark:text-gray-200",children:[e.currency," ",Number(e.subtotal).toFixed(2)]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"MwSt."}),(0,c.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-200",children:e.vatAmount?`${e.currency} ${Number(e.vatAmount).toFixed(2)} (${e.vatRate}%)`:"Keine MwSt."})]})]}),e.notes&&(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notizen"}),(0,c.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-200 bg-white dark:bg-gray-800 p-3 rounded border",children:e.notes})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsxs)("h5",{className:"text-md font-medium text-gray-900 dark:text-white",children:["Rechnungspositionen (",(null===(t=e.items)||void 0===t?void 0:t.length)||0,")"]}),(0,c.jsxs)("button",{onClick:()=>We(e),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[(0,c.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Positionen bearbeiten"]})]}),e.items&&e.items.length>0?(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,c.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-700",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Beschreibung"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Menge/Stunden"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Stundensatz"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Betrag"})]})}),(0,c.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.items.map((t=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:t.description}),(0,c.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:Number(t.quantity).toFixed(2)}),(0,c.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:[e.currency," ",Number(t.unitPrice).toFixed(2)]}),(0,c.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:[e.currency," ",Number(t.amount).toFixed(2)]})]},t.id)))})]})}):(0,c.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"Keine Rechnungspositionen vorhanden"})]})]})})})]},e.id)}))})]})}):(0,c.jsx)("div",{className:"dashboard-invoices-wrapper",children:0===Xe.length?(0,c.jsx)("div",{className:"text-center py-8 text-sm text-gray-500 dark:text-gray-400",children:l("invoices.noInvoicesFound")}):(0,c.jsx)(q.A,{gap:"md",children:Xe.map((e=>{var t;const a=be.has(e.id),r=[];_e.has("invoiceNumber")&&r.push({label:l("invoices.columns.invoiceNumber"),value:e.invoiceNumber,icon:(0,c.jsx)(N.A,{className:"h-4 w-4"})}),_e.has("client")&&r.push({label:l("invoices.columns.client"),value:e.client.company?`${e.client.name} (${e.client.company})`:e.client.name,icon:(0,c.jsx)(k.A,{className:"h-4 w-4"})}),_e.has("issueDate")&&r.push({label:l("invoices.columns.issueDate"),value:(0,C.GP)(new Date(e.issueDate),"dd.MM.yyyy",{locale:D.de}),icon:(0,c.jsx)(v.A,{className:"h-4 w-4"})}),_e.has("dueDate")&&r.push({label:l("invoices.columns.dueDate"),value:(0,C.GP)(new Date(e.dueDate),"dd.MM.yyyy",{locale:D.de}),icon:(0,c.jsx)(v.A,{className:"h-4 w-4"})}),_e.has("total")&&r.push({label:l("invoices.columns.total"),value:`${e.currency} ${Number(e.total).toFixed(2)}`,icon:(0,c.jsx)(j.A,{className:"h-4 w-4"})});const s={DRAFT:{label:l("invoices.status.draft"),color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},SENT:{label:l("invoices.status.sent"),color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},PAID:{label:l("invoices.status.paid"),color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"},OVERDUE:{label:l("invoices.status.overdue"),color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"},CANCELLED:{label:l("invoices.status.cancelled"),color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"}}[e.status],n=(0,c.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,c.jsx)("button",{onClick:()=>We(e),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Bearbeiten",children:(0,c.jsx)(p.A,{className:"h-5 w-5"})}),Se&&(0,c.jsx)("button",{onClick:()=>qe(e.id,e.invoiceNumber),className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300",title:"PDF herunterladen",children:(0,c.jsx)(N.A,{className:"h-5 w-5"})}),Ae&&"PAID"!==e.status&&"CANCELLED"!==e.status&&(0,c.jsx)("button",{onClick:()=>Ke(e.id),className:"text-yellow-600 hover:text-yellow-800 dark:text-yellow-400 dark:hover:text-yellow-300",title:"Als bezahlt markieren",children:(0,c.jsx)(j.A,{className:"h-5 w-5"})})]}),d=(0,c.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,c.jsx)("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Rechnungsdetails & Positionen"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Rechnungsnummer"}),(0,c.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-200",children:e.invoiceNumber})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Berater"}),(0,c.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-200",children:e.user?`${e.user.firstName} ${e.user.lastName}`:"Unbekannt"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Zahlungsbedingungen"}),(0,c.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-200",children:e.paymentTerms})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Untertotal"}),(0,c.jsxs)("div",{className:"text-sm text-gray-900 dark:text-gray-200",children:[e.currency," ",Number(e.subtotal).toFixed(2)]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"MwSt."}),(0,c.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-200",children:e.vatAmount?`${e.currency} ${Number(e.vatAmount).toFixed(2)} (${e.vatRate}%)`:"Keine MwSt."})]})]}),e.notes&&(0,c.jsxs)("div",{className:"mb-6",children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notizen"}),(0,c.jsx)("div",{className:"text-sm text-gray-900 dark:text-gray-200 bg-white dark:bg-gray-800 p-3 rounded border",children:e.notes})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsxs)("h5",{className:"text-md font-medium text-gray-900 dark:text-white",children:["Rechnungspositionen (",(null===(t=e.items)||void 0===t?void 0:t.length)||0,")"]}),(0,c.jsxs)("button",{onClick:()=>We(e),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[(0,c.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Positionen bearbeiten"]})]}),e.items&&e.items.length>0?(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,c.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-700",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Beschreibung"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Menge/Stunden"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Stundensatz"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Betrag"})]})}),(0,c.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.items.map((t=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:t.description}),(0,c.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:Number(t.quantity).toFixed(2)}),(0,c.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:[e.currency," ",Number(t.unitPrice).toFixed(2)]}),(0,c.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:[e.currency," ",Number(t.amount).toFixed(2)]})]},t.id)))})]})}):(0,c.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"Keine Rechnungspositionen vorhanden"})]})]});return(0,c.jsx)(V.A,{title:e.invoiceNumber,status:{label:s.label,color:s.color},metadata:r,actions:n,expandable:{isExpanded:a,content:d,onToggle:()=>Ze(e.id)}},e.id)}))})}),ae&&(0,c.jsx)(F.A,{columns:[{id:"client",label:l("invoices.columns.client")},{id:"status",label:l("invoices.columns.status")},{id:"total",label:`${l("invoices.columns.total")} (CHF)`}],onApply:Je,onReset:Qe,savedConditions:se,savedOperators:ne,tableId:Z}),Me&&(0,c.jsx)(R.A,{isOpen:Me,onClose:()=>Oe(!1),columns:Pe,columnOrder:Ce.columnOrder,hiddenColumns:Ce.hiddenColumns,onToggleVisibility:e=>Te(e),onReorderColumns:e=>Ee(e)}),ge&&me&&(0,c.jsx)(G,{isOpen:ge,onClose:()=>{he(!1),ue(null)},invoiceId:me,onInvoiceUpdated:Ve}),pe&&je&&(0,c.jsx)("div",{className:"fixed inset-0 overflow-hidden z-50","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true",children:(0,c.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[!x&&(0,c.jsx)("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity sidepane-overlay sidepane-backdrop",onClick:Ye}),(0,c.jsx)("div",{className:"fixed top-16 bottom-0 right-0 pl-10 max-w-full flex sidepane-panel sidepane-panel-container",style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)"},children:(0,c.jsx)("div",{className:"w-screen max-w-2xl",children:(0,c.jsxs)("div",{className:"h-full flex flex-col bg-white dark:bg-gray-800 shadow-xl overflow-y-scroll",children:[(0,c.jsx)("div",{className:"px-4 py-6 bg-gray-50 dark:bg-gray-700 sm:px-6",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",id:"slide-over-title",children:["Rechnung bearbeiten: ",je.invoiceNumber]}),(0,c.jsx)("div",{className:"ml-3 h-7 flex items-center",children:(0,c.jsxs)("button",{type:"button",className:"bg-gray-50 dark:bg-gray-700 rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:Ye,children:[(0,c.jsx)("span",{className:"sr-only",children:"Panel schlie\xdfen"}),(0,c.jsx)(f.A,{className:"h-6 w-6","aria-hidden":"true"})]})})]})}),(0,c.jsx)("div",{className:"flex-1 px-4 py-6 sm:px-6",children:(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Grundinformationen"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Rechnungsnummer"}),(0,c.jsx)("input",{type:"text",value:je.invoiceNumber,disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),(0,c.jsxs)("select",{value:je.status,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[(0,c.jsx)("option",{value:"DRAFT",children:"Entwurf"}),(0,c.jsx)("option",{value:"SENT",children:"Gesendet"}),(0,c.jsx)("option",{value:"PAID",children:"Bezahlt"}),(0,c.jsx)("option",{value:"OVERDUE",children:"\xdcberf\xe4llig"}),(0,c.jsx)("option",{value:"CANCELLED",children:"Storniert"})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Rechnungsdatum"}),(0,c.jsx)("input",{type:"date",value:je.issueDate.split("T")[0],className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"F\xe4lligkeitsdatum"}),(0,c.jsx)("input",{type:"date",value:je.dueDate.split("T")[0],className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]})]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Notizen"}),(0,c.jsx)("textarea",{rows:3,value:je.notes||"",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Zus\xe4tzliche Notizen zur Rechnung..."})]}),(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,c.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Rechnungspositionen"}),(0,c.jsxs)("button",{type:"button",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,c.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Position hinzuf\xfcgen"]})]}),(0,c.jsx)("div",{className:"space-y-3",children:null===(t=je.items)||void 0===t?void 0:t.map(((e,t)=>(0,c.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,c.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[(0,c.jsxs)("div",{className:"sm:col-span-2",children:[(0,c.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300",children:"Beschreibung"}),(0,c.jsx)("input",{type:"text",value:e.description,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300",children:"Stunden"}),(0,c.jsx)("input",{type:"number",step:"0.01",value:e.quantity,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300",children:"Stundensatz"}),(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)("input",{type:"number",step:"0.01",value:e.unitPrice,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),(0,c.jsx)("button",{type:"button",className:"mt-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Position l\xf6schen",children:(0,c.jsx)(A.A,{className:"h-4 w-4"})})]})]})]}),(0,c.jsx)("div",{className:"mt-2 text-right",children:(0,c.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Betrag: ",je.currency," ",Number(e.amount).toFixed(2)]})})]},e.id||t)))})]}),(0,c.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:(0,c.jsxs)("div",{className:"space-y-2",children:[(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Untertotal:"}),(0,c.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[je.currency," ",Number(je.subtotal).toFixed(2)]})]}),je.vatAmount&&(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["MwSt. (",je.vatRate,"%):"]}),(0,c.jsxs)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[je.currency," ",Number(je.vatAmount).toFixed(2)]})]}),(0,c.jsxs)("div",{className:"flex justify-between pt-2 border-t border-gray-200 dark:border-gray-600",children:[(0,c.jsx)("span",{className:"text-base font-medium text-gray-900 dark:text-white",children:"Total:"}),(0,c.jsxs)("span",{className:"text-base font-bold text-gray-900 dark:text-white",children:[je.currency," ",Number(je.total).toFixed(2)]})]})]})})]})}),(0,c.jsx)("div",{className:"flex-shrink-0 px-4 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:(0,c.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,c.jsx)("button",{type:"button",className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",onClick:Ye,title:"Abbrechen",children:(0,c.jsx)(f.A,{className:"h-5 w-5"})}),(0,c.jsx)("button",{type:"button",className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800",title:"Speichern",children:(0,c.jsx)(S.A,{className:"h-5 w-5"})})]})})]})})})]})})]}):(0,c.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4",children:(0,c.jsx)("div",{className:"flex",children:(0,c.jsxs)("div",{className:"ml-3",children:[(0,c.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Keine Berechtigung"}),(0,c.jsx)("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:(0,c.jsx)("p",{children:"Sie haben keine Berechtigung, Rechnungen anzuzeigen."})})]})})})};var Q=a(4538),X=a(9531),ee=a(9399);const te=[{id:"expand",label:"",shortLabel:""},{id:"reportNumber",label:"Berichtsnummer",shortLabel:"Nr."},{id:"period",label:"Zeitraum",shortLabel:"Zeitraum"},{id:"recipient",label:"Empf\xe4nger",shortLabel:"Empf\xe4nger"},{id:"totalHours",label:"Stunden",shortLabel:"Stunden"},{id:"status",label:"Status",shortLabel:"Status"},{id:"actions",label:"Aktionen",shortLabel:"Akt."}].map((e=>e.id)),ae={reportNumber:"asc",period:"desc",recipient:"asc",totalHours:"desc",status:"asc"},re={expand:[],reportNumber:["reportNumber"],period:["period"],recipient:["recipient"],totalHours:["totalHours"],status:["status"],actions:[]},se=e=>{let{selectedReportId:t}=e;const{openSidepane:a,closeSidepane:s}=(0,_.N)(),[l,n]=(0,r.useState)(window.innerWidth>1070),[d,i]=(0,r.useState)([]),[o,x]=(0,r.useState)(!0),[m,u]=(0,r.useState)(!1),[g,h]=(0,r.useState)(null),b=(0,r.useRef)(null),[j,R]=(0,r.useState)(new Set),{settings:F,isLoading:M,updateColumnOrder:O,updateHiddenColumns:P,toggleColumnVisibility:B,isColumnVisible:H,updateViewMode:G}=(0,T.F)("monthly-reports-table",{defaultColumnOrder:te,defaultHiddenColumns:[],defaultViewMode:"cards"}),$=F.viewMode||"cards",[K,Z]=(0,r.useState)((()=>ae)),W=r.useMemo((()=>(e=>{const t=[];return e.forEach((e=>{const a=re[e];a&&a.length>0&&t.push(...a)})),t})(F.columnOrder||te)),[F.columnOrder]),Y=r.useMemo((()=>(e=>{const t=new Set;return e.forEach((e=>{(re[e]||[]).forEach((e=>t.add(e)))})),t})(F.hiddenColumns||[])),[F.hiddenColumns]),J=r.useMemo((()=>new Set(W.filter((e=>!Y.has(e))))),[W,Y]);(0,r.useEffect)((()=>{const e=document.querySelector(".dashboard-monthly-reports-wrapper");e&&("cards"===$?e.classList.add("cards-mode"):e.classList.remove("cards-mode"))}),[$]);const se=r.useMemo((()=>{if("cards"===$){const e=[...d],t=W.filter((e=>J.has(e)));return e.sort(((e,a)=>{for(const r of t){const t=K[r]||"asc";let s,l;switch(r){case"reportNumber":s=e.reportNumber.toLowerCase(),l=a.reportNumber.toLowerCase();break;case"period":s=new Date(e.periodStart).getTime(),l=new Date(a.periodStart).getTime();break;case"recipient":s=e.recipient.toLowerCase(),l=a.recipient.toLowerCase();break;case"totalHours":s=Number(e.totalHours),l=Number(a.totalHours);break;case"status":s=e.status.toLowerCase(),l=a.status.toLowerCase();break;default:continue}let n=0;if(n="number"===typeof s&&"number"===typeof l?s-l:String(s).localeCompare(String(l)),"desc"===t&&(n=-n),0!==n)return n}return 0})),e}return d}),[d,$,W,J,K]),[le,ne]=(0,r.useState)(!1),[de,ie]=(0,r.useState)(null),[ce,oe]=(0,r.useState)(""),[xe,me]=(0,r.useState)([]),[ue,ge]=(0,r.useState)(!1);(0,r.useEffect)((()=>{he(),be()}),[]),(0,r.useEffect)((()=>{const e=()=>{n(window.innerWidth>1070)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,r.useEffect)((()=>(le?a():s(),()=>{s()})),[le,a,s]),(0,r.useEffect)((()=>{t&&d.length>0&&b.current&&(b.current.scrollIntoView({behavior:"smooth",block:"center"}),b.current.style.backgroundColor="#dbeafe",setTimeout((()=>{b.current&&(b.current.style.backgroundColor="")}),2e3))}),[t,d]);const he=async()=>{try{x(!0);const e=await L.A.get(E.Sn.MONTHLY_CONSULTATION_REPORTS.BASE);i(e.data)}catch(e){console.error("Fehler beim Laden der Monatsberichte:",e),z.oR.error("Fehler beim Laden der Monatsberichte")}finally{x(!1)}},be=async()=>{try{const e=await L.A.get(E.Sn.MONTHLY_CONSULTATION_REPORTS.CHECK_UNBILLED);h(e.data)}catch(e){console.error("Fehler beim Pr\xfcfen der nicht-abgerechneten Beratungen:",e)}},ye=async e=>{try{const t=await L.A.get(E.Sn.MONTHLY_CONSULTATION_REPORTS.PDF(e.id),{responseType:"blob"}),a=new Blob([t.data],{type:"application/pdf"}),r=window.URL.createObjectURL(a),s=document.createElement("a");s.href=r,s.download=`${e.reportNumber}.pdf`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)}catch(t){z.oR.error("Fehler beim Download des PDFs")}},pe=e=>{R((t=>{const a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a}))},Ne=async(e,t,a)=>{ie(e),oe(t),ne(!0),await ke(e,a)},je=()=>{ne(!1),ie(null),oe(""),me([])},ke=async(e,t)=>{try{ge(!0);const a=d.find((e=>e.id===t));if(!a)return;const r=await L.A.get(`${E.Sn.CONSULTATIONS.BASE}?clientId=${e}&from=${a.periodStart}&to=${a.periodEnd}`);me(r.data)}catch(a){console.error("Fehler beim Laden der Client-Beratungen:",a),z.oR.error("Fehler beim Laden der Beratungen")}finally{ge(!1)}},ve=e=>{switch(e){case"GENERATED":return(0,c.jsx)(I.A,{className:"h-5 w-5 text-blue-500"});case"SENT":return(0,c.jsx)(Q.A,{className:"h-5 w-5 text-green-500"});case"ARCHIVED":return(0,c.jsx)(X.A,{className:"h-5 w-5 text-gray-500"});default:return(0,c.jsx)(I.A,{className:"h-5 w-5 text-gray-500"})}},fe=e=>{switch(e){case"GENERATED":return"Erstellt";case"SENT":return"Versendet";case"ARCHIVED":return"Archiviert";default:return e}};return o?(0,c.jsx)("div",{className:"p-6",children:(0,c.jsxs)("div",{className:"animate-pulse",children:[(0,c.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-4"}),(0,c.jsx)("div",{className:"space-y-3",children:[...Array(3)].map(((e,t)=>(0,c.jsx)("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded"},t)))})]})}):(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,c.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Monatsabrechnungen"})}),(null===g||void 0===g?void 0:g.hasUnbilledConsultations)&&(0,c.jsx)("div",{className:"mb-6 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:(0,c.jsxs)("div",{className:"flex items-start",children:[(0,c.jsx)(ee.A,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5 mr-3"}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Nicht-abgerechnete Beratungen gefunden"}),(0,c.jsxs)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:["Sie haben ",g.count," nicht-abgerechnete Beratungen. Erstellen Sie einen Monatsbericht f\xfcr diese Zeitr\xe4ume."]}),(0,c.jsxs)("button",{onClick:async()=>{console.log("DEBUG: handleGenerateReport called");try{const e=await L.A.post(E.Sn.MONTHLY_CONSULTATION_REPORTS.GENERATE_AUTOMATIC);console.log("DEBUG: API response:",e),await he(),z.oR.success("Monatsbericht erfolgreich erstellt")}catch(s){var e,t,a,r;console.error("DEBUG: Error generating report:",s),console.log("DEBUG: Error details:",{status:null===(e=s.response)||void 0===e?void 0:e.status,data:null===(t=s.response)||void 0===t?void 0:t.data,message:s.message}),z.oR.error((null===(a=s.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||"Fehler beim Erstellen des Monatsberichts")}},disabled:m,className:"mt-3 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-yellow-800 dark:text-yellow-200 bg-yellow-100 dark:bg-yellow-800 hover:bg-yellow-200 dark:hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50",children:[(0,c.jsx)(w.A,{className:"h-4 w-4 mr-2"}),m?"Erstelle...":"Monatsbericht erstellen"]})]})]})}),"table"===$?(0,c.jsx)("div",{className:"dashboard-monthly-reports-wrapper bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,c.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 text-left w-12"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Berichtsnummer"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Zeitraum"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Empf\xe4nger"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Stunden"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),(0,c.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Aktionen"})]})}),(0,c.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map((e=>{var a;return(0,c.jsxs)(r.Fragment,{children:[(0,c.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",ref:t===e.id?b:null,children:[(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("button",{onClick:()=>pe(e.id),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:j.has(e.id)?"Einklappen":"Ausklappen",children:(0,c.jsx)(y.A,{className:"h-4 w-4 transition-transform "+(j.has(e.id)?"rotate-180":"")})})}),(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,c.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.reportNumber}),(0,c.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:(0,C.GP)(new Date(e.generatedAt),"dd.MM.yyyy HH:mm",{locale:D.de})})]}),(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[(0,C.GP)(new Date(e.periodStart),"dd.MM.yyyy",{locale:D.de})," - "," ",(0,C.GP)(new Date(e.periodEnd),"dd.MM.yyyy",{locale:D.de})]}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.recipient}),(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[Number(e.totalHours).toFixed(2)," h"]}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsxs)("div",{className:"flex items-center",children:[ve(e.status),(0,c.jsx)("span",{className:"ml-2 text-sm text-gray-900 dark:text-white",children:fe(e.status)})]})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,c.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,c.jsx)("button",{onClick:()=>ye(e),className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300",title:"PDF herunterladen",children:(0,c.jsx)(N.A,{className:"h-5 w-5"})})})})]}),j.has(e.id)&&(0,c.jsx)("tr",{className:"bg-gray-50 dark:bg-gray-900",children:(0,c.jsx)("td",{colSpan:7,className:"px-6 py-4",children:(0,c.jsx)("div",{className:"space-y-4",children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("h5",{className:"text-md font-medium text-gray-900 dark:text-white mb-4",children:["Abrechnungspositionen (",(null===(a=e.items)||void 0===a?void 0:a.length)||0,")"]}),e.items&&e.items.length>0?(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,c.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-700",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Client"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Anzahl Beratungen"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Stunden"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Aktionen"})]})}),(0,c.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.items.map((t=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:t.clientName}),(0,c.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:t.consultationCount}),(0,c.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200 font-semibold",children:[Number(t.totalHours).toFixed(2)," h"]}),(0,c.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:(0,c.jsx)("button",{onClick:()=>Ne(t.clientId,t.clientName,e.id),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Beratungen bearbeiten",children:(0,c.jsx)(p.A,{className:"h-4 w-4"})})})]},t.id)))})]})}):(0,c.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"Keine Abrechnungspositionen vorhanden"})]})})})})]},e.id)}))})]})}):(0,c.jsx)("div",{className:"dashboard-monthly-reports-wrapper",children:0===se.length?(0,c.jsx)("div",{className:"text-center py-8 text-sm text-gray-500 dark:text-gray-400",children:"Keine Monatsberichte gefunden"}):(0,c.jsx)(q.A,{gap:"md",children:se.map((e=>{var t;const a=j.has(e.id),r=[];J.has("reportNumber")&&r.push({label:"Berichtsnummer",value:e.reportNumber,icon:(0,c.jsx)(N.A,{className:"h-4 w-4"})}),J.has("period")&&r.push({label:"Zeitraum",value:`${(0,C.GP)(new Date(e.periodStart),"dd.MM.yyyy",{locale:D.de})} - ${(0,C.GP)(new Date(e.periodEnd),"dd.MM.yyyy",{locale:D.de})}`,icon:(0,c.jsx)(v.A,{className:"h-4 w-4"})}),J.has("recipient")&&r.push({label:"Empf\xe4nger",value:e.recipient,icon:(0,c.jsx)(k.A,{className:"h-4 w-4"})}),J.has("totalHours")&&r.push({label:"Stunden",value:`${Number(e.totalHours).toFixed(2)} h`,icon:(0,c.jsx)(I.A,{className:"h-4 w-4"})});const s={GENERATED:{label:"Erstellt",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"},SENT:{label:"Versendet",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"},ARCHIVED:{label:"Archiviert",color:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}}[e.status],l=(0,c.jsx)("div",{className:"flex items-center justify-end space-x-2",children:(0,c.jsx)("button",{onClick:()=>ye(e),className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300",title:"PDF herunterladen",children:(0,c.jsx)(N.A,{className:"h-5 w-5"})})}),n=(0,c.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,c.jsxs)("h5",{className:"text-md font-medium text-gray-900 dark:text-white mb-4",children:["Abrechnungspositionen (",(null===(t=e.items)||void 0===t?void 0:t.length)||0,")"]}),e.items&&e.items.length>0?(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,c.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-700",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Client"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Anzahl Beratungen"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Stunden"}),(0,c.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Aktionen"})]})}),(0,c.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.items.map((t=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:t.clientName}),(0,c.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:t.consultationCount}),(0,c.jsxs)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200 font-semibold",children:[Number(t.totalHours).toFixed(2)," h"]}),(0,c.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-gray-200",children:(0,c.jsx)("button",{onClick:()=>Ne(t.clientId,t.clientName,e.id),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Beratungen bearbeiten",children:(0,c.jsx)(p.A,{className:"h-4 w-4"})})})]},t.id)))})]})}):(0,c.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"Keine Abrechnungspositionen vorhanden"})]});return(0,c.jsx)(V.A,{title:e.reportNumber,subtitle:(0,C.GP)(new Date(e.generatedAt),"dd.MM.yyyy HH:mm",{locale:D.de}),status:{label:s.label,color:s.color},metadata:r,actions:l,expandable:{isExpanded:a,content:n,onToggle:()=>pe(e.id)}},e.id)}))})}),le&&de&&(0,c.jsx)("div",{className:"fixed inset-0 overflow-hidden z-50","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true",children:(0,c.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[!l&&(0,c.jsx)("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity sidepane-overlay sidepane-backdrop",onClick:je}),(0,c.jsx)("div",{className:"fixed top-16 bottom-0 right-0 pl-10 max-w-full flex sidepane-panel sidepane-panel-container",style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)"},children:(0,c.jsx)("div",{className:"w-screen max-w-3xl",children:(0,c.jsxs)("div",{className:"h-full flex flex-col bg-white dark:bg-gray-800 shadow-xl overflow-y-scroll",children:[(0,c.jsx)("div",{className:"px-4 py-6 bg-gray-50 dark:bg-gray-700 sm:px-6",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",id:"slide-over-title",children:["Beratungen bearbeiten: ",ce]}),(0,c.jsx)("div",{className:"ml-3 h-7 flex items-center",children:(0,c.jsxs)("button",{type:"button",className:"bg-gray-50 dark:bg-gray-700 rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:je,children:[(0,c.jsx)("span",{className:"sr-only",children:"Panel schlie\xdfen"}),(0,c.jsx)(f.A,{className:"h-6 w-6","aria-hidden":"true"})]})})]})}),(0,c.jsx)("div",{className:"flex-1 px-4 py-6 sm:px-6",children:(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:(0,c.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:["Hier k\xf6nnen Sie die einzelnen Beratungen f\xfcr ",(0,c.jsx)("strong",{children:ce})," bearbeiten, l\xf6schen oder neue hinzuf\xfcgen."]})}),(0,c.jsxs)("div",{className:"flex justify-between items-center",children:[(0,c.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:["Beratungen (",xe.length,")"]}),(0,c.jsxs)("button",{type:"button",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,c.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Beratung hinzuf\xfcgen"]})]}),ue?(0,c.jsxs)("div",{className:"text-center py-4",children:[(0,c.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,c.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"Lade Beratungen..."})]}):xe.length>0?(0,c.jsx)("div",{className:"space-y-3",children:xe.map((e=>(0,c.jsx)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300",children:"Startzeit"}),(0,c.jsx)("input",{type:"datetime-local",value:e.startTime?new Date(e.startTime).toISOString().slice(0,16):"",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300",children:"Endzeit"}),(0,c.jsx)("input",{type:"datetime-local",value:e.endTime?new Date(e.endTime).toISOString().slice(0,16):"",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300",children:"Notizen"}),(0,c.jsx)("input",{type:"text",value:e.notes||"",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Beratungsnotizen..."})]})]}),(0,c.jsxs)("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Dauer: ",e.endTime?(0,U.P0)(e.startTime,e.endTime):"L\xe4uft..."]})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,c.jsx)("button",{type:"button",className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300",title:"Speichern",children:(0,c.jsx)(S.A,{className:"h-4 w-4"})}),(0,c.jsx)("button",{type:"button",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"L\xf6schen",children:(0,c.jsx)(A.A,{className:"h-4 w-4"})})]})]})},e.id)))}):(0,c.jsxs)("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:[(0,c.jsx)(I.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-300 dark:text-gray-600"}),(0,c.jsx)("p",{children:"Keine Beratungen f\xfcr diesen Client gefunden"})]})]})}),(0,c.jsx)("div",{className:"flex-shrink-0 px-4 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:(0,c.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,c.jsx)("button",{type:"button",className:"bg-white dark:bg-gray-600 py-2 px-4 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:je,children:"Schlie\xdfen"}),(0,c.jsx)("button",{type:"button",className:"bg-blue-600 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Alle \xc4nderungen speichern"})]})})]})})})]})})]})};var le=a(2704),ne=a(1369);const de=()=>{var e;const{t:t}=(0,s.Bd)(),a=(0,l.zy)(),[n,i]=(0,r.useState)("invoices"),[o,m]=(0,r.useState)(null),[u,g]=(0,r.useState)(null);(0,r.useEffect)((()=>{const e=new URLSearchParams(a.search),t=e.get("tab"),r=e.get("invoiceId"),s=e.get("reportId");if(t&&["invoices","monthly-reports","payroll"].includes(t)&&i(t),r){const e=parseInt(r,10);isNaN(e)||m(e)}if(s){const e=parseInt(s,10);isNaN(e)||g(e)}}),[a.search]);const h=[{id:"invoices",name:t("payroll.tabs.invoices"),icon:le.A,component:(0,c.jsx)(J,{})},{id:"monthly-reports",name:t("payroll.tabs.monthlyReports"),icon:ne.A,component:(0,c.jsx)(se,{})},{id:"payroll",name:t("payroll.tabs.payroll"),icon:d.A,component:(0,c.jsx)(x,{})}];return(0,c.jsx)("div",{className:"min-h-screen dark:bg-gray-900",children:(0,c.jsx)("div",{className:"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700",children:[(0,c.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,c.jsx)("nav",{className:"-mb-px flex space-x-8 px-6 pt-6",children:h.map((e=>{const t=e.icon;return(0,c.jsxs)("button",{onClick:()=>i(e.id),className:"group inline-flex items-center pb-4 px-1 border-b-2 font-medium text-sm "+(n===e.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"),children:[(0,c.jsx)(t,{className:"h-5 w-5 mr-2"}),e.name]},e.id)}))})}),(0,c.jsx)("div",{className:"p-6",children:null===(e=h.find((e=>e.id===n)))||void 0===e?void 0:e.component})]})})})}},6400:(e,t,a)=>{a.d(t,{J1:()=>l,W5:()=>s});const r=(e,t)=>{const{operator:a,value:r}=t;if(null==e&&null==r)return"equals"===a;if(null==e||null==r)return"notEquals"===a;const s=String(e).toLowerCase(),l=String(r).toLowerCase();switch(a){case"equals":return s===l;case"notEquals":return s!==l;case"contains":return s.includes(l);case"startsWith":return s.startsWith(l);case"endsWith":return s.endsWith(l);case"before":case"after":{const t=new Date(e),s=new Date(r);return!isNaN(t.getTime())&&!isNaN(s.getTime())&&("before"===a?t<s:t>s)}case"greaterThan":case"lessThan":{const t=parseFloat(String(e)),s=parseFloat(String(r));return!isNaN(t)&&!isNaN(s)&&("greaterThan"===a?t>s:t<s)}default:return!0}},s=(e,t,a,s,l)=>0===t.length?e:e.filter((e=>{let n=!0;for(let d=0;d<t.length;d++){const i=t[d];let c=!1;if(l&&l[i.column]){const t=l[i.column](e,i);if(null!==t)c=t;else{const t=s(e,i.column);c=r(t,i)}}else{const t=s(e,i.column);c=r(t,i)}if(0===d)n=c;else{n="AND"===(a[d-1]||"AND")?n&&c:n||c}}return n})),l=(e,t)=>{if(!e)return!1;const a=new Date(e);if(isNaN(a.getTime()))return!1;const r=new Date(t.value);if(isNaN(r.getTime()))return!1;switch(t.operator){case"equals":return a.toDateString()===r.toDateString();case"before":return a<r;case"after":return a>r;default:return!0}}}}]);
//# sourceMappingURL=481.01cf4d18.chunk.js.map