{"version":3,"file":"static/js/806.a6dc4a84.chunk.js","mappings":"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","sources":["../node_modules/@heroicons/react/24/outline/esm/ChevronDownIcon.js","../node_modules/@heroicons/react/24/outline/esm/ChartBarIcon.js","../node_modules/@heroicons/react/24/outline/esm/UserIcon.js","hooks/useLanguage.ts","../node_modules/@heroicons/react/24/outline/esm/BuildingOfficeIcon.js","../node_modules/@heroicons/react/24/outline/esm/FunnelIcon.js","../node_modules/@heroicons/react/24/outline/esm/PlusIcon.js","../node_modules/@heroicons/react/24/outline/esm/ShieldCheckIcon.js","components/UserManagementTab.tsx","components/RoleManagementTab.tsx","../node_modules/@heroicons/react/24/outline/esm/UserPlusIcon.js","../node_modules/@heroicons/react/24/outline/esm/EnvelopeIcon.js","components/organization/CreateOrganizationModal.tsx","components/organization/JoinOrganizationModal.tsx","components/organization/OrganizationSettings.tsx","../node_modules/@heroicons/react/24/outline/esm/XCircleIcon.js","components/organization/ProcessJoinRequestModal.tsx","components/organization/JoinRequestsList.tsx","pages/UserManagement.tsx"],"sourcesContent":["import * as React from \"react\";\nfunction ChevronDownIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m19.5 8.25-7.5 7.5-7.5-7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChevronDownIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ChartBarIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChartBarIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction UserIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(UserIcon);\nexport default ForwardRef;","import { useTranslation } from 'react-i18next';\r\nimport { useLanguageContext } from '../contexts/LanguageContext.tsx';\r\n\r\nexport const useLanguage = () => {\r\n  const { t, i18n } = useTranslation();\r\n  const languageContext = useLanguageContext();\r\n\r\n  return {\r\n    t,\r\n    i18n,\r\n    activeLanguage: languageContext.activeLanguage,\r\n    organizationLanguage: languageContext.organizationLanguage,\r\n    setUserLanguage: languageContext.setUserLanguage,\r\n    setOrganizationLanguage: languageContext.setOrganizationLanguage,\r\n    isLoading: languageContext.isLoading\r\n  };\r\n};\r\n\r\n\r\n\r\n","import * as React from \"react\";\nfunction BuildingOfficeIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(BuildingOfficeIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction FunnelIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(FunnelIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PlusIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 4.5v15m7.5-7.5h-15\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PlusIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ShieldCheckIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ShieldCheckIcon);\nexport default ForwardRef;","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { userApi, roleApi } from '../api/apiClient.ts';\nimport { User, Role } from '../types/interfaces.ts';\nimport { CheckIcon, PlusIcon, PencilIcon, DocumentTextIcon, UserCircleIcon, ShieldCheckIcon, XMarkIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport useMessage from '../hooks/useMessage.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport IdentificationDocumentList from './IdentificationDocumentList.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface UserManagementTabProps {\n  onError: (error: string) => void;\n}\n\n// Lnder und Sprachen werden dynamisch aus bersetzungen geladen\n\n// Definiere Rollen, die immer vorhanden sein sollten (z.B. Admin-Rolle)\nconst fixedRoles = [1, 2, 999]; // Admin (1), User (2) und Hamburger (999) sind fixe Rollen\n\n// Gemeinsame Debug-Komponente hinzufgen\nconst RoleDebugInfo = ({ title, data }: { title: string, data: any }) => (\n  <div className=\"mb-2 p-2 border border-gray-300 rounded bg-gray-50\">\n    <h5 className=\"font-bold text-sm\">{title}</h5>\n    <pre className=\"text-xs overflow-auto max-h-24\">\n      {JSON.stringify(data, null, 2)}\n    </pre>\n  </div>\n);\n\nconst UserManagementTab = ({ onError }: UserManagementTabProps): JSX.Element => {\n  const { t } = useTranslation();\n  \n  // Lnder fr die Auswahl (dynamisch aus bersetzungen)\n  const COUNTRIES = [\n    { code: 'CO', name: t('countries.CO') },\n    { code: 'CH', name: t('countries.CH') },\n    { code: 'DE', name: t('countries.DE') },\n    { code: 'AT', name: t('countries.AT') }\n  ];\n\n  // Lnder fr die Payroll-Auswahl (dynamisch aus bersetzungen)\n  const PAYROLL_COUNTRIES = [\n    { code: 'CH', name: t('countries.CH') },\n    { code: 'CO', name: t('countries.CO') }\n  ];\n\n  // Sprachen fr die Auswahl (dynamisch aus bersetzungen)\n  const LANGUAGES = [\n    { code: 'es', name: t('languages.es') },\n    { code: 'de', name: t('languages.de') },\n    { code: 'en', name: t('languages.en') }\n  ];\n  \n  // Benutzer-States\n  const [users, setUsers] = useState<User[]>([]);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [userFormData, setUserFormData] = useState<Partial<User>>({});\n  const [isEditingUser, setIsEditingUser] = useState(false);\n  const [selectedRoles, setSelectedRoles] = useState<number[]>([]);\n  const [isDebugMode, setIsDebugMode] = useState(false);\n  const [roleWarning, setRoleWarning] = useState<string | null>(null);\n  const { showMessage } = useMessage();\n  const { isAdmin } = usePermissions();\n  \n  // Neuer State fr Rollen\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [loadingRoles, setLoadingRoles] = useState(false);\n  \n  // Neuer State fr die aktive Unterseite\n  const [activeUserTab, setActiveUserTab] = useState<'details' | 'documents' | 'roles'>('details');\n  \n  // State fr Benutzererstellung\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n  const [isMobile, setIsMobile] = useState<boolean>(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [newUserFormData, setNewUserFormData] = useState({\n    email: '',\n    password: '',\n    firstName: '',\n    lastName: ''\n  });\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isCreateModalOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isCreateModalOpen, openSidepane, closeSidepane]);\n\n  // Initialisierung - Laden von Benutzern\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  // Benutzerdaten laden - Verwende gefilterten Endpoint, damit nur Benutzer der eigenen Organisation angezeigt werden\n  const fetchUsers = async () => {\n    try {\n      const response = await userApi.getAll();\n      setUsers(response.data);\n    } catch (err) {\n      handleError(err);\n    }\n  };\n  \n  // Rollen laden - Wird erst aufgerufen, wenn ein Benutzer ausgewhlt wurde\n  const fetchRoles = async () => {\n    try {\n      setLoadingRoles(true);\n      \n      // Fallback-Rollen fr den Notfall bereithalten\n      const fallbackRoles = [\n        { id: 1, name: 'admin', description: 'Administrator mit allen Rechten', permissions: [] },\n        { id: 2, name: 'user', description: 'Standardbenutzer', permissions: [] },\n        { id: 999, name: 'hamburger', description: 'Hamburger-Rolle fr neue Benutzer', permissions: [] }\n      ];\n      \n      try {\n        const response = await roleApi.getAll();\n        if (response.data && Array.isArray(response.data) && response.data.length > 0) {\n          setRoles(response.data);\n          console.log(`${response.data.length} Rollen erfolgreich geladen`);\n        } else {\n          console.warn('Keine Rollen vom Server erhalten, verwende Fallback');\n          setRoles(fallbackRoles);\n        }\n      } catch (error) {\n        console.warn('Fehler beim Laden der Rollen, verwende Fallback:', error);\n        setRoles(fallbackRoles);\n      }\n    } finally {\n      setLoadingRoles(false);\n    }\n  };\n\n  // Detaillierte Benutzerdaten laden\n  const fetchUserDetails = async (userId: number) => {\n    try {\n      if (!userId || isNaN(userId)) {\n        setSelectedUser(null);\n        return;\n      }\n      \n      console.log('Lade Benutzerdetails fr ID:', userId);\n      const response = await userApi.getById(userId);\n      \n      const userData = {\n        ...response.data,\n        birthday: response.data.birthday ? new Date(response.data.birthday).toISOString().split('T')[0] : null\n      };\n      \n      // Extrahiere Rollen-IDs aus der verschachtelten Struktur\n      let roleIds: number[] = [];\n      \n      if (response.data.roles && Array.isArray(response.data.roles)) {\n        console.log('Rollenstruktur (Typ):', typeof response.data.roles, 'Lnge:', response.data.roles.length);\n        \n        // Struktur: roles: [{ role: { id, name, ... } }]\n        if (response.data.roles.length > 0 && response.data.roles[0].role) {\n          roleIds = response.data.roles.map(userRole => userRole.role.id);\n          console.log('Extrahierte Rollen-IDs aus verschachtelter Struktur:', roleIds);\n        }\n        // Fallback fr andere Formate\n        else if (response.data.roles.length > 0) {\n          if (typeof response.data.roles[0] === 'number') {\n            roleIds = response.data.roles;\n          } else if (response.data.roles[0].roleId) {\n            roleIds = response.data.roles.map(role => role.roleId);\n          } else if (response.data.roles[0].id) {\n            roleIds = response.data.roles.map(role => role.id);\n          }\n        }\n      } else {\n        console.warn('Rollen fehlen oder sind kein Array:', response.data.roles);\n      }\n      \n      // Wenn keine Rollen gefunden wurden, probieren wir, diese aus roles in der Response direkt zu extrahieren\n      if (roleIds.length === 0 && response.data.role) {\n        console.log('Versuche Rollen aus role-Eigenschaft zu extrahieren:', response.data.role);\n        if (Array.isArray(response.data.role)) {\n          roleIds = response.data.role.map((r: any) => r.id);\n        } else if (typeof response.data.role === 'object' && response.data.role !== null) {\n          roleIds = [response.data.role.id];\n        }\n      }\n      \n      console.log('Endgltige extrahierte Rollen-IDs:', roleIds);\n      \n      setSelectedUser(userData);\n      setUserFormData(userData);\n      setSelectedRoles(roleIds);\n      \n      // Rollen nur einmal laden, wenn sie noch nicht geladen wurden\n      if (roles.length === 0) {\n        await fetchRoles();\n      }\n    } catch (err) {\n      console.error('Fehler beim Laden der Benutzerdetails:', err);\n      handleError(err);\n    }\n  };\n\n  // Fehlerbehandlung\n  const handleError = (err: any) => {\n    let message = 'Ein Fehler ist aufgetreten';\n    if (err.response?.data?.message) {\n      message = err.response.data.message;\n    } else if (err instanceof Error) {\n      message = err.message;\n    }\n    \n    // Fehler \"Ungltige Rollen-ID\" nicht weitergeben, wenn kein Benutzer ausgewhlt ist\n    if (message.includes('Ungltige Rollen-ID') && !selectedUser) {\n      console.warn('Fehler unterdrckt, da kein Benutzer ausgewhlt ist:', message);\n      return;\n    }\n    \n    onError(message);\n  };\n\n  // Handler fr Auswahl eines Benutzers\n  const handleUserSelect = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    const userId = parseInt(event.target.value, 10);\n    if (userId && !isNaN(userId)) {\n      fetchUserDetails(userId);\n    } else {\n      setSelectedUser(null);\n      setUserFormData({});\n      setSelectedRoles([]);\n    }\n  };\n\n  // Erweitere den handleUserInputChange\n  const handleUserInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value, type } = e.target;\n    let finalValue: string | number | null = value;\n    \n    // Korrekte Typenkonvertierung fr numerische Felder\n    if (type === 'number') {\n      // Wenn das Feld leer ist, setzen wir null statt NaN\n      finalValue = value === '' ? null : Number(value);\n    }\n    \n    setUserFormData({ ...userFormData, [name]: finalValue });\n    setIsEditingUser(true); // Aktiviere Edit-Modus sobald etwas gendert wird\n  };\n\n  // Abbrechen der Bearbeitung\n  const handleCancelEdit = () => {\n    if (selectedUser) {\n      setUserFormData({\n        ...selectedUser,\n        birthday: selectedUser.birthday ? new Date(selectedUser.birthday).toISOString().split('T')[0] : null\n      });\n    }\n    setIsEditingUser(false);\n  };\n\n  // Speichern der Benutzerdaten\n  const handleUserSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!selectedUser || !selectedUser.id) {\n      onError('Kein Benutzer ausgewhlt');\n      showMessage('Kein Benutzer ausgewhlt', 'error');\n      return;\n    }\n\n    try {\n      // Validierung\n      if (!userFormData.username?.trim()) throw new Error('Benutzername ist erforderlich');\n      if (!userFormData.email?.trim()) throw new Error('E-Mail ist erforderlich');\n      if (!userFormData.firstName?.trim()) throw new Error('Vorname ist erforderlich');\n      if (!userFormData.lastName?.trim()) throw new Error('Nachname ist erforderlich');\n\n      // Bereite die Daten korrekt vor\n      const dataToSend = {\n        ...userFormData,\n        // Korrekte Behandlung von numerischen Werten\n        salary: userFormData.salary === null || userFormData.salary === undefined || userFormData.salary === '' as any\n          ? null \n          : typeof userFormData.salary === 'string' \n            ? parseFloat(userFormData.salary) \n            : userFormData.salary,\n        normalWorkingHours: userFormData.normalWorkingHours === null || userFormData.normalWorkingHours === undefined || userFormData.normalWorkingHours === '' as any\n          ? 7.6 \n          : typeof userFormData.normalWorkingHours === 'string' \n            ? parseFloat(userFormData.normalWorkingHours) \n            : userFormData.normalWorkingHours,\n        hourlyRate: userFormData.hourlyRate === null || userFormData.hourlyRate === undefined || userFormData.hourlyRate === '' as any\n          ? null \n          : typeof userFormData.hourlyRate === 'string' \n            ? userFormData.hourlyRate  // Keine Konvertierung fr Decimal-Werte, da sie als Strings bergeben werden sollten\n            : userFormData.hourlyRate.toString(),  // Konvertierung zu String fr Decimal-Werte\n        monthlySalary: userFormData.monthlySalary === null || userFormData.monthlySalary === undefined || userFormData.monthlySalary === '' as any\n          ? null \n          : typeof userFormData.monthlySalary === 'string' \n            ? parseFloat(userFormData.monthlySalary) \n            : userFormData.monthlySalary,\n        birthday: userFormData.birthday || null\n      };\n\n      console.log('Sende Daten zum Server:', dataToSend);\n\n      // Update Benutzerdaten\n      const response = await userApi.update(selectedUser.id, dataToSend);\n\n      if (response.data) {\n        const updatedData = {\n          ...response.data,\n          birthday: response.data.birthday ? new Date(response.data.birthday).toISOString().split('T')[0] : null\n        };\n        setSelectedUser(updatedData);\n        setUserFormData({\n          ...updatedData,\n          birthday: updatedData.birthday ? new Date(updatedData.birthday).toISOString().split('T')[0] : null\n        });\n        \n        // Optimistisches Update: User in Liste aktualisieren statt vollstndigem Reload\n        setUsers(prevUsers => \n          prevUsers.map(user => \n            user.id === updatedData.id ? updatedData : user\n          )\n        );\n        \n        showMessage('Benutzerprofil erfolgreich aktualisiert', 'success');\n        setIsEditingUser(false);\n        // fetchUsers() entfernt - kein vollstndiger Reload mehr\n      }\n    } catch (err) {\n      console.error('Fehler beim Speichern der Benutzerdaten:', err);\n      // Bei Fehler: Rollback durch vollstndiges Reload\n      fetchUsers();\n      if (err.response?.status === 400) {\n        const errorMsg = `Validierungsfehler: ${err.response?.data?.message || 'Bitte berprfe die eingegebenen Daten'}`;\n        onError(errorMsg);\n        showMessage(errorMsg, 'error');\n      } else if (err.response?.status === 404) {\n        onError('Benutzer wurde nicht gefunden');\n        showMessage('Benutzer wurde nicht gefunden', 'error');\n      } else {\n        handleError(err);\n      }\n    }\n  };\n\n  // Toggle Rolle fr einen Benutzer (hinzufgen/entfernen)\n  const toggleRole = async (roleId: number) => {\n    if (!roleId || !selectedUser) return;\n    \n    // Prfe, ob es sich um eine fixe Rolle handelt - Nur fr Admin-Benutzer (ID: 1) sind Admin-Rollen (ID: 1) nicht entfernbar\n    if (roleId === 1 && selectedUser.id === 1 && selectedRoles.includes(roleId)) {\n      showMessage('Die Admin-Rolle kann vom Admin-Benutzer nicht entfernt werden', 'warning');\n      return;\n    }\n    \n    try {\n      console.log('Toggle Rolle:', roleId, 'fr Benutzer:', selectedUser.id);\n      console.log('Aktuelle ausgewhlte Rollen:', selectedRoles);\n      \n      // berprfen, ob die Rolle bereits zugewiesen ist\n      const isRoleSelected = selectedRoles.includes(roleId);\n      \n      const newSelectedRoles = isRoleSelected\n        ? selectedRoles.filter(id => id !== roleId)\n        : [...selectedRoles, roleId];\n      \n      console.log('Neue ausgewhlte Rollen:', newSelectedRoles);\n      \n      // Optimistisches UI-Update\n      setSelectedRoles(newSelectedRoles);\n      \n      // API-Aufruf zur Aktualisierung der Rollen\n      console.log('Sende Rollenaktualisierung an API:', { userId: selectedUser.id, roleIds: newSelectedRoles });\n      const response = await userApi.updateRoles(selectedUser.id, newSelectedRoles);\n      console.log('API-Antwort bei Rollenaktualisierung:', response.data);\n      \n      // Benutzer nach dem Update neu laden\n      await fetchUserDetails(selectedUser.id);\n      \n      // Erfolgsmeldung anzeigen mit showMessage statt setUserSuccess\n      showMessage(\n        isRoleSelected\n          ? `Rolle erfolgreich entfernt`\n          : `Rolle erfolgreich zugewiesen`,\n        'success'\n      );\n    } catch (error) {\n      // Bei Fehler auf vorherigen Zustand zurcksetzen\n      console.error('Fehler beim Aktualisieren der Rollen:', error);\n      fetchUserDetails(selectedUser.id);\n      handleError(error);\n      showMessage('Fehler beim Aktualisieren der Rollen', 'error');\n    }\n  };\n\n  // Initialisiere FormData wenn Benutzer ausgewhlt wird\n  useEffect(() => {\n    if (selectedUser) {\n      setUserFormData({\n        ...selectedUser,\n        birthday: selectedUser.birthday ? new Date(selectedUser.birthday).toISOString().split('T')[0] : null\n      });\n      setIsEditingUser(false); // Starte im Read-Only Modus\n    }\n  }, [selectedUser]);\n\n  // Handler fr neue Benutzer-Formular\n  const handleNewUserInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setNewUserFormData({ ...newUserFormData, [name]: value });\n  };\n\n  // Neuen Benutzer erstellen\n  const handleCreateUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Validierung\n    if (!newUserFormData.email || !newUserFormData.password || !newUserFormData.firstName || !newUserFormData.lastName) {\n      showMessage('Bitte fllen Sie alle Felder aus', 'error');\n      return;\n    }\n\n    // E-Mail-Format validieren\n    if (!newUserFormData.email.match(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/)) {\n      showMessage('Ungltiges E-Mail-Format', 'error');\n      return;\n    }\n\n    try {\n      const response = await userApi.create(newUserFormData);\n      \n      // Optimistisches Update: User zur Liste hinzufgen statt vollstndigem Reload\n      if (response.data) {\n        setUsers(prevUsers => [response.data, ...prevUsers]);\n      }\n      \n      showMessage('Benutzer erfolgreich erstellt', 'success');\n      setIsCreateModalOpen(false);\n      setNewUserFormData({\n        email: '',\n        password: '',\n        firstName: '',\n        lastName: ''\n      });\n      // fetchUsers() entfernt - kein vollstndiger Reload mehr\n    } catch (err: any) {\n      // Bei Fehler: Rollback durch vollstndiges Reload\n      fetchUsers();\n      const errorMessage = err.response?.data?.message || 'Fehler beim Erstellen des Benutzers';\n      showMessage(errorMessage, 'error');\n      onError(errorMessage);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 pb-6\">\n      {/* Die lokale Erfolgsmeldungs-Anzeige wird entfernt, da wir jetzt HeaderMessage verwenden */}\n      {/* {userSuccess && (\n        <div className=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4\">\n          {userSuccess}\n        </div>\n      )} */}\n\n      {/* Titelzeile: Button links, Dropdown rechts */}\n      <div className=\"mb-6\">\n        <div className=\"flex items-center gap-4\">\n          {/* Linke Seite: \"Neuer Benutzer\"-Button */}\n          <div className=\"flex items-center\">\n            {isAdmin() && (\n              <button\n                onClick={() => setIsCreateModalOpen(true)}\n                className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                style={{ width: '30.19px', height: '30.19px' }}\n                title={t('users.create')}\n                aria-label={t('users.create')}\n              >\n                <PlusIcon className=\"h-4 w-4\" />\n              </button>\n            )}\n          </div>\n          \n          {/* Rechts: Benutzer-Dropdown */}\n          <div className=\"flex-1\">\n            <label htmlFor=\"userSelect\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              {t('users.title')}\n            </label>\n            <select\n              id=\"userSelect\"\n              onChange={handleUserSelect}\n              className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n            >\n              <option value=\"\">-- {t('users.title')} {t('common.select')} --</option>\n              {users.map(user => (\n                <option key={user.id} value={user.id}>\n                  {user.firstName} {user.lastName} ({user.username})\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {selectedUser && (\n        <div>\n          <div className=\"flex justify-between items-center mb-4\">\n            <h2 className=\"text-xl font-semibold dark:text-white\">\n              {t('users.title')}: {selectedUser.firstName} {selectedUser.lastName}\n            </h2>\n          </div>\n\n          {/* Tabs fr Benutzerdetails, Dokumente und Rollen */}\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow mb-6\">\n            <div className=\"border-b border-gray-200 dark:border-gray-700\">\n              <nav className=\"flex -mb-px\">\n                <button\n                  onClick={() => setActiveUserTab('details')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'details'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <UserCircleIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('users.title')}\n                </button>\n                <button\n                  onClick={() => setActiveUserTab('documents')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'documents'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <DocumentTextIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('profile.documents')}\n                </button>\n                <button\n                  onClick={() => setActiveUserTab('roles')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'roles'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <ShieldCheckIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('roles.title')}\n                </button>\n              </nav>\n            </div>\n          </div>\n\n          {/* Benutzerdetails Formular */}\n          {activeUserTab === 'details' && (\n            <form onSubmit={handleUserSubmit} className=\"bg-white dark:bg-gray-800 rounded-lg shadow p-6\">\n              {/* Bestehender Code fr Benutzerdetails */}\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('users.form.username')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"username\"\n                    value={userFormData.username || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('users.form.email')}\n                  </label>\n                  <input\n                    type=\"email\"\n                    name=\"email\"\n                    value={userFormData.email || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('users.form.firstName')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"firstName\"\n                    value={userFormData.firstName || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('users.form.lastName')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"lastName\"\n                    value={userFormData.lastName || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.birthday')}\n                  </label>\n                  <input\n                    type=\"date\"\n                    name=\"birthday\"\n                    value={userFormData.birthday || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.bankDetails')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"bankDetails\"\n                    value={userFormData.bankDetails || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.contract')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"contract\"\n                    value={userFormData.contract || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.salary')}\n                  </label>\n                  <input\n                    type=\"number\"\n                    name=\"salary\"\n                    value={userFormData.salary === null || userFormData.salary === undefined ? '' : userFormData.salary}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('users.form.normalWorkingHours')}\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    name=\"normalWorkingHours\"\n                    value={userFormData.normalWorkingHours === null || userFormData.normalWorkingHours === undefined ? '7.6' : userFormData.normalWorkingHours}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.country')}\n                  </label>\n                  <select\n                    name=\"country\"\n                    value={userFormData.country || 'CO'}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  >\n                    {COUNTRIES.map((country) => (\n                      <option key={country.code} value={country.code}>\n                        {country.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.language')}\n                  </label>\n                  <select\n                    name=\"language\"\n                    value={userFormData.language || 'es'}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  >\n                    {LANGUAGES.map((language) => (\n                      <option key={language.code} value={language.code}>\n                        {language.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n\n              {/* Lohnabrechnung-Einstellungen */}\n              <div className=\"mt-4 border-t pt-4\">\n                <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('users.form.payrollSettings')}</h3>\n                \n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      {t('users.form.payrollCountry')}\n                    </label>\n                    <select\n                      name=\"payrollCountry\"\n                      value={userFormData.payrollCountry || selectedUser.payrollCountry || 'CH'}\n                      onChange={handleUserInputChange}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    >\n                      {PAYROLL_COUNTRIES.map(country => (\n                        <option key={country.code} value={country.code}>\n                          {country.name}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  \n                  {(userFormData.payrollCountry === 'CO' || \n                    (selectedUser.payrollCountry === 'CO' && !userFormData.payrollCountry)) && (\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('users.form.contractType')}\n                      </label>\n                      <select\n                        name=\"contractType\"\n                        value={userFormData.contractType || ''}\n                        onChange={handleUserInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                      >\n                        <option value=\"\">Bitte auswhlen</option>\n                        {CONTRACT_TYPES.map(type => (\n                          <option key={type.code} value={type.code}>\n                            {type.name}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  )}\n                </div>\n                \n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      {t('users.form.hourlyRate')} ({(userFormData.payrollCountry || selectedUser.payrollCountry) === 'CH' ? 'CHF' : 'COP'})\n                    </label>\n                    <input\n                      type=\"number\"\n                      name=\"hourlyRate\"\n                      min=\"0\"\n                      step={(userFormData.payrollCountry || selectedUser.payrollCountry) === 'CH' ? '0.05' : '1'}\n                      value={userFormData.hourlyRate === null || userFormData.hourlyRate === undefined ? '' : userFormData.hourlyRate}\n                      onChange={handleUserInputChange}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                      placeholder={(userFormData.payrollCountry || selectedUser.payrollCountry) === 'CH' ? 'z.B. 45.00' : 'z.B. 50000'}\n                    />\n                  </div>\n                  \n                  {((userFormData.payrollCountry === 'CO' || selectedUser.payrollCountry === 'CO') && \n                    (userFormData.contractType !== 'servicios_externos' && selectedUser.contractType !== 'servicios_externos') &&\n                    (userFormData.contractType || selectedUser.contractType)) && (\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('users.form.monthlySalary')} (COP)\n                      </label>\n                      <input\n                        type=\"number\"\n                        name=\"monthlySalary\"\n                        min=\"0\"\n                        step=\"1000\"\n                        value={userFormData.monthlySalary === null || userFormData.monthlySalary === undefined ? '' : userFormData.monthlySalary}\n                        onChange={handleUserInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                        placeholder=\"z.B. 3500000\"\n                      />\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {isEditingUser && (\n                <div className=\"mt-4 flex justify-end gap-3\">\n                  <button\n                    type=\"button\"\n                    onClick={handleCancelEdit}\n                    className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                    title={t('common.cancel')}\n                  >\n                    <XMarkIcon className=\"h-5 w-5\" />\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                    title={t('common.save')}\n                  >\n                    <CheckIcon className=\"h-5 w-5\" />\n                  </button>\n                </div>\n              )}\n            </form>\n          )}\n\n          {/* Identifikationsdokumente Tab */}\n          {activeUserTab === 'documents' && (\n            <IdentificationDocumentList userId={selectedUser.id} isAdmin={true} />\n          )}\n\n          {/* Rollen Tab */}\n          {activeUserTab === 'roles' && (\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow p-6\">\n              {/* Rollenzuweisung - nur anzeigen, wenn Rollen geladen wurden */}\n              {loadingRoles ? (\n                <div className=\"mt-4 mb-4\">\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">Rollenzuweisung</h3>\n                  <p className=\"dark:text-gray-300\">Rollen werden geladen...</p>\n                </div>\n              ) : roles.length > 0 && (\n                <div>\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">Rollenzuweisung</h3>\n                  \n                  {/* berprfung auf unbekannte Rollen */}\n                  {selectedRoles.some(roleId => !roles.some(role => role.id === roleId)) && (\n                    <div className=\"bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-400 dark:border-yellow-700 text-yellow-700 dark:text-yellow-300 px-4 py-3 rounded mb-4\">\n                      <p className=\"font-bold\">Achtung: Unbekannte Rollen-IDs gefunden</p>\n                      <p>Einige Rollen-IDs des Benutzers ({\n                        selectedRoles.filter(roleId => !roles.some(role => role.id === roleId)).join(', ')\n                      }) sind in den verfgbaren Rollen nicht vorhanden.</p>\n                      <p className=\"mt-2 text-sm\">Verfgbare Rollen-IDs: {roles.map(r => r.id).join(', ')}</p>\n                    </div>\n                  )}\n                  \n                  {/* Aktuell zugewiesene Rollen */}\n                  <div className=\"mb-4\">\n                    <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">Aktuelle Rollen</h4>\n                    {selectedRoles.length === 0 ? (\n                      <p className=\"text-gray-500 dark:text-gray-400 italic\">Keine Rollen zugewiesen</p>\n                    ) : (\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {/* Bekannte zugewiesene Rollen */}\n                        {roles\n                          .filter(role => selectedRoles.includes(role.id))\n                          .map(role => {\n                            // Eine Rolle ist nur dann nicht entfernbar, wenn es sich um die Admin-Rolle (ID: 1) fr den Admin-Benutzer (ID: 1) handelt\n                            const isFixedRole = role.id === 1 && selectedUser && selectedUser.id === 1;\n                            return (\n                              <div \n                                key={role.id} \n                                className={`border rounded-lg p-4 ${isFixedRole ? 'border-green-500 bg-green-50 dark:bg-green-900/20 dark:border-green-700 cursor-not-allowed' : 'border-blue-500 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-700 cursor-pointer'}`}\n                                onClick={() => !isFixedRole && toggleRole(role.id)}\n                              >\n                                <div className=\"flex justify-between items-center\">\n                                  <div>\n                                    <h4 className=\"font-medium flex items-center dark:text-white\">\n                                      {role.name}\n                                      {isFixedRole && (\n                                        <span className=\"ml-2 text-xs bg-green-600 text-white px-2 py-0.5 rounded-full\">\n                                          Fix\n                                        </span>\n                                      )}\n                                    </h4>\n                                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">{role.description}</p>\n                                  </div>\n                                  <div className={`flex items-center ${isFixedRole ? 'text-gray-400 dark:text-gray-500' : 'text-blue-600 dark:text-blue-400'}`}>\n                                    <span className=\"mr-2 text-sm\">{isFixedRole ? 'Fest zugewiesen' : 'Entfernen'}</span>\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n                                    </svg>\n                                  </div>\n                                </div>\n                              </div>\n                            );\n                          })}\n                        \n                        {/* Unbekannte zugewiesene Rollen */}\n                        {selectedRoles\n                          .filter(roleId => !roles.some(role => role.id === roleId))\n                          .map(roleId => (\n                            <div \n                              key={`unknown-${roleId}`} \n                              className=\"border border-orange-500 bg-orange-50 rounded-lg p-4\"\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium\">Unbekannte Rolle (ID: {roleId})</h4>\n                                  <p className=\"text-sm text-orange-600\">Diese Rolle ist dem Benutzer zugewiesen, aber nicht in der Rollenliste vorhanden.</p>\n                                </div>\n                                <div className=\"flex items-center text-orange-600\">\n                                  <span className=\"mr-2 text-sm\">Entfernen</span>\n                                  <button \n                                    onClick={() => toggleRole(roleId)}\n                                    className=\"focus:outline-none\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n                                    </svg>\n                                  </button>\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    )}\n                  </div>\n                  \n                  {/* Verfgbare Rollen */}\n                  <div>\n                    <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">Verfgbare Rollen</h4>\n                    {roles.filter(role => !selectedRoles.includes(role.id)).length === 0 ? (\n                      <p className=\"text-gray-500 dark:text-gray-400 italic\">Keine weiteren Rollen verfgbar</p>\n                    ) : (\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {roles\n                          .filter(role => !selectedRoles.includes(role.id))\n                          .map(role => (\n                            <div \n                              key={role.id} \n                              className=\"border border-gray-300 rounded-lg p-4 cursor-pointer hover:border-blue-300 hover:bg-blue-50\"\n                              onClick={() => toggleRole(role.id)}\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium\">{role.name}</h4>\n                                  <p className=\"text-sm text-gray-600\">{role.description}</p>\n                                </div>\n                                <div className=\"flex items-center text-gray-500 hover:text-blue-600\">\n                                  <span className=\"mr-2 text-sm\">Hinzufgen</span>\n                                  <PlusIcon className=\"h-5 w-5\" />\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Sidepane/Modal fr Benutzererstellung */}\n      {isCreateModalOpen && (\n        <>\n          {/* Fr Mobile (unter 640px) - klassisches Modal */}\n          {isMobile ? (\n            <Dialog open={isCreateModalOpen} onClose={() => setIsCreateModalOpen(false)} className=\"relative z-50\">\n              <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n              \n              <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                  {/* Header */}\n                  <div className=\"px-6 py-4 border-b dark:border-gray-700\">\n                    <div className=\"flex items-center justify-between\">\n                      <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                        Neuen Benutzer erstellen\n                      </Dialog.Title>\n                      <button\n                        onClick={() => setIsCreateModalOpen(false)}\n                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                      >\n                        <XMarkIcon className=\"h-6 w-6\" />\n                      </button>\n                    </div>\n                  </div>\n                  \n                  {/* Form */}\n                  <form onSubmit={handleCreateUser} className=\"p-6\">\n                    <div className=\"space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          E-Mail *\n                        </label>\n                        <input\n                          type=\"email\"\n                          name=\"email\"\n                          value={newUserFormData.email}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          Passwort *\n                        </label>\n                        <input\n                          type=\"password\"\n                          name=\"password\"\n                          value={newUserFormData.password}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          Vorname *\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"firstName\"\n                          value={newUserFormData.firstName}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          Nachname *\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"lastName\"\n                          value={newUserFormData.lastName}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                    </div>\n                    \n                    {/* Footer */}\n                    <div className=\"mt-6 flex justify-end gap-3\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setIsCreateModalOpen(false)}\n                        className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                        title=\"Abbrechen\"\n                      >\n                        <XMarkIcon className=\"h-5 w-5\" />\n                      </button>\n                      <button\n                        type=\"submit\"\n                        className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                        title=\"Erstellen\"\n                      >\n                        <CheckIcon className=\"h-5 w-5\" />\n                      </button>\n                    </div>\n                  </form>\n                </Dialog.Panel>\n              </div>\n            </Dialog>\n          ) : (\n            // Fr Desktop (ab 640px) - Sidepane\n            // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n            <>\n              {/* Backdrop - nur wenn offen und <= 1070px */}\n              {/* Hinweis: onClick entfernt, da Backdrop pointer-events: none hat, damit Hauptinhalt interaktiv bleibt */}\n              {isCreateModalOpen && !isLargeScreen && (\n                <div \n                  className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n                  aria-hidden=\"true\" \n                  style={{\n                    opacity: isCreateModalOpen ? 1 : 0,\n                    transition: 'opacity 300ms ease-out'\n                  }}\n                />\n              )}\n              \n              {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n              <div \n                className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isCreateModalOpen ? 'translate-x-0' : 'translate-x-full'}`}\n                style={{\n                  transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n                  pointerEvents: isCreateModalOpen ? 'auto' : 'none'\n                }}\n                aria-hidden={!isCreateModalOpen}\n                role=\"dialog\"\n                aria-modal={isCreateModalOpen}\n              >\n                <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n                  <h2 className=\"text-lg font-semibold dark:text-white\">\n                    Neuen Benutzer erstellen\n                  </h2>\n                  <button\n                    onClick={() => setIsCreateModalOpen(false)}\n                    className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                  >\n                    <XMarkIcon className=\"h-6 w-6\" />\n                  </button>\n                </div>\n\n                <div className=\"flex flex-col flex-1 min-h-0\">\n                  <form onSubmit={handleCreateUser} className=\"flex flex-col flex-1 min-h-0\">\n                    <div className=\"p-4 overflow-y-auto flex-1 min-h-0 space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          E-Mail *\n                        </label>\n                      <input\n                        type=\"email\"\n                        name=\"email\"\n                        value={newUserFormData.email}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        Passwort *\n                      </label>\n                      <input\n                        type=\"password\"\n                        name=\"password\"\n                        value={newUserFormData.password}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        Vorname *\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"firstName\"\n                        value={newUserFormData.firstName}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        Nachname *\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"lastName\"\n                        value={newUserFormData.lastName}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                      </div>\n                    </div>\n                    \n                    {/* Footer */}\n                    <div className=\"flex justify-end gap-3 border-t dark:border-gray-700 pt-4 px-4 flex-shrink-0\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setIsCreateModalOpen(false)}\n                        className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                        title=\"Abbrechen\"\n                      >\n                        <XMarkIcon className=\"h-5 w-5\" />\n                      </button>\n                      <button\n                        type=\"submit\"\n                        className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                        title=\"Erstellen\"\n                      >\n                        <CheckIcon className=\"h-5 w-5\" />\n                      </button>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default UserManagementTab; ","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { roleApi } from '../api/apiClient.ts';\nimport { Role, AccessLevel } from '../types/interfaces.ts';\nimport { PencilIcon, TrashIcon, PlusIcon, FunnelIcon, XMarkIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport axiosInstance from '../config/axios.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport FilterPane from '../components/FilterPane.tsx';\nimport SavedFilterTags from '../components/SavedFilterTags.tsx';\nimport { FilterCondition } from '../components/FilterRow.tsx';\nimport { useError } from '../contexts/ErrorContext.tsx';\nimport { ErrorCategory } from '../services/ErrorHandler.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface RoleManagementTabProps {\n  onRolesChange?: () => void;\n  onError: (error: string) => void;\n  readOnly?: boolean;\n}\n\n// Definiere Seiten, die immer sichtbar sein sollen (ohne Berechtigungsprfung)\nconst alwaysVisiblePages = ['dashboard', 'worktracker', 'cerebro', 'settings', 'profile'];\n\n// ALLE SEITEN IM SYSTEM (synchron mit Backend)\nconst defaultPages = [\n  'dashboard',\n  'worktracker',\n  'consultations',\n  'team_worktime_control', // = workcenter\n  'payroll', // = lohnabrechnung\n  'usermanagement', // = benutzerverwaltung\n  'cerebro',\n  'settings',\n  'profile'\n];\n\n// ALLE TABELLEN IM SYSTEM (synchron mit Backend)\nconst defaultTables = [\n  'requests',           // auf dashboard\n  'tasks',             // auf worktracker\n  'users',             // auf usermanagement\n  'roles',             // auf usermanagement\n  'team_worktime',     // auf team_worktime_control\n  'worktime',          // auf worktracker\n  'clients',           // auf consultations\n  'consultation_invoices', // auf consultations\n  'branches',          // auf settings/system\n  'notifications',     // allgemein\n  'settings',          // auf settings\n  'monthly_reports'    // auf consultations/reports\n];\n\n// ALLE BUTTONS IM SYSTEM (synchron mit Backend)\nconst defaultButtons = [\n  // Database Management Buttons (Settings/System)\n  'database_reset_table',\n  'database_logs',\n  \n  // Invoice Functions Buttons\n  'invoice_create',\n  'invoice_download', \n  'invoice_mark_paid',\n  'invoice_settings',\n  \n  // Todo/Task Buttons (Worktracker)\n  'todo_create',\n  'todo_edit',\n  'todo_delete',\n  'task_create',\n  'task_edit', \n  'task_delete',\n  \n  // User Management Buttons\n  'user_create',\n  'user_edit',\n  'user_delete',\n  'role_assign',\n  'role_create',\n  'role_edit',\n  'role_delete',\n  \n  // Worktime Buttons\n  'worktime_start',\n  'worktime_stop', \n  'worktime_edit',\n  'worktime_delete',\n  \n  // General Cerebro Button\n  'cerebro',\n  \n  // Consultation Buttons\n  'consultation_start',\n  'consultation_stop',\n  'consultation_edit',\n  \n  // Client Management Buttons\n  'client_create',\n  'client_edit',\n  'client_delete',\n  \n  // Settings Buttons\n  'settings_system',\n  'settings_notifications',\n  'settings_profile',\n  \n  // Payroll Buttons\n  'payroll_generate',\n  'payroll_export',\n  'payroll_edit'\n];\n\n// Definiert die Zuordnung von Tabellen zu ihren bergeordneten Seiten\nconst tableToPageMapping = {\n  'requests': 'dashboard',\n  'tasks': 'worktracker',\n  'users': 'usermanagement',\n  'roles': 'usermanagement', \n  'team_worktime': 'team_worktime_control',\n  'worktime': 'worktracker',\n  'clients': 'consultations',\n  'consultation_invoices': 'consultations',\n  'branches': 'settings',\n  'notifications': 'general',\n  'settings': 'settings',\n  'monthly_reports': 'consultations'\n};\n\n// Definiert die Zuordnung von Buttons zu ihren bergeordneten Seiten/Bereichen\nconst buttonToPageMapping = {\n  'database_reset_table': 'settings',\n  'database_logs': 'settings',\n  'invoice_create': 'consultations',\n  'invoice_download': 'consultations',\n  'invoice_mark_paid': 'consultations',\n  'invoice_settings': 'consultations',\n  'todo_create': 'worktracker',\n  'todo_edit': 'worktracker',\n  'todo_delete': 'worktracker',\n  'task_create': 'worktracker',\n  'task_edit': 'worktracker',\n  'task_delete': 'worktracker',\n  'user_create': 'usermanagement',\n  'user_edit': 'usermanagement',\n  'user_delete': 'usermanagement',\n  'role_assign': 'usermanagement',\n  'role_create': 'usermanagement',\n  'role_edit': 'usermanagement',\n  'role_delete': 'usermanagement',\n  'worktime_start': 'worktracker',\n  'worktime_stop': 'worktracker',\n  'worktime_edit': 'worktracker',\n  'worktime_delete': 'worktracker',\n  'cerebro': 'cerebro',\n  'consultation_start': 'consultations',\n  'consultation_stop': 'consultations',\n  'consultation_edit': 'consultations',\n  'client_create': 'consultations',\n  'client_edit': 'consultations',\n  'client_delete': 'consultations',\n  'settings_system': 'settings',\n  'settings_notifications': 'settings',\n  'settings_profile': 'settings',\n  'payroll_generate': 'payroll',\n  'payroll_export': 'payroll',\n  'payroll_edit': 'payroll'\n};\n\n// Definiert die Zuordnung von Buttons zu ihren zugehrigen Tabellen\nconst buttonToTableMapping: Record<string, string | null> = {\n  // Worktime Buttons  worktime Tabelle\n  'worktime_start': 'worktime',\n  'worktime_stop': 'worktime',\n  'worktime_edit': 'worktime',\n  'worktime_delete': 'worktime',\n  // Task/Todo Buttons  tasks Tabelle\n  'task_create': 'tasks',\n  'task_edit': 'tasks',\n  'task_delete': 'tasks',\n  'todo_create': 'tasks',\n  'todo_edit': 'tasks',\n  'todo_delete': 'tasks',\n  // Client Buttons  clients Tabelle\n  'client_create': 'clients',\n  'client_edit': 'clients',\n  'client_delete': 'clients',\n  'consultation_start': 'clients',\n  'consultation_stop': 'clients',\n  'consultation_edit': 'clients',\n  // Invoice Buttons  consultation_invoices Tabelle\n  'invoice_create': 'consultation_invoices',\n  'invoice_download': 'consultation_invoices',\n  'invoice_mark_paid': 'consultation_invoices',\n  'invoice_settings': 'consultation_invoices',\n  // User Management Buttons  users/roles Tabellen\n  'user_create': 'users',\n  'user_edit': 'users',\n  'user_delete': 'users',\n  'role_assign': 'roles',\n  'role_create': 'roles',\n  'role_edit': 'roles',\n  'role_delete': 'roles',\n  // Settings Buttons  settings Tabelle\n  'settings_system': 'settings',\n  'settings_notifications': 'settings',\n  'settings_profile': 'settings',\n  // Buttons ohne direkte Tabelle-Zuordnung\n  'database_reset_table': null,\n  'database_logs': null,\n  'cerebro': null,\n  'payroll_generate': null,\n  'payroll_export': null,\n  'payroll_edit': null\n};\n\n// Display-Name-Mapping fr Seiten (DB-Interne Bezeichnung  Frontend-Bezeichnung)\n// Wird dynamisch aus bersetzungen geladen\n\n// Display-Name-Mapping fr Tabellen (DB-Interne Bezeichnung  Frontend-Bezeichnung)\n// Wird dynamisch aus bersetzungen geladen\n\n// Display-Name-Mapping fr Buttons wird dynamisch in der Komponente geladen\n\n// TableID fr gespeicherte Filter\nconst ROLES_TABLE_ID = 'roles-table';\n\ninterface RoleFormData {\n  name: string;\n  description: string;\n  permissions: {\n    entity: string;\n    entityType: string;\n    accessLevel: AccessLevel;\n  }[];\n}\n\n\n// RoleCard-Komponente fr mobile Ansicht\nconst RoleCard: React.FC<{\n  role: Role;\n  onEdit: (role: Role) => void;\n  onDelete: (roleId: number) => void;\n  canEdit: boolean;\n  canDelete: boolean;\n}> = ({ role, onEdit, onDelete, canEdit, canDelete }) => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4 mb-4\">\n      {/* Header mit Rollenname und Aktionen */}\n      <div className=\"flex justify-between items-start mb-2\">\n        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">{role.name}</h3>\n        \n        <div className=\"flex space-x-2\">\n          {canEdit && (\n            <button\n              onClick={() => onEdit(role)}\n              className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n              title={t('roles.actions.edit')}\n            >\n              <PencilIcon className=\"h-5 w-5\" />\n            </button>\n          )}\n          \n          {canDelete && (\n            <button\n              onClick={() => onDelete(role.id)}\n              className=\"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 p-1\"\n              title={t('roles.actions.delete')}\n            >\n              <TrashIcon className=\"h-5 w-5\" />\n            </button>\n          )}\n        </div>\n      </div>\n      \n      {/* Beschreibung */}\n      <p className=\"text-sm text-gray-600 dark:text-gray-400\">{role.description || t('roles.noDescription')}</p>\n      \n      {/* Berechtigungen - kompakt */}\n      <div className=\"mt-2\">\n        <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-1\">{t('roles.permissions')}:</h4>\n        <div className=\"flex flex-wrap gap-1\">\n          {role.permissions\n            .filter(perm => perm.accessLevel !== 'none') // Nur relevante Berechtigungen anzeigen\n            .slice(0, 8) // Begrenze die Anzahl der angezeigten Berechtigungen\n            .map(permission => (\n              <span \n                key={`${permission.entity}-${permission.entityType}`}\n                className=\"text-xs bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 px-2 py-1 rounded\"\n              >\n                {permission.entity}: {permission.accessLevel}\n              </span>\n            ))}\n          {role.permissions.filter(perm => perm.accessLevel !== 'none').length > 8 && (\n            <span className=\"text-xs bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-300 px-2 py-1 rounded\">\n                +{role.permissions.filter(perm => perm.accessLevel !== 'none').length - 8} {t('common.showMore')}\n            </span>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst RoleManagementTab: React.FC<RoleManagementTabProps> = ({ onRolesChange, onError, readOnly = false }) => {\n  const { t } = useTranslation();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingRole, setEditingRole] = useState<Role | null>(null);\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [loading, setLoading] = useState(true);\n  \n  // Display-Name-Mapping fr Seiten (dynamisch aus bersetzungen)\n  const pageDisplayNames = useMemo(() => ({\n    'dashboard': t('roles.pages.dashboard'),\n    'worktracker': t('roles.pages.worktracker'),\n    'consultations': t('roles.pages.consultations'),\n    'team_worktime_control': t('roles.pages.team_worktime_control'),\n    'payroll': t('roles.pages.payroll'),\n    'usermanagement': t('roles.pages.usermanagement'),\n    'cerebro': t('roles.pages.cerebro'),\n    'settings': t('roles.pages.settings'),\n    'profile': t('roles.pages.profile')\n  }), [t]);\n\n  // Display-Name-Mapping fr Tabellen (dynamisch aus bersetzungen)\n  const tableDisplayNames = useMemo(() => ({\n    'tasks': t('roles.tables.tasks'),\n    'worktime': t('roles.tables.worktime'),\n    'users': t('roles.tables.users'),\n    'roles': t('roles.tables.roles'),\n    'clients': t('roles.tables.clients'),\n    'consultation_invoices': t('roles.tables.consultation_invoices'),\n    'requests': t('roles.tables.requests'),\n    'team_worktime': t('roles.tables.team_worktime'),\n    'settings': t('roles.tables.settings'),\n    'notifications': t('roles.tables.notifications'),\n    'branches': t('roles.tables.branches'),\n    'monthly_reports': t('roles.tables.monthly_reports')\n  }), [t]);\n\n  // Display-Name-Mapping fr Buttons (dynamisch aus bersetzungen)\n  const buttonDisplayNames = useMemo(() => ({\n    'worktime_start': t('roles.buttons.worktime_start'),\n    'worktime_stop': t('roles.buttons.worktime_stop'),\n    'worktime_edit': t('roles.buttons.worktime_edit'),\n    'worktime_delete': t('roles.buttons.worktime_delete'),\n    'task_create': t('roles.buttons.task_create'),\n    'task_edit': t('roles.buttons.task_edit'),\n    'task_delete': t('roles.buttons.task_delete'),\n    'todo_create': t('roles.buttons.todo_create'),\n    'todo_edit': t('roles.buttons.todo_edit'),\n    'todo_delete': t('roles.buttons.todo_delete'),\n    'client_create': t('roles.buttons.client_create'),\n    'client_edit': t('roles.buttons.client_edit'),\n    'client_delete': t('roles.buttons.client_delete'),\n    'consultation_start': t('roles.buttons.consultation_start'),\n    'consultation_stop': t('roles.buttons.consultation_stop'),\n    'consultation_edit': t('roles.buttons.consultation_edit'),\n    'invoice_create': t('roles.buttons.invoice_create'),\n    'invoice_download': t('roles.buttons.invoice_download'),\n    'invoice_mark_paid': t('roles.buttons.invoice_mark_paid'),\n    'invoice_settings': t('roles.buttons.invoice_settings'),\n    'user_create': t('roles.buttons.user_create'),\n    'user_edit': t('roles.buttons.user_edit'),\n    'user_delete': t('roles.buttons.user_delete'),\n    'role_assign': t('roles.buttons.role_assign'),\n    'role_create': t('roles.buttons.role_create'),\n    'role_edit': t('roles.buttons.role_edit'),\n    'role_delete': t('roles.buttons.role_delete'),\n    'settings_system': t('roles.buttons.settings_system'),\n    'settings_notifications': t('roles.buttons.settings_notifications'),\n    'settings_profile': t('roles.buttons.settings_profile'),\n    'database_reset_table': t('roles.buttons.database_reset_table'),\n    'database_logs': t('roles.buttons.database_logs'),\n    'payroll_generate': t('roles.buttons.payroll_generate'),\n    'payroll_export': t('roles.buttons.payroll_export'),\n    'payroll_edit': t('roles.buttons.payroll_edit'),\n    'cerebro': t('roles.buttons.cerebro')\n  }), [t]);\n  const [formData, setFormData] = useState<RoleFormData>({\n    name: '',\n    description: '',\n    permissions: [\n      // Seiten-Berechtigungen\n      ...defaultPages.map(page => ({\n        entity: page,\n        entityType: 'page',\n        accessLevel: 'none' as AccessLevel\n      })),\n      // Tabellen-Berechtigungen\n      ...defaultTables.map(table => ({\n        entity: table,\n        entityType: 'table',\n        accessLevel: 'none' as AccessLevel\n      })),\n      // Button-Berechtigungen\n      ...defaultButtons.map(button => ({\n        entity: button,\n        entityType: 'button',\n        accessLevel: 'none' as AccessLevel\n      }))\n    ]\n  });\n  const [error, setError] = useState<string | null>(null);\n  const { hasPermission } = usePermissions();\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n  \n  // Neue State-Variablen fr erweiterte Filterbedingungen\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  \n  // Filter State Management (Controlled Mode)\n  const [activeFilterName, setActiveFilterName] = useState<string>('Alle');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n  \n  // Responsiveness Hook (640px wie Standard)\n  const [isMobile, setIsMobile] = useState<boolean>(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  \n  // Neue Fehlerbehandlung hinzufgen\n  const { handleError, handleValidationError } = useError();\n  \n  // Neue State-Variablen fr die Berechtigungen\n  const [isAddPermissionModalOpen, setIsAddPermissionModalOpen] = useState(false);\n  const [selectedPermission, setSelectedPermission] = useState<string | null>(null);\n  const [displayLimit, setDisplayLimit] = useState<number>(10);\n  \n  // berwache Bildschirmgre\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isModalOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isModalOpen, openSidepane, closeSidepane]);\n\n  // Aktualisiere die fetchRoles-Funktion, um den neuen ErrorHandler zu nutzen\n  const fetchRoles = useCallback(async () => {\n    setLoading(true);\n    console.log('DEBUGAUSGABE: Hole Rollen vom Server...');\n    \n    try {\n      const response = await roleApi.getAll();\n      console.log('DEBUGAUSGABE: Rollen erfolgreich geholt:', response.data);\n      setRoles(response.data);\n      setError(null);\n    } catch (error) {\n      console.error('DEBUGAUSGABE: Fehler beim Abrufen der Rollen:', error);\n      // Nutze den neuen ErrorHandler\n      handleError(error, { \n        component: 'RoleManagementTab', \n        action: 'fetchRoles' \n      });\n      // Rufe auch den bergebenen onError auf, falls vorhanden\n      if (onError) {\n        onError('Fehler beim Laden der Rollen');\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [handleError, onError]);\n\n  // Direkt Rollen laden\n  useEffect(() => {\n    fetchRoles();\n  }, [fetchRoles]);\n\n  // Speichern einer Rolle\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    \n    if (!formData.name) {\n      handleValidationError('Rollenname darf nicht leer sein', { name: 'Rollenname ist erforderlich' });\n      return;\n    }\n    \n    if (editingRole) {\n      // Stelle sicher, dass die immer sichtbaren Seiten auch tatschlich auf 'both' gesetzt sind\n      const updatedPermissions = formData.permissions.map(permission => {\n        if (permission.entityType === 'page' && alwaysVisiblePages.includes(permission.entity)) {\n          return { ...permission, accessLevel: 'both' };\n        }\n        return permission;\n      });\n      \n      // Filtere nur die relevanten Berechtigungen (nicht 'none')\n      const filteredPermissions = updatedPermissions\n        .filter(permission => permission.accessLevel !== 'none')\n        .map(permission => ({\n          entity: permission.entity,\n          entityType: permission.entityType,\n          accessLevel: permission.accessLevel\n        }));\n      \n      if (!editingRole.id || isNaN(editingRole.id)) {\n        console.warn('DEBUGAUSGABE: Ungltige Rollen-ID erkannt, Bearbeitung abgebrochen');\n        handleError('Ungltige Rollen-ID, Bearbeitung abgebrochen', { \n          component: 'RoleManagementTab',\n          roleId: editingRole.id\n        });\n        return;\n      }\n      \n      // berprfen, ob es sich um eine geschtzte Rolle handelt\n      if (editingRole.id === 1 || editingRole.id === 2 || editingRole.id === 999) {\n        console.warn(`DEBUGAUSGABE: Versuch, geschtzte Rolle mit ID ${editingRole.id} zu bearbeiten`);\n        handleError({\n          message: 'Geschtzte Systemrollen knnen nicht bearbeitet werden',\n          name: 'PermissionError'\n        }, {\n          component: 'RoleManagementTab',\n          roleId: editingRole.id,\n          category: ErrorCategory.PERMISSION\n        });\n        setIsModalOpen(false);\n        return;\n      }\n      \n      // berprfen, ob die Rolle noch in der aktuellen Liste existiert\n      const roleExists = roles.some(r => r.id === editingRole.id);\n      if (!roleExists) {\n        console.error(`DEBUGAUSGABE: Rolle mit ID ${editingRole.id} existiert nicht in der aktuellen Liste`);\n        handleError(`Rolle mit ID ${editingRole.id} existiert nicht mehr. Bitte aktualisieren Sie die Seite.`, {\n          component: 'RoleManagementTab',\n          roleId: editingRole.id\n        });\n        setIsModalOpen(false);\n        // Rollen neu laden, um die Anzeige zu aktualisieren\n        await fetchRoles();\n        return;\n      }\n      \n      console.log(`DEBUGAUSGABE: Bearbeite Rolle mit ID ${editingRole.id}`);\n      \n      try {\n        console.log('DEBUGAUSGABE: Sende Aktualisierung an API:', {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions\n        });\n        \n        const dataToSend = {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions\n        };\n        \n        console.log('DEBUGAUSGABE: Vor dem API-Aufruf roleApi.update');\n        const response = await roleApi.update(editingRole.id, dataToSend);\n        console.log('DEBUGAUSGABE: Nach dem API-Aufruf roleApi.update');\n        console.log('DEBUGAUSGABE: API-Antwort bei Rollenaktualisierung:', response);\n        await fetchRoles();\n      } catch (updateError) {\n        console.error('DEBUGAUSGABE: Fehler bei Rollenaktualisierung:', updateError);\n        if (updateError.response) {\n          // Spezifischere Fehlerbehandlung\n          if (updateError.response.data.meta && updateError.response.data.meta.cause === \"Record to update not found.\") {\n            handleError('Diese Rolle existiert nicht mehr in der Datenbank. Die Anzeige wird aktualisiert.', {\n              component: 'RoleManagementTab',\n              roleId: editingRole.id\n            });\n            setIsModalOpen(false);\n            // Rollenliste aktualisieren, um Frontend zu synchronisieren\n            await fetchRoles();\n          } else {\n            handleError(updateError.response.data.message || 'Fehler beim Aktualisieren der Rolle', {\n              component: 'RoleManagementTab',\n              roleId: editingRole.id\n            });\n          }\n        } else {\n          handleError('Fehler beim Aktualisieren der Rolle', {\n            component: 'RoleManagementTab',\n            roleId: editingRole.id\n          });\n        }\n        return;\n      }\n    } else {\n      // Erstellen einer neuen Rolle\n      try {\n        // Stelle sicher, dass die immer sichtbaren Seiten auch tatschlich auf 'both' gesetzt sind\n        const updatedPermissions = formData.permissions.map(permission => {\n          if (permission.entityType === 'page' && alwaysVisiblePages.includes(permission.entity)) {\n            return { ...permission, accessLevel: 'both' };\n          }\n          return permission;\n        });\n        \n        // Filtere nur die relevanten Berechtigungen (nicht 'none')\n        const filteredPermissions = updatedPermissions\n          .filter(permission => permission.accessLevel !== 'none')\n          .map(permission => ({\n            entity: permission.entity,\n            entityType: permission.entityType,\n            accessLevel: permission.accessLevel\n          }));\n        \n        console.log('DEBUGAUSGABE: Sende Daten an API fr neue Rolle:', {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions\n        });\n        \n        const dataToSend = {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions\n        };\n        \n        console.log('DEBUGAUSGABE: Vor dem API-Aufruf roleApi.create');\n        const response = await roleApi.create(dataToSend);\n        console.log('DEBUGAUSGABE: Nach dem API-Aufruf roleApi.create');\n        console.log('DEBUGAUSGABE: API-Antwort beim Erstellen der Rolle:', response);\n        await fetchRoles();\n      } catch (createError) {\n        console.error('DEBUGAUSGABE: Fehler bei API-Anfrage zum Erstellen der Rolle:', createError);\n        if (createError.response) {\n          handleError(createError.response.data.message || 'Fehler beim Erstellen der Rolle', {\n            component: 'RoleManagementTab'\n          });\n        } else {\n          handleError('Fehler beim Erstellen der Rolle', {\n            component: 'RoleManagementTab'\n          });\n        }\n        return;\n      }\n    }\n    \n    if (onRolesChange) onRolesChange();\n    \n    setIsModalOpen(false);\n    resetForm();\n  };\n\n  // Lschen einer Rolle\n  const handleDelete = async (roleId: number) => {\n    if (!roleId || isNaN(roleId)) {\n      console.warn('Ungltige Rollen-ID erkannt, Lschvorgang abgebrochen');\n      handleError('Ungltige Rollen-ID, Lschvorgang abgebrochen', {\n        component: 'RoleManagementTab',\n        roleId: roleId\n      });\n      return;\n    }\n    \n    // berprfen, ob es sich um eine geschtzte Rolle handelt\n    if (roleId === 1 || roleId === 2 || roleId === 999) {\n      console.warn(`Versuch, geschtzte Rolle mit ID ${roleId} zu lschen`);\n      handleError('Geschtzte Systemrollen knnen nicht gelscht werden', {\n        component: 'RoleManagementTab',\n        roleId: roleId\n      });\n      return;\n    }\n    \n    if (!window.confirm('Mchten Sie diese Rolle wirklich lschen?')) return;\n    \n    try {\n      console.log(`Starte Lschvorgang fr Rolle mit ID ${roleId}`);\n      \n      // berprfen, ob die Rolle in der aktuellen Liste existiert\n      const roleExists = roles.some(r => r.id === roleId);\n      if (!roleExists) {\n        console.error(`Rolle mit ID ${roleId} existiert nicht in der aktuellen Liste`);\n        handleError(`Rolle mit ID ${roleId} existiert nicht mehr. Bitte aktualisieren Sie die Seite.`, {\n          component: 'RoleManagementTab',\n          roleId: roleId\n        });\n        // Rollen neu laden, um die Anzeige zu aktualisieren\n        await fetchRoles();\n        return;\n      }\n      \n      // Bei Mock-Daten lokales Lschen (wird nicht verwendet)\n      if (false) {\n        console.log('Lsche Mock-Rolle');\n        const updatedRoles = roles.filter(role => role.id !== roleId);\n        setRoles(updatedRoles);\n      } else {\n        console.log('Sende Lschanfrage an API');\n        \n        try {\n          const response = await roleApi.delete(roleId);\n          console.log('API-Antwort beim Lschen der Rolle:', response);\n          \n          // Nach erfolgreichem Lschen die Rollenliste aktualisieren\n          await fetchRoles();\n          console.log('Rollenliste nach Lschen aktualisiert');\n        } catch (deleteError) {\n          console.error('API-Fehler beim Lschen der Rolle:', deleteError);\n          \n          if (deleteError.response) {\n            console.error('API-Fehlerdaten:', deleteError.response.data);\n            \n            // Spezifischere Fehlerbehandlung\n            if (deleteError.response.data.meta && deleteError.response.data.meta.cause === \"Record to delete does not exist.\") {\n              handleError('Diese Rolle existiert nicht mehr in der Datenbank. Die Anzeige wird aktualisiert.', {\n                component: 'RoleManagementTab',\n                roleId: roleId\n              });\n              // Rollenliste aktualisieren, um Frontend zu synchronisieren\n              await fetchRoles();\n            } else {\n              handleError(deleteError.response.data.message || 'Fehler beim Lschen der Rolle', {\n                component: 'RoleManagementTab',\n                roleId: roleId\n              });\n            }\n          } else {\n            handleError('Netzwerkfehler beim Lschen der Rolle', {\n              component: 'RoleManagementTab',\n              roleId: roleId\n            });\n          }\n          return;\n        }\n      }\n      \n      console.log('Rolle erfolgreich gelscht');\n      if (onRolesChange) onRolesChange();\n    } catch (err) {\n      console.error('Unbehandelter Fehler beim Lschen der Rolle:', err);\n      handleError(err);\n      \n      // Bei einem unbehandelten Fehler trotzdem versuchen, die Rollenliste zu aktualisieren\n      try {\n        await fetchRoles();\n      } catch (refreshError) {\n        console.error('Fehler beim Aktualisieren der Rollenliste nach fehlgeschlagenem Lschvorgang:', refreshError);\n      }\n    }\n  };\n\n  // Rolle zum Bearbeiten vorbereiten\n  const prepareRoleForEditing = (role: Role) => {\n    // Verhindere das Bearbeiten von geschtzten Rollen\n    if (role.id === 1 || role.id === 2 || role.id === 999) {\n      handleError('Geschtzte Systemrollen knnen nicht bearbeitet werden', {\n        component: 'RoleManagementTab',\n        roleId: role.id\n      });\n      return;\n    }\n    \n    // Alle mglichen Berechtigungen erstellen (Seiten, Tabellen und Buttons)\n    const allPermissions = [\n      ...defaultPages.map(page => ({\n        entity: page,\n        entityType: 'page',\n        // Fr die immer sichtbaren Seiten 'both' als Standard setzen\n        accessLevel: alwaysVisiblePages.includes(page) ? 'both' as AccessLevel : 'none' as AccessLevel\n      })),\n      ...defaultTables.map(table => ({\n        entity: table,\n        entityType: 'table',\n        accessLevel: 'none' as AccessLevel\n      })),\n      ...defaultButtons.map(button => ({\n        entity: button,\n        entityType: 'button',\n        accessLevel: 'none' as AccessLevel\n      }))\n    ];\n\n    // Vorhandene Berechtigungen bernehmen\n    role.permissions.forEach(permission => {\n      const existingPermIndex = allPermissions.findIndex(\n        p => p.entity === permission.entity && p.entityType === permission.entityType\n      );\n      \n      if (existingPermIndex !== -1) {\n        // Stelle sicher, dass alwaysVisiblePages immer 'both' als AccessLevel haben\n        if (permission.entityType === 'page' && alwaysVisiblePages.includes(permission.entity)) {\n          allPermissions[existingPermIndex].accessLevel = 'both';\n        } else {\n          allPermissions[existingPermIndex].accessLevel = permission.accessLevel;\n        }\n      }\n    });\n\n    setFormData({\n      name: role.name,\n      description: role.description || '',\n      permissions: allPermissions\n    });\n    \n    setEditingRole(role);\n    setIsModalOpen(true);\n  };\n\n  // Formular fr neue Rolle zurcksetzen\n  const resetForm = () => {\n    setEditingRole(null);\n    setFormData({\n      name: '',\n      description: '',\n      permissions: [\n        // Seiten-Berechtigungen\n        ...defaultPages.map(page => ({\n          entity: page,\n          entityType: 'page',\n          // Fr die immer sichtbaren Seiten 'both' als Standard setzen\n          accessLevel: alwaysVisiblePages.includes(page) ? 'both' as AccessLevel : 'none' as AccessLevel\n        })),\n        // Tabellen-Berechtigungen\n        ...defaultTables.map(table => ({\n          entity: table,\n          entityType: 'table',\n          accessLevel: 'none' as AccessLevel\n        })),\n        // Button-Berechtigungen\n        ...defaultButtons.map(button => ({\n          entity: button,\n          entityType: 'button',\n          accessLevel: 'none' as AccessLevel\n        }))\n      ]\n    });\n  };\n\n  // Setzt alle Seitenberechtigungen (auer die immer sichtbaren) auf den gleichen Wert\n  const setAllPagePermissions = (accessLevel: AccessLevel) => {\n    const newPermissions = [...formData.permissions];\n    \n    formData.permissions\n      .filter(p => p.entityType === 'page' && !alwaysVisiblePages.includes(p.entity))\n      .forEach(permission => {\n        const permIndex = formData.permissions.indexOf(permission);\n        newPermissions[permIndex] = {\n          ...permission,\n          accessLevel\n        };\n      });\n    \n    setFormData({ ...formData, permissions: newPermissions });\n  };\n\n  // Setzt alle Tabellen-Berechtigungen auf den gleichen Wert\n  const setAllTablePermissions = (accessLevel: AccessLevel) => {\n    const newPermissions = [...formData.permissions];\n    \n    formData.permissions\n      .filter(p => p.entityType === 'table')\n      .forEach(permission => {\n        const permIndex = formData.permissions.indexOf(permission);\n        newPermissions[permIndex] = {\n          ...permission,\n          accessLevel\n        };\n      });\n    \n    setFormData({ ...formData, permissions: newPermissions });\n  };\n\n  // Setzt alle Button-Berechtigungen auf den gleichen Wert\n  const setAllButtonPermissions = (accessLevel: AccessLevel) => {\n    const newPermissions = [...formData.permissions];\n    \n    formData.permissions\n      .filter(p => p.entityType === 'button')\n      .forEach(permission => {\n        const permIndex = formData.permissions.indexOf(permission);\n        newPermissions[permIndex] = {\n          ...permission,\n          accessLevel\n        };\n      });\n    \n    setFormData({ ...formData, permissions: newPermissions });\n  };\n\n  // Funktion zum Zhlen der aktiven Filter\n  const getActiveFilterCount = () => {\n    return filterConditions.length;\n  };\n\n  // Filtern und sortieren der Rollen\n  const filteredAndSortedRoles = useMemo(() => {\n    return roles\n      .filter(role => {\n        // Globale Suche\n        if (searchTerm) {\n          const searchLower = searchTerm.toLowerCase();\n          const matchesSearch = \n            role.name.toLowerCase().includes(searchLower) ||\n            (role.description && role.description.toLowerCase().includes(searchLower));\n          \n          if (!matchesSearch) return false;\n        }\n        \n        // Prfe erweiterte Filterbedingungen, wenn vorhanden\n        if (filterConditions.length > 0) {\n          // Implementiere die logische Verknpfung der Bedingungen (UND/ODER)\n          let result = filterConditions.length > 0;\n          \n          for (let i = 0; i < filterConditions.length; i++) {\n            const condition = filterConditions[i];\n            let conditionMet = false;\n            \n            switch (condition.column) {\n              case 'name':\n                if (condition.operator === 'equals') {\n                  conditionMet = role.name.toLowerCase() === (condition.value as string || '').toLowerCase();\n                } else if (condition.operator === 'contains') {\n                  conditionMet = role.name.toLowerCase().includes((condition.value as string || '').toLowerCase());\n                } else if (condition.operator === 'startsWith') {\n                  conditionMet = role.name.toLowerCase().startsWith((condition.value as string || '').toLowerCase());\n                }\n                break;\n              \n              case 'description':\n                if (!role.description) {\n                  conditionMet = false;\n                  break;\n                }\n                \n                if (condition.operator === 'equals') {\n                  conditionMet = role.description.toLowerCase() === (condition.value as string || '').toLowerCase();\n                } else if (condition.operator === 'contains') {\n                  conditionMet = role.description.toLowerCase().includes((condition.value as string || '').toLowerCase());\n                } else if (condition.operator === 'startsWith') {\n                  conditionMet = role.description.toLowerCase().startsWith((condition.value as string || '').toLowerCase());\n                }\n                break;\n              \n              case 'permissions':\n                // Vereinfachter Filter fr Berechtigungen - zhle die Anzahl der Berechtigungen mit dem angegebenen Level\n                const accessLevel = condition.value as AccessLevel;\n                const count = role.permissions.filter(p => p.accessLevel === accessLevel).length;\n                \n                if (condition.operator === 'greaterThan') {\n                  conditionMet = count > 0;\n                } else if (condition.operator === 'equals') {\n                  conditionMet = count > 0;\n                }\n                break;\n            }\n            \n            // Verknpfe das Ergebnis dieser Bedingung mit dem Gesamtergebnis\n            if (i === 0) {\n              result = conditionMet;\n            } else {\n              const operator = filterLogicalOperators[i - 1];\n              result = operator === 'AND' ? (result && conditionMet) : (result || conditionMet);\n            }\n          }\n          \n          if (!result) return false;\n        }\n        \n        return true;\n      })\n      .sort((a, b) => {\n        return a.name.localeCompare(b.name);\n      });\n  }, [roles, searchTerm, filterConditions, filterLogicalOperators]);\n\n  // Mobile Ansicht renderRoles-Funktion\n  const renderRoles = () => {\n    if (roles.length === 0) {\n      return (\n        <div className=\"p-4 bg-gray-50 rounded text-center\">\n          <p>Keine Rollen gefunden. Erstellen Sie eine neue Rolle mit dem Button oben.</p>\n        </div>\n      );\n    }\n    \n    if (isMobile) {\n      // Mobile Ansicht mit Karten\n      return (\n        <>\n          <div className=\"space-y-4\">\n            {filteredAndSortedRoles.slice(0, displayLimit).map((role) => (\n              <RoleCard \n                key={role.id} \n                role={role} \n                onEdit={prepareRoleForEditing}\n                onDelete={handleDelete}\n                canEdit={!readOnly && hasPermission('roles', 'write', 'table') && role.id !== 1 && role.id !== 2 && role.id !== 999}\n                canDelete={!readOnly && hasPermission('roles', 'write', 'table') && role.id !== 1 && role.id !== 2 && role.id !== 999}\n              />\n            ))}\n          </div>\n          \n          {/* \"Mehr anzeigen\" Button - Mobil */}\n          {filteredAndSortedRoles.length > displayLimit && (\n            <div className=\"mt-4 flex justify-center\">\n              <button\n                className=\"px-4 py-2 text-sm font-medium text-blue-600 bg-white border border-blue-300 rounded-md hover:bg-blue-50 dark:bg-gray-800 dark:text-blue-400 dark:border-gray-700 dark:hover:bg-gray-700\"\n                onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n              >\n                Mehr anzeigen ({filteredAndSortedRoles.length - displayLimit} verbleibend)\n              </button>\n            </div>\n          )}\n        </>\n      );\n    } else {\n      // Card-Ansicht fr grere Bildschirme\n      return (\n        <>\n          <div className=\"space-y-4\">\n            {filteredAndSortedRoles.slice(0, displayLimit).map((role) => (\n              <RoleCard \n                key={role.id} \n                role={role} \n                onEdit={prepareRoleForEditing}\n                onDelete={handleDelete}\n                canEdit={!readOnly && hasPermission('roles', 'write', 'table') && role.id !== 1 && role.id !== 2 && role.id !== 999}\n                canDelete={!readOnly && hasPermission('roles', 'write', 'table') && role.id !== 1 && role.id !== 2 && role.id !== 999}\n              />\n            ))}\n          </div>\n          \n          {/* \"Mehr anzeigen\" Button - Desktop */}\n          {filteredAndSortedRoles.length > displayLimit && (\n            <div className=\"mt-4 flex justify-center\">\n              <button\n                className=\"px-4 py-2 text-sm font-medium text-blue-600 bg-white border border-blue-300 rounded-md hover:bg-blue-50 dark:bg-gray-800 dark:text-blue-400 dark:border-gray-700 dark:hover:bg-gray-700\"\n                onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n              >\n                Mehr anzeigen ({filteredAndSortedRoles.length - displayLimit} verbleibend)\n              </button>\n            </div>\n          )}\n        </>\n      );\n    }\n  };\n\n  // Standard-Filter erstellen und speichern\n  useEffect(() => {\n    const createStandardFilters = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        \n        if (!token) {\n          console.error('Nicht authentifiziert');\n          return;\n        }\n\n        // Prfen, ob die Standard-Filter bereits existieren\n        const existingFiltersResponse = await axiosInstance.get(\n          API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(ROLES_TABLE_ID)\n        );\n\n        const existingFilters = existingFiltersResponse.data || [];\n        const alleFilterExists = existingFilters.some(filter => filter.name === 'Alle');\n\n        // Erstelle \"Alle\"-Filter, wenn er noch nicht existiert\n        if (!alleFilterExists) {\n          const alleFilter = {\n            tableId: ROLES_TABLE_ID,\n            name: 'Alle',\n            conditions: [],\n            operators: []\n          };\n\n          await axiosInstance.post(\n            API_ENDPOINTS.SAVED_FILTERS.BASE,\n            alleFilter\n          );\n          console.log('Alle-Filter fr Rollen erstellt');\n        }\n      } catch (error) {\n        console.error('Fehler beim Erstellen der Standard-Filter:', error);\n      }\n    };\n\n    createStandardFilters();\n  }, []);\n\n  // Initialer Default-Filter setzen (Controlled Mode)\n  useEffect(() => {\n    const setInitialFilter = async () => {\n      try {\n        const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(ROLES_TABLE_ID));\n        const filters = response.data;\n        \n        const alleFilter = filters.find((filter: any) => filter.name === 'Alle');\n        if (alleFilter) {\n          setActiveFilterName('Alle');\n          setSelectedFilterId(alleFilter.id);\n          applyFilterConditions(alleFilter.conditions, alleFilter.operators);\n        }\n      } catch (error) {\n        console.error('Fehler beim Setzen des initialen Filters:', error);\n      }\n    };\n\n    setInitialFilter();\n  }, []);\n\n  // Funktion zum Anwenden von Filterbedingungen\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n  };\n  \n  // Funktion zum Zurcksetzen der Filter\n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n  \n  // Filter Change Handler (Controlled Mode)\n  const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators);\n  };\n\n  return (\n    <div>\n      {/* Spaltenanzeige und Suche */}\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between mb-4\">\n          {/* Linke Seite: \"Neue Rolle erstellen\"-Button */}\n          <div className=\"flex items-center\">\n            {!readOnly && hasPermission('roles', 'write', 'table') && (\n              <button\n                onClick={() => setIsModalOpen(true)}\n                className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n                style={{ width: '30.19px', height: '30.19px' }}\n                title=\"Neue Rolle erstellen\"\n                aria-label=\"Neue Rolle erstellen\"\n              >\n                <PlusIcon className=\"h-4 w-4\" />\n              </button>\n            )}\n          </div>\n          \n          {/* Mitte: Titel - Kein Titel in der Mitte notwendig bei dieser Komponente, da der Tab-Header bereits den Titel zeigt */}\n          <div></div>\n          \n          {/* Rechte Seite: Suchfeld, Filter-Button, Spalten-Konfiguration */}\n          <div className=\"flex items-center gap-1.5\">\n            <input\n              type=\"text\"\n              placeholder=\"Suchen...\"\n              className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n            />\n            <button\n              className={`p-2 rounded-md ${getActiveFilterCount() > 0 ? 'bg-blue-50 text-blue-600' : 'hover:bg-gray-100'} ml-1 relative`}\n              onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n              title=\"Filter\"\n            >\n              <FunnelIcon className=\"w-5 h-5\" />\n              {getActiveFilterCount() > 0 && (\n                <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 text-white rounded-full text-xs flex items-center justify-center\">\n                  {getActiveFilterCount()}\n                </span>\n              )}\n            </button>\n          </div>\n        </div>\n\n        {/* Filter-Modal */}\n        {isFilterModalOpen && (\n          <FilterPane\n            columns={[\n              { id: 'name', label: 'Name' },\n              { id: 'description', label: 'Beschreibung' },\n              { id: 'permissions', label: 'Berechtigungen' }\n            ]}\n            onApply={applyFilterConditions}\n            onReset={resetFilterConditions}\n            savedConditions={filterConditions}\n            savedOperators={filterLogicalOperators}\n            tableId={ROLES_TABLE_ID}\n          />\n        )}\n        \n        {/* Gespeicherte Filter als Tags anzeigen */}\n        <SavedFilterTags\n          tableId={ROLES_TABLE_ID}\n          onSelectFilter={applyFilterConditions}\n          onReset={resetFilterConditions}\n          activeFilterName={activeFilterName}\n          selectedFilterId={selectedFilterId}\n          onFilterChange={handleFilterChange}\n          defaultFilterName=\"Alle\"\n        />\n\n        {loading ? (\n          <div className=\"flex justify-center items-center py-8\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n          </div>\n        ) : (\n          renderRoles()\n        )}\n      </div>\n\n      {/* Modal/Sidepane fr Rollenerstellung/Bearbeitung */}\n      {isModalOpen && (\n        <>\n          {/* Mobile (unter 640px) - Modal */}\n          {isMobile ? (\n            <Dialog open={isModalOpen} onClose={() => setIsModalOpen(false)} className=\"relative z-50\">\n              <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n              \n              <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[calc(100vh-2rem)] flex flex-col overflow-hidden\">\n                  {/* Header */}\n                  <div className=\"px-6 py-4 border-b dark:border-gray-700 flex-shrink-0\">\n                    <div className=\"flex items-center justify-between\">\n                      <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                        {editingRole ? 'Rolle bearbeiten' : 'Neue Rolle erstellen'}\n                      </Dialog.Title>\n                      <button\n                        onClick={() => setIsModalOpen(false)}\n                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                      >\n                        <XMarkIcon className=\"h-6 w-6\" />\n                      </button>\n                    </div>\n                  </div>\n                  \n                  {/* Form */}\n                  <form onSubmit={handleSubmit} className=\"flex flex-col flex-1 min-h-0\">\n                    {/* Content - scrollbarer Bereich */}\n                    <div className=\"flex-1 overflow-y-auto min-h-0\">\n                      <div className=\"p-6 space-y-5\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Name</label>\n                  <input\n                    type=\"text\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Beschreibung</label>\n                  <input\n                    type=\"text\"\n                    value={formData.description}\n                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n                  </div>\n                  \n                  <div className=\"mt-2\">\n                    <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-2\">\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Detaillierte Berechtigungen</label>\n                      {/* Bulk Actions - kompakt integriert */}\n                      <div className=\"flex flex-wrap items-center gap-1.5\">\n                        <button\n                          type=\"button\"\n                          onClick={() => setAllPagePermissions('both')}\n                          className=\"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800\"\n                          title=\"Alle Seiten aktivieren\"\n                        >\n                          Seiten \n                        </button>\n                        <button\n                          type=\"button\"\n                          onClick={() => setAllPagePermissions('none')}\n                          className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                          title=\"Alle Seiten deaktivieren\"\n                        >\n                          Seiten \n                        </button>\n                        <button\n                          type=\"button\"\n                          onClick={() => setAllTablePermissions('both')}\n                          className=\"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800\"\n                          title=\"Alle Tabellen aktivieren\"\n                        >\n                          Tabellen \n                        </button>\n                        <button\n                          type=\"button\"\n                          onClick={() => setAllTablePermissions('none')}\n                          className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                          title=\"Alle Tabellen deaktivieren\"\n                        >\n                          Tabellen \n                        </button>\n                        <button\n                          type=\"button\"\n                          onClick={() => setAllButtonPermissions('both')}\n                          className=\"px-2 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800\"\n                          title=\"Alle Buttons aktivieren\"\n                        >\n                          Buttons \n                        </button>\n                        <button\n                          type=\"button\"\n                          onClick={() => setAllButtonPermissions('none')}\n                          className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                          title=\"Alle Buttons deaktivieren\"\n                        >\n                          Buttons \n                        </button>\n                      </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-1 gap-4 overflow-y-auto border rounded-lg p-4 dark:border-gray-600\">\n                    {formData.permissions\n                      .filter(permission => permission.entityType === 'page')\n                      .map((permission, index) => {\n                        const permIndex = formData.permissions.indexOf(permission);\n                        const isActive = permission.accessLevel === 'both';\n                        return (\n                          <div key={`permission-page-${permission.entity}-${index}`}>\n                            <div className=\"flex items-center justify-between\">\n                              <span className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{pageDisplayNames[permission.entity] || permission.entity}</span>\n                              <label className={`inline-flex items-center ${alwaysVisiblePages.includes(permission.entity) ? 'cursor-not-allowed opacity-80' : 'cursor-pointer'}`}>\n                                <input\n                                  type=\"checkbox\"\n                                  className=\"sr-only peer\"\n                                  checked={isActive}\n                                  disabled={alwaysVisiblePages.includes(permission.entity)}\n                                  onChange={() => {\n                                    const newPermissions = [...formData.permissions];\n                                    newPermissions[permIndex] = {\n                                      ...permission,\n                                      accessLevel: isActive ? 'none' : 'both'\n                                    };\n                                    setFormData({ ...formData, permissions: newPermissions });\n                                  }}\n                                />\n                                <div className={`relative w-11 h-6 ${alwaysVisiblePages.includes(permission.entity) ? 'bg-blue-600 dark:bg-blue-700' : 'bg-gray-200 dark:bg-gray-700'} peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700`}>\n                                  {alwaysVisiblePages.includes(permission.entity) && (\n                                    <span className=\"absolute inset-0 flex items-center justify-center text-xs text-white font-medium\">\n                                      Fix\n                                    </span>\n                                  )}\n                                </div>\n                              </label>\n                            </div>\n                            \n                            {/* Tabellen-Berechtigungen mit zugehrigen Buttons gruppiert */}\n                            {formData.permissions\n                              .filter(tablePerm => \n                                tablePerm.entityType === 'table' && \n                                tableToPageMapping[tablePerm.entity] === permission.entity\n                              )\n                              .sort((a, b) => {\n                                const aName = tableDisplayNames[a.entity] || a.entity;\n                                const bName = tableDisplayNames[b.entity] || b.entity;\n                                return aName.localeCompare(bName);\n                              })\n                              .map((tablePerm, tableIndex) => {\n                                const tablePermIndex = formData.permissions.indexOf(tablePerm);\n                                const isTableActive = tablePerm.accessLevel === 'both';\n                                const tableEntity = tablePerm.entity;\n                                const tableDisplayName = tableDisplayNames[tableEntity] || tableEntity;\n                                \n                                // Finde alle Buttons, die zu dieser Tabelle gehren\n                                // Filtere Duplikate: task_* und todo_* sind dasselbe, nur task_* behalten\n                                const relatedButtons = formData.permissions\n                                  .filter(buttonPerm => \n                                    buttonPerm.entityType === 'button' && \n                                    buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                    buttonToTableMapping[buttonPerm.entity] === tableEntity &&\n                                    // Entferne todo_* Buttons wenn task_* existiert (sind dasselbe)\n                                    !(tableEntity === 'tasks' && buttonPerm.entity.startsWith('todo_'))\n                                  )\n                                  .sort((a, b) => {\n                                    const aName = buttonDisplayNames[a.entity] || a.entity;\n                                    const bName = buttonDisplayNames[b.entity] || b.entity;\n                                    // Logische Reihenfolge: Start, Stop, Erstellen, Bearbeiten, Lschen, dann alphabetisch\n                                    const order = ['Start', 'Stop', 'Erstellen', 'Bearbeiten', 'Lschen'];\n                                    const aIndex = order.indexOf(aName);\n                                    const bIndex = order.indexOf(bName);\n                                    if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;\n                                    if (aIndex !== -1) return -1;\n                                    if (bIndex !== -1) return 1;\n                                    return aName.localeCompare(bName);\n                                  });\n                                \n                                return (\n                                  <div key={`table-permission-${tableEntity}-${tableIndex}`} className=\"mt-3\">\n                                    {/* Tabelle selbst */}\n                                    <div className=\"flex items-center justify-between pl-6 border-l-2 border-blue-300 dark:border-blue-600\">\n                                      <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\"> {tableDisplayName}</span>\n                                      <label className=\"inline-flex items-center cursor-pointer\">\n                                        <input\n                                          type=\"checkbox\"\n                                          className=\"sr-only peer\"\n                                          checked={isTableActive}\n                                          onChange={() => {\n                                            const newPermissions = [...formData.permissions];\n                                            newPermissions[tablePermIndex] = {\n                                              ...tablePerm,\n                                              accessLevel: isTableActive ? 'none' : 'both'\n                                            };\n                                            setFormData({ ...formData, permissions: newPermissions });\n                                          }}\n                                        />\n                                        <div className=\"relative w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                        </div>\n                                      </label>\n                                    </div>\n                                    \n                                    {/* Zu dieser Tabelle gehrige Buttons */}\n                                    {relatedButtons.map((buttonPerm, buttonIndex) => {\n                                      const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                      const isButtonActive = buttonPerm.accessLevel === 'both';\n                                      const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                      return (\n                                        <div key={`button-permission-${buttonPerm.entity}-${buttonIndex}`} \n                                          className=\"flex items-center justify-between mt-2 pl-12 border-l-2 border-gray-300 dark:border-gray-600\">\n                                          <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                          <label className=\"inline-flex items-center cursor-pointer\">\n                                            <input\n                                              type=\"checkbox\"\n                                              className=\"sr-only peer\"\n                                              checked={isButtonActive}\n                                              onChange={() => {\n                                                const newPermissions = [...formData.permissions];\n                                                newPermissions[buttonPermIndex] = {\n                                                  ...buttonPerm,\n                                                  accessLevel: isButtonActive ? 'none' : 'both'\n                                                };\n                                                setFormData({ ...formData, permissions: newPermissions });\n                                              }}\n                                            />\n                                            <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                            </div>\n                                          </label>\n                                        </div>\n                                      );\n                                    })}\n                                  </div>\n                                );\n                              })\n                            }\n                              \n                              {/* Button-Berechtigungen ohne Tabelle-Zuordnung (am Ende) */}\n                              {formData.permissions\n                                .filter(buttonPerm => \n                                  buttonPerm.entityType === 'button' && \n                                  buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                  !buttonToTableMapping[buttonPerm.entity]\n                                )\n                                .sort((a, b) => {\n                                  const aName = buttonDisplayNames[a.entity] || a.entity;\n                                  const bName = buttonDisplayNames[b.entity] || b.entity;\n                                  return aName.localeCompare(bName);\n                                })\n                                .map((buttonPerm, buttonIndex) => {\n                                  const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                  const isButtonActive = buttonPerm.accessLevel === 'both';\n                                  const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                  return (\n                                    <div key={`button-permission-${buttonPerm.entity}-${buttonIndex}`} \n                                      className=\"flex items-center justify-between mt-2 pl-6 border-l-2 border-gray-300 dark:border-gray-600\">\n                                      <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                      <label className=\"inline-flex items-center cursor-pointer\">\n                                        <input\n                                          type=\"checkbox\"\n                                          className=\"sr-only peer\"\n                                          checked={isButtonActive}\n                                          onChange={() => {\n                                            const newPermissions = [...formData.permissions];\n                                            newPermissions[buttonPermIndex] = {\n                                              ...buttonPerm,\n                                              accessLevel: isButtonActive ? 'none' : 'both'\n                                            };\n                                            setFormData({ ...formData, permissions: newPermissions });\n                                          }}\n                                        />\n                                        <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                        </div>\n                                      </label>\n                          </div>\n                        );\n                      })\n                    }\n                            </div>\n                          );\n                        })\n                      }\n                    </div>\n                  </div>\n                    </div>\n                  </div>\n                  \n                  {/* Footer */}\n                  <div className=\"px-6 py-4 bg-gray-50 dark:bg-gray-700 flex justify-end gap-2 border-t dark:border-gray-600 flex-shrink-0\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setIsModalOpen(false)}\n                      className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                      title=\"Abbrechen\"\n                    >\n                      <XMarkIcon className=\"h-5 w-5\" />\n                    </button>\n                    <button\n                      type=\"submit\"\n                      className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                      title={editingRole ? 'Aktualisieren' : 'Erstellen'}\n                    >\n                      <CheckIcon className=\"h-5 w-5\" />\n                    </button>\n                  </div>\n                </form>\n              </Dialog.Panel>\n            </div>\n          </Dialog>\n          ) : (\n            /* Desktop (ab 640px) - Sidepane */\n            /* WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition */\n            <>\n              {/* Backdrop - nur wenn offen und <= 1070px */}\n              {/* Hinweis: onClick entfernt, da Backdrop pointer-events: none hat, damit Hauptinhalt interaktiv bleibt */}\n              {isModalOpen && !isLargeScreen && (\n                <div \n                  className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n                  aria-hidden=\"true\" \n                  style={{\n                    opacity: isModalOpen ? 1 : 0,\n                    transition: 'opacity 300ms ease-out'\n                  }}\n                />\n              )}\n              \n              {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n              <div \n                className={`fixed top-16 bottom-0 right-0 max-w-2xl w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isModalOpen ? 'translate-x-0' : 'translate-x-full'}`}\n                style={{\n                  transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n                  pointerEvents: isModalOpen ? 'auto' : 'none'\n                }}\n                aria-hidden={!isModalOpen}\n                role=\"dialog\"\n                aria-modal={isModalOpen}\n              >\n                <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n                  <h2 className=\"text-lg font-semibold dark:text-white\">\n                    {editingRole ? 'Rolle bearbeiten' : 'Neue Rolle erstellen'}\n                  </h2>\n                  <button\n                    onClick={() => setIsModalOpen(false)}\n                    className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                  >\n                    <XMarkIcon className=\"h-6 w-6\" />\n                  </button>\n                </div>\n\n                <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n                  <form onSubmit={handleSubmit} className=\"space-y-5\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Name</label>\n                        <input\n                          type=\"text\"\n                          value={formData.name}\n                          onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                          className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Beschreibung</label>\n                        <input\n                          type=\"text\"\n                          value={formData.description}\n                          onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                          className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                        />\n                      </div>\n                    </div>\n                    \n                    <div className=\"mt-2\">\n                      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Detaillierte Berechtigungen</label>\n                        {/* Bulk Actions */}\n                        <div className=\"flex flex-wrap items-center gap-1.5\">\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllPagePermissions('both')}\n                            className=\"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800\"\n                            title=\"Alle Seiten aktivieren\"\n                          >\n                            Seiten \n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllPagePermissions('none')}\n                            className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            title=\"Alle Seiten deaktivieren\"\n                          >\n                            Seiten \n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllTablePermissions('both')}\n                            className=\"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800\"\n                            title=\"Alle Tabellen aktivieren\"\n                          >\n                            Tabellen \n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllTablePermissions('none')}\n                            className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            title=\"Alle Tabellen deaktivieren\"\n                          >\n                            Tabellen \n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllButtonPermissions('both')}\n                            className=\"px-2 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800\"\n                            title=\"Alle Buttons aktivieren\"\n                          >\n                            Buttons \n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllButtonPermissions('none')}\n                            className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            title=\"Alle Buttons deaktivieren\"\n                          >\n                            Buttons \n                          </button>\n                        </div>\n                      </div>\n                      \n                      <div className=\"grid grid-cols-1 gap-4 overflow-y-auto border rounded-lg p-4 dark:border-gray-600 max-h-[60vh]\">\n                        {formData.permissions\n                          .filter(permission => permission.entityType === 'page')\n                          .map((permission, index) => {\n                            const permIndex = formData.permissions.indexOf(permission);\n                            const isActive = permission.accessLevel === 'both';\n                            return (\n                              <div key={`permission-page-desktop-${permission.entity}-${index}`}>\n                                <div className=\"flex items-center justify-between\">\n                                  <span className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{pageDisplayNames[permission.entity] || permission.entity}</span>\n                                  <label className={`inline-flex items-center ${alwaysVisiblePages.includes(permission.entity) ? 'cursor-not-allowed opacity-80' : 'cursor-pointer'}`}>\n                                    <input\n                                      type=\"checkbox\"\n                                      className=\"sr-only peer\"\n                                      checked={isActive}\n                                      disabled={alwaysVisiblePages.includes(permission.entity)}\n                                      onChange={() => {\n                                        const newPermissions = [...formData.permissions];\n                                        newPermissions[permIndex] = {\n                                          ...permission,\n                                          accessLevel: isActive ? 'none' : 'both'\n                                        };\n                                        setFormData({ ...formData, permissions: newPermissions });\n                                      }}\n                                    />\n                                    <div className={`relative w-11 h-6 ${alwaysVisiblePages.includes(permission.entity) ? 'bg-blue-600 dark:bg-blue-700' : 'bg-gray-200 dark:bg-gray-700'} peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700`}>\n                                      {alwaysVisiblePages.includes(permission.entity) && (\n                                        <span className=\"absolute inset-0 flex items-center justify-center text-xs text-white font-medium\">\n                                          Fix\n                                        </span>\n                                      )}\n                                    </div>\n                                  </label>\n                                </div>\n                                \n                                {/* Tabellen-Berechtigungen mit zugehrigen Buttons gruppiert */}\n                                {formData.permissions\n                                  .filter(tablePerm => \n                                    tablePerm.entityType === 'table' && \n                                    tableToPageMapping[tablePerm.entity] === permission.entity\n                                  )\n                                  .sort((a, b) => {\n                                    const aName = tableDisplayNames[a.entity] || a.entity;\n                                    const bName = tableDisplayNames[b.entity] || b.entity;\n                                    return aName.localeCompare(bName);\n                                  })\n                                  .map((tablePerm, tableIndex) => {\n                                    const tablePermIndex = formData.permissions.indexOf(tablePerm);\n                                    const isTableActive = tablePerm.accessLevel === 'both';\n                                    const tableEntity = tablePerm.entity;\n                                    const tableDisplayName = tableDisplayNames[tableEntity] || tableEntity;\n                                    \n                                    // Finde alle Buttons, die zu dieser Tabelle gehren\n                                    const relatedButtons = formData.permissions\n                                      .filter(buttonPerm => \n                                        buttonPerm.entityType === 'button' && \n                                        buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                        buttonToTableMapping[buttonPerm.entity] === tableEntity &&\n                                        !(tableEntity === 'tasks' && buttonPerm.entity.startsWith('todo_'))\n                                      )\n                                      .sort((a, b) => {\n                                        const aName = buttonDisplayNames[a.entity] || a.entity;\n                                        const bName = buttonDisplayNames[b.entity] || b.entity;\n                                        const order = ['Start', 'Stop', 'Erstellen', 'Bearbeiten', 'Lschen'];\n                                        const aIndex = order.indexOf(aName);\n                                        const bIndex = order.indexOf(bName);\n                                        if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;\n                                        if (aIndex !== -1) return -1;\n                                        if (bIndex !== -1) return 1;\n                                        return aName.localeCompare(bName);\n                                      });\n                                    \n                                    return (\n                                      <div key={`table-permission-desktop-${tableEntity}-${tableIndex}`} className=\"mt-3\">\n                                        {/* Tabelle selbst */}\n                                        <div className=\"flex items-center justify-between pl-6 border-l-2 border-blue-300 dark:border-blue-600\">\n                                          <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\"> {tableDisplayName}</span>\n                                          <label className=\"inline-flex items-center cursor-pointer\">\n                                            <input\n                                              type=\"checkbox\"\n                                              className=\"sr-only peer\"\n                                              checked={isTableActive}\n                                              onChange={() => {\n                                                const newPermissions = [...formData.permissions];\n                                                newPermissions[tablePermIndex] = {\n                                                  ...tablePerm,\n                                                  accessLevel: isTableActive ? 'none' : 'both'\n                                                };\n                                                setFormData({ ...formData, permissions: newPermissions });\n                                              }}\n                                            />\n                                            <div className=\"relative w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                            </div>\n                                          </label>\n                                        </div>\n                                        \n                                        {/* Zu dieser Tabelle gehrige Buttons */}\n                                        {relatedButtons.map((buttonPerm, buttonIndex) => {\n                                          const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                          const isButtonActive = buttonPerm.accessLevel === 'both';\n                                          const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                          return (\n                                            <div key={`button-permission-desktop-${buttonPerm.entity}-${buttonIndex}`} \n                                              className=\"flex items-center justify-between mt-2 pl-12 border-l-2 border-gray-300 dark:border-gray-600\">\n                                              <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                              <label className=\"inline-flex items-center cursor-pointer\">\n                                                <input\n                                                  type=\"checkbox\"\n                                                  className=\"sr-only peer\"\n                                                  checked={isButtonActive}\n                                                  onChange={() => {\n                                                    const newPermissions = [...formData.permissions];\n                                                    newPermissions[buttonPermIndex] = {\n                                                      ...buttonPerm,\n                                                      accessLevel: isButtonActive ? 'none' : 'both'\n                                                    };\n                                                    setFormData({ ...formData, permissions: newPermissions });\n                                                  }}\n                                                />\n                                                <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                                </div>\n                                              </label>\n                                            </div>\n                                          );\n                                        })}\n                                      </div>\n                                    );\n                                  })\n                                }\n                                  \n                                {/* Button-Berechtigungen ohne Tabelle-Zuordnung (am Ende) */}\n                                {formData.permissions\n                                  .filter(buttonPerm => \n                                    buttonPerm.entityType === 'button' && \n                                    buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                    !buttonToTableMapping[buttonPerm.entity]\n                                  )\n                                  .sort((a, b) => {\n                                    const aName = buttonDisplayNames[a.entity] || a.entity;\n                                    const bName = buttonDisplayNames[b.entity] || b.entity;\n                                    return aName.localeCompare(bName);\n                                  })\n                                  .map((buttonPerm, buttonIndex) => {\n                                    const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                    const isButtonActive = buttonPerm.accessLevel === 'both';\n                                    const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                    return (\n                                      <div key={`button-permission-desktop-${buttonPerm.entity}-${buttonIndex}`} \n                                        className=\"flex items-center justify-between mt-2 pl-6 border-l-2 border-gray-300 dark:border-gray-600\">\n                                        <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                        <label className=\"inline-flex items-center cursor-pointer\">\n                                          <input\n                                            type=\"checkbox\"\n                                            className=\"sr-only peer\"\n                                            checked={isButtonActive}\n                                            onChange={() => {\n                                              const newPermissions = [...formData.permissions];\n                                              newPermissions[buttonPermIndex] = {\n                                                ...buttonPerm,\n                                                accessLevel: isButtonActive ? 'none' : 'both'\n                                              };\n                                              setFormData({ ...formData, permissions: newPermissions });\n                                            }}\n                                          />\n                                          <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                          </div>\n                                        </label>\n                                      </div>\n                                    );\n                                  })\n                                }\n                              </div>\n                            );\n                          })\n                        }\n                      </div>\n                    </div>\n\n                    {/* Buttons */}\n                    <div className=\"flex justify-end pt-4 gap-2\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setIsModalOpen(false)}\n                        className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                        title=\"Abbrechen\"\n                      >\n                        <XMarkIcon className=\"h-5 w-5\" />\n                      </button>\n                      <button\n                        type=\"submit\"\n                        className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors\"\n                        title={editingRole ? 'Aktualisieren' : 'Erstellen'}\n                      >\n                        <CheckIcon className=\"h-5 w-5\" />\n                      </button>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default RoleManagementTab; ","import * as React from \"react\";\nfunction UserPlusIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(UserPlusIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction EnvelopeIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(EnvelopeIcon);\nexport default ForwardRef;","import React, { useState, useEffect } from 'react';\r\nimport { Dialog } from '@headlessui/react';\r\nimport { XMarkIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\r\nimport { organizationService } from '../../services/organizationService.ts';\r\nimport { CreateOrganizationRequest } from '../../types/organization.ts';\r\nimport useMessage from '../../hooks/useMessage.ts';\r\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\r\n\r\ninterface Props {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSuccess?: () => void;\r\n}\r\n\r\nconst CreateOrganizationModal: React.FC<Props> = ({ isOpen, onClose, onSuccess }) => {\r\n  const [formData, setFormData] = useState<CreateOrganizationRequest>({\r\n    name: '',\r\n    displayName: '',\r\n    domain: ''\r\n  });\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\r\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\r\n  const { openSidepane, closeSidepane } = useSidepane();\r\n  const { showMessage } = useMessage();\r\n\r\n  useEffect(() => {\r\n    const checkScreenSize = () => {\r\n      setIsMobile(window.innerWidth < 640);\r\n      setIsLargeScreen(window.innerWidth > 1070);\r\n    };\r\n    \r\n    checkScreenSize();\r\n    window.addEventListener('resize', checkScreenSize);\r\n    \r\n    return () => {\r\n      window.removeEventListener('resize', checkScreenSize);\r\n    };\r\n  }, []);\r\n\r\n  // Sidepane-Status verwalten\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      openSidepane();\r\n    } else {\r\n      closeSidepane();\r\n    }\r\n    \r\n    return () => {\r\n      closeSidepane();\r\n    };\r\n  }, [isOpen, openSidepane, closeSidepane]);\r\n\r\n  const validateForm = (): boolean => {\r\n    const newErrors: Record<string, string> = {};\r\n    \r\n    if (!formData.name.trim()) {\r\n      newErrors.name = 'Name ist erforderlich';\r\n    }\r\n    \r\n    if (!formData.displayName.trim()) {\r\n      newErrors.displayName = 'Anzeigename ist erforderlich';\r\n    }\r\n    \r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n    // Fehler fr dieses Feld lschen\r\n    if (errors[name]) {\r\n      setErrors(prev => ({ ...prev, [name]: '' }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      showMessage('Bitte fllen Sie alle erforderlichen Felder aus', 'error');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setLoading(true);\r\n      await organizationService.createOrganization(formData);\r\n      setErrors({});\r\n      showMessage('Organisation erfolgreich erstellt', 'success');\r\n      // Formular zurcksetzen\r\n      setFormData({\r\n        name: '',\r\n        displayName: '',\r\n        domain: ''\r\n      });\r\n      onClose();\r\n      if (onSuccess) {\r\n        onSuccess();\r\n      }\r\n    } catch (err: any) {\r\n      const errorMessage = err.response?.data?.message || 'Fehler beim Erstellen der Organisation';\r\n      showMessage(errorMessage, 'error');\r\n      setErrors({ submit: errorMessage });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    // Formular zurcksetzen\r\n    setFormData({\r\n      name: '',\r\n      displayName: '',\r\n      domain: ''\r\n    });\r\n    setErrors({});\r\n    onClose();\r\n  };\r\n\r\n  // Fr Mobile (unter 640px) - klassisches Modal\r\n  if (isMobile) {\r\n    return (\r\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\r\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\r\n        \r\n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\r\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\r\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\r\n                Neue Organisation erstellen\r\n              </Dialog.Title>\r\n              <button\r\n                onClick={handleClose}\r\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n              >\r\n                <XMarkIcon className=\"h-6 w-6\" />\r\n              </button>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} className=\"p-4\">\r\n              {errors.submit && (\r\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\r\n                  {errors.submit}\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label \r\n                    htmlFor=\"name\" \r\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                  >\r\n                    Name *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"name\"\r\n                    name=\"name\"\r\n                    value={formData.name}\r\n                    onChange={handleChange}\r\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\r\n                      errors.name \r\n                        ? 'border-red-300 dark:border-red-600' \r\n                        : 'border-gray-300 dark:border-gray-600'\r\n                    }`}\r\n                  />\r\n                  {errors.name && (\r\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.name}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label \r\n                    htmlFor=\"displayName\" \r\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                  >\r\n                    Anzeigename *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"displayName\"\r\n                    name=\"displayName\"\r\n                    value={formData.displayName}\r\n                    onChange={handleChange}\r\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\r\n                      errors.displayName \r\n                        ? 'border-red-300 dark:border-red-600' \r\n                        : 'border-gray-300 dark:border-gray-600'\r\n                    }`}\r\n                  />\r\n                  {errors.displayName && (\r\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label \r\n                    htmlFor=\"domain\" \r\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                  >\r\n                    Domain\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"domain\"\r\n                    name=\"domain\"\r\n                    value={formData.domain}\r\n                    onChange={handleChange}\r\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex justify-end pt-4 gap-2\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleClose}\r\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\r\n                  title=\"Abbrechen\"\r\n                >\r\n                  <XMarkIcon className=\"h-5 w-5\" />\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={loading}\r\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  title={loading ? 'Erstelle...' : 'Erstellen'}\r\n                >\r\n                  {loading ? (\r\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n                  ) : (\r\n                    <CheckIcon className=\"h-5 w-5\" />\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </Dialog.Panel>\r\n        </div>\r\n      </Dialog>\r\n    );\r\n  }\r\n\r\n  // Fr Desktop (ab 640px) - Sidepane\r\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\r\n  return (\r\n    <>\r\n      {/* Backdrop - nur wenn offen und <= 1070px */}\r\n      {isOpen && !isLargeScreen && (\r\n        <div \r\n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \r\n          aria-hidden=\"true\" \r\n          onClick={handleClose}\r\n          style={{\r\n            opacity: isOpen ? 1 : 0,\r\n            transition: 'opacity 300ms ease-out'\r\n          }}\r\n        />\r\n      )}\r\n      \r\n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\r\n      <div \r\n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\r\n        style={{\r\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\r\n          pointerEvents: isOpen ? 'auto' : 'none'\r\n        }}\r\n        aria-hidden={!isOpen}\r\n        role=\"dialog\"\r\n        aria-modal={isOpen}\r\n      >\r\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\r\n          <h2 className=\"text-lg font-semibold dark:text-white\">\r\n            Neue Organisation erstellen\r\n          </h2>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n          >\r\n            <XMarkIcon className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\r\n          {errors.submit && (\r\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\r\n              {errors.submit}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div>\r\n              <label \r\n                htmlFor=\"name\" \r\n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n              >\r\n                Name *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"name\"\r\n                name=\"name\"\r\n                value={formData.name}\r\n                onChange={handleChange}\r\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\r\n                  errors.name \r\n                    ? 'border-red-300 dark:border-red-600' \r\n                    : 'border-gray-300 dark:border-gray-600'\r\n                }`}\r\n              />\r\n              {errors.name && (\r\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.name}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label \r\n                htmlFor=\"displayName\" \r\n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n              >\r\n                Anzeigename *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"displayName\"\r\n                name=\"displayName\"\r\n                value={formData.displayName}\r\n                onChange={handleChange}\r\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\r\n                  errors.displayName \r\n                    ? 'border-red-300 dark:border-red-600' \r\n                    : 'border-gray-300 dark:border-gray-600'\r\n                }`}\r\n              />\r\n              {errors.displayName && (\r\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label \r\n                htmlFor=\"domain\" \r\n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n              >\r\n                Domain\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"domain\"\r\n                name=\"domain\"\r\n                value={formData.domain}\r\n                onChange={handleChange}\r\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex justify-end pt-4 gap-2\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleClose}\r\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\r\n                title=\"Abbrechen\"\r\n              >\r\n                <XMarkIcon className=\"h-5 w-5\" />\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                title={loading ? 'Erstelle...' : 'Erstellen'}\r\n              >\r\n                {loading ? (\r\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n                ) : (\r\n                  <CheckIcon className=\"h-5 w-5\" />\r\n                )}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CreateOrganizationModal; ","import React, { useState, useEffect, useRef } from 'react';\r\nimport { Dialog } from '@headlessui/react';\r\nimport { XMarkIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\r\nimport { organizationService } from '../../services/organizationService.ts';\r\nimport { CreateJoinRequestRequest, Organization } from '../../types/organization.ts';\r\nimport useMessage from '../../hooks/useMessage.ts';\r\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\r\n\r\ninterface Props {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSuccess?: () => void;\r\n}\r\n\r\nconst JoinOrganizationModal: React.FC<Props> = ({ isOpen, onClose, onSuccess }) => {\r\n  const [formData, setFormData] = useState<CreateJoinRequestRequest>({\r\n    organizationName: '',\r\n    message: ''\r\n  });\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [searching, setSearching] = useState<boolean>(false);\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\r\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\r\n  const { openSidepane, closeSidepane } = useSidepane();\r\n  const [organizations, setOrganizations] = useState<Organization[]>([]);\r\n  const [showDropdown, setShowDropdown] = useState<boolean>(false);\r\n  const [selectedOrganization, setSelectedOrganization] = useState<Organization | null>(null);\r\n  const searchTimeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n  const { showMessage } = useMessage();\r\n\r\n  useEffect(() => {\r\n    const checkScreenSize = () => {\r\n      setIsMobile(window.innerWidth < 640);\r\n      setIsLargeScreen(window.innerWidth > 1070);\r\n    };\r\n    \r\n    checkScreenSize();\r\n    window.addEventListener('resize', checkScreenSize);\r\n    \r\n    return () => {\r\n      window.removeEventListener('resize', checkScreenSize);\r\n    };\r\n  }, []);\r\n\r\n  // Sidepane-Status verwalten\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      openSidepane();\r\n    } else {\r\n      closeSidepane();\r\n    }\r\n    \r\n    return () => {\r\n      closeSidepane();\r\n    };\r\n  }, [isOpen, openSidepane, closeSidepane]);\r\n\r\n  // Click outside handler fr Dropdown\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n        setShowDropdown(false);\r\n      }\r\n    };\r\n\r\n    if (showDropdown) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, [showDropdown]);\r\n\r\n  const searchOrganizations = async (searchTerm: string) => {\r\n    if (searchTerm.length < 2) {\r\n      setOrganizations([]);\r\n      setShowDropdown(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setSearching(true);\r\n      const results = await organizationService.searchOrganizations(searchTerm);\r\n      setOrganizations(results);\r\n      setShowDropdown(true);\r\n    } catch (err: any) {\r\n      console.error('Fehler bei der Organisationen-Suche:', err);\r\n      setOrganizations([]);\r\n    } finally {\r\n      setSearching(false);\r\n    }\r\n  };\r\n\r\n  const handleOrganizationInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = e.target.value;\r\n    setFormData(prev => ({ ...prev, organizationName: value }));\r\n    setSelectedOrganization(null);\r\n    \r\n    // Fehler lschen\r\n    if (errors.organizationName) {\r\n      setErrors(prev => ({ ...prev, organizationName: '' }));\r\n    }\r\n\r\n    // Debounce fr Suche\r\n    if (searchTimeoutRef.current) {\r\n      clearTimeout(searchTimeoutRef.current);\r\n    }\r\n\r\n    searchTimeoutRef.current = setTimeout(() => {\r\n      searchOrganizations(value);\r\n    }, 300);\r\n  };\r\n\r\n  const handleSelectOrganization = (org: Organization) => {\r\n    setSelectedOrganization(org);\r\n    setFormData(prev => ({ ...prev, organizationName: org.name }));\r\n    setShowDropdown(false);\r\n    setOrganizations([]);\r\n  };\r\n\r\n  const handleMessageChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\r\n    setFormData(prev => ({ ...prev, message: e.target.value }));\r\n    if (errors.message) {\r\n      setErrors(prev => ({ ...prev, message: '' }));\r\n    }\r\n  };\r\n\r\n  const validateForm = (): boolean => {\r\n    const newErrors: Record<string, string> = {};\r\n    \r\n    if (!formData.organizationName.trim()) {\r\n      newErrors.organizationName = 'Organisationsname ist erforderlich';\r\n    } else if (!selectedOrganization) {\r\n      newErrors.organizationName = 'Bitte whlen Sie eine Organisation aus der Liste aus';\r\n    }\r\n    \r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      showMessage('Bitte fllen Sie alle erforderlichen Felder aus', 'error');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setLoading(true);\r\n      await organizationService.createJoinRequest(formData);\r\n      setErrors({});\r\n      showMessage('Beitrittsanfrage erfolgreich gesendet', 'success');\r\n      // Formular zurcksetzen\r\n      setFormData({\r\n        organizationName: '',\r\n        message: ''\r\n      });\r\n      setSelectedOrganization(null);\r\n      setOrganizations([]);\r\n      onClose();\r\n      if (onSuccess) {\r\n        onSuccess();\r\n      }\r\n    } catch (err: any) {\r\n      const errorMessage = err.response?.data?.message || 'Fehler beim Senden der Beitrittsanfrage';\r\n      showMessage(errorMessage, 'error');\r\n      setErrors({ submit: errorMessage });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    // Formular zurcksetzen\r\n    setFormData({\r\n      organizationName: '',\r\n      message: ''\r\n    });\r\n    setSelectedOrganization(null);\r\n    setOrganizations([]);\r\n    setErrors({});\r\n    setShowDropdown(false);\r\n    if (searchTimeoutRef.current) {\r\n      clearTimeout(searchTimeoutRef.current);\r\n    }\r\n    onClose();\r\n  };\r\n\r\n  // Fr Mobile (unter 640px) - klassisches Modal\r\n  if (isMobile) {\r\n    return (\r\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\r\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\r\n        \r\n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\r\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\r\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\r\n                Organisation beitreten\r\n              </Dialog.Title>\r\n              <button\r\n                onClick={handleClose}\r\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n              >\r\n                <XMarkIcon className=\"h-6 w-6\" />\r\n              </button>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} className=\"p-4\">\r\n              {errors.submit && (\r\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\r\n                  {errors.submit}\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"space-y-4\">\r\n                <div className=\"relative\" ref={dropdownRef}>\r\n                  <label \r\n                    htmlFor=\"organizationName\" \r\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                  >\r\n                    Organisation suchen *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"organizationName\"\r\n                    name=\"organizationName\"\r\n                    value={formData.organizationName}\r\n                    onChange={handleOrganizationInputChange}\r\n                    placeholder=\"Organisationsname eingeben...\"\r\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\r\n                      errors.organizationName \r\n                        ? 'border-red-300 dark:border-red-600' \r\n                        : 'border-gray-300 dark:border-gray-600'\r\n                    }`}\r\n                  />\r\n                  {errors.organizationName && (\r\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.organizationName}</p>\r\n                  )}\r\n                  \r\n                  {/* Autocomplete Dropdown */}\r\n                  {showDropdown && (organizations.length > 0 || searching) && (\r\n                    <div className=\"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto\">\r\n                      {searching ? (\r\n                        <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\r\n                          Suche...\r\n                        </div>\r\n                      ) : organizations.length > 0 ? (\r\n                        organizations.map(org => (\r\n                          <button\r\n                            key={org.id}\r\n                            type=\"button\"\r\n                            onClick={() => handleSelectOrganization(org)}\r\n                            className=\"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 focus:bg-gray-100 dark:focus:bg-gray-700 focus:outline-none\"\r\n                          >\r\n                            <div className=\"font-medium text-gray-900 dark:text-white\">\r\n                              {org.displayName || org.name}\r\n                            </div>\r\n                            {org.displayName && (\r\n                              <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                                {org.name}\r\n                              </div>\r\n                            )}\r\n                          </button>\r\n                        ))\r\n                      ) : (\r\n                        <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\r\n                          Keine Organisationen gefunden\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label \r\n                    htmlFor=\"message\" \r\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                  >\r\n                    Nachricht (optional)\r\n                  </label>\r\n                  <textarea\r\n                    id=\"message\"\r\n                    name=\"message\"\r\n                    value={formData.message || ''}\r\n                    onChange={handleMessageChange}\r\n                    rows={3}\r\n                    placeholder=\"Optional: Fgen Sie eine Nachricht hinzu...\"\r\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex justify-end pt-4 gap-2\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleClose}\r\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\r\n                  title=\"Abbrechen\"\r\n                >\r\n                  <XMarkIcon className=\"h-5 w-5\" />\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={loading}\r\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  title={loading ? 'Sende...' : 'Senden'}\r\n                >\r\n                  {loading ? (\r\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n                  ) : (\r\n                    <CheckIcon className=\"h-5 w-5\" />\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </Dialog.Panel>\r\n        </div>\r\n      </Dialog>\r\n    );\r\n  }\r\n\r\n  // Fr Desktop (ab 640px) - Sidepane\r\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\r\n  return (\r\n    <>\r\n      {/* Backdrop - nur wenn offen und <= 1070px */}\r\n      {isOpen && !isLargeScreen && (\r\n        <div \r\n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \r\n          aria-hidden=\"true\" \r\n          onClick={handleClose}\r\n          style={{\r\n            opacity: isOpen ? 1 : 0,\r\n            transition: 'opacity 300ms ease-out'\r\n          }}\r\n        />\r\n      )}\r\n      \r\n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\r\n      <div \r\n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\r\n        style={{\r\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\r\n          pointerEvents: isOpen ? 'auto' : 'none'\r\n        }}\r\n        aria-hidden={!isOpen}\r\n        role=\"dialog\"\r\n        aria-modal={isOpen}\r\n      >\r\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\r\n          <h2 className=\"text-lg font-semibold dark:text-white\">\r\n            Organisation beitreten\r\n          </h2>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n          >\r\n            <XMarkIcon className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\r\n          {errors.submit && (\r\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\r\n              {errors.submit}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div className=\"relative\" ref={dropdownRef}>\r\n              <label \r\n                htmlFor=\"organizationName\" \r\n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n              >\r\n                Organisation suchen *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"organizationName\"\r\n                name=\"organizationName\"\r\n                value={formData.organizationName}\r\n                onChange={handleOrganizationInputChange}\r\n                placeholder=\"Organisationsname eingeben...\"\r\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\r\n                  errors.organizationName \r\n                    ? 'border-red-300 dark:border-red-600' \r\n                    : 'border-gray-300 dark:border-gray-600'\r\n                }`}\r\n              />\r\n              {errors.organizationName && (\r\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.organizationName}</p>\r\n              )}\r\n              \r\n              {/* Autocomplete Dropdown */}\r\n              {showDropdown && (organizations.length > 0 || searching) && (\r\n                <div className=\"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto\">\r\n                  {searching ? (\r\n                    <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\r\n                      Suche...\r\n                    </div>\r\n                  ) : organizations.length > 0 ? (\r\n                    organizations.map(org => (\r\n                      <button\r\n                        key={org.id}\r\n                        type=\"button\"\r\n                        onClick={() => handleSelectOrganization(org)}\r\n                        className=\"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 focus:bg-gray-100 dark:focus:bg-gray-700 focus:outline-none\"\r\n                      >\r\n                        <div className=\"font-medium text-gray-900 dark:text-white\">\r\n                          {org.displayName || org.name}\r\n                        </div>\r\n                        {org.displayName && (\r\n                          <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                            {org.name}\r\n                          </div>\r\n                        )}\r\n                      </button>\r\n                    ))\r\n                  ) : (\r\n                    <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\r\n                      Keine Organisationen gefunden\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label \r\n                htmlFor=\"message\" \r\n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n              >\r\n                Nachricht (optional)\r\n              </label>\r\n              <textarea\r\n                id=\"message\"\r\n                name=\"message\"\r\n                value={formData.message || ''}\r\n                onChange={handleMessageChange}\r\n                rows={3}\r\n                placeholder=\"Optional: Fgen Sie eine Nachricht hinzu...\"\r\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex justify-end pt-4 gap-2\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleClose}\r\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\r\n                title=\"Abbrechen\"\r\n              >\r\n                <XMarkIcon className=\"h-5 w-5\" />\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                title={loading ? 'Sende...' : 'Senden'}\r\n              >\r\n                {loading ? (\r\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n                ) : (\r\n                  <CheckIcon className=\"h-5 w-5\" />\r\n                )}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default JoinOrganizationModal; ","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { BuildingOfficeIcon, PlusIcon, UserPlusIcon, UserGroupIcon, ShieldCheckIcon, EnvelopeIcon, ChartBarIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { useTranslation } from 'react-i18next';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { Organization, UpdateOrganizationRequest } from '../../types/organization.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport { useLanguage } from '../../hooks/useLanguage.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport CreateOrganizationModal from './CreateOrganizationModal.tsx';\nimport JoinOrganizationModal from './JoinOrganizationModal.tsx';\n\ninterface OrganizationStats {\n  currentUsers: number;\n  maxUsers: number;\n  availableSlots: number;\n  utilizationPercent: number;\n  _count: {\n    roles: number;\n    joinRequests: number;\n    invitations: number;\n  };\n}\n\nconst OrganizationSettings: React.FC = () => {\n  const [organization, setOrganization] = useState<Organization | null>(null);\n  const [stats, setStats] = useState<OrganizationStats | null>(null);\n  const [formData, setFormData] = useState<UpdateOrganizationRequest>({});\n  const [loading, setLoading] = useState<boolean>(true);\n  const [loadingStats, setLoadingStats] = useState<boolean>(false);\n  const [saving, setSaving] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState<boolean>(false);\n  const [isJoinModalOpen, setIsJoinModalOpen] = useState<boolean>(false);\n  const { canViewOrganization, canManageOrganization, loading: permissionsLoading } = usePermissions();\n  const { showMessage } = useMessage();\n  const { t } = useTranslation();\n  const { organizationLanguage, setOrganizationLanguage } = useLanguage();\n  const [selectedOrgLanguage, setSelectedOrgLanguage] = useState<string>('');\n  const [savingOrgLanguage, setSavingOrgLanguage] = useState<boolean>(false);\n\n  const fetchOrganization = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const org = await organizationService.getCurrentOrganization();\n      setOrganization(org);\n      setFormData({\n        displayName: org.displayName || '',\n        domain: org.domain || '',\n        logo: org.logo || '',\n        settings: org.settings\n      });\n      \n      // Lade Organisation-Sprache\n      try {\n        const langResponse = await organizationService.getOrganizationLanguage();\n        setSelectedOrgLanguage(langResponse.language || '');\n      } catch (langError) {\n        console.error('Fehler beim Laden der Organisation-Sprache:', langError);\n      }\n      \n      // Statistiken laden\n      try {\n        setLoadingStats(true);\n        const statsData = await organizationService.getOrganizationStats();\n        setStats(statsData);\n      } catch (statsErr: any) {\n        console.error('Fehler beim Laden der Statistiken:', statsErr);\n        // Statistiken-Fehler nicht kritisch, keine Error-Message\n      } finally {\n        setLoadingStats(false);\n      }\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('organization.loadError');\n      setError(errorMessage);\n      // showMessage wird hier verwendet, aber nicht in Dependencies\n      showMessage(errorMessage, 'error');\n    } finally {\n      setLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const hasInitialLoadRef = useRef(false);\n\n  useEffect(() => {\n    // Warte bis Berechtigungen geladen sind\n    if (permissionsLoading) {\n      return;\n    }\n\n    // Nur einmal beim initialen Load ausfhren\n    if (hasInitialLoadRef.current) {\n      return;\n    }\n\n    const hasPermission = canViewOrganization();\n    if (hasPermission) {\n      hasInitialLoadRef.current = true;\n      fetchOrganization();\n    } else {\n      setError(t('organization.noPermission'));\n      setLoading(false);\n      hasInitialLoadRef.current = true;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [permissionsLoading]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    // Fehler beim ndern lschen\n    if (error) {\n      setError(null);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!canManageOrganization()) {\n      const errorMessage = t('organization.noPermissionEdit');\n      setError(errorMessage);\n      showMessage(errorMessage, 'error');\n      return;\n    }\n    \n    try {\n      setSaving(true);\n      setError(null);\n      const updatedOrg = await organizationService.updateOrganization(formData);\n      setOrganization(updatedOrg);\n      showMessage(t('organization.updateSuccess'), 'success');\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('organization.updateError');\n      setError(errorMessage);\n      showMessage(errorMessage, 'error');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (permissionsLoading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('common.loadingPermissions')}</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (!canViewOrganization()) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n          <div className=\"p-4 text-red-600 dark:text-red-400\">\n          {t('organization.noPermission')}\n        </div>\n      </div>\n    );\n  }\n\n  const handleCreateSuccess = () => {\n    fetchOrganization();\n  };\n\n  const handleJoinSuccess = () => {\n    // Nach Beitritt: Organisation neu laden\n    fetchOrganization();\n  };\n\n  return (\n    <>\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 sm:p-6 mb-6\">\n        {/* Titelzeile mit Icon und Action-Buttons */}\n        <div className=\"flex items-center justify-between mb-4 sm:mb-4\">\n          <h2 className=\"text-xl sm:text-xl font-semibold flex items-center dark:text-white\">\n            <BuildingOfficeIcon className=\"h-6 w-6 sm:h-6 sm:w-6 mr-2 sm:mr-2\" />\n            {t('organization.settings')}\n          </h2>\n          \n          <div className=\"flex items-center gap-2\">\n            {/* Button: Organisation beitreten */}\n            <button\n              onClick={() => setIsJoinModalOpen(true)}\n              className=\"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n              title={t('organization.joinOrganization')}\n            >\n              <UserPlusIcon className=\"h-5 w-5\" />\n            </button>\n            \n            {/* Button: Neue Organisation erstellen */}\n            {canManageOrganization() && (\n              <button\n                onClick={() => setIsCreateModalOpen(true)}\n                className=\"p-2 bg-green-600 hover:bg-green-700 text-white rounded-md dark:bg-green-700 dark:hover:bg-green-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500\"\n                title={t('organization.createOrganization')}\n              >\n                <PlusIcon className=\"h-5 w-5\" />\n              </button>\n            )}\n          </div>\n        </div>\n\n      {/* Loading State */}\n      {loading ? (\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('common.loadingOrganization')}</span>\n        </div>\n      ) : (\n        <>\n          {/* Error Display */}\n          {error && (\n            <div className=\"mb-4 p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded\">\n              {error}\n            </div>\n          )}\n\n          {/* Formular */}\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label \n                htmlFor=\"displayName\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.displayName')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"displayName\"\n                name=\"displayName\"\n                value={formData.displayName || ''}\n                onChange={handleChange}\n                disabled={!canManageOrganization() || saving}\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed\"\n              />\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"domain\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.domain')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"domain\"\n                name=\"domain\"\n                value={formData.domain || ''}\n                onChange={handleChange}\n                disabled={!canManageOrganization() || saving}\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed\"\n              />\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"logo\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.logoUrl')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"logo\"\n                name=\"logo\"\n                value={formData.logo || ''}\n                onChange={handleChange}\n                disabled={!canManageOrganization() || saving}\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed\"\n              />\n            </div>\n\n            {/* Organisation-Sprache */}\n            {canManageOrganization() && (\n              <div className=\"border-t pt-4\">\n                <label \n                  htmlFor=\"organizationLanguage\" \n                  className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                >\n                  {t('organization.language')}\n                </label>\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">\n                  {t('organization.languageDescription')}\n                </p>\n                <select\n                  id=\"organizationLanguage\"\n                  value={selectedOrgLanguage || organizationLanguage || ''}\n                  onChange={async (e) => {\n                    const newLanguage = e.target.value;\n                    setSelectedOrgLanguage(newLanguage);\n                    if (newLanguage && newLanguage !== organizationLanguage) {\n                      setSavingOrgLanguage(true);\n                      try {\n                        await setOrganizationLanguage(newLanguage);\n                        showMessage(t('common.save'), 'success');\n                      } catch (error) {\n                        console.error('Fehler beim Speichern der Organisation-Sprache:', error);\n                        showMessage(t('worktime.messages.orgLanguageError'), 'error');\n                      } finally {\n                        setSavingOrgLanguage(false);\n                      }\n                    }\n                  }}\n                  disabled={!canManageOrganization() || savingOrgLanguage || saving}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed\"\n                >\n                  <option value=\"\">{t('settings.useOrganizationLanguage')} ({t('worktime.language.fallback')}: {t('worktime.language.german')})</option>\n                  <option value=\"de\">{t('worktime.language.german')}</option>\n                  <option value=\"es\">{t('worktime.language.spanish')}</option>\n                  <option value=\"en\">{t('worktime.language.english')}</option>\n                </select>\n              </div>\n            )}\n\n            {canManageOrganization() && (\n              <div className=\"flex items-center justify-end space-x-3 pt-4\">\n                <button\n                  type=\"submit\"\n                  disabled={saving}\n                  className=\"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title={saving ? t('organization.saving') : t('common.save')}\n                >\n                  {saving ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            )}\n          </form>\n\n          {/* Statistik-Cards */}\n          {stats && (\n            <div className=\"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700\">\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">{t('organization.statistics')}</h3>\n              {loadingStats ? (\n                <div className=\"flex items-center justify-center py-4\">\n                  <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-2\"></div>\n                  <span className=\"text-sm text-gray-500 dark:text-gray-400\">{t('common.loadingStatistics')}</span>\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {/* Benutzer Card */}\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0 bg-blue-100 dark:bg-blue-900/30 rounded-lg p-3\">\n                        <UserGroupIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.users')}</p>\n                        <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                          {stats.currentUsers} / {stats.maxUsers}\n                        </p>\n                            {stats.utilizationPercent !== undefined && (\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                            {stats.utilizationPercent}% {t('organization.utilizationPercent')}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Rollen Card */}\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0 bg-purple-100 dark:bg-purple-900/30 rounded-lg p-3\">\n                        <ShieldCheckIcon className=\"h-6 w-6 text-purple-600 dark:text-purple-400\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.roles')}</p>\n                        <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                          {stats._count.roles}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Beitrittsanfragen Card */}\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg p-3\">\n                        <EnvelopeIcon className=\"h-6 w-6 text-yellow-600 dark:text-yellow-400\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.joinRequests')}</p>\n                        <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                          {stats._count.joinRequests}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Einladungen Card */}\n                  {stats._count.invitations !== undefined && (\n                    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                      <div className=\"flex items-center\">\n                        <div className=\"flex-shrink-0 bg-green-100 dark:bg-green-900/30 rounded-lg p-3\">\n                          <EnvelopeIcon className=\"h-6 w-6 text-green-600 dark:text-green-400\" />\n                        </div>\n                        <div className=\"ml-4\">\n                          <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.invitations')}</p>\n                          <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                            {stats._count.invitations}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Auslastung Card */}\n                  {stats.utilizationPercent !== undefined && (\n                    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                      <div className=\"flex items-center\">\n                        <div className=\"flex-shrink-0 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg p-3\">\n                          <ChartBarIcon className=\"h-6 w-6 text-indigo-600 dark:text-indigo-400\" />\n                        </div>\n                        <div className=\"ml-4\">\n                          <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.utilization')}</p>\n                          <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                            {stats.utilizationPercent}%\n                          </p>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                            {stats.availableSlots} {t('organization.availableSlots')}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Info-Bereich */}\n          {organization && (\n            <div className=\"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700\">\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm\">\n                <div>\n                  <span className=\"text-gray-600 dark:text-gray-400\">{t('organization.organizationName')}:</span>\n                  <span className=\"ml-2 font-medium text-gray-900 dark:text-white\">{organization.name}</span>\n                </div>\n                {organization.subscriptionPlan && (\n                  <div>\n                    <span className=\"text-gray-600 dark:text-gray-400\">{t('organization.subscriptionPlan')}:</span>\n                    <span className=\"ml-2 font-medium text-gray-900 dark:text-white capitalize\">\n                      {organization.subscriptionPlan}\n                    </span>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </>\n      )}\n      </div>\n\n      {/* Modals */}\n      <CreateOrganizationModal\n        isOpen={isCreateModalOpen}\n        onClose={() => setIsCreateModalOpen(false)}\n        onSuccess={handleCreateSuccess}\n      />\n\n      <JoinOrganizationModal\n        isOpen={isJoinModalOpen}\n        onClose={() => setIsJoinModalOpen(false)}\n        onSuccess={handleJoinSuccess}\n      />\n    </>\n  );\n};\n\nexport default OrganizationSettings; ","import * as React from \"react\";\nfunction XCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(XCircleIcon);\nexport default ForwardRef;","import React, { useState, useEffect } from 'react';\r\nimport { Dialog } from '@headlessui/react';\r\nimport { XMarkIcon, CheckIcon, ArrowPathIcon, XCircleIcon } from '@heroicons/react/24/outline';\r\nimport { organizationService } from '../../services/organizationService.ts';\r\nimport { OrganizationJoinRequest, ProcessJoinRequestRequest } from '../../types/organization.ts';\r\nimport { roleApi } from '../../api/apiClient.ts';\r\nimport { Role } from '../../types/interfaces.ts';\r\nimport useMessage from '../../hooks/useMessage.ts';\r\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\r\n\r\ninterface Props {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  joinRequest: OrganizationJoinRequest | null;\r\n  onSuccess: () => void;\r\n}\r\n\r\nconst ProcessJoinRequestModal: React.FC<Props> = ({ isOpen, onClose, joinRequest, onSuccess }) => {\r\n  const [action, setAction] = useState<'approve' | 'reject'>('approve');\r\n  const [roleId, setRoleId] = useState<number | null>(null);\r\n  const [response, setResponse] = useState<string>('');\r\n  const [roles, setRoles] = useState<Role[]>([]);\r\n  const [loadingRoles, setLoadingRoles] = useState<boolean>(false);\r\n  const [saving, setSaving] = useState<boolean>(false);\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\r\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\r\n  const { openSidepane, closeSidepane } = useSidepane();\r\n  const { showMessage } = useMessage();\r\n\r\n  useEffect(() => {\r\n    const checkScreenSize = () => {\r\n      setIsMobile(window.innerWidth < 640);\r\n      setIsLargeScreen(window.innerWidth > 1070);\r\n    };\r\n    \r\n    checkScreenSize();\r\n    window.addEventListener('resize', checkScreenSize);\r\n    \r\n    return () => {\r\n      window.removeEventListener('resize', checkScreenSize);\r\n    };\r\n  }, []);\r\n\r\n  // Sidepane-Status verwalten\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      openSidepane();\r\n    } else {\r\n      closeSidepane();\r\n    }\r\n    \r\n    return () => {\r\n      closeSidepane();\r\n    };\r\n  }, [isOpen, openSidepane, closeSidepane]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && joinRequest) {\r\n      // Reset form when modal opens\r\n      setAction('approve');\r\n      setRoleId(null);\r\n      setResponse('');\r\n      setErrors({});\r\n      \r\n      // Load roles for the organization\r\n      if (joinRequest.organizationId) {\r\n        fetchRoles();\r\n      }\r\n    }\r\n  }, [isOpen, joinRequest]);\r\n\r\n  const fetchRoles = async () => {\r\n    try {\r\n      setLoadingRoles(true);\r\n      const response = await roleApi.getAll();\r\n      if (response.data && Array.isArray(response.data)) {\r\n        setRoles(response.data);\r\n      }\r\n    } catch (err: any) {\r\n      console.error('Fehler beim Laden der Rollen:', err);\r\n      showMessage('Fehler beim Laden der Rollen', 'error');\r\n    } finally {\r\n      setLoadingRoles(false);\r\n    }\r\n  };\r\n\r\n  const validateForm = (): boolean => {\r\n    const newErrors: Record<string, string> = {};\r\n    \r\n    if (action === 'approve' && !roleId) {\r\n      newErrors.roleId = 'Bitte whlen Sie eine Rolle aus';\r\n    }\r\n    \r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      showMessage('Bitte fllen Sie alle erforderlichen Felder aus', 'error');\r\n      return;\r\n    }\r\n    \r\n    if (!joinRequest) {\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setSaving(true);\r\n      const data: ProcessJoinRequestRequest = {\r\n        action,\r\n        response: response.trim() || undefined,\r\n        roleId: action === 'approve' ? roleId || undefined : undefined\r\n      };\r\n      \r\n      await organizationService.processJoinRequest(joinRequest.id, data);\r\n      showMessage(\r\n        action === 'approve' ? 'Beitrittsanfrage erfolgreich genehmigt' : 'Beitrittsanfrage erfolgreich abgelehnt',\r\n        'success'\r\n      );\r\n      \r\n      // Reset form\r\n      setAction('approve');\r\n      setRoleId(null);\r\n      setResponse('');\r\n      setErrors({});\r\n      \r\n      onClose();\r\n      onSuccess();\r\n    } catch (err: any) {\r\n      const errorMessage = err.response?.data?.message || 'Fehler beim Bearbeiten der Beitrittsanfrage';\r\n      showMessage(errorMessage, 'error');\r\n      setErrors({ submit: errorMessage });\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAction('approve');\r\n    setRoleId(null);\r\n    setResponse('');\r\n    setErrors({});\r\n    onClose();\r\n  };\r\n\r\n  if (!joinRequest) {\r\n    return null;\r\n  }\r\n\r\n  // Fr Mobile (unter 640px) - klassisches Modal\r\n  if (isMobile) {\r\n    return (\r\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\r\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\r\n        \r\n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\r\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\r\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\r\n                Beitrittsanfrage bearbeiten\r\n              </Dialog.Title>\r\n              <button\r\n                onClick={handleClose}\r\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n              >\r\n                <XMarkIcon className=\"h-6 w-6\" />\r\n              </button>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} className=\"p-4\">\r\n              {errors.submit && (\r\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\r\n                  {errors.submit}\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"space-y-4\">\r\n                {/* Antragsteller Info */}\r\n                <div className=\"p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\r\n                  <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Antragsteller:</p>\r\n                  <p className=\"text-sm text-gray-900 dark:text-white\">\r\n                    {joinRequest.requester.firstName} {joinRequest.requester.lastName}\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.requester.email}</p>\r\n                  {joinRequest.message && (\r\n                    <div className=\"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600\">\r\n                      <p className=\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">Nachricht:</p>\r\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.message}</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Aktion (Genehmigen/Ablehnen) */}\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                    Aktion *\r\n                  </label>\r\n                  <div className=\"flex gap-4 mt-2\">\r\n                    <label className=\"flex items-center\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        value=\"approve\"\r\n                        checked={action === 'approve'}\r\n                        onChange={(e) => {\r\n                          setAction(e.target.value as 'approve' | 'reject');\r\n                          setErrors({});\r\n                        }}\r\n                        className=\"mr-2 text-blue-600 focus:ring-blue-500\"\r\n                      />\r\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300\">Genehmigen</span>\r\n                    </label>\r\n                    <label className=\"flex items-center\">\r\n                      <input\r\n                        type=\"radio\"\r\n                        value=\"reject\"\r\n                        checked={action === 'reject'}\r\n                        onChange={(e) => {\r\n                          setAction(e.target.value as 'approve' | 'reject');\r\n                          setErrors({});\r\n                        }}\r\n                        className=\"mr-2 text-red-600 focus:ring-red-500\"\r\n                      />\r\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300\">Ablehnen</span>\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Rollenauswahl (nur bei Genehmigung) */}\r\n                {action === 'approve' && (\r\n                  <div>\r\n                    <label \r\n                      htmlFor=\"roleId\" \r\n                      className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                    >\r\n                      Rolle zuweisen *\r\n                    </label>\r\n                    {loadingRoles ? (\r\n                      <div className=\"flex items-center py-2\">\r\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"></div>\r\n                        <span className=\"text-sm text-gray-500 dark:text-gray-400\">Lade Rollen...</span>\r\n                      </div>\r\n                    ) : (\r\n                      <select\r\n                        id=\"roleId\"\r\n                        value={roleId || ''}\r\n                        onChange={(e) => {\r\n                          setRoleId(Number(e.target.value) || null);\r\n                          if (errors.roleId) {\r\n                            setErrors(prev => ({ ...prev, roleId: '' }));\r\n                          }\r\n                        }}\r\n                        className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\r\n                          errors.roleId \r\n                            ? 'border-red-300 dark:border-red-600' \r\n                            : 'border-gray-300 dark:border-gray-600'\r\n                        }`}\r\n                      >\r\n                        <option value=\"\">-- Rolle auswhlen --</option>\r\n                        {roles.map(role => (\r\n                          <option key={role.id} value={role.id}>\r\n                            {role.name} {role.description ? `- ${role.description}` : ''}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    )}\r\n                    {errors.roleId && (\r\n                      <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.roleId}</p>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Antwort-Message */}\r\n                <div>\r\n                  <label \r\n                    htmlFor=\"response\" \r\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                  >\r\n                    Antwort (optional)\r\n                  </label>\r\n                  <textarea\r\n                    id=\"response\"\r\n                    value={response}\r\n                    onChange={(e) => setResponse(e.target.value)}\r\n                    rows={3}\r\n                    placeholder={`Optional: ${action === 'approve' ? 'Willkommensnachricht' : 'Ablehnungsgrund'} hinzufgen...`}\r\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex justify-end pt-4 gap-2\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleClose}\r\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\r\n                  title=\"Abbrechen\"\r\n                >\r\n                  <XMarkIcon className=\"h-5 w-5\" />\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={saving}\r\n                  className={`p-2 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${\r\n                    action === 'approve'\r\n                      ? 'bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:ring-green-500'\r\n                      : 'bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 focus:ring-red-500'\r\n                  }`}\r\n                  title={saving ? (action === 'approve' ? 'Genehmige...' : 'Lehne ab...') : (action === 'approve' ? 'Genehmigen' : 'Ablehnen')}\r\n                >\r\n                  {saving ? (\r\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n                  ) : action === 'approve' ? (\r\n                    <CheckIcon className=\"h-5 w-5\" />\r\n                  ) : (\r\n                    <XCircleIcon className=\"h-5 w-5\" />\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </Dialog.Panel>\r\n        </div>\r\n      </Dialog>\r\n    );\r\n  }\r\n\r\n  // Fr Desktop (ab 640px) - Sidepane\r\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\r\n  return (\r\n    <>\r\n      {/* Backdrop - nur wenn offen und <= 1070px */}\r\n      {isOpen && !isLargeScreen && (\r\n        <div \r\n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \r\n          aria-hidden=\"true\" \r\n          onClick={handleClose}\r\n          style={{\r\n            opacity: isOpen ? 1 : 0,\r\n            transition: 'opacity 300ms ease-out'\r\n          }}\r\n        />\r\n      )}\r\n      \r\n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\r\n      <div \r\n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\r\n        style={{\r\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\r\n          pointerEvents: isOpen ? 'auto' : 'none'\r\n        }}\r\n        aria-hidden={!isOpen}\r\n        role=\"dialog\"\r\n        aria-modal={isOpen}\r\n      >\r\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\r\n          <h2 className=\"text-lg font-semibold dark:text-white\">\r\n            Beitrittsanfrage bearbeiten\r\n          </h2>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n          >\r\n            <XMarkIcon className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\r\n          {errors.submit && (\r\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\r\n              {errors.submit}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            {/* Antragsteller Info */}\r\n            <div className=\"p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\r\n              <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Antragsteller:</p>\r\n              <p className=\"text-sm text-gray-900 dark:text-white\">\r\n                {joinRequest.requester.firstName} {joinRequest.requester.lastName}\r\n              </p>\r\n              <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.requester.email}</p>\r\n              {joinRequest.message && (\r\n                <div className=\"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600\">\r\n                  <p className=\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">Nachricht:</p>\r\n                  <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.message}</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Aktion (Genehmigen/Ablehnen) */}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                Aktion *\r\n              </label>\r\n              <div className=\"flex gap-4 mt-2\">\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"radio\"\r\n                    value=\"approve\"\r\n                    checked={action === 'approve'}\r\n                    onChange={(e) => {\r\n                      setAction(e.target.value as 'approve' | 'reject');\r\n                      setErrors({});\r\n                    }}\r\n                    className=\"mr-2 text-blue-600 focus:ring-blue-500\"\r\n                  />\r\n                  <span className=\"text-sm text-gray-700 dark:text-gray-300\">Genehmigen</span>\r\n                </label>\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"radio\"\r\n                    value=\"reject\"\r\n                    checked={action === 'reject'}\r\n                    onChange={(e) => {\r\n                      setAction(e.target.value as 'approve' | 'reject');\r\n                      setErrors({});\r\n                    }}\r\n                    className=\"mr-2 text-red-600 focus:ring-red-500\"\r\n                  />\r\n                  <span className=\"text-sm text-gray-700 dark:text-gray-300\">Ablehnen</span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Rollenauswahl (nur bei Genehmigung) */}\r\n            {action === 'approve' && (\r\n              <div>\r\n                <label \r\n                  htmlFor=\"roleId\" \r\n                  className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                >\r\n                  Rolle zuweisen *\r\n                </label>\r\n                {loadingRoles ? (\r\n                  <div className=\"flex items-center py-2\">\r\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"></div>\r\n                    <span className=\"text-sm text-gray-500 dark:text-gray-400\">Lade Rollen...</span>\r\n                  </div>\r\n                ) : (\r\n                  <select\r\n                    id=\"roleId\"\r\n                    value={roleId || ''}\r\n                    onChange={(e) => {\r\n                      setRoleId(Number(e.target.value) || null);\r\n                      if (errors.roleId) {\r\n                        setErrors(prev => ({ ...prev, roleId: '' }));\r\n                      }\r\n                    }}\r\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\r\n                      errors.roleId \r\n                        ? 'border-red-300 dark:border-red-600' \r\n                        : 'border-gray-300 dark:border-gray-600'\r\n                    }`}\r\n                  >\r\n                    <option value=\"\">-- Rolle auswhlen --</option>\r\n                    {roles.map(role => (\r\n                      <option key={role.id} value={role.id}>\r\n                        {role.name} {role.description ? `- ${role.description}` : ''}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                )}\r\n                {errors.roleId && (\r\n                  <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.roleId}</p>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Antwort-Message */}\r\n            <div>\r\n              <label \r\n                htmlFor=\"response\" \r\n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n              >\r\n                Antwort (optional)\r\n              </label>\r\n              <textarea\r\n                id=\"response\"\r\n                value={response}\r\n                onChange={(e) => setResponse(e.target.value)}\r\n                rows={3}\r\n                placeholder={`Optional: ${action === 'approve' ? 'Willkommensnachricht' : 'Ablehnungsgrund'} hinzufgen...`}\r\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex justify-end pt-4 gap-2\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleClose}\r\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\r\n                title=\"Abbrechen\"\r\n              >\r\n                <XMarkIcon className=\"h-5 w-5\" />\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={saving}\r\n                className={`p-2 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${\r\n                  action === 'approve'\r\n                    ? 'bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:ring-green-500'\r\n                    : 'bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 focus:ring-red-500'\r\n                }`}\r\n                title={saving ? (action === 'approve' ? 'Genehmige...' : 'Lehne ab...') : (action === 'approve' ? 'Genehmigen' : 'Ablehnen')}\r\n              >\r\n                {saving ? (\r\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n                ) : action === 'approve' ? (\r\n                  <CheckIcon className=\"h-5 w-5\" />\r\n                ) : (\r\n                  <XCircleIcon className=\"h-5 w-5\" />\r\n                )}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProcessJoinRequestModal;\r\n\r\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\r\nimport { UserPlusIcon, FunnelIcon, PencilIcon } from '@heroicons/react/24/outline';\r\nimport { organizationService } from '../../services/organizationService.ts';\r\nimport { OrganizationJoinRequest } from '../../types/organization.ts';\r\nimport { usePermissions } from '../../hooks/usePermissions.ts';\r\nimport useMessage from '../../hooks/useMessage.ts';\r\nimport FilterPane from '../FilterPane.tsx';\r\nimport { FilterCondition } from '../FilterRow.tsx';\r\nimport ProcessJoinRequestModal from './ProcessJoinRequestModal.tsx';\r\n\r\n// Status-Badge Funktionen\r\nconst getStatusColor = (status: string) => {\r\n  switch (status) {\r\n    case 'pending':\r\n      return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300';\r\n    case 'approved':\r\n      return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300';\r\n    case 'rejected':\r\n      return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300';\r\n    case 'withdrawn':\r\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n    default:\r\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n  }\r\n};\r\n\r\nconst getStatusText = (status: string) => {\r\n  switch (status) {\r\n    case 'pending':\r\n      return 'Ausstehend';\r\n    case 'approved':\r\n      return 'Genehmigt';\r\n    case 'rejected':\r\n      return 'Abgelehnt';\r\n    case 'withdrawn':\r\n      return 'Zurckgezogen';\r\n    default:\r\n      return status;\r\n  }\r\n};\r\n\r\nconst JOIN_REQUESTS_TABLE_ID = 'join-requests-table';\r\n\r\nconst JoinRequestsList: React.FC = () => {\r\n  const [joinRequests, setJoinRequests] = useState<OrganizationJoinRequest[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isFilterPanelOpen, setIsFilterPanelOpen] = useState<boolean>(false);\r\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\r\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\r\n  const [statusFilter, setStatusFilter] = useState<string>('all');\r\n  const [isProcessModalOpen, setIsProcessModalOpen] = useState<boolean>(false);\r\n  const [selectedRequest, setSelectedRequest] = useState<OrganizationJoinRequest | null>(null);\r\n  \r\n  const { canViewJoinRequests, canManageJoinRequests, loading: permissionsLoading } = usePermissions();\r\n  const { showMessage } = useMessage();\r\n  const mountedRef = useRef(true);\r\n  const hasInitialLoadRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      mountedRef.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // Warte bis Berechtigungen geladen sind\r\n    if (permissionsLoading) {\r\n      return;\r\n    }\r\n\r\n    // Nur einmal beim initialen Load ausfhren\r\n    if (hasInitialLoadRef.current) {\r\n      return;\r\n    }\r\n\r\n    // Prfe Berechtigung direkt\r\n    const hasPermission = canViewJoinRequests();\r\n    if (!hasPermission) {\r\n      setError('Keine Berechtigung zum Anzeigen der Beitrittsanfragen');\r\n      setLoading(false);\r\n      hasInitialLoadRef.current = true;\r\n      return;\r\n    }\r\n\r\n    // Markiere als geladen, BEVOR der Request startet\r\n    hasInitialLoadRef.current = true;\r\n    \r\n    const fetchJoinRequests = async () => {\r\n      if (!mountedRef.current) return;\r\n      \r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        const requests = await organizationService.getJoinRequests();\r\n        \r\n        if (!mountedRef.current) return;\r\n        \r\n        setJoinRequests(requests);\r\n      } catch (err: any) {\r\n        if (!mountedRef.current) return;\r\n        \r\n        const errorMessage = err.response?.data?.message || 'Fehler beim Laden der Beitrittsanfragen';\r\n        setError(errorMessage);\r\n        // showMessage nur auerhalb useEffect verwenden, um Re-Renders zu vermeiden\r\n        // Verwende setTimeout, um es asynchron auszufhren\r\n        setTimeout(() => {\r\n          showMessage(errorMessage, 'error');\r\n        }, 0);\r\n      } finally {\r\n        if (mountedRef.current) {\r\n          setLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchJoinRequests();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [permissionsLoading]);\r\n\r\n  const handleOpenProcessModal = (request: OrganizationJoinRequest) => {\r\n    if (!canManageJoinRequests()) {\r\n      const errorMessage = 'Keine Berechtigung zum Bearbeiten der Beitrittsanfragen';\r\n      setError(errorMessage);\r\n      showMessage(errorMessage, 'error');\r\n      return;\r\n    }\r\n    setSelectedRequest(request);\r\n    setIsProcessModalOpen(true);\r\n  };\r\n\r\n  const handleProcessSuccess = async () => {\r\n    // Neulade die Liste nach erfolgreicher Bearbeitung\r\n    // Reset das Flag, damit neu geladen werden kann\r\n    hasInitialLoadRef.current = false;\r\n    \r\n    try {\r\n      setLoading(true);\r\n      const requests = await organizationService.getJoinRequests();\r\n      setJoinRequests(requests);\r\n      setError(null);\r\n      hasInitialLoadRef.current = true;\r\n    } catch (err: any) {\r\n      const errorMessage = err.response?.data?.message || 'Fehler beim Laden der Beitrittsanfragen';\r\n      setError(errorMessage);\r\n      hasInitialLoadRef.current = true;\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Filter-Funktionen\r\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\r\n    setFilterConditions(conditions);\r\n    setFilterLogicalOperators(operators);\r\n  };\r\n\r\n  const resetFilterConditions = () => {\r\n    setFilterConditions([]);\r\n    setFilterLogicalOperators([]);\r\n    setStatusFilter('all');\r\n  };\r\n\r\n  const getActiveFilterCount = () => {\r\n    let count = 0;\r\n    if (statusFilter !== 'all') count++;\r\n    if (filterConditions.length > 0) count++;\r\n    return count;\r\n  };\r\n\r\n  // Gefilterte Join-Requests\r\n  const filteredJoinRequests = useMemo(() => {\r\n    let filtered = [...joinRequests];\r\n\r\n    // Status-Filter\r\n    if (statusFilter !== 'all') {\r\n      filtered = filtered.filter(request => request.status === statusFilter);\r\n    }\r\n\r\n    // Weitere Filter aus FilterPane\r\n    if (filterConditions.length > 0) {\r\n      filtered = filterConditions.reduce((acc, condition, index) => {\r\n        if (!condition.column || condition.value === null || condition.value === '') {\r\n          return acc;\r\n        }\r\n\r\n        const operator = condition.operator;\r\n        const value = condition.value;\r\n\r\n        return acc.filter(request => {\r\n          switch (condition.column) {\r\n            case 'requester':\r\n              const requesterName = `${request.requester.firstName} ${request.requester.lastName}`.toLowerCase();\r\n              const requesterEmail = request.requester.email?.toLowerCase() || '';\r\n              const searchValue = String(value).toLowerCase();\r\n              \r\n              if (operator === 'contains') {\r\n                return requesterName.includes(searchValue) || requesterEmail.includes(searchValue);\r\n    }\r\n              return false;\r\n\r\n            case 'message':\r\n              const message = request.message?.toLowerCase() || '';\r\n              const msgValue = String(value).toLowerCase();\r\n              \r\n              if (operator === 'contains') {\r\n                return message.includes(msgValue);\r\n              }\r\n              return false;\r\n\r\n            default:\r\n              return true;\r\n          }\r\n        });\r\n      }, filtered);\r\n    }\r\n\r\n    return filtered;\r\n  }, [joinRequests, statusFilter, filterConditions]);\r\n\r\n  if (permissionsLoading) {\r\n    return (\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\r\n        <div className=\"flex items-center justify-center py-8\">\r\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">Lade Berechtigungen...</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!canViewJoinRequests()) {\r\n    return (\r\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\r\n      <div className=\"p-4 text-red-600 dark:text-red-400\">\r\n        Keine Berechtigung zum Anzeigen der Beitrittsanfragen.\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 sm:p-6 mb-6\">\r\n      {/* Titelzeile mit Icon und Filter-Button */}\r\n      <div className=\"flex items-center justify-between mb-4 sm:mb-4\">\r\n        <h2 className=\"text-xl sm:text-xl font-semibold flex items-center dark:text-white\">\r\n          <UserPlusIcon className=\"h-6 w-6 sm:h-6 sm:w-6 mr-2 sm:mr-2\" />\r\n          Beitrittsanfragen\r\n        </h2>\r\n        \r\n        <div className=\"flex items-center gap-2\">\r\n          {/* Status-Filter */}\r\n          <select\r\n            value={statusFilter}\r\n            onChange={(e) => setStatusFilter(e.target.value)}\r\n            className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            <option value=\"all\">Alle Status</option>\r\n            <option value=\"pending\">Ausstehend</option>\r\n            <option value=\"approved\">Genehmigt</option>\r\n            <option value=\"rejected\">Abgelehnt</option>\r\n            <option value=\"withdrawn\">Zurckgezogen</option>\r\n          </select>\r\n\r\n          {/* Filter-Button */}\r\n          <button\r\n            className={`relative p-2 rounded-md border ${\r\n              getActiveFilterCount() > 0\r\n                ? 'border-blue-300 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400'\r\n                : 'border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700'\r\n            }`}\r\n            onClick={() => setIsFilterPanelOpen(!isFilterPanelOpen)}\r\n            title=\"Filter\"\r\n          >\r\n            <FunnelIcon className=\"h-5 w-5\" />\r\n            {getActiveFilterCount() > 0 && (\r\n              <span className=\"absolute -top-1 -right-1 w-5 h-5 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center\">\r\n                {getActiveFilterCount()}\r\n              </span>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filter-Panel */}\r\n      {isFilterPanelOpen && (\r\n        <div className=\"mb-4\">\r\n          <FilterPane\r\n            columns={[\r\n              { id: 'requester', label: 'Antragsteller' },\r\n              { id: 'message', label: 'Nachricht' }\r\n            ]}\r\n            onApply={applyFilterConditions}\r\n            onReset={resetFilterConditions}\r\n            savedConditions={filterConditions}\r\n            savedOperators={filterLogicalOperators}\r\n            tableId={JOIN_REQUESTS_TABLE_ID}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Error Display */}\r\n      {error && (\r\n        <div className=\"mb-4 p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* Loading State */}\r\n      {loading ? (\r\n        <div className=\"flex items-center justify-center py-8\">\r\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">Lade Beitrittsanfragen...</span>\r\n        </div>\r\n      ) : filteredJoinRequests.length === 0 ? (\r\n        <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\r\n          {joinRequests.length === 0 \r\n            ? 'Keine Beitrittsanfragen vorhanden.'\r\n            : 'Keine Beitrittsanfragen entsprechen den Filterkriterien.'}\r\n        </div>\r\n      ) : (\r\n        /* Cards fr Join-Requests */\r\n        <div className=\"space-y-4\">\r\n          {filteredJoinRequests.map(request => (\r\n            <div\r\n              key={request.id}\r\n              className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\"\r\n            >\r\n              <div className=\"flex items-start justify-between\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <div>\r\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\r\n                        {request.requester.firstName} {request.requester.lastName}\r\n                      </h3>\r\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                        {request.requester.email}\r\n              </p>\r\n                    </div>\r\n                    <span className={`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(request.status)}`}>\r\n                      {getStatusText(request.status)}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {request.message && (\r\n                    <div className=\"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\r\n                      <p className=\"text-sm text-gray-700 dark:text-gray-300\">\r\n                        <span className=\"font-medium\">Nachricht:</span> {request.message}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n\r\n                  {request.response && (\r\n                    <div className=\"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-700\">\r\n                      <p className=\"text-sm text-blue-700 dark:text-blue-300\">\r\n                        <span className=\"font-medium\">Antwort:</span> {request.response}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n\r\n              {request.status === 'pending' && canManageJoinRequests() && (\r\n                    <div className=\"mt-4 flex items-center gap-2\">\r\n                  <button \r\n                        onClick={() => handleOpenProcessModal(request)}\r\n                        className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center\"\r\n                      >\r\n                        <PencilIcon className=\"h-4 w-4 mr-1\" />\r\n                        Bearbeiten\r\n                  </button>\r\n                </div>\r\n              )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Process Join Request Modal */}\r\n      <ProcessJoinRequestModal\r\n        isOpen={isProcessModalOpen}\r\n        onClose={() => {\r\n          setIsProcessModalOpen(false);\r\n          setSelectedRequest(null);\r\n        }}\r\n        joinRequest={selectedRequest}\r\n        onSuccess={handleProcessSuccess}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default JoinRequestsList; ","import React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { UserGroupIcon, UserIcon, ShieldCheckIcon } from '@heroicons/react/24/outline';\nimport UserManagementTab from '../components/UserManagementTab.tsx';\nimport RoleManagementTab from '../components/RoleManagementTab.tsx';\nimport useMessage from '../hooks/useMessage.ts';\nimport OrganizationSettings from '../components/organization/OrganizationSettings.tsx';\nimport JoinRequestsList from '../components/organization/JoinRequestsList.tsx';\n\nconst UserManagement: React.FC = () => {\n  const { t } = useTranslation();\n  // Tab-Zustand fr Navigation zwischen Benutzer-, Rollen- und Organisationsverwaltung\n  const [activeTab, setActiveTab] = useState<'users' | 'roles' | 'organization'>('users');\n  \n  // Gemeinsame States\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const { showMessage } = useMessage();\n\n  const { isAdmin } = usePermissions();\n\n  // Tab-Wechsel Handler - Fehler beim Wechsel zurcksetzen\n  const handleTabChange = (tab: 'users' | 'roles' | 'organization') => {\n    setActiveTab(tab);\n    setError(null);\n  };\n\n  // Gemeinsame Fehlerbehandlung\n  const handleError = (err: any) => {\n    let message = 'Ein Fehler ist aufgetreten';\n    if (err.response?.data?.message) {\n      message = err.response.data.message;\n    } else if (err instanceof Error) {\n      message = err.message;\n    }\n    setError(message);\n    showMessage(message, 'error');\n  };\n\n  if (!isAdmin()) {\n    return <div className=\"p-4 text-red-600 dark:text-red-400\">{t('userManagement.noPermission')}</div>;\n  }\n\n  return (\n    <div className=\"min-h-screen dark:bg-gray-900\">\n      <div className=\"container mx-auto py-6\">\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n          {/* Header mit Icon */}\n          <div className=\"flex items-center mb-6\">\n            <UserGroupIcon className=\"h-6 w-6 mr-2 dark:text-white\" />\n            <h2 className=\"text-xl font-semibold dark:text-white\">{t('userManagement.title')}</h2>\n          </div>\n\n          {/* Tabs fr Navigation */}\n          <div className=\"border-b border-gray-200 dark:border-gray-700 mb-6\">\n            <nav className=\"-mb-px flex space-x-8\">\n              <button\n                className={`${\n                  activeTab === 'users'\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                    : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`}\n                onClick={() => handleTabChange('users')}\n              >\n                <UserIcon className=\"h-5 w-5 mr-2\" />\n                {t('userManagement.tabs.users')}\n              </button>\n              <button\n                className={`${\n                  activeTab === 'roles'\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                    : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`}\n                onClick={() => handleTabChange('roles')}\n              >\n                <ShieldCheckIcon className=\"h-5 w-5 mr-2\" />\n                {t('userManagement.tabs.roles')}\n              </button>\n              {/* Organisation Tab nur fr Benutzer mit entsprechenden Berechtigungen */}\n              {isAdmin() && (\n                <button\n                  className={`${\n                    activeTab === 'organization'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                  } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`}\n                  onClick={() => handleTabChange('organization')}\n                >\n                  <UserGroupIcon className=\"h-5 w-5 mr-2\" />\n                  {t('userManagement.tabs.organization')}\n                </button>\n              )}\n            </nav>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4\">\n              <p className=\"font-bold\">{t('userManagement.error')}</p>\n              <p>{error}</p>\n            </div>\n          )}\n\n          {loading && <div className=\"p-4 dark:text-gray-300\">{t('userManagement.loading')}</div>}\n\n          {/* Tab Inhalte */}\n          <div className=\"mt-6\">\n            {activeTab === 'users' ? (\n              <UserManagementTab onError={handleError} />\n            ) : activeTab === 'roles' ? (\n              <RoleManagementTab onError={handleError} />\n            ) : activeTab === 'organization' && isAdmin() ? (\n              <div className=\"space-y-6\">\n                <OrganizationSettings />\n                <JoinRequestsList />\n              </div>\n            ) : (\n              <div className=\"p-4 text-red-600 dark:text-red-400\">\n                {t('userManagement.noPermissionForPage')}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default UserManagement; "],"names":["ChevronDownIcon","_ref","svgRef","title","titleId","props","React","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","id","strokeLinecap","strokeLinejoin","d","ChartBarIcon","UserIcon","useLanguage","t","i18n","useTranslation","languageContext","useLanguageContext","activeLanguage","organizationLanguage","setUserLanguage","setOrganizationLanguage","isLoading","BuildingOfficeIcon","FunnelIcon","PlusIcon","ShieldCheckIcon","_ref2","onError","COUNTRIES","code","name","PAYROLL_COUNTRIES","LANGUAGES","users","setUsers","useState","selectedUser","setSelectedUser","userFormData","setUserFormData","isEditingUser","setIsEditingUser","selectedRoles","setSelectedRoles","isDebugMode","setIsDebugMode","roleWarning","setRoleWarning","showMessage","useMessage","isAdmin","usePermissions","roles","setRoles","loadingRoles","setLoadingRoles","activeUserTab","setActiveUserTab","isCreateModalOpen","setIsCreateModalOpen","isMobile","setIsMobile","window","innerWidth","isLargeScreen","setIsLargeScreen","openSidepane","closeSidepane","useSidepane","newUserFormData","setNewUserFormData","email","password","firstName","lastName","useEffect","handleResize","addEventListener","removeEventListener","fetchUsers","async","response","userApi","getAll","data","err","handleError","fetchUserDetails","userId","isNaN","console","log","getById","userData","birthday","Date","toISOString","split","roleIds","Array","isArray","length","role","map","userRole","roleId","warn","r","fallbackRoles","description","permissions","roleApi","error","fetchRoles","_err$response","_err$response$data","message","Error","includes","handleUserInputChange","e","value","type","target","finalValue","Number","toggleRole","isRoleSelected","newSelectedRoles","filter","updateRoles","handleNewUserInputChange","handleCreateUser","preventDefault","match","create","prevUsers","_err$response5","_err$response5$data","errorMessage","_jsxs","className","children","_jsx","onClick","style","width","height","htmlFor","onChange","event","parseInt","user","username","UserCircleIcon","DocumentTextIcon","onSubmit","_userFormData$usernam","_userFormData$email","_userFormData$firstNa","_userFormData$lastNam","trim","dataToSend","salary","undefined","parseFloat","normalWorkingHours","hourlyRate","toString","monthlySalary","update","updatedData","_err$response2","_err$response4","status","_err$response3","_err$response3$data","errorMsg","bankDetails","contract","step","country","language","payrollCountry","contractType","CONTRACT_TYPES","min","placeholder","handleCancelEdit","XMarkIcon","CheckIcon","IdentificationDocumentList","some","join","isFixedRole","fillRule","clipRule","_Fragment","Dialog","open","onClose","Panel","Title","required","opacity","transition","pointerEvents","alwaysVisiblePages","defaultPages","defaultTables","defaultButtons","tableToPageMapping","buttonToPageMapping","buttonToTableMapping","ROLES_TABLE_ID","RoleCard","onEdit","onDelete","canEdit","canDelete","PencilIcon","TrashIcon","perm","accessLevel","slice","permission","entity","entityType","onRolesChange","readOnly","isModalOpen","setIsModalOpen","editingRole","setEditingRole","loading","setLoading","pageDisplayNames","useMemo","tableDisplayNames","buttonDisplayNames","formData","setFormData","page","table","button","setError","hasPermission","searchTerm","setSearchTerm","isFilterModalOpen","setIsFilterModalOpen","filterConditions","setFilterConditions","filterLogicalOperators","setFilterLogicalOperators","activeFilterName","setActiveFilterName","selectedFilterId","setSelectedFilterId","handleValidationError","useError","isAddPermissionModalOpen","setIsAddPermissionModalOpen","selectedPermission","setSelectedPermission","displayLimit","setDisplayLimit","useCallback","component","action","handleSubmit","filteredPermissions","category","ErrorCategory","PERMISSION","updateError","meta","cause","createError","resetForm","handleDelete","confirm","delete","deleteError","refreshError","prepareRoleForEditing","allPermissions","forEach","existingPermIndex","findIndex","p","setAllPagePermissions","newPermissions","permIndex","indexOf","setAllTablePermissions","setAllButtonPermissions","getActiveFilterCount","filteredAndSortedRoles","searchLower","toLowerCase","result","i","condition","conditionMet","column","operator","startsWith","count","sort","a","b","localeCompare","localStorage","getItem","existingFilters","axiosInstance","get","API_ENDPOINTS","SAVED_FILTERS","BY_TABLE","alleFilter","tableId","conditions","operators","post","BASE","createStandardFilters","find","applyFilterConditions","setInitialFilter","resetFilterConditions","FilterPane","columns","label","onApply","onReset","savedConditions","savedOperators","SavedFilterTags","onSelectFilter","onFilterChange","handleFilterChange","defaultFilterName","prevLimit","index","isActive","checked","disabled","tablePerm","aName","bName","tableIndex","tablePermIndex","isTableActive","tableEntity","tableDisplayName","relatedButtons","buttonPerm","order","aIndex","bIndex","buttonIndex","buttonPermIndex","isButtonActive","buttonDisplayName","UserPlusIcon","EnvelopeIcon","isOpen","onSuccess","displayName","domain","errors","setErrors","checkScreenSize","handleChange","prev","validateForm","newErrors","keys","organizationService","createOrganization","submit","handleClose","ArrowPathIcon","organizationName","searching","setSearching","organizations","setOrganizations","showDropdown","setShowDropdown","selectedOrganization","setSelectedOrganization","searchTimeoutRef","useRef","dropdownRef","handleClickOutside","current","contains","document","handleOrganizationInputChange","clearTimeout","setTimeout","results","searchOrganizations","handleSelectOrganization","org","handleMessageChange","createJoinRequest","rows","OrganizationSettings","organization","setOrganization","stats","setStats","loadingStats","setLoadingStats","saving","setSaving","isJoinModalOpen","setIsJoinModalOpen","canViewOrganization","canManageOrganization","permissionsLoading","selectedOrgLanguage","setSelectedOrgLanguage","savingOrgLanguage","setSavingOrgLanguage","fetchOrganization","getCurrentOrganization","logo","settings","langResponse","getOrganizationLanguage","langError","statsData","getOrganizationStats","statsErr","hasInitialLoadRef","updatedOrg","updateOrganization","_err$response2$data","newLanguage","UserGroupIcon","currentUsers","maxUsers","utilizationPercent","_count","joinRequests","invitations","availableSlots","subscriptionPlan","CreateOrganizationModal","handleCreateSuccess","JoinOrganizationModal","handleJoinSuccess","XCircleIcon","joinRequest","setAction","setRoleId","setResponse","organizationId","processJoinRequest","requester","getStatusColor","getStatusText","JoinRequestsList","setJoinRequests","isFilterPanelOpen","setIsFilterPanelOpen","statusFilter","setStatusFilter","isProcessModalOpen","setIsProcessModalOpen","selectedRequest","setSelectedRequest","canViewJoinRequests","canManageJoinRequests","mountedRef","requests","getJoinRequests","fetchJoinRequests","filteredJoinRequests","filtered","request","reduce","acc","_request$requester$em","_request$message","requesterName","requesterEmail","searchValue","String","msgValue","handleOpenProcessModal","ProcessJoinRequestModal","UserManagement","activeTab","setActiveTab","handleTabChange","tab","UserManagementTab","RoleManagementTab"],"sourceRoot":""}