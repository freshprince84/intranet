"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[876],{7876:(e,a,t)=>{t.r(a),t.d(a,{default:()=>L});var r=t(9379),s=t(5043),l=t(4117),n=t(1637),c=t(905),i=t(35),d=t(6600),o=t(5316),x=t(8533),h=t(9347),u=t(1906),m=t(1369),g=t(4129),b=t(7012),k=t(2704),y=t(7504),f=t(1252),j=t(9399),N=t(3867),A=t(2903),w=t(9422),p=t(9248),v=t(5620),C=t(4399),B=t(4057),S=t(6511),E=t(887),P=t(3216),V=t(5648),I=t(579);const L=()=>{const{t:e,i18n:a}=(0,l.Bd)(),{activeLanguage:t}=(0,V.o)(),[L,F]=(0,s.useState)([]),[M,O]=(0,s.useState)(!0),[D,R]=(0,s.useState)(1),[q,T]=(0,s.useState)(1),[_,K]=(0,s.useState)(!1),[U,Z]=(0,s.useState)(null),[z,G]=(0,s.useState)(!1),H=(0,P.Zp)(),J=s.useMemo((()=>{switch(t||a.language||"de"){case"es":return B.es;case"en":return S.c;default:return E.de}}),[t,a.language]);(0,s.useEffect)((()=>{Q()}),[D]);const Q=async()=>{try{O(!0);const e=await v.O.getNotifications(D,10);F(e.notifications),T(e.pagination.totalPages)}catch(e){console.error("Fehler beim Laden der Benachrichtigungen:",e)}finally{O(!1)}},W=async e=>{try{await v.O.markAsRead(e),F((a=>a.map((a=>a.id===e?(0,r.A)((0,r.A)({},a),{},{read:!0}):a))))}catch(a){console.error("Fehler beim Markieren als gelesen:",a)}},X=e=>{switch(e.toLowerCase()){case"task":return(0,I.jsx)(m.A,{className:"h-6 w-6 text-blue-600"});case"user":return(0,I.jsx)(g.A,{className:"h-6 w-6 text-blue-600"});case"worktime":return(0,I.jsx)(b.A,{className:"h-6 w-6 text-blue-600"});case"request":return(0,I.jsx)(k.A,{className:"h-6 w-6 text-blue-600"});case"role":return(0,I.jsx)(y.A,{className:"h-6 w-6 text-blue-600"});case"info":return(0,I.jsx)(f.A,{className:"h-6 w-6 text-blue-600"});case"warning":return(0,I.jsx)(j.A,{className:"h-6 w-6 text-yellow-500"});case"error":return(0,I.jsx)(N.A,{className:"h-6 w-6 text-red-600"});default:return(0,I.jsx)(A.A,{className:"h-6 w-6 text-blue-600"})}},Y=a=>{try{return(0,C.m)(new Date(a),{addSuffix:!0,locale:J})}catch(t){return e("notifications.invalidDate",{defaultValue:"Ung\xfcltiges Datum"})}};return(0,I.jsx)("div",{className:"min-h-screen p-4 dark:bg-gray-900",children:(0,I.jsxs)("div",{className:"container mx-auto",children:[(0,I.jsxs)("div",{className:"bg-white rounded-lg border border-gray-300 dark:bg-gray-800 dark:border-gray-700 p-6",children:[(0,I.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,I.jsxs)("div",{className:"flex items-center",children:[(0,I.jsx)(A.A,{className:"h-6 w-6 text-gray-600 dark:text-gray-400 mr-2"}),(0,I.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:e("notifications.title",{defaultValue:"Benachrichtigungen"})})]}),(0,I.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,I.jsxs)("button",{onClick:async()=>{try{await v.O.markAllAsRead(),F((e=>e.map((e=>(0,r.A)((0,r.A)({},e),{},{read:!0})))))}catch(e){console.error("Fehler beim Markieren aller als gelesen:",e)}},disabled:L.every((e=>e.read)),className:"inline-flex items-center px-3 py-2 border rounded-md text-sm font-medium\n                  ".concat(L.every((e=>e.read))?"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed":"bg-blue-50 text-blue-600 hover:bg-blue-100 border-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:border-blue-900 dark:hover:bg-blue-900/50"),children:[(0,I.jsx)(w.A,{className:"h-4 w-4 mr-2"}),e("notifications.markAllAsRead",{defaultValue:"Alle gelesen"})]}),(0,I.jsxs)("button",{onClick:()=>{G(!0)},disabled:0===L.length,className:"inline-flex items-center px-3 py-2 border rounded-md text-sm font-medium\n                  ".concat(0===L.length?"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed":"bg-red-50 text-red-600 hover:bg-red-100 border-red-200 dark:bg-red-900/30 dark:text-red-400 dark:border-red-900 dark:hover:bg-red-900/50"),children:[(0,I.jsx)(p.A,{className:"h-4 w-4 mr-2"}),e("notifications.deleteAll",{defaultValue:"Alle l\xf6schen"})]})]})]}),M&&0===L.length?(0,I.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,I.jsx)(n.A,{className:"dark:text-blue-400"})}):0===L.length?(0,I.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[(0,I.jsx)(A.A,{className:"h-16 w-16 mb-4 dark:text-gray-500"}),(0,I.jsx)("p",{className:"text-lg",children:e("notifications.noNotifications",{defaultValue:"Keine Benachrichtigungen vorhanden"})})]}):(0,I.jsx)("div",{className:"space-y-4",children:L.map(((a,t)=>(0,I.jsx)("div",{onClick:()=>(e=>{if(e.read||W(e.id),e.relatedEntityId&&e.relatedEntityType)switch(e.relatedEntityType.toLowerCase()){case"task":H("/tasks/".concat(e.relatedEntityId));break;case"request":H("/requests/".concat(e.relatedEntityId));break;case"user":H("/users/".concat(e.relatedEntityId));break;case"role":H("/roles/".concat(e.relatedEntityId));break;case"worktime":H("/worktime/".concat(e.relatedEntityId))}})(a),className:"p-4 rounded-lg transition-colors cursor-pointer\n                    ".concat(a.read?"bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700":"bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/30 dark:hover:bg-blue-900/50","\n                    ").concat(t<L.length-1?"border-b dark:border-gray-700":""),children:(0,I.jsxs)("div",{className:"flex items-start",children:[(0,I.jsx)("div",{className:"flex-shrink-0 mt-1",children:X(a.type)}),(0,I.jsxs)("div",{className:"ml-4 flex-grow",children:[(0,I.jsxs)("div",{className:"flex items-center",children:[(0,I.jsx)("h3",{className:"text-base ".concat(a.read?"font-medium":"font-semibold"," text-gray-900 dark:text-white"),children:a.title}),!a.read&&(0,I.jsx)("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 rounded-full",children:e("notifications.new",{defaultValue:"Neu"})})]}),(0,I.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:a.message}),(0,I.jsx)("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:Y(a.createdAt)})]}),(0,I.jsxs)("div",{className:"ml-4 flex-shrink-0 flex space-x-2",children:[!a.read&&(0,I.jsx)(c.A,{title:e("notifications.markAsRead",{defaultValue:"Als gelesen markieren"}),children:(0,I.jsx)("button",{onClick:e=>{e.stopPropagation(),W(a.id)},className:"text-blue-600 hover:text-blue-900 p-1.5 rounded-full hover:bg-blue-50 dark:text-blue-400 dark:hover:text-blue-300 dark:hover:bg-blue-900/30",children:(0,I.jsx)(w.A,{className:"h-5 w-5"})})}),(0,I.jsx)(c.A,{title:e("notification.deleteTitle"),children:(0,I.jsx)("button",{onClick:e=>{var t;e.stopPropagation(),t=a.id,Z(t),K(!0)},className:"text-red-600 hover:text-red-900 p-1.5 rounded-full hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-900/30",children:(0,I.jsx)(p.A,{className:"h-5 w-5"})})})]})]})},a.id)))}),q>1&&(0,I.jsx)("div",{className:"flex justify-center mt-6",children:(0,I.jsx)("nav",{className:"flex items-center space-x-2",children:Array.from({length:q},((e,a)=>a+1)).map((e=>(0,I.jsx)("button",{onClick:()=>R(e),className:"px-3 py-1 rounded-md text-sm font-medium\n                      ".concat(D===e?"bg-blue-600 text-white dark:bg-blue-700":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"),children:e},e)))})})]}),(0,I.jsxs)(i.A,{open:_,onClose:()=>K(!1),PaperProps:{className:"dark:bg-gray-800 dark:text-white"},children:[(0,I.jsx)(d.A,{className:"dark:text-white",children:"Benachrichtigung l\xf6schen"}),(0,I.jsx)(o.A,{children:(0,I.jsx)(x.A,{className:"dark:text-gray-300",children:"M\xf6chten Sie diese Benachrichtigung wirklich l\xf6schen?"})}),(0,I.jsxs)(h.A,{children:[(0,I.jsx)(u.A,{onClick:()=>K(!1),color:"primary",className:"dark:text-blue-400",children:"Abbrechen"}),(0,I.jsx)(u.A,{onClick:async()=>{if(null!==U)try{await v.O.deleteNotification(U),F((e=>e.filter((e=>e.id!==U))))}catch(e){console.error("Fehler beim L\xf6schen der Benachrichtigung:",e)}K(!1),Z(null)},color:"error",className:"dark:text-red-400",children:e("common.delete")})]})]}),(0,I.jsxs)(i.A,{open:z,onClose:()=>G(!1),PaperProps:{className:"dark:bg-gray-800 dark:text-white"},children:[(0,I.jsx)(d.A,{className:"dark:text-white",children:"Alle Benachrichtigungen l\xf6schen"}),(0,I.jsx)(o.A,{children:(0,I.jsx)(x.A,{className:"dark:text-gray-300",children:"M\xf6chten Sie wirklich alle Benachrichtigungen l\xf6schen? Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden."})}),(0,I.jsxs)(h.A,{children:[(0,I.jsx)(u.A,{onClick:()=>G(!1),color:"primary",className:"dark:text-blue-400",children:"Abbrechen"}),(0,I.jsx)(u.A,{onClick:async()=>{try{await v.O.deleteAllNotifications(),F([])}catch(e){console.error("Fehler beim L\xf6schen aller Benachrichtigungen:",e)}G(!1)},color:"error",className:"dark:text-red-400",children:"Alle l\xf6schen"})]})]})]})})}}}]);
//# sourceMappingURL=876.b2a2cb1e.chunk.js.map