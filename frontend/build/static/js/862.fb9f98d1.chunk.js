"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[862],{6862:(e,l,a)=>{a.r(l),a.d(l,{default:()=>b});var r=a(9379),n=a(5043),s=a(4117),o=a(1923),d=a(1801),t=a(542),i=a(7855),c=a(1816),u=a(9422),m=a(579);const b=e=>{let{organization:l,onSave:a}=e;const{t:b}=(0,s.Bd)(),{showMessage:g}=(0,i.A)(),[f,h]=(0,n.useState)([]),[y,x]=(0,n.useState)({}),[p,v]=(0,n.useState)(!1),[R,k]=(0,n.useState)(!1),[j,I]=(0,n.useState)(!1);(0,n.useEffect)((()=>{l&&(N(),w())}),[l]);const N=async()=>{I(!0);try{const e=await t.Zj.getAll();e.data&&Array.isArray(e.data)&&h(e.data)}catch(e){console.error("Fehler beim Laden der Rollen:",e),g(b("lifecycle.loadRolesError",{defaultValue:"Fehler beim Laden der Rollen"}),"error")}finally{I(!1)}},w=async()=>{v(!0);try{const e=await o.A.get(d.Sn.ORGANIZATION_LIFECYCLE.LIFECYCLE_ROLES);x(e.data.lifecycleRoles||{})}catch(r){var e,l,a;if(console.error("Fehler beim Laden der Lebenszyklus-Rollen:",r),404!==(null===(e=r.response)||void 0===e?void 0:e.status))g((null===(l=r.response)||void 0===l||null===(a=l.data)||void 0===a?void 0:a.message)||b("lifecycle.loadLifecycleRolesError",{defaultValue:"Fehler beim Laden der Konfiguration"}),"error")}finally{v(!1)}};return p&&!y?(0,m.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,m.jsx)(c.A,{className:"h-6 w-6 animate-spin text-gray-400"})}):(0,m.jsx)("div",{className:"space-y-6",children:(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold dark:text-white",children:b("organization.lifecycleRoles.title",{defaultValue:"Lebenszyklus-Rollen"})}),(0,m.jsx)("button",{onClick:()=>{const e=f.find((e=>e.name.toLowerCase().includes("admin")||e.name.toLowerCase().includes("administrator"))),l=f.find((e=>e.name.toLowerCase().includes("hr")||e.name.toLowerCase().includes("human"))),a=f.find((e=>"derecho"===e.name.toLowerCase()||e.name.toLowerCase().includes("legal")));x((0,r.A)((0,r.A)({},y),{},{adminRoleId:(null===e||void 0===e?void 0:e.id)||null,hrRoleId:(null===l||void 0===l?void 0:l.id)||null,legalRoleId:(null===a||void 0===a?void 0:a.id)||null})),g(b("lifecycle.standardRolesAssigned",{defaultValue:"Standard-Rollen zugewiesen"}),"success")},className:"px-3 py-1.5 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:b("lifecycle.assignStandardRoles",{defaultValue:"Standard-Rollen zuweisen"})})]}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:b("organization.lifecycleRoles.admin",{defaultValue:"Admin-Rolle"})}),(0,m.jsxs)("select",{value:y.adminRoleId||"",onChange:e=>{const l=e.target.value;x((0,r.A)((0,r.A)({},y),{},{adminRoleId:l&&""!==l&&!isNaN(parseInt(l,10))?parseInt(l,10):null}))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:j,children:[(0,m.jsx)("option",{value:"",children:b("common.pleaseSelect")}),f.map((e=>(0,m.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:b("organization.lifecycleRoles.hr",{defaultValue:"HR-Rolle"})}),(0,m.jsxs)("select",{value:y.hrRoleId||"",onChange:e=>{const l=e.target.value;x((0,r.A)((0,r.A)({},y),{},{hrRoleId:l&&""!==l&&!isNaN(parseInt(l,10))?parseInt(l,10):null}))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:j,children:[(0,m.jsx)("option",{value:"",children:b("common.pleaseSelect")}),f.map((e=>(0,m.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:b("organization.lifecycleRoles.legal",{defaultValue:"Legal-Rolle"})}),(0,m.jsxs)("select",{value:y.legalRoleId||"",onChange:e=>{const l=e.target.value;x((0,r.A)((0,r.A)({},y),{},{legalRoleId:l&&""!==l&&!isNaN(parseInt(l,10))?parseInt(l,10):null}))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:j,children:[(0,m.jsx)("option",{value:"",children:b("common.pleaseSelect")}),f.map((e=>(0,m.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})]}),(0,m.jsx)("div",{className:"mt-6 flex justify-end",children:(0,m.jsx)("button",{onClick:async()=>{k(!0);try{const e=e=>null===e||void 0===e||0===e?null:Number(e);await o.A.put(d.Sn.ORGANIZATION_LIFECYCLE.LIFECYCLE_ROLES,{adminRoleId:e(y.adminRoleId),hrRoleId:e(y.hrRoleId),legalRoleId:e(y.legalRoleId),employeeRoleIds:(y.employeeRoleIds||[]).map(e).filter((e=>null!==e))}),g(b("lifecycle.rolesSaved",{defaultValue:"Rollen-Konfiguration erfolgreich gespeichert"}),"success"),a&&a()}catch(r){var e,l;console.error("Fehler beim Speichern:",r),g((null===(e=r.response)||void 0===e||null===(l=e.data)||void 0===l?void 0:l.message)||b("lifecycle.saveError",{defaultValue:"Fehler beim Speichern"}),"error")}finally{k(!1)}},disabled:R||j,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:R?b("common.saving",{defaultValue:"Speichere..."}):b("common.save",{defaultValue:"Speichern"}),children:R?(0,m.jsx)(c.A,{className:"h-5 w-5 animate-spin"}):(0,m.jsx)(u.A,{className:"h-5 w-5"})})})]})})}}}]);
//# sourceMappingURL=862.fb9f98d1.chunk.js.map