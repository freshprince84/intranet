"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[51],{1052:(e,t,r)=>{r.d(t,{F2:()=>i,Rj:()=>d,go:()=>n});const a={request:{criticalHours:24},todo:{criticalHours:24}};const s={hourly:{criticalHours:2},daily:{criticalHours:6},standard:{criticalHours:24}};function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"request",r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!e)return"none";const d=new Date,l=new Date(e),c=(d.getTime()-l.getTime())/36e5;if(c<=0)return"none";let o;if(r)o=r;else if("todo"===t&&n){const e=function(e,t){const r=e.toLowerCase(),a=(t||"").toLowerCase();return r.includes("st\xfcndlich")||a.includes("st\xfcndlich")?"hourly":r.includes("t\xe4glich")||a.includes("t\xe4glich")?"daily":"standard"}(n,i);o=s[e]}else o=a[t];return c>=o.criticalHours?"critical":"expired"}function i(e){switch(e){case"expired":return{borderClass:"border-orange-500 dark:border-orange-600",bgClass:"bg-orange-50 dark:bg-orange-900/20",textClass:"text-orange-700 dark:text-orange-300",badgeClass:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300"};case"critical":return{borderClass:"border-red-500 dark:border-red-600",bgClass:"bg-red-50 dark:bg-red-900/20",textClass:"text-red-700 dark:text-red-700",badgeClass:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"};default:return{borderClass:"",bgClass:"",textClass:"",badgeClass:""}}}function d(e){let t=arguments.length>4?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F\xe4lligkeit",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e=>e.toLocaleDateString(),s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const d=n(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"request",void 0,arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0),l=i(d);return{icon:t,label:r,value:e?a(new Date(e)):"-",className:"none"!==d?s?l.badgeClass:l.textClass:void 0}}},1853:(e,t,r)=>{r.d(t,{Iw:()=>s,qY:()=>a});r(5043),r(579);const a=(e,t)=>{if("task"===t)switch(e){case"open":default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"in_progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"improval":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"quality_control":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300";case"done":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}if("request"===t)switch(e){case"approval":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"approved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"to_improve":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"denied":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}if("invoice"===t)switch(e){case"DRAFT":default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"SENT":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"PAID":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"OVERDUE":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"CANCELLED":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"}return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},s=(e,t,r)=>{if(r){if("task"===t){const t="tasks.status.".concat(e),a=r(t);if(a!==t)return a}if("request"===t){const t="requests.status.".concat(e),a=r(t);if(a!==t)return a}if("invoice"===t){const t="invoices.status.".concat(e.toLowerCase()),a=r(t);if(a!==t)return a}}if("task"===t)switch(e){case"open":return"Offen";case"in_progress":return"In Bearbeitung";case"improval":return"Nachbesserung";case"quality_control":return"Qualit\xe4tskontrolle";case"done":return"Erledigt";default:return e}if("request"===t)switch(e){case"approval":return"Offen";case"approved":return"Genehmigt";case"to_improve":return"Nachbesserung";case"denied":return"Abgelehnt";default:return e}if("invoice"===t)switch(e){case"DRAFT":return"Entwurf";case"SENT":return"Gesendet";case"PAID":return"Bezahlt";case"OVERDUE":return"\xdcberf\xe4llig";case"CANCELLED":return"Storniert";default:return e}return e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," ")}},6615:(e,t,r)=>{r.d(t,{A:()=>s});r(5043);var a=r(579);const s=e=>{let{long:t,short:r,className:s=""}=e;const n=r||t.substring(0,5);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"hidden sm:inline ".concat(s),children:t}),(0,a.jsx)("span",{className:"inline sm:hidden ".concat(s),children:n})]})}},8658:(e,t,r)=>{r.d(t,{G:()=>c});var a=r(5043),s=r(4117),n=r(1923),i=r(1801),d=r(1713),l=r(579);const c=e=>{var t;let{isOpen:r,onClose:c,selectedDate:o}=e;const{t:g}=(0,s.Bd)(),x=new Date,u="".concat(x.getFullYear(),"-").concat((x.getMonth()+1).toString().padStart(2,"0"),"-").concat(x.getDate().toString().padStart(2,"0")),[m,h]=(0,a.useState)([]),[b,y]=(0,a.useState)(o||u),[k,p]=(0,a.useState)(!0),[f,w]=(0,a.useState)("0h 0m"),[v,T]=(0,a.useState)(null),[j,N]=(0,a.useState)(null),C=()=>{if(!v)return!1;try{return v.startTime.split("T")[0]===b}catch(j){return!1}},D=(0,a.useCallback)((async()=>{try{N(null),p(!0);if(!localStorage.getItem("token"))return N(g("worktime.tracker.notAuthenticated")),void p(!1);const e=b,t=[...(await n.A.get("".concat(i.Sn.WORKTIME.BASE,"?date=").concat(e))).data].sort(((e,t)=>new Date(e.startTime).getTime()-new Date(t.startTime).getTime()));h(t);const r=await n.A.get(i.Sn.WORKTIME.ACTIVE);r.data&&Object.keys(r.data).length>0?T(r.data):T(null),p(!1)}catch(j){0,N(g("worktime.list.loadError")),p(!1)}}),[b,g]);if((0,a.useEffect)((()=>{r&&D()}),[r,D]),(0,a.useEffect)((()=>{let e=0;if(m.filter((e=>(0,d.uT)(e,b))).forEach((t=>{if(t.endTime)try{const r=new Date(t.startTime),a=new Date(t.endTime).getTime()-r.getTime();if(a>0){const t=Math.floor(a/6e4);e+=t}}catch(j){0}})),v&&C())try{const t=v.startTime.endsWith("Z")?v.startTime.substring(0,v.startTime.length-1):v.startTime,r=new Date(t),a=(new Date).getTime()-r.getTime();if(a>0){const t=Math.floor(a/6e4);e+=t}}catch(j){0}const t=Math.floor(e/60),r=e%60,a="".concat(t,"h ").concat(r,"m");w(a)}),[m,v,b]),!r)return null;const E=m.filter((e=>(0,d.uT)(e,b)));return(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,l.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 w-full max-w-4xl max-h-[90vh] flex flex-col",children:[(0,l.jsxs)("div",{className:"p-4 border-b dark:border-gray-700 flex items-center justify-between",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:g("worktime.modal.title",{date:(0,d.Yq)(b)})}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("input",{type:"date",value:b,onChange:e=>{y(e.target.value)},className:"border dark:border-gray-600 rounded-md px-3 py-2 dark:bg-gray-700 dark:text-white"}),(0,l.jsx)("button",{onClick:c,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"\u2715"})]})]}),(0,l.jsx)("div",{className:"overflow-y-auto flex-grow",children:k?(0,l.jsx)("div",{className:"flex justify-center items-center h-32",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-gray-300"})}):0===m.filter((e=>(0,d.uT)(e,b)&&(null!==e.endTime||C()))).length?(0,l.jsx)("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:g("worktime.modal.noEntries")}):(0,l.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,l.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:g("worktime.list.columns.start")}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:g("worktime.list.columns.end")}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:g("worktime.list.columns.duration")}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:g("worktime.list.columns.branch")})]})}),(0,l.jsxs)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:[E.filter((e=>null!==e.endTime)).sort(((e,t)=>new Date(e.startTime).getTime()-new Date(t.startTime).getTime())).map((e=>(0,l.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:(0,d.fU)(e.startTime)}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:e.endTime?(0,d.fU)(e.endTime):"-"}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:(0,d.P0)(e.startTime,e.endTime)}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:e.branch.name})]},e.id))),C()&&(0,l.jsxs)("tr",{className:"bg-green-50 dark:bg-green-900/30 hover:bg-green-100 dark:hover:bg-green-900/50",children:[(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:(0,d.fU)(v.startTime)}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:(0,l.jsx)("span",{className:"italic",children:g("worktime.active")})}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200 font-medium text-green-600 dark:text-green-400",children:(()=>{if(!v)return"-";const e=v.startTime.endsWith("Z")?v.startTime.substring(0,v.startTime.length-1):v.startTime,t=new Date(e),r=(new Date).getTime()-t.getTime(),a=Math.floor(r/6e4),s=Math.floor(a/60),n=a%60;return"".concat(s,"h ").concat(n,"m (").concat(g("worktime.modal.running"),")")})()}),(0,l.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200",children:(null===(t=v.branch)||void 0===t?void 0:t.name)||g("common.unknown")})]})]}),(0,l.jsx)("tfoot",{className:"bg-gray-100 dark:bg-gray-700",children:(0,l.jsxs)("tr",{children:[(0,l.jsxs)("td",{colSpan:2,className:"px-6 py-3 text-right text-sm font-medium text-gray-700 dark:text-gray-300",children:[g("worktime.modal.totalDuration"),":"]}),(0,l.jsx)("td",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900 dark:text-white",children:f}),(0,l.jsx)("td",{})]})})]})})]})})}}}]);
//# sourceMappingURL=51.16c2f1ae.chunk.js.map