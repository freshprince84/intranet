"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[876],{7876:(e,r,a)=>{a.r(r),a.d(r,{default:()=>E});var t=a(9379),s=a(5043),l=a(1637),n=a(905),c=a(35),d=a(6600),i=a(5316),o=a(8533),x=a(9347),h=a(1906),m=a(1369),g=a(4129),u=a(7012),b=a(2704),k=a(7504),y=a(1252),j=a(9399),N=a(3867),f=a(2903),A=a(9422),p=a(9248),w=a(5620),v=a(4399),C=a(887),S=a(3216),B=a(579);const E=()=>{const[e,r]=(0,s.useState)([]),[a,E]=(0,s.useState)(!0),[L,P]=(0,s.useState)(1),[I,F]=(0,s.useState)(1),[O,M]=(0,s.useState)(!1),[q,D]=(0,s.useState)(null),[R,T]=(0,s.useState)(!1),_=(0,S.Zp)();(0,s.useEffect)((()=>{K()}),[L]);const K=async()=>{try{E(!0);const e=await w.O.getNotifications(L,10);r(e.notifications),F(e.pagination.totalPages)}catch(e){console.error("Fehler beim Laden der Benachrichtigungen:",e)}finally{E(!1)}},U=async e=>{try{await w.O.markAsRead(e),r((r=>r.map((r=>r.id===e?(0,t.A)((0,t.A)({},r),{},{read:!0}):r))))}catch(a){console.error("Fehler beim Markieren als gelesen:",a)}},Z=e=>{switch(e.toLowerCase()){case"task":return(0,B.jsx)(m.A,{className:"h-6 w-6 text-blue-600"});case"user":return(0,B.jsx)(g.A,{className:"h-6 w-6 text-blue-600"});case"worktime":return(0,B.jsx)(u.A,{className:"h-6 w-6 text-blue-600"});case"request":return(0,B.jsx)(b.A,{className:"h-6 w-6 text-blue-600"});case"role":return(0,B.jsx)(k.A,{className:"h-6 w-6 text-blue-600"});case"info":return(0,B.jsx)(y.A,{className:"h-6 w-6 text-blue-600"});case"warning":return(0,B.jsx)(j.A,{className:"h-6 w-6 text-yellow-500"});case"error":return(0,B.jsx)(N.A,{className:"h-6 w-6 text-red-600"});default:return(0,B.jsx)(f.A,{className:"h-6 w-6 text-blue-600"})}},z=e=>{try{return(0,v.m)(new Date(e),{addSuffix:!0,locale:C.de})}catch(r){return"Ung\xfcltiges Datum"}};return(0,B.jsx)("div",{className:"min-h-screen p-4 dark:bg-gray-900",children:(0,B.jsxs)("div",{className:"container mx-auto",children:[(0,B.jsxs)("div",{className:"bg-white rounded-lg border border-gray-300 dark:bg-gray-800 dark:border-gray-700 p-6",children:[(0,B.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,B.jsxs)("div",{className:"flex items-center",children:[(0,B.jsx)(f.A,{className:"h-6 w-6 text-gray-600 dark:text-gray-400 mr-2"}),(0,B.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Benachrichtigungen"})]}),(0,B.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,B.jsxs)("button",{onClick:async()=>{try{await w.O.markAllAsRead(),r((e=>e.map((e=>(0,t.A)((0,t.A)({},e),{},{read:!0})))))}catch(e){console.error("Fehler beim Markieren aller als gelesen:",e)}},disabled:e.every((e=>e.read)),className:"inline-flex items-center px-3 py-2 border rounded-md text-sm font-medium\n                  ".concat(e.every((e=>e.read))?"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed":"bg-blue-50 text-blue-600 hover:bg-blue-100 border-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:border-blue-900 dark:hover:bg-blue-900/50"),children:[(0,B.jsx)(A.A,{className:"h-4 w-4 mr-2"}),"Alle gelesen"]}),(0,B.jsxs)("button",{onClick:()=>{T(!0)},disabled:0===e.length,className:"inline-flex items-center px-3 py-2 border rounded-md text-sm font-medium\n                  ".concat(0===e.length?"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed":"bg-red-50 text-red-600 hover:bg-red-100 border-red-200 dark:bg-red-900/30 dark:text-red-400 dark:border-red-900 dark:hover:bg-red-900/50"),children:[(0,B.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Alle l\xf6schen"]})]})]}),a&&0===e.length?(0,B.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,B.jsx)(l.A,{className:"dark:text-blue-400"})}):0===e.length?(0,B.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[(0,B.jsx)(f.A,{className:"h-16 w-16 mb-4 dark:text-gray-500"}),(0,B.jsx)("p",{className:"text-lg",children:"Keine Benachrichtigungen vorhanden"})]}):(0,B.jsx)("div",{className:"space-y-4",children:e.map(((r,a)=>(0,B.jsx)("div",{onClick:()=>(e=>{if(e.read||U(e.id),e.relatedEntityId&&e.relatedEntityType)switch(e.relatedEntityType.toLowerCase()){case"task":_("/tasks/".concat(e.relatedEntityId));break;case"request":_("/requests/".concat(e.relatedEntityId));break;case"user":_("/users/".concat(e.relatedEntityId));break;case"role":_("/roles/".concat(e.relatedEntityId));break;case"worktime":_("/worktime/".concat(e.relatedEntityId))}})(r),className:"p-4 rounded-lg transition-colors cursor-pointer\n                    ".concat(r.read?"bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700":"bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/30 dark:hover:bg-blue-900/50","\n                    ").concat(a<e.length-1?"border-b dark:border-gray-700":""),children:(0,B.jsxs)("div",{className:"flex items-start",children:[(0,B.jsx)("div",{className:"flex-shrink-0 mt-1",children:Z(r.type)}),(0,B.jsxs)("div",{className:"ml-4 flex-grow",children:[(0,B.jsxs)("div",{className:"flex items-center",children:[(0,B.jsx)("h3",{className:"text-base ".concat(r.read?"font-medium":"font-semibold"," text-gray-900 dark:text-white"),children:r.title}),!r.read&&(0,B.jsx)("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 rounded-full",children:"Neu"})]}),(0,B.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:r.message}),(0,B.jsx)("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:z(r.createdAt)})]}),(0,B.jsxs)("div",{className:"ml-4 flex-shrink-0 flex space-x-2",children:[!r.read&&(0,B.jsx)(n.A,{title:"Als gelesen markieren",children:(0,B.jsx)("button",{onClick:e=>{e.stopPropagation(),U(r.id)},className:"text-blue-600 hover:text-blue-900 p-1.5 rounded-full hover:bg-blue-50 dark:text-blue-400 dark:hover:text-blue-300 dark:hover:bg-blue-900/30",children:(0,B.jsx)(A.A,{className:"h-5 w-5"})})}),(0,B.jsx)(n.A,{title:"L\xf6schen",children:(0,B.jsx)("button",{onClick:e=>{var a;e.stopPropagation(),a=r.id,D(a),M(!0)},className:"text-red-600 hover:text-red-900 p-1.5 rounded-full hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-900/30",children:(0,B.jsx)(p.A,{className:"h-5 w-5"})})})]})]})},r.id)))}),I>1&&(0,B.jsx)("div",{className:"flex justify-center mt-6",children:(0,B.jsx)("nav",{className:"flex items-center space-x-2",children:Array.from({length:I},((e,r)=>r+1)).map((e=>(0,B.jsx)("button",{onClick:()=>P(e),className:"px-3 py-1 rounded-md text-sm font-medium\n                      ".concat(L===e?"bg-blue-600 text-white dark:bg-blue-700":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"),children:e},e)))})})]}),(0,B.jsxs)(c.A,{open:O,onClose:()=>M(!1),PaperProps:{className:"dark:bg-gray-800 dark:text-white"},children:[(0,B.jsx)(d.A,{className:"dark:text-white",children:"Benachrichtigung l\xf6schen"}),(0,B.jsx)(i.A,{children:(0,B.jsx)(o.A,{className:"dark:text-gray-300",children:"M\xf6chten Sie diese Benachrichtigung wirklich l\xf6schen?"})}),(0,B.jsxs)(x.A,{children:[(0,B.jsx)(h.A,{onClick:()=>M(!1),color:"primary",className:"dark:text-blue-400",children:"Abbrechen"}),(0,B.jsx)(h.A,{onClick:async()=>{if(null!==q)try{await w.O.deleteNotification(q),r((e=>e.filter((e=>e.id!==q))))}catch(e){console.error("Fehler beim L\xf6schen der Benachrichtigung:",e)}M(!1),D(null)},color:"error",className:"dark:text-red-400",children:"L\xf6schen"})]})]}),(0,B.jsxs)(c.A,{open:R,onClose:()=>T(!1),PaperProps:{className:"dark:bg-gray-800 dark:text-white"},children:[(0,B.jsx)(d.A,{className:"dark:text-white",children:"Alle Benachrichtigungen l\xf6schen"}),(0,B.jsx)(i.A,{children:(0,B.jsx)(o.A,{className:"dark:text-gray-300",children:"M\xf6chten Sie wirklich alle Benachrichtigungen l\xf6schen? Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden."})}),(0,B.jsxs)(x.A,{children:[(0,B.jsx)(h.A,{onClick:()=>T(!1),color:"primary",className:"dark:text-blue-400",children:"Abbrechen"}),(0,B.jsx)(h.A,{onClick:async()=>{try{await w.O.deleteAllNotifications(),r([])}catch(e){console.error("Fehler beim L\xf6schen aller Benachrichtigungen:",e)}T(!1)},color:"error",className:"dark:text-red-400",children:"Alle l\xf6schen"})]})]})]})})}}}]);
//# sourceMappingURL=876.b167efb7.chunk.js.map