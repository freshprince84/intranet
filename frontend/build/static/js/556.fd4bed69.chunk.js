"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[556],{170:(e,t,r)=>{r.r(t),r.d(t,{default:()=>X});var a=r(5043),s=r(2760),n=r(7504),l=r(7012),i=r(2302),d=r(8662);function o(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const c=a.forwardRef(o);var m=r(1801),u=r(1923),h=r(1713),x=r(2672),g=r(7952),b=r(7488),y=r(6443),f=r(7591),v=r(7449),p=r(2811),k=r(9248);const w=async e=>{try{return(await u.A.delete(m.Sn.CLIENTS.BY_ID(e))).data}catch(t){throw console.error("Fehler beim L\xf6schen des Clients:",t),t}},j=async()=>{try{return(await u.A.get(m.Sn.CLIENTS.RECENT)).data}catch(e){throw console.error("Fehler beim Laden der zuletzt beratenen Clients:",e),e}};var N=r(1816),C=r(9422),S=r(5657),A=r(579);const T=e=>{let{isOpen:t,onClose:r,onClientUpdated:s,onClientDeleted:n,client:l}=e;const{openSidepane:i,closeSidepane:d}=(0,S.N)(),[o,c]=(0,a.useState)(window.innerWidth>1070),[h,x]=(0,a.useState)({name:"",company:"",email:"",phone:"",address:"",notes:"",isActive:!0}),[g,v]=(0,a.useState)({}),[p,j]=(0,a.useState)(!1),[T,E]=(0,a.useState)(!1),[F,D]=(0,a.useState)(window.innerWidth<640);(0,a.useEffect)((()=>{t&&l&&(x({name:l.name||"",company:l.company||"",email:l.email||"",phone:l.phone||"",address:l.address||"",notes:l.notes||"",isActive:void 0===l.isActive||l.isActive}),E(!1),v({}))}),[t,l]),(0,a.useEffect)((()=>{const e=()=>{D(window.innerWidth<640),c(window.innerWidth>1070)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,a.useEffect)((()=>(t?i():d(),()=>{d()})),[t,i,d]);const R=async e=>{if(e.preventDefault(),(()=>{const e={};return h.name.trim()||(e.name="Name ist erforderlich"),h.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email)&&(e.email="Ung\xfcltige E-Mail-Adresse"),v(e),0===Object.keys(e).length})()&&l)try{j(!0);const e=await(async(e,t)=>{try{return(await u.A.put(m.Sn.CLIENTS.BY_ID(e),t)).data}catch(r){throw console.error("Fehler beim Aktualisieren des Clients:",r),r}})(l.id,{name:h.name,company:h.company||void 0,email:h.email||void 0,phone:h.phone||void 0,address:h.address||void 0,notes:h.notes||void 0,isActive:h.isActive});b.oR.success("Client erfolgreich aktualisiert"),null===s||void 0===s||s(e)}catch(a){var t,r;b.oR.error((null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Fehler beim Aktualisieren des Clients")}finally{j(!1)}},L=async()=>{if(T){if(l)try{j(!0),await w(l.id),b.oR.success("Client erfolgreich gel\xf6scht"),null===n||void 0===n||n(l.id),r()}catch(c){var e,t,a,s,i,d,o;const r=(null===(e=c.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Fehler beim L\xf6schen des Clients",n=null===(a=c.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.details,l=null===(i=c.response)||void 0===i||null===(d=i.data)||void 0===d?void 0:d.suggestion;if(409===(null===(o=c.response)||void 0===o?void 0:o.status)&&n){const e=Object.entries(n).filter((e=>{let[t,r]=e;return r>0})).map((e=>{let[t,r]=e;return`${r} ${"workTimes"===t?"Zeiteintr\xe4ge":"consultationInvoices"===t?"Rechnungen":"Monatsberichte"}`})).join(", ");b.oR.error(`${r}. Verkn\xfcpfungen: ${e}. ${l||""}`)}else b.oR.error(r);E(!1)}finally{j(!1)}}else E(!0)},I=e=>{const{name:t,value:r,type:a}=e.target,s=e.target.checked;x((e=>({...e,[t]:"checkbox"===a?s:r}))),g[t]&&v((e=>({...e,[t]:""})))},_=()=>{E(!1),v({}),r()};return l?F?(0,A.jsxs)(y.lG,{open:t,onClose:_,className:"relative z-50",children:[(0,A.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,A.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,A.jsxs)(y.lG.Panel,{className:"mx-auto max-w-xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[(0,A.jsx)(y.lG.Title,{className:"text-lg font-semibold dark:text-white",children:"Client bearbeiten"}),(0,A.jsx)("button",{onClick:_,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,A.jsx)(f.A,{className:"h-6 w-6"})})]}),(0,A.jsxs)("form",{onSubmit:R,className:"p-4",children:[(0,A.jsxs)("div",{className:"space-y-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"name_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name *"}),(0,A.jsx)("input",{type:"text",id:"name_mobile",name:"name",value:h.name,onChange:I,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white "+(g.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),g.name&&(0,A.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.name})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"company_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Firma"}),(0,A.jsx)("input",{type:"text",id:"company_mobile",name:"company",value:h.company,onChange:I,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"email_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"E-Mail"}),(0,A.jsx)("input",{type:"email",id:"email_mobile",name:"email",value:h.email,onChange:I,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white "+(g.email?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),g.email&&(0,A.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.email})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"phone_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telefon"}),(0,A.jsx)("input",{type:"tel",id:"phone_mobile",name:"phone",value:h.phone,onChange:I,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"address_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Adresse"}),(0,A.jsx)("input",{type:"text",id:"address_mobile",name:"address",value:h.address,onChange:I,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"notes_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Notizen"}),(0,A.jsx)("textarea",{id:"notes_mobile",name:"notes",rows:3,value:h.notes,onChange:I,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("input",{type:"checkbox",id:"isActive_mobile",name:"isActive",checked:h.isActive,onChange:I,className:"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:text-gray-300"}),(0,A.jsx)("label",{htmlFor:"isActive_mobile",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Aktiv"})]})]}),(0,A.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,A.jsxs)("button",{type:"button",onClick:L,disabled:p,className:`inline-flex items-center px-4 py-2 border ${T?"border-red-300 text-red-700 bg-red-50 dark:border-red-600 dark:text-red-400 dark:bg-red-900/20":"border-red-300 text-red-700 bg-white hover:bg-red-50 dark:border-red-600 dark:text-red-400 dark:bg-gray-700 dark:hover:bg-gray-600"} text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed`,children:[(0,A.jsx)(k.A,{className:"h-5 w-5 mr-2"}),T?"Wirklich l\xf6schen?":"L\xf6schen"]}),(0,A.jsxs)("div",{className:"flex space-x-3",children:[(0,A.jsx)("button",{type:"button",onClick:_,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:"Abbrechen",children:(0,A.jsx)(f.A,{className:"h-5 w-5"})}),(0,A.jsx)("button",{type:"submit",disabled:p,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:p?"Speichere...":"Speichern",children:p?(0,A.jsx)(N.A,{className:"h-5 w-5 animate-spin"}):(0,A.jsx)(C.A,{className:"h-5 w-5"})})]})]})]})]})})]}):(0,A.jsxs)(A.Fragment,{children:[t&&!o&&(0,A.jsx)("div",{className:"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40","aria-hidden":"true",onClick:_,style:{opacity:t?1:0,transition:"opacity 300ms ease-out"}}),(0,A.jsxs)("div",{className:"fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col "+(t?"translate-x-0":"translate-x-full"),style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",pointerEvents:t?"auto":"none"},"aria-hidden":!t,role:"dialog","aria-modal":t,children:[(0,A.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0",children:[(0,A.jsx)("h2",{className:"text-lg font-semibold dark:text-white",children:"Client bearbeiten"}),(0,A.jsx)("button",{onClick:_,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,A.jsx)(f.A,{className:"h-6 w-6"})})]}),(0,A.jsxs)("div",{className:"p-4 overflow-y-auto flex-1 min-h-0",children:[Object.keys(g).length>0&&(0,A.jsx)("div",{className:"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded",children:Object.values(g).map(((e,t)=>(0,A.jsx)("p",{children:e},t)))}),(0,A.jsxs)("form",{onSubmit:R,className:"space-y-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name *"}),(0,A.jsx)("input",{type:"text",id:"name",name:"name",value:h.name,onChange:I,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white "+(g.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),g.name&&(0,A.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.name})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Firma"}),(0,A.jsx)("input",{type:"text",id:"company",name:"company",value:h.company,onChange:I,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"E-Mail"}),(0,A.jsx)("input",{type:"email",id:"email",name:"email",value:h.email,onChange:I,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white "+(g.email?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),g.email&&(0,A.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.email})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telefon"}),(0,A.jsx)("input",{type:"tel",id:"phone",name:"phone",value:h.phone,onChange:I,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Adresse"}),(0,A.jsx)("input",{type:"text",id:"address",name:"address",value:h.address,onChange:I,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Notizen"}),(0,A.jsx)("textarea",{id:"notes",name:"notes",rows:3,value:h.notes,onChange:I,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("input",{type:"checkbox",id:"isActive",name:"isActive",checked:h.isActive,onChange:I,className:"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:text-gray-300"}),(0,A.jsx)("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Aktiv"})]}),(0,A.jsxs)("div",{className:"flex items-center justify-between pt-4",children:[(0,A.jsx)("button",{type:"button",onClick:L,disabled:p,className:`p-2 rounded-md ${T?"bg-red-600 text-white dark:bg-red-700 dark:text-white hover:bg-red-700 dark:hover:bg-red-600":"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"} disabled:opacity-50 disabled:cursor-not-allowed`,title:T?"L\xf6schen best\xe4tigen":"Client l\xf6schen",children:T?(0,A.jsx)(C.A,{className:"h-5 w-5"}):(0,A.jsx)(k.A,{className:"h-5 w-5"})}),(0,A.jsxs)("div",{className:"flex gap-2",children:[(0,A.jsx)("button",{type:"button",onClick:_,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:"Abbrechen",children:(0,A.jsx)(f.A,{className:"h-5 w-5"})}),(0,A.jsx)("button",{type:"submit",disabled:p,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:p?"Speichere...":"Speichern",children:p?(0,A.jsx)(N.A,{className:"h-5 w-5 animate-spin"}):(0,A.jsx)(C.A,{className:"h-5 w-5"})})]})]})]})]})]})]}):null},E=e=>{let{isOpen:t,onClose:r,onSelect:s,onCreateNew:n}=e;const[l,i]=(0,a.useState)([]),[o,c]=(0,a.useState)([]),[h,x]=(0,a.useState)(""),[g,j]=(0,a.useState)(!0),[N,C]=(0,a.useState)(null),[S,E]=(0,a.useState)(!1);(0,a.useEffect)((()=>{t&&F()}),[t]),(0,a.useEffect)((()=>{if(h){const e=l.filter((e=>e.name.toLowerCase().includes(h.toLowerCase())||e.company&&e.company.toLowerCase().includes(h.toLowerCase())||e.email&&e.email.toLowerCase().includes(h.toLowerCase())));c(e)}else c(l)}),[h,l]);const F=async()=>{try{j(!0);const e=await u.A.get(m.Sn.CLIENTS.BASE);i(e.data),c(e.data)}catch(e){}finally{j(!1)}};return(0,A.jsxs)(y.lG,{open:t,onClose:r,className:"relative z-50",children:[(0,A.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,A.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,A.jsx)(y.lG.Panel,{className:"mx-auto max-w-2xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:(0,A.jsxs)("div",{className:"p-6",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,A.jsx)(y.lG.Title,{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Client ausw\xe4hlen"}),(0,A.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,A.jsx)(f.A,{className:"h-6 w-6"})})]}),(0,A.jsxs)("div",{className:"relative mb-4",children:[(0,A.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,A.jsx)(v.A,{className:"h-5 w-5 text-gray-400"})}),(0,A.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Client suchen...",autoFocus:!0})]}),(0,A.jsx)("div",{className:"max-h-96 overflow-y-auto",children:g?(0,A.jsx)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"Lade Clients..."}):0===o.length?(0,A.jsxs)("div",{className:"text-center py-8",children:[(0,A.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:h?"Keine Clients gefunden":"Noch keine Clients vorhanden"}),(0,A.jsxs)("button",{onClick:n,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,A.jsx)(d.A,{className:"h-5 w-5 mr-2"}),"Neuen Client anlegen"]})]}):(0,A.jsx)("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:o.map((e=>(0,A.jsx)("li",{children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("button",{onClick:()=>s(e),className:"flex-1 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 text-left transition-colors",children:(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),e.company&&(0,A.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.company}),e.email&&(0,A.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.email})]})}),(0,A.jsxs)("div",{className:"flex items-center space-x-2 px-2",children:[(0,A.jsx)("button",{onClick:t=>((e,t)=>{t.stopPropagation(),C(e),E(!0)})(e,t),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Client bearbeiten",children:(0,A.jsx)(p.A,{className:"h-5 w-5"})}),(0,A.jsx)("button",{onClick:t=>(async(e,t)=>{if(t.stopPropagation(),window.confirm(`M\xf6chten Sie den Client "${e.name}" wirklich l\xf6schen?`))try{await w(e.id),b.oR.success("Client erfolgreich gel\xf6scht"),F()}catch(s){var r,a;b.oR.error((null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Fehler beim L\xf6schen des Clients")}})(e,t),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Client l\xf6schen",children:(0,A.jsx)(k.A,{className:"h-5 w-5"})})]})]})},e.id)))})}),o.length>0&&(0,A.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,A.jsxs)("button",{onClick:n,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,A.jsx)(d.A,{className:"h-5 w-5 mr-2"}),"Neuen Client anlegen"]})})]})})}),N&&(0,A.jsx)(T,{isOpen:S,onClose:()=>{E(!1),C(null)},onClientUpdated:e=>{const t=l.findIndex((t=>t.id===e.id));if(-1!==t){const r=[...l];r[t]=e,i(r),c(r)}E(!1),C(null)},onClientDeleted:e=>{F(),E(!1),C(null)},client:N})]})},F=e=>{let{isOpen:t,onClose:r,onSave:s}=e;const{openSidepane:n,closeSidepane:l}=(0,S.N)(),[i,d]=(0,a.useState)(window.innerWidth>1070),[o,c]=(0,a.useState)({name:"",company:"",email:"",phone:"",address:"",notes:""}),[h,x]=(0,a.useState)({}),[g,v]=(0,a.useState)(!1),[p,k]=(0,a.useState)(window.innerWidth<640),w=async e=>{if(e.preventDefault(),(()=>{const e={};return o.name.trim()||(e.name="Name ist erforderlich"),o.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)&&(e.email="Ung\xfcltige E-Mail-Adresse"),x(e),0===Object.keys(e).length})())try{v(!0);const e=await u.A.post(m.Sn.CLIENTS.BASE,{...o,company:o.company||null,email:o.email||null,phone:o.phone||null,address:o.address||null,notes:o.notes||null});b.oR.success("Client erfolgreich angelegt"),s(e.data),c({name:"",company:"",email:"",phone:"",address:"",notes:""})}catch(a){var t,r;b.oR.error((null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Fehler beim Anlegen des Clients")}finally{v(!1)}};(0,a.useEffect)((()=>{const e=()=>{k(window.innerWidth<640),d(window.innerWidth>1070)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,a.useEffect)((()=>(t?n():l(),()=>{l()})),[t,n,l]);const j=e=>{const{name:t,value:r}=e.target;c((e=>({...e,[t]:r}))),h[t]&&x((e=>({...e,[t]:""})))},T=()=>{c({name:"",company:"",email:"",phone:"",address:"",notes:""}),x({}),r()};return p?(0,A.jsxs)(y.lG,{open:t,onClose:T,className:"relative z-50",children:[(0,A.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,A.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,A.jsxs)(y.lG.Panel,{className:"mx-auto max-w-xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[(0,A.jsx)(y.lG.Title,{className:"text-lg font-semibold dark:text-white",children:"Neuen Client anlegen"}),(0,A.jsx)("button",{onClick:T,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,A.jsx)(f.A,{className:"h-6 w-6"})})]}),(0,A.jsxs)("form",{onSubmit:w,className:"p-4",children:[(0,A.jsxs)("div",{className:"space-y-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"name_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name *"}),(0,A.jsx)("input",{type:"text",id:"name_mobile",name:"name",value:o.name,onChange:j,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white "+(h.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),h.name&&(0,A.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.name})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"company_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Firma"}),(0,A.jsx)("input",{type:"text",id:"company_mobile",name:"company",value:o.company,onChange:j,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"email_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"E-Mail"}),(0,A.jsx)("input",{type:"email",id:"email_mobile",name:"email",value:o.email,onChange:j,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white "+(h.email?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),h.email&&(0,A.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.email})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"phone_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telefon"}),(0,A.jsx)("input",{type:"tel",id:"phone_mobile",name:"phone",value:o.phone,onChange:j,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"address_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Adresse"}),(0,A.jsx)("input",{type:"text",id:"address_mobile",name:"address",value:o.address,onChange:j,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"notes_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Notizen"}),(0,A.jsx)("textarea",{id:"notes_mobile",name:"notes",rows:3,value:o.notes,onChange:j,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]})]}),(0,A.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,A.jsx)("button",{type:"button",onClick:T,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:"Abbrechen",children:(0,A.jsx)(f.A,{className:"h-5 w-5"})}),(0,A.jsx)("button",{type:"submit",disabled:g,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",title:g?"Speichere...":"Speichern",children:g?(0,A.jsx)(N.A,{className:"h-5 w-5 animate-spin"}):(0,A.jsx)(C.A,{className:"h-5 w-5"})})]})]})]})})]}):(0,A.jsxs)(A.Fragment,{children:[t&&!i&&(0,A.jsx)("div",{className:"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40","aria-hidden":"true",onClick:T,style:{opacity:t?1:0,transition:"opacity 300ms ease-out"}}),(0,A.jsxs)("div",{className:"fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col "+(t?"translate-x-0":"translate-x-full"),style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",pointerEvents:t?"auto":"none"},"aria-hidden":!t,role:"dialog","aria-modal":t,children:[(0,A.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0",children:[(0,A.jsx)("h2",{className:"text-lg font-semibold dark:text-white",children:"Neuen Client anlegen"}),(0,A.jsx)("button",{onClick:T,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,A.jsx)(f.A,{className:"h-6 w-6"})})]}),(0,A.jsxs)("div",{className:"p-4 overflow-y-auto flex-1 min-h-0",children:[Object.keys(h).length>0&&(0,A.jsx)("div",{className:"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded",children:Object.values(h).map(((e,t)=>(0,A.jsx)("p",{children:e},t)))}),(0,A.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name *"}),(0,A.jsx)("input",{type:"text",id:"name",name:"name",value:o.name,onChange:j,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white "+(h.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),h.name&&(0,A.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.name})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Firma"}),(0,A.jsx)("input",{type:"text",id:"company",name:"company",value:o.company,onChange:j,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"E-Mail"}),(0,A.jsx)("input",{type:"email",id:"email",name:"email",value:o.email,onChange:j,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white "+(h.email?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),h.email&&(0,A.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.email})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telefon"}),(0,A.jsx)("input",{type:"tel",id:"phone",name:"phone",value:o.phone,onChange:j,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Adresse"}),(0,A.jsx)("input",{type:"text",id:"address",name:"address",value:o.address,onChange:j,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Notizen"}),(0,A.jsx)("textarea",{id:"notes",name:"notes",rows:3,value:o.notes,onChange:j,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,A.jsx)("button",{type:"button",onClick:T,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:"Abbrechen",children:(0,A.jsx)(f.A,{className:"h-5 w-5"})}),(0,A.jsx)("button",{type:"submit",disabled:g,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",title:g?"Speichere...":"Speichern",children:g?(0,A.jsx)(N.A,{className:"h-5 w-5 animate-spin"}):(0,A.jsx)(C.A,{className:"h-5 w-5"})})]})]})]})]})]})},D=async e=>{try{return(await u.A.post(m.Sn.CONSULTATIONS.START,e)).data}catch(t){throw console.error("Fehler beim Starten der Beratung:",t),t}},R=async e=>{try{return(await u.A.post(m.Sn.CONSULTATIONS.STOP,e)).data}catch(t){throw console.error("Fehler beim Stoppen der Beratung:",t),t}},L=async(e,t)=>{try{return(await u.A.patch(m.Sn.CONSULTATIONS.UPDATE_NOTES(e),t)).data}catch(r){throw console.error("Fehler beim Aktualisieren der Notizen:",r),r}},I=e=>"isPlaceholder"in e&&!0===e.isPlaceholder,_=e=>{var t,r;let{onConsultationChange:s,onConsultationStarted:o}=e;const{user:y}=(0,x.As)(),{selectedBranch:f}=(0,g.O)(),[v,p]=(0,a.useState)(null),[k,w]=(0,a.useState)(!0),[N,C]=(0,a.useState)(!1),[S,T]=(0,a.useState)(!1),[_,B]=(0,a.useState)(!1),[O,M]=(0,a.useState)(null),[z,$]=(0,a.useState)([]),[P,U]=(0,a.useState)(""),[G,W]=(0,a.useState)(null),V=(0,a.useRef)(null),[Z,H]=(0,a.useState)(3),[K,Y]=(0,a.useState)(0),q=(0,a.useRef)(null),[J,Q]=(0,a.useState)(!1),[X,ee]=(0,a.useState)(""),[te,re]=(0,a.useState)("");(0,a.useEffect)((()=>{ae(),se()}),[]);const ae=async()=>{try{const e=await u.A.get(m.Sn.WORKTIME.ACTIVE);e.data&&e.data.clientId&&(p(e.data),U(e.data.notes||""))}catch(e){}finally{w(!1)}},se=async()=>{try{console.log("=== FRONTEND: loadRecentClients() called ===");const e=await j();console.log("=== FRONTEND: received clients:",e),$(e||[])}catch(e){console.error("=== FRONTEND: loadRecentClients() ERROR ===",e)}},ne=async(e,t)=>{if(f)try{var r;C(!0);const a=new Date((new Date).getTime()-6e4*(new Date).getTimezoneOffset()),n=await D({branchId:f,clientId:e,notes:t||"",startTime:a.toISOString()});p(n),U(t||""),M(null),T(!1),W(e),window.dispatchEvent(new CustomEvent("consultationChanged")),se(),null===s||void 0===s||s(n),o&&null!==(r=n.client)&&void 0!==r&&r.name&&o(n.client.name),b.oR.success("Beratung gestartet")}catch(a){console.error("Fehler beim Starten der Beratung:",a),b.oR.error("Fehler beim Starten der Beratung")}finally{C(!1)}else b.oR.error("Bitte w\xe4hlen Sie eine Niederlassung aus")},le=async()=>{if(v)try{await L(v.id,{notes:P})}catch(e){}};(0,a.useEffect)((()=>{if(!v||!P)return;const e=setTimeout((()=>{le()}),3e4);return()=>clearTimeout(e)}),[P,v]),(0,a.useEffect)((()=>{const e=()=>{se()};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}}),[]);const ie=(0,a.useMemo)((()=>0===z.length?85:z.reduce(((e,t)=>e+(6*t.name.length+24)),0)/z.length),[z]),de=(0,a.useCallback)((()=>{if(!V.current||0===z.length)return;const e=V.current.clientWidth;if(Math.abs(e-K)<40)return;Y(e);const t=e-32-(e<768?8:20)-12,r=Math.max(1,Math.floor(t/ie));H(Math.min(r,z.length))}),[z,ie,K]),oe=(0,a.useCallback)((()=>{q.current&&clearTimeout(q.current),q.current=setTimeout((()=>{de()}),150)}),[de]);(0,a.useEffect)((()=>{if(!V.current)return;const e=new ResizeObserver(oe);return e.observe(V.current),window.addEventListener("resize",oe),()=>{e.disconnect(),window.removeEventListener("resize",oe),q.current&&clearTimeout(q.current)}}),[oe]),(0,a.useLayoutEffect)((()=>{de()}),[de]);const ce=0===z.length&&k,me=(0,a.useMemo)((()=>ce?Array(3).fill(null).map(((e,t)=>({id:`placeholder-${t}`,name:"\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588",isPlaceholder:!0,status:void 0,lastConsultationDate:void 0}))):[]),[ce]),ue=ce?me:z,he=ce?me.length:Z,xe=(0,a.useMemo)((()=>{if(ce||!G)return ue;const e=ue.find((e=>e.id===G));if(!e)return ue;return[e,...ue.filter((e=>e.id!==G))]}),[ue,G,ce]);return k?(0,A.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:(0,A.jsxs)("div",{className:"animate-pulse",children:[(0,A.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-4"}),(0,A.jsx)("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),(0,A.jsx)("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded"})]})}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg p-6 sm:p-6",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,A.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center pl-2 sm:pl-0",children:[(0,A.jsx)(n.A,{className:"h-6 w-6 mr-2 sm:h-6 sm:w-6 sm:mr-2"}),"Beratungs-Tracker"]}),v&&(0,A.jsxs)("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[(0,A.jsx)(l.A,{className:"h-5 w-5 mr-2 animate-pulse"}),(0,A.jsxs)("span",{className:"font-medium",children:[(0,h.P0)(v.startTime,null)," - ",null===(t=v.client)||void 0===t?void 0:t.name]})]})]}),v?(0,A.jsxs)("div",{className:"space-y-4",children:[(0,A.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[(0,A.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Aktive Beratung mit"}),(0,A.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:null===(r=v.client)||void 0===r?void 0:r.name}),(0,A.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Gestartet: ",(0,h.fU)(v.startTime)]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Notizen zur Beratung"}),(0,A.jsx)("textarea",{value:P,onChange:e=>U(e.target.value),onBlur:le,className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",rows:3,placeholder:"Notizen hier eingeben..."})]}),(0,A.jsxs)("button",{onClick:async()=>{try{const e=new Date((new Date).getTime()-6e4*(new Date).getTimezoneOffset()),t=await R({endTime:e.toISOString(),notes:P||void 0});p(null),U(""),b.oR.success("Beratung beendet"),se(),null===s||void 0===s||s(t),console.log("\ud83d\uded1 ConsultationTracker: Sending consultationChanged event (stop)"),window.dispatchEvent(new CustomEvent("consultationChanged"))}catch(r){var e,t;b.oR.error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Fehler beim Beenden der Beratung")}},className:"w-full flex items-center justify-center px-4 py-3 border border-transparent text-base font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[(0,A.jsx)(i.A,{className:"h-5 w-5 mr-2"}),"Beratung beenden"]})]}):(0,A.jsxs)("div",{className:"space-y-4",children:[xe.length>0&&!J&&(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:xe.some((e=>!I(e)&&"planned"===e.status))?"Zuletzt beraten & geplante Beratungen:":"Zuletzt beraten:"}),(0,A.jsxs)("div",{ref:V,className:"flex items-center gap-0.5 md:gap-6",children:[(0,A.jsx)("button",{onClick:()=>B(!0),disabled:ce,className:"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center flex-shrink-0 "+(ce?"opacity-50 cursor-not-allowed":""),style:{width:"30.19px",height:"30.19px"},title:"Neuen Client anlegen","aria-label":"Neuen Client anlegen",children:(0,A.jsx)(d.A,{className:"h-4 w-4"})}),(0,A.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:xe.slice(0,he).map(((e,t)=>{!I(e)&&e.status;const r=!I(e)&&"planned"===e.status;return(0,A.jsxs)("button",{onClick:()=>!I(e)&&ne(Number(e.id),P),disabled:I(e),className:"inline-flex items-center px-3 py-2 rounded-full text-sm font-medium flex-shrink-0 transition-colors "+(I(e)?"bg-gray-200 dark:bg-gray-600 text-gray-400 dark:text-gray-500 animate-pulse cursor-default":r?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 hover:bg-blue-200 dark:hover:bg-blue-900/50 cursor-pointer border border-blue-200 dark:border-blue-700":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 cursor-pointer"),title:I(e)?"L\xe4dt...":r?`Geplante Beratung mit ${e.name} am ${e.lastConsultationDate?new Date(e.lastConsultationDate).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):""}`:`Beratung mit ${e.name} starten (zuletzt beraten${e.lastConsultationDate?` am ${new Date(e.lastConsultationDate).toLocaleDateString("de-DE")}`:""})`,children:[r&&!I(e)&&(0,A.jsx)("svg",{className:"h-3 w-3 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,A.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),(0,A.jsx)("span",{className:"truncate max-w-[120px]",children:I(e)?(0,A.jsx)("span",{className:"inline-block w-16 h-4 bg-gray-300 dark:bg-gray-500 rounded animate-pulse"}):e.name})]},e.id)}))})]})]}),(0,A.jsxs)("div",{className:"flex gap-6",children:[(0,A.jsx)("button",{onClick:()=>T(!0),className:"w-2/3 flex items-center justify-center px-4 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",title:"Beratung starten",children:(0,A.jsx)(c,{className:"h-5 w-5"})}),(0,A.jsx)("button",{onClick:()=>{Q(!J),M(null),ee(""),re(""),U("")},className:"w-1/3 flex items-center justify-center px-4 py-3 border text-base font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 "+(J?"border-blue-500 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"),title:"Planen",children:(0,A.jsx)(l.A,{className:"h-5 w-5"})})]}),J&&(0,A.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 space-y-3",children:[(0,A.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Beratung planen"}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Client"}),O?(0,A.jsxs)("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2",children:[(0,A.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:O.name}),(0,A.jsx)("button",{onClick:()=>T(!0),className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"\xc4ndern"})]}):(0,A.jsx)("button",{onClick:()=>T(!0),className:"w-full text-left bg-white dark:bg-gray-800 rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 text-sm text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Client ausw\xe4hlen..."})]}),(0,A.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Startzeit"}),(0,A.jsx)("input",{type:"datetime-local",value:X,onChange:e=>ee(e.target.value),className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Endzeit"}),(0,A.jsx)("input",{type:"datetime-local",value:te,onChange:e=>re(e.target.value),className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Notizen"}),(0,A.jsx)("textarea",{value:P,onChange:e=>U(e.target.value),className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white",rows:2,placeholder:"Optionale Notizen..."})]}),(0,A.jsx)("div",{className:"flex justify-end",children:(0,A.jsx)("button",{onClick:async()=>{if(O)if(X&&te)if(f)try{C(!0);const e=new Date(X),t=new Date(e.getTime()-6e4*e.getTimezoneOffset()),r=new Date(te),a=new Date(r.getTime()-6e4*r.getTimezoneOffset()),n=(await D({branchId:f,clientId:O.id,notes:P||"",startTime:t.toISOString()}),await R({endTime:a.toISOString(),notes:P||""}));Q(!1),ee(""),re(""),U(""),M(null),W(O.id),console.log("\ud83d\ude80 ConsultationTracker: Sending consultationChanged event (start)"),window.dispatchEvent(new CustomEvent("consultationChanged")),se(),null===s||void 0===s||s(n),o&&O.name&&o(O.name),b.oR.success("Beratung erfolgreich erfasst")}catch(e){console.error("Fehler beim Erfassen der Beratung:",e),b.oR.error("Fehler beim Erfassen der Beratung")}finally{C(!1)}else b.oR.error("Bitte w\xe4hlen Sie eine Niederlassung aus");else b.oR.error("Bitte geben Sie Start- und Endzeit an");else b.oR.error("Bitte w\xe4hlen Sie einen Client aus")},disabled:!O||!X||!te,className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Beratung speichern"})})]})]})]}),(0,A.jsx)(E,{isOpen:S,onClose:()=>T(!1),onSelect:e=>{M(e),T(!1),J||ne(e.id,P)},onCreateNew:()=>{T(!1),B(!0)}}),(0,A.jsx)(F,{isOpen:_,onClose:()=>B(!1),onSave:e=>{B(!1),M(e),se()}})]})};var B=r(8010),O=r(2704),M=r(3315),z=r(9670),$=r(3216);const P=e=>{let{isOpen:t,onClose:r,consultationId:s,onTaskLinked:n}=e;const[l,i]=(0,a.useState)([]),[d,o]=(0,a.useState)([]),[c,h]=(0,a.useState)(""),[x,g]=(0,a.useState)(!0),[p,k]=(0,a.useState)(null);(0,a.useEffect)((()=>{t&&w()}),[t]),(0,a.useEffect)((()=>{if(c){const e=l.filter((e=>e.title.toLowerCase().includes(c.toLowerCase())));o(e)}else o(l)}),[c,l]);const w=async()=>{try{g(!0);const e=(await u.A.get(m.Sn.TASKS.BASE)).data.filter((e=>"open"===e.status||"in_progress"===e.status));i(e),o(e)}catch(e){b.oR.error("Fehler beim Laden der Tasks")}finally{g(!1)}};return(0,A.jsxs)(y.lG,{open:t,onClose:r,className:"relative z-50",children:[(0,A.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,A.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,A.jsx)(y.lG.Panel,{className:"mx-auto max-w-2xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:(0,A.jsxs)("div",{className:"p-6",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,A.jsx)(y.lG.Title,{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Task verkn\xfcpfen"}),(0,A.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,A.jsx)(f.A,{className:"h-6 w-6"})})]}),(0,A.jsxs)("div",{className:"relative mb-4",children:[(0,A.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,A.jsx)(v.A,{className:"h-5 w-5 text-gray-400"})}),(0,A.jsx)("input",{type:"text",value:c,onChange:e=>h(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Task suchen...",autoFocus:!0})]}),(0,A.jsx)("div",{className:"max-h-96 overflow-y-auto",children:x?(0,A.jsx)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"Lade Tasks..."}):0===d.length?(0,A.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"Keine passenden Tasks gefunden"}):(0,A.jsx)("div",{className:"space-y-2",children:d.map((e=>(0,A.jsxs)("label",{className:"flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[(0,A.jsx)("input",{type:"radio",name:"task",value:e.id,checked:p===e.id,onChange:()=>k(e.id),className:"mr-3"}),(0,A.jsxs)("div",{className:"flex-1",children:[(0,A.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:e.title}),e.responsible&&(0,A.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Verantwortlich: ",e.responsible.firstName," ",e.responsible.lastName]})]}),(0,A.jsx)("span",{className:"px-2 py-1 text-xs rounded-full "+("open"===e.status?"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"),children:"open"===e.status?"Offen":"In Bearbeitung"})]},e.id)))})}),(0,A.jsxs)("div",{className:"mt-6 flex items-center justify-end space-x-3",children:[(0,A.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:"Abbrechen"}),(0,A.jsx)("button",{onClick:async()=>{if(p)try{await u.A.post(m.Sn.CONSULTATIONS.LINK_TASK(s),{taskId:p}),b.oR.success("Task erfolgreich verkn\xfcpft"),n(),r()}catch(a){var e,t;b.oR.error((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Fehler beim Verkn\xfcpfen des Tasks")}else b.oR.error("Bitte w\xe4hlen Sie einen Task aus")},disabled:!p,className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Verkn\xfcpfen"})]})]})})})]})};var U=r(4426),G=r(7829),W=r(9837),V=r(887),Z=r(4538),H=r(8416),K=r(9531);const Y=e=>{let{isOpen:t,onClose:r,invoiceId:s,invoiceNumber:n,totalAmount:l,clientName:i}=e;const[d,o]=(0,a.useState)(!1);return t?(0,A.jsxs)(y.lG,{open:t,onClose:r,className:"relative z-50",children:[(0,A.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,A.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,A.jsx)(y.lG.Panel,{className:"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:(0,A.jsxs)("div",{className:"p-6",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)(Z.A,{className:"h-8 w-8 text-green-500 mr-3"}),(0,A.jsx)(y.lG.Title,{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Rechnung erstellt"})]}),(0,A.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,A.jsx)(f.A,{className:"h-6 w-6"})})]}),(0,A.jsxs)("div",{className:"space-y-4",children:[(0,A.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[(0,A.jsx)("h3",{className:"font-medium text-green-800 dark:text-green-200 mb-2",children:"Rechnung erfolgreich erstellt"}),(0,A.jsxs)("div",{className:"text-sm text-green-700 dark:text-green-300 space-y-1",children:[(0,A.jsxs)("p",{children:[(0,A.jsx)("strong",{children:"Rechnungsnummer:"})," ",n]}),(0,A.jsxs)("p",{children:[(0,A.jsx)("strong",{children:"Kunde:"})," ",i]}),(0,A.jsxs)("p",{children:[(0,A.jsx)("strong",{children:"Betrag:"})," CHF ",l]})]})]}),(0,A.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,A.jsx)("h4",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"N\xe4chste Schritte"}),(0,A.jsxs)("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[(0,A.jsx)("li",{children:"\u2022 PDF herunterladen und an Kunde senden"}),(0,A.jsx)("li",{children:"\u2022 Beratungen sind nun als abgerechnet markiert"}),(0,A.jsx)("li",{children:"\u2022 Rechnung in der Rechnungsverwaltung verwalten"})]})]})]}),(0,A.jsxs)("div",{className:"mt-6 flex flex-col space-y-3",children:[(0,A.jsx)("button",{onClick:async()=>{try{o(!0);const e=await u.A.get(m.Sn.CONSULTATION_INVOICES.GENERATE_PDF(s),{responseType:"blob",headers:{Accept:"application/pdf"}}),t=new Blob([e.data],{type:"application/pdf"}),r=window.URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download=`Rechnung_${n}.pdf`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r),b.oR.success("PDF erfolgreich heruntergeladen")}catch(r){var e,t;console.error("Fehler beim Download der PDF:",r),b.oR.error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Fehler beim Download der PDF")}finally{o(!1)}},disabled:d,className:"w-full flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"PDF wird generiert..."]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(H.A,{className:"h-5 w-5 mr-2"}),"PDF herunterladen"]})}),(0,A.jsxs)("button",{onClick:()=>{b.oR.info("Rechnungsverwaltung wird in Phase 5 implementiert"),r()},className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[(0,A.jsx)(K.A,{className:"h-5 w-5 mr-2"}),"Zur Rechnungsverwaltung"]}),(0,A.jsx)("button",{onClick:r,className:"w-full px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:"Schlie\xdfen"})]})]})})})]}):null},q=e=>{let{isOpen:t,onClose:r,consultations:n,onInvoiceCreated:l}=e;const{hasPermission:i}=(0,s.S)(),[d,o]=(0,a.useState)(!1),[c,x]=(0,a.useState)(null),[g,v]=(0,a.useState)(null),[p,k]=(0,a.useState)(!1),[w,j]=(0,a.useState)({issueDate:(0,W.GP)(new Date,"yyyy-MM-dd"),dueDate:(0,W.GP)(new Date(Date.now()+2592e6),"yyyy-MM-dd"),hourlyRate:0,vatRate:0,notes:""}),C=i("invoice_create","write","button"),S=(0,a.useCallback)((async()=>{try{o(!0);const e=(await u.A.get(m.Sn.INVOICE_SETTINGS.BASE)).data;x(e),j((t=>({...t,hourlyRate:e.defaultHourlyRate||0,vatRate:e.defaultVatRate||0})))}catch(t){var e;console.error("Fehler beim Laden der Rechnungseinstellungen:",t),404===(null===(e=t.response)||void 0===e?void 0:e.status)?b.oR.error("Bitte konfigurieren Sie zuerst Ihre Rechnungseinstellungen"):b.oR.error("Fehler beim Laden der Rechnungseinstellungen")}finally{o(!1)}}),[]);if((0,a.useEffect)((()=>{t&&S()}),[t,S]),!C)return(0,A.jsxs)(y.lG,{open:t,onClose:r,className:"relative z-50",children:[(0,A.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,A.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,A.jsx)(y.lG.Panel,{className:"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6",children:(0,A.jsxs)("div",{className:"text-center",children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Keine Berechtigung"}),(0,A.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Sie haben keine Berechtigung, Rechnungen zu erstellen."}),(0,A.jsx)("button",{onClick:r,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Schlie\xdfen"})]})})})]});const T=e=>{const{name:t,value:r}=e.target;j((e=>({...e,[t]:r})))},E=n.reduce(((e,t)=>{if(t.endTime){const r=(0,h.P0)(t.startTime,t.endTime);return e+parseFloat(r.replace("h","").replace(",","."))}return e}),0),F=E*w.hourlyRate,D=w.vatRate>0?F*w.vatRate/100:0,R=F+D;return t?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(y.lG,{open:t&&!p,onClose:r,className:"relative z-50",children:[(0,A.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,A.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,A.jsx)(y.lG.Panel,{className:"mx-auto max-w-2xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:(0,A.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!c)return void b.oR.error("Rechnungseinstellungen konnten nicht geladen werden");if(0===n.length)return void b.oR.error("Keine Beratungen zum Abrechnen vorhanden");const t=[...new Set(n.map((e=>e.clientId)))];if(t.length>1)return void b.oR.error("Alle Beratungen m\xfcssen den gleichen Kunden haben");const r=t[0];if(r)try{var a,s;o(!0);const e=(await u.A.post(m.Sn.CONSULTATION_INVOICES.CREATE_FROM_CONSULTATIONS,{consultationIds:n.map((e=>e.id)),clientId:r,issueDate:w.issueDate,dueDate:w.dueDate,hourlyRate:w.hourlyRate,vatRate:w.vatRate||0,notes:w.notes})).data,t=(null===(a=n[0])||void 0===a||null===(s=a.client)||void 0===s?void 0:s.name)||"Unbekannt";v({id:e.id,invoiceNumber:e.invoiceNumber,total:e.total,clientName:t}),k(!0),l(e.id)}catch(h){var i,d;b.oR.error((null===(i=h.response)||void 0===i||null===(d=i.data)||void 0===d?void 0:d.message)||"Fehler beim Erstellen der Rechnung")}finally{o(!1)}else b.oR.error("Kein g\xfcltiger Kunde in den Beratungen gefunden")},className:"p-6",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,A.jsx)(y.lG.Title,{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Rechnung erstellen"}),(0,A.jsx)("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,A.jsx)(f.A,{className:"h-6 w-6"})})]}),(0,A.jsxs)("div",{className:"mb-6 bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[(0,A.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Zu verrechnende Beratungen"}),(0,A.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:n.map((e=>{var t;return(0,A.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,A.jsx)("div",{children:(0,A.jsxs)("span",{className:"text-gray-900 dark:text-white",children:[null===(t=e.client)||void 0===t?void 0:t.name," - ",(0,h.fU)(e.startTime)]})}),(0,A.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:(0,h.P0)(e.startTime,e.endTime)})]},e.id)}))}),(0,A.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600 flex justify-between text-sm font-medium",children:[(0,A.jsx)("span",{children:"Gesamtdauer:"}),(0,A.jsxs)("span",{children:[E.toFixed(2),"h"]})]})]}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rechnungsdatum"}),(0,A.jsx)("input",{type:"date",name:"issueDate",value:w.issueDate,onChange:T,className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"F\xe4lligkeitsdatum"}),(0,A.jsx)("input",{type:"date",name:"dueDate",value:w.dueDate,onChange:T,className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Stundensatz (CHF)"}),(0,A.jsx)("input",{type:"number",name:"hourlyRate",value:w.hourlyRate,onChange:T,step:"0.01",min:"0",className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"MwSt.-Satz (%)"}),(0,A.jsx)("input",{type:"number",name:"vatRate",value:w.vatRate,onChange:T,step:"0.1",min:"0",max:"100",className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),(0,A.jsxs)("div",{className:"mb-6",children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Zus\xe4tzliche Notizen"}),(0,A.jsx)("textarea",{name:"notes",value:w.notes,onChange:T,rows:3,className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Optionale Notizen zur Rechnung..."})]}),(0,A.jsxs)("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,A.jsx)("h3",{className:"font-medium text-blue-800 dark:text-blue-200 mb-3",children:"Kosten\xfcbersicht"}),(0,A.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,A.jsxs)("div",{className:"flex justify-between",children:[(0,A.jsxs)("span",{children:["Beratungszeit (",E.toFixed(2),"h \xd7 CHF ",w.hourlyRate,"):"]}),(0,A.jsxs)("span",{children:["CHF ",F.toFixed(2)]})]}),w.vatRate>0&&(0,A.jsxs)("div",{className:"flex justify-between",children:[(0,A.jsxs)("span",{children:["MwSt. (",w.vatRate,"%):"]}),(0,A.jsxs)("span",{children:["CHF ",D.toFixed(2)]})]}),(0,A.jsxs)("div",{className:"border-t border-blue-200 dark:border-blue-700 pt-2 flex justify-between font-medium",children:[(0,A.jsx)("span",{children:"Gesamtbetrag:"}),(0,A.jsxs)("span",{children:["CHF ",R.toFixed(2)]})]})]})]}),(0,A.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,A.jsx)("button",{type:"button",onClick:r,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:"Abbrechen",children:(0,A.jsx)(f.A,{className:"h-5 w-5"})}),(0,A.jsx)("button",{type:"submit",disabled:d||!c||0===E,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",title:d?"Erstelle Rechnung...":"Rechnung erstellen",children:d?(0,A.jsx)(N.A,{className:"h-5 w-5 animate-spin"}):(0,A.jsx)(O.A,{className:"h-5 w-5"})})]})]})})})]}),p&&g&&(0,A.jsx)(Y,{isOpen:p,onClose:()=>{k(!1),v(null),r()},invoiceId:g.id,invoiceNumber:g.invoiceNumber,totalAmount:Number(g.total).toFixed(2),clientName:g.clientName})]}):null},J="consultations-table",Q=(0,a.forwardRef)(((e,t)=>{let{onConsultationChange:r}=e;const{hasPermission:n}=(0,s.S)(),i=(0,$.Zp)(),[d,o]=(0,a.useState)([]),[c,x]=(0,a.useState)([]),[g,y]=(0,a.useState)(!0),[v,p]=(0,a.useState)(null),[w,N]=(0,a.useState)(""),[S,T]=(0,a.useState)(!1),[E,F]=(0,a.useState)([]),[D,R]=(0,a.useState)([]),[I,_]=(0,a.useState)(null),[Z,H]=(0,a.useState)(""),[K,Y]=(0,a.useState)(null),[Q,X]=(0,a.useState)(null),[ee,te]=(0,a.useState)(""),[re,ae]=(0,a.useState)(!1),[se,ne]=(0,a.useState)(null),[le,ie]=(0,a.useState)("Heute"),[de,oe]=(0,a.useState)(null),[ce,me]=(0,a.useState)(!1),ue=async()=>{try{y(!0);const e=await(async(e,t,r)=>{try{const a=new URLSearchParams;e&&a.append("clientId",e.toString()),t&&a.append("from",t),r&&a.append("to",r);const s=a.toString()?`${m.Sn.CONSULTATIONS.BASE}?${a}`:m.Sn.CONSULTATIONS.BASE;return(await u.A.get(s)).data}catch(v){throw console.error("Fehler beim Laden der Beratungen:",v),v}})();o(e||[]),p(null)}catch(v){console.error("Fehler beim Laden der Beratungen:",v),p("Fehler beim Laden der Beratungen")}finally{y(!1)}};(0,a.useImperativeHandle)(t,(()=>({refresh:ue,addConsultation:e=>{o((t=>[e,...t]))},updateConsultation:e=>{o((t=>t.map((t=>t.id===e.id?e:t))))},removeConsultation:e=>{o((t=>t.filter((t=>t.id!==e))))},activateClientFilter:he}))),(0,a.useEffect)((()=>{ue(),(async()=>{try{const e=await j();x(e||[])}catch(v){}})()}),[]),(0,a.useEffect)((()=>{(async()=>{try{const e=await u.A.get(m.Sn.SAVED_FILTERS.BY_TABLE(J)),t=e.data.find((e=>"Heute"===e.name));t&&(ie("Heute"),oe(t.id),xe(t.conditions,t.operators))}catch(v){console.error("Fehler beim Setzen des initialen Filters:",v)}})()}),[]);const he=async e=>{try{const t=await u.A.get(m.Sn.SAVED_FILTERS.BY_TABLE(J));let r=t.data.find((t=>t.name===e));if(!r){const t={tableId:J,name:e,conditions:[{column:"client",operator:"equals",value:e}],operators:[]};r=(await u.A.post(m.Sn.SAVED_FILTERS.BASE,t)).data,window.refreshSavedFilters&&window.refreshSavedFilters()}r&&(ie(e),oe(r.id),xe(r.conditions,r.operators))}catch(v){console.error("Fehler beim Erstellen/Aktivieren des Client-Filters:",v)}};(0,a.useEffect)((()=>{(async()=>{try{if(!localStorage.getItem("token"))return;const e=(await u.A.get(m.Sn.SAVED_FILTERS.BY_TABLE(J))).data,t=e.find((e=>"Alle"===e.name));if(t)try{await u.A.delete(m.Sn.SAVED_FILTERS.BY_ID(t.id)),console.log('Veralteter "Alle" Filter gel\xf6scht')}catch(v){console.error('Fehler beim L\xf6schen des "Alle" Filters:',v)}const r=e.find((e=>"Diese Woche"===e.name));if(r)try{await u.A.delete(m.Sn.SAVED_FILTERS.BY_ID(r.id)),console.log('Veralteter "Diese Woche" Filter gel\xf6scht')}catch(v){console.error('Fehler beim L\xf6schen des "Diese Woche" Filters:',v)}const a=e.some((e=>"Archiv"===e.name)),s=e.some((e=>"Heute"===e.name)),n=e.some((e=>"Woche"===e.name)),l=e.some((e=>"Nicht abgerechnet"===e.name));if(!a){const e=(new Date).toISOString().split("T")[0],t={tableId:J,name:"Archiv",conditions:[{column:"startTime",operator:"before",value:e}],operators:[]};try{await u.A.post(m.Sn.SAVED_FILTERS.BASE,t)}catch(v){console.error("Fehler beim Erstellen des Archiv-Filters:",v)}}if(!s){const e={tableId:J,name:"Heute",conditions:[{column:"startTime",operator:"equals",value:"__TODAY__"}],operators:[]};try{await u.A.post(m.Sn.SAVED_FILTERS.BASE,e)}catch(v){console.error("Fehler beim Erstellen des Heute-Filters:",v)}}if(!n){const e={tableId:J,name:"Woche",conditions:[{column:"startTime",operator:"after",value:"__TODAY__"},{column:"startTime",operator:"before",value:"__WEEK_FROM_TODAY__"}],operators:["AND"]};try{await u.A.post(m.Sn.SAVED_FILTERS.BASE,e)}catch(v){console.error("Fehler beim Erstellen des Woche-Filters:",v)}}if(!l){const e={tableId:J,name:"Nicht abgerechnet",conditions:[{column:"invoiceStatus",operator:"equals",value:"nicht abgerechnet"}],operators:[]};try{await u.A.post(m.Sn.SAVED_FILTERS.BASE,e)}catch(v){console.error("Fehler beim Erstellen des Nicht abgerechnet-Filters:",v)}}}catch(v){console.error("Fehler beim Erstellen der Standard-Filter:",v)}})()}),[]),(0,a.useEffect)((()=>{const e=setTimeout((()=>{(async()=>{try{const e=(await u.A.get(m.Sn.SAVED_FILTERS.BY_TABLE(J))).data,t=e.find((e=>"Heute"===e.name));if(t&&t.conditions.length>0){const e=t.conditions[0];e.value&&"__TODAY__"!==e.value&&/^\d{4}-\d{2}-\d{2}$/.test(e.value)&&(console.log("Aktualisiere Heute-Filter mit dynamischem Marker..."),await u.A.post(m.Sn.SAVED_FILTERS.BASE,{tableId:J,name:"Heute",conditions:[{column:"startTime",operator:"equals",value:"__TODAY__"}],operators:[]}))}const r=e.find((e=>"Woche"===e.name));if(r&&r.conditions.length>=2){const e=r.conditions[0],t=r.conditions[1];("__TODAY__"!==e.value&&/^\d{4}-\d{2}-\d{2}$/.test(e.value)||"__WEEK_FROM_TODAY__"!==t.value&&/^\d{4}-\d{2}-\d{2}$/.test(t.value))&&(console.log("Aktualisiere Woche-Filter mit dynamischen Markern..."),await u.A.post(m.Sn.SAVED_FILTERS.BASE,{tableId:J,name:"Woche",conditions:[{column:"startTime",operator:"after",value:"__TODAY__"},{column:"startTime",operator:"before",value:"__WEEK_FROM_TODAY__"}],operators:["AND"]}))}}catch(v){console.error("Fehler beim Aktualisieren bestehender Filter:",v)}})()}),1e3);return()=>clearTimeout(e)}),[]),(0,a.useEffect)((()=>{const e=setTimeout((()=>{(async()=>{if(0!==c.length)try{if(!localStorage.getItem("token"))return;const e=(await u.A.get(m.Sn.SAVED_FILTERS.BY_TABLE(J))).data,t=e.filter((e=>!["Archiv","Heute","Woche"].includes(e.name))),r=c.map((e=>e.name));for(const a of t)if(!r.includes(a.name))try{await u.A.delete(m.Sn.SAVED_FILTERS.BY_ID(a.id)),console.log(`Veralteter Client-Filter gel\xf6scht: ${a.name}`)}catch(v){console.error(`Fehler beim L\xf6schen des veralteten Client-Filters ${a.name}:`,v)}for(const a of c){const t=a.name;if(!e.some((e=>e.name===t))){const e={tableId:J,name:t,conditions:[{column:"client",operator:"equals",value:a.name}],operators:[]};await u.A.post(m.Sn.SAVED_FILTERS.BASE,e),console.log(`Neuer Client-Filter erstellt: ${t}`)}}}catch(v){console.error("Fehler beim Aktualisieren der Client-Filter:",v)}})()}),500);return()=>clearTimeout(e)}),[c]);const xe=(e,t)=>{F(e),R(t)},ge=()=>{F([]),R([])},be=()=>E.length,ye=e=>{(async(e,t)=>{try{await L(e,{notes:t}),o((r=>r.map((r=>r.id===e?{...r,notes:t}:r)))),b.oR.success("Notizen aktualisiert")}catch(v){console.error("Fehler beim Aktualisieren der Notizen:",v),b.oR.error("Fehler beim Aktualisieren der Notizen")}})(e,Z),_(null)},fe=()=>{_(null),H("")},ve=(e,t)=>{Y(e.id),X(t);const r="startTime"===t?e.startTime:e.endTime;if(r){const e=new Date(r),t=e.getUTCFullYear(),a=String(e.getUTCMonth()+1).padStart(2,"0"),s=String(e.getUTCDate()).padStart(2,"0"),n=String(e.getUTCHours()).padStart(2,"0"),l=String(e.getUTCMinutes()).padStart(2,"0"),i=`${t}-${a}-${s}T${n}:${l}`;console.log("\ud83d\udd27 DEBUG handleTimeEdit (KORRIGIERT):"),console.log("- DB Zeit (UTC):",r),console.log("- Extrahierte UTC-Komponenten:",`${n}:${l}`),console.log("- inputValue f\xfcr datetime-local:",i),te(i)}},pe=async e=>{if(Q&&ee)try{const t=`${ee}:00.000Z`;console.log("\ud83d\udd27 DEBUG handleTimeSave (REFACTORED):"),console.log("- editingTimeValue (Input):",ee),console.log("- timeString f\xfcr API (UTC):",t),console.log("- editingTimeType:",Q);await(async(e,t)=>{try{return(await u.A.put(`${m.Sn.WORKTIME.BASE}/${e}`,t)).data}catch(v){throw console.error("Fehler beim Aktualisieren der Zeit:",v),v}})(e,{[Q]:t});o((r=>r.map((r=>r.id===e?{...r,[Q]:t}:r)))),b.oR.success("Zeit aktualisiert"),Y(null),X(null),te("")}catch(v){var t,r;console.error("Fehler beim Aktualisieren der Zeit:",v),b.oR.error(`Fehler beim Aktualisieren der Zeit: ${(null===(t=v.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||v.message}`)}},ke=()=>{Y(null),X(null),te("")},we=async e=>{if(window.confirm("Sind Sie sicher, dass Sie diese Beratung l\xf6schen m\xf6chten? Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden."))try{await(async e=>{try{return(await u.A.delete(m.Sn.CONSULTATIONS.BY_ID(e))).data}catch(v){throw console.error("Fehler beim L\xf6schen der Beratung:",v),v}})(e),o((t=>t.filter((t=>t.id!==e)))),b.oR.success("Beratung erfolgreich gel\xf6scht"),null===r||void 0===r||r()}catch(v){var t,a;console.error("Fehler beim L\xf6schen der Beratung:",v);const r=(null===(t=v.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Fehler beim L\xf6schen der Beratung";b.oR.error(r)}},je=(0,a.useCallback)((e=>{let t=e;if(w){const e=w.toLowerCase();t=t.filter((t=>{var r,a,s,n,l;return(null===(r=t.client)||void 0===r||null===(a=r.name)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(s=t.notes)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(n=t.branch)||void 0===n||null===(l=n.name)||void 0===l?void 0:l.toLowerCase().includes(e))}))}return E.length>0&&(t=t.filter((e=>{var t,r,a,s,n;let l=!0;for(let i=0;i<E.length;i++){const d=E[i];let o=!1;switch(d.column){case"client":o=(null===(t=e.client)||void 0===t||null===(r=t.name)||void 0===r?void 0:r.toLowerCase().includes(String(d.value).toLowerCase()))||!1;break;case"branch":o=(null===(a=e.branch)||void 0===a||null===(s=a.name)||void 0===s?void 0:s.toLowerCase().includes(String(d.value).toLowerCase()))||!1;break;case"notes":o=(null===(n=e.notes)||void 0===n?void 0:n.toLowerCase().includes(String(d.value).toLowerCase()))||!1;break;case"startTime":const l=new Date(e.startTime).toISOString().split("T")[0];let i=String(d.value);if("__TODAY__"===i){const e=new Date;i=new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0]}else if("__WEEK_FROM_TODAY__"===i){const e=new Date,t=new Date(e.getTime()-6e4*e.getTimezoneOffset()),r=new Date(t);r.setDate(t.getDate()+7),i=r.toISOString().split("T")[0]}switch(d.operator){case"after":o=l>=i;break;case"before":o=l<i;break;case"equals":o=l===i;break;default:o=!1}break;case"duration":const c=Ne(e.startTime,e.endTime),m=60*Number(d.value);switch(d.operator){case"greater_than":o=c>m;break;case"less_than":o=c<m;break;case"equals":o=Math.abs(c-m)<30;break;default:o=!1}break;case"invoiceStatus":const u=(0,h.vv)(e),x=Te(e),g=String(d.value).toLowerCase();if("abgerechnet"===g||"invoiced"===g||"ja"===g)o=u||x;else if("nicht abgerechnet"===g||"not invoiced"===g||"nein"===g)o=!u&&!x;else if("einzelrechnung"===g||"invoice"===g)o=u;else if("monatsbericht"===g||"monthly report"===g)o=x;else if(u){const t=(0,h.h4)(e);o=(t?(0,h.Pg)(t.status).toLowerCase():"").includes(g)}else if(x){const t=Ee(e);if(t){o=("GENERATED"===t.status?"erstellt":"SENT"===t.status?"gesendet":"archiviert").includes(g)}else o=!1}else o=!1;break;default:o=!1}if(0===i)l=o;else{l="AND"===D[i-1]?l&&o:l||o}}return l}))),t}),[d,w,E,D]),Ne=(e,t)=>{if(!t)return 0;const r=new Date(e);return(new Date(t).getTime()-r.getTime())/6e4},Ce=(0,a.useMemo)((()=>je(d).sort(((e,t)=>new Date(e.startTime).getTime()-new Date(t.startTime).getTime()))),[d,E,D]),Se=(0,a.useMemo)((()=>(0,h.c$)(Ce)),[Ce]),Ae=(0,a.useMemo)((()=>(e=>{const t=[];return e.forEach(((r,a)=>{const s=new Date(r.startTime),n=(0,W.GP)(s,"yyyy-MM-dd",{locale:V.de}),l=s.getUTCHours();if(a>0){const r=new Date(e[a-1].startTime);n!==(0,W.GP)(r,"yyyy-MM-dd",{locale:V.de})&&t.push({id:`day-${n}`,type:"day",date:n,label:(0,W.GP)(s,"EEE, dd.MM.",{locale:V.de}),position:a})}else 0===a&&t.push({id:`day-${n}`,type:"day",date:n,label:(0,W.GP)(s,"EEE, dd.MM.",{locale:V.de}),position:a});if(a>0){const r=new Date(e[a-1].startTime),s=r.getUTCHours();n===(0,W.GP)(r,"yyyy-MM-dd",{locale:V.de})&&s<12&&l>=12&&t.push({id:`midday-${n}`,type:"midday",date:n,label:"Mittag",position:a})}})),t})(Ce)),[Ce]),Te=e=>null!==e.monthlyReportId&&void 0!==e.monthlyReportId,Ee=e=>e.monthlyReport,Fe=e=>{i(e?`/payroll?tab=monthly-reports&reportId=${e}`:"/payroll?tab=monthly-reports")},De=e=>{i(e?`/payroll?tab=invoices&invoiceId=${e}`:"/payroll?tab=invoices")},Re=e=>{i(`/worktracker?editTask=${e}`)};return g?(0,A.jsx)("div",{className:"p-4",children:"L\xe4dt..."}):v?(0,A.jsx)("div",{className:"p-4 text-red-600",children:v}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"bg-white dark:bg-gray-800 sm:shadow sm:rounded-lg sm:p-6 sm:border sm:border-gray-200 sm:dark:border-gray-700",children:[(0,A.jsxs)("div",{className:"flex items-center mb-6 justify-between px-2 sm:px-0",children:[(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)(l.A,{className:"h-6 w-6 mr-2 dark:text-white"}),(0,A.jsxs)("div",{children:[(0,A.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:"Beratungsliste"}),(0,A.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:[Ce.length," Beratung",1!==Ce.length?"en":""," - Total: ",Se]})]})]}),(0,A.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,A.jsx)("input",{type:"text",placeholder:"Suchen...",className:"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:w,onChange:e=>N(e.target.value)}),(0,A.jsxs)("button",{className:`p-2 rounded-md ${be()>0?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"hover:bg-gray-100 dark:hover:bg-gray-700"} ml-1 relative`,onClick:()=>T(!S),title:"Erweiterte Filter",children:[(0,A.jsx)(B.A,{className:"h-5 w-5"}),be()>0&&(0,A.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center",children:be()})]}),(()=>{if(!n("invoice_create","write","button"))return!1;if(!(Ce.length>0))return!1;if(!(E.length>0||""!==w.trim()))return!1;if(!Ce.every((e=>e.endTime)))return!1;return!Ce.some((e=>(0,h.vv)(e)))})()&&(0,A.jsx)("button",{onClick:()=>{me(!0)},className:"p-2 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors ml-2",title:"Rechnung aus gefilterten Beratungen erstellen",children:(0,A.jsx)(O.A,{className:"h-5 w-5"})})]})]}),S&&(0,A.jsx)("div",{className:"px-2 sm:px-0",children:(0,A.jsx)(U.A,{columns:[{id:"client",label:"Client"},{id:"branch",label:"Niederlassung"},{id:"notes",label:"Notizen"},{id:"startTime",label:"Datum"},{id:"duration",label:"Dauer (Stunden)"},{id:"invoiceStatus",label:"Abrechnungsstatus"}],onApply:xe,onReset:ge,savedConditions:E,savedOperators:D,tableId:J})}),(0,A.jsx)("div",{className:"px-2 sm:px-0",children:(0,A.jsx)(G.A,{tableId:J,onSelectFilter:xe,onReset:ge,activeFilterName:le,selectedFilterId:de,onFilterChange:(e,t,r,a)=>{ie(e),oe(t),xe(r,a)}})}),(0,A.jsx)("div",{className:"space-y-0.5 sm:space-y-1",children:0===Ce.length?(0,A.jsxs)("div",{className:"text-center py-12 px-2 sm:px-0",children:[(0,A.jsx)(l.A,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:"Keine Beratungen gefunden"}),(0,A.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:w||E.length>0?"Versuchen Sie andere Suchbegriffe oder Filter.":"Es wurden noch keine Beratungen durchgef\xfchrt."})]})]}):Ce.map(((e,t)=>{var r,a;const s=Ae.find((e=>"day"===e.type&&e.position===t)),l=Ae.find((e=>"midday"===e.type&&e.position===t));return(0,A.jsxs)("div",{className:"relative",children:[s&&(0,A.jsxs)("div",{className:"flex items-center mb-3 px-2 sm:px-0",children:[(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500 dark:bg-blue-400 border-2 border-white dark:border-gray-800"}),(0,A.jsx)("div",{className:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:s.label})]}),(0,A.jsx)("div",{className:"flex-1 ml-4 h-px bg-gray-200 dark:bg-gray-600"})]}),l&&(0,A.jsxs)("div",{className:"flex items-center mb-3 px-2 sm:px-0",children:[(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400 dark:bg-gray-500"}),(0,A.jsx)("div",{className:"ml-3 text-xs text-gray-500 dark:text-gray-400",children:l.label})]}),(0,A.jsx)("div",{className:"flex-1 ml-4 h-px bg-gray-300 dark:bg-gray-600"})]}),(0,A.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg md:border md:border-gray-200 md:dark:border-gray-700 hover:shadow-md transition-shadow",children:(0,A.jsx)("div",{className:"p-4",children:(0,A.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,A.jsxs)("div",{className:"col-span-1 space-y-3",children:[(0,A.jsx)("div",{className:"flex items-center space-x-2",children:(0,A.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,A.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:null===(r=e.client)||void 0===r?void 0:r.name}),(null===(a=e.client)||void 0===a?void 0:a.company)&&(0,A.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.client.company})]})}),(()=>{const t=(e=>{const t=(0,h.vv)(e),r=Te(e);if(t)return{type:"invoice",status:"Einzelrechnung",info:(0,h.h4)(e)};if(r)return{type:"monthly",status:"Monatsbericht",info:Ee(e)};return null})(e);if(t){if("invoice"===t.type)return(0,A.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,A.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,A.jsx)(O.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),(0,A.jsx)("button",{onClick:()=>{var e;return De(null===(e=t.info)||void 0===e?void 0:e.id)},className:"text-xs text-green-700 dark:text-green-400 font-medium hover:underline cursor-pointer",children:"Einzelrechnung"})]}),t.info&&"invoiceNumber"in t.info&&(0,A.jsx)("div",{className:"flex items-center space-x-1",children:(0,A.jsx)("button",{onClick:()=>{var e;return De(null===(e=t.info)||void 0===e?void 0:e.id)},className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium hover:opacity-80 cursor-pointer ${(0,h.DW)(t.info.status)}`,title:`Rechnung ${t.info.invoiceNumber} vom ${(0,W.GP)(new Date(t.info.issueDate),"dd.MM.yyyy",{locale:V.de})}`,children:(0,h.Pg)(t.info.status)})})]});if("monthly"===t.type)return(0,A.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,A.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,A.jsx)(M.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),(0,A.jsx)("button",{onClick:()=>{var e;return Fe(null===(e=t.info)||void 0===e?void 0:e.id)},className:"text-xs text-green-700 dark:text-green-400 font-medium hover:underline cursor-pointer",children:"Monatsbericht"})]}),t.info&&"reportNumber"in t.info&&(0,A.jsx)("div",{className:"flex items-center space-x-1",children:(0,A.jsx)("button",{onClick:()=>{var e;return Fe(null===(e=t.info)||void 0===e?void 0:e.id)},className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300 hover:opacity-80 cursor-pointer",title:`Monatsbericht ${t.info.reportNumber}`,children:"GENERATED"===t.info.status?"Erstellt":"SENT"===t.info.status?"Gesendet":"Archiviert"})})]})}return null})(),(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Zeit"}),(0,A.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:K===e.id&&"startTime"===Q||K===e.id&&"endTime"===Q?(0,A.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,A.jsx)("input",{type:"datetime-local",value:ee,onChange:e=>te(e.target.value),className:"text-xs rounded border-gray-300 dark:border-gray-600 dark:bg-gray-700 w-full"}),(0,A.jsx)("button",{onClick:()=>pe(e.id),className:"p-0.5 text-green-600 hover:text-green-700",title:"Speichern",children:(0,A.jsx)("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,A.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,A.jsx)("button",{onClick:ke,className:"p-0.5 text-red-600 hover:text-red-700",title:"Abbrechen",children:(0,A.jsx)(f.A,{className:"h-3 w-3"})})]}):(0,A.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,A.jsx)("button",{onClick:()=>ve(e,"startTime"),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 hover:underline",children:(0,h.fU)(e.startTime)}),(0,A.jsx)("span",{className:"text-gray-400",children:"-"}),e.endTime?(0,A.jsx)("button",{onClick:()=>ve(e,"endTime"),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 hover:underline",children:(0,h.fU)(e.endTime)}):(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1 animate-pulse"}),(0,A.jsx)("span",{className:"text-green-600 dark:text-green-400 text-xs",children:"Aktiv"})]})]})})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Dauer"}),(0,A.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(0,h.P0)(e.startTime,e.endTime)})]}),e.taskLinks&&e.taskLinks.length>0&&(0,A.jsxs)("div",{children:[(0,A.jsxs)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:["Tasks (",e.taskLinks.length,")"]}),(0,A.jsxs)("div",{className:"space-y-1",children:[e.taskLinks.slice(0,2).map((e=>(0,A.jsxs)("button",{onClick:()=>Re(e.task.id),className:"flex items-center text-xs text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded px-2 py-1 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors cursor-pointer w-full text-left",children:[(0,A.jsx)(z.A,{className:"h-3 w-3 mr-1 flex-shrink-0"}),(0,A.jsx)("span",{className:"truncate",children:e.task.title})]},e.id))),e.taskLinks.length>2&&(0,A.jsxs)("button",{onClick:()=>{e.taskLinks&&e.taskLinks.length>0&&Re(e.taskLinks[0].task.id)},className:"text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 cursor-pointer",children:["+",e.taskLinks.length-2," weitere"]})]})]})]}),(0,A.jsxs)("div",{className:"col-span-2 relative",children:[(0,A.jsxs)("div",{className:"absolute top-0 right-0 flex items-center space-x-1 z-10",children:[n("consultations","write")&&(0,A.jsx)("button",{onClick:()=>{return t=e.id,ne(t),void ae(!0);var t},className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 rounded",title:"Task verkn\xfcpfen",children:(0,A.jsx)(z.A,{className:"h-4 w-4"})}),n("consultations","write")&&e.endTime&&(0,A.jsx)("button",{onClick:()=>we(e.id),className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 rounded",title:"Beratung l\xf6schen",children:(0,A.jsx)(k.A,{className:"h-4 w-4"})})]}),(0,A.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Notizen"}),I===e.id?(0,A.jsxs)("div",{className:"space-y-2",children:[(0,A.jsx)("textarea",{value:Z,onChange:e=>H(e.target.value),className:"w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm resize-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Notizen zur Beratung..."}),(0,A.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,A.jsx)("button",{onClick:fe,className:"p-1.5 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:"Abbrechen",children:(0,A.jsx)(f.A,{className:"h-4 w-4"})}),(0,A.jsx)("button",{onClick:()=>ye(e.id),className:"p-1.5 bg-blue-600 text-white hover:bg-blue-700 rounded-md",title:"Speichern",children:(0,A.jsx)(C.A,{className:"h-4 w-4"})})]})]}):(0,A.jsx)("div",{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded p-2 min-h-[60px] border border-dashed border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 transition-colors",onClick:()=>(e=>{_(e.id),H(e.notes||"")})(e),children:e.notes?(0,A.jsx)("p",{className:"text-sm text-gray-900 dark:text-white whitespace-pre-wrap leading-relaxed",children:e.notes}):(0,A.jsx)("div",{className:"flex items-center justify-center h-full text-center",children:(0,A.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Notizen hinzuf\xfcgen..."})})})]})]})})})]},e.id)}))})]}),re&&se&&(0,A.jsx)(P,{isOpen:re,onClose:()=>{ae(!1),ne(null)},consultationId:se,onTaskLinked:e=>{ue(),null===r||void 0===r||r()}}),ce&&(0,A.jsx)(q,{isOpen:ce,onClose:()=>me(!1),consultations:Ce,onInvoiceCreated:e=>{me(!1),ue(),b.oR.success("Rechnung erstellt! PDF kann in der Rechnungsverwaltung heruntergeladen werden.")}})]})})),X=()=>{const{hasPermission:e}=(0,s.S)(),t=(0,a.useRef)(null),r=(0,a.useCallback)((e=>{var r,a,s,n,l;e&&e.id?e.endTime?null===(r=t.current)||void 0===r||null===(a=r.updateConsultation)||void 0===a||a.call(r,e):null===(s=t.current)||void 0===s||null===(n=s.addConsultation)||void 0===n||n.call(s,e):null===(l=t.current)||void 0===l||l.refresh()}),[]),n=(0,a.useCallback)((e=>{var r,a,s;null===(r=t.current)||void 0===r||r.refresh(),null===(a=t.current)||void 0===a||null===(s=a.activateClientFilter)||void 0===s||s.call(a,e)}),[]);return e("consultations","read")?(0,A.jsx)("div",{className:"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6",children:(0,A.jsxs)("div",{className:"py-1 space-y-6",children:[(0,A.jsx)("div",{className:"px-2 sm:px-0",children:(0,A.jsx)(_,{onConsultationChange:r,onConsultationStarted:n})}),(0,A.jsx)(Q,{ref:t,onConsultationChange:r})]})}):(0,A.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,A.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4",children:(0,A.jsx)("div",{className:"flex",children:(0,A.jsxs)("div",{className:"ml-3",children:[(0,A.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Keine Berechtigung"}),(0,A.jsx)("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:(0,A.jsx)("p",{children:"Sie haben keine Berechtigung, Beratungen anzuzeigen."})})]})})})})}},1713:(e,t,r)=>{r.d(t,{DW:()=>p,I5:()=>x,IF:()=>g,P0:()=>c,Pg:()=>v,Yq:()=>d,_2:()=>h,c$:()=>b,fU:()=>o,h4:()=>f,pg:()=>m,uT:()=>u,vv:()=>y});var a=r(4653),s=r(9837),n=r(1620),l=r(6981),i=r(887);const d=e=>{if(!e)return"-";try{const t=e.split("-");if(3!==t.length)return"-";const r=parseInt(t[0]),a=parseInt(t[1])-1,s=parseInt(t[2]);return new Date(r,a,s,12,0,0).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(t){return console.error("Fehler beim Formatieren des Datums:",t),"-"}},o=e=>{if(!e)return"-";try{const t=(0,a.H)(e),r=t.getUTCHours().toString().padStart(2,"0");return`${r}:${t.getUTCMinutes().toString().padStart(2,"0")}`}catch(t){return console.error(`Fehler beim Formatieren der Zeit f\xfcr ${e}:`,t),"-"}},c=(e,t)=>{if(!e||!t)return"-";try{const r=e.endsWith("Z")?e.substring(0,e.length-1):e,a=t.endsWith("Z")?t.substring(0,t.length-1):t,s=new Date(r),n=new Date(a).getTime()-s.getTime(),l=Math.floor(n/6e4),i=Math.floor(l/60);return`${i}h ${l%60}m`}catch(r){return console.error("Fehler bei der Dauerberechnung:",r),"-"}},m=e=>{try{const t=parseInt(e.substring(0,4)),r=parseInt(e.substring(6)),a=new Date(Date.UTC(t,0,1,12,0,0)).getUTCDay(),l=a<=4?4-a:11-a,d=new Date(Date.UTC(t,0,1+l,12,0,0)),o=new Date(Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()+7*(r-1),12,0,0)),c=new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()-3,12,0,0)),m=(0,s.GP)(c,"yyyy-MM-dd");if(console.log(`Konvertierte Woche ${e} zu Datum: ${m} (Wochentag: ${(0,s.GP)(c,"EEEE",{locale:i.de})})`),"Montag"!==(0,s.GP)(c,"EEEE",{locale:i.de})){console.warn("Berechnetes Datum ist kein Montag! Korrigiere...");const e=(0,n.k)(c,{weekStartsOn:1});return(0,s.GP)(e,"yyyy-MM-dd")}return m}catch(t){console.error("Fehler beim Konvertieren des Wochendatums:",t);const e=(0,n.k)(new Date,{weekStartsOn:1});return(0,s.GP)(e,"yyyy-MM-dd")}},u=(e,t)=>{try{if(!e||!e.startTime)return!1;return e.startTime.split("T")[0]===t}catch(r){return console.error("Fehler beim Pr\xfcfen der Relevanz eines Worktime-Eintrags:",r),!1}},h=e=>{if(!e)return[];const t=new Date(e),r=[];for(let a=0;a<7;a++){const e=(0,l.f)(t,a),n={date:(0,s.GP)(e,"yyyy-MM-dd"),day:(0,s.GP)(e,"EEEE",{locale:i.de})};r.push(n)}return r},x=e=>{if(!e)return"-";try{return new Date(e).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return console.error("Fehler beim Formatieren des Datums und der Zeit:",t),"-"}},g=e=>{const t=new Date(e);return new Date(t.getTime()+6e4*t.getTimezoneOffset())},b=e=>{try{const t=e.reduce(((e,t)=>{if(!t.endTime)return e;const r=t.startTime.endsWith("Z")?t.startTime.substring(0,t.startTime.length-1):t.startTime,a=t.endTime.endsWith("Z")?t.endTime.substring(0,t.endTime.length-1):t.endTime,s=new Date(r),n=new Date(a).getTime()-s.getTime();return e+Math.floor(n/6e4)}),0),r=Math.floor(t/60);return`${r}h ${t%60}m`}catch(t){return console.error("Fehler bei der Formatierung der Gesamtdauer:",t),"0h 0m"}},y=e=>!!(e.invoiceItems&&e.invoiceItems.length>0),f=e=>{if(!e.invoiceItems||0===e.invoiceItems.length)return null;return e.invoiceItems[0].invoice},v=e=>({DRAFT:"Entwurf",SENT:"Gesendet",PAID:"Bezahlt",OVERDUE:"\xdcberf\xe4llig",CANCELLED:"Storniert"}[e]||e),p=e=>({DRAFT:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",SENT:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",PAID:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",OVERDUE:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",CANCELLED:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"}[e]||"bg-gray-100 text-gray-800")},2302:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(5043);function s(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const n=a.forwardRef(s)},2517:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(5043);function s(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const n=a.forwardRef(s)},2704:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(5043);function s(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const n=a.forwardRef(s)},3315:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(5043);function s(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const n=a.forwardRef(s)},4538:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(5043);function s(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const n=a.forwardRef(s)},7012:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(5043);function s(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const n=a.forwardRef(s)},7449:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(5043);function s(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const n=a.forwardRef(s)},8010:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(5043);function s(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const n=a.forwardRef(s)},8416:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(5043);function s(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const n=a.forwardRef(s)},9531:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(5043);function s(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const n=a.forwardRef(s)},9670:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(5043);function s(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const n=a.forwardRef(s)}}]);
//# sourceMappingURL=556.fd4bed69.chunk.js.map