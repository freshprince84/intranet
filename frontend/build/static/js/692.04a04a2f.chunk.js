"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[692],{4426:(e,r,t)=>{t.d(r,{A:()=>m});var a=t(5043),l=t(4117),o=t(9379),s=t(7591),n=t(8662),i=t(1923),d=t(579);const c=e=>{let{condition:r,onChange:t,onDelete:c,onAdd:u,columns:g,isFirst:h,isLast:m}=e;const{t:b}=(0,l.Bd)(),[f,p]=(0,a.useState)([]),[x,v]=(0,a.useState)([]),[y,k]=(0,a.useState)([]),[w,j]=(0,a.useState)(!1),[A,N]=(0,a.useState)(!1);(0,a.useEffect)((()=>{p(((e,r)=>{const t=[{value:"equals",label:r("filter.operators.equals")},{value:"contains",label:r("filter.operators.contains")},{value:"startsWith",label:r("filter.operators.startsWith")},{value:"endsWith",label:r("filter.operators.endsWith")}],a=[{value:"equals",label:r("filter.operators.isExactly")},{value:"after",label:r("filter.operators.after")},{value:"before",label:r("filter.operators.before")},{value:"between",label:r("filter.operators.between")}],l=[{value:"equals",label:r("filter.operators.isEqual")},{value:"greater_than",label:r("filter.operators.greaterThan")},{value:"less_than",label:r("filter.operators.lessThan")}],o=[{value:"equals",label:r("filter.operators.equals")},{value:"notEquals",label:r("filter.operators.notEquals")}];return"dueDate"===e||"startTime"===e?a:"duration"===e?l:"status"===e||"responsible"===e||"qualityControl"===e||"responsibleAndQualityControl"===e?o:t})(r.column,b))}),[r.column,b]),(0,a.useEffect)((()=>{(async()=>{if(localStorage.getItem("token")&&("responsible"===r.column||"qualityControl"===r.column||"responsibleAndQualityControl"===r.column)){j(!0);try{const e=await i.A.get("/users");v(e.data)}catch(e){console.error("Fehler beim Laden der Benutzer:",e)}finally{j(!1)}if("responsible"===r.column||"responsibleAndQualityControl"===r.column){N(!0);try{const e=await i.A.get("/roles");k(e.data)}catch(e){console.error("Fehler beim Laden der Rollen:",e)}finally{N(!1)}}}})()}),[r.column]);return(0,d.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,d.jsx)("div",{className:"w-1/3",children:(0,d.jsxs)("select",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white w-full",value:r.column,onChange:e=>{var a;return t((0,o.A)((0,o.A)({},r),{},{column:e.target.value,operator:(null===(a=f[0])||void 0===a?void 0:a.value)||"equals",value:null}))},children:[(0,d.jsx)("option",{value:"",children:b("filter.row.selectColumn")}),g.map((e=>(0,d.jsx)("option",{value:e.id,children:e.label},e.id)))]})}),(0,d.jsx)("div",{className:"w-1/4",children:(0,d.jsx)("select",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white w-full",value:r.operator,onChange:e=>t((0,o.A)((0,o.A)({},r),{},{operator:e.target.value})),children:f.map((e=>(0,d.jsx)("option",{value:e.value,children:e.label},e.value)))})}),(0,d.jsx)("div",{className:"w-1/3",children:((e,r,t,a)=>{if("status"===e){const e=g.some((e=>"requestedBy"===e.id||"createTodo"===e.id)),r=g.some((e=>"responsible"===e.id||"qualityControl"===e.id)),l=g.some((e=>"client"===e.id))&&!g.some((e=>"responsible"===e.id));return e?(0,d.jsxs)("select",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:t||"",onChange:e=>a(e.target.value),children:[(0,d.jsx)("option",{value:"",children:b("filter.row.pleaseSelect")}),(0,d.jsx)("option",{value:"approval",children:b("filter.row.status.approval")}),(0,d.jsx)("option",{value:"approved",children:b("filter.row.status.approved")}),(0,d.jsx)("option",{value:"to_improve",children:b("filter.row.status.to_improve")}),(0,d.jsx)("option",{value:"denied",children:b("filter.row.status.denied")})]}):r?(0,d.jsxs)("select",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:t||"",onChange:e=>a(e.target.value),children:[(0,d.jsx)("option",{value:"",children:b("filter.row.pleaseSelect")}),(0,d.jsx)("option",{value:"open",children:b("filter.row.status.open")}),(0,d.jsx)("option",{value:"in_progress",children:b("filter.row.status.in_progress")}),(0,d.jsx)("option",{value:"improval",children:b("filter.row.status.improval")}),(0,d.jsx)("option",{value:"quality_control",children:b("filter.row.status.quality_control")}),(0,d.jsx)("option",{value:"done",children:b("filter.row.status.done")})]}):l?(0,d.jsxs)("select",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:t||"",onChange:e=>a(e.target.value),children:[(0,d.jsx)("option",{value:"",children:b("filter.row.pleaseSelect")}),(0,d.jsx)("option",{value:"DRAFT",children:b("filter.row.status.draft")}),(0,d.jsx)("option",{value:"SENT",children:b("filter.row.status.sent")}),(0,d.jsx)("option",{value:"PAID",children:b("filter.row.status.paid")}),(0,d.jsx)("option",{value:"OVERDUE",children:b("filter.row.status.overdue")}),(0,d.jsx)("option",{value:"CANCELLED",children:b("filter.row.status.cancelled")})]}):(0,d.jsxs)("select",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:t||"",onChange:e=>a(e.target.value),children:[(0,d.jsx)("option",{value:"",children:b("filter.row.pleaseSelect")}),(0,d.jsx)("option",{value:"open",children:b("filter.row.status.open")}),(0,d.jsx)("option",{value:"in_progress",children:b("filter.row.status.in_progress")}),(0,d.jsx)("option",{value:"done",children:b("filter.row.status.done")})]})}if("responsible"===e||"responsibleAndQualityControl"===e)return(0,d.jsxs)("select",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:t||"",onChange:e=>a(e.target.value),disabled:w||A,children:[(0,d.jsx)("option",{value:"",children:b("filter.row.pleaseSelect")}),x.length>0&&(0,d.jsx)("optgroup",{label:b("filter.row.groups.users"),children:x.map((e=>(0,d.jsxs)("option",{value:"user-".concat(e.id),children:[e.firstName," ",e.lastName]},"user-".concat(e.id))))}),y.length>0&&(0,d.jsx)("optgroup",{label:b("filter.row.groups.roles"),children:y.map((e=>(0,d.jsx)("option",{value:"role-".concat(e.id),children:e.name},"role-".concat(e.id))))}),(w||A)&&(0,d.jsx)("option",{value:"",disabled:!0,children:b("filter.row.loadingData")})]});if("qualityControl"===e)return(0,d.jsxs)("select",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:t||"",onChange:e=>a(e.target.value),disabled:w,children:[(0,d.jsx)("option",{value:"",children:b("filter.row.pleaseSelect")}),x.length>0&&(0,d.jsx)("optgroup",{label:b("filter.row.groups.users"),children:x.map((e=>(0,d.jsxs)("option",{value:"user-".concat(e.id),children:[e.firstName," ",e.lastName]},"user-".concat(e.id))))}),w&&(0,d.jsx)("option",{value:"",disabled:!0,children:b("filter.row.loadingUsers")})]});if("dueDate"===e||"startTime"===e){const e="__TODAY__"===t;return(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("select",{className:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-xs bg-white dark:bg-gray-800 text-gray-900 dark:text-white w-full",value:e?"variable":"date",onChange:e=>{"variable"===e.target.value?a("__TODAY__"):a("")},children:[(0,d.jsx)("option",{value:"date",children:b("filter.row.selectDate")}),(0,d.jsx)("option",{value:"variable",children:b("filter.row.currentDay")})]}),!e&&(0,d.jsx)("input",{type:"date",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md w-full bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:t||"",onChange:e=>a(e.target.value)}),e&&(0,d.jsxs)("div",{className:"px-3 py-2 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md text-blue-700 dark:text-blue-300 text-sm",children:["\ud83d\udcc5 ",b("filter.row.dynamicDay")]})]})}return(0,d.jsx)("input",{type:"text",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white w-full",value:t||"",onChange:e=>a(e.target.value),placeholder:b("filter.row.enterValue")})})(r.column,r.operator,r.value,(e=>t((0,o.A)((0,o.A)({},r),{},{value:e}))))}),(0,d.jsxs)("div",{className:"flex space-x-1",children:[(0,d.jsx)("button",{type:"button",onClick:c,className:"p-2 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-500 rounded-md",disabled:h&&!m,title:b("filter.row.removeCondition"),children:(0,d.jsx)(s.A,{className:"h-5 w-5"})}),m&&(0,d.jsx)("button",{type:"button",onClick:u,className:"p-2 text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-500 rounded-md",title:b("filter.row.addCondition"),children:(0,d.jsx)(n.A,{className:"h-5 w-5"})})]})]})},u=e=>{let{operator:r,onChange:t}=e;return(0,d.jsx)("div",{className:"flex items-center justify-center my-2 mx-4",children:(0,d.jsxs)("select",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:r,onChange:e=>t(e.target.value),children:[(0,d.jsx)("option",{value:"AND",children:"UND"}),(0,d.jsx)("option",{value:"OR",children:"ODER"})]})})};var g=t(1801),h=t(7488);const m=e=>{let{columns:r,onApply:t,onReset:o,savedConditions:s,savedOperators:n,tableId:m}=e;const{t:b}=(0,l.Bd)(),[f,p]=(0,a.useState)(s&&s.length>0?s:[{column:"",operator:"equals",value:null}]),[x,v]=(0,a.useState)(n&&n.length>0?n:[]),[y,k]=(0,a.useState)(!1),[w,j]=(0,a.useState)(""),[A,N]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{try{if(!localStorage.getItem("token"))return;const e=await i.A.get(g.Sn.SAVED_FILTERS.BY_TABLE(m));N(e.data.map((e=>({id:e.id,name:e.name}))))}catch(e){console.error("Fehler beim Laden der existierenden Filter:",e)}})()}),[m]),(0,a.useEffect)((()=>{s&&s.length>0&&p(s),n&&n.length>0&&v(n)}),[s,n]);const S=()=>{p([...f,{column:"",operator:"equals",value:null}]),f.length>0&&v([...x,"AND"])};return(0,d.jsxs)("div",{className:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-lg",children:[(0,d.jsx)("h3",{className:"text-base font-medium text-gray-700 dark:text-gray-200 mb-3",children:b("filter.title")}),(0,d.jsx)("div",{className:"space-y-0",children:f.map(((e,t)=>(0,d.jsxs)(a.Fragment,{children:[(0,d.jsx)(c,{condition:e,onChange:e=>((e,r)=>{const t=[...f];t[e]=r,p(t)})(t,e),onDelete:()=>(e=>{const r=[...f];if(r.splice(e,1),p(r),e>0){const r=[...x];r.splice(e-1,1),v(r)}})(t),onAdd:S,columns:r,isFirst:0===t,isLast:t===f.length-1}),t<f.length-1&&(0,d.jsx)(u,{operator:x[t]||"AND",onChange:e=>((e,r)=>{const t=[...x];t[e]=r,v(t)})(t,e)})]},t)))}),y?(0,d.jsxs)("div",{className:"mt-4 flex gap-2 items-center",children:[(0,d.jsx)("input",{type:"text",className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white flex-grow",placeholder:b("filter.filterName"),value:w,onChange:e=>j(e.target.value)}),(0,d.jsx)("button",{onClick:async()=>{if(!w.trim())return void h.oR.error(b("filter.noName"));if("Archiv"===w||"Aktuell"===w)return void h.oR.error(b("filter.reservedNames"));if(A.some((e=>("Archiv"===e.name||"Aktuell"===e.name)&&e.name===w)))return void h.oR.error(b("filter.cannotOverwriteStandard"));const e=f.filter((e=>""!==e.column));if(0!==e.length)try{if(!localStorage.getItem("token"))return void h.oR.error(b("filter.notAuthenticated"));await i.A.post(g.Sn.SAVED_FILTERS.BASE,{tableId:m,name:w,conditions:e,operators:x});h.oR.success(b("filter.saveSuccess")),k(!1),j("")}catch(r){console.error("Fehler beim Speichern des Filters:",r),h.oR.error(b("filter.saveError"))}else h.oR.error(b("filter.noConditions"))},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800",children:b("filter.saveFilter")}),(0,d.jsx)("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700",children:b("filter.cancel")})]}):(0,d.jsxs)("div",{className:"flex justify-end gap-3 mt-4",children:[(0,d.jsx)("button",{onClick:()=>{p([{column:"",operator:"equals",value:null}]),v([]),o()},className:"px-4 py-2 text-sm bg-white text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700",children:b("filter.reset")}),(0,d.jsx)("button",{onClick:()=>k(!0),className:"px-4 py-2 text-sm bg-white text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700",children:b("filter.save")}),(0,d.jsx)("button",{onClick:()=>{const e=f.filter((e=>""!==e.column));t(e,x)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800",children:b("filter.apply")})]})]})}},7829:(e,r,t)=>{t.d(r,{A:()=>u});var a=t(5043),l=t(4117),o=t(7591),s=t(2517),n=t(1923),i=t(1801),d=t(7488),c=t(579);const u=e=>{let{tableId:r,onSelectFilter:t,onReset:u,activeFilterName:g,selectedFilterId:h,onFilterChange:m,defaultFilterName:b="Heute"}=e;const{t:f}=(0,l.Bd)(),p=e=>"Archiv"===e||"tasks.filters.archive"===e||"requests.filters.archiv"===e?f("worktracker-todos"===r?"tasks.filters.archive":"requests.filters.archiv"):"Aktuell"===e||"tasks.filters.current"===e||"requests.filters.aktuell"===e?f("worktracker-todos"===r?"tasks.filters.current":"requests.filters.aktuell"):"Heute"===e?f("common.today","Heute"):"Woche"===e?f("common.week","Woche"):"Aktive"===e?f("common.active","Aktive"):"Alle"===e?f("common.all","Alle"):e,[x,v]=(0,a.useState)([]),[y,k]=(0,a.useState)(!0),[w,j]=(0,a.useState)(null),[A,N]=(0,a.useState)([]),S=(0,a.useRef)(null),[C,F]=(0,a.useState)(4),[E,T]=(0,a.useState)(0),_=(0,a.useRef)(null),[L,R]=(0,a.useState)(!1),D=(0,a.useCallback)((async()=>{if("consultations-table"===r)try{console.log("\ud83d\udd04 SavedFilterTags: Loading recent clients...");const e=(await n.A.get(i.Sn.CLIENTS.RECENT)).data.map((e=>e.name));console.log("\ud83d\udccb SavedFilterTags: Recent client names:",e),N(e),await(async e=>{try{const t=(await n.A.get(i.Sn.SAVED_FILTERS.BY_TABLE(r))).data.filter((r=>e.includes(r.name)));if(t.length>5){const e=t.sort(((e,r)=>new Date(e.createdAt).getTime()-new Date(r.createdAt).getTime())).slice(0,t.length-5);for(const r of e)await n.A.delete(i.Sn.SAVED_FILTERS.BY_ID(r.id));q()}}catch(w){console.error("Fehler beim Bereinigen der Client-Filter:",w)}})(e)}catch(w){console.error("\u274c SavedFilterTags: Error loading recent clients:",w)}}),[r]);(0,a.useEffect)((()=>{const e=()=>{console.log("\ud83d\udd14 SavedFilterTags: Received consultationChanged event"),D()};return window.addEventListener("consultationChanged",e),()=>{window.removeEventListener("consultationChanged",e)}}),[D]),(0,a.useEffect)((()=>{D()}),[D]),(0,a.useEffect)((()=>{(async()=>{try{k(!0);if(!localStorage.getItem("token"))return void j("Nicht authentifiziert");const e=await n.A.get(i.Sn.SAVED_FILTERS.BY_TABLE(r)),a=Array.isArray(e.data)?e.data.filter((e=>null!=e)):[];if(v(a),!m&&b&&!g){const e=a.find((e=>null!=e&&e.name===b));e&&t(e.conditions,e.operators)}}catch(e){console.error("Fehler beim Laden der gespeicherten Filter:",e),j("Fehler beim Laden der gespeicherten Filter")}finally{k(!1)}})()}),[r]);const q=async()=>{try{const e=await n.A.get(i.Sn.SAVED_FILTERS.BY_TABLE(r)),t=Array.isArray(e.data)?e.data.filter((e=>null!=e)):[];v(t)}catch(w){console.error("Fehler beim Neuladen der Filter:",w)}};(0,a.useEffect)((()=>(window.refreshSavedFilters=q,()=>{delete window.refreshSavedFilters})),[]),(0,a.useEffect)((()=>{const e=e=>{L&&!e.target.closest(".relative")&&R(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[L]);const I=e=>{m?m(e.name,e.id,e.conditions,e.operators):t(e.conditions,e.operators)},B=async(e,r)=>{e.stopPropagation();const t=x.find((e=>e.id===r));if(t&&W(t.name))d.oR.error("Standard-Filter k\xf6nnen nicht gel\xf6scht werden");else try{if(!localStorage.getItem("token"))return void j("Nicht authentifiziert");await n.A.delete(i.Sn.SAVED_FILTERS.BY_ID(r)),v(x.filter((e=>e.id!==r))),(h===r||!m&&r)&&(m?m("",null,[],[]):u()),d.oR.success("Filter erfolgreich gel\xf6scht")}catch(a){console.error("Fehler beim L\xf6schen des Filters:",a),d.oR.error("Fehler beim L\xf6schen des Filters")}},W=e=>{if(["Archiv","Aktuell","Aktive","Alle","Heute","Woche","tasks.filters.archive","tasks.filters.current","requests.filters.archiv","requests.filters.aktuell"].includes(e))return!0;if("consultations-table"===r){if("Archiv"===e||"Heute"===e||"Woche"===e)return!0;if(A.includes(e))return!0}return!1},P=(0,a.useMemo)((()=>{if("consultations-table"===r){console.log("\ud83d\udd27 SavedFilterTags: Sorting filters..."),console.log("\ud83d\udccb SavedFilterTags: recentClientNames:",A),console.log("\ud83d\uddc2\ufe0f SavedFilterTags: savedFilters:",x.filter((e=>null!=e)).map((e=>e.name)));const e=x.find((e=>null!=e&&"Heute"===e.name)),r=x.find((e=>null!=e&&"Woche"===e.name)),t=x.find((e=>null!=e&&"Archiv"===e.name)),a=A.map((e=>x.find((r=>null!=r&&r.name===e)))).filter((e=>null!=e));console.log("\u2705 SavedFilterTags: sortedRecentClientFilters:",a.map((e=>e.name)));const l=x.filter((e=>null!=e&&!["Heute","Woche","Archiv"].includes(e.name)&&!A.includes(e.name)));console.log("\ud83d\udd27 SavedFilterTags: customFilters:",l.map((e=>e.name)));const o=[];return e&&o.push(e),r&&o.push(r),o.push(...a),o.push(...l),t&&o.push(t),console.log("\ud83c\udfaf SavedFilterTags: Final filter order:",o.map((e=>e.name))),o}if("requests-table"===r||"worktracker-todos"===r){const e=x.find((e=>null!=e&&"Aktuell"===e.name)),r=x.find((e=>null!=e&&"Archiv"===e.name)),t=x.filter((e=>null!=e&&"Aktuell"!==e.name&&"Archiv"!==e.name)),a=[];return e&&a.push(e),a.push(...t),r&&a.push(r),a}return x}),[x,A,r]),M=0===x.length&&y,V=(0,a.useMemo)((()=>M?Array(3).fill(null).map(((e,t)=>({id:"placeholder-".concat(t),name:0===t?"Heute":1===t?"Woche":"\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588",isPlaceholder:!0,tableId:r,conditions:[],operators:[]}))):[]),[M,r]),z=M?V:P.filter((e=>null!=e)),H=M?V.length:C,O=(0,a.useMemo)((()=>0===P.length?75:P.filter((e=>null!=e)).reduce(((e,r)=>{const t=W(r.name)?0:18;return e+(6.5*r.name.length+28+t)}),0)/P.filter((e=>null!=e)).length),[P]),Y=(0,a.useCallback)((()=>{if(!S.current||0===P.length)return;const e=S.current.clientWidth;if(Math.abs(e-E)<45)return;T(e);const r=e-14-15;if(Math.max(1,Math.floor(r/O))>=P.length)F(P.length);else{const e=r-70,t=Math.max(1,Math.floor(e/O));F(Math.min(t,P.length-1))}}),[P,O,E,W]),Q=(0,a.useCallback)((()=>{_.current&&clearTimeout(_.current),_.current=setTimeout((()=>{Y()}),100)}),[Y]);(0,a.useEffect)((()=>{if(!S.current)return;const e=new ResizeObserver(Q);return e.observe(S.current),window.addEventListener("resize",Q),()=>{e.disconnect(),window.removeEventListener("resize",Q),_.current&&clearTimeout(_.current)}}),[Q]),(0,a.useLayoutEffect)((()=>{Y()}),[Y]);const U=()=>m?h:null;return y?(0,c.jsx)("div",{className:"flex justify-center items-center py-2",children:f("common.loadingFilters")}):w?(0,c.jsx)("div",{className:"text-red-500 py-2",children:w}):0===x.length?null:(0,c.jsx)("div",{ref:S,className:"flex items-center gap-2 mb-3 mt-1",children:(0,c.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[z.slice(0,H).map((e=>(0,c.jsxs)("div",{onClick:()=>!e.isPlaceholder&&I(e),className:"flex items-center px-3 py-1 rounded-full text-sm font-medium cursor-pointer transition-colors flex-shrink-0 ".concat(e.isPlaceholder?"bg-gray-200 dark:bg-gray-600 text-gray-400 dark:text-gray-500 animate-pulse cursor-default":U()===e.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 border border-blue-300 dark:border-blue-700":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-gray-200 dark:hover:bg-gray-600"," ").concat(!e.isPlaceholder&&W(e.name)?"font-bold":""),title:e.isPlaceholder?f("common.loading"):p(e.name),children:[(0,c.jsx)("span",{className:"truncate max-w-[100px]",children:e.isPlaceholder&&"\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588"===e.name?(0,c.jsx)("span",{className:"inline-block w-16 h-4 bg-gray-300 dark:bg-gray-500 rounded animate-pulse"}):p(e.name)}),!e.isPlaceholder&&!W(e.name)&&(0,c.jsx)("button",{onClick:r=>B(r,e.id),className:"ml-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 focus:outline-none",title:"Filter l\xf6schen",children:(0,c.jsx)(o.A,{className:"h-4 w-4"})})]},e.id))),!M&&P.length>C&&(0,c.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,c.jsxs)("button",{onClick:()=>R(!L),className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors border border-gray-300 dark:border-gray-600",title:"Weitere Filter anzeigen",children:[(0,c.jsxs)("span",{children:["+",P.length-C]}),(0,c.jsx)(s.A,{className:"h-4 w-4 ml-1 transition-transform ".concat(L?"rotate-180":"")})]}),L&&(0,c.jsx)("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50 min-w-[200px] max-w-[300px]",children:P.slice(C).map((e=>(0,c.jsxs)("div",{onClick:()=>{I(e),R(!1)},className:"flex items-center justify-between px-3 py-2 text-sm cursor-pointer transition-colors ".concat(U()===e.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"," ").concat(W(e.name)?"font-bold":""),title:p(e.name),children:[(0,c.jsx)("span",{className:"truncate flex-1",children:p(e.name)}),!W(e.name)&&(0,c.jsx)("button",{onClick:r=>{r.stopPropagation(),B(r,e.id),R(!1)},className:"ml-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 focus:outline-none flex-shrink-0",title:"Filter l\xf6schen",children:(0,c.jsx)(o.A,{className:"h-4 w-4"})})]},e.id)))})]})]})})}}}]);
//# sourceMappingURL=692.04a04a2f.chunk.js.map