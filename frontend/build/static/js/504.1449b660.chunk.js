"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[504],{1504:(e,t,r)=>{r.r(t),r.d(t,{default:()=>T});var a=r(5043),s=r(4117),n=r(3216),i=r(1923),d=r(1801),o=r(1726),l=r(7855),c=r(7591),m=r(4538),x=r(579);const g=e=>{let{reservation:t,onSuccess:r,onCancel:n}=e;const{t:o}=(0,s.Bd)(),{showMessage:g}=(0,l.A)(),[h,u]=(0,a.useState)(!1),[b,v]=(0,a.useState)(t.roomNumber||""),[y,p]=(0,a.useState)(t.roomDescription||"");return(0,x.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 max-w-md w-full p-6",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,x.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o("reservations.checkIn","Check-in durchf\xfchren")}),(0,x.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,x.jsx)(c.A,{className:"h-6 w-6"})})]}),(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:[o("reservations.guest","Gast"),": ",(0,x.jsx)("strong",{children:t.guestName})]}),(0,x.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o("reservations.checkInDate","Check-in Datum"),": ",new Date(t.checkInDate).toLocaleDateString()]})]}),(0,x.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),b.trim())try{u(!0),await i.A.put(d.Sn.RESERVATIONS.CHECK_IN(t.id),{roomNumber:b.trim(),roomDescription:y.trim()||void 0}),r()}catch(n){var a,s;console.error("Fehler beim Check-in:",n),g((null===(a=n.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||o("reservations.checkInError","Fehler beim Check-in"),"error")}finally{u(!1)}else g(o("reservations.roomNumberRequired","Zimmernummer ist erforderlich"),"error")},className:"space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o("reservations.roomNumber","Zimmernummer")," *"]}),(0,x.jsx)("input",{type:"text",value:b,onChange:e=>v(e.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:o("reservations.roomNumberPlaceholder","z.B. 101")})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o("reservations.roomDescription","Zimmerbeschreibung")}),(0,x.jsx)("textarea",{value:y,onChange:e=>p(e.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:o("reservations.roomDescriptionPlaceholder","Optionale Beschreibung des Zimmers")})]}),(0,x.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,x.jsx)("button",{type:"button",onClick:n,disabled:h,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50",children:o("common.cancel","Abbrechen")}),(0,x.jsx)("button",{type:"submit",disabled:h,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:h?(0,x.jsx)("span",{children:o("common.processing","Wird verarbeitet...")}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.A,{className:"h-5 w-5 mr-2"}),o("reservations.checkIn","Check-in durchf\xfchren")]})})]})]})]})})};var h=r(4450);const u=e=>{let{isOpen:t,onClose:r,reservation:n,onSuccess:i}=e;const{t:d}=(0,s.Bd)(),{showMessage:o}=(0,l.A)(),[m,g]=(0,a.useState)(""),[u,b]=(0,a.useState)(!1),[v,y]=(0,a.useState)(null);(0,a.useEffect)((()=>{t&&(g(""),y(null))}),[t]);return t?(0,x.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,x.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,x.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:r}),(0,x.jsx)("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,x.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:d("reservations.guestContact.title","Gast-Kontaktinformation")}),(0,x.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,x.jsx)(c.A,{className:"h-6 w-6"})})]}),(0,x.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),m&&0!==m.trim().length)try{b(!0),await h.u.updateGuestContact(n.id,m.trim()),o(d("reservations.contactUpdated","Kontaktinformation aktualisiert und Nachricht versendet"),"success"),i(),r()}catch(s){var t,a;console.error("Fehler beim Aktualisieren der Kontaktinformation:",s),o((null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||d("reservations.contactUpdateError","Fehler beim Aktualisieren"),"error")}finally{b(!1)}else o(d("reservations.contactRequired","Kontaktinformation ist erforderlich"),"error")},children:[(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)("label",{htmlFor:"contact",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:d("reservations.guestContact.label","Telefonnummer oder Email")}),(0,x.jsx)("input",{type:"text",id:"contact",value:m,onChange:e=>{const t=e.target.value;g(t),y((e=>e&&0!==e.trim().length?e.includes("@")&&e.includes(".")?"email":"phone":null)(t))},placeholder:d("reservations.guestContact.placeholder","z.B. +573001234567 oder email@example.com"),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2",required:!0}),v&&(0,x.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"email"===v?d("reservations.guestContact.detectedEmail","Email erkannt"):d("reservations.guestContact.detectedPhone","Telefonnummer erkannt")}),(0,x.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:d("reservations.guestContact.hint","Nach dem Speichern wird automatisch eine WhatsApp-Nachricht mit Zahlungslink und TTLock Code versendet.")})]}),(0,x.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,x.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:d("common.cancel","Abbrechen")}),(0,x.jsx)("button",{type:"submit",disabled:u||!m||0===m.trim().length,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:u?d("common.saving","Wird gespeichert..."):d("common.save","Speichern")})]})]})]})})]})}):null};var b=r(7935),v=r(5442),y=r(8682),p=r(9850),k=r(4129),f=r(7988),N=r(5501),j=r(7012),w=r(45);const A=["title","titleId"];function E(e,t){let{title:r,titleId:s}=e,n=(0,w.A)(e,A);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const I=a.forwardRef(E);var L=r(6693),C=r(9837),S=r(887),R=r(4057),D=r(6511);const T=()=>{const{t:e,i18n:t}=(0,s.Bd)(),{showMessage:r}=(0,l.A)(),{id:c}=(0,n.g)(),h=(0,n.Zp)(),[w,A]=(0,a.useState)(null),[E,T]=(0,a.useState)(!0),[O,M]=(0,a.useState)(null),[P,_]=(0,a.useState)(!1),[F,B]=(0,a.useState)(!1),[Z,W]=(0,a.useState)(0),G=()=>{switch(t.language){case"de":return S.de;case"es":return R.es;default:return D.c}},H=e=>{try{const t=new Date(e),r=t.getUTCFullYear(),a=t.getUTCMonth(),s=t.getUTCDate(),n=new Date(r,a,s);return(0,C.GP)(n,"dd.MM.yyyy",{locale:G()})}catch(t){return e}},K=async()=>{if(c)try{var t;T(!0),M(null);const e=await i.A.get(d.Sn.RESERVATION.BY_ID(parseInt(c))),r=(null===(t=e.data)||void 0===t?void 0:t.data)||e.data;console.log("[ReservationDetails] Geladene Reservierung:",r),console.log("[ReservationDetails] Status:",null===r||void 0===r?void 0:r.status),console.log("[ReservationDetails] PaymentStatus:",null===r||void 0===r?void 0:r.paymentStatus),A(r),W((e=>e+1))}catch(l){var a,s,n,o;console.error("Fehler beim Laden der Reservierung:",l),M((null===(a=l.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||e("reservations.loadError","Fehler beim Laden der Reservierung")),r((null===(n=l.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)||e("reservations.loadError","Fehler beim Laden der Reservierung"),"error")}finally{T(!1)}};(0,a.useEffect)((()=>{K()}),[c]);if(E)return(0,x.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:(0,x.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,x.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),(0,x.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),(0,x.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6"})]})});if(O||!w)return(0,x.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("p",{className:"text-red-600 dark:text-red-400 mb-4",children:O||e("reservations.notFound","Reservierung nicht gefunden")}),(0,x.jsx)("button",{onClick:()=>h("/worktracker"),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:e("common.back","Zur\xfcck")})]})});const V=w.status===o.X.CONFIRMED,z=w&&(w.status===o.X.CONFIRMED||w.status===o.X.NOTIFICATION_SENT)&&!w.guestPhone&&!w.guestEmail;return(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("button",{onClick:()=>h("/worktracker"),className:"flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:[(0,x.jsx)(v.A,{className:"h-5 w-5 mr-2"}),e("common.back","Zur\xfcck")]}),(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[z&&(0,x.jsx)("button",{onClick:()=>B(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:e("reservations.addContact","Kontakt hinzuf\xfcgen")}),V&&(0,x.jsx)("button",{onClick:()=>_(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:e("reservations.checkIn","Check-in durchf\xfchren")})]})]}),(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,x.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:w.guestName}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("reservations.guestInfo","Gast-Informationen")}),(0,x.jsxs)("div",{className:"space-y-3",children:[w.guestEmail&&(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(y.A,{className:"h-5 w-5 mr-3 text-gray-400"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("reservations.email","E-Mail")}),(0,x.jsx)("p",{className:"text-gray-900 dark:text-white",children:w.guestEmail})]})]}),w.guestPhone&&(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(p.A,{className:"h-5 w-5 mr-3 text-gray-400"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("reservations.phone","Telefon")}),(0,x.jsx)("p",{className:"text-gray-900 dark:text-white",children:w.guestPhone})]})]}),w.guestNationality&&(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(k.A,{className:"h-5 w-5 mr-3 text-gray-400"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("reservations.nationality","Nationalit\xe4t")}),(0,x.jsx)("p",{className:"text-gray-900 dark:text-white",children:w.guestNationality})]})]})]})]}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("reservations.reservationInfo","Reservierungs-Informationen")}),(0,x.jsxs)("div",{className:"space-y-3",children:[(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(f.A,{className:"h-5 w-5 mr-3 text-gray-400"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("reservations.checkIn","Check-in")}),(0,x.jsx)("p",{className:"text-gray-900 dark:text-white",children:H(w.checkInDate)})]})]}),(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(f.A,{className:"h-5 w-5 mr-3 text-gray-400"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("reservations.checkOut","Check-out")}),(0,x.jsx)("p",{className:"text-gray-900 dark:text-white",children:H(w.checkOutDate)})]})]}),w.roomNumber&&(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(N.A,{className:"h-5 w-5 mr-3 text-gray-400"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("reservations.room","Zimmer")}),(0,x.jsxs)("p",{className:"text-gray-900 dark:text-white",children:[w.roomNumber,w.roomDescription&&" - ".concat(w.roomDescription)]})]})]}),(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(j.A,{className:"h-5 w-5 mr-3 text-gray-400"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("reservations.status","Status")}),(0,x.jsx)("p",{className:"text-gray-900 dark:text-white",children:e("reservations.status.".concat(w.status),w.status)})]})]}),(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(I,{className:"h-5 w-5 mr-3 text-gray-400"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("reservations.paymentStatus","Zahlungsstatus")}),(0,x.jsx)("p",{className:"text-gray-900 dark:text-white",children:e("reservations.paymentStatus.".concat(w.paymentStatus),w.paymentStatus)})]})]})]})]})]}),(w.doorPin||w.paymentLink||w.sireRegistered)&&(0,x.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("reservations.additionalInfo","Zus\xe4tzliche Informationen")}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.doorPin&&(0,x.jsxs)("div",{className:"flex items-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[(0,x.jsx)(L.A,{className:"h-5 w-5 mr-3 text-purple-600 dark:text-purple-400"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("reservations.doorPin","T\xfcr-PIN")}),(0,x.jsx)("p",{className:"text-lg font-mono font-bold text-purple-900 dark:text-purple-100",children:w.doorPin}),w.doorAppName&&(0,x.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e("reservations.app","App"),": ",w.doorAppName]})]})]}),w.paymentLink&&(0,x.jsxs)("div",{className:"flex items-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,x.jsx)(I,{className:"h-5 w-5 mr-3 text-blue-600 dark:text-blue-400"}),(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("reservations.paymentLink","Zahlungslink")}),(0,x.jsx)("a",{href:w.paymentLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm break-all",children:e("reservations.openPaymentLink","Link \xf6ffnen")})]})]}),w.sireRegistered&&(0,x.jsxs)("div",{className:"flex items-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,x.jsx)(m.A,{className:"h-5 w-5 mr-3 text-green-600 dark:text-green-400"}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("reservations.sireStatus","SIRE-Status")}),(0,x.jsx)("p",{className:"text-green-900 dark:text-green-100 font-medium",children:e("reservations.sireRegistered","Registriert")}),w.sireRegisteredAt&&(0,x.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(e=>{try{return(0,C.GP)(new Date(e),"dd.MM.yyyy HH:mm",{locale:G()})}catch(t){return e}})(w.sireRegisteredAt)})]})]})]})]})]}),P&&(0,x.jsx)(g,{reservation:w,onSuccess:()=>{_(!1),K(),r(e("reservations.checkInSuccess","Check-in erfolgreich durchgef\xfchrt"),"success")},onCancel:()=>_(!1)}),F&&w&&(0,x.jsx)(u,{isOpen:F,onClose:()=>B(!1),reservation:w,onSuccess:()=>{K(),B(!1)}}),(0,x.jsx)("div",{className:"mt-6",children:(0,x.jsx)(b.A,{reservationId:w.id,refreshKey:Z})})]})}},1726:(e,t,r)=>{r.d(t,{X:()=>a,d:()=>s});let a=function(e){return e.CONFIRMED="confirmed",e.NOTIFICATION_SENT="notification_sent",e.CHECKED_IN="checked_in",e.CHECKED_OUT="checked_out",e.CANCELLED="cancelled",e.NO_SHOW="no_show",e}({}),s=function(e){return e.PENDING="pending",e.PAID="paid",e.PARTIALLY_PAID="partially_paid",e.REFUNDED="refunded",e}({})},4129:(e,t,r)=>{r.d(t,{A:()=>d});var a=r(45),s=r(5043);const n=["title","titleId"];function i(e,t){let{title:r,titleId:i}=e,d=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},d),r?s.createElement("title",{id:i},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const d=s.forwardRef(i)},4450:(e,t,r)=>{r.d(t,{u:()=>i});var a=r(1923),s=r(1801);const n="/reservations",i={async create(e){console.log("[reservationService] POST zu:",n),console.log("[reservationService] Daten:",e);const t=await a.A.post(n,e);return console.log("[reservationService] Response:",t),t.data.data||t.data},async getById(e){const t=await a.A.get("".concat(n,"/").concat(e));return t.data.data||t.data},async updateGuestContact(e,t){const r=await a.A.put("".concat(n,"/").concat(e,"/guest-contact"),{contact:t});return r.data.data||r.data},async generatePinAndSend(e){const t=await a.A.post(s.Sn.RESERVATION.GENERATE_PIN_AND_SEND(e));return t.data.data||t.data},async sendInvitation(e,t){const r=await a.A.post(s.Sn.RESERVATION.SEND_INVITATION(e),t||{});return r.data.data||r.data},async sendPasscode(e,t){const r=await a.A.post(s.Sn.RESERVATION.SEND_PASSCODE(e),t||{});return r.data.data||r.data},async getNotificationLogs(e){const t=await a.A.get(s.Sn.RESERVATION.NOTIFICATION_LOGS(e)),r=t.data.data||t.data;return Array.isArray(r)?{notificationLogs:r,whatsappMessages:[]}:r}}},4538:(e,t,r)=>{r.d(t,{A:()=>d});var a=r(45),s=r(5043);const n=["title","titleId"];function i(e,t){let{title:r,titleId:i}=e,d=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},d),r?s.createElement("title",{id:i},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const d=s.forwardRef(i)},6693:(e,t,r)=>{r.d(t,{A:()=>d});var a=r(45),s=r(5043);const n=["title","titleId"];function i(e,t){let{title:r,titleId:i}=e,d=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},d),r?s.createElement("title",{id:i},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const d=s.forwardRef(i)},7098:(e,t,r)=>{r.d(t,{A:()=>d});var a=r(45),s=r(5043);const n=["title","titleId"];function i(e,t){let{title:r,titleId:i}=e,d=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},d),r?s.createElement("title",{id:i},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const d=s.forwardRef(i)},7438:(e,t,r)=>{r.d(t,{A:()=>d});var a=r(45),s=r(5043);const n=["title","titleId"];function i(e,t){let{title:r,titleId:i}=e,d=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},d),r?s.createElement("title",{id:i},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const d=s.forwardRef(i)},7935:(e,t,r)=>{r.d(t,{A:()=>k});var a=r(5043),s=r(4117),n=r(4450),i=r(9837),d=r(887),o=r(4057),l=r(6511),c=r(9850),m=r(8682),x=r(7438),g=r(6693),h=r(4538),u=r(7098),b=r(7012),v=r(2311),y=r(9626),p=r(579);const k=e=>{let{reservationId:t,refreshKey:r}=e;const{t:k,i18n:f}=(0,s.Bd)(),[N,j]=(0,a.useState)([]),[w,A]=(0,a.useState)([]),[E,I]=(0,a.useState)(!0),[L,C]=(0,a.useState)(null),S=()=>{switch(f.language){case"de":return d.de;case"es":return o.es;default:return l.c}},R=e=>{try{return(0,i.GP)(new Date(e),"dd.MM.yyyy HH:mm",{locale:S()})}catch(t){return e}},D=e=>{switch(e){case"invitation":return k("reservations.notificationLogs.type.invitation","Einladung");case"pin":return k("reservations.notificationLogs.type.pin","PIN-Code");case"checkin_confirmation":return k("reservations.notificationLogs.type.checkinConfirmation","Check-in-Best\xe4tigung");default:return e}},T=e=>{switch(e){case"whatsapp":return(0,p.jsx)(c.A,{className:"h-4 w-4"});case"email":return(0,p.jsx)(m.A,{className:"h-4 w-4"});case"both":return(0,p.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,p.jsx)(c.A,{className:"h-4 w-4"}),(0,p.jsx)(m.A,{className:"h-4 w-4"})]});default:return(0,p.jsx)(x.A,{className:"h-4 w-4"})}},O=e=>{switch(e){case"pin":return(0,p.jsx)(g.A,{className:"h-4 w-4"});case"invitation":default:return(0,p.jsx)(x.A,{className:"h-4 w-4"});case"checkin_confirmation":return(0,p.jsx)(h.A,{className:"h-4 w-4"})}};if((0,a.useEffect)((()=>{(async()=>{try{I(!0),C(null);const e=await n.u.getNotificationLogs(t);j(e.notificationLogs||[]),A(e.whatsappMessages||[])}catch(a){var e,r;console.error("Fehler beim Laden der Notification-Logs:",a),C((null===(e=a.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||k("reservations.notificationLogs.loadError","Fehler beim Laden der Logs"))}finally{I(!1)}})()}),[t,k,r]),E)return(0,p.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-4",children:(0,p.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,p.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),(0,p.jsx)("div",{className:"h-20 bg-gray-200 dark:bg-gray-700 rounded"})]})});if(L)return(0,p.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-4",children:(0,p.jsx)("div",{className:"text-red-600 dark:text-red-400 text-sm",children:L})});const M=[...N.map((e=>({type:"notification",data:e,timestamp:e.sentAt}))),...w.map((e=>({type:"whatsapp",data:e,timestamp:e.sentAt})))].sort(((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()));return 0===M.length?(0,p.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-4",children:[(0,p.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:k("reservations.notificationLogs.title","Benachrichtigungs-Historie")}),(0,p.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:k("reservations.notificationLogs.noLogs","Keine Logs vorhanden")})]}):(0,p.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-4",children:[(0,p.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:k("reservations.notificationLogs.title","Benachrichtigungs-Historie")}),(0,p.jsx)("div",{className:"space-y-3",children:M.map((e=>{if("notification"===e.type){const t=e.data;return(0,p.jsxs)("div",{className:"border rounded-lg p-3 ".concat(t.success?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20"),children:[(0,p.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[t.success?(0,p.jsx)(h.A,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):(0,p.jsx)(u.A,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[O(t.notificationType),(0,p.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:D(t.notificationType)})]}),(0,p.jsx)("div",{className:"flex items-center space-x-1 text-gray-500 dark:text-gray-400",children:T(t.channel)})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-gray-500 dark:text-gray-400",children:[(0,p.jsx)(b.A,{className:"h-4 w-4"}),(0,p.jsx)("span",{children:R(t.sentAt)})]})]}),t.sentTo&&(0,p.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:[(0,p.jsxs)("span",{className:"font-medium",children:[k("reservations.notificationLogs.sentTo","Gesendet an"),":"]})," ",t.sentTo]}),t.message&&(0,p.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-2 mt-2 p-2 bg-white dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600",children:[(0,p.jsxs)("div",{className:"font-medium mb-1",children:[k("reservations.notificationLogs.message","Nachricht"),":"]}),(0,p.jsx)("div",{className:"whitespace-pre-wrap break-words",children:t.message})]}),(t.paymentLink||t.checkInLink)&&(0,p.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[t.paymentLink&&(0,p.jsx)("a",{href:t.paymentLink,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:k("reservations.notificationLogs.paymentLink","Zahlungslink")}),t.checkInLink&&(0,p.jsx)("a",{href:t.checkInLink,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:k("reservations.notificationLogs.checkInLink","Check-in-Link")})]}),t.errorMessage&&(0,p.jsxs)("div",{className:"mt-2 p-2 bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded text-xs text-red-700 dark:text-red-300",children:[(0,p.jsxs)("div",{className:"font-medium mb-1",children:[k("reservations.notificationLogs.error","Fehler"),":"]}),(0,p.jsx)("div",{children:t.errorMessage})]})]},"notification-".concat(t.id))}{const t=e.data,r="incoming"===t.direction,a="failed"===t.status;return(0,p.jsxs)("div",{className:"border rounded-lg p-3 ".concat(r?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20":a?"border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/20":"border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"),children:[(0,p.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[r?(0,p.jsx)(v.A,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}):a?(0,p.jsx)(u.A,{className:"h-5 w-5 text-red-600 dark:text-red-400"}):(0,p.jsx)(y.A,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"}),(0,p.jsx)(c.A,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),(0,p.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r?k("reservations.notificationLogs.whatsapp.incoming","Eingehende WhatsApp-Nachricht"):k("reservations.notificationLogs.whatsapp.outgoing","Ausgehende WhatsApp-Nachricht")}),t.status&&(0,p.jsxs)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",t.status,")"]})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-gray-500 dark:text-gray-400",children:[(0,p.jsx)(b.A,{className:"h-4 w-4"}),(0,p.jsx)("span",{children:R(t.sentAt)})]})]}),(0,p.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:[(0,p.jsxs)("span",{className:"font-medium",children:[k("reservations.notificationLogs.sentTo","Gesendet an"),":"]})," ",t.phoneNumber]}),t.message&&(0,p.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-2 mt-2 p-2 bg-white dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600",children:[(0,p.jsxs)("div",{className:"font-medium mb-1",children:[k("reservations.notificationLogs.message","Nachricht"),":"]}),(0,p.jsx)("div",{className:"whitespace-pre-wrap break-words",children:t.message})]}),t.errorMessage&&(0,p.jsxs)("div",{className:"mt-2 p-2 bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded text-xs text-red-700 dark:text-red-300",children:[(0,p.jsxs)("div",{className:"font-medium mb-1",children:[k("reservations.notificationLogs.error","Fehler"),":"]}),(0,p.jsx)("div",{children:t.errorMessage})]})]},"whatsapp-".concat(t.id))}}))})]})}},7988:(e,t,r)=>{r.d(t,{A:()=>d});var a=r(45),s=r(5043);const n=["title","titleId"];function i(e,t){let{title:r,titleId:i}=e,d=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},d),r?s.createElement("title",{id:i},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const d=s.forwardRef(i)},8682:(e,t,r)=>{r.d(t,{A:()=>d});var a=r(45),s=r(5043);const n=["title","titleId"];function i(e,t){let{title:r,titleId:i}=e,d=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},d),r?s.createElement("title",{id:i},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const d=s.forwardRef(i)},9850:(e,t,r)=>{r.d(t,{A:()=>d});var a=r(45),s=r(5043);const n=["title","titleId"];function i(e,t){let{title:r,titleId:i}=e,d=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},d),r?s.createElement("title",{id:i},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const d=s.forwardRef(i)}}]);
//# sourceMappingURL=504.1449b660.chunk.js.map