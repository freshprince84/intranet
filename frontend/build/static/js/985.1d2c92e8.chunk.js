"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[985],{2704:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(5043);function a(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const n=s.forwardRef(a)},4538:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(5043);function a(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const n=s.forwardRef(a)},5648:(e,t,r)=>{r.d(t,{o:()=>n});var s=r(4117),a=r(1859);const n=()=>{const{t:e,i18n:t}=(0,s.Bd)(),r=(0,a.D)();return{t:e,i18n:t,activeLanguage:r.activeLanguage,organizationLanguage:r.organizationLanguage,setUserLanguage:r.setUserLanguage,setOrganizationLanguage:r.setOrganizationLanguage,isLoading:r.isLoading}}},6009:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(5043);function a(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const n=s.forwardRef(a)},7012:(e,t,r)=>{r.d(t,{A:()=>n});var s=r(5043);function a(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const n=s.forwardRef(a)},7985:(e,t,r)=>{r.r(t),r.d(t,{default:()=>V});var s=r(5043),a=r(2903),n=r(4117),i=r(2672),l=r(2760),o=r(5648),c=r(7855),d=r(1801),m=r(1923),g=r(7488),h=r(8421);function u(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const x=s.forwardRef(u);var p=r(6009);function b(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"}))}const y=s.forwardRef(b);var f=r(1816);function k(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const v=s.forwardRef(k);var w=r(9422),j=r(1292),N=r(7353),S=r(4493),R=r(5620),A=r(579);const D={taskCreate:!0,taskUpdate:!0,taskDelete:!0,taskStatusChange:!0,requestCreate:!0,requestUpdate:!0,requestDelete:!0,requestStatusChange:!0,userCreate:!0,userUpdate:!0,userDelete:!0,roleCreate:!0,roleUpdate:!0,roleDelete:!0,worktimeStart:!0,worktimeStop:!0},E={task:["taskCreate","taskUpdate","taskDelete","taskStatusChange"],request:["requestCreate","requestUpdate","requestDelete","requestStatusChange"],user:["userCreate","userUpdate","userDelete"],role:["roleCreate","roleUpdate","roleDelete"],worktime:["worktimeStart","worktimeStop"]},C=()=>{const{t:e}=(0,n.Bd)(),[t,r]=(0,s.useState)(D),[a,i]=(0,s.useState)(!0),[l,o]=(0,s.useState)(!1),{showMessage:d}=(0,c.A)();(0,s.useEffect)((()=>{m()}),[]);const m=async()=>{try{i(!0),console.log("Starte Abruf der Benachrichtigungseinstellungen...");const e=await R.f.getUserSettings();if(console.log("Erhaltene Einstellungen:",e.data),null!==e&&void 0!==e&&e.data){const t={...D,...e.data};r(t),console.log("Einstellungen aktualisiert:",t)}else console.warn("Keine Daten vom Server erhalten, verwende Standardeinstellungen"),r(D)}catch(t){console.error("Fehler beim Laden der Benachrichtigungseinstellungen:",t),r(D),d(e("notifications.loadError"),"error")}finally{i(!1)}},g=async s=>{const{name:a,checked:n}=s.target,i={...t,[a]:n};r(i);try{o(!0),await R.f.updateUserSettings(i),d(e("notifications.saveSuccess"),"success")}catch(l){console.error("Fehler beim Speichern der Einstellungen:",l),d(e("notifications.saveError"),"error"),r(t)}finally{o(!1)}},h=e=>{const r=e.toLowerCase();return!!E[r]&&E[r].every((e=>!0===t[e]))},u=e=>{let{checked:t,onChange:r,name:s,label:a,description:n}=e;return(0,A.jsxs)("div",{className:"flex items-center justify-between gap-8 group relative",children:[(0,A.jsx)("div",{className:"flex-1",children:(0,A.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:a})}),(0,A.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer flex-shrink-0",children:[(0,A.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:t,onChange:r,name:s}),(0,A.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]}),n&&(0,A.jsx)("div",{className:"absolute left-0 bottom-[calc(100%+0.5rem)] px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-normal max-w-xs pointer-events-none z-50",children:n})]})},x=(s,a)=>(0,A.jsxs)("div",{className:"mb-6 mt-2",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,A.jsx)("div",{children:(0,A.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:s})}),(0,A.jsx)(u,{checked:h(s),onChange:a=>(async(s,a)=>{const n=s.toLowerCase();if(!E[n])return;const i={...t};E[n].forEach((e=>{i[e]=a})),r(i);try{o(!0),await R.f.updateUserSettings(i),d(e("notifications.saveSuccess"),"success")}catch(l){console.error("Fehler beim Speichern der Einstellungen:",l),d(e("notifications.saveError"),"error"),r(t)}finally{o(!1)}})(s,a.target.checked),name:`${s.toLowerCase()}All`,label:e("notifications.all")})]}),(0,A.jsx)("div",{className:"space-y-4",children:a.map((e=>{let{name:r,label:s,description:a}=e;return(0,A.jsx)(u,{checked:t[r],onChange:g,name:r,label:s,description:a},r)}))})]});return a?(0,A.jsx)(j.A,{children:e("notifications.loading")}):(0,A.jsxs)(N.A,{className:"p-4",children:[(0,A.jsx)(j.A,{variant:"body2",className:"text-gray-600 dark:text-gray-400 mb-6",children:e("notifications.description")}),(0,A.jsx)("div",{className:"mb-8 mt-2",children:(0,A.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,A.jsxs)("div",{className:"group relative",children:[(0,A.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:e("notifications.allNotifications")}),(0,A.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("notifications.allNotificationsDescription")}),(0,A.jsx)("div",{className:"absolute left-0 bottom-[calc(100%+0.5rem)] px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-normal max-w-xs pointer-events-none z-50",children:e("notifications.allNotificationsDescription")})]}),(0,A.jsx)(u,{checked:!!t&&Object.values(t).every((e=>!0===e)),onChange:s=>(async s=>{const a=Object.keys(t).reduce(((e,t)=>(e[t]=s,e)),{...D});r(a);try{o(!0),await R.f.updateUserSettings(a),d(e("notifications.saveSuccess"),"success")}catch(n){console.error("Fehler beim Speichern der Einstellungen:",n),d(e("notifications.saveError"),"error"),r(t)}finally{o(!1)}})(s.target.checked),name:"allNotifications",label:""})]})}),(0,A.jsx)(S.A,{className:"my-8"}),x(e("notifications.categories.tasks"),[{name:"taskCreate",label:e("notifications.events.taskCreate"),description:e("notifications.events.taskCreateDescription")},{name:"taskUpdate",label:e("notifications.events.taskUpdate"),description:e("notifications.events.taskUpdateDescription")},{name:"taskDelete",label:e("notifications.events.taskDelete"),description:e("notifications.events.taskDeleteDescription")},{name:"taskStatusChange",label:e("notifications.events.taskStatusChange"),description:e("notifications.events.taskStatusChangeDescription")}]),(0,A.jsx)(S.A,{className:"my-8"}),x(e("notifications.categories.requests"),[{name:"requestCreate",label:e("notifications.events.requestCreate"),description:e("notifications.events.requestCreateDescription")},{name:"requestUpdate",label:e("notifications.events.requestUpdate"),description:e("notifications.events.requestUpdateDescription")},{name:"requestDelete",label:e("notifications.events.requestDelete"),description:e("notifications.events.requestDeleteDescription")},{name:"requestStatusChange",label:e("notifications.events.requestStatusChange"),description:e("notifications.events.requestStatusChangeDescription")}]),(0,A.jsx)(S.A,{className:"my-8"}),x(e("notifications.categories.usersAndRoles"),[{name:"userCreate",label:e("notifications.events.userCreate"),description:e("notifications.events.userCreateDescription")},{name:"userUpdate",label:e("notifications.events.userUpdate"),description:e("notifications.events.userUpdateDescription")},{name:"userDelete",label:e("notifications.events.userDelete"),description:e("notifications.events.userDeleteDescription")},{name:"roleCreate",label:e("notifications.events.roleCreate"),description:e("notifications.events.roleCreateDescription")},{name:"roleUpdate",label:e("notifications.events.roleUpdate"),description:e("notifications.events.roleUpdateDescription")},{name:"roleDelete",label:e("notifications.events.roleDelete"),description:e("notifications.events.roleDeleteDescription")}]),(0,A.jsx)(S.A,{className:"my-8"}),x(e("notifications.categories.worktime"),[{name:"worktimeStart",label:e("notifications.events.worktimeStart"),description:e("notifications.events.worktimeStartDescription")},{name:"worktimeStop",label:e("notifications.events.worktimeStop"),description:e("notifications.events.worktimeStopDescription")}])]})};var L=r(6443),U=r(7591);const z=e=>{let{isOpen:t,onClose:r,onSave:a,currentSettings:n}=e;const[i,l]=(0,s.useState)({monthlyReportEnabled:!0,monthlyReportDay:n.monthlyReportDay||25,monthlyReportRecipient:n.monthlyReportRecipient||""}),[o,c]=(0,s.useState)(!1),[d,m]=(0,s.useState)({}),h=()=>{l({monthlyReportEnabled:!0,monthlyReportDay:n.monthlyReportDay||25,monthlyReportRecipient:n.monthlyReportRecipient||""}),m({}),r()},u=(e,t)=>{l((r=>({...r,[e]:t}))),d[e]&&m((t=>({...t,[e]:""})))};return(0,A.jsxs)(L.lG,{open:t,onClose:h,className:"relative z-50",children:[(0,A.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,A.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,A.jsx)(L.lG.Panel,{className:"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:(0,A.jsxs)("div",{className:"p-6",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,A.jsx)(L.lG.Title,{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Automatische Monatsabrechnung einrichten"}),(0,A.jsx)("button",{onClick:h,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,A.jsx)(U.A,{className:"h-6 w-6"})})]}),(0,A.jsx)("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:(0,A.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Konfigurieren Sie die automatische Generierung von monatlichen Beratungsabrechnungen. Diese werden automatisch am gew\xe4hlten Tag des Monats erstellt und an den angegebenen Empf\xe4nger adressiert."})}),(0,A.jsxs)("div",{className:"space-y-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"monthlyReportDay",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Abrechnungstag im Monat"}),(0,A.jsx)("select",{id:"monthlyReportDay",className:"mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white "+(d.monthlyReportDay?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"),value:i.monthlyReportDay,onChange:e=>u("monthlyReportDay",parseInt(e.target.value)),children:Array.from({length:28},((e,t)=>t+1)).map((e=>(0,A.jsxs)("option",{value:e,children:[e,"."]},e)))}),d.monthlyReportDay&&(0,A.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:d.monthlyReportDay}),(0,A.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Tag im Monat, an dem die Abrechnung automatisch erstellt wird (1-28)"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"monthlyReportRecipient",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rechnungsempf\xe4nger *"}),(0,A.jsx)("textarea",{id:"monthlyReportRecipient",rows:3,className:"mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white "+(d.monthlyReportRecipient?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"),value:i.monthlyReportRecipient,onChange:e=>u("monthlyReportRecipient",e.target.value),placeholder:"z.B.\nFirma XY AG\nMusterstra\xdfe 1\n8000 Z\xfcrich"}),d.monthlyReportRecipient&&(0,A.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:d.monthlyReportRecipient}),(0,A.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Vollst\xe4ndige Adresse des Empf\xe4ngers (Arbeitgeber) f\xfcr die monatliche Abrechnung"})]})]}),i.monthlyReportRecipient.trim()&&(0,A.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,A.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Vorschau:"}),(0,A.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,A.jsxs)("p",{children:["\ud83d\udcc5 ",(0,A.jsx)("strong",{children:"Abrechnungszeitraum:"})," ",i.monthlyReportDay,". des Vormonats bis ",i.monthlyReportDay-1,". des aktuellen Monats"]}),(0,A.jsxs)("p",{className:"mt-1",children:["\ud83d\udce7 ",(0,A.jsx)("strong",{children:"Empf\xe4nger:"})]}),(0,A.jsx)("div",{className:"ml-4 mt-1 font-mono text-xs bg-white dark:bg-gray-800 p-2 rounded border",children:i.monthlyReportRecipient.split("\n").map(((e,t)=>(0,A.jsx)("div",{children:e},t)))})]})]}),(0,A.jsxs)("div",{className:"mt-6 flex items-center justify-end space-x-3",children:[(0,A.jsx)("button",{type:"button",onClick:h,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:"Abbrechen",children:(0,A.jsx)(U.A,{className:"h-5 w-5"})}),(0,A.jsx)("button",{onClick:async()=>{if((()=>{const e={};return i.monthlyReportRecipient.trim()||(e.monthlyReportRecipient="Rechnungsempf\xe4nger ist erforderlich"),(i.monthlyReportDay<1||i.monthlyReportDay>28)&&(e.monthlyReportDay="Abrechnungstag muss zwischen 1 und 28 liegen"),m(e),0===Object.keys(e).length})())try{c(!0),await a(i),g.oR.success("Monatsabrechnungs-Einstellungen gespeichert"),r()}catch(e){g.oR.error("Fehler beim Speichern der Einstellungen")}finally{c(!1)}},disabled:o||!i.monthlyReportRecipient.trim(),className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",title:o?"Speichere...":"Aktivieren",children:o?(0,A.jsx)(f.A,{className:"h-5 w-5 animate-spin"}):(0,A.jsx)(w.A,{className:"h-5 w-5"})})]})]})})})]})};var B=r(9399),T=r(9248),M=r(4538),q=r(2704),F=r(7012);function P(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const O=s.forwardRef(P),I=()=>{var e;const{user:t}=(0,i.As)(),[r,a]=(0,s.useState)([]),[n,l]=(0,s.useState)([]),[o,c]=(0,s.useState)(!1),[h,u]=(0,s.useState)(!1),[x,p]=(0,s.useState)(null),[b,y]=(0,s.useState)(""),[k,v]=(0,s.useState)(!1),[w,j]=(0,s.useState)(0),[N,S]=(0,s.useState)(""),[R,D]=(0,s.useState)(!1),[E,C]=(0,s.useState)(0);(0,s.useEffect)((()=>{L(),U()}),[]),(0,s.useEffect)((()=>{if(w>0){const e=setTimeout((()=>j(w-1)),1e3);return()=>clearTimeout(e)}}),[w]),(0,s.useEffect)((()=>{if(E>0){const e=setTimeout((()=>C(E-1)),1e3);return()=>clearTimeout(e)}}),[E]);const L=async()=>{try{const e=await m.A.get(d.Sn.DATABASE.TABLES);a(e.data)}catch(e){console.error("Fehler beim Laden der Tabellen:",e),g.oR.error("Fehler beim Laden der verf\xfcgbaren Tabellen")}},U=async()=>{try{u(!0);const e=await m.A.get(d.Sn.DATABASE.LOGS);l(e.data)}catch(e){console.error("Fehler beim Laden der Logs:",e)}finally{u(!1)}},z=()=>{D(!0),C(5)},P=e=>{switch(e){case"low":return"text-yellow-600 bg-yellow-50 border-yellow-200 dark:text-yellow-400 dark:bg-yellow-900/20 dark:border-yellow-700";case"medium":return"text-orange-600 bg-orange-50 border-orange-200 dark:text-orange-400 dark:bg-orange-900/20 dark:border-orange-700";case"high":return"text-red-600 bg-red-50 border-red-200 dark:text-red-400 dark:bg-red-900/20 dark:border-red-700";default:return"text-gray-600 bg-gray-50 border-gray-200 dark:text-gray-400 dark:bg-gray-700 dark:border-gray-600"}},I=e=>{switch(e){case"success":return"text-green-600 dark:text-green-400";case"error":return"text-red-600 dark:text-red-400";case"start":return"text-blue-600 dark:text-blue-400";default:return"text-gray-600 dark:text-gray-400"}};return t&&t.roles.some((e=>"Admin"===e.role.name))?(0,A.jsxs)("div",{className:"space-y-8",children:[(0,A.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6",children:(0,A.jsxs)("div",{className:"flex items-start",children:[(0,A.jsx)(B.A,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400 mr-3 mt-1"}),(0,A.jsxs)("div",{children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-yellow-800 dark:text-yellow-200 mb-2",children:"\u26a0\ufe0f ACHTUNG: Tabellen zur\xfccksetzen"}),(0,A.jsxs)("ul",{className:"text-yellow-700 dark:text-yellow-300 text-sm space-y-1",children:[(0,A.jsx)("li",{children:"\u2022 Diese Funktionen l\xf6schen alle Daten aus den gew\xe4hlten Tabellen"}),(0,A.jsx)("li",{children:"\u2022 Standard-Daten werden automatisch durch Seed-Dateien wiederhergestellt"}),(0,A.jsx)("li",{children:"\u2022 Nur Tabellen mit Seed-Daten k\xf6nnen zur\xfcckgesetzt werden"}),(0,A.jsx)("li",{children:"\u2022 Alle Operationen werden protokolliert"})]})]})]})}),(0,A.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:[(0,A.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,A.jsx)(T.A,{className:"h-5 w-5 mr-2"}),"Tabellen mit Seed-Daten zur\xfccksetzen"]}),(0,A.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map((e=>(0,A.jsxs)("div",{className:`border rounded-lg p-4 ${P(e.danger)}`,children:[(0,A.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,A.jsx)("h4",{className:"font-medium",children:e.displayName}),(0,A.jsx)("span",{className:"text-xs px-2 py-1 rounded "+("high"===e.danger?"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300":"medium"===e.danger?"bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"),children:"high"===e.danger?"Hoch":"medium"===e.danger?"Mittel":"Niedrig"})]}),(0,A.jsx)("p",{className:"text-sm mb-3",children:e.description}),(0,A.jsxs)("div",{className:"flex items-center text-sm mb-3",children:[(0,A.jsx)(M.A,{className:"h-4 w-4 mr-1"}),"Seed-Daten werden wiederhergestellt"]}),(0,A.jsxs)("div",{className:"space-y-2",children:["client"===e.name&&(0,A.jsx)("button",{onClick:z,disabled:o,className:"w-full p-2 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50 transition-colors flex items-center justify-center",title:"Demo-Clients entfernen",children:(0,A.jsx)(T.A,{className:"h-5 w-5"})}),(0,A.jsx)("button",{onClick:()=>{return t=e.name,p(t),v(!0),void j(5);var t},disabled:o,className:"w-full p-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 transition-colors flex items-center justify-center",title:"Zur\xfccksetzen & neu bef\xfcllen",children:(0,A.jsx)(f.A,{className:"h-5 w-5"})})]})]},e.name)))})]}),(0,A.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,A.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center",children:[(0,A.jsx)(q.A,{className:"h-5 w-5 mr-2"}),"Database-Operationen (Audit-Log)"]}),(0,A.jsx)("button",{onClick:U,disabled:h,className:"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 transition-colors",title:"Aktualisieren",children:(0,A.jsx)(f.A,{className:"h-5 w-5"})})]}),h?(0,A.jsx)("div",{className:"text-center py-4",children:"Lade Logs..."}):0===n.length?(0,A.jsx)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"Keine Logs verf\xfcgbar"}):(0,A.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:n.map(((e,t)=>(0,A.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded text-sm",children:[(0,A.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,A.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:new Date(e.timestamp).toLocaleString("de-DE")}),(0,A.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.operation}),(0,A.jsxs)("span",{className:`font-medium ${I(e.status)}`,children:["success"===e.status?"\u2713":"error"===e.status?"\u2717":"\u2022"," ",e.status]})]}),e.error&&(0,A.jsx)("span",{className:"text-red-600 dark:text-red-400 text-xs max-w-xs truncate",children:e.error})]},t)))})]}),k&&(0,A.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,A.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,A.jsxs)("div",{className:"flex items-center mb-4",children:[(0,A.jsx)(B.A,{className:"h-6 w-6 text-orange-600 mr-2"}),(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Tabelle zur\xfccksetzen best\xe4tigen"})]}),(0,A.jsxs)("div",{className:"mb-4",children:[(0,A.jsxs)("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:["Sie sind dabei, die Tabelle ",(0,A.jsx)("strong",{children:null===(e=r.find((e=>e.name===x)))||void 0===e?void 0:e.displayName})," zur\xfcckzusetzen."]}),(0,A.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Alle Daten werden gel\xf6scht und durch Seed-Daten ersetzt."}),w>0&&(0,A.jsxs)("div",{className:"flex items-center text-orange-600 dark:text-orange-400 mb-3",children:[(0,A.jsx)(F.A,{className:"h-4 w-4 mr-1"}),"Bedenkzeit: ",w," Sekunden"]})]}),(0,A.jsxs)("div",{className:"mb-4",children:[(0,A.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,A.jsx)(O,{className:"h-4 w-4 inline mr-1"}),"Admin-Passwort zur Best\xe4tigung:"]}),(0,A.jsx)("input",{type:"password",value:b,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:"Ihr Admin-Passwort"})]}),(0,A.jsxs)("div",{className:"flex space-x-3",children:[(0,A.jsx)("button",{onClick:async()=>{if(x&&b)if(w>0)g.oR.error(`Bitte warten Sie noch ${w} Sekunden`);else try{c(!0),await m.A.post(d.Sn.DATABASE.RESET_TABLE,{tableName:x,adminPassword:b}),g.oR.success(`Tabelle ${x} wurde erfolgreich zur\xfcckgesetzt und mit Seed-Daten bef\xfcllt`),v(!1),p(null),y(""),U()}catch(r){var e,t;g.oR.error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Fehler beim Zur\xfccksetzen der Tabelle")}finally{c(!1)}else g.oR.error("Passwort ist erforderlich")},disabled:o||w>0||!b,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50 transition-colors",children:o?"Wird zur\xfcckgesetzt...":"Best\xe4tigen"}),(0,A.jsx)("button",{onClick:()=>{v(!1),p(null),y(""),j(0)},disabled:o,className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"Abbrechen"})]})]})}),R&&(0,A.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,A.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,A.jsxs)("div",{className:"flex items-center mb-4",children:[(0,A.jsx)(B.A,{className:"h-6 w-6 text-orange-600 mr-2"}),(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Demo-Clients entfernen best\xe4tigen"})]}),(0,A.jsxs)("div",{className:"mb-4",children:[(0,A.jsxs)("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:["Sie sind dabei, ",(0,A.jsx)("strong",{children:"nur die Demo-Clients"})," zu l\xf6schen."]}),(0,A.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Die Demo-Clients werden dauerhaft gel\xf6scht und NICHT wiederhergestellt."}),E>0&&(0,A.jsxs)("div",{className:"flex items-center text-orange-600 dark:text-orange-400 mb-3",children:[(0,A.jsx)(F.A,{className:"h-4 w-4 mr-1"}),"Bedenkzeit: ",E," Sekunden"]})]}),(0,A.jsxs)("div",{className:"mb-4",children:[(0,A.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,A.jsx)(O,{className:"h-4 w-4 inline mr-1"}),"Admin-Passwort zur Best\xe4tigung:"]}),(0,A.jsx)("input",{type:"password",value:N,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:"Ihr Admin-Passwort"})]}),(0,A.jsxs)("div",{className:"flex space-x-3",children:[(0,A.jsx)("button",{onClick:async()=>{if(N)if(E>0)g.oR.error(`Bitte warten Sie noch ${E} Sekunden`);else try{c(!0);await m.A.post(d.Sn.DATABASE.DELETE_DEMO_CLIENTS,{adminPassword:N});g.oR.success("Demo-Clients wurden erfolgreich gel\xf6scht"),D(!1),S(""),U()}catch(r){var e,t;g.oR.error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Fehler beim L\xf6schen der Demo-Clients")}finally{c(!1)}else g.oR.error("Passwort ist erforderlich")},disabled:o||E>0||!N,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50 transition-colors",children:o?"Wird gel\xf6scht...":"Best\xe4tigen"}),(0,A.jsx)("button",{onClick:()=>{D(!1),S(""),C(0)},disabled:o,className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:"Abbrechen"})]})]})})]}):(0,A.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[(0,A.jsx)(B.A,{className:"h-12 w-12 text-red-600 dark:text-red-400 mx-auto mb-4"}),(0,A.jsx)("p",{className:"text-red-800 dark:text-red-200 font-medium",children:"Keine Berechtigung"}),(0,A.jsx)("p",{className:"text-red-600 dark:text-red-400 text-sm mt-2",children:"Diese Funktionen sind nur f\xfcr Administratoren verf\xfcgbar."})]})},V=()=>{const{user:e}=(0,i.As)(),{isAdmin:t}=(0,l.S)(),{isDarkMode:r,toggleDarkMode:u}=(0,h.D)(),{showMessage:b}=(0,c.A)(),{t:k}=(0,n.Bd)(),{activeLanguage:j,organizationLanguage:N,setUserLanguage:S,isLoading:R}=(0,o.o)(),[D,E]=(0,s.useState)(""),[L,U]=(0,s.useState)(!1),[B,T]=(0,s.useState)(null),[M,q]=(0,s.useState)(null),[F,P]=(0,s.useState)(!1),[O,V]=(0,s.useState)(null),H=(0,s.useRef)(null),[Z,$]=(0,s.useState)(!1),[W,G]=(0,s.useState)("personal"),[_,K]=(0,s.useState)({monthlyReportEnabled:!1,monthlyReportDay:25,monthlyReportRecipient:""}),[J,X]=(0,s.useState)(!0),[Y,Q]=(0,s.useState)(!1);(0,s.useEffect)((()=>{console.log("User:",e),console.log("Is Admin:",t()),console.log("User Roles:",null===e||void 0===e?void 0:e.roles)}),[e,t]),(0,s.useEffect)((()=>{(async()=>{if(null!==e&&void 0!==e&&e.invoiceSettings)try{K({monthlyReportEnabled:e.invoiceSettings.monthlyReportEnabled||!1,monthlyReportDay:e.invoiceSettings.monthlyReportDay||25,monthlyReportRecipient:e.invoiceSettings.monthlyReportRecipient||""})}catch(O){console.error("Fehler beim Laden der Monatsabrechnungs-Einstellungen:",O),b("Fehler beim Laden der Einstellungen","error")}finally{X(!1)}else X(!1)})()}),[e,b]);const ee=async e=>{try{await m.A.put(d.Sn.USERS.INVOICE_SETTINGS,{monthlyReportEnabled:e.monthlyReportEnabled,monthlyReportDay:e.monthlyReportDay,monthlyReportRecipient:e.monthlyReportRecipient}),K(e),e.monthlyReportEnabled||g.oR.success(k("settings.monthlyReportDisabled"))}catch(O){throw console.error("Fehler beim Speichern der Monatsabrechnungs-Einstellungen:",O),g.oR.error(k("settings.monthlyReportSaveError")),O}},te=async e=>{P(!0),V(null);const t=new FormData;t.append("logo",e);try{console.log("Starting upload..."),console.log("Selected file:",e);const s=localStorage.getItem("token");console.log("Token verf\xfcgbar:",!!s);const a={};s&&(a.Authorization=`Bearer ${s}`);const n=await fetch(`${d.H$}/settings/logo`,{method:"POST",body:t,headers:a});console.log("Response Status:",n.status);const i=await n.text();if(console.log("Response Text:",i),!n.ok)throw new Error(i||"Upload fehlgeschlagen");try{const e=JSON.parse(i);console.log("Response Data:",e),b(k("settings.logoUploadSuccess"),"success");const t=document.getElementById("favicon");if(t){(new Date).getTime();try{const e=await fetch(`${d.H$}/settings/logo/base64`);if(e.ok){const r=await e.json();t.href=r.logo}}catch(O){console.error("Favicon konnte nicht aktualisiert werden:",O)}}}catch(r){throw console.error("Fehler beim Parsen der Antwort:",r),new Error("Ung\xfcltiges Antwortformat vom Server")}T(null),q(null)}catch(s){console.error("Upload error:",s);const e=k("settings.logoUploadError")+": "+(s instanceof Error?s.message:"Unbekannter Fehler");V(e),b(e,"error")}finally{P(!1)}},re=e=>{G(e),V(null)};return e?(0,A.jsxs)("div",{className:"p-6",children:[(0,A.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,A.jsxs)("div",{className:"flex items-center mb-6",children:[(0,A.jsx)(x,{className:"h-6 w-6 mr-2"}),(0,A.jsx)("h2",{className:"text-xl font-semibold",children:k("settings.title")})]}),(0,A.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,A.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,A.jsxs)("button",{className:("personal"===W?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center",onClick:()=>re("personal"),children:[(0,A.jsx)(p.A,{className:"h-4 w-4 mr-2"}),k("settings.personal")]}),(0,A.jsxs)("button",{className:("notifications"===W?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center",onClick:()=>re("notifications"),children:[(0,A.jsx)(a.A,{className:"h-4 w-4 mr-2"}),k("settings.notifications")]}),(0,A.jsxs)("button",{className:("system"===W?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center",onClick:()=>re("system"),children:[(0,A.jsx)(y,{className:"h-4 w-4 mr-2"}),k("settings.system")]})]})}),"personal"===W&&(0,A.jsxs)("div",{className:"space-y-6",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between border-b pb-6",children:[(0,A.jsxs)("div",{className:"flex-1",children:[(0,A.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:k("settings.language")}),(0,A.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:[k("settings.userLanguage"),N&&(0,A.jsxs)("span",{className:"block mt-1 text-xs",children:[k("settings.organizationLanguage"),": ",k("de"===N?"worktime.language.german":"es"===N?"worktime.language.spanish":"worktime.language.english")]})]})]}),(0,A.jsxs)("select",{value:D||j||(null===e||void 0===e?void 0:e.language)||"",onChange:async e=>{const t=e.target.value;if(E(t),t&&t!==j){U(!0);try{await S(t),b(k("common.save"),"success")}catch(O){console.error("Fehler beim Speichern der Sprache:",O),b("Fehler beim Speichern der Sprache","error")}finally{U(!1)}}},disabled:L||R,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white ml-4",children:[(0,A.jsx)("option",{value:"",children:k("settings.useOrganizationLanguage")}),(0,A.jsx)("option",{value:"de",children:k("worktime.language.german")}),(0,A.jsx)("option",{value:"es",children:k("worktime.language.spanish")}),(0,A.jsx)("option",{value:"en",children:k("worktime.language.english")})]})]}),(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:k("settings.darkMode")}),(0,A.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:k("settings.darkModeDescription")})]}),(0,A.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,A.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:r,onChange:u}),(0,A.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),(0,A.jsx)("div",{className:"border-t pt-6",children:J?(0,A.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:k("settings.loadingSettings")}):(0,A.jsx)("div",{className:"space-y-4",children:(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:k("settings.monthlyReport")}),(0,A.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[k("settings.monthlyReportDescription"),_.monthlyReportEnabled&&_.monthlyReportRecipient&&(0,A.jsxs)("span",{className:"block text-sm text-green-600 dark:text-green-400 mt-1",children:["\u2713 ",k("settings.monthlyReportEnabled")," ",_.monthlyReportRecipient.split("\n")[0]]})]})]}),(0,A.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,A.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:_.monthlyReportEnabled,onChange:e=>{e.target.checked?Q(!0):ee({monthlyReportEnabled:!1,monthlyReportDay:_.monthlyReportDay,monthlyReportRecipient:_.monthlyReportRecipient})}}),(0,A.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})})})]}),"notifications"===W&&(0,A.jsx)("div",{className:"space-y-4",children:(0,A.jsx)("div",{className:"p-0 -mt-4",children:(0,A.jsx)(C,{})})}),"system"===W&&(0,A.jsxs)("div",{className:"space-y-8",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h3",{className:"text-lg font-medium mb-2 dark:text-white",children:k("settings.logoUpload")}),(0,A.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:k("settings.logoUploadDescription")})]}),(0,A.jsxs)("div",{className:"flex items-center gap-2",children:[(0,A.jsx)("input",{ref:H,type:"file",accept:"image/png,image/jpeg",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){if("image/png"!==r.type&&"image/jpeg"!==r.type)return V(k("settings.fileUploadError")),void b(k("settings.fileUploadError"),"error");if(r.size>5242880)return V(k("settings.fileSizeError")),void b(k("settings.fileSizeError"),"error");T(r),q(URL.createObjectURL(r)),V(null),te(r)}},className:"hidden",disabled:F}),(0,A.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=H.current)||void 0===e?void 0:e.click()},disabled:F,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:k(F?"settings.logoUploading":"settings.logoUploadButton"),children:F?(0,A.jsx)(f.A,{className:"h-5 w-5 animate-spin"}):(0,A.jsx)(v,{className:"h-5 w-5"})})]})]}),O&&(0,A.jsx)("div",{className:"text-red-600 dark:text-red-400 text-sm mt-2",children:O}),M&&(0,A.jsxs)("div",{className:"mt-4",children:[(0,A.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:k("settings.logoPreview")}),(0,A.jsx)("img",{src:M,alt:"Logo Vorschau",className:"max-w-xs h-auto rounded-lg shadow-sm"})]}),(0,A.jsxs)("div",{className:"border-t pt-6",children:[(0,A.jsx)("h3",{className:"text-lg font-medium mb-4 dark:text-white",children:k("settings.uploadDirectories")}),(0,A.jsxs)("div",{className:"space-y-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"taskAttachmentsPath",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:k("settings.taskAttachmentsPath")}),(0,A.jsx)("input",{type:"text",id:"taskAttachmentsPath",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white",defaultValue:"uploads/task-attachments",placeholder:k("settings.taskAttachmentsPathPlaceholder")}),(0,A.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:k("settings.taskAttachmentsPathDescription")})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"requestAttachmentsPath",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:k("settings.requestAttachmentsPath")}),(0,A.jsx)("input",{type:"text",id:"requestAttachmentsPath",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white",defaultValue:"uploads/request-attachments",placeholder:k("settings.requestAttachmentsPathPlaceholder")}),(0,A.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:k("settings.requestAttachmentsPathDescription")})]}),(0,A.jsx)("div",{className:"mt-4",children:(0,A.jsx)("button",{type:"button",onClick:async()=>{$(!0);try{var e,t;null===(e=document.getElementById("taskAttachmentsPath"))||void 0===e||e.value,null===(t=document.getElementById("requestAttachmentsPath"))||void 0===t||t.value;await new Promise((e=>setTimeout(e,500))),g.oR.success(k("settings.saveDirectoriesSuccess"))}catch(O){console.error("Fehler beim Speichern der Upload-Verzeichnisse:",O),g.oR.error(k("settings.saveDirectoriesError"))}finally{$(!1)}},disabled:Z,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:k(Z?"settings.savingDirectories":"settings.saveDirectories"),children:Z?(0,A.jsx)(f.A,{className:"h-5 w-5 animate-spin"}):(0,A.jsx)(w.A,{className:"h-5 w-5"})})})]})]}),(0,A.jsxs)("div",{className:"border-t pt-6",children:[(0,A.jsx)("h3",{className:"text-lg font-medium mb-4 dark:text-white",children:k("settings.databaseManagement")}),(0,A.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:k("settings.databaseManagementDescription")}),(0,A.jsx)(I,{})]})]})]}),(0,A.jsx)(z,{isOpen:Y,onClose:()=>Q(!1),onSave:ee,currentSettings:_})]}):(0,A.jsx)("div",{children:k("common.loading")})}}}]);
//# sourceMappingURL=985.1d2c92e8.chunk.js.map