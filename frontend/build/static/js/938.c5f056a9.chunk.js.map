{"version":3,"file":"static/js/938.c5f056a9.chunk.js","mappings":"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","sources":["utils/expiryUtils.ts","../node_modules/@heroicons/react/24/outline/esm/InformationCircleIcon.js","../node_modules/@heroicons/react/24/outline/esm/TableCellsIcon.js","utils/statusUtils.tsx","../node_modules/@heroicons/react/24/outline/esm/ArrowsUpDownIcon.js","../node_modules/@heroicons/react/24/outline/esm/ArrowDownIcon.js","../node_modules/@heroicons/react/24/outline/esm/ChevronDownIcon.js","../node_modules/@heroicons/react/24/outline/esm/DocumentDuplicateIcon.js","../node_modules/@heroicons/react/24/outline/esm/UserIcon.js","../node_modules/@heroicons/react/24/outline/esm/CheckCircleIcon.js","../node_modules/@heroicons/react/24/outline/esm/EyeSlashIcon.js","../node_modules/@heroicons/react/24/outline/esm/Squares2X2Icon.js","../node_modules/@heroicons/react/24/outline/esm/BuildingOfficeIcon.js","../node_modules/@heroicons/react/24/outline/esm/ChevronRightIcon.js","components/CerebroArticleSelector.tsx","components/CreateTaskModal.tsx","components/EditTaskModal.tsx","../node_modules/@heroicons/react/24/outline/esm/ListBulletIcon.js","components/WorktimeTracker.tsx","pages/Worktracker.tsx","../node_modules/@heroicons/react/24/outline/esm/ClockIcon.js","../node_modules/@heroicons/react/24/outline/esm/Bars2Icon.js","../node_modules/@heroicons/react/24/outline/esm/CalendarIcon.js","../node_modules/@heroicons/react/24/outline/esm/FunnelIcon.js","../node_modules/@heroicons/react/24/outline/esm/ChevronLeftIcon.js","components/WorktimeModal.tsx","../node_modules/@heroicons/react/24/outline/esm/EyeIcon.js","../node_modules/@heroicons/react/24/outline/esm/ArrowUpIcon.js"],"sourcesContent":["/**\r\n * Utility-Funktionen fr die Bestimmung des Ablauf-Status von Requests und Todos\r\n * \r\n * Diese Utilities sind wiederverwendbar fr alle Tabellen/Komponenten, die dueDate anzeigen.\r\n */\r\nimport React from 'react';\r\n\r\n/**\r\n * Bestimmt den Ablauf-Status eines Items basierend auf dueDate\r\n */\r\nexport type ExpiryStatus = 'none' | 'expired' | 'critical';\r\n\r\n/**\r\n * Konfiguration fr Ablauf-Schwellenwerte\r\n */\r\nexport interface ExpiryThresholds {\r\n  criticalHours: number; // Nach wie vielen Stunden wird es kritisch (rot)?\r\n}\r\n\r\n/**\r\n * Standard-Schwellenwerte fr verschiedene Item-Typen\r\n */\r\nexport const DEFAULT_EXPIRY_THRESHOLDS: Record<'request' | 'todo', ExpiryThresholds> = {\r\n  request: {\r\n    criticalHours: 24 // Nach 24h wird ein Request kritisch (rot)\r\n  },\r\n  todo: {\r\n    criticalHours: 24 // Nach 24h wird ein Todo kritisch (rot)\r\n  }\r\n};\r\n\r\n/**\r\n * Bestimmt den Typ eines Todos basierend auf Titel und Beschreibung\r\n * @param title Der Titel des Todos\r\n * @param description Die Beschreibung des Todos\r\n * @returns 'hourly' | 'daily' | 'standard'\r\n */\r\nexport function getTodoType(title: string, description?: string | null): 'hourly' | 'daily' | 'standard' {\r\n  const titleLower = title.toLowerCase();\r\n  const descLower = (description || '').toLowerCase();\r\n  \r\n  if (titleLower.includes('stndlich') || descLower.includes('stndlich')) {\r\n    return 'hourly';\r\n  }\r\n  if (titleLower.includes('tglich') || descLower.includes('tglich')) {\r\n    return 'daily';\r\n  }\r\n  return 'standard';\r\n}\r\n\r\n/**\r\n * Schwellenwerte fr verschiedene Todo-Typen\r\n */\r\nconst TODO_EXPIRY_THRESHOLDS: Record<string, ExpiryThresholds> = {\r\n  hourly: { criticalHours: 2 },    // Stndliche Todos: nach 2h kritisch\r\n  daily: { criticalHours: 6 },     // Tgliche Todos: nach 6h kritisch\r\n  standard: { criticalHours: 24 }  // Standard: nach 24h kritisch\r\n};\r\n\r\n/**\r\n * Bestimmt den Ablauf-Status eines Items\r\n * \r\n * @param dueDate Das Flligkeitsdatum (optional)\r\n * @param type Der Typ des Items ('request' oder 'todo')\r\n * @param customThresholds Optionale benutzerdefinierte Schwellenwerte\r\n * @param title Optional: Titel fr Todo-Typ-Erkennung\r\n * @param description Optional: Beschreibung fr Todo-Typ-Erkennung\r\n * @returns 'none' | 'expired' | 'critical'\r\n */\r\nexport function getExpiryStatus(\r\n  dueDate: string | null | undefined,\r\n  type: 'request' | 'todo' = 'request',\r\n  customThresholds?: ExpiryThresholds,\r\n  title?: string,\r\n  description?: string | null\r\n): ExpiryStatus {\r\n  if (!dueDate) {\r\n    return 'none';\r\n  }\r\n\r\n  const now = new Date();\r\n  const due = new Date(dueDate);\r\n  const hoursOverdue = (now.getTime() - due.getTime()) / (1000 * 60 * 60);\r\n\r\n  // Wenn nicht abgelaufen\r\n  if (hoursOverdue <= 0) {\r\n    return 'none';\r\n  }\r\n\r\n  // Bestimme Schwellenwerte\r\n  let thresholds: ExpiryThresholds;\r\n  \r\n  if (customThresholds) {\r\n    thresholds = customThresholds;\r\n  } else if (type === 'todo' && title) {\r\n    // Fr Todos: Typ-basierte Schwellenwerte\r\n    const todoType = getTodoType(title, description);\r\n    thresholds = TODO_EXPIRY_THRESHOLDS[todoType];\r\n  } else {\r\n    thresholds = DEFAULT_EXPIRY_THRESHOLDS[type];\r\n  }\r\n\r\n  // Wenn ber kritischem Schwellenwert\r\n  if (hoursOverdue >= thresholds.criticalHours) {\r\n    return 'critical';\r\n  }\r\n\r\n  // Wenn abgelaufen aber noch nicht kritisch\r\n  return 'expired';\r\n}\r\n\r\n/**\r\n * Gibt die CSS-Klassen fr die Ablauf-Markierung zurck\r\n * \r\n * @param status Der Ablauf-Status\r\n * @returns CSS-Klassen fr Border und Hintergrund\r\n */\r\nexport function getExpiryColorClasses(status: ExpiryStatus): {\r\n  borderClass: string;\r\n  bgClass: string;\r\n  textClass: string;\r\n  badgeClass: string; // Fr Badge-artige Darstellung (z.B. im Header)\r\n} {\r\n  switch (status) {\r\n    case 'expired':\r\n      return {\r\n        borderClass: 'border-orange-500 dark:border-orange-600',\r\n        bgClass: 'bg-orange-50 dark:bg-orange-900/20',\r\n        textClass: 'text-orange-700 dark:text-orange-300',\r\n        badgeClass: 'bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300'\r\n      };\r\n    case 'critical':\r\n      return {\r\n        borderClass: 'border-red-500 dark:border-red-600',\r\n        bgClass: 'bg-red-50 dark:bg-red-900/20',\r\n        textClass: 'text-red-700 dark:text-red-700',\r\n        badgeClass: 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300'\r\n      };\r\n    default:\r\n      return {\r\n        borderClass: '',\r\n        bgClass: '',\r\n        textClass: '',\r\n        badgeClass: ''\r\n      };\r\n  }\r\n}\r\n\r\n/**\r\n * Gibt die Highlight-Farbe fr DataCard zurck\r\n * \r\n * @param status Der Ablauf-Status\r\n * @returns 'orange' | 'red' | undefined\r\n */\r\nexport function getExpiryHighlightColor(status: ExpiryStatus): 'orange' | 'red' | undefined {\r\n  switch (status) {\r\n    case 'expired':\r\n      return 'orange';\r\n    case 'critical':\r\n      return 'red';\r\n    default:\r\n      return undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * Erstellt ein MetadataItem fr dueDate mit automatischer Farbmarkierung bei Ablauf\r\n * \r\n * @param dueDate Das Flligkeitsdatum\r\n * @param type Der Typ des Items ('request' oder 'todo')\r\n * @param title Optional: Titel fr Todo-Typ-Erkennung\r\n * @param description Optional: Beschreibung fr Todo-Typ-Erkennung\r\n * @param icon Das Icon fr das Metadaten-Item\r\n * @param label Das Label fr das Metadaten-Item\r\n * @param formatDate Function zum Formatieren des Datums\r\n * @returns MetadataItem mit farblich markiertem dueDate\r\n */\r\nexport function createDueDateMetadataItem(\r\n  dueDate: string | null | undefined,\r\n  type: 'request' | 'todo' = 'request',\r\n  title?: string,\r\n  description?: string | null,\r\n  icon?: React.ReactNode,\r\n  label: string = 'Flligkeit',\r\n  formatDate: (date: Date) => string = (date) => date.toLocaleDateString(),\r\n  useBadge: boolean = false // Fr Badge-artige Darstellung im Header\r\n): { icon?: React.ReactNode; label: string; value: string; className?: string } {\r\n  const expiryStatus = getExpiryStatus(dueDate, type, undefined, title, description);\r\n  const expiryColors = getExpiryColorClasses(expiryStatus);\r\n  \r\n  return {\r\n    icon,\r\n    label,\r\n    value: dueDate ? formatDate(new Date(dueDate)) : '-',\r\n    className: expiryStatus !== 'none' \r\n      ? (useBadge ? expiryColors.badgeClass : expiryColors.textClass)\r\n      : undefined\r\n  };\r\n}\r\n\r\n","import * as React from \"react\";\nfunction InformationCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(InformationCircleIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction TableCellsIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(TableCellsIcon);\nexport default ForwardRef;","/**\r\n * Zentrale Status-Utils zur Eliminierung von Code-Duplikation\r\n * \r\n * Diese Datei konsolidiert Status-Farben und -Texte, die zuvor in mehreren Komponenten\r\n * dupliziert waren (Requests.tsx, Worktracker.tsx, TodoAnalyticsTab.tsx, etc.)\r\n * \r\n * WICHTIG: Die Logik ist exakt identisch mit der vorherigen Implementierung.\r\n * Nur die Code-Duplikation wurde entfernt, keine Funktionalittsnderung!\r\n */\r\n\r\nimport React from 'react';\r\n\r\n/**\r\n * Gibt die CSS-Klasse fr einen Status zurck\r\n * @param status - Der Status-String\r\n * @param processType - Optional: 'task' oder 'request' fr spezifische Status\r\n * @returns CSS-Klassen-String fr den Status\r\n */\r\nexport const getStatusColor = (status: string, processType?: 'task' | 'request' | 'invoice'): string => {\r\n  // Task Status-Farben (exakt wie in Worktracker.tsx vorher)\r\n  if (processType === 'task') {\r\n    switch(status) {\r\n      case 'open':\r\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n      case 'in_progress':\r\n        return 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300';\r\n      case 'improval':\r\n        return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300';\r\n      case 'quality_control':\r\n        return 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300';\r\n      case 'done':\r\n        return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n    }\r\n  }\r\n  \r\n  // Request Status-Farben\r\n  if (processType === 'request') {\r\n    switch(status) {\r\n      case 'approval':\r\n        return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300';\r\n      case 'approved':\r\n        return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300';\r\n      case 'to_improve':\r\n        return 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300';\r\n      case 'denied':\r\n        return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n    }\r\n  }\r\n  \r\n  // Invoice Status-Farben\r\n  if (processType === 'invoice') {\r\n    switch(status) {\r\n      case 'DRAFT':\r\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n      case 'SENT':\r\n        return 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300';\r\n      case 'PAID':\r\n        return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300';\r\n      case 'OVERDUE':\r\n        return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300';\r\n      case 'CANCELLED':\r\n        return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n    }\r\n  }\r\n  \r\n  // Fallback fr unbekannte Status\r\n  return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n};\r\n\r\n/**\r\n * bersetzungs-Funktion Typ (z.B. react-i18next's t() Funktion)\r\n */\r\nexport type TranslationFunction = (key: string) => string;\r\n\r\n/**\r\n * Gibt den bersetzten Status-Text zurck\r\n * @param status - Der Status-String\r\n * @param processType - Optional: 'task' oder 'request' fr spezifische Status\r\n * @param t - Optional: bersetzungsfunktion (z.B. von react-i18next)\r\n * @returns bersetzter Status-Text\r\n */\r\nexport const getStatusText = (\r\n  status: string, \r\n  processType?: 'task' | 'request' | 'invoice',\r\n  t?: TranslationFunction\r\n): string => {\r\n  // Wenn bersetzungsfunktion vorhanden, verwende diese\r\n  if (t) {\r\n    if (processType === 'task') {\r\n      const translationKey = `tasks.status.${status}`;\r\n      const translated = t(translationKey);\r\n      // Falls bersetzung gefunden (nicht gleich key), verwende diese\r\n      if (translated !== translationKey) {\r\n        return translated;\r\n      }\r\n    }\r\n    if (processType === 'request') {\r\n      const translationKey = `requests.status.${status}`;\r\n      const translated = t(translationKey);\r\n      // Falls bersetzung gefunden (nicht gleich key), verwende diese\r\n      if (translated !== translationKey) {\r\n        return translated;\r\n      }\r\n    }\r\n    if (processType === 'invoice') {\r\n      const translationKey = `invoices.status.${status.toLowerCase()}`;\r\n      const translated = t(translationKey);\r\n      if (translated !== translationKey) {\r\n        return translated;\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Tasks (hardcoded - keine bersetzungen in Code gefunden)\r\n  if (processType === 'task') {\r\n    switch(status) {\r\n      case 'open': return 'Offen';\r\n      case 'in_progress': return 'In Bearbeitung';\r\n      case 'improval': return 'Nachbesserung';\r\n      case 'quality_control': return 'Qualittskontrolle';\r\n      case 'done': return 'Erledigt';\r\n      default: return status;\r\n    }\r\n  }\r\n  \r\n  // Requests (Fallback wenn keine bersetzung)\r\n  if (processType === 'request') {\r\n    switch(status) {\r\n      case 'approval': return 'Offen';\r\n      case 'approved': return 'Genehmigt';\r\n      case 'to_improve': return 'Nachbesserung';\r\n      case 'denied': return 'Abgelehnt';\r\n      default: return status;\r\n    }\r\n  }\r\n  \r\n  // Invoices (Fallback wenn keine bersetzung)\r\n  if (processType === 'invoice') {\r\n    switch(status) {\r\n      case 'DRAFT': return 'Entwurf';\r\n      case 'SENT': return 'Gesendet';\r\n      case 'PAID': return 'Bezahlt';\r\n      case 'OVERDUE': return 'berfllig';\r\n      case 'CANCELLED': return 'Storniert';\r\n      default: return status;\r\n    }\r\n  }\r\n  \r\n  // Default: Return capitalized status\r\n  return status.charAt(0).toUpperCase() + status.slice(1).replace(/_/g, ' ');\r\n};\r\n\r\n/**\r\n * React-Komponente fr Status-Badge\r\n * @param status - Der Status-String\r\n * @param processType - Optional: 'task', 'request' oder 'invoice' fr spezifische Status\r\n * @param t - Optional: bersetzungsfunktion (z.B. von react-i18next)\r\n * @returns JSX-Element fr Status-Badge\r\n */\r\nexport const StatusBadge: React.FC<{ \r\n  status: string, \r\n  processType?: 'task' | 'request' | 'invoice',\r\n  t?: TranslationFunction \r\n}> = ({ status, processType, t }) => {\r\n  return (\r\n    <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(status, processType)} status-col`}>\r\n      {getStatusText(status, processType, t)}\r\n    </span>\r\n  );\r\n};\r\n\r\n","import * as React from \"react\";\nfunction ArrowsUpDownIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowsUpDownIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ArrowDownIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowDownIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ChevronDownIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m19.5 8.25-7.5 7.5-7.5-7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChevronDownIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction DocumentDuplicateIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(DocumentDuplicateIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction UserIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(UserIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CheckCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CheckCircleIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction EyeSlashIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(EyeSlashIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction Squares2X2Icon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(Squares2X2Icon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction BuildingOfficeIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(BuildingOfficeIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ChevronRightIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m8.25 4.5 7.5 7.5-7.5 7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChevronRightIcon);\nexport default ForwardRef;","import React, { useState, useEffect } from 'react';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { MagnifyingGlassIcon } from '@heroicons/react/24/solid';\nimport { XCircleIcon } from '@heroicons/react/24/solid';\nimport debounce from 'lodash/debounce';\n\ninterface CerebroArticle {\n  id: number;\n  title: string;\n  slug: string;\n  content?: string;\n}\n\ninterface CerebroArticleSelectorProps {\n  onArticleSelected: (article: CerebroArticle) => void;\n  excludeArticleIds?: number[];\n  selectedArticles?: CerebroArticle[];\n  onArticleRemove?: (articleId: number) => void;\n}\n\nconst CerebroArticleSelector: React.FC<CerebroArticleSelectorProps> = ({\n  onArticleSelected,\n  excludeArticleIds = [],\n  selectedArticles,\n  onArticleRemove\n}) => {\n  const [articles, setArticles] = useState<CerebroArticle[]>([]);\n  const [selectedArticleId, setSelectedArticleId] = useState<number | null>(null);\n  const [selectedArticlePreview, setSelectedArticlePreview] = useState<CerebroArticle | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Alle Artikel beim Laden abrufen\n  useEffect(() => {\n    const fetchAllArticles = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        \n        const response = await axiosInstance.get(API_ENDPOINTS.CEREBRO.ARTICLES.BASE);\n        \n        // Filtere bereits ausgewhlte Artikel\n        const filteredArticles = response.data.filter(\n          (article: CerebroArticle) => !excludeArticleIds.includes(article.id)\n        );\n        \n        setArticles(filteredArticles);\n      } catch (err) {\n        console.error('Fehler beim Abrufen der Artikel:', err);\n        // Einfachere Fehlerbehandlung ohne axios-Import\n        const axiosError = err as any;\n        setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchAllArticles();\n  }, [excludeArticleIds]);\n\n  // Artikeldetails abrufen, wenn ein Artikel ausgewhlt wird\n  const fetchArticleDetails = async (articleId: number) => {\n    try {\n      setLoading(true);\n      const response = await axiosInstance.get(API_ENDPOINTS.CEREBRO.ARTICLES.BY_ID(articleId));\n      setSelectedArticlePreview(response.data);\n    } catch (err) {\n      console.error('Fehler beim Abrufen der Artikeldetails:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleArticleSelect = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    const articleId = parseInt(e.target.value, 10);\n    \n    if (!isNaN(articleId)) {\n      setSelectedArticleId(articleId);\n      \n      // Artikel aus der Liste finden\n      const selectedArticle = articles.find(article => article.id === articleId);\n      \n      if (selectedArticle) {\n        // Artikeldetails abrufen fr die Vorschau\n        fetchArticleDetails(articleId);\n      }\n    } else {\n      setSelectedArticleId(null);\n      setSelectedArticlePreview(null);\n    }\n  };\n\n  const handleArticleConfirm = () => {\n    if (selectedArticleId !== null) {\n      const selectedArticle = articles.find(article => article.id === selectedArticleId);\n      if (selectedArticle) {\n        onArticleSelected(selectedArticle);\n        setSelectedArticleId(null);\n        setSelectedArticlePreview(null);\n      }\n    }\n  };\n\n  return (\n    <div className=\"mt-4\">\n      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n        Cerebro-Artikel verknpfen\n      </label>\n      \n      <div className=\"flex flex-col gap-3\">\n        <div className=\"flex items-center gap-2\">\n          <select\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={selectedArticleId || ''}\n            onChange={handleArticleSelect}\n          >\n            <option value=\"\">-- Artikel auswhlen --</option>\n            {articles.map((article) => (\n              <option key={article.id} value={article.id}>\n                {article.title}\n              </option>\n            ))}\n          </select>\n          \n          <button\n            type=\"button\"\n            onClick={handleArticleConfirm}\n            disabled={selectedArticleId === null}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            Verknpfen\n          </button>\n        </div>\n\n        {loading && (\n          <div className=\"text-sm text-gray-500\">\n            Lade Artikel...\n          </div>\n        )}\n        \n        {error && (\n          <div className=\"text-sm text-red-600\">\n            {error}\n          </div>\n        )}\n        \n        {selectedArticlePreview && (\n          <div className=\"mt-2 p-4 border border-gray-300 rounded-md bg-gray-50\">\n            <h4 className=\"font-medium text-lg mb-2\">{selectedArticlePreview.title}</h4>\n            <div className=\"prose prose-sm max-w-none\">\n              {selectedArticlePreview.content ? (\n                <div className=\"text-sm text-gray-700 max-h-40 overflow-y-auto\">\n                  {selectedArticlePreview.content.substring(0, 300)}\n                  {selectedArticlePreview.content.length > 300 && '...'}\n                </div>\n              ) : (\n                <p className=\"text-sm text-gray-500 italic\">Kein Inhalt verfgbar</p>\n              )}\n            </div>\n            <div className=\"mt-2\">\n              <a \n                href={`/cerebro/articles/${selectedArticlePreview.slug}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-sm text-blue-600 hover:underline\"\n              >\n                Artikel ffnen\n              </a>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CerebroArticleSelector; ","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../config/axios.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, ArrowPathIcon, CheckIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport CerebroArticleSelector from './CerebroArticleSelector.tsx';\nimport MarkdownPreview from './MarkdownPreview.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface User {\n    id: number;\n    firstName: string;\n    lastName: string;\n}\n\ninterface Role {\n    id: number;\n    name: string;\n}\n\ninterface Branch {\n    id: number;\n    name: string;\n}\n\ninterface CerebroArticle {\n    id: number;\n    title: string;\n    slug: string;\n    content?: string;\n}\n\ninterface TaskAttachment {\n    id?: number;\n    fileName: string;\n    fileType: string;\n    fileSize: number;\n    filePath?: string;\n    uploadedAt?: string;\n    file?: File; // Fr temporre Anhnge vor dem Hochladen\n}\n\ninterface CreateTaskModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onTaskCreated: (newTask: Task) => void;\n}\n\ninterface Task {\n    id: number;\n    title: string;\n    description: string | null;\n    status: 'open' | 'in_progress' | 'improval' | 'quality_control' | 'done';\n    responsible: {\n        id: number;\n        firstName: string;\n        lastName: string;\n    } | null;\n    responsibleId: number | null;\n    role: {\n        id: number;\n        name: string;\n    } | null;\n    roleId: number | null;\n    qualityControl: {\n        id: number;\n        firstName: string;\n        lastName: string;\n    } | null;\n    branch: {\n        id: number;\n        name: string;\n    };\n    dueDate: string | null;\n    requestId: number | null;\n}\n\nconst CreateTaskModal = ({ isOpen, onClose, onTaskCreated }: CreateTaskModalProps) => {\n    const { t } = useTranslation();\n    const { user } = useAuth();\n    const { openSidepane, closeSidepane } = useSidepane();\n    const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n    \n    const [title, setTitle] = useState('');\n    const [description, setDescription] = useState('');\n    const [assigneeType, setAssigneeType] = useState<'user' | 'role'>('user');\n    const [responsibleId, setResponsibleId] = useState<number | ''>('');\n    const [roleId, setRoleId] = useState<number | ''>('');\n    const [qualityControlId, setQualityControlId] = useState<number | ''>('');\n    const [branchId, setBranchId] = useState<number | ''>('');\n    const [dueDate, setDueDate] = useState('');\n    const [users, setUsers] = useState<User[]>([]);\n    const [roles, setRoles] = useState<Role[]>([]);\n    const [branches, setBranches] = useState<Branch[]>([]);\n    const [error, setError] = useState<string | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n    const [selectedArticles, setSelectedArticles] = useState<CerebroArticle[]>([]);\n    const [activeTab, setActiveTab] = useState<'data' | 'cerebro'>('data');\n    const [temporaryAttachments, setTemporaryAttachments] = useState<TaskAttachment[]>([]);\n    const [uploading, setUploading] = useState(false);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n    const getDefaultDueDate = () => {\n        const date = new Date();\n        date.setDate(date.getDate() + 7);\n        return date.toISOString().split('T')[0];\n    };\n\n    useEffect(() => {\n        if (isOpen) {\n            fetchUsers();\n            fetchRoles();\n            fetchBranches();\n            \n            if (user) {\n                setQualityControlId(user.id);\n            }\n            \n            setDueDate(getDefaultDueDate());\n        }\n    }, [isOpen, user]);\n\n    useEffect(() => {\n        if (branches.length > 0 && branchId === '') {\n            if (branches.length === 1) {\n                setBranchId(branches[0].id);\n            } else if (branches.length > 1) {\n                setBranchId(branches[0].id);\n            }\n        }\n    }, [branches, branchId]);\n    \n    useEffect(() => {\n        // Prfen der Bildschirmgre beim Mounten\n        const checkScreenSize = () => {\n            setIsMobile(window.innerWidth < 640);\n            setIsLargeScreen(window.innerWidth > 1070);\n        };\n        \n        // Initial prfen\n        checkScreenSize();\n        \n        // Event-Listener fr Grennderungen\n        window.addEventListener('resize', checkScreenSize);\n        \n        // Cleanup\n        return () => {\n            window.removeEventListener('resize', checkScreenSize);\n        };\n    }, []);\n\n    // Sidepane-Status verwalten\n    useEffect(() => {\n        if (isOpen) {\n            openSidepane();\n        } else {\n            closeSidepane();\n        }\n        \n        return () => {\n            closeSidepane();\n        };\n    }, [isOpen, openSidepane, closeSidepane]);\n\n    const fetchUsers = async () => {\n        try {\n            setError(null);\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                return;\n            }\n\n            console.log('Lade Benutzer fr CreateTaskModal...');\n            \n            const response = await axiosInstance.get(API_ENDPOINTS.USERS.DROPDOWN);\n            \n            console.log('Benutzer geladen:', response.data.length);\n            setUsers(response.data || []);\n        } catch (err) {\n            console.error('Fehler beim Laden der Benutzer:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            if (axiosError.code === 'ERR_NETWORK') {\n                setError(t('tasks.createTask.errors.connectionError'));\n            } else {\n                setError(`${t('tasks.createTask.errors.loadUsersError')}: ${axiosError.response?.data?.message || axiosError.message}`);\n            }\n        }\n    };\n\n    const fetchRoles = async () => {\n        try {\n            setError(null);\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                return;\n            }\n            \n            const response = await axiosInstance.get(API_ENDPOINTS.ROLES.BASE);\n            setRoles(response.data || []);\n        } catch (err) {\n            console.error('Fehler beim Laden der Rollen:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            if (axiosError.code === 'ERR_NETWORK') {\n                setError(t('tasks.createTask.errors.connectionError'));\n            } else {\n                setError(`${t('tasks.createTask.errors.loadRolesError')}: ${axiosError.response?.data?.message || axiosError.message}`);\n            }\n        }\n    };\n\n    const fetchBranches = async () => {\n        try {\n            setError(null);\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                return;\n            }\n\n            console.log('Lade Niederlassungen fr CreateTaskModal...');\n            \n            const response = await axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE);\n            \n            console.log('Niederlassungen geladen:', response.data.length);\n            setBranches(response.data || []);\n        } catch (err) {\n            console.error('Fehler beim Laden der Niederlassungen:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            if (axiosError.code === 'ERR_NETWORK') {\n                setError(t('tasks.createTask.errors.connectionError'));\n            } else {\n                setError(`${t('tasks.createTask.errors.loadBranchesError')}: ${axiosError.response?.data?.message || axiosError.message}`);\n            }\n        }\n    };\n\n    const handlePaste = async (event: React.ClipboardEvent) => {\n        const items = event.clipboardData.items;\n        \n        for (let i = 0; i < items.length; i++) {\n            const item = items[i];\n            \n            // Prfen, ob das eingefgte Element ein Bild ist\n            if (item.type.indexOf('image') === 0) {\n                event.preventDefault(); // Standardeingabe verhindern\n                \n                const file = item.getAsFile();\n                if (file) {\n                    await handleTemporaryAttachment(file);\n                }\n                return;\n            }\n        }\n    };\n\n    const handleDrop = async (event: React.DragEvent) => {\n        event.preventDefault();\n        event.stopPropagation();\n        \n        if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\n            const file = event.dataTransfer.files[0];\n            await handleTemporaryAttachment(file);\n        }\n    };\n\n    const handleDragOver = (event: React.DragEvent) => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    const handleTemporaryAttachment = async (file: File) => {\n        setUploading(true);\n        setError(null);\n\n        try {\n            // Erstelle einen temporren Anhang\n            const newAttachment: TaskAttachment = {\n                fileName: file.name,\n                fileType: file.type,\n                fileSize: file.size,\n                file: file // Speichern der Datei fr spteren Upload\n            };\n            \n            setTemporaryAttachments(prev => [...prev, newAttachment]);\n\n            // Fge einen Link/Vorschau in die Beschreibung ein\n            let insertText = '';\n            if (file.type.startsWith('image/')) {\n                // Hinweis: Wir verwenden hier den Platzhalter, da die Datei erst nach dem Erstellen hochgeladen wird\n                // Die tatschliche URL wird nach dem erfolgreichen Upload im Backend gesetzt\n                insertText = `\\n![${file.name}](${t('tasks.createTask.form.uploadAfterCreate')})\\n`;\n            } else {\n                // Fr andere Dateien einen temporren Platzhalter\n                insertText = `\\n[${file.name}](${t('tasks.createTask.form.uploadAfterCreate')})\\n`;\n            }\n            \n            // Fge den Link an der aktuellen Cursorposition ein\n            if (textareaRef.current) {\n                const cursorPos = textareaRef.current.selectionStart;\n                const textBefore = description.substring(0, cursorPos);\n                const textAfter = description.substring(cursorPos);\n                \n                setDescription(textBefore + insertText + textAfter);\n                \n                // Setze den Cursor hinter den eingefgten Link\n                setTimeout(() => {\n                    if (textareaRef.current) {\n                        const newPos = cursorPos + insertText.length;\n                        textareaRef.current.selectionStart = newPos;\n                        textareaRef.current.selectionEnd = newPos;\n                        textareaRef.current.focus();\n                    }\n                }, 0);\n            } else {\n                setDescription(description + insertText);\n            }\n        } catch (err) {\n            console.error('Fehler beim Verarbeiten der Datei:', err);\n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        } finally {\n            setUploading(false);\n        }\n    };\n\n    const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n        const files = event.target.files;\n        if (!files || files.length === 0) return;\n\n        const file = files[0];\n        await handleTemporaryAttachment(file);\n        \n        // Zurcksetzen des Datei-Inputs\n        if (fileInputRef.current) {\n            fileInputRef.current.value = '';\n        }\n    };\n\n    const handleRemoveTemporaryAttachment = (index: number) => {\n        // Finde den zu entfernenden Anhang\n        const attachmentToRemove = temporaryAttachments[index];\n        \n        if (attachmentToRemove) {\n            // Entferne den Anhang aus dem temporaryAttachments-Array\n            setTemporaryAttachments(temporaryAttachments.filter((_, i) => i !== index));\n            \n            // Entferne auch den Verweis im Beschreibungstext\n            if (attachmentToRemove.fileName) {\n                // Suche nach Bild- und Link-Markdown mit dem Dateinamen\n                const escapedFileName = attachmentToRemove.fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n                const uploadText = t('tasks.createTask.form.uploadAfterCreate');\n                const imagePattern = new RegExp(`!\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n                const linkPattern = new RegExp(`\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n                \n                // Bereinige die Beschreibung\n                const newDescription = description\n                    .replace(imagePattern, '')\n                    .replace(linkPattern, '')\n                    // Entferne berschssige Leerzeilen, die durch das Entfernen entstehen knnten\n                    .replace(/\\n{3,}/g, '\\n\\n');\n                \n                setDescription(newDescription);\n            }\n        }\n    };\n\n    const uploadTemporaryAttachments = async (taskId: number) => {\n        if (temporaryAttachments.length === 0) return;\n        \n        try {\n            setLoading(true);\n            \n            // Upload jeder temporren Datei\n            for (const attachment of temporaryAttachments) {\n                if (!attachment.file) continue;\n                \n                const formData = new FormData();\n                formData.append('file', attachment.file);\n                \n                await axiosInstance.post(\n                    API_ENDPOINTS.TASKS.ATTACHMENTS(taskId),\n                    formData,\n                    {\n                        headers: {\n                            'Content-Type': 'multipart/form-data',\n                        },\n                    }\n                );\n            }\n            \n            console.log(`${temporaryAttachments.length} Anhnge erfolgreich hochgeladen.`);\n        } catch (err) {\n            console.error('Fehler beim Hochladen der Anhnge:', err);\n            // Wir zeigen hier keinen Fehler, da der Task bereits erstellt wurde\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError(null);\n        setLoading(true);\n\n        try {\n            // Validierung\n            if (!title || (!responsibleId && !roleId) || !branchId) {\n                setError(t('tasks.createTask.errors.fillAllFields'));\n                setLoading(false);\n                return;\n            }\n\n            if (responsibleId && roleId) {\n                setError(t('tasks.createTask.errors.chooseUserOrRole'));\n                setLoading(false);\n                return;\n            }\n\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                setLoading(false);\n                return;\n            }\n\n            // Validiere die IDs\n            const branch = Number(branchId);\n            const qualityControl = qualityControlId ? Number(qualityControlId) : null;\n            const responsible = responsibleId ? Number(responsibleId) : null;\n            const role = roleId ? Number(roleId) : null;\n\n            if ((responsibleId && isNaN(responsible!)) || \n                (roleId && isNaN(role!)) || \n                isNaN(branch) || \n                (qualityControlId && isNaN(qualityControl!))) {\n                setError(t('tasks.createTask.errors.invalidIds'));\n                setLoading(false);\n                return;\n            }\n\n            // Basisdaten fr die Anfrage vorbereiten\n            const taskData: any = {\n                title,\n                description,\n                status: 'open',\n                qualityControlId: qualityControl,\n                branchId: branch,\n                dueDate\n            };\n\n            // Nur ein Feld hinzufgen - entweder responsibleId oder roleId, aber nicht beide\n            if (assigneeType === 'user' && responsibleId) {\n                taskData.responsibleId = responsibleId;\n            } else if (assigneeType === 'role' && roleId) {\n                taskData.roleId = roleId;\n            }\n\n            const response = await axiosInstance.post(API_ENDPOINTS.TASKS.BASE, taskData);\n\n            const newTaskId = response.data.id;\n            \n            // Verknpfe Cerebro-Artikel, falls vorhanden\n            if (selectedArticles.length > 0) {\n                await Promise.all(\n                    selectedArticles.map(article => \n                        axiosInstance.post(API_ENDPOINTS.TASKS.LINK_CARTICLE(newTaskId, article.id))\n                    )\n                );\n            }\n            \n            // Lade temporre Anhnge hoch, falls vorhanden\n            await uploadTemporaryAttachments(newTaskId);\n            \n            console.log('Task erfolgreich erstellt:', response.data);\n            // bergebe den neuen Task an den Callback\n            onTaskCreated(response.data);\n            handleClose();\n        } catch (err) {\n            console.error('Fehler beim Erstellen des Tasks:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.error || axiosError.message || t('tasks.createTask.errors.createError'));\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleClose = () => {\n        setTitle('');\n        setDescription('');\n        setAssigneeType('user');\n        setResponsibleId('');\n        setRoleId('');\n        setQualityControlId('');\n        setBranchId('');\n        setDueDate('');\n        setError(null);\n        setSelectedArticles([]);\n        setTemporaryAttachments([]);\n        onClose();\n    };\n\n    const handleAddArticle = (article: CerebroArticle) => {\n        setSelectedArticles(prev => [...prev, article]);\n    };\n    \n    const handleRemoveArticle = (articleId: number) => {\n        setSelectedArticles(prev => prev.filter(a => a.id !== articleId));\n    };\n\n    // Fr Mobile (unter 640px) - klassisches Modal\n    if (isMobile) {\n        return (\n            <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n                <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n                \n                <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                    <Dialog.Panel className=\"mx-auto max-w-xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n                            <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                                {t('tasks.createTask.title')}\n                            </Dialog.Title>\n                            <button\n                                onClick={handleClose}\n                                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                            >\n                                <XMarkIcon className=\"h-6 w-6\" />\n                            </button>\n                        </div>\n\n                        <TaskForm \n                            error={error}\n                            title={title}\n                            setTitle={setTitle}\n                            description={description}\n                            setDescription={setDescription}\n                            assigneeType={assigneeType}\n                            setAssigneeType={setAssigneeType}\n                            responsibleId={responsibleId}\n                            setResponsibleId={setResponsibleId}\n                            roleId={roleId}\n                            setRoleId={setRoleId}\n                            qualityControlId={qualityControlId}\n                            setQualityControlId={setQualityControlId}\n                            branchId={branchId}\n                            setBranchId={setBranchId}\n                            dueDate={dueDate}\n                            setDueDate={setDueDate}\n                            users={users}\n                            roles={roles}\n                            branches={branches}\n                            loading={loading}\n                            handleSubmit={handleSubmit}\n                            handleClose={handleClose}\n                            selectedArticles={selectedArticles}\n                            onArticleSelect={handleAddArticle}\n                            onArticleRemove={handleRemoveArticle}\n                            uploading={uploading}\n                            temporaryAttachments={temporaryAttachments}\n                            onFileUpload={handleFileUpload}\n                            onRemoveAttachment={handleRemoveTemporaryAttachment}\n                            textareaRef={textareaRef}\n                            fileInputRef={fileInputRef}\n                            handlePaste={handlePaste}\n                            handleDrop={handleDrop}\n                            handleDragOver={handleDragOver}\n                        />\n                    </Dialog.Panel>\n                </div>\n            </Dialog>\n        );\n    }\n    \n    // Fr Desktop (ab 640px) - Sidepane\n    // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n    return (\n        <>\n            {/* Backdrop - nur wenn offen und <= 1070px */}\n            {/* Hinweis: onClick entfernt, da Backdrop pointer-events: none hat, damit Hauptinhalt interaktiv bleibt */}\n            {isOpen && !isLargeScreen && (\n                <div \n                    className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n                    aria-hidden=\"true\" \n                    style={{\n                        opacity: isOpen ? 1 : 0,\n                        transition: 'opacity 300ms ease-out'\n                    }}\n                />\n            )}\n            \n            {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n            <div \n                className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n                style={{\n                    transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n                    pointerEvents: isOpen ? 'auto' : 'none'\n                }}\n                aria-hidden={!isOpen}\n                role=\"dialog\"\n                aria-modal={isOpen}\n            >\n                <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n                    <h2 className=\"text-lg font-semibold dark:text-white\">\n                        Neue Aufgabe erstellen\n                    </h2>\n                    <button\n                        onClick={handleClose}\n                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                    >\n                        <XMarkIcon className=\"h-6 w-6\" />\n                    </button>\n                </div>\n\n                <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n                    <TaskForm \n                        error={error}\n                        title={title}\n                        setTitle={setTitle}\n                        description={description}\n                        setDescription={setDescription}\n                        assigneeType={assigneeType}\n                        setAssigneeType={setAssigneeType}\n                        responsibleId={responsibleId}\n                        setResponsibleId={setResponsibleId}\n                        roleId={roleId}\n                        setRoleId={setRoleId}\n                        qualityControlId={qualityControlId}\n                        setQualityControlId={setQualityControlId}\n                        branchId={branchId}\n                        setBranchId={setBranchId}\n                        dueDate={dueDate}\n                        setDueDate={setDueDate}\n                        users={users}\n                        roles={roles}\n                        branches={branches}\n                        loading={loading}\n                        handleSubmit={handleSubmit}\n                        handleClose={handleClose}\n                        selectedArticles={selectedArticles}\n                        onArticleSelect={handleAddArticle}\n                        onArticleRemove={handleRemoveArticle}\n                        uploading={uploading}\n                        temporaryAttachments={temporaryAttachments}\n                        onFileUpload={handleFileUpload}\n                        onRemoveAttachment={handleRemoveTemporaryAttachment}\n                        textareaRef={textareaRef}\n                        fileInputRef={fileInputRef}\n                        handlePaste={handlePaste}\n                        handleDrop={handleDrop}\n                        handleDragOver={handleDragOver}\n                    />\n                </div>\n            </div>\n        </>\n    );\n};\n\n// Ausgelagerte Formular-Komponente, um Code-Duplizierung zu vermeiden\ninterface TaskFormProps {\n    error: string | null;\n    title: string;\n    setTitle: (value: string) => void;\n    description: string;\n    setDescription: (value: string) => void;\n    assigneeType: 'user' | 'role';\n    setAssigneeType: (value: 'user' | 'role') => void;\n    responsibleId: number | '';\n    setResponsibleId: (value: number | '') => void;\n    roleId: number | '';\n    setRoleId: (value: number | '') => void;\n    qualityControlId: number | '';\n    setQualityControlId: (value: number | '') => void;\n    branchId: number | '';\n    setBranchId: (value: number | '') => void;\n    dueDate: string;\n    setDueDate: (value: string) => void;\n    users: User[];\n    roles: Role[];\n    branches: Branch[];\n    loading: boolean;\n    handleSubmit: (e: React.FormEvent) => Promise<void>;\n    handleClose: () => void;\n    selectedArticles: CerebroArticle[];\n    onArticleSelect: (article: CerebroArticle) => void;\n    onArticleRemove: (articleId: number) => void;\n    uploading?: boolean;\n    temporaryAttachments?: TaskAttachment[];\n    onFileUpload?: (event: React.ChangeEvent<HTMLInputElement>) => Promise<void>;\n    onRemoveAttachment?: (index: number) => void;\n    textareaRef?: React.RefObject<HTMLTextAreaElement>;\n    fileInputRef?: React.RefObject<HTMLInputElement>;\n    handlePaste?: (event: React.ClipboardEvent) => Promise<void>;\n    handleDrop?: (event: React.DragEvent) => Promise<void>;\n    handleDragOver?: (event: React.DragEvent) => void;\n}\n\nconst TaskForm: React.FC<TaskFormProps> = ({\n    error,\n    title,\n    setTitle,\n    description,\n    setDescription,\n    assigneeType,\n    setAssigneeType,\n    responsibleId,\n    setResponsibleId,\n    roleId,\n    setRoleId,\n    qualityControlId,\n    setQualityControlId,\n    branchId,\n    setBranchId,\n    dueDate,\n    setDueDate,\n    users,\n    roles,\n    branches,\n    loading,\n    handleSubmit,\n    handleClose,\n    selectedArticles,\n    onArticleSelect,\n    onArticleRemove,\n    uploading = false,\n    temporaryAttachments = [],\n    onFileUpload,\n    onRemoveAttachment,\n    textareaRef,\n    fileInputRef,\n    handlePaste,\n    handleDrop,\n    handleDragOver,\n}) => {\n    const { t } = useTranslation();\n    const [activeTab, setActiveTab] = useState<'data' | 'cerebro'>('data');\n    \n    return (\n        <form onSubmit={handleSubmit} className=\"space-y-4\" noValidate>\n            {error && (\n                <div className=\"bg-red-100 dark:bg-red-900 border-l-4 border-red-500 dark:border-red-700 text-red-700 dark:text-red-300 p-4 mb-4\">\n                    <p>{error}</p>\n                </div>\n            )}\n\n            {/* Tabs Navigation */}\n            <div className=\"border-b border-gray-200 dark:border-gray-700\">\n                <nav className=\"-mb-px flex space-x-4\" aria-label=\"Tabs\">\n                    <button\n                        type=\"button\"\n                        className={`${\n                            activeTab === 'data'\n                                ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:border-gray-600'\n                        } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                        onClick={() => setActiveTab('data')}\n                    >\n                        Daten\n                    </button>\n                    <button\n                        type=\"button\"\n                        className={`${\n                            activeTab === 'cerebro'\n                                ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:border-gray-600'\n                        } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                        onClick={() => setActiveTab('cerebro')}\n                    >\n                        Cerebro Artikel\n                    </button>\n                </nav>\n            </div>\n\n            {/* Data Tab Content */}\n            {activeTab === 'data' && (\n                <>\n                    <div>\n                        <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.createTask.form.title')} *\n                        </label>\n                        <input\n                            type=\"text\"\n                            id=\"title\"\n                            value={title}\n                            onChange={(e) => setTitle(e.target.value)}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                            required\n                        />\n                    </div>\n\n                    <div className=\"space-y-4\">\n                        <div>\n                            <label htmlFor=\"description_sidepane\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                {t('tasks.createTask.form.description')}\n                            </label>\n                            <div className=\"relative\">\n                                <textarea\n                                    ref={textareaRef}\n                                    id=\"description_task_create\"\n                                    rows={6}\n                                    className=\"block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm\"\n                                    value={description}\n                                    onChange={(e) => setDescription(e.target.value)}\n                                    onPaste={handlePaste}\n                                    onDrop={handleDrop}\n                                    onDragOver={handleDragOver}\n                                    placeholder={t('tasks.createTask.form.descriptionPlaceholder')}\n                                />\n                                {/* Heftklammer-Icon zum Hinzufgen von Dateien */}\n                                <button\n                                    type=\"button\"\n                                    onClick={() => fileInputRef?.current?.click()}\n                                    className=\"absolute bottom-2 left-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none\"\n                                    title={t('tasks.createTask.form.fileUpload')}\n                                >\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n                                    </svg>\n                                </button>\n                                <input\n                                    ref={fileInputRef}\n                                    type=\"file\"\n                                    onChange={onFileUpload}\n                                    className=\"hidden\"\n                                />\n                                {uploading && (\n                                    <div className=\"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-70 dark:bg-opacity-70\">\n                                        <span className=\"text-sm text-gray-500 dark:text-gray-400\">{t('tasks.createTask.form.uploading')}</span>\n                                    </div>\n                                )}\n                            </div>\n                            {/* Anzeige der temporren Anhnge direkt unter dem Textfeld */}\n                            {temporaryAttachments && temporaryAttachments.length > 0 && (\n                                <div className=\"mt-2\">\n                                    <ul className=\"flex flex-wrap gap-2\">\n                                        {temporaryAttachments.map((attachment, index) => (\n                                            <li key={index} className=\"inline-flex items-center bg-gray-100 dark:bg-gray-700 rounded-md px-2 py-1 relative group\">\n                                                <span className=\"text-sm font-medium text-gray-800 dark:text-gray-300\">\n                                                    {attachment.fileName}\n                                                </span>\n                                                <div className=\"flex ml-2\">\n                                                    <button\n                                                        type=\"button\"\n                                                        onClick={() => onRemoveAttachment?.(index)}\n                                                        className=\"text-red-600 hover:text-red-900 ml-1\"\n                                                        title={t('tasks.createTask.form.remove')}\n                                                    >\n                                                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                                                        </svg>\n                                                    </button>\n                                                </div>\n                                                {/* Tooltip fr Bildvorschau bei Bild-Dateien */}\n                                                {attachment.fileType.startsWith('image/') && attachment.file && (\n                                                    <div className=\"absolute z-10 invisible group-hover:visible bg-white dark:bg-gray-800 p-2 rounded-md shadow-lg -top-32 left-0 border border-gray-200 dark:border-gray-700\">\n                                                        <img \n                                                            src={URL.createObjectURL(attachment.file)}\n                                                            alt={attachment.fileName}\n                                                            className=\"max-w-[200px] max-h-[150px] object-contain\"\n                                                        />\n                                                    </div>\n                                                )}\n                                            </li>\n                                        ))}\n                                    </ul>\n                                </div>\n                            )}\n                            {description && (\n                                <div className=\"mt-3\">\n                                    <MarkdownPreview \n                                        content={description} \n                                        temporaryAttachments={temporaryAttachments}\n                                    />\n                                </div>\n                            )}\n                        </div>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.createTask.form.responsibleFor')} *\n                        </label>\n                        <div className=\"flex space-x-4\">\n                            <label className=\"inline-flex items-center\">\n                                <input\n                                    type=\"radio\"\n                                    className=\"form-radio text-blue-600 dark:bg-gray-700 dark:border-gray-600\"\n                                    name=\"assigneeType\"\n                                    value=\"user\"\n                                    checked={assigneeType === 'user'}\n                                    onChange={() => {\n                                        setAssigneeType('user');\n                                        setRoleId('');\n                                    }}\n                                />\n                                <span className=\"ml-2 dark:text-gray-300\">{t('tasks.createTask.form.user')}</span>\n                            </label>\n                            <label className=\"inline-flex items-center\">\n                                <input\n                                    type=\"radio\"\n                                    className=\"form-radio text-blue-600 dark:bg-gray-700 dark:border-gray-600\"\n                                    name=\"assigneeType\"\n                                    value=\"role\"\n                                    checked={assigneeType === 'role'}\n                                    onChange={() => {\n                                        setAssigneeType('role');\n                                        setResponsibleId('');\n                                    }}\n                                />\n                                <span className=\"ml-2 dark:text-gray-300\">{t('tasks.createTask.form.role')}</span>\n                            </label>\n                        </div>\n                    </div>\n\n                    {assigneeType === 'user' ? (\n                        <div>\n                            <label htmlFor=\"responsible\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                {t('tasks.createTask.form.responsibleUser')} *\n                            </label>\n                            <select\n                                id=\"responsible\"\n                                value={responsibleId}\n                                onChange={(e) => setResponsibleId(e.target.value ? Number(e.target.value) : '')}\n                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                                required\n                            >\n                                <option value=\"\">{t('tasks.createTask.form.pleaseSelect')}</option>\n                                {Array.isArray(users) && users.map(user => (\n                                    <option key={user.id} value={user.id}>\n                                        {user.firstName} {user.lastName}\n                                    </option>\n                                ))}\n                            </select>\n                        </div>\n                    ) : (\n                        <div>\n                            <label htmlFor=\"role\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                {t('tasks.createTask.form.responsibleRole')} *\n                            </label>\n                            <select\n                                id=\"role\"\n                                value={roleId}\n                                onChange={(e) => setRoleId(e.target.value ? Number(e.target.value) : '')}\n                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                                required\n                            >\n                                <option value=\"\">{t('tasks.createTask.form.pleaseSelect')}</option>\n                                {Array.isArray(roles) && roles.map(role => (\n                                    <option key={role.id} value={role.id}>\n                                        {role.name}\n                                    </option>\n                                ))}\n                            </select>\n                        </div>\n                    )}\n\n                    <div>\n                        <label htmlFor=\"qualityControl\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.createTask.form.qualityControl')}\n                        </label>\n                        <select\n                            id=\"qualityControl\"\n                            value={qualityControlId}\n                            onChange={(e) => setQualityControlId(e.target.value ? Number(e.target.value) : '')}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                        >\n                            <option value=\"\">{t('tasks.createTask.form.noQualityControl')}</option>\n                            {Array.isArray(users) && users.map(user => (\n                                <option key={user.id} value={user.id}>\n                                    {user.firstName} {user.lastName}\n                                </option>\n                            ))}\n                        </select>\n                    </div>\n\n                    <div>\n                        <label htmlFor=\"branch\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.createTask.form.branch')} *\n                        </label>\n                        <select\n                            id=\"branch\"\n                            value={branchId}\n                            onChange={(e) => setBranchId(Number(e.target.value))}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                            required\n                        >\n                            <option value=\"\">Bitte whlen</option>\n                            {Array.isArray(branches) && branches.map(branch => (\n                                <option key={branch.id} value={branch.id}>\n                                    {branch.name}\n                                </option>\n                            ))}\n                        </select>\n                    </div>\n\n                    <div>\n                        <label htmlFor=\"dueDate\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.createTask.form.dueDate')}\n                        </label>\n                        <input\n                            type=\"date\"\n                            id=\"dueDate\"\n                            value={dueDate}\n                            onChange={(e) => setDueDate(e.target.value)}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                        />\n                    </div>\n                </>\n            )}\n\n            {/* Cerebro Articles Tab Content */}\n            {activeTab === 'cerebro' && (\n                <div>\n                    <div className=\"mb-4\">\n                        <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Verknpfte Cerebro-Artikel</h3>\n                        \n                        {selectedArticles.length > 0 ? (\n                            <ul className=\"mt-2 space-y-2\">\n                                {selectedArticles.map(article => (\n                                    <li key={article.id} className=\"flex items-center justify-between bg-gray-50 dark:bg-gray-700 p-2 rounded\">\n                                        <span className=\"dark:text-gray-300\">{article.title}</span>\n                                        <button\n                                            type=\"button\"\n                                            onClick={() => onArticleRemove(article.id)}\n                                            className=\"text-red-600 hover:text-red-800\"\n                                        >\n                                            Entfernen\n                                        </button>\n                                    </li>\n                                ))}\n                            </ul>\n                        ) : (\n                            <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">Keine Artikel verknpft</p>\n                        )}\n                    </div>\n                    \n                    <CerebroArticleSelector\n                        onArticleSelected={onArticleSelect}\n                        excludeArticleIds={selectedArticles.map(a => a.id)}\n                        selectedArticles={selectedArticles}\n                        onArticleRemove={onArticleRemove}\n                    />\n                </div>\n            )}\n\n            <div className=\"flex justify-end gap-3 pt-4\">\n                <button\n                    type=\"button\"\n                    onClick={handleClose}\n                    className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                    title={t('tasks.createTask.form.cancel')}\n                >\n                    <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                    type=\"submit\"\n                    className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                    title={loading ? t('tasks.createTask.form.creating') : t('tasks.createTask.form.create')}\n                    disabled={loading}\n                >\n                    {loading ? (\n                        <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                    ) : (\n                        <CheckIcon className=\"h-5 w-5\" />\n                    )}\n                </button>\n            </div>\n        </form>\n    );\n};\n\nexport default CreateTaskModal; ","import React, { useEffect, useState, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport CerebroArticleSelector from './CerebroArticleSelector.tsx';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, TrashIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport MarkdownPreview from './MarkdownPreview.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface User {\n    id: number;\n    firstName: string;\n    lastName: string;\n}\n\ninterface Role {\n    id: number;\n    name: string;\n}\n\ninterface Branch {\n    id: number;\n    name: string;\n}\n\ninterface TaskAttachment {\n    id: number;\n    fileName: string;\n    fileType: string;\n    fileSize: number;\n    filePath: string;\n    uploadedAt: string;\n    file?: File;\n}\n\ninterface CerebroArticle {\n    id: number;\n    title: string;\n    slug: string;\n    content?: string;\n}\n\ninterface Task {\n    id: number;\n    title: string;\n    description: string | null;\n    status: 'open' | 'in_progress' | 'improval' | 'quality_control' | 'done';\n    responsible: {\n        id: number;\n        firstName: string;\n        lastName: string;\n    } | null;\n    responsibleId: number | null;\n    role: {\n        id: number;\n        name: string;\n    } | null;\n    roleId: number | null;\n    qualityControl: {\n        id: number;\n        firstName: string;\n        lastName: string;\n    } | null;\n    branch: {\n        id: number;\n        name: string;\n    };\n    dueDate: string | null;\n    requestId: number | null;\n    attachments?: TaskAttachment[];\n}\n\ninterface EditTaskModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onTaskUpdated: (updatedTask: Task) => void;\n    task: Task;\n}\n\nconst EditTaskModal: React.FC<EditTaskModalProps> = ({ isOpen, onClose, onTaskUpdated, task }) => {\n    const { t } = useTranslation();\n    const { hasPermission } = usePermissions();\n    const { user } = useAuth();\n    const { openSidepane, closeSidepane } = useSidepane();\n    const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n    \n    const [title, setTitle] = useState(task.title || '');\n    const [description, setDescription] = useState(task.description || '');\n    const [status, setStatus] = useState(task.status || 'open');\n    const [assigneeType, setAssigneeType] = useState<'user' | 'role'>(task.roleId ? 'role' : 'user');\n    const [responsibleId, setResponsibleId] = useState<number | null>(task.responsibleId || null);\n    const [roleId, setRoleId] = useState<number | null>(task.roleId || null);\n    const [qualityControlId, setQualityControlId] = useState<number | null>(task.qualityControl?.id || null);\n    const [branchId, setBranchId] = useState<number>(task.branch?.id || 0);\n    const [attachments, setAttachments] = useState<TaskAttachment[]>(task.attachments || []);\n    const [temporaryAttachments, setTemporaryAttachments] = useState<TaskAttachment[]>([]);\n    const [uploading, setUploading] = useState(false);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n    // Formatiere das Datum im Format YYYY-MM-DD fr das HTML-Datumseingabefeld\n    const formatDate = (dateString: string | null): string | null => {\n        if (!dateString) return null;\n        \n        // Versuche das Datum zu parsen\n        const date = new Date(dateString);\n        if (isNaN(date.getTime())) return null; // Ungltiges Datum\n        \n        // Formatiere als YYYY-MM-DD\n        return date.toISOString().split('T')[0];\n    };\n\n    const [dueDate, setDueDate] = useState<string | null>(formatDate(task.dueDate));\n    const [users, setUsers] = useState<User[]>([]);\n    const [roles, setRoles] = useState<Role[]>([]);\n    const [branches, setBranches] = useState<Branch[]>([]);\n    const [error, setError] = useState<string | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [confirmDelete, setConfirmDelete] = useState(false);\n    const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n    const [linkedArticles, setLinkedArticles] = useState<CerebroArticle[]>([]);\n    const [activeTab, setActiveTab] = useState<'data' | 'cerebro'>('data');\n\n    const canDeleteTask = hasPermission('tasks', 'both', 'table');\n\n    // Responsive Design: berwache Fensterbreite\n    useEffect(() => {\n        const handleResize = () => {\n            setIsMobile(window.innerWidth < 640);\n            setIsLargeScreen(window.innerWidth > 1070);\n        };\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, []);\n\n    // Sidepane-Status verwalten\n    useEffect(() => {\n        if (isOpen) {\n            openSidepane();\n        } else {\n            closeSidepane();\n        }\n        \n        return () => {\n            closeSidepane();\n        };\n    }, [isOpen, openSidepane, closeSidepane]);\n\n    useEffect(() => {\n        if (isOpen) {\n            fetchUsers();\n            fetchRoles();\n            fetchBranches();\n            fetchLinkedArticles();\n            fetchAttachments();\n        }\n    }, [isOpen, task.id]);\n\n    const fetchUsers = async () => {\n        try {\n            setError(null);\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                return;\n            }\n            \n            const response = await axiosInstance.get(API_ENDPOINTS.USERS.DROPDOWN);\n            setUsers(response.data || []);\n        } catch (err) {\n            console.error('Fehler beim Laden der Benutzer:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            if (axiosError.code === 'ERR_NETWORK') {\n                setError(t('tasks.editTask.errors.connectionError'));\n            } else {\n                setError(`${t('tasks.editTask.errors.loadUsersError')}: ${axiosError.response?.data?.message || axiosError.message}`);\n            }\n        }\n    };\n\n    const fetchRoles = async () => {\n        try {\n            setError(null);\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                return;\n            }\n            \n            const response = await axiosInstance.get(API_ENDPOINTS.ROLES.BASE);\n            setRoles(response.data || []);\n        } catch (err) {\n            console.error('Fehler beim Laden der Rollen:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            if (axiosError.code === 'ERR_NETWORK') {\n                setError(t('tasks.editTask.errors.connectionError'));\n            } else {\n                setError(`${t('tasks.editTask.errors.loadRolesError')}: ${axiosError.response?.data?.message || axiosError.message}`);\n            }\n        }\n    };\n\n    const fetchBranches = async () => {\n        try {\n            setError(null);\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                return;\n            }\n            \n            const response = await axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE);\n            setBranches(response.data || []);\n        } catch (err) {\n            console.error('Fehler beim Laden der Niederlassungen:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            if (axiosError.code === 'ERR_NETWORK') {\n                setError(t('tasks.editTask.errors.connectionError'));\n            } else {\n                setError(`${t('tasks.editTask.errors.loadBranchesError')}: ${axiosError.response?.data?.message || axiosError.message}`);\n            }\n        }\n    };\n\n    const fetchLinkedArticles = async () => {\n        try {\n            setError(null);\n            const response = await axiosInstance.get(API_ENDPOINTS.TASKS.CARTICLES(task.id));\n            setLinkedArticles(response.data || []);\n        } catch (err) {\n            console.error('Fehler beim Laden der verknpften Artikel:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        }\n    };\n\n    const fetchAttachments = async () => {\n        try {\n            setError(null);\n            const response = await axiosInstance.get(API_ENDPOINTS.TASKS.ATTACHMENTS(task.id));\n            setAttachments(response.data || []);\n        } catch (err) {\n            console.error('Fehler beim Laden der Anhnge:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n            setAttachments([]);\n        }\n    };\n\n    const handlePaste = async (event: React.ClipboardEvent) => {\n        const items = event.clipboardData.items;\n        \n        for (let i = 0; i < items.length; i++) {\n            const item = items[i];\n            \n            // Prfen, ob das eingefgte Element ein Bild ist\n            if (item.type.indexOf('image') === 0) {\n                event.preventDefault(); // Standardeingabe verhindern\n                \n                const file = item.getAsFile();\n                if (file) {\n                    await uploadFileAndInsertLink(file);\n                }\n                return;\n            }\n        }\n    };\n\n    const handleDrop = async (event: React.DragEvent) => {\n        event.preventDefault();\n        event.stopPropagation();\n        \n        if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\n            const file = event.dataTransfer.files[0];\n            await uploadFileAndInsertLink(file);\n        }\n    };\n\n    const handleDragOver = (event: React.DragEvent) => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    const uploadFileAndInsertLink = async (file: File) => {\n        setUploading(true);\n        setError(null);\n\n        try {\n            const formData = new FormData();\n            formData.append('file', file);\n\n            const response = await axiosInstance.post(\n                API_ENDPOINTS.TASKS.ATTACHMENTS(task.id),\n                formData,\n                {\n                    headers: {\n                        'Content-Type': 'multipart/form-data',\n                    },\n                }\n            );\n\n            const newAttachment = response.data;\n            setAttachments([...attachments, newAttachment]);\n\n            // Bild in den text einfgen\n            let insertText = '';\n            if (newAttachment.fileType.startsWith('image/')) {\n                // Fr Bilder einen Markdown-Image-Link einfgen mit vollstndiger URL\n                insertText = `\\n![${newAttachment.fileName}](${window.location.origin}/api${API_ENDPOINTS.TASKS.ATTACHMENT(task.id, newAttachment.id)})\\n`;\n            } else {\n                // Fr andere Dateien einen normalen Link mit vollstndiger URL\n                insertText = `\\n[${newAttachment.fileName}](${window.location.origin}/api${API_ENDPOINTS.TASKS.ATTACHMENT(task.id, newAttachment.id)})\\n`;\n            }\n            \n            // Fge den Link an der aktuellen Cursorposition ein\n            if (textareaRef.current) {\n                const cursorPos = textareaRef.current.selectionStart;\n                const textBefore = description.substring(0, cursorPos);\n                const textAfter = description.substring(cursorPos);\n                \n                setDescription(textBefore + insertText + textAfter);\n                \n                // Setze den Cursor hinter den eingefgten Link\n                setTimeout(() => {\n                    if (textareaRef.current) {\n                        const newPos = cursorPos + insertText.length;\n                        textareaRef.current.selectionStart = newPos;\n                        textareaRef.current.selectionEnd = newPos;\n                        textareaRef.current.focus();\n                    }\n                }, 0);\n            } else {\n                setDescription(description + insertText);\n            }\n        } catch (err) {\n            console.error('Fehler beim Verarbeiten der Datei:', err);\n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        } finally {\n            setUploading(false);\n        }\n    };\n\n    const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n        const files = event.target.files;\n        if (!files || files.length === 0) return;\n\n        const file = files[0];\n        await uploadFileAndInsertLink(file);\n        \n        // Zurcksetzen des Datei-Inputs\n        if (fileInputRef.current) {\n            fileInputRef.current.value = '';\n        }\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError(null);\n        setLoading(true);\n\n        try {\n            // Validierung\n            if (!title || !status || !branchId) {\n                setError(t('tasks.editTask.errors.fillAllFields'));\n                setLoading(false);\n                return;\n            }\n\n            // berprfen, ob entweder Benutzer oder Rolle ausgewhlt wurde\n            if (assigneeType === 'user' && !responsibleId) {\n                setError(t('tasks.editTask.form.chooseUser'));\n                setLoading(false);\n                return;\n            }\n            \n            if (assigneeType === 'role' && !roleId) {\n                setError(t('tasks.editTask.form.chooseRole'));\n                setLoading(false);\n                return;\n            }\n\n            // Basis-Daten fr die Anfrage\n            const taskData: any = {\n                title,\n                description,\n                status,\n                qualityControlId,\n                branchId,\n                dueDate\n            };\n\n            // Entweder responsibleId oder roleId hinzufgen, nicht beides\n            if (assigneeType === 'user') {\n                taskData.responsibleId = responsibleId;\n                taskData.roleId = null; // Rolle explizit auf null setzen, um sie zu entfernen\n            } else if (assigneeType === 'role') {\n                taskData.roleId = roleId;\n                taskData.responsibleId = null; // Benutzer explizit auf null setzen, um ihn zu entfernen\n            }\n\n            const response = await axiosInstance.put(`${API_ENDPOINTS.TASKS.BASE}/${task.id}`, taskData);\n\n            console.log('Task aktualisiert:', response.data);\n            // bergebe den aktualisierten Task an den Callback\n            onTaskUpdated(response.data);\n            onClose();\n        } catch (err) {\n            console.error('Fehler beim Aktualisieren des Tasks:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleDelete = async () => {\n        if (!confirmDelete) {\n            setConfirmDelete(true);\n            return;\n        }\n        \n        try {\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                return;\n            }\n\n            await axiosInstance.delete(API_ENDPOINTS.TASKS.BY_ID(task.id));\n\n            // Beim Lschen wird kein Task zurckgegeben, daher undefined bergeben\n            onTaskUpdated(undefined as any);\n            onClose();\n        } catch (err) {\n            console.error('Delete Error:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        }\n    };\n\n    const handleAddArticle = async (article: CerebroArticle) => {\n        try {\n            setError(null);\n            \n            await axiosInstance.post(\n                API_ENDPOINTS.TASKS.LINK_CARTICLE(task.id, article.id)\n            );\n            \n            setLinkedArticles(prev => [...prev, article]);\n        } catch (err) {\n            console.error('Fehler beim Verknpfen des Artikels:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        }\n    };\n    \n    const handleRemoveArticle = async (articleId: number) => {\n        try {\n            setError(null);\n            \n            await axiosInstance.delete(\n                API_ENDPOINTS.TASKS.UNLINK_CARTICLE(task.id, articleId)\n            );\n            \n            setLinkedArticles(prev => prev.filter(a => a.id !== articleId));\n        } catch (err) {\n            console.error('Fehler beim Entfernen der Artikelverknpfung:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        }\n    };\n\n    const handleDeleteAttachment = async (attachmentId: number) => {\n        try {\n            setError(null);\n            \n            // Finde den zu entfernenden Anhang\n            const attachmentToRemove = attachments.find(a => a.id === attachmentId);\n            \n            if (attachmentToRemove) {\n                await axiosInstance.delete(API_ENDPOINTS.TASKS.ATTACHMENT(task.id, attachmentId));\n                \n                // Entferne den Anhang aus der Liste\n                setAttachments(attachments.filter(attachment => attachment.id !== attachmentId));\n                \n                // Entferne auch die Verweise im Beschreibungstext\n                if (attachmentToRemove.fileName) {\n                    // Erzeuge URL-Muster fr diesen Anhang\n                    const attachmentUrl = `${window.location.origin}/api${API_ENDPOINTS.TASKS.ATTACHMENT(task.id, attachmentId)}`;\n                    const escapedAttachmentUrl = attachmentUrl.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n                    \n                    // Suche nach Bild- und Link-Markdown\n                    const imagePattern = new RegExp(`!\\\\[(.*?)\\\\]\\\\(${escapedAttachmentUrl}\\\\)`, 'g');\n                    const linkPattern = new RegExp(`\\\\[(.*?)\\\\]\\\\(${escapedAttachmentUrl}\\\\)`, 'g');\n                    \n                    // Bereinige die Beschreibung\n                    const newDescription = description\n                        .replace(imagePattern, '')\n                        .replace(linkPattern, '')\n                        // Entferne berschssige Leerzeilen, die durch das Entfernen entstehen knnten\n                        .replace(/\\n{3,}/g, '\\n\\n');\n                    \n                    setDescription(newDescription);\n                }\n            }\n        } catch (err) {\n            console.error('Fehler beim Lschen des Anhangs:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        }\n    };\n\n    const handleDownloadAttachment = async (attachment: TaskAttachment) => {\n        try {\n            const response = await axiosInstance.get(\n                API_ENDPOINTS.TASKS.ATTACHMENT(task.id, attachment.id),\n                { responseType: 'blob' }\n            );\n            \n            // Blob-URL erstellen und Download auslsen\n            const url = window.URL.createObjectURL(new Blob([response.data]));\n            const link = document.createElement('a');\n            link.href = url;\n            link.setAttribute('download', attachment.fileName);\n            document.body.appendChild(link);\n            link.click();\n            link.remove();\n        } catch (err) {\n            console.error('Fehler beim Herunterladen des Anhangs:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        }\n    };\n\n    const handleRemoveTemporaryAttachment = (index: number) => {\n        // Finde den zu entfernenden Anhang\n        const attachmentToRemove = temporaryAttachments[index];\n        \n        if (attachmentToRemove) {\n            // Entferne den Anhang aus dem temporaryAttachments-Array\n            setTemporaryAttachments(temporaryAttachments.filter((_, i) => i !== index));\n            \n            // Entferne auch den Verweis im Beschreibungstext\n            if (attachmentToRemove.fileName) {\n                // Suche nach Bild- und Link-Markdown mit dem Dateinamen\n                const escapedFileName = attachmentToRemove.fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n                const uploadText = t('tasks.editTask.form.uploadAfterCreate');\n                const imagePattern = new RegExp(`!\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n                const linkPattern = new RegExp(`\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n                \n                // Bereinige die Beschreibung\n                const newDescription = description\n                    .replace(imagePattern, '')\n                    .replace(linkPattern, '')\n                    // Entferne berschssige Leerzeilen, die durch das Entfernen entstehen knnten\n                    .replace(/\\n{3,}/g, '\\n\\n');\n                \n                setDescription(newDescription);\n            }\n        }\n    };\n\n    const renderForm = () => (\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {/* Tabs Navigation */}\n            <div className=\"border-b border-gray-200 dark:border-gray-700\">\n                <nav className=\"-mb-px flex space-x-4\" aria-label=\"Tabs\">\n                    <button\n                        type=\"button\"\n                        className={`${\n                            activeTab === 'data'\n                                ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:border-gray-600'\n                        } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                        onClick={() => setActiveTab('data')}\n                    >\n                        Daten\n                    </button>\n                    <button\n                        type=\"button\"\n                        className={`${\n                            activeTab === 'cerebro'\n                                ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:border-gray-600'\n                        } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                        onClick={() => setActiveTab('cerebro')}\n                    >\n                        Cerebro Artikel\n                    </button>\n                </nav>\n            </div>\n\n            {/* Data Tab Content */}\n            {activeTab === 'data' && (\n                <>\n                    <div>\n                        <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.editTask.form.title')}\n                        </label>\n                        <input\n                            type=\"text\"\n                            id=\"title\"\n                            value={title}\n                            onChange={(e) => setTitle(e.target.value)}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                            required\n                        />\n                    </div>\n\n                    <div>\n                        <label htmlFor=\"description_edit\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.editTask.form.description')}\n                        </label>\n                        <div className=\"relative\">\n                            <textarea\n                                ref={textareaRef}\n                                id=\"description_edit\"\n                                rows={6}\n                                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                                value={description}\n                                onChange={(e) => setDescription(e.target.value)}\n                                onPaste={handlePaste}\n                                onDrop={handleDrop}\n                                onDragOver={handleDragOver}\n                                placeholder={t('tasks.editTask.form.descriptionPlaceholder')}\n                            />\n                            <button\n                                type=\"button\"\n                                onClick={() => fileInputRef.current?.click()}\n                                className=\"absolute bottom-2 left-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none\"\n                                title={t('tasks.editTask.form.fileUpload')}\n                            >\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n                                </svg>\n                            </button>\n                            <input\n                                ref={fileInputRef}\n                                type=\"file\"\n                                onChange={handleFileUpload}\n                                className=\"hidden\"\n                            />\n                            {uploading && (\n                                <div className=\"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-70 dark:bg-opacity-70\">\n                                    <span className=\"text-sm text-gray-600 dark:text-gray-300\">{t('tasks.editTask.form.uploading')}</span>\n                                </div>\n                            )}\n                        </div>\n                        {renderAttachments()}\n                        {renderTemporaryAttachments()}\n                        {/* MarkdownPreview entfernt: Bei Edit-Modals werden Anhnge bereits durch renderAttachments() \n                            und renderTemporaryAttachments() angezeigt, Beschreibung nur im Textarea */}\n                    </div>\n\n                    <div>\n                        <label htmlFor=\"status\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.editTask.form.status')}\n                        </label>\n                        <select\n                            id=\"status\"\n                            value={status}\n                            onChange={(e) => setStatus(e.target.value as Task['status'])}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                        >\n                            <option value=\"open\">{t('tasks.status.open')}</option>\n                            <option value=\"in_progress\">{t('tasks.status.in_progress')}</option>\n                            <option value=\"improval\">{t('tasks.status.improval')}</option>\n                            <option value=\"quality_control\">{t('tasks.status.quality_control')}</option>\n                            <option value=\"done\">{t('tasks.status.done')}</option>\n                        </select>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.editTask.form.responsibleFor')} *\n                        </label>\n                        <div className=\"flex space-x-4\">\n                            <label className=\"inline-flex items-center\">\n                                <input\n                                    type=\"radio\"\n                                    className=\"form-radio text-blue-600 dark:bg-gray-700 dark:border-gray-600\"\n                                    name=\"assigneeType\"\n                                    value=\"user\"\n                                    checked={assigneeType === 'user'}\n                                    onChange={() => {\n                                        setAssigneeType('user');\n                                        setRoleId(null);\n                                    }}\n                                />\n                                <span className=\"ml-2 dark:text-gray-300\">{t('tasks.editTask.form.user')}</span>\n                            </label>\n                            <label className=\"inline-flex items-center\">\n                                <input\n                                    type=\"radio\"\n                                    className=\"form-radio text-blue-600 dark:bg-gray-700 dark:border-gray-600\"\n                                    name=\"assigneeType\"\n                                    value=\"role\"\n                                    checked={assigneeType === 'role'}\n                                    onChange={() => {\n                                        setAssigneeType('role');\n                                        setResponsibleId(null);\n                                    }}\n                                />\n                                <span className=\"ml-2 dark:text-gray-300\">{t('tasks.editTask.form.role')}</span>\n                            </label>\n                        </div>\n                    </div>\n\n                    {assigneeType === 'user' ? (\n                        <div>\n                            <label htmlFor=\"responsible\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                {t('tasks.editTask.form.responsibleUser')} *\n                            </label>\n                            <select\n                                id=\"responsible\"\n                                value={responsibleId === null ? '' : responsibleId}\n                                onChange={(e) => setResponsibleId(e.target.value ? Number(e.target.value) : null)}\n                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                                required={assigneeType === 'user'}\n                            >\n                                <option value=\"\">{t('tasks.editTask.form.pleaseSelect')}</option>\n                                {Array.isArray(users) && users.map(user => (\n                                    <option key={user.id} value={user.id}>\n                                        {user.firstName} {user.lastName}\n                                    </option>\n                                ))}\n                            </select>\n                        </div>\n                    ) : (\n                        <div>\n                            <label htmlFor=\"role\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                {t('tasks.editTask.form.responsibleRole')} *\n                            </label>\n                            <select\n                                id=\"role\"\n                                value={roleId === null ? '' : roleId}\n                                onChange={(e) => setRoleId(e.target.value ? Number(e.target.value) : null)}\n                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                                required={assigneeType === 'role'}\n                            >\n                                <option value=\"\">{t('tasks.editTask.form.pleaseSelect')}</option>\n                                {Array.isArray(roles) && roles.map(role => (\n                                    <option key={role.id} value={role.id}>\n                                        {role.name}\n                                    </option>\n                                ))}\n                            </select>\n                        </div>\n                    )}\n\n                    <div>\n                        <label htmlFor=\"qualityControl\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.editTask.form.qualityControl')}\n                        </label>\n                        <select\n                            id=\"qualityControl\"\n                            value={qualityControlId === null ? '' : qualityControlId}\n                            onChange={(e) => setQualityControlId(e.target.value ? Number(e.target.value) : null)}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                        >\n                            <option value=\"\">{t('tasks.editTask.form.noQualityControl')}</option>\n                            {Array.isArray(users) && users.map(user => (\n                                <option key={user.id} value={user.id}>\n                                    {user.firstName} {user.lastName}\n                                </option>\n                            ))}\n                        </select>\n                    </div>\n\n                    <div>\n                        <label htmlFor=\"branch\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.editTask.form.branch')}\n                        </label>\n                        <select\n                            id=\"branch\"\n                            value={branchId === 0 ? '' : branchId}\n                            onChange={(e) => setBranchId(e.target.value ? Number(e.target.value) : 0)}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                            required\n                        >\n                            <option value=\"\">Bitte whlen</option>\n                            {Array.isArray(branches) && branches.map(branch => (\n                                <option key={branch.id} value={branch.id}>\n                                    {branch.name}\n                                </option>\n                            ))}\n                        </select>\n                    </div>\n\n                    <div>\n                        <label htmlFor=\"dueDate\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.editTask.form.dueDate')}\n                        </label>\n                        <input\n                            type=\"date\"\n                            id=\"dueDate\"\n                            value={dueDate || ''}\n                            onChange={(e) => {\n                                // Wenn das Feld leer ist, setze auf null\n                                if (!e.target.value) {\n                                    setDueDate(null);\n                                } else {\n                                    // Ansonsten behalte das Format YYYY-MM-DD bei\n                                    setDueDate(e.target.value);\n                                }\n                            }}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                        />\n                    </div>\n                </>\n            )}\n\n            {/* Cerebro Articles Tab Content */}\n            {activeTab === 'cerebro' && (\n                <div>\n                    {linkedArticles.length > 0 && (\n                        <div className=\"mb-4\">\n                            <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('tasks.editTask.form.linkedCerebroArticles')}</h3>\n                            <ul className=\"space-y-2\">\n                                {linkedArticles.map(article => (\n                                    <li key={article.id} className=\"flex items-center justify-between bg-gray-50 dark:bg-gray-700 p-2 rounded\">\n                                        <a \n                                            href={`/cerebro/articles/${article.slug}`} \n                                            target=\"_blank\" \n                                            rel=\"noopener noreferrer\"\n                                            className=\"text-blue-600 hover:underline dark:text-blue-400 dark:hover:text-blue-300\"\n                                        >\n                                            {article.title}\n                                        </a>\n                                        <button\n                                            type=\"button\"\n                                            onClick={() => handleRemoveArticle(article.id)}\n                                            className=\"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300\"\n                                        >\n                                            {t('tasks.editTask.form.remove')}\n                                        </button>\n                                    </li>\n                                ))}\n                            </ul>\n                        </div>\n                    )}\n\n                    <CerebroArticleSelector \n                        onArticleSelected={handleAddArticle}\n                        excludeArticleIds={linkedArticles.map(a => a.id)}\n                        selectedArticles={linkedArticles}\n                        onArticleRemove={handleRemoveArticle}\n                    />\n                </div>\n            )}\n                \n            <div className=\"flex justify-between pt-4\">\n                {canDeleteTask && (\n                    <button\n                        type=\"button\"\n                        onClick={handleDelete}\n                        className={`p-2 rounded-md ${\n                            confirmDelete\n                                ? 'bg-red-600 text-white dark:bg-red-700 dark:text-white hover:bg-red-700 dark:hover:bg-red-600'\n                                : 'text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300'\n                        }`}\n                        title={confirmDelete ? t('tasks.editTask.form.confirmDelete') : t('tasks.editTask.form.delete')}\n                    >\n                        {confirmDelete ? (\n                            <CheckIcon className=\"h-5 w-5\" />\n                        ) : (\n                            <TrashIcon className=\"h-5 w-5\" />\n                        )}\n                    </button>\n                )}\n                <div className=\"flex gap-2\">\n                    <button\n                        type=\"button\"\n                        onClick={onClose}\n                        className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                        title={t('tasks.editTask.form.cancel')}\n                    >\n                        <XMarkIcon className=\"h-5 w-5\" />\n                    </button>\n                    <button\n                        type=\"submit\"\n                        className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                        title={loading ? t('tasks.editTask.form.saving') : t('tasks.editTask.form.save')}\n                        disabled={loading}\n                    >\n                        {loading ? (\n                            <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                        ) : (\n                            <CheckIcon className=\"h-5 w-5\" />\n                        )}\n                    </button>\n                </div>\n            </div>\n        </form>\n    );\n\n    const renderAttachments = () => {\n        if (attachments.length === 0) return null;\n        \n        return (\n            <div className=\"mt-2\">\n                <ul className=\"flex flex-wrap gap-2\">\n                    {attachments.map((attachment) => (\n                        <li key={attachment.id} className=\"inline-flex items-center bg-gray-100 dark:bg-gray-700 rounded-md px-2 py-1 relative group\">\n                            <span className=\"text-sm font-medium text-gray-800 dark:text-gray-300\">\n                                {attachment.fileName}\n                            </span>\n                            <div className=\"flex ml-2\">\n                                <button\n                                    type=\"button\"\n                                    onClick={() => handleDownloadAttachment(attachment)}\n                                    className=\"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-1\"\n                                    title={t('tasks.editTask.form.download')}\n                                >\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n                                    </svg>\n                                </button>\n                                <button\n                                    type=\"button\"\n                                    onClick={() => handleDeleteAttachment(attachment.id)}\n                                    className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 ml-1\"\n                                    title=\"Entfernen\"\n                                >\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                                    </svg>\n                                </button>\n                            </div>\n                            {/* Tooltip fr Bildvorschau bei Bild-Dateien */}\n                            {attachment.fileType.startsWith('image/') && (\n                                <div className=\"absolute z-10 invisible group-hover:visible bg-white dark:bg-gray-800 p-2 rounded-md shadow-lg -top-32 left-0 border border-gray-200 dark:border-gray-600\">\n                                    <img \n                                        src={`${window.location.origin}/api${API_ENDPOINTS.TASKS.ATTACHMENT(task.id, attachment.id)}`}\n                                        alt={attachment.fileName}\n                                        className=\"max-w-[200px] max-h-[150px] object-contain\"\n                                    />\n                                </div>\n                            )}\n                        </li>\n                    ))}\n                </ul>\n            </div>\n        );\n    };\n\n    const renderTemporaryAttachments = () => {\n        if (temporaryAttachments.length === 0) return null;\n        \n        return (\n            <div className=\"mt-2\">\n                <ul className=\"flex flex-wrap gap-2\">\n                    {temporaryAttachments.map((attachment, index) => (\n                        <li key={`temp-${index}`} className=\"inline-flex items-center bg-gray-100 dark:bg-gray-700 rounded-md px-2 py-1 relative group\">\n                            <span className=\"text-sm font-medium text-gray-800 dark:text-gray-300\">\n                                {attachment.fileName}\n                            </span>\n                            <div className=\"flex ml-2\">\n                                <button\n                                    type=\"button\"\n                                    onClick={() => handleRemoveTemporaryAttachment(index)}\n                                    className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 ml-1\"\n                                    title=\"Entfernen\"\n                                >\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                                    </svg>\n                                </button>\n                            </div>\n                            {/* Tooltip fr Bildvorschau bei Bild-Dateien */}\n                            {attachment.fileType?.startsWith('image/') && attachment.file && (\n                                <div className=\"absolute z-10 invisible group-hover:visible bg-white dark:bg-gray-800 p-2 rounded-md shadow-lg -top-32 left-0 border border-gray-200 dark:border-gray-600\">\n                                    <img \n                                        src={URL.createObjectURL(attachment.file)}\n                                        alt={attachment.fileName}\n                                        className=\"max-w-[200px] max-h-[150px] object-contain\"\n                                    />\n                                </div>\n                            )}\n                        </li>\n                    ))}\n                </ul>\n            </div>\n        );\n    };\n\n    if (!isOpen) return null;\n\n    // Fr Mobile (unter 640px) - klassisches Modal\n    if (isMobile) {\n        return (\n            <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n                <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n                \n                <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                    <Dialog.Panel className=\"mx-auto max-w-xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n                            <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                                {t('tasks.editTask.title')}\n                            </Dialog.Title>\n                            <button\n                                onClick={onClose}\n                                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                            >\n                                <XMarkIcon className=\"h-6 w-6\" />\n                            </button>\n                        </div>\n\n                        <div className=\"p-4\">\n                            {error && (\n                                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                                    {error}\n                                </div>\n                            )}\n\n                            {renderForm()}\n                        </div>\n                    </Dialog.Panel>\n                </div>\n            </Dialog>\n        );\n    }\n\n    // Fr Desktop (ab 640px) - Sidepane\n    // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n    return (\n        <>\n            {/* Backdrop - nur wenn offen und <= 1070px */}\n            {isOpen && !isLargeScreen && (\n                <div \n                    className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n                    aria-hidden=\"true\" \n                    onClick={onClose}\n                    style={{\n                        opacity: isOpen ? 1 : 0,\n                        transition: 'opacity 300ms ease-out'\n                    }}\n                />\n            )}\n            \n            {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n            <div \n                className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n                style={{\n                    transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n                    pointerEvents: isOpen ? 'auto' : 'none'\n                }}\n                aria-hidden={!isOpen}\n                role=\"dialog\"\n                aria-modal={isOpen}\n            >\n                <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n                    <h2 className=\"text-lg font-semibold dark:text-white\">\n                            {t('tasks.editTask.title')}\n                    </h2>\n                    <button\n                        onClick={onClose}\n                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                    >\n                        <XMarkIcon className=\"h-6 w-6\" />\n                    </button>\n                </div>\n\n                <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n                    {error && (\n                        <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                            {error}\n                        </div>\n                    )}\n\n                    {renderForm()}\n                </div>\n            </div>\n        </>\n    );\n};\n\nexport default EditTaskModal; ","import * as React from \"react\";\nfunction ListBulletIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ListBulletIcon);\nexport default ForwardRef;","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { ClockIcon, ListBulletIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { useWorktime } from '../contexts/WorktimeContext.tsx';\nimport { useBranch } from '../contexts/BranchContext.tsx';\nimport { WorktimeModal } from './WorktimeModal.tsx';\n\n// Wir entfernen die benutzerdefinierten API-URL-Definitionen und verwenden die direkte URL,\n// um Konflikte mit der globalen Axios-Konfiguration zu vermeiden\n// const API_BASE_URL = 'http://localhost:5000';\n// const API_URL = `${API_BASE_URL}/api`;\n\ninterface Branch {\n    id: number;\n    name: string;\n}\n\ninterface WorkTime {\n    id: number;\n    startTime: Date;\n    endTime: Date | null;\n    branchId: number;\n    userId: number;\n    branch: {\n        id: number;\n        name: string;\n    };\n}\n\ninterface WorktimeModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nconst WorktimeTracker: React.FC = () => {\n    /* CLAUDE-ANCHOR: a7c238f1-9d6a-42e5-8af1-6d8b2e9a4f18 - WORKTIME_TRACKER_COMPONENT */\n    const { t } = useTranslation();\n    const [isTracking, setIsTracking] = useState(false);\n    const [startTime, setStartTime] = useState<Date | null>(null);\n    const [elapsedTime, setElapsedTime] = useState<string>('00:00:00');\n    const [activeWorktime, setActiveWorktime] = useState<WorkTime | null>(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [showWorkTimeModal, setShowWorkTimeModal] = useState(false);\n    const [statusError, setStatusError] = useState<string | null>(null);\n    const { user } = useAuth();\n    const { updateTrackingStatus } = useWorktime();\n    const { branches, selectedBranch, setSelectedBranch } = useBranch();\n\n    // Funktion zum Abrufen des aktiven Worktime-Status\n    const checkActiveWorktime = useCallback(async () => {\n        try {\n            setIsLoading(true);\n            setStatusError(null);\n            \n            console.log('Prfe aktive Zeiterfassung...');\n            console.log('Benutzer geladen:', user?.id);\n            \n            const token = localStorage.getItem('token');\n            console.log('Token vorhanden:', token ? 'Ja' : 'Nein');\n            \n            if (!token) {\n                console.error('Kein Authentifizierungstoken gefunden');\n                setStatusError(t('worktime.tracker.notAuthenticated'));\n                setIsLoading(false);\n                return;\n            }\n            \n            try {\n                // Verwende axiosInstance statt direktem axios\n                const response = await axiosInstance.get(API_ENDPOINTS.WORKTIME.ACTIVE);\n                \n                console.log('API-Antwort Status:', response.status);\n                \n                const data = response.data;\n                console.log('Aktive Zeiterfassung Daten:', data);\n                \n                if (data && data.active === true) {\n                    console.log('Aktive Zeiterfassung gefunden:', data.id);\n                    // Startzeit setzen und Timer initialisieren\n                    // Entferne das 'Z' am Ende des Strings, damit JS den Zeitstempel nicht als UTC interpretiert\n                    const startISOString = data.startTime.endsWith('Z') \n                        ? data.startTime.substring(0, data.startTime.length - 1)\n                        : data.startTime;\n                    \n                    const startTimeDate = new Date(startISOString);\n                    \n                    // Initial berechnete Zeit anzeigen\n                    const now = new Date();\n                    const diff = now.getTime() - startTimeDate.getTime();\n                    const totalSeconds = Math.floor(diff / 1000);\n                    const hours = Math.floor(totalSeconds / 3600);\n                    const minutes = Math.floor((totalSeconds % 3600) / 60);\n                    const seconds = totalSeconds % 60;\n                    \n                    // Alle State-Updates in einem Batch zusammenfassen, um nur einen Re-Render zu verursachen\n                    setActiveWorktime(data);\n                    setStartTime(startTimeDate);\n                    setElapsedTime(\n                        `${hours.toString().padStart(2, '0')}:${minutes\n                            .toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`\n                    );\n                    setIsTracking(true);\n                    \n                    // Nur Branch setzen, wenn es sich gendert hat (vermeidet unntigen Re-Render)\n                    if (selectedBranch !== data.branchId) {\n                        setSelectedBranch(data.branchId);\n                    }\n                    \n                    // Aktualisiere den globalen Tracking-Status\n                    updateTrackingStatus(true);\n                } else {\n                    console.log('Keine aktive Zeiterfassung vorhanden');\n                    // Alle State-Updates in einem Batch zusammenfassen\n                    setIsTracking(false);\n                    setActiveWorktime(null);\n                    setStartTime(null);\n                    setElapsedTime('00:00:00');\n                    \n                    // Aktualisiere den globalen Tracking-Status\n                    updateTrackingStatus(false);\n                }\n            } catch (error) {\n                console.error('Fehler beim Abrufen der aktiven Zeiterfassung:', error);\n                \n                // Einfachere Fehlerbehandlung ohne axios-Import\n                const axiosError = error as any;\n                if (axiosError.code === 'ERR_NETWORK') {\n                    setStatusError(t('worktime.tracker.connectionError'));\n                } else {\n                    setStatusError(`${t('worktime.tracker.errorFetch')}: ${axiosError.response?.data?.message || axiosError.message}`);\n                }\n            }\n        } finally {\n            setIsLoading(false);\n        }\n    }, [user?.id, updateTrackingStatus, selectedBranch]);\n    \n    // Initiale Prfung, ob bereits eine aktive Zeiterfassung luft\n    useEffect(() => {\n        if (user) {\n            console.log('Benutzer geladen, prfe aktive Zeiterfassung fr Benutzer-ID:', user.id);\n            checkActiveWorktime();\n        } else {\n            console.log('Warte auf Benutzer-Daten vor dem Prfen der Zeiterfassung...');\n            setIsLoading(false);\n        }\n    }, [user, checkActiveWorktime]);\n\n    // Timer-Logik\n    useEffect(() => {\n        let intervalId: number;\n\n        if (isTracking && startTime) {\n            intervalId = window.setInterval(() => {\n                const now = new Date();\n                const diff = now.getTime() - startTime.getTime();\n                \n                // Berechnung mit Millisekunden, um negative Werte zu vermeiden\n                const totalSeconds = Math.floor(diff / 1000);\n                const hours = Math.floor(totalSeconds / 3600);\n                const minutes = Math.floor((totalSeconds % 3600) / 60);\n                const seconds = totalSeconds % 60;\n\n                setElapsedTime(\n                    `${hours.toString().padStart(2, '0')}:${minutes\n                        .toString()\n                        .padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`\n                );\n            }, 1000);\n        }\n\n        return () => {\n            if (intervalId) {\n                clearInterval(intervalId);\n            }\n        };\n    }, [isTracking, startTime]);\n\n    const handleToggleTracking = async () => {\n        if (isTracking) {\n            await handleStopTracking();\n        } else {\n            await handleStartTracking();\n        }\n    };\n\n    const handleStartTracking = async () => {\n        if (!selectedBranch) {\n            alert(t('worktime.tracker.selectBranch'));\n            return;\n        }\n\n        try {\n            const token = localStorage.getItem('token');\n            if (!token) {\n                console.error('Kein Authentifizierungstoken gefunden');\n                alert(t('worktime.tracker.notAuthenticatedMessage'));\n                return;\n            }\n            \n            // Verwende axiosInstance statt direktem axios\n            const response = await axiosInstance.post(\n                API_ENDPOINTS.WORKTIME.START,\n                {\n                    branchId: selectedBranch,\n                    // Die aktuelle Zeit mit Bercksichtigung der Zeitzonenverschiebung senden\n                    // Da die Datenbank in UTC speichert, mssen wir die lokale Zeit so senden,\n                    // dass sie nach der automatischen UTC-Umwandlung korrekt ist\n                    startTime: new Date(new Date().getTime() - new Date().getTimezoneOffset() * 60000)\n                },\n                {\n                    headers: {\n                        'Authorization': `Bearer ${token}`,\n                        'Content-Type': 'application/json'\n                    }\n                }\n            );\n\n            const data = response.data;\n            \n            // Erstelle ein Date-Objekt ohne Zeitzonenumrechnung\n            // Entferne das 'Z' am Ende des Strings, damit JS den Zeitstempel nicht als UTC interpretiert\n            const startISOString = data.startTime.endsWith('Z') \n                ? data.startTime.substring(0, data.startTime.length - 1)\n                : data.startTime;\n            \n            const startTimeDate = new Date(startISOString);\n            \n            // Initial berechnete Zeit anzeigen (0:00:00 beim Start)\n            // Alle State-Updates in einem Batch zusammenfassen, um nur einen Re-Render zu verursachen\n            setActiveWorktime(data);\n            setStartTime(startTimeDate);\n            setElapsedTime('00:00:00');\n            setIsTracking(true);\n            \n            // Aktualisiere den globalen Tracking-Status\n            updateTrackingStatus(true);\n        } catch (error) {\n            console.error('Fehler:', error);\n            \n            // Detaillierte Fehlerbehandlung\n            let errorMessage = t('worktime.tracker.errorStart');\n            if (error.response) {\n                errorMessage = error.response.data?.message || `Fehler (Status: ${error.response.status})`;\n            }\n            \n            alert(errorMessage);\n        }\n    };\n\n    const handleStopTracking = async () => {\n        try {\n            const token = localStorage.getItem('token');\n            if (!token) {\n                console.error('Kein Authentifizierungstoken gefunden');\n                alert(t('worktime.tracker.notAuthenticatedMessage'));\n                return;\n            }\n            \n            // Verwende axiosInstance statt direktem axios\n            const response = await axiosInstance.post(\n                API_ENDPOINTS.WORKTIME.STOP,\n                {\n                    // Die aktuelle Zeit mit Bercksichtigung der Zeitzonenverschiebung senden\n                    endTime: new Date(new Date().getTime() - new Date().getTimezoneOffset() * 60000)\n                },\n                {\n                    headers: {\n                        'Authorization': `Bearer ${token}`,\n                        'Content-Type': 'application/json'\n                    }\n                }\n            );\n\n            // Alle State-Updates in einem Batch zusammenfassen, um nur einen Re-Render zu verursachen\n            setIsTracking(false);\n            setActiveWorktime(null);\n            setStartTime(null);\n            setElapsedTime('00:00:00');\n            \n            // Aktualisiere den globalen Tracking-Status\n            updateTrackingStatus(false);\n        } catch (error) {\n            console.error('Fehler:', error);\n            \n            // Detaillierte Fehlerbehandlung\n            let errorMessage = t('worktime.tracker.errorStop');\n            if (error.response) {\n                errorMessage = error.response.data?.message || `Fehler (Status: ${error.response.status})`;\n            }\n            \n            alert(errorMessage);\n        }\n    };\n\n    const openWorkTimeModal = () => {\n        setShowWorkTimeModal(true);\n    };\n\n    const closeWorkTimeModal = () => {\n        setShowWorkTimeModal(false);\n    };\n\n    // Branch-Name memoized berechnen (vermeidet unntige Re-Berechnungen)\n    const branchName = useMemo(() => {\n        if (!activeWorktime) return null;\n        return branches.find(b => b.id === activeWorktime.branchId)?.name || t('worktime.tracker.unknown');\n    }, [branches, activeWorktime]);\n\n    // Manuelle Statusaktualisierung\n    const handleRefreshStatus = () => {\n        checkActiveWorktime();\n    };\n\n    // Manuelle Zeiterfassung forciert stoppen (fr Notflle)\n    const handleForceStop = async () => {\n        if (!window.confirm(t('worktime.tracker.forceStopConfirm'))) {\n            return;\n        }\n        \n        try {\n            const token = localStorage.getItem('token');\n            if (!token) {\n                console.error('Kein Authentifizierungstoken gefunden');\n                alert(t('worktime.tracker.notAuthenticatedMessage'));\n                return;\n            }\n            \n            // Verwende axiosInstance statt direktem axios\n            const response = await axiosInstance.post(\n                API_ENDPOINTS.WORKTIME.STOP,\n                {\n                    // Die aktuelle Zeit mit Bercksichtigung der Zeitzonenverschiebung senden\n                    endTime: new Date(new Date().getTime() - new Date().getTimezoneOffset() * 60000),\n                    force: true\n                },\n                {\n                    headers: {\n                        'Authorization': `Bearer ${token}`,\n                        'Content-Type': 'application/json'\n                    }\n                }\n            );\n\n            setIsTracking(false);\n            setStartTime(null);\n            setElapsedTime('00:00:00');\n            setActiveWorktime(null);\n            setStatusError(null);\n            alert(t('worktime.tracker.forceStopSuccess'));\n            \n            // Aktualisiere den globalen Tracking-Status\n            updateTrackingStatus(false);\n        } catch (error) {\n            console.error('Fehler:', error);\n            setStatusError(`Fehler beim Stoppen: ${error.response?.status || 'Netzwerkfehler'}`);\n            alert(t('worktime.tracker.forceStopError'));\n        }\n    };\n\n    // Formatiere das Startdatum fr die lokale Anzeige\n    const formatStartDate = (dateString: string | number | Date) => {\n        // Entferne das 'Z' am Ende des Strings, damit JS den Zeitstempel nicht als UTC interpretiert\n        if (typeof dateString === 'string' && dateString.endsWith('Z')) {\n            dateString = dateString.substring(0, dateString.length - 1);\n        }\n        \n        const date = new Date(dateString);\n        \n        // Tag, Monat und Jahr aus lokaler Zeit extrahieren\n        const day = date.getDate().toString().padStart(2, '0');\n        const month = (date.getMonth() + 1).toString().padStart(2, '0');\n        const year = date.getFullYear();\n        \n        // Stunden, Minuten und Sekunden aus lokaler Zeit extrahieren\n        const hours = date.getHours().toString().padStart(2, '0');\n        const minutes = date.getMinutes().toString().padStart(2, '0');\n        const seconds = date.getSeconds().toString().padStart(2, '0');\n        \n        // Im deutschen Format zurckgeben\n        return `${day}.${month}.${year}, ${hours}:${minutes}:${seconds}`;\n    };\n\n    if (isLoading) {\n        return (\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 mb-6\">\n                <div className=\"flex justify-center items-center h-32\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-gray-300\"></div>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 sm:mb-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-xl font-semibold flex items-center dark:text-white\">\n                    <ClockIcon className=\"h-6 w-6 mr-2\" />\n                    {t('worktime.tracker.title')}\n                </h2>\n            </div>\n            \n            {statusError && (\n                <div className=\"mb-4 p-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-300 border border-red-200 dark:border-red-700 rounded-md flex justify-between items-center\">\n                    <span>{statusError}</span>\n                    {statusError !== t('worktime.tracker.noActiveTracking') && (\n                        <button \n                            onClick={handleForceStop}\n                            className=\"text-sm bg-red-100 hover:bg-red-200 text-red-700 dark:bg-red-800 dark:hover:bg-red-700 dark:text-red-300 px-2 py-1 rounded-md\"\n                        >\n                            {t('worktime.tracker.stop')} {t('common.force', 'Erzwingen')}\n                        </button>\n                    )}\n                </div>\n            )}\n            \n            {/* Ein-/Ausschalter fr die Zeiterfassung - verkleinert */}\n            <div className=\"flex items-start justify-center mb-4\">\n                <div className=\"flex flex-col items-center\">\n                    <label className=\"relative inline-flex items-center cursor-pointer\">\n                        <input \n                            type=\"checkbox\" \n                            className=\"sr-only peer\" \n                            checked={isTracking}\n                            onChange={handleToggleTracking}\n                            disabled={!selectedBranch && !isTracking}\n                        />\n                        <div className={`w-20 h-10 rounded-full \n                            ${isTracking \n                                ? 'bg-green-500 shadow-lg shadow-green-200 dark:shadow-green-900/20' \n                                : 'bg-gray-300 dark:bg-gray-600'\n                            }\n                            before:content-[''] before:absolute before:top-0 before:left-0 before:bottom-0 before:right-0 \n                            peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-700\n                            peer-checked:after:translate-x-10\n                            after:content-[''] after:absolute after:top-1 after:left-1\n                            after:bg-white dark:after:bg-gray-200 after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full\n                            after:h-8 after:w-8 after:transition-all after:duration-300 ease-in-out\n                            transition-colors duration-300`}>\n                        </div>\n                    </label>\n                    <span className=\"mt-2 text-sm font-medium\">\n                        {isTracking \n                            ? <span className=\"text-green-600 dark:text-green-400 font-bold\">{t('worktime.tracker.running')}</span> \n                            : <span className=\"text-gray-600 dark:text-gray-400\">{t('worktime.tracker.start')}</span>\n                        }\n                    </span>\n                </div>\n\n                {/* Icon-Button zum ffnen des Modals */}\n                <button \n                    onClick={openWorkTimeModal}\n                    className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-2 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-blue-700 shadow-sm flex items-center justify-center ml-8 mt-1\"\n                    title={t('worktime.tracker.showTimes')}\n                >\n                    <ListBulletIcon className=\"h-6 w-6\" />\n                </button>\n            </div>\n\n            {/* Informationen zur aktiven Zeiterfassung oder Platzhalter */}\n            <div className={`p-2 my-2 rounded-md text-sm ${isTracking && activeWorktime ? 'bg-green-50 dark:bg-green-900/20 dark:text-green-200' : 'bg-gray-50 dark:bg-gray-700 dark:text-gray-300'}`}>\n                {isTracking && activeWorktime ? (\n                    <>\n                        <p><strong>{t('worktime.tracker.activeTracking')}</strong> {elapsedTime}</p>\n                        <p><strong>{t('worktime.tracker.started')}</strong> {formatStartDate(startTime || Date.now())}</p>\n                        <p><strong>{t('worktime.tracker.selectBranchLabel')}:</strong> {branchName || t('worktime.tracker.unknown')}</p>\n                    </>\n                ) : (\n                    <>\n                        <p>&nbsp;</p>\n                        <p>&nbsp;</p>\n                        <p>&nbsp;</p>\n                    </>\n                )}\n            </div>\n\n            {/* WorkTime Modal */}\n            {showWorkTimeModal && (\n                <WorktimeModal isOpen={showWorkTimeModal} onClose={closeWorkTimeModal} />\n            )}\n        </div>\n    );\n};\n\nexport default WorktimeTracker; ","import React, { useEffect, useState, useMemo, useCallback, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useLocation } from 'react-router-dom';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useTableSettings } from '../hooks/useTableSettings.ts';\nimport TableColumnConfig from '../components/TableColumnConfig.tsx';\nimport { PencilIcon, TrashIcon, PlusIcon, ArrowLeftIcon, ArrowRightIcon, CheckCircleIcon, ArrowsUpDownIcon, FunnelIcon, XMarkIcon, DocumentDuplicateIcon, InformationCircleIcon, ClipboardDocumentListIcon, ArrowPathIcon, Squares2X2Icon, TableCellsIcon, UserIcon, BuildingOfficeIcon, CalendarIcon, ChevronLeftIcon, ChevronRightIcon } from '@heroicons/react/24/outline';\nimport CreateTaskModal from '../components/CreateTaskModal.tsx';\nimport EditTaskModal from '../components/EditTaskModal.tsx';\nimport WorktimeTracker from '../components/WorktimeTracker.tsx';\nimport WorktimeList from '../components/WorktimeList.tsx';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport axiosInstance from '../config/axios.ts';\nimport FilterPane from '../components/FilterPane.tsx';\nimport { FilterCondition } from '../components/FilterRow.tsx';\nimport SavedFilterTags from '../components/SavedFilterTags.tsx';\nimport { toast } from 'react-toastify';\nimport MarkdownPreview from '../components/MarkdownPreview.tsx';\nimport { getExpiryStatus, getExpiryColorClasses, createDueDateMetadataItem } from '../utils/expiryUtils.ts';\nimport { getStatusText, getStatusColor } from '../utils/statusUtils.tsx';\nimport DataCard, { MetadataItem } from '../components/shared/DataCard.tsx';\nimport CardGrid from '../components/shared/CardGrid.tsx';\nimport { format } from 'date-fns';\nimport { de } from 'date-fns/locale';\n\ninterface Task {\n    id: number;\n    title: string;\n    description: string | null;\n    status: 'open' | 'in_progress' | 'improval' | 'quality_control' | 'done';\n    responsible: {\n        id: number;\n        firstName: string;\n        lastName: string;\n    } | null;\n    responsibleId: number | null;\n    role: {\n        id: number;\n        name: string;\n    } | null;\n    roleId: number | null;\n    qualityControl: {\n        id: number;\n        firstName: string;\n        lastName: string;\n    } | null;\n    branch: {\n        id: number;\n        name: string;\n    };\n    dueDate: string | null;\n    requestId: number | null;\n}\n\ninterface SortConfig {\n    key: keyof Task | 'responsible.firstName' | 'qualityControl.firstName' | 'branch.name';\n    direction: 'asc' | 'desc';\n}\n\n// Standard-Spaltenreihenfolge (wird in der Komponente neu definiert)\nconst defaultColumnOrder = ['title', 'responsibleAndQualityControl', 'status', 'dueDate', 'branch', 'actions'];\n\n// Definiere eine tableId fr die To-Dos Tabelle\nconst TODOS_TABLE_ID = 'worktracker-todos';\n\n// Card-Einstellungen Standardwerte\nconst defaultCardMetadata = ['title', 'status', 'responsible', 'qualityControl', 'branch', 'dueDate', 'description'];\nconst defaultCardColumnOrder = ['title', 'status', 'responsible', 'qualityControl', 'branch', 'dueDate', 'description'];\nconst defaultCardSortDirections: Record<string, 'asc' | 'desc'> = {\n  title: 'asc',\n  status: 'asc',\n  responsible: 'asc',\n  qualityControl: 'asc',\n  branch: 'asc',\n  dueDate: 'asc',\n  description: 'asc'\n};\n\n// Mapping zwischen Tabellen-Spalten-IDs und Card-Metadaten-IDs\n// Tabellen-Spalte -> Card-Metadaten (kann Array sein fr 1:N Mapping)\nconst tableToCardMapping: Record<string, string[]> = {\n  'title': ['title'],\n  'status': ['status'],\n  'responsibleAndQualityControl': ['responsible', 'qualityControl'], // 1 Tabelle-Spalte -> 2 Card-Metadaten\n  'branch': ['branch'],\n  'dueDate': ['dueDate'],\n  'actions': [], // Keine Card-Entsprechung\n  'description': ['description'] // Nur in Cards verfgbar\n};\n\n// Reverse Mapping: Card-Metadaten -> Tabellen-Spalten\nconst cardToTableMapping: Record<string, string> = {\n  'title': 'title',\n  'status': 'status',\n  'responsible': 'responsibleAndQualityControl',\n  'qualityControl': 'responsibleAndQualityControl',\n  'branch': 'branch',\n  'dueDate': 'dueDate',\n  'description': 'description'\n};\n\n// Helfer-Funktion: Tabellen-Spalte ausgeblendet -> Card-Metadaten ausblenden\nconst getHiddenCardMetadata = (hiddenTableColumns: string[]): Set<string> => {\n  const hiddenCardMetadata = new Set<string>();\n  hiddenTableColumns.forEach(tableCol => {\n    const cardMetadata = tableToCardMapping[tableCol] || [];\n    cardMetadata.forEach(cardMeta => hiddenCardMetadata.add(cardMeta));\n  });\n  return hiddenCardMetadata;\n};\n\n// Helfer-Funktion: Card-Metadaten zu Tabellen-Spalten konvertieren\nconst getCardMetadataFromColumnOrder = (columnOrder: string[]): string[] => {\n  const cardMetadata: string[] = [];\n  columnOrder.forEach(tableCol => {\n    const cardMeta = tableToCardMapping[tableCol];\n    if (cardMeta && cardMeta.length > 0) {\n      cardMetadata.push(...cardMeta);\n    }\n  });\n  // Beschreibung hinzufgen, wenn nicht schon vorhanden\n  if (!cardMetadata.includes('description')) {\n    cardMetadata.push('description');\n  }\n  return cardMetadata;\n};\n\nconst Worktracker: React.FC = () => {\n    const { t } = useTranslation();\n    const { user } = useAuth();\n    const { hasPermission } = usePermissions();\n    const location = useLocation();\n    \n    // Definiere die verfgbaren Spalten fr die Tabelle (dynamisch aus bersetzungen)\n    const availableColumns = useMemo(() => [\n        { id: 'title', label: t('tasks.columns.title'), shortLabel: t('tasks.columns.title') },\n        { id: 'status', label: t('tasks.columns.status'), shortLabel: t('tasks.columns.status') },\n        { id: 'responsibleAndQualityControl', label: t('tasks.columns.responsibleAndQualityControl'), shortLabel: t('tasks.columns.responsibleAndQualityControl').split('/')[0] },\n        { id: 'branch', label: t('tasks.columns.branch'), shortLabel: t('tasks.columns.branch').substring(0, 5) },\n        { id: 'dueDate', label: t('tasks.columns.dueDate'), shortLabel: t('tasks.columns.dueDate').substring(0, 5) },\n        { id: 'actions', label: t('tasks.columns.actions'), shortLabel: t('common.actions').substring(0, 3) },\n    ], [t]);\n\n    // Definiere zustzliche Spalten, die nur fr den Filter verfgbar sind, nicht fr die Tabellenanzeige\n    const filterOnlyColumns = useMemo(() => [\n        { id: 'responsible', label: t('tasks.columns.responsible'), shortLabel: t('tasks.columns.responsible').substring(0, 3) },\n        { id: 'qualityControl', label: t('tasks.columns.qualityControl'), shortLabel: t('tasks.columns.qualityControl').substring(0, 2) },\n    ], [t]);\n    \n    // Status-bersetzungen (verwende zentrale Utils mit bersetzungsuntersttzung)\n    // WICHTIG: Funktionalitt bleibt identisch - nur Code-Duplikation entfernt!\n    const getStatusLabel = (status: Task['status']): string => {\n        return getStatusText(status, 'task', t);\n    };\n    const [tasks, setTasks] = useState<Task[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n    const [searchTerm, setSearchTerm] = useState('');\n    const [statusFilter, setStatusFilter] = useState<Task['status'] | 'all'>('all');\n    \n    // State fr erweiterte Filterbedingungen\n    const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n    const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n    \n    // Filter State Management (Controlled Mode)\n    const [activeFilterName, setActiveFilterName] = useState<string>('');\n    const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n    \n    const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n    const [sortConfig, setSortConfig] = useState<SortConfig>({ key: 'dueDate', direction: 'asc' });\n    const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n    const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n    const [selectedTask, setSelectedTask] = useState<Task | null>(null);\n    const [copiedTask, setCopiedTask] = useState<Task | null>(null);\n\n    // Tabellen-Einstellungen laden\n    const {\n        settings,\n        isLoading: isLoadingSettings,\n        updateColumnOrder,\n        updateHiddenColumns,\n        toggleColumnVisibility,\n        isColumnVisible,\n        updateViewMode\n    } = useTableSettings('worktracker_tasks', {\n        defaultColumnOrder,\n        defaultHiddenColumns: [],\n        defaultViewMode: 'cards'\n    });\n\n    const [draggedColumn, setDraggedColumn] = useState<string | null>(null);\n    const [dragOverColumn, setDragOverColumn] = useState<string | null>(null);\n    const [displayLimit, setDisplayLimit] = useState<number>(10);\n\n    // View-Mode aus Settings laden\n    const viewMode = settings.viewMode || 'cards';\n    \n    // Lokale Sortierrichtungen fr Cards (nicht persistiert)\n    const [cardSortDirections, setCardSortDirections] = useState<Record<string, 'asc' | 'desc'>>(() => {\n        return defaultCardSortDirections;\n    });\n\n    // Abgeleitete Werte fr Card-Ansicht aus Tabellen-Settings\n    // Card-Metadaten-Reihenfolge aus columnOrder ableiten\n    const cardMetadataOrder = useMemo(() => {\n        return getCardMetadataFromColumnOrder(settings.columnOrder || defaultColumnOrder);\n    }, [settings.columnOrder]);\n\n    // Versteckte Card-Metadaten aus hiddenColumns ableiten\n    const hiddenCardMetadata = useMemo(() => {\n        return getHiddenCardMetadata(settings.hiddenColumns || []);\n    }, [settings.hiddenColumns]);\n\n    // Sichtbare Card-Metadaten (alle Card-Metadaten minus versteckte)\n    const visibleCardMetadata = useMemo(() => {\n        return new Set(cardMetadataOrder.filter(meta => !hiddenCardMetadata.has(meta)));\n    }, [cardMetadataOrder, hiddenCardMetadata]);\n\n    // CSS-Klasse fr Container-Box setzen (fr CSS-basierte Schattierungs-Entfernung)\n    useEffect(() => {\n        const wrappers = document.querySelectorAll('.dashboard-tasks-wrapper');\n        wrappers.forEach(wrapper => {\n            if (viewMode === 'cards') {\n                wrapper.classList.add('cards-mode');\n            } else {\n                wrapper.classList.remove('cards-mode');\n            }\n        });\n    }, [viewMode]);\n\n    // Ref um sicherzustellen, dass loadTasks nur einmal beim Mount aufgerufen wird\n    // (auch bei React.StrictMode doppelter Ausfhrung)\n    const hasLoadedRef = useRef(false);\n\n    // Funktion zum Neu Laden der Tasks\n    const loadTasks = async () => {\n        try {\n            setLoading(true);\n            const response = await axiosInstance.get(API_ENDPOINTS.TASKS.BASE);\n            setTasks(response.data);\n            setError(null);\n        } catch (error) {\n            console.error('Fehler beim Laden der Tasks:', error);\n            setError(t('worktime.messages.tasksLoadError'));\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    // Lade Tasks beim ersten Render (nur einmal, auch bei React.StrictMode)\n    useEffect(() => {\n        if (!hasLoadedRef.current) {\n            hasLoadedRef.current = true;\n            loadTasks();\n        }\n    }, []);\n\n    // URL-Parameter fr editTask verarbeiten\n    useEffect(() => {\n        if (tasks.length > 0) {\n            const queryParams = new URLSearchParams(location.search);\n            const editTaskId = queryParams.get('editTask');\n            \n            if (editTaskId) {\n                const taskId = parseInt(editTaskId, 10);\n                if (!isNaN(taskId)) {\n                    const task = tasks.find(t => t.id === taskId);\n                    if (task) {\n                        setSelectedTask(task);\n                        setIsEditModalOpen(true);\n                    }\n                }\n            }\n        }\n    }, [tasks, location.search]);\n\n    // Initialer Default-Filter setzen (Controlled Mode)\n    useEffect(() => {\n        const setInitialFilter = async () => {\n            try {\n                const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(TODOS_TABLE_ID));\n                const filters = response.data;\n                \n                const aktuellFilter = filters.find((filter: any) => filter.name === 'Aktuell');\n                if (aktuellFilter) {\n                    setActiveFilterName('Aktuell');\n                    setSelectedFilterId(aktuellFilter.id);\n                    applyFilterConditions(aktuellFilter.conditions, aktuellFilter.operators);\n                }\n            } catch (error) {\n                console.error('Fehler beim Setzen des initialen Filters:', error);\n            }\n        };\n\n        setInitialFilter();\n    }, []);\n\n    // Standard-Filter erstellen und speichern\n    useEffect(() => {\n        const createStandardFilters = async () => {\n            try {\n                const token = localStorage.getItem('token');\n                \n                if (!token) {\n                    console.error('Nicht authentifiziert');\n                    return;\n                }\n\n                // Prfen, ob die Standard-Filter bereits existieren\n                const existingFiltersResponse = await axiosInstance.get(\n                    `${API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(TODOS_TABLE_ID)}`,\n                    {\n                        headers: {\n                            Authorization: `Bearer ${token}`\n                        }\n                    }\n                );\n\n                const existingFilters = existingFiltersResponse.data || [];\n                const archivFilterExists = existingFilters.some(filter => filter.name === 'Archiv');\n                const aktuellFilterExists = existingFilters.some(filter => filter.name === 'Aktuell');\n\n                // Erstelle \"Archiv\"-Filter, wenn er noch nicht existiert\n                if (!archivFilterExists) {\n                    const archivFilter = {\n                        tableId: TODOS_TABLE_ID,\n                        name: 'Archiv',\n                        conditions: [\n                            { column: 'status', operator: 'equals', value: 'done' }\n                        ],\n                        operators: []\n                    };\n\n                    await axiosInstance.post(\n                        `${API_ENDPOINTS.SAVED_FILTERS.BASE}`,\n                        archivFilter,\n                        {\n                            headers: {\n                                Authorization: `Bearer ${token}`\n                            }\n                        }\n                    );\n                }\n\n                // Erstelle \"Aktuell\"-Filter, wenn er noch nicht existiert\n                if (!aktuellFilterExists) {\n                    const aktuellFilter = {\n                        tableId: TODOS_TABLE_ID,\n                        name: 'Aktuell',\n                        conditions: [\n                            { column: 'status', operator: 'notEquals', value: 'done' }\n                        ],\n                        operators: []\n                    };\n\n                    await axiosInstance.post(\n                        `${API_ENDPOINTS.SAVED_FILTERS.BASE}`,\n                        aktuellFilter,\n                        {\n                            headers: {\n                                Authorization: `Bearer ${token}`\n                            }\n                        }\n                    );\n                }\n            } catch (error) {\n                console.error('Fehler beim Erstellen der Standard-Filter:', error);\n            }\n        };\n\n        createStandardFilters();\n    }, []);\n\n    // getStatusColor und getStatusText werden jetzt von statusUtils verwendet (siehe getStatusLabel oben)\n\n    const handleStatusChange = async (taskId: number, newStatus: Task['status']) => {\n        try {\n            // Optimistisches Update: State sofort aktualisieren\n            setTasks(prevTasks => \n                prevTasks.map(task => \n                    task.id === taskId ? { ...task, status: newStatus } : task\n                )\n            );\n\n            await axiosInstance.patch(API_ENDPOINTS.TASKS.BY_ID(taskId), { status: newStatus });\n            toast.success(t('worktime.messages.taskUpdated'));\n        } catch (error) {\n            // Rollback bei Fehler: Vollstndiges Reload\n            console.error('Fehler beim Aktualisieren des Status:', error);\n            loadTasks();\n                toast.error(t('worktime.messages.taskUpdatedError'));\n        }\n    };\n\n    const handleEditClick = (task: Task) => {\n        setSelectedTask(task);\n        setIsEditModalOpen(true);\n    };\n\n    const isResponsibleForTask = (task: Task) => {\n        if (task.responsible) {\n            return task.responsible.id === user?.id;\n        } else if (task.role) {\n            // Prfe, ob der Benutzer die angegebene Rolle hat\n            return user?.roles?.some(userRole => userRole.role?.id === task.role?.id) || false;\n        }\n        return false;\n    };\n\n    const isQualityControlForTask = (task: Task) => {\n        return task.qualityControl?.id === user?.id;\n    };\n\n    const handleSort = (key: SortConfig['key']) => {\n        setSortConfig(current => ({\n            key,\n            direction: current.key === key && current.direction === 'asc' ? 'desc' : 'asc'\n        }));\n    };\n\n    const renderStatusButtons = (task: Task): JSX.Element[] => {\n        const buttons: JSX.Element[] = [];\n        \n        // Prfe, ob der Benutzer Schreibberechtigungen fr Tasks hat\n        const canModifyTasks = hasPermission('tasks', 'write', 'table');\n        \n        if (!canModifyTasks) return buttons;\n        \n        // Zurck-Button (links)\n        if (task.status === 'in_progress' && isResponsibleForTask(task)) {\n            buttons.push(\n                <button\n                    key=\"back\"\n                    onClick={() => handleStatusChange(task.id, 'open')}\n                    className=\"p-2.5 bg-red-600 dark:bg-red-500 text-white rounded hover:bg-red-700 dark:hover:bg-red-600\"\n                    title={t('tasks.actions.backToOpen')}\n                >\n                    <ArrowLeftIcon className=\"h-7 w-7\" />\n                </button>\n            );\n        } else if (task.status === 'quality_control' && isResponsibleForTask(task)) {\n            buttons.push(\n                <button\n                    key=\"back\"\n                    onClick={() => handleStatusChange(task.id, 'in_progress')}\n                    className=\"p-2 bg-red-600 dark:bg-red-500 text-white rounded hover:bg-red-700 dark:hover:bg-red-600\"\n                    title={t('tasks.actions.backToInProgress')}\n                >\n                    <ArrowLeftIcon className=\"h-6 w-6\" />\n                </button>\n            );\n        } else if (task.status === 'done' && isQualityControlForTask(task)) {\n            buttons.push(\n                <button\n                    key=\"back\"\n                    onClick={() => handleStatusChange(task.id, 'quality_control')}\n                    className=\"p-2 bg-red-600 dark:bg-red-500 text-white rounded hover:bg-red-700 dark:hover:bg-red-600\"\n                    title={t('tasks.actions.backToQualityControl')}\n                >\n                    <ArrowLeftIcon className=\"h-6 w-6\" />\n                </button>\n            );\n        }\n\n        // Weiter-Button (rechts)\n        if (task.status === 'open' && isResponsibleForTask(task)) {\n            buttons.push(\n                <button\n                    key=\"forward\"\n                    onClick={() => handleStatusChange(task.id, 'in_progress')}\n                    className=\"p-2.5 bg-blue-600 dark:bg-blue-500 text-white rounded hover:bg-blue-700 dark:hover:bg-blue-600\"\n                    title={t('tasks.actions.setInProgress')}\n                >\n                    <ArrowRightIcon className=\"h-7 w-7\" />\n                </button>\n            );\n        } else if (task.status === 'in_progress' && isResponsibleForTask(task)) {\n            buttons.push(\n                <button\n                    key=\"forward\"\n                    onClick={() => handleStatusChange(task.id, 'quality_control')}\n                    className=\"p-2.5 bg-purple-600 dark:bg-purple-500 text-white rounded hover:bg-purple-700 dark:hover:bg-purple-600\"\n                    title={t('tasks.actions.setQualityControl')}\n                >\n                    <ArrowRightIcon className=\"h-7 w-7\" />\n                </button>\n            );\n        } else if (task.status === 'quality_control' && isQualityControlForTask(task)) {\n            buttons.push(\n                <button\n                    key=\"forward\"\n                    onClick={() => handleStatusChange(task.id, 'done')}\n                    className=\"p-2.5 bg-green-600 dark:bg-green-500 text-white rounded hover:bg-green-700 dark:hover:bg-green-600\"\n                    title={t('tasks.actions.markDone')}\n                >\n                    <ArrowRightIcon className=\"h-7 w-7\" />\n                </button>\n            );\n        }\n\n        return buttons;\n    };\n\n    const getActiveFilterCount = () => {\n        return filterConditions.length;\n    };\n\n    const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n        setFilterConditions(conditions);\n        setFilterLogicalOperators(operators);\n    };\n    \n    const resetFilterConditions = () => {\n        setFilterConditions([]);\n        setFilterLogicalOperators([]);\n        setActiveFilterName('');\n        setSelectedFilterId(null);\n    };\n    \n    // Filter Change Handler (Controlled Mode)\n    const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n        setActiveFilterName(name);\n        setSelectedFilterId(id);\n        applyFilterConditions(conditions, operators);\n    };\n\n    const getStatusPriority = (status: Task['status']): number => {\n        switch (status) {\n            case 'open': return 1;\n            case 'in_progress': return 2;\n            case 'improval': return 3;\n            case 'quality_control': return 4;\n            case 'done': return 5;\n            default: return 99; // Fallback fr unbekannte Status\n        }\n    };\n\n    const filteredAndSortedTasks = useMemo(() => {\n        return tasks\n            .filter(task => {\n                // Globale Suchfunktion\n                if (searchTerm) {\n                    const searchLower = searchTerm.toLowerCase();\n                    const matchesSearch = \n                        task.title.toLowerCase().includes(searchLower) ||\n                        (task.description && task.description.toLowerCase().includes(searchLower)) ||\n                        (task.responsible ? `${task.responsible.firstName} ${task.responsible.lastName}`.toLowerCase().includes(searchLower) : false) ||\n                        (task.role ? task.role.name.toLowerCase().includes(searchLower) : false) ||\n                        (task.qualityControl && `${task.qualityControl.firstName} ${task.qualityControl.lastName}`.toLowerCase().includes(searchLower)) ||\n                        task.branch.name.toLowerCase().includes(searchLower);\n                    \n                    if (!matchesSearch) return false;\n                }\n                \n                // Wenn erweiterte Filterbedingungen definiert sind, wende diese an\n                if (filterConditions.length > 0) {\n                    // Implementiere die logische Verknpfung der Bedingungen (UND/ODER)\n                    let result = filterConditions.length > 0;\n                    \n                    for (let i = 0; i < filterConditions.length; i++) {\n                        const condition = filterConditions[i];\n                        let conditionMet = false;\n                        \n                        switch (condition.column) {\n                            case 'title':\n                                if (condition.operator === 'equals') {\n                                    conditionMet = task.title === condition.value;\n                                } else if (condition.operator === 'contains') {\n                                    conditionMet = task.title.toLowerCase().includes((condition.value as string || '').toLowerCase());\n                                } else if (condition.operator === 'startsWith') {\n                                    conditionMet = task.title.toLowerCase().startsWith((condition.value as string || '').toLowerCase());\n                                } else if (condition.operator === 'endsWith') {\n                                    conditionMet = task.title.toLowerCase().endsWith((condition.value as string || '').toLowerCase());\n                                }\n                                break;\n                            \n                            case 'status':\n                                if (condition.operator === 'equals') {\n                                    conditionMet = task.status === condition.value;\n                                } else if (condition.operator === 'notEquals') {\n                                    conditionMet = task.status !== condition.value;\n                                }\n                                break;\n                            \n                            case 'responsible':\n                                const responsibleValue = condition.value as string || '';\n                                \n                                if (responsibleValue.startsWith('user-')) {\n                                    // Vergleiche mit Benutzer-ID\n                                    const userId = parseInt(responsibleValue.replace('user-', ''));\n                                    conditionMet = !!task.responsible && task.responsible.id === userId;\n                                } else if (responsibleValue.startsWith('role-')) {\n                                    // Vergleiche mit Rollen-ID\n                                    const roleId = parseInt(responsibleValue.replace('role-', ''));\n                                    conditionMet = !!task.role && task.role.id === roleId;\n                                } else if (responsibleValue === '') {\n                                    // Leerer Wert entspricht allen\n                                    conditionMet = true;\n                                } else if (condition.operator === 'equals') {\n                                    // Fallback fr Texteingabe (alte Implementierung)\n                                    const responsibleName = task.responsible\n                                        ? `${task.responsible.firstName} ${task.responsible.lastName}`.toLowerCase()\n                                        : task.role\n                                            ? task.role.name.toLowerCase()\n                                            : '';\n                                    conditionMet = responsibleName === responsibleValue.toLowerCase();\n                                } else if (condition.operator === 'contains') {\n                                    // Fallback fr Texteingabe (alte Implementierung)\n                                    const responsibleName = task.responsible\n                                        ? `${task.responsible.firstName} ${task.responsible.lastName}`.toLowerCase()\n                                        : task.role\n                                            ? task.role.name.toLowerCase()\n                                            : '';\n                                    conditionMet = responsibleName.includes(responsibleValue.toLowerCase());\n                                }\n                                break;\n                            \n                            case 'qualityControl':\n                                const qualityControlValue = condition.value as string || '';\n                                \n                                if (qualityControlValue.startsWith('user-')) {\n                                    // Vergleiche mit Benutzer-ID\n                                    const userId = parseInt(qualityControlValue.replace('user-', ''));\n                                    conditionMet = !!task.qualityControl && task.qualityControl.id === userId;\n                                } else if (qualityControlValue === '') {\n                                    // Leerer Wert entspricht allen\n                                    conditionMet = true;\n                                } else if (condition.operator === 'equals') {\n                                    // Fallback fr Texteingabe (alte Implementierung)\n                                    const qualityControlName = task.qualityControl\n                                        ? `${task.qualityControl.firstName} ${task.qualityControl.lastName}`.toLowerCase()\n                                        : '';\n                                    conditionMet = qualityControlName === qualityControlValue.toLowerCase();\n                                } else if (condition.operator === 'contains') {\n                                    // Fallback fr Texteingabe (alte Implementierung)\n                                    const qualityControlName = task.qualityControl\n                                        ? `${task.qualityControl.firstName} ${task.qualityControl.lastName}`.toLowerCase()\n                                        : '';\n                                    conditionMet = qualityControlName.includes(qualityControlValue.toLowerCase());\n                                }\n                                break;\n                            \n                            // Fr den kombinierten Filter responsibleAndQualityControl\n                            case 'responsibleAndQualityControl':\n                                const combinedValue = condition.value as string || '';\n                                \n                                if (combinedValue.startsWith('user-')) {\n                                    // Vergleiche mit Benutzer-ID fr beide Felder\n                                    const userId = parseInt(combinedValue.replace('user-', ''));\n                                    conditionMet = \n                                        (!!task.responsible && task.responsible.id === userId) || \n                                        (!!task.qualityControl && task.qualityControl.id === userId);\n                                } else if (combinedValue.startsWith('role-')) {\n                                    // Bei Rollen nur mit Verantwortlichem vergleichen\n                                    const roleId = parseInt(combinedValue.replace('role-', ''));\n                                    conditionMet = !!task.role && task.role.id === roleId;\n                                } else if (combinedValue === '') {\n                                    // Leerer Wert entspricht allen\n                                    conditionMet = true;\n                                } else if (condition.operator === 'equals') {\n                                    // Fallback fr Texteingabe (alte Implementierung)\n                                    const responsibleName = task.responsible\n                                        ? `${task.responsible.firstName} ${task.responsible.lastName}`.toLowerCase()\n                                        : task.role\n                                            ? task.role.name.toLowerCase()\n                                            : '';\n                                    const qualityControlName = task.qualityControl\n                                        ? `${task.qualityControl.firstName} ${task.qualityControl.lastName}`.toLowerCase()\n                                        : '';\n                                    conditionMet = \n                                        responsibleName === combinedValue.toLowerCase() || \n                                        qualityControlName === combinedValue.toLowerCase();\n                                } else if (condition.operator === 'contains') {\n                                    // Fallback fr Texteingabe (alte Implementierung)\n                                    const responsibleName = task.responsible\n                                        ? `${task.responsible.firstName} ${task.responsible.lastName}`.toLowerCase()\n                                        : task.role\n                                            ? task.role.name.toLowerCase()\n                                            : '';\n                                    const qualityControlName = task.qualityControl\n                                        ? `${task.qualityControl.firstName} ${task.qualityControl.lastName}`.toLowerCase()\n                                        : '';\n                                    conditionMet = \n                                        responsibleName.includes(combinedValue.toLowerCase()) || \n                                        qualityControlName.includes(combinedValue.toLowerCase());\n                                }\n                                break;\n                            \n                            case 'branch':\n                                const branchName = task.branch.name.toLowerCase();\n                                \n                                if (condition.operator === 'equals') {\n                                    conditionMet = branchName === (condition.value as string || '').toLowerCase();\n                                } else if (condition.operator === 'contains') {\n                                    conditionMet = branchName.includes((condition.value as string || '').toLowerCase());\n                                }\n                                break;\n                            \n                            case 'dueDate':\n                                if (!task.dueDate) {\n                                    conditionMet = false;\n                                    break;\n                                }\n                                \n                                const taskDate = new Date(task.dueDate);\n                                \n                                if (condition.operator === 'equals') {\n                                    const filterDate = new Date(condition.value as string);\n                                    conditionMet = taskDate.toDateString() === filterDate.toDateString();\n                                } else if (condition.operator === 'before') {\n                                    const filterDate = new Date(condition.value as string);\n                                    conditionMet = taskDate < filterDate;\n                                } else if (condition.operator === 'after') {\n                                    const filterDate = new Date(condition.value as string);\n                                    conditionMet = taskDate > filterDate;\n                                }\n                                break;\n                        }\n                        \n                        // Verknpfe das Ergebnis dieser Bedingung mit dem Gesamtergebnis\n                        if (i === 0) {\n                            result = conditionMet;\n                        } else {\n                            const operator = filterLogicalOperators[i - 1];\n                            result = operator === 'AND' ? (result && conditionMet) : (result || conditionMet);\n                        }\n                    }\n                    \n                    if (!result) return false;\n                }\n                \n                return true;\n            })\n            .sort((a, b) => {\n                // Multi-Sortierung fr Cards-Mode\n                if (viewMode === 'cards') {\n                    const sortableColumns = cardMetadataOrder.filter(colId => visibleCardMetadata.has(colId));\n                    \n                    for (const columnId of sortableColumns) {\n                        const direction = cardSortDirections[columnId] || 'asc';\n                        let valueA: any, valueB: any;\n                        \n                        switch (columnId) {\n                            case 'title':\n                                valueA = a.title.toLowerCase();\n                                valueB = b.title.toLowerCase();\n                                break;\n                            case 'status':\n                                valueA = getStatusPriority(a.status);\n                                valueB = getStatusPriority(b.status);\n                                break;\n                            case 'responsible':\n                                valueA = a.responsible ? `${a.responsible.firstName} ${a.responsible.lastName}`.toLowerCase() : (a.role ? `Rolle: ${a.role.name}`.toLowerCase() : '');\n                                valueB = b.responsible ? `${b.responsible.firstName} ${b.responsible.lastName}`.toLowerCase() : (b.role ? `Rolle: ${b.role.name}`.toLowerCase() : '');\n                                break;\n                            case 'qualityControl':\n                                valueA = a.qualityControl ? `${a.qualityControl.firstName} ${a.qualityControl.lastName}`.toLowerCase() : '';\n                                valueB = b.qualityControl ? `${b.qualityControl.firstName} ${b.qualityControl.lastName}`.toLowerCase() : '';\n                                break;\n                            case 'branch':\n                                valueA = a.branch.name.toLowerCase();\n                                valueB = b.branch.name.toLowerCase();\n                                break;\n                            case 'dueDate':\n                                valueA = a.dueDate ? new Date(a.dueDate).getTime() : Number.MAX_SAFE_INTEGER;\n                                valueB = b.dueDate ? new Date(b.dueDate).getTime() : Number.MAX_SAFE_INTEGER;\n                                break;\n                            case 'description':\n                                valueA = (a.description || '').toLowerCase();\n                                valueB = (b.description || '').toLowerCase();\n                                break;\n                            default:\n                                continue; // berspringe unbekannte Spalten\n                        }\n                        \n                        // Vergleich basierend auf Typ\n                        let comparison = 0;\n                        if (typeof valueA === 'number' && typeof valueB === 'number') {\n                            comparison = valueA - valueB;\n                        } else {\n                            comparison = String(valueA).localeCompare(String(valueB));\n                        }\n                        \n                        // Sortierrichtung anwenden\n                        if (direction === 'desc') {\n                            comparison = -comparison;\n                        }\n                        \n                        // Wenn unterschiedlich, gebe Vergleich zurck\n                        if (comparison !== 0) {\n                            return comparison;\n                        }\n                    }\n                    return 0; // Alle Spalten identisch\n                } else {\n                    // Tabellen-Mode: Einzel-Sortierung wie bisher\n                    if (sortConfig.key) {\n                        let valueA, valueB;\n                        \n                        // Extrahiere die Werte basierend auf dem Sortierungsschlssel\n                        switch (sortConfig.key) {\n                            case 'title':\n                                valueA = a.title;\n                                valueB = b.title;\n                                break;\n                            case 'status':\n                                valueA = getStatusPriority(a.status);\n                                valueB = getStatusPriority(b.status);\n                                break;\n                            case 'responsible.firstName':\n                                valueA = a.responsible ? `${a.responsible.firstName} ${a.responsible.lastName}` : (a.role ? `Rolle: ${a.role.name}` : '');\n                                valueB = b.responsible ? `${b.responsible.firstName} ${b.responsible.lastName}` : (b.role ? `Rolle: ${b.role.name}` : '');\n                                break;\n                            case 'qualityControl.firstName':\n                                valueA = a.qualityControl ? `${a.qualityControl.firstName} ${a.qualityControl.lastName}` : '';\n                                valueB = b.qualityControl ? `${b.qualityControl.firstName} ${b.qualityControl.lastName}` : '';\n                                break;\n                            case 'branch.name':\n                                valueA = a.branch.name;\n                                valueB = b.branch.name;\n                                break;\n                            case 'dueDate':\n                                valueA = a.dueDate ? new Date(a.dueDate).getTime() : Number.MAX_SAFE_INTEGER;\n                                valueB = b.dueDate ? new Date(b.dueDate).getTime() : Number.MAX_SAFE_INTEGER;\n                                break;\n                            default:\n                                valueA = a[sortConfig.key as keyof Task];\n                                valueB = b[sortConfig.key as keyof Task];\n                        }\n                        \n                        // Vergleiche die Werte basierend auf der Sortierrichtung\n                        if (typeof valueA === 'number' && typeof valueB === 'number') {\n                            return sortConfig.direction === 'asc' ? valueA - valueB : valueB - valueA;\n                        } else {\n                            const comparison = String(valueA).localeCompare(String(valueB));\n                            return sortConfig.direction === 'asc' ? comparison : -comparison;\n                        }\n                    }\n                    // Standardsortierung nur anwenden, wenn keine benutzerdefinierte Sortierung aktiv ist\n                    // Primre Sortierung nach Flligkeitsdatum\n                    const aDate = a.dueDate ? new Date(a.dueDate).getTime() : Number.MAX_SAFE_INTEGER;\n                    const bDate = b.dueDate ? new Date(b.dueDate).getTime() : Number.MAX_SAFE_INTEGER;\n                    \n                    if (aDate !== bDate) {\n                        return aDate - bDate; // Aufsteigend nach Datum\n                    }\n                    \n                    // Sekundre Sortierung nach Status-Prioritt\n                    const aStatusPrio = getStatusPriority(a.status);\n                    const bStatusPrio = getStatusPriority(b.status);\n                    \n                    if (aStatusPrio !== bStatusPrio) {\n                        return aStatusPrio - bStatusPrio; // Aufsteigend nach Prioritt\n                    }\n                    \n                    // Tertire Sortierung nach Titel\n                    return a.title.localeCompare(b.title);\n                }\n            });\n    }, [tasks, searchTerm, sortConfig, getStatusPriority, filterConditions, filterLogicalOperators, viewMode, cardMetadataOrder, visibleCardMetadata, cardSortDirections]);\n\n    // Handler fr das Verschieben von Spalten per Drag & Drop\n    const handleMoveColumn = (dragIndex: number, hoverIndex: number) => {\n        // Neue Spaltenreihenfolge erstellen\n        const newColumnOrder = [...settings.columnOrder];\n        const draggedColumn = newColumnOrder[dragIndex];\n        \n        // Spalten neu anordnen\n        newColumnOrder.splice(dragIndex, 1); // Entferne die gezogene Spalte\n        newColumnOrder.splice(hoverIndex, 0, draggedColumn); // Fge sie an der neuen Position ein\n        \n        // Aktualisiere die Spaltenreihenfolge\n        updateColumnOrder(newColumnOrder);\n    };\n\n    // Handler fr Drag & Drop direkt in der Tabelle\n    const handleDragStart = (columnId: string) => {\n        setDraggedColumn(columnId);\n    };\n\n    const handleDragOver = (e: React.DragEvent, columnId: string) => {\n        e.preventDefault();\n        if (draggedColumn && draggedColumn !== columnId) {\n            setDragOverColumn(columnId);\n        }\n    };\n\n    const handleDrop = (e: React.DragEvent, columnId: string) => {\n        e.preventDefault();\n        if (draggedColumn && draggedColumn !== columnId) {\n            const dragIndex = settings.columnOrder.indexOf(draggedColumn);\n            const hoverIndex = settings.columnOrder.indexOf(columnId);\n            \n            if (dragIndex > -1 && hoverIndex > -1) {\n                handleMoveColumn(dragIndex, hoverIndex);\n            }\n        }\n        setDraggedColumn(null);\n        setDragOverColumn(null);\n    };\n\n    const handleDragEnd = () => {\n        setDraggedColumn(null);\n        setDragOverColumn(null);\n    };\n\n    // Filtern und sortieren der Spalten gem den Benutzereinstellungen\n    const visibleColumnIds = settings.columnOrder.filter(id => isColumnVisible(id));\n\n    // Funktion zum Kopieren eines Tasks\n    const handleCopyTask = async (task: Task) => {\n        try {\n            // Kopie des Tasks erstellen mit angepasstem Titel\n            const copiedTaskData = {\n                title: `${task.title}-Kopie`,\n                description: task.description,\n                status: 'open', // Immer als \"offen\" erstellen\n                responsibleId: task.responsible ? task.responsible.id : null,\n                roleId: task.role ? task.role.id : null,\n                qualityControlId: task.qualityControl?.id || null,\n                branchId: task.branch.id,\n                dueDate: task.dueDate\n            };\n\n            // Task erstellen\n            const response = await axiosInstance.post(\n                API_ENDPOINTS.TASKS.BASE,\n                copiedTaskData\n            );\n\n            // Optimistisches Update: Neuen Task zur Liste hinzufgen statt vollstndigem Reload\n            setTasks(prevTasks => [response.data, ...prevTasks]);\n            \n            // Bearbeitungsmodal fr den kopierten Task ffnen\n            setSelectedTask(response.data);\n            setIsEditModalOpen(true);\n            \n        } catch (err) {\n            console.error('Fehler beim Kopieren des Tasks:', err);\n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        }\n    };\n\n    const handleDeleteTask = async (taskId: number) => {\n        if (window.confirm(t('worktime.messages.taskDeleteConfirm'))) {\n            // Optimistisches Update: Task sofort aus Liste entfernen\n            setTasks(prevTasks => prevTasks.filter(task => task.id !== taskId));\n\n            try {\n                await axiosInstance.delete(API_ENDPOINTS.TASKS.BY_ID(taskId));\n                toast.success(t('worktime.messages.taskDeleted'));\n            } catch (error) {\n                // Rollback bei Fehler: Vollstndiges Reload\n                console.error('Fehler beim Lschen der Aufgabe:', error);\n                loadTasks();\n                toast.error(t('worktime.messages.taskDeletedError'));\n            }\n        }\n    };\n\n    const handleSaveTask = async (task: Task) => {\n        try {\n            await axiosInstance.put(API_ENDPOINTS.TASKS.BY_ID(task.id), task);\n            // Aktualisiere die Aufgabenliste\n            loadTasks();\n            setIsEditModalOpen(false);\n            setSelectedTask(null);\n            toast.success(t('worktime.messages.taskUpdated'));\n        } catch (error) {\n            console.error('Fehler beim Speichern der Aufgabe:', error);\n                toast.error(t('worktime.messages.taskSaveError'));\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen\">\n            <div className=\"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6\">\n                {/* Neu angeordnete UI-Elemente in einer Zeile */}\n                <div className=\"w-full mb-4\">\n                    {/* Auf mobilen Gerten wird diese Reihenfolge angezeigt - Tasks oben, Zeiterfassung unten */}\n                    <div className=\"block sm:hidden w-full\">\n                    {/* Tasks */}\n                        <div className=\"dashboard-tasks-wrapper bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 w-full mb-20\">\n                            <div className=\"flex items-center justify-between\">\n                                {/* Linke Seite: \"Neuer Task\"-Button */}\n                                <div className=\"flex items-center\">\n                                    {hasPermission('tasks', 'write', 'table') && (\n                                        <button \n                                            onClick={() => setIsCreateModalOpen(true)}\n                                            className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                                            style={{ width: '30.19px', height: '30.19px' }}\n                                            title={t('tasks.createTask')}\n                                            aria-label={t('tasks.createTask')}\n                                        >\n                                            <PlusIcon className=\"h-4 w-4\" />\n                                        </button>\n                                    )}\n                                </div>\n                                \n                                {/* Mitte: Titel */}\n                                <div className=\"flex items-center\">\n                                    <CheckCircleIcon className=\"h-6 w-6 mr-2 dark:text-white\" />\n                                    <h2 className=\"text-xl font-semibold dark:text-white\">{t('tasks.title')}</h2>\n                                </div>\n                                \n                                {/* Rechte Seite: Suchfeld, Filter-Button, Status-Filter, Spalten-Konfiguration */}\n                                <div className=\"flex items-center gap-1.5\">\n                                    <input\n                                        type=\"text\"\n                                        placeholder={t('common.search') + '...'}\n                                        className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n                                        value={searchTerm}\n                                        onChange={(e) => setSearchTerm(e.target.value)}\n                                    />\n                                    \n                                    {/* View-Mode Toggle */}\n                                    <button\n                                        className={`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                                            viewMode === 'cards' ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : ''\n                                        }`}\n                                        onClick={() => updateViewMode(viewMode === 'table' ? 'cards' : 'table')}\n                                        title={viewMode === 'table' ? t('common.viewAsCards') : t('common.viewAsTable')}\n                                    >\n                                        {viewMode === 'table' ? (\n                                            <Squares2X2Icon className=\"h-5 w-5\" />\n                                        ) : (\n                                            <TableCellsIcon className=\"h-5 w-5\" />\n                                        )}\n                                    </button>\n                                    \n                                    {/* Filter-Button */}\n                                    <button\n                                        className={`p-2 rounded-md ${getActiveFilterCount() > 0 ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'hover:bg-gray-100 dark:hover:bg-gray-700'} ml-1 relative`}\n                                        onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n                                        title={t('common.filter')}\n                                    >\n                                        <FunnelIcon className=\"h-5 w-5\" />\n                                        {getActiveFilterCount() > 0 && (\n                                            <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 text-white rounded-full text-xs flex items-center justify-center\">\n                                                {getActiveFilterCount()}\n                                            </span>\n                                        )}\n                                    </button>\n                                    \n                                    {/* Spalten-Konfiguration */}\n                                    <div className=\"ml-1\">\n                                        <TableColumnConfig \n                                            columns={viewMode === 'cards'\n                                                ? [\n                                                    { id: 'title', label: t('tasks.columns.title') },\n                                                    { id: 'status', label: t('tasks.columns.status') },\n                                                    { id: 'responsible', label: t('tasks.columns.responsible') },\n                                                    { id: 'qualityControl', label: t('tasks.columns.qualityControl') },\n                                                    { id: 'branch', label: t('tasks.columns.branch') },\n                                                    { id: 'dueDate', label: t('tasks.columns.dueDate') },\n                                                    { id: 'description', label: t('tasks.columns.description') }\n                                                ]\n                                                : availableColumns}\n                                            visibleColumns={viewMode === 'cards'\n                                                ? Array.from(visibleCardMetadata)\n                                                : visibleColumnIds}\n                                            columnOrder={viewMode === 'cards'\n                                                ? cardMetadataOrder\n                                                : settings.columnOrder}\n                                            onToggleColumnVisibility={(columnId) => {\n                                                if (viewMode === 'cards') {\n                                                    // Fr Cards: Mapping zurck zu Tabellen-Spalten\n                                                    const tableColumn = cardToTableMapping[columnId];\n                                                    if (tableColumn) {\n                                                        toggleColumnVisibility(tableColumn);\n                                                    }\n                                                } else {\n                                                    toggleColumnVisibility(columnId);\n                                                }\n                                            }}\n                                            onMoveColumn={viewMode === 'cards'\n                                                ? (dragIndex: number, hoverIndex: number) => {\n                                                    const newCardOrder = [...cardMetadataOrder];\n                                                    const dragged = newCardOrder[dragIndex];\n                                                    newCardOrder.splice(dragIndex, 1);\n                                                    newCardOrder.splice(hoverIndex, 0, dragged);\n                                                    \n                                                    // Konvertiere zurck zu Tabellen-Spalten-Reihenfolge\n                                                    const newTableOrder: string[] = [];\n                                                    const usedTableColumns = new Set<string>();\n                                                    \n                                                    newCardOrder.forEach(cardMeta => {\n                                                        const tableCol = cardToTableMapping[cardMeta];\n                                                        if (tableCol && !usedTableColumns.has(tableCol)) {\n                                                            usedTableColumns.add(tableCol);\n                                                            newTableOrder.push(tableCol);\n                                                        }\n                                                    });\n                                                    \n                                                    // Fge fehlende Tabellen-Spalten hinzu\n                                                    availableColumns.forEach(col => {\n                                                        if (!newTableOrder.includes(col.id) && col.id !== 'actions') {\n                                                            newTableOrder.push(col.id);\n                                                        }\n                                                    });\n                                                    \n                                                    updateColumnOrder(newTableOrder);\n                                                }\n                                                : handleMoveColumn}\n                                            sortDirections={viewMode === 'cards' ? cardSortDirections : undefined}\n                                            onSortDirectionChange={viewMode === 'cards'\n                                                ? (columnId: string, direction: 'asc' | 'desc') => {\n                                                    setCardSortDirections(prev => ({\n                                                        ...prev,\n                                                        [columnId]: direction\n                                                    }));\n                                                }\n                                                : undefined}\n                                            showSortDirection={viewMode === 'cards'}\n                                            buttonTitle={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n                                            modalTitle={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n                                            onClose={() => {}}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Filter-Pane */}\n                            {isFilterModalOpen && (\n                                <FilterPane\n                                    columns={[...availableColumns, ...filterOnlyColumns]}\n                                    onApply={applyFilterConditions}\n                                    onReset={resetFilterConditions}\n                                    savedConditions={filterConditions}\n                                    savedOperators={filterLogicalOperators}\n                                    tableId={TODOS_TABLE_ID}\n                                />\n                            )}\n                            \n                            {/* Gespeicherte Filter als Tags anzeigen */}\n                            <SavedFilterTags\n                                tableId={TODOS_TABLE_ID}\n                                onSelectFilter={applyFilterConditions}\n                                onReset={resetFilterConditions}\n                                activeFilterName={activeFilterName}\n                                selectedFilterId={selectedFilterId}\n                                onFilterChange={handleFilterChange}\n                                defaultFilterName=\"Aktuell\"\n                            />\n                            \n                            {/* Tabelle oder Cards */}\n                            {viewMode === 'table' ? (\n                                /* Tabellen-Ansicht */\n                                <div className=\"overflow-x-auto\">\n                                    <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n                                        <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                                            <tr>\n                                                {visibleColumnIds.map((columnId) => {\n                                                    const column = availableColumns.find(col => col.id === columnId);\n                                                    if (!column) return null;\n                                                    \n                                                    return (\n                                                        <th\n                                                            key={columnId}\n                                                            scope=\"col\"\n                                                            className={`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider ${columnId === dragOverColumn ? 'bg-blue-100 dark:bg-blue-800' : ''}`}\n                                                            draggable={true}\n                                                            onDragStart={() => handleDragStart(columnId)}\n                                                            onDragOver={(e) => handleDragOver(e, columnId)}\n                                                            onDrop={(e) => handleDrop(e, columnId)}\n                                                            onDragEnd={handleDragEnd}\n                                                        >\n                                                            <div className=\"flex items-center\">\n                                                                {window.innerWidth <= 640 ? column.shortLabel : column.label}\n                                                                {columnId !== 'actions' && (\n                                                                    <button \n                                                                        onClick={() => handleSort(columnId as keyof Task)}\n                                                                        className=\"ml-1 focus:outline-none\"\n                                                                    >\n                                                                        <ArrowsUpDownIcon className=\"h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                                                                    </button>\n                                                                )}\n                                                            </div>\n                                                        </th>\n                                                    );\n                                                })}\n                                            </tr>\n                                        </thead>\n                                        <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                                            {loading ? (\n                                                <tr>\n                                                    <td colSpan={visibleColumnIds.length} className=\"px-6 py-4 text-center\">\n                                                        <div className=\"flex justify-center\">\n                                                            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900 dark:border-gray-100\"></div>\n                                                        </div>\n                                                    </td>\n                                                </tr>\n                                            ) : error ? (\n                                                <tr>\n                                                    <td colSpan={visibleColumnIds.length} className=\"px-6 py-4 text-center text-red-600 dark:text-red-400\">\n                                                        {error}\n                                                    </td>\n                                                </tr>\n                                            ) : filteredAndSortedTasks.length === 0 ? (\n                                                <tr>\n                                                    <td colSpan={visibleColumnIds.length} className=\"px-6 py-4 text-center text-gray-500 dark:text-gray-400\">\n                                                        <div className=\"flex flex-col items-center justify-center gap-4\">\n                                                        <ClipboardDocumentListIcon className=\"h-10 w-10 text-gray-400 dark:text-gray-500\" />\n                                                        <div className=\"text-sm\">{t('tasks.noTasksFound')}</div>\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        ) : (\n                                            <>\n                                            {filteredAndSortedTasks.slice(0, displayLimit).map(task => {\n                                            const expiryStatus = getExpiryStatus(task.dueDate, 'todo', undefined, task.title, task.description);\n                                            const expiryColors = getExpiryColorClasses(expiryStatus);\n                                            \n                                            return (\n                                                <tr \n                                                    key={task.id} \n                                                    className={`hover:bg-gray-50 dark:hover:bg-gray-700 ${\n                                                        expiryStatus !== 'none' ? `${expiryColors.bgClass} ${expiryColors.borderClass} border-l-4` : ''\n                                                    }`}\n                                                >\n                                                    {visibleColumnIds.map(columnId => {\n                                                    switch (columnId) {\n                                                        case 'title':\n                                                            return (\n                                                                <td key={columnId} className=\"px-6 py-4\">\n                                                                    <div className=\"text-sm text-gray-900 dark:text-gray-200 break-words flex items-center\">\n                                                                        {task.title}\n                                                                            {task.description && (\n                                                                                <div className=\"ml-2 relative group\">\n                                                                                    <button \n                                                                                        className=\"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300\"\n                                                                                        title={t('tasks.showDescription')}\n                                                                                    >\n                                                                                        <InformationCircleIcon className=\"h-5 w-5\" />\n                                                                                    </button>\n                                                                                    <div className=\"hidden group-hover:block absolute left-0 mt-2 p-2 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 shadow-lg rounded-md border border-gray-200 dark:border-gray-700 w-144 max-h-96 overflow-y-auto min-w-[36rem] z-10\">\n                                                                                        <MarkdownPreview content={task.description} showImagePreview={true} />\n                                                                                    </div>\n                                                                                </div>\n                                                                            )}\n                                                                        </div>\n                                                                    </td>\n                                                                );\n                                                            case 'status':\n                                                                return (\n                                                                    <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                                                        <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(task.status, 'task')} dark:bg-opacity-30 status-col`}>\n                                                                            {task.status}\n                                                                        </span>\n                                                                    </td>\n                                                                );\n                                                            case 'responsibleAndQualityControl':\n                                                                return (\n                                                                    <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                                                        <div className=\"flex flex-col\">\n                                                                            <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                                                                <span className=\"text-xs text-gray-500 dark:text-gray-400 hidden sm:inline\">Verantwortlich:</span>\n                                                                                <span className=\"text-xs text-gray-500 dark:text-gray-400 inline sm:hidden\">Ver.:</span><br />\n                                                                                {task.responsible ? `${task.responsible.firstName} ${task.responsible.lastName}` : task.role ? task.role.name : '-'}\n                                                                            </div>\n                                                                            <div className=\"text-sm text-gray-900 dark:text-gray-200 mt-1\">\n                                                                                <span className=\"text-xs text-gray-500 dark:text-gray-400 hidden sm:inline\">{t('tasks.qualityControlLabel')}</span>\n                                                                                <span className=\"text-xs text-gray-500 dark:text-gray-400 inline sm:hidden\">{t('tasks.columns.qualityControl').substring(0, 2)}:</span><br />\n                                                                                {task.qualityControl ? `${task.qualityControl.firstName} ${task.qualityControl.lastName}` : '-'}\n                                                                            </div>\n                                                                        </div>\n                                                                    </td>\n                                                                );\n                                                            case 'branch':\n                                                                return (\n                                                                    <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                                                        <div className=\"text-sm text-gray-900 dark:text-gray-200\">{task.branch.name}</div>\n                                                                    </td>\n                                                                );\n                                                            case 'dueDate':\n                                                                const expiryStatusForDate = getExpiryStatus(task.dueDate, 'todo', undefined, task.title, task.description);\n                                                                const expiryColorsForDate = getExpiryColorClasses(expiryStatusForDate);\n                                                                return (\n                                                                    <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                                                        <div className={`text-sm ${expiryStatusForDate !== 'none' ? expiryColorsForDate.textClass : 'text-gray-900 dark:text-gray-200'}`}>\n                                                                            {task.dueDate ? new Date(task.dueDate).toLocaleDateString() : '-'}\n                                                                            {expiryStatusForDate !== 'none' && (\n                                                                                <span className=\"ml-2 text-xs\"></span>\n                                                                            )}\n                                                                        </div>\n                                                                    </td>\n                                                                );\n                                                            case 'actions':\n                                                                return (\n                                                                    <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                                                        <div className=\"flex space-x-2 action-buttons\">\n                                                                            <div className=\"status-buttons\">\n                                                                                {renderStatusButtons(task)}\n                                                                            </div>\n                                                                            {hasPermission('tasks', 'write', 'table') && (\n                                                                                <button\n                                                                                    onClick={() => {\n                                                                                        setSelectedTask(task);\n                                                                                        setIsEditModalOpen(true);\n                                                                                    }}\n                                                                                    className=\"p-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                                                                                    title={t('common.edit')}\n                                                                                >\n                                                                                    <PencilIcon className=\"h-4 w-4\" />\n                                                                                </button>\n                                                                            )}\n                                                                            {hasPermission('tasks', 'both', 'table') && (\n                                                                                <button\n                                                                                    onClick={() => handleCopyTask(task)}\n                                                                                    className=\"p-1.5 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                                                                                    title={t('tasks.actions.copy')}\n                                                                                >\n                                                                                    <DocumentDuplicateIcon className=\"h-4 w-4\" />\n                                                                                </button>\n                                                                            )}\n                                                                        </div>\n                                                                    </td>\n                                                                );\n                                                            default:\n                                                                return null;\n                                                        }\n                                                    })}\n                                                    </tr>\n                                                );\n                                            })}\n                                            </>\n                                        )}\n                                    </tbody>\n                                </table>\n                            </div>\n                            ) : (\n                                /* Card-Ansicht - ohne Box-Schattierung, Cards auf voller Breite */\n                                <div className=\"-mx-6\">\n                                    {loading ? (\n                                        <div className=\"flex justify-center py-12\">\n                                            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900 dark:border-gray-100\"></div>\n                                        </div>\n                                    ) : error ? (\n                                        <div className=\"flex justify-center py-12 text-red-600 dark:text-red-400\">\n                                            {error}\n                                        </div>\n                                    ) : filteredAndSortedTasks.length === 0 ? (\n                                        <div className=\"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400\">\n                                            <ClipboardDocumentListIcon className=\"h-10 w-10 mb-4 text-gray-400 dark:text-gray-500\" />\n                                            <div className=\"text-sm\">Keine To Do's gefunden</div>\n                                        </div>\n                                    ) : (\n                                        <CardGrid>\n                                            {filteredAndSortedTasks.slice(0, displayLimit).map(task => {\n                                                const expiryStatus = getExpiryStatus(task.dueDate, 'todo', undefined, task.title, task.description);\n                                                \n                                                // Metadaten basierend auf sichtbaren Einstellungen - strukturiert nach Position\n                                                const metadata: MetadataItem[] = [];\n                                                \n                                                // Links: Niederlassung\n                                                if (visibleCardMetadata.has('branch')) {\n                                                    metadata.push({\n                                                        icon: <BuildingOfficeIcon className=\"h-4 w-4\" />,\n                                                        label: t('tasks.columns.branch'),\n                                                        value: task.branch.name,\n                                                        section: 'left'\n                                                    });\n                                                }\n                                                \n                                                // Haupt-Metadaten: Verantwortlicher & Qualittskontrolle\n                                                if (visibleCardMetadata.has('responsible')) {\n                                                    metadata.push({\n                                                        icon: <UserIcon className=\"h-4 w-4\" />,\n                                                        label: t('tasks.columns.responsible'),\n                                                        value: task.responsible ? `${task.responsible.firstName} ${task.responsible.lastName}` : (task.role ? task.role.name : '-'),\n                                                        section: 'main'\n                                                    });\n                                                }\n                                                if (visibleCardMetadata.has('qualityControl')) {\n                                                    metadata.push({\n                                                        icon: <UserIcon className=\"h-4 w-4\" />,\n                                                        label: t('tasks.columns.qualityControl'),\n                                                        value: task.qualityControl ? `${task.qualityControl.firstName} ${task.qualityControl.lastName}` : '-',\n                                                        section: 'main-second'\n                                                    });\n                                                }\n                                                \n                                                // Rechts: Flligkeit (erste Zeile rechts, neben Status)\n                                                if (visibleCardMetadata.has('dueDate')) {\n                                                    const dueDateItem = createDueDateMetadataItem(\n                                                        task.dueDate,\n                                                        'todo',\n                                                        task.title,\n                                                        task.description,\n                                                        <CalendarIcon className=\"h-4 w-4\" />,\n                                                        t('tasks.columns.dueDate'),\n                                                        (date) => format(date, 'dd.MM.yyyy', { locale: de }),\n                                                        false // Keine Badge-Art, nur Text\n                                                    );\n                                                    metadata.push({\n                                                        ...dueDateItem,\n                                                        section: 'right-inline' // Neue Section fr inline rechts (neben Status)\n                                                    });\n                                                }\n                                                \n                                                // Full-Width: Beschreibung\n                                                if (visibleCardMetadata.has('description') && task.description) {\n                                                    metadata.push({\n                                                        icon: <InformationCircleIcon className=\"h-4 w-4\" />,\n                                                        label: t('tasks.columns.description'),\n                                                        value: '',\n                                                        descriptionContent: task.description,\n                                                        section: 'full'\n                                                    });\n                                                }\n                                                \n                                                // Action-Buttons\n                                                const actionButtons = (\n                                                    <div className=\"flex items-center space-x-2\">\n                                                        {/* Status-Buttons */}\n                                                        <div className=\"status-buttons\">\n                                                            {renderStatusButtons(task)}\n                                                        </div>\n                                                        {hasPermission('tasks', 'write', 'table') && (\n                                                            <button\n                                                                onClick={(e) => {\n                                                                    e.stopPropagation();\n                                                                    setSelectedTask(task);\n                                                                    setIsEditModalOpen(true);\n                                                                }}\n                                                                className=\"p-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                                                                title={t('common.edit')}\n                                                            >\n                                                                <PencilIcon className=\"h-4 w-4\" />\n                                                            </button>\n                                                        )}\n                                                        {hasPermission('tasks', 'both', 'table') && (\n                                                            <button\n                                                                onClick={(e) => {\n                                                                    e.stopPropagation();\n                                                                    handleCopyTask(task);\n                                                                }}\n                                                                className=\"p-1.5 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                                                                title={t('tasks.actions.copy')}\n                                                            >\n                                                                <DocumentDuplicateIcon className=\"h-4 w-4\" />\n                                                            </button>\n                                                        )}\n                                                    </div>\n                                                );\n                                                \n                                                return (\n                                                    <DataCard\n                                                        key={task.id}\n                                                        title={task.title}\n                                                        status={{\n                                                            label: getStatusText(task.status, 'task', t),\n                                                            color: getStatusColor(task.status, 'task'),\n                                                            onPreviousClick: undefined,\n                                                            onNextClick: undefined\n                                                        }}\n                                                        metadata={metadata}\n                                                        actions={actionButtons}\n                                                    />\n                                                );\n                                            })}\n                                        </CardGrid>\n                                    )}\n                                </div>\n                            )}\n                            \n                            {/* \"Mehr anzeigen\" Button - Mobil */}\n                            {filteredAndSortedTasks.length > displayLimit && (\n                                <div className=\"mt-4 flex justify-center\">\n                                    <button\n                                        className=\"px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-700 border border-blue-300 dark:border-gray-600 rounded-md hover:bg-blue-50 dark:hover:bg-gray-600\"\n                                        onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n                                    >\n                                        {t('common.showMore')} ({filteredAndSortedTasks.length - displayLimit} {t('common.remaining')})\n                                    </button>\n                                </div>\n                            )}\n                        </div>\n                        \n                        {/* Zeiterfassung - auf Mobilgerten fixiert ber dem Footermen */}\n                        <div className=\"fixed bottom-13 left-0 right-0 w-full bg-white dark:bg-gray-800 z-9 shadow-lg border-t-0 dark:border-t dark:border-gray-700\">\n                            <WorktimeTracker />\n                        </div>\n                    </div>\n\n                    {/* Auf greren Gerten bleibt die ursprngliche Reihenfolge - Zeiterfassung oben, Tasks unten */}\n                    <div className=\"hidden sm:block\">\n                        {/* Zeiterfassung */}\n                        <div className=\"mb-8\">\n                            <WorktimeTracker />\n                        </div>\n                        \n                        {/* Tasks - vollstndiger Inhalt fr Desktop-Ansicht */}\n                        <div className=\"dashboard-tasks-wrapper bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 w-full mb-20\">\n                            <div className=\"flex items-center mb-4 justify-between\">\n                                {/* Linke Seite: \"Neuer Task\"-Button */}\n                                <div className=\"flex items-center\">\n                                    {hasPermission('tasks', 'write', 'table') && (\n                                        <button\n                                            onClick={() => setIsCreateModalOpen(true)}\n                                            className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                                            style={{ width: '30.19px', height: '30.19px' }}\n                                            title={t('tasks.createTask')}\n                                            aria-label={t('tasks.createTask')}\n                                        >\n                                            <PlusIcon className=\"h-4 w-4\" />\n                                        </button>\n                                    )}\n                                </div>\n                                \n                                {/* Mitte: Titel */}\n                                <div className=\"flex items-center\">\n                                    <CheckCircleIcon className=\"h-6 w-6 mr-2 dark:text-white\" />\n                                    <h2 className=\"text-xl font-semibold dark:text-white\">{t('tasks.title')}</h2>\n                                </div>\n                                \n                                {/* Rechte Seite: Suchfeld, Filter-Button, Status-Filter, Spalten-Konfiguration */}\n                                <div className=\"flex items-center gap-1.5\">\n                                    <input\n                                        type=\"text\"\n                                        placeholder={t('common.search') + '...'}\n                                        className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n                                        value={searchTerm}\n                                        onChange={(e) => setSearchTerm(e.target.value)}\n                                    />\n                                    \n                                    {/* View-Mode Toggle */}\n                                    <button\n                                        className={`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                                            viewMode === 'cards' ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : ''\n                                        }`}\n                                        onClick={() => updateViewMode(viewMode === 'table' ? 'cards' : 'table')}\n                                        title={viewMode === 'table' ? t('common.viewAsCards') : t('common.viewAsTable')}\n                                    >\n                                        {viewMode === 'table' ? (\n                                            <Squares2X2Icon className=\"h-5 w-5\" />\n                                        ) : (\n                                            <TableCellsIcon className=\"h-5 w-5\" />\n                                        )}\n                                    </button>\n                                    \n                                    {/* Filter-Button */}\n                                    <button\n                                        className={`p-2 rounded-md ${getActiveFilterCount() > 0 ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'hover:bg-gray-100 dark:hover:bg-gray-700'} ml-1 relative`}\n                                        onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n                                        title={t('common.filter')}\n                                    >\n                                        <FunnelIcon className=\"h-5 w-5\" />\n                                        {getActiveFilterCount() > 0 && (\n                                            <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 text-white rounded-full text-xs flex items-center justify-center\">\n                                                {getActiveFilterCount()}\n                                            </span>\n                                        )}\n                                    </button>\n                                    \n                                    {/* Spalten-Konfiguration */}\n                                    <div className=\"ml-1\">\n                                        <TableColumnConfig\n                                            columns={viewMode === 'cards'\n                                                ? [\n                                                    { id: 'title', label: t('tasks.columns.title') },\n                                                    { id: 'status', label: t('tasks.columns.status') },\n                                                    { id: 'responsible', label: t('tasks.columns.responsible') },\n                                                    { id: 'qualityControl', label: t('tasks.columns.qualityControl') },\n                                                    { id: 'branch', label: t('tasks.columns.branch') },\n                                                    { id: 'dueDate', label: t('tasks.columns.dueDate') },\n                                                    { id: 'description', label: t('tasks.columns.description') }\n                                                ]\n                                                : availableColumns}\n                                            visibleColumns={viewMode === 'cards'\n                                                ? Array.from(visibleCardMetadata)\n                                                : visibleColumnIds}\n                                            columnOrder={viewMode === 'cards'\n                                                ? cardMetadataOrder\n                                                : settings.columnOrder}\n                                            onToggleColumnVisibility={(columnId) => {\n                                                if (viewMode === 'cards') {\n                                                    const tableColumn = cardToTableMapping[columnId];\n                                                    if (tableColumn) {\n                                                        toggleColumnVisibility(tableColumn);\n                                                    }\n                                                } else {\n                                                    toggleColumnVisibility(columnId);\n                                                }\n                                            }}\n                                            onMoveColumn={viewMode === 'cards'\n                                                ? (dragIndex: number, hoverIndex: number) => {\n                                                    const newCardOrder = [...cardMetadataOrder];\n                                                    const dragged = newCardOrder[dragIndex];\n                                                    newCardOrder.splice(dragIndex, 1);\n                                                    newCardOrder.splice(hoverIndex, 0, dragged);\n                                                    \n                                                    const newTableOrder: string[] = [];\n                                                    const usedTableColumns = new Set<string>();\n                                                    \n                                                    newCardOrder.forEach(cardMeta => {\n                                                        const tableCol = cardToTableMapping[cardMeta];\n                                                        if (tableCol && !usedTableColumns.has(tableCol)) {\n                                                            usedTableColumns.add(tableCol);\n                                                            newTableOrder.push(tableCol);\n                                                        }\n                                                    });\n                                                    \n                                                    availableColumns.forEach(col => {\n                                                        if (!newTableOrder.includes(col.id) && col.id !== 'actions') {\n                                                            newTableOrder.push(col.id);\n                                                        }\n                                                    });\n                                                    \n                                                    updateColumnOrder(newTableOrder);\n                                                }\n                                                : handleMoveColumn}\n                                            sortDirections={viewMode === 'cards' ? cardSortDirections : undefined}\n                                            onSortDirectionChange={viewMode === 'cards'\n                                                ? (columnId: string, direction: 'asc' | 'desc') => {\n                                                    setCardSortDirections(prev => ({\n                                                        ...prev,\n                                                        [columnId]: direction\n                                                    }));\n                                                }\n                                                : undefined}\n                                            showSortDirection={viewMode === 'cards'}\n                                            buttonTitle={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n                                            modalTitle={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n                                            onClose={() => {}}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Filter-Pane */}\n                            {isFilterModalOpen && (\n                                <FilterPane\n                                    columns={[...availableColumns, ...filterOnlyColumns]}\n                                    onApply={applyFilterConditions}\n                                    onReset={resetFilterConditions}\n                                    savedConditions={filterConditions}\n                                    savedOperators={filterLogicalOperators}\n                                    tableId={TODOS_TABLE_ID}\n                                />\n                            )}\n\n                            {/* Gespeicherte Filter als Tags anzeigen */}\n                            <SavedFilterTags\n                                tableId={TODOS_TABLE_ID}\n                                onSelectFilter={applyFilterConditions}\n                                onReset={resetFilterConditions}\n                                activeFilterName={activeFilterName}\n                                selectedFilterId={selectedFilterId}\n                                onFilterChange={handleFilterChange}\n                                defaultFilterName=\"Aktuell\"\n                            />\n\n                            {/* Tabelle oder Cards */}\n                            {viewMode === 'table' ? (\n                                /* Tabellen-Ansicht */\n                                <div className=\"overflow-x-auto\">\n                                    <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n                                        <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                                            <tr>\n                                                {visibleColumnIds.map((columnId) => {\n                                                    const column = availableColumns.find(col => col.id === columnId);\n                                                    if (!column) return null;\n\n                                                    return (\n                                                        <th \n                                                            key={columnId}\n                                                            scope=\"col\"\n                                                            className={`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider ${columnId === dragOverColumn ? 'bg-blue-100 dark:bg-blue-800' : ''}`}\n                                                            draggable={true}\n                                                            onDragStart={() => handleDragStart(columnId)}\n                                                            onDragOver={(e) => handleDragOver(e, columnId)}\n                                                            onDrop={(e) => handleDrop(e, columnId)}\n                                                            onDragEnd={handleDragEnd}\n                                                        >\n                                                            <div className=\"flex items-center\">\n                                                                {window.innerWidth <= 640 ? column.shortLabel : column.label}\n                                                                {columnId !== 'actions' && (\n                                                                    <button \n                                                                        onClick={() => handleSort(columnId as keyof Task)}\n                                                                        className=\"ml-1 focus:outline-none\"\n                                                                    >\n                                                                        <ArrowsUpDownIcon className=\"h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                                                                    </button>\n                                                                )}\n                                                            </div>\n                                                        </th>\n                                                    );\n                                                })}\n                                            </tr>\n                                        </thead>\n                                        <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                                            {loading ? (\n                                                <tr>\n                                                    <td colSpan={visibleColumnIds.length} className=\"px-6 py-4 text-center\">\n                                                        <div className=\"flex justify-center\">\n                                                            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900 dark:border-gray-100\"></div>\n                                                        </div>\n                                                    </td>\n                                                </tr>\n                                            ) : error ? (\n                                                <tr>\n                                                    <td colSpan={visibleColumnIds.length} className=\"px-6 py-4 text-center text-red-600 dark:text-red-400\">\n                                                        {error}\n                                                    </td>\n                                                </tr>\n                                            ) : filteredAndSortedTasks.length === 0 ? (\n                                                <tr>\n                                                    <td colSpan={visibleColumnIds.length} className=\"px-6 py-4 text-center text-gray-500 dark:text-gray-400\">\n                                                        <div className=\"flex flex-col items-center justify-center gap-4\">\n                                                        <ClipboardDocumentListIcon className=\"h-10 w-10 text-gray-400 dark:text-gray-500\" />\n                                                        <div className=\"text-sm\">{t('tasks.noTasksFound')}</div>\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        ) : (\n                                            <>\n                                            {filteredAndSortedTasks.slice(0, displayLimit).map(task => {\n                                            const expiryStatus = getExpiryStatus(task.dueDate, 'todo', undefined, task.title, task.description);\n                                            const expiryColors = getExpiryColorClasses(expiryStatus);\n                                            \n                                            return (\n                                                <tr \n                                                    key={task.id} \n                                                    className={`hover:bg-gray-50 dark:hover:bg-gray-700 ${\n                                                        expiryStatus !== 'none' ? `${expiryColors.bgClass} ${expiryColors.borderClass} border-l-4` : ''\n                                                    }`}\n                                                >\n                                                    {visibleColumnIds.map(columnId => {\n                                                    switch (columnId) {\n                                                        case 'title':\n                                                            return (\n                                                                <td key={columnId} className=\"px-6 py-4\">\n                                                                    <div className=\"text-sm text-gray-900 dark:text-gray-200 break-words flex items-center\">\n                                                                        {task.title}\n                                                                            {task.description && (\n                                                                                <div className=\"ml-2 relative group\">\n                                                                                    <button \n                                                                                        className=\"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300\"\n                                                                                        title={t('tasks.showDescription')}\n                                                                                    >\n                                                                                        <InformationCircleIcon className=\"h-5 w-5\" />\n                                                                                    </button>\n                                                                                    <div className=\"hidden group-hover:block absolute left-0 mt-2 p-2 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 shadow-lg rounded-md border border-gray-200 dark:border-gray-700 w-144 max-h-96 overflow-y-auto min-w-[36rem] z-10\">\n                                                                                        <MarkdownPreview content={task.description} showImagePreview={true} />\n                                                                                    </div>\n                                                                                </div>\n                                                                            )}\n                                                                        </div>\n                                                                    </td>\n                                                                );\n                                                            case 'status':\n                                                                return (\n                                                                    <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                                                        <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(task.status, 'task')} dark:bg-opacity-30 status-col`}>\n                                                                            {task.status}\n                                                                        </span>\n                                                                    </td>\n                                                                );\n                                                            case 'responsibleAndQualityControl':\n                                                                return (\n                                                                    <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                                                        <div className=\"flex flex-col\">\n                                                                            <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                                                                <span className=\"text-xs text-gray-500 dark:text-gray-400 hidden sm:inline\">Verantwortlich:</span>\n                                                                                <span className=\"text-xs text-gray-500 dark:text-gray-400 inline sm:hidden\">Ver.:</span><br />\n                                                                                {task.responsible ? `${task.responsible.firstName} ${task.responsible.lastName}` : task.role ? task.role.name : '-'}\n                                                                            </div>\n                                                                            <div className=\"text-sm text-gray-900 dark:text-gray-200 mt-1\">\n                                                                                <span className=\"text-xs text-gray-500 dark:text-gray-400 hidden sm:inline\">{t('tasks.qualityControlLabel')}</span>\n                                                                                <span className=\"text-xs text-gray-500 dark:text-gray-400 inline sm:hidden\">{t('tasks.columns.qualityControl').substring(0, 2)}:</span><br />\n                                                                                {task.qualityControl ? `${task.qualityControl.firstName} ${task.qualityControl.lastName}` : '-'}\n                                                                            </div>\n                                                                        </div>\n                                                                    </td>\n                                                                );\n                                                            case 'branch':\n                                                                return (\n                                                                    <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                                                        <div className=\"text-sm text-gray-900 dark:text-gray-200\">{task.branch.name}</div>\n                                                                    </td>\n                                                                );\n                                                            case 'dueDate':\n                                                                const expiryStatusForDate2 = getExpiryStatus(task.dueDate, 'todo', undefined, task.title, task.description);\n                                                                const expiryColorsForDate2 = getExpiryColorClasses(expiryStatusForDate2);\n                                                                return (\n                                                                    <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                                                        <div className={`text-sm ${expiryStatusForDate2 !== 'none' ? expiryColorsForDate2.textClass : 'text-gray-900 dark:text-gray-200'}`}>\n                                                                            {task.dueDate ? new Date(task.dueDate).toLocaleDateString() : '-'}\n                                                                            {expiryStatusForDate2 !== 'none' && (\n                                                                                <span className=\"ml-2 text-xs\"></span>\n                                                                            )}\n                                                                        </div>\n                                                                    </td>\n                                                                );\n                                                            case 'actions':\n                                                                return (\n                                                                    <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                                                        <div className=\"flex space-x-2 action-buttons\">\n                                                                            <div className=\"status-buttons\">\n                                                                                {renderStatusButtons(task)}\n                                                                            </div>\n                                                                            {hasPermission('tasks', 'write', 'table') && (\n                                                                                <button\n                                                                                    onClick={() => {\n                                                                                        setSelectedTask(task);\n                                                                                        setIsEditModalOpen(true);\n                                                                                    }}\n                                                                                    className=\"p-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                                                                                    title={t('common.edit')}\n                                                                                >\n                                                                                    <PencilIcon className=\"h-4 w-4\" />\n                                                                                </button>\n                                                                            )}\n                                                                            {hasPermission('tasks', 'both', 'table') && (\n                                                                                <button\n                                                                                    onClick={() => handleCopyTask(task)}\n                                                                                    className=\"p-1.5 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                                                                                    title={t('tasks.actions.copy')}\n                                                                                >\n                                                                                    <DocumentDuplicateIcon className=\"h-4 w-4\" />\n                                                                                </button>\n                                                                            )}\n                                                                        </div>\n                                                                    </td>\n                                                                );\n                                                            default:\n                                                                return null;\n                                                        }\n                                                    })}\n                                                    </tr>\n                                                );\n                                            })}\n                                            </>\n                                        )}\n                                    </tbody>\n                                </table>\n                            </div>\n                            ) : (\n                                /* Card-Ansicht - ohne Box-Schattierung, Cards auf voller Breite */\n                                <div className=\"-mx-6\">\n                                    {loading ? (\n                                        <div className=\"flex justify-center py-12\">\n                                            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900 dark:border-gray-100\"></div>\n                                        </div>\n                                    ) : error ? (\n                                        <div className=\"flex justify-center py-12 text-red-600 dark:text-red-400\">\n                                            {error}\n                                        </div>\n                                    ) : filteredAndSortedTasks.length === 0 ? (\n                                        <div className=\"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400\">\n                                            <ClipboardDocumentListIcon className=\"h-10 w-10 mb-4 text-gray-400 dark:text-gray-500\" />\n                                            <div className=\"text-sm\">Keine To Do's gefunden</div>\n                                        </div>\n                                    ) : (\n                                        <CardGrid>\n                                            {filteredAndSortedTasks.slice(0, displayLimit).map(task => {\n                                                const expiryStatus = getExpiryStatus(task.dueDate, 'todo', undefined, task.title, task.description);\n                                                \n                                                // Metadaten basierend auf sichtbaren Einstellungen - strukturiert nach Position\n                                                const metadata: MetadataItem[] = [];\n                                                \n                                                // Links: Niederlassung\n                                                if (visibleCardMetadata.has('branch')) {\n                                                    metadata.push({\n                                                        icon: <BuildingOfficeIcon className=\"h-4 w-4\" />,\n                                                        label: t('tasks.columns.branch'),\n                                                        value: task.branch.name,\n                                                        section: 'left'\n                                                    });\n                                                }\n                                                \n                                                // Haupt-Metadaten: Verantwortlicher & Qualittskontrolle\n                                                if (visibleCardMetadata.has('responsible')) {\n                                                    metadata.push({\n                                                        icon: <UserIcon className=\"h-4 w-4\" />,\n                                                        label: t('tasks.columns.responsible'),\n                                                        value: task.responsible ? `${task.responsible.firstName} ${task.responsible.lastName}` : (task.role ? task.role.name : '-'),\n                                                        section: 'main'\n                                                    });\n                                                }\n                                                if (visibleCardMetadata.has('qualityControl')) {\n                                                    metadata.push({\n                                                        icon: <UserIcon className=\"h-4 w-4\" />,\n                                                        label: t('tasks.columns.qualityControl'),\n                                                        value: task.qualityControl ? `${task.qualityControl.firstName} ${task.qualityControl.lastName}` : '-',\n                                                        section: 'main-second'\n                                                    });\n                                                }\n                                                \n                                                // Rechts: Flligkeit (erste Zeile rechts, neben Status)\n                                                if (visibleCardMetadata.has('dueDate')) {\n                                                    const dueDateItem = createDueDateMetadataItem(\n                                                        task.dueDate,\n                                                        'todo',\n                                                        task.title,\n                                                        task.description,\n                                                        <CalendarIcon className=\"h-4 w-4\" />,\n                                                        t('tasks.columns.dueDate'),\n                                                        (date) => format(date, 'dd.MM.yyyy', { locale: de }),\n                                                        false // Keine Badge-Art, nur Text\n                                                    );\n                                                    metadata.push({\n                                                        ...dueDateItem,\n                                                        section: 'right-inline' // Neue Section fr inline rechts (neben Status)\n                                                    });\n                                                }\n                                                \n                                                // Full-Width: Beschreibung\n                                                if (visibleCardMetadata.has('description') && task.description) {\n                                                    metadata.push({\n                                                        icon: <InformationCircleIcon className=\"h-4 w-4\" />,\n                                                        label: t('tasks.columns.description'),\n                                                        value: '',\n                                                        descriptionContent: task.description,\n                                                        section: 'full'\n                                                    });\n                                                }\n                                                \n                                                // Action-Buttons\n                                                const actionButtons = (\n                                                    <div className=\"flex items-center space-x-2\">\n                                                        {/* Status-Buttons */}\n                                                        <div className=\"status-buttons\">\n                                                            {renderStatusButtons(task)}\n                                                        </div>\n                                                        {hasPermission('tasks', 'write', 'table') && (\n                                                            <button\n                                                                onClick={(e) => {\n                                                                    e.stopPropagation();\n                                                                    setSelectedTask(task);\n                                                                    setIsEditModalOpen(true);\n                                                                }}\n                                                                className=\"p-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                                                                title={t('common.edit')}\n                                                            >\n                                                                <PencilIcon className=\"h-4 w-4\" />\n                                                            </button>\n                                                        )}\n                                                        {hasPermission('tasks', 'both', 'table') && (\n                                                            <button\n                                                                onClick={(e) => {\n                                                                    e.stopPropagation();\n                                                                    handleCopyTask(task);\n                                                                }}\n                                                                className=\"p-1.5 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                                                                title={t('tasks.actions.copy')}\n                                                            >\n                                                                <DocumentDuplicateIcon className=\"h-4 w-4\" />\n                                                            </button>\n                                                        )}\n                                                    </div>\n                                                );\n                                                \n                                                return (\n                                                    <DataCard\n                                                        key={task.id}\n                                                        title={task.title}\n                                                        status={{\n                                                            label: getStatusText(task.status, 'task', t),\n                                                            color: getStatusColor(task.status, 'task'),\n                                                            onPreviousClick: undefined,\n                                                            onNextClick: undefined\n                                                        }}\n                                                        metadata={metadata}\n                                                        actions={actionButtons}\n                                                    />\n                                                );\n                                            })}\n                                        </CardGrid>\n                                    )}\n                                </div>\n                            )}\n                            \n                            {/* \"Mehr anzeigen\" Button - Desktop */}\n                            {filteredAndSortedTasks.length > displayLimit && (\n                                <div className=\"mt-4 flex justify-center\">\n                                    <button\n                                        className=\"px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-700 border border-blue-300 dark:border-gray-600 rounded-md hover:bg-blue-50 dark:hover:bg-gray-600\"\n                                        onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n                                    >\n                                        {t('common.showMore')} ({filteredAndSortedTasks.length - displayLimit} {t('common.remaining')})\n                                    </button>\n                                </div>\n                            )}\n                            \n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n            {/* Die Modals fr beide Ansichten (mobil und desktop) */}\n            <CreateTaskModal \n                isOpen={isCreateModalOpen}\n                onClose={() => setIsCreateModalOpen(false)}\n                onTaskCreated={(newTask) => {\n                    // Optimistisches Update: Neuen Task zur Liste hinzufgen statt vollstndigem Reload\n                    setTasks(prevTasks => [newTask, ...prevTasks]);\n                    setIsEditModalOpen(true);\n                    setSelectedTask(newTask);\n                }}\n            />\n            \n            {selectedTask && (\n                <EditTaskModal\n                    isOpen={isEditModalOpen}\n                    onClose={() => {\n                        setIsEditModalOpen(false);\n                        setSelectedTask(null);\n                    }}\n                    onTaskUpdated={(updatedTask) => {\n                        // Optimistisches Update: Task in Liste aktualisieren statt vollstndigem Reload\n                        setTasks(prevTasks => \n                            prevTasks.map(task => \n                                task.id === updatedTask.id ? updatedTask : task\n                            )\n                        );\n                        setIsEditModalOpen(false);\n                        setSelectedTask(null);\n                        toast.success(t('worktime.messages.taskUpdated'));\n                    }}\n                    task={selectedTask}\n                />\n            )}\n        </div>\n    );\n};\n\nexport default Worktracker; ","import * as React from \"react\";\nfunction ClockIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ClockIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction Bars2Icon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3.75 9h16.5m-16.5 6.75h16.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(Bars2Icon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CalendarIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CalendarIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction FunnelIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(FunnelIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ChevronLeftIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 19.5 8.25 12l7.5-7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChevronLeftIcon);\nexport default ForwardRef;","import React, { useState, useEffect, useCallback } from 'react';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { format, parseISO } from 'date-fns';\nimport { formatDate, formatTime, calculateDuration, isWorktimeRelevantForSelectedDate } from '../utils/dateUtils.ts';\n\n// Schnittstelle fr das WorktimeModal\nexport interface WorktimeModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    selectedDate?: string; // Optional - wenn nicht angegeben, wird das heutige Datum verwendet\n}\n\nexport const WorktimeModal: React.FC<WorktimeModalProps> = ({ isOpen, onClose, selectedDate: initialSelectedDate }) => {\n    // Initialisiere das selectedDate mit dem bergebenen Datum oder dem heutigen Datum\n    const today = new Date();\n    const defaultDate = `${today.getFullYear()}-${(today.getMonth() + 1).toString().padStart(2, '0')}-${today.getDate().toString().padStart(2, '0')}`;\n    \n    const [worktimes, setWorktimes] = useState<any[]>([]);\n    const [selectedDate, setSelectedDate] = useState<string>(initialSelectedDate || defaultDate);\n    const [loading, setLoading] = useState(true);\n    const [totalDuration, setTotalDuration] = useState<string>('0h 0m');\n    const [activeWorktime, setActiveWorktime] = useState<any | null>(null);\n    const [error, setError] = useState<string | null>(null);\n\n    // Prfe, ob die aktive Zeiterfassung am ausgewhlten Tag begonnen hat\n    const isActiveWorktimeRelevant = (): boolean => {\n        if (!activeWorktime) return false;\n        \n        try {\n            // Extrahiere nur den Datumsteil (YYYY-MM-DD) aus dem startTime ISO-String\n            const dateOnly = activeWorktime.startTime.split('T')[0];\n            \n            // Vergleiche mit selectedDate\n            return dateOnly === selectedDate;\n        } catch (error) {\n            console.error(\"Fehler beim Prfen der Relevanz der aktiven Zeiterfassung:\", error);\n            return false;\n        }\n    };\n\n    const fetchWorktimes = useCallback(async () => {\n        try {\n            setError(null);\n            setLoading(true);\n            \n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                setLoading(false);\n                return;\n            }\n            \n            const formattedDate = selectedDate;\n            \n            const response = await axiosInstance.get(`${API_ENDPOINTS.WORKTIME.BASE}?date=${formattedDate}`);\n            \n            const sortedWorktimes = [...response.data].sort((a, b) => {\n                return new Date(a.startTime).getTime() - new Date(b.startTime).getTime();\n            });\n            \n            setWorktimes(sortedWorktimes);\n            \n            // Auch die aktive Zeiterfassung abrufen\n            const activeResponse = await axiosInstance.get(API_ENDPOINTS.WORKTIME.ACTIVE);\n            \n            if (activeResponse.data && Object.keys(activeResponse.data).length > 0) {\n                setActiveWorktime(activeResponse.data);\n            } else {\n                setActiveWorktime(null);\n            }\n            \n            setLoading(false);\n        } catch (error) {\n            console.error('Fehler beim Laden der Zeiterfassungen:', error);\n            setError('Fehler beim Laden der Zeiterfassungen');\n            setLoading(false);\n        }\n    }, [selectedDate]);\n\n    useEffect(() => {\n        if (isOpen) {\n            fetchWorktimes();\n        }\n    }, [isOpen, fetchWorktimes]);\n\n    // Berechne die Gesamtdauer aller Zeiteintrge fr den Tag\n    useEffect(() => {\n        let totalMinutes = 0;\n        \n        // Filtere die relevanten Eintrge fr das ausgewhlte Datum\n        const relevantWorktimes = worktimes.filter(worktime => isWorktimeRelevantForSelectedDate(worktime, selectedDate));\n        \n        // Berechne die Dauer der abgeschlossenen Zeiteintrge\n        relevantWorktimes.forEach((worktime) => {\n            if (worktime.endTime) {\n                try {\n                    const start = new Date(worktime.startTime);\n                    const end = new Date(worktime.endTime);\n                    const diff = end.getTime() - start.getTime();\n                    \n                    if (diff > 0) {\n                        const minutes = Math.floor(diff / (1000 * 60));\n                        totalMinutes += minutes;\n                    }\n                } catch (error) {\n                    console.error('Fehler bei der Berechnung:', error);\n                }\n            }\n        });\n        \n        // Fge die aktive Zeiterfassung hinzu, wenn sie fr den ausgewhlten Tag relevant ist\n        if (activeWorktime && isActiveWorktimeRelevant()) {\n            try {\n                const activeStart = new Date(`${activeWorktime.startTime.split('Z')[0]}`);\n                const now = new Date();\n                const diff = now.getTime() - activeStart.getTime();\n                \n                if (diff > 0) {\n                    const minutes = Math.floor(diff / (1000 * 60));\n                    totalMinutes += minutes;\n                }\n            } catch (error) {\n                console.error(\"Fehler bei der Berechnung der aktiven Zeiterfassung:\", error);\n            }\n        }\n        \n        // Formatiere die Gesamtdauer\n        const hours = Math.floor(totalMinutes / 60);\n        const minutes = totalMinutes % 60;\n        const formattedDuration = `${hours}h ${minutes}m`;\n        setTotalDuration(formattedDuration);\n    }, [worktimes, activeWorktime, selectedDate]);\n\n    if (!isOpen) return null;\n    \n    // Berechne die relevanten Eintrge fr das ausgewhlte Datum\n    const relevantWorktimes = worktimes.filter(worktime => isWorktimeRelevantForSelectedDate(worktime, selectedDate));\n\n    // Berechne die Dauer der aktiven Zeiterfassung\n    const calculateActiveDuration = (): string => {\n        if (!activeWorktime) return '-';\n        \n        // Erstelle ein Date-Objekt ohne Zeitzonenumrechnung\n        // Entferne das 'Z' am Ende des Strings, damit JS den Zeitstempel nicht als UTC interpretiert\n        const startISOString = activeWorktime.startTime.endsWith('Z') \n            ? activeWorktime.startTime.substring(0, activeWorktime.startTime.length - 1)\n            : activeWorktime.startTime;\n        \n        const start = new Date(startISOString);\n        const now = new Date();\n        \n        // Berechnung mit Millisekunden\n        const diff = now.getTime() - start.getTime();\n        \n        // Umrechnung in Stunden und Minuten\n        const totalMinutes = Math.floor(diff / (1000 * 60));\n        const hours = Math.floor(totalMinutes / 60);\n        const minutes = totalMinutes % 60;\n        \n        return `${hours}h ${minutes}m (luft)`;\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 w-full max-w-4xl max-h-[90vh] flex flex-col\">\n                <div className=\"p-4 border-b dark:border-gray-700 flex items-center justify-between\">\n                    <h2 className=\"text-xl font-semibold dark:text-white\">\n                        Zeiteintrge fr {formatDate(selectedDate)}\n                    </h2>\n                    <div className=\"flex items-center space-x-2\">\n                        <input\n                            type=\"date\"\n                            value={selectedDate}\n                            onChange={(e) => {\n                                setSelectedDate(e.target.value);\n                            }}\n                            className=\"border dark:border-gray-600 rounded-md px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        />\n                        <button \n                            onClick={onClose}\n                            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n                        >\n                            \n                        </button>\n                    </div>\n                </div>\n\n                <div className=\"overflow-y-auto flex-grow\">\n                    {loading ? (\n                        <div className=\"flex justify-center items-center h-32\">\n                            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-gray-300\"></div>\n                        </div>\n                    ) : worktimes.filter(worktime => isWorktimeRelevantForSelectedDate(worktime, selectedDate) && (worktime.endTime !== null || isActiveWorktimeRelevant())).length === 0 ? (\n                        <div className=\"p-4 text-center text-gray-500 dark:text-gray-400\">\n                            Keine Zeiteintrge fr diesen Tag gefunden.\n                        </div>\n                    ) : (\n                        <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n                            <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                                <tr>\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                        Start\n                                    </th>\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                        Ende\n                                    </th>\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                        Dauer\n                                    </th>\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                        Niederlassung\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                                {relevantWorktimes\n                                  .filter(worktime => worktime.endTime !== null)\n                                  // Sortiere nach Startzeit (frhester Eintrag zuerst)\n                                  .sort((a, b) => new Date(a.startTime).getTime() - new Date(b.startTime).getTime())\n                                  .map((worktime) => (\n                                    <tr key={worktime.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700\">\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                                            {formatTime(worktime.startTime)}\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                                            {worktime.endTime ? formatTime(worktime.endTime) : '-'}\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                                            {calculateDuration(worktime.startTime, worktime.endTime)}\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                                            {worktime.branch.name}\n                                        </td>\n                                    </tr>\n                                ))}\n                                \n                                {/* Aktive Zeiterfassung anzeigen, wenn sie fr den ausgewhlten Tag relevant ist */}\n                                {isActiveWorktimeRelevant() && (\n                                    <tr className=\"bg-green-50 dark:bg-green-900/30 hover:bg-green-100 dark:hover:bg-green-900/50\">\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                                            {formatTime(activeWorktime.startTime)}\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                                            <span className=\"italic\">Aktiv</span>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200 font-medium text-green-600 dark:text-green-400\">\n                                            {calculateActiveDuration()}\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                                            {activeWorktime.branch?.name || 'Unbekannt'}\n                                        </td>\n                                    </tr>\n                                )}\n                            </tbody>\n                            \n                            {/* Gesamtdauer des Tages */}\n                            <tfoot className=\"bg-gray-100 dark:bg-gray-700\">\n                                <tr>\n                                    <td colSpan={2} className=\"px-6 py-3 text-right text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                        Gesamtdauer des Tages:\n                                    </td>\n                                    <td className=\"px-6 py-3 text-left text-sm font-bold text-gray-900 dark:text-white\">\n                                        {totalDuration}\n                                    </td>\n                                    <td></td>\n                                </tr>\n                            </tfoot>\n                        </table>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}; ","import * as React from \"react\";\nfunction EyeIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(EyeIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ArrowUpIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowUpIcon);\nexport default ForwardRef;"],"names":["DEFAULT_EXPIRY_THRESHOLDS","request","criticalHours","todo","TODO_EXPIRY_THRESHOLDS","hourly","daily","standard","getExpiryStatus","dueDate","type","arguments","length","undefined","customThresholds","title","description","now","Date","due","hoursOverdue","getTime","thresholds","todoType","titleLower","toLowerCase","descLower","includes","getTodoType","getExpiryColorClasses","status","borderClass","bgClass","textClass","badgeClass","createDueDateMetadataItem","icon","label","formatDate","date","toLocaleDateString","useBadge","expiryStatus","expiryColors","value","className","InformationCircleIcon","_ref","svgRef","titleId","props","React","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","id","strokeLinecap","strokeLinejoin","d","TableCellsIcon","getStatusColor","processType","getStatusText","t","translationKey","translated","charAt","toUpperCase","slice","replace","ArrowsUpDownIcon","ArrowDownIcon","ChevronDownIcon","DocumentDuplicateIcon","UserIcon","CheckCircleIcon","EyeSlashIcon","Squares2X2Icon","BuildingOfficeIcon","ChevronRightIcon","onArticleSelected","excludeArticleIds","selectedArticles","onArticleRemove","articles","setArticles","useState","selectedArticleId","setSelectedArticleId","selectedArticlePreview","setSelectedArticlePreview","loading","setLoading","error","setError","useEffect","async","filteredArticles","axiosInstance","get","API_ENDPOINTS","CEREBRO","ARTICLES","BASE","data","filter","article","err","_axiosError$response","_axiosError$response$","console","axiosError","response","message","fetchAllArticles","_jsxs","children","_jsx","onChange","e","articleId","parseInt","target","isNaN","find","BY_ID","fetchArticleDetails","map","onClick","handleArticleConfirm","selectedArticle","disabled","content","substring","href","slug","rel","TaskForm","_ref2","setTitle","setDescription","assigneeType","setAssigneeType","responsibleId","setResponsibleId","roleId","setRoleId","qualityControlId","setQualityControlId","branchId","setBranchId","setDueDate","users","roles","branches","handleSubmit","handleClose","onArticleSelect","uploading","temporaryAttachments","onFileUpload","onRemoveAttachment","textareaRef","fileInputRef","handlePaste","handleDrop","handleDragOver","useTranslation","activeTab","setActiveTab","onSubmit","noValidate","_Fragment","htmlFor","required","rows","onPaste","onDrop","onDragOver","placeholder","_fileInputRef$current","current","click","attachment","index","fileName","fileType","startsWith","file","src","URL","createObjectURL","alt","MarkdownPreview","name","checked","Number","Array","isArray","user","firstName","lastName","role","branch","CerebroArticleSelector","a","XMarkIcon","ArrowPathIcon","CheckIcon","isOpen","onClose","onTaskCreated","useAuth","openSidepane","closeSidepane","useSidepane","isLargeScreen","setIsLargeScreen","window","innerWidth","setUsers","setRoles","setBranches","isMobile","setIsMobile","setSelectedArticles","setTemporaryAttachments","setUploading","useRef","fetchUsers","fetchRoles","fetchBranches","getDefaultDueDate","setDate","getDate","toISOString","split","checkScreenSize","addEventListener","removeEventListener","localStorage","getItem","log","USERS","DROPDOWN","code","ROLES","_axiosError$response2","_axiosError$response3","BRANCHES","_axiosError$response4","_axiosError$response5","items","event","clipboardData","i","item","indexOf","preventDefault","getAsFile","handleTemporaryAttachment","stopPropagation","dataTransfer","files","newAttachment","fileSize","size","prev","insertText","cursorPos","selectionStart","textBefore","textAfter","setTimeout","newPos","selectionEnd","focus","_axiosError$response6","_axiosError$response7","handleFileUpload","handleRemoveTemporaryAttachment","attachmentToRemove","_","escapedFileName","uploadText","imagePattern","RegExp","linkPattern","newDescription","qualityControl","responsible","taskData","post","TASKS","newTaskId","Promise","all","LINK_CARTICLE","formData","FormData","append","ATTACHMENTS","taskId","headers","uploadTemporaryAttachments","_axiosError$response8","_axiosError$response9","handleAddArticle","handleRemoveArticle","Dialog","open","Panel","Title","style","opacity","transition","pointerEvents","_task$qualityControl","_task$branch","onTaskUpdated","task","hasPermission","usePermissions","setStatus","attachments","setAttachments","dateString","confirmDelete","setConfirmDelete","linkedArticles","setLinkedArticles","canDeleteTask","handleResize","fetchLinkedArticles","fetchAttachments","CARTICLES","uploadFileAndInsertLink","location","origin","ATTACHMENT","_axiosError$response10","_axiosError$response11","put","_axiosError$response12","_axiosError$response13","handleDelete","delete","_axiosError$response14","_axiosError$response15","_axiosError$response16","_axiosError$response17","UNLINK_CARTICLE","_axiosError$response18","_axiosError$response19","renderForm","renderAttachments","renderTemporaryAttachments","TrashIcon","responseType","url","Blob","link","document","createElement","setAttribute","body","appendChild","remove","_axiosError$response22","_axiosError$response23","handleDownloadAttachment","attachmentId","escapedAttachmentUrl","_axiosError$response20","_axiosError$response21","handleDeleteAttachment","_attachment$fileType","ListBulletIcon","WorktimeTracker","isTracking","setIsTracking","startTime","setStartTime","elapsedTime","setElapsedTime","activeWorktime","setActiveWorktime","isLoading","setIsLoading","showWorkTimeModal","setShowWorkTimeModal","statusError","setStatusError","updateTrackingStatus","useWorktime","selectedBranch","setSelectedBranch","useBranch","checkActiveWorktime","useCallback","token","WORKTIME","ACTIVE","active","startISOString","endsWith","startTimeDate","diff","totalSeconds","Math","floor","hours","minutes","seconds","toString","padStart","intervalId","setInterval","clearInterval","handleStartTracking","alert","START","getTimezoneOffset","errorMessage","_error$response$data","handleStopTracking","STOP","endTime","_error$response$data2","branchName","useMemo","_branches$find","b","ClockIcon","confirm","force","_error$response","openWorkTimeModal","getMonth","getFullYear","getHours","getMinutes","getSeconds","formatStartDate","WorktimeModal","closeWorkTimeModal","defaultColumnOrder","TODOS_TABLE_ID","defaultCardSortDirections","tableToCardMapping","cardToTableMapping","Worktracker","useLocation","availableColumns","shortLabel","filterOnlyColumns","tasks","setTasks","searchTerm","setSearchTerm","statusFilter","setStatusFilter","filterConditions","setFilterConditions","filterLogicalOperators","setFilterLogicalOperators","activeFilterName","setActiveFilterName","selectedFilterId","setSelectedFilterId","isFilterModalOpen","setIsFilterModalOpen","sortConfig","setSortConfig","key","direction","isCreateModalOpen","setIsCreateModalOpen","isEditModalOpen","setIsEditModalOpen","selectedTask","setSelectedTask","copiedTask","setCopiedTask","settings","isLoadingSettings","updateColumnOrder","updateHiddenColumns","toggleColumnVisibility","isColumnVisible","updateViewMode","useTableSettings","defaultHiddenColumns","defaultViewMode","draggedColumn","setDraggedColumn","dragOverColumn","setDragOverColumn","displayLimit","setDisplayLimit","viewMode","cardSortDirections","setCardSortDirections","cardMetadataOrder","columnOrder","cardMetadata","forEach","tableCol","cardMeta","push","getCardMetadataFromColumnOrder","hiddenCardMetadata","hiddenTableColumns","Set","add","getHiddenCardMetadata","hiddenColumns","visibleCardMetadata","meta","has","querySelectorAll","wrapper","classList","hasLoadedRef","loadTasks","editTaskId","URLSearchParams","search","SAVED_FILTERS","BY_TABLE","aktuellFilter","applyFilterConditions","conditions","operators","setInitialFilter","existingFilters","Authorization","archivFilterExists","some","aktuellFilterExists","archivFilter","tableId","column","operator","createStandardFilters","handleStatusChange","newStatus","prevTasks","patch","toast","success","isResponsibleForTask","_user$roles","userRole","_userRole$role","_task$role","isQualityControlForTask","handleSort","renderStatusButtons","buttons","ArrowLeftIcon","ArrowRightIcon","getActiveFilterCount","resetFilterConditions","handleFilterChange","getStatusPriority","filteredAndSortedTasks","searchLower","result","condition","conditionMet","responsibleValue","userId","qualityControlValue","combinedValue","responsibleName","qualityControlName","taskDate","filterDate","toDateString","sort","sortableColumns","colId","columnId","valueA","valueB","MAX_SAFE_INTEGER","comparison","String","localeCompare","aDate","bDate","aStatusPrio","bStatusPrio","handleMoveColumn","dragIndex","hoverIndex","newColumnOrder","splice","handleDragStart","handleDragEnd","visibleColumnIds","handleCopyTask","_task$qualityControl2","copiedTaskData","width","height","PlusIcon","FunnelIcon","TableColumnConfig","columns","visibleColumns","from","onToggleColumnVisibility","tableColumn","onMoveColumn","newCardOrder","dragged","newTableOrder","usedTableColumns","col","sortDirections","onSortDirectionChange","showSortDirection","buttonTitle","modalTitle","FilterPane","onApply","onReset","savedConditions","savedOperators","SavedFilterTags","onSelectFilter","onFilterChange","defaultFilterName","scope","draggable","onDragStart","onDragEnd","colSpan","ClipboardDocumentListIcon","showImagePreview","expiryStatusForDate","expiryColorsForDate","PencilIcon","CardGrid","metadata","section","dueDateItem","CalendarIcon","format","locale","de","descriptionContent","actionButtons","DataCard","color","onPreviousClick","onNextClick","actions","prevLimit","expiryStatusForDate2","expiryColorsForDate2","CreateTaskModal","newTask","EditTaskModal","updatedTask","Bars2Icon","ChevronLeftIcon","_activeWorktime$branc","selectedDate","initialSelectedDate","today","defaultDate","worktimes","setWorktimes","setSelectedDate","totalDuration","setTotalDuration","isActiveWorktimeRelevant","fetchWorktimes","formattedDate","sortedWorktimes","activeResponse","keys","totalMinutes","worktime","isWorktimeRelevantForSelectedDate","start","activeStart","relevantWorktimes","formatTime","calculateDuration","calculateActiveDuration","EyeIcon","ArrowUpIcon"],"sourceRoot":""}