"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[556],{170:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ae});var a=r(5043),s=r(4117),n=r(2760),l=r(7504),o=r(7012),i=r(2302),d=r(8662),c=r(45);const m=["title","titleId"];function u(e,t){let{title:r,titleId:s}=e,n=(0,c.A)(e,m);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const x=a.forwardRef(u);var h=r(1801),g=r(1923),b=r(1713),y=r(2672),f=r(7952),p=r(7488),v=r(6443),k=r(7591),w=r(7449),j=r(2811),N=r(9248);const C=async e=>{try{return(await g.A.delete(h.Sn.CLIENTS.BY_ID(e))).data}catch(t){throw console.error("Fehler beim L\xf6schen des Clients:",t),t}},S=async()=>{try{return(await g.A.get(h.Sn.CLIENTS.RECENT)).data}catch(e){throw console.error("Fehler beim Laden der zuletzt beratenen Clients:",e),e}};var A=r(9379),T=r(1816),E=r(9422),F=r(5657),D=r(579);const R=e=>{let{isOpen:t,onClose:r,onClientUpdated:n,onClientDeleted:l,client:o}=e;const{t:i}=(0,s.Bd)(),{openSidepane:d,closeSidepane:c}=(0,F.N)(),[m,u]=(0,a.useState)(window.innerWidth>1070),[x,b]=(0,a.useState)({name:"",company:"",email:"",phone:"",address:"",notes:"",isActive:!0}),[y,f]=(0,a.useState)({}),[w,j]=(0,a.useState)(!1),[S,R]=(0,a.useState)(!1),[I,L]=(0,a.useState)(window.innerWidth<640);(0,a.useEffect)((()=>{t&&o&&(b({name:o.name||"",company:o.company||"",email:o.email||"",phone:o.phone||"",address:o.address||"",notes:o.notes||"",isActive:void 0===o.isActive||o.isActive}),R(!1),f({}))}),[t,o]),(0,a.useEffect)((()=>{const e=()=>{L(window.innerWidth<640),u(window.innerWidth>1070)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,a.useEffect)((()=>(t?d():c(),()=>{c()})),[t,d,c]);const _=async e=>{if(e.preventDefault(),(()=>{const e={};return x.name.trim()||(e.name="Name ist erforderlich"),x.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x.email)&&(e.email="Ung\xfcltige E-Mail-Adresse"),f(e),0===Object.keys(e).length})()&&o)try{j(!0);const e=await(async(e,t)=>{try{return(await g.A.put(h.Sn.CLIENTS.BY_ID(e),t)).data}catch(r){throw console.error("Fehler beim Aktualisieren des Clients:",r),r}})(o.id,{name:x.name,company:x.company||void 0,email:x.email||void 0,phone:x.phone||void 0,address:x.address||void 0,notes:x.notes||void 0,isActive:x.isActive});p.oR.success("Client erfolgreich aktualisiert"),null===n||void 0===n||n(e)}catch(a){var t,r;p.oR.error((null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Fehler beim Aktualisieren des Clients")}finally{j(!1)}},O=async()=>{if(S){if(o)try{j(!0),await C(o.id),p.oR.success("Client erfolgreich gel\xf6scht"),null===l||void 0===l||l(o.id),r()}catch(c){var e,t,a,s,n,i,d;const r=(null===(e=c.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Fehler beim L\xf6schen des Clients",l=null===(a=c.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.details,o=null===(n=c.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.suggestion;if(409===(null===(d=c.response)||void 0===d?void 0:d.status)&&l){const e=Object.entries(l).filter((e=>{let[t,r]=e;return r>0})).map((e=>{let[t,r]=e;return"".concat(r," ").concat("workTimes"===t?"Zeiteintr\xe4ge":"consultationInvoices"===t?"Rechnungen":"Monatsberichte")})).join(", ");p.oR.error("".concat(r,". Verkn\xfcpfungen: ").concat(e,". ").concat(o||""))}else p.oR.error(r);R(!1)}finally{j(!1)}}else R(!0)},M=e=>{const{name:t,value:r,type:a}=e.target,s=e.target.checked;b((e=>(0,A.A)((0,A.A)({},e),{},{[t]:"checkbox"===a?s:r}))),y[t]&&f((e=>(0,A.A)((0,A.A)({},e),{},{[t]:""})))},B=()=>{R(!1),f({}),r()};return o?I?(0,D.jsxs)(v.lG,{open:t,onClose:B,className:"relative z-50",children:[(0,D.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,D.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,D.jsxs)(v.lG.Panel,{className:"mx-auto max-w-xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[(0,D.jsx)(v.lG.Title,{className:"text-lg font-semibold dark:text-white",children:"Client bearbeiten"}),(0,D.jsx)("button",{onClick:B,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,D.jsx)(k.A,{className:"h-6 w-6"})})]}),(0,D.jsxs)("form",{onSubmit:_,className:"p-4",children:[(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"name_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name *"}),(0,D.jsx)("input",{type:"text",id:"name_mobile",name:"name",value:x.name,onChange:M,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white ".concat(y.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),y.name&&(0,D.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:y.name})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"company_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Firma"}),(0,D.jsx)("input",{type:"text",id:"company_mobile",name:"company",value:x.company,onChange:M,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"email_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"E-Mail"}),(0,D.jsx)("input",{type:"email",id:"email_mobile",name:"email",value:x.email,onChange:M,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white ".concat(y.email?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),y.email&&(0,D.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:y.email})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"phone_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telefon"}),(0,D.jsx)("input",{type:"tel",id:"phone_mobile",name:"phone",value:x.phone,onChange:M,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"address_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Adresse"}),(0,D.jsx)("input",{type:"text",id:"address_mobile",name:"address",value:x.address,onChange:M,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"notes_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Notizen"}),(0,D.jsx)("textarea",{id:"notes_mobile",name:"notes",rows:3,value:x.notes,onChange:M,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("input",{type:"checkbox",id:"isActive_mobile",name:"isActive",checked:x.isActive,onChange:M,className:"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:text-gray-300"}),(0,D.jsx)("label",{htmlFor:"isActive_mobile",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Aktiv"})]})]}),(0,D.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,D.jsxs)("button",{type:"button",onClick:O,disabled:w,className:"inline-flex items-center px-4 py-2 border ".concat(S?"border-red-300 text-red-700 bg-red-50 dark:border-red-600 dark:text-red-400 dark:bg-red-900/20":"border-red-300 text-red-700 bg-white hover:bg-red-50 dark:border-red-600 dark:text-red-400 dark:bg-gray-700 dark:hover:bg-gray-600"," text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"),children:[(0,D.jsx)(N.A,{className:"h-5 w-5 mr-2"}),S?"Wirklich l\xf6schen?":"L\xf6schen"]}),(0,D.jsxs)("div",{className:"flex space-x-3",children:[(0,D.jsx)("button",{type:"button",onClick:B,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:i("common.cancel"),children:(0,D.jsx)(k.A,{className:"h-5 w-5"})}),(0,D.jsx)("button",{type:"submit",disabled:w,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:w?"Speichere...":"Speichern",children:w?(0,D.jsx)(T.A,{className:"h-5 w-5 animate-spin"}):(0,D.jsx)(E.A,{className:"h-5 w-5"})})]})]})]})]})})]}):(0,D.jsxs)(D.Fragment,{children:[t&&!m&&(0,D.jsx)("div",{className:"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40","aria-hidden":"true",onClick:B,style:{opacity:t?1:0,transition:"opacity 300ms ease-out"}}),(0,D.jsxs)("div",{className:"fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ".concat(t?"translate-x-0":"translate-x-full"),style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",pointerEvents:t?"auto":"none"},"aria-hidden":!t,role:"dialog","aria-modal":t,children:[(0,D.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0",children:[(0,D.jsx)("h2",{className:"text-lg font-semibold dark:text-white",children:"Client bearbeiten"}),(0,D.jsx)("button",{onClick:B,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,D.jsx)(k.A,{className:"h-6 w-6"})})]}),(0,D.jsxs)("div",{className:"p-4 overflow-y-auto flex-1 min-h-0",children:[Object.keys(y).length>0&&(0,D.jsx)("div",{className:"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded",children:Object.values(y).map(((e,t)=>(0,D.jsx)("p",{children:e},t)))}),(0,D.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name *"}),(0,D.jsx)("input",{type:"text",id:"name",name:"name",value:x.name,onChange:M,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white ".concat(y.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),y.name&&(0,D.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:y.name})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Firma"}),(0,D.jsx)("input",{type:"text",id:"company",name:"company",value:x.company,onChange:M,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"E-Mail"}),(0,D.jsx)("input",{type:"email",id:"email",name:"email",value:x.email,onChange:M,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white ".concat(y.email?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),y.email&&(0,D.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:y.email})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telefon"}),(0,D.jsx)("input",{type:"tel",id:"phone",name:"phone",value:x.phone,onChange:M,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Adresse"}),(0,D.jsx)("input",{type:"text",id:"address",name:"address",value:x.address,onChange:M,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Notizen"}),(0,D.jsx)("textarea",{id:"notes",name:"notes",rows:3,value:x.notes,onChange:M,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("input",{type:"checkbox",id:"isActive",name:"isActive",checked:x.isActive,onChange:M,className:"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:text-gray-300"}),(0,D.jsx)("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"Aktiv"})]}),(0,D.jsxs)("div",{className:"flex items-center justify-between pt-4",children:[(0,D.jsx)("button",{type:"button",onClick:O,disabled:w,className:"p-2 rounded-md ".concat(S?"bg-red-600 text-white dark:bg-red-700 dark:text-white hover:bg-red-700 dark:hover:bg-red-600":"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"," disabled:opacity-50 disabled:cursor-not-allowed"),title:S?"L\xf6schen best\xe4tigen":"Client l\xf6schen",children:S?(0,D.jsx)(E.A,{className:"h-5 w-5"}):(0,D.jsx)(N.A,{className:"h-5 w-5"})}),(0,D.jsxs)("div",{className:"flex gap-2",children:[(0,D.jsx)("button",{type:"button",onClick:B,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:i("common.cancel"),children:(0,D.jsx)(k.A,{className:"h-5 w-5"})}),(0,D.jsx)("button",{type:"submit",disabled:w,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:w?"Speichere...":"Speichern",children:w?(0,D.jsx)(T.A,{className:"h-5 w-5 animate-spin"}):(0,D.jsx)(E.A,{className:"h-5 w-5"})})]})]})]})]})]})]}):null},I=e=>{let{isOpen:t,onClose:r,onSelect:s,onCreateNew:n}=e;const[l,o]=(0,a.useState)([]),[i,c]=(0,a.useState)([]),[m,u]=(0,a.useState)(""),[x,b]=(0,a.useState)(!0),[y,f]=(0,a.useState)(null),[S,A]=(0,a.useState)(!1);(0,a.useEffect)((()=>{t&&T()}),[t]),(0,a.useEffect)((()=>{if(m){const e=l.filter((e=>e.name.toLowerCase().includes(m.toLowerCase())||e.company&&e.company.toLowerCase().includes(m.toLowerCase())||e.email&&e.email.toLowerCase().includes(m.toLowerCase())));c(e)}else c(l)}),[m,l]);const T=async()=>{try{b(!0);const e=await g.A.get(h.Sn.CLIENTS.BASE);o(e.data),c(e.data)}catch(e){}finally{b(!1)}};return(0,D.jsxs)(v.lG,{open:t,onClose:r,className:"relative z-50",children:[(0,D.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,D.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,D.jsx)(v.lG.Panel,{className:"mx-auto max-w-2xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:(0,D.jsxs)("div",{className:"p-6",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,D.jsx)(v.lG.Title,{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Client ausw\xe4hlen"}),(0,D.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,D.jsx)(k.A,{className:"h-6 w-6"})})]}),(0,D.jsxs)("div",{className:"relative mb-4",children:[(0,D.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,D.jsx)(w.A,{className:"h-5 w-5 text-gray-400"})}),(0,D.jsx)("input",{type:"text",value:m,onChange:e=>u(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Client suchen...",autoFocus:!0})]}),(0,D.jsx)("div",{className:"max-h-96 overflow-y-auto",children:x?(0,D.jsx)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"Lade Clients..."}):0===i.length?(0,D.jsxs)("div",{className:"text-center py-8",children:[(0,D.jsx)("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:m?"Keine Clients gefunden":"Noch keine Clients vorhanden"}),(0,D.jsxs)("button",{onClick:n,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,D.jsx)(d.A,{className:"h-5 w-5 mr-2"}),"Neuen Client anlegen"]})]}):(0,D.jsx)("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:i.map((e=>(0,D.jsx)("li",{children:(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("button",{onClick:()=>s(e),className:"flex-1 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 text-left transition-colors",children:(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),e.company&&(0,D.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.company}),e.email&&(0,D.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.email})]})}),(0,D.jsxs)("div",{className:"flex items-center space-x-2 px-2",children:[(0,D.jsx)("button",{onClick:t=>((e,t)=>{t.stopPropagation(),f(e),A(!0)})(e,t),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Client bearbeiten",children:(0,D.jsx)(j.A,{className:"h-5 w-5"})}),(0,D.jsx)("button",{onClick:t=>(async(e,t)=>{if(t.stopPropagation(),window.confirm('M\xf6chten Sie den Client "'.concat(e.name,'" wirklich l\xf6schen?')))try{await C(e.id),p.oR.success("Client erfolgreich gel\xf6scht"),T()}catch(s){var r,a;p.oR.error((null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Fehler beim L\xf6schen des Clients")}})(e,t),className:"p-2 text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Client l\xf6schen",children:(0,D.jsx)(N.A,{className:"h-5 w-5"})})]})]})},e.id)))})}),i.length>0&&(0,D.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,D.jsxs)("button",{onClick:n,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,D.jsx)(d.A,{className:"h-5 w-5 mr-2"}),"Neuen Client anlegen"]})})]})})}),y&&(0,D.jsx)(R,{isOpen:S,onClose:()=>{A(!1),f(null)},onClientUpdated:e=>{const t=l.findIndex((t=>t.id===e.id));if(-1!==t){const r=[...l];r[t]=e,o(r),c(r)}A(!1),f(null)},onClientDeleted:e=>{T(),A(!1),f(null)},client:y})]})},L=e=>{let{isOpen:t,onClose:r,onSave:n}=e;const{t:l}=(0,s.Bd)(),{openSidepane:o,closeSidepane:i}=(0,F.N)(),[d,c]=(0,a.useState)(window.innerWidth>1070),[m,u]=(0,a.useState)({name:"",company:"",email:"",phone:"",address:"",notes:""}),[x,b]=(0,a.useState)({}),[y,f]=(0,a.useState)(!1),[w,j]=(0,a.useState)(window.innerWidth<640),N=async e=>{if(e.preventDefault(),(()=>{const e={};return m.name.trim()||(e.name="Name ist erforderlich"),m.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.email)&&(e.email="Ung\xfcltige E-Mail-Adresse"),b(e),0===Object.keys(e).length})())try{f(!0);const e=await g.A.post(h.Sn.CLIENTS.BASE,(0,A.A)((0,A.A)({},m),{},{company:m.company||null,email:m.email||null,phone:m.phone||null,address:m.address||null,notes:m.notes||null}));p.oR.success("Client erfolgreich angelegt"),n(e.data),u({name:"",company:"",email:"",phone:"",address:"",notes:""})}catch(a){var t,r;p.oR.error((null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||"Fehler beim Anlegen des Clients")}finally{f(!1)}};(0,a.useEffect)((()=>{const e=()=>{j(window.innerWidth<640),c(window.innerWidth>1070)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,a.useEffect)((()=>(t?o():i(),()=>{i()})),[t,o,i]);const C=e=>{const{name:t,value:r}=e.target;u((e=>(0,A.A)((0,A.A)({},e),{},{[t]:r}))),x[t]&&b((e=>(0,A.A)((0,A.A)({},e),{},{[t]:""})))},S=()=>{u({name:"",company:"",email:"",phone:"",address:"",notes:""}),b({}),r()};return w?(0,D.jsxs)(v.lG,{open:t,onClose:S,className:"relative z-50",children:[(0,D.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,D.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,D.jsxs)(v.lG.Panel,{className:"mx-auto max-w-xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[(0,D.jsx)(v.lG.Title,{className:"text-lg font-semibold dark:text-white",children:"Neuen Client anlegen"}),(0,D.jsx)("button",{onClick:S,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,D.jsx)(k.A,{className:"h-6 w-6"})})]}),(0,D.jsxs)("form",{onSubmit:N,className:"p-4",children:[(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"name_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name *"}),(0,D.jsx)("input",{type:"text",id:"name_mobile",name:"name",value:m.name,onChange:C,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white ".concat(x.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),x.name&&(0,D.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:x.name})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"company_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Firma"}),(0,D.jsx)("input",{type:"text",id:"company_mobile",name:"company",value:m.company,onChange:C,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"email_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"E-Mail"}),(0,D.jsx)("input",{type:"email",id:"email_mobile",name:"email",value:m.email,onChange:C,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white ".concat(x.email?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),x.email&&(0,D.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:x.email})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"phone_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telefon"}),(0,D.jsx)("input",{type:"tel",id:"phone_mobile",name:"phone",value:m.phone,onChange:C,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"address_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Adresse"}),(0,D.jsx)("input",{type:"text",id:"address_mobile",name:"address",value:m.address,onChange:C,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"notes_mobile",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Notizen"}),(0,D.jsx)("textarea",{id:"notes_mobile",name:"notes",rows:3,value:m.notes,onChange:C,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]})]}),(0,D.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,D.jsx)("button",{type:"button",onClick:S,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:l("common.cancel"),children:(0,D.jsx)(k.A,{className:"h-5 w-5"})}),(0,D.jsx)("button",{type:"submit",disabled:y,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",title:y?"Speichere...":"Speichern",children:y?(0,D.jsx)(T.A,{className:"h-5 w-5 animate-spin"}):(0,D.jsx)(E.A,{className:"h-5 w-5"})})]})]})]})})]}):(0,D.jsxs)(D.Fragment,{children:[t&&!d&&(0,D.jsx)("div",{className:"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40","aria-hidden":"true",onClick:S,style:{opacity:t?1:0,transition:"opacity 300ms ease-out"}}),(0,D.jsxs)("div",{className:"fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ".concat(t?"translate-x-0":"translate-x-full"),style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",pointerEvents:t?"auto":"none"},"aria-hidden":!t,role:"dialog","aria-modal":t,children:[(0,D.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0",children:[(0,D.jsx)("h2",{className:"text-lg font-semibold dark:text-white",children:"Neuen Client anlegen"}),(0,D.jsx)("button",{onClick:S,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,D.jsx)(k.A,{className:"h-6 w-6"})})]}),(0,D.jsxs)("div",{className:"p-4 overflow-y-auto flex-1 min-h-0",children:[Object.keys(x).length>0&&(0,D.jsx)("div",{className:"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded",children:Object.values(x).map(((e,t)=>(0,D.jsx)("p",{children:e},t)))}),(0,D.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name *"}),(0,D.jsx)("input",{type:"text",id:"name",name:"name",value:m.name,onChange:C,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white ".concat(x.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),x.name&&(0,D.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:x.name})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"company",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Firma"}),(0,D.jsx)("input",{type:"text",id:"company",name:"company",value:m.company,onChange:C,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"E-Mail"}),(0,D.jsx)("input",{type:"email",id:"email",name:"email",value:m.email,onChange:C,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white ".concat(x.email?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),x.email&&(0,D.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:x.email})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Telefon"}),(0,D.jsx)("input",{type:"tel",id:"phone",name:"phone",value:m.phone,onChange:C,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Adresse"}),(0,D.jsx)("input",{type:"text",id:"address",name:"address",value:m.address,onChange:C,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Notizen"}),(0,D.jsx)("textarea",{id:"notes",name:"notes",rows:3,value:m.notes,onChange:C,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,D.jsx)("button",{type:"button",onClick:S,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:l("common.cancel"),children:(0,D.jsx)(k.A,{className:"h-5 w-5"})}),(0,D.jsx)("button",{type:"submit",disabled:y,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",title:y?"Speichere...":"Speichern",children:y?(0,D.jsx)(T.A,{className:"h-5 w-5 animate-spin"}):(0,D.jsx)(E.A,{className:"h-5 w-5"})})]})]})]})]})]})},_=async e=>{try{return(await g.A.post(h.Sn.CONSULTATIONS.START,e)).data}catch(t){throw console.error("Fehler beim Starten der Beratung:",t),t}},O=async e=>{try{return(await g.A.post(h.Sn.CONSULTATIONS.STOP,e)).data}catch(t){throw console.error("Fehler beim Stoppen der Beratung:",t),t}},M=async(e,t)=>{try{return(await g.A.patch(h.Sn.CONSULTATIONS.UPDATE_NOTES(e),t)).data}catch(r){throw console.error("Fehler beim Aktualisieren der Notizen:",r),r}},B=e=>"isPlaceholder"in e&&!0===e.isPlaceholder,P=e=>{var t,r;let{onConsultationChange:n,onConsultationStarted:c}=e;const{t:m}=(0,s.Bd)(),{user:u}=(0,y.As)(),{selectedBranch:v}=(0,f.O)(),[k,w]=(0,a.useState)(null),[j,N]=(0,a.useState)(!0),[C,A]=(0,a.useState)(!1),[T,E]=(0,a.useState)(!1),[F,R]=(0,a.useState)(!1),[P,U]=(0,a.useState)(null),[z,G]=(0,a.useState)([]),[W,V]=(0,a.useState)(""),[Y,Z]=(0,a.useState)(null),K=(0,a.useRef)(null),[H,q]=(0,a.useState)(3),[Q,$]=(0,a.useState)(0),J=(0,a.useRef)(null),[X,ee]=(0,a.useState)(!1),[te,re]=(0,a.useState)(""),[ae,se]=(0,a.useState)("");(0,a.useEffect)((()=>{ne(),le()}),[]);const ne=async()=>{try{const e=await g.A.get(h.Sn.WORKTIME.ACTIVE);e.data&&e.data.clientId&&(w(e.data),V(e.data.notes||""))}catch(e){}finally{N(!1)}},le=async()=>{try{console.log("=== FRONTEND: loadRecentClients() called ===");const e=await S();console.log("=== FRONTEND: received clients:",e),G(e||[])}catch(e){console.error("=== FRONTEND: loadRecentClients() ERROR ===",e)}},oe=async(e,t)=>{if(v)try{var r;A(!0);const a=new Date((new Date).getTime()-6e4*(new Date).getTimezoneOffset()),s=await _({branchId:v,clientId:e,notes:t||"",startTime:a.toISOString()});w(s),V(t||""),U(null),E(!1),Z(e),window.dispatchEvent(new CustomEvent("consultationChanged")),le(),null===n||void 0===n||n(s),c&&null!==(r=s.client)&&void 0!==r&&r.name&&c(s.client.name),p.oR.success(m("consultations.started"))}catch(a){console.error("Fehler beim Starten der Beratung:",a),p.oR.error(m("consultations.startError"))}finally{A(!1)}else p.oR.error(m("consultations.selectBranch"))},ie=async()=>{if(k)try{await M(k.id,{notes:W})}catch(e){}};(0,a.useEffect)((()=>{if(!k||!W)return;const e=setTimeout((()=>{ie()}),3e4);return()=>clearTimeout(e)}),[W,k]),(0,a.useEffect)((()=>{const e=()=>{le()};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}}),[]);const de=(0,a.useMemo)((()=>0===z.length?85:z.reduce(((e,t)=>e+(6*t.name.length+24)),0)/z.length),[z]),ce=(0,a.useCallback)((()=>{if(!K.current||0===z.length)return;const e=K.current.clientWidth;if(Math.abs(e-Q)<40)return;$(e);const t=e-32-(e<768?8:20)-12,r=Math.max(1,Math.floor(t/de));q(Math.min(r,z.length))}),[z,de,Q]),me=(0,a.useCallback)((()=>{J.current&&clearTimeout(J.current),J.current=setTimeout((()=>{ce()}),150)}),[ce]);(0,a.useEffect)((()=>{if(!K.current)return;const e=new ResizeObserver(me);return e.observe(K.current),window.addEventListener("resize",me),()=>{e.disconnect(),window.removeEventListener("resize",me),J.current&&clearTimeout(J.current)}}),[me]),(0,a.useLayoutEffect)((()=>{ce()}),[ce]);const ue=0===z.length&&j,xe=(0,a.useMemo)((()=>ue?Array(3).fill(null).map(((e,t)=>({id:"placeholder-".concat(t),name:"\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588",isPlaceholder:!0,status:void 0,lastConsultationDate:void 0}))):[]),[ue]),he=ue?xe:z,ge=ue?xe.length:H,be=(0,a.useMemo)((()=>{if(ue||!Y)return he;const e=he.find((e=>e.id===Y));if(!e)return he;return[e,...he.filter((e=>e.id!==Y))]}),[he,Y,ue]);return j?(0,D.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:(0,D.jsxs)("div",{className:"animate-pulse",children:[(0,D.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-4"}),(0,D.jsx)("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),(0,D.jsx)("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded"})]})}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,D.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center pl-2 sm:pl-0",children:[(0,D.jsx)(l.A,{className:"h-6 w-6 mr-2 sm:h-6 sm:w-6 sm:mr-2"}),m("consultations.trackerTitle")]}),k&&(0,D.jsxs)("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[(0,D.jsx)(o.A,{className:"h-5 w-5 mr-2 animate-pulse"}),(0,D.jsxs)("span",{className:"font-medium",children:[(0,b.P0)(k.startTime,null)," - ",null===(t=k.client)||void 0===t?void 0:t.name]})]})]}),k?(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[(0,D.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:m("consultations.activeWith")}),(0,D.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:null===(r=k.client)||void 0===r?void 0:r.name}),(0,D.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[m("consultations.startedAt"),": ",(0,b.fU)(k.startTime)]})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("consultations.notesForConsultation")}),(0,D.jsx)("textarea",{value:W,onChange:e=>V(e.target.value),onBlur:ie,className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",rows:3,placeholder:m("consultations.notesPlaceholder")})]}),(0,D.jsxs)("button",{onClick:async()=>{try{const e=new Date((new Date).getTime()-6e4*(new Date).getTimezoneOffset()),t=await O({endTime:e.toISOString(),notes:W||void 0});w(null),V(""),p.oR.success(m("consultations.stopped")),le(),null===n||void 0===n||n(t),console.log("\ud83d\uded1 ConsultationTracker: Sending consultationChanged event (stop)"),window.dispatchEvent(new CustomEvent("consultationChanged"))}catch(r){var e,t;p.oR.error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||m("consultations.stopError"))}},className:"w-full flex items-center justify-center px-4 py-3 border border-transparent text-base font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[(0,D.jsx)(i.A,{className:"h-5 w-5 mr-2"}),m("consultations.stop")]})]}):(0,D.jsxs)("div",{className:"space-y-4",children:[be.length>0&&!X&&(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:be.some((e=>!B(e)&&"planned"===e.status))?m("consultations.recentAndPlanned"):m("consultations.recent")}),(0,D.jsxs)("div",{ref:K,className:"flex items-center gap-0.5 md:gap-6",children:[(0,D.jsx)("button",{onClick:()=>R(!0),disabled:ue,className:"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center flex-shrink-0 ".concat(ue?"opacity-50 cursor-not-allowed":""),style:{width:"30.19px",height:"30.19px"},title:m("consultations.createClient"),"aria-label":m("consultations.createClient"),children:(0,D.jsx)(d.A,{className:"h-4 w-4"})}),(0,D.jsx)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:be.slice(0,ge).map(((e,t)=>{!B(e)&&e.status;const r=!B(e)&&"planned"===e.status;return(0,D.jsxs)("button",{onClick:()=>!B(e)&&oe(Number(e.id),W),disabled:B(e),className:"inline-flex items-center px-3 py-2 rounded-full text-sm font-medium flex-shrink-0 transition-colors ".concat(B(e)?"bg-gray-200 dark:bg-gray-600 text-gray-400 dark:text-gray-500 animate-pulse cursor-default":r?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 hover:bg-blue-200 dark:hover:bg-blue-900/50 cursor-pointer border border-blue-200 dark:border-blue-700":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600 cursor-pointer"),title:B(e)?m("common.loading"):r?m("consultations.plannedWith",{clientName:e.name,date:e.lastConsultationDate?new Date(e.lastConsultationDate).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"}):""}):m("consultations.startWith",{clientName:e.name,date:e.lastConsultationDate?new Date(e.lastConsultationDate).toLocaleDateString("de-DE"):""}),children:[r&&!B(e)&&(0,D.jsx)("svg",{className:"h-3 w-3 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,D.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),(0,D.jsx)("span",{className:"truncate max-w-[120px]",children:B(e)?(0,D.jsx)("span",{className:"inline-block w-16 h-4 bg-gray-300 dark:bg-gray-500 rounded animate-pulse"}):e.name})]},e.id)}))})]})]}),(0,D.jsxs)("div",{className:"flex gap-6",children:[(0,D.jsx)("button",{onClick:()=>E(!0),className:"w-2/3 flex items-center justify-center px-4 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",title:m("consultations.start"),children:(0,D.jsx)(x,{className:"h-5 w-5"})}),(0,D.jsx)("button",{onClick:()=>{ee(!X),U(null),re(""),se(""),V("")},className:"w-1/3 flex items-center justify-center px-4 py-3 border text-base font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(X?"border-blue-500 text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"),title:m("consultations.plan"),children:(0,D.jsx)(o.A,{className:"h-5 w-5"})})]}),X&&(0,D.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 space-y-3",children:[(0,D.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:m("consultations.planConsultation")}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:m("consultations.columns.client")}),P?(0,D.jsxs)("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2",children:[(0,D.jsx)("span",{className:"text-sm text-gray-900 dark:text-white",children:P.name}),(0,D.jsx)("button",{onClick:()=>E(!0),className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:m("consultations.change")})]}):(0,D.jsx)("button",{onClick:()=>E(!0),className:"w-full text-left bg-white dark:bg-gray-800 rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 text-sm text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700",children:m("consultations.selectClientPlaceholder")})]}),(0,D.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:m("consultations.columns.startTime")}),(0,D.jsx)("input",{type:"datetime-local",value:te,onChange:e=>re(e.target.value),className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:m("consultations.columns.endTime")}),(0,D.jsx)("input",{type:"datetime-local",value:ae,onChange:e=>se(e.target.value),className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:m("consultations.columns.notes")}),(0,D.jsx)("textarea",{value:W,onChange:e=>V(e.target.value),className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white",rows:2,placeholder:m("consultations.optionalNotes")})]}),(0,D.jsx)("div",{className:"flex justify-end",children:(0,D.jsx)("button",{onClick:async()=>{if(P)if(te&&ae)if(v)try{A(!0);const e=new Date(te),t=new Date(e.getTime()-6e4*e.getTimezoneOffset()),r=new Date(ae),a=new Date(r.getTime()-6e4*r.getTimezoneOffset()),s=(await _({branchId:v,clientId:P.id,notes:W||"",startTime:t.toISOString()}),await O({endTime:a.toISOString(),notes:W||""}));ee(!1),re(""),se(""),V(""),U(null),Z(P.id),console.log("\ud83d\ude80 ConsultationTracker: Sending consultationChanged event (start)"),window.dispatchEvent(new CustomEvent("consultationChanged")),le(),null===n||void 0===n||n(s),c&&P.name&&c(P.name),p.oR.success(m("consultations.manualSaveSuccess"))}catch(e){console.error("Fehler beim Erfassen der Beratung:",e),p.oR.error(m("consultations.manualSaveError"))}finally{A(!1)}else p.oR.error(m("consultations.selectBranch"));else p.oR.error("Bitte geben Sie Start- und Endzeit an");else p.oR.error("Bitte w\xe4hlen Sie einen Client aus")},disabled:!P||!te||!ae,className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:m("consultations.saveConsultation")})})]})]})]}),(0,D.jsx)(I,{isOpen:T,onClose:()=>E(!1),onSelect:e=>{U(e),E(!1),X||oe(e.id,W)},onCreateNew:()=>{E(!1),R(!0)}}),(0,D.jsx)(L,{isOpen:F,onClose:()=>R(!1),onSave:e=>{R(!1),U(e),le()}})]})};var U=r(8010),z=r(2704),G=r(3315),W=r(9670),V=r(3216);const Y=e=>{let{isOpen:t,onClose:r,consultationId:n,onTaskLinked:l}=e;const{t:o}=(0,s.Bd)(),[i,d]=(0,a.useState)([]),[c,m]=(0,a.useState)([]),[u,x]=(0,a.useState)(""),[b,y]=(0,a.useState)(!0),[f,j]=(0,a.useState)(null);(0,a.useEffect)((()=>{t&&N()}),[t]),(0,a.useEffect)((()=>{if(u){const e=i.filter((e=>e.title.toLowerCase().includes(u.toLowerCase())));m(e)}else m(i)}),[u,i]);const N=async()=>{try{y(!0);const e=(await g.A.get(h.Sn.TASKS.BASE)).data.filter((e=>"open"===e.status||"in_progress"===e.status));d(e),m(e)}catch(e){p.oR.error(o("consultations.linkTask.loadError"))}finally{y(!1)}};return(0,D.jsxs)(v.lG,{open:t,onClose:r,className:"relative z-50",children:[(0,D.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,D.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,D.jsx)(v.lG.Panel,{className:"mx-auto max-w-2xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:(0,D.jsxs)("div",{className:"p-6",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,D.jsx)(v.lG.Title,{className:"text-lg font-medium text-gray-900 dark:text-white",children:o("consultations.linkTask.title")}),(0,D.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,D.jsx)(k.A,{className:"h-6 w-6"})})]}),(0,D.jsxs)("div",{className:"relative mb-4",children:[(0,D.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,D.jsx)(w.A,{className:"h-5 w-5 text-gray-400"})}),(0,D.jsx)("input",{type:"text",value:u,onChange:e=>x(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:o("consultations.linkTask.searchPlaceholder"),autoFocus:!0})]}),(0,D.jsx)("div",{className:"max-h-96 overflow-y-auto",children:b?(0,D.jsx)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:o("common.loading")}):0===c.length?(0,D.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:o("consultations.linkTask.noTasksFound")}):(0,D.jsx)("div",{className:"space-y-2",children:c.map((e=>(0,D.jsxs)("label",{className:"flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",children:[(0,D.jsx)("input",{type:"radio",name:"task",value:e.id,checked:f===e.id,onChange:()=>j(e.id),className:"mr-3"}),(0,D.jsxs)("div",{className:"flex-1",children:[(0,D.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:e.title}),e.responsible&&(0,D.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[o("tasks.columns.responsible"),": ",e.responsible.firstName," ",e.responsible.lastName]})]}),(0,D.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("open"===e.status?"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"),children:"open"===e.status?o("tasks.status.open"):o("tasks.status.in_progress")})]},e.id)))})}),(0,D.jsxs)("div",{className:"mt-6 flex items-center justify-end space-x-3",children:[(0,D.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:o("common.cancel")}),(0,D.jsx)("button",{onClick:async()=>{if(f)try{await g.A.post(h.Sn.CONSULTATIONS.LINK_TASK(n),{taskId:f}),p.oR.success(o("consultations.linkTask.success")),l(),r()}catch(a){var e,t;p.oR.error((null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||o("consultations.linkTask.error"))}else p.oR.error(o("consultations.linkTask.selectTask"))},disabled:!f,className:"px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:o("consultations.linkTask.link")})]})]})})})]})};var Z=r(4426),K=r(7829),H=r(9837),q=r(887),Q=r(4538),$=r(8416),J=r(9531);const X=e=>{let{isOpen:t,onClose:r,invoiceId:s,invoiceNumber:n,totalAmount:l,clientName:o}=e;const[i,d]=(0,a.useState)(!1);return t?(0,D.jsxs)(v.lG,{open:t,onClose:r,className:"relative z-50",children:[(0,D.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,D.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,D.jsx)(v.lG.Panel,{className:"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:(0,D.jsxs)("div",{className:"p-6",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)(Q.A,{className:"h-8 w-8 text-green-500 mr-3"}),(0,D.jsx)(v.lG.Title,{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Rechnung erstellt"})]}),(0,D.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,D.jsx)(k.A,{className:"h-6 w-6"})})]}),(0,D.jsxs)("div",{className:"space-y-4",children:[(0,D.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:[(0,D.jsx)("h3",{className:"font-medium text-green-800 dark:text-green-200 mb-2",children:"Rechnung erfolgreich erstellt"}),(0,D.jsxs)("div",{className:"text-sm text-green-700 dark:text-green-300 space-y-1",children:[(0,D.jsxs)("p",{children:[(0,D.jsx)("strong",{children:"Rechnungsnummer:"})," ",n]}),(0,D.jsxs)("p",{children:[(0,D.jsx)("strong",{children:"Kunde:"})," ",o]}),(0,D.jsxs)("p",{children:[(0,D.jsx)("strong",{children:"Betrag:"})," CHF ",l]})]})]}),(0,D.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,D.jsx)("h4",{className:"font-medium text-blue-800 dark:text-blue-200 mb-2",children:"N\xe4chste Schritte"}),(0,D.jsxs)("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[(0,D.jsx)("li",{children:"\u2022 PDF herunterladen und an Kunde senden"}),(0,D.jsx)("li",{children:"\u2022 Beratungen sind nun als abgerechnet markiert"}),(0,D.jsx)("li",{children:"\u2022 Rechnung in der Rechnungsverwaltung verwalten"})]})]})]}),(0,D.jsxs)("div",{className:"mt-6 flex flex-col space-y-3",children:[(0,D.jsx)("button",{onClick:async()=>{try{d(!0);const e=await g.A.get(h.Sn.CONSULTATION_INVOICES.GENERATE_PDF(s),{responseType:"blob",headers:{Accept:"application/pdf"}}),t=new Blob([e.data],{type:"application/pdf"}),r=window.URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download="Rechnung_".concat(n,".pdf"),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r),p.oR.success("PDF erfolgreich heruntergeladen")}catch(r){var e,t;console.error("Fehler beim Download der PDF:",r),p.oR.error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Fehler beim Download der PDF")}finally{d(!1)}},disabled:i,className:"w-full flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"PDF wird generiert..."]}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)($.A,{className:"h-5 w-5 mr-2"}),"PDF herunterladen"]})}),(0,D.jsxs)("button",{onClick:()=>{p.oR.info("Rechnungsverwaltung wird in Phase 5 implementiert"),r()},className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[(0,D.jsx)(J.A,{className:"h-5 w-5 mr-2"}),"Zur Rechnungsverwaltung"]}),(0,D.jsx)("button",{onClick:r,className:"w-full px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:"Schlie\xdfen"})]})]})})})]}):null},ee=e=>{let{isOpen:t,onClose:r,consultations:s,onInvoiceCreated:l}=e;const{t:o}=useTranslation(),{hasPermission:i}=(0,n.S)(),[d,c]=(0,a.useState)(!1),[m,u]=(0,a.useState)(null),[x,y]=(0,a.useState)(null),[f,w]=(0,a.useState)(!1),[j,N]=(0,a.useState)({issueDate:(0,H.GP)(new Date,"yyyy-MM-dd"),dueDate:(0,H.GP)(new Date(Date.now()+2592e6),"yyyy-MM-dd"),hourlyRate:0,vatRate:0,notes:""}),C=i("invoice_create","write","button"),S=(0,a.useCallback)((async()=>{try{c(!0);const e=(await g.A.get(h.Sn.INVOICE_SETTINGS.BASE)).data;u(e),N((t=>(0,A.A)((0,A.A)({},t),{},{hourlyRate:e.defaultHourlyRate||0,vatRate:e.defaultVatRate||0})))}catch(t){var e;console.error("Fehler beim Laden der Rechnungseinstellungen:",t),404===(null===(e=t.response)||void 0===e?void 0:e.status)?p.oR.error("Bitte konfigurieren Sie zuerst Ihre Rechnungseinstellungen"):p.oR.error("Fehler beim Laden der Rechnungseinstellungen")}finally{c(!1)}}),[]);if((0,a.useEffect)((()=>{t&&S()}),[t,S]),!C)return(0,D.jsxs)(v.lG,{open:t,onClose:r,className:"relative z-50",children:[(0,D.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,D.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,D.jsx)(v.lG.Panel,{className:"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6",children:(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Keine Berechtigung"}),(0,D.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Sie haben keine Berechtigung, Rechnungen zu erstellen."}),(0,D.jsx)("button",{onClick:r,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Schlie\xdfen"})]})})})]});const E=e=>{const{name:t,value:r}=e.target;N((e=>(0,A.A)((0,A.A)({},e),{},{[t]:r})))},F=s.reduce(((e,t)=>{if(t.endTime){const r=(0,b.P0)(t.startTime,t.endTime);return e+parseFloat(r.replace("h","").replace(",","."))}return e}),0),R=F*j.hourlyRate,I=j.vatRate>0?R*j.vatRate/100:0,L=R+I;return t?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(v.lG,{open:t&&!f,onClose:r,className:"relative z-50",children:[(0,D.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,D.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,D.jsx)(v.lG.Panel,{className:"mx-auto max-w-2xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:(0,D.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!m)return void p.oR.error("Rechnungseinstellungen konnten nicht geladen werden");if(0===s.length)return void p.oR.error("Keine Beratungen zum Abrechnen vorhanden");const t=[...new Set(s.map((e=>e.clientId)))];if(t.length>1)return void p.oR.error("Alle Beratungen m\xfcssen den gleichen Kunden haben");const r=t[0];if(r)try{var a,n;c(!0);const e=(await g.A.post(h.Sn.CONSULTATION_INVOICES.CREATE_FROM_CONSULTATIONS,{consultationIds:s.map((e=>e.id)),clientId:r,issueDate:j.issueDate,dueDate:j.dueDate,hourlyRate:j.hourlyRate,vatRate:j.vatRate||0,notes:j.notes})).data,t=(null===(a=s[0])||void 0===a||null===(n=a.client)||void 0===n?void 0:n.name)||"Unbekannt";y({id:e.id,invoiceNumber:e.invoiceNumber,total:e.total,clientName:t}),w(!0),l(e.id)}catch(d){var o,i;p.oR.error((null===(o=d.response)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.message)||"Fehler beim Erstellen der Rechnung")}finally{c(!1)}else p.oR.error("Kein g\xfcltiger Kunde in den Beratungen gefunden")},className:"p-6",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,D.jsx)(v.lG.Title,{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Rechnung erstellen"}),(0,D.jsx)("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,D.jsx)(k.A,{className:"h-6 w-6"})})]}),(0,D.jsxs)("div",{className:"mb-6 bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[(0,D.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Zu verrechnende Beratungen"}),(0,D.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:s.map((e=>{var t;return(0,D.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,D.jsx)("div",{children:(0,D.jsxs)("span",{className:"text-gray-900 dark:text-white",children:[null===(t=e.client)||void 0===t?void 0:t.name," - ",(0,b.fU)(e.startTime)]})}),(0,D.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:(0,b.P0)(e.startTime,e.endTime)})]},e.id)}))}),(0,D.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600 flex justify-between text-sm font-medium",children:[(0,D.jsx)("span",{children:"Gesamtdauer:"}),(0,D.jsxs)("span",{children:[F.toFixed(2),"h"]})]})]}),(0,D.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rechnungsdatum"}),(0,D.jsx)("input",{type:"date",name:"issueDate",value:j.issueDate,onChange:E,className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"F\xe4lligkeitsdatum"}),(0,D.jsx)("input",{type:"date",name:"dueDate",value:j.dueDate,onChange:E,className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Stundensatz (CHF)"}),(0,D.jsx)("input",{type:"number",name:"hourlyRate",value:j.hourlyRate,onChange:E,step:"0.01",min:"0",className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"MwSt.-Satz (%)"}),(0,D.jsx)("input",{type:"number",name:"vatRate",value:j.vatRate,onChange:E,step:"0.1",min:"0",max:"100",className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),(0,D.jsxs)("div",{className:"mb-6",children:[(0,D.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Zus\xe4tzliche Notizen"}),(0,D.jsx)("textarea",{name:"notes",value:j.notes,onChange:E,rows:3,className:"w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Optionale Notizen zur Rechnung..."})]}),(0,D.jsxs)("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,D.jsx)("h3",{className:"font-medium text-blue-800 dark:text-blue-200 mb-3",children:"Kosten\xfcbersicht"}),(0,D.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,D.jsxs)("div",{className:"flex justify-between",children:[(0,D.jsxs)("span",{children:["Beratungszeit (",F.toFixed(2),"h \xd7 CHF ",j.hourlyRate,"):"]}),(0,D.jsxs)("span",{children:["CHF ",R.toFixed(2)]})]}),j.vatRate>0&&(0,D.jsxs)("div",{className:"flex justify-between",children:[(0,D.jsxs)("span",{children:["MwSt. (",j.vatRate,"%):"]}),(0,D.jsxs)("span",{children:["CHF ",I.toFixed(2)]})]}),(0,D.jsxs)("div",{className:"border-t border-blue-200 dark:border-blue-700 pt-2 flex justify-between font-medium",children:[(0,D.jsx)("span",{children:"Gesamtbetrag:"}),(0,D.jsxs)("span",{children:["CHF ",L.toFixed(2)]})]})]})]}),(0,D.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,D.jsx)("button",{type:"button",onClick:r,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:o("common.cancel"),children:(0,D.jsx)(k.A,{className:"h-5 w-5"})}),(0,D.jsx)("button",{type:"submit",disabled:d||!m||0===F,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",title:d?"Erstelle Rechnung...":"Rechnung erstellen",children:d?(0,D.jsx)(T.A,{className:"h-5 w-5 animate-spin"}):(0,D.jsx)(z.A,{className:"h-5 w-5"})})]})]})})})]}),f&&x&&(0,D.jsx)(X,{isOpen:f,onClose:()=>{w(!1),y(null),r()},invoiceId:x.id,invoiceNumber:x.invoiceNumber,totalAmount:Number(x.total).toFixed(2),clientName:x.clientName})]}):null},te="consultations-table",re=(0,a.forwardRef)(((e,t)=>{let{onConsultationChange:r}=e;const{t:l}=(0,s.Bd)(),{hasPermission:i}=(0,n.S)(),d=(0,V.Zp)(),[c,m]=(0,a.useState)([]),[u,x]=(0,a.useState)([]),[y,f]=(0,a.useState)(!0),[v,w]=(0,a.useState)(null),[j,C]=(0,a.useState)(""),[T,F]=(0,a.useState)(!1),[R,I]=(0,a.useState)([]),[L,_]=(0,a.useState)([]),[O,B]=(0,a.useState)(null),[P,Q]=(0,a.useState)(""),[$,J]=(0,a.useState)(null),[X,re]=(0,a.useState)(null),[ae,se]=(0,a.useState)(""),[ne,le]=(0,a.useState)(!1),[oe,ie]=(0,a.useState)(null),[de,ce]=(0,a.useState)(l("consultations.filters.today")),[me,ue]=(0,a.useState)(null),[xe,he]=(0,a.useState)(!1),ge=async()=>{try{f(!0);const e=await(async(e,t,r)=>{try{const a=new URLSearchParams;e&&a.append("clientId",e.toString()),t&&a.append("from",t),r&&a.append("to",r);const s=a.toString()?"".concat(h.Sn.CONSULTATIONS.BASE,"?").concat(a):h.Sn.CONSULTATIONS.BASE;return(await g.A.get(s)).data}catch(v){throw console.error("Fehler beim Laden der Beratungen:",v),v}})();m(e||[]),w(null)}catch(v){console.error("Fehler beim Laden der Beratungen:",v),w(l("consultations.loadError"))}finally{f(!1)}};(0,a.useImperativeHandle)(t,(()=>({refresh:ge,addConsultation:e=>{m((t=>[e,...t]))},updateConsultation:e=>{m((t=>t.map((t=>t.id===e.id?e:t))))},removeConsultation:e=>{m((t=>t.filter((t=>t.id!==e))))},activateClientFilter:be}))),(0,a.useEffect)((()=>{ge(),(async()=>{try{const e=await S();x(e||[])}catch(v){}})()}),[]),(0,a.useEffect)((()=>{(async()=>{try{const e=await g.A.get(h.Sn.SAVED_FILTERS.BY_TABLE(te)),t=e.data.find((e=>"Heute"===e.name));t&&(ce(l("consultations.filters.today")),ue(t.id),ye(t.conditions,t.operators))}catch(v){console.error("Fehler beim Setzen des initialen Filters:",v)}})()}),[]);const be=async e=>{try{const t=await g.A.get(h.Sn.SAVED_FILTERS.BY_TABLE(te));let r=t.data.find((t=>t.name===e));if(!r){const t={tableId:te,name:e,conditions:[{column:"client",operator:"equals",value:e}],operators:[]};r=(await g.A.post(h.Sn.SAVED_FILTERS.BASE,t)).data,window.refreshSavedFilters&&window.refreshSavedFilters()}r&&(ce(e),ue(r.id),ye(r.conditions,r.operators))}catch(v){console.error("Fehler beim Erstellen/Aktivieren des Client-Filters:",v)}};(0,a.useEffect)((()=>{(async()=>{try{if(!localStorage.getItem("token"))return;const e=(await g.A.get(h.Sn.SAVED_FILTERS.BY_TABLE(te))).data,t=e.find((e=>"Alle"===e.name));if(t)try{await g.A.delete(h.Sn.SAVED_FILTERS.BY_ID(t.id)),console.log('Veralteter "Alle" Filter gel\xf6scht')}catch(v){console.error('Fehler beim L\xf6schen des "Alle" Filters:',v)}const r=e.find((e=>"Diese Woche"===e.name));if(r)try{await g.A.delete(h.Sn.SAVED_FILTERS.BY_ID(r.id)),console.log('Veralteter "Diese Woche" Filter gel\xf6scht')}catch(v){console.error('Fehler beim L\xf6schen des "Diese Woche" Filters:',v)}const a=e.some((e=>"Archiv"===e.name)),s=e.some((e=>"Heute"===e.name)),n=e.some((e=>"Woche"===e.name)),o=e.some((e=>"Nicht abgerechnet"===e.name));if(!a){const e=(new Date).toISOString().split("T")[0],t={tableId:te,name:"Archiv",conditions:[{column:"startTime",operator:"before",value:e}],operators:[]};try{await g.A.post(h.Sn.SAVED_FILTERS.BASE,t)}catch(v){console.error("Fehler beim Erstellen des Archiv-Filters:",v)}}if(!s){const e={tableId:te,name:l("consultations.filters.today"),conditions:[{column:"startTime",operator:"equals",value:"__TODAY__"}],operators:[]};try{await g.A.post(h.Sn.SAVED_FILTERS.BASE,e)}catch(v){console.error("Fehler beim Erstellen des Heute-Filters:",v)}}if(!n){const e={tableId:te,name:l("consultations.filters.week"),conditions:[{column:"startTime",operator:"after",value:"__TODAY__"},{column:"startTime",operator:"before",value:"__WEEK_FROM_TODAY__"}],operators:["AND"]};try{await g.A.post(h.Sn.SAVED_FILTERS.BASE,e)}catch(v){console.error("Fehler beim Erstellen des Woche-Filters:",v)}}if(!o){const e={tableId:te,name:l("consultations.filters.unbilled"),conditions:[{column:"invoiceStatus",operator:"equals",value:"nicht abgerechnet"}],operators:[]};try{await g.A.post(h.Sn.SAVED_FILTERS.BASE,e)}catch(v){console.error("Fehler beim Erstellen des Nicht abgerechnet-Filters:",v)}}}catch(v){console.error("Fehler beim Erstellen der Standard-Filter:",v)}})()}),[]),(0,a.useEffect)((()=>{const e=setTimeout((()=>{(async()=>{try{const e=(await g.A.get(h.Sn.SAVED_FILTERS.BY_TABLE(te))).data,t=e.find((e=>"Heute"===e.name));if(t&&t.conditions.length>0){const e=t.conditions[0];e.value&&"__TODAY__"!==e.value&&/^\d{4}-\d{2}-\d{2}$/.test(e.value)&&(console.log("Aktualisiere Heute-Filter mit dynamischem Marker..."),await g.A.post(h.Sn.SAVED_FILTERS.BASE,{tableId:te,name:l("consultations.filters.today"),conditions:[{column:"startTime",operator:"equals",value:"__TODAY__"}],operators:[]}))}const r=e.find((e=>"Woche"===e.name));if(r&&r.conditions.length>=2){const e=r.conditions[0],t=r.conditions[1];("__TODAY__"!==e.value&&/^\d{4}-\d{2}-\d{2}$/.test(e.value)||"__WEEK_FROM_TODAY__"!==t.value&&/^\d{4}-\d{2}-\d{2}$/.test(t.value))&&(console.log("Aktualisiere Woche-Filter mit dynamischen Markern..."),await g.A.post(h.Sn.SAVED_FILTERS.BASE,{tableId:te,name:l("consultations.filters.week"),conditions:[{column:"startTime",operator:"after",value:"__TODAY__"},{column:"startTime",operator:"before",value:"__WEEK_FROM_TODAY__"}],operators:["AND"]}))}}catch(v){console.error("Fehler beim Aktualisieren bestehender Filter:",v)}})()}),1e3);return()=>clearTimeout(e)}),[]),(0,a.useEffect)((()=>{const e=setTimeout((()=>{(async()=>{if(0!==u.length)try{if(!localStorage.getItem("token"))return;const e=(await g.A.get(h.Sn.SAVED_FILTERS.BY_TABLE(te))).data,t=e.filter((e=>![l("consultations.filters.archive"),l("consultations.filters.today"),l("consultations.filters.week")].includes(e.name))),r=u.map((e=>e.name));for(const a of t)if(!r.includes(a.name))try{await g.A.delete(h.Sn.SAVED_FILTERS.BY_ID(a.id)),console.log("Veralteter Client-Filter gel\xf6scht: ".concat(a.name))}catch(v){console.error("Fehler beim L\xf6schen des veralteten Client-Filters ".concat(a.name,":"),v)}for(const a of u){const t=a.name;if(!e.some((e=>e.name===t))){const e={tableId:te,name:t,conditions:[{column:"client",operator:"equals",value:a.name}],operators:[]};await g.A.post(h.Sn.SAVED_FILTERS.BASE,e),console.log("Neuer Client-Filter erstellt: ".concat(t))}}}catch(v){console.error("Fehler beim Aktualisieren der Client-Filter:",v)}})()}),500);return()=>clearTimeout(e)}),[u]);const ye=(e,t)=>{I(e),_(t)},fe=()=>{I([]),_([])},pe=()=>R.length,ve=e=>{(async(e,t)=>{try{await M(e,{notes:t}),m((r=>r.map((r=>r.id===e?(0,A.A)((0,A.A)({},r),{},{notes:t}):r)))),p.oR.success(l("consultations.notesUpdated"))}catch(v){console.error("Fehler beim Aktualisieren der Notizen:",v),p.oR.error(l("consultations.notesUpdateError"))}})(e,P),B(null)},ke=()=>{B(null),Q("")},we=(e,t)=>{J(e.id),re(t);const r="startTime"===t?e.startTime:e.endTime;if(r){const e=new Date(r),t=e.getUTCFullYear(),a=String(e.getUTCMonth()+1).padStart(2,"0"),s=String(e.getUTCDate()).padStart(2,"0"),n=String(e.getUTCHours()).padStart(2,"0"),l=String(e.getUTCMinutes()).padStart(2,"0"),o="".concat(t,"-").concat(a,"-").concat(s,"T").concat(n,":").concat(l);console.log("\ud83d\udd27 DEBUG handleTimeEdit (KORRIGIERT):"),console.log("- DB Zeit (UTC):",r),console.log("- Extrahierte UTC-Komponenten:","".concat(n,":").concat(l)),console.log("- inputValue f\xfcr datetime-local:",o),se(o)}},je=async e=>{if(X&&ae)try{const t="".concat(ae,":00.000Z");console.log("\ud83d\udd27 DEBUG handleTimeSave (REFACTORED):"),console.log("- editingTimeValue (Input):",ae),console.log("- timeString f\xfcr API (UTC):",t),console.log("- editingTimeType:",X);await(async(e,t)=>{try{return(await g.A.put("".concat(h.Sn.WORKTIME.BASE,"/").concat(e),t)).data}catch(v){throw console.error("Fehler beim Aktualisieren der Zeit:",v),v}})(e,{[X]:t});m((r=>r.map((r=>r.id===e?(0,A.A)((0,A.A)({},r),{},{[X]:t}):r)))),p.oR.success(l("consultations.timeUpdated")),J(null),re(null),se("")}catch(v){var t,r;console.error("Fehler beim Aktualisieren der Zeit:",v),p.oR.error("".concat(l("consultations.timeUpdateError"),": ").concat((null===(t=v.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||v.message))}},Ne=()=>{J(null),re(null),se("")},Ce=async e=>{if(window.confirm(l("consultations.confirmDelete")))try{await(async e=>{try{return(await g.A.delete(h.Sn.CONSULTATIONS.BY_ID(e))).data}catch(v){throw console.error("Fehler beim L\xf6schen der Beratung:",v),v}})(e),m((t=>t.filter((t=>t.id!==e)))),p.oR.success(l("consultations.deleteSuccess")),null===r||void 0===r||r()}catch(v){var t,a;console.error("Fehler beim L\xf6schen der Beratung:",v);const r=(null===(t=v.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||l("consultations.deleteError");p.oR.error(r)}},Se=(0,a.useCallback)((e=>{let t=e;if(j){const e=j.toLowerCase();t=t.filter((t=>{var r,a,s,n,l;return(null===(r=t.client)||void 0===r||null===(a=r.name)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(s=t.notes)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(n=t.branch)||void 0===n||null===(l=n.name)||void 0===l?void 0:l.toLowerCase().includes(e))}))}return R.length>0&&(t=t.filter((e=>{var t,r,a,s,n;let l=!0;for(let o=0;o<R.length;o++){const i=R[o];let d=!1;switch(i.column){case"client":d=(null===(t=e.client)||void 0===t||null===(r=t.name)||void 0===r?void 0:r.toLowerCase().includes(String(i.value).toLowerCase()))||!1;break;case"branch":d=(null===(a=e.branch)||void 0===a||null===(s=a.name)||void 0===s?void 0:s.toLowerCase().includes(String(i.value).toLowerCase()))||!1;break;case"notes":d=(null===(n=e.notes)||void 0===n?void 0:n.toLowerCase().includes(String(i.value).toLowerCase()))||!1;break;case"startTime":const l=new Date(e.startTime).toISOString().split("T")[0];let o=String(i.value);if("__TODAY__"===o){const e=new Date;o=new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0]}else if("__WEEK_FROM_TODAY__"===o){const e=new Date,t=new Date(e.getTime()-6e4*e.getTimezoneOffset()),r=new Date(t);r.setDate(t.getDate()+7),o=r.toISOString().split("T")[0]}switch(i.operator){case"after":d=l>=o;break;case"before":d=l<o;break;case"equals":d=l===o;break;default:d=!1}break;case"duration":const c=Ae(e.startTime,e.endTime),m=60*Number(i.value);switch(i.operator){case"greater_than":d=c>m;break;case"less_than":d=c<m;break;case"equals":d=Math.abs(c-m)<30;break;default:d=!1}break;case"invoiceStatus":const u=(0,b.vv)(e),x=De(e),h=String(i.value).toLowerCase();if("abgerechnet"===h||"invoiced"===h||"ja"===h)d=u||x;else if("nicht abgerechnet"===h||"not invoiced"===h||"nein"===h)d=!u&&!x;else if("einzelrechnung"===h||"invoice"===h)d=u;else if("monatsbericht"===h||"monthly report"===h)d=x;else if(u){const t=(0,b.h4)(e);d=(t?(0,b.Pg)(t.status).toLowerCase():"").includes(h)}else if(x){const t=Re(e);if(t){d=("GENERATED"===t.status?"erstellt":"SENT"===t.status?"gesendet":"archiviert").includes(h)}else d=!1}else d=!1;break;default:d=!1}if(0===o)l=d;else{l="AND"===L[o-1]?l&&d:l||d}}return l}))),t}),[c,j,R,L]),Ae=(e,t)=>{if(!t)return 0;const r=new Date(e);return(new Date(t).getTime()-r.getTime())/6e4},Te=(0,a.useMemo)((()=>Se(c).sort(((e,t)=>new Date(e.startTime).getTime()-new Date(t.startTime).getTime()))),[c,R,L]),Ee=(0,a.useMemo)((()=>(0,b.c$)(Te)),[Te]),Fe=(0,a.useMemo)((()=>(e=>{const t=[];return e.forEach(((r,a)=>{const s=new Date(r.startTime),n=(0,H.GP)(s,"yyyy-MM-dd",{locale:q.de}),o=s.getUTCHours();if(a>0){const r=new Date(e[a-1].startTime);n!==(0,H.GP)(r,"yyyy-MM-dd",{locale:q.de})&&t.push({id:"day-".concat(n),type:"day",date:n,label:(0,H.GP)(s,"EEE, dd.MM.",{locale:q.de}),position:a})}else 0===a&&t.push({id:"day-".concat(n),type:"day",date:n,label:(0,H.GP)(s,"EEE, dd.MM.",{locale:q.de}),position:a});if(a>0){const r=new Date(e[a-1].startTime),s=r.getUTCHours();n===(0,H.GP)(r,"yyyy-MM-dd",{locale:q.de})&&s<12&&o>=12&&t.push({id:"midday-".concat(n),type:"midday",date:n,label:l("consultations.midday"),position:a})}})),t})(Te)),[Te]),De=e=>null!==e.monthlyReportId&&void 0!==e.monthlyReportId,Re=e=>e.monthlyReport,Ie=e=>{const t=e?"/payroll?tab=monthly-reports&reportId=".concat(e):"/payroll?tab=monthly-reports";d(t)},Le=e=>{const t=e?"/payroll?tab=invoices&invoiceId=".concat(e):"/payroll?tab=invoices";d(t)},_e=e=>{d("/worktracker?editTask=".concat(e))};return y?(0,D.jsx)("div",{className:"p-4",children:l("common.loading")}):v?(0,D.jsx)("div",{className:"p-4 text-red-600",children:v}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,D.jsxs)("div",{className:"flex items-center mb-6 justify-between px-2 sm:px-0",children:[(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)(o.A,{className:"h-6 w-6 mr-2 dark:text-white"}),(0,D.jsxs)("div",{children:[(0,D.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:l("consultations.listTitle")}),(0,D.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:[l("consultations.count",{count:Te.length})," - ",l("consultations.total"),": ",Ee]})]})]}),(0,D.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,D.jsx)("input",{type:"text",placeholder:l("common.searchPlaceholder"),className:"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:j,onChange:e=>C(e.target.value)}),(0,D.jsxs)("button",{className:"p-2 rounded-md ".concat(pe()>0?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"hover:bg-gray-100 dark:hover:bg-gray-700"," ml-1 relative"),onClick:()=>F(!T),title:l("consultations.advancedFilters"),children:[(0,D.jsx)(U.A,{className:"h-5 w-5"}),pe()>0&&(0,D.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center",children:pe()})]}),(()=>{if(!i("invoice_create","write","button"))return!1;if(!(Te.length>0))return!1;if(!(R.length>0||""!==j.trim()))return!1;if(!Te.every((e=>e.endTime)))return!1;return!Te.some((e=>(0,b.vv)(e)))})()&&(0,D.jsx)("button",{onClick:()=>{he(!0)},className:"p-2 bg-green-600 hover:bg-green-700 text-white rounded-md transition-colors ml-2",title:l("consultations.createInvoiceFromFiltered"),children:(0,D.jsx)(z.A,{className:"h-5 w-5"})})]})]}),T&&(0,D.jsx)("div",{className:"px-2 sm:px-0",children:(0,D.jsx)(Z.A,{columns:[{id:"client",label:l("consultations.columns.client")},{id:"branch",label:l("consultations.columns.branch")},{id:"notes",label:l("consultations.columns.notes")},{id:"startTime",label:l("consultations.columns.date")},{id:"duration",label:l("consultations.columns.durationHours")},{id:"invoiceStatus",label:l("consultations.columns.invoiceStatus")}],onApply:ye,onReset:fe,savedConditions:R,savedOperators:L,tableId:te})}),(0,D.jsx)("div",{className:"px-2 sm:px-0",children:(0,D.jsx)(K.A,{tableId:te,onSelectFilter:ye,onReset:fe,activeFilterName:de,selectedFilterId:me,onFilterChange:(e,t,r,a)=>{ce(e),ue(t),ye(r,a)}})}),(0,D.jsx)("div",{className:"space-y-0.5 sm:space-y-1",children:0===Te.length?(0,D.jsxs)("div",{className:"text-center py-12 px-2 sm:px-0",children:[(0,D.jsx)(o.A,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"font-medium text-gray-900 dark:text-white",children:l("consultations.noConsultationsFound")}),(0,D.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:j||R.length>0?l("consultations.tryOtherFilters"):l("consultations.noConsultationsYet")})]})]}):Te.map(((e,t)=>{var r,a;const s=Fe.find((e=>"day"===e.type&&e.position===t)),n=Fe.find((e=>"midday"===e.type&&e.position===t));return(0,D.jsxs)("div",{className:"relative",children:[s&&(0,D.jsxs)("div",{className:"flex items-center mb-3 px-2 sm:px-0",children:[(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500 dark:bg-blue-400 border-2 border-white dark:border-gray-800"}),(0,D.jsx)("div",{className:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:s.label})]}),(0,D.jsx)("div",{className:"flex-1 ml-4 h-px bg-gray-200 dark:bg-gray-600"})]}),n&&(0,D.jsxs)("div",{className:"flex items-center mb-3 px-2 sm:px-0",children:[(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-400 dark:bg-gray-500"}),(0,D.jsx)("div",{className:"ml-3 text-xs text-gray-500 dark:text-gray-400",children:n.label})]}),(0,D.jsx)("div",{className:"flex-1 ml-4 h-px bg-gray-300 dark:bg-gray-600"})]}),(0,D.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg md:border md:border-gray-200 md:dark:border-gray-700 hover:shadow-md transition-shadow",children:(0,D.jsx)("div",{className:"p-4",children:(0,D.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,D.jsxs)("div",{className:"col-span-1 space-y-3",children:[(0,D.jsx)("div",{className:"flex items-center space-x-2",children:(0,D.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,D.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:null===(r=e.client)||void 0===r?void 0:r.name}),(null===(a=e.client)||void 0===a?void 0:a.company)&&(0,D.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:e.client.company})]})}),(()=>{const t=(e=>{const t=(0,b.vv)(e),r=De(e);if(t){const t=(0,b.h4)(e);return{type:"invoice",status:l("consultations.invoice"),info:t}}if(r){const t=Re(e);return{type:"monthly",status:l("consultations.monthlyReport"),info:t}}return null})(e);if(t){if("invoice"===t.type)return(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,D.jsx)(z.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),(0,D.jsx)("button",{onClick:()=>{var e;return Le(null===(e=t.info)||void 0===e?void 0:e.id)},className:"text-xs text-green-700 dark:text-green-400 font-medium hover:underline cursor-pointer",children:l("consultations.invoice")})]}),t.info&&"invoiceNumber"in t.info&&(0,D.jsx)("div",{className:"flex items-center space-x-1",children:(0,D.jsx)("button",{onClick:()=>{var e;return Le(null===(e=t.info)||void 0===e?void 0:e.id)},className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium hover:opacity-80 cursor-pointer ".concat((0,b.DW)(t.info.status)),title:"Rechnung ".concat(t.info.invoiceNumber," vom ").concat((0,H.GP)(new Date(t.info.issueDate),"dd.MM.yyyy",{locale:q.de})),children:(0,b.Pg)(t.info.status)})})]});if("monthly"===t.type)return(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,D.jsx)(G.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),(0,D.jsx)("button",{onClick:()=>{var e;return Ie(null===(e=t.info)||void 0===e?void 0:e.id)},className:"text-xs text-green-700 dark:text-green-400 font-medium hover:underline cursor-pointer",children:l("consultations.monthlyReport")})]}),t.info&&"reportNumber"in t.info&&(0,D.jsx)("div",{className:"flex items-center space-x-1",children:(0,D.jsx)("button",{onClick:()=>{var e;return Ie(null===(e=t.info)||void 0===e?void 0:e.id)},className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300 hover:opacity-80 cursor-pointer",title:"Monatsbericht ".concat(t.info.reportNumber),children:"GENERATED"===t.info.status?l("analytics.monthlyReports.status.generated"):"SENT"===t.info.status?l("analytics.monthlyReports.status.sent"):l("analytics.monthlyReports.status.archived")})})]})}return null})(),(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:l("consultations.columns.time")}),(0,D.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:$===e.id&&"startTime"===X||$===e.id&&"endTime"===X?(0,D.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,D.jsx)("input",{type:"datetime-local",value:ae,onChange:e=>se(e.target.value),className:"text-xs rounded border-gray-300 dark:border-gray-600 dark:bg-gray-700 w-full"}),(0,D.jsx)("button",{onClick:()=>je(e.id),className:"p-0.5 text-green-600 hover:text-green-700",title:l("common.save"),children:(0,D.jsx)("svg",{className:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,D.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,D.jsx)("button",{onClick:Ne,className:"p-0.5 text-red-600 hover:text-red-700",title:l("common.cancel"),children:(0,D.jsx)(k.A,{className:"h-3 w-3"})})]}):(0,D.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,D.jsx)("button",{onClick:()=>we(e,"startTime"),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 hover:underline",children:(0,b.fU)(e.startTime)}),(0,D.jsx)("span",{className:"text-gray-400",children:"-"}),e.endTime?(0,D.jsx)("button",{onClick:()=>we(e,"endTime"),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 hover:underline",children:(0,b.fU)(e.endTime)}):(0,D.jsxs)("div",{className:"flex items-center",children:[(0,D.jsx)("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full mr-1 animate-pulse"}),(0,D.jsx)("span",{className:"text-green-600 dark:text-green-400 text-xs",children:l("consultations.active")})]})]})})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:l("consultations.columns.duration")}),(0,D.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(0,b.P0)(e.startTime,e.endTime)})]}),e.taskLinks&&e.taskLinks.length>0&&(0,D.jsxs)("div",{children:[(0,D.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:l("consultations.tasks",{count:e.taskLinks.length})}),(0,D.jsxs)("div",{className:"space-y-1",children:[e.taskLinks.slice(0,2).map((e=>(0,D.jsxs)("button",{onClick:()=>_e(e.task.id),className:"flex items-center text-xs text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded px-2 py-1 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors cursor-pointer w-full text-left",children:[(0,D.jsx)(W.A,{className:"h-3 w-3 mr-1 flex-shrink-0"}),(0,D.jsx)("span",{className:"truncate",children:e.task.title})]},e.id))),e.taskLinks.length>2&&(0,D.jsx)("button",{onClick:()=>{e.taskLinks&&e.taskLinks.length>0&&_e(e.taskLinks[0].task.id)},className:"text-xs text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 cursor-pointer",children:l("consultations.moreTasks",{count:e.taskLinks.length-2})})]})]})]}),(0,D.jsxs)("div",{className:"col-span-2 relative",children:[(0,D.jsxs)("div",{className:"absolute top-0 right-0 flex items-center space-x-1 z-10",children:[i("consultations","write")&&(0,D.jsx)("button",{onClick:()=>{return t=e.id,ie(t),void le(!0);var t},className:"p-1 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 rounded",title:l("consultations.linkTask"),children:(0,D.jsx)(W.A,{className:"h-4 w-4"})}),i("consultations","write")&&e.endTime&&(0,D.jsx)("button",{onClick:()=>Ce(e.id),className:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 rounded",title:l("consultations.delete"),children:(0,D.jsx)(N.A,{className:"h-4 w-4"})})]}),(0,D.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-2",children:l("consultations.columns.notes")}),O===e.id?(0,D.jsxs)("div",{className:"space-y-2",children:[(0,D.jsx)("textarea",{value:P,onChange:e=>Q(e.target.value),className:"w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm resize-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:l("consultations.notesPlaceholder")}),(0,D.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,D.jsx)("button",{onClick:ke,className:"p-1.5 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:l("common.cancel"),children:(0,D.jsx)(k.A,{className:"h-4 w-4"})}),(0,D.jsx)("button",{onClick:()=>ve(e.id),className:"p-1.5 bg-blue-600 text-white hover:bg-blue-700 rounded-md",title:l("common.save"),children:(0,D.jsx)(E.A,{className:"h-4 w-4"})})]})]}):(0,D.jsx)("div",{className:"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50 rounded p-2 min-h-[60px] border border-dashed border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500 transition-colors",onClick:()=>(e=>{B(e.id),Q(e.notes||"")})(e),children:e.notes?(0,D.jsx)("p",{className:"text-sm text-gray-900 dark:text-white whitespace-pre-wrap leading-relaxed",children:e.notes}):(0,D.jsx)("div",{className:"flex items-center justify-center h-full text-center",children:(0,D.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:l("consultations.addNotes")})})})]})]})})})]},e.id)}))})]}),ne&&oe&&(0,D.jsx)(Y,{isOpen:ne,onClose:()=>{le(!1),ie(null)},consultationId:oe,onTaskLinked:e=>{ge(),null===r||void 0===r||r()}}),xe&&(0,D.jsx)(ee,{isOpen:xe,onClose:()=>he(!1),consultations:Te,onInvoiceCreated:e=>{he(!1),ge(),p.oR.success(l("consultations.invoiceCreated"))}})]})})),ae=()=>{const{t:e}=(0,s.Bd)(),{hasPermission:t}=(0,n.S)(),r=(0,a.useRef)(null),l=(0,a.useCallback)((e=>{var t,a,s,n,l;e&&e.id?e.endTime?null===(t=r.current)||void 0===t||null===(a=t.updateConsultation)||void 0===a||a.call(t,e):null===(s=r.current)||void 0===s||null===(n=s.addConsultation)||void 0===n||n.call(s,e):null===(l=r.current)||void 0===l||l.refresh()}),[]),o=(0,a.useCallback)((e=>{var t,a,s;null===(t=r.current)||void 0===t||t.refresh(),null===(a=r.current)||void 0===a||null===(s=a.activateClientFilter)||void 0===s||s.call(a,e)}),[]);return t("consultations","read")?(0,D.jsx)("div",{className:"min-h-screen dark:bg-gray-900",children:(0,D.jsx)("div",{className:"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6",children:(0,D.jsxs)("div",{className:"space-y-6",children:[(0,D.jsx)(P,{onConsultationChange:l,onConsultationStarted:o}),(0,D.jsx)(re,{ref:r,onConsultationChange:l})]})})}):(0,D.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,D.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4",children:(0,D.jsx)("div",{className:"flex",children:(0,D.jsxs)("div",{className:"ml-3",children:[(0,D.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:e("consultations.noPermission")}),(0,D.jsx)("div",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:(0,D.jsx)("p",{children:e("consultations.noPermissionMessage")})})]})})})})}},1713:(e,t,r)=>{r.d(t,{DW:()=>j,I5:()=>h,IF:()=>f,M9:()=>g,P0:()=>c,Pg:()=>w,VY:()=>y,Yq:()=>i,_2:()=>x,c$:()=>p,fU:()=>d,h4:()=>k,lK:()=>b,pg:()=>m,uT:()=>u,vv:()=>v});var a=r(4653),s=r(9837),n=r(1620),l=r(6981),o=r(887);const i=e=>{if(!e)return"-";try{const t=e.split("-");if(3!==t.length)return"-";const r=parseInt(t[0]),a=parseInt(t[1])-1,s=parseInt(t[2]);return new Date(r,a,s,12,0,0).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(t){return console.error("Fehler beim Formatieren des Datums:",t),"-"}},d=e=>{if(!e)return"-";try{const t=(0,a.H)(e),r=t.getUTCHours().toString().padStart(2,"0"),s=t.getUTCMinutes().toString().padStart(2,"0");return"".concat(r,":").concat(s)}catch(t){return console.error("Fehler beim Formatieren der Zeit f\xfcr ".concat(e,":"),t),"-"}},c=(e,t)=>{if(!e||!t)return"-";try{const r=e.endsWith("Z")?e.substring(0,e.length-1):e,a=t.endsWith("Z")?t.substring(0,t.length-1):t,s=new Date(r),n=new Date(a).getTime()-s.getTime(),l=Math.floor(n/6e4),o=Math.floor(l/60),i=l%60;return"".concat(o,"h ").concat(i,"m")}catch(r){return console.error("Fehler bei der Dauerberechnung:",r),"-"}},m=e=>{try{const t=parseInt(e.substring(0,4)),r=parseInt(e.substring(6)),a=new Date(Date.UTC(t,0,1,12,0,0)).getUTCDay(),l=a<=4?4-a:11-a,i=new Date(Date.UTC(t,0,1+l,12,0,0)),d=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()+7*(r-1),12,0,0)),c=new Date(Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()-3,12,0,0)),m=(0,s.GP)(c,"yyyy-MM-dd");if(console.log("Konvertierte Woche ".concat(e," zu Datum: ").concat(m," (Wochentag: ").concat((0,s.GP)(c,"EEEE",{locale:o.de}),")")),"Montag"!==(0,s.GP)(c,"EEEE",{locale:o.de})){console.warn("Berechnetes Datum ist kein Montag! Korrigiere...");const e=(0,n.k)(c,{weekStartsOn:1});return(0,s.GP)(e,"yyyy-MM-dd")}return m}catch(t){console.error("Fehler beim Konvertieren des Wochendatums:",t);const e=(0,n.k)(new Date,{weekStartsOn:1});return(0,s.GP)(e,"yyyy-MM-dd")}},u=(e,t)=>{try{if(!e||!e.startTime)return!1;return e.startTime.split("T")[0]===t}catch(r){return console.error("Fehler beim Pr\xfcfen der Relevanz eines Worktime-Eintrags:",r),!1}},x=e=>{if(!e)return[];const t=new Date(e),r=[];for(let a=0;a<7;a++){const e=(0,l.f)(t,a),n={date:(0,s.GP)(e,"yyyy-MM-dd"),day:(0,s.GP)(e,"EEEE",{locale:o.de})};r.push(n)}return r},h=e=>{if(!e)return"-";try{return new Date(e).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return console.error("Fehler beim Formatieren des Datums und der Zeit:",t),"-"}},g=e=>{try{let t,r,a;if(!e.includes("-Q"))throw new Error("Ung\xfcltiges Quinzena-Format");{const s=e.split("-Q"),n=s[0];if(a=parseInt(s[1]),n.includes("-")){const e=n.split("-");t=parseInt(e[0]),r=parseInt(e[1])}else t=parseInt(n),r=Math.ceil(a/2)}const n=1===a?1:16,l=new Date(Date.UTC(t,r-1,n,12,0,0));return(0,s.GP)(l,"yyyy-MM-dd")}catch(t){console.error("Fehler beim Konvertieren der Quinzena:",t);const e=(0,n.k)(new Date,{weekStartsOn:1});return(0,s.GP)(e,"yyyy-MM-dd")}},b=e=>{if(!e)return[];const t=new Date(e),r=t.getFullYear(),a=t.getMonth();let n;if(1===t.getDate())n=15;else{n=new Date(r,a+1,0).getDate()-15}const i=[];for(let d=0;d<n;d++){const e=(0,l.f)(t,d),r={date:(0,s.GP)(e,"yyyy-MM-dd"),day:(0,s.GP)(e,"EEEE",{locale:o.de})};i.push(r)}return i},y=()=>{const e=new Date;return(e=>{try{const t=new Date(e+"T12:00:00"),r=t.getFullYear(),a=t.getMonth()+1,s=t.getDate()<=15?1:2;return"".concat(r,"-").concat(String(a).padStart(2,"0"),"-Q").concat(s)}catch(t){console.error("Fehler beim Berechnen der Quinzena:",t);const e=new Date,r=e.getFullYear(),a=e.getMonth()+1;return"".concat(r,"-").concat(String(a).padStart(2,"0"),"-Q1")}})((0,s.GP)(e,"yyyy-MM-dd"))},f=e=>{const t=new Date(e);return new Date(t.getTime()+6e4*t.getTimezoneOffset())},p=e=>{try{const t=e.reduce(((e,t)=>{if(!t.endTime)return e;const r=t.startTime.endsWith("Z")?t.startTime.substring(0,t.startTime.length-1):t.startTime,a=t.endTime.endsWith("Z")?t.endTime.substring(0,t.endTime.length-1):t.endTime,s=new Date(r),n=new Date(a).getTime()-s.getTime();return e+Math.floor(n/6e4)}),0),r=Math.floor(t/60),a=t%60;return"".concat(r,"h ").concat(a,"m")}catch(t){return console.error("Fehler bei der Formatierung der Gesamtdauer:",t),"0h 0m"}},v=e=>!!(e.invoiceItems&&e.invoiceItems.length>0),k=e=>{if(!e.invoiceItems||0===e.invoiceItems.length)return null;return e.invoiceItems[0].invoice},w=e=>({DRAFT:"Entwurf",SENT:"Gesendet",PAID:"Bezahlt",OVERDUE:"\xdcberf\xe4llig",CANCELLED:"Storniert"}[e]||e),j=e=>({DRAFT:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",SENT:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",PAID:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",OVERDUE:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",CANCELLED:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"}[e]||"bg-gray-100 text-gray-800")},2302:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(45),s=r(5043);const n=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},o),r?s.createElement("title",{id:l},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const o=s.forwardRef(l)},2517:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(45),s=r(5043);const n=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},o),r?s.createElement("title",{id:l},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const o=s.forwardRef(l)},2704:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(45),s=r(5043);const n=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},o),r?s.createElement("title",{id:l},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const o=s.forwardRef(l)},3315:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(45),s=r(5043);const n=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},o),r?s.createElement("title",{id:l},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const o=s.forwardRef(l)},4538:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(45),s=r(5043);const n=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},o),r?s.createElement("title",{id:l},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const o=s.forwardRef(l)},7012:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(45),s=r(5043);const n=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},o),r?s.createElement("title",{id:l},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const o=s.forwardRef(l)},7449:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(45),s=r(5043);const n=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},o),r?s.createElement("title",{id:l},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const o=s.forwardRef(l)},8010:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(45),s=r(5043);const n=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},o),r?s.createElement("title",{id:l},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const o=s.forwardRef(l)},8416:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(45),s=r(5043);const n=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},o),r?s.createElement("title",{id:l},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const o=s.forwardRef(l)},9531:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(45),s=r(5043);const n=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},o),r?s.createElement("title",{id:l},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const o=s.forwardRef(l)},9670:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(45),s=r(5043);const n=["title","titleId"];function l(e,t){let{title:r,titleId:l}=e,o=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},o),r?s.createElement("title",{id:l},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const o=s.forwardRef(l)}}]);
//# sourceMappingURL=556.c75c6512.chunk.js.map