{"version":3,"file":"static/js/220.c458c326.chunk.js","mappings":"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","sources":["components/LanguageSelector.tsx","pages/Login.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport i18n from '../i18n/config.ts';\n\ninterface LanguageSelectorProps {\n  className?: string;\n}\n\n// SVG Flag Icons\nconst FlagIcon: React.FC<{ country: 'de' | 'es' | 'en' }> = ({ country }) => {\n  const flags = {\n    de: (\n      <svg className=\"w-4 h-4 inline-block mr-1\" viewBox=\"0 0 640 480\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path fill=\"#000\" d=\"M0 0h640v480H0z\"/>\n        <path fill=\"#DD0000\" d=\"M0 160h640v160H0z\"/>\n        <path fill=\"#FFCE00\" d=\"M0 320h640v160H0z\"/>\n      </svg>\n    ),\n    es: (\n      <svg className=\"w-4 h-4 inline-block mr-1\" viewBox=\"0 0 640 480\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path fill=\"#FCD116\" d=\"M0 0h640v240H0z\"/>\n        <path fill=\"#003893\" d=\"M0 240h640v120H0z\"/>\n        <path fill=\"#CE1126\" d=\"M0 360h640v120H0z\"/>\n      </svg>\n    ),\n    en: (\n      <svg className=\"w-4 h-4 inline-block mr-1\" viewBox=\"0 0 640 480\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path fill=\"#012169\" d=\"M0 0h640v480H0z\"/>\n        <path fill=\"#FFF\" d=\"M75 0l244 181L562 0h78v62L400 241l240 178v61H409L240 301 0 480H0v-60l239-178L0 64V0h75z\"/>\n        <path fill=\"#C8102E\" d=\"M424 281l218 162h-46L378 281h46zm-184 20l6 35L54 480H0l240-179zM640 0v3L391 191l2-44L590 0h50zM0 0l239 177h-60L0 42V0z\"/>\n        <path fill=\"#FFF\" d=\"M241 0v480h160V0H241zM0 160v160h640V160H0z\"/>\n        <path fill=\"#C8102E\" d=\"M0 193v96h640v-96H0zM273 0v480h96V0h-96z\"/>\n      </svg>\n    )\n  };\n  return flags[country];\n};\n\nconst LanguageSelector: React.FC<LanguageSelectorProps> = ({ className = '' }) => {\n  const { t } = useTranslation();\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const currentLang = i18n.language || 'de';\n\n  const languages = [\n    { code: 'de', label: 'DE' },\n    { code: 'es', label: 'ES' },\n    { code: 'en', label: 'EN' }\n  ];\n\n  const handleLanguageChange = (langCode: string) => {\n    i18n.changeLanguage(langCode);\n    document.documentElement.lang = langCode;\n    setIsOpen(false);\n  };\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen]);\n\n  return (\n    <div className={`relative ${className}`} ref={dropdownRef}>\n      <button\n        type=\"button\"\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center gap-1\"\n        style={{ minWidth: '90px' }}\n      >\n        <FlagIcon country={currentLang as 'de' | 'es' | 'en'} />\n        <span>{languages.find(l => l.code === currentLang)?.label || 'DE'}</span>\n        <svg className=\"w-3 h-3 ml-auto\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n        </svg>\n      </button>\n\n      {isOpen && (\n        <div className=\"absolute right-0 mt-1 w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg z-50\">\n          {languages.map((lang) => (\n            <button\n              key={lang.code}\n              type=\"button\"\n              onClick={() => handleLanguageChange(lang.code)}\n              className={`w-full px-3 py-2 text-sm text-left flex items-center gap-1 hover:bg-gray-100 dark:hover:bg-gray-600 ${\n                currentLang === lang.code ? 'bg-blue-50 dark:bg-blue-900/20' : ''\n              }`}\n            >\n              <FlagIcon country={lang.code as 'de' | 'es' | 'en'} />\n              <span>{lang.label}</span>\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LanguageSelector;\n\n","import React, { useState, useEffect } from 'react';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport LanguageSelector from '../components/LanguageSelector.tsx';\n\nconst Login: React.FC = () => {\n  const navigate = useNavigate();\n  const { t } = useTranslation();\n  const { login, user } = useAuth();\n  const [formData, setFormData] = useState({\n    username: '',\n    password: ''\n  });\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  // Überprüfe, ob der Benutzer bereits eingeloggt ist\n  // Navigation wird jetzt von ProtectedRoute und OnboardingContext gehandhabt\n  // Keine manuelle Navigation mehr hier, da sie zu Timing-Problemen führt\n  useEffect(() => {\n    if (user) {\n      // Einfach zum Dashboard navigieren, ProtectedRoute prüft Profilvollständigkeit\n      navigate('/dashboard');\n    }\n  }, [user, navigate]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setLoading(true);\n    try {\n      await login(formData.username, formData.password);\n      // Navigation wird im useEffect behandelt, sobald user state aktualisiert ist\n    } catch (err: any) {\n      console.error('Login-Fehler:', err);\n      \n      // Detaillierte Fehlermeldung anzeigen\n      const errorMessage = err.response?.data?.message || err.message || t('login.loginFailed');\n      setError(errorMessage);\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center dark:bg-gray-900 relative\">\n      <div className=\"fixed top-2 right-2 z-50\">\n        <LanguageSelector />\n      </div>\n      <div className=\"max-w-lg w-full space-y-8 p-10 bg-white dark:bg-gray-800 rounded-lg shadow\">\n        <h2 className=\"text-3xl font-bold text-center text-gray-900 dark:text-white\">{t('login.title')}</h2>\n        {error && <p className=\"text-red-500 dark:text-red-400 text-center\">{error}</p>}\n        <form onSubmit={handleSubmit} className=\"mt-8 space-y-6\">\n          <div>\n            <label htmlFor=\"username\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n              {t('login.username')}\n            </label>\n            <input\n              type=\"text\"\n              name=\"username\"\n              id=\"username\"\n              value={formData.username}\n              onChange={handleChange}\n              required\n              className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm dark:bg-gray-700 dark:text-white\"\n              disabled={loading}\n            />\n          </div>\n          <div>\n            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n              {t('login.password')}\n            </label>\n            <input\n              type=\"password\"\n              name=\"password\"\n              id=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              required\n              className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm dark:bg-gray-700 dark:text-white\"\n              disabled={loading}\n            />\n            <div className=\"mt-2\">\n              <Link\n                to=\"/forgot-password\"\n                className=\"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300\"\n              >\n                {t('login.forgotPassword')}\n              </Link>\n            </div>\n          </div>\n          <button\n            type=\"submit\"\n            className={`w-full py-2 px-4 text-white rounded-md ${\n              loading ? 'bg-blue-400 dark:bg-blue-500 cursor-not-allowed' : 'bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-800'\n            }`}\n            disabled={loading}\n          >\n            {loading ? t('login.submitting') : t('login.submit')}\n          </button>\n        </form>\n        <p className=\"text-center mt-4 text-gray-700 dark:text-gray-300\">\n          {t('login.noAccount')}{' '}\n          <Link to=\"/register\" className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300\">\n            {t('login.register')}\n          </Link>\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default Login; "],"names":["FlagIcon","_ref","country","de","_jsxs","className","viewBox","xmlns","children","_jsx","fill","d","es","en","_ref2","_languages$find","t","useTranslation","isOpen","setIsOpen","useState","dropdownRef","useRef","currentLang","i18n","language","languages","code","label","useEffect","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","concat","ref","type","onClick","style","minWidth","find","l","stroke","strokeLinecap","strokeLinejoin","strokeWidth","map","lang","handleLanguageChange","langCode","changeLanguage","documentElement","Login","navigate","useNavigate","login","user","useAuth","formData","setFormData","username","password","error","setError","loading","setLoading","handleChange","e","_objectSpread","name","value","LanguageSelector","onSubmit","async","preventDefault","err","_err$response","_err$response$data","console","errorMessage","response","data","message","htmlFor","id","onChange","required","disabled","Link","to"],"sourceRoot":""}