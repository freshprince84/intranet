"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[559],{1816:(e,r,a)=>{a.d(r,{A:()=>d});var t=a(45),l=a(5043);const i=["title","titleId"];function n(e,r){let{title:a,titleId:n}=e,d=(0,t.A)(e,i);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},d),a?l.createElement("title",{id:n},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const d=l.forwardRef(n)},7591:(e,r,a)=>{a.d(r,{A:()=>d});var t=a(45),l=a(5043);const i=["title","titleId"];function n(e,r){let{title:a,titleId:n}=e,d=(0,t.A)(e,i);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},d),a?l.createElement("title",{id:n},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const d=l.forwardRef(n)},7916:(e,r,a)=>{a.r(r),a.d(r,{default:()=>h});var t=a(9379),l=a(5043),i=a(1923),n=a(4117),d=a(2672),s=a(6009),o=a(2704),c=a(2811),m=a(9422),u=a(7591),b=a(7855),g=a(9e3),x=a(579);const y=[{value:"passport",label:"Reisepass"},{value:"national_id",label:"Personalausweis"},{value:"driving_license",label:"F\xfchrerschein"},{value:"residence_permit",label:"Aufenthaltserlaubnis"},{value:"work_permit",label:"Arbeitserlaubnis"},{value:"tax_id",label:"Steuer-ID"},{value:"social_security",label:"Sozialversicherungsausweis"}],h=()=>{const{user:e}=(0,d.As)(),{showMessage:r}=(0,b.A)(),{t:a}=(0,n.Bd)(),[h,p]=(0,l.useState)(null),[f,k]=(0,l.useState)(!1),[v,w]=(0,l.useState)({}),[j,N]=(0,l.useState)("profile"),C=[{code:"CO",name:a("countries.CO")},{code:"CH",name:a("countries.CH")},{code:"DE",name:a("countries.DE")},{code:"AT",name:a("countries.AT")}],E=[{code:"es",name:a("languages.es")},{code:"de",name:a("languages.de")},{code:"en",name:a("languages.en")}];(0,l.useEffect)((()=>{if(e){const r={id:e.id,username:e.username,email:e.email,firstName:e.firstName||"",lastName:e.lastName||"",birthday:null,bankDetails:null,contract:null,salary:null,normalWorkingHours:7.6,country:"CO",language:"es",identificationNumber:null,identificationType:null,identificationExpiryDate:null,identificationIssuingCountry:null};p(r),w(r),A()}}),[e]);const A=async()=>{try{if(!localStorage.getItem("token"))throw new Error("Kein Token gefunden");const e=await i.A.get("/users/profile");if(console.log("Profile response:",e.data),e.data){const r=(0,t.A)((0,t.A)({},e.data),{},{birthday:e.data.birthday?new Date(e.data.birthday).toISOString().split("T")[0]:null,normalWorkingHours:e.data.normalWorkingHours||7.6,country:e.data.country||"CO",language:e.data.language||"es",identificationExpiryDate:e.data.identificationExpiryDate?new Date(e.data.identificationExpiryDate).toISOString().split("T")[0]:null});p(r),w(r)}}catch(n){var e,a,l;console.error("Error fetching profile:",(null===(e=n.response)||void 0===e?void 0:e.data)||n);const t="Fehler beim Laden des Profils: "+((null===(a=n.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message)||n.message);r(t,"error")}},D=e=>{const{name:r,value:a}=e.target;w((e=>(0,t.A)((0,t.A)({},e),{},{[r]:""===a?null:a})))};if(!h)return(0,x.jsx)("div",{className:"flex justify-center items-center h-screen",children:"Laden..."});return(0,x.jsx)("div",{className:"min-h-screen dark:bg-gray-900",children:(0,x.jsxs)("div",{className:"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6",children:[(!h.birthday||!h.bankDetails||!h.contract||!h.salary||!h.normalWorkingHours)&&(0,x.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4 mb-6",children:(0,x.jsxs)("div",{className:"flex",children:[(0,x.jsx)("div",{className:"flex-shrink-0",children:(0,x.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,x.jsx)("div",{className:"ml-3",children:(0,x.jsxs)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[(0,x.jsx)("strong",{children:a("profile.profileIncomplete")})," ",a("profile.completeProfile")]})})]})}),(0,x.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 mb-6",children:(0,x.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,x.jsxs)("nav",{className:"flex -mb-px",children:[(0,x.jsxs)("button",{onClick:()=>N("profile"),className:"py-4 px-6 text-center border-b-2 font-medium text-sm ".concat("profile"===j?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:[(0,x.jsx)(s.A,{className:"h-5 w-5 inline mr-2"}),a("profile.title")]}),(0,x.jsxs)("button",{onClick:()=>N("documents"),className:"py-4 px-6 text-center border-b-2 font-medium text-sm ".concat("documents"===j?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:[(0,x.jsx)(o.A,{className:"h-5 w-5 inline mr-2"}),a("profile.documents")]})]})})}),"profile"===j&&(0,x.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,x.jsxs)("h2",{className:"text-xl font-semibold flex items-center dark:text-white",children:[(0,x.jsx)(s.A,{className:"h-6 w-6 mr-2 dark:text-white"}),a("profile.userProfile")]}),!f&&(0,x.jsx)("button",{onClick:()=>{w(h),k(!0)},className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300",children:(0,x.jsx)(c.A,{className:"h-5 w-5"})})]}),(0,x.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{var a,l,n,d;if(!localStorage.getItem("token"))throw new Error("Kein Token gefunden");if(null===(a=v.username)||void 0===a||!a.trim())throw new Error("Benutzername ist erforderlich");if(null===(l=v.email)||void 0===l||!l.trim())throw new Error("E-Mail ist erforderlich");if(null===(n=v.firstName)||void 0===n||!n.trim())throw new Error("Vorname ist erforderlich");if(null===(d=v.lastName)||void 0===d||!d.trim())throw new Error("Nachname ist erforderlich");const e=(0,t.A)((0,t.A)({},v),{},{salary:v.salary?parseFloat(v.salary.toString()):null,normalWorkingHours:v.normalWorkingHours?parseFloat(v.normalWorkingHours.toString()):7.6,birthday:v.birthday||null,identificationExpiryDate:v.identificationExpiryDate||null});console.log("Sending data to backend:",e);const s=await i.A.put("/users/profile",e);if(console.log("Update response:",s.data),s.data){const e=(0,t.A)((0,t.A)({},s.data),{},{birthday:s.data.birthday?new Date(s.data.birthday).toISOString().split("T")[0]:null,identificationExpiryDate:s.data.identificationExpiryDate?new Date(s.data.identificationExpiryDate).toISOString().split("T")[0]:null});p(e),w(e),r("Profil erfolgreich aktualisiert","success"),k(!1)}}catch(c){var s,o;console.error("Error updating profile:",c);let e="Ein unbekannter Fehler ist aufgetreten";null!==(s=c.response)&&void 0!==s&&null!==(o=s.data)&&void 0!==o&&o.message?e=c.response.data.message:c instanceof Error&&(e=c.message),r(e,"error")}},children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("profile.username")}),(0,x.jsx)("input",{type:"text",name:"username",value:f?v.username||"":h.username||"",onChange:D,disabled:!f,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("profile.email")}),(0,x.jsx)("input",{type:"email",name:"email",value:f?v.email||"":h.email||"",onChange:D,disabled:!f,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("profile.firstName")}),(0,x.jsx)("input",{type:"text",name:"firstName",value:f?v.firstName||"":h.firstName||"",onChange:D,disabled:!f,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("profile.lastName")}),(0,x.jsx)("input",{type:"text",name:"lastName",value:f?v.lastName||"":h.lastName||"",onChange:D,disabled:!f,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("profile.birthday")}),(0,x.jsx)("input",{type:"date",name:"birthday",value:f?v.birthday||"":h.birthday||"",onChange:D,disabled:!f,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("profile.bankDetails")}),(0,x.jsx)("input",{type:"text",name:"bankDetails",value:f?v.bankDetails||"":h.bankDetails||"",onChange:D,disabled:!f,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("profile.contract")}),(0,x.jsx)("input",{type:"text",name:"contract",value:f?v.contract||"":h.contract||"",onChange:D,disabled:!f,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("profile.salary")}),(0,x.jsx)("input",{type:"number",name:"salary",value:f?v.salary||"":h.salary||"",onChange:D,disabled:!f,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("profile.normalWorkingHours")}),(0,x.jsx)("input",{type:"number",name:"normalWorkingHours",value:f?v.normalWorkingHours||"":h.normalWorkingHours||"",onChange:D,disabled:!f,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("profile.country")}),(0,x.jsxs)("select",{name:"country",value:f?v.country||"":h.country||"",onChange:D,disabled:!f,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",children:[(0,x.jsx)("option",{value:"",children:a("profile.selectCountry")}),C.map((e=>(0,x.jsx)("option",{value:e.code,children:e.name},e.code)))]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("profile.language")}),(0,x.jsxs)("select",{name:"language",value:f?v.language||"":h.language||"",onChange:D,disabled:!f,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",children:[(0,x.jsx)("option",{value:"",children:a("profile.selectLanguage")}),E.map((e=>(0,x.jsx)("option",{value:e.code,children:e.name},e.code)))]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("profile.identificationType")}),(0,x.jsxs)("select",{name:"identificationType",value:f?v.identificationType||"":h.identificationType||"",onChange:D,disabled:!f,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",children:[(0,x.jsx)("option",{value:"",children:a("common.select")}),y.map((e=>(0,x.jsx)("option",{value:e.value,children:e.label},e.value)))]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("profile.identificationNumber")}),(0,x.jsx)("input",{type:"text",name:"identificationNumber",value:f?v.identificationNumber||"":h.identificationNumber||"",onChange:D,disabled:!f,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("profile.identificationIssuingCountry")}),(0,x.jsxs)("select",{name:"identificationIssuingCountry",value:f?v.identificationIssuingCountry||"":h.identificationIssuingCountry||"",onChange:D,disabled:!f,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",children:[(0,x.jsx)("option",{value:"",children:a("common.select")}),C.map((e=>(0,x.jsx)("option",{value:e.code,children:e.name},e.code)))]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("profile.identificationExpiryDate")}),(0,x.jsx)("input",{type:"date",name:"identificationExpiryDate",value:f?v.identificationExpiryDate||"":h.identificationExpiryDate||"",onChange:D,disabled:!f,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]})]}),f&&(0,x.jsxs)("div",{className:"flex mt-6 space-x-3",children:[(0,x.jsx)("button",{type:"submit",className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-500 dark:hover:bg-blue-600",title:a("common.save"),children:(0,x.jsx)(m.A,{className:"h-5 w-5"})}),(0,x.jsx)("button",{type:"button",onClick:()=>k(!1),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:a("common.cancel"),children:(0,x.jsx)(u.A,{className:"h-5 w-5"})})]})]})]}),"documents"===j&&h&&(0,x.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:(0,x.jsx)(g.A,{userId:h.id})})]})})}},9422:(e,r,a)=>{a.d(r,{A:()=>d});var t=a(45),l=a(5043);const i=["title","titleId"];function n(e,r){let{title:a,titleId:n}=e,d=(0,t.A)(e,i);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},d),a?l.createElement("title",{id:n},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const d=l.forwardRef(n)}}]);
//# sourceMappingURL=559.80425083.chunk.js.map