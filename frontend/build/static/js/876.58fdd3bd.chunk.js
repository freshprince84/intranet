"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[876],{7876:(e,r,a)=>{a.r(r),a.d(r,{default:()=>B});var t=a(5043),s=a(1637),l=a(905),n=a(35),c=a(6600),d=a(5316),i=a(8533),x=a(9347),h=a(1906),o=a(1369),m=a(4129),g=a(7012),u=a(2704),b=a(7504),k=a(1252),y=a(9399),j=a(3867),N=a(2903),f=a(9422),p=a(9248),w=a(5620),A=a(4399),v=a(887),C=a(3216),S=a(579);const B=()=>{const[e,r]=(0,t.useState)([]),[a,B]=(0,t.useState)(!0),[E,$]=(0,t.useState)(1),[L,P]=(0,t.useState)(1),[I,F]=(0,t.useState)(!1),[O,M]=(0,t.useState)(null),[q,D]=(0,t.useState)(!1),R=(0,C.Zp)();(0,t.useEffect)((()=>{T()}),[E]);const T=async()=>{try{B(!0);const e=await w.O.getNotifications(E,10);r(e.notifications),P(e.pagination.totalPages)}catch(e){console.error("Fehler beim Laden der Benachrichtigungen:",e)}finally{B(!1)}},_=async e=>{try{await w.O.markAsRead(e),r((r=>r.map((r=>r.id===e?{...r,read:!0}:r))))}catch(a){console.error("Fehler beim Markieren als gelesen:",a)}},K=e=>{switch(e.toLowerCase()){case"task":return(0,S.jsx)(o.A,{className:"h-6 w-6 text-blue-600"});case"user":return(0,S.jsx)(m.A,{className:"h-6 w-6 text-blue-600"});case"worktime":return(0,S.jsx)(g.A,{className:"h-6 w-6 text-blue-600"});case"request":return(0,S.jsx)(u.A,{className:"h-6 w-6 text-blue-600"});case"role":return(0,S.jsx)(b.A,{className:"h-6 w-6 text-blue-600"});case"info":return(0,S.jsx)(k.A,{className:"h-6 w-6 text-blue-600"});case"warning":return(0,S.jsx)(y.A,{className:"h-6 w-6 text-yellow-500"});case"error":return(0,S.jsx)(j.A,{className:"h-6 w-6 text-red-600"});default:return(0,S.jsx)(N.A,{className:"h-6 w-6 text-blue-600"})}},U=e=>{try{return(0,A.m)(new Date(e),{addSuffix:!0,locale:v.de})}catch(r){return"Ung\xfcltiges Datum"}};return(0,S.jsx)("div",{className:"min-h-screen p-4 dark:bg-gray-900",children:(0,S.jsxs)("div",{className:"container mx-auto",children:[(0,S.jsxs)("div",{className:"bg-white rounded-lg border border-gray-300 dark:bg-gray-800 dark:border-gray-700 p-6",children:[(0,S.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)(N.A,{className:"h-6 w-6 text-gray-600 dark:text-gray-400 mr-2"}),(0,S.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Benachrichtigungen"})]}),(0,S.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,S.jsxs)("button",{onClick:async()=>{try{await w.O.markAllAsRead(),r((e=>e.map((e=>({...e,read:!0})))))}catch(e){console.error("Fehler beim Markieren aller als gelesen:",e)}},disabled:e.every((e=>e.read)),className:"inline-flex items-center px-3 py-2 border rounded-md text-sm font-medium\n                  "+(e.every((e=>e.read))?"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed":"bg-blue-50 text-blue-600 hover:bg-blue-100 border-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:border-blue-900 dark:hover:bg-blue-900/50"),children:[(0,S.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Alle gelesen"]}),(0,S.jsxs)("button",{onClick:()=>{D(!0)},disabled:0===e.length,className:"inline-flex items-center px-3 py-2 border rounded-md text-sm font-medium\n                  "+(0===e.length?"bg-gray-100 text-gray-400 dark:bg-gray-700 dark:text-gray-500 cursor-not-allowed":"bg-red-50 text-red-600 hover:bg-red-100 border-red-200 dark:bg-red-900/30 dark:text-red-400 dark:border-red-900 dark:hover:bg-red-900/50"),children:[(0,S.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Alle l\xf6schen"]})]})]}),a&&0===e.length?(0,S.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,S.jsx)(s.A,{className:"dark:text-blue-400"})}):0===e.length?(0,S.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[(0,S.jsx)(N.A,{className:"h-16 w-16 mb-4 dark:text-gray-500"}),(0,S.jsx)("p",{className:"text-lg",children:"Keine Benachrichtigungen vorhanden"})]}):(0,S.jsx)("div",{className:"space-y-4",children:e.map(((r,a)=>(0,S.jsx)("div",{onClick:()=>(e=>{if(e.read||_(e.id),e.relatedEntityId&&e.relatedEntityType)switch(e.relatedEntityType.toLowerCase()){case"task":R(`/tasks/${e.relatedEntityId}`);break;case"request":R(`/requests/${e.relatedEntityId}`);break;case"user":R(`/users/${e.relatedEntityId}`);break;case"role":R(`/roles/${e.relatedEntityId}`);break;case"worktime":R(`/worktime/${e.relatedEntityId}`)}})(r),className:`p-4 rounded-lg transition-colors cursor-pointer\n                    ${r.read?"bg-white hover:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700":"bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/30 dark:hover:bg-blue-900/50"}\n                    ${a<e.length-1?"border-b dark:border-gray-700":""}`,children:(0,S.jsxs)("div",{className:"flex items-start",children:[(0,S.jsx)("div",{className:"flex-shrink-0 mt-1",children:K(r.type)}),(0,S.jsxs)("div",{className:"ml-4 flex-grow",children:[(0,S.jsxs)("div",{className:"flex items-center",children:[(0,S.jsx)("h3",{className:`text-base ${r.read?"font-medium":"font-semibold"} text-gray-900 dark:text-white`,children:r.title}),!r.read&&(0,S.jsx)("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 rounded-full",children:"Neu"})]}),(0,S.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:r.message}),(0,S.jsx)("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:U(r.createdAt)})]}),(0,S.jsxs)("div",{className:"ml-4 flex-shrink-0 flex space-x-2",children:[!r.read&&(0,S.jsx)(l.A,{title:"Als gelesen markieren",children:(0,S.jsx)("button",{onClick:e=>{e.stopPropagation(),_(r.id)},className:"text-blue-600 hover:text-blue-900 p-1.5 rounded-full hover:bg-blue-50 dark:text-blue-400 dark:hover:text-blue-300 dark:hover:bg-blue-900/30",children:(0,S.jsx)(f.A,{className:"h-5 w-5"})})}),(0,S.jsx)(l.A,{title:"L\xf6schen",children:(0,S.jsx)("button",{onClick:e=>{var a;e.stopPropagation(),a=r.id,M(a),F(!0)},className:"text-red-600 hover:text-red-900 p-1.5 rounded-full hover:bg-red-50 dark:text-red-400 dark:hover:text-red-300 dark:hover:bg-red-900/30",children:(0,S.jsx)(p.A,{className:"h-5 w-5"})})})]})]})},r.id)))}),L>1&&(0,S.jsx)("div",{className:"flex justify-center mt-6",children:(0,S.jsx)("nav",{className:"flex items-center space-x-2",children:Array.from({length:L},((e,r)=>r+1)).map((e=>(0,S.jsx)("button",{onClick:()=>$(e),className:"px-3 py-1 rounded-md text-sm font-medium\n                      "+(E===e?"bg-blue-600 text-white dark:bg-blue-700":"text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"),children:e},e)))})})]}),(0,S.jsxs)(n.A,{open:I,onClose:()=>F(!1),PaperProps:{className:"dark:bg-gray-800 dark:text-white"},children:[(0,S.jsx)(c.A,{className:"dark:text-white",children:"Benachrichtigung l\xf6schen"}),(0,S.jsx)(d.A,{children:(0,S.jsx)(i.A,{className:"dark:text-gray-300",children:"M\xf6chten Sie diese Benachrichtigung wirklich l\xf6schen?"})}),(0,S.jsxs)(x.A,{children:[(0,S.jsx)(h.A,{onClick:()=>F(!1),color:"primary",className:"dark:text-blue-400",children:"Abbrechen"}),(0,S.jsx)(h.A,{onClick:async()=>{if(null!==O)try{await w.O.deleteNotification(O),r((e=>e.filter((e=>e.id!==O))))}catch(e){console.error("Fehler beim L\xf6schen der Benachrichtigung:",e)}F(!1),M(null)},color:"error",className:"dark:text-red-400",children:"L\xf6schen"})]})]}),(0,S.jsxs)(n.A,{open:q,onClose:()=>D(!1),PaperProps:{className:"dark:bg-gray-800 dark:text-white"},children:[(0,S.jsx)(c.A,{className:"dark:text-white",children:"Alle Benachrichtigungen l\xf6schen"}),(0,S.jsx)(d.A,{children:(0,S.jsx)(i.A,{className:"dark:text-gray-300",children:"M\xf6chten Sie wirklich alle Benachrichtigungen l\xf6schen? Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden."})}),(0,S.jsxs)(x.A,{children:[(0,S.jsx)(h.A,{onClick:()=>D(!1),color:"primary",className:"dark:text-blue-400",children:"Abbrechen"}),(0,S.jsx)(h.A,{onClick:async()=>{try{await w.O.deleteAllNotifications(),r([])}catch(e){console.error("Fehler beim L\xf6schen aller Benachrichtigungen:",e)}D(!1)},color:"error",className:"dark:text-red-400",children:"Alle l\xf6schen"})]})]})]})})}}}]);
//# sourceMappingURL=876.58fdd3bd.chunk.js.map