"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[987],{3164:(e,r,t)=>{t.d(r,{A:()=>i});var a=t(5043),s=t(4117),l=t(8120),o=t(1958),n=t(579);const d=e=>{let{country:r}=e;return{de:(0,n.jsxs)("svg",{className:"w-4 h-4 inline-block mr-1",viewBox:"0 0 640 480",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{fill:"#000",d:"M0 0h640v480H0z"}),(0,n.jsx)("path",{fill:"#DD0000",d:"M0 160h640v160H0z"}),(0,n.jsx)("path",{fill:"#FFCE00",d:"M0 320h640v160H0z"})]}),es:(0,n.jsxs)("svg",{className:"w-4 h-4 inline-block mr-1",viewBox:"0 0 640 480",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{fill:"#FCD116",d:"M0 0h640v240H0z"}),(0,n.jsx)("path",{fill:"#003893",d:"M0 240h640v120H0z"}),(0,n.jsx)("path",{fill:"#CE1126",d:"M0 360h640v120H0z"})]}),en:(0,n.jsxs)("svg",{className:"w-4 h-4 inline-block mr-1",viewBox:"0 0 640 480",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{fill:"#012169",d:"M0 0h640v480H0z"}),(0,n.jsx)("path",{fill:"#FFF",d:"M75 0l244 181L562 0h78v62L400 241l240 178v61H409L240 301 0 480H0v-60l239-178L0 64V0h75z"}),(0,n.jsx)("path",{fill:"#C8102E",d:"M424 281l218 162h-46L378 281h46zm-184 20l6 35L54 480H0l240-179zM640 0v3L391 191l2-44L590 0h50zM0 0l239 177h-60L0 42V0z"}),(0,n.jsx)("path",{fill:"#FFF",d:"M241 0v480h160V0H241zM0 160v160h640V160H0z"}),(0,n.jsx)("path",{fill:"#C8102E",d:"M0 193v96h640v-96H0zM273 0v480h96V0h-96z"})]})}[r]},i=e=>{var r;let{className:t=""}=e;const{t:i}=(0,s.Bd)(),[c,g]=(0,a.useState)(!1),u=(0,a.useRef)(null),m=l.A.language||"de",h=[{code:"de",label:"DE"},{code:"es",label:"ES"},{code:"en",label:"EN"}];return(0,a.useEffect)((()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&g(!1)};return c&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[c]),(0,n.jsxs)("div",{className:"relative ".concat(t),ref:u,children:[(0,n.jsxs)("button",{type:"button",onClick:()=>g(!c),className:"px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center gap-1",style:{minWidth:"90px"},children:[(0,n.jsx)(d,{country:m}),(0,n.jsx)("span",{children:(null===(r=h.find((e=>e.code===m)))||void 0===r?void 0:r.label)||"DE"}),(0,n.jsx)("svg",{className:"w-3 h-3 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&(0,n.jsx)("div",{className:"absolute right-0 mt-1 w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg z-50",children:h.map((e=>(0,n.jsxs)("button",{type:"button",onClick:()=>(async e=>{await o.A.setLanguage(e),document.documentElement.lang=e,g(!1)})(e.code),className:"w-full px-3 py-2 text-sm text-left flex items-center gap-1 hover:bg-gray-100 dark:hover:bg-gray-600 ".concat(m===e.code?"bg-blue-50 dark:bg-blue-900/20":""),children:[(0,n.jsx)(d,{country:e.code}),(0,n.jsx)("span",{children:e.label})]},e.code)))})]})}},8987:(e,r,t)=>{t.r(r),t.d(r,{default:()=>x});var a=t(9379),s=t(5043),l=t(4117),o=t(3216),n=t(5475),d=t(8120),i=t(9722),c=t(1923);const g={async login(e){const r=await c.A.post("/auth/login",e);return r.data.token&&(localStorage.setItem("token",r.data.token),localStorage.setItem("user",JSON.stringify(r.data.user))),r.data},async register(e){const r=await c.A.post("/auth/register",e);return r.data.token&&(localStorage.setItem("token",r.data.token),localStorage.setItem("user",JSON.stringify(r.data.user))),r.data},async logout(){const e=localStorage.getItem("token");e&&await c.A.post("/auth/logout",{},{headers:{Authorization:"Bearer ".concat(e)}}),localStorage.removeItem("token"),localStorage.removeItem("user")},getCurrentUser(){const e=localStorage.getItem("user");return e?JSON.parse(e):null},getToken:()=>localStorage.getItem("token"),isAuthenticated(){return!!this.getToken()}};i.A.interceptors.request.use((e=>{const r=g.getToken();return r&&e.headers&&(e.headers.Authorization="Bearer ".concat(r)),e}),(e=>Promise.reject(e)));const u=g;var m=t(3164),h=t(579);const x=()=>{const{t:e}=(0,l.Bd)(),r=(0,o.Zp)(),[t,i]=(0,s.useState)({email:"",password:"",confirmPassword:"",language:d.A.language||"de"}),[c,g]=(0,s.useState)(""),[x,b]=(0,s.useState)(!1),p=e=>{i((0,a.A)((0,a.A)({},t),{},{[e.target.name]:e.target.value}))};return(0,h.jsxs)("div",{className:"min-h-screen flex items-center justify-center dark:bg-gray-900 relative",children:[(0,h.jsx)("div",{className:"fixed top-2 right-2 z-50",children:(0,h.jsx)(m.A,{})}),(0,h.jsxs)("div",{className:"max-w-md w-full space-y-8 p-8 bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-900 dark:text-white",children:e("register.title")}),(0,h.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:e("register.subtitle")}),c&&(0,h.jsx)("p",{className:"mt-2 text-center text-sm text-red-600 dark:text-red-400",children:c})]}),(0,h.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),g(""),t.password===t.confirmPassword)if(t.password.length<6)g(e("register.passwordTooShort"));else{b(!0);try{await u.register({email:t.email,password:t.password,language:t.language}),r("/dashboard")}catch(o){var s,l;console.error("Registrierung fehlgeschlagen:",o),g((null===(s=o.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)||e("register.registrationFailed"))}finally{b(!1)}}else g(e("register.passwordsDoNotMatch"))},className:"mt-8 space-y-6",children:[(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e("register.email")}),(0,h.jsx)("input",{type:"email",name:"email",id:"email",value:t.email,onChange:p,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("register.emailPlaceholder")})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e("register.password")}),(0,h.jsx)("input",{type:"password",name:"password",id:"password",value:t.password,onChange:p,required:!0,minLength:6,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("register.passwordPlaceholder")})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e("register.confirmPassword")}),(0,h.jsx)("input",{type:"password",name:"confirmPassword",id:"confirmPassword",value:t.confirmPassword,onChange:p,required:!0,minLength:6,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("register.confirmPasswordPlaceholder")})]}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("label",{htmlFor:"language",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[e("register.language")," ",(0,h.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,h.jsxs)("select",{name:"language",id:"language",value:t.language,onChange:e=>{i((0,a.A)((0,a.A)({},t),{},{language:e.target.value})),d.A.changeLanguage(e.target.value)},required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,h.jsx)("option",{value:"es",children:e("languages.es")}),(0,h.jsx)("option",{value:"de",children:e("languages.de")}),(0,h.jsx)("option",{value:"en",children:e("languages.en")})]})]})]}),(0,h.jsx)("div",{children:(0,h.jsx)("button",{type:"submit",disabled:x,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(x?"opacity-50 cursor-not-allowed":""),children:e(x?"register.registering":"register.register")})})]}),(0,h.jsxs)("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[e("register.alreadyRegistered")," ",(0,h.jsx)(n.N_,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:e("register.login")})]})]})]})}}}]);
//# sourceMappingURL=987.232ef9eb.chunk.js.map