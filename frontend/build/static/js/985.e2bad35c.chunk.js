"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[985],{2704:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(45),s=a(5043);const n=["title","titleId"];function l(e,t){let{title:a,titleId:l}=e,i=(0,r.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const i=s.forwardRef(l)},4538:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(45),s=a(5043);const n=["title","titleId"];function l(e,t){let{title:a,titleId:l}=e,i=(0,r.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const i=s.forwardRef(l)},6009:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(45),s=a(5043);const n=["title","titleId"];function l(e,t){let{title:a,titleId:l}=e,i=(0,r.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const i=s.forwardRef(l)},7012:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(45),s=a(5043);const n=["title","titleId"];function l(e,t){let{title:a,titleId:l}=e,i=(0,r.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),a?s.createElement("title",{id:l},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const i=s.forwardRef(l)},7985:(e,t,a)=>{a.r(t),a.d(t,{default:()=>K});var r=a(5043),s=a(2903),n=a(4117),l=a(2672),i=a(2760),o=a(5648),c=a(7855),d=a(1801),m=a(1923),g=a(7488),h=a(8421),u=a(45);const x=["title","titleId"];function b(e,t){let{title:a,titleId:s}=e,n=(0,u.A)(e,x);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const p=r.forwardRef(b);var y=a(6009);const f=["title","titleId"];function k(e,t){let{title:a,titleId:s}=e,n=(0,u.A)(e,f);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"}))}const v=r.forwardRef(k);var w=a(1816);const j=["title","titleId"];function N(e,t){let{title:a,titleId:s}=e,n=(0,u.A)(e,j);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const R=r.forwardRef(N);var A=a(9422),S=a(9379),D=a(1292),E=a(7353),C=a(4493),L=a(5620),U=a(579);const T={taskCreate:!0,taskUpdate:!0,taskDelete:!0,taskStatusChange:!0,requestCreate:!0,requestUpdate:!0,requestDelete:!0,requestStatusChange:!0,userCreate:!0,userUpdate:!0,userDelete:!0,roleCreate:!0,roleUpdate:!0,roleDelete:!0,worktimeStart:!0,worktimeStop:!0},M={task:["taskCreate","taskUpdate","taskDelete","taskStatusChange"],request:["requestCreate","requestUpdate","requestDelete","requestStatusChange"],user:["userCreate","userUpdate","userDelete"],role:["roleCreate","roleUpdate","roleDelete"],worktime:["worktimeStart","worktimeStop"]},q=()=>{const{t:e}=(0,n.Bd)(),[t,a]=(0,r.useState)(T),[s,l]=(0,r.useState)(!0),[i,o]=(0,r.useState)(!1),{showMessage:d}=(0,c.A)();(0,r.useEffect)((()=>{m()}),[]);const m=async()=>{try{l(!0),console.log("Starte Abruf der Benachrichtigungseinstellungen...");const e=await L.f.getUserSettings();if(console.log("Erhaltene Einstellungen:",e.data),null!==e&&void 0!==e&&e.data){const t=(0,S.A)((0,S.A)({},T),e.data);a(t),console.log("Einstellungen aktualisiert:",t)}else console.warn("Keine Daten vom Server erhalten, verwende Standardeinstellungen"),a(T)}catch(t){console.error("Fehler beim Laden der Benachrichtigungseinstellungen:",t),a(T),d(e("notifications.loadSettingsError"),"error")}finally{l(!1)}},g=async r=>{const{name:s,checked:n}=r.target,l=(0,S.A)((0,S.A)({},t),{},{[s]:n});a(l);try{o(!0),await L.f.updateUserSettings(l),d(e("notifications.saveSuccess"),"success")}catch(i){console.error("Fehler beim Speichern der Einstellungen:",i),d(e("notifications.saveError"),"error"),a(t)}finally{o(!1)}},h=e=>{const a=e.toLowerCase();return!!M[a]&&M[a].every((e=>!0===t[e]))},u=e=>{let{checked:t,onChange:a,name:r,label:s,description:n}=e;return(0,U.jsxs)("div",{className:"flex items-center justify-between gap-8 group relative",children:[(0,U.jsx)("div",{className:"flex-1",children:(0,U.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:s})}),(0,U.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer flex-shrink-0",children:[(0,U.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:t,onChange:a,name:r}),(0,U.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]}),n&&(0,U.jsx)("div",{className:"absolute left-0 bottom-[calc(100%+0.5rem)] px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-normal max-w-xs pointer-events-none z-50",children:n})]})},x=(r,s)=>(0,U.jsxs)("div",{className:"mb-6 mt-2",children:[(0,U.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,U.jsx)("div",{children:(0,U.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:r})}),(0,U.jsx)(u,{checked:h(r),onChange:s=>(async(r,s)=>{const n=r.toLowerCase();if(!M[n])return;const l=(0,S.A)({},t);M[n].forEach((e=>{l[e]=s})),a(l);try{o(!0),await L.f.updateUserSettings(l),d(e("notifications.saveSuccess"),"success")}catch(i){console.error("Fehler beim Speichern der Einstellungen:",i),d(e("notifications.saveError"),"error"),a(t)}finally{o(!1)}})(r,s.target.checked),name:"".concat(r.toLowerCase(),"All"),label:e("notifications.all")})]}),(0,U.jsx)("div",{className:"space-y-4",children:s.map((e=>{let{name:a,label:r,description:s}=e;return(0,U.jsx)(u,{checked:t[a],onChange:g,name:a,label:r,description:s},a)}))})]});return s?(0,U.jsx)(D.A,{children:e("notifications.loading")}):(0,U.jsxs)(E.A,{className:"p-4",children:[(0,U.jsx)(D.A,{variant:"body2",className:"text-gray-600 dark:text-gray-400 mb-6",children:e("notifications.description")}),(0,U.jsx)("div",{className:"mb-8 mt-2",children:(0,U.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,U.jsxs)("div",{className:"group relative",children:[(0,U.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:e("notifications.allNotifications")}),(0,U.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("notifications.allNotificationsDescription")}),(0,U.jsx)("div",{className:"absolute left-0 bottom-[calc(100%+0.5rem)] px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-normal max-w-xs pointer-events-none z-50",children:e("notifications.allNotificationsDescription")})]}),(0,U.jsx)(u,{checked:!!t&&Object.values(t).every((e=>!0===e)),onChange:r=>(async r=>{const s=Object.keys(t).reduce(((e,t)=>(e[t]=r,e)),(0,S.A)({},T));a(s);try{o(!0),await L.f.updateUserSettings(s),d(e("notifications.saveSuccess"),"success")}catch(n){console.error("Fehler beim Speichern der Einstellungen:",n),d(e("notifications.saveError"),"error"),a(t)}finally{o(!1)}})(r.target.checked),name:"allNotifications",label:""})]})}),(0,U.jsx)(C.A,{className:"my-8"}),x(e("notifications.categories.tasks"),[{name:"taskCreate",label:e("notifications.events.taskCreate"),description:e("notifications.events.taskCreateDescription")},{name:"taskUpdate",label:e("notifications.events.taskUpdate"),description:e("notifications.events.taskUpdateDescription")},{name:"taskDelete",label:e("notifications.events.taskDelete"),description:e("notifications.events.taskDeleteDescription")},{name:"taskStatusChange",label:e("notifications.events.taskStatusChange"),description:e("notifications.events.taskStatusChangeDescription")}]),(0,U.jsx)(C.A,{className:"my-8"}),x(e("notifications.categories.requests"),[{name:"requestCreate",label:e("notifications.events.requestCreate"),description:e("notifications.events.requestCreateDescription")},{name:"requestUpdate",label:e("notifications.events.requestUpdate"),description:e("notifications.events.requestUpdateDescription")},{name:"requestDelete",label:e("notifications.events.requestDelete"),description:e("notifications.events.requestDeleteDescription")},{name:"requestStatusChange",label:e("notifications.events.requestStatusChange"),description:e("notifications.events.requestStatusChangeDescription")}]),(0,U.jsx)(C.A,{className:"my-8"}),x(e("notifications.categories.usersAndRoles"),[{name:"userCreate",label:e("notifications.events.userCreate"),description:e("notifications.events.userCreateDescription")},{name:"userUpdate",label:e("notifications.events.userUpdate"),description:e("notifications.events.userUpdateDescription")},{name:"userDelete",label:e("notifications.events.userDelete"),description:e("notifications.events.userDeleteDescription")},{name:"roleCreate",label:e("notifications.events.roleCreate"),description:e("notifications.events.roleCreateDescription")},{name:"roleUpdate",label:e("notifications.events.roleUpdate"),description:e("notifications.events.roleUpdateDescription")},{name:"roleDelete",label:e("notifications.events.roleDelete"),description:e("notifications.events.roleDeleteDescription")}]),(0,U.jsx)(C.A,{className:"my-8"}),x(e("notifications.categories.worktime"),[{name:"worktimeStart",label:e("notifications.events.worktimeStart"),description:e("notifications.events.worktimeStartDescription")},{name:"worktimeStop",label:e("notifications.events.worktimeStop"),description:e("notifications.events.worktimeStopDescription")}])]})};var P=a(6443),B=a(7591);const I=e=>{let{isOpen:t,onClose:a,onSave:s,currentSettings:l}=e;const{t:i}=(0,n.Bd)(),[o,c]=(0,r.useState)({monthlyReportEnabled:!0,monthlyReportDay:l.monthlyReportDay||25,monthlyReportRecipient:l.monthlyReportRecipient||""}),[d,m]=(0,r.useState)(!1),[h,u]=(0,r.useState)({}),x=()=>{c({monthlyReportEnabled:!0,monthlyReportDay:l.monthlyReportDay||25,monthlyReportRecipient:l.monthlyReportRecipient||""}),u({}),a()},b=(e,t)=>{c((a=>(0,S.A)((0,S.A)({},a),{},{[e]:t}))),h[e]&&u((t=>(0,S.A)((0,S.A)({},t),{},{[e]:""})))};return(0,U.jsxs)(P.lG,{open:t,onClose:x,className:"relative z-50",children:[(0,U.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,U.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,U.jsx)(P.lG.Panel,{className:"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:(0,U.jsxs)("div",{className:"p-6",children:[(0,U.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,U.jsx)(P.lG.Title,{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Automatische Monatsabrechnung einrichten"}),(0,U.jsx)("button",{onClick:x,className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:(0,U.jsx)(B.A,{className:"h-6 w-6"})})]}),(0,U.jsx)("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:(0,U.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Konfigurieren Sie die automatische Generierung von monatlichen Beratungsabrechnungen. Diese werden automatisch am gew\xe4hlten Tag des Monats erstellt und an den angegebenen Empf\xe4nger adressiert."})}),(0,U.jsxs)("div",{className:"space-y-4",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("label",{htmlFor:"monthlyReportDay",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Abrechnungstag im Monat"}),(0,U.jsx)("select",{id:"monthlyReportDay",className:"mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ".concat(h.monthlyReportDay?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"),value:o.monthlyReportDay,onChange:e=>b("monthlyReportDay",parseInt(e.target.value)),children:Array.from({length:28},((e,t)=>t+1)).map((e=>(0,U.jsxs)("option",{value:e,children:[e,"."]},e)))}),h.monthlyReportDay&&(0,U.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.monthlyReportDay}),(0,U.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Tag im Monat, an dem die Abrechnung automatisch erstellt wird (1-28)"})]}),(0,U.jsxs)("div",{children:[(0,U.jsx)("label",{htmlFor:"monthlyReportRecipient",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rechnungsempf\xe4nger *"}),(0,U.jsx)("textarea",{id:"monthlyReportRecipient",rows:3,className:"mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ".concat(h.monthlyReportRecipient?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"),value:o.monthlyReportRecipient,onChange:e=>b("monthlyReportRecipient",e.target.value),placeholder:"z.B.\nFirma XY AG\nMusterstra\xdfe 1\n8000 Z\xfcrich"}),h.monthlyReportRecipient&&(0,U.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.monthlyReportRecipient}),(0,U.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Vollst\xe4ndige Adresse des Empf\xe4ngers (Arbeitgeber) f\xfcr die monatliche Abrechnung"})]})]}),o.monthlyReportRecipient.trim()&&(0,U.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,U.jsx)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Vorschau:"}),(0,U.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,U.jsxs)("p",{children:["\ud83d\udcc5 ",(0,U.jsx)("strong",{children:"Abrechnungszeitraum:"})," ",o.monthlyReportDay,". des Vormonats bis ",o.monthlyReportDay-1,". des aktuellen Monats"]}),(0,U.jsxs)("p",{className:"mt-1",children:["\ud83d\udce7 ",(0,U.jsx)("strong",{children:"Empf\xe4nger:"})]}),(0,U.jsx)("div",{className:"ml-4 mt-1 font-mono text-xs bg-white dark:bg-gray-800 p-2 rounded border",children:o.monthlyReportRecipient.split("\n").map(((e,t)=>(0,U.jsx)("div",{children:e},t)))})]})]}),(0,U.jsxs)("div",{className:"mt-6 flex items-center justify-end space-x-3",children:[(0,U.jsx)("button",{type:"button",onClick:x,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:i("common.cancel"),children:(0,U.jsx)(B.A,{className:"h-5 w-5"})}),(0,U.jsx)("button",{onClick:async()=>{if((()=>{const e={};return o.monthlyReportRecipient.trim()||(e.monthlyReportRecipient="Rechnungsempf\xe4nger ist erforderlich"),(o.monthlyReportDay<1||o.monthlyReportDay>28)&&(e.monthlyReportDay="Abrechnungstag muss zwischen 1 und 28 liegen"),u(e),0===Object.keys(e).length})())try{m(!0),await s(o),g.oR.success("Monatsabrechnungs-Einstellungen gespeichert"),a()}catch(e){g.oR.error("Fehler beim Speichern der Einstellungen")}finally{m(!1)}},disabled:d||!o.monthlyReportRecipient.trim(),className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",title:d?"Speichere...":"Aktivieren",children:d?(0,U.jsx)(w.A,{className:"h-5 w-5 animate-spin"}):(0,U.jsx)(A.A,{className:"h-5 w-5"})})]})]})})})]})};var O=a(9399),F=a(9248),z=a(4538),V=a(2704),H=a(7012);const W=["title","titleId"];function Z(e,t){let{title:a,titleId:s}=e,n=(0,u.A)(e,W);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"}))}const G=r.forwardRef(Z),_=()=>{var e;const{t:t}=(0,n.Bd)(),{user:a}=(0,l.As)(),[s,i]=(0,r.useState)([]),[o,c]=(0,r.useState)([]),[h,u]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),[p,y]=(0,r.useState)(null),[f,k]=(0,r.useState)(""),[v,j]=(0,r.useState)(!1),[N,R]=(0,r.useState)(0),[A,S]=(0,r.useState)(""),[D,E]=(0,r.useState)(!1),[C,L]=(0,r.useState)(0);(0,r.useEffect)((()=>{T(),M()}),[]),(0,r.useEffect)((()=>{if(N>0){const e=setTimeout((()=>R(N-1)),1e3);return()=>clearTimeout(e)}}),[N]),(0,r.useEffect)((()=>{if(C>0){const e=setTimeout((()=>L(C-1)),1e3);return()=>clearTimeout(e)}}),[C]);const T=async()=>{try{const e=await m.A.get(d.Sn.DATABASE.TABLES);i(e.data)}catch(e){console.error("Fehler beim Laden der Tabellen:",e),g.oR.error(t("database.loadTablesError"))}},M=async()=>{try{b(!0);const e=await m.A.get(d.Sn.DATABASE.LOGS);c(e.data)}catch(e){console.error(t("database.loadLogsError"),e)}finally{b(!1)}},q=()=>{E(!0),L(5)},P=e=>{switch(e){case"low":return"text-yellow-600 bg-yellow-50 border-yellow-200 dark:text-yellow-400 dark:bg-yellow-900/20 dark:border-yellow-700";case"medium":return"text-orange-600 bg-orange-50 border-orange-200 dark:text-orange-400 dark:bg-orange-900/20 dark:border-orange-700";case"high":return"text-red-600 bg-red-50 border-red-200 dark:text-red-400 dark:bg-red-900/20 dark:border-red-700";default:return"text-gray-600 bg-gray-50 border-gray-200 dark:text-gray-400 dark:bg-gray-700 dark:border-gray-600"}},B=e=>{switch(e){case"success":return"text-green-600 dark:text-green-400";case"error":return"text-red-600 dark:text-red-400";case"start":return"text-blue-600 dark:text-blue-400";default:return"text-gray-600 dark:text-gray-400"}};return a&&a.roles.some((e=>"Admin"===e.role.name))?(0,U.jsxs)("div",{className:"space-y-8",children:[(0,U.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6",children:(0,U.jsxs)("div",{className:"flex items-start",children:[(0,U.jsx)(O.A,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400 mr-3 mt-1"}),(0,U.jsxs)("div",{children:[(0,U.jsx)("h3",{className:"text-lg font-medium text-yellow-800 dark:text-yellow-200 mb-2",children:t("database.warningTitle")}),(0,U.jsxs)("ul",{className:"text-yellow-700 dark:text-yellow-300 text-sm space-y-1",children:[(0,U.jsxs)("li",{children:["\u2022 ",t("database.warning1")]}),(0,U.jsxs)("li",{children:["\u2022 ",t("database.warning2")]}),(0,U.jsxs)("li",{children:["\u2022 ",t("database.warning3")]}),(0,U.jsxs)("li",{children:["\u2022 ",t("database.warning4")]})]})]})]})}),(0,U.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:[(0,U.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center",children:[(0,U.jsx)(F.A,{className:"h-5 w-5 mr-2"}),t("database.resetTablesTitle")]}),(0,U.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map((e=>(0,U.jsxs)("div",{className:"border rounded-lg p-4 ".concat(P(e.danger)),children:[(0,U.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,U.jsx)("h4",{className:"font-medium",children:e.displayName}),(0,U.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("high"===e.danger?"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300":"medium"===e.danger?"bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"),children:"high"===e.danger?t("database.danger.high"):"medium"===e.danger?t("database.danger.medium"):t("database.danger.low")})]}),(0,U.jsx)("p",{className:"text-sm mb-3",children:e.description}),(0,U.jsxs)("div",{className:"flex items-center text-sm mb-3",children:[(0,U.jsx)(z.A,{className:"h-4 w-4 mr-1"}),t("database.seedDataRestored")]}),(0,U.jsxs)("div",{className:"space-y-2",children:["client"===e.name&&(0,U.jsx)("button",{onClick:q,disabled:h,className:"w-full p-2 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50 transition-colors flex items-center justify-center",title:t("database.deleteDemoClients"),children:(0,U.jsx)(F.A,{className:"h-5 w-5"})}),(0,U.jsx)("button",{onClick:()=>{return t=e.name,y(t),j(!0),void R(5);var t},disabled:h,className:"w-full p-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 transition-colors flex items-center justify-center",title:t("database.resetAndRefill"),children:(0,U.jsx)(w.A,{className:"h-5 w-5"})})]})]},e.name)))})]}),(0,U.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6",children:[(0,U.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,U.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center",children:[(0,U.jsx)(V.A,{className:"h-5 w-5 mr-2"}),t("database.operationsTitle")]}),(0,U.jsx)("button",{onClick:M,disabled:x,className:"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 transition-colors",title:t("common.refresh"),children:(0,U.jsx)(w.A,{className:"h-5 w-5"})})]}),x?(0,U.jsx)("div",{className:"text-center py-4",children:t("database.loadingLogs")}):0===o.length?(0,U.jsx)("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:t("database.noLogsAvailable")}):(0,U.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:o.map(((e,a)=>(0,U.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded text-sm",children:[(0,U.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,U.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:new Date(e.timestamp).toLocaleString()}),(0,U.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.operation}),(0,U.jsxs)("span",{className:"font-medium ".concat(B(e.status)),children:["success"===e.status?"\u2713":"error"===e.status?"\u2717":"\u2022"," ",t("database.logStatus.".concat(e.status))]})]}),e.error&&(0,U.jsx)("span",{className:"text-red-600 dark:text-red-400 text-xs max-w-xs truncate",children:e.error})]},a)))})]}),v&&(0,U.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,U.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,U.jsxs)("div",{className:"flex items-center mb-4",children:[(0,U.jsx)(O.A,{className:"h-6 w-6 text-orange-600 mr-2"}),(0,U.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:t("database.confirmResetTitle")})]}),(0,U.jsxs)("div",{className:"mb-4",children:[(0,U.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:t("database.confirmResetMessage",{tableName:null===(e=s.find((e=>e.name===p)))||void 0===e?void 0:e.displayName})}),(0,U.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:t("database.confirmResetWarning")}),N>0&&(0,U.jsxs)("div",{className:"flex items-center text-orange-600 dark:text-orange-400 mb-3",children:[(0,U.jsx)(H.A,{className:"h-4 w-4 mr-1"}),t("database.reflectionTime",{seconds:N})]})]}),(0,U.jsxs)("div",{className:"mb-4",children:[(0,U.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,U.jsx)(G,{className:"h-4 w-4 inline mr-1"}),t("database.adminPasswordLabel")]}),(0,U.jsx)("input",{type:"password",value:f,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:t("database.adminPasswordPlaceholder")})]}),(0,U.jsxs)("div",{className:"flex space-x-3",children:[(0,U.jsx)("button",{onClick:async()=>{if(p&&f)if(N>0)g.oR.error(t("database.waitSeconds",{seconds:N}));else try{u(!0),await m.A.post(d.Sn.DATABASE.RESET_TABLE,{tableName:p,adminPassword:f}),g.oR.success(t("database.resetTableSuccess",{tableName:p})),j(!1),y(null),k(""),M()}catch(r){var e,a;g.oR.error((null===(e=r.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||t("database.resetTableError"))}finally{u(!1)}else g.oR.error(t("database.passwordRequired"))},disabled:h||N>0||!f,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50 transition-colors",children:t(h?"database.resetting":"common.confirm")}),(0,U.jsx)("button",{onClick:()=>{j(!1),y(null),k(""),R(0)},disabled:h,className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:t("common.cancel")})]})]})}),D&&(0,U.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,U.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[(0,U.jsxs)("div",{className:"flex items-center mb-4",children:[(0,U.jsx)(O.A,{className:"h-6 w-6 text-orange-600 mr-2"}),(0,U.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:t("database.confirmDeleteDemoClientsTitle")})]}),(0,U.jsxs)("div",{className:"mb-4",children:[(0,U.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:t("database.confirmDeleteDemoClientsMessage")}),(0,U.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:t("database.confirmDeleteDemoClientsWarning")}),C>0&&(0,U.jsxs)("div",{className:"flex items-center text-orange-600 dark:text-orange-400 mb-3",children:[(0,U.jsx)(H.A,{className:"h-4 w-4 mr-1"}),t("database.reflectionTime",{seconds:C})]})]}),(0,U.jsxs)("div",{className:"mb-4",children:[(0,U.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[(0,U.jsx)(G,{className:"h-4 w-4 inline mr-1"}),t("database.adminPasswordLabel")]}),(0,U.jsx)("input",{type:"password",value:A,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:t("database.adminPasswordPlaceholder")})]}),(0,U.jsxs)("div",{className:"flex space-x-3",children:[(0,U.jsx)("button",{onClick:async()=>{if(A)if(C>0)g.oR.error(t("database.waitSeconds",{seconds:C}));else try{u(!0);await m.A.post(d.Sn.DATABASE.DELETE_DEMO_CLIENTS,{adminPassword:A});g.oR.success(t("database.deleteDemoClientsSuccess")),E(!1),S(""),M()}catch(r){var e,a;g.oR.error((null===(e=r.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||t("database.deleteDemoClientsError"))}finally{u(!1)}else g.oR.error(t("database.passwordRequired"))},disabled:h||C>0||!A,className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50 transition-colors",children:t(h?"database.deleting":"common.confirm")}),(0,U.jsx)("button",{onClick:()=>{E(!1),S(""),L(0)},disabled:h,className:"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",children:t("common.cancel")})]})]})})]}):(0,U.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center",children:[(0,U.jsx)(O.A,{className:"h-12 w-12 text-red-600 dark:text-red-400 mx-auto mb-4"}),(0,U.jsx)("p",{className:"text-red-800 dark:text-red-200 font-medium",children:t("database.noPermission")}),(0,U.jsx)("p",{className:"text-red-600 dark:text-red-400 text-sm mt-2",children:t("database.adminOnly")})]})},K=()=>{const{user:e}=(0,l.As)(),{isAdmin:t}=(0,i.S)(),{isDarkMode:a,toggleDarkMode:u}=(0,h.D)(),{showMessage:x}=(0,c.A)(),{t:b}=(0,n.Bd)(),{activeLanguage:f,organizationLanguage:k,setUserLanguage:j,isLoading:N}=(0,o.o)(),[S,D]=(0,r.useState)(""),[E,C]=(0,r.useState)(!1),[L,T]=(0,r.useState)(null),[M,P]=(0,r.useState)(null),[B,O]=(0,r.useState)(!1),[F,z]=(0,r.useState)(null),V=(0,r.useRef)(null),[H,W]=(0,r.useState)(!1),[Z,G]=(0,r.useState)("personal"),[K,$]=(0,r.useState)({monthlyReportEnabled:!1,monthlyReportDay:25,monthlyReportRecipient:""}),[J,X]=(0,r.useState)(!0),[Y,Q]=(0,r.useState)(!1);(0,r.useEffect)((()=>{console.log("User:",e),console.log("Is Admin:",t()),console.log("User Roles:",null===e||void 0===e?void 0:e.roles)}),[e,t]),(0,r.useEffect)((()=>{(async()=>{if(null!==e&&void 0!==e&&e.invoiceSettings)try{$({monthlyReportEnabled:e.invoiceSettings.monthlyReportEnabled||!1,monthlyReportDay:e.invoiceSettings.monthlyReportDay||25,monthlyReportRecipient:e.invoiceSettings.monthlyReportRecipient||""})}catch(F){console.error("Fehler beim Laden der Monatsabrechnungs-Einstellungen:",F),x(b("errors.loadSettingsError"),"error")}finally{X(!1)}else X(!1)})()}),[e,x]);const ee=async e=>{try{await m.A.put(d.Sn.USERS.INVOICE_SETTINGS,{monthlyReportEnabled:e.monthlyReportEnabled,monthlyReportDay:e.monthlyReportDay,monthlyReportRecipient:e.monthlyReportRecipient}),$(e),e.monthlyReportEnabled||g.oR.success(b("settings.monthlyReportDisabled"))}catch(F){throw console.error("Fehler beim Speichern der Monatsabrechnungs-Einstellungen:",F),g.oR.error(b("errors.saveMonthlyReportSettingsError")),F}},te=async e=>{O(!0),z(null);const t=new FormData;t.append("logo",e);try{console.log("Starting upload..."),console.log("Selected file:",e);const r=localStorage.getItem("token");console.log("Token verf\xfcgbar:",!!r);const s={};r&&(s.Authorization="Bearer ".concat(r));const n=await fetch("".concat(d.H$,"/settings/logo"),{method:"POST",body:t,headers:s});console.log("Response Status:",n.status);const l=await n.text();if(console.log("Response Text:",l),!n.ok)throw new Error(l||b("errors.uploadFailed"));try{const e=JSON.parse(l);console.log("Response Data:",e),x(b("settings.logoUploadSuccess"),"success");const t=document.getElementById("favicon");if(t){(new Date).getTime();try{const e=await fetch("".concat(d.H$,"/settings/logo/base64"));if(e.ok){const a=await e.json();t.href=a.logo}}catch(F){console.error("Favicon konnte nicht aktualisiert werden:",F)}}}catch(a){throw console.error("Fehler beim Parsen der Antwort:",a),new Error(b("errors.invalidResponseFormat"))}T(null),P(null)}catch(r){console.error("Upload error:",r);const e=b("settings.logoUploadError")+": "+(r instanceof Error?r.message:b("errors.unknownError"));z(e),x(e,"error")}finally{O(!1)}},ae=e=>{G(e),z(null)};return e?(0,U.jsxs)("div",{className:"p-6",children:[(0,U.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,U.jsxs)("div",{className:"flex items-center mb-6",children:[(0,U.jsx)(p,{className:"h-6 w-6 mr-2"}),(0,U.jsx)("h2",{className:"text-xl font-semibold",children:b("settings.title")})]}),(0,U.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,U.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,U.jsxs)("button",{className:"".concat("personal"===Z?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),onClick:()=>ae("personal"),children:[(0,U.jsx)(y.A,{className:"h-4 w-4 mr-2"}),b("settings.personal")]}),(0,U.jsxs)("button",{className:"".concat("notifications"===Z?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),onClick:()=>ae("notifications"),children:[(0,U.jsx)(s.A,{className:"h-4 w-4 mr-2"}),b("settings.notifications")]}),(0,U.jsxs)("button",{className:"".concat("system"===Z?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),onClick:()=>ae("system"),children:[(0,U.jsx)(v,{className:"h-4 w-4 mr-2"}),b("settings.system")]})]})}),"personal"===Z&&(0,U.jsxs)("div",{className:"space-y-6",children:[(0,U.jsxs)("div",{className:"flex items-center justify-between border-b pb-6",children:[(0,U.jsxs)("div",{className:"flex-1",children:[(0,U.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:b("settings.language")}),(0,U.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:[b("settings.userLanguage"),k&&(0,U.jsxs)("span",{className:"block mt-1 text-xs",children:[b("settings.organizationLanguage"),": ",b("de"===k?"worktime.language.german":"es"===k?"worktime.language.spanish":"worktime.language.english")]})]})]}),(0,U.jsxs)("select",{value:S||f||(null===e||void 0===e?void 0:e.language)||"",onChange:async e=>{const t=e.target.value;if(D(t),t&&t!==f){C(!0);try{await j(t),x(b("common.save"),"success")}catch(F){console.error("Fehler beim Speichern der Sprache:",F),x(b("errors.saveLanguageError"),"error")}finally{C(!1)}}},disabled:E||N,className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white ml-4",children:[(0,U.jsx)("option",{value:"",children:b("settings.useOrganizationLanguage")}),(0,U.jsx)("option",{value:"de",children:b("worktime.language.german")}),(0,U.jsx)("option",{value:"es",children:b("worktime.language.spanish")}),(0,U.jsx)("option",{value:"en",children:b("worktime.language.english")})]})]}),(0,U.jsxs)("div",{className:"flex items-center justify-between",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:b("settings.darkMode")}),(0,U.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:b("settings.darkModeDescription")})]}),(0,U.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,U.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:a,onChange:u}),(0,U.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),(0,U.jsx)("div",{className:"border-t pt-6",children:J?(0,U.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:b("settings.loadingSettings")}):(0,U.jsx)("div",{className:"space-y-4",children:(0,U.jsxs)("div",{className:"flex items-center justify-between",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("h3",{className:"text-lg font-medium dark:text-white",children:b("settings.monthlyReport")}),(0,U.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[b("settings.monthlyReportDescription"),K.monthlyReportEnabled&&K.monthlyReportRecipient&&(0,U.jsxs)("span",{className:"block text-sm text-green-600 dark:text-green-400 mt-1",children:["\u2713 ",b("settings.monthlyReportEnabled")," ",K.monthlyReportRecipient.split("\n")[0]]})]})]}),(0,U.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,U.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:K.monthlyReportEnabled,onChange:e=>{e.target.checked?Q(!0):ee({monthlyReportEnabled:!1,monthlyReportDay:K.monthlyReportDay,monthlyReportRecipient:K.monthlyReportRecipient})}}),(0,U.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})})})]}),"notifications"===Z&&(0,U.jsx)("div",{className:"space-y-4",children:(0,U.jsx)("div",{className:"p-0 -mt-4",children:(0,U.jsx)(q,{})})}),"system"===Z&&(0,U.jsxs)("div",{className:"space-y-8",children:[(0,U.jsxs)("div",{className:"flex items-center justify-between",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("h3",{className:"text-lg font-medium mb-2 dark:text-white",children:b("settings.logoUpload")}),(0,U.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:b("settings.logoUploadDescription")})]}),(0,U.jsxs)("div",{className:"flex items-center gap-2",children:[(0,U.jsx)("input",{ref:V,type:"file",accept:"image/png,image/jpeg",onChange:e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){if("image/png"!==a.type&&"image/jpeg"!==a.type)return z(b("settings.fileUploadError")),void x(b("settings.fileUploadError"),"error");if(a.size>5242880)return z(b("settings.fileSizeError")),void x(b("settings.fileSizeError"),"error");T(a),P(URL.createObjectURL(a)),z(null),te(a)}},className:"hidden",disabled:B}),(0,U.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=V.current)||void 0===e?void 0:e.click()},disabled:B,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:b(B?"settings.logoUploading":"settings.logoUploadButton"),children:B?(0,U.jsx)(w.A,{className:"h-5 w-5 animate-spin"}):(0,U.jsx)(R,{className:"h-5 w-5"})})]})]}),F&&(0,U.jsx)("div",{className:"text-red-600 dark:text-red-400 text-sm mt-2",children:F}),M&&(0,U.jsxs)("div",{className:"mt-4",children:[(0,U.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:b("settings.logoPreview")}),(0,U.jsx)("img",{src:M,alt:"Logo Vorschau",className:"max-w-xs h-auto rounded-lg shadow-sm"})]}),(0,U.jsxs)("div",{className:"border-t pt-6",children:[(0,U.jsx)("h3",{className:"text-lg font-medium mb-4 dark:text-white",children:b("settings.uploadDirectories")}),(0,U.jsxs)("div",{className:"space-y-4",children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("label",{htmlFor:"taskAttachmentsPath",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:b("settings.taskAttachmentsPath")}),(0,U.jsx)("input",{type:"text",id:"taskAttachmentsPath",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white",defaultValue:"uploads/task-attachments",placeholder:b("settings.taskAttachmentsPathPlaceholder")}),(0,U.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:b("settings.taskAttachmentsPathDescription")})]}),(0,U.jsxs)("div",{children:[(0,U.jsx)("label",{htmlFor:"requestAttachmentsPath",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:b("settings.requestAttachmentsPath")}),(0,U.jsx)("input",{type:"text",id:"requestAttachmentsPath",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white",defaultValue:"uploads/request-attachments",placeholder:b("settings.requestAttachmentsPathPlaceholder")}),(0,U.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:b("settings.requestAttachmentsPathDescription")})]}),(0,U.jsx)("div",{className:"mt-4",children:(0,U.jsx)("button",{type:"button",onClick:async()=>{W(!0);try{var e,t;null===(e=document.getElementById("taskAttachmentsPath"))||void 0===e||e.value,null===(t=document.getElementById("requestAttachmentsPath"))||void 0===t||t.value;await new Promise((e=>setTimeout(e,500))),g.oR.success(b("settings.saveDirectoriesSuccess"))}catch(F){console.error("Fehler beim Speichern der Upload-Verzeichnisse:",F),g.oR.error(b("errors.saveUploadDirectoriesError"))}finally{W(!1)}},disabled:H,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:b(H?"settings.savingDirectories":"settings.saveDirectories"),children:H?(0,U.jsx)(w.A,{className:"h-5 w-5 animate-spin"}):(0,U.jsx)(A.A,{className:"h-5 w-5"})})})]})]}),(0,U.jsxs)("div",{className:"border-t pt-6",children:[(0,U.jsx)("h3",{className:"text-lg font-medium mb-4 dark:text-white",children:b("settings.databaseManagement")}),(0,U.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:b("settings.databaseManagementDescription")}),(0,U.jsx)(_,{})]})]})]}),(0,U.jsx)(I,{isOpen:Y,onClose:()=>Q(!1),onSave:ee,currentSettings:K})]}):(0,U.jsx)("div",{children:b("common.loading")})}}}]);
//# sourceMappingURL=985.e2bad35c.chunk.js.map