"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[587],{587:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var r=a(9379),l=a(5043),i=a(4117),s=a(1816),n=a(2704),d=a(8662),o=a(9248),c=a(45);const u=["title","titleId"];function m(e,t){let{title:a,titleId:r}=e,i=(0,c.A)(e,u);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},i),a?l.createElement("title",{id:r},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const f=l.forwardRef(m);var g=a(9422),y=a(1923),x=a(1801),p=a(7855),h=a(8673),b=a(579);const v=e=>{let{organization:t,onUpload:a}=e;const{t:r}=(0,i.Bd)(),{showMessage:n}=(0,p.A)(),[d,c]=(0,l.useState)([]),[u,m]=(0,l.useState)(!1),[g,h]=(0,l.useState)(!1),[v,N]=(0,l.useState)("certificate"),[k,j]=(0,l.useState)(""),[S,w]=(0,l.useState)(""),[A,C]=(0,l.useState)("400"),[V,P]=(0,l.useState)("100"),[z,T]=(0,l.useState)("1"),F=l.useRef(null);(0,l.useEffect)((()=>{t&&E()}),[t]);const E=async()=>{m(!0);try{const e=(await y.A.get(x.Sn.ORGANIZATION_LIFECYCLE.DOCUMENT_SIGNATURES)).data.documentSignatures||{},t=[];e.employmentCertificate&&t.push({type:"certificate",signerName:e.employmentCertificate.signerName,signerPosition:e.employmentCertificate.signerPosition,path:e.employmentCertificate.path,position:e.employmentCertificate.position}),e.employmentContract&&t.push({type:"contract",signerName:e.employmentContract.signerName,signerPosition:e.employmentContract.signerPosition,path:e.employmentContract.path,position:e.employmentContract.position}),c(t)}catch(l){var e,t,a;if(console.error("Fehler beim Laden der Signaturen:",l),404!==(null===(e=l.response)||void 0===e?void 0:e.status))n((null===(t=l.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||r("lifecycle.loadSignaturesError",{defaultValue:"Fehler beim Laden der Signaturen"}),"error");c([])}finally{m(!1)}};return u?(0,b.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,b.jsx)(s.A,{className:"h-5 w-5 animate-spin text-gray-400"})}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:r("lifecycle.signatureType",{defaultValue:"Signatur-Typ"})}),(0,b.jsxs)("select",{value:v,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",children:[(0,b.jsx)("option",{value:"certificate",children:r("lifecycle.certificate",{defaultValue:"Arbeitszeugnis"})}),(0,b.jsx)("option",{value:"contract",children:r("lifecycle.contract",{defaultValue:"Arbeitsvertrag"})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[r("lifecycle.signerName",{defaultValue:"Name des Unterzeichners"})," ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:k,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:r("lifecycle.signerNamePlaceholder",{defaultValue:"z.B. Stefan Bossart"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:r("lifecycle.signerPosition",{defaultValue:"Position"})}),(0,b.jsx)("input",{type:"text",value:S,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:r("lifecycle.signerPositionPlaceholder",{defaultValue:"z.B. Gesch\xe4ftsf\xfchrer"})})]}),(0,b.jsxs)("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:r("lifecycle.signaturePosition",{defaultValue:"Signatur-Position im PDF"})}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:r("lifecycle.positionX",{defaultValue:"X (horizontal)"})}),(0,b.jsx)("input",{type:"number",value:A,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm",placeholder:"400",min:"0"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:r("lifecycle.positionXHint",{defaultValue:"0 = links"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:r("lifecycle.positionY",{defaultValue:"Y (vertikal)"})}),(0,b.jsx)("input",{type:"number",value:V,onChange:e=>P(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm",placeholder:"100",min:"0"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:r("lifecycle.positionYHint",{defaultValue:"0 = unten"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:r("lifecycle.positionPage",{defaultValue:"Seite"})}),(0,b.jsx)("input",{type:"number",value:z,onChange:e=>T(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm",placeholder:"1",min:"1"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:r("lifecycle.positionPageHint",{defaultValue:"Seitennummer"})})]})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:r("lifecycle.signaturePositionHint",{defaultValue:"Koordinaten in PDF-Punkten (1 Punkt = 1/72 Zoll). A4: 595 x 842 Punkte. Standard: X=400, Y=100, Seite=1"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[r("lifecycle.signatureFile",{defaultValue:"Signatur-Datei"})," ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center",children:[(0,b.jsx)("input",{ref:F,type:"file",accept:"image/jpeg,image/png,image/gif,application/pdf",onChange:async e=>{var t;const l=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!l)return;if(["image/jpeg","image/png","image/gif","application/pdf"].includes(l.type))if(k.trim()){h(!0);try{const e=new FormData;e.append("file",l),e.append("type","certificate"===v?"employmentCertificate":"employmentContract"),e.append("signerName",k),S&&e.append("signerPosition",S),e.append("positionX",A||"400"),e.append("positionY",V||"100"),e.append("page",z||"1");const t=await y.A.post(x.Sn.ORGANIZATION_LIFECYCLE.UPLOAD_SIGNATURE,e,{headers:{"Content-Type":"multipart/form-data"}});n(t.data.message||r("lifecycle.signatureUploaded",{defaultValue:"Signatur erfolgreich hochgeladen"}),"success"),j(""),w(""),C("400"),P("100"),T("1"),E(),a()}catch(d){var i,s;console.error("Fehler beim Hochladen:",d),n((null===(i=d.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.message)||r("lifecycle.uploadError",{defaultValue:"Fehler beim Hochladen"}),"error")}finally{h(!1),F.current&&(F.current.value="")}}else n(r("lifecycle.signerNameRequired",{defaultValue:"Name des Unterzeichners ist erforderlich"}),"error");else n(r("lifecycle.onlyImageOrPdfAllowed",{defaultValue:"Nur Bilder (JPEG, PNG, GIF) oder PDF-Dateien sind erlaubt"}),"error")},className:"hidden"}),(0,b.jsx)("button",{onClick:()=>{var e;return null===(e=F.current)||void 0===e?void 0:e.click()},disabled:g||!k.trim(),className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-blue-500 dark:hover:bg-blue-600",title:g?r("common.uploading",{defaultValue:"Lade hoch..."}):r("lifecycle.selectSignatureFile",{defaultValue:"Hochladen"}),children:g?(0,b.jsx)(s.A,{className:"h-5 w-5 animate-spin"}):(0,b.jsx)(f,{className:"h-5 w-5"})}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:r("lifecycle.signatureFileHint",{defaultValue:"JPEG, PNG, GIF oder PDF (max. 5MB)"})})]})]})]})}),d.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r("lifecycle.uploadedSignatures",{defaultValue:"Hochgeladene Signaturen"})}),d.map((e=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium dark:text-white",children:"certificate"===e.type?r("lifecycle.certificate",{defaultValue:"Arbeitszeugnis"}):r("lifecycle.contract",{defaultValue:"Arbeitsvertrag"})}),(0,b.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.signerName,e.signerPosition&&" - ".concat(e.signerPosition)]}),e.position&&(0,b.jsxs)("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:[r("lifecycle.position",{defaultValue:"Position"}),": X=",e.position.x,", Y=",e.position.y,", ",r("lifecycle.page",{defaultValue:"Seite"})," ",e.position.page]})]}),(0,b.jsx)("button",{onClick:()=>(async e=>{if(window.confirm(r("lifecycle.deleteSignatureConfirm",{defaultValue:"Signatur wirklich l\xf6schen?"})))try{const t=(await y.A.get(x.Sn.ORGANIZATIONS.CURRENT)).data.settings||{};if(t.documentSignatures){const a="certificate"===e?"employmentCertificate":"employmentContract";delete t.documentSignatures[a],await y.A.put(x.Sn.ORGANIZATIONS.CURRENT,{settings:t})}n(r("lifecycle.signatureDeleted",{defaultValue:"Signatur erfolgreich gel\xf6scht"}),"success"),E()}catch(l){var t,a;console.error("Fehler beim L\xf6schen:",l),n((null===(t=l.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||r("lifecycle.deleteError",{defaultValue:"Fehler beim L\xf6schen"}),"error")}})(e.type),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 rounded-md",title:r("common.delete",{defaultValue:"L\xf6schen"}),children:(0,b.jsx)(o.A,{className:"h-5 w-5"})})]},e.type)))]})]})},N=e=>{let{organization:t,onSave:a}=e;const{t:n}=(0,i.Bd)(),{showMessage:d}=(0,p.A)(),[o,c]=(0,l.useState)("certificate"),[u,m]=(0,l.useState)({}),[f,v]=(0,l.useState)(!1),[N,k]=(0,l.useState)(!1),j=["userName","organizationName","currentDate","identificationNumber","startDate","endDate"],S=["userName","organizationName","currentDate","identificationNumber","startDate","endDate","position","salary","workingHours"];(0,l.useEffect)((()=>{t&&w()}),[t,o]);const w=async()=>{try{var e;const a=null===t||void 0===t?void 0:t.settings,r=null===a||void 0===a||null===(e=a.documentTemplates)||void 0===e?void 0:e["certificate"===o?"employmentCertificate":"employmentContract"],l=(null===r||void 0===r?void 0:r.fields)||{},i=50,s=20;let n=841.89-i-30;const d={},c="certificate"===o?j:S,u={userName:{x:i,y:n,fontSize:14},organizationName:{x:i,y:n-s,fontSize:12},currentDate:{x:i,y:n-2*s,fontSize:12},identificationNumber:{x:i,y:n-3*s,fontSize:12},startDate:{x:i,y:n-4*s,fontSize:12},endDate:{x:i,y:n-5*s,fontSize:12}};"contract"===o&&(u.position={x:i,y:n-6*s,fontSize:12},u.salary={x:i,y:n-7*s,fontSize:12},u.workingHours={x:i,y:n-8*s,fontSize:12}),c.forEach((e=>{d[e]=l[e]||u[e]||{x:i,y:n,fontSize:"userName"===e?14:12}})),m(d)}catch(a){console.error("Fehler beim Laden der Felder:",a)}},A=(e,t,a)=>{m((l=>(0,r.A)((0,r.A)({},l),{},{[e]:(0,r.A)((0,r.A)({},l[e]),{},{[t]:"fontSize"===t?parseFloat(a)||12:parseFloat(a)||0})})))},C="certificate"===o?j:S,V={userName:n("lifecycle.fieldUserName",{defaultValue:"Benutzername"}),organizationName:n("lifecycle.fieldOrganizationName",{defaultValue:"Organisationsname"}),currentDate:n("lifecycle.fieldCurrentDate",{defaultValue:"Aktuelles Datum"}),identificationNumber:n("lifecycle.fieldIdentificationNumber",{defaultValue:"Ausweisnummer"}),startDate:n("lifecycle.fieldStartDate",{defaultValue:"Startdatum"}),endDate:n("lifecycle.fieldEndDate",{defaultValue:"Enddatum"}),position:n("lifecycle.fieldPosition",{defaultValue:"Position"}),salary:n("lifecycle.fieldSalary",{defaultValue:"Gehalt"}),workingHours:n("lifecycle.fieldWorkingHours",{defaultValue:"Arbeitsstunden"})};return(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold dark:text-white",children:n("organization.fieldPositions",{defaultValue:"Feld-Positionen konfigurieren"})}),(0,b.jsx)("div",{className:"flex items-center space-x-2",children:(0,b.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm",children:[(0,b.jsx)("option",{value:"certificate",children:n("lifecycle.certificate",{defaultValue:"Certificado Laboral"})}),(0,b.jsx)("option",{value:"contract",children:n("lifecycle.contract",{defaultValue:"Contrato de Trabajo"})})]})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200 font-medium mb-1",children:n("lifecycle.fieldPositionsInfo",{defaultValue:"Konfigurieren Sie die Positionen der Felder im Template-PDF."})}),(0,b.jsx)("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:n("lifecycle.fieldPositionsHint",{defaultValue:"Koordinaten in PDF-Punkten. A4: 595 x 842 Punkte. Y=0 ist unten, Y=842 ist oben. X=0 ist links, X=595 ist rechts."})})]}),(0,b.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:C.map((e=>{var t,a,r;return(0,b.jsxs)("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-3",children:[(0,b.jsx)("div",{className:"font-medium text-sm dark:text-white mb-2",children:V[e]||e}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"X"}),(0,b.jsx)("input",{type:"number",value:(null===(t=u[e])||void 0===t?void 0:t.x)||0,onChange:t=>A(e,"x",t.target.value),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm",min:"0"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Y"}),(0,b.jsx)("input",{type:"number",value:(null===(a=u[e])||void 0===a?void 0:a.y)||0,onChange:t=>A(e,"y",t.target.value),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm",min:"0"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:n("lifecycle.fontSize",{defaultValue:"Schriftgr\xf6\xdfe"})}),(0,b.jsx)("input",{type:"number",value:(null===(r=u[e])||void 0===r?void 0:r.fontSize)||12,onChange:t=>A(e,"fontSize",t.target.value),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm",min:"8",max:"72"})]})]})]},e)}))}),(0,b.jsxs)("div",{className:"flex items-center justify-end space-x-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:[(0,b.jsx)("button",{onClick:async()=>{if(window.confirm(n("lifecycle.resetFieldPositionsConfirm",{defaultValue:"Positionen auf Standardwerte zur\xfccksetzen?"}))){const e=50,t=20;let a=841.89-e-30;const r={userName:{x:e,y:a,fontSize:14},organizationName:{x:e,y:a-t,fontSize:12},currentDate:{x:e,y:a-2*t,fontSize:12},identificationNumber:{x:e,y:a-3*t,fontSize:12},startDate:{x:e,y:a-4*t,fontSize:12},endDate:{x:e,y:a-5*t,fontSize:12}};"contract"===o&&(r.position={x:e,y:a-6*t,fontSize:12},r.salary={x:e,y:a-7*t,fontSize:12},r.workingHours={x:e,y:a-8*t,fontSize:12});const l={};("certificate"===o?j:S).forEach((t=>{l[t]=r[t]||{x:e,y:a,fontSize:"userName"===t?14:12}})),m(l)}},className:"p-2 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-white",title:n("common.reset",{defaultValue:"Zur\xfccksetzen"}),children:(0,b.jsx)(s.A,{className:"h-5 w-5"})}),(0,b.jsx)("button",{onClick:async()=>{k(!0);try{const e=(await y.A.get(x.Sn.ORGANIZATIONS.CURRENT)).data.settings||{};e.documentTemplates||(e.documentTemplates={});const t="certificate"===o?"employmentCertificate":"employmentContract";e.documentTemplates[t]||(e.documentTemplates[t]={}),e.documentTemplates[t].fields=u,await h.h.updateOrganization({settings:e}),d(n("lifecycle.fieldPositionsSaved",{defaultValue:"Feld-Positionen erfolgreich gespeichert"}),"success"),a&&a()}catch(r){var e,t;console.error("Fehler beim Speichern:",r),d((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||n("lifecycle.saveError",{defaultValue:"Fehler beim Speichern"}),"error")}finally{k(!1)}},disabled:N,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-blue-700 dark:hover:bg-blue-800",title:N?n("common.saving",{defaultValue:"Speichern..."}):n("common.save",{defaultValue:"Speichern"}),children:N?(0,b.jsx)(s.A,{className:"h-5 w-5 animate-spin"}):(0,b.jsx)(g.A,{className:"h-5 w-5"})})]})]})]})},k=e=>{let{organization:t,onSave:a}=e;const{t:r}=(0,i.Bd)(),{showMessage:c}=(0,p.A)(),[u,m]=(0,l.useState)([]),[f,g]=(0,l.useState)(!1),[h,k]=(0,l.useState)(!1),[j,S]=(0,l.useState)(!1),[w,A]=(0,l.useState)("certificate"),C=l.useRef(null);(0,l.useEffect)((()=>{t&&V()}),[t]);const V=async()=>{g(!0);try{const e=(await y.A.get(x.Sn.ORGANIZATION_LIFECYCLE.DOCUMENT_TEMPLATES)).data.documentTemplates||{},t=[];e.employmentCertificate&&t.push({name:"Arbeitszeugnis",type:"certificate",filePath:e.employmentCertificate.path,version:e.employmentCertificate.version}),e.employmentContract&&t.push({name:"Arbeitsvertrag",type:"contract",filePath:e.employmentContract.path,version:e.employmentContract.version}),m(t)}catch(l){var e,t,a;if(console.error("Fehler beim Laden der Templates:",l),404!==(null===(e=l.response)||void 0===e?void 0:e.status))c((null===(t=l.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||r("lifecycle.loadTemplatesError",{defaultValue:"Fehler beim Laden der Templates"}),"error");m([])}finally{g(!1)}};return f?(0,b.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,b.jsx)(s.A,{className:"h-6 w-6 animate-spin text-gray-400"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold flex items-center dark:text-white",children:[(0,b.jsx)(n.A,{className:"h-5 w-5 mr-2"}),r("organization.documentTemplates",{defaultValue:"Dokumenten-Templates"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsxs)("select",{value:w,onChange:e=>A(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm",children:[(0,b.jsx)("option",{value:"certificate",children:"Arbeitszeugnis"}),(0,b.jsx)("option",{value:"contract",children:"Arbeitsvertrag"})]}),(0,b.jsx)("button",{onClick:()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.click()},disabled:j,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:j?r("common.uploading",{defaultValue:"Lade hoch..."}):r("lifecycle.uploadTemplate",{defaultValue:"Template hochladen"}),children:j?(0,b.jsx)(s.A,{className:"h-5 w-5 animate-spin"}):(0,b.jsx)(d.A,{className:"h-5 w-5"})})]}),(0,b.jsx)("input",{ref:C,type:"file",accept:".pdf",onChange:async e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a)if("application/pdf"===a.type){S(!0);try{const e=new FormData;e.append("file",a),e.append("type","certificate"===w?"employmentCertificate":"employmentContract");const t=await y.A.post(x.Sn.ORGANIZATION_LIFECYCLE.UPLOAD_TEMPLATE,e,{headers:{"Content-Type":"multipart/form-data"}});c(t.data.message||r("lifecycle.templateUploaded",{defaultValue:"Template erfolgreich hochgeladen"}),"success"),V()}catch(s){var l,i;console.error("Fehler beim Hochladen:",s),c((null===(l=s.response)||void 0===l||null===(i=l.data)||void 0===i?void 0:i.message)||r("lifecycle.uploadError",{defaultValue:"Fehler beim Hochladen"}),"error")}finally{S(!1),C.current&&(C.current.value="")}}else c(r("lifecycle.onlyPdfAllowed",{defaultValue:"Nur PDF-Dateien sind erlaubt"}),"error")},className:"hidden"})]}),0===u.length?(0,b.jsxs)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[(0,b.jsx)(n.A,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,b.jsx)("p",{children:r("lifecycle.noTemplates",{defaultValue:"Keine Templates vorhanden"})}),(0,b.jsx)("p",{className:"text-sm mt-2",children:r("lifecycle.uploadFirstTemplate",{defaultValue:"Laden Sie Ihr erstes Template hoch"})})]}):(0,b.jsx)("div",{className:"space-y-2",children:u.map((e=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium dark:text-white",children:e.name}),(0,b.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["certificate"===e.type?r("lifecycle.certificate",{defaultValue:"Arbeitszeugnis"}):r("lifecycle.contract",{defaultValue:"Arbeitsvertrag"}),e.version&&" - Version ".concat(e.version)]}),e.filePath&&(0,b.jsx)("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:e.filePath})]}),(0,b.jsx)("button",{onClick:()=>(async e=>{if(window.confirm(r("lifecycle.deleteTemplateConfirm",{defaultValue:"Template wirklich l\xf6schen?"})))try{const t=(await y.A.get(x.Sn.ORGANIZATIONS.CURRENT)).data.settings||{};if(t.documentTemplates){const a="certificate"===e?"employmentCertificate":"employmentContract";delete t.documentTemplates[a],await y.A.put(x.Sn.ORGANIZATIONS.CURRENT,{settings:t})}c(r("lifecycle.templateDeleted",{defaultValue:"Template erfolgreich gel\xf6scht"}),"success"),V()}catch(l){var t,a;console.error("Fehler beim L\xf6schen:",l),c((null===(t=l.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||r("lifecycle.deleteError",{defaultValue:"Fehler beim L\xf6schen"}),"error")}})(e.type),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 rounded-md",title:r("common.delete",{defaultValue:"L\xf6schen"}),children:(0,b.jsx)(o.A,{className:"h-5 w-5"})})]},e.type)))})]}),(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,b.jsxs)("h3",{className:"text-lg font-semibold flex items-center dark:text-white",children:[(0,b.jsx)(n.A,{className:"h-5 w-5 mr-2"}),r("organization.documentSignatures",{defaultValue:"Dokumenten-Signaturen"})]})}),(0,b.jsx)(v,{organization:t,onUpload:V})]}),(0,b.jsx)(N,{organization:t,onSave:a})]})}}}]);
//# sourceMappingURL=587.a37f349b.chunk.js.map