"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[368],{2368:(e,t,r)=>{r.r(t),r.d(t,{default:()=>je});var a=r(5043),s=r(4117),l=r(3216),n=r(3800),i=r(542);const d={getAllArticles:async()=>(await i.Ay.get("/cerebro/carticles")).data,getArticleById:async e=>(await i.Ay.get("/cerebro/carticles/".concat(e))).data,getArticleBySlug:async e=>(await i.Ay.get("/cerebro/carticles/slug/".concat(e))).data,getArticlesStructure:async()=>(await i.Ay.get("/cerebro/carticles/structure")).data,createArticle:async e=>(await i.Ay.post("/cerebro/carticles",e)).data,updateArticle:async(e,t)=>(await i.Ay.put("/cerebro/carticles/".concat(e),t)).data,deleteArticle:async e=>{await i.Ay.delete("/cerebro/carticles/".concat(e))},searchArticles:async e=>(await i.Ay.get("/cerebro/carticles/search?q=".concat(encodeURIComponent(e)))).data},c={getMediaByArticle:async e=>(await i.Ay.get("/cerebro/media/carticle/".concat(e))).data,getMediaById:async e=>(await i.Ay.get("/cerebro/media/".concat(e))).data,uploadMedia:async(e,t)=>(await i.Ay.post("/cerebro/media",e,{onUploadProgress:t})).data,deleteMedia:async e=>{await i.Ay.delete("/cerebro/media/".concat(e))},updateMediaFilename:async(e,t)=>(await i.Ay.put("/cerebro/media/".concat(e),{filename:t})).data},o={getLinksByArticle:async e=>(await i.Ay.get("/cerebro/links/carticle/".concat(e))).data,getLinkById:async e=>(await i.Ay.get("/cerebro/links/".concat(e))).data,getLinkPreview:async e=>(await i.Ay.get("/cerebro/links/preview?url=".concat(encodeURIComponent(e)))).data,createLink:async e=>(await i.Ay.post("/cerebro/links",e)).data,updateLink:async(e,t)=>(await i.Ay.put("/cerebro/links/".concat(e),{title:t})).data,deleteLink:async e=>{await i.Ay.delete("/cerebro/links/".concat(e))},createExternalLink:async e=>(await i.Ay.post("/api/cerebro/links",e)).data,updateExternalLink:async(e,t)=>(await i.Ay.put("/api/cerebro/links/".concat(e),t)).data,deleteExternalLink:async e=>{await i.Ay.delete("/api/cerebro/links/".concat(e))}};var u=r(2774),m=r(579);const b=e=>{let{limit:t,searchQuery:r}=e;const{t:i}=(0,s.Bd)(),[c,o]=(0,a.useState)([]),[b,h]=(0,a.useState)(!0),[x,g]=(0,a.useState)(null),[p,f]=(0,a.useState)(r||""),[y,j]=(0,a.useState)("updatedAt"),[k,v]=(0,a.useState)("desc"),w=(0,l.Zp)(),{hasPermission:N}=(0,n.S)(),A=N("cerebro","write","cerebro");(0,a.useEffect)((()=>{(async()=>{try{if(h(!0),r){const e=await d.searchArticles(r);o(e)}else{const e=await d.getAllArticles();o(e)}g(null)}catch(e){console.error("Fehler beim Laden der Artikel:",e),g("Fehler beim Laden der Artikel. Bitte versuchen Sie es sp\xe4ter erneut.")}finally{h(!1)}})()}),[r]);const S=async()=>{if(p.trim())try{h(!0);const e=await d.searchArticles(p);o(e),g(null)}catch(e){console.error("Fehler bei der Suche:",e),g("Fehler bei der Suche. Bitte versuchen Sie es sp\xe4ter erneut.")}finally{h(!1)}else try{h(!0);const e=await d.getAllArticles();o(e),g(null)}catch(e){console.error("Fehler beim Laden der Artikel:",e),g("Fehler beim Laden der Artikel. Bitte versuchen Sie es sp\xe4ter erneut.")}finally{h(!1)}},L=e=>{y===e?v("asc"===k?"desc":"asc"):(j(e),v("asc"))},E=[...c].sort(((e,t)=>{if("title"===y)return"asc"===k?e.title.localeCompare(t.title):t.title.localeCompare(e.title);{const r=new Date(e.updatedAt).getTime(),a=new Date(t.updatedAt).getTime();return"asc"===k?r-a:a-r}})),C=e=>e.creatorFirstName&&e.creatorLastName?"".concat(e.creatorFirstName," ").concat(e.creatorLastName):"Unbekannt",F=e=>e.parentId?"Vorhanden":"Keine";return(0,m.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold dark:text-white",children:"Cerebro"}),A&&(0,m.jsxs)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded flex items-center",onClick:()=>{w("/cerebro/create")},children:[(0,m.jsx)(u.OiG,{className:"mr-2"})," ",i("cerebro.articleList.newArticle",{defaultValue:"Neuer Artikel"})]})]}),(0,m.jsx)("div",{className:"mb-6",children:(0,m.jsxs)("div",{className:"flex",children:[(0,m.jsx)("input",{type:"text",className:"w-full md:w-[300px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-l-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:i("cerebro.articleList.searchPlaceholder",{defaultValue:"Artikel suchen..."}),value:p,onChange:e=>f(e.target.value),onKeyDown:e=>"Enter"===e.key&&S()}),(0,m.jsx)("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-r-md flex items-center",onClick:S,children:(0,m.jsx)(u.KSO,{})})]})}),x&&(0,m.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:x}),b?(0,m.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,m.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 dark:border-blue-400"})}):(0,m.jsx)(m.Fragment,{children:0===c.length?(0,m.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:p?"Keine Artikel gefunden, die Ihren Suchkriterien entsprechen.":"Noch keine Artikel vorhanden."}):(0,m.jsx)("div",{className:"overflow-x-auto bg-white dark:bg-gray-800 rounded-lg shadow",children:(0,m.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,m.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>L("title"),children:(0,m.jsxs)("div",{className:"flex items-center",children:["Titel","title"===y&&("asc"===k?(0,m.jsx)(u.MPV,{className:"ml-1"}):(0,m.jsx)(u.Bg$,{className:"ml-1"}))]})}),(0,m.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Erstellt von"}),(0,m.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer",onClick:()=>L("updatedAt"),children:(0,m.jsxs)("div",{className:"flex items-center",children:["Zuletzt aktualisiert","updatedAt"===y&&("asc"===k?(0,m.jsx)(u.EDF,{className:"ml-1"}):(0,m.jsx)(u.HL0,{className:"ml-1"}))]})}),(0,m.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"\xdcbergeordnet"})]})}),(0,m.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:E.map((e=>{return(0,m.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>{return t=e.slug,void w("/cerebro/".concat(t));var t},children:[(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,m.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.title})}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,m.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:C(e)})}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,m.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:(t=e.updatedAt,new Date(t).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))})}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,m.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:F(e)})})]},e.id);var t}))})]})})})]})};var h=r(5475),x=r(9379),g=r(45),p=r(9813),f=r(9285),y=r(1286),j=r(9637);r(2566);const k=["node","inline","className","children"],v=e=>{let{owner:t,repo:r,path:s,branch:l="main"}=e;const[n,i]=(0,a.useState)(""),[d,c]=(0,a.useState)(!0),[o,u]=(0,a.useState)(null);(0,a.useEffect)((()=>{(async()=>{try{c(!0);const e="https://raw.githubusercontent.com/".concat(t,"/").concat(r,"/").concat(l,"/").concat(s),a=await fetch(e);if(!a.ok)throw new Error("HTTP Fehler! Status: ".concat(a.status));const n=await a.text();i(n),u(null)}catch(e){console.error("Fehler beim Laden der Markdown-Datei:",e),u("Die Markdown-Datei konnte nicht geladen werden: ".concat(e instanceof Error?e.message:"Unbekannter Fehler")),i("")}finally{c(!1)}})()}),[t,r,s,l]);const b={code(e){let{node:t,inline:r,className:a,children:s}=e,l=(0,g.A)(e,k);const n=/language-(\w+)/.exec(a||"");return!r&&n?(0,m.jsx)("pre",{className:"language-".concat(n[1]," dark:bg-gray-800 dark:border-gray-700"),children:(0,m.jsx)("code",(0,x.A)((0,x.A)({className:"".concat(a," dark:text-gray-200")},l),{},{children:String(s).replace(/\n$/,"")}))}):(0,m.jsx)("code",(0,x.A)((0,x.A)({className:"".concat(a||""," dark:bg-gray-800 dark:text-gray-200")},l),{},{children:s}))},h1:e=>(0,m.jsx)("h1",(0,x.A)({className:"text-2xl font-bold mb-4 border-b border-gray-200 dark:border-gray-700 pb-2 dark:text-white"},e)),h2:e=>(0,m.jsx)("h2",(0,x.A)({className:"text-xl font-bold mt-6 mb-4 border-b border-gray-200 dark:border-gray-700 pb-2 dark:text-white"},e)),h3:e=>(0,m.jsx)("h3",(0,x.A)({className:"text-lg font-bold mt-5 mb-3 dark:text-white"},e)),a:e=>(0,m.jsx)("a",(0,x.A)({className:"text-blue-600 dark:text-blue-400 hover:underline",target:"_blank",rel:"noopener noreferrer"},e)),table:e=>(0,m.jsx)("table",(0,x.A)({className:"border-collapse border border-gray-300 dark:border-gray-700 my-4"},e)),th:e=>(0,m.jsx)("th",(0,x.A)({className:"border border-gray-300 dark:border-gray-700 px-4 py-2 bg-gray-100 dark:bg-gray-800 dark:text-gray-200"},e)),td:e=>(0,m.jsx)("td",(0,x.A)({className:"border border-gray-300 dark:border-gray-700 px-4 py-2 dark:text-gray-200"},e)),ul:e=>(0,m.jsx)("ul",(0,x.A)({className:"list-disc pl-5 mb-4 dark:text-gray-200"},e)),ol:e=>(0,m.jsx)("ol",(0,x.A)({className:"list-decimal pl-5 mb-4 dark:text-gray-200"},e)),li:e=>(0,m.jsx)("li",(0,x.A)({className:"mb-1 dark:text-gray-200"},e)),img:e=>(0,m.jsx)("img",(0,x.A)({className:"max-w-full h-auto my-4"},e)),p:e=>(0,m.jsx)("p",(0,x.A)({className:"dark:text-gray-200 mb-4"},e)),blockquote:e=>(0,m.jsx)("blockquote",(0,x.A)({className:"border-l-4 border-gray-300 dark:border-gray-700 pl-4 py-2 italic text-gray-600 dark:text-gray-400"},e))};return d?(0,m.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,m.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 dark:border-blue-400"})}):o?(0,m.jsxs)("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:[(0,m.jsx)("h3",{className:"font-bold",children:"Fehler"}),(0,m.jsx)("p",{children:o}),(0,m.jsxs)("p",{className:"mt-2",children:["Pr\xfcfe, ob die Datei",(0,m.jsx)("a",{href:"https://github.com/".concat(t,"/").concat(r,"/blob/").concat(l,"/").concat(s),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline ml-1",children:s})," ","im Repository existiert."]})]}):(0,m.jsxs)("div",{className:"github-markdown-content",children:[(0,m.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 p-2 mb-4 rounded text-sm flex justify-between items-center",children:[(0,m.jsxs)("span",{className:"dark:text-gray-300",children:["Datei: ",(0,m.jsx)("code",{className:"bg-white dark:bg-gray-800 px-1 py-0.5 rounded",children:s})]}),(0,m.jsx)("a",{href:"https://github.com/".concat(t,"/").concat(r,"/blob/").concat(l,"/").concat(s),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:"Auf GitHub anzeigen \u2192"})]}),(0,m.jsx)("div",{className:"markdown-body dark:bg-gray-800 dark:text-white",children:(0,m.jsx)(p.oz,{components:b,remarkPlugins:[f.A],rehypePlugins:[y.A,j.A],children:n})})]})};var w=r(6896),N=r(1713),A=r(1801),S=r(1602),L=r(8940),E=r(2704),C=r(1559),F=(r(4791),r(9642),r(9670)),D=r(5442),R=r(2811),M=r(9248),T=r(6009),I=r(7012),B=r(8662);const P=()=>(0,m.jsx)(F.A,{className:"h-5 w-5 mr-1"}),U=()=>(0,m.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),O=()=>(0,m.jsx)(D.A,{className:"h-5 w-5 mr-2"}),z=()=>(0,m.jsx)(T.A,{className:"h-5 w-5 mr-1"}),H=()=>(0,m.jsx)(I.A,{className:"h-5 w-5 mr-1"}),_=()=>{const{t:e}=(0,s.Bd)(),{slug:t}=(0,l.g)(),r=(0,l.Zp)(),{hasPermission:i}=(0,n.S)(),[c,o]=(0,a.useState)(null),[u,b]=(0,a.useState)(!0),[x,g]=(0,a.useState)(null),[p,f]=(0,a.useState)([]),[y,j]=(0,a.useState)(null),[k,S]=(0,a.useState)(!1),F=i("cerebro","both","button");i("cerebro","both","page");(0,a.useEffect)((()=>{(async()=>{if(t)try{b(!0);const e=await d.getArticleBySlug(t);o(e);const r=e.externalLinks.filter((e=>"github_markdown"===e.type));f(r),g(null)}catch(r){console.error("Fehler beim Laden des Artikels:",r),g(e("cerebro.messages.loadError"))}finally{b(!1)}})()}),[t]),(0,a.useEffect)((()=>{c?(async()=>{if(c)try{const e=await d.getArticleBySlug("markdown-folder"),t=e&&c.parentId===e.id||null!==c.githubPath;S(t),t&&p.length>0?j(p[0]):j(null)}catch(e){console.warn("Markdown-Ordner nicht gefunden:",e);const t=null!==c.githubPath;S(t),t&&p.length>0?j(p[0]):j(null)}})():(S(!1),j(null))}),[c,p]);if(u)return(0,m.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,m.jsx)(U,{})});if(x||!c)return(0,m.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[(0,m.jsx)("h3",{className:"font-bold",children:e("common.error")}),(0,m.jsx)("p",{children:x||e("cerebro.messages.articleNotFound")}),(0,m.jsxs)("button",{onClick:()=>r("/cerebro"),className:"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded flex items-center",children:[(0,m.jsx)(O,{})," ",e("cerebro.actions.back")]})]});return(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,m.jsx)("button",{onClick:()=>r("/cerebro"),className:"p-2 rounded-full text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":e("cerebro.back"),children:(0,m.jsx)(D.A,{className:"h-5 w-5"})}),(0,m.jsx)("div",{className:"flex space-x-2",children:F&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{onClick:()=>r("/cerebro/".concat(t,"/edit")),className:"p-2 rounded-full text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900","aria-label":"Bearbeiten",children:(0,m.jsx)(R.A,{className:"h-5 w-5"})}),(0,m.jsx)("button",{onClick:async()=>{if(c&&window.confirm(e("cerebro.messages.deleteConfirm")))try{await d.deleteArticle(c.id),r("/cerebro")}catch(t){console.error("Fehler beim L\xf6schen des Artikels:",t),alert(e("cerebro.messages.deleteError"))}},className:"p-2 rounded-full text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900","aria-label":e("cerebro.delete"),children:(0,m.jsx)(M.A,{className:"h-5 w-5"})})]})})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("h1",{className:"text-3xl font-bold dark:text-white",children:c.title}),(0,m.jsxs)("div",{className:"flex text-gray-600 dark:text-gray-400 text-sm mt-2",children:[(0,m.jsxs)("div",{className:"flex items-center mr-4",children:[(0,m.jsx)(z,{}),(0,m.jsxs)("span",{children:[e("cerebro.createdBy")," ",c.creatorFirstName," ",c.creatorLastName]})]}),(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(H,{}),(0,m.jsxs)("span",{children:[e("cerebro.updatedAt")," ",(0,N.I5)(c.updatedAt)]})]})]})]}),(0,m.jsxs)("div",{className:"mb-6",children:[p.length>0&&k&&(0,m.jsx)("div",{className:"mb-4",children:(0,m.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-4",children:(0,m.jsxs)("div",{className:"flex",children:[p.map((e=>(0,m.jsx)("button",{className:"py-2 px-4 font-medium text-sm ".concat((null===y||void 0===y?void 0:y.id)===e.id?"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),onClick:()=>j(e),children:e.title||"GitHub"},e.id))),(0,m.jsx)("button",{className:"py-2 px-4 font-medium text-sm ".concat(y?"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300":"border-b-2 border-blue-500 text-blue-600 dark:text-blue-400"),onClick:()=>j(null),children:e("cerebro.article")})]})})}),(0,m.jsx)("div",{className:"prose dark:prose-invert max-w-full overflow-x-hidden",children:(()=>{if(k&&y){const t=(e=>{try{let t="",r="",a="",s="";if(e.includes("raw.githubusercontent.com")){const l=e.replace("https://raw.githubusercontent.com/","").split("/");t=l[0],r=l[1],s=l[2],a=l.slice(3).join("/")}else{if(!e.includes("github.com"))return null;{const l=e.replace("https://github.com/","").split("/");t=l[0],r=l[1];const n=-1!==l.indexOf("blob")?l.indexOf("blob"):l.indexOf("raw");s=l[n+1],a=l.slice(n+2).join("/")}}return{owner:t,repo:r,path:a,branch:s}}catch(t){return console.error("Fehler beim Parsen der GitHub-URL:",t),null}})(y.url);if(t)return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"bg-gray-100 p-2 rounded mb-4 flex justify-between items-center text-xs",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("span",{className:"font-mono text-gray-600",children:[t.owner,"/",t.repo,"/",t.path]}),(0,m.jsx)("span",{className:"ml-2 px-2 py-1 bg-gray-200 rounded",children:t.branch})]}),(0,m.jsxs)("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 flex items-center",children:[(0,m.jsx)(P,{})," ",e("cerebro.actions.viewOnGitHub")]})]}),(0,m.jsx)(v,{owner:t.owner,repo:t.repo,path:t.path,branch:t.branch})]})}const t=c.media.map((e=>({id:parseInt(e.id,10),fileName:e.filename,fileType:e.mimetype,url:(0,A.eb)(parseInt(e.id,10))})));return(0,m.jsxs)("div",{children:[(0,m.jsx)(w.A,{content:c.content||"",showImagePreview:!0,attachmentMetadata:t}),c.media.length>0&&(0,m.jsxs)("div",{className:"mt-6",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold mb-3 dark:text-white",children:"Angeh\xe4ngte Dateien"}),(0,m.jsx)("div",{className:"flex flex-col gap-3",children:c.media.map((e=>{const t=(0,A.eb)(parseInt(e.id,10)),r=e.mimetype.startsWith("image/"),a="application/pdf"===e.mimetype,s=e.mimetype.startsWith("video/");return(0,m.jsx)("div",{className:"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50",children:r?(0,m.jsx)("div",{children:(0,m.jsx)("img",{src:t,alt:e.filename,className:"w-full h-auto max-h-96 object-contain",style:{display:"block"}})}):a?(0,m.jsxs)("div",{className:"p-3",children:[(0,m.jsxs)("div",{className:"flex items-center mb-2",children:[(0,m.jsx)(E.A,{className:"h-4 w-4 mr-2 dark:text-gray-300"}),(0,m.jsx)("span",{className:"text-sm font-medium dark:text-gray-200",children:e.filename}),(0,m.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"ml-auto text-blue-600 dark:text-blue-400 hover:underline text-sm",children:"\xd6ffnen"})]}),(0,m.jsx)("iframe",{src:"".concat(t,"#view=FitH"),className:"w-full rounded border dark:border-gray-600",style:{height:"400px"},title:e.filename})]}):s?(0,m.jsxs)("div",{className:"p-3",children:[(0,m.jsxs)("div",{className:"flex items-center mb-2",children:[(0,m.jsx)(L.A,{className:"h-4 w-4 mr-2 dark:text-gray-300"}),(0,m.jsx)("span",{className:"text-sm font-medium dark:text-gray-200",children:e.filename}),(0,m.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"ml-auto text-blue-600 dark:text-blue-400 hover:underline text-sm",children:"\xd6ffnen"})]}),(0,m.jsxs)("video",{controls:!0,className:"w-full rounded",style:{maxHeight:"400px"},children:[(0,m.jsx)("source",{src:t,type:e.mimetype}),"Ihr Browser unterst\xfctzt das Video-Tag nicht."]})]}):(0,m.jsxs)("div",{className:"p-3 flex items-center",children:[(0,m.jsx)(C.A,{className:"h-4 w-4 mr-2 dark:text-gray-300"}),(0,m.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:e.filename})]})},e.id)}))})]})]})})()})]}),F&&(0,m.jsxs)("div",{className:"mb-6 flex space-x-2",children:[(0,m.jsx)(h.N_,{to:"/cerebro/".concat(t,"/media/add"),className:"p-2 rounded-full text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900","aria-label":e("cerebro.addMedia"),children:(0,m.jsx)(B.A,{className:"h-5 w-5"})}),(0,m.jsx)(h.N_,{to:"/cerebro/".concat(t,"/link/add"),className:"p-2 rounded-full text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900","aria-label":e("cerebro.addLink"),children:(0,m.jsx)(B.A,{className:"h-5 w-5"})}),(0,m.jsx)(h.N_,{to:"/cerebro/".concat(t,"/github/add"),className:"p-2 rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":e("cerebro.addGitHubMarkdown"),children:(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:(0,m.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{className:"border rounded p-4 dark:border-gray-700",children:[(0,m.jsx)("h2",{className:"text-xl font-bold mb-2 dark:text-white",children:"Verkn\xfcpfte Tasks"}),(0,m.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Keine Tasks verkn\xfcpft."})]}),(0,m.jsxs)("div",{className:"border rounded p-4 dark:border-gray-700",children:[(0,m.jsx)("h2",{className:"text-xl font-bold mb-2 dark:text-white",children:"Verkn\xfcpfte Requests"}),(0,m.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Keine Requests verkn\xfcpft."})]})]})]})};var V=r(7591),G=r(1816),q=r(9422);const W=()=>{const{t:e}=(0,s.Bd)(),{slug:t}=(0,l.g)(),r=(0,l.Zp)(),{hasPermission:i}=(0,n.S)(),[o,u]=(0,a.useState)({title:"",parentId:null,content:""}),[b,h]=(0,a.useState)(!0),[g,p]=(0,a.useState)(!1),[f,y]=(0,a.useState)(null),[j,k]=(0,a.useState)([]),[v,N]=(0,a.useState)(!0),[A,F]=(0,a.useState)(null),[D,R]=(0,a.useState)(null),[M,T]=(0,a.useState)(!1),[I,B]=(0,a.useState)([]),P=(0,a.useRef)(null),U=(0,a.useRef)(null),O=(0,a.useRef)([]);(0,a.useEffect)((()=>{O.current.forEach((e=>{I.find((t=>t.url===e.url))||URL.revokeObjectURL(e.url)})),O.current=I}),[I]),(0,a.useEffect)((()=>()=>{O.current.forEach((e=>{URL.revokeObjectURL(e.url)}))}),[]);const z=i("cerebro","both","button"),H=i("cerebro","both","page"),_=z||H,W=e=>{let{media:t}=e;const r=(a=t.fileType).startsWith("image/")?"image":a.startsWith("video/")?"video":"application/pdf"===a?"pdf":"other";var a;const s=t.url;return(0,m.jsxs)("div",{className:"border rounded p-3 mb-2 hover:bg-gray-50 dark:hover:bg-gray-700 dark:border-gray-600",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(()=>{switch(r){case"image":return(0,m.jsx)(S.A,{className:"h-5 w-5"});case"video":return(0,m.jsx)(L.A,{className:"h-5 w-5"});case"pdf":return(0,m.jsx)(E.A,{className:"h-5 w-5"});default:return(0,m.jsx)(C.A,{className:"h-5 w-5"})}})(),(0,m.jsx)("span",{className:"ml-2 flex-grow dark:text-gray-200",children:t.fileName})]}),"image"===r&&(0,m.jsx)("div",{className:"mt-2",children:(0,m.jsx)("img",{src:s,alt:t.fileName,className:"max-w-full h-auto rounded",style:{maxHeight:"200px"}})}),"video"===r&&(0,m.jsx)("div",{className:"mt-2",children:(0,m.jsxs)("video",{controls:!0,className:"max-w-full rounded",style:{maxHeight:"200px"},children:[(0,m.jsx)("source",{src:s,type:t.fileType}),"Ihr Browser unterst\xfctzt das Video-Tag nicht."]})}),"pdf"===r&&(0,m.jsx)("div",{className:"mt-2",children:(0,m.jsx)("iframe",{src:"".concat(s,"#view=FitH"),className:"w-full rounded border dark:border-gray-600",style:{height:"200px"},title:t.fileName})})]})},Z=async e=>{if(v&&!D){const t=URL.createObjectURL(e),r={fileName:e.name,fileType:e.type,fileSize:e.size,file:e,url:t};return B((e=>[...e,r])),{url:"wird nach dem Erstellen hochgeladen",fileName:e.name}}const t=new FormData;if(t.append("file",e),!D)throw new Error("Artikel-Slug nicht gefunden.");t.append("carticleSlug",D);const r=await c.uploadMedia(t);return{url:r.path.startsWith("http")?r.path:"".concat(window.location.origin,"/api/cerebro/media/").concat(r.id,"/file"),fileName:r.filename}},{handlePaste:K,handleDrop:Q,handleDragOver:$}=(e=>{let{textareaRef:t,content:r,setContent:s,onUpload:l,setUploading:n,setError:i}=e;const d=(0,a.useCallback)((async e=>{n&&n(!0),i&&i(null);try{const a=await l(e);let n="";if(n=e.type.startsWith("image/")?"\n![".concat(a.fileName,"](").concat(a.url,")\n"):"\n[".concat(a.fileName,"](").concat(a.url,")\n"),t.current){const e=t.current.selectionStart,a=r.substring(0,e),l=r.substring(e);s(a+n+l),setTimeout((()=>{if(t.current){const r=e+n.length;t.current.selectionStart=r,t.current.selectionEnd=r,t.current.focus()}}),0)}else s(r+n)}catch(c){var a,d;console.error("Fehler beim Verarbeiten der Datei:",c);const e=c,t=(null===(a=e.response)||void 0===a||null===(d=a.data)||void 0===d?void 0:d.message)||e.message||"Ein unerwarteter Fehler ist aufgetreten";i&&i(t)}finally{n&&n(!1)}}),[r,s,l,t,n,i]);return{handlePaste:(0,a.useCallback)((async e=>{const t=e.clipboardData.items;for(let r=0;r<t.length;r++){const a=t[r];if(0===a.type.indexOf("image")){e.preventDefault();const t=a.getAsFile();return void(t&&await d(t))}}}),[d]),handleDrop:(0,a.useCallback)((async e=>{if(e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&e.dataTransfer.files.length>0){const t=e.dataTransfer.files[0];await d(t)}}),[d]),handleDragOver:(0,a.useCallback)((e=>{e.preventDefault(),e.stopPropagation()}),[])}})({textareaRef:P,content:o.content,setContent:e=>u((t=>(0,x.A)((0,x.A)({},t),{},{content:e}))),onUpload:Z,setUploading:T,setError:y});if((0,a.useEffect)((()=>{(async()=>{try{h(!0);const e=await d.getAllArticles();if(k(e.map((e=>({id:e.id,title:e.title})))),t){const e=await d.getArticleBySlug(t);N(!1),F(e.id),R(e.slug),u({title:e.title,parentId:e.parentId,content:e.content||""})}y(null)}catch(r){console.error("Fehler beim Laden der Daten:",r),y(e("cerebro.articleEdit.loadError"))}finally{h(!1)}})()}),[t]),!_)return(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,m.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:e("cerebro.messages.noPermission")}),(0,m.jsx)("button",{className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded",onClick:()=>r("/cerebro"),children:e("cerebro.actions.backToOverview")})]});const Y=e=>{const{name:t,value:r}=e.target;u((e=>(0,x.A)((0,x.A)({},e),{},{[t]:""===r?null:r})))};return(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold mb-6",children:v?e("cerebro.articleEdit.createTitle",{defaultValue:"Neuen Artikel erstellen"}):e("cerebro.articleEdit.editTitle",{defaultValue:"Artikel bearbeiten"})}),f&&(0,m.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:f}),b?(0,m.jsxs)("div",{className:"text-center py-8",children:[(0,m.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),(0,m.jsx)("p",{className:"mt-2 text-gray-600",children:e("cerebro.articleEdit.loadingData",{defaultValue:"Daten werden geladen..."})})]}):(0,m.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),o.title.trim())try{let e;if(p(!0),v){if(e=await d.createArticle({title:o.title,parentId:o.parentId,content:o.content}),R(e.slug),I.length>0){for(const t of I)try{const r=new FormData;r.append("file",t.file),r.append("carticleSlug",e.slug),await c.uploadMedia(r),URL.revokeObjectURL(t.url)}catch(l){console.error("Fehler beim Hochladen des tempor\xe4ren Mediums ".concat(t.fileName,":"),l)}B([])}window.dispatchEvent(new CustomEvent("cerebro-article-created",{detail:{article:e}}))}else A&&(e=await d.updateArticle(A,{title:o.title,parentId:o.parentId,content:o.content}));r("/cerebro/".concat(e.slug))}catch(l){var a,s;console.error("Fehler beim Speichern des Artikels:",l);const e=(null===l||void 0===l||null===(a=l.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||(null===l||void 0===l?void 0:l.message)||"Fehler beim Speichern des Artikels. Bitte versuchen Sie es sp\xe4ter erneut.";y(e),p(!1)}else y(e("cerebro.articleEdit.titleRequired",{defaultValue:"Titel ist erforderlich"}))},className:"bg-white rounded-lg shadow p-6",children:[(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{htmlFor:"title",className:"block text-gray-700 font-medium mb-2",children:e("cerebro.articleEdit.titleRequired",{defaultValue:"Titel *"})}),(0,m.jsx)("input",{type:"text",id:"title",name:"title",value:o.title,onChange:Y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{htmlFor:"parentId",className:"block text-gray-700 font-medium mb-2",children:e("cerebro.articleEdit.parentArticle",{defaultValue:"Elternartikel"})}),(0,m.jsxs)("select",{id:"parentId",name:"parentId",value:o.parentId||"",onChange:Y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,m.jsx)("option",{value:"",children:e("cerebro.articleEdit.noParent",{defaultValue:"Kein Elternartikel (Root)"})}),j.filter((e=>e.id!==A)).map((e=>(0,m.jsx)("option",{value:e.id,children:e.title},e.id)))]}),(0,m.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Optional. W\xe4hlen Sie einen \xfcbergeordneten Artikel aus, um eine Hierarchie zu erstellen."})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("label",{htmlFor:"content",className:"block text-gray-700 font-medium mb-2",children:"Inhalt"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("textarea",{ref:P,id:"content",rows:10,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",value:o.content,onChange:e=>u((0,x.A)((0,x.A)({},o),{},{content:e.target.value})),onPaste:K,onDrop:Q,onDragOver:$,placeholder:"Schreiben Sie hier Ihren Artikel in Markdown..."}),(0,m.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=U.current)||void 0===e?void 0:e.click()},className:"absolute bottom-2 left-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none",title:e("cerebro.addFile"),children:(0,m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),(0,m.jsx)("input",{ref:U,type:"file",onChange:async e=>{const t=e.target.files;if(!t||0===t.length)return;const r=t[0];await Z(r),U.current&&(U.current.value="")},className:"hidden"}),M&&(0,m.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-70 dark:bg-opacity-70",children:(0,m.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Wird hochgeladen..."})})]}),I.length>0&&(0,m.jsxs)("div",{className:"mt-3",children:[(0,m.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hochgeladene Dateien (Vorschau):"}),(0,m.jsx)("div",{className:"space-y-2",children:I.map(((e,t)=>(0,m.jsx)(W,{media:e},t)))})]}),o.content&&(0,m.jsx)("div",{className:"mt-3",children:(0,m.jsx)(w.A,{content:o.content,temporaryAttachments:I.map((e=>({fileName:e.fileName,fileType:e.fileType,fileSize:e.fileSize,file:e.file})))})})]}),(0,m.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,m.jsx)("button",{type:"button",onClick:()=>{r(t?"/cerebro/".concat(t):"/cerebro")},className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",disabled:g,title:"Abbrechen",children:(0,m.jsx)(V.A,{className:"h-5 w-5"})}),(0,m.jsx)("button",{type:"submit",className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",disabled:g,title:g?"Speichern...":"Speichern",children:g?(0,m.jsx)(G.A,{className:"h-5 w-5 animate-spin"}):(0,m.jsx)(q.A,{className:"h-5 w-5"})})]})]})]})};var Z=r(2174),K=r(9265);const Q=e=>{let{articles:t,currentSlug:r,level:a=0,expandedIds:s=new Set,onToggleExpand:n,onArticleClick:i}=e;(0,l.Zp)();return(0,m.jsx)("ul",{className:"pl-".concat(a>0?"4":"0"),children:t.map((e=>{const t=e.children&&e.children.length>0,l=s.has(e.id),d=e.slug===r;return(0,m.jsxs)("li",{className:"mb-1",children:[(0,m.jsxs)("div",{className:"flex items-center py-1 px-2 rounded cursor-pointer ".concat(d?"bg-blue-100 text-blue-800":"hover:bg-gray-100"),onClick:()=>{return t=e.slug,void(i&&i(t));var t},children:[t&&(0,m.jsx)("button",{onClick:t=>((e,t)=>{e.stopPropagation(),n&&n(t)})(t,e.id),className:"mr-1 w-4 h-4 flex items-center justify-center text-gray-500",children:l?(0,m.jsx)(Z.A,{className:"h-4 w-4"}):(0,m.jsx)(B.A,{className:"h-4 w-4"})}),(0,m.jsx)("span",{className:"flex-1 truncate",children:e.title})]}),t&&l&&(0,m.jsx)(Q,{articles:e.children,currentSlug:r,level:a+1,expandedIds:s,onToggleExpand:n,onArticleClick:i})]},e.id)}))})},$=e=>{var t;let{mdFiles:r}=e;const n=(0,l.Zp)(),[i,c]=(0,a.useState)([]),[o,u]=(0,a.useState)([]),[b,g]=(0,a.useState)(null),[p,f]=(0,a.useState)(!0),[y,j]=(0,a.useState)(null),[k,v]=(0,a.useState)(window.innerWidth<720),[w,N]=(0,a.useState)(new Set),[A,S]=(0,a.useState)(window.innerWidth>=720),{slug:L}=(0,l.g)(),{t:E}=(0,s.Bd)();(0,a.useEffect)((()=>{const e=()=>{const e=window.innerWidth<720;v(e),window.innerWidth>=720&&S(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const C=(0,a.useCallback)((async()=>{try{f(!0),j(null);const e=await d.getArticlesStructure();if(!Array.isArray(e))return console.error("Ung\xfcltige Antwort von der API:",e),j("Ung\xfcltige Antwort vom Server. Bitte versuchen Sie es sp\xe4ter erneut."),void f(!1);const t=e=>{const r=(0,x.A)((0,x.A)({},e),{},{id:String(e.id),parentId:e.parentId?String(e.parentId):null});return e.children&&Array.isArray(e.children)&&(r.children=e.children.map((e=>t(e)))),r},r=e.map((e=>t(e))),a=r.find((e=>"Markdown-Dateien"===e.title));a?(g(a),N((e=>{const t=new Set(e);return t.add(a.id),t}))):console.warn("Markdown-Ordner nicht gefunden!"),u(r.filter((e=>"Markdown-Dateien"!==e.title))),f(!1)}catch(a){var e,t,r;console.error("Fehler beim Laden der Artikelstruktur:",a);let s="Fehler beim Laden der Artikelstruktur. Bitte versuchen Sie es sp\xe4ter erneut.";401===(null===a||void 0===a||null===(e=a.response)||void 0===e?void 0:e.status)?s="Sie sind nicht angemeldet. Bitte melden Sie sich an.":403===(null===a||void 0===a||null===(t=a.response)||void 0===t?void 0:t.status)?s="Sie haben keine Berechtigung, die Artikelstruktur anzuzeigen.":(null===a||void 0===a||null===(r=a.response)||void 0===r?void 0:r.status)>=500?s="Serverfehler. Bitte versuchen Sie es sp\xe4ter erneut.":null!==a&&void 0!==a&&a.message&&(s="Fehler: ".concat(a.message)),j(s),f(!1)}}),[]);(0,a.useEffect)((()=>{C();const e=()=>{C()};return window.addEventListener("cerebro-article-created",e),()=>{window.removeEventListener("cerebro-article-created",e)}}),[C]);const F=e=>{N((t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r}))};return(0,m.jsxs)("nav",{className:"h-full overflow-hidden flex flex-col",children:[k&&(0,m.jsx)("button",{className:"fixed top-[85px] left-4 z-40 p-2 rounded-full text-gray-600 hover:bg-gray-100 md:hidden",onClick:()=>{const e=!A;S(e);const t=new CustomEvent("cerebro-sidebar-toggle",{detail:{open:e}});window.dispatchEvent(t)},"aria-label":E(A?"cerebro.menuClose":"cerebro.menuOpen"),children:A?(0,m.jsx)(V.A,{className:"h-5 w-5"}):(0,m.jsx)(K.A,{className:"h-5 w-5"})}),(0,m.jsx)("div",{className:"\n          bg-white dark:bg-gray-800 flex flex-col h-full\n          ".concat(k?"fixed top-[150px] left-0 z-20 transition-transform duration-300 ease-in-out w-60 max-h-[calc(100vh-228px)] border-r border-gray-200 dark:border-gray-700":"w-full h-full border-r border-gray-200 dark:border-gray-700","\n          ").concat(k&&!A?"-translate-x-full":"translate-x-0","\n        "),children:(0,m.jsx)("div",{className:"p-2 ".concat(k?"pt-4":"pt-6"," flex-grow flex flex-col overflow-hidden"),children:(0,m.jsxs)("div",{className:"overflow-y-auto flex-grow",children:[p&&(0,m.jsx)("div",{className:"flex justify-center items-center p-4",children:(0,m.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})}),y&&(0,m.jsx)("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-2 py-2 rounded text-sm",children:y}),!p&&o.length>0&&(0,m.jsxs)("div",{className:"space-y-1 mb-4",children:[(0,m.jsx)("h3",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:E("cerebro.article",{defaultValue:"Artikel"})}),(0,m.jsx)(Q,{articles:o,currentSlug:L,expandedIds:w,onToggleExpand:F,onArticleClick:e=>n("/cerebro/".concat(e))})]}),!p&&b&&(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)("button",{onClick:()=>F(b.id),className:"mr-1 w-4 h-4 flex items-center justify-center text-gray-500 dark:text-gray-400",children:w.has(b.id)?(0,m.jsx)(Z.A,{className:"h-4 w-4"}):(0,m.jsx)(B.A,{className:"h-4 w-4"})}),(0,m.jsx)("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:b.title})]}),w.has(b.id)&&(null===(t=b.children)||void 0===t?void 0:t.length)>0&&(0,m.jsx)("div",{className:"ml-4 mt-2 space-y-1",children:b.children.map((e=>(0,m.jsx)(h.N_,{to:"/cerebro/".concat(e.slug),className:"block truncate px-2 py-1 rounded-md ".concat(e.slug===L?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300":"hover:bg-gray-100 dark:hover:bg-gray-700"),children:e.title},e.id)))})]})]})})})]})},Y=e=>{let{file:t,alt:r,blobUrlsRef:s,type:l,className:n="w-full h-auto object-contain max-h-60"}=e;const[i,d]=(0,a.useState)(null);return(0,a.useEffect)((()=>{const e=URL.createObjectURL(t);return s.current.add(e),d(e),()=>{URL.revokeObjectURL(e),s.current.delete(e)}}),[t,s]),i?"image"===l?(0,m.jsx)("img",{src:i,alt:r,className:n}):(0,m.jsx)("video",{src:i,controls:!0,className:n,children:r}):null},J=()=>{const{t:e}=(0,s.Bd)(),{slug:t}=(0,l.g)(),r=(0,l.Zp)(),{hasPermission:i}=(0,n.S)(),d=(0,a.useRef)(null),o=(0,a.useRef)(new Set),[u,b]=(0,a.useState)(null),[h,x]=(0,a.useState)(""),[g,p]=(0,a.useState)(!1),[f,y]=(0,a.useState)(null),[j,k]=(0,a.useState)(0),v=i("cerebro","both","button"),w=i("cerebro","both","page"),N=e=>["image/jpeg","image/png","image/gif","image/webp","application/pdf","video/mp4","video/webm"].includes(e.type),A=()=>{d.current&&d.current.click()};if(!(v||w))return(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,m.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:e("cerebroMedia.noPermission")}),(0,m.jsx)("button",{className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded",onClick:()=>r("/cerebro/".concat(t)),children:e("cerebroMedia.backToArticle")})]});return(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold mb-6",children:e("cerebroMedia.title")}),f&&(0,m.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:f}),(0,m.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,m.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),u)if(h.trim())if(t)if(N(u))try{p(!0),k(0);const e=new FormData;e.append("file",u),e.append("filename",h.trim()),e.append("carticleSlug",t),await c.uploadMedia(e,(e=>{const t=Math.round(100*e.loaded/e.total);k(t)})),r("/cerebro/".concat(t))}catch(s){console.error("Fehler beim Hochladen der Datei:",s),y(e("cerebroMedia.uploadError")),p(!1)}else y(e("cerebroMedia.fileTypeNotSupported"));else y(e("cerebroMedia.articleIdMissing"));else y(e("cerebroMedia.pleaseEnterFileName"));else y(e("cerebroMedia.pleaseSelectFile"))},children:[u?(()=>{if(!u)return null;const t=u.type;return t.startsWith("image/")?(0,m.jsx)("div",{className:"w-full max-h-60 overflow-hidden bg-gray-100 border rounded mb-4",children:(0,m.jsx)(Y,{file:u,alt:"Vorschau",blobUrlsRef:o,type:"image",className:"w-full h-auto object-contain max-h-60"})}):"application/pdf"===t?(0,m.jsx)("div",{className:"flex items-center justify-center h-32 bg-red-50 border rounded mb-4",children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("div",{className:"text-red-600 text-4xl mb-2",children:"PDF"}),(0,m.jsx)("div",{className:"text-sm text-gray-600",children:u.name})]})}):t.startsWith("video/")?(0,m.jsx)("div",{className:"w-full max-h-60 overflow-hidden bg-gray-100 border rounded mb-4",children:(0,m.jsx)(Y,{file:u,alt:e("cerebroMedia.videoNotSupported"),blobUrlsRef:o,type:"video",className:"w-full h-auto max-h-60"})}):(0,m.jsx)("div",{className:"flex items-center justify-center h-32 bg-gray-50 border rounded mb-4",children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("div",{className:"text-gray-600 text-4xl mb-2",children:"Datei"}),(0,m.jsx)("div",{className:"text-sm text-gray-600",children:u.name})]})})})():(0,m.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center mb-4 cursor-pointer hover:border-blue-500 transition-colors",onClick:A,children:(0,m.jsxs)("div",{className:"text-gray-500",children:[(0,m.jsx)("div",{className:"text-4xl mb-2",children:"+"}),(0,m.jsx)("p",{children:e("cerebroMedia.clickToSelectFile")}),(0,m.jsx)("p",{className:"text-sm mt-1",children:e("cerebroMedia.supportedFileTypes")})]})}),(0,m.jsx)("input",{type:"file",ref:d,onChange:t=>{const r=t.target.files;if(!r||0===r.length)return b(null),void x("");const a=r[0];b(a),x(a.name),N(a)?y(null):y(e("cerebroMedia.fileTypeNotSupported"))},className:"hidden",accept:"image/jpeg,image/png,image/gif,image/webp,application/pdf,video/mp4,video/webm"}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{htmlFor:"fileName",className:"block text-gray-700 font-medium mb-2",children:e("cerebroMedia.fileNameRequired")}),(0,m.jsx)("input",{type:"text",id:"fileName",value:h,onChange:e=>{x(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:e("cerebroMedia.fileName"),required:!0})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("button",{type:"button",onClick:A,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400",children:e(u?"cerebroMedia.selectOtherFile":"cerebroMedia.selectFile")}),u&&(0,m.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:[e("cerebroMedia.fileSize")," ",(u.size/1024/1024).toFixed(2)," MB"]})]}),g&&j>0&&(0,m.jsx)("div",{className:"mb-6",children:(0,m.jsxs)("div",{className:"relative pt-1",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,m.jsx)("div",{children:(0,m.jsx)("span",{className:"text-xs font-semibold inline-block text-blue-600",children:e("cerebroMedia.uploadProgress")})}),(0,m.jsx)("div",{className:"text-right",children:(0,m.jsxs)("span",{className:"text-xs font-semibold inline-block text-blue-600",children:[j,"%"]})})]}),(0,m.jsx)("div",{className:"overflow-hidden h-2 text-xs flex rounded bg-blue-200",children:(0,m.jsx)("div",{style:{width:"".concat(j,"%")},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500"})})]})}),(0,m.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,m.jsx)("button",{type:"button",onClick:()=>r("/cerebro/".concat(t)),className:"p-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 disabled:opacity-50 disabled:cursor-not-allowed",disabled:g,title:e("common.cancel"),children:(0,m.jsx)(V.A,{className:"h-5 w-5"})}),(0,m.jsx)("button",{type:"submit",className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:g||!u,title:e(g?"cerebroMedia.uploading":"cerebroMedia.uploadFile"),children:g?(0,m.jsx)(G.A,{className:"h-5 w-5 animate-spin"}):(0,m.jsx)(B.A,{className:"h-5 w-5"})})]})]})})]})},X=()=>{const{t:e}=(0,s.Bd)(),{slug:t}=(0,l.g)(),r=(0,l.Zp)(),{hasPermission:i}=(0,n.S)(),[d,c]=(0,a.useState)(""),[u,b]=(0,a.useState)(""),[h,x]=(0,a.useState)(!1),[g,p]=(0,a.useState)(!1),[f,y]=(0,a.useState)(null),[j,k]=(0,a.useState)(null),v=i("cerebro","both","button"),w=i("cerebro","both","page"),N=v||w;(0,a.useEffect)((()=>{if(!d||""===d.trim())return void k(null);const e=setTimeout((()=>{A(d)}),500);return()=>clearTimeout(e)}),[d]);const A=async t=>{try{if(p(!0),!S(t))return y(e("cerebroLink.invalidUrl")),void p(!1);const r=await o.getLinkPreview(t);k(r),r.title&&!u&&b(r.title),y(null)}catch(r){console.error("Fehler beim Abrufen der Vorschau:",r),y(e("cerebroLink.previewError")),k(null)}finally{p(!1)}},S=e=>{try{return new URL(e),!0}catch(t){return!1}};if(!N)return(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,m.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:e("cerebroLink.noPermission")}),(0,m.jsx)("button",{className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded",onClick:()=>r("/cerebro/".concat(t)),children:e("cerebroLink.backToArticle")})]});return(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold mb-6",children:e("cerebroLink.title")}),f&&(0,m.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:f}),(0,m.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,m.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),d.trim()&&S(d))if(t)try{x(!0),await o.createExternalLink({url:d.trim(),title:u.trim()||void 0,carticleSlug:t}),r("/cerebro/".concat(t))}catch(s){console.error("Fehler beim Speichern des Links:",s),y(e("cerebroLink.saveError")),x(!1)}else y(e("cerebroLink.articleIdMissing"));else y(e("cerebroLink.invalidUrl"))},children:[(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{htmlFor:"url",className:"block text-gray-700 font-medium mb-2",children:"URL *"}),(0,m.jsx)("input",{type:"url",id:"url",value:d,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://",required:!0}),(0,m.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e("cerebroLink.enterFullUrl")})]}),(0,m.jsxs)("div",{className:"mb-6",children:[(0,m.jsx)("label",{htmlFor:"title",className:"block text-gray-700 font-medium mb-2",children:e("common.description")}),(0,m.jsx)("input",{type:"text",id:"title",value:u,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:e("cerebroLink.titleAutoFill")}),(0,m.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e("cerebroLink.titleOptional")})]}),g?(0,m.jsx)("div",{className:"mb-6 p-4 border rounded bg-gray-50",children:(0,m.jsxs)("div",{className:"flex items-center justify-center",children:[(0,m.jsx)("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-blue-500 mr-2"}),e("cerebroLink.previewLoading")]})}):j?(0,m.jsxs)("div",{className:"mb-6 p-4 border rounded bg-gray-50",children:[(0,m.jsx)("h3",{className:"font-semibold mb-2",children:e("cerebroLink.preview")}),(0,m.jsxs)("div",{className:"flex items-start",children:[j.thumbnail&&(0,m.jsx)("img",{src:j.thumbnail,alt:j.title||"Vorschau",className:"w-16 h-16 object-cover mr-3"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"font-medium",children:j.title||d}),(0,m.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:(e=>{if(!e)return"Standard-Link";switch(e){case"google_drive":return"Google Drive Dokument";case"youtube":return"YouTube Video";default:return"Externer Link"}})(j.type)}),(0,m.jsx)("p",{className:"text-sm text-gray-500 mt-1 break-all",children:d})]})]})]}):null,(0,m.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,m.jsx)("button",{type:"button",onClick:()=>r("/cerebro/".concat(t)),className:"p-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 disabled:opacity-50 disabled:cursor-not-allowed",disabled:h,title:e("common.cancel"),children:(0,m.jsx)(V.A,{className:"h-5 w-5"})}),(0,m.jsx)("button",{type:"submit",className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:h,title:e(h?"cerebroLink.saving":"cerebroLink.addLink"),children:h?(0,m.jsx)(G.A,{className:"h-5 w-5 animate-spin"}):(0,m.jsx)(B.A,{className:"h-5 w-5"})})]})]})})]})},ee=e=>{let{articleSlug:t,articleId:r,onLinkAdded:l,onLinkRemoved:n}=e;const{t:i}=(0,s.Bd)(),[d,c]=(0,a.useState)([]),[u,b]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),[p,f]=(0,a.useState)({url:"",title:"",type:"github_markdown"});(0,a.useEffect)((()=>{if(!r)return;(async()=>{try{b(!0);const e=await o.getLinksByArticle(r);c(e.filter((e=>"github_markdown"===e.type||e.url.includes("github.com")||e.url.includes("raw.githubusercontent.com")))),g(null)}catch(e){console.error("Fehler beim Laden der GitHub-Links:",e),g("Die GitHub-Links konnten nicht geladen werden.")}finally{b(!1)}})()}),[r]);const y=e=>(e.includes("github.com")||e.includes("raw.githubusercontent.com"))&&e.trim().length>0;return(0,m.jsxs)("div",{className:"github-link-manager",children:[(0,m.jsx)("h3",{className:"text-lg font-medium mb-2 dark:text-white",children:i("githubLink.markdownFiles")}),h&&(0,m.jsx)("div",{className:"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:h}),(0,m.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),p.url.trim())try{b(!0);let e=p.title.trim();if(!e){const t=p.url.split("/");e=t[t.length-1]}const r={carticleSlug:t,url:p.url,title:"GitHub: ".concat(e),type:"github_markdown"},a=await o.createExternalLink(r);c((e=>[...e,a])),f({url:"",title:"",type:"github_markdown"}),g(null),l&&l(a)}catch(r){console.error("Fehler beim Erstellen des GitHub-Links:",r),g(i("githubLink.createError"))}finally{b(!1)}else g(i("githubLink.invalidUrl"))},className:"mb-4",children:(0,m.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"github-url",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"GitHub URL"}),(0,m.jsx)("input",{id:"github-url",type:"url",value:p.url,onChange:e=>f((0,x.A)((0,x.A)({},p),{},{url:e.target.value})),placeholder:"https://github.com/username/repo/blob/main/file.md",className:"w-full px-3 py-2 border rounded-md ".concat(!y(p.url)&&p.url.length>0?"border-red-300 dark:border-red-700 focus:ring-red-500 focus:border-red-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500"," dark:bg-gray-700 dark:text-white"),required:!0}),!y(p.url)&&p.url.length>0&&(0,m.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:i("githubLink.invalidUrlMessage")})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"github-title",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:i("githubLink.titleOptional")}),(0,m.jsx)("input",{id:"github-title",type:"text",value:p.title,onChange:e=>f((0,x.A)((0,x.A)({},p),{},{title:e.target.value})),placeholder:i("githubLink.titlePlaceholder"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),(0,m.jsx)("button",{type:"submit",disabled:u||!y(p.url),className:"mt-2 px-4 py-2 rounded-md text-white ".concat(u||!y(p.url)?"bg-blue-400 dark:bg-blue-500/50 cursor-not-allowed":"bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-600"),children:i(u?"githubLink.adding":"githubLink.addLink")})]})}),(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsx)("h4",{className:"text-md font-medium text-gray-700 dark:text-gray-300",children:i("githubLink.linkedFiles")}),u&&0===d.length?(0,m.jsx)("div",{className:"text-gray-500 dark:text-gray-400 italic",children:i("githubLink.loading")}):0===d.length?(0,m.jsx)("div",{className:"text-gray-500 dark:text-gray-400 italic",children:i("githubLink.noLinks")}):d.map((e=>(0,m.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-md dark:bg-gray-800",children:[(0,m.jsx)("div",{className:"truncate flex-1",children:(0,m.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:e.title||e.url})}),(0,m.jsx)("button",{onClick:()=>(async e=>{try{b(!0),await o.deleteLink(e),c((t=>t.filter((t=>t.id!==e)))),n&&n(e)}catch(t){console.error("Fehler beim L\xf6schen des GitHub-Links:",t),g(i("githubLink.deleteError"))}finally{b(!1)}})(e.id),className:"ml-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300",title:"GitHub-Link entfernen",disabled:u,children:"Entfernen"})]},e.id)))]})]})};var te=r(8018);const re=()=>{const{t:e}=(0,s.Bd)(),{slug:t}=(0,l.g)();return t?(0,m.jsx)("div",{className:"w-full p-4",children:(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,m.jsx)("h1",{className:"text-xl font-semibold mb-4 dark:text-white",children:e("githubLink.addTitle")}),(0,m.jsx)(ee,{articleSlug:t,onLinkAdded:e=>{te.v.log("Link hinzugef\xfcgt:",e)},onLinkRemoved:e=>{te.v.log("Link entfernt:",e)}})]})}):(0,m.jsx)("div",{className:"w-full p-4",children:(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,m.jsx)("h1",{className:"text-xl font-semibold mb-4 dark:text-white",children:"Fehler"}),(0,m.jsx)("p",{className:"dark:text-gray-300",children:"Kein Artikel-Slug angegeben."})]})})};var ae=r(7449),se=r(8010),le=r(1909);const ne=e=>{let{searchTerm:t,onSearchChange:r,onSearchSubmit:l,canCreateArticle:n,onCreateArticle:i,onFilterClick:d,onSortClick:c,onSortChange:o,activeFilterCount:u,sortConfig:b={key:"title",direction:"asc"}}=e;const{t:h}=(0,s.Bd)(),[x,g]=(0,a.useState)(!1),p=(0,a.useRef)(null);(0,a.useEffect)((()=>{const e=e=>{p.current&&!p.current.contains(e.target)&&g(!1)};return x&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[x]);const f=(e,t)=>{o&&o(e,t),g(!1)};return(0,m.jsx)("div",{className:"px-3 sm:px-4 md:px-6 py-3",children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center gap-1.5",children:[n&&(0,m.jsxs)("div",{className:"relative group",children:[(0,m.jsx)("button",{onClick:i,className:"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center",style:{width:"30.19px",height:"30.19px"},"aria-label":h("cerebro.header.createArticle","Neuer Artikel"),children:(0,m.jsx)(B.A,{className:"h-4 w-4"})}),(0,m.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:h("cerebro.header.createArticle","Neuer Artikel")})]}),(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(E.A,{className:"h-6 w-6 mr-2 dark:text-white"}),(0,m.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:h("cerebro.header.title","Cerebro")})]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("input",{type:"text",placeholder:h("cerebro.header.searchPlaceholder","Artikel suchen..."),className:"w-[200px] px-3 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:t,onChange:e=>r(e.target.value),onKeyPress:e=>{"Enter"===e.key&&l()}}),(0,m.jsx)(ae.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]}),(0,m.jsxs)("div",{className:"relative group",children:[(0,m.jsxs)("button",{className:"p-2 rounded-md ".concat(u>0?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"hover:bg-gray-100 dark:hover:bg-gray-700"),onClick:d,children:[(0,m.jsx)(se.A,{className:"h-5 w-5"}),u>0&&(0,m.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center z-10",style:{position:"absolute",top:"-0.25rem",right:"-0.25rem"},children:u})]}),(0,m.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:h("cerebro.header.filter","Filter")})]}),(0,m.jsxs)("div",{className:"relative group",ref:p,children:[(0,m.jsx)("button",{className:"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>{g(!x),c()},children:(0,m.jsx)(le.A,{className:"h-5 w-5"})}),(0,m.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50",children:h("cerebro.header.sort","Sortieren")}),x&&(0,m.jsx)("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg z-50 min-w-[200px]",children:(0,m.jsxs)("div",{className:"py-1",children:[(0,m.jsx)("button",{onClick:()=>f("title","asc"),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 ".concat("title"===b.key&&"asc"===b.direction?"bg-blue-50 dark:bg-blue-900/30":""),children:h("cerebro.sort.titleAsc","Titel (A-Z)")}),(0,m.jsx)("button",{onClick:()=>f("title","desc"),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 ".concat("title"===b.key&&"desc"===b.direction?"bg-blue-50 dark:bg-blue-900/30":""),children:h("cerebro.sort.titleDesc","Titel (Z-A)")}),(0,m.jsx)("button",{onClick:()=>f("createdAt","desc"),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 ".concat("createdAt"===b.key&&"desc"===b.direction?"bg-blue-50 dark:bg-blue-900/30":""),children:h("cerebro.sort.createdAtDesc","Neueste zuerst")}),(0,m.jsx)("button",{onClick:()=>f("createdAt","asc"),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 ".concat("createdAt"===b.key&&"asc"===b.direction?"bg-blue-50 dark:bg-blue-900/30":""),children:h("cerebro.sort.createdAtAsc","\xc4lteste zuerst")}),(0,m.jsx)("button",{onClick:()=>f("updatedAt","desc"),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 ".concat("updatedAt"===b.key&&"desc"===b.direction?"bg-blue-50 dark:bg-blue-900/30":""),children:h("cerebro.sort.updatedAtDesc","Zuletzt aktualisiert")}),(0,m.jsx)("button",{onClick:()=>f("updatedAt","asc"),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 ".concat("updatedAt"===b.key&&"asc"===b.direction?"bg-blue-50 dark:bg-blue-900/30":""),children:h("cerebro.sort.updatedAtAsc","\xc4lteste Aktualisierung")})]})})]})]})]})})};var ie=r(4426),de=r(7829),ce=r(9462);r(7542);const oe="freshprince84",ue="intranet",me="main",be="CEREBRO_ARTICLES",he=()=>{const{t:e}=(0,s.Bd)(),t=(0,l.Zp)(),{hasPermission:r}=((0,l.zy)(),(0,n.S)()),[i,d]=(0,a.useState)(window.innerWidth<768),[c,o]=(0,a.useState)(window.innerWidth>=768),[u,b]=(0,a.useState)(window.innerWidth>=768),h=(0,a.useRef)(null),[x,g]=(0,a.useState)(200),[p,f]=(0,a.useState)(""),[y,j]=(0,a.useState)([]),[k,v]=(0,a.useState)([]),[w,N]=(0,a.useState)(!1),[A,S]=(0,a.useState)(""),[L,E]=(0,a.useState)(null),[C,F]=(0,a.useState)({key:"title",direction:"asc"}),D=r("cerebro","both","button")||r("cerebro","both","page"),R=(0,a.useMemo)((()=>[{id:"title",label:e("cerebro.filters.title","Titel")},{id:"createdAt",label:e("cerebro.filters.createdAt","Erstellt am")},{id:"updatedAt",label:e("cerebro.filters.updatedAt","Aktualisiert am")},{id:"createdBy",label:e("cerebro.filters.createdBy","Erstellt von")},{id:"parentId",label:e("cerebro.filters.category","Kategorie")},{id:"githubPath",label:e("cerebro.filters.hasGithubPath","Hat GitHub-Pfad")},{id:"isPublished",label:e("cerebro.filters.isPublished","Ver\xf6ffentlicht")}]),[e]);(0,a.useEffect)((()=>()=>{j([]),v([])}),[]),(0,a.useEffect)((()=>{const e=()=>{const e=window.innerWidth<768;d(e),o(window.innerWidth>=768),window.innerWidth>=768&&b(!0)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,a.useEffect)((()=>{const e=e=>{e.detail&&"boolean"===typeof e.detail.open&&b(e.detail.open)};return window.addEventListener("cerebro-sidebar-toggle",e),()=>window.removeEventListener("cerebro-sidebar-toggle",e)}),[]),(0,a.useEffect)((()=>{const e=()=>{h.current&&g(h.current.clientHeight)};e();const t=setTimeout(e,100);return window.addEventListener("resize",e),()=>{clearTimeout(t),window.removeEventListener("resize",e)}}),[w]);const M=(e,t)=>{j(e),v(t)},T=()=>{j([]),v([]),F({key:"title",direction:"asc"}),S(""),E(null)},I=async(e,t,r,a)=>{S(e),E(t),M(r,a)},B=(0,ce.b)(),{loadFilters:P}=B;(0,a.useEffect)((()=>{(async()=>{const e=(await P(be)).find((e=>"Alle Artikel"===e.name));e&&await I(e.name,e.id,e.conditions,e.operators)})()}),[P,I]);return(0,m.jsx)("div",{className:"min-h-screen dark:bg-gray-900",children:(0,m.jsxs)("div",{className:"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6",children:[(0,m.jsxs)("div",{ref:h,className:"sticky top-0 z-10 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700","data-cerebro-topbar":!0,children:[(0,m.jsx)("div",{className:"max-w-7xl mx-auto ".concat(i?"":"px-5"),children:(0,m.jsx)(ne,{searchTerm:p,onSearchChange:f,onSearchSubmit:()=>{p.trim()?t("/cerebro/search?q=".concat(encodeURIComponent(p))):t("/cerebro/all")},canCreateArticle:D,onCreateArticle:()=>t("/cerebro/create"),onFilterClick:()=>N(!w),onSortClick:()=>{},onSortChange:(e,t)=>{F({key:e,direction:t})},activeFilterCount:y.length,sortConfig:C})}),w&&(0,m.jsx)("div",{className:"w-full border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:(0,m.jsx)("div",{className:"max-w-7xl mx-auto ".concat(i?"px-4":"px-5"," py-2"),children:(0,m.jsx)(ie.A,{columns:R,onApply:M,onReset:T,savedConditions:y,savedOperators:k,tableId:be})})}),(0,m.jsx)("div",{className:"w-full border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:(0,m.jsx)("div",{className:"max-w-7xl mx-auto ".concat(i?"px-4":"px-5"," py-2"),children:(0,m.jsx)(de.A,{tableId:be,onSelectFilter:M,onReset:T,activeFilterName:A,selectedFilterId:L,onFilterChange:I,defaultFilterName:"Alle Artikel"})})})]}),(0,m.jsxs)("div",{className:"flex ".concat(c?"h-[calc(100vh-".concat(x,"px)]"):"min-h-[calc(100vh-200px)]"),children:[(0,m.jsx)("div",{className:"\n              ".concat(u?"w-60":"","\n              ").concat(i&&!u?"w-0":""," \n              transition-all duration-300 ease-in-out shrink-0\n              ").concat(c?"overflow-y-auto":"","\n            "),children:(0,m.jsx)($,{mdFiles:[]})}),(0,m.jsx)("div",{className:"flex-grow ".concat(i?"overflow-y-container":"overflow-y-auto overflow-x-hidden"," ").concat(i?"px-0 pt-2 pb-16":"pt-3 pb-4"),children:(0,m.jsx)("div",{className:"".concat(i?"mobile-full-width":"max-w-7xl mx-auto px-5"),children:(0,m.jsx)(l.sv,{context:{filterConditions:y,filterLogicalOperators:k,sortConfig:C,searchTerm:p}})})})]})]})})},xe=()=>{const{t:e}=(0,s.Bd)();return(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold mb-6 dark:text-white",children:e("cerebro.home.title")}),(0,m.jsx)(v,{owner:oe,repo:ue,path:"docs/core/README.md",branch:me})]})},ge=()=>{const{t:e}=(0,s.Bd)(),{slug:t}=(0,l.g)(),[r,n]=(0,a.useState)(null),[i,c]=(0,a.useState)(!0),[o,u]=(0,a.useState)(null);return(0,a.useEffect)((()=>{if(!t)return;(async()=>{try{c(!0);const e=await d.getArticleBySlug(t),r=await d.getArticleBySlug("markdown-folder");if(r&&e.parentId===r.id&&e.githubPath)return n({path:e.githubPath,title:e.title}),void c(!1);c(!1)}catch(e){0;const r={readme:{path:"docs/core/README.md",title:"Readme - \xdcberblick"},"project-setup":{path:"docs/core/ENTWICKLUNGSUMGEBUNG.md",title:"Projekt-Einrichtung"},dokumentationsstandards:{path:"docs/core/DOKUMENTATIONSSTANDARDS.md",title:"Dokumentationsstandards"},"design-standards":{path:"docs/core/DESIGN_STANDARDS.md",title:"Design-Standards"},"coding-standards":{path:"docs/core/CODING_STANDARDS.md",title:"Coding-Standards"},"modul-zeiterfassung":{path:"docs/modules/MODUL_ZEITERFASSUNG.md",title:"Modul: Zeiterfassung"},"cerebro-wiki":{path:"docs/modules/MODUL_CEREBRO.md",title:"Cerebro Wiki-System"},"modul-teamkontrolle":{path:"docs/modules/MODUL_TEAMKONTROLLE.md",title:"Modul: Teamkontrolle"},"modul-abrechnung":{path:"docs/modules/MODUL_ABRECHNUNG.md",title:"Modul: Abrechnung"},"db-schema":{path:"docs/technical/DATENBANKSCHEMA.md",title:"Datenbankschema"},"api-integration":{path:"docs/technical/API_REFERENZ.md",title:"API-Referenz"},"role-switch":{path:"docs/modules/ROLE_SWITCH.md",title:"Rollenwechsel-Funktionalit\xe4t"},changelog:{path:"docs/core/CHANGELOG.md",title:"\xc4nderungshistorie"}};r[t]?n(r[t]):n({path:"".concat(t,".md"),title:t.charAt(0).toUpperCase()+t.slice(1).replace(/-/g," ")}),c(!1)}})()}),[t]),i?(0,m.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow flex justify-center",children:(0,m.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):r?(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold mb-6 dark:text-white",children:r.title}),(0,m.jsx)(v,{owner:oe,repo:ue,path:r.path,branch:me})]}):(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,m.jsx)("h1",{className:"text-xl font-semibold mb-4 dark:text-white",children:e("cerebro.fileView.fileNotFound")}),(0,m.jsx)("p",{className:"dark:text-gray-300",children:e("cerebro.fileView.fileNotFoundDescription")})]})},pe=()=>{const{t:e}=(0,s.Bd)();return(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,m.jsx)("h2",{className:"text-xl font-semibold mb-4 dark:text-white",children:e("cerebro.allArticles.title")}),(0,m.jsx)(b,{})]})},fe=()=>{const{t:e}=(0,s.Bd)(),t=(0,l.zy)(),r=new URLSearchParams(t.search).get("q")||"";return(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[(0,m.jsx)("div",{className:"flex items-center mb-6",children:(0,m.jsxs)("h2",{className:"text-xl font-semibold dark:text-white",children:[e("cerebro.search.title"),' "',r,'"']})}),(0,m.jsx)(b,{searchQuery:r})]})},ye=()=>{const{slug:e}=(0,l.g)(),[t,r]=(0,a.useState)(!1),[s,n]=(0,a.useState)(!0),[i,c]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{(async()=>{if(e)try{n(!0);const a=await d.getArticleBySlug(e);c(!0);try{const e=await d.getArticleBySlug("markdown-folder");e&&a.parentId===e.id||a.githubPath?r(!0):r(!1)}catch(t){0,a.githubPath?r(!0):r(!1)}n(!1)}catch(t){0,c(!1),r(!0),n(!1)}})()}),[e]),s?(0,m.jsx)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow flex justify-center",children:(0,m.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):i&&!t?(0,m.jsx)(_,{}):(0,m.jsx)(ge,{})},je=()=>(0,m.jsx)(l.BV,{children:(0,m.jsxs)(l.qh,{path:"/",element:(0,m.jsx)(he,{}),children:[(0,m.jsx)(l.qh,{index:!0,element:(0,m.jsx)(xe,{})}),(0,m.jsx)(l.qh,{path:"all",element:(0,m.jsx)(pe,{})}),(0,m.jsx)(l.qh,{path:"search",element:(0,m.jsx)(fe,{})}),(0,m.jsx)(l.qh,{path:"create",element:(0,m.jsx)(W,{})}),(0,m.jsx)(l.qh,{path:":slug",element:(0,m.jsx)(ye,{})}),(0,m.jsx)(l.qh,{path:":slug/edit",element:(0,m.jsx)(W,{})}),(0,m.jsx)(l.qh,{path:":slug/media/add",element:(0,m.jsx)(J,{})}),(0,m.jsx)(l.qh,{path:":slug/link/add",element:(0,m.jsx)(X,{})}),(0,m.jsx)(l.qh,{path:":slug/github/add",element:(0,m.jsx)(re,{})})]})})}}]);
//# sourceMappingURL=368.4655cf86.chunk.js.map