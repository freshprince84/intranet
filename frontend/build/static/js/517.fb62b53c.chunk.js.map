{"version":3,"file":"static/js/517.fb62b53c.chunk.js","mappings":"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","sources":["../node_modules/@heroicons/react/24/outline/esm/ChevronDownIcon.js","../node_modules/@heroicons/react/24/outline/esm/ChartBarIcon.js","../node_modules/@heroicons/react/24/outline/esm/DocumentDuplicateIcon.js","../node_modules/@heroicons/react/24/outline/esm/FunnelIcon.js","../node_modules/@heroicons/react/24/outline/esm/PlusIcon.js","../node_modules/@heroicons/react/24/outline/esm/ShieldCheckIcon.js","components/UserManagementTab.tsx","components/RoleManagementTab.tsx","../node_modules/@heroicons/react/24/outline/esm/UserPlusIcon.js","../node_modules/@heroicons/react/24/outline/esm/EnvelopeIcon.js","components/organization/CreateOrganizationModal.tsx","components/organization/JoinOrganizationModal.tsx","components/organization/EditOrganizationModal.tsx","components/organization/MyJoinRequestsList.tsx","components/organization/OrganizationSettings.tsx","components/organization/ProcessJoinRequestModal.tsx","components/organization/JoinRequestsList.tsx","pages/Organisation.tsx"],"sourcesContent":["import * as React from \"react\";\nfunction ChevronDownIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m19.5 8.25-7.5 7.5-7.5-7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChevronDownIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ChartBarIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChartBarIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction DocumentDuplicateIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(DocumentDuplicateIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction FunnelIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(FunnelIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PlusIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 4.5v15m7.5-7.5h-15\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PlusIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ShieldCheckIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ShieldCheckIcon);\nexport default ForwardRef;","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { userApi, roleApi } from '../api/apiClient.ts';\nimport { User, Role } from '../types/interfaces.ts';\nimport { CheckIcon, PlusIcon, PencilIcon, DocumentTextIcon, UserCircleIcon, ShieldCheckIcon, XMarkIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport useMessage from '../hooks/useMessage.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport IdentificationDocumentList from './IdentificationDocumentList.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface UserManagementTabProps {\n  onError: (error: string) => void;\n}\n\n// Lnder und Sprachen werden dynamisch aus bersetzungen geladen\n\n// Definiere Rollen, die immer vorhanden sein sollten (z.B. Admin-Rolle)\nconst fixedRoles = [1, 2, 999]; // Admin (1), User (2) und Hamburger (999) sind fixe Rollen\n\n// Vertragstypen fr Kolumbien (CO)\nconst CONTRACT_TYPES = [\n  { code: 'tiempo_completo', name: 'Tiempo Completo (>21 Tage/Monat)' },\n  { code: 'tiempo_parcial_7', name: 'Tiempo Parcial (7 Tage/Monat)' },\n  { code: 'tiempo_parcial_14', name: 'Tiempo Parcial (14 Tage/Monat)' },\n  { code: 'tiempo_parcial_21', name: 'Tiempo Parcial (21 Tage/Monat)' },\n  { code: 'servicios_externos', name: 'Servicios Externos (Stundenbasiert)' }\n];\n\n// Gemeinsame Debug-Komponente hinzufgen\nconst RoleDebugInfo = ({ title, data }: { title: string, data: any }) => (\n  <div className=\"mb-2 p-2 border border-gray-300 rounded bg-gray-50\">\n    <h5 className=\"font-bold text-sm\">{title}</h5>\n    <pre className=\"text-xs overflow-auto max-h-24\">\n      {JSON.stringify(data, null, 2)}\n    </pre>\n  </div>\n);\n\nconst UserManagementTab = ({ onError }: UserManagementTabProps): JSX.Element => {\n  const { t } = useTranslation();\n  \n  // Lnder fr die Auswahl (dynamisch aus bersetzungen)\n  const COUNTRIES = [\n    { code: 'CO', name: t('countries.CO') },\n    { code: 'CH', name: t('countries.CH') },\n    { code: 'DE', name: t('countries.DE') },\n    { code: 'AT', name: t('countries.AT') }\n  ];\n\n  // Lnder fr die Payroll-Auswahl (dynamisch aus bersetzungen)\n  const PAYROLL_COUNTRIES = [\n    { code: 'CH', name: t('countries.CH') },\n    { code: 'CO', name: t('countries.CO') }\n  ];\n\n  // Sprachen fr die Auswahl (dynamisch aus bersetzungen)\n  const LANGUAGES = [\n    { code: 'es', name: t('languages.es') },\n    { code: 'de', name: t('languages.de') },\n    { code: 'en', name: t('languages.en') }\n  ];\n  \n  // Benutzer-States\n  const [users, setUsers] = useState<User[]>([]);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [userFormData, setUserFormData] = useState<Partial<User>>({});\n  const [isEditingUser, setIsEditingUser] = useState(false);\n  const [selectedRoles, setSelectedRoles] = useState<number[]>([]);\n  const [isDebugMode, setIsDebugMode] = useState(false);\n  const [roleWarning, setRoleWarning] = useState<string | null>(null);\n  const { showMessage } = useMessage();\n  const { isAdmin } = usePermissions();\n  \n  // Neuer State fr Rollen\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [loadingRoles, setLoadingRoles] = useState(false);\n  \n  // Neuer State fr die aktive Unterseite\n  const [activeUserTab, setActiveUserTab] = useState<'details' | 'documents' | 'roles'>('details');\n  \n  // State fr Benutzererstellung\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n  const [isMobile, setIsMobile] = useState<boolean>(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [newUserFormData, setNewUserFormData] = useState({\n    email: '',\n    password: '',\n    firstName: '',\n    lastName: ''\n  });\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isCreateModalOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isCreateModalOpen, openSidepane, closeSidepane]);\n\n  // Initialisierung - Laden von Benutzern\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  // Benutzerdaten laden - Verwende gefilterten Endpoint, damit nur Benutzer der eigenen Organisation angezeigt werden\n  const fetchUsers = async () => {\n    try {\n      const response = await userApi.getAll();\n      setUsers(response.data);\n    } catch (err) {\n      handleError(err);\n    }\n  };\n  \n  // Rollen laden - Wird erst aufgerufen, wenn ein Benutzer ausgewhlt wurde\n  const fetchRoles = async () => {\n    try {\n      setLoadingRoles(true);\n      \n      // Fallback-Rollen fr den Notfall bereithalten\n      const fallbackRoles = [\n        { id: 1, name: 'admin', description: 'Administrator mit allen Rechten', permissions: [] },\n        { id: 2, name: 'user', description: 'Standardbenutzer', permissions: [] },\n        { id: 999, name: 'hamburger', description: 'Hamburger-Rolle fr neue Benutzer', permissions: [] }\n      ];\n      \n      try {\n        const response = await roleApi.getAll();\n        if (response.data && Array.isArray(response.data) && response.data.length > 0) {\n          setRoles(response.data);\n          console.log(`${response.data.length} Rollen erfolgreich geladen`);\n        } else {\n          console.warn('Keine Rollen vom Server erhalten, verwende Fallback');\n          setRoles(fallbackRoles);\n        }\n      } catch (error) {\n        console.warn('Fehler beim Laden der Rollen, verwende Fallback:', error);\n        setRoles(fallbackRoles);\n      }\n    } finally {\n      setLoadingRoles(false);\n    }\n  };\n\n  // Detaillierte Benutzerdaten laden\n  const fetchUserDetails = async (userId: number) => {\n    try {\n      if (!userId || isNaN(userId)) {\n        setSelectedUser(null);\n        return;\n      }\n      \n      console.log('Lade Benutzerdetails fr ID:', userId);\n      const response = await userApi.getById(userId);\n      \n      const userData = {\n        ...response.data,\n        birthday: response.data.birthday ? new Date(response.data.birthday).toISOString().split('T')[0] : null\n      };\n      \n      // Extrahiere Rollen-IDs aus der verschachtelten Struktur\n      let roleIds: number[] = [];\n      \n      if (response.data.roles && Array.isArray(response.data.roles)) {\n        console.log('Rollenstruktur (Typ):', typeof response.data.roles, 'Lnge:', response.data.roles.length);\n        \n        // Struktur: roles: [{ role: { id, name, ... } }]\n        if (response.data.roles.length > 0 && response.data.roles[0].role) {\n          roleIds = response.data.roles.map(userRole => userRole.role.id);\n          console.log('Extrahierte Rollen-IDs aus verschachtelter Struktur:', roleIds);\n        }\n        // Fallback fr andere Formate\n        else if (response.data.roles.length > 0) {\n          if (typeof response.data.roles[0] === 'number') {\n            roleIds = response.data.roles;\n          } else if (response.data.roles[0].roleId) {\n            roleIds = response.data.roles.map(role => role.roleId);\n          } else if (response.data.roles[0].id) {\n            roleIds = response.data.roles.map(role => role.id);\n          }\n        }\n      } else {\n        console.warn('Rollen fehlen oder sind kein Array:', response.data.roles);\n      }\n      \n      // Wenn keine Rollen gefunden wurden, probieren wir, diese aus roles in der Response direkt zu extrahieren\n      if (roleIds.length === 0 && response.data.role) {\n        console.log('Versuche Rollen aus role-Eigenschaft zu extrahieren:', response.data.role);\n        if (Array.isArray(response.data.role)) {\n          roleIds = response.data.role.map((r: any) => r.id);\n        } else if (typeof response.data.role === 'object' && response.data.role !== null) {\n          roleIds = [response.data.role.id];\n        }\n      }\n      \n      console.log('Endgltige extrahierte Rollen-IDs:', roleIds);\n      \n      setSelectedUser(userData);\n      setUserFormData(userData);\n      setSelectedRoles(roleIds);\n      \n      // Rollen nur einmal laden, wenn sie noch nicht geladen wurden\n      if (roles.length === 0) {\n        await fetchRoles();\n      }\n    } catch (err) {\n      console.error('Fehler beim Laden der Benutzerdetails:', err);\n      handleError(err);\n    }\n  };\n\n  // Fehlerbehandlung\n  const handleError = (err: any) => {\n    let message = 'Ein Fehler ist aufgetreten';\n    if (err.response?.data?.message) {\n      message = err.response.data.message;\n    } else if (err instanceof Error) {\n      message = err.message;\n    }\n    \n    // Fehler \"Ungltige Rollen-ID\" nicht weitergeben, wenn kein Benutzer ausgewhlt ist\n    if (message.includes('Ungltige Rollen-ID') && !selectedUser) {\n      console.warn('Fehler unterdrckt, da kein Benutzer ausgewhlt ist:', message);\n      return;\n    }\n    \n    onError(message);\n  };\n\n  // Handler fr Auswahl eines Benutzers\n  const handleUserSelect = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    const userId = parseInt(event.target.value, 10);\n    if (userId && !isNaN(userId)) {\n      fetchUserDetails(userId);\n    } else {\n      setSelectedUser(null);\n      setUserFormData({});\n      setSelectedRoles([]);\n    }\n  };\n\n  // Erweitere den handleUserInputChange\n  const handleUserInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value, type } = e.target;\n    let finalValue: string | number | null = value;\n    \n    // Korrekte Typenkonvertierung fr numerische Felder\n    if (type === 'number') {\n      // Wenn das Feld leer ist, setzen wir null statt NaN\n      finalValue = value === '' ? null : Number(value);\n    }\n    \n    setUserFormData({ ...userFormData, [name]: finalValue });\n    setIsEditingUser(true); // Aktiviere Edit-Modus sobald etwas gendert wird\n  };\n\n  // Abbrechen der Bearbeitung\n  const handleCancelEdit = () => {\n    if (selectedUser) {\n      setUserFormData({\n        ...selectedUser,\n        birthday: selectedUser.birthday ? new Date(selectedUser.birthday).toISOString().split('T')[0] : null\n      });\n    }\n    setIsEditingUser(false);\n  };\n\n  // Speichern der Benutzerdaten\n  const handleUserSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!selectedUser || !selectedUser.id) {\n      onError('Kein Benutzer ausgewhlt');\n      showMessage('Kein Benutzer ausgewhlt', 'error');\n      return;\n    }\n\n    try {\n      // Validierung\n      if (!userFormData.username?.trim()) throw new Error('Benutzername ist erforderlich');\n      if (!userFormData.email?.trim()) throw new Error('E-Mail ist erforderlich');\n      if (!userFormData.firstName?.trim()) throw new Error('Vorname ist erforderlich');\n      if (!userFormData.lastName?.trim()) throw new Error('Nachname ist erforderlich');\n\n      // Bereite die Daten korrekt vor\n      const dataToSend = {\n        ...userFormData,\n        // Korrekte Behandlung von numerischen Werten\n        salary: userFormData.salary === null || userFormData.salary === undefined || userFormData.salary === '' as any\n          ? null \n          : typeof userFormData.salary === 'string' \n            ? parseFloat(userFormData.salary) \n            : userFormData.salary,\n        normalWorkingHours: userFormData.normalWorkingHours === null || userFormData.normalWorkingHours === undefined || userFormData.normalWorkingHours === '' as any\n          ? 7.6 \n          : typeof userFormData.normalWorkingHours === 'string' \n            ? parseFloat(userFormData.normalWorkingHours) \n            : userFormData.normalWorkingHours,\n        hourlyRate: userFormData.hourlyRate === null || userFormData.hourlyRate === undefined || userFormData.hourlyRate === '' as any\n          ? null \n          : typeof userFormData.hourlyRate === 'string' \n            ? userFormData.hourlyRate  // Keine Konvertierung fr Decimal-Werte, da sie als Strings bergeben werden sollten\n            : userFormData.hourlyRate.toString(),  // Konvertierung zu String fr Decimal-Werte\n        monthlySalary: userFormData.monthlySalary === null || userFormData.monthlySalary === undefined || userFormData.monthlySalary === '' as any\n          ? null \n          : typeof userFormData.monthlySalary === 'string' \n            ? parseFloat(userFormData.monthlySalary) \n            : userFormData.monthlySalary,\n        birthday: userFormData.birthday || null\n      };\n\n      console.log('Sende Daten zum Server:', dataToSend);\n\n      // Update Benutzerdaten\n      const response = await userApi.update(selectedUser.id, dataToSend);\n\n      if (response.data) {\n        const updatedData = {\n          ...response.data,\n          birthday: response.data.birthday ? new Date(response.data.birthday).toISOString().split('T')[0] : null\n        };\n        setSelectedUser(updatedData);\n        setUserFormData({\n          ...updatedData,\n          birthday: updatedData.birthday ? new Date(updatedData.birthday).toISOString().split('T')[0] : null\n        });\n        \n        // Optimistisches Update: User in Liste aktualisieren statt vollstndigem Reload\n        setUsers(prevUsers => \n          prevUsers.map(user => \n            user.id === updatedData.id ? updatedData : user\n          )\n        );\n        \n        showMessage('Benutzerprofil erfolgreich aktualisiert', 'success');\n        setIsEditingUser(false);\n        // fetchUsers() entfernt - kein vollstndiger Reload mehr\n      }\n    } catch (err) {\n      console.error('Fehler beim Speichern der Benutzerdaten:', err);\n      // Bei Fehler: Rollback durch vollstndiges Reload\n      fetchUsers();\n      if (err.response?.status === 400) {\n        const errorMsg = `Validierungsfehler: ${err.response?.data?.message || 'Bitte berprfe die eingegebenen Daten'}`;\n        onError(errorMsg);\n        showMessage(errorMsg, 'error');\n      } else if (err.response?.status === 404) {\n        onError('Benutzer wurde nicht gefunden');\n        showMessage('Benutzer wurde nicht gefunden', 'error');\n      } else {\n        handleError(err);\n      }\n    }\n  };\n\n  // Toggle Rolle fr einen Benutzer (hinzufgen/entfernen)\n  const toggleRole = async (roleId: number) => {\n    if (!roleId || !selectedUser) return;\n    \n    // Prfe, ob es sich um eine fixe Rolle handelt - Nur fr Admin-Benutzer (ID: 1) sind Admin-Rollen (ID: 1) nicht entfernbar\n    if (roleId === 1 && selectedUser.id === 1 && selectedRoles.includes(roleId)) {\n      showMessage('Die Admin-Rolle kann vom Admin-Benutzer nicht entfernt werden', 'warning');\n      return;\n    }\n    \n    try {\n      console.log('Toggle Rolle:', roleId, 'fr Benutzer:', selectedUser.id);\n      console.log('Aktuelle ausgewhlte Rollen:', selectedRoles);\n      \n      // berprfen, ob die Rolle bereits zugewiesen ist\n      const isRoleSelected = selectedRoles.includes(roleId);\n      \n      const newSelectedRoles = isRoleSelected\n        ? selectedRoles.filter(id => id !== roleId)\n        : [...selectedRoles, roleId];\n      \n      console.log('Neue ausgewhlte Rollen:', newSelectedRoles);\n      \n      // Optimistisches UI-Update\n      setSelectedRoles(newSelectedRoles);\n      \n      // API-Aufruf zur Aktualisierung der Rollen\n      console.log('Sende Rollenaktualisierung an API:', { userId: selectedUser.id, roleIds: newSelectedRoles });\n      const response = await userApi.updateRoles(selectedUser.id, newSelectedRoles);\n      console.log('API-Antwort bei Rollenaktualisierung:', response.data);\n      \n      // Benutzer nach dem Update neu laden\n      await fetchUserDetails(selectedUser.id);\n      \n      // Erfolgsmeldung anzeigen mit showMessage statt setUserSuccess\n      showMessage(\n        isRoleSelected\n          ? `Rolle erfolgreich entfernt`\n          : `Rolle erfolgreich zugewiesen`,\n        'success'\n      );\n    } catch (error) {\n      // Bei Fehler auf vorherigen Zustand zurcksetzen\n      console.error('Fehler beim Aktualisieren der Rollen:', error);\n      fetchUserDetails(selectedUser.id);\n      handleError(error);\n      showMessage('Fehler beim Aktualisieren der Rollen', 'error');\n    }\n  };\n\n  // Initialisiere FormData wenn Benutzer ausgewhlt wird\n  useEffect(() => {\n    if (selectedUser) {\n      setUserFormData({\n        ...selectedUser,\n        birthday: selectedUser.birthday ? new Date(selectedUser.birthday).toISOString().split('T')[0] : null\n      });\n      setIsEditingUser(false); // Starte im Read-Only Modus\n    }\n  }, [selectedUser]);\n\n  // Handler fr neue Benutzer-Formular\n  const handleNewUserInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setNewUserFormData({ ...newUserFormData, [name]: value });\n  };\n\n  // Neuen Benutzer erstellen\n  const handleCreateUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Validierung\n    if (!newUserFormData.email || !newUserFormData.password || !newUserFormData.firstName || !newUserFormData.lastName) {\n      showMessage('Bitte fllen Sie alle Felder aus', 'error');\n      return;\n    }\n\n    // E-Mail-Format validieren\n    if (!newUserFormData.email.match(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/)) {\n      showMessage('Ungltiges E-Mail-Format', 'error');\n      return;\n    }\n\n    try {\n      const response = await userApi.create(newUserFormData);\n      \n      // Optimistisches Update: User zur Liste hinzufgen statt vollstndigem Reload\n      if (response.data) {\n        setUsers(prevUsers => [response.data, ...prevUsers]);\n      }\n      \n      showMessage('Benutzer erfolgreich erstellt', 'success');\n      setIsCreateModalOpen(false);\n      setNewUserFormData({\n        email: '',\n        password: '',\n        firstName: '',\n        lastName: ''\n      });\n      // fetchUsers() entfernt - kein vollstndiger Reload mehr\n    } catch (err: any) {\n      // Bei Fehler: Rollback durch vollstndiges Reload\n      fetchUsers();\n      const errorMessage = err.response?.data?.message || 'Fehler beim Erstellen des Benutzers';\n      showMessage(errorMessage, 'error');\n      onError(errorMessage);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 pb-6\">\n      {/* Die lokale Erfolgsmeldungs-Anzeige wird entfernt, da wir jetzt HeaderMessage verwenden */}\n      {/* {userSuccess && (\n        <div className=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4\">\n          {userSuccess}\n        </div>\n      )} */}\n\n      {/* Titelzeile: Button links, Dropdown rechts */}\n      <div className=\"mb-6\">\n        <div className=\"flex items-center gap-4\">\n          {/* Linke Seite: \"Neuer Benutzer\"-Button */}\n          <div className=\"flex items-center\">\n            {isAdmin() && (\n              <button\n                onClick={() => setIsCreateModalOpen(true)}\n                className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                style={{ width: '30.19px', height: '30.19px' }}\n                title={t('users.create')}\n                aria-label={t('users.create')}\n              >\n                <PlusIcon className=\"h-4 w-4\" />\n              </button>\n            )}\n          </div>\n          \n          {/* Rechts: Benutzer-Dropdown */}\n          <div className=\"flex-1\">\n            <label htmlFor=\"userSelect\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              {t('users.title')}\n            </label>\n            <select\n              id=\"userSelect\"\n              onChange={handleUserSelect}\n              className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n            >\n              <option value=\"\">-- {t('users.title')} {t('common.select')} --</option>\n              {users.map(user => (\n                <option key={user.id} value={user.id}>\n                  {user.firstName} {user.lastName} ({user.username})\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {selectedUser && (\n        <div>\n          <div className=\"flex justify-between items-center mb-4\">\n            <h2 className=\"text-xl font-semibold dark:text-white\">\n              {t('users.title')}: {selectedUser.firstName} {selectedUser.lastName}\n            </h2>\n          </div>\n\n          {/* Tabs fr Benutzerdetails, Dokumente und Rollen */}\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow mb-6\">\n            <div className=\"border-b border-gray-200 dark:border-gray-700\">\n              <nav className=\"flex -mb-px\">\n                <button\n                  onClick={() => setActiveUserTab('details')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'details'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <UserCircleIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('users.title')}\n                </button>\n                <button\n                  onClick={() => setActiveUserTab('documents')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'documents'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <DocumentTextIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('profile.documents')}\n                </button>\n                <button\n                  onClick={() => setActiveUserTab('roles')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'roles'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <ShieldCheckIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('roles.title')}\n                </button>\n              </nav>\n            </div>\n          </div>\n\n          {/* Benutzerdetails Formular */}\n          {activeUserTab === 'details' && (\n            <form onSubmit={handleUserSubmit} className=\"bg-white dark:bg-gray-800 rounded-lg shadow p-6\">\n              {/* Bestehender Code fr Benutzerdetails */}\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('users.form.username')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"username\"\n                    value={userFormData.username || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('users.form.email')}\n                  </label>\n                  <input\n                    type=\"email\"\n                    name=\"email\"\n                    value={userFormData.email || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('users.form.firstName')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"firstName\"\n                    value={userFormData.firstName || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('users.form.lastName')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"lastName\"\n                    value={userFormData.lastName || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.birthday')}\n                  </label>\n                  <input\n                    type=\"date\"\n                    name=\"birthday\"\n                    value={userFormData.birthday || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.bankDetails')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"bankDetails\"\n                    value={userFormData.bankDetails || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.contract')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"contract\"\n                    value={userFormData.contract || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.salary')}\n                  </label>\n                  <input\n                    type=\"number\"\n                    name=\"salary\"\n                    value={userFormData.salary === null || userFormData.salary === undefined ? '' : userFormData.salary}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('users.form.normalWorkingHours')}\n                  </label>\n                  <input\n                    type=\"number\"\n                    step=\"0.1\"\n                    name=\"normalWorkingHours\"\n                    value={userFormData.normalWorkingHours === null || userFormData.normalWorkingHours === undefined ? '7.6' : userFormData.normalWorkingHours}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.country')}\n                  </label>\n                  <select\n                    name=\"country\"\n                    value={userFormData.country || 'CO'}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  >\n                    {COUNTRIES.map((country) => (\n                      <option key={country.code} value={country.code}>\n                        {country.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.language')}\n                  </label>\n                  <select\n                    name=\"language\"\n                    value={userFormData.language || 'es'}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  >\n                    {LANGUAGES.map((language) => (\n                      <option key={language.code} value={language.code}>\n                        {language.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n\n              {/* Lohnabrechnung-Einstellungen */}\n              <div className=\"mt-4 border-t pt-4\">\n                <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('users.form.payrollSettings')}</h3>\n                \n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      {t('users.form.payrollCountry')}\n                    </label>\n                    <select\n                      name=\"payrollCountry\"\n                      value={userFormData.payrollCountry || selectedUser.payrollCountry || 'CH'}\n                      onChange={handleUserInputChange}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    >\n                      {PAYROLL_COUNTRIES.map(country => (\n                        <option key={country.code} value={country.code}>\n                          {country.name}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  \n                  {(userFormData.payrollCountry === 'CO' || \n                    (selectedUser.payrollCountry === 'CO' && !userFormData.payrollCountry)) && (\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('users.form.contractType')}\n                      </label>\n                      <select\n                        name=\"contractType\"\n                        value={userFormData.contractType || ''}\n                        onChange={handleUserInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                      >\n                        <option value=\"\">Bitte auswhlen</option>\n                        {CONTRACT_TYPES.map(type => (\n                          <option key={type.code} value={type.code}>\n                            {type.name}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  )}\n                </div>\n                \n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      {t('users.form.hourlyRate')} ({(userFormData.payrollCountry || selectedUser.payrollCountry) === 'CH' ? 'CHF' : 'COP'})\n                    </label>\n                    <input\n                      type=\"number\"\n                      name=\"hourlyRate\"\n                      min=\"0\"\n                      step={(userFormData.payrollCountry || selectedUser.payrollCountry) === 'CH' ? '0.05' : '1'}\n                      value={userFormData.hourlyRate === null || userFormData.hourlyRate === undefined ? '' : userFormData.hourlyRate}\n                      onChange={handleUserInputChange}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                      placeholder={(userFormData.payrollCountry || selectedUser.payrollCountry) === 'CH' ? 'z.B. 45.00' : 'z.B. 50000'}\n                    />\n                  </div>\n                  \n                  {((userFormData.payrollCountry === 'CO' || selectedUser.payrollCountry === 'CO') && \n                    (userFormData.contractType !== 'servicios_externos' && selectedUser.contractType !== 'servicios_externos') &&\n                    (userFormData.contractType || selectedUser.contractType)) && (\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('users.form.monthlySalary')} (COP)\n                      </label>\n                      <input\n                        type=\"number\"\n                        name=\"monthlySalary\"\n                        min=\"0\"\n                        step=\"1000\"\n                        value={userFormData.monthlySalary === null || userFormData.monthlySalary === undefined ? '' : userFormData.monthlySalary}\n                        onChange={handleUserInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                        placeholder=\"z.B. 3500000\"\n                      />\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {isEditingUser && (\n                <div className=\"mt-4 flex justify-end gap-3\">\n                  <button\n                    type=\"button\"\n                    onClick={handleCancelEdit}\n                    className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                    title={t('common.cancel')}\n                  >\n                    <XMarkIcon className=\"h-5 w-5\" />\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                    title={t('common.save')}\n                  >\n                    <CheckIcon className=\"h-5 w-5\" />\n                  </button>\n                </div>\n              )}\n            </form>\n          )}\n\n          {/* Identifikationsdokumente Tab */}\n          {activeUserTab === 'documents' && (\n            <IdentificationDocumentList userId={selectedUser.id} isAdmin={true} />\n          )}\n\n          {/* Rollen Tab */}\n          {activeUserTab === 'roles' && (\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow p-6\">\n              {/* Rollenzuweisung - nur anzeigen, wenn Rollen geladen wurden */}\n              {loadingRoles ? (\n                <div className=\"mt-4 mb-4\">\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('roleAssignment.title')}</h3>\n                  <p className=\"dark:text-gray-300\">{t('roleAssignment.loading')}</p>\n                </div>\n              ) : roles.length > 0 && (\n                <div>\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('roleAssignment.title')}</h3>\n                  \n                  {/* berprfung auf unbekannte Rollen */}\n                  {selectedRoles.some(roleId => !roles.some(role => role.id === roleId)) && (\n                    <div className=\"bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-400 dark:border-yellow-700 text-yellow-700 dark:text-yellow-300 px-4 py-3 rounded mb-4\">\n                      <p className=\"font-bold\">{t('roleAssignment.unknownRolesWarning')}</p>\n                      <p>{t('roleAssignment.unknownRolesMessage', { ids: selectedRoles.filter(roleId => !roles.some(role => role.id === roleId)).join(', ') })}</p>\n                      <p className=\"mt-2 text-sm\">{t('roleAssignment.availableRoleIds', { ids: roles.map(r => r.id).join(', ') })}</p>\n                    </div>\n                  )}\n                  \n                  {/* Aktuell zugewiesene Rollen */}\n                  <div className=\"mb-4\">\n                    <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('roleAssignment.currentRoles')}</h4>\n                    {selectedRoles.length === 0 ? (\n                      <p className=\"text-gray-500 dark:text-gray-400 italic\">{t('roleAssignment.noRolesAssigned')}</p>\n                    ) : (\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {/* Bekannte zugewiesene Rollen */}\n                        {roles\n                          .filter(role => selectedRoles.includes(role.id))\n                          .map(role => {\n                            // Eine Rolle ist nur dann nicht entfernbar, wenn es sich um die Admin-Rolle (ID: 1) fr den Admin-Benutzer (ID: 1) handelt\n                            const isFixedRole = role.id === 1 && selectedUser && selectedUser.id === 1;\n                            return (\n                              <div \n                                key={role.id} \n                                className={`border rounded-lg p-4 ${isFixedRole ? 'border-green-500 bg-green-50 dark:bg-green-900/20 dark:border-green-700 cursor-not-allowed' : 'border-blue-500 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-700 cursor-pointer'}`}\n                                onClick={() => !isFixedRole && toggleRole(role.id)}\n                              >\n                                <div className=\"flex justify-between items-center\">\n                                  <div>\n                                    <h4 className=\"font-medium flex items-center dark:text-white\">\n                                      {role.name}\n                                      {isFixedRole && (\n                                        <span className=\"ml-2 text-xs bg-green-600 text-white px-2 py-0.5 rounded-full\">\n                                          {t('roleAssignment.fixed')}\n                                        </span>\n                                      )}\n                                    </h4>\n                                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">{role.description}</p>\n                                  </div>\n                                  <div className={`flex items-center ${isFixedRole ? 'text-gray-400 dark:text-gray-500' : 'text-blue-600 dark:text-blue-400'}`}>\n                                    <span className=\"mr-2 text-sm\">{isFixedRole ? t('roleAssignment.fixedAssigned') : t('roleAssignment.remove')}</span>\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n                                    </svg>\n                                  </div>\n                                </div>\n                              </div>\n                            );\n                          })}\n                        \n                        {/* Unbekannte zugewiesene Rollen */}\n                        {selectedRoles\n                          .filter(roleId => !roles.some(role => role.id === roleId))\n                          .map(roleId => (\n                            <div \n                              key={`unknown-${roleId}`} \n                              className=\"border border-orange-500 bg-orange-50 rounded-lg p-4\"\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium\">{t('roleAssignment.unknownRole', { id: roleId })}</h4>\n                                  <p className=\"text-sm text-orange-600\">{t('roleAssignment.unknownRoleDescription')}</p>\n                                </div>\n                                <div className=\"flex items-center text-orange-600\">\n                                  <span className=\"mr-2 text-sm\">{t('roleAssignment.remove')}</span>\n                                  <button \n                                    onClick={() => toggleRole(roleId)}\n                                    className=\"focus:outline-none\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n                                    </svg>\n                                  </button>\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    )}\n                  </div>\n                  \n                  {/* Verfgbare Rollen */}\n                  <div>\n                    <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('roleAssignment.availableRoles')}</h4>\n                    {roles.filter(role => !selectedRoles.includes(role.id)).length === 0 ? (\n                      <p className=\"text-gray-500 dark:text-gray-400 italic\">{t('roleAssignment.noRolesAvailable')}</p>\n                    ) : (\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {roles\n                          .filter(role => !selectedRoles.includes(role.id))\n                          .map(role => (\n                            <div \n                              key={role.id} \n                              className=\"border border-gray-300 rounded-lg p-4 cursor-pointer hover:border-blue-300 hover:bg-blue-50\"\n                              onClick={() => toggleRole(role.id)}\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium\">{role.name}</h4>\n                                  <p className=\"text-sm text-gray-600\">{role.description}</p>\n                                </div>\n                                <div className=\"flex items-center text-gray-500 hover:text-blue-600\">\n                                  <span className=\"mr-2 text-sm\">{t('roleAssignment.add')}</span>\n                                  <PlusIcon className=\"h-5 w-5\" />\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Sidepane/Modal fr Benutzererstellung */}\n      {isCreateModalOpen && (\n        <>\n          {/* Fr Mobile (unter 640px) - klassisches Modal */}\n          {isMobile ? (\n            <Dialog open={isCreateModalOpen} onClose={() => setIsCreateModalOpen(false)} className=\"relative z-50\">\n              <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n              \n              <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                  {/* Header */}\n                  <div className=\"px-6 py-4 border-b dark:border-gray-700\">\n                    <div className=\"flex items-center justify-between\">\n                      <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                        {t('organisation.createUser.title')}\n                      </Dialog.Title>\n                      <button\n                        onClick={() => setIsCreateModalOpen(false)}\n                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                      >\n                        <XMarkIcon className=\"h-6 w-6\" />\n                      </button>\n                    </div>\n                  </div>\n                  \n                  {/* Form */}\n                  <form onSubmit={handleCreateUser} className=\"p-6\">\n                    <div className=\"space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.email')} *\n                        </label>\n                        <input\n                          type=\"email\"\n                          name=\"email\"\n                          value={newUserFormData.email}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.password')} *\n                        </label>\n                        <input\n                          type=\"password\"\n                          name=\"password\"\n                          value={newUserFormData.password}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.firstName')} *\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"firstName\"\n                          value={newUserFormData.firstName}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.lastName')} *\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"lastName\"\n                          value={newUserFormData.lastName}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                    </div>\n                    \n                    {/* Footer */}\n                    <div className=\"mt-6 flex justify-end gap-3\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setIsCreateModalOpen(false)}\n                        className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                        title={t('common.cancel')}\n                      >\n                        <XMarkIcon className=\"h-5 w-5\" />\n                      </button>\n                      <button\n                        type=\"submit\"\n                        className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                        title={t('organisation.createUser.create')}\n                      >\n                        <CheckIcon className=\"h-5 w-5\" />\n                      </button>\n                    </div>\n                  </form>\n                </Dialog.Panel>\n              </div>\n            </Dialog>\n          ) : (\n            // Fr Desktop (ab 640px) - Sidepane\n            // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n            <>\n              {/* Backdrop - nur wenn offen und <= 1070px */}\n              {/* Hinweis: onClick entfernt, da Backdrop pointer-events: none hat, damit Hauptinhalt interaktiv bleibt */}\n              {isCreateModalOpen && !isLargeScreen && (\n                <div \n                  className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n                  aria-hidden=\"true\" \n                  style={{\n                    opacity: isCreateModalOpen ? 1 : 0,\n                    transition: 'opacity 300ms ease-out'\n                  }}\n                />\n              )}\n              \n              {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n              <div \n                className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isCreateModalOpen ? 'translate-x-0' : 'translate-x-full'}`}\n                style={{\n                  transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n                  pointerEvents: isCreateModalOpen ? 'auto' : 'none'\n                }}\n                aria-hidden={!isCreateModalOpen}\n                role=\"dialog\"\n                aria-modal={isCreateModalOpen}\n              >\n                <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n                  <h2 className=\"text-lg font-semibold dark:text-white\">\n                    {t('organisation.createUser.title')}\n                  </h2>\n                  <button\n                    onClick={() => setIsCreateModalOpen(false)}\n                    className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                  >\n                    <XMarkIcon className=\"h-6 w-6\" />\n                  </button>\n                </div>\n\n                <div className=\"flex flex-col flex-1 min-h-0\">\n                  <form onSubmit={handleCreateUser} className=\"flex flex-col flex-1 min-h-0\">\n                    <div className=\"p-4 overflow-y-auto flex-1 min-h-0 space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.email')} *\n                        </label>\n                      <input\n                        type=\"email\"\n                        name=\"email\"\n                        value={newUserFormData.email}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('organisation.createUser.password')} *\n                      </label>\n                      <input\n                        type=\"password\"\n                        name=\"password\"\n                        value={newUserFormData.password}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('organisation.createUser.firstName')} *\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"firstName\"\n                        value={newUserFormData.firstName}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('organisation.createUser.lastName')} *\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"lastName\"\n                        value={newUserFormData.lastName}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                      </div>\n                    </div>\n                    \n                    {/* Footer */}\n                    <div className=\"flex justify-end gap-3 border-t dark:border-gray-700 pt-4 px-4 flex-shrink-0\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setIsCreateModalOpen(false)}\n                        className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                        title={t('common.cancel')}\n                      >\n                        <XMarkIcon className=\"h-5 w-5\" />\n                      </button>\n                      <button\n                        type=\"submit\"\n                        className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                        title={t('organisation.createUser.create')}\n                      >\n                        <CheckIcon className=\"h-5 w-5\" />\n                      </button>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default UserManagementTab; ","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { roleApi } from '../api/apiClient.ts';\nimport { Role, AccessLevel } from '../types/interfaces.ts';\nimport { PencilIcon, TrashIcon, PlusIcon, FunnelIcon, XMarkIcon, CheckIcon, ArrowPathIcon, DocumentDuplicateIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport axiosInstance from '../config/axios.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport FilterPane from '../components/FilterPane.tsx';\nimport SavedFilterTags from '../components/SavedFilterTags.tsx';\nimport { FilterCondition } from '../components/FilterRow.tsx';\nimport { useError } from '../contexts/ErrorContext.tsx';\nimport { ErrorCategory } from '../services/ErrorHandler.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface RoleManagementTabProps {\n  onRolesChange?: () => void;\n  onError: (error: string) => void;\n  readOnly?: boolean;\n}\n\n// Definiere Seiten, die immer sichtbar sein sollen (ohne Berechtigungsprfung)\nconst alwaysVisiblePages = ['dashboard', 'worktracker', 'cerebro', 'settings', 'profile'];\n\n// ALLE SEITEN IM SYSTEM (synchron mit Backend)\nconst defaultPages = [\n  'dashboard',\n  'worktracker',\n  'consultations',\n  'team_worktime_control', // = workcenter\n  'payroll', // = lohnabrechnung\n  'organization_management', // = organisation (Hauptseite)\n  'cerebro',\n  'settings',\n  'profile'\n];\n\n// ALLE TABELLEN IM SYSTEM (synchron mit Backend)\nconst defaultTables = [\n  'requests',           // auf dashboard\n  'tasks',             // auf worktracker\n  'users',             // auf organization_management\n  'roles',             // auf organization_management\n  'organization',      // auf organization_management\n  'organization_join_requests', // auf organization_management\n  'organization_users',  // auf organization_management\n  'team_worktime',     // auf team_worktime_control\n  'worktime',          // auf worktracker\n  'clients',           // auf consultations\n  'consultation_invoices', // auf consultations\n  'branches',          // auf settings/system\n  'notifications',     // allgemein\n  'settings',          // auf settings\n  'monthly_reports'    // auf consultations/reports\n];\n\n// ALLE BUTTONS IM SYSTEM (synchron mit Backend)\nconst defaultButtons = [\n  // Database Management Buttons (Settings/System)\n  'database_reset_table',\n  'database_logs',\n  \n  // Invoice Functions Buttons\n  'invoice_create',\n  'invoice_download', \n  'invoice_mark_paid',\n  'invoice_settings',\n  \n  // Todo/Task Buttons (Worktracker)\n  'todo_create',\n  'todo_edit',\n  'todo_delete',\n  'task_create',\n  'task_edit', \n  'task_delete',\n  \n  // User Management Buttons\n  'user_create',\n  'user_edit',\n  'user_delete',\n  'role_assign',\n  'role_create',\n  'role_edit',\n  'role_delete',\n  \n  // Organization Management Buttons\n  'organization_create',\n  'organization_edit',\n  'organization_delete',\n  \n  // Worktime Buttons\n  'worktime_start',\n  'worktime_stop', \n  'worktime_edit',\n  'worktime_delete',\n  \n  // General Cerebro Button\n  'cerebro',\n  \n  // Consultation Buttons\n  'consultation_start',\n  'consultation_stop',\n  'consultation_edit',\n  \n  // Client Management Buttons\n  'client_create',\n  'client_edit',\n  'client_delete',\n  \n  // Settings Buttons\n  'settings_system',\n  'settings_notifications',\n  'settings_profile',\n  \n  // Payroll Buttons\n  'payroll_generate',\n  'payroll_export',\n  'payroll_edit'\n];\n\n// Definiert die Zuordnung von Tabellen zu ihren bergeordneten Seiten\nconst tableToPageMapping = {\n  'requests': 'dashboard',\n  'tasks': 'worktracker',\n  'users': 'organization_management',\n  'roles': 'organization_management',\n  'organization': 'organization_management',\n  'organization_join_requests': 'organization_management',\n  'organization_users': 'organization_management',\n  'team_worktime': 'team_worktime_control',\n  'worktime': 'worktracker',\n  'clients': 'consultations',\n  'consultation_invoices': 'consultations',\n  'branches': 'settings',\n  'notifications': 'general',\n  'settings': 'settings',\n  'monthly_reports': 'consultations'\n};\n\n// Definiert die Zuordnung von Buttons zu ihren bergeordneten Seiten/Bereichen\nconst buttonToPageMapping = {\n  'database_reset_table': 'settings',\n  'database_logs': 'settings',\n  'invoice_create': 'consultations',\n  'invoice_download': 'consultations',\n  'invoice_mark_paid': 'consultations',\n  'invoice_settings': 'consultations',\n  'todo_create': 'worktracker',\n  'todo_edit': 'worktracker',\n  'todo_delete': 'worktracker',\n  'task_create': 'worktracker',\n  'task_edit': 'worktracker',\n  'task_delete': 'worktracker',\n  'user_create': 'organization_management',\n  'user_edit': 'organization_management',\n  'user_delete': 'organization_management',\n  'role_assign': 'organization_management',\n  'role_create': 'organization_management',\n  'role_edit': 'organization_management',\n  'role_delete': 'organization_management',\n  'organization_create': 'organization_management',\n  'organization_edit': 'organization_management',\n  'organization_delete': 'organization_management',\n  'worktime_start': 'worktracker',\n  'worktime_stop': 'worktracker',\n  'worktime_edit': 'worktracker',\n  'worktime_delete': 'worktracker',\n  'cerebro': 'cerebro',\n  'consultation_start': 'consultations',\n  'consultation_stop': 'consultations',\n  'consultation_edit': 'consultations',\n  'client_create': 'consultations',\n  'client_edit': 'consultations',\n  'client_delete': 'consultations',\n  'settings_system': 'settings',\n  'settings_notifications': 'settings',\n  'settings_profile': 'settings',\n  'payroll_generate': 'payroll',\n  'payroll_export': 'payroll',\n  'payroll_edit': 'payroll'\n};\n\n// Definiert die Zuordnung von Buttons zu ihren zugehrigen Tabellen\nconst buttonToTableMapping: Record<string, string | null> = {\n  // Worktime Buttons  worktime Tabelle\n  'worktime_start': 'worktime',\n  'worktime_stop': 'worktime',\n  'worktime_edit': 'worktime',\n  'worktime_delete': 'worktime',\n  // Task/Todo Buttons  tasks Tabelle\n  'task_create': 'tasks',\n  'task_edit': 'tasks',\n  'task_delete': 'tasks',\n  'todo_create': 'tasks',\n  'todo_edit': 'tasks',\n  'todo_delete': 'tasks',\n  // Client Buttons  clients Tabelle\n  'client_create': 'clients',\n  'client_edit': 'clients',\n  'client_delete': 'clients',\n  'consultation_start': 'clients',\n  'consultation_stop': 'clients',\n  'consultation_edit': 'clients',\n  // Invoice Buttons  consultation_invoices Tabelle\n  'invoice_create': 'consultation_invoices',\n  'invoice_download': 'consultation_invoices',\n  'invoice_mark_paid': 'consultation_invoices',\n  'invoice_settings': 'consultation_invoices',\n  // User Management Buttons  users/roles Tabellen\n  'user_create': 'users',\n  'user_edit': 'users',\n  'user_delete': 'users',\n  'role_assign': 'roles',\n  'role_create': 'roles',\n  'role_edit': 'roles',\n  'role_delete': 'roles',\n  // Organization Management Buttons  organization Tabelle\n  'organization_create': 'organization',\n  'organization_edit': 'organization',\n  'organization_delete': 'organization',\n  // Settings Buttons  settings Tabelle\n  'settings_system': 'settings',\n  'settings_notifications': 'settings',\n  'settings_profile': 'settings',\n  // Buttons ohne direkte Tabelle-Zuordnung\n  'database_reset_table': null,\n  'database_logs': null,\n  'cerebro': null,\n  'payroll_generate': null,\n  'payroll_export': null,\n  'payroll_edit': null\n};\n\n// Display-Name-Mapping fr Seiten (DB-Interne Bezeichnung  Frontend-Bezeichnung)\n// Wird dynamisch aus bersetzungen geladen\n\n// Display-Name-Mapping fr Tabellen (DB-Interne Bezeichnung  Frontend-Bezeichnung)\n// Wird dynamisch aus bersetzungen geladen\n\n// Display-Name-Mapping fr Buttons wird dynamisch in der Komponente geladen\n\n// TableID fr gespeicherte Filter\nconst ROLES_TABLE_ID = 'roles-table';\n\n// Standardrollen-IDs (fr Rollen ohne Organisation)\nconst STANDARD_ROLE_IDS = [1, 2, 999]; // Admin (1), User (2), Hamburger (999)\n\n// Standardrollen-Namen (drfen nicht bearbeitet/gelscht werden, egal von welcher Organisation)\nconst STANDARD_ROLE_NAMES = ['Admin', 'User', 'Hamburger'];\n\n// Helper-Funktion zur Prfung ob es sich um eine Standardrolle handelt\nconst isStandardRole = (roleId: number, roleName?: string): boolean => {\n  // Prfe zuerst auf Standard-IDs (fr Rollen ohne Organisation)\n  if (STANDARD_ROLE_IDS.includes(roleId)) {\n    return true;\n  }\n  // Prfe auf Standard-Namen (fr Rollen in Organisationen)\n  if (roleName && STANDARD_ROLE_NAMES.includes(roleName)) {\n    return true;\n  }\n  return false;\n};\n\ninterface RoleFormData {\n  name: string;\n  description: string;\n  permissions: {\n    entity: string;\n    entityType: string;\n    accessLevel: AccessLevel;\n  }[];\n}\n\n\n// RoleCard-Komponente fr mobile Ansicht\nconst RoleCard: React.FC<{\n  role: Role;\n  onEdit: (role: Role) => void;\n  onDelete: (roleId: number) => void;\n  onCopy: (role: Role) => void;\n  canEdit: boolean;\n  canDelete: boolean;\n  canCopy: boolean;\n}> = ({ role, onEdit, onDelete, onCopy, canEdit, canDelete, canCopy }) => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4 mb-4\">\n      {/* Header mit Rollenname und Aktionen */}\n      <div className=\"flex justify-between items-start mb-2\">\n        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">{role.name}</h3>\n        \n        <div className=\"flex space-x-2\">\n          {canCopy && (\n            <button\n              onClick={() => onCopy(role)}\n              className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n              title={t('roles.actions.copy')}\n            >\n              <DocumentDuplicateIcon className=\"h-5 w-5\" />\n            </button>\n          )}\n          \n          {canEdit && (\n            <button\n              onClick={() => onEdit(role)}\n              className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n              title={t('roles.actions.edit')}\n            >\n              <PencilIcon className=\"h-5 w-5\" />\n            </button>\n          )}\n          \n          {canDelete && (\n            <button\n              onClick={() => onDelete(role.id)}\n              className=\"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 p-1\"\n              title={t('roles.actions.delete')}\n            >\n              <TrashIcon className=\"h-5 w-5\" />\n            </button>\n          )}\n        </div>\n      </div>\n      \n      {/* Beschreibung */}\n      <p className=\"text-sm text-gray-600 dark:text-gray-400\">{role.description || t('roles.noDescription')}</p>\n      \n      {/* Berechtigungen - kompakt */}\n      <div className=\"mt-2\">\n        <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-1\">{t('roles.permissions')}:</h4>\n        <div className=\"flex flex-wrap gap-1\">\n          {role.permissions\n            .filter(perm => perm.accessLevel !== 'none') // Nur relevante Berechtigungen anzeigen\n            .slice(0, 8) // Begrenze die Anzahl der angezeigten Berechtigungen\n            .map(permission => (\n              <span \n                key={`${permission.entity}-${permission.entityType}`}\n                className=\"text-xs bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 px-2 py-1 rounded\"\n              >\n                {permission.entity}: {permission.accessLevel}\n              </span>\n            ))}\n          {role.permissions.filter(perm => perm.accessLevel !== 'none').length > 8 && (\n            <span className=\"text-xs bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-300 px-2 py-1 rounded\">\n                +{role.permissions.filter(perm => perm.accessLevel !== 'none').length - 8} {t('common.showMore')}\n            </span>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst RoleManagementTab: React.FC<RoleManagementTabProps> = ({ onRolesChange, onError, readOnly = false }) => {\n  const { t } = useTranslation();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingRole, setEditingRole] = useState<Role | null>(null);\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [loading, setLoading] = useState(true);\n  \n  // Display-Name-Mapping fr Seiten (dynamisch aus bersetzungen)\n  const pageDisplayNames = useMemo(() => ({\n    'dashboard': t('roles.pages.dashboard'),\n    'worktracker': t('roles.pages.worktracker'),\n    'consultations': t('roles.pages.consultations'),\n    'team_worktime_control': t('roles.pages.team_worktime_control'),\n    'payroll': t('roles.pages.payroll'),\n    'organization_management': t('roles.pages.organization_management'), // Organisation-Seite (Hauptseite)\n    'cerebro': t('roles.pages.cerebro'),\n    'settings': t('roles.pages.settings'),\n    'profile': t('roles.pages.profile')\n  }), [t]);\n\n  // Display-Name-Mapping fr Tabellen (dynamisch aus bersetzungen)\n  const tableDisplayNames = useMemo(() => ({\n    'tasks': t('roles.tables.tasks'),\n    'worktime': t('roles.tables.worktime'),\n    'users': t('roles.tables.users'),\n    'roles': t('roles.tables.roles'),\n    'organization': t('roles.tables.organization'),\n    'organization_join_requests': t('roles.tables.organization_join_requests'),\n    'organization_users': t('roles.tables.organization_users'),\n    'clients': t('roles.tables.clients'),\n    'consultation_invoices': t('roles.tables.consultation_invoices'),\n    'requests': t('roles.tables.requests'),\n    'team_worktime': t('roles.tables.team_worktime'),\n    'settings': t('roles.tables.settings'),\n    'notifications': t('roles.tables.notifications'),\n    'branches': t('roles.tables.branches'),\n    'monthly_reports': t('roles.tables.monthly_reports')\n  }), [t]);\n\n  // Display-Name-Mapping fr Buttons (dynamisch aus bersetzungen)\n  const buttonDisplayNames = useMemo(() => ({\n    'worktime_start': t('roles.buttons.worktime_start'),\n    'worktime_stop': t('roles.buttons.worktime_stop'),\n    'worktime_edit': t('roles.buttons.worktime_edit'),\n    'worktime_delete': t('roles.buttons.worktime_delete'),\n    'task_create': t('roles.buttons.task_create'),\n    'task_edit': t('roles.buttons.task_edit'),\n    'task_delete': t('roles.buttons.task_delete'),\n    'todo_create': t('roles.buttons.todo_create'),\n    'todo_edit': t('roles.buttons.todo_edit'),\n    'todo_delete': t('roles.buttons.todo_delete'),\n    'client_create': t('roles.buttons.client_create'),\n    'client_edit': t('roles.buttons.client_edit'),\n    'client_delete': t('roles.buttons.client_delete'),\n    'consultation_start': t('roles.buttons.consultation_start'),\n    'consultation_stop': t('roles.buttons.consultation_stop'),\n    'consultation_edit': t('roles.buttons.consultation_edit'),\n    'invoice_create': t('roles.buttons.invoice_create'),\n    'invoice_download': t('roles.buttons.invoice_download'),\n    'invoice_mark_paid': t('roles.buttons.invoice_mark_paid'),\n    'invoice_settings': t('roles.buttons.invoice_settings'),\n    'user_create': t('roles.buttons.user_create'),\n    'user_edit': t('roles.buttons.user_edit'),\n    'user_delete': t('roles.buttons.user_delete'),\n    'role_assign': t('roles.buttons.role_assign'),\n    'role_create': t('roles.buttons.role_create'),\n    'role_edit': t('roles.buttons.role_edit'),\n    'role_delete': t('roles.buttons.role_delete'),\n    'organization_create': t('roles.buttons.organization_create'),\n    'organization_edit': t('roles.buttons.organization_edit'),\n    'organization_delete': t('roles.buttons.organization_delete'),\n    'settings_system': t('roles.buttons.settings_system'),\n    'settings_notifications': t('roles.buttons.settings_notifications'),\n    'settings_profile': t('roles.buttons.settings_profile'),\n    'database_reset_table': t('roles.buttons.database_reset_table'),\n    'database_logs': t('roles.buttons.database_logs'),\n    'payroll_generate': t('roles.buttons.payroll_generate'),\n    'payroll_export': t('roles.buttons.payroll_export'),\n    'payroll_edit': t('roles.buttons.payroll_edit'),\n    'cerebro': t('roles.buttons.cerebro')\n  }), [t]);\n  const [formData, setFormData] = useState<RoleFormData>({\n    name: '',\n    description: '',\n    permissions: [\n      // Seiten-Berechtigungen\n      ...defaultPages.map(page => ({\n        entity: page,\n        entityType: 'page',\n        accessLevel: 'none' as AccessLevel\n      })),\n      // Tabellen-Berechtigungen\n      ...defaultTables.map(table => ({\n        entity: table,\n        entityType: 'table',\n        accessLevel: 'none' as AccessLevel\n      })),\n      // Button-Berechtigungen\n      ...defaultButtons.map(button => ({\n        entity: button,\n        entityType: 'button',\n        accessLevel: 'none' as AccessLevel\n      }))\n    ]\n  });\n  const [error, setError] = useState<string | null>(null);\n  const { hasPermission } = usePermissions();\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n  \n  // Neue State-Variablen fr erweiterte Filterbedingungen\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  \n  // Filter State Management (Controlled Mode)\n  const [activeFilterName, setActiveFilterName] = useState<string>('Alle');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n  \n  // Responsiveness Hook (640px wie Standard)\n  const [isMobile, setIsMobile] = useState<boolean>(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  \n  // Neue Fehlerbehandlung hinzufgen\n  const { handleError, handleValidationError } = useError();\n  \n  // Neue State-Variablen fr die Berechtigungen\n  const [isAddPermissionModalOpen, setIsAddPermissionModalOpen] = useState(false);\n  const [selectedPermission, setSelectedPermission] = useState<string | null>(null);\n  const [displayLimit, setDisplayLimit] = useState<number>(10);\n  \n  // berwache Bildschirmgre\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isModalOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isModalOpen, openSidepane, closeSidepane]);\n\n  // Aktualisiere die fetchRoles-Funktion, um den neuen ErrorHandler zu nutzen\n  const fetchRoles = useCallback(async () => {\n    setLoading(true);\n    console.log('DEBUGAUSGABE: Hole Rollen vom Server...');\n    \n    try {\n      const response = await roleApi.getAll();\n      console.log('DEBUGAUSGABE: Rollen erfolgreich geholt:', response.data);\n      setRoles(response.data);\n      setError(null);\n    } catch (error) {\n      console.error('DEBUGAUSGABE: Fehler beim Abrufen der Rollen:', error);\n      // Nutze den neuen ErrorHandler\n      handleError(error, { \n        component: 'RoleManagementTab', \n        action: 'fetchRoles' \n      });\n      // Rufe auch den bergebenen onError auf, falls vorhanden\n      if (onError) {\n        onError('Fehler beim Laden der Rollen');\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [handleError, onError]);\n\n  // Direkt Rollen laden\n  useEffect(() => {\n    fetchRoles();\n  }, [fetchRoles]);\n\n  // Speichern einer Rolle\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    \n    if (!formData.name) {\n      handleValidationError('Rollenname darf nicht leer sein', { name: 'Rollenname ist erforderlich' });\n      return;\n    }\n    \n    if (editingRole) {\n      // Stelle sicher, dass die immer sichtbaren Seiten auch tatschlich auf 'both' gesetzt sind\n      const updatedPermissions = formData.permissions.map(permission => {\n        if (permission.entityType === 'page' && alwaysVisiblePages.includes(permission.entity)) {\n          return { ...permission, accessLevel: 'both' };\n        }\n        return permission;\n      });\n      \n      // Filtere nur die relevanten Berechtigungen (nicht 'none')\n      const filteredPermissions = updatedPermissions\n        .filter(permission => permission.accessLevel !== 'none')\n        .map(permission => ({\n          entity: permission.entity,\n          entityType: permission.entityType,\n          accessLevel: permission.accessLevel\n        }));\n      \n      if (!editingRole.id || isNaN(editingRole.id)) {\n        console.warn('DEBUGAUSGABE: Ungltige Rollen-ID erkannt, Bearbeitung abgebrochen');\n        handleError('Ungltige Rollen-ID, Bearbeitung abgebrochen', { \n          component: 'RoleManagementTab',\n          roleId: editingRole.id\n        });\n        return;\n      }\n      \n      // berprfen, ob es sich um eine geschtzte Rolle handelt\n      if (isStandardRole(editingRole.id, editingRole.name)) {\n        console.warn(`DEBUGAUSGABE: Versuch, geschtzte Rolle mit ID ${editingRole.id} zu bearbeiten`);\n        handleError({\n          message: 'Geschtzte Systemrollen knnen nicht bearbeitet werden',\n          name: 'PermissionError'\n        }, {\n          component: 'RoleManagementTab',\n          roleId: editingRole.id,\n          category: ErrorCategory.PERMISSION\n        });\n        setIsModalOpen(false);\n        return;\n      }\n      \n      // berprfen, ob die Rolle noch in der aktuellen Liste existiert\n      const roleExists = roles.some(r => r.id === editingRole.id);\n      if (!roleExists) {\n        console.error(`DEBUGAUSGABE: Rolle mit ID ${editingRole.id} existiert nicht in der aktuellen Liste`);\n        handleError(`Rolle mit ID ${editingRole.id} existiert nicht mehr. Bitte aktualisieren Sie die Seite.`, {\n          component: 'RoleManagementTab',\n          roleId: editingRole.id\n        });\n        setIsModalOpen(false);\n        // Rollen neu laden, um die Anzeige zu aktualisieren\n        await fetchRoles();\n        return;\n      }\n      \n      console.log(`DEBUGAUSGABE: Bearbeite Rolle mit ID ${editingRole.id}`);\n      \n      try {\n        console.log('DEBUGAUSGABE: Sende Aktualisierung an API:', {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions\n        });\n        \n        const dataToSend = {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions\n        };\n        \n        console.log('DEBUGAUSGABE: Vor dem API-Aufruf roleApi.update');\n        const response = await roleApi.update(editingRole.id, dataToSend);\n        console.log('DEBUGAUSGABE: Nach dem API-Aufruf roleApi.update');\n        console.log('DEBUGAUSGABE: API-Antwort bei Rollenaktualisierung:', response);\n        await fetchRoles();\n      } catch (updateError) {\n        console.error('DEBUGAUSGABE: Fehler bei Rollenaktualisierung:', updateError);\n        if (updateError.response) {\n          // Spezifischere Fehlerbehandlung\n          if (updateError.response.data.meta && updateError.response.data.meta.cause === \"Record to update not found.\") {\n            handleError('Diese Rolle existiert nicht mehr in der Datenbank. Die Anzeige wird aktualisiert.', {\n              component: 'RoleManagementTab',\n              roleId: editingRole.id\n            });\n            setIsModalOpen(false);\n            // Rollenliste aktualisieren, um Frontend zu synchronisieren\n            await fetchRoles();\n          } else {\n            handleError(updateError.response.data.message || 'Fehler beim Aktualisieren der Rolle', {\n              component: 'RoleManagementTab',\n              roleId: editingRole.id\n            });\n          }\n        } else {\n          handleError('Fehler beim Aktualisieren der Rolle', {\n            component: 'RoleManagementTab',\n            roleId: editingRole.id\n          });\n        }\n        return;\n      }\n    } else {\n      // Erstellen einer neuen Rolle\n      try {\n        // Stelle sicher, dass die immer sichtbaren Seiten auch tatschlich auf 'both' gesetzt sind\n        const updatedPermissions = formData.permissions.map(permission => {\n          if (permission.entityType === 'page' && alwaysVisiblePages.includes(permission.entity)) {\n            return { ...permission, accessLevel: 'both' };\n          }\n          return permission;\n        });\n        \n        // Filtere nur die relevanten Berechtigungen (nicht 'none')\n        const filteredPermissions = updatedPermissions\n          .filter(permission => permission.accessLevel !== 'none')\n          .map(permission => ({\n            entity: permission.entity,\n            entityType: permission.entityType,\n            accessLevel: permission.accessLevel\n          }));\n        \n        console.log('DEBUGAUSGABE: Sende Daten an API fr neue Rolle:', {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions\n        });\n        \n        const dataToSend = {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions\n        };\n        \n        console.log('DEBUGAUSGABE: Vor dem API-Aufruf roleApi.create');\n        const response = await roleApi.create(dataToSend);\n        console.log('DEBUGAUSGABE: Nach dem API-Aufruf roleApi.create');\n        console.log('DEBUGAUSGABE: API-Antwort beim Erstellen der Rolle:', response);\n        await fetchRoles();\n      } catch (createError) {\n        console.error('DEBUGAUSGABE: Fehler bei API-Anfrage zum Erstellen der Rolle:', createError);\n        if (createError.response) {\n          handleError(createError.response.data.message || 'Fehler beim Erstellen der Rolle', {\n            component: 'RoleManagementTab'\n          });\n        } else {\n          handleError('Fehler beim Erstellen der Rolle', {\n            component: 'RoleManagementTab'\n          });\n        }\n        return;\n      }\n    }\n    \n    if (onRolesChange) onRolesChange();\n    \n    setIsModalOpen(false);\n    resetForm();\n  };\n\n  // Lschen einer Rolle\n  const handleDelete = async (roleId: number) => {\n    if (!roleId || isNaN(roleId)) {\n      console.warn('Ungltige Rollen-ID erkannt, Lschvorgang abgebrochen');\n      handleError('Ungltige Rollen-ID, Lschvorgang abgebrochen', {\n        component: 'RoleManagementTab',\n        roleId: roleId\n      });\n      return;\n    }\n    \n    // Finde die Rolle in der Liste, um den Namen zu prfen\n    const role = roles.find(r => r.id === roleId);\n    \n    // berprfen, ob es sich um eine geschtzte Rolle handelt\n    if (role && isStandardRole(roleId, role.name)) {\n      console.warn(`Versuch, geschtzte Rolle mit ID ${roleId} (${role.name}) zu lschen`);\n      handleError('Geschtzte Systemrollen knnen nicht gelscht werden', {\n        component: 'RoleManagementTab',\n        roleId: roleId\n      });\n      return;\n    }\n    \n    if (!window.confirm('Mchten Sie diese Rolle wirklich lschen?')) return;\n    \n    try {\n      console.log(`Starte Lschvorgang fr Rolle mit ID ${roleId}`);\n      \n      // berprfen, ob die Rolle in der aktuellen Liste existiert\n      const roleExists = roles.some(r => r.id === roleId);\n      if (!roleExists) {\n        console.error(`Rolle mit ID ${roleId} existiert nicht in der aktuellen Liste`);\n        handleError(`Rolle mit ID ${roleId} existiert nicht mehr. Bitte aktualisieren Sie die Seite.`, {\n          component: 'RoleManagementTab',\n          roleId: roleId\n        });\n        // Rollen neu laden, um die Anzeige zu aktualisieren\n        await fetchRoles();\n        return;\n      }\n      \n      // Bei Mock-Daten lokales Lschen (wird nicht verwendet)\n      if (false) {\n        console.log('Lsche Mock-Rolle');\n        const updatedRoles = roles.filter(role => role.id !== roleId);\n        setRoles(updatedRoles);\n      } else {\n        console.log('Sende Lschanfrage an API');\n        \n        try {\n          const response = await roleApi.delete(roleId);\n          console.log('API-Antwort beim Lschen der Rolle:', response);\n          \n          // Nach erfolgreichem Lschen die Rollenliste aktualisieren\n          await fetchRoles();\n          console.log('Rollenliste nach Lschen aktualisiert');\n        } catch (deleteError) {\n          console.error('API-Fehler beim Lschen der Rolle:', deleteError);\n          \n          if (deleteError.response) {\n            console.error('API-Fehlerdaten:', deleteError.response.data);\n            \n            // Spezifischere Fehlerbehandlung\n            if (deleteError.response.data.meta && deleteError.response.data.meta.cause === \"Record to delete does not exist.\") {\n              handleError('Diese Rolle existiert nicht mehr in der Datenbank. Die Anzeige wird aktualisiert.', {\n                component: 'RoleManagementTab',\n                roleId: roleId\n              });\n              // Rollenliste aktualisieren, um Frontend zu synchronisieren\n              await fetchRoles();\n            } else {\n              handleError(deleteError.response.data.message || 'Fehler beim Lschen der Rolle', {\n                component: 'RoleManagementTab',\n                roleId: roleId\n              });\n            }\n          } else {\n            handleError('Netzwerkfehler beim Lschen der Rolle', {\n              component: 'RoleManagementTab',\n              roleId: roleId\n            });\n          }\n          return;\n        }\n      }\n      \n      console.log('Rolle erfolgreich gelscht');\n      if (onRolesChange) onRolesChange();\n    } catch (err) {\n      console.error('Unbehandelter Fehler beim Lschen der Rolle:', err);\n      handleError(err);\n      \n      // Bei einem unbehandelten Fehler trotzdem versuchen, die Rollenliste zu aktualisieren\n      try {\n        await fetchRoles();\n      } catch (refreshError) {\n        console.error('Fehler beim Aktualisieren der Rollenliste nach fehlgeschlagenem Lschvorgang:', refreshError);\n      }\n    }\n  };\n\n  // Kopieren einer Rolle (fr Standardrollen)\n  const handleCopyRole = async (role: Role) => {\n    try {\n      if (!role || !role.id) {\n        handleError('Ungltige Rolle zum Kopieren', {\n          component: 'RoleManagementTab'\n        });\n        return;\n      }\n\n      // Kopie der Rolle erstellen mit angepasstem Namen\n      const copiedRoleData = {\n        name: `${role.name}-Kopie`,\n        description: role.description || '',\n        permissions: role.permissions\n          .filter(permission => permission.accessLevel !== 'none')\n          .map(permission => ({\n            entity: permission.entity,\n            entityType: permission.entityType,\n            accessLevel: permission.accessLevel\n          }))\n      };\n\n      console.log('DEBUGAUSGABE: Kopiere Rolle:', role.name, 'mit Daten:', copiedRoleData);\n\n      // Rolle erstellen\n      const response = await roleApi.create(copiedRoleData);\n      console.log('DEBUGAUSGABE: Rolle erfolgreich kopiert:', response.data);\n\n      // Optimistisches Update: Neue Rolle zur Liste hinzufgen\n      setRoles(prevRoles => [response.data, ...prevRoles]);\n      \n      // Bearbeitungsmodal fr die kopierte Rolle ffnen\n      prepareRoleForEditing(response.data);\n      \n      if (onRolesChange) onRolesChange();\n    } catch (err) {\n      console.error('DEBUGAUSGABE: Fehler beim Kopieren der Rolle:', err);\n      handleError(err, {\n        component: 'RoleManagementTab',\n        roleId: role.id\n      });\n    }\n  };\n\n  // Rolle zum Bearbeiten vorbereiten\n  const prepareRoleForEditing = (role: Role) => {\n    // Verhindere das Bearbeiten von geschtzten Rollen\n    if (isStandardRole(role.id, role.name)) {\n      handleError('Geschtzte Systemrollen knnen nicht bearbeitet werden', {\n        component: 'RoleManagementTab',\n        roleId: role.id\n      });\n      return;\n    }\n    \n    // Alle mglichen Berechtigungen erstellen (Seiten, Tabellen und Buttons)\n    const allPermissions = [\n      ...defaultPages.map(page => ({\n        entity: page,\n        entityType: 'page',\n        // Fr die immer sichtbaren Seiten 'both' als Standard setzen\n        accessLevel: alwaysVisiblePages.includes(page) ? 'both' as AccessLevel : 'none' as AccessLevel\n      })),\n      ...defaultTables.map(table => ({\n        entity: table,\n        entityType: 'table',\n        accessLevel: 'none' as AccessLevel\n      })),\n      ...defaultButtons.map(button => ({\n        entity: button,\n        entityType: 'button',\n        accessLevel: 'none' as AccessLevel\n      }))\n    ];\n\n    // Vorhandene Berechtigungen bernehmen\n    role.permissions.forEach(permission => {\n      const existingPermIndex = allPermissions.findIndex(\n        p => p.entity === permission.entity && p.entityType === permission.entityType\n      );\n      \n      if (existingPermIndex !== -1) {\n        // Stelle sicher, dass alwaysVisiblePages immer 'both' als AccessLevel haben\n        if (permission.entityType === 'page' && alwaysVisiblePages.includes(permission.entity)) {\n          allPermissions[existingPermIndex].accessLevel = 'both';\n        } else {\n          allPermissions[existingPermIndex].accessLevel = permission.accessLevel;\n        }\n      }\n    });\n\n    setFormData({\n      name: role.name,\n      description: role.description || '',\n      permissions: allPermissions\n    });\n    \n    setEditingRole(role);\n    setIsModalOpen(true);\n  };\n\n  // Formular fr neue Rolle zurcksetzen\n  const resetForm = () => {\n    setEditingRole(null);\n    setFormData({\n      name: '',\n      description: '',\n      permissions: [\n        // Seiten-Berechtigungen\n        ...defaultPages.map(page => ({\n          entity: page,\n          entityType: 'page',\n          // Fr die immer sichtbaren Seiten 'both' als Standard setzen\n          accessLevel: alwaysVisiblePages.includes(page) ? 'both' as AccessLevel : 'none' as AccessLevel\n        })),\n        // Tabellen-Berechtigungen\n        ...defaultTables.map(table => ({\n          entity: table,\n          entityType: 'table',\n          accessLevel: 'none' as AccessLevel\n        })),\n        // Button-Berechtigungen\n        ...defaultButtons.map(button => ({\n          entity: button,\n          entityType: 'button',\n          accessLevel: 'none' as AccessLevel\n        }))\n      ]\n    });\n  };\n\n  // Setzt alle Seitenberechtigungen (auer die immer sichtbaren) auf den gleichen Wert\n  const setAllPagePermissions = (accessLevel: AccessLevel) => {\n    const newPermissions = [...formData.permissions];\n    \n    formData.permissions\n      .filter(p => p.entityType === 'page' && !alwaysVisiblePages.includes(p.entity))\n      .forEach(permission => {\n        const permIndex = formData.permissions.indexOf(permission);\n        newPermissions[permIndex] = {\n          ...permission,\n          accessLevel\n        };\n      });\n    \n    setFormData({ ...formData, permissions: newPermissions });\n  };\n\n  // Setzt alle Tabellen-Berechtigungen auf den gleichen Wert\n  const setAllTablePermissions = (accessLevel: AccessLevel) => {\n    const newPermissions = [...formData.permissions];\n    \n    formData.permissions\n      .filter(p => p.entityType === 'table')\n      .forEach(permission => {\n        const permIndex = formData.permissions.indexOf(permission);\n        newPermissions[permIndex] = {\n          ...permission,\n          accessLevel\n        };\n      });\n    \n    setFormData({ ...formData, permissions: newPermissions });\n  };\n\n  // Setzt alle Button-Berechtigungen auf den gleichen Wert\n  const setAllButtonPermissions = (accessLevel: AccessLevel) => {\n    const newPermissions = [...formData.permissions];\n    \n    formData.permissions\n      .filter(p => p.entityType === 'button')\n      .forEach(permission => {\n        const permIndex = formData.permissions.indexOf(permission);\n        newPermissions[permIndex] = {\n          ...permission,\n          accessLevel\n        };\n      });\n    \n    setFormData({ ...formData, permissions: newPermissions });\n  };\n\n  // Funktion zum Zhlen der aktiven Filter\n  const getActiveFilterCount = () => {\n    return filterConditions.length;\n  };\n\n  // Filtern und sortieren der Rollen\n  const filteredAndSortedRoles = useMemo(() => {\n    return roles\n      .filter(role => {\n        // Globale Suche\n        if (searchTerm) {\n          const searchLower = searchTerm.toLowerCase();\n          const matchesSearch = \n            role.name.toLowerCase().includes(searchLower) ||\n            (role.description && role.description.toLowerCase().includes(searchLower));\n          \n          if (!matchesSearch) return false;\n        }\n        \n        // Prfe erweiterte Filterbedingungen, wenn vorhanden\n        if (filterConditions.length > 0) {\n          // Implementiere die logische Verknpfung der Bedingungen (UND/ODER)\n          let result = filterConditions.length > 0;\n          \n          for (let i = 0; i < filterConditions.length; i++) {\n            const condition = filterConditions[i];\n            let conditionMet = false;\n            \n            switch (condition.column) {\n              case 'name':\n                if (condition.operator === 'equals') {\n                  conditionMet = role.name.toLowerCase() === (condition.value as string || '').toLowerCase();\n                } else if (condition.operator === 'contains') {\n                  conditionMet = role.name.toLowerCase().includes((condition.value as string || '').toLowerCase());\n                } else if (condition.operator === 'startsWith') {\n                  conditionMet = role.name.toLowerCase().startsWith((condition.value as string || '').toLowerCase());\n                }\n                break;\n              \n              case 'description':\n                if (!role.description) {\n                  conditionMet = false;\n                  break;\n                }\n                \n                if (condition.operator === 'equals') {\n                  conditionMet = role.description.toLowerCase() === (condition.value as string || '').toLowerCase();\n                } else if (condition.operator === 'contains') {\n                  conditionMet = role.description.toLowerCase().includes((condition.value as string || '').toLowerCase());\n                } else if (condition.operator === 'startsWith') {\n                  conditionMet = role.description.toLowerCase().startsWith((condition.value as string || '').toLowerCase());\n                }\n                break;\n              \n              case 'permissions':\n                // Vereinfachter Filter fr Berechtigungen - zhle die Anzahl der Berechtigungen mit dem angegebenen Level\n                const accessLevel = condition.value as AccessLevel;\n                const count = role.permissions.filter(p => p.accessLevel === accessLevel).length;\n                \n                if (condition.operator === 'greaterThan') {\n                  conditionMet = count > 0;\n                } else if (condition.operator === 'equals') {\n                  conditionMet = count > 0;\n                }\n                break;\n            }\n            \n            // Verknpfe das Ergebnis dieser Bedingung mit dem Gesamtergebnis\n            if (i === 0) {\n              result = conditionMet;\n            } else {\n              const operator = filterLogicalOperators[i - 1];\n              result = operator === 'AND' ? (result && conditionMet) : (result || conditionMet);\n            }\n          }\n          \n          if (!result) return false;\n        }\n        \n        return true;\n      })\n      .sort((a, b) => {\n        return a.name.localeCompare(b.name);\n      });\n  }, [roles, searchTerm, filterConditions, filterLogicalOperators]);\n\n  // Mobile Ansicht renderRoles-Funktion\n  const renderRoles = () => {\n    if (roles.length === 0) {\n      return (\n        <div className=\"p-4 bg-gray-50 rounded text-center\">\n          <p>Keine Rollen gefunden. Erstellen Sie eine neue Rolle mit dem Button oben.</p>\n        </div>\n      );\n    }\n    \n    if (isMobile) {\n      // Mobile Ansicht mit Karten\n      return (\n        <>\n          <div className=\"space-y-4\">\n            {filteredAndSortedRoles.slice(0, displayLimit).map((role) => (\n              <RoleCard \n                key={role.id} \n                role={role} \n                onEdit={prepareRoleForEditing}\n                onDelete={handleDelete}\n                onCopy={handleCopyRole}\n                canEdit={!readOnly && hasPermission('roles', 'write', 'table') && !isStandardRole(role.id, role.name)}\n                canDelete={!readOnly && hasPermission('roles', 'write', 'table') && !isStandardRole(role.id, role.name)}\n                canCopy={!readOnly && hasPermission('roles', 'write', 'table') && isStandardRole(role.id, role.name)}\n              />\n            ))}\n          </div>\n          \n          {/* \"Mehr anzeigen\" Button - Mobil */}\n          {filteredAndSortedRoles.length > displayLimit && (\n            <div className=\"mt-4 flex justify-center\">\n              <button\n                className=\"px-4 py-2 text-sm font-medium text-blue-600 bg-white border border-blue-300 rounded-md hover:bg-blue-50 dark:bg-gray-800 dark:text-blue-400 dark:border-gray-700 dark:hover:bg-gray-700\"\n                onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n              >\n                Mehr anzeigen ({filteredAndSortedRoles.length - displayLimit} verbleibend)\n              </button>\n            </div>\n          )}\n        </>\n      );\n    } else {\n      // Card-Ansicht fr grere Bildschirme\n      return (\n        <>\n          <div className=\"space-y-4\">\n            {filteredAndSortedRoles.slice(0, displayLimit).map((role) => (\n              <RoleCard \n                key={role.id} \n                role={role} \n                onEdit={prepareRoleForEditing}\n                onDelete={handleDelete}\n                onCopy={handleCopyRole}\n                canEdit={!readOnly && hasPermission('roles', 'write', 'table') && !isStandardRole(role.id, role.name)}\n                canDelete={!readOnly && hasPermission('roles', 'write', 'table') && !isStandardRole(role.id, role.name)}\n                canCopy={!readOnly && hasPermission('roles', 'write', 'table') && isStandardRole(role.id, role.name)}\n              />\n            ))}\n          </div>\n          \n          {/* \"Mehr anzeigen\" Button - Desktop */}\n          {filteredAndSortedRoles.length > displayLimit && (\n            <div className=\"mt-4 flex justify-center\">\n              <button\n                className=\"px-4 py-2 text-sm font-medium text-blue-600 bg-white border border-blue-300 rounded-md hover:bg-blue-50 dark:bg-gray-800 dark:text-blue-400 dark:border-gray-700 dark:hover:bg-gray-700\"\n                onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n              >\n                Mehr anzeigen ({filteredAndSortedRoles.length - displayLimit} verbleibend)\n              </button>\n            </div>\n          )}\n        </>\n      );\n    }\n  };\n\n  // Standard-Filter erstellen und speichern\n  useEffect(() => {\n    const createStandardFilters = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        \n        if (!token) {\n          console.error('Nicht authentifiziert');\n          return;\n        }\n\n        // Prfen, ob die Standard-Filter bereits existieren\n        const existingFiltersResponse = await axiosInstance.get(\n          API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(ROLES_TABLE_ID)\n        );\n\n        const existingFilters = existingFiltersResponse.data || [];\n        const alleFilterExists = existingFilters.some(filter => filter.name === 'Alle');\n\n        // Erstelle \"Alle\"-Filter, wenn er noch nicht existiert\n        if (!alleFilterExists) {\n          const alleFilter = {\n            tableId: ROLES_TABLE_ID,\n            name: 'Alle',\n            conditions: [],\n            operators: []\n          };\n\n          await axiosInstance.post(\n            API_ENDPOINTS.SAVED_FILTERS.BASE,\n            alleFilter\n          );\n          console.log('Alle-Filter fr Rollen erstellt');\n        }\n      } catch (error) {\n        console.error('Fehler beim Erstellen der Standard-Filter:', error);\n      }\n    };\n\n    createStandardFilters();\n  }, []);\n\n  // Initialer Default-Filter setzen (Controlled Mode)\n  useEffect(() => {\n    const setInitialFilter = async () => {\n      try {\n        const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(ROLES_TABLE_ID));\n        const filters = response.data;\n        \n        const alleFilter = filters.find((filter: any) => filter.name === 'Alle');\n        if (alleFilter) {\n          setActiveFilterName('Alle');\n          setSelectedFilterId(alleFilter.id);\n          applyFilterConditions(alleFilter.conditions, alleFilter.operators);\n        }\n      } catch (error) {\n        console.error('Fehler beim Setzen des initialen Filters:', error);\n      }\n    };\n\n    setInitialFilter();\n  }, []);\n\n  // Funktion zum Anwenden von Filterbedingungen\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n  };\n  \n  // Funktion zum Zurcksetzen der Filter\n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n  \n  // Filter Change Handler (Controlled Mode)\n  const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators);\n  };\n\n  return (\n    <div>\n      {/* Spaltenanzeige und Suche */}\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between mb-4\">\n          {/* Linke Seite: \"Neue Rolle erstellen\"-Button */}\n          <div className=\"flex items-center\">\n            {!readOnly && hasPermission('roles', 'write', 'table') && (\n              <button\n                onClick={() => setIsModalOpen(true)}\n                className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n                style={{ width: '30.19px', height: '30.19px' }}\n                title={t('roles.createRole')}\n                aria-label={t('roles.createRole')}\n              >\n                <PlusIcon className=\"h-4 w-4\" />\n              </button>\n            )}\n          </div>\n          \n          {/* Mitte: Titel - Kein Titel in der Mitte notwendig bei dieser Komponente, da der Tab-Header bereits den Titel zeigt */}\n          <div></div>\n          \n          {/* Rechte Seite: Suchfeld, Filter-Button, Spalten-Konfiguration */}\n          <div className=\"flex items-center gap-1.5\">\n            <input\n              type=\"text\"\n              placeholder=\"Suchen...\"\n              className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n            />\n            <button\n              className={`p-2 rounded-md ${getActiveFilterCount() > 0 ? 'bg-blue-50 text-blue-600' : 'hover:bg-gray-100'} ml-1 relative`}\n              onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n              title=\"Filter\"\n            >\n              <FunnelIcon className=\"w-5 h-5\" />\n              {getActiveFilterCount() > 0 && (\n                <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 text-white rounded-full text-xs flex items-center justify-center\">\n                  {getActiveFilterCount()}\n                </span>\n              )}\n            </button>\n          </div>\n        </div>\n\n        {/* Filter-Modal */}\n        {isFilterModalOpen && (\n          <FilterPane\n            columns={[\n              { id: 'name', label: 'Name' },\n              { id: 'description', label: 'Beschreibung' },\n              { id: 'permissions', label: 'Berechtigungen' }\n            ]}\n            onApply={applyFilterConditions}\n            onReset={resetFilterConditions}\n            savedConditions={filterConditions}\n            savedOperators={filterLogicalOperators}\n            tableId={ROLES_TABLE_ID}\n          />\n        )}\n        \n        {/* Gespeicherte Filter als Tags anzeigen */}\n        <SavedFilterTags\n          tableId={ROLES_TABLE_ID}\n          onSelectFilter={applyFilterConditions}\n          onReset={resetFilterConditions}\n          activeFilterName={activeFilterName}\n          selectedFilterId={selectedFilterId}\n          onFilterChange={handleFilterChange}\n          defaultFilterName=\"Alle\"\n        />\n\n        {loading ? (\n          <div className=\"flex justify-center items-center py-8\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n          </div>\n        ) : (\n          renderRoles()\n        )}\n      </div>\n\n      {/* Modal/Sidepane fr Rollenerstellung/Bearbeitung */}\n      {isModalOpen && (\n        <>\n          {/* Mobile (unter 640px) - Modal */}\n          {isMobile ? (\n            <Dialog open={isModalOpen} onClose={() => setIsModalOpen(false)} className=\"relative z-50\">\n              <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n              \n              <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[calc(100vh-2rem)] flex flex-col overflow-hidden\">\n                  {/* Header */}\n                  <div className=\"px-6 py-4 border-b dark:border-gray-700 flex-shrink-0\">\n                    <div className=\"flex items-center justify-between\">\n                      <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                        {editingRole ? t('roles.editRole') : t('roles.createRole')}\n                      </Dialog.Title>\n                      <button\n                        onClick={() => setIsModalOpen(false)}\n                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                      >\n                        <XMarkIcon className=\"h-6 w-6\" />\n                      </button>\n                    </div>\n                  </div>\n                  \n                  {/* Form */}\n                  <form onSubmit={handleSubmit} className=\"flex flex-col flex-1 min-h-0\">\n                    {/* Content - scrollbarer Bereich */}\n                    <div className=\"flex-1 overflow-y-auto min-h-0\">\n                      <div className=\"p-6 space-y-5\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Name</label>\n                  <input\n                    type=\"text\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Beschreibung</label>\n                  <input\n                    type=\"text\"\n                    value={formData.description}\n                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n                  </div>\n                  \n                  <div className=\"mt-2\">\n                    <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('roles.form.detailedPermissions')}</label>\n                        {/* Bulk Actions - kompakt integriert */}\n                        <div className=\"flex flex-wrap items-center gap-1.5\">\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllPagePermissions('both')}\n                            className=\"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800\"\n                            title={t('roles.form.activateAllPages')}\n                          >\n                            {t('roles.form.pagesChecked')}\n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllPagePermissions('none')}\n                            className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            title={t('roles.form.deactivateAllPages')}\n                          >\n                            {t('roles.form.pagesUnchecked')}\n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllTablePermissions('both')}\n                            className=\"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800\"\n                            title={t('roles.form.activateAllTables')}\n                          >\n                            {t('roles.form.tablesChecked')}\n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllTablePermissions('none')}\n                            className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            title={t('roles.form.deactivateAllTables')}\n                          >\n                            {t('roles.form.tablesUnchecked')}\n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllButtonPermissions('both')}\n                            className=\"px-2 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800\"\n                            title={t('roles.form.activateAllButtons')}\n                          >\n                            {t('roles.form.buttonsChecked')}\n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllButtonPermissions('none')}\n                            className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            title={t('roles.form.deactivateAllButtons')}\n                          >\n                            {t('roles.form.buttonsUnchecked')}\n                          </button>\n                        </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-1 gap-4 overflow-y-auto border rounded-lg p-4 dark:border-gray-600\">\n                    {formData.permissions\n                      .filter(permission => \n                        permission.entityType === 'page'\n                      )\n                      .map((permission, index) => {\n                        const permIndex = formData.permissions.indexOf(permission);\n                        const isActive = permission.accessLevel === 'both';\n                        return (\n                          <div key={`permission-page-${permission.entity}-${index}`}>\n                            <div className=\"flex items-center justify-between\">\n                              <span className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{pageDisplayNames[permission.entity] || permission.entity}</span>\n                              <label className={`inline-flex items-center ${alwaysVisiblePages.includes(permission.entity) ? 'cursor-not-allowed opacity-80' : 'cursor-pointer'}`}>\n                                <input\n                                  type=\"checkbox\"\n                                  className=\"sr-only peer\"\n                                  checked={isActive}\n                                  disabled={alwaysVisiblePages.includes(permission.entity)}\n                                  onChange={() => {\n                                    const newPermissions = [...formData.permissions];\n                                    newPermissions[permIndex] = {\n                                      ...permission,\n                                      accessLevel: isActive ? 'none' : 'both'\n                                    };\n                                    setFormData({ ...formData, permissions: newPermissions });\n                                  }}\n                                />\n                                <div className={`relative w-11 h-6 ${alwaysVisiblePages.includes(permission.entity) ? 'bg-blue-600 dark:bg-blue-700' : 'bg-gray-200 dark:bg-gray-700'} peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700`}>\n                                  {alwaysVisiblePages.includes(permission.entity) && (\n                                    <span className=\"absolute inset-0 flex items-center justify-center text-xs text-white font-medium\">\n                                      Fix\n                                    </span>\n                                  )}\n                                </div>\n                              </label>\n                            </div>\n                            \n                            {/* Tabellen-Berechtigungen mit zugehrigen Buttons gruppiert */}\n                            {formData.permissions\n                              .filter(tablePerm => \n                                tablePerm.entityType === 'table' && \n                                tableToPageMapping[tablePerm.entity] === permission.entity\n                              )\n                              .sort((a, b) => {\n                                const aName = tableDisplayNames[a.entity] || a.entity;\n                                const bName = tableDisplayNames[b.entity] || b.entity;\n                                // Sortierung: users, roles, organization zuerst (in dieser Reihenfolge)\n                                const priorityOrder = ['users', 'roles', 'organization'];\n                                const aIndex = priorityOrder.indexOf(a.entity);\n                                const bIndex = priorityOrder.indexOf(b.entity);\n                                if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;\n                                if (aIndex !== -1) return -1;\n                                if (bIndex !== -1) return 1;\n                                return aName.localeCompare(bName);\n                              })\n                              .map((tablePerm, tableIndex) => {\n                                const tablePermIndex = formData.permissions.indexOf(tablePerm);\n                                const isTableActive = tablePerm.accessLevel === 'both';\n                                const tableEntity = tablePerm.entity;\n                                const tableDisplayName = tableDisplayNames[tableEntity] || tableEntity;\n                                \n                                // Finde alle Buttons, die zu dieser Tabelle gehren\n                                // Filtere Duplikate: task_* und todo_* sind dasselbe, nur task_* behalten\n                                const relatedButtons = formData.permissions\n                                  .filter(buttonPerm => \n                                    buttonPerm.entityType === 'button' && \n                                    buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                    buttonToTableMapping[buttonPerm.entity] === tableEntity &&\n                                    // Entferne todo_* Buttons wenn task_* existiert (sind dasselbe)\n                                    !(tableEntity === 'tasks' && buttonPerm.entity.startsWith('todo_'))\n                                  )\n                                  .sort((a, b) => {\n                                    const aName = buttonDisplayNames[a.entity] || a.entity;\n                                    const bName = buttonDisplayNames[b.entity] || b.entity;\n                                    // Logische Reihenfolge: Start, Stop, Erstellen, Bearbeiten, Lschen, dann alphabetisch\n                                    const order = ['Start', 'Stop', 'Erstellen', 'Bearbeiten', 'Lschen'];\n                                    const aIndex = order.indexOf(aName);\n                                    const bIndex = order.indexOf(bName);\n                                    if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;\n                                    if (aIndex !== -1) return -1;\n                                    if (bIndex !== -1) return 1;\n                                    return aName.localeCompare(bName);\n                                  });\n                                \n                                return (\n                                  <div key={`table-permission-${tableEntity}-${tableIndex}`} className=\"mt-3\">\n                                    {/* Tabelle selbst */}\n                                    <div className=\"flex items-center justify-between pl-6 border-l-2 border-blue-300 dark:border-blue-600\">\n                                      <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\"> {tableDisplayName}</span>\n                                      <label className=\"inline-flex items-center cursor-pointer\">\n                                        <input\n                                          type=\"checkbox\"\n                                          className=\"sr-only peer\"\n                                          checked={isTableActive}\n                                          onChange={() => {\n                                            const newPermissions = [...formData.permissions];\n                                            newPermissions[tablePermIndex] = {\n                                              ...tablePerm,\n                                              accessLevel: isTableActive ? 'none' : 'both'\n                                            };\n                                            setFormData({ ...formData, permissions: newPermissions });\n                                          }}\n                                        />\n                                        <div className=\"relative w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                        </div>\n                                      </label>\n                                    </div>\n                                    \n                                    {/* Zu dieser Tabelle gehrige Buttons */}\n                                    {relatedButtons.map((buttonPerm, buttonIndex) => {\n                                      const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                      const isButtonActive = buttonPerm.accessLevel === 'both';\n                                      const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                      return (\n                                        <div key={`button-permission-${buttonPerm.entity}-${buttonIndex}`} \n                                          className=\"flex items-center justify-between mt-2 pl-12 border-l-2 border-gray-300 dark:border-gray-600\">\n                                          <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                          <label className=\"inline-flex items-center cursor-pointer\">\n                                            <input\n                                              type=\"checkbox\"\n                                              className=\"sr-only peer\"\n                                              checked={isButtonActive}\n                                              onChange={() => {\n                                                const newPermissions = [...formData.permissions];\n                                                newPermissions[buttonPermIndex] = {\n                                                  ...buttonPerm,\n                                                  accessLevel: isButtonActive ? 'none' : 'both'\n                                                };\n                                                setFormData({ ...formData, permissions: newPermissions });\n                                              }}\n                                            />\n                                            <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                            </div>\n                                          </label>\n                                        </div>\n                                      );\n                                    })}\n                                  </div>\n                                );\n                              })\n                            }\n                              \n                              {/* Button-Berechtigungen ohne Tabelle-Zuordnung (am Ende) */}\n                              {formData.permissions\n                                .filter(buttonPerm => \n                                  buttonPerm.entityType === 'button' && \n                                  buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                  !buttonToTableMapping[buttonPerm.entity]\n                                )\n                                .sort((a, b) => {\n                                  const aName = buttonDisplayNames[a.entity] || a.entity;\n                                  const bName = buttonDisplayNames[b.entity] || b.entity;\n                                  return aName.localeCompare(bName);\n                                })\n                                .map((buttonPerm, buttonIndex) => {\n                                  const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                  const isButtonActive = buttonPerm.accessLevel === 'both';\n                                  const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                  return (\n                                    <div key={`button-permission-${buttonPerm.entity}-${buttonIndex}`} \n                                      className=\"flex items-center justify-between mt-2 pl-6 border-l-2 border-gray-300 dark:border-gray-600\">\n                                      <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                      <label className=\"inline-flex items-center cursor-pointer\">\n                                        <input\n                                          type=\"checkbox\"\n                                          className=\"sr-only peer\"\n                                          checked={isButtonActive}\n                                          onChange={() => {\n                                            const newPermissions = [...formData.permissions];\n                                            newPermissions[buttonPermIndex] = {\n                                              ...buttonPerm,\n                                              accessLevel: isButtonActive ? 'none' : 'both'\n                                            };\n                                            setFormData({ ...formData, permissions: newPermissions });\n                                          }}\n                                        />\n                                        <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                        </div>\n                                      </label>\n                          </div>\n                        );\n                      })\n                    }\n                            </div>\n                          );\n                        })\n                      }\n                    </div>\n                  </div>\n                    </div>\n                  </div>\n                  \n                  {/* Footer */}\n                  <div className=\"px-6 py-4 bg-gray-50 dark:bg-gray-700 flex justify-end gap-2 border-t dark:border-gray-600 flex-shrink-0\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setIsModalOpen(false)}\n                      className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                      title=\"Abbrechen\"\n                    >\n                      <XMarkIcon className=\"h-5 w-5\" />\n                    </button>\n                    <button\n                      type=\"submit\"\n                      className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                      title={editingRole ? 'Aktualisieren' : 'Erstellen'}\n                    >\n                      <CheckIcon className=\"h-5 w-5\" />\n                    </button>\n                  </div>\n                </form>\n              </Dialog.Panel>\n            </div>\n          </Dialog>\n          ) : (\n            /* Desktop (ab 640px) - Sidepane */\n            /* WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition */\n            <>\n              {/* Backdrop - nur wenn offen und <= 1070px */}\n              {/* Hinweis: onClick entfernt, da Backdrop pointer-events: none hat, damit Hauptinhalt interaktiv bleibt */}\n              {isModalOpen && !isLargeScreen && (\n                <div \n                  className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n                  aria-hidden=\"true\" \n                  style={{\n                    opacity: isModalOpen ? 1 : 0,\n                    transition: 'opacity 300ms ease-out'\n                  }}\n                />\n              )}\n              \n              {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n              <div \n                className={`fixed top-16 bottom-0 right-0 max-w-2xl w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isModalOpen ? 'translate-x-0' : 'translate-x-full'}`}\n                style={{\n                  transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n                  pointerEvents: isModalOpen ? 'auto' : 'none'\n                }}\n                aria-hidden={!isModalOpen}\n                role=\"dialog\"\n                aria-modal={isModalOpen}\n              >\n                <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n                  <h2 className=\"text-lg font-semibold dark:text-white\">\n                    {editingRole ? 'Rolle bearbeiten' : 'Neue Rolle erstellen'}\n                  </h2>\n                  <button\n                    onClick={() => setIsModalOpen(false)}\n                    className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                  >\n                    <XMarkIcon className=\"h-6 w-6\" />\n                  </button>\n                </div>\n\n                <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n                  <form onSubmit={handleSubmit} className=\"space-y-5\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('roles.form.name')}</label>\n                        <input\n                          type=\"text\"\n                          value={formData.name}\n                          onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                          className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('roles.form.description')}</label>\n                        <input\n                          type=\"text\"\n                          value={formData.description}\n                          onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                          className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                        />\n                      </div>\n                    </div>\n                    \n                    <div className=\"mt-2\">\n                      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Detaillierte Berechtigungen</label>\n                        {/* Bulk Actions */}\n                        <div className=\"flex flex-wrap items-center gap-1.5\">\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllPagePermissions('both')}\n                            className=\"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800\"\n                            title=\"Alle Seiten aktivieren\"\n                          >\n                            Seiten \n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllPagePermissions('none')}\n                            className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            title=\"Alle Seiten deaktivieren\"\n                          >\n                            Seiten \n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllTablePermissions('both')}\n                            className=\"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800\"\n                            title=\"Alle Tabellen aktivieren\"\n                          >\n                            Tabellen \n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllTablePermissions('none')}\n                            className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            title=\"Alle Tabellen deaktivieren\"\n                          >\n                            Tabellen \n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllButtonPermissions('both')}\n                            className=\"px-2 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800\"\n                            title=\"Alle Buttons aktivieren\"\n                          >\n                            Buttons \n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={() => setAllButtonPermissions('none')}\n                            className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            title=\"Alle Buttons deaktivieren\"\n                          >\n                            Buttons \n                          </button>\n                        </div>\n                      </div>\n                      \n                      <div className=\"grid grid-cols-1 gap-4 overflow-y-auto border rounded-lg p-4 dark:border-gray-600 max-h-[60vh]\">\n                        {formData.permissions\n                          .filter(permission => \n                            permission.entityType === 'page'\n                          )\n                          .map((permission, index) => {\n                            const permIndex = formData.permissions.indexOf(permission);\n                            const isActive = permission.accessLevel === 'both';\n                            return (\n                              <div key={`permission-page-desktop-${permission.entity}-${index}`}>\n                                <div className=\"flex items-center justify-between\">\n                                  <span className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{pageDisplayNames[permission.entity] || permission.entity}</span>\n                                  <label className={`inline-flex items-center ${alwaysVisiblePages.includes(permission.entity) ? 'cursor-not-allowed opacity-80' : 'cursor-pointer'}`}>\n                                    <input\n                                      type=\"checkbox\"\n                                      className=\"sr-only peer\"\n                                      checked={isActive}\n                                      disabled={alwaysVisiblePages.includes(permission.entity)}\n                                      onChange={() => {\n                                        const newPermissions = [...formData.permissions];\n                                        newPermissions[permIndex] = {\n                                          ...permission,\n                                          accessLevel: isActive ? 'none' : 'both'\n                                        };\n                                        setFormData({ ...formData, permissions: newPermissions });\n                                      }}\n                                    />\n                                    <div className={`relative w-11 h-6 ${alwaysVisiblePages.includes(permission.entity) ? 'bg-blue-600 dark:bg-blue-700' : 'bg-gray-200 dark:bg-gray-700'} peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700`}>\n                                      {alwaysVisiblePages.includes(permission.entity) && (\n                                        <span className=\"absolute inset-0 flex items-center justify-center text-xs text-white font-medium\">\n                                          Fix\n                                        </span>\n                                      )}\n                                    </div>\n                                  </label>\n                                </div>\n                                \n                                {/* Tabellen-Berechtigungen mit zugehrigen Buttons gruppiert */}\n                                {formData.permissions\n                                  .filter(tablePerm => \n                                    tablePerm.entityType === 'table' && \n                                    tableToPageMapping[tablePerm.entity] === permission.entity\n                                  )\n                                  .sort((a, b) => {\n                                    const aName = tableDisplayNames[a.entity] || a.entity;\n                                    const bName = tableDisplayNames[b.entity] || b.entity;\n                                    return aName.localeCompare(bName);\n                                  })\n                                  .map((tablePerm, tableIndex) => {\n                                    const tablePermIndex = formData.permissions.indexOf(tablePerm);\n                                    const isTableActive = tablePerm.accessLevel === 'both';\n                                    const tableEntity = tablePerm.entity;\n                                    const tableDisplayName = tableDisplayNames[tableEntity] || tableEntity;\n                                    \n                                    // Finde alle Buttons, die zu dieser Tabelle gehren\n                                    const relatedButtons = formData.permissions\n                                      .filter(buttonPerm => \n                                        buttonPerm.entityType === 'button' && \n                                        buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                        buttonToTableMapping[buttonPerm.entity] === tableEntity &&\n                                        !(tableEntity === 'tasks' && buttonPerm.entity.startsWith('todo_'))\n                                      )\n                                      .sort((a, b) => {\n                                        const aName = buttonDisplayNames[a.entity] || a.entity;\n                                        const bName = buttonDisplayNames[b.entity] || b.entity;\n                                        const order = ['Start', 'Stop', 'Erstellen', 'Bearbeiten', 'Lschen'];\n                                        const aIndex = order.indexOf(aName);\n                                        const bIndex = order.indexOf(bName);\n                                        if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;\n                                        if (aIndex !== -1) return -1;\n                                        if (bIndex !== -1) return 1;\n                                        return aName.localeCompare(bName);\n                                      });\n                                    \n                                    return (\n                                      <div key={`table-permission-desktop-${tableEntity}-${tableIndex}`} className=\"mt-3\">\n                                        {/* Tabelle selbst */}\n                                        <div className=\"flex items-center justify-between pl-6 border-l-2 border-blue-300 dark:border-blue-600\">\n                                          <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\"> {tableDisplayName}</span>\n                                          <label className=\"inline-flex items-center cursor-pointer\">\n                                            <input\n                                              type=\"checkbox\"\n                                              className=\"sr-only peer\"\n                                              checked={isTableActive}\n                                              onChange={() => {\n                                                const newPermissions = [...formData.permissions];\n                                                newPermissions[tablePermIndex] = {\n                                                  ...tablePerm,\n                                                  accessLevel: isTableActive ? 'none' : 'both'\n                                                };\n                                                setFormData({ ...formData, permissions: newPermissions });\n                                              }}\n                                            />\n                                            <div className=\"relative w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                            </div>\n                                          </label>\n                                        </div>\n                                        \n                                        {/* Zu dieser Tabelle gehrige Buttons */}\n                                        {relatedButtons.map((buttonPerm, buttonIndex) => {\n                                          const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                          const isButtonActive = buttonPerm.accessLevel === 'both';\n                                          const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                          return (\n                                            <div key={`button-permission-desktop-${buttonPerm.entity}-${buttonIndex}`} \n                                              className=\"flex items-center justify-between mt-2 pl-12 border-l-2 border-gray-300 dark:border-gray-600\">\n                                              <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                              <label className=\"inline-flex items-center cursor-pointer\">\n                                                <input\n                                                  type=\"checkbox\"\n                                                  className=\"sr-only peer\"\n                                                  checked={isButtonActive}\n                                                  onChange={() => {\n                                                    const newPermissions = [...formData.permissions];\n                                                    newPermissions[buttonPermIndex] = {\n                                                      ...buttonPerm,\n                                                      accessLevel: isButtonActive ? 'none' : 'both'\n                                                    };\n                                                    setFormData({ ...formData, permissions: newPermissions });\n                                                  }}\n                                                />\n                                                <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                                </div>\n                                              </label>\n                                            </div>\n                                          );\n                                        })}\n                                      </div>\n                                    );\n                                  })\n                                }\n                                  \n                                {/* Button-Berechtigungen ohne Tabelle-Zuordnung (am Ende) */}\n                                {formData.permissions\n                                  .filter(buttonPerm => \n                                    buttonPerm.entityType === 'button' && \n                                    buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                    !buttonToTableMapping[buttonPerm.entity]\n                                  )\n                                  .sort((a, b) => {\n                                    const aName = buttonDisplayNames[a.entity] || a.entity;\n                                    const bName = buttonDisplayNames[b.entity] || b.entity;\n                                    return aName.localeCompare(bName);\n                                  })\n                                  .map((buttonPerm, buttonIndex) => {\n                                    const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                    const isButtonActive = buttonPerm.accessLevel === 'both';\n                                    const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                    return (\n                                      <div key={`button-permission-desktop-${buttonPerm.entity}-${buttonIndex}`} \n                                        className=\"flex items-center justify-between mt-2 pl-6 border-l-2 border-gray-300 dark:border-gray-600\">\n                                        <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                        <label className=\"inline-flex items-center cursor-pointer\">\n                                          <input\n                                            type=\"checkbox\"\n                                            className=\"sr-only peer\"\n                                            checked={isButtonActive}\n                                            onChange={() => {\n                                              const newPermissions = [...formData.permissions];\n                                              newPermissions[buttonPermIndex] = {\n                                                ...buttonPerm,\n                                                accessLevel: isButtonActive ? 'none' : 'both'\n                                              };\n                                              setFormData({ ...formData, permissions: newPermissions });\n                                            }}\n                                          />\n                                          <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                          </div>\n                                        </label>\n                                      </div>\n                                    );\n                                  })\n                                }\n                              </div>\n                            );\n                          })\n                        }\n                      </div>\n                    </div>\n\n                    {/* Buttons */}\n                    <div className=\"flex justify-end pt-4 gap-2\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setIsModalOpen(false)}\n                        className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                        title=\"Abbrechen\"\n                      >\n                        <XMarkIcon className=\"h-5 w-5\" />\n                      </button>\n                      <button\n                        type=\"submit\"\n                        className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors\"\n                        title={editingRole ? 'Aktualisieren' : 'Erstellen'}\n                      >\n                        <CheckIcon className=\"h-5 w-5\" />\n                      </button>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default RoleManagementTab; ","import * as React from \"react\";\nfunction UserPlusIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(UserPlusIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction EnvelopeIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(EnvelopeIcon);\nexport default ForwardRef;","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { CreateOrganizationRequest } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\nimport { useAuth } from '../../hooks/useAuth.tsx';\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n}\n\nconst CreateOrganizationModal: React.FC<Props> = ({ isOpen, onClose, onSuccess }) => {\n  const { t } = useTranslation();\n  const [formData, setFormData] = useState<CreateOrganizationRequest>({\n    name: '',\n    displayName: '',\n    domain: ''\n  });\n  const [loading, setLoading] = useState<boolean>(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  const { fetchCurrentUser } = useAuth();\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    \n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    \n    if (!formData.name.trim()) {\n      newErrors.name = t('organization.create.nameRequired');\n    }\n    \n    if (!formData.displayName.trim()) {\n      newErrors.displayName = t('organization.create.displayNameRequired');\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    // Fehler fr dieses Feld lschen\n    if (errors[name]) {\n      setErrors(prev => ({ ...prev, [name]: '' }));\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      showMessage(t('joinRequest.fillRequired'), 'error');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      await organizationService.createOrganization(formData);\n      setErrors({});\n      showMessage(t('organization.create.createSuccess'), 'success');\n      \n      // WICHTIG: User und Berechtigungen neu laden nach Erstellen der Organisation\n      // Der User wurde der Admin-Rolle zugeordnet und hat jetzt neue Berechtigungen\n      await fetchCurrentUser();\n      \n      // Formular zurcksetzen\n      setFormData({\n        name: '',\n        displayName: '',\n        domain: ''\n      });\n      onClose();\n      if (onSuccess) {\n        onSuccess();\n      }\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('organization.create.createError');\n      showMessage(errorMessage, 'error');\n      setErrors({ submit: errorMessage });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    // Formular zurcksetzen\n    setFormData({\n      name: '',\n      displayName: '',\n      domain: ''\n    });\n    setErrors({});\n    onClose();\n  };\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('organization.create.title')}\n              </Dialog.Title>\n              <button\n                onClick={handleClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-4\">\n              {errors.submit && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {errors.submit}\n                </div>\n              )}\n\n              <div className=\"space-y-4\">\n                <div>\n                  <label \n                    htmlFor=\"name\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.create.name')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"name\"\n                    name=\"name\"\n                    value={formData.name}\n                    onChange={handleChange}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.name \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  />\n                  {errors.name && (\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.name}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"displayName\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.create.displayName')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"displayName\"\n                    name=\"displayName\"\n                    value={formData.displayName}\n                    onChange={handleChange}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.displayName \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  />\n                  {errors.displayName && (\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"domain\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.create.domain')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"domain\"\n                    name=\"domain\"\n                    value={formData.domain}\n                    onChange={handleChange}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                  title={t('joinRequest.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title={loading ? t('organization.create.creating') : t('organization.create.createButton')}\n                >\n                  {loading ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={handleClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('organization.create.title')}\n          </h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {errors.submit && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {errors.submit}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label \n                htmlFor=\"name\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.create.name')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleChange}\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                  errors.name \n                    ? 'border-red-300 dark:border-red-600' \n                    : 'border-gray-300 dark:border-gray-600'\n                }`}\n              />\n              {errors.name && (\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.name}</p>\n              )}\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"displayName\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.create.displayName')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"displayName\"\n                name=\"displayName\"\n                value={formData.displayName}\n                onChange={handleChange}\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                  errors.displayName \n                    ? 'border-red-300 dark:border-red-600' \n                    : 'border-gray-300 dark:border-gray-600'\n                }`}\n              />\n              {errors.displayName && (\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\n              )}\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"domain\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.create.domain')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"domain\"\n                name=\"domain\"\n                value={formData.domain}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"flex justify-end pt-4 gap-2\">\n              <button\n                type=\"button\"\n                onClick={handleClose}\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                title={t('common.cancel')}\n              >\n                <XMarkIcon className=\"h-5 w-5\" />\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                title={loading ? t('organization.create.creating') : t('organization.create.createButton')}\n              >\n                {loading ? (\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                ) : (\n                  <CheckIcon className=\"h-5 w-5\" />\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default CreateOrganizationModal; ","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { CreateJoinRequestRequest, Organization } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n}\n\nconst JoinOrganizationModal: React.FC<Props> = ({ isOpen, onClose, onSuccess }) => {\n  const { t } = useTranslation();\n  const [formData, setFormData] = useState<CreateJoinRequestRequest>({\n    organizationName: '',\n    message: ''\n  });\n  const [loading, setLoading] = useState<boolean>(false);\n  const [searching, setSearching] = useState<boolean>(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [organizations, setOrganizations] = useState<Organization[]>([]);\n  const [showDropdown, setShowDropdown] = useState<boolean>(false);\n  const [selectedOrganization, setSelectedOrganization] = useState<Organization | null>(null);\n  const searchTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const { showMessage } = useMessage();\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    \n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  // Click outside handler fr Dropdown\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setShowDropdown(false);\n      }\n    };\n\n    if (showDropdown) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showDropdown]);\n\n  const searchOrganizations = async (searchTerm: string) => {\n    if (searchTerm.length < 2) {\n      setOrganizations([]);\n      setShowDropdown(false);\n      return;\n    }\n\n    try {\n      setSearching(true);\n      const results = await organizationService.searchOrganizations(searchTerm);\n      setOrganizations(results);\n      setShowDropdown(true);\n    } catch (err: any) {\n      console.error('Fehler bei der Organisationen-Suche:', err);\n      setOrganizations([]);\n    } finally {\n      setSearching(false);\n    }\n  };\n\n  const handleOrganizationInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setFormData(prev => ({ ...prev, organizationName: value }));\n    setSelectedOrganization(null);\n    \n    // Fehler lschen\n    if (errors.organizationName) {\n      setErrors(prev => ({ ...prev, organizationName: '' }));\n    }\n\n    // Debounce fr Suche\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n\n    searchTimeoutRef.current = setTimeout(() => {\n      searchOrganizations(value);\n    }, 300);\n  };\n\n  const handleSelectOrganization = (org: Organization) => {\n    setSelectedOrganization(org);\n    setFormData(prev => ({ ...prev, organizationName: org.name }));\n    setShowDropdown(false);\n    setOrganizations([]);\n  };\n\n  const handleMessageChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setFormData(prev => ({ ...prev, message: e.target.value }));\n    if (errors.message) {\n      setErrors(prev => ({ ...prev, message: '' }));\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    \n    if (!formData.organizationName.trim()) {\n      newErrors.organizationName = t('organization.join.nameRequired');\n    } else if (!selectedOrganization) {\n      newErrors.organizationName = t('organization.join.selectFromList');\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      showMessage(t('joinRequest.fillRequired'), 'error');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      await organizationService.createJoinRequest(formData);\n      setErrors({});\n      showMessage(t('organization.join.sendSuccess'), 'success');\n      // Formular zurcksetzen\n      setFormData({\n        organizationName: '',\n        message: ''\n      });\n      setSelectedOrganization(null);\n      setOrganizations([]);\n      onClose();\n      if (onSuccess) {\n        onSuccess();\n      }\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('organization.join.sendError');\n      showMessage(errorMessage, 'error');\n      setErrors({ submit: errorMessage });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    // Formular zurcksetzen\n    setFormData({\n      organizationName: '',\n      message: ''\n    });\n    setSelectedOrganization(null);\n    setOrganizations([]);\n    setErrors({});\n    setShowDropdown(false);\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n    onClose();\n  };\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('organization.join.title')}\n              </Dialog.Title>\n              <button\n                onClick={handleClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-4\">\n              {errors.submit && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {errors.submit}\n                </div>\n              )}\n\n              <div className=\"space-y-4\">\n                <div className=\"relative\" ref={dropdownRef}>\n                  <label \n                    htmlFor=\"organizationName\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.join.search')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"organizationName\"\n                    name=\"organizationName\"\n                    value={formData.organizationName}\n                    onChange={handleOrganizationInputChange}\n                    placeholder={t('organization.join.searchPlaceholder')}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.organizationName \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  />\n                  {errors.organizationName && (\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.organizationName}</p>\n                  )}\n                  \n                  {/* Autocomplete Dropdown */}\n                  {showDropdown && (organizations.length > 0 || searching) && (\n                    <div className=\"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto\">\n                      {searching ? (\n                        <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\n                          {t('organization.join.searching')}\n                        </div>\n                      ) : organizations.length > 0 ? (\n                        organizations.map(org => (\n                          <button\n                            key={org.id}\n                            type=\"button\"\n                            onClick={() => handleSelectOrganization(org)}\n                            className=\"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 focus:bg-gray-100 dark:focus:bg-gray-700 focus:outline-none\"\n                          >\n                            <div className=\"font-medium text-gray-900 dark:text-white\">\n                              {org.displayName || org.name}\n                            </div>\n                            {org.displayName && (\n                              <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                                {org.name}\n                              </div>\n                            )}\n                          </button>\n                        ))\n                      ) : (\n                        <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\n                          {t('organization.join.noOrganizations')}\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"message\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.join.message')}\n                  </label>\n                  <textarea\n                    id=\"message\"\n                    name=\"message\"\n                    value={formData.message || ''}\n                    onChange={handleMessageChange}\n                    rows={3}\n                    placeholder={t('organization.join.messagePlaceholder')}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                  title={t('joinRequest.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title={loading ? t('organization.join.sending') : t('organization.join.send')}\n                >\n                  {loading ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={handleClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('organization.join.title')}\n          </h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {errors.submit && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {errors.submit}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"relative\" ref={dropdownRef}>\n              <label \n                htmlFor=\"organizationName\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.join.search')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"organizationName\"\n                name=\"organizationName\"\n                value={formData.organizationName}\n                onChange={handleOrganizationInputChange}\n                placeholder={t('organization.join.searchPlaceholder')}\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                  errors.organizationName \n                    ? 'border-red-300 dark:border-red-600' \n                    : 'border-gray-300 dark:border-gray-600'\n                }`}\n              />\n              {errors.organizationName && (\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.organizationName}</p>\n              )}\n              \n              {/* Autocomplete Dropdown */}\n              {showDropdown && (organizations.length > 0 || searching) && (\n                <div className=\"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto\">\n                  {searching ? (\n                    <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\n                      {t('organization.join.searching')}\n                    </div>\n                  ) : organizations.length > 0 ? (\n                    organizations.map(org => (\n                      <button\n                        key={org.id}\n                        type=\"button\"\n                        onClick={() => handleSelectOrganization(org)}\n                        className=\"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 focus:bg-gray-100 dark:focus:bg-gray-700 focus:outline-none\"\n                      >\n                        <div className=\"font-medium text-gray-900 dark:text-white\">\n                          {org.displayName || org.name}\n                        </div>\n                        {org.displayName && (\n                          <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                            {org.name}\n                          </div>\n                        )}\n                      </button>\n                    ))\n                  ) : (\n                    <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\n                      {t('organization.join.noOrganizations')}\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"message\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.join.message')}\n              </label>\n              <textarea\n                id=\"message\"\n                name=\"message\"\n                value={formData.message || ''}\n                onChange={handleMessageChange}\n                rows={3}\n                placeholder={t('organization.join.messagePlaceholder')}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"flex justify-end pt-4 gap-2\">\n              <button\n                type=\"button\"\n                onClick={handleClose}\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                title={t('common.cancel')}\n              >\n                <XMarkIcon className=\"h-5 w-5\" />\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                title={loading ? t('organization.join.sending') : t('organization.join.send')}\n              >\n                {loading ? (\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                ) : (\n                  <CheckIcon className=\"h-5 w-5\" />\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default JoinOrganizationModal; ","import React, { useState, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Dialog } from '@headlessui/react';\r\nimport { XMarkIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\r\nimport { organizationService } from '../../services/organizationService.ts';\r\nimport { UpdateOrganizationRequest, Organization } from '../../types/organization.ts';\r\nimport useMessage from '../../hooks/useMessage.ts';\r\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\r\nimport { useLanguage } from '../../hooks/useLanguage.ts';\r\n\r\ninterface Props {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSuccess?: () => void;\r\n  organization: Organization | null;\r\n}\r\n\r\nconst EditOrganizationModal: React.FC<Props> = ({ isOpen, onClose, onSuccess, organization }) => {\r\n  const { t } = useTranslation();\r\n  const [formData, setFormData] = useState<UpdateOrganizationRequest>({\r\n    displayName: '',\r\n    domain: '',\r\n    logo: '',\r\n    settings: {}\r\n  });\r\n  const [selectedCountry, setSelectedCountry] = useState<string>('');\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\r\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\r\n  const { openSidepane, closeSidepane } = useSidepane();\r\n  const { showMessage } = useMessage();\r\n  const { organizationLanguage, setOrganizationLanguage } = useLanguage();\r\n  const [selectedOrgLanguage, setSelectedOrgLanguage] = useState<string>('');\r\n  const [savingOrgLanguage, setSavingOrgLanguage] = useState<boolean>(false);\r\n\r\n  // Lnder-Liste\r\n  const COUNTRIES = [\r\n    { code: 'CO', name: t('countries.CO') },\r\n    { code: 'CH', name: t('countries.CH') },\r\n    { code: 'DE', name: t('countries.DE') },\r\n    { code: 'AT', name: t('countries.AT') }\r\n  ];\r\n\r\n  // Lade Organisations-Daten wenn Modal geffnet wird\r\n  useEffect(() => {\r\n    if (isOpen && organization) {\r\n      const orgSettings = organization.settings || {};\r\n      setFormData({\r\n        displayName: organization.displayName || '',\r\n        domain: organization.domain || '',\r\n        logo: organization.logo || '',\r\n        settings: orgSettings\r\n      });\r\n      \r\n      // Setze Land aus settings\r\n      setSelectedCountry(orgSettings.country || '');\r\n      \r\n      // Lade Organisation-Sprache\r\n      const loadOrgLanguage = async () => {\r\n        try {\r\n          const langResponse = await organizationService.getOrganizationLanguage();\r\n          setSelectedOrgLanguage(langResponse.language || '');\r\n        } catch (langError) {\r\n          console.error('Fehler beim Laden der Organisation-Sprache:', langError);\r\n          setSelectedOrgLanguage('');\r\n        }\r\n      };\r\n      \r\n      loadOrgLanguage();\r\n    }\r\n  }, [isOpen, organization, t]);\r\n\r\n  useEffect(() => {\r\n    const checkScreenSize = () => {\r\n      setIsMobile(window.innerWidth < 640);\r\n      setIsLargeScreen(window.innerWidth > 1070);\r\n    };\r\n    \r\n    checkScreenSize();\r\n    window.addEventListener('resize', checkScreenSize);\r\n    \r\n    return () => {\r\n      window.removeEventListener('resize', checkScreenSize);\r\n    };\r\n  }, []);\r\n\r\n  // Sidepane-Status verwalten\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      openSidepane();\r\n    } else {\r\n      closeSidepane();\r\n    }\r\n    \r\n    return () => {\r\n      closeSidepane();\r\n    };\r\n  }, [isOpen, openSidepane, closeSidepane]);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    const { name, value } = e.target;\r\n    if (name === 'country') {\r\n      setSelectedCountry(value);\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        settings: {\r\n          ...(prev.settings || {}),\r\n          ...(value ? { country: value } : {})\r\n        }\r\n      }));\r\n    } else {\r\n      setFormData(prev => ({ ...prev, [name]: value }));\r\n    }\r\n    // Fehler fr dieses Feld lschen\r\n    if (errors[name]) {\r\n      setErrors(prev => ({ ...prev, [name]: '' }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      setLoading(true);\r\n      setErrors({});\r\n      await organizationService.updateOrganization(formData);\r\n      showMessage(t('organization.updateSuccess'), 'success');\r\n      onClose();\r\n      if (onSuccess) {\r\n        onSuccess();\r\n      }\r\n    } catch (err: any) {\r\n      const errorMessage = err.response?.data?.message || t('organization.updateError');\r\n      showMessage(errorMessage, 'error');\r\n      setErrors({ submit: errorMessage });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    // Formular zurcksetzen\r\n    if (organization) {\r\n      const orgSettings = organization.settings || {};\r\n      setFormData({\r\n        displayName: organization.displayName || '',\r\n        domain: organization.domain || '',\r\n        logo: organization.logo || '',\r\n        settings: orgSettings\r\n      });\r\n      setSelectedCountry(orgSettings.country || '');\r\n    }\r\n    setErrors({});\r\n    onClose();\r\n  };\r\n\r\n  // Fr Mobile (unter 640px) - klassisches Modal\r\n  if (isMobile) {\r\n    return (\r\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\r\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\r\n        \r\n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\r\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\r\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\r\n                {t('organization.edit.title')}\r\n              </Dialog.Title>\r\n              <button\r\n                onClick={handleClose}\r\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n              >\r\n                <XMarkIcon className=\"h-6 w-6\" />\r\n              </button>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} className=\"p-4\">\r\n              {errors.submit && (\r\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\r\n                  {errors.submit}\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label \r\n                    htmlFor=\"displayName\" \r\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                  >\r\n                    {t('organization.displayName')}\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"displayName\"\r\n                    name=\"displayName\"\r\n                    value={formData.displayName || ''}\r\n                    onChange={handleChange}\r\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\r\n                      errors.displayName \r\n                        ? 'border-red-300 dark:border-red-600' \r\n                        : 'border-gray-300 dark:border-gray-600'\r\n                    }`}\r\n                  />\r\n                  {errors.displayName && (\r\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label \r\n                    htmlFor=\"domain\" \r\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                  >\r\n                    {t('organization.domain')}\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"domain\"\r\n                    name=\"domain\"\r\n                    value={formData.domain || ''}\r\n                    onChange={handleChange}\r\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label \r\n                    htmlFor=\"logo\" \r\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                  >\r\n                    {t('organization.logoUrl')}\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"logo\"\r\n                    name=\"logo\"\r\n                    value={formData.logo || ''}\r\n                    onChange={handleChange}\r\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\r\n                  />\r\n                </div>\r\n\r\n                {/* Land */}\r\n                <div className=\"border-t pt-4\">\r\n                  <label \r\n                    htmlFor=\"country\" \r\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                  >\r\n                    {t('organization.country')}\r\n                  </label>\r\n                  <select\r\n                    id=\"country\"\r\n                    name=\"country\"\r\n                    value={selectedCountry}\r\n                    onChange={handleChange}\r\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\r\n                  >\r\n                    <option value=\"\">{t('organization.selectCountry')}</option>\r\n                    {COUNTRIES.map((country) => (\r\n                      <option key={country.code} value={country.code}>\r\n                        {country.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                {/* Organisation-Sprache */}\r\n                <div className=\"border-t pt-4\">\r\n                  <label \r\n                    htmlFor=\"organizationLanguage\" \r\n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n                  >\r\n                    {t('organization.language')}\r\n                  </label>\r\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">\r\n                    {t('organization.languageDescription')}\r\n                  </p>\r\n                  <select\r\n                    id=\"organizationLanguage\"\r\n                    value={selectedOrgLanguage || organizationLanguage || ''}\r\n                    onChange={async (e) => {\r\n                      const newLanguage = e.target.value;\r\n                      setSelectedOrgLanguage(newLanguage);\r\n                      if (newLanguage && newLanguage !== organizationLanguage) {\r\n                        setSavingOrgLanguage(true);\r\n                        try {\r\n                          await setOrganizationLanguage(newLanguage);\r\n                          showMessage(t('common.save'), 'success');\r\n                        } catch (error) {\r\n                          console.error('Fehler beim Speichern der Organisation-Sprache:', error);\r\n                          showMessage(t('worktime.messages.orgLanguageError'), 'error');\r\n                        } finally {\r\n                          setSavingOrgLanguage(false);\r\n                        }\r\n                      }\r\n                    }}\r\n                    disabled={savingOrgLanguage || loading}\r\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed\"\r\n                  >\r\n                    <option value=\"\">{t('settings.useOrganizationLanguage')} ({t('worktime.language.fallback')}: {t('worktime.language.german')})</option>\r\n                    <option value=\"de\">{t('worktime.language.german')}</option>\r\n                    <option value=\"es\">{t('worktime.language.spanish')}</option>\r\n                    <option value=\"en\">{t('worktime.language.english')}</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex justify-end pt-4 gap-2\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleClose}\r\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\r\n                  title={t('common.cancel')}\r\n                >\r\n                  <XMarkIcon className=\"h-5 w-5\" />\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={loading}\r\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  title={loading ? t('organization.saving') : t('common.save')}\r\n                >\r\n                  {loading ? (\r\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n                  ) : (\r\n                    <CheckIcon className=\"h-5 w-5\" />\r\n                  )}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </Dialog.Panel>\r\n        </div>\r\n      </Dialog>\r\n    );\r\n  }\r\n\r\n  // Fr Desktop (ab 640px) - Sidepane\r\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\r\n  return (\r\n    <>\r\n      {/* Backdrop - nur wenn offen und <= 1070px */}\r\n      {isOpen && !isLargeScreen && (\r\n        <div \r\n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \r\n          aria-hidden=\"true\" \r\n          onClick={handleClose}\r\n          style={{\r\n            opacity: isOpen ? 1 : 0,\r\n            transition: 'opacity 300ms ease-out'\r\n          }}\r\n        />\r\n      )}\r\n      \r\n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\r\n      <div \r\n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\r\n        style={{\r\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\r\n          pointerEvents: isOpen ? 'auto' : 'none'\r\n        }}\r\n        aria-hidden={!isOpen}\r\n        role=\"dialog\"\r\n        aria-modal={isOpen}\r\n      >\r\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\r\n          <h2 className=\"text-lg font-semibold dark:text-white\">\r\n            {t('organization.edit.title')}\r\n          </h2>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n          >\r\n            <XMarkIcon className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\r\n          {errors.submit && (\r\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\r\n              {errors.submit}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div>\r\n              <label \r\n                htmlFor=\"displayName\" \r\n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n              >\r\n                {t('organization.displayName')}\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"displayName\"\r\n                name=\"displayName\"\r\n                value={formData.displayName || ''}\r\n                onChange={handleChange}\r\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\r\n                  errors.displayName \r\n                    ? 'border-red-300 dark:border-red-600' \r\n                    : 'border-gray-300 dark:border-gray-600'\r\n                }`}\r\n              />\r\n              {errors.displayName && (\r\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label \r\n                htmlFor=\"domain\" \r\n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n              >\r\n                {t('organization.domain')}\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"domain\"\r\n                name=\"domain\"\r\n                value={formData.domain || ''}\r\n                onChange={handleChange}\r\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label \r\n                htmlFor=\"logo\" \r\n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n              >\r\n                {t('organization.logoUrl')}\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"logo\"\r\n                name=\"logo\"\r\n                value={formData.logo || ''}\r\n                onChange={handleChange}\r\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\r\n              />\r\n            </div>\r\n\r\n            {/* Land */}\r\n            <div className=\"border-t pt-4\">\r\n              <label \r\n                htmlFor=\"country\" \r\n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n              >\r\n                {t('organization.country')}\r\n              </label>\r\n              <select\r\n                id=\"country\"\r\n                name=\"country\"\r\n                value={selectedCountry}\r\n                onChange={handleChange}\r\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\r\n              >\r\n                <option value=\"\">{t('organization.selectCountry')}</option>\r\n                {COUNTRIES.map((country) => (\r\n                  <option key={country.code} value={country.code}>\r\n                    {country.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {/* Organisation-Sprache */}\r\n            <div className=\"border-t pt-4\">\r\n              <label \r\n                htmlFor=\"organizationLanguage\" \r\n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\r\n              >\r\n                {t('organization.language')}\r\n              </label>\r\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">\r\n                {t('organization.languageDescription')}\r\n              </p>\r\n              <select\r\n                id=\"organizationLanguage\"\r\n                value={selectedOrgLanguage || organizationLanguage || ''}\r\n                onChange={async (e) => {\r\n                  const newLanguage = e.target.value;\r\n                  setSelectedOrgLanguage(newLanguage);\r\n                  if (newLanguage && newLanguage !== organizationLanguage) {\r\n                    setSavingOrgLanguage(true);\r\n                    try {\r\n                      await setOrganizationLanguage(newLanguage);\r\n                      showMessage(t('common.save'), 'success');\r\n                    } catch (error) {\r\n                      console.error('Fehler beim Speichern der Organisation-Sprache:', error);\r\n                      showMessage(t('worktime.messages.orgLanguageError'), 'error');\r\n                    } finally {\r\n                      setSavingOrgLanguage(false);\r\n                    }\r\n                  }\r\n                }}\r\n                disabled={savingOrgLanguage || loading}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed\"\r\n              >\r\n                <option value=\"\">{t('settings.useOrganizationLanguage')} ({t('worktime.language.fallback')}: {t('worktime.language.german')})</option>\r\n                <option value=\"de\">{t('worktime.language.german')}</option>\r\n                <option value=\"es\">{t('worktime.language.spanish')}</option>\r\n                <option value=\"en\">{t('worktime.language.english')}</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"flex justify-end pt-4 gap-2\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleClose}\r\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\r\n                title={t('common.cancel')}\r\n              >\r\n                <XMarkIcon className=\"h-5 w-5\" />\r\n              </button>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                title={loading ? t('organization.saving') : t('common.save')}\r\n              >\r\n                {loading ? (\r\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n                ) : (\r\n                  <CheckIcon className=\"h-5 w-5\" />\r\n                )}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default EditOrganizationModal;\r\n\r\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { XMarkIcon, ArrowPathIcon, FunnelIcon } from '@heroicons/react/24/outline';\r\nimport { organizationService } from '../../services/organizationService.ts';\r\nimport { OrganizationJoinRequest } from '../../types/organization.ts';\r\nimport useMessage from '../../hooks/useMessage.ts';\r\nimport { API_ENDPOINTS } from '../../config/api.ts';\r\nimport FilterPane from '../FilterPane.tsx';\r\nimport SavedFilterTags from '../SavedFilterTags.tsx';\r\nimport { FilterCondition } from '../FilterRow.tsx';\r\nimport axiosInstance from '../../config/axios.ts';\r\n\r\n// Status-Badge Funktionen\r\nconst getStatusColor = (status: string) => {\r\n  switch (status) {\r\n    case 'pending':\r\n      return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300';\r\n    case 'approved':\r\n      return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300';\r\n    case 'rejected':\r\n      return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300';\r\n    case 'withdrawn':\r\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n    default:\r\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n  }\r\n};\r\n\r\nconst getStatusText = (status: string, t: any) => {\r\n  switch (status) {\r\n    case 'pending':\r\n      return t('joinRequestsList.status.pending');\r\n    case 'approved':\r\n      return t('joinRequestsList.status.approved');\r\n    case 'rejected':\r\n      return t('joinRequestsList.status.rejected');\r\n    case 'withdrawn':\r\n      return t('joinRequestsList.status.withdrawn');\r\n    default:\r\n      return status;\r\n  }\r\n};\r\n\r\nconst MY_JOIN_REQUESTS_TABLE_ID = 'my-join-requests-table';\r\n\r\nconst MyJoinRequestsList: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  const [joinRequests, setJoinRequests] = useState<OrganizationJoinRequest[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isFilterPanelOpen, setIsFilterPanelOpen] = useState<boolean>(false);\r\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\r\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\r\n  const [searchTerm, setSearchTerm] = useState<string>('');\r\n  const { showMessage } = useMessage();\r\n  const mountedRef = useRef(true);\r\n  const [withdrawingId, setWithdrawingId] = useState<number | null>(null);\r\n  \r\n  // Filter State Management (Controlled Mode)\r\n  const [activeFilterName, setActiveFilterName] = useState<string>('Alle');\r\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      mountedRef.current = false;\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log('MyJoinRequestsList: useEffect called - component mounted');\r\n    \r\n    // WICHTIG: State beim Mount zurcksetzen, um Caching zwischen Usern zu vermeiden\r\n    console.log('MyJoinRequestsList: Resetting state on mount to prevent data leaks');\r\n    setJoinRequests([]);\r\n    setError(null);\r\n    setLoading(true);\r\n    \r\n    let isMounted = true;\r\n    \r\n    const fetchMyJoinRequests = async () => {\r\n      if (!isMounted) {\r\n        console.log('MyJoinRequestsList: Component unmounted, skipping fetch');\r\n        return;\r\n      }\r\n      \r\n      console.log('MyJoinRequestsList: Starting fetch');\r\n      \r\n      // Timeout nach 10 Sekunden\r\n      const timeoutId = setTimeout(() => {\r\n        if (isMounted) {\r\n          console.error('Request timeout after 10 seconds');\r\n          setError('Anfrage dauert zu lange. Bitte Seite neu laden.');\r\n          setLoading(false);\r\n        }\r\n      }, 10000);\r\n      \r\n      try {\r\n        console.log('MyJoinRequestsList: Setting loading to true');\r\n        setLoading(true);\r\n        setError(null);\r\n        \r\n        // Debug: Log die URL die aufgerufen wird\r\n        console.log('MyJoinRequestsList: Fetching my join requests from:', API_ENDPOINTS.ORGANIZATIONS.MY_JOIN_REQUESTS);\r\n        \r\n        const requests = await organizationService.getMyJoinRequests();\r\n        \r\n        console.log('MyJoinRequestsList: Received requests:', requests);\r\n        console.log('MyJoinRequestsList: Requests type:', typeof requests);\r\n        console.log('MyJoinRequestsList: Requests isArray:', Array.isArray(requests));\r\n        console.log('MyJoinRequestsList: Requests length:', requests?.length || 0);\r\n        \r\n        // SICHERHEIT: Validiere, dass alle Anfragen wirklich Arrays sind\r\n        if (!Array.isArray(requests)) {\r\n          console.error(' MyJoinRequestsList: Response is not an array!', requests);\r\n          throw new Error('Ungltige Antwort vom Server');\r\n        }\r\n        \r\n        clearTimeout(timeoutId);\r\n        \r\n        // State immer setzen, auch wenn Component unmounted ist\r\n        // (React kann den State trotzdem setzen, wenn Component wieder gemountet wird)\r\n        if (isMounted) {\r\n          console.log('MyJoinRequestsList: Setting joinRequests state');\r\n          setJoinRequests(requests);\r\n          console.log('MyJoinRequestsList: State updated with', requests.length, 'requests');\r\n        } else {\r\n          console.log('MyJoinRequestsList: Component was unmounted, but setting state anyway');\r\n          setJoinRequests(requests);\r\n        }\r\n      } catch (err: any) {\r\n        clearTimeout(timeoutId);\r\n        \r\n        if (!isMounted) {\r\n          console.log('MyJoinRequestsList: Component unmounted during error, skipping error handling');\r\n          return;\r\n        }\r\n        \r\n        console.error('MyJoinRequestsList: Error fetching my join requests:', err);\r\n        console.error('MyJoinRequestsList: Error response:', err.response);\r\n        console.error('MyJoinRequestsList: Error status:', err.response?.status);\r\n        console.error('MyJoinRequestsList: Error data:', err.response?.data);\r\n        \r\n        const errorMessage = err.response?.data?.message || err.message || t('myJoinRequests.loadError');\r\n        setError(errorMessage);\r\n        setTimeout(() => {\r\n          showMessage(errorMessage, 'error');\r\n        }, 0);\r\n      } finally {\r\n        if (isMounted) {\r\n          console.log('MyJoinRequestsList: Setting loading to false');\r\n          setLoading(false);\r\n        } else {\r\n          // Auch wenn unmounted, loading auf false setzen\r\n          console.log('MyJoinRequestsList: Component unmounted, but setting loading to false anyway');\r\n          setLoading(false);\r\n        }\r\n      }\r\n    };\r\n\r\n    // IMMER neu laden beim Mount (auch beim Tab-Wechsel zurck)\r\n    fetchMyJoinRequests();\r\n    \r\n    return () => {\r\n      console.log('MyJoinRequestsList: useEffect cleanup - component unmounting');\r\n      isMounted = false;\r\n      mountedRef.current = false;\r\n      // State beim Unmount zurcksetzen\r\n      setJoinRequests([]);\r\n      setError(null);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const handleWithdraw = async (requestId: number) => {\r\n    if (!window.confirm(t('myJoinRequests.confirmWithdraw'))) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setWithdrawingId(requestId);\r\n      await organizationService.withdrawJoinRequest(requestId);\r\n      \r\n      // Update local state\r\n      setJoinRequests(prev => \r\n        prev.map(req => \r\n          req.id === requestId \r\n            ? { ...req, status: 'withdrawn' as const, processedAt: new Date().toISOString() }\r\n            : req\r\n        )\r\n      );\r\n      \r\n      showMessage(t('myJoinRequests.withdrawSuccess'), 'success');\r\n    } catch (err: any) {\r\n      const errorMessage = err.response?.data?.message || t('myJoinRequests.withdrawError');\r\n      showMessage(errorMessage, 'error');\r\n    } finally {\r\n      setWithdrawingId(null);\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('de-DE', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  // Filter-Funktionen\r\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\r\n    setFilterConditions(conditions);\r\n    setFilterLogicalOperators(operators);\r\n  };\r\n\r\n  const resetFilterConditions = () => {\r\n    setFilterConditions([]);\r\n    setFilterLogicalOperators([]);\r\n    setActiveFilterName('');\r\n    setSelectedFilterId(null);\r\n  };\r\n\r\n  // Filter Change Handler (Controlled Mode)\r\n  const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\r\n    setActiveFilterName(name);\r\n    setSelectedFilterId(id);\r\n    applyFilterConditions(conditions, operators);\r\n  };\r\n\r\n  const getActiveFilterCount = () => {\r\n    return filterConditions.length;\r\n  };\r\n\r\n  // Initialer Default-Filter setzen (Controlled Mode)\r\n  useEffect(() => {\r\n    const setInitialFilter = async () => {\r\n      try {\r\n        const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(MY_JOIN_REQUESTS_TABLE_ID));\r\n        const filters = response.data;\r\n        \r\n        const alleFilter = filters.find((filter: any) => filter.name === 'Alle');\r\n        if (alleFilter) {\r\n          setActiveFilterName('Alle');\r\n          setSelectedFilterId(alleFilter.id);\r\n          applyFilterConditions(alleFilter.conditions, alleFilter.operators);\r\n        }\r\n      } catch (error) {\r\n        console.error('Fehler beim Setzen des initialen Filters:', error);\r\n      }\r\n    };\r\n\r\n    setInitialFilter();\r\n  }, []);\r\n\r\n  // Standard-Filter erstellen und speichern\r\n  useEffect(() => {\r\n    const createStandardFilters = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        \r\n        if (!token) {\r\n          console.error('Nicht authentifiziert');\r\n          return;\r\n        }\r\n\r\n        // Prfen, ob die Standard-Filter bereits existieren\r\n        const existingFiltersResponse = await axiosInstance.get(\r\n          API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(MY_JOIN_REQUESTS_TABLE_ID)\r\n        );\r\n\r\n        const existingFilters = existingFiltersResponse.data || [];\r\n        const alleFilterExists = existingFilters.some((filter: any) => filter.name === 'Alle');\r\n\r\n        // Erstelle \"Alle\"-Filter, wenn er noch nicht existiert\r\n        if (!alleFilterExists) {\r\n          const alleFilter = {\r\n            tableId: MY_JOIN_REQUESTS_TABLE_ID,\r\n            name: 'Alle',\r\n            conditions: [],\r\n            operators: []\r\n          };\r\n\r\n          await axiosInstance.post(\r\n            API_ENDPOINTS.SAVED_FILTERS.BASE,\r\n            alleFilter\r\n          );\r\n          console.log('Alle-Filter fr Meine Beitrittsanfragen erstellt');\r\n        }\r\n      } catch (error) {\r\n        console.error('Fehler beim Erstellen der Standard-Filter:', error);\r\n      }\r\n    };\r\n\r\n    createStandardFilters();\r\n  }, []);\r\n\r\n  // Gefilterte Join-Requests\r\n  const filteredJoinRequests = useMemo(() => {\r\n    let filtered = [...joinRequests];\r\n\r\n    // Suchfeld-Filter\r\n    if (searchTerm) {\r\n      const searchLower = searchTerm.toLowerCase();\r\n      filtered = filtered.filter(request => {\r\n        const orgName = (request.organization.displayName || request.organization.name || '').toLowerCase();\r\n        const message = request.message?.toLowerCase() || '';\r\n        return orgName.includes(searchLower) || message.includes(searchLower);\r\n      });\r\n    }\r\n\r\n    // Filter-Bedingungen aus FilterPane\r\n    if (filterConditions.length > 0) {\r\n      filtered = filterConditions.reduce((acc, condition, index) => {\r\n        if (!condition.column || condition.value === null || condition.value === '') {\r\n          return acc;\r\n        }\r\n\r\n        const operator = condition.operator;\r\n        const value = condition.value;\r\n\r\n        return acc.filter(request => {\r\n          switch (condition.column) {\r\n            case 'organization':\r\n              const orgName = (request.organization.displayName || request.organization.name || '').toLowerCase();\r\n              const searchValue = String(value).toLowerCase();\r\n              \r\n              if (operator === 'contains') {\r\n                return orgName.includes(searchValue);\r\n              } else if (operator === 'equals') {\r\n                return orgName === searchValue;\r\n              } else if (operator === 'startsWith') {\r\n                return orgName.startsWith(searchValue);\r\n              }\r\n              return false;\r\n\r\n            case 'message':\r\n              const message = request.message?.toLowerCase() || '';\r\n              const msgValue = String(value).toLowerCase();\r\n              \r\n              if (operator === 'contains') {\r\n                return message.includes(msgValue);\r\n              } else if (operator === 'equals') {\r\n                return message === msgValue;\r\n              } else if (operator === 'startsWith') {\r\n                return message.startsWith(msgValue);\r\n              }\r\n              return false;\r\n\r\n            case 'status':\r\n              if (operator === 'equals') {\r\n                return request.status === value;\r\n              }\r\n              return false;\r\n\r\n            default:\r\n              return true;\r\n          }\r\n        });\r\n      }, filtered);\r\n    }\r\n\r\n    return filtered;\r\n  }, [joinRequests, searchTerm, filterConditions, filterLogicalOperators]);\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\r\n      {/* Titelzeile mit Icon, Suchfeld, Filter-Button */}\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h2 className=\"text-xl font-semibold dark:text-white\">\r\n          {t('myJoinRequests.title')}\r\n        </h2>\r\n        \r\n        <div className=\"flex items-center gap-1.5\">\r\n          {/* Suchfeld */}\r\n          <input\r\n            type=\"text\"\r\n            placeholder={t('common.search') || 'Suchen...'}\r\n            className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n          />\r\n\r\n          {/* Filter-Button */}\r\n          <button\r\n            className={`p-2 rounded-md border ${getActiveFilterCount() > 0 ? 'border-blue-300 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700'} relative`}\r\n            onClick={() => setIsFilterPanelOpen(!isFilterPanelOpen)}\r\n            title={t('common.filter')}\r\n          >\r\n            <FunnelIcon className=\"h-5 w-5\" />\r\n            {getActiveFilterCount() > 0 && (\r\n              <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center\">\r\n                {getActiveFilterCount()}\r\n              </span>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filter-Panel */}\r\n      {isFilterPanelOpen && (\r\n        <div className=\"mb-4\">\r\n          <FilterPane\r\n            columns={[\r\n              { id: 'organization', label: t('myJoinRequests.filter.organization') || 'Organisation' },\r\n              { id: 'message', label: t('joinRequestsList.filter.message') },\r\n              { id: 'status', label: t('joinRequestsList.status.title') || 'Status' }\r\n            ]}\r\n            onApply={applyFilterConditions}\r\n            onReset={resetFilterConditions}\r\n            savedConditions={filterConditions}\r\n            savedOperators={filterLogicalOperators}\r\n            tableId={MY_JOIN_REQUESTS_TABLE_ID}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* Gespeicherte Filter als Tags anzeigen */}\r\n      <SavedFilterTags\r\n        tableId={MY_JOIN_REQUESTS_TABLE_ID}\r\n        onSelectFilter={applyFilterConditions}\r\n        onReset={resetFilterConditions}\r\n        activeFilterName={activeFilterName}\r\n        selectedFilterId={selectedFilterId}\r\n        onFilterChange={handleFilterChange}\r\n        defaultFilterName=\"Alle\"\r\n      />\r\n\r\n      {/* Error Display */}\r\n      {error && (\r\n        <div className=\"mb-4 p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {/* Loading State */}\r\n      {loading ? (\r\n        <div className=\"flex items-center justify-center py-8\">\r\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('myJoinRequests.loading')}</span>\r\n        </div>\r\n      ) : joinRequests.length === 0 ? (\r\n        <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\r\n          {t('myJoinRequests.noRequests')}\r\n        </div>\r\n      ) : (\r\n        /* Cards fr Join-Requests */\r\n        <div className=\"space-y-4\">\r\n          {filteredJoinRequests.map(request => (\r\n            <div\r\n              key={request.id}\r\n              className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\"\r\n            >\r\n              <div className=\"flex items-start justify-between\">\r\n                <div className=\"flex-1\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <div>\r\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\r\n                        {request.organization.displayName || request.organization.name}\r\n                      </h3>\r\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                        {formatDate(request.createdAt)}\r\n                      </p>\r\n                    </div>\r\n                    <span className={`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(request.status)}`}>\r\n                      {getStatusText(request.status, t)}\r\n                    </span>\r\n                  </div>\r\n\r\n                  {request.message && (\r\n                    <div className=\"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\r\n                      <p className=\"text-sm text-gray-700 dark:text-gray-300\">\r\n                        <span className=\"font-medium\">{t('joinRequestsList.filter.message')}:</span> {request.message}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n\r\n                  {request.response && (\r\n                    <div className=\"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-700\">\r\n                      <p className=\"text-sm text-blue-700 dark:text-blue-300\">\r\n                        <span className=\"font-medium\">{t('joinRequestsList.response')}:</span> {request.response}\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n\r\n                  {request.processor && (\r\n                    <div className=\"mt-2 text-sm text-gray-600 dark:text-gray-400\">\r\n                      {t('myJoinRequests.processedBy')}: {request.processor.firstName} {request.processor.lastName}\r\n                      {request.processedAt && ` - ${formatDate(request.processedAt)}`}\r\n                    </div>\r\n                  )}\r\n\r\n                  {request.status === 'pending' && (\r\n                    <div className=\"mt-4 flex items-center gap-2\">\r\n                      <button \r\n                        onClick={() => handleWithdraw(request.id)}\r\n                        disabled={withdrawingId === request.id}\r\n                        className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md dark:bg-red-700 dark:hover:bg-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 flex items-center disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                      >\r\n                        {withdrawingId === request.id ? (\r\n                          <>\r\n                            <ArrowPathIcon className=\"h-4 w-4 mr-1 animate-spin\" />\r\n                            {t('myJoinRequests.withdrawing')}\r\n                          </>\r\n                        ) : (\r\n                          <>\r\n                            <XMarkIcon className=\"h-4 w-4 mr-1\" />\r\n                            {t('myJoinRequests.withdraw')}\r\n                          </>\r\n                        )}\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyJoinRequestsList;\r\n\r\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { BuildingOfficeIcon, PlusIcon, UserPlusIcon, UserGroupIcon, ShieldCheckIcon, EnvelopeIcon, ChartBarIcon, PencilIcon } from '@heroicons/react/24/outline';\nimport { useTranslation } from 'react-i18next';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { Organization } from '../../types/organization.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useOrganization } from '../../contexts/OrganizationContext.tsx';\nimport CreateOrganizationModal from './CreateOrganizationModal.tsx';\nimport JoinOrganizationModal from './JoinOrganizationModal.tsx';\nimport EditOrganizationModal from './EditOrganizationModal.tsx';\nimport MyJoinRequestsList from './MyJoinRequestsList.tsx';\n\ninterface OrganizationStats {\n  currentUsers: number;\n  maxUsers: number;\n  availableSlots: number;\n  utilizationPercent: number;\n  _count: {\n    roles: number;\n    joinRequests: number;\n    invitations: number;\n  };\n}\n\nconst OrganizationSettings: React.FC = () => {\n  const [organization, setOrganization] = useState<Organization | null>(null);\n  const [stats, setStats] = useState<OrganizationStats | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [loadingStats, setLoadingStats] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState<boolean>(false);\n  const [isJoinModalOpen, setIsJoinModalOpen] = useState<boolean>(false);\n  const [isEditModalOpen, setIsEditModalOpen] = useState<boolean>(false);\n  const { canViewOrganization, canManageOrganization, loading: permissionsLoading } = usePermissions();\n  const { showMessage } = useMessage();\n  const { t } = useTranslation();\n  const { refreshOrganization } = useOrganization();\n\n  const fetchOrganization = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const org = await organizationService.getCurrentOrganization();\n      setOrganization(org);\n      \n      // Statistiken laden\n      try {\n        setLoadingStats(true);\n        const statsData = await organizationService.getOrganizationStats();\n        setStats(statsData);\n      } catch (statsErr: any) {\n        console.error('Fehler beim Laden der Statistiken:', statsErr);\n        // Statistiken-Fehler nicht kritisch, keine Error-Message\n      } finally {\n        setLoadingStats(false);\n      }\n    } catch (err: any) {\n      // Prfe ob es ein 404-Fehler ist (keine Organisation gefunden)\n      if (err.response?.status === 404 && err.response?.data?.hasOrganization === false) {\n        // Benutzer hat keine Organisation - das ist OK, setze Error aber nicht kritisch\n        // Verwende IMMER die bersetzung, nicht die Backend-Nachricht\n        setError(t('organization.notFound'));\n        setOrganization(null);\n        // Zeige Info-Message statt Error\n        showMessage(t('organization.notFound'), 'info');\n      } else {\n        // Andere Fehler - kritisch\n        const errorMessage = err.response?.data?.message || t('organization.loadError');\n        setError(errorMessage);\n        showMessage(errorMessage, 'error');\n      }\n    } finally {\n      setLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const hasInitialLoadRef = useRef(false);\n\n  useEffect(() => {\n    // Warte bis Berechtigungen geladen sind\n    if (permissionsLoading) {\n      return;\n    }\n\n    // Nur einmal beim initialen Load ausfhren\n    if (hasInitialLoadRef.current) {\n      return;\n    }\n\n    const hasPermission = canViewOrganization();\n    if (hasPermission) {\n      hasInitialLoadRef.current = true;\n      fetchOrganization();\n    } else {\n      setError(t('organization.noPermission'));\n      setLoading(false);\n      hasInitialLoadRef.current = true;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [permissionsLoading]);\n\n  const handleEditSuccess = () => {\n    fetchOrganization();\n    // Aktualisiere auch den OrganizationContext\n    refreshOrganization();\n  };\n\n  if (permissionsLoading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('common.loadingPermissions')}</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (!canViewOrganization()) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n          <div className=\"p-4 text-red-600 dark:text-red-400\">\n          {t('organization.noPermission')}\n        </div>\n      </div>\n    );\n  }\n\n  const handleCreateSuccess = () => {\n    fetchOrganization();\n  };\n\n  const handleJoinSuccess = () => {\n    // Nach Beitritt: Organisation neu laden\n    fetchOrganization();\n  };\n\n  return (\n    <>\n      <div className=\"space-y-4\">\n        {/* Titelzeile mit Action-Buttons */}\n        <div className=\"flex items-center mb-4 sm:mb-4\">\n          {/* Linke Seite: Action-Buttons */}\n          <div className=\"flex items-center\">\n            {/* Button: Neue Organisation erstellen - immer sichtbar (nicht nur fr Admins) */}\n            <button\n              onClick={() => setIsCreateModalOpen(true)}\n              className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n              style={{ width: '30.19px', height: '30.19px' }}\n              title={t('organization.createOrganization')}\n              aria-label={t('organization.createOrganization')}\n            >\n              <PlusIcon className=\"h-4 w-4\" />\n            </button>\n            \n            {/* Button: Organisation beitreten - immer sichtbar */}\n            <button\n              onClick={() => setIsJoinModalOpen(true)}\n              className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center ml-2\"\n              style={{ width: '30.19px', height: '30.19px' }}\n              title={t('organization.joinOrganization')}\n              aria-label={t('organization.joinOrganization')}\n            >\n              <UserPlusIcon className=\"h-4 w-4\" />\n            </button>\n          </div>\n        </div>\n\n      {/* Loading State */}\n      {loading ? (\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('common.loadingOrganization')}</span>\n        </div>\n      ) : (\n        <>\n          {/* Error/Info Display */}\n          {error && (\n            <div className={`mb-4 p-4 border rounded ${\n              !organization \n                ? 'bg-blue-50 dark:bg-blue-900/30 border-blue-400 dark:border-blue-700 text-blue-700 dark:text-blue-300'\n                : 'bg-red-100 dark:bg-red-900 border-red-400 dark:border-red-700 text-red-700 dark:text-red-300'\n            }`}>\n              <div className=\"flex items-start\">\n                <div className=\"flex-shrink-0\">\n                  {!organization ? (\n                    <UserGroupIcon className=\"h-5 w-5\" />\n                  ) : (\n                    <span className=\"text-red-600 dark:text-red-400\"></span>\n                  )}\n                </div>\n                <div className=\"ml-3 flex-1\">\n                  <p className=\"font-medium\">{error}</p>\n                  {!organization && (\n                    <p className=\"mt-2 text-sm\">{t('organization.createOrJoinHint')}</p>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Card-Ansicht - nur anzeigen wenn Organisation existiert */}\n          {organization ? (\n            <>\n            {/* Card mit Organisations-Infos */}\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-4\">\n            <div>\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white flex items-center\">\n                        <BuildingOfficeIcon className=\"h-5 w-5 mr-2\" />\n                        {organization.displayName || organization.name}\n                      </h3>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n                        {organization.domain || t('organization.noDomain')}\n                      </p>\n            </div>\n                    {canManageOrganization() && (\n                      <button\n                        onClick={() => setIsEditModalOpen(true)}\n                        className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n                        title={t('organization.edit.title')}\n                      >\n                        <PencilIcon className=\"h-5 w-5\" />\n                      </button>\n                    )}\n            </div>\n\n                  {/* Organisations-Infos */}\n                  <div className=\"space-y-3\">\n                    {organization.subscriptionPlan && (\n            <div>\n                        <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">{t('organization.subscriptionPlan')}:</span>\n                        <span className=\"ml-2 text-sm text-gray-900 dark:text-white capitalize\">{organization.subscriptionPlan}</span>\n              </div>\n            )}\n              </div>\n\n                  {/* Statistiken direkt in der Card */}\n          {stats && (\n                    <>\n            <div className=\"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700\">\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">{t('organization.statistics')}</h3>\n              {loadingStats ? (\n                <div className=\"flex items-center justify-center py-4\">\n                  <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-2\"></div>\n                  <span className=\"text-sm text-gray-500 dark:text-gray-400\">{t('common.loadingStatistics')}</span>\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {/* Benutzer Card */}\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0 bg-blue-100 dark:bg-blue-900/30 rounded-lg p-3\">\n                        <UserGroupIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.users')}</p>\n                        <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                          {stats.currentUsers} / {stats.maxUsers}\n                        </p>\n                            {stats.utilizationPercent !== undefined && (\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                            {stats.utilizationPercent}% {t('organization.utilizationPercent')}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Rollen Card */}\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0 bg-purple-100 dark:bg-purple-900/30 rounded-lg p-3\">\n                        <ShieldCheckIcon className=\"h-6 w-6 text-purple-600 dark:text-purple-400\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.roles')}</p>\n                        <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                          {stats._count.roles}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Beitrittsanfragen Card */}\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg p-3\">\n                        <EnvelopeIcon className=\"h-6 w-6 text-yellow-600 dark:text-yellow-400\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.joinRequests')}</p>\n                        <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                          {stats._count.joinRequests}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Einladungen Card */}\n                  {stats._count.invitations !== undefined && (\n                    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                      <div className=\"flex items-center\">\n                        <div className=\"flex-shrink-0 bg-green-100 dark:bg-green-900/30 rounded-lg p-3\">\n                          <EnvelopeIcon className=\"h-6 w-6 text-green-600 dark:text-green-400\" />\n                        </div>\n                        <div className=\"ml-4\">\n                          <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.invitations')}</p>\n                          <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                            {stats._count.invitations}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Auslastung Card */}\n                  {stats.utilizationPercent !== undefined && (\n                    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                      <div className=\"flex items-center\">\n                        <div className=\"flex-shrink-0 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg p-3\">\n                          <ChartBarIcon className=\"h-6 w-6 text-indigo-600 dark:text-indigo-400\" />\n                        </div>\n                        <div className=\"ml-4\">\n                          <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.utilization')}</p>\n                          <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                            {stats.utilizationPercent}%\n                          </p>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                            {stats.availableSlots} {t('organization.availableSlots')}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n                    </>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            </>\n          ) : (\n            /* Keine Organisation - zeige Hinweis */\n            <div className=\"text-center py-8\">\n            <UserGroupIcon className=\"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500 mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n              {t('organization.notFound')}\n            </h3>\n            <p className=\"text-gray-600 dark:text-gray-400\">\n              {t('organization.createOrJoinHint')}\n            </p>\n          </div>\n        )}\n        </>\n      )}\n      </div>\n\n      {/* Meine Beitrittsanfragen - immer anzeigen */}\n      <MyJoinRequestsList />\n\n      {/* Modals */}\n      <CreateOrganizationModal\n        isOpen={isCreateModalOpen}\n        onClose={() => setIsCreateModalOpen(false)}\n        onSuccess={handleCreateSuccess}\n      />\n\n      <JoinOrganizationModal\n        isOpen={isJoinModalOpen}\n        onClose={() => setIsJoinModalOpen(false)}\n        onSuccess={handleJoinSuccess}\n      />\n\n      <EditOrganizationModal\n        isOpen={isEditModalOpen}\n        onClose={() => setIsEditModalOpen(false)}\n        onSuccess={handleEditSuccess}\n        organization={organization}\n      />\n    </>\n  );\n};\n\nexport default OrganizationSettings; ","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon, XCircleIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { OrganizationJoinRequest, ProcessJoinRequestRequest } from '../../types/organization.ts';\nimport { roleApi } from '../../api/apiClient.ts';\nimport { Role } from '../../types/interfaces.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  joinRequest: OrganizationJoinRequest | null;\n  onSuccess: () => void;\n}\n\nconst ProcessJoinRequestModal: React.FC<Props> = ({ isOpen, onClose, joinRequest, onSuccess }) => {\n  const { t } = useTranslation();\n  const [action, setAction] = useState<'approve' | 'reject'>('approve');\n  const [roleId, setRoleId] = useState<number | null>(null);\n  const [response, setResponse] = useState<string>('');\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [loadingRoles, setLoadingRoles] = useState<boolean>(false);\n  const [saving, setSaving] = useState<boolean>(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    \n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  useEffect(() => {\n    if (isOpen && joinRequest) {\n      // Reset form when modal opens\n      setAction('approve');\n      setRoleId(null);\n      setResponse('');\n      setErrors({});\n      \n      // Load roles for the organization\n      if (joinRequest.organizationId) {\n        fetchRoles();\n      }\n    }\n  }, [isOpen, joinRequest]);\n\n  const fetchRoles = async () => {\n    try {\n      setLoadingRoles(true);\n      const response = await roleApi.getAll();\n      if (response.data && Array.isArray(response.data)) {\n        setRoles(response.data);\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Laden der Rollen:', err);\n      showMessage(t('joinRequest.loadRolesError'), 'error');\n    } finally {\n      setLoadingRoles(false);\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    \n    if (action === 'approve' && !roleId) {\n      newErrors.roleId = t('joinRequest.selectRoleError');\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      showMessage(t('joinRequest.fillRequired'), 'error');\n      return;\n    }\n    \n    if (!joinRequest) {\n      return;\n    }\n    \n    try {\n      setSaving(true);\n      const data: ProcessJoinRequestRequest = {\n        action,\n        response: response.trim() || undefined,\n        roleId: action === 'approve' ? roleId || undefined : undefined\n      };\n      \n      await organizationService.processJoinRequest(joinRequest.id, data);\n      showMessage(\n        action === 'approve' ? t('joinRequest.approveSuccess') : t('joinRequest.rejectSuccess'),\n        'success'\n      );\n      \n      // Reset form\n      setAction('approve');\n      setRoleId(null);\n      setResponse('');\n      setErrors({});\n      \n      onClose();\n      onSuccess();\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('joinRequest.processError');\n      showMessage(errorMessage, 'error');\n      setErrors({ submit: errorMessage });\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleClose = () => {\n    setAction('approve');\n    setRoleId(null);\n    setResponse('');\n    setErrors({});\n    onClose();\n  };\n\n  if (!joinRequest) {\n    return null;\n  }\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('joinRequest.title')}\n              </Dialog.Title>\n              <button\n                onClick={handleClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-4\">\n              {errors.submit && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {errors.submit}\n                </div>\n              )}\n\n              <div className=\"space-y-4\">\n                {/* Antragsteller Info */}\n                <div className=\"p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\n                  <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">{t('joinRequest.applicant')}:</p>\n                  <p className=\"text-sm text-gray-900 dark:text-white\">\n                    {joinRequest.requester.firstName} {joinRequest.requester.lastName}\n                  </p>\n                  <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.requester.email}</p>\n                  {joinRequest.message && (\n                    <div className=\"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600\">\n                      <p className=\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">{t('joinRequest.message')}:</p>\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.message}</p>\n                    </div>\n                  )}\n                </div>\n\n                {/* Aktion (Genehmigen/Ablehnen) */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('joinRequest.actionRequired')}\n                  </label>\n                  <div className=\"flex gap-4 mt-2\">\n                    <label className=\"flex items-center\">\n                      <input\n                        type=\"radio\"\n                        value=\"approve\"\n                        checked={action === 'approve'}\n                        onChange={(e) => {\n                          setAction(e.target.value as 'approve' | 'reject');\n                          setErrors({});\n                        }}\n                        className=\"mr-2 text-blue-600 focus:ring-blue-500\"\n                      />\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300\">{t('joinRequest.approve')}</span>\n                    </label>\n                    <label className=\"flex items-center\">\n                      <input\n                        type=\"radio\"\n                        value=\"reject\"\n                        checked={action === 'reject'}\n                        onChange={(e) => {\n                          setAction(e.target.value as 'approve' | 'reject');\n                          setErrors({});\n                        }}\n                        className=\"mr-2 text-red-600 focus:ring-red-500\"\n                      />\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300\">{t('joinRequest.reject')}</span>\n                    </label>\n                  </div>\n                </div>\n\n                {/* Rollenauswahl (nur bei Genehmigung) */}\n                {action === 'approve' && (\n                  <div>\n                    <label \n                      htmlFor=\"roleId\" \n                      className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                    >\n                      {t('joinRequest.assignRole')}\n                    </label>\n                    {loadingRoles ? (\n                      <div className=\"flex items-center py-2\">\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"></div>\n                        <span className=\"text-sm text-gray-500 dark:text-gray-400\">{t('joinRequest.loadingRoles')}</span>\n                      </div>\n                    ) : (\n                      <select\n                        id=\"roleId\"\n                        value={roleId || ''}\n                        onChange={(e) => {\n                          setRoleId(Number(e.target.value) || null);\n                          if (errors.roleId) {\n                            setErrors(prev => ({ ...prev, roleId: '' }));\n                          }\n                        }}\n                        className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                          errors.roleId \n                            ? 'border-red-300 dark:border-red-600' \n                            : 'border-gray-300 dark:border-gray-600'\n                        }`}\n                      >\n                        <option value=\"\">{t('joinRequest.selectRole')}</option>\n                        {roles.map(role => (\n                          <option key={role.id} value={role.id}>\n                            {role.name} {role.description ? `- ${role.description}` : ''}\n                          </option>\n                        ))}\n                      </select>\n                    )}\n                    {errors.roleId && (\n                      <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.roleId}</p>\n                    )}\n                  </div>\n                )}\n\n                {/* Antwort-Message */}\n                <div>\n                  <label \n                    htmlFor=\"response\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('joinRequest.response')}\n                  </label>\n                  <textarea\n                    id=\"response\"\n                    value={response}\n                    onChange={(e) => setResponse(e.target.value)}\n                    rows={3}\n                    placeholder={t('joinRequest.addOptional', { type: action === 'approve' ? t('joinRequest.welcomeMessage') : t('joinRequest.rejectionReason') })}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                  title={t('joinRequest.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={saving}\n                  className={`p-2 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${\n                    action === 'approve'\n                      ? 'bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:ring-green-500'\n                      : 'bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 focus:ring-red-500'\n                  }`}\n                  title={saving ? (action === 'approve' ? t('joinRequest.approving') : t('joinRequest.rejecting')) : (action === 'approve' ? t('joinRequest.approve') : t('joinRequest.reject'))}\n                >\n                  {saving ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : action === 'approve' ? (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  ) : (\n                    <XCircleIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={handleClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('joinRequest.title')}\n          </h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {errors.submit && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {errors.submit}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {/* Antragsteller Info */}\n            <div className=\"p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\n              <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">{t('joinRequest.applicant')}:</p>\n              <p className=\"text-sm text-gray-900 dark:text-white\">\n                {joinRequest.requester.firstName} {joinRequest.requester.lastName}\n              </p>\n              <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.requester.email}</p>\n              {joinRequest.message && (\n                <div className=\"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600\">\n                  <p className=\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">{t('joinRequest.message')}:</p>\n                  <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.message}</p>\n                </div>\n              )}\n            </div>\n\n            {/* Aktion (Genehmigen/Ablehnen) */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('joinRequest.actionRequired')}\n              </label>\n              <div className=\"flex gap-4 mt-2\">\n                <label className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                    value=\"approve\"\n                    checked={action === 'approve'}\n                    onChange={(e) => {\n                      setAction(e.target.value as 'approve' | 'reject');\n                      setErrors({});\n                    }}\n                    className=\"mr-2 text-blue-600 focus:ring-blue-500\"\n                  />\n                  <span className=\"text-sm text-gray-700 dark:text-gray-300\">{t('joinRequest.approve')}</span>\n                </label>\n                <label className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                    value=\"reject\"\n                    checked={action === 'reject'}\n                    onChange={(e) => {\n                      setAction(e.target.value as 'approve' | 'reject');\n                      setErrors({});\n                    }}\n                    className=\"mr-2 text-red-600 focus:ring-red-500\"\n                  />\n                  <span className=\"text-sm text-gray-700 dark:text-gray-300\">{t('joinRequest.reject')}</span>\n                </label>\n              </div>\n            </div>\n\n            {/* Rollenauswahl (nur bei Genehmigung) */}\n            {action === 'approve' && (\n              <div>\n                <label \n                  htmlFor=\"roleId\" \n                  className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                >\n                  {t('joinRequest.assignRole')}\n                </label>\n                {loadingRoles ? (\n                  <div className=\"flex items-center py-2\">\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"></div>\n                    <span className=\"text-sm text-gray-500 dark:text-gray-400\">{t('joinRequest.loadingRoles')}</span>\n                  </div>\n                ) : (\n                  <select\n                    id=\"roleId\"\n                    value={roleId || ''}\n                    onChange={(e) => {\n                      setRoleId(Number(e.target.value) || null);\n                      if (errors.roleId) {\n                        setErrors(prev => ({ ...prev, roleId: '' }));\n                      }\n                    }}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.roleId \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  >\n                    <option value=\"\">{t('joinRequest.selectRole')}</option>\n                    {roles.map(role => (\n                      <option key={role.id} value={role.id}>\n                        {role.name} {role.description ? `- ${role.description}` : ''}\n                      </option>\n                    ))}\n                  </select>\n                )}\n                {errors.roleId && (\n                  <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.roleId}</p>\n                )}\n              </div>\n            )}\n\n            {/* Antwort-Message */}\n            <div>\n              <label \n                htmlFor=\"response\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('joinRequest.response')}\n              </label>\n              <textarea\n                id=\"response\"\n                value={response}\n                onChange={(e) => setResponse(e.target.value)}\n                rows={3}\n                placeholder={t('joinRequest.addOptional', { type: action === 'approve' ? t('joinRequest.welcomeMessage') : t('joinRequest.rejectionReason') })}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"flex justify-end pt-4 gap-2\">\n              <button\n                type=\"button\"\n                onClick={handleClose}\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                title={t('common.cancel')}\n              >\n                <XMarkIcon className=\"h-5 w-5\" />\n              </button>\n              <button\n                type=\"submit\"\n                disabled={saving}\n                className={`p-2 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${\n                  action === 'approve'\n                    ? 'bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:ring-green-500'\n                    : 'bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 focus:ring-red-500'\n                }`}\n                title={saving ? (action === 'approve' ? 'Genehmige...' : 'Lehne ab...') : (action === 'approve' ? 'Genehmigen' : 'Ablehnen')}\n              >\n                {saving ? (\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                ) : action === 'approve' ? (\n                  <CheckIcon className=\"h-5 w-5\" />\n                ) : (\n                  <XCircleIcon className=\"h-5 w-5\" />\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ProcessJoinRequestModal;\n\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { UserPlusIcon, FunnelIcon, PencilIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { OrganizationJoinRequest } from '../../types/organization.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport FilterPane from '../FilterPane.tsx';\nimport SavedFilterTags from '../SavedFilterTags.tsx';\nimport { FilterCondition } from '../FilterRow.tsx';\nimport ProcessJoinRequestModal from './ProcessJoinRequestModal.tsx';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport axiosInstance from '../../config/axios.ts';\n\n// Status-Badge Funktionen\nconst getStatusColor = (status: string) => {\n  switch (status) {\n    case 'pending':\n      return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300';\n    case 'approved':\n      return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300';\n    case 'rejected':\n      return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300';\n    case 'withdrawn':\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\n    default:\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\n  }\n};\n\nconst getStatusText = (status: string, t: any) => {\n  switch (status) {\n    case 'pending':\n      return t('joinRequestsList.status.pending');\n    case 'approved':\n      return t('joinRequestsList.status.approved');\n    case 'rejected':\n      return t('joinRequestsList.status.rejected');\n    case 'withdrawn':\n      return t('joinRequestsList.status.withdrawn');\n    default:\n      return status;\n  }\n};\n\nconst JOIN_REQUESTS_TABLE_ID = 'join-requests-table';\n\nconst JoinRequestsList: React.FC = () => {\n  const { t } = useTranslation();\n  const [joinRequests, setJoinRequests] = useState<OrganizationJoinRequest[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isFilterPanelOpen, setIsFilterPanelOpen] = useState<boolean>(false);\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const [isProcessModalOpen, setIsProcessModalOpen] = useState<boolean>(false);\n  const [selectedRequest, setSelectedRequest] = useState<OrganizationJoinRequest | null>(null);\n  \n  // Filter State Management (Controlled Mode)\n  const [activeFilterName, setActiveFilterName] = useState<string>('Alle');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n  \n  const { canViewJoinRequests, canManageJoinRequests, loading: permissionsLoading } = usePermissions();\n  const { showMessage } = useMessage();\n  const mountedRef = useRef(true);\n  const hasInitialLoadRef = useRef(false);\n\n  useEffect(() => {\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    // Warte bis Berechtigungen geladen sind\n    if (permissionsLoading) {\n      return;\n    }\n\n    // Nur einmal beim initialen Load ausfhren\n    if (hasInitialLoadRef.current) {\n      return;\n    }\n\n    // Prfe Berechtigung direkt\n    const hasPermission = canViewJoinRequests();\n    if (!hasPermission) {\n      setError(t('joinRequestsList.noPermission'));\n      setLoading(false);\n      hasInitialLoadRef.current = true;\n      return;\n    }\n\n    // Markiere als geladen, BEVOR der Request startet\n    hasInitialLoadRef.current = true;\n    \n    const fetchJoinRequests = async () => {\n      if (!mountedRef.current) return;\n      \n      try {\n        setLoading(true);\n        setError(null);\n        const requests = await organizationService.getJoinRequests();\n        \n        if (!mountedRef.current) return;\n        \n        setJoinRequests(requests);\n      } catch (err: any) {\n        if (!mountedRef.current) return;\n        \n        const errorMessage = err.response?.data?.message || t('joinRequestsList.loadError');\n        setError(errorMessage);\n        // showMessage nur auerhalb useEffect verwenden, um Re-Renders zu vermeiden\n        // Verwende setTimeout, um es asynchron auszufhren\n        setTimeout(() => {\n          showMessage(errorMessage, 'error');\n        }, 0);\n      } finally {\n        if (mountedRef.current) {\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchJoinRequests();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [permissionsLoading]);\n\n  const handleOpenProcessModal = (request: OrganizationJoinRequest) => {\n    if (!canManageJoinRequests()) {\n      const errorMessage = t('joinRequestsList.noPermissionEdit');\n      setError(errorMessage);\n      showMessage(errorMessage, 'error');\n      return;\n    }\n    setSelectedRequest(request);\n    setIsProcessModalOpen(true);\n  };\n\n  const handleProcessSuccess = async () => {\n    // Neulade die Liste nach erfolgreicher Bearbeitung\n    // Reset das Flag, damit neu geladen werden kann\n    hasInitialLoadRef.current = false;\n    \n    try {\n      setLoading(true);\n      const requests = await organizationService.getJoinRequests();\n      setJoinRequests(requests);\n      setError(null);\n      hasInitialLoadRef.current = true;\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || 'Fehler beim Laden der Beitrittsanfragen';\n      setError(errorMessage);\n      hasInitialLoadRef.current = true;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Filter-Funktionen\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n  };\n\n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n\n  // Filter Change Handler (Controlled Mode)\n  const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators);\n  };\n\n  const getActiveFilterCount = () => {\n    return filterConditions.length;\n  };\n\n  // Initialer Default-Filter setzen (Controlled Mode)\n  useEffect(() => {\n    const setInitialFilter = async () => {\n      try {\n        const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(JOIN_REQUESTS_TABLE_ID));\n        const filters = response.data;\n        \n        const alleFilter = filters.find((filter: any) => filter.name === 'Alle');\n        if (alleFilter) {\n          setActiveFilterName('Alle');\n          setSelectedFilterId(alleFilter.id);\n          applyFilterConditions(alleFilter.conditions, alleFilter.operators);\n        }\n      } catch (error) {\n        console.error('Fehler beim Setzen des initialen Filters:', error);\n      }\n    };\n\n    setInitialFilter();\n  }, []);\n\n  // Standard-Filter erstellen und speichern\n  useEffect(() => {\n    const createStandardFilters = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        \n        if (!token) {\n          console.error('Nicht authentifiziert');\n          return;\n        }\n\n        // Prfen, ob die Standard-Filter bereits existieren\n        const existingFiltersResponse = await axiosInstance.get(\n          API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(JOIN_REQUESTS_TABLE_ID)\n        );\n\n        const existingFilters = existingFiltersResponse.data || [];\n        const alleFilterExists = existingFilters.some((filter: any) => filter.name === 'Alle');\n\n        // Erstelle \"Alle\"-Filter, wenn er noch nicht existiert\n        if (!alleFilterExists) {\n          const alleFilter = {\n            tableId: JOIN_REQUESTS_TABLE_ID,\n            name: 'Alle',\n            conditions: [],\n            operators: []\n          };\n\n          await axiosInstance.post(\n            API_ENDPOINTS.SAVED_FILTERS.BASE,\n            alleFilter\n          );\n          console.log('Alle-Filter fr Join Requests erstellt');\n        }\n      } catch (error) {\n        console.error('Fehler beim Erstellen der Standard-Filter:', error);\n      }\n    };\n\n    createStandardFilters();\n  }, []);\n\n  // Gefilterte Join-Requests\n  const filteredJoinRequests = useMemo(() => {\n    let filtered = [...joinRequests];\n\n    // Suchfeld-Filter\n    if (searchTerm) {\n      const searchLower = searchTerm.toLowerCase();\n      filtered = filtered.filter(request => {\n        const requesterName = `${request.requester.firstName} ${request.requester.lastName}`.toLowerCase();\n        const requesterEmail = request.requester.email?.toLowerCase() || '';\n        const message = request.message?.toLowerCase() || '';\n        return requesterName.includes(searchLower) || requesterEmail.includes(searchLower) || message.includes(searchLower);\n      });\n    }\n\n    // Filter-Bedingungen aus FilterPane\n    if (filterConditions.length > 0) {\n      filtered = filterConditions.reduce((acc, condition, index) => {\n        if (!condition.column || condition.value === null || condition.value === '') {\n          return acc;\n        }\n\n        const operator = condition.operator;\n        const value = condition.value;\n\n        return acc.filter(request => {\n          switch (condition.column) {\n            case 'requester':\n              const requesterName = `${request.requester.firstName} ${request.requester.lastName}`.toLowerCase();\n              const requesterEmail = request.requester.email?.toLowerCase() || '';\n              const searchValue = String(value).toLowerCase();\n              \n              if (operator === 'contains') {\n                return requesterName.includes(searchValue) || requesterEmail.includes(searchValue);\n              } else if (operator === 'equals') {\n                return requesterName === searchValue || requesterEmail === searchValue;\n              } else if (operator === 'startsWith') {\n                return requesterName.startsWith(searchValue) || requesterEmail.startsWith(searchValue);\n    }\n              return false;\n\n            case 'message':\n              const message = request.message?.toLowerCase() || '';\n              const msgValue = String(value).toLowerCase();\n              \n              if (operator === 'contains') {\n                return message.includes(msgValue);\n              } else if (operator === 'equals') {\n                return message === msgValue;\n              } else if (operator === 'startsWith') {\n                return message.startsWith(msgValue);\n              }\n              return false;\n\n            case 'status':\n              if (operator === 'equals') {\n                return request.status === value;\n              }\n              return false;\n\n            default:\n              return true;\n          }\n        });\n      }, filtered);\n    }\n\n    return filtered;\n  }, [joinRequests, searchTerm, filterConditions, filterLogicalOperators]);\n\n  if (permissionsLoading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('joinRequestsList.loadingPermissions')}</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (!canViewJoinRequests()) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n      <div className=\"p-4 text-red-600 dark:text-red-400\">\n        {t('joinRequestsList.noPermission')}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 sm:p-6 mb-6\">\n      {/* Titelzeile mit Icon, Suchfeld, Filter-Button */}\n      <div className=\"flex items-center justify-between mb-4 sm:mb-4\">\n        <h2 className=\"text-xl sm:text-xl font-semibold flex items-center dark:text-white\">\n          <UserPlusIcon className=\"h-6 w-6 sm:h-6 sm:w-6 mr-2 sm:mr-2\" />\n          {t('joinRequestsList.title')}\n        </h2>\n        \n        <div className=\"flex items-center gap-1.5\">\n          {/* Suchfeld */}\n          <input\n            type=\"text\"\n            placeholder={t('common.search') || 'Suchen...'}\n            className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n\n          {/* Filter-Button */}\n          <button\n            className={`p-2 rounded-md border ${getActiveFilterCount() > 0 ? 'border-blue-300 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700'} relative`}\n            onClick={() => setIsFilterPanelOpen(!isFilterPanelOpen)}\n            title={t('common.filter')}\n          >\n            <FunnelIcon className=\"h-5 w-5\" />\n            {getActiveFilterCount() > 0 && (\n              <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center\">\n                {getActiveFilterCount()}\n              </span>\n            )}\n          </button>\n        </div>\n      </div>\n\n      {/* Filter-Panel */}\n      {isFilterPanelOpen && (\n        <div className=\"mb-4\">\n          <FilterPane\n            columns={[\n              { id: 'requester', label: t('joinRequestsList.filter.requester') },\n              { id: 'message', label: t('joinRequestsList.filter.message') },\n              { id: 'status', label: t('joinRequestsList.status.title') || 'Status' }\n            ]}\n            onApply={applyFilterConditions}\n            onReset={resetFilterConditions}\n            savedConditions={filterConditions}\n            savedOperators={filterLogicalOperators}\n            tableId={JOIN_REQUESTS_TABLE_ID}\n          />\n        </div>\n      )}\n\n      {/* Gespeicherte Filter als Tags anzeigen */}\n      <SavedFilterTags\n        tableId={JOIN_REQUESTS_TABLE_ID}\n        onSelectFilter={applyFilterConditions}\n        onReset={resetFilterConditions}\n        activeFilterName={activeFilterName}\n        selectedFilterId={selectedFilterId}\n        onFilterChange={handleFilterChange}\n        defaultFilterName=\"Alle\"\n      />\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"mb-4 p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded\">\n          {error}\n        </div>\n      )}\n\n      {/* Loading State */}\n      {loading ? (\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('joinRequestsList.loading')}</span>\n        </div>\n      ) : filteredJoinRequests.length === 0 ? (\n        <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n          {joinRequests.length === 0 \n            ? t('joinRequestsList.noRequests')\n            : t('joinRequestsList.noMatching')}\n        </div>\n      ) : (\n        /* Cards fr Join-Requests */\n        <div className=\"space-y-4\">\n          {filteredJoinRequests.map(request => (\n            <div\n              key={request.id}\n              className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\"\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                        {request.requester.firstName} {request.requester.lastName}\n                      </h3>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        {request.requester.email}\n              </p>\n                    </div>\n                    <span className={`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(request.status)}`}>\n                      {getStatusText(request.status, t)}\n                    </span>\n                  </div>\n\n                  {request.message && (\n                    <div className=\"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\n                      <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                        <span className=\"font-medium\">{t('joinRequestsList.filter.message')}:</span> {request.message}\n                      </p>\n                    </div>\n                  )}\n\n                  {request.response && (\n                    <div className=\"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-700\">\n                      <p className=\"text-sm text-blue-700 dark:text-blue-300\">\n                        <span className=\"font-medium\">{t('joinRequestsList.response')}:</span> {request.response}\n                      </p>\n                    </div>\n                  )}\n\n              {request.status === 'pending' && canManageJoinRequests() && (\n                    <div className=\"mt-4 flex items-center gap-2\">\n                  <button \n                        onClick={() => handleOpenProcessModal(request)}\n                        className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center\"\n                      >\n                        <PencilIcon className=\"h-4 w-4 mr-1\" />\n                        {t('joinRequestsList.edit')}\n                  </button>\n                </div>\n              )}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Process Join Request Modal */}\n      <ProcessJoinRequestModal\n        isOpen={isProcessModalOpen}\n        onClose={() => {\n          setIsProcessModalOpen(false);\n          setSelectedRequest(null);\n        }}\n        joinRequest={selectedRequest}\n        onSuccess={handleProcessSuccess}\n      />\n    </div>\n  );\n};\n\nexport default JoinRequestsList; ","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { usePermissions } from '../hooks/usePermissions.ts';\r\nimport { UserGroupIcon, UserIcon, ShieldCheckIcon } from '@heroicons/react/24/outline';\r\nimport UserManagementTab from '../components/UserManagementTab.tsx';\r\nimport RoleManagementTab from '../components/RoleManagementTab.tsx';\r\nimport useMessage from '../hooks/useMessage.ts';\r\nimport OrganizationSettings from '../components/organization/OrganizationSettings.tsx';\r\nimport JoinRequestsList from '../components/organization/JoinRequestsList.tsx';\r\n\r\nconst Organisation: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  // Gemeinsame States\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const { showMessage } = useMessage();\r\n\r\n  const { \r\n    isAdmin, \r\n    hasPermission, \r\n    canViewOrganization \r\n  } = usePermissions();\r\n\r\n  // Berechtigungen prfen\r\n  const canViewOrganisation = hasPermission('organization_management', 'read', 'page');\r\n  const canViewUsers = hasPermission('users', 'read', 'table');\r\n  const canViewRoles = hasPermission('roles', 'read', 'table');\r\n  const canViewOrg = canViewOrganization();\r\n\r\n  // Standard-Tab setzen: organization wenn verfgbar, sonst users wenn verfgbar, sonst roles\r\n  const defaultTab = canViewOrg ? 'organization' : (canViewUsers ? 'users' : (canViewRoles ? 'roles' : 'organization'));\r\n  const [activeTabState, setActiveTabState] = useState<'users' | 'roles' | 'organization'>(defaultTab);\r\n\r\n  // Tab-Wechsel Handler - Fehler beim Wechsel zurcksetzen\r\n  const handleTabChange = (tab: 'users' | 'roles' | 'organization') => {\r\n    // Prfe Berechtigung fr den Tab\r\n    if (tab === 'users' && !canViewUsers) {\r\n      return; // Tab nicht aktivierbar\r\n    }\r\n    if (tab === 'roles' && !canViewRoles) {\r\n      return; // Tab nicht aktivierbar\r\n    }\r\n    if (tab === 'organization' && !canViewOrg) {\r\n      return; // Tab nicht aktivierbar\r\n    }\r\n    setActiveTabState(tab);\r\n    setError(null);\r\n  };\r\n\r\n  // Gemeinsame Fehlerbehandlung\r\n  const handleError = (err: any) => {\r\n    let message = t('errors.unknownError');\r\n    if (err.response?.data?.message) {\r\n      message = err.response.data.message;\r\n    } else if (err instanceof Error) {\r\n      message = err.message;\r\n    }\r\n    setError(message);\r\n    showMessage(message, 'error');\r\n  };\r\n\r\n  // Keine Berechtigung fr die Seite\r\n  if (!canViewOrganisation) {\r\n    return <div className=\"p-4 text-red-600 dark:text-red-400\">{t('organisation.noPermission')}</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen dark:bg-gray-900\">\r\n      <div className=\"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6\">\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\r\n          {/* Header mit Icon */}\r\n          <div className=\"flex items-center mb-6\">\r\n            <UserGroupIcon className=\"h-6 w-6 mr-2 dark:text-white\" />\r\n            <h2 className=\"text-xl font-semibold dark:text-white\">{t('organisation.title')}</h2>\r\n          </div>\r\n\r\n          {/* Tabs fr Navigation */}\r\n          <div className=\"border-b border-gray-200 dark:border-gray-700 mb-6\">\r\n            <nav className=\"-mb-px flex space-x-8\">\r\n              {/* Users Tab - immer sichtbar, aber mit Pro-Badge wenn nicht berechtigt */}\r\n              <button\r\n                className={`${\r\n                  activeTabState === 'users' && canViewUsers\r\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\r\n                    : !canViewUsers\r\n                    ? 'border-transparent text-gray-400 dark:text-gray-500 cursor-not-allowed opacity-60'\r\n                    : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\r\n                } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center relative`}\r\n                onClick={() => canViewUsers && handleTabChange('users')}\r\n                disabled={!canViewUsers}\r\n              >\r\n                <UserIcon className=\"h-5 w-5 mr-2\" />\r\n                {t('organisation.tabs.users')}\r\n                {!canViewUsers && (\r\n                  <span className=\"ml-2 px-2 py-0.5 text-xs font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded\">\r\n                    PRO\r\n                  </span>\r\n                )}\r\n              </button>\r\n\r\n              {/* Roles Tab - immer sichtbar, aber mit Pro-Badge wenn nicht berechtigt */}\r\n              <button\r\n                className={`${\r\n                  activeTabState === 'roles' && canViewRoles\r\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\r\n                    : !canViewRoles\r\n                    ? 'border-transparent text-gray-400 dark:text-gray-500 cursor-not-allowed opacity-60'\r\n                    : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\r\n                } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center relative`}\r\n                onClick={() => canViewRoles && handleTabChange('roles')}\r\n                disabled={!canViewRoles}\r\n              >\r\n                <ShieldCheckIcon className=\"h-5 w-5 mr-2\" />\r\n                {t('organisation.tabs.roles')}\r\n                {!canViewRoles && (\r\n                  <span className=\"ml-2 px-2 py-0.5 text-xs font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded\">\r\n                    PRO\r\n                  </span>\r\n                )}\r\n              </button>\r\n\r\n              {/* Organization Tab - sichtbar wenn berechtigt */}\r\n              {canViewOrg && (\r\n                <button\r\n                  className={`${\r\n                    activeTabState === 'organization'\r\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\r\n                      : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\r\n                  } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`}\r\n                  onClick={() => handleTabChange('organization')}\r\n                >\r\n                  <UserGroupIcon className=\"h-5 w-5 mr-2\" />\r\n                  {t('organisation.tabs.organization')}\r\n                </button>\r\n              )}\r\n            </nav>\r\n          </div>\r\n\r\n          {error && (\r\n            <div className=\"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4\">\r\n              <p className=\"font-bold\">{t('organisation.error')}</p>\r\n              <p>{error}</p>\r\n            </div>\r\n          )}\r\n\r\n          {loading && <div className=\"p-4 dark:text-gray-300\">{t('organisation.loading')}</div>}\r\n\r\n          {/* Tab Inhalte */}\r\n          <div className=\"mt-6\">\r\n            {activeTabState === 'users' ? (\r\n              canViewUsers ? (\r\n                <UserManagementTab onError={handleError} />\r\n              ) : (\r\n                <div className=\"p-8 text-center\">\r\n                  <div className=\"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6\">\r\n                    <span className=\"inline-block px-3 py-1 text-sm font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded mb-4\">\r\n                      PRO\r\n                    </span>\r\n                    <p className=\"text-gray-700 dark:text-gray-300 mt-4\">\r\n                      {t('organisation.proFeature.users')}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              )\r\n            ) : activeTabState === 'roles' ? (\r\n              canViewRoles ? (\r\n                <RoleManagementTab onError={handleError} />\r\n              ) : (\r\n                <div className=\"p-8 text-center\">\r\n                  <div className=\"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6\">\r\n                    <span className=\"inline-block px-3 py-1 text-sm font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded mb-4\">\r\n                      PRO\r\n                    </span>\r\n                    <p className=\"text-gray-700 dark:text-gray-300 mt-4\">\r\n                      {t('organisation.proFeature.roles')}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              )\r\n            ) : activeTabState === 'organization' && canViewOrg ? (\r\n              <div className=\"space-y-6\">\r\n                <OrganizationSettings />\r\n                <JoinRequestsList />\r\n              </div>\r\n            ) : (\r\n              <div className=\"p-4 text-red-600 dark:text-red-400\">\r\n                {t('organisation.noPermissionForPage')}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Organisation;\r\n\r\n\r\n"],"names":["ChevronDownIcon","_ref","svgRef","title","titleId","props","_objectWithoutProperties","_excluded","React","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","id","strokeLinecap","strokeLinejoin","d","ChartBarIcon","DocumentDuplicateIcon","FunnelIcon","PlusIcon","ShieldCheckIcon","CONTRACT_TYPES","code","name","_ref2","onError","t","useTranslation","COUNTRIES","PAYROLL_COUNTRIES","LANGUAGES","users","setUsers","useState","selectedUser","setSelectedUser","userFormData","setUserFormData","isEditingUser","setIsEditingUser","selectedRoles","setSelectedRoles","isDebugMode","setIsDebugMode","roleWarning","setRoleWarning","showMessage","useMessage","isAdmin","usePermissions","roles","setRoles","loadingRoles","setLoadingRoles","activeUserTab","setActiveUserTab","isCreateModalOpen","setIsCreateModalOpen","isMobile","setIsMobile","window","innerWidth","isLargeScreen","setIsLargeScreen","openSidepane","closeSidepane","useSidepane","newUserFormData","setNewUserFormData","email","password","firstName","lastName","useEffect","handleResize","addEventListener","removeEventListener","fetchUsers","async","response","userApi","getAll","data","err","handleError","fetchUserDetails","userId","isNaN","console","log","getById","userData","_objectSpread","birthday","Date","toISOString","split","roleIds","Array","isArray","length","role","map","userRole","roleId","warn","r","fallbackRoles","description","permissions","roleApi","concat","error","fetchRoles","_err$response","_err$response$data","message","Error","includes","handleUserInputChange","e","value","type","target","finalValue","Number","toggleRole","isRoleSelected","newSelectedRoles","filter","updateRoles","handleNewUserInputChange","handleCreateUser","preventDefault","match","create","prevUsers","_err$response5","_err$response5$data","errorMessage","_jsxs","className","children","_jsx","onClick","style","width","height","htmlFor","onChange","event","parseInt","user","username","UserCircleIcon","DocumentTextIcon","onSubmit","_userFormData$usernam","_userFormData$email","_userFormData$firstNa","_userFormData$lastNam","trim","dataToSend","salary","undefined","parseFloat","normalWorkingHours","hourlyRate","toString","monthlySalary","update","updatedData","_err$response2","_err$response4","status","_err$response3","_err$response3$data","errorMsg","bankDetails","contract","step","country","language","payrollCountry","contractType","min","placeholder","handleCancelEdit","XMarkIcon","CheckIcon","IdentificationDocumentList","some","ids","join","isFixedRole","fillRule","clipRule","_Fragment","Dialog","open","onClose","Panel","Title","required","opacity","transition","pointerEvents","alwaysVisiblePages","defaultPages","defaultTables","defaultButtons","tableToPageMapping","buttonToPageMapping","buttonToTableMapping","ROLES_TABLE_ID","STANDARD_ROLE_IDS","STANDARD_ROLE_NAMES","isStandardRole","roleName","RoleCard","onEdit","onDelete","onCopy","canEdit","canDelete","canCopy","PencilIcon","TrashIcon","perm","accessLevel","slice","permission","entity","entityType","onRolesChange","readOnly","isModalOpen","setIsModalOpen","editingRole","setEditingRole","loading","setLoading","pageDisplayNames","useMemo","tableDisplayNames","buttonDisplayNames","formData","setFormData","page","table","button","setError","hasPermission","searchTerm","setSearchTerm","isFilterModalOpen","setIsFilterModalOpen","filterConditions","setFilterConditions","filterLogicalOperators","setFilterLogicalOperators","activeFilterName","setActiveFilterName","selectedFilterId","setSelectedFilterId","handleValidationError","useError","isAddPermissionModalOpen","setIsAddPermissionModalOpen","selectedPermission","setSelectedPermission","displayLimit","setDisplayLimit","useCallback","component","action","handleSubmit","filteredPermissions","category","ErrorCategory","PERMISSION","updateError","meta","cause","createError","resetForm","handleDelete","find","confirm","delete","deleteError","refreshError","handleCopyRole","copiedRoleData","prevRoles","prepareRoleForEditing","allPermissions","forEach","existingPermIndex","findIndex","p","setAllPagePermissions","newPermissions","permIndex","indexOf","setAllTablePermissions","setAllButtonPermissions","getActiveFilterCount","filteredAndSortedRoles","searchLower","toLowerCase","result","i","condition","conditionMet","column","operator","startsWith","count","sort","a","b","localeCompare","localStorage","getItem","existingFilters","axiosInstance","get","API_ENDPOINTS","SAVED_FILTERS","BY_TABLE","alleFilter","tableId","conditions","operators","post","BASE","createStandardFilters","applyFilterConditions","setInitialFilter","resetFilterConditions","FilterPane","columns","label","onApply","onReset","savedConditions","savedOperators","SavedFilterTags","onSelectFilter","onFilterChange","handleFilterChange","defaultFilterName","prevLimit","index","isActive","checked","disabled","tablePerm","aName","bName","priorityOrder","aIndex","bIndex","tableIndex","tablePermIndex","isTableActive","tableEntity","tableDisplayName","relatedButtons","buttonPerm","order","buttonIndex","buttonPermIndex","isButtonActive","buttonDisplayName","UserPlusIcon","EnvelopeIcon","isOpen","onSuccess","displayName","domain","errors","setErrors","fetchCurrentUser","useAuth","checkScreenSize","handleChange","prev","validateForm","newErrors","keys","organizationService","createOrganization","submit","handleClose","ArrowPathIcon","organizationName","searching","setSearching","organizations","setOrganizations","showDropdown","setShowDropdown","selectedOrganization","setSelectedOrganization","searchTimeoutRef","useRef","dropdownRef","handleClickOutside","current","contains","document","handleOrganizationInputChange","clearTimeout","setTimeout","results","searchOrganizations","handleSelectOrganization","org","handleMessageChange","createJoinRequest","rows","organization","logo","settings","selectedCountry","setSelectedCountry","organizationLanguage","setOrganizationLanguage","useLanguage","selectedOrgLanguage","setSelectedOrgLanguage","savingOrgLanguage","setSavingOrgLanguage","orgSettings","langResponse","getOrganizationLanguage","langError","loadOrgLanguage","updateOrganization","newLanguage","getStatusColor","getStatusText","MY_JOIN_REQUESTS_TABLE_ID","MyJoinRequestsList","joinRequests","setJoinRequests","isFilterPanelOpen","setIsFilterPanelOpen","mountedRef","withdrawingId","setWithdrawingId","isMounted","timeoutId","ORGANIZATIONS","MY_JOIN_REQUESTS","requests","getMyJoinRequests","fetchMyJoinRequests","formatDate","dateString","toLocaleDateString","year","month","day","hour","minute","filteredJoinRequests","filtered","request","_request$message","orgName","reduce","acc","_request$message2","searchValue","String","msgValue","createdAt","processor","processedAt","requestId","withdrawJoinRequest","req","_err$response4$data","handleWithdraw","OrganizationSettings","setOrganization","stats","setStats","loadingStats","setLoadingStats","isJoinModalOpen","setIsJoinModalOpen","isEditModalOpen","setIsEditModalOpen","canViewOrganization","canManageOrganization","permissionsLoading","refreshOrganization","useOrganization","fetchOrganization","getCurrentOrganization","statsData","getOrganizationStats","statsErr","_err$response2$data","hasOrganization","hasInitialLoadRef","UserGroupIcon","BuildingOfficeIcon","subscriptionPlan","currentUsers","maxUsers","utilizationPercent","_count","invitations","availableSlots","CreateOrganizationModal","handleCreateSuccess","JoinOrganizationModal","handleJoinSuccess","EditOrganizationModal","handleEditSuccess","joinRequest","setAction","setRoleId","setResponse","saving","setSaving","organizationId","processJoinRequest","requester","XCircleIcon","JOIN_REQUESTS_TABLE_ID","JoinRequestsList","isProcessModalOpen","setIsProcessModalOpen","selectedRequest","setSelectedRequest","canViewJoinRequests","canManageJoinRequests","getJoinRequests","fetchJoinRequests","_request$requester$em","requesterName","requesterEmail","_request$requester$em2","handleOpenProcessModal","ProcessJoinRequestModal","Organisation","canViewOrganisation","canViewUsers","canViewRoles","canViewOrg","defaultTab","activeTabState","setActiveTabState","handleTabChange","tab","UserIcon","UserManagementTab","RoleManagementTab"],"sourceRoot":""}