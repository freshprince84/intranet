{"version":3,"file":"static/js/470.ff36017e.chunk.js","mappings":"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","sources":["utils/requestDateHelpers.ts","components/CreateRequestModal.tsx","components/EditRequestModal.tsx","components/Requests.tsx","../node_modules/date-fns/getYear.js","components/WorktimeStats.tsx","components/AppDownload.tsx","pages/Dashboard.tsx","../node_modules/@heroicons/react/24/outline/esm/InformationCircleIcon.js","../node_modules/@heroicons/react/24/outline/esm/DocumentTextIcon.js","../node_modules/@heroicons/react/24/outline/esm/ChartBarIcon.js","../node_modules/@heroicons/react/24/outline/esm/DocumentDuplicateIcon.js","../node_modules/date-fns/parseISO.js","../node_modules/date-fns/addDays.js","../node_modules/@heroicons/react/24/outline/esm/DocumentArrowDownIcon.js","../node_modules/@heroicons/react/24/outline/esm/DevicePhoneMobileIcon.js"],"sourcesContent":["/**\r\n * Berechnet das Mindestdatum fr due_date basierend auf Request Type\r\n * @param type - Der Request Type\r\n * @returns Datum im Format YYYY-MM-DD\r\n */\r\nexport const getMinDateForType = (type: string): string => {\r\n  const today = new Date();\r\n  const minDate = new Date(today);\r\n  \r\n  switch (type) {\r\n    case 'vacation':\r\n    case 'event':\r\n    case 'permit':\r\n      // +1 Monat\r\n      minDate.setMonth(minDate.getMonth() + 1);\r\n      break;\r\n    case 'improvement_suggestion':\r\n    case 'sick_leave':\r\n    case 'employment_certificate':\r\n    case 'other':\r\n      // +1 Woche\r\n      minDate.setDate(minDate.getDate() + 7);\r\n      break;\r\n    case 'buy_order':\r\n    case 'repair':\r\n      // Heute (keine nderung)\r\n      break;\r\n    default:\r\n      // Default: +1 Woche\r\n      minDate.setDate(minDate.getDate() + 7);\r\n  }\r\n  \r\n  return minDate.toISOString().split('T')[0];\r\n};\r\n\r\n/**\r\n * Berechnet das Voreingestellte Datum fr due_date basierend auf Request Type\r\n * @param type - Der Request Type\r\n * @returns Datum im Format YYYY-MM-DD\r\n */\r\nexport const getDefaultDateForType = (type: string): string => {\r\n  return getMinDateForType(type); // Gleiche Logik wie Mindestdatum\r\n};\r\n\r\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../config/axios.ts'; // Importiere die konfigurierte axios-Instanz\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, ArrowPathIcon, CheckIcon } from '@heroicons/react/24/outline';\nimport MarkdownPreview from './MarkdownPreview.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport { logger } from '../utils/logger.ts';\nimport { getMinDateForType, getDefaultDateForType } from '../utils/requestDateHelpers.ts';\n\n//  MEMORY LEAK FIX: Komponente fr Bildvorschau mit Cleanup\ninterface ImagePreviewWithCleanupProps {\n  file: File;\n  alt: string;\n  blobUrlsRef: React.MutableRefObject<Set<string>>;\n  className?: string;\n}\n\nconst ImagePreviewWithCleanup: React.FC<ImagePreviewWithCleanupProps> = ({ file, alt, blobUrlsRef, className = \"max-w-[200px] max-h-[150px] object-contain\" }) => {\n  const [url, setUrl] = useState<string | null>(null);\n\n  useEffect(() => {\n    const blobUrl = URL.createObjectURL(file);\n    blobUrlsRef.current.add(blobUrl);\n    setUrl(blobUrl);\n\n    return () => {\n      URL.revokeObjectURL(blobUrl);\n      blobUrlsRef.current.delete(blobUrl);\n    };\n  }, [file, blobUrlsRef]);\n\n  if (!url) return null;\n\n  return (\n    <img \n      src={url}\n      alt={alt}\n      className={className}\n    />\n  );\n};\n\ninterface User {\n  id: number;\n  firstName: string;\n  username: string;\n  branchId?: number; // Optional, falls in manchen Kontexten nicht verfgbar\n}\n\ninterface Branch {\n  id: number;\n  name: string;\n}\n\ninterface RequestAttachment {\n  id?: number;\n  fileName: string;\n  fileType: string;\n  fileSize: number;\n  filePath?: string;\n  uploadedAt?: string;\n  file?: File; // Fr temporre Anhnge vor dem Hochladen\n}\n\ninterface Request {\n  id: number;\n  title: string;\n  status: 'approval' | 'approved' | 'to_improve' | 'denied';\n  requestedBy: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  responsible: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  branch: {\n    id: number;\n    name: string;\n  };\n  dueDate: string;\n  createTodo: boolean;\n  description?: string;\n}\n\ninterface CreateRequestModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onRequestCreated: (newRequest: Request) => void;\n}\n\nconst CreateRequestModal = ({ isOpen, onClose, onRequestCreated }: CreateRequestModalProps) => {\n  const { t } = useTranslation();\n  const { user } = useAuth();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [users, setUsers] = useState<User[]>([]);\n  const [branches, setBranches] = useState<Branch[]>([]);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    responsible_id: '',\n    branch_id: '',\n    type: 'other' as 'vacation' | 'improvement_suggestion' | 'sick_leave' | 'employment_certificate' | 'event' | 'permit' | 'buy_order' | 'repair' | 'other',\n    is_private: false,\n    due_date: '',\n    create_todo: false\n  });\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [temporaryAttachments, setTemporaryAttachments] = useState<RequestAttachment[]>([]);\n  const [uploading, setUploading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  //  MEMORY LEAK FIX: Track Blob-URLs fr Cleanup\n  const blobUrlsRef = useRef<Set<string>>(new Set());\n  //  MEMORY LEAK FIX: Track Timeout-IDs fr Cleanup\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Type-Change Handler\n  const handleTypeChange = (newType: string) => {\n    const newMinDate = getMinDateForType(newType);\n    const newDefaultDate = getDefaultDateForType(newType);\n    \n    setFormData(prevData => {\n      // Wenn aktuelles due_date vor dem neuen Mindestdatum liegt, setze auf neues Default-Datum\n      const currentDate = prevData.due_date ? new Date(prevData.due_date) : null;\n      const minDate = new Date(newMinDate);\n      \n      const dueDate = (currentDate && currentDate >= minDate) \n        ? prevData.due_date \n        : newDefaultDate;\n      \n      return {\n        ...prevData,\n        type: newType as any,\n        due_date: dueDate\n      };\n    });\n  };\n\n  // Lade Benutzer und Niederlassungen beim ffnen des Modals\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setError(null);\n        const token = localStorage.getItem('token');\n        if (!token) {\n          setError(t('createRequest.errors.notAuthenticated'));\n          return;\n        }\n\n        logger.log('Lade Daten fr CreateRequestModal...');\n        \n        try {\n          const [usersResponse, branchesResponse] = await Promise.all([\n            axiosInstance.get(API_ENDPOINTS.USERS.DROPDOWN),\n            axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE)\n          ]);\n\n          logger.log('Benutzer geladen:', usersResponse.data.length);\n          logger.log('Niederlassungen geladen:', branchesResponse.data.length);\n          \n          setUsers(usersResponse.data || []);\n          setBranches(branchesResponse.data || []);\n\n          // Voreinstellungen setzen\n          if (user) {\n            // 1. Verantwortlicher: Aktueller Benutzer\n            setFormData(prevData => ({ \n              ...prevData, \n              responsible_id: user.id.toString() \n            }));\n\n            // 2. Niederlassung: Aktuell gewhlte Niederlassung des Benutzers\n            // Fallback: erste verfgbare Niederlassung verwenden\n            if (branchesResponse.data && branchesResponse.data.length > 0) {\n              // Wir versuchen, die vom Benutzer zuletzt genutzte Niederlassung zu verwenden\n              // Falls nicht verfgbar, verwenden wir die erste Niederlassung\n              const userBranch = branchesResponse.data[0]?.id.toString();\n              setFormData(prevData => ({ \n                ...prevData, \n                branch_id: userBranch \n              }));\n            }\n\n            // 3. Flligkeitsdatum: Basierend auf Type (verwende prevData.type fr aktuellen Wert)\n            setFormData(prevData => {\n              const defaultDate = getDefaultDateForType(prevData.type);\n              return {\n                ...prevData,\n                due_date: defaultDate\n              };\n            });\n          }\n        } catch (err) {\n          console.error('Fehler beim Laden der Daten:', err);\n          \n          // Einfachere Fehlerbehandlung ohne axios-Import\n          const axiosError = err as any;\n          if (axiosError.code === 'ERR_NETWORK') {\n            setError('Verbindung zum Server konnte nicht hergestellt werden. Bitte stellen Sie sicher, dass der Server luft.');\n          } else {\n            setError(`Fehler beim Laden der Daten: ${axiosError.response?.data?.message || axiosError.message}`);\n          }\n        }\n      } catch (err) {\n        console.error('Unerwarteter Fehler:', err);\n        setError('Ein unerwarteter Fehler ist aufgetreten');\n      }\n    };\n\n    if (isOpen) {\n      fetchData();\n    }\n  }, [isOpen]);\n\n  //  MEMORY LEAK FIX: Cleanup Timeout bei Modal-Schlieung\n  useEffect(() => {\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n        timeoutRef.current = null;\n      }\n    };\n  }, [isOpen]);\n\n  // berprfung der Bildschirmgre\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    // Initial prfen\n    checkScreenSize();\n    \n    // Event-Listener fr Grennderungen\n    window.addEventListener('resize', checkScreenSize);\n    \n    // Cleanup\n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  //  MEMORY LEAK FIX: Cleanup Blob-URLs beim Unmount\n  useEffect(() => {\n    return () => {\n      blobUrlsRef.current.forEach(url => {\n        URL.revokeObjectURL(url);\n      });\n      blobUrlsRef.current.clear();\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  // Formatiere den Benutzernamen (erstes Wort vom Vornamen + erstes Wort vom Benutzernamen)\n  const formatUserName = (user: User) => {\n    const firstName = user.firstName?.split(' ')[0];\n    const username = user.username?.split(' ')[0];\n    \n    // Wenn kein firstName vorhanden ist, nur username anzeigen\n    if (!firstName) {\n      return username || t('createRequest.errors.unknownUser');\n    }\n    \n    // Standard: firstName (username)\n    return `${firstName} (${username})`;\n  };\n\n  const handlePaste = async (event: React.ClipboardEvent) => {\n    const items = event.clipboardData.items;\n    \n    for (let i = 0; i < items.length; i++) {\n      const item = items[i];\n      \n      // Prfen, ob das eingefgte Element ein Bild ist\n      if (item.type.indexOf('image') === 0) {\n        event.preventDefault(); // Standardeingabe verhindern\n        \n        const file = item.getAsFile();\n        if (file) {\n          await handleTemporaryAttachment(file);\n        }\n        return;\n      }\n    }\n  };\n\n  const handleDrop = async (event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n    \n    if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\n      const file = event.dataTransfer.files[0];\n      await handleTemporaryAttachment(file);\n    }\n  };\n\n  const handleDragOver = (event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  const handleTemporaryAttachment = async (file: File) => {\n    setUploading(true);\n    setError(null);\n\n    try {\n      // Erstelle einen temporren Anhang\n      const newAttachment: RequestAttachment = {\n        fileName: file.name,\n        fileType: file.type,\n        fileSize: file.size,\n        file: file // Speichern der Datei fr spteren Upload\n      };\n      \n      setTemporaryAttachments(prev => [...prev, newAttachment]);\n\n      // Fge Markdown-Link ins Textarea ein (fr Card-Anzeige)\n      // Bilder werden zustzlich als groe Vorschau unter dem Textarea angezeigt\n      let insertText = '';\n      if (file.type.startsWith('image/')) {\n        // Hinweis: Wir verwenden hier den Platzhalter, da die Datei erst nach dem Erstellen hochgeladen wird\n        // Die tatschliche URL wird nach dem erfolgreichen Upload im Backend gesetzt\n        insertText = `\\n![${file.name}](${t('createRequest.form.uploadAfterCreate')})\\n`;\n      } else {\n        // Fr andere Dateien einen temporren Platzhalter\n        insertText = `\\n[${file.name}](${t('createRequest.form.uploadAfterCreate')})\\n`;\n      }\n      \n      // Fge den Link an der aktuellen Cursorposition ein\n      if (textareaRef.current) {\n        const cursorPos = textareaRef.current.selectionStart;\n        const textBefore = formData.description.substring(0, cursorPos);\n        const textAfter = formData.description.substring(cursorPos);\n        \n        setFormData({\n          ...formData,\n          description: textBefore + insertText + textAfter\n        });\n        \n        // Setze den Cursor hinter den eingefgten Link\n        //  MEMORY LEAK FIX: Timeout-ID speichern und cleanup\n        if (timeoutRef.current) {\n          clearTimeout(timeoutRef.current);\n        }\n        timeoutRef.current = setTimeout(() => {\n          if (textareaRef.current) {\n            const newPos = cursorPos + insertText.length;\n            textareaRef.current.selectionStart = newPos;\n            textareaRef.current.selectionEnd = newPos;\n            textareaRef.current.focus();\n          }\n          timeoutRef.current = null;\n        }, 0);\n      } else {\n        setFormData({\n          ...formData,\n          description: formData.description + insertText\n        });\n      }\n    } catch (err) {\n      console.error('Fehler beim Verarbeiten der Datei:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.errors.unknownError'));\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n    if (!files || files.length === 0) return;\n\n    const file = files[0];\n    await handleTemporaryAttachment(file);\n    \n    // Zurcksetzen des Datei-Inputs\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleRemoveTemporaryAttachment = (index: number) => {\n    // Hole den zu entfernenden Anhang\n    const attachmentToRemove = temporaryAttachments[index];\n    \n    if (attachmentToRemove) {\n      // Entferne den Anhang aus der Liste\n      setTemporaryAttachments(prev => prev.filter((_, i) => i !== index));\n      \n      // Entferne auch den Anhang aus der Beschreibung\n      if (attachmentToRemove.fileName) {\n        // Je nach Dateityp knnen verschiedene Markdown-Formate in der Beschreibung sein\n        const uploadAfterCreateText = t('createRequest.form.uploadAfterCreate');\n        const imagePattern = new RegExp(`!\\\\[${attachmentToRemove.fileName}\\\\]\\\\(${uploadAfterCreateText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n        const linkPattern = new RegExp(`\\\\[${attachmentToRemove.fileName}\\\\]\\\\(${uploadAfterCreateText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n        \n        // Ersetze alle Vorkommen durch leeren Text\n        const newDescription = formData.description\n          .replace(imagePattern, '')\n          .replace(linkPattern, '')\n          // Entferne berschssige Leerzeilen, die durch das Entfernen entstehen knnten\n          .replace(/\\n{3,}/g, '\\n\\n');\n        \n        setFormData({\n          ...formData,\n          description: newDescription\n        });\n      }\n    }\n  };\n\n  const uploadTemporaryAttachments = async (requestId: number) => {\n    if (temporaryAttachments.length === 0) return;\n    \n    try {\n      setLoading(true);\n      \n      // Upload jeder temporren Datei\n      for (const attachment of temporaryAttachments) {\n        if (!attachment.file) continue;\n        \n        const formData = new FormData();\n        formData.append('file', attachment.file);\n        \n        await axiosInstance.post(\n          API_ENDPOINTS.REQUESTS.ATTACHMENTS(requestId),\n          formData,\n          {\n            headers: {\n              'Content-Type': 'multipart/form-data',\n            },\n          }\n        );\n      }\n      \n      logger.log(t('createRequest.messages.attachmentsUploaded', { count: temporaryAttachments.length }));\n    } catch (err) {\n      console.error('Fehler beim Hochladen der Anhnge:', err);\n      // Wir zeigen hier keinen Fehler, da der Request bereits erstellt wurde\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setLoading(true);\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) throw new Error(t('createRequest.errors.notAuthenticated'));\n      if (!user?.id) throw new Error(t('createRequest.errors.unknownUser'));\n\n      // Validiere die IDs\n      const responsibleId = parseInt(formData.responsible_id);\n      const branchId = parseInt(formData.branch_id);\n\n      if (isNaN(responsibleId) || isNaN(branchId)) {\n        throw new Error(t('createRequest.errors.invalidIds'));\n      }\n\n      const response = await axiosInstance.post(API_ENDPOINTS.REQUESTS.BASE, \n        {\n          title: formData.title,\n          description: formData.description || '',\n          responsible_id: responsibleId,\n          branch_id: branchId,\n          requested_by_id: user.id,\n          type: formData.type,\n          is_private: formData.is_private,\n          due_date: formData.due_date || null,\n          create_todo: formData.create_todo,\n          status: 'approval'\n        }\n      );\n\n      if (response.status !== 201) {\n        throw new Error(t('createRequest.errors.createError'));\n      }\n\n      // Lade temporre Anhnge hoch, falls vorhanden\n      await uploadTemporaryAttachments(response.data.id);\n\n      // bergebe den neuen Request an den Callback\n      onRequestCreated(response.data);\n      onClose();\n      setFormData({\n        title: '',\n        description: '',\n        responsible_id: '',\n        branch_id: '',\n        type: 'other',\n        is_private: false,\n        due_date: '',\n        create_todo: false\n      });\n      setTemporaryAttachments([]);\n    } catch (err) {\n      console.error('Create Request Error:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.errors.createError'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderTemporaryAttachments = () => {\n    if (temporaryAttachments.length === 0) return null;\n    \n    return (\n      <div className=\"mt-2\">\n        <ul className=\"flex flex-wrap gap-2\">\n          {temporaryAttachments.map((attachment, index) => (\n            <li key={index} className=\"inline-flex items-center bg-gray-100 rounded-md px-2 py-1 relative group\">\n              <span className=\"text-sm font-medium text-gray-800\">\n                {attachment.fileName}\n              </span>\n              <div className=\"flex ml-2\">\n                <div className=\"relative group ml-1\">\n                  <button\n                    type=\"button\"\n                    onClick={() => handleRemoveTemporaryAttachment(index)}\n                    className=\"text-red-600 hover:text-red-900\"\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                    {t('createRequest.form.remove')}\n                  </div>\n                </div>\n              </div>\n              {/* Tooltip fr Bildvorschau bei Bild-Dateien */}\n              {attachment.fileType.startsWith('image/') && attachment.file && (\n                <div className=\"absolute z-10 bg-white p-2 rounded-md shadow-lg -top-32 left-0 border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none\">\n                  <ImagePreviewWithCleanup file={attachment.file} alt={attachment.fileName} blobUrlsRef={blobUrlsRef} />\n                </div>\n              )}\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  };\n\n  // Rendere groe Bildvorschauen fr Bilder (nicht PDFs)\n  const renderImagePreviews = () => {\n    const temporaryImageAttachments = temporaryAttachments.filter(att => \n      att.fileType?.startsWith('image/') && att.file\n    );\n    \n    if (temporaryImageAttachments.length === 0) return null;\n    \n    return (\n      <div className=\"flex flex-col gap-3 mt-2\">\n        {temporaryImageAttachments.map((attachment, index) => (\n          <div key={`temp-img-${index}`} className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n            {attachment.file && (\n              <ImagePreviewWithCleanup \n                file={attachment.file} \n                alt={attachment.fileName} \n                blobUrlsRef={blobUrlsRef}\n                className=\"w-full h-auto max-h-96 object-contain\"\n              />\n            )}\n          </div>\n        ))}\n      </div>\n    );\n  };\n\n  if (!isOpen) return null;\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('createRequest.title')}\n              </Dialog.Title>\n              <button\n                onClick={onClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <div className=\"p-4\">\n              {error && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {error}\n                </div>\n              )}\n\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.title')}</label>\n                  <input\n                    type=\"text\"\n                    required\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                    value={formData.title}\n                    onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                  />\n                </div>\n\n                <div>\n                  <label htmlFor=\"description_request_create\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    {t('createRequest.form.description')}\n                  </label>\n                  <div className=\"relative\">\n                    <textarea\n                      ref={textareaRef}\n                      id=\"description_request_create\"\n                      rows={6}\n                      className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                      value={formData.description}\n                      onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                      onPaste={handlePaste}\n                      onDrop={handleDrop}\n                      onDragOver={handleDragOver}\n                      placeholder={t('createRequest.form.descriptionPlaceholder')}\n                    />\n                    {/* Heftklammer-Icon zum Hinzufgen von Dateien */}\n                    <div className=\"relative group absolute bottom-2 left-2\">\n                      <button\n                        type=\"button\"\n                        onClick={() => fileInputRef.current?.click()}\n                        className=\"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none\"\n                      >\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n                        </svg>\n                      </button>\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                        {t('createRequest.form.addFile')}\n                      </div>\n                    </div>\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      onChange={handleFileUpload}\n                      className=\"hidden\"\n                    />\n                    {uploading && (\n                      <div className=\"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-70 dark:bg-opacity-70\">\n                        <span className=\"text-sm text-gray-600 dark:text-gray-300\">{t('createRequest.form.uploading')}</span>\n                      </div>\n                    )}\n                  </div>\n                  {renderTemporaryAttachments()}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.responsible')}</label>\n                  <select\n                    required\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                    value={formData.responsible_id}\n                    onChange={(e) => setFormData({ ...formData, responsible_id: e.target.value })}\n                  >\n                    <option value=\"\">{t('createRequest.form.select')}</option>\n                    {Array.isArray(users) && users.map(user => (\n                      <option key={user.id} value={user.id}>\n                        {formatUserName(user)}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.branch')}</label>\n                  <select\n                    required\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                    value={formData.branch_id}\n                    onChange={(e) => setFormData({ ...formData, branch_id: e.target.value })}\n                  >\n                    <option value=\"\">{t('createRequest.form.select')}</option>\n                    {Array.isArray(branches) && branches.map(branch => (\n                      <option key={branch.id} value={branch.id}>\n                        {branch.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.type')}</label>\n                  <select\n                    required\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                    value={formData.type}\n                    onChange={(e) => handleTypeChange(e.target.value)}\n                  >\n                    <option value=\"event\">{t('requests.types.event')}</option>\n                    <option value=\"repair\">{t('requests.types.repair')}</option>\n                    <option value=\"improvement_suggestion\">{t('requests.types.improvement_suggestion')}</option>\n                    <option value=\"buy_order\">{t('requests.types.buy_order')}</option>\n                    <option value=\"employment_certificate\">{t('requests.types.employment_certificate')}</option>\n                    <option value=\"vacation\">{t('requests.types.vacation')}</option>\n                    <option value=\"permit\">{t('requests.types.permit')}</option>\n                    <option value=\"sick_leave\">{t('requests.types.sick_leave')}</option>\n                    <option value=\"other\">{t('requests.types.other')}</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.dueDate')}</label>\n                  <input\n                    type=\"date\"\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                    value={formData.due_date}\n                    min={getMinDateForType(formData.type)}\n                    onChange={(e) => {\n                      const selectedDate = e.target.value;\n                      const minDate = getMinDateForType(formData.type);\n                      // Validierung: Datum darf nicht vor Mindestdatum liegen\n                      if (selectedDate && selectedDate < minDate) {\n                        // Setze auf Mindestdatum falls ungltig\n                        setFormData({ ...formData, due_date: minDate });\n                      } else {\n                        setFormData({ ...formData, due_date: selectedDate });\n                      }\n                    }}\n                  />\n                </div>\n\n                <div className=\"flex items-center\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"is_private\"\n                    className=\"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:text-gray-300\"\n                    checked={formData.is_private}\n                    onChange={(e) => setFormData({ ...formData, is_private: e.target.checked })}\n                  />\n                  <label htmlFor=\"is_private\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\n                    {t('createRequest.form.isPrivate')}\n                  </label>\n                </div>\n\n                <div className=\"flex items-center\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"create_todo\"\n                    className=\"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:text-gray-300\"\n                    checked={formData.create_todo}\n                    onChange={(e) => setFormData({ ...formData, create_todo: e.target.checked })}\n                  />\n                  <label htmlFor=\"create_todo\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\n                    {t('createRequest.form.createTodo')}\n                  </label>\n                </div>\n\n                <div className=\"flex justify-end pt-4 gap-2\">\n                  <div className=\"relative group\">\n                    <button\n                      type=\"button\"\n                      onClick={onClose}\n                      className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                    >\n                      <XMarkIcon className=\"h-5 w-5\" />\n                    </button>\n                    <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                      {t('createRequest.form.cancel')}\n                    </div>\n                  </div>\n                  <div className=\"relative group\">\n                    <button\n                      type=\"submit\"\n                      className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                      disabled={loading}\n                    >\n                      {loading ? (\n                        <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                      ) : (\n                        <CheckIcon className=\"h-5 w-5\" />\n                      )}\n                    </button>\n                    <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                      {loading ? t('createRequest.form.creating') : t('createRequest.form.create')}\n                    </div>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {/* Hinweis: onClick entfernt, da Backdrop pointer-events: none hat, damit Hauptinhalt interaktiv bleibt */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('createRequest.title')}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {error && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {error}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\" data-onboarding=\"request-form\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.title')}</label>\n              <input\n                type=\"text\"\n                required\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"description_request_create\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                {t('createRequest.form.description')}\n              </label>\n              <div className=\"relative\">\n                <textarea\n                  ref={textareaRef}\n                  id=\"description_request_create\"\n                  rows={6}\n                  className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                  onPaste={handlePaste}\n                  onDrop={handleDrop}\n                  onDragOver={handleDragOver}\n                  placeholder={t('createRequest.form.descriptionPlaceholder')}\n                />\n                {/* Heftklammer-Icon zum Hinzufgen von Dateien */}\n                <div className=\"relative group absolute bottom-2 left-2\">\n                  <button\n                    type=\"button\"\n                    onClick={() => fileInputRef.current?.click()}\n                    className=\"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none\"\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n                    </svg>\n                  </button>\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                    {t('createRequest.form.addFile')}\n                  </div>\n                </div>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  onChange={handleFileUpload}\n                  className=\"hidden\"\n                />\n                {uploading && (\n                  <div className=\"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-70 dark:bg-opacity-70\">\n                    <span className=\"text-sm text-gray-600 dark:text-gray-300\">{t('createRequest.form.uploading')}</span>\n                  </div>\n                )}\n              </div>\n              {renderTemporaryAttachments()}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.responsible')}</label>\n              <select\n                required\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                value={formData.responsible_id}\n                onChange={(e) => setFormData({ ...formData, responsible_id: e.target.value })}\n              >\n                <option value=\"\">{t('createRequest.form.select')}</option>\n                {Array.isArray(users) && users.map(user => (\n                  <option key={user.id} value={user.id}>\n                    {formatUserName(user)}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.branch')}</label>\n              <select\n                required\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                value={formData.branch_id}\n                onChange={(e) => setFormData({ ...formData, branch_id: e.target.value })}\n              >\n                <option value=\"\">{t('createRequest.form.select')}</option>\n                {Array.isArray(branches) && branches.map(branch => (\n                  <option key={branch.id} value={branch.id}>\n                    {branch.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.type')}</label>\n              <select\n                required\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                value={formData.type}\n                onChange={(e) => handleTypeChange(e.target.value)}\n              >\n                <option value=\"event\">{t('requests.types.event')}</option>\n                <option value=\"repair\">{t('requests.types.repair')}</option>\n                <option value=\"improvement_suggestion\">{t('requests.types.improvement_suggestion')}</option>\n                <option value=\"buy_order\">{t('requests.types.buy_order')}</option>\n                <option value=\"employment_certificate\">{t('requests.types.employment_certificate')}</option>\n                <option value=\"vacation\">{t('requests.types.vacation')}</option>\n                <option value=\"permit\">{t('requests.types.permit')}</option>\n                <option value=\"sick_leave\">{t('requests.types.sick_leave')}</option>\n                <option value=\"other\">{t('requests.types.other')}</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.dueDate')}</label>\n              <input\n                type=\"date\"\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                value={formData.due_date}\n                min={getMinDateForType(formData.type)}\n                onChange={(e) => {\n                  const selectedDate = e.target.value;\n                  const minDate = getMinDateForType(formData.type);\n                  // Validierung: Datum darf nicht vor Mindestdatum liegen\n                  if (selectedDate && selectedDate < minDate) {\n                    // Setze auf Mindestdatum falls ungltig\n                    setFormData({ ...formData, due_date: minDate });\n                  } else {\n                    setFormData({ ...formData, due_date: selectedDate });\n                  }\n                }}\n              />\n            </div>\n\n            <div className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                id=\"is_private_sidepane\"\n                className=\"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:text-gray-300\"\n                checked={formData.is_private}\n                onChange={(e) => setFormData({ ...formData, is_private: e.target.checked })}\n              />\n              <label htmlFor=\"is_private_sidepane\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\n                {t('createRequest.form.isPrivate')}\n              </label>\n            </div>\n\n            <div className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                id=\"create_todo_sidepane\"\n                className=\"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:text-gray-300\"\n                checked={formData.create_todo}\n                onChange={(e) => setFormData({ ...formData, create_todo: e.target.checked })}\n              />\n              <label htmlFor=\"create_todo_sidepane\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\n                {t('createRequest.form.createTodo')}\n              </label>\n            </div>\n\n            <div className=\"flex justify-end pt-4 gap-2\">\n              <div className=\"relative group\">\n                <button\n                  type=\"button\"\n                  onClick={onClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {t('createRequest.form.cancel')}\n                </div>\n              </div>\n              <div className=\"relative group\">\n                <button\n                  type=\"submit\"\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  disabled={loading}\n                >\n                  {loading ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {loading ? t('createRequest.form.creating') : t('createRequest.form.create')}\n                </div>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default CreateRequestModal; ","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS, getRequestAttachmentUrl } from '../config/api.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, TrashIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport MarkdownPreview from './MarkdownPreview.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport { logger } from '../utils/logger.ts';\nimport { getMinDateForType, getDefaultDateForType } from '../utils/requestDateHelpers.ts';\n\n//  MEMORY LEAK FIX: Komponente fr Bildvorschau mit Cleanup\ninterface ImagePreviewWithCleanupProps {\n  file: File;\n  alt: string;\n  blobUrlsRef: React.MutableRefObject<Set<string>>;\n  className?: string;\n}\n\nconst ImagePreviewWithCleanup: React.FC<ImagePreviewWithCleanupProps> = ({ file, alt, blobUrlsRef, className = \"max-w-[200px] max-h-[150px] object-contain\" }) => {\n  const [url, setUrl] = useState<string | null>(null);\n\n  useEffect(() => {\n    const blobUrl = URL.createObjectURL(file);\n    blobUrlsRef.current.add(blobUrl);\n    setUrl(blobUrl);\n\n    return () => {\n      URL.revokeObjectURL(blobUrl);\n      blobUrlsRef.current.delete(blobUrl);\n    };\n  }, [file, blobUrlsRef]);\n\n  if (!url) return null;\n\n  return (\n    <img \n      src={url}\n      alt={alt}\n      className={className}\n    />\n  );\n};\n\ninterface Request {\n  id: number;\n  title: string;\n  status: 'approval' | 'approved' | 'to_improve' | 'denied';\n  type?: 'vacation' | 'improvement_suggestion' | 'sick_leave' | 'employment_certificate' | 'other';\n  isPrivate?: boolean;\n  requestedBy: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  responsible: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  branch: {\n    id: number;\n    name: string;\n  };\n  dueDate: string;\n  createTodo: boolean;\n  description?: string;\n  attachments?: RequestAttachment[];\n}\n\ninterface EditRequestModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onRequestUpdated: (updatedRequest: Request) => void;\n  request: {\n    id: number;\n    title: string;\n    description?: string;\n    type?: 'vacation' | 'improvement_suggestion' | 'sick_leave' | 'employment_certificate' | 'event' | 'permit' | 'buy_order' | 'repair' | 'other';\n    isPrivate?: boolean;\n    responsible: {\n      id: number;\n    };\n    branch: {\n      id: number;\n    };\n    dueDate: string | null;\n    createTodo: boolean;\n    attachments?: RequestAttachment[];\n  };\n}\n\ninterface User {\n  id: number;\n  firstName: string;\n  username: string;\n}\n\ninterface Branch {\n  id: number;\n  name: string;\n}\n\ninterface RequestAttachment {\n  id?: number;\n  fileName: string;\n  fileType: string;\n  fileSize: number;\n  filePath?: string;\n  uploadedAt?: string;\n  file?: File; // Fr temporre Anhnge vor dem Hochladen\n}\n\nconst EditRequestModal = ({\n  isOpen,\n  onClose,\n  onRequestUpdated,\n  request\n}: EditRequestModalProps) => {\n  const { t, i18n } = useTranslation();\n  const { user } = useAuth();\n  \n  // Entferne Bild-Markdown-Links aus der Beschreibung (fr Textarea-Anzeige)\n  const removeImageMarkdown = (text: string): string => {\n    if (!text) return '';\n    // Entferne alle Bild-Markdown-Links: ![alt](url)\n    return text.replace(/!\\[([^\\]]*)\\]\\([^)]+\\)/g, '').trim();\n  };\n  \n  // Debug: Log aktuelle Sprache und verfgbare bersetzungen\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'development') {\n      logger.log('EditRequestModal - Aktuelle Sprache:', i18n.language);\n      logger.log('EditRequestModal - Verfgbare Sprachen:', i18n.languages);\n      logger.log('EditRequestModal - createRequest.editRequest.title:', t('createRequest.editRequest.title'));\n      logger.log('EditRequestModal - createRequest.editRequest.form.title:', t('createRequest.editRequest.form.title'));\n    }\n  }, [i18n.language, t]);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [title, setTitle] = useState(request.title);\n  const [description, setDescription] = useState(removeImageMarkdown(request.description || ''));\n  const [responsibleId, setResponsibleId] = useState(request.responsible.id);\n  const [branchId, setBranchId] = useState(request.branch.id);\n  const [type, setType] = useState<'vacation' | 'improvement_suggestion' | 'sick_leave' | 'employment_certificate' | 'event' | 'permit' | 'buy_order' | 'repair' | 'other'>(request.type || 'other');\n  const [isPrivate, setIsPrivate] = useState(request.isPrivate || false);\n  const [dueDate, setDueDate] = useState(request.dueDate ? request.dueDate.split('T')[0] : '');\n  const [createTodo, setCreateTodo] = useState(request.createTodo);\n  const [users, setUsers] = useState<User[]>([]);\n  const [branches, setBranches] = useState<Branch[]>([]);\n  const [error, setError] = useState<string | null>(null);\n  const [confirmDelete, setConfirmDelete] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [attachments, setAttachments] = useState<RequestAttachment[]>(request.attachments || []);\n  const [uploading, setUploading] = useState(false);\n  const [temporaryAttachments, setTemporaryAttachments] = useState<RequestAttachment[]>([]);\n  // Liste der whrend der Bearbeitung hochgeladenen Attachments (fr Cleanup bei Abbrechen)\n  const [uploadedDuringEdit, setUploadedDuringEdit] = useState<number[]>([]);\n  \n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  //  MEMORY LEAK FIX: Track Blob-URLs fr Cleanup\n  const blobUrlsRef = useRef<Set<string>>(new Set());\n  //  MEMORY LEAK FIX: Track Timeout-IDs fr Cleanup\n  const timeoutRef = useRef<NodeJS.Timeout | null>(null);\n  \n  // Type-Change Handler\n  const handleTypeChange = (newType: string) => {\n    const newMinDate = getMinDateForType(newType);\n    const newDefaultDate = getDefaultDateForType(newType);\n    \n    setType(newType as any);\n    \n    // Wenn aktuelles dueDate vor dem neuen Mindestdatum liegt, setze auf neues Default-Datum\n    const currentDate = dueDate ? new Date(dueDate) : null;\n    const minDate = new Date(newMinDate);\n    \n    if (!currentDate || currentDate < minDate) {\n      setDueDate(newDefaultDate);\n    }\n  };\n  \n  const { hasPermission } = usePermissions();\n  const canDeleteRequest = hasPermission('requests', 'both', 'table');\n\n  // Cleanup: Lsche hochgeladene Attachments wenn Modal ohne Speichern geschlossen wird\n  useEffect(() => {\n    if (!isOpen && uploadedDuringEdit.length > 0) {\n      // Modal wurde geschlossen - lsche alle whrend der Bearbeitung hochgeladenen Attachments\n      const cleanup = async () => {\n        for (const attachmentId of uploadedDuringEdit) {\n          try {\n            await axiosInstance.delete(API_ENDPOINTS.REQUESTS.ATTACHMENT(request.id, attachmentId));\n            logger.log(`Attachment ${attachmentId} gelscht (Modal ohne Speichern geschlossen)`);\n          } catch (err) {\n            console.error(`Fehler beim Lschen von Attachment ${attachmentId}:`, err);\n          }\n        }\n        setUploadedDuringEdit([]);\n      };\n      cleanup();\n    }\n  }, [isOpen, uploadedDuringEdit, request.id]);\n\n  // Responsive Design: berwache Fensterbreite\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n\n    // Initialer Check\n    checkScreenSize();\n\n    // Event Listener fr Grennderungen\n    window.addEventListener('resize', checkScreenSize);\n\n    // Cleanup\n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  //  MEMORY LEAK FIX: Cleanup Blob-URLs beim Unmount\n  useEffect(() => {\n    return () => {\n      blobUrlsRef.current.forEach(url => {\n        URL.revokeObjectURL(url);\n      });\n      blobUrlsRef.current.clear();\n    };\n  }, []);\n\n  //  MEMORY LEAK FIX: Cleanup Timeout bei Modal-Schlieung\n  useEffect(() => {\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n        timeoutRef.current = null;\n      }\n    };\n  }, [isOpen]);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchData();\n      fetchAttachments();\n      // Aktualisiere State wenn Request-Props sich ndern\n      const requestType = request.type || 'other';\n      const requestDueDate = request.dueDate ? request.dueDate.split('T')[0] : '';\n      \n      setTitle(request.title);\n      setDescription(removeImageMarkdown(request.description || ''));\n      setResponsibleId(request.responsible.id);\n      setBranchId(request.branch.id);\n      setType(requestType);\n      setIsPrivate(request.isPrivate || false);\n      setCreateTodo(request.createTodo);\n      \n      // Validiere und passe Due Date an, wenn es nicht dem Type entspricht\n      if (requestDueDate) {\n        const minDate = getMinDateForType(requestType);\n        if (requestDueDate < minDate) {\n          // Datum liegt vor Mindestdatum - setze auf Default-Datum fr diesen Type\n          setDueDate(getDefaultDateForType(requestType));\n        } else {\n          setDueDate(requestDueDate);\n        }\n      } else {\n        // Kein Datum vorhanden - setze Default-Datum fr diesen Type\n        setDueDate(getDefaultDateForType(requestType));\n      }\n    }\n  }, [isOpen, request]);\n\n  const fetchData = async () => {\n    try {\n      setError(null);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError(t('createRequest.editRequest.errors.notAuthenticated'));\n        return;\n      }\n\n      const [usersResponse, branchesResponse] = await Promise.all([\n        axiosInstance.get(API_ENDPOINTS.USERS.DROPDOWN),\n        axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE)\n      ]);\n\n      setUsers(usersResponse.data || []);\n      setBranches(branchesResponse.data || []);\n    } catch (err) {\n      console.error('Unerwarteter Fehler:', err);\n      \n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      if (axiosError.code === 'ERR_NETWORK') {\n        setError(t('createRequest.editRequest.errors.connectionError'));\n      } else {\n        setError(`${t('createRequest.editRequest.errors.loadError')}: ${axiosError.response?.data?.message || axiosError.message}`);\n      }\n    }\n  };\n\n  const fetchAttachments = async () => {\n    try {\n      setError(null);\n      const response = await axiosInstance.get(API_ENDPOINTS.REQUESTS.ATTACHMENTS(request.id));\n      setAttachments(response.data || []);\n    } catch (err) {\n      console.error('Fehler beim Laden der Anhnge:', err);\n      // Setze eine leere Anhangliste im Fehlerfall, damit die Komponente nicht abstrzt\n      setAttachments([]);\n      \n      // Zeige einen benutzerfreundlichen Fehler an, aber lass die Komponente weiterlaufen\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      const errorMessage = axiosError.response?.data?.message || axiosError.message;\n      console.warn(`Anhnge konnten nicht geladen werden: ${errorMessage}`);\n      // Setze keinen Fehler in state, damit der Dialog trotzdem nutzbar bleibt\n      // Nur Warnung in der Konsole\n    }\n  };\n\n  const handlePaste = async (event: React.ClipboardEvent) => {\n    const items = event.clipboardData.items;\n    \n    for (let i = 0; i < items.length; i++) {\n      const item = items[i];\n      \n      // Prfen, ob das eingefgte Element ein Bild ist\n      if (item.type.indexOf('image') === 0) {\n        event.preventDefault(); // Standardeingabe verhindern\n        \n        const file = item.getAsFile();\n        if (file) {\n          await uploadFileAndInsertLink(file);\n        }\n        return;\n      }\n    }\n  };\n\n  const handleDrop = async (event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n    \n    if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\n      const file = event.dataTransfer.files[0];\n      // Bei Edit-Modals sofort hochladen (wie bei Tasks)\n      await uploadFileAndInsertLink(file);\n    }\n  };\n\n  const handleDragOver = (event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  const uploadFileAndInsertLink = async (file: File) => {\n    setUploading(true);\n    setError(null);\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n\n      const response = await axiosInstance.post(\n        API_ENDPOINTS.REQUESTS.ATTACHMENTS(request.id),\n        formData,\n        {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        }\n      );\n\n      const newAttachment = response.data;\n      setAttachments([...attachments, newAttachment]);\n      // Merke diese Attachment-ID fr mgliches Cleanup\n      setUploadedDuringEdit(prev => [...prev, newAttachment.id]);\n\n      // Fr Bilder: KEIN Markdown-Link ins Textarea einfgen (wird beim Speichern automatisch hinzugefgt)\n      // Fr andere Dateien: Link ins Textarea einfgen\n      if (!newAttachment.fileType.startsWith('image/')) {\n        const insertText = `\\n[${newAttachment.fileName}](${getRequestAttachmentUrl(request.id, newAttachment.id)})\\n`;\n        \n        // Fge den Link an der aktuellen Cursorposition ein\n        if (textareaRef.current) {\n          const cursorPos = textareaRef.current.selectionStart;\n          const textBefore = description.substring(0, cursorPos);\n          const textAfter = description.substring(cursorPos);\n          \n          setDescription(textBefore + insertText + textAfter);\n          \n          // Setze den Cursor hinter den eingefgten Link\n          //  MEMORY LEAK FIX: Timeout-ID speichern und cleanup\n          if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current);\n          }\n          timeoutRef.current = setTimeout(() => {\n            if (textareaRef.current) {\n              const newPos = cursorPos + insertText.length;\n              textareaRef.current.selectionStart = newPos;\n              textareaRef.current.selectionEnd = newPos;\n              textareaRef.current.focus();\n            }\n            timeoutRef.current = null;\n          }, 0);\n        } else {\n          setDescription(description + insertText);\n        }\n      }\n\n      // Erstelle ein Element fr das Vorschaubild und fge es dem Dokument hinzu\n      const img = document.createElement('img');\n      img.src = getRequestAttachmentUrl(request.id, newAttachment.id);\n      img.alt = newAttachment.fileName;\n      img.classList.add('hidden'); // Verstecken\n\n      document.body.appendChild(img);\n\n      // Warte bis das Bild geladen ist und bestimme dann seine Dimensionen\n      img.onload = () => {\n        document.body.removeChild(img);\n\n        // Je nach Gre entscheide, ob ein groes oder kleines Bild eingefgt wird\n      }\n    } catch (err) {\n      console.error('Fehler beim Hochladen der Datei:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n    if (!files || files.length === 0) return;\n\n    const file = files[0];\n    // Bei Edit-Modals sofort hochladen (wie bei Tasks)\n    await uploadFileAndInsertLink(file);\n    \n    // Zurcksetzen des Datei-Inputs\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleDeleteAttachment = async (attachmentId: number) => {\n    try {\n      setError(null);\n      \n      // Finde den zu entfernenden Anhang\n      const attachmentToRemove = attachments.find(a => a.id === attachmentId);\n      \n      if (attachmentToRemove) {\n        await axiosInstance.delete(API_ENDPOINTS.REQUESTS.ATTACHMENT(request.id, attachmentId));\n        \n        // Entferne den Anhang aus der Liste\n        setAttachments(attachments.filter(attachment => attachment.id !== attachmentId));\n        \n        // Entferne auch die Verweise im Beschreibungstext\n        if (attachmentToRemove.fileName) {\n          // Erzeuge URL-Muster fr diesen Anhang\n          const escapedFileName = attachmentToRemove.fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n          \n          // Suche nach Bild- und Link-Markdown\n          const imagePattern = new RegExp(`!\\\\[(.*?)\\\\]\\\\(${escapedFileName}\\\\)`, 'g');\n          const linkPattern = new RegExp(`\\\\[(.*?)\\\\]\\\\(${escapedFileName}\\\\)`, 'g');\n          \n          // Bereinige die Beschreibung\n          const newDescription = description\n            .replace(imagePattern, '')\n            .replace(linkPattern, '')\n            // Entferne berschssige Leerzeilen, die durch das Entfernen entstehen knnten\n            .replace(/\\n{3,}/g, '\\n\\n');\n          \n          setDescription(newDescription);\n        }\n      }\n    } catch (err) {\n      console.error('Fehler beim Lschen des Anhangs:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    }\n  };\n\n  const handleDownloadAttachment = async (attachment: RequestAttachment) => {\n    try {\n      if (attachment.id === undefined) {\n        throw new Error('Anhang-ID fehlt');\n      }\n      const response = await axiosInstance.get(\n        API_ENDPOINTS.REQUESTS.ATTACHMENT(request.id, attachment.id),\n        { responseType: 'blob' }\n      );\n      \n      // Blob-URL erstellen und Download auslsen\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', attachment.fileName);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n      //  MEMORY LEAK FIX: URL nach Verwendung freigeben\n      window.URL.revokeObjectURL(url);\n    } catch (err) {\n      console.error('Fehler beim Herunterladen des Anhangs:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setLoading(true);\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) throw new Error(t('createRequest.editRequest.errors.notAuthenticated'));\n      \n      // Keine Validierung notwendig, da bereits Zahlen vorliegen\n      // Direkte Verwendung der Zustnde\n\n      // Verwende description (vom Textarea) als Basis\n      // Fge Markdown-Links fr Bilder automatisch hinzu (falls noch nicht vorhanden)\n      const originalDescription = request.description || '';\n      let finalDescription = description || ''; // WICHTIG: Verwende description als Basis, nicht originalDescription\n      const imageAttachments = attachments.filter(att => att.fileType?.startsWith('image/') && att.id);\n      \n      // Extrahiere bereits vorhandene Bilder aus originalDescription (falls vorhanden)\n      const existingImagePattern = /!\\[([^\\]]*)\\]\\([^)]+\\)/g;\n      const existingImages: string[] = [];\n      let match;\n      if (originalDescription) {\n        while ((match = existingImagePattern.exec(originalDescription)) !== null) {\n          existingImages.push(match[0]);\n        }\n      }\n      \n      // Fge alle Bilder hinzu (sowohl neue als auch bereits vorhandene)\n      for (const attachment of imageAttachments) {\n        const imageUrl = getRequestAttachmentUrl(request.id, attachment.id!);\n        const imageMarkdown = `![${attachment.fileName}](${imageUrl})`;\n        \n        // Prfe, ob dieser Bild-Link bereits in der Beschreibung vorhanden ist\n        const escapedFileName = attachment.fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n        const imagePattern = new RegExp(`!\\\\[${escapedFileName}\\\\]\\\\([^)]+\\\\)`, 'g');\n        \n        if (!imagePattern.test(finalDescription)) {\n          // Bild-Link ist noch nicht in der Beschreibung, fge ihn hinzu\n          finalDescription = finalDescription ? `${finalDescription}\\n${imageMarkdown}` : imageMarkdown;\n        }\n      }\n      \n      // Fge auch bereits vorhandene Bilder hinzu, die nicht in attachments sind (z.B. von anderen Quellen)\n      for (const existingImage of existingImages) {\n        if (!finalDescription.includes(existingImage)) {\n          finalDescription = finalDescription ? `${finalDescription}\\n${existingImage}` : existingImage;\n        }\n      }\n\n      await axiosInstance.put(API_ENDPOINTS.REQUESTS.BY_ID(request.id), {\n        title: title,\n        description: finalDescription,\n        responsible_id: responsibleId,\n        branch_id: branchId,\n        type: type,\n        is_private: isPrivate,\n        due_date: dueDate || null,\n        create_todo: createTodo,\n      });\n\n      // Hole den aktualisierten Request vom Server (inkl. Attachments)\n      const updatedResponse = await axiosInstance.get(API_ENDPOINTS.REQUESTS.BY_ID(request.id));\n      \n      // Attachments sind bereits in der Response enthalten\n      // URL-Generierung fr Attachments hinzufgen\n      if (updatedResponse.data.attachments) {\n        updatedResponse.data.attachments = updatedResponse.data.attachments.map((att: any) => ({\n          id: att.id,\n          fileName: att.fileName,\n          fileType: att.fileType,\n          fileSize: att.fileSize,\n          filePath: att.filePath,\n          uploadedAt: att.uploadedAt,\n          url: getRequestAttachmentUrl(request.id, att.id)\n        }));\n      } else {\n        updatedResponse.data.attachments = [];\n      }\n\n      // Erfolgreiches Update - Schliee das Modal\n      // Reset uploadedDuringEdit da erfolgreich gespeichert\n      setUploadedDuringEdit([]);\n      onClose();\n      if (onRequestUpdated) {\n        // bergebe den aktualisierten Request an den Callback\n        onRequestUpdated(updatedResponse.data);\n      }\n    } catch (err) {\n      console.error('Fehler beim Aktualisieren des Requests:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    if (!confirmDelete) {\n      setConfirmDelete(true);\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      \n      await axiosInstance.delete(API_ENDPOINTS.REQUESTS.BY_ID(request.id));\n\n      // Beim Lschen brauchen wir keinen Request-Update, aber der Callback wird fr Konsistenz aufgerufen\n      // Der Parent muss die Liste aktualisieren (wird in Requests.tsx implementiert)\n      onClose();\n    } catch (err) {\n      console.error('Delete Error:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRemoveTemporaryAttachment = (index: number) => {\n    // Finde den zu entfernenden Anhang\n    const attachmentToRemove = temporaryAttachments[index];\n    \n    if (attachmentToRemove) {\n      // Entferne den Anhang aus dem temporaryAttachments-Array\n      setTemporaryAttachments(temporaryAttachments.filter((_, i) => i !== index));\n      \n      // Entferne auch den Verweis im Beschreibungstext\n      if (attachmentToRemove.fileName) {\n        // Suche nach Bild- und Link-Markdown mit dem Dateinamen\n        const escapedFileName = attachmentToRemove.fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n        const uploadText = t('createRequest.editRequest.form.uploadAfterCreate');\n        const imagePattern = new RegExp(`!\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n        const linkPattern = new RegExp(`\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n        \n        // Bereinige die Beschreibung\n        const newDescription = description\n          .replace(imagePattern, '')\n          .replace(linkPattern, '')\n          // Entferne berschssige Leerzeilen, die durch das Entfernen entstehen knnten\n          .replace(/\\n{3,}/g, '\\n\\n');\n        \n        setDescription(newDescription);\n      }\n    }\n  };\n\n  const handleTemporaryAttachment = async (file: File) => {\n    setUploading(true);\n    setError(null);\n\n    try {\n      // Erstelle einen temporren Anhang\n      const newAttachment: RequestAttachment = {\n        fileName: file.name,\n        fileType: file.type,\n        fileSize: file.size,\n        file: file // Speichern der Datei fr spteren Upload\n      };\n      \n      setTemporaryAttachments(prev => [...prev, newAttachment]);\n\n      // Fr Bilder: KEIN Markdown-Link ins Textarea einfgen (wird beim Speichern automatisch hinzugefgt)\n      // Fr andere Dateien: Link ins Textarea einfgen\n      if (!file.type.startsWith('image/')) {\n        const insertText = `\\n[${file.name}](${t('createRequest.editRequest.form.uploadAfterCreate')})\\n`;\n        \n        // Fge den Link an der aktuellen Cursorposition ein\n        if (textareaRef.current) {\n          const cursorPos = textareaRef.current.selectionStart;\n          const textBefore = description.substring(0, cursorPos);\n          const textAfter = description.substring(cursorPos);\n          \n          setDescription(textBefore + insertText + textAfter);\n          \n          // Setze den Cursor hinter den eingefgten Link\n          //  MEMORY LEAK FIX: Timeout-ID speichern und cleanup\n          if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current);\n          }\n          timeoutRef.current = setTimeout(() => {\n            if (textareaRef.current) {\n              const newPos = cursorPos + insertText.length;\n              textareaRef.current.selectionStart = newPos;\n              textareaRef.current.selectionEnd = newPos;\n              textareaRef.current.focus();\n            }\n            timeoutRef.current = null;\n          }, 0);\n        } else {\n          setDescription(description + insertText);\n        }\n      }\n    } catch (err) {\n      console.error('Fehler beim Verarbeiten der Datei:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const uploadTemporaryAttachments = async () => {\n    if (temporaryAttachments.length === 0) return;\n    \n    try {\n      setLoading(true);\n      \n      let updatedDescription = description;\n      const uploadText = t('createRequest.editRequest.form.uploadAfterCreate');\n      \n      // Upload jeder temporren Datei und aktualisiere die URLs im Beschreibungstext\n      for (const attachment of temporaryAttachments) {\n        if (!attachment.file) continue;\n        \n        const formData = new FormData();\n        formData.append('file', attachment.file);\n        \n        const response = await axiosInstance.post(\n          API_ENDPOINTS.REQUESTS.ATTACHMENTS(request.id),\n          formData,\n          {\n            headers: {\n              'Content-Type': 'multipart/form-data',\n            },\n          }\n        );\n        \n        const newAttachment = response.data;\n        \n        // Fr Bilder: Prfe, ob bereits im Text vorhanden, sonst hinzufgen\n        if (newAttachment.fileType.startsWith('image/')) {\n          const fileName = attachment.fileName;\n          const escapedFileName = fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n          const imagePattern = new RegExp(`!\\\\[${escapedFileName}\\\\]\\\\([^)]+\\\\)`, 'g');\n          \n          if (!imagePattern.test(updatedDescription)) {\n            // Bild-Link ist noch nicht in der Beschreibung, fge ihn hinzu\n            const realUrl = getRequestAttachmentUrl(request.id, newAttachment.id);\n            updatedDescription = updatedDescription ? `${updatedDescription}\\n![${fileName}](${realUrl})` : `![${fileName}](${realUrl})`;\n          } else {\n            // Ersetze Platzhalter durch echte URL, falls vorhanden\n            const placeholderPattern = new RegExp(`!\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n            const realUrl = getRequestAttachmentUrl(request.id, newAttachment.id);\n            updatedDescription = updatedDescription.replace(placeholderPattern, `![${fileName}](${realUrl})`);\n          }\n        } else {\n          // Fr andere Dateien: Ersetze Platzhalter durch echte URL\n          const fileName = attachment.fileName;\n          const escapedFileName = fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n          const placeholderLinkPattern = new RegExp(`\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n          const realUrl = getRequestAttachmentUrl(request.id, newAttachment.id);\n          updatedDescription = updatedDescription.replace(placeholderLinkPattern, `[${fileName}](${realUrl})`);\n        }\n      }\n      \n      // Aktualisiere die Beschreibung mit den echten URLs\n      if (updatedDescription !== description) {\n        await axiosInstance.put(API_ENDPOINTS.REQUESTS.BY_ID(request.id), {\n          title: title,\n          description: updatedDescription,\n          responsible_id: responsibleId,\n          branch_id: branchId,\n          due_date: dueDate || null,\n          create_todo: createTodo,\n        });\n        setDescription(updatedDescription);\n      }\n      \n      logger.log(`${temporaryAttachments.length} Anhnge erfolgreich hochgeladen.`);\n      // Nach erfolgreichem Upload leeren wir die temporren Anhnge\n      setTemporaryAttachments([]);\n    } catch (err) {\n      console.error('Fehler beim Hochladen der Anhnge:', err);\n      // Wir zeigen hier keinen Fehler, da der Request bereits aktualisiert wurde\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderAttachments = () => {\n    if (attachments.length === 0) return null;\n    \n    return (\n      <div className=\"mt-2\">\n        <ul className=\"flex flex-wrap gap-2\">\n          {attachments.map((attachment) => (\n            <li key={attachment.id || `temp-${attachment.fileName}`} className=\"inline-flex items-center bg-gray-100 rounded-md px-2 py-1 relative group\">\n              <span className=\"text-sm font-medium text-gray-800\">\n                {attachment.fileName}\n              </span>\n              <div className=\"flex ml-2\">\n                <div className=\"relative group mr-1\">\n                  <button\n                    type=\"button\"\n                    onClick={() => handleDownloadAttachment(attachment)}\n                    className=\"text-blue-600 hover:text-blue-900\"\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n                    </svg>\n                  </button>\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                    {t('createRequest.editRequest.form.download')}\n                  </div>\n                </div>\n                <div className=\"relative group ml-1\">\n                  <button\n                    type=\"button\"\n                    onClick={() => attachment.id !== undefined && handleDeleteAttachment(attachment.id)}\n                    className=\"text-red-600 hover:text-red-900\"\n                    disabled={attachment.id === undefined}\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                    {t('createRequest.editRequest.form.remove')}\n                  </div>\n                </div>\n              </div>\n              {/* Tooltip fr Bildvorschau bei Bild-Dateien */}\n              {attachment.fileType.startsWith('image/') && attachment.id && (\n                <div className=\"absolute z-10 bg-white p-2 rounded-md shadow-lg -top-32 left-0 border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none\">\n                  <img \n                    src={getRequestAttachmentUrl(request.id, attachment.id)}\n                    alt={attachment.fileName}\n                    className=\"max-w-[200px] max-h-[150px] object-contain\"\n                  />\n                </div>\n              )}\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  };\n\n  const renderTemporaryAttachments = () => {\n    if (temporaryAttachments.length === 0) return null;\n    \n    return (\n      <div className=\"mt-2\">\n        <ul className=\"flex flex-wrap gap-2\">\n          {temporaryAttachments.map((attachment, index) => (\n            <li key={`temp-${index}`} className=\"inline-flex items-center bg-gray-100 rounded-md px-2 py-1 relative group\">\n              <span className=\"text-sm font-medium text-gray-800\">\n                {attachment.fileName}\n              </span>\n              <div className=\"flex ml-2\">\n                <div className=\"relative group ml-1\">\n                  <button\n                    type=\"button\"\n                    onClick={() => handleRemoveTemporaryAttachment(index)}\n                    className=\"text-red-600 hover:text-red-900\"\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                    {t('createRequest.editRequest.form.remove')}\n                  </div>\n                </div>\n              </div>\n              {/* Tooltip fr Bildvorschau bei Bild-Dateien */}\n              {attachment.fileType.startsWith('image/') && attachment.file && (\n                <div className=\"absolute z-10 bg-white p-2 rounded-md shadow-lg -top-32 left-0 border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none\">\n                  <ImagePreviewWithCleanup file={attachment.file} alt={attachment.fileName} blobUrlsRef={blobUrlsRef} />\n                </div>\n              )}\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  };\n\n  if (!isOpen) return null;\n\n  const renderForm = () => (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.editRequest.form.title')}</label>\n        <input\n          type=\"text\"\n          required\n          className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n        />\n      </div>\n\n      <div>\n        <label htmlFor=\"description_request_edit\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('createRequest.editRequest.form.description')}\n        </label>\n        <div className=\"relative\">\n          <textarea\n            ref={textareaRef}\n            rows={isMobile ? 5 : 10}\n            className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            onPaste={handlePaste}\n            onDrop={handleDrop}\n            onDragOver={handleDragOver}\n          />\n          {/* Heftklammer-Icon zum Hinzufgen von Dateien */}\n          <div className=\"relative group absolute bottom-2 left-2\">\n            <button\n              type=\"button\"\n              onClick={() => fileInputRef.current?.click()}\n              className=\"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n              </svg>\n            </button>\n            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n              {t('createRequest.editRequest.form.fileUpload')}\n            </div>\n          </div>\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            onChange={handleFileUpload}\n            className=\"hidden\"\n          />\n          {uploading && (\n            <div className=\"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-70 dark:bg-opacity-70\">\n              <span className=\"text-sm text-gray-600 dark:text-gray-300\">{t('createRequest.editRequest.form.uploading')}</span>\n            </div>\n          )}\n        </div>\n        {renderAttachments()}\n        {renderTemporaryAttachments()}\n        {/* Bilder werden NICHT ins Textarea eingefgt */}\n        {/* Beim Speichern werden sie automatisch zum Markdown-Text hinzugefgt (fr Card-Anzeige) */}\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.editRequest.form.responsible')}</label>\n        <select\n          className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n          value={responsibleId}\n          onChange={(e) => setResponsibleId(Number(e.target.value))}\n        >\n          {users.map(user => (\n            <option key={user.id} value={user.id}>\n              {user.firstName} ({user.username})\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.editRequest.form.branch')}</label>\n        <select\n          className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n          value={branchId}\n          onChange={(e) => setBranchId(Number(e.target.value))}\n        >\n          {branches.map(branch => (\n            <option key={branch.id} value={branch.id}>\n              {branch.name}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.editRequest.form.type')}</label>\n        <select\n          className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n          value={type}\n          onChange={(e) => handleTypeChange(e.target.value)}\n        >\n          <option value=\"event\">{t('requests.types.event')}</option>\n          <option value=\"repair\">{t('requests.types.repair')}</option>\n          <option value=\"improvement_suggestion\">{t('requests.types.improvement_suggestion')}</option>\n          <option value=\"buy_order\">{t('requests.types.buy_order')}</option>\n          <option value=\"employment_certificate\">{t('requests.types.employment_certificate')}</option>\n          <option value=\"vacation\">{t('requests.types.vacation')}</option>\n          <option value=\"permit\">{t('requests.types.permit')}</option>\n          <option value=\"sick_leave\">{t('requests.types.sick_leave')}</option>\n          <option value=\"other\">{t('requests.types.other')}</option>\n        </select>\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.editRequest.form.dueDate')}</label>\n        <input\n          type=\"date\"\n          className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n          value={dueDate}\n          min={getMinDateForType(type)}\n          onChange={(e) => {\n            const selectedDate = e.target.value;\n            const minDate = getMinDateForType(type);\n            // Validierung: Datum darf nicht vor Mindestdatum liegen\n            if (selectedDate && selectedDate < minDate) {\n              // Setze auf Mindestdatum falls ungltig\n              setDueDate(minDate);\n            } else {\n              setDueDate(selectedDate);\n            }\n          }}\n        />\n      </div>\n\n      <div className=\"flex items-center\">\n        <input\n          type=\"checkbox\"\n          id=\"is_private_edit\"\n          className=\"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:border-gray-600\"\n          checked={isPrivate}\n          onChange={(e) => setIsPrivate(e.target.checked)}\n        />\n        <label htmlFor=\"is_private_edit\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\n          {t('createRequest.editRequest.form.isPrivate')}\n        </label>\n      </div>\n\n      <div className=\"flex items-center\">\n        <input\n          type=\"checkbox\"\n          id=\"create_todo_edit\"\n          className=\"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:border-gray-600\"\n          checked={createTodo}\n          onChange={(e) => setCreateTodo(e.target.checked)}\n        />\n        <label htmlFor=\"create_todo_edit\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\n          {t('createRequest.editRequest.form.createTodo')}\n        </label>\n      </div>\n\n      <div className=\"flex justify-between pt-4\">\n        {canDeleteRequest && (\n          <button\n            type=\"button\"\n            onClick={handleDelete}\n            className={`p-2 rounded-md ${\n              confirmDelete\n                ? 'bg-red-600 text-white dark:bg-red-700 dark:text-white hover:bg-red-700 dark:hover:bg-red-600'\n                : 'text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300'\n            }`}\n            title={confirmDelete ? t('createRequest.editRequest.form.confirmDelete') : t('createRequest.editRequest.form.delete')}\n          >\n            {confirmDelete ? (\n              <CheckIcon className=\"h-5 w-5\" />\n            ) : (\n              <TrashIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n        )}\n        <div className=\"flex gap-2\">\n          <div className=\"relative group\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n              {t('createRequest.editRequest.form.cancel')}\n            </div>\n          </div>\n          <div className=\"relative group\">\n            <button\n              type=\"submit\"\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              disabled={loading}\n            >\n              {loading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <CheckIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n              {loading ? t('createRequest.editRequest.form.saving') : t('createRequest.editRequest.form.save')}\n            </div>\n          </div>\n        </div>\n      </div>\n    </form>\n  );\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('createRequest.editRequest.title')}\n              </Dialog.Title>\n              <button\n                onClick={onClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <div className=\"p-4\">\n              {error && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {error}\n                </div>\n              )}\n\n              {renderForm()}\n            </div>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={onClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('createRequest.editRequest.title')}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {error && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {error}\n            </div>\n          )}\n\n          {renderForm()}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default EditRequestModal; ","import React, { useEffect, useState, useMemo, useCallback, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { CircularProgress } from '@mui/material';\nimport axiosInstance from '../config/axios.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useTableSettings } from '../hooks/useTableSettings.ts';\nimport { useFilterContext } from '../contexts/FilterContext.tsx';\nimport CreateRequestModal from './CreateRequestModal.tsx';\nimport EditRequestModal from './EditRequestModal.tsx';\nimport TableColumnConfig from './TableColumnConfig.tsx';\nimport FilterPane from './FilterPane.tsx';\nimport SavedFilterTags from './SavedFilterTags.tsx';\nimport { FilterCondition } from './FilterRow.tsx';\nimport { applyFilters, evaluateDateCondition, evaluateUserRoleCondition } from '../utils/filterLogic.ts';\nimport { getStatusColor, getStatusText } from '../utils/statusUtils.tsx';\nimport { API_ENDPOINTS, getRequestAttachmentUrl } from '../config/api.ts';\nimport { \n  PlusIcon,\n  CheckIcon, \n  XMarkIcon,\n  ArrowPathIcon,\n  ExclamationTriangleIcon,\n  PencilIcon,\n  ArrowsUpDownIcon,\n  FunnelIcon,\n  DocumentTextIcon,\n  DocumentDuplicateIcon,\n  InformationCircleIcon,\n  Squares2X2Icon,\n  TableCellsIcon,\n  UserIcon,\n  ChevronDownIcon,\n  BuildingOfficeIcon,\n  CalendarIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon\n} from '@heroicons/react/24/outline';\nimport { format } from 'date-fns';\nimport { de } from 'date-fns/locale';\nimport MarkdownPreview from './MarkdownPreview.tsx';\nimport DataCard, { MetadataItem } from './shared/DataCard.tsx';\nimport CardGrid from './shared/CardGrid.tsx';\nimport ResponsiveLabel from './shared/ResponsiveLabel.tsx';\nimport { getExpiryStatus, getExpiryColorClasses, createDueDateMetadataItem } from '../utils/expiryUtils.ts';\n\n// Helper-Funktion fr Request-Typ-Icons\nconst getRequestTypeIcon = (type?: string): string => {\n  switch (type) {\n    case 'vacation':\n      return '';\n    case 'improvement_suggestion':\n      return '';\n    case 'sick_leave':\n      return '';\n    case 'employment_certificate':\n      return '';\n    case 'event':\n      return '';\n    case 'permit':\n      return '';\n    case 'buy_order':\n      return '';\n    case 'repair':\n      return '';\n    case 'other':\n    default:\n      return '';\n  }\n};\n\ninterface Request {\n  id: number;\n  title: string;\n  status: 'approval' | 'approved' | 'to_improve' | 'denied';\n  type?: 'vacation' | 'improvement_suggestion' | 'sick_leave' | 'employment_certificate' | 'other';\n  isPrivate?: boolean;\n  requestedBy: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  responsible: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  branch: {\n    id: number;\n    name: string;\n  };\n  dueDate: string;\n  createTodo: boolean;\n  description?: string;\n  attachments?: Array<{\n    id: number;\n    fileName: string;\n    fileType: string;\n    fileSize?: number;\n    filePath?: string;\n    uploadedAt?: string;\n    url: string;\n  }>;\n}\n\ninterface SortConfig {\n  key: keyof Request | 'requestedBy.firstName' | 'responsible.firstName' | 'branch.name' | 'type';\n  direction: 'asc' | 'desc';\n}\n\n// Definition der verfgbaren Spalten - werden dynamisch aus bersetzungen geladen\n\n// Standardreihenfolge der Spalten\nconst defaultColumnOrder = ['title', 'requestedByResponsible', 'status', 'type', 'dueDate', 'branch', 'actions'];\n\n// TableID fr gespeicherte Filter\nconst REQUESTS_TABLE_ID = 'requests-table';\n\n// Maximale Anzahl Requests im Memory (verhindert Memory Leaks bei Infinite Scroll)\nconst MAX_REQUESTS = 200;\n\n// Mapping zwischen Tabellen-Spalten-IDs und Card-Metadaten-IDs\n// Tabellen-Spalte -> Card-Metadaten (kann Array sein fr 1:N Mapping)\nconst tableToCardMapping: Record<string, string[]> = {\n  'title': ['title'],\n  'status': ['status'],\n  'type': ['type'],\n  'requestedByResponsible': ['requestedBy', 'responsible'], // 1 Tabelle-Spalte -> 2 Card-Metadaten\n  'branch': ['branch'],\n  'dueDate': ['dueDate'],\n  'actions': [], // Keine Card-Entsprechung\n  'description': ['description'] // Nur in Cards verfgbar\n};\n\n// Reverse Mapping: Card-Metadaten -> Tabellen-Spalten\nconst cardToTableMapping: Record<string, string> = {\n  'title': 'title',\n  'status': 'status',\n  'type': 'type',\n  'requestedBy': 'requestedByResponsible',\n  'responsible': 'requestedByResponsible',\n  'branch': 'branch',\n  'dueDate': 'dueDate',\n  'description': 'description'\n};\n\n// Helfer-Funktion: Tabellen-Spalte ausgeblendet -> Card-Metadaten ausblenden\n// WICHTIG: 'type' wird NICHT ausgeblendet, auch wenn die Tabellen-Spalte ausgeblendet ist\n// WICHTIG: Fr 'requestedByResponsible' werden die Metadaten separat verwaltet\nconst getHiddenCardMetadata = (hiddenTableColumns: string[]): Set<string> => {\n  const hiddenCardMetadata = new Set<string>();\n  const requestedByResponsibleHidden = hiddenTableColumns.includes('requestedByResponsible');\n  \n  hiddenTableColumns.forEach(tableCol => {\n    // 'type' wird immer angezeigt, auch wenn Tabellen-Spalte ausgeblendet ist\n    if (tableCol === 'type') {\n      return; // berspringe 'type', damit es immer sichtbar bleibt\n    }\n    \n    // Spezielle Behandlung fr requestedByResponsible: Wenn ausgeblendet, werden beide Metadaten ausgeblendet\n    if (tableCol === 'requestedByResponsible') {\n      if (requestedByResponsibleHidden) {\n        hiddenCardMetadata.add('requestedBy');\n        hiddenCardMetadata.add('responsible');\n      }\n      return; // berspringe, da wir es bereits behandelt haben\n    }\n    \n    const cardMetadata = tableToCardMapping[tableCol] || [];\n    cardMetadata.forEach(cardMeta => {\n      // Auch hier: 'type' nicht ausblenden\n      if (cardMeta !== 'type') {\n        hiddenCardMetadata.add(cardMeta);\n      }\n    });\n  });\n  return hiddenCardMetadata;\n};\n\n// Helfer-Funktion: Card-Metadaten zu Tabellen-Spalten konvertieren\nconst getCardMetadataFromColumnOrder = (columnOrder: string[]): string[] => {\n  const cardMetadata: string[] = [];\n  columnOrder.forEach(tableCol => {\n    const cardMeta = tableToCardMapping[tableCol];\n    if (cardMeta && cardMeta.length > 0) {\n      cardMetadata.push(...cardMeta);\n    }\n  });\n  // Sicherstellen, dass 'type' immer verfgbar ist (auch wenn in Tabellen-Ansicht ausgeblendet)\n  if (!cardMetadata.includes('type')) {\n    cardMetadata.push('type');\n  }\n  // Sicherstellen, dass requestedBy und responsible immer verfgbar sind, wenn requestedByResponsible in columnOrder ist\n  if (columnOrder.includes('requestedByResponsible')) {\n    if (!cardMetadata.includes('requestedBy')) {\n      cardMetadata.push('requestedBy');\n    }\n    if (!cardMetadata.includes('responsible')) {\n      cardMetadata.push('responsible');\n    }\n  }\n  // Beschreibung hinzufgen, wenn nicht schon vorhanden\n  if (!cardMetadata.includes('description')) {\n    cardMetadata.push('description');\n  }\n  return cardMetadata;\n};\n\nconst Requests: React.FC = () => {\n  const { t } = useTranslation();\n  const [requests, setRequests] = useState<Request[]>([]);\n  const [totalCount, setTotalCount] = useState<number>(0); //  PAGINATION: Gesamtanzahl\n  const [hasMore, setHasMore] = useState<boolean>(true); //  PAGINATION: Gibt es noch weitere Items?\n  const [loading, setLoading] = useState(false); //  FIX: Initial false, damit Fallback nicht blockiert wird\n  const [loadingMore, setLoadingMore] = useState(false); //  PAGINATION: Ldt weitere Items\n  const [error, setError] = useState<string | null>(null);\n  \n  //  ENTFERNEN: displayLimit nicht mehr ntig (Pagination ldt nur bentigte Items)\n  const [searchTerm, setSearchTerm] = useState('');\n  \n  // State-Variablen fr erweiterte Filterbedingungen\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  \n  // Filter State Management (Controlled Mode)\n  const [activeFilterName, setActiveFilterName] = useState<string>('');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n  \n  const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const [selectedRequest, setSelectedRequest] = useState<Request | null>(null);\n  const { user } = useAuth();\n  const { hasPermission } = usePermissions();\n  \n  // Status-Funktionen (verwende zentrale Utils mit bersetzungsuntersttzung)\n  //  ENTFERNT: getStatusLabel Wrapper - getStatusText wird direkt verwendet (Phase 3)\n  \n  // Definition der verfgbaren Spalten (dynamisch aus bersetzungen)\n  const availableColumns = useMemo(() => [\n    { id: 'title', label: t('requests.columns.title'), shortLabel: t('requests.columns.title') },\n    { id: 'status', label: t('requests.columns.status'), shortLabel: t('requests.columns.status') },\n    { id: 'type', label: t('requests.columns.type'), shortLabel: t('requests.columns.type') },\n    { id: 'requestedByResponsible', label: t('requests.columns.requestedByResponsible'), shortLabel: t('requests.columns.requestedByResponsible').split('/')[0] },\n    { id: 'branch', label: t('requests.columns.branch'), shortLabel: t('requests.columns.branch').substring(0, 5) },\n    { id: 'dueDate', label: t('requests.columns.dueDate'), shortLabel: t('requests.columns.dueDate').substring(0, 5) },\n    { id: 'actions', label: t('requests.columns.actions'), shortLabel: t('common.actions').substring(0, 3) }\n  ], [t]);\n  \n  // Tabellen-Einstellungen laden\n  const {\n    settings,\n    isLoading: isLoadingSettings,\n    updateColumnOrder,\n    updateHiddenColumns,\n    toggleColumnVisibility,\n    isColumnVisible,\n    updateViewMode,\n    updateSortConfig\n  } = useTableSettings('dashboard_requests', {\n    defaultColumnOrder,\n    defaultHiddenColumns: [],\n    defaultViewMode: 'cards'\n  });\n\n  const [draggedColumn, setDraggedColumn] = useState<string | null>(null);\n  const [dragOverColumn, setDragOverColumn] = useState<string | null>(null);\n  \n  // Ref um zu verfolgen, ob wir die hiddenColumns selbst ndern (verhindert Endlosschleife)\n  const isUpdatingHiddenColumnsRef = useRef(false);\n\n  // View-Mode aus Settings laden\n  const viewMode = settings.viewMode || 'cards';\n  \n  // Hauptsortierung aus Settings laden (fr Table & Cards synchron)\n  const sortConfig: SortConfig = useMemo(() => {\n    return settings.sortConfig || { key: 'dueDate', direction: 'asc' };\n  }, [settings.sortConfig]);\n  \n  // Hauptsortierung Handler (fr Table & Cards synchron)\n  const handleMainSortChange = useCallback((key: string, direction: 'asc' | 'desc') => {\n    updateSortConfig({ key: key as SortConfig['key'], direction });\n  }, [updateSortConfig]);\n\n  // Abgeleitete Werte fr Card-Ansicht aus Tabellen-Settings\n  // Card-Metadaten-Reihenfolge aus columnOrder ableiten\n  const cardMetadataOrder = useMemo(() => {\n    return getCardMetadataFromColumnOrder(settings.columnOrder || defaultColumnOrder);\n  }, [settings.columnOrder]);\n\n  // Separater State fr Metadaten-Sichtbarkeit von requestedBy/responsible\n  // Diese werden separat von der Tabellen-Spalte requestedByResponsible verwaltet\n  const [metadataVisibility, setMetadataVisibility] = useState<{requestedBy: boolean, responsible: boolean}>(() => {\n    // Initialisiere basierend auf aktuellen hiddenColumns\n    const requestedByResponsibleHidden = (settings.hiddenColumns || []).includes('requestedByResponsible');\n    return {\n      requestedBy: !requestedByResponsibleHidden,\n      responsible: !requestedByResponsibleHidden\n    };\n  });\n\n  // Synchronisiere metadataVisibility mit settings.hiddenColumns (nur wenn von auen gendert)\n  useEffect(() => {\n    // berspringe Synchronisation, wenn wir selbst die hiddenColumns ndern\n    if (isUpdatingHiddenColumnsRef.current) {\n      isUpdatingHiddenColumnsRef.current = false;\n      return;\n    }\n    \n    const requestedByResponsibleHidden = (settings.hiddenColumns || []).includes('requestedByResponsible');\n    // Wenn requestedByResponsible ausgeblendet ist, sind beide ausgeblendet\n    // Wenn es nicht ausgeblendet ist, sind beide standardmig sichtbar (beim Neuladen)\n    setMetadataVisibility(prev => {\n      // Nur aktualisieren, wenn sich der Zustand gendert hat\n      if (requestedByResponsibleHidden) {\n        if (prev.requestedBy === true || prev.responsible === true) {\n          return { requestedBy: false, responsible: false };\n        }\n      } else {\n        // Wenn requestedByResponsible nicht ausgeblendet ist, aber beide aktuell ausgeblendet sind,\n        // dann wurden sie wahrscheinlich manuell ausgeblendet, also nicht berschreiben\n        // Nur wenn beide aktuell ausgeblendet sind UND requestedByResponsible nicht ausgeblendet ist,\n        // dann setzen wir beide auf true (beim Neuladen, wenn beide ausgeblendet waren)\n        if (prev.requestedBy === false && prev.responsible === false) {\n          return { requestedBy: true, responsible: true };\n        }\n      }\n      return prev;\n    });\n  }, [settings.hiddenColumns]);\n\n  // Versteckte Card-Metadaten aus hiddenColumns ableiten\n  const hiddenCardMetadata = useMemo(() => {\n    const hidden = getHiddenCardMetadata(settings.hiddenColumns || []);\n    \n    // berschreibe fr requestedBy/responsible mit separatem State\n    if (!metadataVisibility.requestedBy) {\n      hidden.add('requestedBy');\n    } else {\n      hidden.delete('requestedBy');\n    }\n    if (!metadataVisibility.responsible) {\n      hidden.add('responsible');\n    } else {\n      hidden.delete('responsible');\n    }\n    \n    return hidden;\n  }, [settings.hiddenColumns, metadataVisibility]);\n\n  // Sichtbare Card-Metadaten (alle Card-Metadaten minus versteckte)\n  const visibleCardMetadata = useMemo(() => {\n    return new Set(cardMetadataOrder.filter(meta => !hiddenCardMetadata.has(meta)));\n  }, [cardMetadataOrder, hiddenCardMetadata]);\n\n  // CSS-Klasse fr Dashboard-Box setzen (fr CSS-basierte Schattierungs-Entfernung)\n  useEffect(() => {\n    const wrapper = document.querySelector('.dashboard-requests-wrapper');\n    if (wrapper) {\n      if (viewMode === 'cards') {\n        wrapper.classList.add('cards-mode');\n      } else {\n        wrapper.classList.remove('cards-mode');\n      }\n    }\n  }, [viewMode]);\n\n  //  PAGINATION: fetchRequests mit Pagination\n  //  MEMORY-LEAK-FIX: operators als Parameter statt aus State lesen\n  const fetchRequests = useCallback(async (\n    filterId?: number, \n    filterConditions?: any[], \n    append = false, //  PAGINATION: Items anhngen statt ersetzen\n    limit = 20,\n    offset = 0,\n    operators?: ('AND' | 'OR')[], //  NEU: operators als Parameter\n    sortBy?: string, //  NEU: Sortier-Parameter\n    sortOrder?: 'asc' | 'desc'\n  ) => {\n    try {\n      if (!append) {\n        setLoading(true); //  FIX: Setze loading = true BEVOR Daten geladen werden\n      } else {\n        setLoadingMore(true);\n      }\n      \n      //  PAGINATION: limit/offset Parameter\n      const params: any = {\n        limit: limit,\n        offset: offset,\n        includeAttachments: 'true', //  VORSCHAU: Attachments fr Bild/Link-Vorschau bentigt\n        sortBy: sortBy || sortConfig.key, //  SORTIERUNG: Aktuelle Sortierung mitgeben\n        sortOrder: sortOrder || sortConfig.direction\n      };\n      if (filterId) {\n        params.filterId = filterId;\n      } else if (filterConditions && filterConditions.length > 0) {\n        params.filterConditions = JSON.stringify({\n          conditions: filterConditions,\n          operators: operators || [] //  MEMORY-LEAK-FIX: Parameter statt State\n        });\n      }\n      \n      const response = await axiosInstance.get('/requests', { params });\n      const responseData = response.data;\n      \n      //  MEMORY: Debug-Logs deaktiviert um Memory zu sparen\n      // console.log('[Requests] Response-Struktur:', {\n      //   isObject: typeof responseData === 'object',\n      //   hasData: responseData?.data !== undefined,\n      //   dataIsArray: Array.isArray(responseData?.data),\n      //   responseDataIsArray: Array.isArray(responseData),\n      //   keys: responseData ? Object.keys(responseData) : [],\n      //   dataType: responseData?.data ? typeof responseData.data : 'undefined'\n      // });\n      \n      //  PAGINATION: Response-Struktur mit totalCount\n      // Sicherstellen, dass requestsData immer ein Array ist\n      let requestsData: Request[] = [];\n      let totalCount = 0;\n      let hasMore = false;\n      \n      if (responseData && typeof responseData === 'object') {\n        // Neue Response-Struktur: { data: [...], totalCount: ..., hasMore: ... }\n        if (Array.isArray(responseData.data)) {\n          requestsData = responseData.data;\n          totalCount = responseData.totalCount || requestsData.length;\n          hasMore = responseData.hasMore !== undefined \n            ? responseData.hasMore \n            : (offset + requestsData.length < totalCount);\n        } else if (Array.isArray(responseData)) {\n          // Fallback: Alte Response-Struktur (direktes Array)\n          requestsData = responseData;\n          totalCount = requestsData.length;\n          hasMore = false;\n        } else {\n          //  FEHLER: responseData ist ein Objekt, aber data ist kein Array\n          if (process.env.NODE_ENV === 'development') {\n          console.error('[Requests]  FEHLER: responseData.data ist kein Array!', {\n            responseData,\n            data: responseData.data,\n            dataType: typeof responseData.data\n          });\n          }\n          throw new Error(`Ungltige Response-Struktur: responseData.data ist kein Array (Typ: ${typeof responseData.data})`);\n        }\n      } else {\n        //  FEHLER: responseData ist kein Objekt\n        if (process.env.NODE_ENV === 'development') {\n        console.error('[Requests]  FEHLER: responseData ist kein Objekt!', {\n          responseData,\n          type: typeof responseData\n        });\n        }\n        throw new Error(`Ungltige Response-Struktur: responseData ist kein Objekt (Typ: ${typeof responseData})`);\n      }\n      \n      //  Sicherheitsprfung: requestsData muss ein Array sein\n      if (!Array.isArray(requestsData)) {\n        if (process.env.NODE_ENV === 'development') {\n        console.error('[Requests]  FEHLER: requestsData ist kein Array!', {\n          requestsData,\n          type: typeof requestsData\n        });\n        }\n        throw new Error(`Ungltige Response-Struktur: requestsData ist kein Array (Typ: ${typeof requestsData})`);\n      }\n      \n      // Attachments sind bereits in der Response enthalten\n      // URL-Generierung fr Attachments hinzufgen\n      const requestsWithAttachments = requestsData.map((request: Request) => {\n        const attachments = (request.attachments || []).map((att: any) => ({\n          id: att.id,\n          fileName: att.fileName,\n          fileType: att.fileType,\n          fileSize: att.fileSize,\n          filePath: att.filePath,\n          uploadedAt: att.uploadedAt,\n          url: getRequestAttachmentUrl(request.id, att.id)\n        }));\n        \n        return {\n          ...request,\n          attachments: attachments\n        };\n      });\n      \n      if (append) {\n        //  PAGINATION: Items anhngen (Infinite Scroll)\n        //  DEDUPLIZIERUNG: Verhindert doppelte Eintrge durch ID-Filter\n        setRequests(prev => {\n          const existingIds = new Set(prev.map(r => r.id));\n          const uniqueNewRequests = requestsWithAttachments.filter(r => !existingIds.has(r.id));\n          const combined = [...prev, ...uniqueNewRequests];\n          \n          //  MEMORY LEAK FIX: Begrenzung der maximalen Anzahl Requests im Memory\n          if (combined.length > MAX_REQUESTS) {\n            return combined.slice(-MAX_REQUESTS);\n          }\n          return combined;\n        });\n      } else {\n        //  PAGINATION: Items ersetzen (Initial oder Filter-Change)\n        //  PERFORMANCE: Direktes Setzen berschreibt alte Referenz (React macht automatisches Cleanup)\n        setRequests(requestsWithAttachments);\n      }\n      \n      setTotalCount(totalCount);\n      setHasMore(hasMore);\n      setError(null);\n    } catch (err) {\n      if (process.env.NODE_ENV === 'development') {\n      console.error('Request Error:', err);\n      }\n      const axiosError = err as any;\n      if (!append) {\n        if (axiosError.code === 'ERR_NETWORK') {\n          setError('Verbindung zum Server konnte nicht hergestellt werden. Bitte stellen Sie sicher, dass der Server luft.');\n        } else {\n          // Zeige detaillierte Fehlermeldung\n          const errorMessage = axiosError.response?.data?.message \n            || axiosError.response?.data?.error \n            || axiosError.message \n            || 'Unbekannter Fehler';\n          if (process.env.NODE_ENV === 'development') {\n          console.error('Request Error Details:', {\n            message: errorMessage,\n            status: axiosError.response?.status,\n            data: axiosError.response?.data\n          });\n          }\n          setError(`Fehler beim Laden der Requests: ${errorMessage}`);\n        }\n      }\n    } finally {\n      if (!append) {\n        setLoading(false);\n      } else {\n        setLoadingMore(false);\n      }\n    }\n  }, []); //  MEMORY-LEAK-FIX: Keine Dependencies - operators kommt als Parameter\n\n  //  loadMoreRequests entfernt - nicht mehr ntig (Infinite Scroll nur fr Anzeige)\n\n  //  Standard-Filter werden jetzt im Seed erstellt, nicht mehr im Frontend\n\n  //  ENTFERNT: filterConditionsRef - Wird nicht mehr verwendet, Dependencies sind korrekt (Phase 3)\n\n  //  PAGINATION: Infinite Scroll mit Intersection Observer\n  const loadMoreRef = useRef<HTMLDivElement>(null);\n  \n  //  MEMORY: Ref fr aktuelle requests.length (verhindert Endlosschleife durch requests.length in Dependencies)\n  const requestsLengthRef = useRef(requests.length);\n  \n  //  MEMORY: Aktualisiere Ref wenn requests sich ndert\n  useEffect(() => {\n    requestsLengthRef.current = requests.length;\n  }, [requests.length]);\n\n\n  //  ENTFERNT: Cleanup useEffect - React macht automatisches Cleanup, manuelles Lschen ist berflssig (Phase 3)\n\n  // getStatusText wird direkt von statusUtils verwendet (getStatusLabel Wrapper wurde entfernt - Phase 3)\n\n  // Status-Workflow: vorheriger/nchster Status fr Shift-Buttons\n  const getPreviousStatus = (status: Request['status']): Request['status'] | null => {\n    switch (status) {\n      case 'to_improve':\n      case 'approved':\n      case 'denied':\n        return 'approval';\n      default:\n        return null;\n    }\n  };\n\n  const getNextStatuses = (status: Request['status']): Request['status'][] => {\n    switch (status) {\n      case 'approval':\n        return ['approved', 'to_improve', 'denied'];\n      case 'to_improve':\n        return ['denied'];\n      default:\n        return [];\n    }\n  };\n\n  const handleSort = useCallback((key: SortConfig['key']) => {\n    // Table-Header-Sortierung: Aktualisiert Hauptsortierung direkt (synchron fr Table & Cards)\n    //  FIX: Verwende settings.sortConfig direkt (aktueller Wert) statt Closure-Variable\n    const currentSortConfig = settings.sortConfig || { key: 'dueDate', direction: 'asc' };\n    const newDirection = currentSortConfig.key === key && currentSortConfig.direction === 'asc' ? 'desc' : 'asc';\n    updateSortConfig({ key, direction: newDirection });\n  }, [settings.sortConfig, updateSortConfig]);\n\n  const handleStatusChange = async (requestId: number, newStatus: Request['status']) => {\n    try {\n      const currentRequest = requests.find(r => r.id === requestId);\n      if (!currentRequest) {\n        setError('Request nicht gefunden');\n        return;\n      }\n\n      // Optimistisches Update: State sofort aktualisieren\n      setRequests(prevRequests => \n        prevRequests.map(request => \n          request.id === requestId ? { ...request, status: newStatus } : request\n        )\n      );\n\n      await axiosInstance.put(`/requests/${requestId}`, \n        { \n          status: newStatus,\n          create_todo: currentRequest.createTodo\n        }\n      );\n    } catch (err) {\n      // Rollback bei Fehler: Vollstndiges Reload\n      if (process.env.NODE_ENV === 'development') {\n      console.error('Status Update Error:', err);\n      }\n      fetchRequests();\n      const axiosError = err as any;\n      setError(`Fehler beim Aktualisieren des Status: ${axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten'}`);\n    }\n  };\n\n  // Handler fr das Verschieben von Spalten per Drag & Drop\n  const handleMoveColumn = useCallback((dragIndex: number, hoverIndex: number) => {\n    // Erstelle eine neue Kopie der Spaltenreihenfolge\n    const newColumnOrder = [...settings.columnOrder];\n    \n    // Ermittle die zu verschiebenden Spalten\n    const movingColumn = newColumnOrder[dragIndex];\n    \n    // Entferne die Spalte an der alten Position\n    newColumnOrder.splice(dragIndex, 1);\n    \n    // Fge die Spalte an der neuen Position ein\n    newColumnOrder.splice(hoverIndex, 0, movingColumn);\n    \n    // Aktualisiere die Spaltenreihenfolge\n    updateColumnOrder(newColumnOrder);\n  }, [settings.columnOrder, updateColumnOrder]);\n\n  // Handler fr Drag & Drop direkt in der Tabelle\n  const handleDragStart = (columnId: string) => {\n    setDraggedColumn(columnId);\n  };\n\n  const handleDragOver = (e: React.DragEvent, columnId: string) => {\n    e.preventDefault();\n    if (draggedColumn && draggedColumn !== columnId) {\n      setDragOverColumn(columnId);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent, columnId: string) => {\n    e.preventDefault();\n    if (draggedColumn && draggedColumn !== columnId) {\n      const dragIndex = settings.columnOrder.indexOf(draggedColumn);\n      const hoverIndex = settings.columnOrder.indexOf(columnId);\n      \n      if (dragIndex > -1 && hoverIndex > -1) {\n        handleMoveColumn(dragIndex, hoverIndex);\n      }\n    }\n    setDraggedColumn(null);\n    setDragOverColumn(null);\n  };\n\n  const handleDragEnd = () => {\n    setDraggedColumn(null);\n    setDragOverColumn(null);\n  };\n\n  //  FIX: Mit useCallback stabilisieren (wird in handleFilterChange verwendet)\n  const applyFilterConditions = useCallback(async (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n    \n    //  FIX: Lade Daten mit Filter (server-seitig)\n    setSelectedFilterId(null); // Kein gespeicherter Filter, nur direkte Bedingungen\n    setActiveFilterName(''); // Kein Filter-Name\n    updateSortConfig({ key: 'dueDate', direction: 'asc' }); // Reset Sortierung\n    \n    if (conditions.length > 0) {\n      await fetchRequests(undefined, conditions, false, 20, 0, operators); //  MEMORY-LEAK-FIX: operators als Parameter\n    } else {\n      await fetchRequests(undefined, undefined, false, 20, 0, []); //  PAGINATION: Kein Filter\n    }\n  }, [fetchRequests, updateSortConfig]);\n  \n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n  \n  //  FIX: Ref verhindert mehrfache Anwendung des Default-Filters (Endlosschleife)\n  const initialLoadAttemptedRef = useRef(false);\n  \n  // Filter Change Handler (Controlled Mode)\n  //  FIX: Mit useCallback stabilisieren (verhindert Endlosschleife in useEffect)\n  const handleFilterChange = useCallback(async (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    // Table-Header-Sortierung zurcksetzen\n    updateSortConfig({ key: 'dueDate', direction: 'asc' });\n    \n    //  FIX: Wenn id gesetzt ist (gespeicherter Filter), lade mit id\n    //  Sonst: Verwende applyFilterConditions (setzt auch selectedFilterId = null, activeFilterName = '')\n    if (id) {\n      setFilterConditions(conditions);\n      setFilterLogicalOperators(operators);\n      await fetchRequests(id, undefined, false, 20, 0); //  PAGINATION: limit=20, offset=0\n    } else {\n      //  Direkte Bedingungen: applyFilterConditions ldt bereits und setzt State korrekt\n      //  FIX: Flag wird in applyFilterConditions gesetzt\n      await applyFilterConditions(conditions, operators);\n    }\n  }, [fetchRequests, updateSortConfig, applyFilterConditions]);\n  \n  //  STANDARD: Filter-Laden und Default-Filter-Anwendung\n  const filterContext = useFilterContext();\n  const { loadFilters } = filterContext;\n  \n  //  FIX: Standard-Pattern mit leeren Dependencies (wie in FILTER_STANDARD_DEFINITION.md geplant)\n  //  FIX: initialLoadAttemptedRef verhindert mehrfache Ausfhrung\n  useEffect(() => {\n    //  FIX: Verhindere mehrfache Ausfhrung\n    if (initialLoadAttemptedRef.current) {\n      return;\n    }\n    \n    const initialize = async () => {\n      //  FIX: Markiere als versucht, BEVOR async Operation startet\n      initialLoadAttemptedRef.current = true;\n      \n      try {\n        // 1. Filter laden (wartet auf State-Update)\n        const filters = await loadFilters(REQUESTS_TABLE_ID);\n        \n        // 2. Default-Filter anwenden (IMMER vorhanden!)\n        const defaultFilter = filters.find(f => f.name === 'Aktuell');\n        if (defaultFilter) {\n          await handleFilterChange(\n            defaultFilter.name,\n            defaultFilter.id,\n            defaultFilter.conditions,\n            defaultFilter.operators\n          );\n          return; // Daten werden durch handleFilterChange geladen\n        }\n        \n        // 3. Fallback: Daten ohne Filter laden (sollte nie passieren)\n        await fetchRequests(undefined, undefined, false, 20, 0);\n      } catch (error) {\n        //  FIX: Bei Fehler Ref zurcksetzen, damit Retry mglich ist\n        initialLoadAttemptedRef.current = false;\n        if (process.env.NODE_ENV === 'development') {\n          console.error('[Requests] Fehler beim Initialisieren:', error);\n        }\n      }\n    };\n    \n    initialize();\n  }, []); //  FIX: Leere Dependencies wie im Standard-Pattern geplant\n\n  // getActiveFilterCount wird direkt inline verwendet (filterConditions.length)\n\n  const filteredAndSortedRequests = useMemo(() => {\n    //  FAKT: Wenn selectedFilterId gesetzt ist, wurden Requests bereits server-seitig gefiltert\n    //  FAKT: Wenn filterConditions gesetzt sind (ohne selectedFilterId), wurden Requests bereits server-seitig gefiltert\n    //  FAKT: Wenn sortConfig gesetzt ist, wurden Requests bereits server-seitig sortiert\n    //  NUR searchTerm wird client-seitig gefiltert (nicht server-seitig)\n    const requestsToFilter = requests;\n    \n    return requestsToFilter\n      .filter(request => {\n        //  NUR Globale Suchfunktion (searchTerm) wird client-seitig angewendet\n        if (searchTerm) {\n          const searchLower = searchTerm.toLowerCase();\n          \n          //  OPTIMIERUNG: Frhes Beenden bei Match\n          if (request.title.toLowerCase().includes(searchLower)) return true;\n          if (request.branch.name.toLowerCase().includes(searchLower)) return true;\n          \n          //  OPTIMIERUNG: Template-String nur wenn ntig\n          const requestedByName = `${request.requestedBy.firstName} ${request.requestedBy.lastName}`.toLowerCase();\n          if (requestedByName.includes(searchLower)) return true;\n          \n          const responsibleName = `${request.responsible.firstName} ${request.responsible.lastName}`.toLowerCase();\n          if (responsibleName.includes(searchLower)) return true;\n          \n          return false; // Kein Match gefunden\n        }\n        \n        return true;\n      });\n      //  ENTFERNT: Client-seitige Sortierung, da Server jetzt sortiert (Phase 4)\n  }, [requests, searchTerm]);\n\n  //  MEMORY-LEAK-FIX: Ref fr aktuelle Operatoren (verhindert fetchRequests-Recreation)\n  const filterLogicalOperatorsRef = useRef(filterLogicalOperators);\n  useEffect(() => {\n    filterLogicalOperatorsRef.current = filterLogicalOperators;\n  }, [filterLogicalOperators]);\n\n  //  PAGINATION: Infinite Scroll mit Intersection Observer\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      (entries) => {\n        const firstEntry = entries[0];\n        if (firstEntry.isIntersecting && hasMore && !loadingMore && !loading) {\n          //  PAGINATION: Lade weitere Items\n          //  MEMORY: Verwende requestsLengthRef.current statt requests.length (verhindert Endlosschleife)\n          const nextOffset = requestsLengthRef.current;\n          fetchRequests(\n            selectedFilterId || undefined,\n            filterConditions.length > 0 ? filterConditions : undefined,\n            true, // append = true\n            20, // limit\n            nextOffset, // offset\n            filterLogicalOperatorsRef.current //  MEMORY-LEAK-FIX: operators aus Ref\n          );\n        }\n      },\n      { threshold: 0.1 }\n    );\n\n    if (loadMoreRef.current) {\n      observer.observe(loadMoreRef.current);\n    }\n\n    return () => {\n      //  PERFORMANCE: disconnect() statt unobserve() (trennt alle Observer-Verbindungen, robuster)\n      observer.disconnect();\n    };\n  }, [hasMore, loadingMore, loading, selectedFilterId, filterConditions, fetchRequests]); //  MEMORY-LEAK-FIX: filterLogicalOperators entfernt (kommt aus Ref)\n\n  // Funktion zum Kopieren eines Requests\n  const handleCopyRequest = async (request) => {\n    try {\n      if (!user) {\n        setError('Benutzer nicht authentifiziert');\n        return;\n      }\n      \n      // Kopie des Requests erstellen mit angepasstem Titel\n      const copiedRequestData = {\n        title: `${request.title}-Kopie`,\n        responsible_id: request.responsible.id,\n        branch_id: request.branch.id,\n        type: request.type || 'other',\n        is_private: request.isPrivate || false,\n        due_date: request.dueDate ? request.dueDate.split('T')[0] : '',\n        create_todo: request.createTodo,\n        requested_by_id: user.id\n      };\n\n      // Request erstellen\n      const response = await axiosInstance.post(\n        API_ENDPOINTS.REQUESTS.BASE,\n        copiedRequestData\n      );\n\n      // Optimistisches Update: Neuen Request zur Liste hinzufgen statt vollstndigem Reload\n      //  MEMORY LEAK FIX: Begrenzung der maximalen Anzahl Requests im Memory\n      setRequests(prevRequests => {\n        const newRequests = [response.data, ...prevRequests];\n        // Wenn Maximum berschritten, entferne lteste Items (behalte nur die ersten MAX_REQUESTS)\n        if (newRequests.length > MAX_REQUESTS) {\n          return newRequests.slice(0, MAX_REQUESTS);\n        }\n        return newRequests;\n      });\n      \n      // Bearbeitungsmodal fr den kopierten Request ffnen\n      setSelectedRequest(response.data);\n      setIsEditModalOpen(true);\n      \n    } catch (err) {\n      if (process.env.NODE_ENV === 'development') {\n      console.error('Fehler beim Kopieren des Requests:', err);\n      }\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n    }\n  };\n\n  //  PERFORMANCE: Skeleton-Loading fr LCP-Element (sofort sichtbar, auch ohne Daten)\n  if (loading && requests.length === 0) {\n    return (\n      <div className=\"-mx-3 sm:-mx-4 md:-mx-6\">\n        <CardGrid>\n          {Array(3).fill(null).map((_, i) => (\n            <div key={`skeleton-${i}`} className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-3 sm:p-4 md:p-5 lg:p-6 shadow-sm\">\n              <div className=\"space-y-4\">\n                {/* LCP-Element: Titel-Skeleton */}\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-12\"></div>\n                  <div className=\"h-6 bg-gray-200 dark:bg-gray-700 rounded flex-1 min-w-0\"></div>\n                </div>\n                {/* Status-Skeleton */}\n                <div className=\"h-6 bg-gray-200 dark:bg-gray-700 rounded w-24\"></div>\n                {/* Metadaten-Skeleton */}\n                <div className=\"space-y-2\">\n                  <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4\"></div>\n                  <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2\"></div>\n                  <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6\"></div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </CardGrid>\n      </div>\n    );\n  }\n  if (error) return <div className=\"p-4 text-red-600\">{error}</div>;\n\n  // Filtern und sortieren der Spalten gem den Benutzereinstellungen\n  const visibleColumnIds = settings.columnOrder.filter(id => isColumnVisible(id));\n\n  return (\n    <>\n      <CreateRequestModal \n        isOpen={isCreateModalOpen}\n        onClose={() => setIsCreateModalOpen(false)}\n        onRequestCreated={(newRequest) => {\n          // Optimistisches Update: Neuen Request zur Liste hinzufgen statt vollstndigem Reload\n          //  MEMORY LEAK FIX: Begrenzung der maximalen Anzahl Requests im Memory\n          setRequests(prevRequests => {\n            const newRequests = [newRequest, ...prevRequests];\n            // Wenn Maximum berschritten, entferne lteste Items (behalte nur die ersten MAX_REQUESTS)\n            if (newRequests.length > MAX_REQUESTS) {\n              return newRequests.slice(0, MAX_REQUESTS);\n            }\n            return newRequests;\n          });\n          setIsEditModalOpen(true);\n          setSelectedRequest(newRequest);\n        }}\n      />\n      {selectedRequest && (\n        <EditRequestModal\n          isOpen={isEditModalOpen}\n          onClose={() => {\n            setIsEditModalOpen(false);\n            setSelectedRequest(null);\n          }}\n          onRequestUpdated={(updatedRequest) => {\n            // Optimistisches Update: Request in Liste aktualisieren statt vollstndigem Reload\n            setRequests(prevRequests => \n              prevRequests.map(request => \n                request.id === updatedRequest.id ? updatedRequest : request\n              )\n            );\n            setIsEditModalOpen(false);\n            setSelectedRequest(null);\n          }}\n          request={selectedRequest}\n        />\n      )}\n\n      {/* Neu angeordnete UI-Elemente in einer Zeile */}\n      <div className=\"flex items-center mb-4 justify-between px-3 sm:px-4 md:px-6\">\n          {/* Linke Seite: \"Neuer Request\"-Button */}\n          <div className=\"flex items-center\">\n            {hasPermission('requests', 'write', 'table') && (\n              <div className=\"relative group\">\n                <button\n                  onClick={() => setIsCreateModalOpen(true)}\n                  className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                  style={{ width: '30.19px', height: '30.19px' }}\n                  aria-label={t('requests.createRequest')}\n                  data-onboarding=\"create-request-button\"\n                >\n                  <PlusIcon className=\"h-4 w-4\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {t('requests.createRequest')}\n                </div>\n              </div>\n            )}\n          </div>\n          \n          {/* Mitte: Titel mit Icon */}\n          <div className=\"flex items-center\">\n            <DocumentTextIcon className=\"h-6 w-6 mr-2 dark:text-white\" />\n            <h2 className=\"text-xl font-semibold dark:text-white\">{t('requests.title')}</h2>\n          </div>\n          \n          {/* Rechte Seite: Suchfeld, Filter, View-Toggle und Spalten */}\n          <div className=\"flex items-center gap-1.5\">\n            <input\n              type=\"text\"\n              placeholder={t('common.search') + '...'}\n              className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n            />\n            \n            {/* View-Mode Toggle */}\n            <div className=\"relative group\">\n              <button\n                className={`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                  viewMode === 'cards' ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : ''\n                }`}\n                onClick={() => updateViewMode(viewMode === 'table' ? 'cards' : 'table')}\n              >\n                {viewMode === 'table' ? (\n                  <Squares2X2Icon className=\"h-5 w-5\" />\n                ) : (\n                  <TableCellsIcon className=\"h-5 w-5\" />\n                )}\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {viewMode === 'table' ? t('common.viewAsCards') : t('common.viewAsTable')}\n              </div>\n            </div>\n            \n            {/* Filter-Button */}\n            <div className=\"relative group\">\n              <button\n                className={`p-2 rounded-md ${filterConditions.length > 0 ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'hover:bg-gray-100 dark:hover:bg-gray-700'} ml-1`}\n                onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n              >\n                <FunnelIcon className=\"h-5 w-5\" />\n                {filterConditions.length > 0 && (\n                  <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center z-10\" style={{ position: 'absolute', top: '-0.25rem', right: '-0.25rem' }}>\n                    {filterConditions.length}\n                  </span>\n                )}\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('common.filter')}\n              </div>\n            </div>\n            \n            {/* Anzeige anpassen - bei beiden Ansichten */}\n            <div className=\"ml-1\">\n              <TableColumnConfig\n                columns={viewMode === 'cards'\n                  ? [\n                      { id: 'title', label: t('requests.columns.title') },\n                      { id: 'status', label: t('requests.columns.status') },\n                      { id: 'type', label: t('requests.columns.type') },\n                      { id: 'requestedBy', label: t('requests.columns.requestedBy') },\n                      { id: 'responsible', label: t('requests.columns.responsible') },\n                      { id: 'branch', label: t('requests.columns.branch') },\n                      { id: 'dueDate', label: t('requests.columns.dueDate') },\n                      { id: 'description', label: t('common.description') }\n                    ]\n                  : availableColumns}\n                visibleColumns={viewMode === 'cards'\n                  ? Array.from(visibleCardMetadata)\n                  : visibleColumnIds}\n                columnOrder={viewMode === 'cards'\n                  ? cardMetadataOrder\n                  : settings.columnOrder}\n                onToggleColumnVisibility={(columnId) => {\n                  if (viewMode === 'cards') {\n                    // Card-Metadaten-ID -> Tabellen-Spalten-ID\n                    const tableColumnId = cardToTableMapping[columnId];\n                    if (tableColumnId) {\n                      // Spezielle Logik fr requestedByResponsible - Metadaten separat verwalten\n                      if (tableColumnId === 'requestedByResponsible') {\n                        // Toggle die Metadaten-Sichtbarkeit im separaten State\n                        const newMetadataVisibility = { ...metadataVisibility };\n                        if (columnId === 'requestedBy') {\n                          newMetadataVisibility.requestedBy = !newMetadataVisibility.requestedBy;\n                        } else if (columnId === 'responsible') {\n                          newMetadataVisibility.responsible = !newMetadataVisibility.responsible;\n                        }\n                        setMetadataVisibility(newMetadataVisibility);\n                        \n                        // Aktualisiere hiddenColumns basierend auf Metadaten-Sichtbarkeit\n                        const newHiddenColumns = [...settings.hiddenColumns];\n                        const tableColumnIndex = newHiddenColumns.indexOf(tableColumnId);\n                        \n                        // Wenn beide Metadaten ausgeblendet sind, blende requestedByResponsible aus\n                        // Wenn mindestens eine sichtbar ist, blende requestedByResponsible ein\n                        if (!newMetadataVisibility.requestedBy && !newMetadataVisibility.responsible) {\n                          // Beide ausgeblendet  requestedByResponsible ausblenden\n                          if (tableColumnIndex === -1) {\n                            newHiddenColumns.push(tableColumnId);\n                            isUpdatingHiddenColumnsRef.current = true;\n                            updateHiddenColumns(newHiddenColumns);\n                          }\n                        } else {\n                          // Mindestens eine sichtbar  requestedByResponsible einblenden\n                          if (tableColumnIndex !== -1) {\n                            newHiddenColumns.splice(tableColumnIndex, 1);\n                            isUpdatingHiddenColumnsRef.current = true;\n                            updateHiddenColumns(newHiddenColumns);\n                          }\n                        }\n                      } else {\n                        // Normale Spalte: direkt ein/ausblenden\n                        toggleColumnVisibility(tableColumnId);\n                      }\n                    }\n                  } else {\n                    toggleColumnVisibility(columnId);\n                  }\n                }}\n                buttonTitle={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n                modalTitle={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n                mainSortConfig={sortConfig}\n                onMainSortChange={handleMainSortChange}\n                showMainSort={true}\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Filter-Pane */}\n        {isFilterModalOpen && (\n          <div className={viewMode === 'cards' ? '-mx-3 sm:-mx-4 md:-mx-6 px-3 sm:px-4 md:px-6' : 'px-3 sm:px-4 md:px-6'}>\n            <FilterPane\n            columns={[\n              { id: 'title', label: t('requests.columns.title') },\n              { id: 'type', label: t('requests.columns.type') },\n              { id: 'requestedBy', label: t('requests.columns.requestedBy').replace(':', '') },\n              { id: 'responsible', label: t('requests.columns.responsible').replace(':', '') },\n              { id: 'dueDate', label: t('requests.columns.dueDate') },\n              { id: 'status', label: t('requests.columns.status') },\n              { id: 'branch', label: t('requests.columns.branch') }\n            ]}\n            onApply={applyFilterConditions}\n            onReset={resetFilterConditions}\n            savedConditions={filterConditions}\n            savedOperators={filterLogicalOperators}\n            tableId={REQUESTS_TABLE_ID}\n            />\n          </div>\n        )}\n        \n        {/* Gespeicherte Filter als Tags anzeigen */}\n        <div className={viewMode === 'cards' ? '-mx-3 sm:-mx-4 md:-mx-6 px-3 sm:px-4 md:px-6' : 'px-3 sm:px-4 md:px-6'}>\n          <SavedFilterTags\n          tableId={REQUESTS_TABLE_ID}\n          onSelectFilter={(conditions, operators) => applyFilterConditions(conditions, operators)}\n          onReset={resetFilterConditions}\n          activeFilterName={activeFilterName}\n          selectedFilterId={selectedFilterId}\n          onFilterChange={(name, id, conditions, operators) => handleFilterChange(name, id, conditions, operators)}\n          defaultFilterName=\"Aktuell\"\n          />\n        </div>\n\n        {/* Conditional Rendering: Table oder Cards */}\n        {viewMode === 'table' ? (\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n            <thead className=\"bg-gray-50 dark:bg-gray-700\">\n              <tr>\n                {/* Dynamisch generierte Spaltenberschriften basierend auf den sichtbaren Spalten */}\n                {visibleColumnIds.map(columnId => {\n                  const column = availableColumns.find(col => col.id === columnId);\n                  if (!column) return null;\n\n                  // Besondere Behandlung fr die Spalte mit requestedBy/responsible\n                  if (columnId === 'requestedByResponsible') {\n                    return (\n                      <th \n                        key={columnId}\n                        className=\"px-3 sm:px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-move relative\"\n                        draggable\n                        onDragStart={() => handleDragStart(columnId)}\n                        onDragOver={(e) => handleDragOver(e, columnId)}\n                        onDrop={(e) => handleDrop(e, columnId)}\n                        onDragEnd={handleDragEnd}\n                      >\n                        <div className={`flex items-center ${dragOverColumn === columnId ? 'border-l-2 pl-1 border-blue-500' : ''} ${draggedColumn === columnId ? 'opacity-50' : ''}`}>\n                          <ArrowsUpDownIcon className=\"h-3 w-3 mr-1 text-gray-400 dark:text-gray-500\" />\n                          <ResponsiveLabel long={column.label} short={column.shortLabel} />\n                        </div>\n                      </th>\n                    );\n                  }\n                  \n                  // Fr alle anderen Spalten\n                  let sortKey: SortConfig['key'] | undefined;\n                  if (columnId === 'title') sortKey = 'title';\n                  if (columnId === 'status') sortKey = 'status';\n                  if (columnId === 'type') sortKey = 'type';\n                  if (columnId === 'branch') sortKey = 'branch.name';\n                  if (columnId === 'dueDate') sortKey = 'dueDate';\n\n                  return (\n                      <th \n                        key={columnId}\n                        className={`px-3 sm:px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider relative ${sortKey ? 'cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700' : ''} ${columnId !== 'actions' ? 'cursor-move' : ''}`}\n                      onClick={sortKey ? () => handleSort(sortKey) : undefined}\n                      draggable={columnId !== 'actions'}\n                      onDragStart={columnId !== 'actions' ? () => handleDragStart(columnId) : undefined}\n                      onDragOver={columnId !== 'actions' ? (e) => handleDragOver(e, columnId) : undefined}\n                      onDrop={columnId !== 'actions' ? (e) => handleDrop(e, columnId) : undefined}\n                      onDragEnd={columnId !== 'actions' ? handleDragEnd : undefined}\n                    >\n                      <div className={`flex items-center ${dragOverColumn === columnId ? 'border-l-2 pl-1 border-blue-500' : ''} ${draggedColumn === columnId ? 'opacity-50' : ''}`}>\n                        {columnId !== 'actions' && <ArrowsUpDownIcon className=\"h-3 w-3 mr-1 text-gray-400 dark:text-gray-500\" />}\n                        <ResponsiveLabel long={column.label} short={column.shortLabel} />\n                        {sortKey && sortConfig.key === sortKey && (sortConfig.direction === 'asc' ? '' : '')}\n                      </div>\n                    </th>\n                  );\n                })}\n              </tr>\n            </thead>\n            <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n              {filteredAndSortedRequests.length === 0 ? (\n                <tr>\n                  <td colSpan={visibleColumnIds.length} className=\"px-3 py-4 text-center text-gray-500 dark:text-gray-400\">\n                    <div className=\"flex flex-col items-center justify-center gap-4\">\n                      <DocumentTextIcon className=\"h-10 w-10 text-gray-400 dark:text-gray-500\" />\n                      <div className=\"text-sm\">Keine Requests gefunden</div>\n                    </div>\n                  </td>\n                </tr>\n              ) : (\n                <>\n                  {filteredAndSortedRequests.map(request => {\n                    const expiryStatus = getExpiryStatus(request.dueDate, 'request');\n                    const expiryColors = getExpiryColorClasses(expiryStatus);\n                    \n                    return (\n                      <tr \n                        key={request.id} \n                        className={`hover:bg-gray-50 dark:hover:bg-gray-700 ${\n                          expiryStatus !== 'none' ? `${expiryColors.bgClass} ${expiryColors.borderClass} border-l-4` : ''\n                        }`}\n                      >\n                        {/* Dynamisch generierte Zellen basierend auf den sichtbaren Spalten */}\n                        {visibleColumnIds.map(columnId => {\n                        switch (columnId) {\n                          case 'title':\n                            return (\n                              <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4\">\n                                <div className=\"text-sm text-gray-900 dark:text-gray-200 break-words flex items-center\">\n                                  {request.title}\n                                  {request.description && (\n                                    <div className=\"ml-2 relative group\">\n                                      <button \n                                        className=\"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300\"\n                                      >\n                                        <InformationCircleIcon className=\"h-5 w-5\" />\n                                      </button>\n                                      <div className=\"absolute left-0 mt-2 p-2 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 shadow-lg rounded-md border border-gray-200 dark:border-gray-700 w-144 max-h-96 overflow-y-auto min-w-[36rem] z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none\">\n                                        <MarkdownPreview content={request.description} showImagePreview={true} />\n                                      </div>\n                                    </div>\n                                  )}\n                                </div>\n                              </td>\n                            );\n                          case 'status':\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(request.status, 'request')} dark:bg-opacity-30 status-col`}>\n                                  {getStatusText(request.status, 'request', t)}\n                                </span>\n                              </td>\n                            );\n                          case 'type':\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <div className=\"flex items-center gap-2 text-sm text-gray-900 dark:text-gray-200\">\n                                  <span className=\"text-lg\">{getRequestTypeIcon(request.type)}</span>\n                                  <span>{request.type ? t(`requests.types.${request.type}`) : t('requests.types.other')}</span>\n                                  {request.isPrivate && (\n                                    <div className=\"relative group inline-block ml-1\">\n                                      <span className=\"text-xs text-gray-500 dark:text-gray-400\"></span>\n                                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                        {t('createRequest.form.isPrivate')}\n                                      </div>\n                                    </div>\n                                  )}\n                                </div>\n                              </td>\n                            );\n                          case 'requestedByResponsible':\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <div className=\"flex flex-col\">\n                                  <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                    <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n                                      <ResponsiveLabel long={`${t('requests.columns.requestedBy')}:`} short={`${t('requests.columns.requestedBy').substring(0, 5)}:`} />\n                                    </span><br />\n                                    {`${request.requestedBy.firstName} ${request.requestedBy.lastName}`}\n                                  </div>\n                                  <div className=\"text-sm text-gray-900 dark:text-gray-200 mt-1\">\n                                    <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n                                      <ResponsiveLabel long={`${t('requests.columns.responsible')}:`} short={`${t('requests.columns.responsible').substring(0, 4)}:`} />\n                                    </span><br />\n                                    {`${request.responsible.firstName} ${request.responsible.lastName}`}\n                                  </div>\n                                </div>\n                              </td>\n                            );\n                          case 'branch':\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <div className=\"text-sm text-gray-900 dark:text-gray-200\">{request.branch.name}</div>\n                              </td>\n                            );\n                          case 'dueDate':\n                            const expiryStatusForDate = getExpiryStatus(request.dueDate, 'request');\n                            const expiryColorsForDate = getExpiryColorClasses(expiryStatusForDate);\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <div className={`text-sm ${expiryStatusForDate !== 'none' ? expiryColorsForDate.textClass : 'text-gray-900 dark:text-gray-200'}`}>\n                                  {new Date(request.dueDate).toLocaleDateString()}\n                                  {expiryStatusForDate !== 'none' && (\n                                    <span className=\"ml-2 text-xs\"></span>\n                                  )}\n                                </div>\n                              </td>\n                            );\n                          case 'actions':\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <div className=\"flex space-x-2 action-buttons\">\n                                  <div className=\"status-buttons\">\n                                  {request.status === 'approval' && hasPermission('requests', 'write', 'table') && (\n                                    <>\n                                      <div className=\"relative group\">\n                                        <button\n                                          onClick={() => handleStatusChange(request.id, 'approved')}\n                                          className=\"p-1 bg-green-600 dark:bg-green-500 text-white rounded hover:bg-green-700 dark:hover:bg-green-600\"\n                                        >\n                                          <CheckIcon className=\"h-5 w-5\" />\n                                        </button>\n                                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                          {t('requests.actions.approve')}\n                                        </div>\n                                      </div>\n                                      <div className=\"relative group\">\n                                        <button\n                                          onClick={() => handleStatusChange(request.id, 'to_improve')}\n                                          className=\"p-1 bg-orange-600 dark:bg-orange-500 text-white rounded hover:bg-orange-700 dark:hover:bg-orange-600\"\n                                        >\n                                          <ExclamationTriangleIcon className=\"h-5 w-5\" />\n                                        </button>\n                                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                          {t('requests.actions.improve')}\n                                        </div>\n                                      </div>\n                                      <div className=\"relative group\">\n                                        <button\n                                          onClick={() => handleStatusChange(request.id, 'denied')}\n                                          className=\"p-1 bg-red-600 dark:bg-red-500 text-white rounded hover:bg-red-700 dark:hover:bg-red-600\"\n                                        >\n                                          <XMarkIcon className=\"h-5 w-5\" />\n                                        </button>\n                                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                          {t('requests.actions.deny')}\n                                        </div>\n                                      </div>\n                                    </>\n                                  )}\n                                  {request.status === 'to_improve' && hasPermission('requests', 'write', 'table') && (\n                                    <>\n                                      <div className=\"relative group\">\n                                        <button\n                                          onClick={() => handleStatusChange(request.id, 'approval')}\n                                          className=\"p-1 bg-yellow-600 dark:bg-yellow-500 text-white rounded hover:bg-yellow-700 dark:hover:bg-yellow-600\"\n                                        >\n                                          <ArrowPathIcon className=\"h-5 w-5\" />\n                                        </button>\n                                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                          {t('requests.actions.recheck')}\n                                        </div>\n                                      </div>\n                                      <div className=\"relative group\">\n                                        <button\n                                          onClick={() => handleStatusChange(request.id, 'denied')}\n                                          className=\"p-1 bg-red-600 dark:bg-red-500 text-white rounded hover:bg-red-700 dark:hover:bg-red-600\"\n                                        >\n                                          <XMarkIcon className=\"h-5 w-5\" />\n                                        </button>\n                                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                          {t('requests.actions.deny')}\n                                        </div>\n                                      </div>\n                                    </>\n                                  )}\n                                  {(request.status === 'approved' || request.status === 'denied') && hasPermission('requests', 'write', 'table') && (\n                                    <div className=\"relative group\">\n                                      <button\n                                        onClick={() => handleStatusChange(request.id, 'approval')}\n                                        className=\"p-1 bg-yellow-600 dark:bg-yellow-500 text-white rounded hover:bg-yellow-700 dark:hover:bg-yellow-600\"\n                                      >\n                                        <ArrowPathIcon className=\"h-5 w-5\" />\n                                      </button>\n                                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                        {t('requests.actions.recheck')}\n                                      </div>\n                                    </div>\n                                  )}\n                                  </div>\n                                  {hasPermission('requests', 'write', 'table') && (\n                                    <button\n                                      onClick={() => {\n                                        setSelectedRequest(request);\n                                        setIsEditModalOpen(true);\n                                      }}\n                                      className=\"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 edit-button ml-0.5\"\n                                    >\n                                      <PencilIcon className=\"h-5 w-5\" />\n                                    </button>\n                                  )}\n                                  {hasPermission('requests', 'both', 'table') && (\n                                    <div className=\"relative group\">\n                                      <button\n                                        onClick={() => handleCopyRequest(request)}\n                                        className=\"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 copy-button ml-0.5\"\n                                      >\n                                        <DocumentDuplicateIcon className=\"h-5 w-5\" />\n                                      </button>\n                                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                        {t('requests.actions.copy')}\n                                      </div>\n                                    </div>\n                                  )}\n                                </div>\n                              </td>\n                            );\n                          default:\n                            return null;\n                        }\n                        })}\n                      </tr>\n                    );\n                  })}\n                </>\n              )}\n            </tbody>\n          </table>\n        </div>\n        ) : (\n          /* Card-Ansicht - ohne Box-Schattierung, Cards auf voller Breite */\n          <div className=\"-mx-3 sm:-mx-4 md:-mx-6\">\n            {loading && requests.length === 0 ? (\n              <CardGrid>\n                {Array(3).fill(null).map((_, i) => (\n                  <div key={`skeleton-${i}`} className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-3 sm:p-4 md:p-5 lg:p-6 shadow-sm\">\n                    <div className=\"space-y-4\">\n                      {/* LCP-Element: Titel-Skeleton */}\n                      <div className=\"flex items-center gap-2 mb-2\">\n                        <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-12\"></div>\n                        <div className=\"h-6 bg-gray-200 dark:bg-gray-700 rounded flex-1 min-w-0\"></div>\n                      </div>\n                      {/* Status-Skeleton */}\n                      <div className=\"h-6 bg-gray-200 dark:bg-gray-700 rounded w-24\"></div>\n                      {/* Metadaten-Skeleton */}\n                      <div className=\"space-y-2\">\n                        <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4\"></div>\n                        <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2\"></div>\n                        <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6\"></div>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </CardGrid>\n            ) : filteredAndSortedRequests.length === 0 ? (\n              <div className=\"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400\">\n                <DocumentTextIcon className=\"h-10 w-10 mb-4 text-gray-400 dark:text-gray-500\" />\n                <div className=\"text-sm\">{t('requests.createRequest.noRequestsFound')}</div>\n              </div>\n            ) : (\n              <CardGrid>\n                {filteredAndSortedRequests.map(request => {\n                  // Metadaten basierend auf sichtbaren Einstellungen - strukturiert nach Position\n                  const metadata: MetadataItem[] = [];\n                  \n                  // Links: Niederlassung (meist ausgeblendet)\n                  if (visibleCardMetadata.has('branch')) {\n                    metadata.push({\n                      icon: <BuildingOfficeIcon className=\"h-4 w-4\" />,\n                      label: t('requests.columns.branch'),\n                      value: request.branch.name,\n                      section: 'left'\n                    });\n                  }\n                  \n                  // Haupt-Metadaten: Typ (ohne Label, nur Wert) - auf gleicher Zeile wie Titel, Datum, Status\n                  if (visibleCardMetadata.has('type')) {\n                    const typeIcon = getRequestTypeIcon(request.type);\n                    const typeLabel = request.type ? t(`requests.types.${request.type}`) : t('requests.types.other');\n                    metadata.push({\n                      label: '', // Kein Label, nur Wert\n                      value: `${typeIcon} ${typeLabel}${request.isPrivate ? ' ' : ''}`,\n                      section: 'main'\n                    });\n                  }\n                  \n                  // Haupt-Metadaten: Ersteller (zweite Zeile, unter Typ)\n                  if (visibleCardMetadata.has('requestedBy')) {\n                    // Benutzernamen auf 4 Zeichen krzen\n                    const requestedByName = `${request.requestedBy.firstName} ${request.requestedBy.lastName}`;\n                    const shortenedName = requestedByName.length > 4 ? requestedByName.substring(0, 4) : requestedByName;\n                    metadata.push({\n                      icon: <UserIcon className=\"h-4 w-4\" />,\n                      label: t('requests.columns.requestedBy'),\n                      value: shortenedName,\n                      section: 'main-second'\n                    });\n                  }\n                  \n                  // Verantwortlicher (dritte Zeile, unter Ersteller)\n                  if (visibleCardMetadata.has('responsible')) {\n                    // Benutzernamen auf 4 Zeichen krzen\n                    const responsibleName = `${request.responsible.firstName} ${request.responsible.lastName}`;\n                    const shortenedName = responsibleName.length > 4 ? responsibleName.substring(0, 4) : responsibleName;\n                    metadata.push({\n                      icon: <UserIcon className=\"h-4 w-4\" />,\n                      label: t('requests.columns.responsible'),\n                      value: shortenedName,\n                      section: 'main-third'\n                    });\n                  }\n                  \n                  // Rechts: Flligkeit (erste Zeile rechts, neben Status)\n                  if (visibleCardMetadata.has('dueDate')) {\n                    const dueDateItem = createDueDateMetadataItem(\n                      request.dueDate,\n                      'request',\n                      undefined,\n                      undefined,\n                      <CalendarIcon className=\"h-4 w-4\" />,\n                      t('requests.columns.dueDate'),\n                      (date) => format(date, 'dd.MM.yyyy', { locale: de }),\n                      false // Keine Badge-Art, nur Text\n                    );\n                    metadata.push({\n                      ...dueDateItem,\n                      section: 'right-inline' // Neue Section fr inline rechts (neben Status)\n                    });\n                  }\n                  \n                  // Full-Width: Beschreibung\n                  if (visibleCardMetadata.has('description') && request.description) {\n                    metadata.push({\n                      label: t('common.description'),\n                      value: '', // Nicht verwendet bei descriptionContent\n                      descriptionContent: request.description, // Fr expandierbare Beschreibung\n                      attachmentMetadata: request.attachments || [], // Attachment-Metadaten fr Vorschau\n                      section: 'full'\n                    });\n                  }\n\n                  // Action-Buttons zusammenstellen\n                  const actionButtons = (\n                    <div className=\"flex items-center space-x-2\">\n                      {/* Status-Buttons */}\n                      {request.status === 'approval' && hasPermission('requests', 'write', 'table') && (\n                        <>\n                          <div className=\"relative group\">\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleStatusChange(request.id, 'approved');\n                              }}\n                              className=\"p-1.5 bg-green-600 text-white rounded hover:bg-green-700\"\n                            >\n                              <CheckIcon className=\"h-4 w-4\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('requests.actions.approve')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleStatusChange(request.id, 'to_improve');\n                              }}\n                              className=\"p-1.5 bg-orange-600 text-white rounded hover:bg-orange-700\"\n                            >\n                              <ExclamationTriangleIcon className=\"h-4 w-4\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('requests.actions.improve')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleStatusChange(request.id, 'denied');\n                              }}\n                              className=\"p-1.5 bg-red-600 text-white rounded hover:bg-red-700\"\n                            >\n                              <XMarkIcon className=\"h-4 w-4\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('requests.actions.deny')}\n                            </div>\n                          </div>\n                        </>\n                      )}\n                      {request.status === 'to_improve' && hasPermission('requests', 'write', 'table') && (\n                        <>\n                          <div className=\"relative group\">\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleStatusChange(request.id, 'approval');\n                              }}\n                              className=\"p-1.5 bg-yellow-600 text-white rounded hover:bg-yellow-700\"\n                            >\n                              <ArrowPathIcon className=\"h-4 w-4\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('requests.actions.recheck')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleStatusChange(request.id, 'denied');\n                              }}\n                              className=\"p-1.5 bg-red-600 text-white rounded hover:bg-red-700\"\n                            >\n                              <XMarkIcon className=\"h-4 w-4\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('requests.actions.deny')}\n                            </div>\n                          </div>\n                        </>\n                      )}\n                      {(request.status === 'approved' || request.status === 'denied') && hasPermission('requests', 'write', 'table') && (\n                        <div className=\"relative group\">\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleStatusChange(request.id, 'approval');\n                            }}\n                            className=\"p-1.5 bg-yellow-600 text-white rounded hover:bg-yellow-700\"\n                          >\n                            <ArrowPathIcon className=\"h-4 w-4\" />\n                          </button>\n                          <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                            {t('requests.actions.recheck')}\n                          </div>\n                        </div>\n                      )}\n                      {hasPermission('requests', 'write', 'table') && (\n                        <div className=\"relative group\">\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              setSelectedRequest(request);\n                              setIsEditModalOpen(true);\n                            }}\n                            className=\"p-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                          >\n                            <PencilIcon className=\"h-4 w-4\" />\n                          </button>\n                          <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                            {t('common.edit')}\n                          </div>\n                        </div>\n                      )}\n                      {hasPermission('requests', 'both', 'table') && (\n                        <div className=\"relative group\">\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleCopyRequest(request);\n                            }}\n                            className=\"p-1.5 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                          >\n                            <DocumentDuplicateIcon className=\"h-4 w-4\" />\n                          </button>\n                          <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                            {t('requests.actions.copy')}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  );\n\n                  // Status-Workflow bestimmen fr Shift-Buttons\n                  const previousStatus = getPreviousStatus(request.status);\n                  const nextStatuses = getNextStatuses(request.status);\n                  const firstNextStatus = nextStatuses.length > 0 ? nextStatuses[0] : null;\n\n                  return (\n                    <DataCard\n                      key={request.id}\n                      title={\n                        <span>\n                          <span className=\"text-xs text-gray-600 dark:text-gray-400\">{request.id}:</span>{' '}\n                          <span>{request.title}</span>\n                        </span>\n                      }\n                      status={{\n                        label: getStatusText(request.status, 'request', t),\n                        color: getStatusColor(request.status, 'request'),\n                        onPreviousClick: previousStatus && hasPermission('requests', 'write', 'table')\n                          ? () => handleStatusChange(request.id, previousStatus)\n                          : undefined,\n                        onNextClick: firstNextStatus && hasPermission('requests', 'write', 'table')\n                          ? () => handleStatusChange(request.id, firstNextStatus)\n                          : undefined\n                      }}\n                      metadata={metadata}\n                      actions={actionButtons}\n                    />\n                  );\n                })}\n              </CardGrid>\n            )}\n          </div>\n        )}\n        \n        {/*  PAGINATION: Infinite Scroll Trigger */}\n        {hasMore && (\n          <div ref={loadMoreRef} className=\"flex justify-center py-4\">\n            {loadingMore && (\n              <CircularProgress size={24} />\n            )}\n          </div>\n        )}\n    </>\n  );\n};\n\nexport default Requests; ","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getYear} function options.\n */\n\n/**\n * @name getYear\n * @category Year Helpers\n * @summary Get the year of the given date.\n *\n * @description\n * Get the year of the given date.\n *\n * @param date - The given date\n * @param options - An object with options\n *\n * @returns The year\n *\n * @example\n * // Which year is 2 July 2014?\n * const result = getYear(new Date(2014, 6, 2))\n * //=> 2014\n */\nexport function getYear(date, options) {\n  return toDate(date, options?.in).getFullYear();\n}\n\n// Fallback for modularized imports:\nexport default getYear;\n","import React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { format, startOfWeek, endOfWeek, eachDayOfInterval, getWeek, getYear, parse, addDays } from 'date-fns';\nimport { de, es, enUS } from 'date-fns/locale';\nimport { useLanguage } from '../hooks/useLanguage.ts';\nimport { ChartBarIcon, DocumentArrowDownIcon, CalendarIcon, ClockIcon } from '@heroicons/react/24/outline';\nimport { API_URL, API_ENDPOINTS } from '../config/api.ts';\nimport WorktimeList from './WorktimeList.tsx';\nimport axios from 'axios';\nimport axiosInstance from '../config/axios.ts';\nimport { WorktimeModal } from './WorktimeModal.tsx';\nimport { convertWeekToDate, getWeekDays, getQuinzenaFromDate, convertQuinzenaToDate, getQuinzenaDays, getCurrentQuinzena } from '../utils/dateUtils.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { useOrganization } from '../contexts/OrganizationContext.tsx';\nimport ResponsiveLabel from './shared/ResponsiveLabel.tsx';\n\n// Neue Schnittstelle fr das WorktimeModal mit selectedDate\ninterface WorktimeModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    selectedDate: string; // Im Kontext von WorktimeStats ist selectedDate immer erforderlich\n}\n\ninterface WorktimeStats {\n    totalHours: number;\n    averageHoursPerDay: number;\n    daysWorked: number;\n    weeklyData: {\n        day: string;\n        hours: number;\n        date: string; // Datum im Format YYYY-MM-DD\n    }[];\n}\n\ntype TabType = 'worktime' | 'commissions';\n\nconst WorktimeStats: React.FC = () => {\n    const { t, i18n } = useTranslation();\n    const { activeLanguage } = useLanguage();\n    const { user } = useAuth();\n    const { organization } = useOrganization();\n    const [stats, setStats] = useState<WorktimeStats | null>(null);\n    const [fullStats, setFullStats] = useState<WorktimeStats | null>(null); //  Vollstndige Stats (im Hintergrund geladen)\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n    const [maxHours, setMaxHours] = useState<number>(8); // Standard 8 Stunden\n    const [activeTab, setActiveTab] = useState<TabType>('worktime');\n    const [commissionStats, setCommissionStats] = useState<any>(null);\n    const [commissionLoading, setCommissionLoading] = useState(false);\n    \n    //  MEMORY: Refs fr setTimeout-Cleanup\n    const statsTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n    const periodChangeTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n    \n    // Prfe ob Organisation oder User aus Kolumbien kommt\n    const isColombia = useMemo(() => {\n        // Prfe zuerst User-Land, dann Organisation (falls vorhanden)\n        const userIsColombia = user?.country === 'CO';\n        const orgIsColombia = organization?.country === 'CO'; // KORREKTUR: Direkt auf organization, nicht settings\n        const result = userIsColombia || orgIsColombia;\n        //  MEMORY: Debug-Logs deaktiviert um Memory zu sparen\n        // console.log('Quinzena-Check:', { \n        //     userCountry: user?.country, \n        //     orgCountry: organization?.country,\n        //     isColombia: result \n        // });\n        return result;\n    }, [user?.country, organization?.country]); // KORREKTUR: Spezifische Dependency\n    \n    // Ref um zu tracken, ob useQuinzena manuell gendert wurde (nicht durch isColombia)\n    const isManualPeriodChange = useRef(false);\n    \n    // State fr Woche/Quinzena-Modus\n    // Initial: basierend auf isColombia (kann auch user?.country prfen, bevor organization geladen ist)\n    const [useQuinzena, setUseQuinzena] = useState<boolean>(() => {\n        // Initial: Prfe user?.country, da organization mglicherweise noch nicht geladen ist\n        return user?.country === 'CO';\n    });\n    \n    // Dynamisches Locale basierend auf aktueller Sprache\n    const dateLocale = useMemo(() => {\n        const lang = activeLanguage || i18n.language || 'de';\n        switch (lang) {\n            case 'es': return es;\n            case 'en': return enUS;\n            default: return de;\n        }\n    }, [activeLanguage, i18n.language]);\n    \n    // Aktuelle Woche/Quinzena im Format YYYY-Www oder YYYY-Qq fr das Input-Element\n    const today = new Date();\n    \n    const currentWeekInput = useMemo(() => {\n        return `${getYear(today)}-W${String(getWeek(today, { locale: dateLocale })).padStart(2, '0')}`;\n    }, [dateLocale]);\n    \n    const currentQuinzenaInput = useMemo(() => {\n        return getCurrentQuinzena();\n    }, []);\n    \n    const [selectedWeekInput, setSelectedWeekInput] = useState<string>(currentWeekInput);\n    const [selectedQuinzenaInput, setSelectedQuinzenaInput] = useState<string>(currentQuinzenaInput);\n    \n    // Aktualisiere selectedWeekInput/selectedQuinzenaInput wenn sich die Sprache ndert\n    useEffect(() => {\n        if (useQuinzena) {\n            setSelectedQuinzenaInput(currentQuinzenaInput);\n        } else {\n            setSelectedWeekInput(currentWeekInput);\n        }\n    }, [currentWeekInput, currentQuinzenaInput, useQuinzena]);\n    \n    // Berechne das Datum des Montags der aktuellen Woche oder Start der Quinzena\n    const currentMonday = startOfWeek(today, { weekStartsOn: 1 });\n    const currentQuinzenaStart = convertQuinzenaToDate(currentQuinzenaInput);\n    \n    const [selectedWeekDate, setSelectedWeekDate] = useState<string>(format(currentMonday, 'yyyy-MM-dd'));\n    const [selectedQuinzenaDate, setSelectedQuinzenaDate] = useState<string>(currentQuinzenaStart);\n    \n    // Sicherstellen, dass selectedDate immer korrekt ist (MUSS vor useEffect definiert werden)\n    const selectedDate = useMemo(() => {\n        const result = useQuinzena \n            ? (selectedQuinzenaDate || convertQuinzenaToDate(getCurrentQuinzena()))\n            : (selectedWeekDate || format(startOfWeek(today, { weekStartsOn: 1 }), 'yyyy-MM-dd'));\n        //  MEMORY: Debug-Logs deaktiviert um Memory zu sparen\n        // console.log('selectedDate calculated:', { useQuinzena, selectedQuinzenaDate, selectedWeekDate, result });\n        return result;\n    }, [useQuinzena, selectedQuinzenaDate, selectedWeekDate]);\n    \n    // State fr das WorktimeModal\n    const [showWorkTimeModal, setShowWorkTimeModal] = useState(false);\n    const [selectedDateForModal, setSelectedDateForModal] = useState<string>('');\n\n    //  MEMORY: Cleanup - Stats beim Unmount lschen\n    useEffect(() => {\n        return () => {\n            //  MEMORY: Cleanup - setTimeout lschen\n            if (statsTimeoutRef.current) {\n                clearTimeout(statsTimeoutRef.current);\n                statsTimeoutRef.current = null;\n            }\n            if (periodChangeTimeoutRef.current) {\n                clearTimeout(periodChangeTimeoutRef.current);\n                periodChangeTimeoutRef.current = null;\n            }\n            setStats(null);\n            setFullStats(null);\n            setCommissionStats(null);\n        };\n    }, []); // Nur beim Unmount ausfhren\n\n    //  PERFORMANCE: Priorisierung - Erste 5 Tage zuerst (sichtbarer Teil)\n    // Warte bis user geladen ist, bevor wir Daten laden (um isColombia korrekt zu prfen)\n    useEffect(() => {\n        // Warte bis user geladen ist (um isColombia korrekt zu prfen)\n        if (!user) {\n            return;\n        }\n        //  Lade Stats (Backend gibt alle Tage zurck, Frontend zeigt zuerst 5)\n        fetchStats();\n    }, [selectedDate, user, useQuinzena]);\n\n    // Neue Funktion: fetchStatsWithDate (kann mit explizitem Datum aufgerufen werden)\n    const fetchStatsWithDate = async (dateToSend: string, isQuinzena: boolean) => {\n        try {\n            setLoading(true);\n            \n            if (!dateToSend) {\n                console.error('Kein Datum zum Senden verfgbar');\n                setError('Kein Datum verfgbar');\n                setLoading(false);\n                return;\n            }\n            \n            //  MEMORY: Debug-Logs deaktiviert um Memory zu sparen\n            // console.log('Fetch Stats:', { isQuinzena, dateToSend });\n            \n            const endpoint = isQuinzena \n                ? `${API_ENDPOINTS.WORKTIME.STATS}?quinzena=${dateToSend}`\n                : `${API_ENDPOINTS.WORKTIME.STATS}?week=${dateToSend}`;\n            \n            // console.log('API Endpoint:', endpoint);\n            \n            const response = await axiosInstance.get(endpoint);\n            const data = response.data;\n            \n            // console.log('API Response:', data);\n            \n            // Wichtig: Stelle sicher, dass die weeklyData das richtige date-Format haben\n            if (data && data.weeklyData) {\n                if (isQuinzena) {\n                    // Fr Quinzenas: Backend gibt bereits korrekte Daten mit date zurck\n                    //  MEMORY: Debug-Logs deaktiviert um Memory zu sparen\n                    // console.log('Quinzena-Daten vom Backend:', {\n                    //     totalHours: data.totalHours,\n                    //     weeklyDataLength: data.weeklyData.length,\n                    //     weeklyData: data.weeklyData\n                    // });\n                    \n                    // Stelle sicher, dass alle Eintrge ein date-Feld haben und sortiere nach Datum\n                    const validatedData = {\n                        ...data,\n                        weeklyData: data.weeklyData\n                            .map(item => ({\n                                ...item,\n                                date: item.date || '',\n                                hours: item.hours || 0\n                            }))\n                            .sort((a, b) => {\n                                // Sortiere nach Datum\n                                if (a.date && b.date) {\n                                    return a.date.localeCompare(b.date);\n                                }\n                                return 0;\n                            })\n                    };\n                    //  MEMORY: Debug-Logs deaktiviert um Memory zu sparen\n                    // console.log('Validierte Quinzena-Daten:', validatedData);\n                    //  PERFORMANCE: Priorisierung - Erste 5 Tage zuerst (sichtbarer Teil)\n                    const first5Days = {\n                        ...validatedData,\n                        weeklyData: validatedData.weeklyData.slice(0, 5) //  Nur erste 5 Tage\n                    };\n                    setStats(first5Days);\n                    setFullStats(validatedData); //  Vollstndige Stats fr spter\n                } else {\n                    // Fr Wochen: Mappe Wochentage zu Daten\n                    const weekdayMapping: Record<string, number> = {\n                        \"Montag\": 1,\n                        \"Dienstag\": 2,\n                        \"Mittwoch\": 3,\n                        \"Donnerstag\": 4,\n                        \"Freitag\": 5,\n                        \"Samstag\": 6,\n                        \"Sonntag\": 7,\n                        // Fallback fr andere Sprachen\n                        [t('worktime.days.monday')]: 1,\n                        [t('worktime.days.tuesday')]: 2,\n                        [t('worktime.days.wednesday')]: 3,\n                        [t('worktime.days.thursday')]: 4,\n                        [t('worktime.days.friday')]: 5,\n                        [t('worktime.days.saturday')]: 6,\n                        [t('worktime.days.sunday')]: 7\n                    };\n                    \n                    // Berechne die Tagesdaten fr die Woche (7 Tage)\n                    const periodDates: string[] = [];\n                    for (let i = 0; i < 7; i++) {\n                        periodDates.push(incrementDateString(dateToSend, i));\n                    }\n                    \n                    // Konvertiere die Wochentage in Daten im YYYY-MM-DD Format\n                    const enrichedData = {\n                        ...data,\n                        weeklyData: data.weeklyData.map((item) => {\n                            const dayIndex = weekdayMapping[item.day as keyof typeof weekdayMapping];\n                            if (dayIndex === undefined) {\n                                console.error(`Unbekannter Wochentag: ${item.day}`);\n                                return item;\n                            }\n                            \n                            // Fr Wochen: Da unser weekdayMapping bei 1 beginnt, mssen wir 1 subtrahieren\n                            const formattedDate = periodDates[dayIndex - 1];\n                            return {\n                                ...item,\n                                date: formattedDate\n                            };\n                        })\n                    };\n                    \n                    //  PERFORMANCE: Priorisierung - Erste 5 Tage zuerst (sichtbarer Teil)\n                    const first5Days = {\n                        ...enrichedData,\n                        weeklyData: enrichedData.weeklyData.slice(0, 5) //  Nur erste 5 Tage\n                    };\n                    setStats(first5Days);\n                    setFullStats(enrichedData); //  Vollstndige Stats fr spter\n                }\n            } else {\n                //  PERFORMANCE: Priorisierung - Erste 5 Tage zuerst (sichtbarer Teil)\n                const first5Days = data.weeklyData ? {\n                    ...data,\n                    weeklyData: data.weeklyData.slice(0, 5) //  Nur erste 5 Tage\n                } : data;\n                setStats(first5Days);\n                setFullStats(data); //  Vollstndige Stats fr spter\n            }\n            \n            //  PERFORMANCE: Rest im Hintergrund (nach 200ms Verzgerung)\n            // Zeige vollstndige Stats nach kurzer Verzgerung\n            //  MEMORY: Cleanup - Alten Timeout lschen bevor neuer erstellt wird\n            if (statsTimeoutRef.current) {\n                clearTimeout(statsTimeoutRef.current);\n            }\n            statsTimeoutRef.current = setTimeout(() => {\n                if (fullStats === null && data && data.weeklyData) {\n                    setStats(data); //  Zeige vollstndige Stats\n                }\n                statsTimeoutRef.current = null;\n            }, 200);\n            \n            setError(null);\n        } catch (err: any) {\n            console.error('Fehler beim Abrufen der Statistikdaten:', err);\n            setError(err?.response?.data?.message || 'Fehler beim Laden der Daten');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    // Alte fetchStats-Funktion bleibt fr useEffect-Kompatibilitt\n    const fetchStats = async () => {\n        fetchStatsWithDate(selectedDate, useQuinzena);\n    };\n\n    const handleExport = async () => {\n        try {\n            const token = localStorage.getItem('token');\n            const response = await axiosInstance.get(`${API_ENDPOINTS.WORKTIME.BASE}/export?week=${selectedWeekDate}`, {\n                responseType: 'blob'\n            });\n\n            const blob = new Blob([response.data], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\n            const url = window.URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = t('worktime.stats.exportFilename', { week: selectedWeekInput.split('W')[1] });\n            document.body.appendChild(a);\n            a.click();\n            window.URL.revokeObjectURL(url);\n            document.body.removeChild(a);\n        } catch (error) {\n            console.error('Fehler beim Exportieren:', error);\n            setError(t('worktime.stats.export') + ': ' + t('common.error'));\n        }\n    };\n\n    const handleQuinzenaChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const newQuinzenaInput = e.target.value;\n        if (!newQuinzenaInput) return;\n        \n        setSelectedQuinzenaInput(newQuinzenaInput);\n        \n        // Konvertiere das Quinzena-Format in ein Datum fr die API\n        const newQuinzenaDate = convertQuinzenaToDate(newQuinzenaInput);\n        setSelectedQuinzenaDate(newQuinzenaDate);\n        \n        // Explizit Daten neu laden\n        queueMicrotask(() => {\n            fetchStatsWithDate(newQuinzenaDate, true);\n        });\n    };\n    \n    // Handler fr Radio-Button-Wechsel zwischen Semana und Quinzena\n    const handlePeriodChange = (newUseQuinzena: boolean) => {\n        // Markiere als manuelle nderung\n        isManualPeriodChange.current = true;\n        \n        // 1. Setze useQuinzena sofort\n        setUseQuinzena(newUseQuinzena);\n        \n        // 2. Berechne das korrekte Datum synchron\n        let newDate: string;\n        let newInput: string;\n        \n        if (newUseQuinzena) {\n            // Quinzena-Modus\n            const currentQuinzena = getCurrentQuinzena();\n            newInput = currentQuinzena;\n            newDate = convertQuinzenaToDate(currentQuinzena);\n            setSelectedQuinzenaInput(newInput);\n            setSelectedQuinzenaDate(newDate);\n        } else {\n            // Woche-Modus\n            newInput = currentWeekInput;\n            newDate = convertWeekToDate(currentWeekInput);\n            setSelectedWeekInput(newInput);\n            setSelectedWeekDate(newDate);\n        }\n        \n        // 3. Rufe fetchStatsWithDate explizit mit dem neuen Datum auf\n        // Verwende queueMicrotask, um sicherzustellen, dass State-Updates verarbeitet wurden\n        queueMicrotask(() => {\n            fetchStatsWithDate(newDate, newUseQuinzena);\n            // Reset nach kurzer Verzgerung\n            //  MEMORY: Cleanup - Alten Timeout lschen bevor neuer erstellt wird\n            if (periodChangeTimeoutRef.current) {\n                clearTimeout(periodChangeTimeoutRef.current);\n            }\n            periodChangeTimeoutRef.current = setTimeout(() => {\n                isManualPeriodChange.current = false;\n                periodChangeTimeoutRef.current = null;\n            }, 100);\n        });\n    };\n    \n    // useEffect fr automatische isColombia-nderungen (nicht fr manuelle Radio-Button-Wechsel)\n    useEffect(() => {\n        // berspringe, wenn die nderung manuell war\n        if (isManualPeriodChange.current) {\n            return;\n        }\n        \n        // Nur ausfhren, wenn sich isColombia ndert (nicht bei manuellem Radio-Button-Klick)\n        if (isColombia && !useQuinzena) {\n            // Automatisch auf Quinzena umschalten wenn Kolumbien erkannt wird\n            const currentQuinzena = getCurrentQuinzena();\n            setSelectedQuinzenaInput(currentQuinzena);\n            const quinzenaDate = convertQuinzenaToDate(currentQuinzena);\n            setSelectedQuinzenaDate(quinzenaDate);\n            setUseQuinzena(true);\n            // Daten neu laden\n            queueMicrotask(() => {\n                fetchStatsWithDate(quinzenaDate, true);\n            });\n        } else if (!isColombia && useQuinzena) {\n            // Automatisch auf Woche umschalten wenn nicht Kolumbien\n            const weekDate = convertWeekToDate(currentWeekInput);\n            setSelectedWeekInput(currentWeekInput);\n            setSelectedWeekDate(weekDate);\n            setUseQuinzena(false);\n            // Daten neu laden\n            queueMicrotask(() => {\n                fetchStatsWithDate(weekDate, false);\n            });\n        }\n    }, [isColombia, useQuinzena]); // isColombia UND useQuinzena als Dependencies, aber mit Ref-Check\n\n    // Funktion zum ffnen des Modals fr den ausgewhlten Tag\n    const openWorkTimeModal = (date: string) => {\n        // Sicherheitsprfung: Falls date undefined ist, nichts tun\n        if (!date) {\n            console.error('Kein Datum fr Modal angegeben');\n            return;\n        }\n        \n        // Klare Debug-Ausgabe ohne unntige Komplexitt\n        // console.log(`Modal wird geffnet mit Datum: ${date}`);\n        \n        // Einfache Sicherheitsberprfung: Stelle sicher, dass ein gltiges Datumsformat verwendet wird\n        if (!date.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n            console.error(`Ungltiges Datum fr Modal: ${date}`);\n            return;\n        }\n        \n        // Keine weitere Manipulationen am Datum - nutze direkt den bergebenen Wert\n        setSelectedDateForModal(date);\n        setShowWorkTimeModal(true);\n    };\n\n    // Funktion zum Schlieen des Modals\n    const closeWorkTimeModal = () => {\n        setShowWorkTimeModal(false);\n    };\n\n    useEffect(() => {\n        if (!loading && stats && stats.weeklyData) {\n            // Finde den hchsten Stundenwert fr die Skalierung\n            const maxHours = stats.weeklyData.reduce((max, day) => {\n                const hours = typeof day.hours === 'number' ? day.hours : parseFloat(day.hours);\n                return hours > max ? hours : max;\n            }, 0);\n            \n            setMaxHours(maxHours);\n        }\n    }, [loading, stats]);\n\n    // Lade Kommissions-Daten\n    const fetchCommissionStats = useCallback(async () => {\n        if (!user?.id) return;\n        try {\n            setCommissionLoading(true);\n            const startDate = new Date(new Date().getFullYear(), 0, 1);\n            const endDate = new Date();\n            const response = await axiosInstance.get(API_ENDPOINTS.TOUR_BOOKINGS.COMMISSIONS(user.id), {\n                params: {\n                    startDate: startDate.toISOString(),\n                    endDate: endDate.toISOString()\n                }\n            });\n            if (response.data.success) {\n                setCommissionStats(response.data.data);\n            }\n        } catch (err: any) {\n            console.error('Fehler beim Laden der Kommissions-Daten:', err);\n        } finally {\n            setCommissionLoading(false);\n        }\n    }, [user?.id]);\n\n    useEffect(() => {\n        if (activeTab === 'commissions' && user?.id) {\n            fetchCommissionStats();\n        }\n    }, [activeTab, user?.id, fetchCommissionStats]);\n\n    if (loading && activeTab === 'worktime') return <div className=\"p-4\">{t('common.loading')}</div>;\n    if (error && activeTab === 'worktime') return <div className=\"p-4 text-red-600\">{error}</div>;\n    if (!stats && activeTab === 'worktime') return null;\n\n    const periodDays = useQuinzena ? getQuinzenaDays(selectedQuinzenaDate) : getWeekDays(selectedWeekDate);\n    \n    // Finde den hchsten Stundenwert fr die Skalierung\n    // Der scaleMax-Wert wird aus dem State-maxHours berechnet\n    const scaleMax = Math.max(8, Math.ceil(maxHours * 1.1));\n    \n    // Konstante fr die Sollarbeitszeit aus dem Benutzerprofil\n    const targetWorkHours = user?.normalWorkingHours ?? 7.6;\n\n    return (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n                <div className=\"flex items-center pl-2 sm:pl-0 flex-shrink min-w-0\">\n                    <ChartBarIcon className=\"h-5 w-5 sm:h-6 sm:w-6 mr-2 dark:text-white flex-shrink-0\" />\n                    <h2 className=\"text-base sm:text-lg md:text-xl font-semibold dark:text-white truncate\">{t('worktime.stats.title')}</h2>\n                </div>\n                \n                {/* Tab-Navigation */}\n                <div className=\"flex items-center gap-2 border-b border-gray-200 dark:border-gray-700\">\n                    <button\n                        onClick={() => setActiveTab('worktime')}\n                        className={`py-2 px-3 border-b-2 font-medium text-sm ${\n                            activeTab === 'worktime'\n                                ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                        }`}\n                    >\n                        {t('worktime.stats.tabs.worktime', 'Arbeitszeit')}\n                    </button>\n                    <button\n                        onClick={() => setActiveTab('commissions')}\n                        className={`py-2 px-3 border-b-2 font-medium text-sm ${\n                            activeTab === 'commissions'\n                                ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                        }`}\n                    >\n                        {t('worktime.stats.tabs.commissions', 'Kommissionen')}\n                    </button>\n                </div>\n                <div className=\"flex items-center space-x-2 sm:space-x-4\">\n                    {/* Toggle-Button-Switch fr Woche/Quinzena - nur anzeigen wenn Kolumbien */}\n                    {isColombia && (\n                        <div className=\"flex items-center rounded-lg border border-gray-300 dark:border-gray-600 p-0.5 sm:p-1 bg-gray-50 dark:bg-gray-800\">\n                            <button\n                                type=\"button\"\n                                onClick={() => handlePeriodChange(false)}\n                                className={`flex items-center gap-1 sm:gap-2 px-1.5 sm:px-3 py-1 sm:py-1.5 rounded-md text-sm font-medium transition-all duration-200 ${\n                                    !useQuinzena\n                                        ? 'bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm'\n                                        : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200'\n                                }`}\n                            >\n                                <CalendarIcon className=\"h-3.5 w-3.5 sm:h-4 sm:w-4\" />\n                                <span className=\"whitespace-nowrap\">\n                                    <ResponsiveLabel long={t('worktime.stats.week')} short=\"7d\" />\n                                </span>\n                            </button>\n                            <button\n                                type=\"button\"\n                                onClick={() => handlePeriodChange(true)}\n                                className={`flex items-center gap-1 sm:gap-2 px-1.5 sm:px-3 py-1 sm:py-1.5 rounded-md text-sm font-medium transition-all duration-200 ${\n                                    useQuinzena\n                                        ? 'bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm'\n                                        : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200'\n                                }`}\n                            >\n                                <ClockIcon className=\"h-3.5 w-3.5 sm:h-4 sm:w-4\" />\n                                <span className=\"whitespace-nowrap\">\n                                    <ResponsiveLabel long={t('worktime.stats.quinzena')} short=\"15d\" />\n                                </span>\n                            </button>\n                        </div>\n                    )}\n                    {useQuinzena ? (\n                        <input\n                            type=\"text\"\n                            pattern=\"\\d{4}-\\d{2}-Q[12]\"\n                            placeholder=\"YYYY-MM-Q1\"\n                            value={selectedQuinzenaInput}\n                            onChange={(e) => {\n                                const value = e.target.value;\n                                // Format: YYYY-MM-Q1 oder YYYY-MM-Q2\n                                if (/^\\d{4}-\\d{2}-Q[12]$/.test(value) || value === '') {\n                                    setSelectedQuinzenaInput(value);\n                                    if (value.match(/^\\d{4}-\\d{2}-Q[12]$/)) {\n                                        const newDate = convertQuinzenaToDate(value);\n                                        setSelectedQuinzenaDate(newDate);\n                                        // Explizit Daten neu laden\n                                        queueMicrotask(() => {\n                                            fetchStatsWithDate(newDate, true);\n                                        });\n                                    }\n                                }\n                            }}\n                            className=\"border border-gray-300 dark:border-gray-600 rounded-md text-sm h-7 sm:h-10 px-1.5 sm:px-3 dark:bg-gray-700 dark:text-white min-w-28 w-28 sm:w-28\"\n                            title={t('worktime.stats.quinzenaFormat')}\n                        />\n                    ) : (\n                        <input\n                            type=\"text\"\n                            pattern=\"\\d{4}-W\\d{2}\"\n                            placeholder=\"YYYY-Www\"\n                            value={selectedWeekInput}\n                            onChange={(e) => {\n                                const value = e.target.value;\n                                // Format: YYYY-Www\n                                if (/^\\d{4}-W\\d{1,2}$/.test(value) || value === '') {\n                                    setSelectedWeekInput(value);\n                                    if (value.match(/^\\d{4}-W\\d{2}$/)) {\n                                        const newDate = convertWeekToDate(value);\n                                        setSelectedWeekDate(newDate);\n                                        // Explizit Daten neu laden\n                                        queueMicrotask(() => {\n                                            fetchStatsWithDate(newDate, false);\n                                        });\n                                    }\n                                }\n                            }}\n                            className=\"border border-gray-300 dark:border-gray-600 rounded-md text-sm h-7 sm:h-10 px-1.5 sm:px-3 dark:bg-gray-700 dark:text-white min-w-28 w-28 sm:w-28\"\n                            title={t('worktime.stats.weekFormat')}\n                        />\n                    )}\n                    <button\n                        onClick={handleExport}\n                        className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1 sm:p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center min-w-7 min-h-7 sm:min-w-8 sm:min-h-8 w-7 h-7 sm:w-8 sm:h-8\"\n                        title={t('worktime.stats.export')}\n                        aria-label={t('worktime.stats.exportTitle')}\n                        style={{ marginTop: '1px', marginBottom: '1px' }}\n                    >\n                        <DocumentArrowDownIcon className=\"h-3.5 w-3.5 sm:h-4 sm:w-4\" />\n                    </button>\n                </div>\n            </div>\n\n            {/* Tab-Content */}\n            {activeTab === 'worktime' && (\n                <>\n            <div className=\"flex flex-row gap-2 mb-8 overflow-x-auto\">\n                <div className=\"bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg flex-1 min-w-0\">\n                    <h3 className=\"text-lg font-medium text-blue-900 dark:text-blue-100 mb-2 whitespace-nowrap text-sm sm:text-base md:text-lg text-center\">{t('worktime.stats.totalHours')}</h3>\n                    <p className=\"text-xl sm:text-2xl md:text-3xl font-bold text-blue-600 dark:text-blue-400 whitespace-nowrap text-center\">{stats.totalHours}{t('worktime.stats.hourShort')}</p>\n                </div>\n                <div className=\"bg-green-50 dark:bg-green-900/30 p-4 rounded-lg flex-1 min-w-0\">\n                    <h3 className=\"text-lg font-medium text-green-900 dark:text-green-100 mb-2 whitespace-nowrap text-sm sm:text-base md:text-lg text-center\">{t('worktime.stats.averagePerDay')}</h3>\n                    <p className=\"text-xl sm:text-2xl md:text-3xl font-bold text-green-600 dark:text-green-400 whitespace-nowrap text-center\">{stats.averageHoursPerDay}{t('worktime.stats.hourShort')}</p>\n                </div>\n                <div className=\"bg-purple-50 dark:bg-purple-900/30 p-4 rounded-lg flex-1 min-w-0\">\n                    <h3 className=\"text-lg font-medium text-purple-900 dark:text-purple-100 mb-2 whitespace-nowrap text-sm sm:text-base md:text-lg text-center\">{t('worktime.stats.workDays')}</h3>\n                    <p className=\"text-xl sm:text-2xl md:text-3xl font-bold text-purple-600 dark:text-purple-400 whitespace-nowrap text-center\">{stats.daysWorked}</p>\n                </div>\n            </div>\n\n            <div className=\"mt-8\">\n                <h3 className=\"text-lg font-medium mb-4 dark:text-white\">\n                    {useQuinzena ? t('worktime.stats.quinzenaProgress') : t('worktime.stats.weeklyProgress')}\n                </h3>\n                \n                {/* Chart Container */}\n                <div className=\"relative\" style={{ height: '200px' }}>\n                    {/* Y-Achse Beschriftungen */}\n                    <div className=\"absolute right-0 h-full flex flex-col justify-between text-xs text-gray-500 dark:text-gray-400 pr-1\">\n                        <span>{scaleMax}h</span>\n                        <span>{Math.round(scaleMax * 0.75)}h</span>\n                        <span>{Math.round(scaleMax * 0.5)}h</span>\n                        <span>{Math.round(scaleMax * 0.25)}h</span>\n                        <span>0h</span>\n                    </div>\n                    \n                    {/* Horizontale Hilfslinien */}\n                    <div className=\"absolute inset-0 flex flex-col justify-between pointer-events-none pr-8\">\n                        <div className=\"w-full border-t border-gray-200 dark:border-gray-700\"></div>\n                        <div className=\"w-full border-t border-gray-200 dark:border-gray-700\"></div>\n                        <div className=\"w-full border-t border-gray-200 dark:border-gray-700\"></div>\n                        <div className=\"w-full border-t border-gray-200 dark:border-gray-700\"></div>\n                        <div className=\"w-full border-t border-gray-200 dark:border-gray-700\"></div>\n                    </div>\n                    \n                    {/* Sollarbeitszeit-Linie - nur anzeigen wenn sie ins Diagramm passt */}\n                    {targetWorkHours <= scaleMax && (\n                        <div \n                            className=\"absolute w-full border-t-2 border-red-600 dark:border-red-500 z-10 pr-8\"\n                            style={{ \n                                bottom: `${(targetWorkHours / scaleMax) * 100}%`,\n                                borderStyle: 'dashed'\n                            }}\n                        >\n                            <span className=\"absolute -top-3 right-8 text-xs text-red-600 dark:text-red-500 font-medium\">\n                                {t('worktime.stats.target')}: {targetWorkHours}{t('worktime.stats.hourShort')}\n                            </span>\n                        </div>\n                    )}\n                    \n                    {/* Legende */}\n                    <div className=\"absolute top-0 left-0 text-xs flex items-center gap-2\">\n                        <div className=\"flex items-center\">\n                            <div className=\"w-3 h-3 bg-blue-100 dark:bg-blue-900/50 border-2 border-blue-600 dark:border-blue-400 rounded-sm mr-1\"></div>\n                            <span className=\"text-blue-600 dark:text-blue-400\"> {targetWorkHours}{t('worktime.stats.hourShort')}</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                            <div className=\"w-3 h-3 bg-red-100 dark:bg-red-900/50 border-2 border-red-600 dark:border-red-400 rounded-sm mr-1\"></div>\n                            <span className=\"text-red-600 dark:text-red-400\">&gt; {targetWorkHours}{t('worktime.stats.hourShort')}</span>\n                        </div>\n                    </div>\n                    \n                    {/* Balken */}\n                    <div className=\"absolute inset-0 pr-8 flex items-end\">\n                        <div className=\"w-full h-full flex justify-between\">\n                            {stats.weeklyData.map((dayData, index) => {\n                                // Stellen Sie sicher, dass hours eine Zahl ist\n                                const hours = typeof dayData.hours === 'number' ? dayData.hours : parseFloat(dayData.hours);\n                                \n                                // Berechnung der Hhe fr den Teil ber der Sollarbeitszeit\n                                const overTargetHeight = hours > targetWorkHours \n                                    ? ((hours - targetWorkHours) / scaleMax) * 100 \n                                    : 0;\n                                \n                                // Berechnung der Hhe fr den Teil unter der Sollarbeitszeit\n                                const normalHeight = Math.min(hours, targetWorkHours) / scaleMax * 100;\n                                \n                                // Verwende das bereits berechnete Datum aus weeklyData - keine weitere Berechnung notwendig!\n                                const formattedDate = dayData.date;\n                                \n                                // Fr Quinzenas: dynamische Breite basierend auf Anzahl der Tage\n                                const quinzenaDaysCount = useQuinzena ? getQuinzenaDays(selectedQuinzenaDate).length : 7;\n                                const containerWidth = useQuinzena ? `${100 / quinzenaDaysCount}%` : '13%';\n                                const barWidth = useQuinzena ? 'w-3/12' : 'w-5/12';\n                                \n                                return (\n                                    <div key={index} className=\"flex flex-col items-center\" style={{ width: containerWidth }}>\n                                        <div \n                                            className={`relative ${barWidth} h-full flex flex-col justify-end cursor-pointer`}\n                                            title={t('worktime.stats.clickToView')}\n                                        >\n                                            {/* Teil ber der Sollarbeitszeit (rot) */}\n                                            {overTargetHeight > 0 && (\n                                                <div \n                                                    className=\"w-full bg-red-100 dark:bg-red-900/50 border-2 border-red-600 dark:border-red-400 hover:bg-red-200 dark:hover:bg-red-900/70 cursor-pointer\"\n                                                    onClick={() => openWorkTimeModal(formattedDate)}\n                                                    style={{ \n                                                        height: `${overTargetHeight}%`,\n                                                        minHeight: '2px',\n                                                        borderTopLeftRadius: '8px',\n                                                        borderTopRightRadius: '8px',\n                                                        borderBottomWidth: overTargetHeight > 0 && normalHeight > 0 ? '0' : '2px'\n                                                    }}\n                                                />\n                                            )}\n                                            {/* Teil unter der Sollarbeitszeit (blau) */}\n                                            {normalHeight > 0 && (\n                                                <div \n                                                    className=\"w-full bg-blue-100 dark:bg-blue-900/50 border-2 border-blue-600 dark:border-blue-400 hover:bg-blue-200 dark:hover:bg-blue-900/70 cursor-pointer\"\n                                                    onClick={() => openWorkTimeModal(formattedDate)}\n                                                    style={{ \n                                                        height: `${normalHeight}%`,\n                                                        minHeight: hours > 0 ? '4px' : '0',\n                                                        borderTopLeftRadius: overTargetHeight > 0 ? '0' : '8px',\n                                                        borderTopRightRadius: overTargetHeight > 0 ? '0' : '8px',\n                                                        borderBottomLeftRadius: '4px',\n                                                        borderBottomRightRadius: '4px',\n                                                        borderTopWidth: overTargetHeight > 0 ? '0' : '2px'\n                                                    }}\n                                                />\n                                            )}\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    </div>\n                    \n                    {/* X-Achse Beschriftungen */}\n                    <div className=\"absolute bottom-0 left-0 right-8 pt-8 flex justify-between pointer-events-none\">\n                        {stats.weeklyData.map((dayData, index) => {\n                            const quinzenaDaysCount = useQuinzena ? getQuinzenaDays(selectedQuinzenaDate).length : 7;\n                            const widthPercent = useQuinzena ? `${100 / quinzenaDaysCount}%` : '13%';\n                            return (\n                                <div key={index} className=\"flex flex-col items-center\" style={{ width: widthPercent }}>\n                                    <div className=\"text-xs sm:text-sm text-gray-600 dark:text-gray-400\">\n                                        {(() => {\n                                            // bersetze deutschen Wochentag vom Backend\n                                            const dayLower = dayData.day.toLowerCase();\n                                            if (dayLower.includes('montag') || dayLower.includes('mo')) return t('worktime.days.monday').substring(0, 2);\n                                            if (dayLower.includes('dienstag') || dayLower.includes('di')) return t('worktime.days.tuesday').substring(0, 2);\n                                            if (dayLower.includes('mittwoch') || dayLower.includes('mi')) return t('worktime.days.wednesday').substring(0, 2);\n                                            if (dayLower.includes('donnerstag') || dayLower.includes('do')) return t('worktime.days.thursday').substring(0, 2);\n                                            if (dayLower.includes('freitag') || dayLower.includes('fr')) return t('worktime.days.friday').substring(0, 2);\n                                            if (dayLower.includes('samstag') || dayLower.includes('sa')) return t('worktime.days.saturday').substring(0, 2);\n                                            if (dayLower.includes('sonntag') || dayLower.includes('so')) return t('worktime.days.sunday').substring(0, 2);\n                                            return dayData.day.substring(0, 2);\n                                        })()}\n                                    </div>\n                                    <div className=\"text-xs sm:text-sm font-medium dark:text-gray-300\">\n                                        {dayData.hours.toFixed(1)}{t('worktime.stats.hourShort')}\n                                    </div>\n                                </div>\n                            );\n                        })}\n                    </div>\n                </div>\n            </div>\n            \n            {/* WorktimeModal */}\n            {showWorkTimeModal && (\n                <WorktimeModal \n                    isOpen={showWorkTimeModal}\n                    onClose={closeWorkTimeModal}\n                    selectedDate={selectedDateForModal}\n                />\n            )}\n                </>\n            )}\n            \n            {activeTab === 'commissions' && (\n                <div className=\"space-y-6\">\n                    {commissionLoading ? (\n                        <div className=\"p-4 text-center\">{t('common.loading')}</div>\n                    ) : commissionStats ? (\n                        <>\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                                <div className=\"bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg\">\n                                    <h3 className=\"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2\">\n                                        {t('worktime.stats.commissions.total', 'Gesamtkommissionen')}\n                                    </h3>\n                                    <p className=\"text-2xl font-bold text-blue-600 dark:text-blue-400\">\n                                        {new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'COP' }).format(commissionStats.totalCommissions || 0)}\n                                    </p>\n                                </div>\n                                <div className=\"bg-green-50 dark:bg-green-900/30 p-4 rounded-lg\">\n                                    <h3 className=\"text-sm font-medium text-green-900 dark:text-green-100 mb-2\">\n                                        {t('worktime.stats.commissions.totalBookings', 'Anzahl Buchungen')}\n                                    </h3>\n                                    <p className=\"text-2xl font-bold text-green-600 dark:text-green-400\">\n                                        {commissionStats.totalBookings || 0}\n                                    </p>\n                                </div>\n                                <div className=\"bg-purple-50 dark:bg-purple-900/30 p-4 rounded-lg\">\n                                    <h3 className=\"text-sm font-medium text-purple-900 dark:text-purple-100 mb-2\">\n                                        {t('worktime.stats.commissions.average', 'Durchschnitt')}\n                                    </h3>\n                                    <p className=\"text-2xl font-bold text-purple-600 dark:text-purple-400\">\n                                        {new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'COP' }).format(commissionStats.averageCommission || 0)}\n                                    </p>\n                                </div>\n                            </div>\n                            \n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                <div className=\"bg-white dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600\">\n                                    <h3 className=\"text-lg font-semibold mb-3 dark:text-white\">\n                                        {t('worktime.stats.commissions.byTourType', 'Nach Tour-Typ')}\n                                    </h3>\n                                    <div className=\"space-y-2\">\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-gray-600 dark:text-gray-400\">\n                                                {t('tours.typeOwn', 'Eigene Touren')}\n                                            </span>\n                                            <span className=\"font-semibold dark:text-white\">\n                                                {new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'COP' }).format(commissionStats.byTourType?.own || 0)}\n                                            </span>\n                                        </div>\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-gray-600 dark:text-gray-400\">\n                                                {t('tours.typeExternal', 'Externe Touren')}\n                                            </span>\n                                            <span className=\"font-semibold dark:text-white\">\n                                                {new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'COP' }).format(commissionStats.byTourType?.external || 0)}\n                                            </span>\n                                        </div>\n                                    </div>\n                                </div>\n                                \n                                <div className=\"bg-white dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600\">\n                                    <h3 className=\"text-lg font-semibold mb-3 dark:text-white\">\n                                        {t('worktime.stats.commissions.tourSales', 'Tour-Verkufe')}\n                                    </h3>\n                                    <div className=\"space-y-2 max-h-64 overflow-y-auto\">\n                                        {commissionStats.tourSales?.length > 0 ? (\n                                            commissionStats.tourSales.map((sale: any) => (\n                                                <div key={sale.tourId} className=\"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-600 last:border-0\">\n                                                    <div>\n                                                        <p className=\"font-medium dark:text-white\">{sale.tourTitle}</p>\n                                                        <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                                                            {sale.salesCount} {t('worktime.stats.commissions.sales', 'Verkufe')}\n                                                        </p>\n                                                    </div>\n                                                    <span className=\"font-semibold dark:text-white\">\n                                                        {new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'COP' }).format(sale.totalCommission || 0)}\n                                                    </span>\n                                                </div>\n                                            ))\n                                        ) : (\n                                            <p className=\"text-gray-500 dark:text-gray-400 text-center py-4\">\n                                                {t('worktime.stats.commissions.noSales', 'Keine Verkufe')}\n                                            </p>\n                                        )}\n                                    </div>\n                                </div>\n                            </div>\n                        </>\n                    ) : (\n                        <div className=\"p-4 text-center text-gray-500 dark:text-gray-400\">\n                            {t('worktime.stats.commissions.noData', 'Keine Kommissions-Daten verfgbar')}\n                        </div>\n                    )}\n                </div>\n            )}\n        </div>\n    );\n};\n\n// Hilfsfunktion zum Inkrementieren eines Datums im String-Format 'YYYY-MM-DD'\nconst incrementDateString = (dateString: string, daysToAdd: number): string => {\n    // Zerlege das Datum\n    const [year, month, day] = dateString.split('-').map(num => parseInt(num));\n    \n    // Erstelle ein Date-Objekt fr diese Berechnung, aber mit Mittag als Uhrzeit\n    // um Zeitzonenprobleme zu vermeiden\n    const date = new Date(year, month - 1, day, 12, 0, 0);\n    \n    // Fge die Tage hinzu\n    date.setDate(date.getDate() + daysToAdd);\n    \n    // Formatiere das Datum zurck als 'YYYY-MM-DD'\n    return format(date, 'yyyy-MM-dd');\n};\n\nexport default WorktimeStats; ","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Link } from 'react-router-dom';\nimport { DevicePhoneMobileIcon, ArrowRightIcon } from '@heroicons/react/24/outline';\n\n// Konfiguration fr die App-Downloads\nconst APP_CONFIG = {\n  // Die URL zum direkten APK-Download\n  apkDownloadUrl: 'https://65.109.228.106.nip.io/downloads/intranet-app.apk',\n  \n  // URLs fr die App Stores (aktuell Platzhalter, spter durch echte Links ersetzen)\n  androidStoreUrl: 'https://play.google.com/store/apps/details?id=com.yourcompany.intranetapp',\n  iosStoreUrl: 'https://apps.apple.com/app/intranet-app/id1234567890',\n  \n  // Landing-Page fr die App (mit weiteren Informationen)\n  appLandingPageUrl: 'https://65.109.228.106.nip.io/mobile-app',\n};\n\nconst AppDownload: React.FC = () => {\n  const { t } = useTranslation();\n  \n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 shadow-sm\">\n      <div className=\"flex flex-col md:flex-row items-center justify-between\">\n        <div className=\"flex items-center mb-4 md:mb-0\">\n          <div className=\"bg-blue-100 dark:bg-blue-900/30 p-3 rounded-full mr-4\">\n            <DevicePhoneMobileIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n          </div>\n          <div>\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">{t('appDownload.title')}</h3>\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n              {t('appDownload.description')}\n            </p>\n          </div>\n        </div>\n        \n        <Link \n          to=\"/mobile-app\" \n          className=\"inline-flex items-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800\"\n        >\n          {t('appDownload.download')}\n          <ArrowRightIcon className=\"ml-2 -mr-1 h-4 w-4\" />\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default AppDownload; ","import React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Requests from '../components/Requests.tsx';\nimport WorktimeStats from '../components/WorktimeStats.tsx';\nimport AppDownload from '../components/AppDownload.tsx';\nimport { DocumentTextIcon } from '@heroicons/react/24/outline';\n\ninterface User {\n  id: number;\n  username: string;\n  email: string;\n  first_name: string;\n  last_name: string;\n}\n\nconst Dashboard: React.FC = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n\n    // Hier wrden wir normalerweise Benutzerdaten vom Server abrufen\n    // Fr dieses Beispiel verwenden wir Mock-Daten\n    setUser({\n      id: 1,\n      username: 'testuser',\n      email: 'test@example.com',\n      first_name: 'Test',\n      last_name: 'User'\n    });\n    setLoading(false);\n  }, [navigate]);\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    navigate('/login');\n  };\n\n  if (loading) {\n    return <div className=\"flex items-center justify-center min-h-screen text-gray-700 dark:text-gray-300\">{t('common.loading')}</div>;\n  }\n\n  return (\n    <div className=\"min-h-screen dark:bg-gray-900\">\n      <div className=\"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6\" data-onboarding=\"dashboard-header\">\n        <div data-onboarding=\"worktime-stats\">\n          <WorktimeStats />\n        </div>\n\n        <div className=\"mt-2 sm:mt-4 md:mt-6 grid grid-cols-1 gap-4\">\n          {/* Anfragen-Bereich */}\n          <div className=\"dashboard-requests-wrapper bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 w-full\" data-onboarding=\"requests-section\">\n            <Requests />\n          </div>\n          \n          {/* App-Download-Bereich */}\n          <div className=\"mt-4\">\n            <AppDownload />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard; ","import * as React from \"react\";\nfunction InformationCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(InformationCircleIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction DocumentTextIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(DocumentTextIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ChartBarIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChartBarIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction DocumentDuplicateIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(DocumentDuplicateIcon);\nexport default ForwardRef;","import {\n  millisecondsInHour,\n  millisecondsInMinute,\n} from \"./constants.js\";\nimport { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link parseISO} function options.\n */\n\n/**\n * @name parseISO\n * @category Common Helpers\n * @summary Parse ISO string\n *\n * @description\n * Parse the given string in ISO 8601 format and return an instance of Date.\n *\n * Function accepts complete ISO 8601 formats as well as partial implementations.\n * ISO 8601: http://en.wikipedia.org/wiki/ISO_8601\n *\n * If the argument isn't a string, the function cannot parse the string or\n * the values are invalid, it returns Invalid Date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param argument - The value to convert\n * @param options - An object with options\n *\n * @returns The parsed date in the local time zone\n *\n * @example\n * // Convert string '2014-02-11T11:30:30' to date:\n * const result = parseISO('2014-02-11T11:30:30')\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert string '+02014101' to date,\n * // if the additional number of digits in the extended year format is 1:\n * const result = parseISO('+02014101', { additionalDigits: 1 })\n * //=> Fri Apr 11 2014 00:00:00\n */\nexport function parseISO(argument, options) {\n  const invalidDate = () => constructFrom(options?.in, NaN);\n\n  const additionalDigits = options?.additionalDigits ?? 2;\n  const dateStrings = splitDateString(argument);\n\n  let date;\n  if (dateStrings.date) {\n    const parseYearResult = parseYear(dateStrings.date, additionalDigits);\n    date = parseDate(parseYearResult.restDateString, parseYearResult.year);\n  }\n\n  if (!date || isNaN(+date)) return invalidDate();\n\n  const timestamp = +date;\n  let time = 0;\n  let offset;\n\n  if (dateStrings.time) {\n    time = parseTime(dateStrings.time);\n    if (isNaN(time)) return invalidDate();\n  }\n\n  if (dateStrings.timezone) {\n    offset = parseTimezone(dateStrings.timezone);\n    if (isNaN(offset)) return invalidDate();\n  } else {\n    const tmpDate = new Date(timestamp + time);\n    const result = toDate(0, options?.in);\n    result.setFullYear(\n      tmpDate.getUTCFullYear(),\n      tmpDate.getUTCMonth(),\n      tmpDate.getUTCDate(),\n    );\n    result.setHours(\n      tmpDate.getUTCHours(),\n      tmpDate.getUTCMinutes(),\n      tmpDate.getUTCSeconds(),\n      tmpDate.getUTCMilliseconds(),\n    );\n    return result;\n  }\n\n  return toDate(timestamp + time + offset, options?.in);\n}\n\nconst patterns = {\n  dateTimeDelimiter: /[T ]/,\n  timeZoneDelimiter: /[Z ]/i,\n  timezone: /([Z+-].*)$/,\n};\n\nconst dateRegex =\n  /^-?(?:(\\d{3})|(\\d{2})(?:-?(\\d{2}))?|W(\\d{2})(?:-?(\\d{1}))?|)$/;\nconst timeRegex =\n  /^(\\d{2}(?:[.,]\\d*)?)(?::?(\\d{2}(?:[.,]\\d*)?))?(?::?(\\d{2}(?:[.,]\\d*)?))?$/;\nconst timezoneRegex = /^([+-])(\\d{2})(?::?(\\d{2}))?$/;\n\nfunction splitDateString(dateString) {\n  const dateStrings = {};\n  const array = dateString.split(patterns.dateTimeDelimiter);\n  let timeString;\n\n  // The regex match should only return at maximum two array elements.\n  // [date], [time], or [date, time].\n  if (array.length > 2) {\n    return dateStrings;\n  }\n\n  if (/:/.test(array[0])) {\n    timeString = array[0];\n  } else {\n    dateStrings.date = array[0];\n    timeString = array[1];\n    if (patterns.timeZoneDelimiter.test(dateStrings.date)) {\n      dateStrings.date = dateString.split(patterns.timeZoneDelimiter)[0];\n      timeString = dateString.substr(\n        dateStrings.date.length,\n        dateString.length,\n      );\n    }\n  }\n\n  if (timeString) {\n    const token = patterns.timezone.exec(timeString);\n    if (token) {\n      dateStrings.time = timeString.replace(token[1], \"\");\n      dateStrings.timezone = token[1];\n    } else {\n      dateStrings.time = timeString;\n    }\n  }\n\n  return dateStrings;\n}\n\nfunction parseYear(dateString, additionalDigits) {\n  const regex = new RegExp(\n    \"^(?:(\\\\d{4}|[+-]\\\\d{\" +\n      (4 + additionalDigits) +\n      \"})|(\\\\d{2}|[+-]\\\\d{\" +\n      (2 + additionalDigits) +\n      \"})$)\",\n  );\n\n  const captures = dateString.match(regex);\n  // Invalid ISO-formatted year\n  if (!captures) return { year: NaN, restDateString: \"\" };\n\n  const year = captures[1] ? parseInt(captures[1]) : null;\n  const century = captures[2] ? parseInt(captures[2]) : null;\n\n  // either year or century is null, not both\n  return {\n    year: century === null ? year : century * 100,\n    restDateString: dateString.slice((captures[1] || captures[2]).length),\n  };\n}\n\nfunction parseDate(dateString, year) {\n  // Invalid ISO-formatted year\n  if (year === null) return new Date(NaN);\n\n  const captures = dateString.match(dateRegex);\n  // Invalid ISO-formatted string\n  if (!captures) return new Date(NaN);\n\n  const isWeekDate = !!captures[4];\n  const dayOfYear = parseDateUnit(captures[1]);\n  const month = parseDateUnit(captures[2]) - 1;\n  const day = parseDateUnit(captures[3]);\n  const week = parseDateUnit(captures[4]);\n  const dayOfWeek = parseDateUnit(captures[5]) - 1;\n\n  if (isWeekDate) {\n    if (!validateWeekDate(year, week, dayOfWeek)) {\n      return new Date(NaN);\n    }\n    return dayOfISOWeekYear(year, week, dayOfWeek);\n  } else {\n    const date = new Date(0);\n    if (\n      !validateDate(year, month, day) ||\n      !validateDayOfYearDate(year, dayOfYear)\n    ) {\n      return new Date(NaN);\n    }\n    date.setUTCFullYear(year, month, Math.max(dayOfYear, day));\n    return date;\n  }\n}\n\nfunction parseDateUnit(value) {\n  return value ? parseInt(value) : 1;\n}\n\nfunction parseTime(timeString) {\n  const captures = timeString.match(timeRegex);\n  if (!captures) return NaN; // Invalid ISO-formatted time\n\n  const hours = parseTimeUnit(captures[1]);\n  const minutes = parseTimeUnit(captures[2]);\n  const seconds = parseTimeUnit(captures[3]);\n\n  if (!validateTime(hours, minutes, seconds)) {\n    return NaN;\n  }\n\n  return (\n    hours * millisecondsInHour + minutes * millisecondsInMinute + seconds * 1000\n  );\n}\n\nfunction parseTimeUnit(value) {\n  return (value && parseFloat(value.replace(\",\", \".\"))) || 0;\n}\n\nfunction parseTimezone(timezoneString) {\n  if (timezoneString === \"Z\") return 0;\n\n  const captures = timezoneString.match(timezoneRegex);\n  if (!captures) return 0;\n\n  const sign = captures[1] === \"+\" ? -1 : 1;\n  const hours = parseInt(captures[2]);\n  const minutes = (captures[3] && parseInt(captures[3])) || 0;\n\n  if (!validateTimezone(hours, minutes)) {\n    return NaN;\n  }\n\n  return sign * (hours * millisecondsInHour + minutes * millisecondsInMinute);\n}\n\nfunction dayOfISOWeekYear(isoWeekYear, week, day) {\n  const date = new Date(0);\n  date.setUTCFullYear(isoWeekYear, 0, 4);\n  const fourthOfJanuaryDay = date.getUTCDay() || 7;\n  const diff = (week - 1) * 7 + day + 1 - fourthOfJanuaryDay;\n  date.setUTCDate(date.getUTCDate() + diff);\n  return date;\n}\n\n// Validation functions\n\n// February is null to handle the leap year (using ||)\nconst daysInMonths = [31, null, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n\nfunction isLeapYearIndex(year) {\n  return year % 400 === 0 || (year % 4 === 0 && year % 100 !== 0);\n}\n\nfunction validateDate(year, month, date) {\n  return (\n    month >= 0 &&\n    month <= 11 &&\n    date >= 1 &&\n    date <= (daysInMonths[month] || (isLeapYearIndex(year) ? 29 : 28))\n  );\n}\n\nfunction validateDayOfYearDate(year, dayOfYear) {\n  return dayOfYear >= 1 && dayOfYear <= (isLeapYearIndex(year) ? 366 : 365);\n}\n\nfunction validateWeekDate(_year, week, day) {\n  return week >= 1 && week <= 53 && day >= 0 && day <= 6;\n}\n\nfunction validateTime(hours, minutes, seconds) {\n  if (hours === 24) {\n    return minutes === 0 && seconds === 0;\n  }\n\n  return (\n    seconds >= 0 &&\n    seconds < 60 &&\n    minutes >= 0 &&\n    minutes < 60 &&\n    hours >= 0 &&\n    hours < 25\n  );\n}\n\nfunction validateTimezone(_hours, minutes) {\n  return minutes >= 0 && minutes <= 59;\n}\n\n// Fallback for modularized imports:\nexport default parseISO;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link addDays} function options.\n */\n\n/**\n * @name addDays\n * @category Day Helpers\n * @summary Add the specified number of days to the given date.\n *\n * @description\n * Add the specified number of days to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of days to be added.\n * @param options - An object with options\n *\n * @returns The new date with the days added\n *\n * @example\n * // Add 10 days to 1 September 2014:\n * const result = addDays(new Date(2014, 8, 1), 10)\n * //=> Thu Sep 11 2014 00:00:00\n */\nexport function addDays(date, amount, options) {\n  const _date = toDate(date, options?.in);\n  if (isNaN(amount)) return constructFrom(options?.in || date, NaN);\n\n  // If 0 days, no-op to avoid changing times in the hour before end of DST\n  if (!amount) return _date;\n\n  _date.setDate(_date.getDate() + amount);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default addDays;\n","import * as React from \"react\";\nfunction DocumentArrowDownIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(DocumentArrowDownIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction DevicePhoneMobileIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(DevicePhoneMobileIcon);\nexport default ForwardRef;"],"names":["getMinDateForType","type","today","Date","minDate","setMonth","getMonth","setDate","getDate","toISOString","split","getDefaultDateForType","ImagePreviewWithCleanup","_ref","file","alt","blobUrlsRef","className","url","setUrl","useState","useEffect","blobUrl","URL","createObjectURL","current","add","revokeObjectURL","delete","_jsx","src","_ref2","isOpen","onClose","onRequestCreated","t","useTranslation","user","useAuth","openSidepane","closeSidepane","useSidepane","isLargeScreen","setIsLargeScreen","window","innerWidth","users","setUsers","branches","setBranches","formData","setFormData","title","description","responsible_id","branch_id","is_private","due_date","create_todo","error","setError","loading","setLoading","isMobile","setIsMobile","temporaryAttachments","setTemporaryAttachments","uploading","setUploading","fileInputRef","useRef","textareaRef","Set","timeoutRef","handleTypeChange","newType","newMinDate","newDefaultDate","prevData","currentDate","dueDate","_objectSpread","async","localStorage","getItem","logger","log","usersResponse","branchesResponse","Promise","all","axiosInstance","get","API_ENDPOINTS","USERS","DROPDOWN","BRANCHES","BASE","data","length","id","toString","_branchesResponse$dat","userBranch","defaultDate","err","console","axiosError","_axiosError$response","_axiosError$response$","code","concat","response","message","fetchData","clearTimeout","checkScreenSize","addEventListener","removeEventListener","forEach","clear","formatUserName","_user$firstName","_user$username","firstName","username","handlePaste","items","event","clipboardData","i","item","indexOf","preventDefault","getAsFile","handleTemporaryAttachment","handleDrop","stopPropagation","dataTransfer","files","handleDragOver","newAttachment","fileName","name","fileType","fileSize","size","prev","insertText","startsWith","cursorPos","selectionStart","textBefore","substring","textAfter","setTimeout","newPos","selectionEnd","focus","_axiosError$response2","_axiosError$response3","handleFileUpload","target","value","handleSubmit","e","Error","responsibleId","parseInt","branchId","isNaN","post","REQUESTS","requested_by_id","status","attachment","FormData","append","ATTACHMENTS","requestId","headers","count","uploadTemporaryAttachments","_axiosError$response4","_axiosError$response5","renderTemporaryAttachments","children","map","index","_jsxs","onClick","attachmentToRemove","filter","_","uploadAfterCreateText","imagePattern","RegExp","replace","linkPattern","newDescription","handleRemoveTemporaryAttachment","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","Dialog","open","Panel","Title","XMarkIcon","onSubmit","required","onChange","htmlFor","ref","rows","onPaste","onDrop","onDragOver","placeholder","_fileInputRef$current","click","Array","isArray","branch","min","selectedDate","checked","disabled","ArrowPathIcon","CheckIcon","_Fragment","style","opacity","transition","pointerEvents","role","_fileInputRef$current2","onRequestUpdated","request","i18n","removeImageMarkdown","text","trim","process","language","setTitle","setDescription","setResponsibleId","responsible","setBranchId","setType","isPrivate","setIsPrivate","setDueDate","createTodo","setCreateTodo","confirmDelete","setConfirmDelete","attachments","setAttachments","uploadedDuringEdit","setUploadedDuringEdit","hasPermission","usePermissions","canDeleteRequest","attachmentId","ATTACHMENT","cleanup","fetchAttachments","requestType","requestDueDate","errorMessage","warn","uploadFileAndInsertLink","getRequestAttachmentUrl","img","document","createElement","classList","body","appendChild","onload","removeChild","originalDescription","finalDescription","imageAttachments","att","_att$fileType","existingImagePattern","existingImages","match","exec","push","imageUrl","imageMarkdown","escapedFileName","test","existingImage","includes","put","BY_ID","updatedResponse","filePath","uploadedAt","_axiosError$response10","_axiosError$response11","handleDelete","_axiosError$response12","_axiosError$response13","renderAttachments","undefined","responseType","Blob","link","href","setAttribute","remove","_axiosError$response8","_axiosError$response9","handleDownloadAttachment","find","a","_axiosError$response6","_axiosError$response7","handleDeleteAttachment","uploadText","renderForm","Number","TrashIcon","getRequestTypeIcon","defaultColumnOrder","REQUESTS_TABLE_ID","MAX_REQUESTS","tableToCardMapping","cardToTableMapping","Requests","requests","setRequests","totalCount","setTotalCount","hasMore","setHasMore","loadingMore","setLoadingMore","searchTerm","setSearchTerm","filterConditions","setFilterConditions","filterLogicalOperators","setFilterLogicalOperators","activeFilterName","setActiveFilterName","selectedFilterId","setSelectedFilterId","isFilterModalOpen","setIsFilterModalOpen","isCreateModalOpen","setIsCreateModalOpen","isEditModalOpen","setIsEditModalOpen","selectedRequest","setSelectedRequest","availableColumns","useMemo","label","shortLabel","settings","isLoading","isLoadingSettings","updateColumnOrder","updateHiddenColumns","toggleColumnVisibility","isColumnVisible","updateViewMode","updateSortConfig","useTableSettings","defaultHiddenColumns","defaultViewMode","draggedColumn","setDraggedColumn","dragOverColumn","setDragOverColumn","isUpdatingHiddenColumnsRef","viewMode","sortConfig","key","direction","handleMainSortChange","useCallback","cardMetadataOrder","columnOrder","cardMetadata","tableCol","cardMeta","getCardMetadataFromColumnOrder","metadataVisibility","setMetadataVisibility","requestedByResponsibleHidden","hiddenColumns","requestedBy","hiddenCardMetadata","hidden","hiddenTableColumns","getHiddenCardMetadata","visibleCardMetadata","meta","has","wrapper","querySelector","fetchRequests","filterId","arguments","limit","offset","operators","sortBy","sortOrder","params","includeAttachments","JSON","stringify","conditions","responseData","requestsData","requestsWithAttachments","existingIds","r","uniqueNewRequests","combined","slice","loadMoreRef","requestsLengthRef","handleSort","currentSortConfig","newDirection","handleStatusChange","newStatus","currentRequest","prevRequests","handleMoveColumn","dragIndex","hoverIndex","newColumnOrder","movingColumn","splice","handleDragStart","columnId","handleDragEnd","applyFilterConditions","resetFilterConditions","initialLoadAttemptedRef","handleFilterChange","filterContext","useFilterContext","loadFilters","defaultFilter","f","initialize","filteredAndSortedRequests","searchLower","toLowerCase","lastName","filterLogicalOperatorsRef","observer","IntersectionObserver","entries","isIntersecting","nextOffset","threshold","observe","disconnect","handleCopyRequest","copiedRequestData","newRequests","CardGrid","visibleColumnIds","CreateRequestModal","newRequest","EditRequestModal","updatedRequest","width","height","PlusIcon","DocumentTextIcon","Squares2X2Icon","TableCellsIcon","FunnelIcon","position","top","right","TableColumnConfig","columns","visibleColumns","from","onToggleColumnVisibility","tableColumnId","newMetadataVisibility","newHiddenColumns","tableColumnIndex","buttonTitle","modalTitle","mainSortConfig","onMainSortChange","showMainSort","FilterPane","onApply","onReset","savedConditions","savedOperators","tableId","SavedFilterTags","onSelectFilter","onFilterChange","defaultFilterName","column","col","draggable","onDragStart","onDragEnd","ArrowsUpDownIcon","ResponsiveLabel","long","short","sortKey","colSpan","expiryStatus","getExpiryStatus","expiryColors","getExpiryColorClasses","bgClass","borderClass","InformationCircleIcon","MarkdownPreview","content","showImagePreview","getStatusColor","getStatusText","expiryStatusForDate","expiryColorsForDate","textClass","toLocaleDateString","ExclamationTriangleIcon","PencilIcon","DocumentDuplicateIcon","metadata","icon","BuildingOfficeIcon","section","typeIcon","typeLabel","requestedByName","shortenedName","UserIcon","responsibleName","dueDateItem","createDueDateMetadataItem","CalendarIcon","date","format","locale","de","descriptionContent","attachmentMetadata","actionButtons","previousStatus","getPreviousStatus","nextStatuses","getNextStatuses","firstNextStatus","DataCard","color","onPreviousClick","onNextClick","actions","CircularProgress","getYear","options","toDate","in","getFullYear","incrementDateString","dateString","daysToAdd","year","month","day","num","WorktimeStats","_user$normalWorkingHo","_commissionStats$byTo","_commissionStats$byTo2","_commissionStats$tour","activeLanguage","useLanguage","organization","useOrganization","stats","setStats","fullStats","setFullStats","maxHours","setMaxHours","activeTab","setActiveTab","commissionStats","setCommissionStats","commissionLoading","setCommissionLoading","statsTimeoutRef","periodChangeTimeoutRef","isColombia","userIsColombia","country","orgIsColombia","isManualPeriodChange","useQuinzena","setUseQuinzena","dateLocale","es","enUS","currentWeekInput","String","getWeek","padStart","currentQuinzenaInput","getCurrentQuinzena","selectedWeekInput","setSelectedWeekInput","selectedQuinzenaInput","setSelectedQuinzenaInput","currentMonday","startOfWeek","weekStartsOn","currentQuinzenaStart","convertQuinzenaToDate","selectedWeekDate","setSelectedWeekDate","selectedQuinzenaDate","setSelectedQuinzenaDate","showWorkTimeModal","setShowWorkTimeModal","selectedDateForModal","setSelectedDateForModal","fetchStats","fetchStatsWithDate","dateToSend","isQuinzena","endpoint","WORKTIME","STATS","weeklyData","validatedData","hours","sort","b","localeCompare","first5Days","weekdayMapping","periodDates","enrichedData","dayIndex","formattedDate","_err$response","_err$response$data","handlePeriodChange","newUseQuinzena","newDate","newInput","currentQuinzena","convertWeekToDate","queueMicrotask","quinzenaDate","weekDate","openWorkTimeModal","reduce","max","parseFloat","fetchCommissionStats","startDate","endDate","TOUR_BOOKINGS","COMMISSIONS","success","getQuinzenaDays","getWeekDays","scaleMax","Math","ceil","targetWorkHours","normalWorkingHours","ChartBarIcon","ClockIcon","pattern","blob","download","week","marginTop","marginBottom","DocumentArrowDownIcon","totalHours","averageHoursPerDay","daysWorked","round","bottom","borderStyle","dayData","overTargetHeight","normalHeight","quinzenaDaysCount","containerWidth","barWidth","minHeight","borderTopLeftRadius","borderTopRightRadius","borderBottomWidth","borderBottomLeftRadius","borderBottomRightRadius","borderTopWidth","widthPercent","dayLower","toFixed","WorktimeModal","closeWorkTimeModal","Intl","NumberFormat","currency","totalCommissions","totalBookings","averageCommission","byTourType","own","external","tourSales","sale","tourTitle","salesCount","totalCommission","tourId","AppDownload","DevicePhoneMobileIcon","Link","to","ArrowRightIcon","Dashboard","navigate","useNavigate","setUser","email","first_name","last_name","svgRef","titleId","props","_objectWithoutProperties","_excluded","React","Object","assign","parseISO","argument","_options$additionalDi","invalidDate","constructFrom","NaN","additionalDigits","dateStrings","array","patterns","dateTimeDelimiter","timeString","timeZoneDelimiter","substr","token","timezone","time","splitDateString","parseYearResult","regex","captures","restDateString","century","parseYear","dateRegex","isWeekDate","dayOfYear","parseDateUnit","dayOfWeek","_year","validateWeekDate","isoWeekYear","setUTCFullYear","fourthOfJanuaryDay","getUTCDay","diff","setUTCDate","getUTCDate","dayOfISOWeekYear","daysInMonths","isLeapYearIndex","validateDate","validateDayOfYearDate","parseDate","timestamp","timeRegex","parseTimeUnit","minutes","seconds","validateTime","millisecondsInHour","millisecondsInMinute","parseTime","tmpDate","result","setFullYear","getUTCFullYear","getUTCMonth","setHours","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","timezoneString","timezoneRegex","sign","_hours","validateTimezone","parseTimezone","addDays","amount","_date"],"sourceRoot":""}