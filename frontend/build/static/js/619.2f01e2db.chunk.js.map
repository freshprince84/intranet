{"version":3,"file":"static/js/619.2f01e2db.chunk.js","mappings":"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","sources":["api/tableSettingsApi.ts","hooks/useTableSettings.ts","utils/filterLogic.ts","components/tours/CreateTourBookingModal.tsx","components/TableColumnConfig.tsx","components/CertificateCreationModal.tsx","components/ContractCreationModal.tsx","components/CertificateEditModal.tsx","components/ContractEditModal.tsx","components/SocialSecurityEditor.tsx","components/OffboardingStartModal.tsx","components/OffboardingCompleteModal.tsx","components/LifecycleView.tsx","components/UserManagementTab.tsx","components/RoleManagementTab.tsx","components/BranchManagementTab.tsx","components/tours/CreateTourProviderModal.tsx","components/tours/EditTourProviderModal.tsx","components/tours/TourProvidersTab.tsx","types/tour.ts","components/tours/CreateTourModal.tsx","components/tours/EditTourModal.tsx","components/tours/TourDetailsModal.tsx","components/tours/TourExportDialog.tsx","components/tours/ToursTab.tsx","components/organization/CreateOrganizationModal.tsx","components/organization/JoinOrganizationModal.tsx","components/organization/RoleConfigurationTab.tsx","components/organization/DocumentConfigurationTab.tsx","components/organization/SMTPConfigurationTab.tsx","utils/urlValidation.ts","components/organization/ApiConfigurationTab.tsx","components/organization/EditOrganizationModal.tsx","components/organization/MyJoinRequestsList.tsx","components/organization/OrganizationSettings.tsx","components/organization/ProcessJoinRequestModal.tsx","components/organization/JoinRequestsList.tsx","pages/Organisation.tsx"],"sourcesContent":["// import axios from 'axios';\nimport axiosInstance from '../config/axios.ts';\nimport { API_URL } from '../config/api.ts';\n\nexport interface TableSettings {\n  tableId: string;\n  columnOrder: string[];\n  hiddenColumns: string[];\n  viewMode?: 'table' | 'cards';\n}\n\n// Helfer-Funktion, um den localStorage-Schlssel fr eine Tabelle zu generieren\nconst getLocalStorageKey = (tableId: string) => `table_settings_${tableId}`;\n\n// API zum Verwalten der Tabelleneinstellungen\nexport const tableSettingsApi = {\n  // Benutzerspezifische Tabelleneinstellungen abrufen\n  getTableSettings: async (tableId: string): Promise<TableSettings> => {\n    try {\n      // Zuerst versuchen, Einstellungen vom API-Server zu laden\n      const response = await axiosInstance.get(`/table-settings/${tableId}`);\n      return response.data;\n    } catch (error) {\n      console.error('Fehler beim Abrufen der Tabelleneinstellungen vom Server:', error);\n      \n      // Fallback: Versuchen, aus dem localStorage zu laden\n      try {\n        const localStorageKey = getLocalStorageKey(tableId);\n        const storedSettings = localStorage.getItem(localStorageKey);\n        \n        if (storedSettings) {\n          return JSON.parse(storedSettings);\n        }\n      } catch (localError) {\n        console.error('Fehler beim Laden aus localStorage:', localError);\n      }\n      \n      // Default-Einstellungen zurckgeben, wenn keine gespeicherten verfgbar sind\n      return {\n        tableId,\n        columnOrder: [],\n        hiddenColumns: []\n      };\n    }\n  },\n  \n  // Tabelleneinstellungen speichern (server-side und localStorage)\n  saveTableSettings: async (settings: TableSettings): Promise<void> => {\n    try {\n      // Zum API-Server senden\n      await axiosInstance.post(`/table-settings`, settings);\n      \n      // Auch im localStorage speichern\n      const localStorageKey = getLocalStorageKey(settings.tableId);\n      localStorage.setItem(localStorageKey, JSON.stringify(settings));\n    } catch (error) {\n      console.error('Fehler beim Speichern der Tabelleneinstellungen auf dem Server:', error);\n      \n      // Trotzdem im localStorage speichern\n      try {\n        const localStorageKey = getLocalStorageKey(settings.tableId);\n        localStorage.setItem(localStorageKey, JSON.stringify(settings));\n      } catch (localError) {\n        console.error('Fehler beim Speichern im localStorage:', localError);\n      }\n    }\n  },\n  \n  // Tabelleneinstellungen zurcksetzen\n  resetTableSettings: (tableId: string): void => {\n    try {\n      const localStorageKey = getLocalStorageKey(tableId);\n      localStorage.removeItem(localStorageKey);\n      console.log(`Tabelleneinstellungen fr ${tableId} zurckgesetzt`);\n    } catch (error) {\n      console.error('Fehler beim Zurcksetzen der Tabelleneinstellungen:', error);\n    }\n  }\n}; ","import { useState, useEffect, useCallback, useRef } from 'react';\nimport { tableSettingsApi, TableSettings } from '../api/tableSettingsApi.ts';\n\ninterface UseTableSettingsOptions {\n  defaultColumnOrder?: string[];\n  defaultHiddenColumns?: string[];\n  defaultViewMode?: 'table' | 'cards';\n  defaultVisibleCardMetadata?: string[];\n  defaultCardColumnOrder?: string[];\n  defaultCardSortDirections?: Record<string, 'asc' | 'desc'>;\n}\n\n/**\n * Hook zum Verwalten von benutzerdefinierten Tabelleneinstellungen\n * @param tableId Eindeutige ID der Tabelle\n * @param options Optionale Standardwerte\n */\nexport const useTableSettings = (tableId: string, options?: UseTableSettingsOptions) => {\n  const [settings, setSettings] = useState<TableSettings>({\n    tableId,\n    columnOrder: options?.defaultColumnOrder || [],\n    hiddenColumns: options?.defaultHiddenColumns || []\n  });\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<Error | null>(null);\n\n  // Tabelleneinstellungen laden - beim Mount oder wenn tableId sich ndert\n  useEffect(() => {\n    let isMounted = true;\n    \n    const loadSettings = async () => {\n      try {\n        setIsLoading(true);\n        const loadedSettings = await tableSettingsApi.getTableSettings(tableId);\n        \n        if (!isMounted) return; // Component wurde bereits unmounted\n        \n        console.log('Geladene Tabelleneinstellungen vom Server:', loadedSettings);\n        \n        // Wenn leere Einstellungen zurckgegeben werden, verwende die Standardwerte\n        if (loadedSettings.columnOrder.length === 0 && options?.defaultColumnOrder) {\n          loadedSettings.columnOrder = options.defaultColumnOrder;\n        }\n        \n        // View-Mode initialisieren, falls nicht vorhanden\n        if (!loadedSettings.viewMode && options?.defaultViewMode) {\n          loadedSettings.viewMode = options.defaultViewMode;\n        }\n        \n        console.log('Finale Tabelleneinstellungen nach Initialisierung:', loadedSettings);\n        setSettings(loadedSettings);\n        setError(null);\n      } catch (err) {\n        if (!isMounted) return;\n        setError(err instanceof Error ? err : new Error('Fehler beim Laden der Einstellungen'));\n        console.error('Fehler beim Laden der Tabelleneinstellungen:', err);\n      } finally {\n        if (isMounted) {\n          setIsLoading(false);\n        }\n      }\n    };\n\n    loadSettings();\n    \n    return () => {\n      isMounted = false;\n    };\n  }, [tableId]); // NUR tableId als Dependency!\n\n  // Spaltenreihenfolge aktualisieren\n  const updateColumnOrder = useCallback(async (newColumnOrder: string[]) => {\n    try {\n      const updatedSettings = { ...settings, columnOrder: newColumnOrder };\n      setSettings(updatedSettings);\n      await tableSettingsApi.saveTableSettings(updatedSettings);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Fehler beim Speichern der Spaltenreihenfolge'));\n      console.error('Fehler beim Speichern der Spaltenreihenfolge:', err);\n    }\n  }, [settings]);\n\n  // Versteckte Spalten aktualisieren\n  const updateHiddenColumns = useCallback(async (newHiddenColumns: string[]) => {\n    try {\n      const updatedSettings = { ...settings, hiddenColumns: newHiddenColumns };\n      setSettings(updatedSettings);\n      await tableSettingsApi.saveTableSettings(updatedSettings);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Fehler beim Speichern der versteckten Spalten'));\n      console.error('Fehler beim Speichern der versteckten Spalten:', err);\n    }\n  }, [settings]);\n\n  // Eine einzelne Spalte ein- oder ausblenden\n  const toggleColumnVisibility = useCallback(async (columnId: string) => {\n    try {\n      let newHiddenColumns: string[];\n      \n      if (settings.hiddenColumns.includes(columnId)) {\n        // Spalte einblenden (aus hiddenColumns entfernen)\n        newHiddenColumns = settings.hiddenColumns.filter(id => id !== columnId);\n      } else {\n        // Spalte ausblenden (zu hiddenColumns hinzufgen)\n        newHiddenColumns = [...settings.hiddenColumns, columnId];\n      }\n      \n      const updatedSettings = { ...settings, hiddenColumns: newHiddenColumns };\n      setSettings(updatedSettings);\n      await tableSettingsApi.saveTableSettings(updatedSettings);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Fehler beim ndern der Spaltenansicht'));\n      console.error('Fehler beim ndern der Spaltenansicht:', err);\n    }\n  }, [settings]);\n\n  // View-Mode aktualisieren\n  const updateViewMode = useCallback(async (newViewMode: 'table' | 'cards') => {\n    try {\n      const updatedSettings = { ...settings, viewMode: newViewMode };\n      setSettings(updatedSettings);\n      await tableSettingsApi.saveTableSettings(updatedSettings);\n    } catch (err) {\n      setError(err instanceof Error ? err : new Error('Fehler beim Speichern des View-Modes'));\n      console.error('Fehler beim Speichern des View-Modes:', err);\n    }\n  }, [settings]);\n\n  return {\n    settings,\n    isLoading,\n    error,\n    updateColumnOrder,\n    updateHiddenColumns,\n    toggleColumnVisibility,\n    isColumnVisible: (columnId: string) => !settings.hiddenColumns.includes(columnId),\n    updateViewMode\n  };\n}; ","/**\r\n * Zentrale Filter-Logik zur Eliminierung von Code-Duplikation\r\n * \r\n * Diese Datei konsolidiert die Filter-Logik, die zuvor in mehreren Komponenten\r\n * dupliziert war (Requests.tsx, Worktracker.tsx, InvoiceManagementTab.tsx, etc.)\r\n * \r\n * WICHTIG: Die Logik ist exakt identisch mit der vorherigen Implementierung.\r\n * Nur die Code-Duplikation wurde entfernt, keine Funktionalittsnderung!\r\n */\r\n\r\nexport interface FilterCondition {\r\n  column: string;\r\n  operator: string;\r\n  value: string | number | Date | null;\r\n}\r\n\r\n/**\r\n * Evaluates a single filter condition against a field value\r\n * @param fieldValue - The value to test against\r\n * @param condition - The filter condition to apply\r\n * @returns true if condition is met, false otherwise\r\n */\r\nexport const evaluateCondition = (\r\n  fieldValue: any,\r\n  condition: FilterCondition\r\n): boolean => {\r\n  const { operator, value } = condition;\r\n  \r\n  // Sicherstellen, dass value definiert ist\r\n  if (value === undefined) {\r\n    console.error('evaluateCondition: value ist undefined', condition);\r\n    return false;\r\n  }\r\n  \r\n  // Handle null/undefined values\r\n  if (fieldValue == null && value == null) {\r\n    return operator === 'equals';\r\n  }\r\n  if (fieldValue == null || value == null) {\r\n    if (operator === 'notEquals') return true;\r\n    return false;\r\n  }\r\n\r\n  // String operations\r\n  // Sicherstellen, dass fieldValue und value Strings sind, bevor toLowerCase() aufgerufen wird\r\n  let strField: string = '';\r\n  let strValue: string = '';\r\n  \r\n  try {\r\n    // Konvertiere fieldValue zu String, auch wenn es ein Objekt ist\r\n    const fieldValueStr = fieldValue == null ? '' : (typeof fieldValue === 'string' ? fieldValue : String(fieldValue));\r\n    if (typeof fieldValueStr !== 'string') {\r\n      return false;\r\n    }\r\n    const lowerField = fieldValueStr.toLowerCase();\r\n    if (lowerField === undefined || lowerField === null || typeof lowerField !== 'string') {\r\n      return false;\r\n    }\r\n    strField = lowerField;\r\n    \r\n    // Konvertiere value zu String, auch wenn es ein Objekt ist\r\n    const valueStr = value == null ? '' : (typeof value === 'string' ? value : String(value));\r\n    if (typeof valueStr !== 'string') {\r\n      return false;\r\n    }\r\n    const lowerValue = valueStr.toLowerCase();\r\n    if (lowerValue === undefined || lowerValue === null || typeof lowerValue !== 'string') {\r\n      return false;\r\n    }\r\n    strValue = lowerValue;\r\n  } catch (error) {\r\n    // Falls toLowerCase() fehlschlgt, gebe false zurck\r\n    return false;\r\n  }\r\n\r\n  // Sicherstellen, dass strField und strValue Strings sind und nicht undefined\r\n  if (typeof strField !== 'string' || typeof strValue !== 'string' || strField === undefined || strValue === undefined || strField === null || strValue === null) {\r\n    return false;\r\n  }\r\n\r\n  switch (operator) {\r\n    case 'equals':\r\n      return strField === strValue;\r\n    case 'notEquals':\r\n      return strField !== strValue;\r\n    case 'contains':\r\n      return strField.includes(strValue);\r\n    case 'startsWith':\r\n      return strField.startsWith(strValue);\r\n    case 'endsWith':\r\n      // Explizite Prfung, dass strField und strValue Strings sind, bevor endsWith aufgerufen wird\r\n      if (strField === undefined || strField === null) {\r\n        console.error('endsWith: strField ist undefined/null', { strField, strValue, fieldValue, value, condition });\r\n        return false;\r\n      }\r\n      if (strValue === undefined || strValue === null) {\r\n        console.error('endsWith: strValue ist undefined/null', { strField, strValue, fieldValue, value, condition });\r\n        return false;\r\n      }\r\n      if (typeof strField !== 'string') {\r\n        console.error('endsWith: strField ist kein String', { strField, typeof: typeof strField, strValue, fieldValue, value, condition });\r\n        return false;\r\n      }\r\n      if (typeof strValue !== 'string') {\r\n        console.error('endsWith: strValue ist kein String', { strField, strValue, typeof: typeof strValue, fieldValue, value, condition });\r\n        return false;\r\n      }\r\n      try {\r\n        return strField.endsWith(strValue);\r\n      } catch (error) {\r\n        console.error('endsWith: Fehler bei endsWith-Aufruf', error, { strField, strValue, fieldValue, value, condition });\r\n        return false;\r\n      }\r\n    case 'before':\r\n    case 'after': {\r\n      // Date operations\r\n      const fieldDate = new Date(fieldValue);\r\n      const valueDate = new Date(value as string);\r\n      if (isNaN(fieldDate.getTime()) || isNaN(valueDate.getTime())) {\r\n        return false;\r\n      }\r\n      return operator === 'before' \r\n        ? fieldDate < valueDate \r\n        : fieldDate > valueDate;\r\n    }\r\n    case 'greaterThan':\r\n    case 'lessThan': {\r\n      // Numeric operations\r\n      const fieldNum = parseFloat(String(fieldValue));\r\n      const valueNum = parseFloat(String(value));\r\n      if (isNaN(fieldNum) || isNaN(valueNum)) {\r\n        return false;\r\n      }\r\n      return operator === 'greaterThan'\r\n        ? fieldNum > valueNum\r\n        : fieldNum < valueNum;\r\n    }\r\n    default:\r\n      return true;\r\n  }\r\n};\r\n\r\n/**\r\n * Type for getting field values from items\r\n */\r\nexport type GetFieldValue<T> = (item: T, columnId: string) => any;\r\n\r\n/**\r\n * Type for column-specific evaluation handlers\r\n * Returns true if condition is met, false otherwise\r\n */\r\nexport type ColumnEvaluator<T> = (item: T, condition: FilterCondition) => boolean | null;\r\n\r\n/**\r\n * Applies filter conditions to an array of items\r\n * \r\n * @param items - Array of items to filter\r\n * @param conditions - Array of filter conditions\r\n * @param operators - Array of logical operators ('AND' | 'OR') between conditions\r\n * @param getFieldValue - Function to extract field values from items\r\n * @param columnEvaluators - Optional map of column-specific evaluators for custom logic\r\n * @returns Filtered array of items\r\n * \r\n * @example\r\n * // Standard usage with getFieldValue\r\n * const filtered = applyFilters(items, conditions, operators, (item, col) => item[col]);\r\n * \r\n * // With custom column evaluators\r\n * const filtered = applyFilters(\r\n *   items,\r\n *   conditions,\r\n *   operators,\r\n *   (item, col) => item[col],\r\n *   {\r\n *     'responsible': (item, condition) => {\r\n *       // Custom logic for responsible column\r\n *       return evaluateUserRoleCondition(item.responsible?.id, item.role?.id, condition);\r\n *     }\r\n *   }\r\n * );\r\n */\r\nexport const applyFilters = <T>(\r\n  items: T[],\r\n  conditions: FilterCondition[],\r\n  operators: ('AND' | 'OR')[],\r\n  getFieldValue: GetFieldValue<T>,\r\n  columnEvaluators?: Record<string, ColumnEvaluator<T>>\r\n): T[] => {\r\n  if (conditions.length === 0) {\r\n    return items;\r\n  }\r\n\r\n  return items.filter(item => {\r\n    let result = true;\r\n\r\n    for (let i = 0; i < conditions.length; i++) {\r\n      const condition = conditions[i];\r\n      let conditionMet = false;\r\n\r\n      // Check if there's a custom evaluator for this column\r\n      if (columnEvaluators && columnEvaluators[condition.column]) {\r\n        const customResult = columnEvaluators[condition.column](item, condition);\r\n        if (customResult !== null) {\r\n          conditionMet = customResult;\r\n        } else {\r\n          // Fallback to standard evaluation if custom evaluator returns null\r\n          const fieldValue = getFieldValue(item, condition.column);\r\n          conditionMet = evaluateCondition(fieldValue, condition);\r\n        }\r\n      } else {\r\n        // Standard evaluation\r\n        const fieldValue = getFieldValue(item, condition.column);\r\n        conditionMet = evaluateCondition(fieldValue, condition);\r\n      }\r\n\r\n      // Apply logical operators\r\n      if (i === 0) {\r\n        result = conditionMet;\r\n      } else {\r\n        const operator = operators[i - 1] || 'AND';\r\n        result = operator === 'AND' \r\n          ? (result && conditionMet) \r\n          : (result || conditionMet);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  });\r\n};\r\n\r\n/**\r\n * Helper function to evaluate date conditions with proper date comparison\r\n * Supports __TODAY__ as a dynamic date value\r\n * \r\n * WICHTIG: Extrahiert nur den Datumsteil (Jahr, Monat, Tag) ohne Zeitzone,\r\n * um Zeitzone-Konvertierungsprobleme zu vermeiden (verhindert Tag-Versatz)\r\n */\r\nexport const evaluateDateCondition = (\r\n  dateValue: Date | string | null | undefined,\r\n  condition: FilterCondition\r\n): boolean => {\r\n  if (!dateValue) {\r\n    return false;\r\n  }\r\n\r\n  const date = new Date(dateValue);\r\n  if (isNaN(date.getTime())) {\r\n    return false;\r\n  }\r\n\r\n  // Extrahiere nur den Datumsteil (Jahr, Monat, Tag) mit UTC-Methoden\r\n  // Dies verhindert Zeitzone-Konvertierung, die zu einem Tag-Versatz fhrt\r\n  const dateYear = date.getUTCFullYear();\r\n  const dateMonth = date.getUTCMonth();\r\n  const dateDay = date.getUTCDate();\r\n  // Erstelle lokales Date-Objekt aus den UTC-Werten (ohne Zeitzone)\r\n  const normalizedDate = new Date(dateYear, dateMonth, dateDay);\r\n\r\n  // Handle __TODAY__ dynamic date\r\n  let conditionDate: Date;\r\n  if (condition.value === '__TODAY__') {\r\n    // Get today's date in local timezone (set to midnight)\r\n    const localToday = new Date();\r\n    localToday.setHours(0, 0, 0, 0);\r\n    conditionDate = localToday;\r\n  } else {\r\n    const conditionDateRaw = new Date(condition.value as string);\r\n    if (isNaN(conditionDateRaw.getTime())) {\r\n      return false;\r\n    }\r\n    // Extrahiere nur den Datumsteil (Jahr, Monat, Tag) mit UTC-Methoden\r\n    // Dies verhindert Zeitzone-Konvertierung, die zu einem Tag-Versatz fhrt\r\n    const conditionYear = conditionDateRaw.getUTCFullYear();\r\n    const conditionMonth = conditionDateRaw.getUTCMonth();\r\n    const conditionDay = conditionDateRaw.getUTCDate();\r\n    // Erstelle lokales Date-Objekt aus den UTC-Werten (ohne Zeitzone)\r\n    conditionDate = new Date(conditionYear, conditionMonth, conditionDay);\r\n  }\r\n\r\n  switch (condition.operator) {\r\n    case 'equals':\r\n      return normalizedDate.getTime() === conditionDate.getTime();\r\n    case 'before':\r\n      return normalizedDate < conditionDate;\r\n    case 'after':\r\n      return normalizedDate > conditionDate;\r\n    default:\r\n      return true;\r\n  }\r\n};\r\n\r\n/**\r\n * Helper function to evaluate user/role conditions with user-{id} or role-{id} format\r\n * Supports both user-{id} and role-{id} formats, plus text fallback for legacy support\r\n */\r\nexport const evaluateUserRoleCondition = (\r\n  userId: number | null | undefined,\r\n  roleId: number | null | undefined,\r\n  condition: FilterCondition,\r\n  textValue?: string  // Optional: text representation for fallback (e.g. \"John Doe\")\r\n): boolean => {\r\n  const value = condition.value as string || '';\r\n  \r\n  // Handle user-{id} format\r\n  if (value.startsWith('user-')) {\r\n    const targetUserId = parseInt(value.replace('user-', ''), 10);\r\n    if (isNaN(targetUserId)) return false;\r\n    const matches = userId === targetUserId;\r\n    // Untersttze notEquals Operator\r\n    if (condition.operator === 'notEquals') {\r\n      return !matches;\r\n    }\r\n    return matches;\r\n  }\r\n  \r\n  // Handle role-{id} format\r\n  if (value.startsWith('role-')) {\r\n    const targetRoleId = parseInt(value.replace('role-', ''), 10);\r\n    if (isNaN(targetRoleId)) return false;\r\n    const matches = roleId === targetRoleId;\r\n    // Untersttze notEquals Operator\r\n    if (condition.operator === 'notEquals') {\r\n      return !matches;\r\n    }\r\n    return matches;\r\n  }\r\n  \r\n  // Empty value matches all\r\n  if (value === '') {\r\n    return true;\r\n  }\r\n  \r\n  // Fallback to text comparison (legacy support)\r\n  if (textValue !== undefined) {\r\n    const textValueLower = textValue.toLowerCase();\r\n    const valueLower = value.toLowerCase();\r\n    if (condition.operator === 'equals') {\r\n      return textValueLower === valueLower;\r\n    } else if (condition.operator === 'notEquals') {\r\n      return textValueLower !== valueLower;\r\n    } else if (condition.operator === 'contains') {\r\n      return textValueLower.includes(valueLower);\r\n    }\r\n  }\r\n  \r\n  return false;\r\n};\r\n\r\n/**\r\n * Helper function for combined responsible/qualityControl filter (specific to Tasks)\r\n */\r\nexport const evaluateResponsibleAndQualityControl = (\r\n  responsibleId: number | null | undefined,\r\n  responsibleRoleId: number | null | undefined,\r\n  qualityControlId: number | null | undefined,\r\n  condition: FilterCondition,\r\n  responsibleText?: string,\r\n  qualityControlText?: string\r\n): boolean => {\r\n  const value = condition.value as string || '';\r\n  \r\n  // Handle user-{id} format - matches either responsible OR qualityControl\r\n  if (value.startsWith('user-')) {\r\n    const targetUserId = parseInt(value.replace('user-', ''), 10);\r\n    if (isNaN(targetUserId)) return false;\r\n    const matches = (responsibleId === targetUserId) || (qualityControlId === targetUserId);\r\n    // Untersttze notEquals Operator\r\n    if (condition.operator === 'notEquals') {\r\n      return !matches;\r\n    }\r\n    return matches;\r\n  }\r\n  \r\n  // Handle role-{id} format - only matches with responsible role\r\n  if (value.startsWith('role-')) {\r\n    const targetRoleId = parseInt(value.replace('role-', ''), 10);\r\n    if (isNaN(targetRoleId)) return false;\r\n    const matches = responsibleRoleId === targetRoleId;\r\n    // Untersttze notEquals Operator\r\n    if (condition.operator === 'notEquals') {\r\n      return !matches;\r\n    }\r\n    return matches;\r\n  }\r\n  \r\n  // Empty value matches all\r\n  if (value === '') {\r\n    return true;\r\n  }\r\n  \r\n  // Fallback to text comparison (legacy support)\r\n  const valueLower = value.toLowerCase();\r\n  if (condition.operator === 'equals') {\r\n    return (responsibleText?.toLowerCase() === valueLower) || (qualityControlText?.toLowerCase() === valueLower);\r\n  } else if (condition.operator === 'notEquals') {\r\n    return (responsibleText?.toLowerCase() !== valueLower) && (qualityControlText?.toLowerCase() !== valueLower);\r\n  } else if (condition.operator === 'contains') {\r\n    return (responsibleText?.toLowerCase()?.includes(valueLower) ?? false) || (qualityControlText?.toLowerCase()?.includes(valueLower) ?? false);\r\n  }\r\n  \r\n  return false;\r\n};\r\n\r\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../../config/axios.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport { useAuth } from '../../hooks/useAuth.tsx';\nimport { Tour, TourBooking, TourBookingStatus } from '../../types/tour.ts';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface CreateTourBookingModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onBookingCreated: (newBooking: TourBooking) => void;\n    tour?: Tour | null;\n}\n\nconst CreateTourBookingModal = ({ isOpen, onClose, onBookingCreated, tour: preselectedTour }: CreateTourBookingModalProps) => {\n    const { t } = useTranslation();\n    const { user } = useAuth();\n    const { showMessage } = useMessage();\n    \n    const [tourId, setTourId] = useState<number | ''>(preselectedTour?.id || '');\n    const [tourDate, setTourDate] = useState('');\n    const [numberOfParticipants, setNumberOfParticipants] = useState<number | ''>(1);\n    const [customerName, setCustomerName] = useState('');\n    const [customerEmail, setCustomerEmail] = useState('');\n    const [customerPhone, setCustomerPhone] = useState('');\n    const [customerNotes, setCustomerNotes] = useState('');\n    \n    const [tours, setTours] = useState<Tour[]>([]);\n    const [selectedTour, setSelectedTour] = useState<Tour | null>(preselectedTour || null);\n    const [error, setError] = useState<string | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [loadingData, setLoadingData] = useState(true);\n\n    // Lade Touren\n    useEffect(() => {\n        const loadData = async () => {\n            try {\n                setLoadingData(true);\n                const response = await axiosInstance.get(API_ENDPOINTS.TOURS.BASE, {\n                    params: { isActive: true }\n                });\n                const toursData = response.data?.data || response.data || [];\n                setTours(Array.isArray(toursData) ? toursData : []);\n            } catch (err: any) {\n                console.error('Fehler beim Laden der Touren:', err);\n                showMessage(t('errors.loadError'), 'error');\n            } finally {\n                setLoadingData(false);\n            }\n        };\n        \n        if (isOpen) {\n            loadData();\n        }\n    }, [isOpen, t, showMessage]);\n\n    // Setze preselectedTour wenn vorhanden\n    useEffect(() => {\n        if (preselectedTour) {\n            setTourId(preselectedTour.id);\n            setSelectedTour(preselectedTour);\n        }\n    }, [preselectedTour]);\n\n    // Update selectedTour when tourId changes\n    useEffect(() => {\n        if (tourId) {\n            const tour = tours.find(t => t.id === Number(tourId));\n            setSelectedTour(tour || null);\n        } else {\n            setSelectedTour(null);\n        }\n    }, [tourId, tours]);\n\n    // Reset form when modal opens/closes\n    useEffect(() => {\n        if (!isOpen) {\n            if (!preselectedTour) {\n                setTourId('');\n            }\n            setTourDate('');\n            setNumberOfParticipants(1);\n            setCustomerName('');\n            setCustomerEmail('');\n            setCustomerPhone('');\n            setCustomerNotes('');\n            setError(null);\n        }\n    }, [isOpen, preselectedTour]);\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError(null);\n\n        // Validierungen\n        if (!tourId) {\n            setError(t('tourBookings.validation.tourRequired', { defaultValue: 'Tour ist erforderlich' }));\n            return;\n        }\n\n        if (!tourDate) {\n            setError(t('tourBookings.validation.tourDateRequired', { defaultValue: 'Tour-Datum ist erforderlich' }));\n            return;\n        }\n\n        const tourDateObj = new Date(tourDate);\n        if (tourDateObj < new Date()) {\n            setError(t('tours.validation.tourDateFuture', { defaultValue: 'Tour-Datum muss in der Zukunft liegen' }));\n            return;\n        }\n\n        if (!numberOfParticipants || Number(numberOfParticipants) < 1) {\n            setError(t('tourBookings.validation.numberOfParticipantsMin', { defaultValue: 'Anzahl Teilnehmer muss >= 1 sein' }));\n            return;\n        }\n\n        if (!customerName.trim() || customerName.trim().length < 2) {\n            setError(t('tourBookings.validation.customerNameMinLength', { defaultValue: 'Kundenname muss mindestens 2 Zeichen lang sein' }));\n            return;\n        }\n\n        if (!customerPhone.trim() && !customerEmail.trim()) {\n            setError(t('tourBookings.validation.contactRequired', { defaultValue: 'Mindestens eine Kontaktinformation (Telefon oder E-Mail) ist erforderlich' }));\n            return;\n        }\n\n        // Validierung: Anzahl Teilnehmer zwischen min/max\n        if (selectedTour) {\n            const numPart = Number(numberOfParticipants);\n            if (selectedTour.minParticipants && numPart < selectedTour.minParticipants) {\n                setError(t('tours.validation.numberOfParticipantsRange', { \n                    defaultValue: 'Anzahl der Teilnehmer muss zwischen {min} und {max} sein',\n                    min: selectedTour.minParticipants,\n                    max: selectedTour.maxParticipants || ''\n                }));\n                return;\n            }\n            if (selectedTour.maxParticipants && numPart > selectedTour.maxParticipants) {\n                setError(t('tours.validation.numberOfParticipantsRange', { \n                    defaultValue: 'Anzahl der Teilnehmer muss zwischen {min} und {max} sein',\n                    min: selectedTour.minParticipants || 1,\n                    max: selectedTour.maxParticipants\n                }));\n                return;\n            }\n        }\n\n        setLoading(true);\n        try {\n            const response = await axiosInstance.post(API_ENDPOINTS.TOUR_BOOKINGS.BASE, {\n                tourId: Number(tourId),\n                tourDate,\n                numberOfParticipants: Number(numberOfParticipants),\n                customerName: customerName.trim(),\n                customerEmail: customerEmail.trim() || null,\n                customerPhone: customerPhone.trim() || null,\n                customerNotes: customerNotes.trim() || null\n            });\n\n            if (response.data?.success && response.data?.data) {\n                showMessage(\n                    t('tourBookings.created', { defaultValue: 'Tour-Buchung erfolgreich erstellt' }),\n                    'success'\n                );\n                onBookingCreated(response.data.data);\n                onClose();\n            } else {\n                throw new Error(response.data?.message || 'Fehler beim Erstellen der Buchung');\n            }\n        } catch (err: any) {\n            console.error('Fehler beim Erstellen der Buchung:', err);\n            const errorMessage = err.response?.data?.message || err.message || t('errors.unknownError');\n            setError(errorMessage);\n            showMessage(errorMessage, 'error');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                    <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\n                        <Dialog.Title className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                            {t('tourBookings.create', { defaultValue: 'Neue Tour-Buchung' })}\n                        </Dialog.Title>\n                        <button\n                            onClick={onClose}\n                            className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n                        >\n                            <XMarkIcon className=\"h-6 w-6\" />\n                        </button>\n                    </div>\n\n                    <form onSubmit={handleSubmit} className=\"p-4 space-y-4\">\n                        {error && (\n                            <div className=\"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg p-3\">\n                                <p className=\"text-sm text-red-800 dark:text-red-200\">{error}</p>\n                            </div>\n                        )}\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tourBookings.tour', { defaultValue: 'Tour' })} *\n                            </label>\n                            <select\n                                value={tourId}\n                                onChange={(e) => setTourId(e.target.value ? Number(e.target.value) : '')}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                required\n                                disabled={loading || loadingData || !!preselectedTour}\n                            >\n                                <option value=\"\">{t('common.select', { defaultValue: 'Bitte whlen' })}</option>\n                                {tours.filter(t => t.isActive && t.title).map(tour => (\n                                    <option key={tour.id} value={tour.id}>\n                                        {tour.title || '-'}\n                                    </option>\n                                ))}\n                            </select>\n                            {selectedTour && (\n                                <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                                    {selectedTour.minParticipants && selectedTour.maxParticipants\n                                        ? t('tourBookings.participantsRange', { \n                                            defaultValue: 'Teilnehmer: {min} - {max}',\n                                            min: selectedTour.minParticipants,\n                                            max: selectedTour.maxParticipants\n                                        })\n                                        : selectedTour.minParticipants\n                                        ? t('tourBookings.participantsMin', { \n                                            defaultValue: 'Min. Teilnehmer: {min}',\n                                            min: selectedTour.minParticipants\n                                        })\n                                        : selectedTour.maxParticipants\n                                        ? t('tourBookings.participantsMax', { \n                                            defaultValue: 'Max. Teilnehmer: {max}',\n                                            max: selectedTour.maxParticipants\n                                        })\n                                        : null}\n                                </p>\n                            )}\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tourBookings.tourDate', { defaultValue: 'Tour-Datum' })} *\n                            </label>\n                            <input\n                                type=\"datetime-local\"\n                                value={tourDate}\n                                onChange={(e) => setTourDate(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                required\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tourBookings.numberOfParticipants', { defaultValue: 'Anzahl Teilnehmer' })} *\n                            </label>\n                            <input\n                                type=\"number\"\n                                min={selectedTour?.minParticipants || 1}\n                                max={selectedTour?.maxParticipants || undefined}\n                                value={numberOfParticipants}\n                                onChange={(e) => setNumberOfParticipants(e.target.value ? Number(e.target.value) : '')}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                required\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tourBookings.customerName', { defaultValue: 'Kundenname' })} *\n                            </label>\n                            <input\n                                type=\"text\"\n                                value={customerName}\n                                onChange={(e) => setCustomerName(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                required\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tourBookings.customerPhone', { defaultValue: 'Telefon' })}\n                            </label>\n                            <input\n                                type=\"tel\"\n                                value={customerPhone}\n                                onChange={(e) => setCustomerPhone(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tourBookings.customerEmail', { defaultValue: 'E-Mail' })}\n                            </label>\n                            <input\n                                type=\"email\"\n                                value={customerEmail}\n                                onChange={(e) => setCustomerEmail(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tourBookings.customerNotes', { defaultValue: 'Notizen' })}\n                            </label>\n                            <textarea\n                                value={customerNotes}\n                                onChange={(e) => setCustomerNotes(e.target.value)}\n                                rows={3}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div className=\"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                            <button\n                                type=\"button\"\n                                onClick={onClose}\n                                className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n                            >\n                                {t('common.cancel', 'Abbrechen')}\n                            </button>\n                            <button\n                                type=\"submit\"\n                                disabled={loading || loadingData}\n                                className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                                {loading ? t('common.saving', 'Speichere...') : t('common.save', 'Speichern')}\n                            </button>\n                        </div>\n                    </form>\n                </Dialog.Panel>\n            </div>\n        </Dialog>\n    );\n};\n\nexport default CreateTourBookingModal;\n\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { EyeIcon, EyeSlashIcon, Bars2Icon, ArrowsUpDownIcon, ArrowUpIcon, ArrowDownIcon, CheckIcon } from '@heroicons/react/24/outline';\n\ninterface Column {\n  id: string;\n  label: string;\n}\n\ninterface TableColumnConfigProps {\n  columns: Column[];\n  visibleColumns: string[];\n  columnOrder: string[];\n  onToggleColumnVisibility: (columnId: string) => void;\n  onMoveColumn: (dragIndex: number, hoverIndex: number) => void;\n  onClose: () => void;\n  buttonTitle?: string; // Optional: Custom Button-Titel\n  modalTitle?: string; // Optional: Custom Modal-Titel\n  sortDirections?: Record<string, 'asc' | 'desc'>; // Optional: Sortierrichtungen pro Spalte (fr Cards-Mode)\n  onSortDirectionChange?: (columnId: string, direction: 'asc' | 'desc') => void; // Optional: Callback fr Sortierrichtung pro Spalte\n  showSortDirection?: boolean; // Optional: Sortierrichtung anzeigen\n}\n\ninterface DraggableItemProps {\n  id: string;\n  label: string;\n  index: number;\n  isVisible: boolean;\n  isDragging: boolean;\n  isOver: boolean;\n  onDragStart: (index: number) => void;\n  onDragOver: (index: number) => void;\n  onDragEnd: () => void;\n  onToggleVisibility: (id: string) => void;\n  sortDirection?: 'asc' | 'desc'; // Optional: Sortierrichtung fr diese Spalte\n  onSortDirectionChange?: (id: string, direction: 'asc' | 'desc') => void; // Optional: Callback fr Sortierrichtung\n  showSortDirection?: boolean; // Optional: Sortierrichtung anzeigen\n  sortOrder?: number; // Optional: Sortierreihenfolge (1, 2, 3, etc.)\n}\n\n// Komponente fr eine einzelne, ziehbare Spalte\nconst DraggableColumnItem: React.FC<DraggableItemProps> = ({ \n  id, \n  label, \n  index, \n  isVisible,\n  isDragging,\n  isOver,\n  onDragStart,\n  onDragOver,\n  onDragEnd,\n  onToggleVisibility,\n  sortDirection,\n  onSortDirectionChange,\n  showSortDirection = false,\n  sortOrder\n}) => {\n  const { t } = useTranslation();\n  \n  return (\n    <li \n      draggable\n      onDragStart={() => onDragStart(index)}\n      onDragOver={(e) => {\n        e.preventDefault();\n        onDragOver(index);\n      }}\n      onDragEnd={onDragEnd}\n      className={`flex items-center justify-between px-2.5 py-2 rounded-md transition-colors duration-150\n        ${isDragging ? 'opacity-50 bg-gray-100 dark:bg-gray-700' : ''}\n        ${isOver ? 'border-t-2 border-blue-500 dark:border-blue-400' : ''}\n        ${!isDragging && !isOver ? 'hover:bg-gray-50 dark:hover:bg-gray-700' : ''}`}\n    >\n      <div className=\"flex items-center flex-1 min-w-0\">\n        <Bars2Icon className=\"h-4 w-4 mr-2 text-gray-400 dark:text-gray-500 cursor-move flex-shrink-0\" />\n        <span className=\"text-sm dark:text-gray-300 flex items-center gap-2\">\n          {showSortDirection && sortOrder !== undefined && isVisible && (\n            <span className=\"text-xs font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 px-1.5 py-0.5 rounded\">\n              {sortOrder}\n            </span>\n          )}\n          <span>{label}</span>\n        </span>\n      </div>\n      <div className=\"flex items-center gap-1\">\n        {/* Sortierrichtung-Toggle */}\n        {showSortDirection && isVisible && sortDirection !== undefined && onSortDirectionChange && (\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              onSortDirectionChange(id, sortDirection === 'asc' ? 'desc' : 'asc');\n            }}\n            className=\"inline-flex items-center justify-center p-1.5 rounded-md bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-300 transition-colors duration-150\"\n            title={`${t('tableColumn.sortDirection')}: ${sortDirection === 'asc' ? t('tableColumn.ascending') : t('tableColumn.descending')} (${t('tableColumn.clickToToggle')})`}\n          >\n            {sortDirection === 'asc' ? (\n              <ArrowUpIcon className=\"h-4 w-4\" />\n            ) : (\n              <ArrowDownIcon className=\"h-4 w-4\" />\n            )}\n          </button>\n        )}\n        <button\n          onClick={() => onToggleVisibility(id)}\n          className=\"inline-flex items-center justify-center p-1.5 rounded-full bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-300 transition-colors duration-150\"\n          title={isVisible ? t('tableColumn.hideColumn') : t('tableColumn.showColumn')}\n        >\n          {isVisible ? (\n            <EyeIcon className=\"w-4 h-4 dark:text-gray-300\" />\n          ) : (\n            <EyeSlashIcon className=\"w-4 h-4 text-gray-400 dark:text-gray-500\" />\n          )}\n        </button>\n      </div>\n    </li>\n  );\n};\n\nconst TableColumnConfig: React.FC<TableColumnConfigProps> = ({\n  columns,\n  visibleColumns,\n  columnOrder,\n  onToggleColumnVisibility,\n  onMoveColumn,\n  onClose,\n  buttonTitle,\n  modalTitle,\n  sortDirections = {},\n  onSortDirectionChange,\n  showSortDirection = false\n}) => {\n  const { t } = useTranslation();\n  const defaultButtonTitle = buttonTitle || t('tableColumn.configure');\n  const defaultModalTitle = modalTitle || t('tableColumn.configure');\n  const [isOpen, setIsOpen] = useState(false);\n  const [draggedIndex, setDraggedIndex] = useState<number | null>(null);\n  const [overIndex, setOverIndex] = useState<number | null>(null);\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  // Sortiere die Spalten gem der benutzerdefinierten Reihenfolge\n  const sortedColumns = [...columns].sort((a, b) => {\n    const indexA = columnOrder.indexOf(a.id);\n    const indexB = columnOrder.indexOf(b.id);\n    // Wenn eine Spalte nicht in columnOrder ist, platziere sie am Ende\n    if (indexA === -1) return 1;\n    if (indexB === -1) return -1;\n    return indexA - indexB;\n  });\n\n  // Handler fr den Beginn des Drag-Vorgangs\n  const handleDragStart = (index: number) => {\n    setDraggedIndex(index);\n    setOverIndex(index);\n  };\n\n  // Handler fr Drag-Over-Ereignis\n  const handleDragOver = (index: number) => {\n    setOverIndex(index);\n  };\n\n  // Handler fr das Ende des Drag-Vorgangs\n  const handleDragEnd = () => {\n    if (draggedIndex !== null && overIndex !== null && draggedIndex !== overIndex) {\n      onMoveColumn(draggedIndex, overIndex);\n    }\n    setDraggedIndex(null);\n    setOverIndex(null);\n  };\n\n  // Handler zum Schlieen des Mens\n  const handleClose = () => {\n    setIsOpen(false);\n    onClose();\n  };\n\n  // Click outside handler\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        handleClose();\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen]);\n\n  return (\n    <div className=\"relative\" ref={menuRef}>\n      <button\n        className=\"inline-flex items-center justify-center p-2 rounded-md bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-300 transition-colors duration-150\"\n        onClick={() => setIsOpen(!isOpen)}\n        title={defaultButtonTitle}\n      >\n        {showSortDirection ? (\n          <ArrowsUpDownIcon className=\"w-5 h-5\" />\n        ) : (\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" className=\"w-5 h-5\">\n            <path fillRule=\"evenodd\" d=\"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 012 10z\" clipRule=\"evenodd\" />\n          </svg>\n        )}\n      </button>\n\n      {isOpen && (\n        <div \n          className=\"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-md shadow-lg z-50 border border-gray-300 dark:border-gray-600\"\n          onDragOver={(e) => e.preventDefault()}\n        >\n          <div className=\"px-3 py-2.5 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between\">\n            <h3 className=\"text-sm font-semibold text-gray-900 dark:text-white\">{defaultModalTitle}</h3>\n            <button\n              onClick={handleClose}\n              className=\"inline-flex items-center justify-center p-2 rounded-md bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-300 transition-colors duration-150\"\n              title={t('common.close')}\n            >\n              <CheckIcon className=\"w-5 h-5\" />\n            </button>\n          </div>\n          <ul className=\"px-2 py-1 max-h-64 overflow-y-auto\">\n            {sortedColumns.map((column, index) => {\n              // Bestimme Sortierreihenfolge (nur fr sichtbare Spalten)\n              const visibleSortedColumns = sortedColumns.filter(col => visibleColumns.includes(col.id));\n              const sortOrder = visibleSortedColumns.findIndex(col => col.id === column.id) + 1;\n              const isVisible = visibleColumns.includes(column.id);\n              \n              return (\n                <DraggableColumnItem\n                  key={column.id}\n                  id={column.id}\n                  label={column.label}\n                  index={index}\n                  isVisible={isVisible}\n                  isDragging={draggedIndex === index}\n                  isOver={overIndex === index && draggedIndex !== index}\n                  onDragStart={handleDragStart}\n                  onDragOver={handleDragOver}\n                  onDragEnd={handleDragEnd}\n                  onToggleVisibility={onToggleColumnVisibility}\n                  sortDirection={showSortDirection && isVisible ? (sortDirections[column.id] || 'asc') : undefined}\n                  onSortDirectionChange={showSortDirection ? onSortDirectionChange : undefined}\n                  showSortDirection={showSortDirection}\n                  sortOrder={showSortDirection && isVisible ? sortOrder : undefined}\n                />\n              );\n            })}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TableColumnConfig; ","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, DocumentTextIcon, CalendarIcon, UserIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface CertificateCreationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onCertificateCreated: () => void;\n  userId: number;\n  userName: string;\n}\n\ninterface UserData {\n  firstName: string;\n  lastName: string;\n  identificationNumber: string | null;\n  contractStartDate: string | null;\n  contractEndDate: string | null;\n  contractType: string | null;\n  salary: number | null;\n  position: string | null;\n}\n\nconst CertificateCreationModal: React.FC<CertificateCreationModalProps> = ({\n  isOpen,\n  onClose,\n  onCertificateCreated,\n  userId,\n  userName\n}) => {\n  const { t } = useTranslation();\n  const { user: currentUser } = useAuth();\n  const { isHR, isAdmin, loading: permissionsLoading } = usePermissions();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  \n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [activeTab, setActiveTab] = useState<'data' | 'text'>('data');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Form-Daten\n  const [userData, setUserData] = useState<UserData | null>(null);\n  const [issueDate, setIssueDate] = useState(new Date().toISOString().split('T')[0]);\n  const [certificateType, setCertificateType] = useState('employment');\n  const [pdfFile, setPdfFile] = useState<File | null>(null);\n  const [pdfPreviewUrl, setPdfPreviewUrl] = useState<string | null>(null);\n  const [uploading, setUploading] = useState(false);\n  const [availableTemplates, setAvailableTemplates] = useState<Array<{type: string; version: string; path: string}>>([]);\n  const [selectedTemplate, setSelectedTemplate] = useState<string | null>(null);\n  const [useTemplate, setUseTemplate] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Prfe Berechtigung (nur wenn Berechtigungen geladen sind)\n  useEffect(() => {\n    if (permissionsLoading) {\n      return; // Warte bis Berechtigungen geladen sind\n    }\n    \n    if (!isHR() && !isAdmin()) {\n      showMessage('Nur HR oder Admin knnen Arbeitszeugnisse erstellen', 'error');\n      onClose();\n    }\n  }, [isHR, isAdmin, permissionsLoading, onClose, showMessage]);\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n      fetchUserData();\n      fetchTemplates();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  const fetchTemplates = async () => {\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.DOCUMENT_TEMPLATES);\n      const documentTemplates = response.data.documentTemplates || {};\n      const templates: Array<{type: string; version: string; path: string}> = [];\n      \n      if (documentTemplates.employmentCertificate) {\n        templates.push({\n          type: 'employmentCertificate',\n          version: documentTemplates.employmentCertificate.version,\n          path: documentTemplates.employmentCertificate.path\n        });\n      }\n      \n      setAvailableTemplates(templates);\n      if (templates.length > 0) {\n        setSelectedTemplate(templates[0].type);\n        setUseTemplate(true);\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Laden der Templates:', err);\n      // Kein Fehler anzeigen, Templates sind optional\n    }\n  };\n\n  const fetchUserData = async () => {\n    try {\n      const [userResponse, lifecycleResponse] = await Promise.all([\n        axiosInstance.get(API_ENDPOINTS.USERS.BY_ID(userId)),\n        axiosInstance.get(API_ENDPOINTS.LIFECYCLE.BY_USER(userId))\n      ]);\n\n      const user = userResponse.data;\n      const lifecycle = lifecycleResponse.data.lifecycle;\n\n      const userDataObj = {\n        firstName: user.firstName || '',\n        lastName: user.lastName || '',\n        identificationNumber: user.identificationNumber || null,\n        contractStartDate: lifecycle?.contractStartDate || null,\n        contractEndDate: lifecycle?.contractEndDate || null,\n        contractType: lifecycle?.contractType || null,\n        salary: user.salary || null,\n        position: null // TODO: Aus Rollen ableiten\n      };\n\n      setUserData(userDataObj);\n\n      // Automatische Vorausfllung: Ausstellungsdatum auf heute setzen (wenn noch nicht gesetzt)\n      if (!issueDate || issueDate === new Date().toISOString().split('T')[0]) {\n        setIssueDate(new Date().toISOString().split('T')[0]);\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Laden der User-Daten:', err);\n      setError('Fehler beim Laden der Daten');\n    }\n  };\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        showMessage('Nur PDF-Dateien sind erlaubt', 'error');\n        return;\n      }\n      if (file.size > 10 * 1024 * 1024) { // 10MB\n        showMessage('Datei ist zu gro (max. 10MB)', 'error');\n        return;\n      }\n      setPdfFile(file);\n      setUseTemplate(false); // Deaktiviere Template wenn PDF hochgeladen wird\n      // Erstelle Preview-URL\n      const url = URL.createObjectURL(file);\n      setPdfPreviewUrl(url);\n    }\n  };\n\n  // Cleanup: Revoke Object URL beim Unmount oder wenn Datei entfernt wird\n  useEffect(() => {\n    return () => {\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n      }\n    };\n  }, [pdfPreviewUrl]);\n\n  const validateForm = (): string | null => {\n    if (!useTemplate && !pdfFile) {\n      return 'Bitte whlen Sie ein Template oder laden Sie eine PDF-Datei hoch';\n    }\n    if (!issueDate) {\n      return 'Bitte geben Sie ein Ausstellungsdatum an';\n    }\n    const issueDateObj = new Date(issueDate);\n    if (isNaN(issueDateObj.getTime())) {\n      return 'Ungltiges Ausstellungsdatum';\n    }\n    if (issueDateObj > new Date()) {\n      return 'Ausstellungsdatum darf nicht in der Zukunft liegen';\n    }\n    return null;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Client-seitige Validierung\n    const validationError = validateForm();\n    if (validationError) {\n      setError(validationError);\n      showMessage(validationError, 'error');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      let pdfPath: string | undefined = undefined;\n      let templateUsed: string | null = null;\n      let templateVersion: string | null = null;\n\n      // Wenn Template verwendet werden soll und kein PDF hochgeladen wurde\n      if (useTemplate && selectedTemplate && !pdfFile) {\n        const template = availableTemplates.find(t => t.type === selectedTemplate);\n        if (template) {\n          templateUsed = template.type;\n          templateVersion = template.version;\n          // PDF wird vom Backend generiert\n        }\n      } else if (pdfFile) {\n        // PDF wurde hochgeladen - verwende dieses\n        pdfPath = `temp-${Date.now()}-${pdfFile.name}`; // Temporr\n      } else {\n        showMessage('Bitte whlen Sie ein Template oder laden Sie eine PDF-Datei hoch', 'error');\n        setLoading(false);\n        return;\n      }\n\n      const certificateData = {\n        certificateType,\n        issueDate: new Date(issueDate),\n        pdfPath,\n        templateUsed,\n        templateVersion\n      };\n\n      await axiosInstance.post(\n        API_ENDPOINTS.LIFECYCLE.CERTIFICATES(userId),\n        certificateData\n      );\n\n      showMessage('Arbeitszeugnis erfolgreich erstellt', 'success');\n      onCertificateCreated();\n      onClose();\n      \n      // Reset form\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n        setPdfPreviewUrl(null);\n      }\n      setPdfFile(null);\n      setIssueDate(new Date().toISOString().split('T')[0]);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Erstellen des Arbeitszeugnisses:', err);\n      setError(err.response?.data?.message || 'Fehler beim Erstellen des Arbeitszeugnisses');\n      showMessage('Fehler beim Erstellen des Arbeitszeugnisses', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isHR() && !isAdmin()) {\n    return null;\n  }\n\n  return (\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n      {/* Overlay - nur auf Mobile und Desktop (nicht Large Desktop) */}\n      {(!isLargeScreen || isMobile) && (\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n      )}\n\n      <div className=\"fixed inset-0 flex items-start justify-end p-0 sm:p-0\">\n        <Dialog.Panel\n          className={`\n            ${isMobile ? 'w-full h-full' : isLargeScreen ? 'w-[600px]' : 'w-[600px]'}\n            ${isMobile ? '' : 'top-16'}\n            bg-white dark:bg-gray-800 shadow-xl\n            transform transition-transform duration-350 ease-out\n            ${isMobile ? 'rounded-none' : 'rounded-l-lg'}\n            flex flex-col\n            max-h-[calc(100vh-4rem)]\n            ${isMobile ? '' : 'sidepane-panel-container'}\n          `}\n          style={{\n            animation: isMobile ? 'none' : 'slideIn 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94)'\n          }}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <div className=\"flex items-center space-x-3\">\n              <DocumentTextIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n              <Dialog.Title className=\"text-xl font-semibold dark:text-white\">\n                Arbeitszeugnis erstellen\n              </Dialog.Title>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-6\">\n            <div className=\"mb-4\">\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Fr: <span className=\"font-medium dark:text-white\">{userName}</span>\n              </p>\n            </div>\n\n            {/* Tabs */}\n            <div className=\"border-b border-gray-200 dark:border-gray-700 mb-6\">\n              <nav className=\"-mb-px flex space-x-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => setActiveTab('data')}\n                  className={`${\n                    activeTab === 'data'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                >\n                  Daten\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setActiveTab('text')}\n                  className={`${\n                    activeTab === 'text'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                >\n                  PDF hochladen\n                </button>\n              </nav>\n            </div>\n\n            {error && (\n              <div className=\"mb-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\n                <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n              </div>\n            )}\n\n            {/* Tab Content */}\n            {activeTab === 'data' && (\n              <div className=\"space-y-4\">\n                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 mb-4\">\n                  <h3 className=\"text-sm font-semibold dark:text-white mb-3\">\n                    Automatisch erkannte Daten\n                  </h3>\n                  <div className=\"space-y-2 text-sm\">\n                    {userData && (\n                      <>\n                        <div className=\"flex items-center space-x-2\">\n                          <UserIcon className=\"h-4 w-4 text-gray-400\" />\n                          <span className=\"text-gray-600 dark:text-gray-400\">Name:</span>\n                          <span className=\"dark:text-white\">\n                            {userData.firstName} {userData.lastName}\n                          </span>\n                        </div>\n                        {userData.identificationNumber && (\n                          <div className=\"flex items-center space-x-2\">\n                            <DocumentTextIcon className=\"h-4 w-4 text-gray-400\" />\n                            <span className=\"text-gray-600 dark:text-gray-400\">Cdula:</span>\n                            <span className=\"dark:text-white\">{userData.identificationNumber}</span>\n                          </div>\n                        )}\n                        {userData.contractStartDate && (\n                          <div className=\"flex items-center space-x-2\">\n                            <CalendarIcon className=\"h-4 w-4 text-gray-400\" />\n                            <span className=\"text-gray-600 dark:text-gray-400\">Eintrittsdatum:</span>\n                            <span className=\"dark:text-white\">\n                              {new Date(userData.contractStartDate).toLocaleDateString('de-DE')}\n                            </span>\n                          </div>\n                        )}\n                        {userData.contractEndDate && (\n                          <div className=\"flex items-center space-x-2\">\n                            <CalendarIcon className=\"h-4 w-4 text-gray-400\" />\n                            <span className=\"text-gray-600 dark:text-gray-400\">Austrittsdatum:</span>\n                            <span className=\"dark:text-white\">\n                              {new Date(userData.contractEndDate).toLocaleDateString('de-DE')}\n                            </span>\n                          </div>\n                        )}\n                      </>\n                    )}\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Ausstellungsdatum <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={issueDate}\n                    onChange={(e) => {\n                      const value = e.target.value;\n                      setIssueDate(value);\n                      // Validierung: Datum darf nicht in der Zukunft liegen\n                      if (value && new Date(value) > new Date()) {\n                        setError('Ausstellungsdatum darf nicht in der Zukunft liegen');\n                      } else {\n                        setError(null); // Clear error when valid\n                      }\n                    }}\n                    max={new Date().toISOString().split('T')[0]}\n                    className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                      error && issueDate && new Date(issueDate) > new Date()\n                        ? 'border-red-500 dark:border-red-500' \n                        : error && !issueDate\n                        ? 'border-red-500 dark:border-red-500'\n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                    required\n                    aria-invalid={(!issueDate || (issueDate && new Date(issueDate) > new Date())) ? true : undefined}\n                    aria-describedby={(!issueDate || (issueDate && new Date(issueDate) > new Date())) ? \"issueDate-error\" : undefined}\n                  />\n                  {error && (!issueDate || (issueDate && new Date(issueDate) > new Date())) && (\n                    <p id=\"issueDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                      {error}\n                    </p>\n                  )}\n                  {!error && (\n                    <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                      Das Datum darf nicht in der Zukunft liegen\n                    </p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Zertifikat-Typ <span className=\"text-red-500\">*</span>\n                  </label>\n                  <select\n                    value={certificateType}\n                    onChange={(e) => setCertificateType(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    required\n                  >\n                    <option value=\"employment\">Arbeitszeugnis</option>\n                    <option value=\"salary\">Gehaltsbescheinigung</option>\n                    <option value=\"work_experience\">Arbeitsbescheinigung</option>\n                  </select>\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'text' && (\n              <div className=\"space-y-4\">\n                {/* Template-Auswahl */}\n                {availableTemplates.length > 0 && (\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Template verwenden\n                    </label>\n                    <div className=\"flex items-center space-x-3 mb-4\">\n                      <input\n                        type=\"checkbox\"\n                        checked={useTemplate}\n                        onChange={(e) => {\n                          setUseTemplate(e.target.checked);\n                          if (e.target.checked && pdfFile) {\n                            // Wenn Template aktiviert wird, entferne PDF\n                            setPdfFile(null);\n                            if (pdfPreviewUrl) {\n                              URL.revokeObjectURL(pdfPreviewUrl);\n                              setPdfPreviewUrl(null);\n                            }\n                          }\n                        }}\n                        className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                      />\n                      <label className=\"text-sm text-gray-700 dark:text-gray-300\">\n                        Template fr automatische PDF-Generierung verwenden\n                      </label>\n                    </div>\n                    {useTemplate && (\n                      <select\n                        value={selectedTemplate || ''}\n                        onChange={(e) => setSelectedTemplate(e.target.value)}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white mb-4\"\n                      >\n                        {availableTemplates.map((template) => (\n                          <option key={template.type} value={template.type}>\n                            Arbeitszeugnis (Version {template.version})\n                          </option>\n                        ))}\n                      </select>\n                    )}\n                  </div>\n                )}\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                    {useTemplate ? 'ODER PDF-Datei hochladen' : 'PDF-Datei hochladen'} {!useTemplate && <span className=\"text-red-500\">*</span>}\n                  </label>\n                  <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center\">\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      accept=\".pdf\"\n                      onChange={handleFileSelect}\n                      className=\"hidden\"\n                    />\n                    {!pdfFile ? (\n                      <div>\n                        <DocumentTextIcon className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n                        <button\n                          type=\"button\"\n                          onClick={() => fileInputRef.current?.click()}\n                          className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium\"\n                        >\n                          PDF-Datei auswhlen\n                        </button>\n                        <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n                          oder Datei hierher ziehen\n                        </p>\n                        <p className=\"mt-1 text-xs text-gray-400 dark:text-gray-500\">\n                          Max. 10MB\n                        </p>\n                      </div>\n                    ) : (\n                      <div>\n                        <DocumentTextIcon className=\"mx-auto h-12 w-12 text-green-500 mb-4\" />\n                        <p className=\"text-sm font-medium dark:text-white\">{pdfFile.name}</p>\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                          {(pdfFile.size / 1024 / 1024).toFixed(2)} MB\n                        </p>\n                        <button\n                          type=\"button\"\n                          onClick={() => {\n                            setPdfFile(null);\n                            if (pdfPreviewUrl) {\n                              URL.revokeObjectURL(pdfPreviewUrl);\n                              setPdfPreviewUrl(null);\n                            }\n                            if (fileInputRef.current) {\n                              fileInputRef.current.value = '';\n                            }\n                          }}\n                          className=\"mt-2 text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300\"\n                        >\n                          Datei entfernen\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* PDF-Vorschau */}\n                {pdfPreviewUrl && (\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      PDF-Vorschau\n                    </label>\n                    <div className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n                      <iframe \n                        src={`${pdfPreviewUrl}#view=FitH`}\n                        className=\"w-full rounded border dark:border-gray-600\"\n                        style={{ height: '400px' }}\n                        title=\"PDF-Vorschau\"\n                      />\n                    </div>\n                  </div>\n                )}\n\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n              title=\"Abbrechen\"\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleSubmit}\n              disabled={loading || (!pdfFile && !useTemplate)}\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n              title={loading ? 'Wird erstellt...' : 'Erstellen'}\n            >\n              {loading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <CheckIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n        </Dialog.Panel>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default CertificateCreationModal;\n\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, DocumentTextIcon, CalendarIcon, UserIcon, CurrencyDollarIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface ContractCreationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onContractCreated: () => void;\n  userId: number;\n  userName: string;\n}\n\ninterface UserData {\n  firstName: string;\n  lastName: string;\n  identificationNumber: string | null;\n  contractStartDate: string | null;\n  contractEndDate: string | null;\n  contractType: string | null;\n  salary: number | null;\n  position: string | null;\n}\n\nconst ContractCreationModal: React.FC<ContractCreationModalProps> = ({\n  isOpen,\n  onClose,\n  onContractCreated,\n  userId,\n  userName\n}) => {\n  const { t } = useTranslation();\n  const { user: currentUser } = useAuth();\n  const { isHR, isAdmin, loading: permissionsLoading } = usePermissions();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  \n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [activeTab, setActiveTab] = useState<'data' | 'text'>('data');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Form-Daten\n  const [userData, setUserData] = useState<UserData | null>(null);\n  const [contractType, setContractType] = useState('employment');\n  const [startDate, setStartDate] = useState(new Date().toISOString().split('T')[0]);\n  const [endDate, setEndDate] = useState<string>('');\n  const [salary, setSalary] = useState<string>('');\n  const [workingHours, setWorkingHours] = useState<string>('');\n  const [position, setPosition] = useState<string>('');\n  const [pdfFile, setPdfFile] = useState<File | null>(null);\n  const [pdfPreviewUrl, setPdfPreviewUrl] = useState<string | null>(null);\n  const [availableTemplates, setAvailableTemplates] = useState<Array<{type: string; version: string; path: string}>>([]);\n  const [selectedTemplate, setSelectedTemplate] = useState<string | null>(null);\n  const [useTemplate, setUseTemplate] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Prfe Berechtigung (nur wenn Berechtigungen geladen sind)\n  useEffect(() => {\n    if (permissionsLoading) {\n      return; // Warte bis Berechtigungen geladen sind\n    }\n    \n    if (!isHR() && !isAdmin()) {\n      showMessage('Nur HR oder Admin knnen Arbeitsvertrge erstellen', 'error');\n      onClose();\n    }\n  }, [isHR, isAdmin, permissionsLoading, onClose, showMessage]);\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n      fetchUserData();\n      fetchTemplates();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  const fetchTemplates = async () => {\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.DOCUMENT_TEMPLATES);\n      const documentTemplates = response.data.documentTemplates || {};\n      const templates: Array<{type: string; version: string; path: string}> = [];\n      \n      if (documentTemplates.employmentContract) {\n        templates.push({\n          type: 'employmentContract',\n          version: documentTemplates.employmentContract.version,\n          path: documentTemplates.employmentContract.path\n        });\n      }\n      \n      setAvailableTemplates(templates);\n      if (templates.length > 0) {\n        setSelectedTemplate(templates[0].type);\n        setUseTemplate(true);\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Laden der Templates:', err);\n      // Kein Fehler anzeigen, Templates sind optional\n    }\n  };\n\n  const fetchUserData = async () => {\n    try {\n      const [userResponse, lifecycleResponse] = await Promise.all([\n        axiosInstance.get(API_ENDPOINTS.USERS.BY_ID(userId)),\n        axiosInstance.get(API_ENDPOINTS.LIFECYCLE.BY_USER(userId))\n      ]);\n\n      const user = userResponse.data;\n      const lifecycle = lifecycleResponse.data.lifecycle;\n\n      const data: UserData = {\n        firstName: user.firstName || '',\n        lastName: user.lastName || '',\n        identificationNumber: user.identificationNumber || null,\n        contractStartDate: lifecycle?.contractStartDate || null,\n        contractEndDate: lifecycle?.contractEndDate || null,\n        contractType: lifecycle?.contractType || null,\n        salary: user.salary || null,\n        position: null\n      };\n\n      setUserData(data);\n      \n      // Setze Standard-Werte\n      if (data.contractStartDate) {\n        setStartDate(new Date(data.contractStartDate).toISOString().split('T')[0]);\n      }\n      if (data.contractEndDate) {\n        setEndDate(new Date(data.contractEndDate).toISOString().split('T')[0]);\n      }\n      if (data.salary) {\n        setSalary(data.salary.toString());\n      }\n      if (data.contractType) {\n        setContractType(data.contractType);\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Laden der User-Daten:', err);\n      setError('Fehler beim Laden der Daten');\n    }\n  };\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        showMessage('Nur PDF-Dateien sind erlaubt', 'error');\n        return;\n      }\n      if (file.size > 10 * 1024 * 1024) { // 10MB\n        showMessage('Datei ist zu gro (max. 10MB)', 'error');\n        return;\n      }\n      setPdfFile(file);\n      setUseTemplate(false); // Deaktiviere Template wenn PDF hochgeladen wird\n      // Erstelle Preview-URL\n      const url = URL.createObjectURL(file);\n      setPdfPreviewUrl(url);\n    }\n  };\n\n  // Cleanup: Revoke Object URL beim Unmount oder wenn Datei entfernt wird\n  useEffect(() => {\n    return () => {\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n      }\n    };\n  }, [pdfPreviewUrl]);\n\n  const validateForm = (): string | null => {\n    if (!useTemplate && !pdfFile) {\n      return 'Bitte whlen Sie ein Template oder laden Sie eine PDF-Datei hoch';\n    }\n    if (!startDate) {\n      return 'Bitte geben Sie ein Startdatum an';\n    }\n    const startDateObj = new Date(startDate);\n    if (isNaN(startDateObj.getTime())) {\n      return 'Ungltiges Startdatum';\n    }\n    if (endDate) {\n      const endDateObj = new Date(endDate);\n      if (isNaN(endDateObj.getTime())) {\n        return 'Ungltiges Enddatum';\n      }\n      if (endDateObj < startDateObj) {\n        return 'Enddatum muss nach dem Startdatum liegen';\n      }\n    }\n    if (salary && parseFloat(salary) < 0) {\n      return 'Gehalt darf nicht negativ sein';\n    }\n    if (workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168)) {\n      return 'Arbeitsstunden mssen zwischen 0 und 168 liegen';\n    }\n    return null;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Client-seitige Validierung\n    const validationError = validateForm();\n    if (validationError) {\n      setError(validationError);\n      showMessage(validationError, 'error');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      let pdfPath: string | undefined = undefined;\n      let templateUsed: string | null = null;\n      let templateVersion: string | null = null;\n\n      // Wenn Template verwendet werden soll und kein PDF hochgeladen wurde\n      if (useTemplate && selectedTemplate && !pdfFile) {\n        const template = availableTemplates.find(t => t.type === selectedTemplate);\n        if (template) {\n          templateUsed = template.type;\n          templateVersion = template.version;\n          // PDF wird vom Backend generiert\n        }\n      } else if (pdfFile) {\n        // PDF wurde hochgeladen - verwende dieses\n        pdfPath = `temp-${Date.now()}-${pdfFile.name}`; // Temporr\n      } else {\n        showMessage('Bitte whlen Sie ein Template oder laden Sie eine PDF-Datei hoch', 'error');\n        setLoading(false);\n        return;\n      }\n\n      const contractData = {\n        contractType,\n        startDate: new Date(startDate),\n        endDate: endDate ? new Date(endDate) : null,\n        salary: salary ? parseFloat(salary) : null,\n        workingHours: workingHours ? parseFloat(workingHours) : null,\n        position: position || null,\n        pdfPath,\n        templateUsed,\n        templateVersion\n      };\n\n      await axiosInstance.post(\n        API_ENDPOINTS.LIFECYCLE.CONTRACTS(userId),\n        contractData\n      );\n\n      showMessage('Arbeitsvertrag erfolgreich erstellt', 'success');\n      onContractCreated();\n      onClose();\n      \n      // Reset form\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n        setPdfPreviewUrl(null);\n      }\n      setPdfFile(null);\n      setStartDate(new Date().toISOString().split('T')[0]);\n      setEndDate('');\n      setSalary('');\n      setWorkingHours('');\n      setPosition('');\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Erstellen des Arbeitsvertrags:', err);\n      setError(err.response?.data?.message || 'Fehler beim Erstellen des Arbeitsvertrags');\n      showMessage('Fehler beim Erstellen des Arbeitsvertrags', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isHR() && !isAdmin()) {\n    return null;\n  }\n\n  return (\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n      {/* Overlay */}\n      {(!isLargeScreen || isMobile) && (\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n      )}\n\n      <div className=\"fixed inset-0 flex items-start justify-end p-0 sm:p-0\">\n        <Dialog.Panel\n          className={`\n            ${isMobile ? 'w-full h-full' : isLargeScreen ? 'w-[600px]' : 'w-[600px]'}\n            ${isMobile ? '' : 'top-16'}\n            bg-white dark:bg-gray-800 shadow-xl\n            transform transition-transform duration-350 ease-out\n            ${isMobile ? 'rounded-none' : 'rounded-l-lg'}\n            flex flex-col\n            max-h-[calc(100vh-4rem)]\n            ${isMobile ? '' : 'sidepane-panel-container'}\n          `}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <div className=\"flex items-center space-x-3\">\n              <DocumentTextIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n              <Dialog.Title className=\"text-xl font-semibold dark:text-white\">\n                Arbeitsvertrag erstellen\n              </Dialog.Title>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-6\">\n            <div className=\"mb-4\">\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                Fr: <span className=\"font-medium dark:text-white\">{userName}</span>\n              </p>\n            </div>\n\n            {/* Tabs */}\n            <div className=\"border-b border-gray-200 dark:border-gray-700 mb-6\">\n              <nav className=\"-mb-px flex space-x-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => setActiveTab('data')}\n                  className={`${\n                    activeTab === 'data'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                >\n                  Vertragsdaten\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setActiveTab('text')}\n                  className={`${\n                    activeTab === 'text'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                >\n                  PDF hochladen\n                </button>\n              </nav>\n            </div>\n\n            {error && (\n              <div className=\"mb-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\n                <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n              </div>\n            )}\n\n            {/* Tab Content */}\n            {activeTab === 'data' && (\n              <div className=\"space-y-4\">\n                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4 mb-4\">\n                  <h3 className=\"text-sm font-semibold dark:text-white mb-3\">\n                    Automatisch erkannte Daten\n                  </h3>\n                  <div className=\"space-y-2 text-sm\">\n                    {userData && (\n                      <>\n                        <div className=\"flex items-center space-x-2\">\n                          <UserIcon className=\"h-4 w-4 text-gray-400\" />\n                          <span className=\"text-gray-600 dark:text-gray-400\">Name:</span>\n                          <span className=\"dark:text-white\">\n                            {userData.firstName} {userData.lastName}\n                          </span>\n                        </div>\n                        {userData.identificationNumber && (\n                          <div className=\"flex items-center space-x-2\">\n                            <DocumentTextIcon className=\"h-4 w-4 text-gray-400\" />\n                            <span className=\"text-gray-600 dark:text-gray-400\">Cdula:</span>\n                            <span className=\"dark:text-white\">{userData.identificationNumber}</span>\n                          </div>\n                        )}\n                      </>\n                    )}\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Vertragstyp <span className=\"text-red-500\">*</span>\n                  </label>\n                  <select\n                    value={contractType}\n                    onChange={(e) => setContractType(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  >\n                    <option value=\"employment\">Arbeitsvertrag</option>\n                    <option value=\"amendment\">Vertragsnderung</option>\n                    <option value=\"extension\">Vertragsverlngerung</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Startdatum <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={startDate}\n                    onChange={(e) => {\n                      setStartDate(e.target.value);\n                      setError(null); // Clear error when user starts typing\n                    }}\n                    className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                      error && !startDate \n                        ? 'border-red-500 dark:border-red-500' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                    required\n                    aria-invalid={!startDate}\n                    aria-describedby={!startDate ? \"startDate-error\" : undefined}\n                  />\n                  {error && !startDate && (\n                    <p id=\"startDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                      {error}\n                    </p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Enddatum (optional)\n                  </label>\n                  <input\n                    type=\"date\"\n                    value={endDate}\n                    onChange={(e) => {\n                      setEndDate(e.target.value);\n                      // Wenn Enddatum gesetzt wird, prfe ob es nach Startdatum liegt\n                      if (e.target.value && startDate && new Date(e.target.value) < new Date(startDate)) {\n                        setError('Enddatum muss nach dem Startdatum liegen');\n                      } else {\n                        setError(null); // Clear error when valid\n                      }\n                    }}\n                    min={startDate || undefined}\n                    className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                      error && endDate && startDate && new Date(endDate) < new Date(startDate)\n                        ? 'border-red-500 dark:border-red-500' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                    aria-invalid={endDate && startDate && new Date(endDate) < new Date(startDate) ? true : undefined}\n                    aria-describedby={endDate && startDate && new Date(endDate) < new Date(startDate) ? \"endDate-error\" : undefined}\n                  />\n                  {error && endDate && startDate && new Date(endDate) < new Date(startDate) && (\n                    <p id=\"endDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                      {error}\n                    </p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Position\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={position}\n                    onChange={(e) => setPosition(e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    placeholder=\"z.B. Frontend-Entwickler\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Gehalt (optional)\n                  </label>\n                  <div className=\"relative\">\n                    <CurrencyDollarIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                    <input\n                      type=\"number\"\n                      value={salary}\n                      onChange={(e) => {\n                        const value = e.target.value;\n                        setSalary(value);\n                        // Validierung: Gehalt darf nicht negativ sein\n                        if (value && parseFloat(value) < 0) {\n                          setError('Gehalt darf nicht negativ sein');\n                        } else {\n                          setError(null); // Clear error when valid\n                        }\n                      }}\n                      className={`w-full pl-10 pr-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                        error && salary && parseFloat(salary) < 0\n                          ? 'border-red-500 dark:border-red-500' \n                          : 'border-gray-300 dark:border-gray-600'\n                      }`}\n                      placeholder=\"0.00\"\n                      step=\"0.01\"\n                      min=\"0\"\n                      aria-invalid={salary && parseFloat(salary) < 0 ? true : undefined}\n                      aria-describedby={salary && parseFloat(salary) < 0 ? \"salary-error\" : undefined}\n                    />\n                  </div>\n                  {error && salary && parseFloat(salary) < 0 && (\n                    <p id=\"salary-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                      {error}\n                    </p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    Arbeitsstunden/Woche (optional)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={workingHours}\n                    onChange={(e) => {\n                      const value = e.target.value;\n                      setWorkingHours(value);\n                      // Validierung: Arbeitsstunden mssen zwischen 0 und 168 liegen\n                      if (value && (parseFloat(value) < 0 || parseFloat(value) > 168)) {\n                        setError('Arbeitsstunden mssen zwischen 0 und 168 liegen');\n                      } else {\n                        setError(null); // Clear error when valid\n                      }\n                    }}\n                    className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                      error && workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168)\n                        ? 'border-red-500 dark:border-red-500' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                    placeholder=\"40\"\n                    step=\"0.1\"\n                    min=\"0\"\n                    max=\"168\"\n                    aria-invalid={workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) ? true : undefined}\n                    aria-describedby={workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) ? \"workingHours-error\" : undefined}\n                  />\n                  {error && workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) && (\n                    <p id=\"workingHours-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                      {error}\n                    </p>\n                  )}\n                  <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                    Maximal 168 Stunden pro Woche (24h  7 Tage)\n                  </p>\n                </div>\n              </div>\n            )}\n\n            {activeTab === 'text' && (\n              <div className=\"space-y-4\">\n                {/* Template-Auswahl */}\n                {availableTemplates.length > 0 && (\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Template verwenden\n                    </label>\n                    <div className=\"flex items-center space-x-3 mb-4\">\n                      <input\n                        type=\"checkbox\"\n                        checked={useTemplate}\n                        onChange={(e) => {\n                          setUseTemplate(e.target.checked);\n                          if (e.target.checked && pdfFile) {\n                            // Wenn Template aktiviert wird, entferne PDF\n                            setPdfFile(null);\n                            if (pdfPreviewUrl) {\n                              URL.revokeObjectURL(pdfPreviewUrl);\n                              setPdfPreviewUrl(null);\n                            }\n                          }\n                        }}\n                        className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                      />\n                      <label className=\"text-sm text-gray-700 dark:text-gray-300\">\n                        Template fr automatische PDF-Generierung verwenden\n                      </label>\n                    </div>\n                    {useTemplate && (\n                      <select\n                        value={selectedTemplate || ''}\n                        onChange={(e) => setSelectedTemplate(e.target.value)}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white mb-4\"\n                      >\n                        {availableTemplates.map((template) => (\n                          <option key={template.type} value={template.type}>\n                            Arbeitsvertrag (Version {template.version})\n                          </option>\n                        ))}\n                      </select>\n                    )}\n                  </div>\n                )}\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                    {useTemplate ? 'ODER PDF-Datei hochladen' : 'PDF-Datei hochladen'} {!useTemplate && <span className=\"text-red-500\">*</span>}\n                  </label>\n                  <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center\">\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      accept=\".pdf\"\n                      onChange={handleFileSelect}\n                      className=\"hidden\"\n                    />\n                    {!pdfFile ? (\n                      <div>\n                        <DocumentTextIcon className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n                        <button\n                          type=\"button\"\n                          onClick={() => fileInputRef.current?.click()}\n                          className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium\"\n                        >\n                          PDF-Datei auswhlen\n                        </button>\n                        <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n                          oder Datei hierher ziehen\n                        </p>\n                        <p className=\"mt-1 text-xs text-gray-400 dark:text-gray-500\">\n                          Max. 10MB\n                        </p>\n                      </div>\n                    ) : (\n                      <div>\n                        <DocumentTextIcon className=\"mx-auto h-12 w-12 text-green-500 mb-4\" />\n                        <p className=\"text-sm font-medium dark:text-white\">{pdfFile.name}</p>\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                          {(pdfFile.size / 1024 / 1024).toFixed(2)} MB\n                        </p>\n                        <button\n                          type=\"button\"\n                          onClick={() => {\n                            setPdfFile(null);\n                            if (pdfPreviewUrl) {\n                              URL.revokeObjectURL(pdfPreviewUrl);\n                              setPdfPreviewUrl(null);\n                            }\n                            if (fileInputRef.current) {\n                              fileInputRef.current.value = '';\n                            }\n                          }}\n                          className=\"mt-2 text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300\"\n                        >\n                          Datei entfernen\n                        </button>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* PDF-Vorschau */}\n                {pdfPreviewUrl && (\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      PDF-Vorschau\n                    </label>\n                    <div className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n                      <iframe \n                        src={`${pdfPreviewUrl}#view=FitH`}\n                        className=\"w-full rounded border dark:border-gray-600\"\n                        style={{ height: '400px' }}\n                        title=\"PDF-Vorschau\"\n                      />\n                    </div>\n                  </div>\n                )}\n\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n              title=\"Abbrechen\"\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleSubmit}\n              disabled={loading || (!pdfFile && !useTemplate) || !startDate}\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n              title={loading ? 'Wird erstellt...' : 'Erstellen'}\n            >\n              {loading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <CheckIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n        </Dialog.Panel>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default ContractCreationModal;\n\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, DocumentTextIcon, CalendarIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface Certificate {\n  id: number;\n  certificateType: string;\n  issueDate: string;\n  templateUsed: string | null;\n  templateVersion: string | null;\n  isLatest: boolean;\n}\n\ninterface CertificateEditModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onCertificateUpdated: () => void;\n  userId: number;\n  certificate: Certificate;\n}\n\nconst CertificateEditModal: React.FC<CertificateEditModalProps> = ({\n  isOpen,\n  onClose,\n  onCertificateUpdated,\n  userId,\n  certificate\n}) => {\n  const { t } = useTranslation();\n  const { isHR, isAdmin, loading: permissionsLoading } = usePermissions();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  \n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Form-Daten\n  const [issueDate, setIssueDate] = useState(\n    certificate.issueDate ? new Date(certificate.issueDate).toISOString().split('T')[0] : new Date().toISOString().split('T')[0]\n  );\n  const [certificateType, setCertificateType] = useState(certificate.certificateType || 'employment');\n  const [pdfFile, setPdfFile] = useState<File | null>(null);\n  const [pdfPreviewUrl, setPdfPreviewUrl] = useState<string | null>(null);\n  const [existingPdfUrl, setExistingPdfUrl] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Prfe Berechtigung (nur wenn Berechtigungen geladen sind)\n  useEffect(() => {\n    if (permissionsLoading) {\n      return; // Warte bis Berechtigungen geladen sind\n    }\n    \n    if (!isHR() && !isAdmin()) {\n      showMessage('Nur HR oder Admin knnen Arbeitszeugnisse bearbeiten', 'error');\n      onClose();\n    }\n  }, [isHR, isAdmin, permissionsLoading, onClose, showMessage]);\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n      // Lade bestehende PDF-URL wenn vorhanden\n      if (certificate.id) {\n        setExistingPdfUrl(API_ENDPOINTS.LIFECYCLE.CERTIFICATE_DOWNLOAD(userId, certificate.id));\n      }\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane, certificate.id, userId]);\n\n  // Cleanup: Revoke Object URL beim Unmount oder wenn Datei entfernt wird\n  useEffect(() => {\n    return () => {\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n      }\n    };\n  }, [pdfPreviewUrl]);\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        showMessage('Nur PDF-Dateien sind erlaubt', 'error');\n        return;\n      }\n      if (file.size > 10 * 1024 * 1024) {\n        showMessage('Datei ist zu gro (max. 10MB)', 'error');\n        return;\n      }\n      setPdfFile(file);\n      // Erstelle Preview-URL fr neue Datei\n      const url = URL.createObjectURL(file);\n      setPdfPreviewUrl(url);\n      setExistingPdfUrl(null); // Verstecke bestehende PDF wenn neue hochgeladen wird\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const updateData: any = {\n        issueDate: new Date(issueDate),\n        certificateType\n      };\n\n      // Nur pdfPath aktualisieren, wenn neue Datei hochgeladen wurde\n      if (pdfFile) {\n        updateData.pdfPath = `temp-${Date.now()}-${pdfFile.name}`;\n        updateData.templateVersion = certificate.templateVersion || '1.0';\n      }\n\n      await axiosInstance.put(\n        API_ENDPOINTS.LIFECYCLE.CERTIFICATE(userId, certificate.id),\n        updateData\n      );\n\n      showMessage('Arbeitszeugnis erfolgreich aktualisiert', 'success');\n      onCertificateUpdated();\n      onClose();\n      \n      // Reset form\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n        setPdfPreviewUrl(null);\n      }\n      setPdfFile(null);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Aktualisieren des Arbeitszeugnisses:', err);\n      setError(err.response?.data?.message || 'Fehler beim Aktualisieren des Arbeitszeugnisses');\n      showMessage('Fehler beim Aktualisieren des Arbeitszeugnisses', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isHR() && !isAdmin()) {\n    return null;\n  }\n\n  return (\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n      {(!isLargeScreen || isMobile) && (\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n      )}\n\n      <div className=\"fixed inset-0 flex items-start justify-end p-0 sm:p-0\">\n        <Dialog.Panel\n          className={`\n            ${isMobile ? 'w-full h-full' : isLargeScreen ? 'w-[600px]' : 'w-[600px]'}\n            ${isMobile ? '' : 'top-16'}\n            bg-white dark:bg-gray-800 shadow-xl\n            transform transition-transform duration-350 ease-out\n            ${isMobile ? 'rounded-none' : 'rounded-l-lg'}\n            flex flex-col\n            max-h-[calc(100vh-4rem)]\n            ${isMobile ? '' : 'sidepane-panel-container'}\n          `}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <div className=\"flex items-center space-x-3\">\n              <DocumentTextIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n              <Dialog.Title className=\"text-xl font-semibold dark:text-white\">\n                Arbeitszeugnis bearbeiten\n              </Dialog.Title>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-6\">\n            {error && (\n              <div className=\"mb-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\n                <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n              </div>\n            )}\n\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Ausstellungsdatum\n                </label>\n                <input\n                  type=\"date\"\n                  value={issueDate}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setIssueDate(value);\n                    // Validierung: Datum darf nicht in der Zukunft liegen\n                    if (value && new Date(value) > new Date()) {\n                      setError('Ausstellungsdatum darf nicht in der Zukunft liegen');\n                    } else {\n                      setError(null); // Clear error when valid\n                    }\n                  }}\n                  max={new Date().toISOString().split('T')[0]}\n                  className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                    error && issueDate && new Date(issueDate) > new Date()\n                      ? 'border-red-500 dark:border-red-500' \n                      : 'border-gray-300 dark:border-gray-600'\n                  }`}\n                  aria-invalid={issueDate && new Date(issueDate) > new Date() ? true : undefined}\n                  aria-describedby={issueDate && new Date(issueDate) > new Date() ? \"issueDate-error\" : undefined}\n                />\n                {error && issueDate && new Date(issueDate) > new Date() && (\n                  <p id=\"issueDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                    {error}\n                  </p>\n                )}\n                {!error && (\n                  <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                    Das Datum darf nicht in der Zukunft liegen\n                  </p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Zertifikat-Typ\n                </label>\n                <select\n                  value={certificateType}\n                  onChange={(e) => setCertificateType(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                >\n                  <option value=\"employment\">Arbeitszeugnis</option>\n                  <option value=\"salary\">Gehaltsbescheinigung</option>\n                  <option value=\"work_experience\">Arbeitsbescheinigung</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  PDF-Datei aktualisieren (optional)\n                </label>\n                <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center\">\n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\".pdf\"\n                    onChange={handleFileSelect}\n                    className=\"hidden\"\n                  />\n                  {!pdfFile ? (\n                    <div>\n                      <DocumentTextIcon className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n                      <button\n                        type=\"button\"\n                        onClick={() => fileInputRef.current?.click()}\n                        className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium\"\n                      >\n                        Neue PDF-Datei auswhlen\n                      </button>\n                      <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n                        oder Datei hierher ziehen\n                      </p>\n                      <p className=\"mt-1 text-xs text-gray-400 dark:text-gray-500\">\n                        Max. 10MB\n                      </p>\n                    </div>\n                  ) : (\n                    <div>\n                      <DocumentTextIcon className=\"mx-auto h-12 w-12 text-green-500 mb-4\" />\n                      <p className=\"text-sm font-medium dark:text-white\">{pdfFile.name}</p>\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                        {(pdfFile.size / 1024 / 1024).toFixed(2)} MB\n                      </p>\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          setPdfFile(null);\n                          if (pdfPreviewUrl) {\n                            URL.revokeObjectURL(pdfPreviewUrl);\n                            setPdfPreviewUrl(null);\n                          }\n                          setExistingPdfUrl(API_ENDPOINTS.LIFECYCLE.CERTIFICATE_DOWNLOAD(userId, certificate.id));\n                          if (fileInputRef.current) {\n                            fileInputRef.current.value = '';\n                          }\n                        }}\n                        className=\"mt-2 text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300\"\n                      >\n                        Datei entfernen\n                      </button>\n                    </div>\n                  )}\n                </div>\n\n                {/* PDF-Vorschau */}\n                {(pdfPreviewUrl || existingPdfUrl) && (\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      PDF-Vorschau\n                    </label>\n                    <div className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n                      <iframe \n                        src={`${pdfPreviewUrl || existingPdfUrl}${pdfPreviewUrl ? '#view=FitH' : '?preview=true#view=FitH'}`}\n                        className=\"w-full rounded border dark:border-gray-600\"\n                        style={{ height: '400px' }}\n                        title=\"PDF-Vorschau\"\n                      />\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4\">\n                <p className=\"text-sm text-yellow-700 dark:text-yellow-300\">\n                  <strong>Hinweis:</strong> Wenn Sie eine neue PDF-Datei hochladen, wird die alte Version ersetzt.\n                  Eine neue Version wird erstellt (isLatest = true).\n                </p>\n              </div>\n            </form>\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n              title=\"Abbrechen\"\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleSubmit}\n              disabled={loading}\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n              title={loading ? 'Wird aktualisiert...' : 'Aktualisieren'}\n            >\n              {loading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <CheckIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n        </Dialog.Panel>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default CertificateEditModal;\n\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, DocumentTextIcon, CalendarIcon, CurrencyDollarIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface Contract {\n  id: number;\n  contractType: string;\n  startDate: string;\n  endDate: string | null;\n  salary: number | null;\n  workingHours: number | null;\n  position: string | null;\n  templateUsed: string | null;\n  templateVersion: string | null;\n  isLatest: boolean;\n}\n\ninterface ContractEditModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onContractUpdated: () => void;\n  userId: number;\n  contract: Contract;\n}\n\nconst ContractEditModal: React.FC<ContractEditModalProps> = ({\n  isOpen,\n  onClose,\n  onContractUpdated,\n  userId,\n  contract\n}) => {\n  const { t } = useTranslation();\n  const { isHR, isAdmin, loading: permissionsLoading } = usePermissions();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  \n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Form-Daten\n  const [contractType, setContractType] = useState(contract.contractType || 'employment');\n  const [startDate, setStartDate] = useState(\n    contract.startDate ? new Date(contract.startDate).toISOString().split('T')[0] : new Date().toISOString().split('T')[0]\n  );\n  const [endDate, setEndDate] = useState(\n    contract.endDate ? new Date(contract.endDate).toISOString().split('T')[0] : ''\n  );\n  const [salary, setSalary] = useState(contract.salary ? contract.salary.toString() : '');\n  const [workingHours, setWorkingHours] = useState(contract.workingHours ? contract.workingHours.toString() : '');\n  const [position, setPosition] = useState(contract.position || '');\n  const [pdfFile, setPdfFile] = useState<File | null>(null);\n  const [pdfPreviewUrl, setPdfPreviewUrl] = useState<string | null>(null);\n  const [existingPdfUrl, setExistingPdfUrl] = useState<string | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Prfe Berechtigung (nur wenn Berechtigungen geladen sind)\n  useEffect(() => {\n    if (permissionsLoading) {\n      return; // Warte bis Berechtigungen geladen sind\n    }\n    \n    if (!isHR() && !isAdmin()) {\n      showMessage('Nur HR oder Admin knnen Arbeitsvertrge bearbeiten', 'error');\n      onClose();\n    }\n  }, [isHR, isAdmin, permissionsLoading, onClose, showMessage]);\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n      // Lade bestehende PDF-URL wenn vorhanden\n      if (contract.id) {\n        setExistingPdfUrl(API_ENDPOINTS.LIFECYCLE.CONTRACT_DOWNLOAD(userId, contract.id));\n      }\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane, contract.id, userId]);\n\n  // Cleanup: Revoke Object URL beim Unmount oder wenn Datei entfernt wird\n  useEffect(() => {\n    return () => {\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n      }\n    };\n  }, [pdfPreviewUrl]);\n\n  const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      if (file.type !== 'application/pdf') {\n        showMessage('Nur PDF-Dateien sind erlaubt', 'error');\n        return;\n      }\n      if (file.size > 10 * 1024 * 1024) {\n        showMessage('Datei ist zu gro (max. 10MB)', 'error');\n        return;\n      }\n      setPdfFile(file);\n      // Erstelle Preview-URL fr neue Datei\n      const url = URL.createObjectURL(file);\n      setPdfPreviewUrl(url);\n      setExistingPdfUrl(null); // Verstecke bestehende PDF wenn neue hochgeladen wird\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!startDate) {\n      showMessage('Bitte geben Sie ein Startdatum an', 'error');\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const updateData: any = {\n        contractType,\n        startDate: new Date(startDate),\n        endDate: endDate ? new Date(endDate) : null,\n        salary: salary ? parseFloat(salary) : null,\n        workingHours: workingHours ? parseFloat(workingHours) : null,\n        position: position || null\n      };\n\n      // Nur pdfPath aktualisieren, wenn neue Datei hochgeladen wurde\n      if (pdfFile) {\n        updateData.pdfPath = `temp-${Date.now()}-${pdfFile.name}`;\n        updateData.templateVersion = contract.templateVersion || '1.0';\n      }\n\n      await axiosInstance.put(\n        API_ENDPOINTS.LIFECYCLE.CONTRACT(userId, contract.id),\n        updateData\n      );\n\n      showMessage('Arbeitsvertrag erfolgreich aktualisiert', 'success');\n      onContractUpdated();\n      onClose();\n      \n      // Reset form\n      if (pdfPreviewUrl) {\n        URL.revokeObjectURL(pdfPreviewUrl);\n        setPdfPreviewUrl(null);\n      }\n      setPdfFile(null);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Aktualisieren des Arbeitsvertrags:', err);\n      setError(err.response?.data?.message || 'Fehler beim Aktualisieren des Arbeitsvertrags');\n      showMessage('Fehler beim Aktualisieren des Arbeitsvertrags', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!isHR() && !isAdmin()) {\n    return null;\n  }\n\n  return (\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n      {(!isLargeScreen || isMobile) && (\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n      )}\n\n      <div className=\"fixed inset-0 flex items-start justify-end p-0 sm:p-0\">\n        <Dialog.Panel\n          className={`\n            ${isMobile ? 'w-full h-full' : isLargeScreen ? 'w-[600px]' : 'w-[600px]'}\n            ${isMobile ? '' : 'top-16'}\n            bg-white dark:bg-gray-800 shadow-xl\n            transform transition-transform duration-350 ease-out\n            ${isMobile ? 'rounded-none' : 'rounded-l-lg'}\n            flex flex-col\n            max-h-[calc(100vh-4rem)]\n            ${isMobile ? '' : 'sidepane-panel-container'}\n          `}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <div className=\"flex items-center space-x-3\">\n              <DocumentTextIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n              <Dialog.Title className=\"text-xl font-semibold dark:text-white\">\n                Arbeitsvertrag bearbeiten\n              </Dialog.Title>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n            >\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto p-6\">\n            {error && (\n              <div className=\"mb-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\n                <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n              </div>\n            )}\n\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Vertragstyp <span className=\"text-red-500\">*</span>\n                </label>\n                <select\n                  value={contractType}\n                  onChange={(e) => setContractType(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                >\n                  <option value=\"employment\">Arbeitsvertrag</option>\n                  <option value=\"amendment\">Vertragsnderung</option>\n                  <option value=\"extension\">Vertragsverlngerung</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Startdatum <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"date\"\n                  value={startDate}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setStartDate(value);\n                    // Wenn Enddatum gesetzt ist, prfe ob es nach Startdatum liegt\n                    if (endDate && value && new Date(endDate) < new Date(value)) {\n                      setError('Enddatum muss nach dem Startdatum liegen');\n                    } else {\n                      setError(null); // Clear error when valid\n                    }\n                  }}\n                  className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                    error && !startDate \n                      ? 'border-red-500 dark:border-red-500' \n                      : 'border-gray-300 dark:border-gray-600'\n                  }`}\n                  required\n                  aria-invalid={!startDate ? true : undefined}\n                  aria-describedby={!startDate ? \"startDate-error\" : undefined}\n                />\n                {error && !startDate && (\n                  <p id=\"startDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                    {error}\n                  </p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Enddatum (optional)\n                </label>\n                <input\n                  type=\"date\"\n                  value={endDate}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setEndDate(value);\n                    // Wenn Enddatum gesetzt wird, prfe ob es nach Startdatum liegt\n                    if (value && startDate && new Date(value) < new Date(startDate)) {\n                      setError('Enddatum muss nach dem Startdatum liegen');\n                    } else {\n                      setError(null); // Clear error when valid\n                    }\n                  }}\n                  min={startDate || undefined}\n                  className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                    error && endDate && startDate && new Date(endDate) < new Date(startDate)\n                      ? 'border-red-500 dark:border-red-500' \n                      : 'border-gray-300 dark:border-gray-600'\n                  }`}\n                  aria-invalid={endDate && startDate && new Date(endDate) < new Date(startDate) ? true : undefined}\n                  aria-describedby={endDate && startDate && new Date(endDate) < new Date(startDate) ? \"endDate-error\" : undefined}\n                />\n                {error && endDate && startDate && new Date(endDate) < new Date(startDate) && (\n                  <p id=\"endDate-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                    {error}\n                  </p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Position\n                </label>\n                <input\n                  type=\"text\"\n                  value={position}\n                  onChange={(e) => setPosition(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  placeholder=\"z.B. Frontend-Entwickler\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Gehalt (optional)\n                </label>\n                <div className=\"relative\">\n                  <CurrencyDollarIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n                  <input\n                    type=\"number\"\n                    value={salary}\n                    onChange={(e) => {\n                      const value = e.target.value;\n                      setSalary(value);\n                      // Validierung: Gehalt darf nicht negativ sein\n                      if (value && parseFloat(value) < 0) {\n                        setError('Gehalt darf nicht negativ sein');\n                      } else {\n                        setError(null); // Clear error when valid\n                      }\n                    }}\n                    className={`w-full pl-10 pr-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                      error && salary && parseFloat(salary) < 0\n                        ? 'border-red-500 dark:border-red-500' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                    placeholder=\"0.00\"\n                    step=\"0.01\"\n                    min=\"0\"\n                    aria-invalid={salary && parseFloat(salary) < 0 ? true : undefined}\n                    aria-describedby={salary && parseFloat(salary) < 0 ? \"salary-error\" : undefined}\n                  />\n                </div>\n                {error && salary && parseFloat(salary) < 0 && (\n                  <p id=\"salary-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                    {error}\n                  </p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Arbeitsstunden/Woche (optional)\n                </label>\n                <input\n                  type=\"number\"\n                  value={workingHours}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setWorkingHours(value);\n                    // Validierung: Arbeitsstunden mssen zwischen 0 und 168 liegen\n                    if (value && (parseFloat(value) < 0 || parseFloat(value) > 168)) {\n                      setError('Arbeitsstunden mssen zwischen 0 und 168 liegen');\n                    } else {\n                      setError(null); // Clear error when valid\n                    }\n                  }}\n                  className={`w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n                    error && workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168)\n                      ? 'border-red-500 dark:border-red-500' \n                      : 'border-gray-300 dark:border-gray-600'\n                  }`}\n                  placeholder=\"40\"\n                  step=\"0.1\"\n                  min=\"0\"\n                  max=\"168\"\n                  aria-invalid={workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) ? true : undefined}\n                  aria-describedby={workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) ? \"workingHours-error\" : undefined}\n                />\n                {error && workingHours && (parseFloat(workingHours) < 0 || parseFloat(workingHours) > 168) && (\n                  <p id=\"workingHours-error\" className=\"mt-1 text-xs text-red-600 dark:text-red-400\">\n                    {error}\n                  </p>\n                )}\n                <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                  Maximal 168 Stunden pro Woche (24h  7 Tage)\n                </p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  PDF-Datei aktualisieren (optional)\n                </label>\n                <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-6 text-center\">\n                  <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\".pdf\"\n                    onChange={handleFileSelect}\n                    className=\"hidden\"\n                  />\n                  {!pdfFile ? (\n                    <div>\n                      <DocumentTextIcon className=\"mx-auto h-12 w-12 text-gray-400 mb-4\" />\n                      <button\n                        type=\"button\"\n                        onClick={() => fileInputRef.current?.click()}\n                        className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium\"\n                      >\n                        Neue PDF-Datei auswhlen\n                      </button>\n                      <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n                        oder Datei hierher ziehen\n                      </p>\n                      <p className=\"mt-1 text-xs text-gray-400 dark:text-gray-500\">\n                        Max. 10MB\n                      </p>\n                    </div>\n                  ) : (\n                    <div>\n                      <DocumentTextIcon className=\"mx-auto h-12 w-12 text-green-500 mb-4\" />\n                      <p className=\"text-sm font-medium dark:text-white\">{pdfFile.name}</p>\n                      <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                        {(pdfFile.size / 1024 / 1024).toFixed(2)} MB\n                      </p>\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          setPdfFile(null);\n                          if (pdfPreviewUrl) {\n                            URL.revokeObjectURL(pdfPreviewUrl);\n                            setPdfPreviewUrl(null);\n                          }\n                          setExistingPdfUrl(API_ENDPOINTS.LIFECYCLE.CONTRACT_DOWNLOAD(userId, contract.id));\n                          if (fileInputRef.current) {\n                            fileInputRef.current.value = '';\n                          }\n                        }}\n                        className=\"mt-2 text-sm text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300\"\n                      >\n                        Datei entfernen\n                      </button>\n                    </div>\n                  )}\n                </div>\n\n                {/* PDF-Vorschau */}\n                {(pdfPreviewUrl || existingPdfUrl) && (\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      PDF-Vorschau\n                    </label>\n                    <div className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n                      <iframe \n                        src={`${pdfPreviewUrl || existingPdfUrl}${pdfPreviewUrl ? '#view=FitH' : '?preview=true#view=FitH'}`}\n                        className=\"w-full rounded border dark:border-gray-600\"\n                        style={{ height: '400px' }}\n                        title=\"PDF-Vorschau\"\n                      />\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-400 p-4\">\n                <p className=\"text-sm text-yellow-700 dark:text-yellow-300\">\n                  <strong>Hinweis:</strong> Wenn Sie eine neue PDF-Datei hochladen, wird die alte Version ersetzt.\n                  Eine neue Version wird erstellt (isLatest = true).\n                </p>\n              </div>\n            </form>\n          </div>\n\n          {/* Footer */}\n          <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700 flex-shrink-0\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n              title=\"Abbrechen\"\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleSubmit}\n              disabled={loading || !startDate}\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n              title={loading ? 'Wird aktualisiert...' : 'Aktualisieren'}\n            >\n              {loading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <CheckIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n        </Dialog.Panel>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default ContractEditModal;\n\n","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport {\n  CheckCircleIcon,\n  ClockIcon,\n  XCircleIcon,\n  PencilIcon,\n  EnvelopeIcon,\n  DocumentTextIcon,\n  XMarkIcon,\n  ArrowPathIcon\n} from '@heroicons/react/24/outline';\n// Social Security Editor Component\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface SocialSecurityRegistration {\n  id: number;\n  registrationType: string;\n  registrationNumber: string | null;\n  provider: string | null;\n  registrationDate: string | null;\n  status: string;\n  notes: string | null;\n  completedAt: string | null;\n}\n\ninterface SocialSecurityEditorProps {\n  userId: number;\n  lifecycleId: number;\n  onUpdate?: () => void;\n}\n\ntype SocialSecurityType = 'arl' | 'eps' | 'pension' | 'caja';\n\nconst SocialSecurityEditor: React.FC<SocialSecurityEditorProps> = ({\n  userId,\n  lifecycleId,\n  onUpdate\n}) => {\n  const { t } = useTranslation();\n  const { isLegal, isAdmin, loading: permissionsLoading } = usePermissions();\n  const { showMessage } = useMessage();\n  \n  const [registrations, setRegistrations] = useState<Record<SocialSecurityType, SocialSecurityRegistration | null>>({\n    arl: null,\n    eps: null,\n    pension: null,\n    caja: null\n  });\n  const [loading, setLoading] = useState(true);\n  const [editingType, setEditingType] = useState<SocialSecurityType | null>(null);\n  const [formData, setFormData] = useState({\n    status: 'pending' as string,\n    registrationNumber: '',\n    provider: '',\n    registrationDate: '',\n    notes: ''\n  });\n  const [saving, setSaving] = useState(false);\n  const loadingRef = useRef(false);\n  const abortControllerRef = useRef<AbortController | null>(null);\n\n  // loadRegistrations auerhalb von useEffect definieren, damit es von handleSave aufgerufen werden kann\n  const loadRegistrations = useCallback(async () => {\n    // Erstelle neuen AbortController\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n    }\n    const abortController = new AbortController();\n    abortControllerRef.current = abortController;\n\n    loadingRef.current = true;\n    setLoading(true);\n    try {\n      const types: SocialSecurityType[] = ['arl', 'eps', 'pension', 'caja'];\n      const registrationPromises = types.map(async (type) => {\n        // Prfe ob Request abgebrochen wurde\n        if (abortController.signal.aborted) {\n          return { type, registration: null };\n        }\n\n        try {\n          const response = await axiosInstance.get(\n            API_ENDPOINTS.LIFECYCLE.SOCIAL_SECURITY(userId, type),\n            {\n              timeout: 5000, // 5 Sekunden Timeout\n              signal: abortController.signal\n            }\n          );\n          return { type, registration: response.data };\n        } catch (error: any) {\n          // Ignoriere Abort-Errors (AbortError oder CanceledError von Axios)\n          if (error.name === 'AbortError' || error.name === 'CanceledError' || abortController.signal.aborted) {\n            return { type, registration: null };\n          }\n          // Behandle 404 als \"nicht vorhanden\" (normal)\n          if (error.response?.status === 404) {\n            return { type, registration: null };\n          }\n          // Behandle Network Errors und Timeouts\n          if (error.code === 'ERR_NETWORK' || error.code === 'ECONNABORTED' || error.message?.includes('ERR_INSUFFICIENT_RESOURCES')) {\n            console.warn(`Network error loading ${type}, treating as not found`);\n            return { type, registration: null };\n          }\n          console.error(`Error loading ${type}:`, error);\n          return { type, registration: null };\n        }\n      });\n\n      const results = await Promise.all(registrationPromises);\n      \n      // Prfe erneut ob Request abgebrochen wurde\n      if (abortController.signal.aborted) {\n        return;\n      }\n\n      const newRegistrations: Record<SocialSecurityType, SocialSecurityRegistration | null> = {\n        arl: null,\n        eps: null,\n        pension: null,\n        caja: null\n      };\n\n      results.forEach(({ type, registration }) => {\n        if (registration) {\n          // Backend gibt zurck: { id, type, status, number, provider, registeredAt, notes, completedAt }\n          // Mappe auf Frontend-Format: { id, registrationType, registrationNumber, provider, registrationDate, status, notes, completedAt }\n          newRegistrations[type as SocialSecurityType] = {\n            id: registration.id || 0,\n            registrationType: type,\n            registrationNumber: registration.number || registration.registrationNumber || null,\n            provider: registration.provider || null,\n            registrationDate: registration.registeredAt || registration.registrationDate || null,\n            status: registration.status || 'pending',\n            notes: registration.notes || null,\n            completedAt: registration.completedAt || null\n          };\n        }\n      });\n\n      setRegistrations(newRegistrations);\n    } catch (error: any) {\n      // Ignoriere Abort-Errors (AbortError oder CanceledError von Axios)\n      if (error.name === 'AbortError' || error.name === 'CanceledError' || abortController.signal.aborted) {\n        return;\n      }\n      console.error('Error loading registrations:', error);\n      showMessage(t('socialSecurity.loadError'), 'error');\n    } finally {\n      // Setze loading immer auf false, auch bei Abbruch\n      setLoading(false);\n      loadingRef.current = false;\n    }\n  }, [userId, t, showMessage]);\n\n  useEffect(() => {\n    // Warte bis Berechtigungen geladen sind\n    if (permissionsLoading) {\n      return;\n    }\n    \n    // Prfe Berechtigung und lade nur einmal pro userId/lifecycleId\n    const hasPermission = isLegal() || isAdmin();\n    if (!hasPermission || !userId || !lifecycleId) {\n      setLoading(false);\n      return;\n    }\n\n    // Verhindere mehrfaches gleichzeitiges Laden\n    if (loadingRef.current) {\n      return;\n    }\n\n    loadRegistrations();\n\n    // Cleanup: Breche Request ab wenn Component unmountet oder Dependencies sich ndern\n    return () => {\n      if (abortControllerRef.current) {\n        abortControllerRef.current.abort();\n      }\n      loadingRef.current = false;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userId, lifecycleId, permissionsLoading]); // permissionsLoading als Dependency hinzugefgt\n\n  const handleEdit = (type: SocialSecurityType) => {\n    const registration = registrations[type];\n    if (registration) {\n      setFormData({\n        status: registration.status,\n        registrationNumber: registration.registrationNumber || '',\n        provider: registration.provider || '',\n        registrationDate: registration.registrationDate \n          ? new Date(registration.registrationDate).toISOString().split('T')[0]\n          : '',\n        notes: registration.notes || ''\n      });\n    } else {\n      setFormData({\n        status: 'pending',\n        registrationNumber: '',\n        provider: '',\n        registrationDate: '',\n        notes: ''\n      });\n    }\n    setEditingType(type);\n  };\n\n  const handleCancel = () => {\n    setEditingType(null);\n    setFormData({\n      status: 'pending',\n      registrationNumber: '',\n      provider: '',\n      registrationDate: '',\n      notes: ''\n    });\n  };\n\n  const handleSave = async () => {\n    if (!editingType) return;\n    \n    // Prfe Berechtigung nochmal vor dem Speichern\n    if (permissionsLoading) {\n      showMessage(t('common.loading', { defaultValue: 'Berechtigungen werden geladen...' }), 'warning');\n      return;\n    }\n    \n    if (!isLegal() && !isAdmin()) {\n      showMessage(t('lifecycle.noPermission', { defaultValue: 'Keine Berechtigung - nur Legal oder Admin' }), 'error');\n      return;\n    }\n\n    setSaving(true);\n    try {\n      await axiosInstance.put(\n        API_ENDPOINTS.LIFECYCLE.SOCIAL_SECURITY(userId, editingType),\n        {\n          status: formData.status,\n          number: formData.registrationNumber || undefined,\n          provider: formData.provider || undefined,\n          registrationDate: formData.registrationDate \n            ? new Date(formData.registrationDate).toISOString()\n            : undefined,\n          notes: formData.notes || undefined\n        }\n      );\n\n      showMessage('Sozialversicherung erfolgreich aktualisiert', 'success');\n      setEditingType(null);\n      \n      // Warte kurz, damit Backend die Daten aktualisiert hat\n      await new Promise(resolve => setTimeout(resolve, 200));\n      \n      // Lade Registrierungen neu nach Update\n      await loadRegistrations();\n      \n      // onUpdate nur aufrufen, wenn es eine Funktion ist (verhindert Re-Render-Loops)\n      if (onUpdate && typeof onUpdate === 'function') {\n        // Rufe onUpdate auf, um LifecycleView zu aktualisieren\n        onUpdate();\n      }\n    } catch (error: any) {\n      console.error('Error updating social security:', error);\n      showMessage(\n        error.response?.data?.message || t('socialSecurity.updateError'),\n        'error'\n      );\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'registered':\n        return <CheckCircleIcon className=\"h-5 w-5 text-green-500\" />;\n      case 'pending':\n        return <ClockIcon className=\"h-5 w-5 text-yellow-500\" />;\n      case 'failed':\n        return <XCircleIcon className=\"h-5 w-5 text-red-500\" />;\n      case 'not_required':\n        return <CheckCircleIcon className=\"h-5 w-5 text-gray-400\" />;\n      case 'deregistered':\n        return <XCircleIcon className=\"h-5 w-5 text-gray-400\" />;\n      default:\n        return <ClockIcon className=\"h-5 w-5 text-gray-400\" />;\n    }\n  };\n\n  const getStatusLabel = (status: string) => {\n    const labelKey = `lifecycle.socialSecurityStatus.${status}`;\n    return t(labelKey) || status;\n  };\n\n  const getTypeLabel = (type: SocialSecurityType) => {\n    const labels: Record<SocialSecurityType, string> = {\n      arl: 'ARL (Risiko-Arbeit)',\n      eps: 'EPS (Gesundheit)',\n      pension: 'Pension',\n      caja: 'Caja de Compensacin'\n    };\n    return labels[type];\n  };\n\n  // Warte bis Berechtigungen geladen sind\n  if (permissionsLoading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex justify-center items-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isLegal() && !isAdmin()) {\n    return null;\n  }\n\n  if (loading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex justify-center items-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  const types: SocialSecurityType[] = ['arl', 'eps', 'pension', 'caja'];\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-lg font-semibold dark:text-white flex items-center\">\n          <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n          {t('lifecycle.socialSecurity', { defaultValue: 'Sozialversicherungen' })}\n        </h3>\n      </div>\n\n      <div className=\"space-y-4\">\n        {types.map((type) => {\n          const registration = registrations[type];\n          const isEditing = editingType === type;\n\n          return (\n            <div\n              key={type}\n              className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\"\n            >\n              {!isEditing ? (\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex items-start space-x-3 flex-1\">\n                    {getStatusIcon(registration?.status || 'pending')}\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-2 mb-2\">\n                        <h4 className=\"font-medium dark:text-white uppercase\">\n                          {getTypeLabel(type)}\n                        </h4>\n                        <span className=\"text-sm font-medium dark:text-white\">\n                          {getStatusLabel(registration?.status || 'pending')}\n                        </span>\n                      </div>\n                      {registration && (\n                        <div className=\"space-y-1 text-sm text-gray-600 dark:text-gray-400\">\n                          {registration.provider && (\n                            <div>\n                              <span className=\"font-medium\">{t('socialSecurity.provider')}:</span> {registration.provider}\n                            </div>\n                          )}\n                          {registration.registrationNumber && (\n                            <div>\n                              <span className=\"font-medium\">{t('socialSecurity.number')}:</span> {registration.registrationNumber}\n                            </div>\n                          )}\n                          {registration.registrationDate && (\n                            <div>\n                              <span className=\"font-medium\">{t('socialSecurity.registrationDate')}:</span>{' '}\n                              {new Date(registration.registrationDate).toLocaleDateString('de-DE')}\n                            </div>\n                          )}\n                          {registration.notes && (\n                            <div className=\"mt-2\">\n                              <span className=\"font-medium\">{t('socialSecurity.notes')}:</span>\n                              <p className=\"text-gray-500 dark:text-gray-400 mt-1\">\n                                {registration.notes}\n                              </p>\n                            </div>\n                          )}\n                          {registration.completedAt && (\n                            <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n                              {t('socialSecurity.completedAt')}{' '}\n                              {new Date(registration.completedAt).toLocaleDateString('de-DE')}\n                            </div>\n                          )}\n                        </div>\n                      )}\n                      {!registration && (\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                          {t('socialSecurity.notRegistered')}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                  <button\n                    onClick={() => handleEdit(type)}\n                    className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition ml-4\"\n                    title={t('lifecycle.edit', { defaultValue: 'Bearbeiten' })}\n                  >\n                    <PencilIcon className=\"h-5 w-5\" />\n                  </button>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  <h4 className=\"font-medium dark:text-white uppercase mb-3\">\n                    {t('socialSecurity.editType', { type: getTypeLabel(type) })}\n                  </h4>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      {t('socialSecurity.status')} <span className=\"text-red-500\">*</span>\n                    </label>\n                    <select\n                      value={formData.status}\n                      onChange={(e) => setFormData({ ...formData, status: e.target.value })}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    >\n                      <option value=\"not_required\">Nicht erforderlich</option>\n                      <option value=\"pending\">Ausstehend</option>\n                      <option value=\"registered\">Registriert</option>\n                      <option value=\"failed\">Fehlgeschlagen</option>\n                      <option value=\"deregistered\">Abgemeldet</option>\n                    </select>\n                  </div>\n\n                  {formData.status === 'registered' && (\n                    <>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('socialSecurity.registrationNumber')}\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={formData.registrationNumber}\n                          onChange={(e) => setFormData({ ...formData, registrationNumber: e.target.value })}\n                          className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                          placeholder=\"z.B. 123456789\"\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('socialSecurity.provider')}\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={formData.provider}\n                          onChange={(e) => setFormData({ ...formData, provider: e.target.value })}\n                          className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                          placeholder=\"z.B. ARL Sura, EPS Sanitas\"\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('socialSecurity.registrationDate')}\n                        </label>\n                        <input\n                          type=\"date\"\n                          value={formData.registrationDate}\n                          onChange={(e) => setFormData({ ...formData, registrationDate: e.target.value })}\n                          className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                        />\n                      </div>\n                    </>\n                  )}\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      {t('socialSecurity.notes')}\n                    </label>\n                    <textarea\n                      value={formData.notes}\n                      onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                      rows={3}\n                      placeholder={t('socialSecurity.additionalInfo')}\n                    />\n                  </div>\n\n                  <div className=\"flex items-center justify-end space-x-3\">\n                    <button\n                      onClick={handleCancel}\n                      disabled={saving}\n                      className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed\"\n                      title={t('common.cancel')}\n                    >\n                      <XMarkIcon className=\"h-5 w-5\" />\n                    </button>\n                    <button\n                      onClick={handleSave}\n                      disabled={saving}\n                      className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                      title={saving ? t('common.saving') : t('common.save')}\n                    >\n                      {saving ? (\n                        <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                      ) : (\n                        <CheckCircleIcon className=\"h-5 w-5\" />\n                      )}\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default SocialSecurityEditor;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, ExclamationTriangleIcon, CalendarIcon, ArrowPathIcon, ArrowRightIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface OffboardingStartModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onOffboardingStarted: () => void;\n  userId: number;\n  userName: string;\n}\n\nconst OffboardingStartModal: React.FC<OffboardingStartModalProps> = ({\n  isOpen,\n  onClose,\n  onOffboardingStarted,\n  userId,\n  userName\n}) => {\n  const { t } = useTranslation();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  \n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Form-Daten\n  const [exitDate, setExitDate] = useState('');\n  const [exitReason, setExitReason] = useState('');\n  \n  // Validierung\n  const [validationErrors, setValidationErrors] = useState<{\n    exitDate?: string;\n    exitReason?: string;\n  }>({});\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n      // Setze Standard-Datum auf heute\n      const today = new Date().toISOString().split('T')[0];\n      setExitDate(today);\n      setExitReason('');\n      setError(null);\n      setValidationErrors({});\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  const validateForm = (): boolean => {\n    const errors: { exitDate?: string; exitReason?: string } = {};\n\n    // Validierung: exitDate\n    if (!exitDate) {\n      errors.exitDate = t('lifecycle.offboarding.exitDateRequired', { defaultValue: 'Austrittsdatum ist erforderlich' });\n    } else {\n      const selectedDate = new Date(exitDate);\n      const today = new Date();\n      today.setHours(0, 0, 0, 0);\n      \n      // exitDate darf in der Vergangenheit liegen (rckwirkende Erfassung erlaubt)\n      // Aber nicht zu weit in der Zukunft (max. 1 Jahr)\n      const maxDate = new Date();\n      maxDate.setFullYear(maxDate.getFullYear() + 1);\n      \n      if (selectedDate > maxDate) {\n        errors.exitDate = t('lifecycle.offboarding.exitDateTooFar', { defaultValue: 'Austrittsdatum darf nicht mehr als 1 Jahr in der Zukunft liegen' });\n      }\n    }\n\n    // Validierung: exitReason\n    if (!exitReason || exitReason.trim().length === 0) {\n      errors.exitReason = t('lifecycle.offboarding.exitReasonRequired', { defaultValue: 'Austrittsgrund ist erforderlich' });\n    } else if (exitReason.trim().length < 10) {\n      errors.exitReason = t('lifecycle.offboarding.exitReasonTooShort', { defaultValue: 'Austrittsgrund muss mindestens 10 Zeichen lang sein' });\n    }\n\n    setValidationErrors(errors);\n    return Object.keys(errors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      await axiosInstance.put(API_ENDPOINTS.LIFECYCLE.STATUS(userId), {\n        status: 'offboarding',\n        exitDate: exitDate,\n        exitReason: exitReason.trim()\n      });\n\n      showMessage(\n        t('lifecycle.offboarding.started', { defaultValue: 'Offboarding erfolgreich gestartet' }),\n        'success'\n      );\n      \n      onOffboardingStarted();\n      onClose();\n    } catch (err: any) {\n      console.error('Fehler beim Starten des Offboarding:', err);\n      const errorMessage = err.response?.data?.message || \n        t('lifecycle.offboarding.startError', { defaultValue: 'Fehler beim Starten des Offboarding' });\n      setError(errorMessage);\n      showMessage(errorMessage, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderForm = () => (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      {/* Warnung */}\n      <div className=\"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4\">\n        <div className=\"flex items-start\">\n          <ExclamationTriangleIcon className=\"h-5 w-5 text-orange-600 dark:text-orange-400 mt-0.5 mr-3 flex-shrink-0\" />\n          <div className=\"text-sm text-orange-800 dark:text-orange-200\">\n            <p className=\"font-medium mb-1\">\n              {t('lifecycle.offboarding.warningTitle', { defaultValue: 'Wichtiger Hinweis' })}\n            </p>\n            <p>\n              {t('lifecycle.offboarding.warningText', { defaultValue: 'Durch das Starten des Offboarding-Prozesses werden automatisch Tasks erstellt. Dieser Vorgang kann nicht rckgngig gemacht werden.' })}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* User-Info */}\n      <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4\">\n        <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">\n          {t('lifecycle.offboarding.user', { defaultValue: 'Mitarbeiter' })}\n        </p>\n        <p className=\"font-medium dark:text-white\">{userName}</p>\n      </div>\n\n      {/* exitDate */}\n      <div>\n        <label htmlFor=\"exitDate\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n          {t('lifecycle.offboarding.exitDate', { defaultValue: 'Austrittsdatum' })} *\n        </label>\n        <div className=\"relative\">\n          <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n            <CalendarIcon className=\"h-5 w-5 text-gray-400\" />\n          </div>\n          <input\n            type=\"date\"\n            id=\"exitDate\"\n            value={exitDate}\n            onChange={(e) => {\n              setExitDate(e.target.value);\n              if (validationErrors.exitDate) {\n                setValidationErrors(prev => ({ ...prev, exitDate: undefined }));\n              }\n            }}\n            className={`block w-full pl-10 pr-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n              validationErrors.exitDate\n                ? 'border-red-300 dark:border-red-600 focus:ring-red-500 focus:border-red-500'\n                : 'border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500'\n            }`}\n            required\n          />\n        </div>\n        {validationErrors.exitDate && (\n          <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{validationErrors.exitDate}</p>\n        )}\n        <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n          {t('lifecycle.offboarding.exitDateHint', { defaultValue: 'Das Datum, an dem der Mitarbeiter die Organisation verlsst' })}\n        </p>\n      </div>\n\n      {/* exitReason */}\n      <div>\n        <label htmlFor=\"exitReason\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n          {t('lifecycle.offboarding.exitReason', { defaultValue: 'Austrittsgrund' })} *\n        </label>\n        <textarea\n          id=\"exitReason\"\n          value={exitReason}\n          onChange={(e) => {\n            setExitReason(e.target.value);\n            if (validationErrors.exitReason) {\n              setValidationErrors(prev => ({ ...prev, exitReason: undefined }));\n            }\n          }}\n          rows={4}\n          className={`block w-full px-3 py-2 border rounded-md dark:bg-gray-700 dark:text-white ${\n            validationErrors.exitReason\n              ? 'border-red-300 dark:border-red-600 focus:ring-red-500 focus:border-red-500'\n              : 'border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500'\n          }`}\n          placeholder={t('lifecycle.offboarding.exitReasonPlaceholder', { defaultValue: 'z.B. Kndigung, Vertragsende, etc.' })}\n          required\n        />\n        {validationErrors.exitReason && (\n          <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{validationErrors.exitReason}</p>\n        )}\n        <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n          {t('lifecycle.offboarding.exitReasonHint', { defaultValue: 'Mindestens 10 Zeichen. Beschreiben Sie den Grund fr den Austritt.' })}\n        </p>\n      </div>\n\n      {/* Error-Message */}\n      {error && (\n        <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3\">\n          <p className=\"text-sm text-red-800 dark:text-red-200\">{error}</p>\n        </div>\n      )}\n\n      {/* Buttons */}\n      <div className=\"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n        <button\n          type=\"button\"\n          onClick={onClose}\n          disabled={loading}\n          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed\"\n          title={t('common.cancel', { defaultValue: 'Abbrechen' })}\n        >\n          <XMarkIcon className=\"h-5 w-5\" />\n        </button>\n        <button\n          type=\"submit\"\n          disabled={loading}\n          className=\"p-2 bg-orange-600 dark:bg-orange-700 text-white rounded-md hover:bg-orange-700 dark:hover:bg-orange-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed\"\n          title={loading ? t('common.saving', { defaultValue: 'Speichern...' }) : t('lifecycle.offboarding.startButton', { defaultValue: 'Offboarding starten' })}\n        >\n          {loading ? (\n            <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n          ) : (\n            <ArrowRightIcon className=\"h-5 w-5\" />\n          )}\n        </button>\n      </div>\n    </form>\n  );\n\n  if (!isOpen) return null;\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('lifecycle.offboarding.startTitle', { defaultValue: 'Offboarding starten' })}\n              </Dialog.Title>\n              <button\n                onClick={onClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <div className=\"p-4\">\n              {renderForm()}\n            </div>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={onClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('lifecycle.offboarding.startTitle', { defaultValue: 'Offboarding starten' })}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {renderForm()}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default OffboardingStartModal;\n\n","import React, { useState, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Dialog } from '@headlessui/react';\r\nimport { XMarkIcon, ExclamationTriangleIcon, CheckCircleIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\r\nimport axiosInstance from '../config/axios.ts';\r\nimport { API_ENDPOINTS } from '../config/api.ts';\r\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\r\nimport useMessage from '../hooks/useMessage.ts';\r\n\r\ninterface Task {\r\n  id: number;\r\n  title: string;\r\n  description: string | null;\r\n  status: string;\r\n  dueDate: string | null;\r\n  createdAt: string;\r\n}\r\n\r\ninterface OffboardingCompleteModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onOffboardingCompleted: () => void;\r\n  userId: number;\r\n  userName: string;\r\n  offboardingTasks: Task[];\r\n}\r\n\r\nconst OffboardingCompleteModal: React.FC<OffboardingCompleteModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onOffboardingCompleted,\r\n  userId,\r\n  userName,\r\n  offboardingTasks\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const { openSidepane, closeSidepane } = useSidepane();\r\n  const { showMessage } = useMessage();\r\n  \r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\r\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [confirmText, setConfirmText] = useState('');\r\n  \r\n  // Prfe, ob alle Tasks abgeschlossen sind\r\n  const completedTasks = offboardingTasks.filter(task => task.status === 'done');\r\n  const allTasksCompleted = offboardingTasks.length > 0 && completedTasks.length === offboardingTasks.length;\r\n  const requiredConfirmText = userName.trim().toLowerCase();\r\n  \r\n  // Responsive Erkennung\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setIsMobile(window.innerWidth < 640);\r\n      setIsLargeScreen(window.innerWidth > 1070);\r\n    };\r\n    \r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n  \r\n  // Sidepane-Status verwalten\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      openSidepane();\r\n      // Reset form on open\r\n      setConfirmText('');\r\n      setError(null);\r\n    } else {\r\n      closeSidepane();\r\n    }\r\n    \r\n    return () => {\r\n      closeSidepane();\r\n    };\r\n  }, [isOpen, openSidepane, closeSidepane]);\r\n  \r\n  const validateForm = () => {\r\n    if (confirmText.trim().toLowerCase() !== requiredConfirmText) {\r\n      setError(t('lifecycle.offboarding.complete.confirmTextMismatch', { defaultValue: 'Besttigungstext stimmt nicht berein' }));\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n  \r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      await axiosInstance.put(API_ENDPOINTS.LIFECYCLE.STATUS(userId), {\r\n        status: 'archived'\r\n      });\r\n      \r\n      showMessage(\r\n        t('lifecycle.offboarding.complete.success', { defaultValue: 'Offboarding erfolgreich abgeschlossen' }),\r\n        'success'\r\n      );\r\n      \r\n      onOffboardingCompleted();\r\n      onClose();\r\n    } catch (err: any) {\r\n      console.error('Fehler beim Abschlieen des Offboarding:', err);\r\n      const errorMessage = err.response?.data?.message || \r\n        t('lifecycle.offboarding.complete.error', { defaultValue: 'Fehler beim Abschlieen des Offboarding' });\r\n      setError(errorMessage);\r\n      showMessage(errorMessage, 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  const renderForm = () => (\r\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n      {/* User Info */}\r\n      <div className=\"bg-gray-50 dark:bg-gray-700 p-3 rounded-md flex items-center space-x-3\">\r\n        <CheckCircleIcon className=\"h-5 w-5 text-gray-500 dark:text-gray-400\" />\r\n        <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n          {t('lifecycle.offboarding.complete.user', { defaultValue: 'Mitarbeiter' })}: {userName}\r\n        </span>\r\n      </div>\r\n      \r\n      {/* Tasks Status */}\r\n      {offboardingTasks.length > 0 && (\r\n        <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-md\">\r\n          <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            {t('lifecycle.offboarding.complete.tasksStatus', { defaultValue: 'Status der Offboarding-Aufgaben' })}\r\n          </h4>\r\n          <div className=\"space-y-2\">\r\n            {offboardingTasks.map((task) => {\r\n                  const isCompleted = task.status === 'done';\r\n              return (\r\n                <div\r\n                  key={task.id}\r\n                  className={`flex items-center space-x-2 text-sm ${\r\n                    isCompleted\r\n                      ? 'text-green-700 dark:text-green-300'\r\n                      : 'text-orange-700 dark:text-orange-300'\r\n                  }`}\r\n                >\r\n                  {isCompleted ? (\r\n                    <CheckCircleIcon className=\"h-4 w-4 flex-shrink-0\" />\r\n                  ) : (\r\n                    <ExclamationTriangleIcon className=\"h-4 w-4 flex-shrink-0\" />\r\n                  )}\r\n                  <span>{task.title}</span>\r\n                  <span className=\"ml-auto text-xs\">\r\n                    {isCompleted\r\n                      ? `(${t('common.done', { defaultValue: 'Abgeschlossen' })})`\r\n                      : `(${t('common.open', { defaultValue: 'Offen' })})`}\r\n                  </span>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Warning wenn nicht alle Tasks abgeschlossen */}\r\n      {!allTasksCompleted && offboardingTasks.length > 0 && (\r\n        <div className=\"bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-400 p-4\">\r\n          <div className=\"flex\">\r\n            <div className=\"flex-shrink-0\">\r\n              <ExclamationTriangleIcon className=\"h-5 w-5 text-orange-400\" aria-hidden=\"true\" />\r\n            </div>\r\n            <div className=\"ml-3\">\r\n              <h3 className=\"text-sm font-medium text-orange-800 dark:text-orange-300\">\r\n                {t('lifecycle.offboarding.complete.warningTitle', { defaultValue: 'Nicht alle Aufgaben abgeschlossen' })}\r\n              </h3>\r\n              <div className=\"mt-2 text-sm text-orange-700 dark:text-orange-200\">\r\n                <p>\r\n                  {t('lifecycle.offboarding.complete.warningText', { \r\n                    defaultValue: 'Es sind noch nicht alle Offboarding-Aufgaben abgeschlossen. Sie knnen das Offboarding trotzdem abschlieen, aber es wird empfohlen, alle Aufgaben zuerst zu erledigen.'\r\n                  })}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Info wenn alle Tasks abgeschlossen */}\r\n      {allTasksCompleted && (\r\n        <div className=\"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-400 p-4\">\r\n          <div className=\"flex\">\r\n            <div className=\"flex-shrink-0\">\r\n              <CheckCircleIcon className=\"h-5 w-5 text-green-400\" aria-hidden=\"true\" />\r\n            </div>\r\n            <div className=\"ml-3\">\r\n              <h3 className=\"text-sm font-medium text-green-800 dark:text-green-300\">\r\n                {t('lifecycle.offboarding.complete.allTasksCompleted', { defaultValue: 'Alle Aufgaben abgeschlossen' })}\r\n              </h3>\r\n              <div className=\"mt-2 text-sm text-green-700 dark:text-green-200\">\r\n                <p>\r\n                  {t('lifecycle.offboarding.complete.allTasksCompletedText', { \r\n                    defaultValue: 'Alle Offboarding-Aufgaben sind abgeschlossen. Sie knnen das Offboarding jetzt abschlieen.'\r\n                  })}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Confirm Text Input */}\r\n      <div>\r\n        <label htmlFor=\"confirmText\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n          {t('lifecycle.offboarding.complete.confirmLabel', { userName }) || \r\n            `Besttigen Sie durch Eingabe des Namens: \"${userName}\"`} *\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"confirmText\"\r\n          value={confirmText}\r\n          onChange={(e) => {\r\n            setConfirmText(e.target.value);\r\n            setError(null);\r\n          }}\r\n          className={`w-full px-3 py-2 border ${\r\n            error && error.includes('Besttigung') ? 'border-red-500' : 'border-gray-300'\r\n          } dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500`}\r\n          placeholder={userName}\r\n          required\r\n        />\r\n        <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\r\n          {t('lifecycle.offboarding.complete.confirmHint', { \r\n            defaultValue: 'Geben Sie den vollstndigen Namen des Mitarbeiters ein, um das Offboarding abzuschlieen'\r\n          })}\r\n        </p>\r\n      </div>\r\n      \r\n      {/* Final Warning */}\r\n      <div className=\"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\r\n        <div className=\"flex\">\r\n          <div className=\"flex-shrink-0\">\r\n            <ExclamationTriangleIcon className=\"h-5 w-5 text-red-400\" aria-hidden=\"true\" />\r\n          </div>\r\n          <div className=\"ml-3\">\r\n            <h3 className=\"text-sm font-medium text-red-800 dark:text-red-300\">\r\n              {t('lifecycle.offboarding.complete.finalWarningTitle', { defaultValue: 'Wichtiger Hinweis' })}\r\n            </h3>\r\n            <div className=\"mt-2 text-sm text-red-700 dark:text-red-200\">\r\n              <p>\r\n                {t('lifecycle.offboarding.complete.finalWarningText', { \r\n                  defaultValue: 'Durch das Abschlieen des Offboarding wird der Mitarbeiter archiviert. Dieser Vorgang kann nicht rckgngig gemacht werden.'\r\n                })}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Submit Button */}\r\n      <div className=\"flex justify-end space-x-3\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={onClose}\r\n          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          disabled={loading}\r\n          title={t('common.cancel', { defaultValue: 'Abbrechen' })}\r\n        >\r\n          <XMarkIcon className=\"h-5 w-5\" />\r\n        </button>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"p-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          disabled={loading || confirmText.trim().toLowerCase() !== requiredConfirmText}\r\n          title={loading ? t('common.saving', { defaultValue: 'Speichern...' }) : t('lifecycle.offboarding.complete.button', { defaultValue: 'Offboarding abschlieen' })}\r\n        >\r\n          {loading ? (\r\n            <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n          ) : (\r\n            <CheckCircleIcon className=\"h-5 w-5\" />\r\n          )}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n  \r\n  if (!isOpen) return null;\r\n  \r\n  // Fr Mobile (unter 640px) - klassisches Modal\r\n  if (isMobile) {\r\n    return (\r\n      <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\r\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\r\n        \r\n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n          <Dialog.Panel className=\"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\r\n            {/* Header */}\r\n            <div className=\"px-6 py-4 border-b dark:border-gray-700\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\r\n                  {t('lifecycle.offboarding.complete.title', { defaultValue: 'Offboarding abschlieen' })}\r\n                </Dialog.Title>\r\n                <button\r\n                  onClick={onClose}\r\n                  className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n                >\r\n                  <XMarkIcon className=\"h-6 w-6\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Form */}\r\n            <div className=\"p-6\">\r\n              {error && (\r\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\r\n                  {error}\r\n                </div>\r\n              )}\r\n              {renderForm()}\r\n            </div>\r\n          </Dialog.Panel>\r\n        </div>\r\n      </Dialog>\r\n    );\r\n  }\r\n  \r\n  // Fr Desktop (ab 640px) - Sidepane\r\n  return (\r\n    <>\r\n      {/* Backdrop - nur wenn offen und <= 1070px */}\r\n      {isOpen && !isLargeScreen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\"\r\n          aria-hidden=\"true\"\r\n          onClick={onClose}\r\n          style={{\r\n            opacity: isOpen ? 1 : 0,\r\n            transition: 'opacity 300ms ease-out'\r\n          }}\r\n        />\r\n      )}\r\n      \r\n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\r\n      <div\r\n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${\r\n          isOpen ? 'translate-x-0' : 'translate-x-full'\r\n        }`}\r\n        style={{\r\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\r\n          pointerEvents: isOpen ? 'auto' : 'none'\r\n        }}\r\n        aria-hidden={!isOpen}\r\n        role=\"dialog\"\r\n        aria-modal={isOpen}\r\n      >\r\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\r\n          <h2 className=\"text-lg font-semibold dark:text-white\">\r\n            {t('lifecycle.offboarding.complete.title', { defaultValue: 'Offboarding abschlieen' })}\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n          >\r\n            <XMarkIcon className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\r\n          {error && (\r\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\r\n              {error}\r\n            </div>\r\n          )}\r\n          {renderForm()}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OffboardingCompleteModal;\r\n\r\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { \n  CheckCircleIcon, \n  ClockIcon, \n  XCircleIcon,\n  DocumentTextIcon,\n  BuildingOfficeIcon,\n  PlusIcon,\n  PencilIcon,\n  ArrowDownTrayIcon,\n  CalendarIcon,\n  UserIcon,\n  ArrowRightIcon\n} from '@heroicons/react/24/outline';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport useMessage from '../hooks/useMessage.ts';\nimport CertificateCreationModal from './CertificateCreationModal.tsx';\nimport ContractCreationModal from './ContractCreationModal.tsx';\nimport CertificateEditModal from './CertificateEditModal.tsx';\nimport ContractEditModal from './ContractEditModal.tsx';\nimport SocialSecurityEditor from './SocialSecurityEditor.tsx';\nimport OffboardingStartModal from './OffboardingStartModal.tsx';\nimport OffboardingCompleteModal from './OffboardingCompleteModal.tsx';\n\ninterface LifecycleViewProps {\n  userId: number;\n  userName: string;\n}\n\ninterface LifecycleData {\n  lifecycle: {\n    id: number;\n    status: string;\n    onboardingStartedAt: string | null;\n    onboardingCompletedAt: string | null;\n    contractStartDate: string | null;\n    contractEndDate: string | null;\n    exitDate: string | null;\n    exitReason: string | null;\n    offboardingStartedAt: string | null;\n    offboardingCompletedAt: string | null;\n  };\n  progress: {\n    completed: number;\n    total: number;\n    percent: number;\n  };\n  socialSecurityRegistrations?: Array<{\n    id: number;\n    registrationType: string;\n    status: string;\n    registrationNumber: string | null;\n    provider: string | null;\n    registrationDate: string | null;\n  }>;\n}\n\ninterface Task {\n  id: number;\n  title: string;\n  description: string | null;\n  status: string;\n  dueDate: string | null;\n  createdAt: string;\n}\n\ninterface Certificate {\n  id: number;\n  certificateType: string;\n  issueDate: string;\n  templateUsed: string | null;\n  templateVersion: string | null;\n  isLatest: boolean;\n  generatedBy: number | null;\n  generatedByUser: {\n    id: number;\n    firstName: string;\n    lastName: string;\n  } | null;\n  createdAt: string;\n}\n\ninterface Contract {\n  id: number;\n  contractType: string;\n  startDate: string;\n  endDate: string | null;\n  salary: number | null;\n  workingHours: number | null;\n  position: string | null;\n  templateUsed: string | null;\n  templateVersion: string | null;\n  isLatest: boolean;\n  generatedBy: number | null;\n  generatedByUser: {\n    id: number;\n    firstName: string;\n    lastName: string;\n  } | null;\n  createdAt: string;\n}\n\nconst LifecycleView: React.FC<LifecycleViewProps> = ({ userId, userName }) => {\n  const { t } = useTranslation();\n  const { isHR, isAdmin } = usePermissions();\n  const { showMessage } = useMessage();\n  \n  const [lifecycleData, setLifecycleData] = useState<LifecycleData | null>(null);\n  const [certificates, setCertificates] = useState<Certificate[]>([]);\n  const [contracts, setContracts] = useState<Contract[]>([]);\n  const [offboardingTasks, setOffboardingTasks] = useState<Task[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Modal States\n  const [isCertificateCreateModalOpen, setIsCertificateCreateModalOpen] = useState(false);\n  const [isContractCreateModalOpen, setIsContractCreateModalOpen] = useState(false);\n  const [editingCertificate, setEditingCertificate] = useState<Certificate | null>(null);\n  const [editingContract, setEditingContract] = useState<Contract | null>(null);\n  \n  const [downloadingCertId, setDownloadingCertId] = useState<number | null>(null);\n  const [downloadingContractId, setDownloadingContractId] = useState<number | null>(null);\n  const [isOffboardingStartModalOpen, setIsOffboardingStartModalOpen] = useState(false);\n  const [isOffboardingCompleteModalOpen, setIsOffboardingCompleteModalOpen] = useState(false);\n  const [isEditContractDatesModalOpen, setIsEditContractDatesModalOpen] = useState(false);\n  const [editingContractStartDate, setEditingContractStartDate] = useState<string>('');\n  const [editingContractEndDate, setEditingContractEndDate] = useState<string>('');\n\n  const fetchDataRef = useRef(false);\n\n  const fetchData = useCallback(async (force: boolean = false) => {\n    // Verhindere mehrfaches gleichzeitiges Laden (auer wenn force=true)\n    if (fetchDataRef.current && !force) {\n      // Wenn bereits geladen wird, warte kurz und versuche es erneut\n      setTimeout(() => {\n        if (!fetchDataRef.current) {\n          fetchData(true);\n        }\n      }, 500);\n      return;\n    }\n    \n    try {\n      fetchDataRef.current = true;\n      setLoading(true);\n      const [lifecycleResponse, certsResponse, contractsResponse, tasksResponse] = await Promise.all([\n        axiosInstance.get(API_ENDPOINTS.LIFECYCLE.BY_USER(userId)),\n        axiosInstance.get(API_ENDPOINTS.LIFECYCLE.CERTIFICATES(userId)),\n        axiosInstance.get(API_ENDPOINTS.LIFECYCLE.CONTRACTS(userId)),\n        axiosInstance.get(API_ENDPOINTS.TASKS.BY_USER(userId)).catch(() => ({ data: [] })) // Optional, falls fehlschlgt\n      ]);\n      \n      setLifecycleData(lifecycleResponse.data);\n      setCertificates(certsResponse.data?.certificates || []);\n      setContracts(contractsResponse.data?.contracts || []);\n      \n      // Filtere Offboarding-Tasks (die 3 spezifischen Tasks)\n      const allTasks = tasksResponse.data || [];\n      const offboardingTaskTitles = [\n        'Crear certificado laboral',\n        'Realizar liquidacin final',\n        'Desafiliar de seguridad social'\n      ];\n      const filteredTasks = allTasks.filter((task: Task) => \n        offboardingTaskTitles.includes(task.title)\n      );\n      setOffboardingTasks(filteredTasks);\n      \n      // Prfe ob automatische Status-nderung ntig ist (wird im Backend gemacht, aber hier prfen wir fr UI-Feedback)\n      if (lifecycleResponse.data?.lifecycle?.status === 'onboarding' && lifecycleResponse.data?.progress?.percent === 100) {\n        // Status wird automatisch im Backend gendert, lade Daten nach kurzer Verzgerung neu\n        setTimeout(() => {\n          fetchData();\n        }, 1000);\n      }\n      \n      setError(null);\n    } catch (err: any) {\n      console.error('Fehler beim Laden der Lebenszyklus-Daten:', err);\n      setError(err.response?.data?.message || 'Fehler beim Laden der Daten');\n      showMessage('Fehler beim Laden der Daten', 'error');\n    } finally {\n      setLoading(false);\n      fetchDataRef.current = false;\n    }\n  }, [userId]); // showMessage entfernt, da es sich ndern kann\n\n  useEffect(() => {\n    fetchDataRef.current = false; // Reset beim userId-Wechsel\n    fetchData();\n  }, [fetchData]);\n\n  const handleDownloadCertificate = async (certId: number) => {\n    setDownloadingCertId(certId);\n    try {\n      const response = await axiosInstance.get(\n        API_ENDPOINTS.LIFECYCLE.CERTIFICATE_DOWNLOAD(userId, certId),\n        { responseType: 'blob' }\n      );\n      \n      const blob = new Blob([response.data], { type: 'application/pdf' });\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = `arbeitszeugnis-${certId}.pdf`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n      \n      showMessage('Arbeitszeugnis erfolgreich heruntergeladen', 'success');\n    } catch (err: any) {\n      console.error('Fehler beim Herunterladen:', err);\n      showMessage('Fehler beim Herunterladen des Arbeitszeugnisses', 'error');\n    } finally {\n      setDownloadingCertId(null);\n    }\n  };\n\n  const handleEditContractDates = () => {\n    if (!lifecycleData?.lifecycle) return;\n    \n    setEditingContractStartDate(\n      lifecycleData.lifecycle.contractStartDate \n        ? new Date(lifecycleData.lifecycle.contractStartDate).toISOString().split('T')[0]\n        : ''\n    );\n    setEditingContractEndDate(\n      lifecycleData.lifecycle.contractEndDate \n        ? new Date(lifecycleData.lifecycle.contractEndDate).toISOString().split('T')[0]\n        : ''\n    );\n    setIsEditContractDatesModalOpen(true);\n  };\n\n  const handleSaveContractDates = async () => {\n    try {\n      await axiosInstance.put(API_ENDPOINTS.LIFECYCLE.STATUS(userId), {\n        status: lifecycleData?.lifecycle.status || 'active',\n        contractStartDate: editingContractStartDate || null,\n        contractEndDate: editingContractEndDate || null\n      });\n      \n      showMessage('Vertragsdaten erfolgreich aktualisiert', 'success');\n      setIsEditContractDatesModalOpen(false);\n      fetchData();\n    } catch (err: any) {\n      console.error('Fehler beim Speichern der Vertragsdaten:', err);\n      showMessage('Fehler beim Speichern der Vertragsdaten', 'error');\n    }\n  };\n\n\n  const handleDownloadContract = async (contractId: number) => {\n    setDownloadingContractId(contractId);\n    try {\n      const response = await axiosInstance.get(\n        API_ENDPOINTS.LIFECYCLE.CONTRACT_DOWNLOAD(userId, contractId),\n        { responseType: 'blob' }\n      );\n      \n      const blob = new Blob([response.data], { type: 'application/pdf' });\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      link.download = `arbeitsvertrag-${contractId}.pdf`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n      \n      showMessage('Arbeitsvertrag erfolgreich heruntergeladen', 'success');\n    } catch (err: any) {\n      console.error('Fehler beim Herunterladen:', err);\n      showMessage('Fehler beim Herunterladen des Arbeitsvertrags', 'error');\n    } finally {\n      setDownloadingContractId(null);\n    }\n  };\n\n  const getStatusBadge = (status: string, clickable: boolean = false) => {\n    const statusConfig: Record<string, { color: string; labelKey: string }> = {\n      onboarding: { color: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300', labelKey: 'lifecycle.status.onboarding' },\n      active: { color: 'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300', labelKey: 'lifecycle.status.active' },\n      contract_change: { color: 'bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300', labelKey: 'lifecycle.status.contract_change' },\n      offboarding: { color: 'bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300', labelKey: 'lifecycle.status.offboarding' },\n      archived: { color: 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300', labelKey: 'lifecycle.status.archived' }\n    };\n\n    const config = statusConfig[status] || { color: 'bg-gray-100 text-gray-800', labelKey: status };\n    \n    return (\n      <span className={`px-3 py-1 rounded-full text-sm font-medium ${config.color} ${clickable ? 'cursor-pointer hover:opacity-80' : ''}`}>\n        {t(config.labelKey) || status}\n      </span>\n    );\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('de-DE', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex justify-center items-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400 p-4\">\n          <p className=\"text-sm text-red-700 dark:text-red-300\">{error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!lifecycleData) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <p className=\"text-gray-500 dark:text-gray-400\">{t('lifecycle.noData', { defaultValue: 'Keine Lebenszyklus-Daten verfgbar' })}</p>\n      </div>\n    );\n  }\n\n  // Extrahiere socialSecurityRegistrations aus lifecycle (falls direkt vorhanden) oder aus lifecycleData\n  const socialSecurityRegistrations = lifecycleData.lifecycle?.socialSecurityRegistrations || lifecycleData.socialSecurityRegistrations || [];\n  const { lifecycle, progress } = lifecycleData;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Status-Box */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold dark:text-white flex items-center\">\n            <BuildingOfficeIcon className=\"h-5 w-5 mr-2\" />\n            {t('lifecycle.statusTitle')}\n          </h3>\n          <div className=\"flex items-center space-x-3\">\n          {/* Status-Badge (nur Anzeige, keine nderung mglich) */}\n          {getStatusBadge(lifecycle.status)}\n            {/* Offboarding-Start-Button (nur fr HR/Admin, nur wenn Status = \"active\") */}\n            {(isHR() || isAdmin()) && lifecycle.status === 'active' && (\n              <div className=\"relative group\">\n                <button\n                  onClick={() => setIsOffboardingStartModalOpen(true)}\n                  className=\"p-2 bg-orange-600 dark:bg-orange-700 text-white rounded-md hover:bg-orange-700 dark:hover:bg-orange-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500\"\n                >\n                  <ArrowRightIcon className=\"h-5 w-5\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {t('lifecycle.offboarding.startButton', { defaultValue: 'Offboarding starten' })}\n                </div>\n              </div>\n            )}\n            {/* Offboarding-Abschluss-Button (nur fr HR/Admin, nur wenn Status = \"offboarding\") */}\n            {(isHR() || isAdmin()) && lifecycle.status === 'offboarding' && (\n              <div className=\"relative group\">\n                <button\n                  onClick={() => setIsOffboardingCompleteModalOpen(true)}\n                  className=\"p-2 bg-red-600 dark:bg-red-700 text-white rounded-md hover:bg-red-700 dark:hover:bg-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\n                >\n                  <CheckCircleIcon className=\"h-5 w-5\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {t('lifecycle.offboarding.complete.button', { defaultValue: 'Offboarding abschlieen' })}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"space-y-2 text-sm\">\n          {lifecycle.onboardingStartedAt && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.onboardingStarted')}</span>\n              <span className=\"dark:text-white\">\n                {new Date(lifecycle.onboardingStartedAt).toLocaleDateString('de-DE')}\n              </span>\n            </div>\n          )}\n          {lifecycle.onboardingCompletedAt && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.onboardingCompleted')}</span>\n              <span className=\"dark:text-white\">\n                {new Date(lifecycle.onboardingCompletedAt).toLocaleDateString('de-DE')}\n              </span>\n            </div>\n          )}\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.contractStart')}</span>\n            <div className=\"flex items-center space-x-2\">\n              {lifecycle.contractStartDate ? (\n                <span className=\"dark:text-white\">\n                  {new Date(lifecycle.contractStartDate).toLocaleDateString('de-DE')}\n                </span>\n              ) : (\n                <span className=\"text-gray-400 italic text-sm\">{t('lifecycle.notSet', { defaultValue: 'Nicht gesetzt' })}</span>\n              )}\n              {(isHR() || isAdmin()) && (\n                <div className=\"relative group\">\n                  <button\n                    onClick={() => handleEditContractDates()}\n                    className=\"p-1 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition\"\n                  >\n                    <PencilIcon className=\"h-4 w-4\" />\n                  </button>\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                    {t('lifecycle.edit', { defaultValue: 'Bearbeiten' })}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"flex justify-between items-center\">\n            <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.contractEnd')}</span>\n            <div className=\"flex items-center space-x-2\">\n              {lifecycle.contractEndDate ? (\n                <span className=\"dark:text-white\">\n                  {new Date(lifecycle.contractEndDate).toLocaleDateString('de-DE')}\n                </span>\n              ) : (\n                <span className=\"text-gray-400 italic text-sm\">{t('lifecycle.notSet', { defaultValue: 'Nicht gesetzt' })}</span>\n              )}\n              {(isHR() || isAdmin()) && (\n                <div className=\"relative group\">\n                  <button\n                    onClick={() => handleEditContractDates()}\n                    className=\"p-1 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition\"\n                  >\n                    <PencilIcon className=\"h-4 w-4\" />\n                  </button>\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                    {t('lifecycle.edit', { defaultValue: 'Bearbeiten' })}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n          {lifecycle.offboardingStartedAt && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.offboardingStarted')}</span>\n              <span className=\"dark:text-white\">\n                {new Date(lifecycle.offboardingStartedAt).toLocaleDateString('de-DE')}\n              </span>\n            </div>\n          )}\n          {lifecycle.exitDate && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.exitDate')}</span>\n              <span className=\"dark:text-white\">\n                {new Date(lifecycle.exitDate).toLocaleDateString('de-DE')}\n              </span>\n            </div>\n          )}\n          {lifecycle.exitReason && (\n            <div className=\"flex justify-between\">\n              <span className=\"text-gray-600 dark:text-gray-400\">{t('lifecycle.exitReason')}</span>\n              <span className=\"dark:text-white\">{lifecycle.exitReason}</span>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Progress-Bar - Onboarding */}\n      {lifecycle.status === 'onboarding' && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n          <h3 className=\"text-lg font-semibold dark:text-white mb-4\">{t('lifecycle.progressTitle')}</h3>\n          <div className=\"space-y-2\">\n            <div className=\"flex justify-between text-sm mb-2\">\n              <span className=\"text-gray-600 dark:text-gray-400\">\n                {t('lifecycle.progressSteps', { completed: progress.completed, total: progress.total })}\n              </span>\n              <span className=\"font-medium dark:text-white\">{progress.percent}%</span>\n            </div>\n            <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3\">\n              <div\n                className=\"bg-blue-600 h-3 rounded-full transition-all duration-300\"\n                style={{ width: `${progress.percent}%` }}\n              ></div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Progress-Bar - Offboarding */}\n      {lifecycle.status === 'offboarding' && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n          <h3 className=\"text-lg font-semibold dark:text-white mb-4\">{t('lifecycle.offboarding.progressTitle', { defaultValue: 'Offboarding-Fortschritt' })}</h3>\n          <div className=\"space-y-4\">\n            {/* Progress-Bar */}\n            {(() => {\n              const completedTasks = offboardingTasks.filter(task => task.status === 'done').length;\n              const totalTasks = offboardingTasks.length || 3; // Fallback: 3 Tasks\n              const percent = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;\n              \n              return (\n                <>\n                  <div className=\"flex justify-between text-sm mb-2\">\n                    <span className=\"text-gray-600 dark:text-gray-400\">\n                      {t('lifecycle.offboarding.progressSteps', { completed: completedTasks, total: totalTasks }) || `${completedTasks} von ${totalTasks} Schritten abgeschlossen`}\n                    </span>\n                    <span className=\"font-medium dark:text-white\">{percent}%</span>\n                  </div>\n                  <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3\">\n                    <div\n                      className=\"bg-orange-600 h-3 rounded-full transition-all duration-300\"\n                      style={{ width: `${percent}%` }}\n                    ></div>\n                  </div>\n                </>\n              );\n            })()}\n            \n            {/* Offboarding-Tasks Liste */}\n            {offboardingTasks.length > 0 && (\n              <div className=\"mt-4 space-y-2\">\n                <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  {t('lifecycle.offboarding.tasksTitle', { defaultValue: 'Offboarding-Aufgaben' })}\n                </h4>\n                {offboardingTasks.map((task) => {\n                  const isCompleted = task.status === 'done';\n                  return (\n                    <div\n                      key={task.id}\n                      className={`flex items-center justify-between p-3 rounded-lg border ${\n                        isCompleted\n                          ? 'bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800'\n                          : 'bg-gray-50 dark:bg-gray-700/50 border-gray-200 dark:border-gray-600'\n                      }`}\n                    >\n                      <div className=\"flex items-center space-x-3 flex-1\">\n                        {isCompleted ? (\n                          <CheckCircleIcon className=\"h-5 w-5 text-green-600 dark:text-green-400 flex-shrink-0\" />\n                        ) : (\n                          <ClockIcon className=\"h-5 w-5 text-orange-600 dark:text-orange-400 flex-shrink-0\" />\n                        )}\n                        <div className=\"flex-1 min-w-0\">\n                          <p className={`text-sm font-medium ${isCompleted ? 'text-green-800 dark:text-green-200' : 'text-gray-800 dark:text-gray-200'}`}>\n                            {task.title}\n                          </p>\n                          {task.description && (\n                            <p className=\"text-xs text-gray-600 dark:text-gray-400 mt-1 truncate\">\n                              {task.description}\n                            </p>\n                          )}\n                        </div>\n                      </div>\n                      <span className={`text-xs px-2 py-1 rounded ${\n                        isCompleted\n                          ? 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200'\n                          : 'bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200'\n                      }`}>\n                        {isCompleted\n                          ? t('common.done', { defaultValue: 'Abgeschlossen' })\n                          : t('common.open', { defaultValue: 'Offen' })}\n                      </span>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Dokumente - Arbeitszeugnisse */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold dark:text-white flex items-center\">\n            <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n            {t('lifecycle.certificates')}\n          </h3>\n          {(isHR() || isAdmin()) && (\n            <div className=\"relative group\">\n              <button\n                onClick={() => setIsCertificateCreateModalOpen(true)}\n                className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n                style={{ width: '30.19px', height: '30.19px' }}\n                aria-label={t('lifecycle.createCertificate')}\n              >\n                <PlusIcon className=\"h-4 w-4\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('lifecycle.createCertificate')}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {certificates.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n            <DocumentTextIcon className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n            <p>{t('lifecycle.noCertificates')}</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {certificates.map((cert) => (\n              <div\n                key={cert.id}\n                className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition\"\n              >\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <h4 className=\"font-medium dark:text-white\">\n                        {t('lifecycle.certificate')}\n                        {cert.certificateType !== 'employment' && ` (${cert.certificateType})`}\n                      </h4>\n                      {cert.isLatest && (\n                        <span className=\"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 flex items-center\">\n                          <CheckCircleIcon className=\"h-3 w-3 mr-1\" />\n                          {t('lifecycle.current')}\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"space-y-1 text-sm text-gray-600 dark:text-gray-400\">\n                      <div className=\"flex items-center space-x-2\">\n                        <CalendarIcon className=\"h-4 w-4\" />\n                        <span>{t('lifecycle.issuedOn')} {formatDate(cert.issueDate)}</span>\n                      </div>\n                      {cert.generatedByUser && (\n                        <div className=\"flex items-center space-x-2\">\n                          <UserIcon className=\"h-4 w-4\" />\n                          <span>\n                            {t('lifecycle.createdBy')} {cert.generatedByUser.firstName} {cert.generatedByUser.lastName}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2 ml-4\">\n                    {(isHR() || isAdmin()) && (\n                      <div className=\"relative group\">\n                        <button\n                          onClick={() => setEditingCertificate(cert)}\n                          className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition\"\n                        >\n                          <PencilIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('lifecycle.edit')}\n                        </div>\n                      </div>\n                    )}\n                    <div className=\"relative group\">\n                      <button\n                        onClick={() => handleDownloadCertificate(cert.id)}\n                        disabled={downloadingCertId === cert.id}\n                        className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        {downloadingCertId === cert.id ? (\n                          <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600\"></div>\n                        ) : (\n                          <ArrowDownTrayIcon className=\"h-5 w-5\" />\n                        )}\n                      </button>\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                        {t('lifecycle.download')}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Dokumente - Arbeitsvertrge */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center mb-4\">\n          {(isHR() || isAdmin()) && (\n            <div className=\"relative group mr-3\">\n              <button\n                onClick={() => setIsContractCreateModalOpen(true)}\n                className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n                style={{ width: '30.19px', height: '30.19px' }}\n                aria-label={t('lifecycle.createContract')}\n              >\n                <PlusIcon className=\"h-4 w-4\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('lifecycle.createContract')}\n              </div>\n            </div>\n          )}\n          <h3 className=\"text-lg font-semibold dark:text-white flex items-center\">\n            <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n            {t('lifecycle.contracts')}\n          </h3>\n        </div>\n\n        {contracts.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n            <DocumentTextIcon className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n            <p>{t('lifecycle.noContracts')}</p>\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {contracts.map((contract) => (\n              <div\n                key={contract.id}\n                className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition\"\n              >\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <h4 className=\"font-medium dark:text-white\">\n                        {t('lifecycle.contract')}\n                        {contract.contractType !== 'employment' && ` (${contract.contractType})`}\n                      </h4>\n                      {contract.isLatest && (\n                        <span className=\"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 flex items-center\">\n                          <CheckCircleIcon className=\"h-3 w-3 mr-1\" />\n                          {t('lifecycle.current')}\n                        </span>\n                      )}\n                    </div>\n                    <div className=\"space-y-1 text-sm text-gray-600 dark:text-gray-400\">\n                      <div className=\"flex items-center space-x-2\">\n                        <CalendarIcon className=\"h-4 w-4\" />\n                        <span>\n                          {formatDate(contract.startDate)}\n                          {contract.endDate && ` - ${formatDate(contract.endDate)}`}\n                        </span>\n                      </div>\n                      {contract.position && (\n                        <div>{t('lifecycle.position')} {contract.position}</div>\n                      )}\n                      {contract.salary && (\n                        <div>{t('lifecycle.salary')} {contract.salary.toLocaleString('de-DE', { style: 'currency', currency: 'EUR' })}</div>\n                      )}\n                      {contract.workingHours && (\n                        <div>{t('lifecycle.workingHours')} {contract.workingHours}h/Woche</div>\n                      )}\n                      {contract.generatedByUser && (\n                        <div className=\"flex items-center space-x-2\">\n                          <UserIcon className=\"h-4 w-4\" />\n                          <span>\n                            {t('lifecycle.createdBy')} {contract.generatedByUser.firstName} {contract.generatedByUser.lastName}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2 ml-4\">\n                    {(isHR() || isAdmin()) && (\n                      <div className=\"relative group\">\n                        <button\n                          onClick={() => setEditingContract(contract)}\n                          className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition\"\n                        >\n                          <PencilIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('lifecycle.edit')}\n                        </div>\n                      </div>\n                    )}\n                    <div className=\"relative group\">\n                      <button\n                        onClick={() => handleDownloadContract(contract.id)}\n                        disabled={downloadingContractId === contract.id}\n                        className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md transition disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        {downloadingContractId === contract.id ? (\n                          <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600\"></div>\n                        ) : (\n                          <ArrowDownTrayIcon className=\"h-5 w-5\" />\n                        )}\n                      </button>\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                        {t('lifecycle.download')}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Social Security Editor - Nur fr Legal/Admin */}\n      {lifecycleData?.lifecycle && (\n        <SocialSecurityEditor\n          userId={userId}\n          lifecycleId={lifecycleData.lifecycle.id}\n          onUpdate={() => fetchData(true)}\n        />\n      )}\n\n      {/* Modals */}\n      <CertificateCreationModal\n        isOpen={isCertificateCreateModalOpen}\n        onClose={() => setIsCertificateCreateModalOpen(false)}\n        onCertificateCreated={() => {\n          fetchData();\n          setIsCertificateCreateModalOpen(false);\n        }}\n        userId={userId}\n        userName={userName}\n      />\n\n      <ContractCreationModal\n        isOpen={isContractCreateModalOpen}\n        onClose={() => setIsContractCreateModalOpen(false)}\n        onContractCreated={() => {\n          fetchData();\n          setIsContractCreateModalOpen(false);\n        }}\n        userId={userId}\n        userName={userName}\n      />\n\n      {editingCertificate && (\n        <CertificateEditModal\n          isOpen={!!editingCertificate}\n          onClose={() => setEditingCertificate(null)}\n          onCertificateUpdated={() => {\n            fetchData();\n            setEditingCertificate(null);\n          }}\n          userId={userId}\n          certificate={editingCertificate}\n        />\n      )}\n\n      {editingContract && (\n        <ContractEditModal\n          isOpen={!!editingContract}\n          onClose={() => setEditingContract(null)}\n          onContractUpdated={() => {\n            fetchData();\n            setEditingContract(null);\n          }}\n          userId={userId}\n          contract={editingContract}\n        />\n      )}\n\n      {/* Offboarding-Start-Modal */}\n      <OffboardingStartModal\n        isOpen={isOffboardingStartModalOpen}\n        onClose={() => setIsOffboardingStartModalOpen(false)}\n        onOffboardingStarted={() => {\n          fetchData();\n          setIsOffboardingStartModalOpen(false);\n        }}\n        userId={userId}\n        userName={userName}\n      />\n      \n      {/* Offboarding-Abschluss-Modal */}\n      <OffboardingCompleteModal\n        isOpen={isOffboardingCompleteModalOpen}\n        onClose={() => setIsOffboardingCompleteModalOpen(false)}\n        onOffboardingCompleted={() => {\n          fetchData();\n          setIsOffboardingCompleteModalOpen(false);\n        }}\n        userId={userId}\n        userName={userName}\n        offboardingTasks={offboardingTasks}\n      />\n\n      {/* Modal zum Bearbeiten der Vertragsdaten */}\n      {isEditContractDatesModalOpen && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md mx-4\">\n            <h2 className=\"text-xl font-semibold dark:text-white mb-4\">\n              {t('lifecycle.editContractDates', { defaultValue: 'Vertragsdaten bearbeiten' })}\n            </h2>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  {t('lifecycle.contractStart', { defaultValue: 'Vertragsbeginn' })} *\n                </label>\n                <input\n                  type=\"date\"\n                  value={editingContractStartDate}\n                  onChange={(e) => setEditingContractStartDate(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  required\n                />\n              </div>\n              \n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  {t('lifecycle.contractEnd', { defaultValue: 'Vertragsende' })} (optional)\n                </label>\n                <input\n                  type=\"date\"\n                  value={editingContractEndDate}\n                  onChange={(e) => setEditingContractEndDate(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                />\n                <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                  {t('lifecycle.contractEndHint', { defaultValue: 'Nur bei befristeten Vertrgen ausfllen' })}\n                </p>\n              </div>\n            </div>\n            \n            <div className=\"flex justify-end space-x-3 mt-6\">\n              <button\n                onClick={() => setIsEditContractDatesModalOpen(false)}\n                className=\"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 transition\"\n              >\n                {t('common.cancel', { defaultValue: 'Abbrechen' })}\n              </button>\n              <button\n                onClick={handleSaveContractDates}\n                disabled={!editingContractStartDate}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {t('common.save', { defaultValue: 'Speichern' })}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default LifecycleView;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { userApi, roleApi, branchApi } from '../api/apiClient.ts';\nimport { User, Role } from '../types/interfaces.ts';\nimport { CheckIcon, PlusIcon, PencilIcon, DocumentTextIcon, UserCircleIcon, ShieldCheckIcon, XMarkIcon, ArrowPathIcon, BuildingOfficeIcon, MapPinIcon } from '@heroicons/react/24/outline';\nimport useMessage from '../hooks/useMessage.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport IdentificationDocumentList from './IdentificationDocumentList.tsx';\nimport IdentificationDocumentForm from './IdentificationDocumentForm.tsx';\nimport LifecycleView from './LifecycleView.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface UserManagementTabProps {\n  onError: (error: string) => void;\n}\n\n// Lnder und Sprachen werden dynamisch aus bersetzungen geladen\n\n// Definiere Rollen, die immer vorhanden sein sollten (z.B. Admin-Rolle)\nconst fixedRoles = [1, 2, 999]; // Admin (1), User (2) und Hamburger (999) sind fixe Rollen\n\n// Vertragstypen fr Kolumbien (CO)\nconst CONTRACT_TYPES = [\n  { code: 'tiempo_completo', name: 'Tiempo Completo (>21 Tage/Monat)' },\n  { code: 'tiempo_parcial_7', name: 'Tiempo Parcial (7 Tage/Monat)' },\n  { code: 'tiempo_parcial_14', name: 'Tiempo Parcial (14 Tage/Monat)' },\n  { code: 'tiempo_parcial_21', name: 'Tiempo Parcial (21 Tage/Monat)' },\n  { code: 'prestacion_de_servicios', name: 'Prestacin de Servicios' },\n  { code: 'externo', name: 'Externo' }\n];\n\n// Gemeinsame Debug-Komponente hinzufgen\nconst RoleDebugInfo = ({ title, data }: { title: string, data: any }) => (\n  <div className=\"mb-2 p-2 border border-gray-300 rounded bg-gray-50\">\n    <h5 className=\"font-bold text-sm\">{title}</h5>\n    <pre className=\"text-xs overflow-auto max-h-24\">\n      {JSON.stringify(data, null, 2)}\n    </pre>\n  </div>\n);\n\nconst UserManagementTab = ({ onError }: UserManagementTabProps): JSX.Element => {\n  const { t } = useTranslation();\n  \n  // Lnder fr die Auswahl (dynamisch aus bersetzungen)\n  const COUNTRIES = [\n    { code: 'CO', name: t('countries.CO') },\n    { code: 'CH', name: t('countries.CH') },\n    { code: 'DE', name: t('countries.DE') },\n    { code: 'AT', name: t('countries.AT') }\n  ];\n\n  // Lnder fr die Payroll-Auswahl (dynamisch aus bersetzungen)\n  const PAYROLL_COUNTRIES = [\n    { code: 'CH', name: t('countries.CH') },\n    { code: 'CO', name: t('countries.CO') }\n  ];\n\n  // Sprachen fr die Auswahl (dynamisch aus bersetzungen)\n  const LANGUAGES = [\n    { code: 'es', name: t('languages.es') },\n    { code: 'de', name: t('languages.de') },\n    { code: 'en', name: t('languages.en') }\n  ];\n  \n  // Benutzer-States\n  const [users, setUsers] = useState<User[]>([]);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [userFormData, setUserFormData] = useState<Partial<User>>({});\n  const [isEditingUser, setIsEditingUser] = useState(false);\n  const [selectedRoles, setSelectedRoles] = useState<number[]>([]);\n  const [lifecycleRefreshKey, setLifecycleRefreshKey] = useState(0);\n  const [isDebugMode, setIsDebugMode] = useState(false);\n  const [roleWarning, setRoleWarning] = useState<string | null>(null);\n  const { showMessage } = useMessage();\n  const { isAdmin } = usePermissions();\n  \n  // Neuer State fr Rollen\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [loadingRoles, setLoadingRoles] = useState(false);\n  \n  // State fr Branches\n  const [branches, setBranches] = useState<Array<{ id: number; name: string }>>([]);\n  const [loadingBranches, setLoadingBranches] = useState(false);\n  const [selectedBranches, setSelectedBranches] = useState<number[]>([]);\n  \n  // Neuer State fr die aktive Unterseite\n  const [activeUserTab, setActiveUserTab] = useState<'details' | 'documents' | 'roles' | 'branches' | 'lifecycle'>('details');\n  \n  // State fr Active/Inactive Filter\n  const [userFilterTab, setUserFilterTab] = useState<'active' | 'inactive'>('active');\n  \n  // State fr Benutzererstellung\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n  const [isMobile, setIsMobile] = useState<boolean>(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [showDocumentUpload, setShowDocumentUpload] = useState(false);\n  const [newUserFormData, setNewUserFormData] = useState({\n    email: '',\n    password: '',\n    firstName: '',\n    lastName: ''\n  });\n\n  // Responsive Erkennung\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isCreateModalOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isCreateModalOpen, openSidepane, closeSidepane]);\n\n  // Alle Benutzer (fr Filterung)\n  const [allUsers, setAllUsers] = useState<User[]>([]);\n\n  // Initialisierung - Laden von Benutzern\n  useEffect(() => {\n    fetchAllUsers();\n  }, []);\n\n  // Benutzerdaten laden - Verwende gefilterten Endpoint, damit nur Benutzer der eigenen Organisation angezeigt werden\n  const fetchAllUsers = async () => {\n    try {\n      const response = await userApi.getAll();\n      setAllUsers(response.data);\n      // Initial: Nur aktive Benutzer anzeigen\n      filterUsersByActiveStatus('active', response.data);\n    } catch (err) {\n      handleError(err);\n    }\n  };\n\n  // Benutzer nach Active/Inactive filtern und alphabetisch sortieren\n  const filterUsersByActiveStatus = (status: 'active' | 'inactive', usersToFilter: User[] = allUsers) => {\n    const filtered = usersToFilter.filter(user => {\n      const isActive = user.active !== undefined ? user.active : true; // Default: true\n      return status === 'active' ? isActive : !isActive;\n    });\n    \n    // Alphabetisch sortieren nach username, dann firstName\n    const sorted = filtered.sort((a, b) => {\n      const aUsername = (a.username || '').toLowerCase();\n      const bUsername = (b.username || '').toLowerCase();\n      const aFirstName = (a.firstName || '').toLowerCase();\n      const bFirstName = (b.firstName || '').toLowerCase();\n      \n      // Zuerst nach username sortieren\n      if (aUsername !== bUsername) {\n        return aUsername.localeCompare(bUsername);\n      }\n      // Wenn username gleich, nach Vorname sortieren\n      return aFirstName.localeCompare(bFirstName);\n    });\n    \n    setUsers(sorted);\n  };\n\n  // Wenn Filter-Tab wechselt, Benutzerliste neu filtern\n  useEffect(() => {\n    if (allUsers.length > 0) {\n      filterUsersByActiveStatus(userFilterTab, allUsers);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [userFilterTab]);\n  \n  // Rollen laden - Wird erst aufgerufen, wenn ein Benutzer ausgewhlt wurde\n  const fetchRoles = async () => {\n    try {\n      setLoadingRoles(true);\n      \n      // Fallback-Rollen fr den Notfall bereithalten\n      const fallbackRoles = [\n        { id: 1, name: 'admin', description: 'Administrator mit allen Rechten', permissions: [] },\n        { id: 2, name: 'user', description: 'Standardbenutzer', permissions: [] },\n        { id: 999, name: 'hamburger', description: 'Hamburger-Rolle fr neue Benutzer', permissions: [] }\n      ];\n      \n      try {\n        const response = await roleApi.getAll();\n        if (response.data && Array.isArray(response.data) && response.data.length > 0) {\n          setRoles(response.data);\n          console.log(`${response.data.length} Rollen erfolgreich geladen`);\n        } else {\n          console.warn('Keine Rollen vom Server erhalten, verwende Fallback');\n          setRoles(fallbackRoles);\n        }\n      } catch (error) {\n        console.warn('Fehler beim Laden der Rollen, verwende Fallback:', error);\n        setRoles(fallbackRoles);\n      }\n    } finally {\n      setLoadingRoles(false);\n    }\n  };\n\n  // Branches laden - Wird erst aufgerufen, wenn ein Benutzer ausgewhlt wurde\n  const fetchBranches = async () => {\n    try {\n      setLoadingBranches(true);\n      \n      try {\n        const response = await branchApi.getAll();\n        if (response.data && Array.isArray(response.data) && response.data.length > 0) {\n          setBranches(response.data);\n          console.log(`${response.data.length} Branches erfolgreich geladen`);\n        } else {\n          console.warn('Keine Branches vom Server erhalten');\n          setBranches([]);\n        }\n      } catch (error) {\n        console.warn('Fehler beim Laden der Branches:', error);\n        setBranches([]);\n      }\n    } finally {\n      setLoadingBranches(false);\n    }\n  };\n\n  // Detaillierte Benutzerdaten laden\n  const fetchUserDetails = async (userId: number) => {\n    try {\n      if (!userId || isNaN(userId)) {\n        setSelectedUser(null);\n        return;\n      }\n      \n      console.log('Lade Benutzerdetails fr ID:', userId);\n      const response = await userApi.getById(userId);\n      \n      const userData = {\n        ...response.data,\n        active: response.data.active !== undefined ? response.data.active : true,\n        birthday: response.data.birthday ? new Date(response.data.birthday).toISOString().split('T')[0] : null\n      };\n      \n      // Extrahiere Rollen-IDs aus der verschachtelten Struktur\n      let roleIds: number[] = [];\n      \n      if (response.data.roles && Array.isArray(response.data.roles)) {\n        console.log('Rollenstruktur (Typ):', typeof response.data.roles, 'Lnge:', response.data.roles.length);\n        \n        // Struktur: roles: [{ role: { id, name, ... } }]\n        if (response.data.roles.length > 0 && response.data.roles[0].role) {\n          roleIds = response.data.roles.map(userRole => userRole.role.id);\n          console.log('Extrahierte Rollen-IDs aus verschachtelter Struktur:', roleIds);\n        }\n        // Fallback fr andere Formate\n        else if (response.data.roles.length > 0) {\n          if (typeof response.data.roles[0] === 'number') {\n            roleIds = response.data.roles;\n          } else if (response.data.roles[0].roleId) {\n            roleIds = response.data.roles.map(role => role.roleId);\n          } else if (response.data.roles[0].id) {\n            roleIds = response.data.roles.map(role => role.id);\n          }\n        }\n      } else {\n        console.warn('Rollen fehlen oder sind kein Array:', response.data.roles);\n      }\n      \n      // Wenn keine Rollen gefunden wurden, probieren wir, diese aus roles in der Response direkt zu extrahieren\n      if (roleIds.length === 0 && response.data.role) {\n        console.log('Versuche Rollen aus role-Eigenschaft zu extrahieren:', response.data.role);\n        if (Array.isArray(response.data.role)) {\n          roleIds = response.data.role.map((r: any) => r.id);\n        } else if (typeof response.data.role === 'object' && response.data.role !== null) {\n          roleIds = [response.data.role.id];\n        }\n      }\n      \n      console.log('Endgltige extrahierte Rollen-IDs:', roleIds);\n      \n      // Extrahiere Branch-IDs aus der verschachtelten Struktur\n      let branchIds: number[] = [];\n      \n      if (response.data.branches && Array.isArray(response.data.branches)) {\n        console.log('Branches-Struktur (Typ):', typeof response.data.branches, 'Lnge:', response.data.branches.length);\n        \n        // Struktur: branches: [{ branch: { id, name, ... } }]\n        if (response.data.branches.length > 0 && response.data.branches[0].branch) {\n          branchIds = response.data.branches.map(userBranch => userBranch.branch.id);\n          console.log('Extrahierte Branch-IDs aus verschachtelter Struktur:', branchIds);\n        }\n        // Fallback fr andere Formate\n        else if (response.data.branches.length > 0) {\n          if (typeof response.data.branches[0] === 'number') {\n            branchIds = response.data.branches;\n          } else if (response.data.branches[0].branchId) {\n            branchIds = response.data.branches.map(branch => branch.branchId);\n          } else if (response.data.branches[0].id) {\n            branchIds = response.data.branches.map(branch => branch.id);\n          }\n        }\n      } else {\n        console.warn('Branches fehlen oder sind kein Array:', response.data.branches);\n      }\n      \n      console.log('Endgltige extrahierte Branch-IDs:', branchIds);\n      \n      setSelectedUser(userData);\n      setUserFormData(userData);\n      setSelectedRoles(roleIds);\n      setSelectedBranches(branchIds);\n      \n      // Rollen nur einmal laden, wenn sie noch nicht geladen wurden\n      if (roles.length === 0) {\n        await fetchRoles();\n      }\n      \n      // Branches nur einmal laden, wenn sie noch nicht geladen wurden\n      if (branches.length === 0) {\n        await fetchBranches();\n      }\n    } catch (err) {\n      console.error('Fehler beim Laden der Benutzerdetails:', err);\n      handleError(err);\n    }\n  };\n\n  // Fehlerbehandlung\n  const handleError = (err: any) => {\n    let message = 'Ein Fehler ist aufgetreten';\n    if (err.response?.data?.message) {\n      message = err.response.data.message;\n    } else if (err instanceof Error) {\n      message = err.message;\n    }\n    \n    // Fehler \"Ungltige Rollen-ID\" nicht weitergeben, wenn kein Benutzer ausgewhlt ist\n    if (message.includes('Ungltige Rollen-ID') && !selectedUser) {\n      console.warn('Fehler unterdrckt, da kein Benutzer ausgewhlt ist:', message);\n      return;\n    }\n    \n    onError(message);\n  };\n\n  // Handler fr Auswahl eines Benutzers\n  const handleUserSelect = (event: React.ChangeEvent<HTMLSelectElement>) => {\n    const userId = parseInt(event.target.value, 10);\n    if (userId && !isNaN(userId)) {\n      fetchUserDetails(userId);\n    } else {\n      setSelectedUser(null);\n      setUserFormData({});\n      setSelectedRoles([]);\n    }\n  };\n\n  // Erweitere den handleUserInputChange\n  const handleUserInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value, type } = e.target;\n    let finalValue: string | number | null = value;\n    \n    // Korrekte Typenkonvertierung fr numerische Felder\n    if (type === 'number') {\n      // Wenn das Feld leer ist, setzen wir null statt NaN\n      finalValue = value === '' ? null : Number(value);\n    }\n    \n    setUserFormData({ ...userFormData, [name]: finalValue });\n    setIsEditingUser(true); // Aktiviere Edit-Modus sobald etwas gendert wird\n  };\n\n  // Abbrechen der Bearbeitung\n  const handleCancelEdit = () => {\n    if (selectedUser) {\n      setUserFormData({\n        ...selectedUser,\n        birthday: selectedUser.birthday ? new Date(selectedUser.birthday).toISOString().split('T')[0] : null\n      });\n    }\n    setIsEditingUser(false);\n  };\n\n  // Speichern der Benutzerdaten\n  const handleUserSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!selectedUser || !selectedUser.id) {\n      onError('Kein Benutzer ausgewhlt');\n      showMessage('Kein Benutzer ausgewhlt', 'error');\n      return;\n    }\n\n    try {\n      // Validierung\n      if (!userFormData.username?.trim()) throw new Error('Benutzername ist erforderlich');\n      if (!userFormData.email?.trim()) throw new Error('E-Mail ist erforderlich');\n      // firstName, lastName, birthday werden nur von KI aus Dokument gesetzt, nicht manuell validiert\n\n      // Bereite die Daten korrekt vor\n      // Contract, Salary, Normal Working Hours werden zu Lifecycle verschoben\n      // firstName, lastName, birthday werden nur von KI aus Dokument gesetzt, nicht manuell editierbar\n      const dataToSend = {\n        username: userFormData.username,\n        email: userFormData.email,\n        bankDetails: userFormData.bankDetails || null,\n        gender: userFormData.gender || null,\n        phoneNumber: userFormData.phoneNumber || null,\n        language: userFormData.language || null,\n        // Payroll-Felder bleiben (sind separate Sektion)\n        hourlyRate: userFormData.hourlyRate === null || userFormData.hourlyRate === undefined || userFormData.hourlyRate === '' as any\n          ? null \n          : typeof userFormData.hourlyRate === 'string' \n            ? userFormData.hourlyRate  // Keine Konvertierung fr Decimal-Werte, da sie als Strings bergeben werden sollten\n            : userFormData.hourlyRate.toString(),  // Konvertierung zu String fr Decimal-Werte\n        monthlySalary: userFormData.monthlySalary === null || userFormData.monthlySalary === undefined || userFormData.monthlySalary === '' as any\n          ? null \n          : typeof userFormData.monthlySalary === 'string' \n            ? parseFloat(userFormData.monthlySalary) \n            : userFormData.monthlySalary,\n        payrollCountry: userFormData.payrollCountry || null,\n        contractType: userFormData.contractType || null,\n      };\n\n      console.log('Sende Daten zum Server:', dataToSend);\n\n      // Update Benutzerdaten\n      const response = await userApi.update(selectedUser.id, dataToSend);\n\n      if (response.data) {\n        const updatedData = {\n          ...response.data,\n          birthday: response.data.birthday ? new Date(response.data.birthday).toISOString().split('T')[0] : null\n        };\n        setSelectedUser(updatedData);\n        setUserFormData({\n          ...updatedData,\n          birthday: updatedData.birthday ? new Date(updatedData.birthday).toISOString().split('T')[0] : null\n        });\n        \n        // Optimistisches Update: User in allUsers und users aktualisieren\n        setAllUsers(prevUsers => \n          prevUsers.map(user => \n            user.id === updatedData.id ? updatedData : user\n          )\n        );\n        \n        // Benutzerliste neu filtern basierend auf aktuellem Tab\n        filterUsersByActiveStatus(userFilterTab, allUsers.map(user => \n          user.id === updatedData.id ? updatedData : user\n        ));\n        \n        showMessage('Benutzerprofil erfolgreich aktualisiert', 'success');\n        setIsEditingUser(false);\n      }\n    } catch (err) {\n      console.error('Fehler beim Speichern der Benutzerdaten:', err);\n      // Bei Fehler: Rollback durch vollstndiges Reload\n      await fetchAllUsers();\n      if (err.response?.status === 400) {\n        const errorMsg = `Validierungsfehler: ${err.response?.data?.message || 'Bitte berprfe die eingegebenen Daten'}`;\n        onError(errorMsg);\n        showMessage(errorMsg, 'error');\n      } else if (err.response?.status === 404) {\n        onError('Benutzer wurde nicht gefunden');\n        showMessage('Benutzer wurde nicht gefunden', 'error');\n      } else {\n        handleError(err);\n      }\n    }\n  };\n\n  // Benutzer aktivieren/deaktivieren\n  const handleToggleActive = async () => {\n    if (!selectedUser || !selectedUser.id) {\n      showMessage('Kein Benutzer ausgewhlt', 'error');\n      return;\n    }\n\n    // Verhindere, dass der Admin-Benutzer sich selbst deaktiviert\n    const currentUserId = parseInt(localStorage.getItem('userId') || '0', 10);\n    if (selectedUser.id === currentUserId) {\n      showMessage('Du kannst dich nicht selbst deaktivieren', 'warning');\n      return;\n    }\n\n    try {\n      // Aktueller Status: wenn undefined, dann true (Default)\n      const currentActiveStatus = selectedUser.active !== undefined ? selectedUser.active : true;\n      const newActiveStatus = !currentActiveStatus;\n      \n      console.log('Toggle active:', { \n        currentActiveStatus, \n        newActiveStatus, \n        selectedUser,\n        selectedUserActive: selectedUser.active,\n        userId: selectedUser.id\n      });\n      \n      const updatePayload = { active: newActiveStatus };\n      console.log('Sending update payload:', updatePayload, 'Type of active:', typeof newActiveStatus);\n      \n      // Update Benutzer\n      const response = await userApi.update(selectedUser.id, updatePayload);\n      \n      console.log('Update response:', response.data);\n\n      if (response.data) {\n        const updatedData = {\n          ...response.data,\n          active: response.data.active !== undefined ? response.data.active : true,\n          birthday: response.data.birthday ? new Date(response.data.birthday).toISOString().split('T')[0] : null\n        };\n        \n        console.log('Updated user data:', updatedData);\n        \n        setSelectedUser(updatedData);\n        setUserFormData({\n          ...updatedData,\n          birthday: updatedData.birthday ? new Date(updatedData.birthday).toISOString().split('T')[0] : null\n        });\n        \n        // Optimistisches Update: Berechne den aktualisierten Array direkt (vor State-Update)\n        // Dies verhindert Race Conditions bei schnellen, aufeinanderfolgenden Updates\n        const updatedAllUsers = allUsers.map(user => \n          user.id === updatedData.id ? updatedData : user\n        );\n        \n        // Update State mit dem berechneten Array\n        setAllUsers(updatedAllUsers);\n        \n        // Filtere mit dem aktualisierten Array (nicht mit allUsers, da State-Update asynchron ist)\n        filterUsersByActiveStatus(userFilterTab, updatedAllUsers);\n        \n        // fetchAllUsers() entfernt - optimistisches Update reicht aus\n        // Backend speichert korrekt, State ist bereits aktualisiert\n        // Nur bei Fehler wird fetchAllUsers() aufgerufen (siehe catch-Block)\n        \n        showMessage(\n          newActiveStatus \n            ? 'Benutzer erfolgreich aktiviert' \n            : 'Benutzer erfolgreich deaktiviert',\n          'success'\n        );\n      }\n    } catch (err) {\n      console.error('Fehler beim Aktivieren/Deaktivieren des Benutzers:', err);\n      handleError(err);\n      // Bei Fehler: Benutzerliste neu laden\n      await fetchAllUsers();\n    }\n  };\n\n  // Toggle Rolle fr einen Benutzer (hinzufgen/entfernen)\n  const toggleRole = async (roleId: number) => {\n    if (!roleId || !selectedUser) return;\n    \n    // Prfe, ob es sich um eine fixe Rolle handelt - Nur fr Admin-Benutzer (ID: 1) sind Admin-Rollen (ID: 1) nicht entfernbar\n    if (roleId === 1 && selectedUser.id === 1 && selectedRoles.includes(roleId)) {\n      showMessage('Die Admin-Rolle kann vom Admin-Benutzer nicht entfernt werden', 'warning');\n      return;\n    }\n    \n    try {\n      console.log('Toggle Rolle:', roleId, 'fr Benutzer:', selectedUser.id);\n      console.log('Aktuelle ausgewhlte Rollen:', selectedRoles);\n      \n      // berprfen, ob die Rolle bereits zugewiesen ist\n      const isRoleSelected = selectedRoles.includes(roleId);\n      \n      const newSelectedRoles = isRoleSelected\n        ? selectedRoles.filter(id => id !== roleId)\n        : [...selectedRoles, roleId];\n      \n      console.log('Neue ausgewhlte Rollen:', newSelectedRoles);\n      \n      // Optimistisches UI-Update\n      setSelectedRoles(newSelectedRoles);\n      \n      // API-Aufruf zur Aktualisierung der Rollen\n      console.log('Sende Rollenaktualisierung an API:', { userId: selectedUser.id, roleIds: newSelectedRoles });\n      const response = await userApi.updateRoles(selectedUser.id, newSelectedRoles);\n      console.log('API-Antwort bei Rollenaktualisierung:', response.data);\n      \n      // Benutzer nach dem Update neu laden\n      await fetchUserDetails(selectedUser.id);\n      \n      // Erfolgsmeldung anzeigen mit showMessage statt setUserSuccess\n      showMessage(\n        isRoleSelected\n          ? `Rolle erfolgreich entfernt`\n          : `Rolle erfolgreich zugewiesen`,\n        'success'\n      );\n    } catch (error) {\n      // Bei Fehler auf vorherigen Zustand zurcksetzen\n      console.error('Fehler beim Aktualisieren der Rollen:', error);\n      fetchUserDetails(selectedUser.id);\n      handleError(error);\n      showMessage('Fehler beim Aktualisieren der Rollen', 'error');\n    }\n  };\n\n  // Toggle Branch fr einen Benutzer (hinzufgen/entfernen)\n  const toggleBranch = async (branchId: number) => {\n    if (!branchId || !selectedUser) return;\n    \n    try {\n      console.log('Toggle Branch:', branchId, 'fr Benutzer:', selectedUser.id);\n      console.log('Aktuelle ausgewhlte Branches:', selectedBranches);\n      \n      // berprfen, ob die Branch bereits zugewiesen ist\n      const isBranchSelected = selectedBranches.includes(branchId);\n      \n      const newSelectedBranches = isBranchSelected\n        ? selectedBranches.filter(id => id !== branchId)\n        : [...selectedBranches, branchId];\n      \n      console.log('Neue ausgewhlte Branches:', newSelectedBranches);\n      \n      // Optimistisches UI-Update\n      setSelectedBranches(newSelectedBranches);\n      \n      // API-Aufruf zur Aktualisierung der Branches\n      console.log('Sende Branch-Aktualisierung an API:', { userId: selectedUser.id, branchIds: newSelectedBranches });\n      const response = await userApi.updateBranches(selectedUser.id, newSelectedBranches);\n      console.log('API-Antwort bei Branch-Aktualisierung:', response.data);\n      \n      // Benutzer nach dem Update neu laden\n      await fetchUserDetails(selectedUser.id);\n      \n      // Erfolgsmeldung anzeigen\n      showMessage(\n        isBranchSelected\n          ? `Branch erfolgreich entfernt`\n          : `Branch erfolgreich zugewiesen`,\n        'success'\n      );\n    } catch (error) {\n      // Bei Fehler auf vorherigen Zustand zurcksetzen\n      console.error('Fehler beim Aktualisieren der Branches:', error);\n      fetchUserDetails(selectedUser.id);\n      handleError(error);\n      showMessage('Fehler beim Aktualisieren der Branches', 'error');\n    }\n  };\n\n  // Initialisiere FormData wenn Benutzer ausgewhlt wird\n  useEffect(() => {\n    if (selectedUser) {\n      setUserFormData({\n        ...selectedUser,\n        birthday: selectedUser.birthday ? new Date(selectedUser.birthday).toISOString().split('T')[0] : null\n      });\n      setIsEditingUser(false); // Starte im Read-Only Modus\n    }\n  }, [selectedUser]);\n\n  // Handler fr neue Benutzer-Formular\n  const handleNewUserInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setNewUserFormData({ ...newUserFormData, [name]: value });\n  };\n\n  // Neuen Benutzer erstellen\n  const handleCreateUser = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Validierung\n    if (!newUserFormData.email || !newUserFormData.password || !newUserFormData.firstName || !newUserFormData.lastName) {\n      showMessage('Bitte fllen Sie alle Felder aus', 'error');\n      return;\n    }\n\n    // E-Mail-Format validieren\n    if (!newUserFormData.email.match(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/)) {\n      showMessage('Ungltiges E-Mail-Format', 'error');\n      return;\n    }\n\n    try {\n      const response = await userApi.create(newUserFormData);\n      \n      // Optimistisches Update: User zu allUsers hinzufgen\n      if (response.data) {\n        const newUser = {\n          ...response.data,\n          active: response.data.active !== undefined ? response.data.active : true\n        };\n        setAllUsers(prevUsers => [newUser, ...prevUsers]);\n        \n        // Wenn aktueller Tab \"active\" ist und neuer User aktiv ist, auch zu users hinzufgen\n        if (userFilterTab === 'active' && newUser.active) {\n          setUsers(prevUsers => [newUser, ...prevUsers]);\n        }\n      }\n      \n      showMessage('Benutzer erfolgreich erstellt', 'success');\n      setIsCreateModalOpen(false);\n      setNewUserFormData({\n        email: '',\n        password: '',\n        firstName: '',\n        lastName: ''\n      });\n    } catch (err: any) {\n      // Bei Fehler: Rollback durch vollstndiges Reload\n      await fetchAllUsers();\n      const errorMessage = err.response?.data?.message || 'Fehler beim Erstellen des Benutzers';\n      showMessage(errorMessage, 'error');\n      onError(errorMessage);\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto px-4 pb-6\">\n      {/* Die lokale Erfolgsmeldungs-Anzeige wird entfernt, da wir jetzt HeaderMessage verwenden */}\n      {/* {userSuccess && (\n        <div className=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4\">\n          {userSuccess}\n        </div>\n      )} */}\n\n      {/* Titelzeile: Button links, Dropdown rechts */}\n      <div className=\"mb-6\">\n        <div className=\"flex items-start gap-4\">\n          {/* Linke Seite: \"Neuer Benutzer\"-Button */}\n          <div className=\"flex items-center pt-8\">\n            {isAdmin() && (\n              <div className=\"relative group\">\n                <button\n                  onClick={() => setIsCreateModalOpen(true)}\n                  className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                  style={{ width: '30.19px', height: '30.19px' }}\n                  aria-label={t('users.create')}\n                >\n                  <PlusIcon className=\"h-4 w-4\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {t('users.create')}\n                </div>\n              </div>\n            )}\n          </div>\n          \n          {/* Rechts: Benutzer-Dropdown mit Active/Inactive Tabs */}\n          <div className=\"flex-1\">\n            {/* Active/Inactive Tabs */}\n            <div className=\"flex gap-2 mb-2\">\n              <button\n                type=\"button\"\n                onClick={() => setUserFilterTab('active')}\n                className={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${\n                  userFilterTab === 'active'\n                    ? 'bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400'\n                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600'\n                }`}\n              >\n                {t('users.active')}\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setUserFilterTab('inactive')}\n                className={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${\n                  userFilterTab === 'inactive'\n                    ? 'bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400'\n                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600'\n                }`}\n              >\n                {t('users.inactive')}\n              </button>\n            </div>\n            \n            <select\n              id=\"userSelect\"\n              onChange={handleUserSelect}\n              className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n            >\n              <option value=\"\">-- {t('common.select')} --</option>\n              {users.map(user => (\n                <option key={user.id} value={user.id}>\n                  {user.firstName} {user.lastName} ({user.username})\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {selectedUser && (\n        <div>\n          {/* Tabs fr Benutzerdetails, Dokumente und Rollen - zusammenhngende Box ohne Shadow/Border */}\n          <div className=\"bg-white dark:bg-gray-800 mb-6\">\n            {/* Tab-Navigation */}\n            <div className=\"border-b border-gray-200 dark:border-gray-700\">\n              <nav className=\"flex -mb-px\">\n                <button\n                  onClick={() => setActiveUserTab('details')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'details'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <UserCircleIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('users.title')}\n                </button>\n                <button\n                  onClick={() => setActiveUserTab('documents')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'documents'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <DocumentTextIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('profile.documents')}\n                </button>\n                <button\n                  onClick={() => setActiveUserTab('roles')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'roles'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <ShieldCheckIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('roles.title')}\n                </button>\n                <button\n                  onClick={() => setActiveUserTab('branches')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'branches'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <MapPinIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('branches.title') || 'Niederlassungen'}\n                </button>\n                <button\n                  onClick={() => setActiveUserTab('lifecycle')}\n                  className={`py-4 px-6 text-center border-b-2 font-medium text-sm ${\n                    activeUserTab === 'lifecycle'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                  }`}\n                >\n                  <BuildingOfficeIcon className=\"h-5 w-5 inline mr-2\" />\n                  {t('lifecycle.tabTitle')}\n                </button>\n              </nav>\n          </div>\n\n            {/* Tab-Inhalte */}\n          {/* Benutzerdetails Formular */}\n          {activeUserTab === 'details' && (\n              <form onSubmit={handleUserSubmit} className=\"p-6\">\n              {/* Benutzerdetails - gleiche Reihenfolge wie Profile.tsx */}\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\n                {/* 1. Username, Email (nebeneinander - 2 Spalten) */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('users.form.username')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"username\"\n                    value={userFormData.username || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('users.form.email')}\n                  </label>\n                  <input\n                    type=\"email\"\n                    name=\"email\"\n                    value={userFormData.email || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                {/* 2. Language (allein - 1 Spalte) */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.language')} <span className=\"text-red-500\">*</span>\n                  </label>\n                  <select\n                    name=\"language\"\n                    value={userFormData.language || 'es'}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    required\n                  >\n                    {LANGUAGES.map((language) => (\n                      <option key={language.code} value={language.code}>\n                        {language.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                {/* 3. Dokumenten-Upload (prominent - volle Breite) */}\n                {selectedUser && (\n                  <div className=\"sm:col-span-2\">\n                    <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <h3 className=\"text-sm font-medium text-blue-900 dark:text-blue-200 mb-1\">\n                            {t('profile.identificationDocument') || 'Identifikationsdokument'}\n                          </h3>\n                          <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n                            {t('profile.uploadDocumentHint') || 'Bitte laden Sie das Identifikationsdokument (Cdula oder Pasaporte) hoch. Die Felder werden automatisch ausgefllt.'}\n                          </p>\n                        </div>\n                        {!showDocumentUpload && (\n                          <button\n                            type=\"button\"\n                            onClick={() => setShowDocumentUpload(true)}\n                            className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600\"\n                          >\n                            <DocumentTextIcon className=\"h-5 w-5 inline mr-2\" />\n                            {t('profile.uploadDocument') || 'Dokument hochladen'}\n                          </button>\n                        )}\n                      </div>\n                      {showDocumentUpload && (\n                        <div className=\"mt-4\">\n                          <IdentificationDocumentForm\n                            userId={selectedUser.id}\n                            onDocumentSaved={async () => {\n                              setShowDocumentUpload(false);\n                              await fetchUserDetails(selectedUser.id); // Aktualisiere Profil nach Upload\n                              showMessage('Dokument erfolgreich hochgeladen. Felder werden automatisch ausgefllt.', 'success');\n                            }}\n                            onCancel={() => setShowDocumentUpload(false)}\n                          />\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                )}\n\n                {/* 4. ID-Dokument-Daten (readonly, alle Felder - korrekte Reihenfolge) */}\n                {selectedUser.identificationDocuments && selectedUser.identificationDocuments.length > 0 && (\n                  <>\n                    {(() => {\n                      const latestDoc = selectedUser.identificationDocuments[0];\n                      return (\n                        <>\n                          {/* 1. Vorname */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('users.form.firstName')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={selectedUser.firstName || ''}\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 2. Nachname */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('users.form.lastName')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={selectedUser.lastName || ''}\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 3. Geburtsdatum */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('profile.birthday')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={selectedUser.birthday ? new Date(selectedUser.birthday).toISOString().split('T')[0] : ''}\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 4. Land */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('profile.country')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={selectedUser.country ? COUNTRIES.find(c => c.code === selectedUser.country)?.name || selectedUser.country : ''}\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 5. Geschlecht (editierbar, falls KI nicht richtig erkannt hat) */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('profile.gender')}\n                            </label>\n                            <select\n                              name=\"gender\"\n                              value={userFormData.gender || ''}\n                              onChange={handleUserInputChange}\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                            >\n                              <option value=\"\">{t('profile.selectGender')}</option>\n                              <option value=\"male\">{t('profile.genderMale')}</option>\n                              <option value=\"female\">{t('profile.genderFemale')}</option>\n                              <option value=\"other\">{t('profile.genderOther')}</option>\n                            </select>\n                          </div>\n\n                          {/* 6. Dokument-Typ */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('profile.identificationType')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={\n                                latestDoc.documentType\n                                  ? (() => {\n                                      const typeMap: Record<string, string> = {\n                                        passport: t('identificationDocuments.types.passport'),\n                                        national_id: t('identificationDocuments.types.national_id'),\n                                        driving_license: t('identificationDocuments.types.driving_license'),\n                                        residence_permit: t('identificationDocuments.types.residence_permit'),\n                                        work_permit: t('identificationDocuments.types.work_permit'),\n                                        tax_id: t('identificationDocuments.types.tax_id'),\n                                        social_security: t('identificationDocuments.types.social_security'),\n                                      };\n                                      return typeMap[latestDoc.documentType] || latestDoc.documentType;\n                                    })()\n                                  : ''\n                              }\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 7. Dokument-Nummer */}\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                              {t('profile.identificationNumber')}\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={selectedUser.identificationNumber || latestDoc.documentNumber || ''}\n                              disabled\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                              readOnly\n                            />\n                          </div>\n\n                          {/* 8. Ausstellungsdatum */}\n                          {latestDoc.issueDate && (\n                            <div>\n                              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('profile.identificationIssueDate') || 'Ausstellungsdatum'}\n                              </label>\n                              <input\n                                type=\"text\"\n                                value={new Date(latestDoc.issueDate).toISOString().split('T')[0]}\n                                disabled\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                                readOnly\n                              />\n                            </div>\n                          )}\n\n                          {/* 9. Ablaufdatum */}\n                          {latestDoc.expiryDate && (\n                            <div>\n                              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('profile.identificationExpiryDate')}\n                              </label>\n                              <input\n                                type=\"text\"\n                                value={new Date(latestDoc.expiryDate).toISOString().split('T')[0]}\n                                disabled\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white bg-gray-100 dark:bg-gray-800\"\n                                readOnly\n                              />\n                            </div>\n                          )}\n                        </>\n                      );\n                    })()}\n                  </>\n                )}\n\n                {/* 5. Phone Number (allein - 1 Spalte, da Geschlecht jetzt in ID-Dokument-Daten) */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.phoneNumber')}\n                  </label>\n                  <input\n                    type=\"tel\"\n                    name=\"phoneNumber\"\n                    value={userFormData.phoneNumber || ''}\n                    onChange={handleUserInputChange}\n                    placeholder=\"+573001234567\"\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                    {t('profile.phoneNumberHint')}\n                  </p>\n                </div>\n\n                {/* 6. Finanzdaten (Bank Details - 1 Spalte) */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('profile.bankDetails')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    name=\"bankDetails\"\n                    value={userFormData.bankDetails || ''}\n                    onChange={handleUserInputChange}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n\n                {/* Contract, Salary, Normal Working Hours ENTFERNEN - werden zu Lifecycle verschoben */}\n              </div>\n\n              {/* Lohnabrechnung-Einstellungen */}\n              <div className=\"mt-4 border-t pt-4\">\n                <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('users.form.payrollSettings')}</h3>\n                \n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      {t('users.form.payrollCountry')}\n                    </label>\n                    <select\n                      name=\"payrollCountry\"\n                      value={userFormData.payrollCountry || selectedUser.payrollCountry || 'CH'}\n                      onChange={handleUserInputChange}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                    >\n                      {PAYROLL_COUNTRIES.map(country => (\n                        <option key={country.code} value={country.code}>\n                          {country.name}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  \n                  {(userFormData.payrollCountry === 'CO' || \n                    (selectedUser.payrollCountry === 'CO' && !userFormData.payrollCountry)) && (\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('users.form.contractType')}\n                      </label>\n                      <select\n                        name=\"contractType\"\n                        value={userFormData.contractType || ''}\n                        onChange={handleUserInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                      >\n                        <option value=\"\">Bitte auswhlen</option>\n                        {CONTRACT_TYPES.map(type => (\n                          <option key={type.code} value={type.code}>\n                            {type.name}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  )}\n                </div>\n                \n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                      {t('users.form.hourlyRate')} ({(userFormData.payrollCountry || selectedUser.payrollCountry) === 'CH' ? 'CHF' : 'COP'})\n                    </label>\n                    <input\n                      type=\"number\"\n                      name=\"hourlyRate\"\n                      min=\"0\"\n                      step={(userFormData.payrollCountry || selectedUser.payrollCountry) === 'CH' ? '0.05' : '1'}\n                      value={userFormData.hourlyRate === null || userFormData.hourlyRate === undefined ? '' : userFormData.hourlyRate}\n                      onChange={handleUserInputChange}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                      placeholder={(userFormData.payrollCountry || selectedUser.payrollCountry) === 'CH' ? 'z.B. 45.00' : 'z.B. 50000'}\n                    />\n                  </div>\n                  \n                  {((userFormData.payrollCountry === 'CO' || selectedUser.payrollCountry === 'CO') && \n                    (userFormData.contractType !== 'servicios_externos' && selectedUser.contractType !== 'servicios_externos') &&\n                    (userFormData.contractType || selectedUser.contractType)) && (\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('users.form.monthlySalary')} (COP)\n                      </label>\n                      <input\n                        type=\"number\"\n                        name=\"monthlySalary\"\n                        min=\"0\"\n                        step=\"1000\"\n                        value={userFormData.monthlySalary === null || userFormData.monthlySalary === undefined ? '' : userFormData.monthlySalary}\n                        onChange={handleUserInputChange}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                        placeholder=\"z.B. 3500000\"\n                      />\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {isEditingUser && (\n                <div className=\"mt-4 flex justify-end gap-3\">\n                  <div className=\"relative group\">\n                    <button\n                      type=\"button\"\n                      onClick={handleCancelEdit}\n                      className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                    >\n                      <XMarkIcon className=\"h-5 w-5\" />\n                    </button>\n                    <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                      {t('common.cancel')}\n                    </div>\n                  </div>\n                  <div className=\"relative group\">\n                    <button\n                      type=\"submit\"\n                      className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                    >\n                      <CheckIcon className=\"h-5 w-5\" />\n                    </button>\n                    <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                      {t('common.save')}\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Status-Badge und Activate/Deactivate Button unter den Profil-Feldern */}\n              <div className=\"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700 flex justify-between items-center\">\n                {selectedUser.active !== undefined && (\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                    selectedUser.active \n                      ? 'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300' \n                      : 'bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300'\n                  }`}>\n                    {selectedUser.active ? t('users.active') : t('users.inactive')}\n                  </span>\n                )}\n                {isAdmin() && (\n                  <button\n                    onClick={handleToggleActive}\n                    className={`relative group flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-colors ${\n                      selectedUser.active\n                        ? 'bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900/20 dark:text-red-400 dark:hover:bg-red-900/30'\n                        : 'bg-green-100 text-green-700 hover:bg-green-200 dark:bg-green-900/20 dark:text-green-400 dark:hover:bg-green-900/30'\n                    }`}\n                  >\n                    {selectedUser.active ? (\n                      <>\n                        <XMarkIcon className=\"h-5 w-5\" />\n                        {t('users.deactivate')}\n                      </>\n                    ) : (\n                      <>\n                        <CheckIcon className=\"h-5 w-5\" />\n                        {t('users.activate')}\n                      </>\n                    )}\n                  </button>\n                )}\n              </div>\n            </form>\n          )}\n\n          {/* Identifikationsdokumente Tab */}\n          {activeUserTab === 'documents' && (\n              <div className=\"p-6\">\n            <IdentificationDocumentList userId={selectedUser.id} isAdmin={true} />\n              </div>\n          )}\n\n          {/* Rollen Tab */}\n          {activeUserTab === 'roles' && (\n              <div className=\"p-6\">\n              {/* Rollenzuweisung - nur anzeigen, wenn Rollen geladen wurden */}\n              {loadingRoles ? (\n                <div className=\"mt-4 mb-4\">\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('roleAssignment.title')}</h3>\n                  <p className=\"dark:text-gray-300\">{t('roleAssignment.loading')}</p>\n                </div>\n              ) : roles.length > 0 && (\n                <div>\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('roleAssignment.title')}</h3>\n                  \n                  {/* berprfung auf unbekannte Rollen */}\n                  {selectedRoles.some(roleId => !roles.some(role => role.id === roleId)) && (\n                    <div className=\"bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-400 dark:border-yellow-700 text-yellow-700 dark:text-yellow-300 px-4 py-3 rounded mb-4\">\n                      <p className=\"font-bold\">{t('roleAssignment.unknownRolesWarning')}</p>\n                      <p>{t('roleAssignment.unknownRolesMessage', { ids: selectedRoles.filter(roleId => !roles.some(role => role.id === roleId)).join(', ') })}</p>\n                      <p className=\"mt-2 text-sm\">{t('roleAssignment.availableRoleIds', { ids: roles.map(r => r.id).join(', ') })}</p>\n                    </div>\n                  )}\n                  \n                  {/* Aktuell zugewiesene Rollen */}\n                  <div className=\"mb-4\">\n                    <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('roleAssignment.currentRoles')}</h4>\n                    {selectedRoles.length === 0 ? (\n                      <p className=\"text-gray-500 dark:text-gray-400 italic\">{t('roleAssignment.noRolesAssigned')}</p>\n                    ) : (\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {/* Bekannte zugewiesene Rollen */}\n                        {roles\n                          .filter(role => selectedRoles.includes(role.id))\n                          .map(role => {\n                            // Eine Rolle ist nur dann nicht entfernbar, wenn es sich um die Admin-Rolle (ID: 1) fr den Admin-Benutzer (ID: 1) handelt\n                            const isFixedRole = role.id === 1 && selectedUser && selectedUser.id === 1;\n                            return (\n                              <div \n                                key={role.id} \n                                className={`border rounded-lg p-4 ${isFixedRole ? 'border-green-500 bg-green-50 dark:bg-green-900/20 dark:border-green-700 cursor-not-allowed' : 'border-blue-500 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-700 cursor-pointer'}`}\n                                onClick={() => !isFixedRole && toggleRole(role.id)}\n                              >\n                                <div className=\"flex justify-between items-center\">\n                                  <div>\n                                    <h4 className=\"font-medium flex items-center dark:text-white\">\n                                      {role.name}\n                                      {isFixedRole && (\n                                        <span className=\"ml-2 text-xs bg-green-600 text-white px-2 py-0.5 rounded-full\">\n                                          {t('roleAssignment.fixed')}\n                                        </span>\n                                      )}\n                                    </h4>\n                                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">{role.description}</p>\n                                  </div>\n                                  <div className={`flex items-center ${isFixedRole ? 'text-gray-400 dark:text-gray-500' : 'text-blue-600 dark:text-blue-400'}`}>\n                                    <span className=\"mr-2 text-sm\">{isFixedRole ? t('roleAssignment.fixedAssigned') : t('roleAssignment.remove')}</span>\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n                                    </svg>\n                                  </div>\n                                </div>\n                              </div>\n                            );\n                          })}\n                        \n                        {/* Unbekannte zugewiesene Rollen */}\n                        {selectedRoles\n                          .filter(roleId => !roles.some(role => role.id === roleId))\n                          .map(roleId => (\n                            <div \n                              key={`unknown-${roleId}`} \n                              className=\"border border-orange-500 bg-orange-50 rounded-lg p-4\"\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium\">{t('roleAssignment.unknownRole', { id: roleId })}</h4>\n                                  <p className=\"text-sm text-orange-600\">{t('roleAssignment.unknownRoleDescription')}</p>\n                                </div>\n                                <div className=\"flex items-center text-orange-600\">\n                                  <span className=\"mr-2 text-sm\">{t('roleAssignment.remove')}</span>\n                                  <button \n                                    onClick={() => toggleRole(roleId)}\n                                    className=\"focus:outline-none\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n                                    </svg>\n                                  </button>\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    )}\n                  </div>\n                  \n                  {/* Verfgbare Rollen */}\n                  <div>\n                    <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('roleAssignment.availableRoles')}</h4>\n                    {roles.filter(role => !selectedRoles.includes(role.id)).length === 0 ? (\n                      <p className=\"text-gray-500 dark:text-gray-400 italic\">{t('roleAssignment.noRolesAvailable')}</p>\n                    ) : (\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {roles\n                          .filter(role => !selectedRoles.includes(role.id))\n                          .map(role => (\n                            <div \n                              key={role.id} \n                              className=\"border border-gray-300 rounded-lg p-4 cursor-pointer hover:border-blue-300 hover:bg-blue-50\"\n                              onClick={() => toggleRole(role.id)}\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium\">{role.name}</h4>\n                                  <p className=\"text-sm text-gray-600\">{role.description}</p>\n                                </div>\n                                <div className=\"flex items-center text-gray-500 hover:text-blue-600\">\n                                  <span className=\"mr-2 text-sm\">{t('roleAssignment.add')}</span>\n                                  <PlusIcon className=\"h-5 w-5\" />\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Branches Tab */}\n          {activeUserTab === 'branches' && (\n              <div className=\"p-6\">\n              {/* Branch-Zuweisung - nur anzeigen, wenn Branches geladen wurden */}\n              {loadingBranches ? (\n                <div className=\"mt-4 mb-4\">\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('branchAssignment.title') || 'Niederlassungszuweisung'}</h3>\n                  <p className=\"dark:text-gray-300\">{t('branchAssignment.loading') || 'Lade Niederlassungen...'}</p>\n                </div>\n              ) : branches.length > 0 && (\n                <div>\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('branchAssignment.title') || 'Niederlassungszuweisung'}</h3>\n                  \n                  {/* berprfung auf unbekannte Branches */}\n                  {selectedBranches.some(branchId => !branches.some(branch => branch.id === branchId)) && (\n                    <div className=\"bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-400 dark:border-yellow-700 text-yellow-700 dark:text-yellow-300 px-4 py-3 rounded mb-4\">\n                      <p className=\"font-bold\">{t('branchAssignment.unknownBranchesWarning') || 'Unbekannte Niederlassungen zugewiesen'}</p>\n                      <p>{t('branchAssignment.unknownBranchesMessage', { ids: selectedBranches.filter(branchId => !branches.some(branch => branch.id === branchId)).join(', ') }) || `Die folgenden Niederlassungs-IDs sind zugewiesen, aber nicht verfgbar: ${selectedBranches.filter(branchId => !branches.some(branch => branch.id === branchId)).join(', ')}`}</p>\n                      <p className=\"mt-2 text-sm\">{t('branchAssignment.availableBranchIds', { ids: branches.map(b => b.id).join(', ') }) || `Verfgbare Niederlassungs-IDs: ${branches.map(b => b.id).join(', ')}`}</p>\n                    </div>\n                  )}\n                  \n                  {/* Aktuell zugewiesene Branches */}\n                  <div className=\"mb-4\">\n                    <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('branchAssignment.currentBranches') || 'Aktuell zugewiesene Niederlassungen'}</h4>\n                    {selectedBranches.length === 0 ? (\n                      <p className=\"text-gray-500 dark:text-gray-400 italic\">{t('branchAssignment.noBranchesAssigned') || 'Keine Niederlassungen zugewiesen'}</p>\n                    ) : (\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {/* Bekannte zugewiesene Branches */}\n                        {branches\n                          .filter(branch => selectedBranches.includes(branch.id))\n                          .map(branch => (\n                            <div \n                              key={branch.id} \n                              className=\"border border-blue-500 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-700 rounded-lg p-4 cursor-pointer\"\n                              onClick={() => toggleBranch(branch.id)}\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium dark:text-white\">\n                                    {branch.name}\n                                  </h4>\n                                </div>\n                                <div className=\"flex items-center text-blue-600 dark:text-blue-400\">\n                                  <span className=\"mr-2 text-sm\">{t('branchAssignment.remove') || 'Entfernen'}</span>\n                                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n                                  </svg>\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                        \n                        {/* Unbekannte zugewiesene Branches */}\n                        {selectedBranches\n                          .filter(branchId => !branches.some(branch => branch.id === branchId))\n                          .map(branchId => (\n                            <div \n                              key={`unknown-${branchId}`} \n                              className=\"border border-orange-500 bg-orange-50 rounded-lg p-4\"\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium\">{t('branchAssignment.unknownBranch', { id: branchId }) || `Unbekannte Niederlassung (ID: ${branchId})`}</h4>\n                                  <p className=\"text-sm text-orange-600\">{t('branchAssignment.unknownBranchDescription') || 'Diese Niederlassung existiert nicht mehr oder ist nicht verfgbar.'}</p>\n                                </div>\n                                <div className=\"flex items-center text-orange-600\">\n                                  <span className=\"mr-2 text-sm\">{t('branchAssignment.remove') || 'Entfernen'}</span>\n                                  <button \n                                    onClick={() => toggleBranch(branchId)}\n                                    className=\"focus:outline-none\">\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                                      <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z\" clipRule=\"evenodd\" />\n                                    </svg>\n                                  </button>\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    )}\n                  </div>\n                  \n                  {/* Verfgbare Branches */}\n                  <div>\n                    <h4 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('branchAssignment.availableBranches') || 'Verfgbare Niederlassungen'}</h4>\n                    {branches.filter(branch => !selectedBranches.includes(branch.id)).length === 0 ? (\n                      <p className=\"text-gray-500 dark:text-gray-400 italic\">{t('branchAssignment.noBranchesAvailable') || 'Keine weiteren Niederlassungen verfgbar'}</p>\n                    ) : (\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        {branches\n                          .filter(branch => !selectedBranches.includes(branch.id))\n                          .map(branch => (\n                            <div \n                              key={branch.id} \n                              className=\"border border-gray-300 dark:border-gray-600 rounded-lg p-4 cursor-pointer hover:border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20\"\n                              onClick={() => toggleBranch(branch.id)}\n                            >\n                              <div className=\"flex justify-between items-center\">\n                                <div>\n                                  <h4 className=\"font-medium dark:text-white\">{branch.name}</h4>\n                                </div>\n                                <div className=\"flex items-center text-gray-500 hover:text-blue-600 dark:hover:text-blue-400\">\n                                  <span className=\"mr-2 text-sm\">{t('branchAssignment.add') || 'Hinzufgen'}</span>\n                                  <PlusIcon className=\"h-5 w-5\" />\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                    )}\n                  </div>\n                </div>\n              )}\n              {!loadingBranches && branches.length === 0 && (\n                <div className=\"mt-4 mb-4\">\n                  <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">{t('branchAssignment.title') || 'Niederlassungszuweisung'}</h3>\n                  <p className=\"text-gray-500 dark:text-gray-400\">{t('branchAssignment.noBranchesFound') || 'Keine Niederlassungen gefunden'}</p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Lebenszyklus Tab */}\n          {activeUserTab === 'lifecycle' && selectedUser && (\n              <div className=\"p-6\">\n            <LifecycleView \n              key={`lifecycle-${selectedUser.id}-${lifecycleRefreshKey}`}\n              userId={selectedUser.id} \n              userName={`${selectedUser.firstName} ${selectedUser.lastName}`}\n            />\n              </div>\n          )}\n          </div>\n        </div>\n      )}\n\n      {/* Sidepane/Modal fr Benutzererstellung */}\n      {isCreateModalOpen && (\n        <>\n          {/* Fr Mobile (unter 640px) - klassisches Modal */}\n          {isMobile ? (\n            <Dialog open={isCreateModalOpen} onClose={() => setIsCreateModalOpen(false)} className=\"relative z-50\">\n              <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n              \n              <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                  {/* Header */}\n                  <div className=\"px-6 py-4 border-b dark:border-gray-700\">\n                    <div className=\"flex items-center justify-between\">\n                      <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                        {t('organisation.createUser.title')}\n                      </Dialog.Title>\n                      <button\n                        onClick={() => setIsCreateModalOpen(false)}\n                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                      >\n                        <XMarkIcon className=\"h-6 w-6\" />\n                      </button>\n                    </div>\n                  </div>\n                  \n                  {/* Form */}\n                  <form onSubmit={handleCreateUser} className=\"p-6\">\n                    <div className=\"space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.email')} *\n                        </label>\n                        <input\n                          type=\"email\"\n                          name=\"email\"\n                          value={newUserFormData.email}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.password')} *\n                        </label>\n                        <input\n                          type=\"password\"\n                          name=\"password\"\n                          value={newUserFormData.password}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.firstName')} *\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"firstName\"\n                          value={newUserFormData.firstName}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.lastName')} *\n                        </label>\n                        <input\n                          type=\"text\"\n                          name=\"lastName\"\n                          value={newUserFormData.lastName}\n                          onChange={handleNewUserInputChange}\n                          className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                    </div>\n                    \n                    {/* Footer */}\n                    <div className=\"mt-6 flex justify-end gap-3\">\n                      <div className=\"relative group\">\n                        <button\n                          type=\"button\"\n                          onClick={() => setIsCreateModalOpen(false)}\n                          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                        >\n                          <XMarkIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('common.cancel')}\n                        </div>\n                      </div>\n                      <div className=\"relative group\">\n                        <button\n                          type=\"submit\"\n                          className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                        >\n                          <CheckIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('organisation.createUser.create')}\n                        </div>\n                      </div>\n                    </div>\n                  </form>\n                </Dialog.Panel>\n              </div>\n            </Dialog>\n          ) : (\n            // Fr Desktop (ab 640px) - Sidepane\n            // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n            <>\n              {/* Backdrop - nur wenn offen und <= 1070px */}\n              {/* Hinweis: onClick entfernt, da Backdrop pointer-events: none hat, damit Hauptinhalt interaktiv bleibt */}\n              {isCreateModalOpen && !isLargeScreen && (\n                <div \n                  className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n                  aria-hidden=\"true\" \n                  style={{\n                    opacity: isCreateModalOpen ? 1 : 0,\n                    transition: 'opacity 300ms ease-out'\n                  }}\n                />\n              )}\n              \n              {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n              <div \n                className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isCreateModalOpen ? 'translate-x-0' : 'translate-x-full'}`}\n                style={{\n                  transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n                  pointerEvents: isCreateModalOpen ? 'auto' : 'none'\n                }}\n                aria-hidden={!isCreateModalOpen}\n                role=\"dialog\"\n                aria-modal={isCreateModalOpen}\n              >\n                <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n                  <h2 className=\"text-lg font-semibold dark:text-white\">\n                    {t('organisation.createUser.title')}\n                  </h2>\n                  <button\n                    onClick={() => setIsCreateModalOpen(false)}\n                    className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                  >\n                    <XMarkIcon className=\"h-6 w-6\" />\n                  </button>\n                </div>\n\n                <div className=\"flex flex-col flex-1 min-h-0\">\n                  <form onSubmit={handleCreateUser} className=\"flex flex-col flex-1 min-h-0\">\n                    <div className=\"p-4 overflow-y-auto flex-1 min-h-0 space-y-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                          {t('organisation.createUser.email')} *\n                        </label>\n                      <input\n                        type=\"email\"\n                        name=\"email\"\n                        value={newUserFormData.email}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('organisation.createUser.password')} *\n                      </label>\n                      <input\n                        type=\"password\"\n                        name=\"password\"\n                        value={newUserFormData.password}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('organisation.createUser.firstName')} *\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"firstName\"\n                        value={newUserFormData.firstName}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                        {t('organisation.createUser.lastName')} *\n                      </label>\n                      <input\n                        type=\"text\"\n                        name=\"lastName\"\n                        value={newUserFormData.lastName}\n                        onChange={handleNewUserInputChange}\n                        className=\"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        required\n                      />\n                      </div>\n                    </div>\n                    \n                    {/* Footer */}\n                    <div className=\"flex justify-end gap-3 border-t dark:border-gray-700 pt-4 px-4 flex-shrink-0\">\n                      <div className=\"relative group\">\n                        <button\n                          type=\"button\"\n                          onClick={() => setIsCreateModalOpen(false)}\n                          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                        >\n                          <XMarkIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('common.cancel')}\n                        </div>\n                      </div>\n                      <div className=\"relative group\">\n                        <button\n                          type=\"submit\"\n                          className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                        >\n                          <CheckIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('organisation.createUser.create')}\n                        </div>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default UserManagementTab; ","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { roleApi, branchApi } from '../api/apiClient.ts';\nimport { Role, AccessLevel } from '../types/interfaces.ts';\nimport { PencilIcon, TrashIcon, PlusIcon, FunnelIcon, XMarkIcon, CheckIcon, ArrowPathIcon, DocumentDuplicateIcon, ChevronDownIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport axiosInstance from '../config/axios.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport FilterPane from '../components/FilterPane.tsx';\nimport SavedFilterTags from '../components/SavedFilterTags.tsx';\nimport { FilterCondition } from '../components/FilterRow.tsx';\nimport { useError } from '../contexts/ErrorContext.tsx';\nimport { ErrorCategory } from '../services/ErrorHandler.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface RoleManagementTabProps {\n  onRolesChange?: () => void;\n  onError: (error: string) => void;\n  readOnly?: boolean;\n}\n\n// Definiere Seiten, die immer sichtbar sein sollen (ohne Berechtigungsprfung)\nconst alwaysVisiblePages = ['dashboard', 'worktracker', 'cerebro', 'settings', 'profile'];\n\n// ALLE SEITEN IM SYSTEM (synchron mit Backend)\nconst defaultPages = [\n  'dashboard',\n  'worktracker',\n  'consultations',\n  'team_worktime_control', // = workcenter\n  'payroll', // = lohnabrechnung\n  'organization_management', // = organisation (Hauptseite)\n  'cerebro',\n  'settings',\n  'profile',\n  'tour_management', // NEU: Touren-Verwaltung\n  'password_manager' // NEU: Passwort-Manager\n];\n\n// ALLE TABELLEN IM SYSTEM (synchron mit Backend)\nconst defaultTables = [\n  'requests',           // auf dashboard\n  'tasks',             // auf worktracker\n  'reservations',      // auf worktracker (in To Do's Box)\n  'users',             // auf organization_management\n  'roles',             // auf organization_management\n  'organization',      // auf organization_management\n  'organization_join_requests', // auf organization_management\n  'organization_users',  // auf organization_management\n  'team_worktime',     // auf team_worktime_control\n  'worktime',          // auf worktracker\n  'clients',           // auf consultations\n  'consultation_invoices', // auf consultations\n  'branches',          // auf settings/system\n  'notifications',     // allgemein\n  'settings',          // auf settings\n  'monthly_reports',    // auf consultations/reports\n  'tours',             // NEU: auf tour_management\n  'tour_bookings'      // NEU: auf tour_management\n];\n\n// ALLE BUTTONS IM SYSTEM (synchron mit Backend)\nconst defaultButtons = [\n  // Database Management Buttons (Settings/System)\n  'database_reset_table',\n  'database_logs',\n  \n  // Invoice Functions Buttons\n  'invoice_create',\n  'invoice_download', \n  'invoice_mark_paid',\n  'invoice_settings',\n  \n  // Todo/Task Buttons (Worktracker)\n  'todo_create',\n  'todo_edit',\n  'todo_delete',\n  'task_create',\n  'task_edit', \n  'task_delete',\n  \n  // User Management Buttons\n  'user_create',\n  'user_edit',\n  'user_delete',\n  'role_assign',\n  'role_create',\n  'role_edit',\n  'role_delete',\n  \n  // Organization Management Buttons\n  'organization_create',\n  'organization_edit',\n  'organization_delete',\n  \n  // Worktime Buttons\n  'worktime_start',\n  'worktime_stop', \n  'worktime_edit',\n  'worktime_delete',\n  \n  // General Cerebro Button\n  'cerebro',\n  \n  // Consultation Buttons\n  'consultation_start',\n  'consultation_stop',\n  'consultation_edit',\n  \n  // Client Management Buttons\n  'client_create',\n  'client_edit',\n  'client_delete',\n  \n  // Settings Buttons\n  'settings_system',\n  'settings_notifications',\n  'settings_profile',\n  \n  // Payroll Buttons\n  'payroll_generate',\n  'payroll_export',\n  'payroll_edit',\n  \n  // Tour Management Buttons\n  'tour_create',\n  'tour_edit',\n  'tour_delete',\n  'tour_view',\n  'tour_booking_create',\n  'tour_booking_edit',\n  'tour_booking_cancel',\n  'tour_provider_create',\n  'tour_provider_edit',\n  'tour_provider_delete',\n  \n  // Password Manager Buttons\n  'password_entry_create',\n  'password_entry_edit',\n  'password_entry_delete'\n];\n\n// Definiert die Zuordnung von Tabellen zu ihren bergeordneten Seiten\nconst tableToPageMapping = {\n  'requests': 'dashboard',\n  'tasks': 'worktracker',\n  'reservations': 'worktracker',\n  'users': 'organization_management',\n  'roles': 'organization_management',\n  'organization': 'organization_management',\n  'organization_join_requests': 'organization_management',\n  'organization_users': 'organization_management',\n  'team_worktime': 'team_worktime_control',\n  'worktime': 'worktracker',\n  'clients': 'consultations',\n  'consultation_invoices': 'consultations',\n  'branches': 'settings',\n  'notifications': 'general',\n  'settings': 'settings',\n  'monthly_reports': 'consultations',\n  'tours': 'tour_management',\n  'tour_bookings': 'tour_management'\n};\n\n// Definiert die Zuordnung von Buttons zu ihren bergeordneten Seiten/Bereichen\nconst buttonToPageMapping = {\n  'database_reset_table': 'settings',\n  'database_logs': 'settings',\n  'invoice_create': 'consultations',\n  'invoice_download': 'consultations',\n  'invoice_mark_paid': 'consultations',\n  'invoice_settings': 'consultations',\n  'todo_create': 'worktracker',\n  'todo_edit': 'worktracker',\n  'todo_delete': 'worktracker',\n  'task_create': 'worktracker',\n  'task_edit': 'worktracker',\n  'task_delete': 'worktracker',\n  'user_create': 'organization_management',\n  'user_edit': 'organization_management',\n  'user_delete': 'organization_management',\n  'role_assign': 'organization_management',\n  'role_create': 'organization_management',\n  'role_edit': 'organization_management',\n  'role_delete': 'organization_management',\n  'organization_create': 'organization_management',\n  'organization_edit': 'organization_management',\n  'organization_delete': 'organization_management',\n  'worktime_start': 'worktracker',\n  'worktime_stop': 'worktracker',\n  'worktime_edit': 'worktracker',\n  'worktime_delete': 'worktracker',\n  'cerebro': 'cerebro',\n  'consultation_start': 'consultations',\n  'consultation_stop': 'consultations',\n  'consultation_edit': 'consultations',\n  'client_create': 'consultations',\n  'client_edit': 'consultations',\n  'client_delete': 'consultations',\n  'settings_system': 'settings',\n  'settings_notifications': 'settings',\n  'settings_profile': 'settings',\n  'payroll_generate': 'payroll',\n  'payroll_export': 'payroll',\n  'payroll_edit': 'payroll',\n  'tour_create': 'tour_management',\n  'tour_edit': 'tour_management',\n  'tour_delete': 'tour_management',\n  'tour_view': 'tour_management',\n  'tour_booking_create': 'tour_management',\n  'tour_booking_edit': 'tour_management',\n  'tour_booking_cancel': 'tour_management',\n  'tour_provider_create': 'tour_management',\n  'tour_provider_edit': 'tour_management',\n  'tour_provider_delete': 'tour_management',\n  'password_entry_create': 'password_manager',\n  'password_entry_edit': 'password_manager',\n  'password_entry_delete': 'password_manager'\n};\n\n// Definiert die Zuordnung von Buttons zu ihren zugehrigen Tabellen\nconst buttonToTableMapping: Record<string, string | null> = {\n  // Worktime Buttons  worktime Tabelle\n  'worktime_start': 'worktime',\n  'worktime_stop': 'worktime',\n  'worktime_edit': 'worktime',\n  'worktime_delete': 'worktime',\n  // Task/Todo Buttons  tasks Tabelle\n  'task_create': 'tasks',\n  'task_edit': 'tasks',\n  'task_delete': 'tasks',\n  'todo_create': 'tasks',\n  'todo_edit': 'tasks',\n  'todo_delete': 'tasks',\n  // Client Buttons  clients Tabelle\n  'client_create': 'clients',\n  'client_edit': 'clients',\n  'client_delete': 'clients',\n  'consultation_start': 'clients',\n  'consultation_stop': 'clients',\n  'consultation_edit': 'clients',\n  // Invoice Buttons  consultation_invoices Tabelle\n  'invoice_create': 'consultation_invoices',\n  'invoice_download': 'consultation_invoices',\n  'invoice_mark_paid': 'consultation_invoices',\n  'invoice_settings': 'consultation_invoices',\n  // User Management Buttons  users/roles Tabellen\n  'user_create': 'users',\n  'user_edit': 'users',\n  'user_delete': 'users',\n  'role_assign': 'roles',\n  'role_create': 'roles',\n  'role_edit': 'roles',\n  'role_delete': 'roles',\n  // Organization Management Buttons  organization Tabelle\n  'organization_create': 'organization',\n  'organization_edit': 'organization',\n  'organization_delete': 'organization',\n  // Settings Buttons  settings Tabelle\n  'settings_system': 'settings',\n  'settings_notifications': 'settings',\n  'settings_profile': 'settings',\n  // Tour Management Buttons  tours/tour_bookings Tabellen\n  'tour_create': 'tours',\n  'tour_edit': 'tours',\n  'tour_delete': 'tours',\n  'tour_view': 'tours',\n  'tour_booking_create': 'tour_bookings',\n  'tour_booking_edit': 'tour_bookings',\n  'tour_booking_cancel': 'tour_bookings',\n  'tour_provider_create': null, // Keine direkte Tabelle\n  'tour_provider_edit': null,\n  'tour_provider_delete': null,\n  // Password Manager Buttons  keine direkte Tabelle (entry-level permissions)\n  'password_entry_create': null,\n  'password_entry_edit': null,\n  'password_entry_delete': null,\n  // Buttons ohne direkte Tabelle-Zuordnung\n  'database_reset_table': null,\n  'database_logs': null,\n  'cerebro': null,\n  'payroll_generate': null,\n  'payroll_export': null,\n  'payroll_edit': null\n};\n\n// Display-Name-Mapping fr Seiten (DB-Interne Bezeichnung  Frontend-Bezeichnung)\n// Wird dynamisch aus bersetzungen geladen\n\n// Display-Name-Mapping fr Tabellen (DB-Interne Bezeichnung  Frontend-Bezeichnung)\n// Wird dynamisch aus bersetzungen geladen\n\n// Display-Name-Mapping fr Buttons wird dynamisch in der Komponente geladen\n\n// TableID fr gespeicherte Filter\nconst ROLES_TABLE_ID = 'roles-table';\n\n// Standardrollen-IDs (fr Rollen ohne Organisation)\nconst STANDARD_ROLE_IDS = [1, 2, 999]; // Admin (1), User (2), Hamburger (999)\n\n// Standardrollen-Namen (drfen nicht bearbeitet/gelscht werden, egal von welcher Organisation)\nconst STANDARD_ROLE_NAMES = ['Admin', 'User', 'Hamburger'];\n\n// Helper-Funktion zur Prfung ob es sich um eine Standardrolle handelt\nconst isStandardRole = (roleId: number, roleName?: string): boolean => {\n  // Prfe zuerst auf Standard-IDs (fr Rollen ohne Organisation)\n  if (STANDARD_ROLE_IDS.includes(roleId)) {\n    return true;\n  }\n  // Prfe auf Standard-Namen (fr Rollen in Organisationen)\n  if (roleName && STANDARD_ROLE_NAMES.includes(roleName)) {\n    return true;\n  }\n  return false;\n};\n\ninterface RoleFormData {\n  name: string;\n  description: string;\n  permissions: {\n    entity: string;\n    entityType: string;\n    accessLevel: AccessLevel;\n  }[];\n}\n\n\n// RoleCard-Komponente fr mobile Ansicht\nconst RoleCard: React.FC<{\n  role: Role;\n  onEdit: (role: Role) => void;\n  onDelete: (roleId: number) => void;\n  onCopy: (role: Role) => void;\n  canEdit: boolean;\n  canDelete: boolean;\n  canCopy: boolean;\n}> = ({ role, onEdit, onDelete, onCopy, canEdit, canDelete, canCopy }) => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4 mb-4\">\n      {/* Header mit Rollenname und Aktionen */}\n      <div className=\"flex justify-between items-start mb-2\">\n        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">{role.name}</h3>\n        \n        <div className=\"flex space-x-2\">\n          {canCopy && (\n            <div className=\"relative group\">\n              <button\n                onClick={() => onCopy(role)}\n                className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n              >\n                <DocumentDuplicateIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('roles.actions.copy')}\n              </div>\n            </div>\n          )}\n          \n          {canEdit && (\n            <div className=\"relative group\">\n              <button\n                onClick={() => onEdit(role)}\n                className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n              >\n                <PencilIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('roles.actions.edit')}\n              </div>\n            </div>\n          )}\n          \n          {canDelete && (\n            <div className=\"relative group\">\n              <button\n                onClick={() => onDelete(role.id)}\n                className=\"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 p-1\"\n              >\n                <TrashIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('roles.actions.delete')}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* Beschreibung */}\n      <p className=\"text-sm text-gray-600 dark:text-gray-400\">{role.description || t('roles.noDescription')}</p>\n      \n      {/* Branch-Zuweisungen */}\n      <div className=\"mt-2\">\n        <span className=\"text-xs text-gray-500 dark:text-gray-400\">\n          {role.allBranches ? (\n            <span className=\"inline-flex items-center px-2 py-0.5 rounded bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300\">\n              {t('roles.form.allBranches') || 'Alle Branches'}\n            </span>\n          ) : role.branches && role.branches.length > 0 ? (\n            <span className=\"inline-flex items-center px-2 py-0.5 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300\">\n              {role.branches.length} {t('roles.form.specificBranches') || 'Branches'}\n            </span>\n          ) : (\n            <span className=\"inline-flex items-center px-2 py-0.5 rounded bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400\">\n              {t('roles.form.noBranches') || 'Keine Branches'}\n            </span>\n          )}\n        </span>\n      </div>\n      \n      {/* Berechtigungen - kompakt */}\n      <div className=\"mt-2\">\n        <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-1\">{t('roles.permissions')}:</h4>\n        <div className=\"flex flex-wrap gap-1\">\n          {role.permissions\n            .filter(perm => perm.accessLevel !== 'none') // Nur relevante Berechtigungen anzeigen\n            .slice(0, 8) // Begrenze die Anzahl der angezeigten Berechtigungen\n            .map(permission => (\n              <span \n                key={`${permission.entity}-${permission.entityType}`}\n                className=\"text-xs bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 px-2 py-1 rounded\"\n              >\n                {permission.entity}: {permission.accessLevel}\n              </span>\n            ))}\n          {role.permissions.filter(perm => perm.accessLevel !== 'none').length > 8 && (\n            <span className=\"text-xs bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-300 px-2 py-1 rounded\">\n                +{role.permissions.filter(perm => perm.accessLevel !== 'none').length - 8} {t('common.showMore')}\n            </span>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst RoleManagementTab: React.FC<RoleManagementTabProps> = ({ onRolesChange, onError, readOnly = false }) => {\n  const { t } = useTranslation();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingRole, setEditingRole] = useState<Role | null>(null);\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [loading, setLoading] = useState(true);\n  \n  // Display-Name-Mapping fr Seiten (dynamisch aus bersetzungen)\n  const pageDisplayNames = useMemo(() => ({\n    'dashboard': t('roles.pages.dashboard'),\n    'worktracker': t('roles.pages.worktracker'),\n    'consultations': t('roles.pages.consultations'),\n    'team_worktime_control': t('roles.pages.team_worktime_control'),\n    'payroll': t('roles.pages.payroll'),\n    'organization_management': t('roles.pages.organization_management'), // Organisation-Seite (Hauptseite)\n    'cerebro': t('roles.pages.cerebro'),\n    'settings': t('roles.pages.settings'),\n    'profile': t('roles.pages.profile'),\n    'tour_management': t('roles.pages.tour_management', 'Touren-Verwaltung'),\n    'password_manager': t('roles.pages.password_manager', 'Passwort-Manager')\n  }), [t]);\n\n  // Display-Name-Mapping fr Tabellen (dynamisch aus bersetzungen)\n  const tableDisplayNames = useMemo(() => ({\n    'tasks': t('roles.tables.tasks'),\n    'reservations': t('roles.tables.reservations'),\n    'worktime': t('roles.tables.worktime'),\n    'users': t('roles.tables.users'),\n    'roles': t('roles.tables.roles'),\n    'organization': t('roles.tables.organization'),\n    'organization_join_requests': t('roles.tables.organization_join_requests'),\n    'organization_users': t('roles.tables.organization_users'),\n    'clients': t('roles.tables.clients'),\n    'consultation_invoices': t('roles.tables.consultation_invoices'),\n    'requests': t('roles.tables.requests'),\n    'team_worktime': t('roles.tables.team_worktime'),\n    'settings': t('roles.tables.settings'),\n    'notifications': t('roles.tables.notifications'),\n    'branches': t('roles.tables.branches'),\n    'monthly_reports': t('roles.tables.monthly_reports'),\n    'tours': t('roles.tables.tours', 'Touren'),\n    'tour_bookings': t('roles.tables.tour_bookings', 'Tour-Buchungen')\n  }), [t]);\n\n  // Display-Name-Mapping fr Buttons (dynamisch aus bersetzungen)\n  const buttonDisplayNames = useMemo(() => ({\n    'worktime_start': t('roles.buttons.worktime_start'),\n    'worktime_stop': t('roles.buttons.worktime_stop'),\n    'worktime_edit': t('roles.buttons.worktime_edit'),\n    'worktime_delete': t('roles.buttons.worktime_delete'),\n    'task_create': t('roles.buttons.task_create'),\n    'task_edit': t('roles.buttons.task_edit'),\n    'task_delete': t('roles.buttons.task_delete'),\n    'todo_create': t('roles.buttons.todo_create'),\n    'todo_edit': t('roles.buttons.todo_edit'),\n    'todo_delete': t('roles.buttons.todo_delete'),\n    'client_create': t('roles.buttons.client_create'),\n    'client_edit': t('roles.buttons.client_edit'),\n    'client_delete': t('roles.buttons.client_delete'),\n    'consultation_start': t('roles.buttons.consultation_start'),\n    'consultation_stop': t('roles.buttons.consultation_stop'),\n    'consultation_edit': t('roles.buttons.consultation_edit'),\n    'invoice_create': t('roles.buttons.invoice_create'),\n    'invoice_download': t('roles.buttons.invoice_download'),\n    'invoice_mark_paid': t('roles.buttons.invoice_mark_paid'),\n    'invoice_settings': t('roles.buttons.invoice_settings'),\n    'user_create': t('roles.buttons.user_create'),\n    'user_edit': t('roles.buttons.user_edit'),\n    'user_delete': t('roles.buttons.user_delete'),\n    'role_assign': t('roles.buttons.role_assign'),\n    'role_create': t('roles.buttons.role_create'),\n    'role_edit': t('roles.buttons.role_edit'),\n    'role_delete': t('roles.buttons.role_delete'),\n    'organization_create': t('roles.buttons.organization_create'),\n    'organization_edit': t('roles.buttons.organization_edit'),\n    'organization_delete': t('roles.buttons.organization_delete'),\n    'settings_system': t('roles.buttons.settings_system'),\n    'settings_notifications': t('roles.buttons.settings_notifications'),\n    'settings_profile': t('roles.buttons.settings_profile'),\n    'database_reset_table': t('roles.buttons.database_reset_table'),\n    'database_logs': t('roles.buttons.database_logs'),\n    'payroll_generate': t('roles.buttons.payroll_generate'),\n    'payroll_export': t('roles.buttons.payroll_export'),\n    'payroll_edit': t('roles.buttons.payroll_edit'),\n    'cerebro': t('roles.buttons.cerebro')\n  }), [t]);\n  const [formData, setFormData] = useState<RoleFormData>({\n    name: '',\n    description: '',\n    permissions: [\n      // Seiten-Berechtigungen\n      ...defaultPages.map(page => ({\n        entity: page,\n        entityType: 'page',\n        accessLevel: 'none' as AccessLevel\n      })),\n      // Tabellen-Berechtigungen\n      ...defaultTables.map(table => ({\n        entity: table,\n        entityType: 'table',\n        accessLevel: 'none' as AccessLevel\n      })),\n      // Button-Berechtigungen\n      ...defaultButtons.map(button => ({\n        entity: button,\n        entityType: 'button',\n        accessLevel: 'none' as AccessLevel\n      }))\n    ]\n  });\n  const [error, setError] = useState<string | null>(null);\n  const { hasPermission } = usePermissions();\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n  \n  // States fr Branch-Zuweisungen\n  const [allBranches, setAllBranches] = useState<boolean>(true);\n  const [selectedBranchIds, setSelectedBranchIds] = useState<number[]>([]);\n  const [branches, setBranches] = useState<Array<{ id: number; name: string }>>([]);\n  const [loadingBranches, setLoadingBranches] = useState(false);\n  \n  // Neue State-Variablen fr erweiterte Filterbedingungen\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  \n  // Filter State Management (Controlled Mode)\n  const [activeFilterName, setActiveFilterName] = useState<string>('Alle');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n  \n  // Responsiveness Hook (640px wie Standard)\n  const [isMobile, setIsMobile] = useState<boolean>(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  \n  // Neue Fehlerbehandlung hinzufgen\n  const { handleError, handleValidationError } = useError();\n  \n  // Neue State-Variablen fr die Berechtigungen\n  const [isAddPermissionModalOpen, setIsAddPermissionModalOpen] = useState(false);\n  const [selectedPermission, setSelectedPermission] = useState<string | null>(null);\n  const [displayLimit, setDisplayLimit] = useState<number>(10);\n  \n  // berwache Bildschirmgre\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isModalOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isModalOpen, openSidepane, closeSidepane]);\n\n  // Funktion zum Laden der Branches\n  const fetchBranches = useCallback(async () => {\n    setLoadingBranches(true);\n    try {\n      const response = await branchApi.getAll();\n      setBranches(response.data);\n    } catch (error) {\n      console.error('Fehler beim Laden der Branches:', error);\n    } finally {\n      setLoadingBranches(false);\n    }\n  }, []);\n\n  // Aktualisiere die fetchRoles-Funktion, um den neuen ErrorHandler zu nutzen\n  const fetchRoles = useCallback(async () => {\n    setLoading(true);\n    console.log('DEBUGAUSGABE: Hole Rollen vom Server...');\n    \n    try {\n      const response = await roleApi.getAll();\n      console.log('DEBUGAUSGABE: Rollen erfolgreich geholt:', response.data);\n      setRoles(response.data);\n      setError(null);\n    } catch (error) {\n      console.error('DEBUGAUSGABE: Fehler beim Abrufen der Rollen:', error);\n      // Nutze den neuen ErrorHandler\n      handleError(error, { \n        component: 'RoleManagementTab', \n        action: 'fetchRoles' \n      });\n      // Rufe auch den bergebenen onError auf, falls vorhanden\n      if (onError) {\n        onError('Fehler beim Laden der Rollen');\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [handleError, onError]);\n\n  // Direkt Rollen laden\n  useEffect(() => {\n    fetchRoles();\n  }, [fetchRoles]);\n\n  // Branches beim ffnen des Modals laden\n  useEffect(() => {\n    if (isModalOpen) {\n      fetchBranches();\n    }\n  }, [isModalOpen, fetchBranches]);\n\n  // Speichern einer Rolle\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n\n    // Validierung: Wenn allBranches = false, mssen Branches ausgewhlt sein\n    if (!allBranches && selectedBranchIds.length === 0) {\n      handleError(t('roles.form.branchSelectionRequired') || 'Bitte whlen Sie mindestens eine Branch aus oder aktivieren Sie \"Fr alle Branches gltig\"', {\n        component: 'RoleManagementTab'\n      });\n      return;\n    }\n    \n    if (!formData.name) {\n      handleValidationError('Rollenname darf nicht leer sein', { name: 'Rollenname ist erforderlich' });\n      return;\n    }\n    \n    if (editingRole) {\n      // Stelle sicher, dass die immer sichtbaren Seiten auch tatschlich auf 'both' gesetzt sind\n      const updatedPermissions = formData.permissions.map(permission => {\n        if (permission.entityType === 'page' && alwaysVisiblePages.includes(permission.entity)) {\n          return { ...permission, accessLevel: 'both' };\n        }\n        return permission;\n      });\n      \n      // Filtere nur die relevanten Berechtigungen (nicht 'none')\n      const filteredPermissions = updatedPermissions\n        .filter(permission => permission.accessLevel !== 'none')\n        .map(permission => ({\n          entity: permission.entity,\n          entityType: permission.entityType,\n          accessLevel: permission.accessLevel\n        }));\n      \n      if (!editingRole.id || isNaN(editingRole.id)) {\n        console.warn('DEBUGAUSGABE: Ungltige Rollen-ID erkannt, Bearbeitung abgebrochen');\n        handleError('Ungltige Rollen-ID, Bearbeitung abgebrochen', { \n          component: 'RoleManagementTab',\n          roleId: editingRole.id\n        });\n        return;\n      }\n      \n      // berprfen, ob es sich um eine geschtzte Rolle handelt\n      if (isStandardRole(editingRole.id, editingRole.name)) {\n        console.warn(`DEBUGAUSGABE: Versuch, geschtzte Rolle mit ID ${editingRole.id} zu bearbeiten`);\n        handleError({\n          message: 'Geschtzte Systemrollen knnen nicht bearbeitet werden',\n          name: 'PermissionError'\n        }, {\n          component: 'RoleManagementTab',\n          roleId: editingRole.id,\n          category: ErrorCategory.PERMISSION\n        });\n        setIsModalOpen(false);\n        return;\n      }\n      \n      // berprfen, ob die Rolle noch in der aktuellen Liste existiert\n      const roleExists = roles.some(r => r.id === editingRole.id);\n      if (!roleExists) {\n        console.error(`DEBUGAUSGABE: Rolle mit ID ${editingRole.id} existiert nicht in der aktuellen Liste`);\n        handleError(`Rolle mit ID ${editingRole.id} existiert nicht mehr. Bitte aktualisieren Sie die Seite.`, {\n          component: 'RoleManagementTab',\n          roleId: editingRole.id\n        });\n        setIsModalOpen(false);\n        // Rollen neu laden, um die Anzeige zu aktualisieren\n        await fetchRoles();\n        return;\n      }\n      \n      console.log(`DEBUGAUSGABE: Bearbeite Rolle mit ID ${editingRole.id}`);\n      \n      try {\n        console.log('DEBUGAUSGABE: Sende Aktualisierung an API:', {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions\n        });\n        \n        const dataToSend = {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions,\n          allBranches: allBranches,\n          branchIds: allBranches ? [] : selectedBranchIds\n        };\n        \n        console.log('DEBUGAUSGABE: Vor dem API-Aufruf roleApi.update');\n        const response = await roleApi.update(editingRole.id, dataToSend);\n        console.log('DEBUGAUSGABE: Nach dem API-Aufruf roleApi.update');\n        console.log('DEBUGAUSGABE: API-Antwort bei Rollenaktualisierung:', response);\n        await fetchRoles();\n      } catch (updateError) {\n        console.error('DEBUGAUSGABE: Fehler bei Rollenaktualisierung:', updateError);\n        if (updateError.response) {\n          // Spezifischere Fehlerbehandlung\n          if (updateError.response.data.meta && updateError.response.data.meta.cause === \"Record to update not found.\") {\n            handleError('Diese Rolle existiert nicht mehr in der Datenbank. Die Anzeige wird aktualisiert.', {\n              component: 'RoleManagementTab',\n              roleId: editingRole.id\n            });\n            setIsModalOpen(false);\n            // Rollenliste aktualisieren, um Frontend zu synchronisieren\n            await fetchRoles();\n          } else {\n            handleError(updateError.response.data.message || 'Fehler beim Aktualisieren der Rolle', {\n              component: 'RoleManagementTab',\n              roleId: editingRole.id\n            });\n          }\n        } else {\n          handleError('Fehler beim Aktualisieren der Rolle', {\n            component: 'RoleManagementTab',\n            roleId: editingRole.id\n          });\n        }\n        return;\n      }\n    } else {\n      // Erstellen einer neuen Rolle\n      try {\n        // Stelle sicher, dass die immer sichtbaren Seiten auch tatschlich auf 'both' gesetzt sind\n        const updatedPermissions = formData.permissions.map(permission => {\n          if (permission.entityType === 'page' && alwaysVisiblePages.includes(permission.entity)) {\n            return { ...permission, accessLevel: 'both' };\n          }\n          return permission;\n        });\n        \n        // Filtere nur die relevanten Berechtigungen (nicht 'none')\n        const filteredPermissions = updatedPermissions\n          .filter(permission => permission.accessLevel !== 'none')\n          .map(permission => ({\n            entity: permission.entity,\n            entityType: permission.entityType,\n            accessLevel: permission.accessLevel\n          }));\n        \n        console.log('DEBUGAUSGABE: Sende Daten an API fr neue Rolle:', {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions\n        });\n        \n        const dataToSend = {\n          name: formData.name,\n          description: formData.description,\n          permissions: filteredPermissions,\n          allBranches: allBranches,\n          branchIds: allBranches ? [] : selectedBranchIds\n        };\n        \n        console.log('DEBUGAUSGABE: Vor dem API-Aufruf roleApi.create');\n        const response = await roleApi.create(dataToSend);\n        console.log('DEBUGAUSGABE: Nach dem API-Aufruf roleApi.create');\n        console.log('DEBUGAUSGABE: API-Antwort beim Erstellen der Rolle:', response);\n        await fetchRoles();\n      } catch (createError) {\n        console.error('DEBUGAUSGABE: Fehler bei API-Anfrage zum Erstellen der Rolle:', createError);\n        if (createError.response) {\n          handleError(createError.response.data.message || 'Fehler beim Erstellen der Rolle', {\n            component: 'RoleManagementTab'\n          });\n        } else {\n          handleError('Fehler beim Erstellen der Rolle', {\n            component: 'RoleManagementTab'\n          });\n        }\n        return;\n      }\n    }\n    \n    if (onRolesChange) onRolesChange();\n    \n    setIsModalOpen(false);\n    resetForm();\n  };\n\n  // Lschen einer Rolle\n  const handleDelete = async (roleId: number) => {\n    if (!roleId || isNaN(roleId)) {\n      console.warn('Ungltige Rollen-ID erkannt, Lschvorgang abgebrochen');\n      handleError('Ungltige Rollen-ID, Lschvorgang abgebrochen', {\n        component: 'RoleManagementTab',\n        roleId: roleId\n      });\n      return;\n    }\n    \n    // Finde die Rolle in der Liste, um den Namen zu prfen\n    const role = roles.find(r => r.id === roleId);\n    \n    // berprfen, ob es sich um eine geschtzte Rolle handelt\n    if (role && isStandardRole(roleId, role.name)) {\n      console.warn(`Versuch, geschtzte Rolle mit ID ${roleId} (${role.name}) zu lschen`);\n      handleError('Geschtzte Systemrollen knnen nicht gelscht werden', {\n        component: 'RoleManagementTab',\n        roleId: roleId\n      });\n      return;\n    }\n    \n    if (!window.confirm('Mchten Sie diese Rolle wirklich lschen?')) return;\n    \n    try {\n      console.log(`Starte Lschvorgang fr Rolle mit ID ${roleId}`);\n      \n      // berprfen, ob die Rolle in der aktuellen Liste existiert\n      const roleExists = roles.some(r => r.id === roleId);\n      if (!roleExists) {\n        console.error(`Rolle mit ID ${roleId} existiert nicht in der aktuellen Liste`);\n        handleError(`Rolle mit ID ${roleId} existiert nicht mehr. Bitte aktualisieren Sie die Seite.`, {\n          component: 'RoleManagementTab',\n          roleId: roleId\n        });\n        // Rollen neu laden, um die Anzeige zu aktualisieren\n        await fetchRoles();\n        return;\n      }\n      \n      // Bei Mock-Daten lokales Lschen (wird nicht verwendet)\n      if (false) {\n        console.log('Lsche Mock-Rolle');\n        const updatedRoles = roles.filter(role => role.id !== roleId);\n        setRoles(updatedRoles);\n      } else {\n        console.log('Sende Lschanfrage an API');\n        \n        try {\n          const response = await roleApi.delete(roleId);\n          console.log('API-Antwort beim Lschen der Rolle:', response);\n          \n          // Nach erfolgreichem Lschen die Rollenliste aktualisieren\n          await fetchRoles();\n          console.log('Rollenliste nach Lschen aktualisiert');\n        } catch (deleteError) {\n          console.error('API-Fehler beim Lschen der Rolle:', deleteError);\n          \n          if (deleteError.response) {\n            console.error('API-Fehlerdaten:', deleteError.response.data);\n            \n            // Spezifischere Fehlerbehandlung\n            if (deleteError.response.data.meta && deleteError.response.data.meta.cause === \"Record to delete does not exist.\") {\n              handleError('Diese Rolle existiert nicht mehr in der Datenbank. Die Anzeige wird aktualisiert.', {\n                component: 'RoleManagementTab',\n                roleId: roleId\n              });\n              // Rollenliste aktualisieren, um Frontend zu synchronisieren\n              await fetchRoles();\n            } else {\n              handleError(deleteError.response.data.message || t('roleManagement.deleteError'), {\n                component: 'RoleManagementTab',\n                roleId: roleId\n              });\n            }\n          } else {\n            handleError(t('roleManagement.networkError'), {\n              component: 'RoleManagementTab',\n              roleId: roleId\n            });\n          }\n          return;\n        }\n      }\n      \n      console.log('Rolle erfolgreich gelscht');\n      if (onRolesChange) onRolesChange();\n    } catch (err) {\n      console.error(t('roleManagement.unhandledError'), err);\n      handleError(err);\n      \n      // Bei einem unbehandelten Fehler trotzdem versuchen, die Rollenliste zu aktualisieren\n      try {\n        await fetchRoles();\n      } catch (refreshError) {\n        console.error('Fehler beim Aktualisieren der Rollenliste nach fehlgeschlagenem Lschvorgang:', refreshError);\n      }\n    }\n  };\n\n  // Kopieren einer Rolle (fr Standardrollen)\n  const handleCopyRole = async (role: Role) => {\n    try {\n      if (!role || !role.id) {\n        handleError('Ungltige Rolle zum Kopieren', {\n          component: 'RoleManagementTab'\n        });\n        return;\n      }\n\n      // Kopie der Rolle erstellen mit angepasstem Namen\n      const copiedRoleData = {\n        name: `${role.name}-Kopie`,\n        description: role.description || '',\n        permissions: role.permissions\n          .filter(permission => permission.accessLevel !== 'none')\n          .map(permission => ({\n            entity: permission.entity,\n            entityType: permission.entityType,\n            accessLevel: permission.accessLevel\n          }))\n      };\n\n      console.log('DEBUGAUSGABE: Kopiere Rolle:', role.name, 'mit Daten:', copiedRoleData);\n\n      // Rolle erstellen\n      const response = await roleApi.create(copiedRoleData);\n      console.log('DEBUGAUSGABE: Rolle erfolgreich kopiert:', response.data);\n\n      // Optimistisches Update: Neue Rolle zur Liste hinzufgen\n      setRoles(prevRoles => [response.data, ...prevRoles]);\n      \n      // Bearbeitungsmodal fr die kopierte Rolle ffnen\n      prepareRoleForEditing(response.data);\n      \n      if (onRolesChange) onRolesChange();\n    } catch (err) {\n      console.error('DEBUGAUSGABE: Fehler beim Kopieren der Rolle:', err);\n      handleError(err, {\n        component: 'RoleManagementTab',\n        roleId: role.id\n      });\n    }\n  };\n\n  // Rolle zum Bearbeiten vorbereiten\n  const prepareRoleForEditing = async (role: Role) => {\n    // Verhindere das Bearbeiten von geschtzten Rollen\n    if (isStandardRole(role.id, role.name)) {\n      handleError('Geschtzte Systemrollen knnen nicht bearbeitet werden', {\n        component: 'RoleManagementTab',\n        roleId: role.id\n      });\n      return;\n    }\n    \n    // Alle mglichen Berechtigungen erstellen (Seiten, Tabellen und Buttons)\n    const allPermissions = [\n      ...defaultPages.map(page => ({\n        entity: page,\n        entityType: 'page',\n        // Fr die immer sichtbaren Seiten 'both' als Standard setzen\n        accessLevel: alwaysVisiblePages.includes(page) ? 'both' as AccessLevel : 'none' as AccessLevel\n      })),\n      ...defaultTables.map(table => ({\n        entity: table,\n        entityType: 'table',\n        accessLevel: 'none' as AccessLevel\n      })),\n      ...defaultButtons.map(button => ({\n        entity: button,\n        entityType: 'button',\n        accessLevel: 'none' as AccessLevel\n      }))\n    ];\n\n    // Vorhandene Berechtigungen bernehmen\n    role.permissions.forEach(permission => {\n      const existingPermIndex = allPermissions.findIndex(\n        p => p.entity === permission.entity && p.entityType === permission.entityType\n      );\n      \n      if (existingPermIndex !== -1) {\n        // Stelle sicher, dass alwaysVisiblePages immer 'both' als AccessLevel haben\n        if (permission.entityType === 'page' && alwaysVisiblePages.includes(permission.entity)) {\n          allPermissions[existingPermIndex].accessLevel = 'both';\n        } else {\n          allPermissions[existingPermIndex].accessLevel = permission.accessLevel;\n        }\n      }\n    });\n\n    setFormData({\n      name: role.name,\n      description: role.description || '',\n      permissions: allPermissions\n    });\n    \n    // Lade Branch-Zuweisungen der Rolle\n    if (role.id) {\n      try {\n        const branchResponse = await roleApi.getRoleBranches(role.id);\n        const branchData = branchResponse.data;\n        setAllBranches(branchData.allBranches || false);\n        setSelectedBranchIds(branchData.branches?.map((b: any) => b.id) || []);\n      } catch (error) {\n        console.error('Fehler beim Laden der Branch-Zuweisungen:', error);\n        setAllBranches(true);\n        setSelectedBranchIds([]);\n      }\n    }\n    \n    setEditingRole(role);\n    setIsModalOpen(true);\n  };\n\n  // Formular fr neue Rolle zurcksetzen\n  const resetForm = () => {\n    setEditingRole(null);\n    setAllBranches(true);\n    setSelectedBranchIds([]);\n    setFormData({\n      name: '',\n      description: '',\n      permissions: [\n        // Seiten-Berechtigungen\n        ...defaultPages.map(page => ({\n          entity: page,\n          entityType: 'page',\n          // Fr die immer sichtbaren Seiten 'both' als Standard setzen\n          accessLevel: alwaysVisiblePages.includes(page) ? 'both' as AccessLevel : 'none' as AccessLevel\n        })),\n        // Tabellen-Berechtigungen\n        ...defaultTables.map(table => ({\n          entity: table,\n          entityType: 'table',\n          accessLevel: 'none' as AccessLevel\n        })),\n        // Button-Berechtigungen\n        ...defaultButtons.map(button => ({\n          entity: button,\n          entityType: 'button',\n          accessLevel: 'none' as AccessLevel\n        }))\n      ]\n    });\n  };\n\n  // Setzt alle Seitenberechtigungen (auer die immer sichtbaren) auf den gleichen Wert\n  const setAllPagePermissions = (accessLevel: AccessLevel) => {\n    const newPermissions = [...formData.permissions];\n    \n    formData.permissions\n      .filter(p => p.entityType === 'page' && !alwaysVisiblePages.includes(p.entity))\n      .forEach(permission => {\n        const permIndex = formData.permissions.indexOf(permission);\n        newPermissions[permIndex] = {\n          ...permission,\n          accessLevel\n        };\n      });\n    \n    setFormData({ ...formData, permissions: newPermissions });\n  };\n\n  // Setzt alle Tabellen-Berechtigungen auf den gleichen Wert\n  const setAllTablePermissions = (accessLevel: AccessLevel) => {\n    const newPermissions = [...formData.permissions];\n    \n    formData.permissions\n      .filter(p => p.entityType === 'table')\n      .forEach(permission => {\n        const permIndex = formData.permissions.indexOf(permission);\n        newPermissions[permIndex] = {\n          ...permission,\n          accessLevel\n        };\n      });\n    \n    setFormData({ ...formData, permissions: newPermissions });\n  };\n\n  // Setzt alle Button-Berechtigungen auf den gleichen Wert\n  const setAllButtonPermissions = (accessLevel: AccessLevel) => {\n    const newPermissions = [...formData.permissions];\n    \n    formData.permissions\n      .filter(p => p.entityType === 'button')\n      .forEach(permission => {\n        const permIndex = formData.permissions.indexOf(permission);\n        newPermissions[permIndex] = {\n          ...permission,\n          accessLevel\n        };\n      });\n    \n    setFormData({ ...formData, permissions: newPermissions });\n  };\n\n  // Funktion zum Zhlen der aktiven Filter\n  const getActiveFilterCount = () => {\n    return filterConditions.length;\n  };\n\n  // Filtern und sortieren der Rollen\n  const filteredAndSortedRoles = useMemo(() => {\n    return roles\n      .filter(role => {\n        // Globale Suche\n        if (searchTerm) {\n          const searchLower = searchTerm.toLowerCase();\n          const matchesSearch = \n            role.name.toLowerCase().includes(searchLower) ||\n            (role.description && role.description.toLowerCase().includes(searchLower));\n          \n          if (!matchesSearch) return false;\n        }\n        \n        // Prfe erweiterte Filterbedingungen, wenn vorhanden\n        if (filterConditions.length > 0) {\n          // Implementiere die logische Verknpfung der Bedingungen (UND/ODER)\n          let result = filterConditions.length > 0;\n          \n          for (let i = 0; i < filterConditions.length; i++) {\n            const condition = filterConditions[i];\n            let conditionMet = false;\n            \n            switch (condition.column) {\n              case 'name':\n                if (condition.operator === 'equals') {\n                  conditionMet = role.name.toLowerCase() === (condition.value as string || '').toLowerCase();\n                } else if (condition.operator === 'contains') {\n                  conditionMet = role.name.toLowerCase().includes((condition.value as string || '').toLowerCase());\n                } else if (condition.operator === 'startsWith') {\n                  conditionMet = role.name.toLowerCase().startsWith((condition.value as string || '').toLowerCase());\n                }\n                break;\n              \n              case 'description':\n                if (!role.description) {\n                  conditionMet = false;\n                  break;\n                }\n                \n                if (condition.operator === 'equals') {\n                  conditionMet = role.description.toLowerCase() === (condition.value as string || '').toLowerCase();\n                } else if (condition.operator === 'contains') {\n                  conditionMet = role.description.toLowerCase().includes((condition.value as string || '').toLowerCase());\n                } else if (condition.operator === 'startsWith') {\n                  conditionMet = role.description.toLowerCase().startsWith((condition.value as string || '').toLowerCase());\n                }\n                break;\n              \n              case 'permissions':\n                // Vereinfachter Filter fr Berechtigungen - zhle die Anzahl der Berechtigungen mit dem angegebenen Level\n                const accessLevel = condition.value as AccessLevel;\n                const count = role.permissions.filter(p => p.accessLevel === accessLevel).length;\n                \n                if (condition.operator === 'greaterThan') {\n                  conditionMet = count > 0;\n                } else if (condition.operator === 'equals') {\n                  conditionMet = count > 0;\n                }\n                break;\n            }\n            \n            // Verknpfe das Ergebnis dieser Bedingung mit dem Gesamtergebnis\n            if (i === 0) {\n              result = conditionMet;\n            } else {\n              const operator = filterLogicalOperators[i - 1];\n              result = operator === 'AND' ? (result && conditionMet) : (result || conditionMet);\n            }\n          }\n          \n          if (!result) return false;\n        }\n        \n        return true;\n      })\n      .sort((a, b) => {\n        return a.name.localeCompare(b.name);\n      });\n  }, [roles, searchTerm, filterConditions, filterLogicalOperators]);\n\n  // Mobile Ansicht renderRoles-Funktion\n  const renderRoles = () => {\n    if (roles.length === 0) {\n      return (\n        <div className=\"p-4 bg-gray-50 rounded text-center\">\n          <p>Keine Rollen gefunden. Erstellen Sie eine neue Rolle mit dem Button oben.</p>\n        </div>\n      );\n    }\n    \n    if (isMobile) {\n      // Mobile Ansicht mit Karten\n      return (\n        <>\n          <div className=\"space-y-4\">\n            {filteredAndSortedRoles.slice(0, displayLimit).map((role) => (\n              <RoleCard \n                key={role.id} \n                role={role} \n                onEdit={prepareRoleForEditing}\n                onDelete={handleDelete}\n                onCopy={handleCopyRole}\n                canEdit={!readOnly && hasPermission('roles', 'write', 'table') && !isStandardRole(role.id, role.name)}\n                canDelete={!readOnly && hasPermission('roles', 'write', 'table') && !isStandardRole(role.id, role.name)}\n                canCopy={!readOnly && hasPermission('roles', 'write', 'table') && isStandardRole(role.id, role.name)}\n              />\n            ))}\n          </div>\n          \n          {/* \"Mehr anzeigen\" Button - Mobil */}\n          {filteredAndSortedRoles.length > displayLimit && (\n            <div className=\"mt-4 flex justify-center\">\n              <div className=\"relative group\">\n                <button\n                  className=\"p-2 text-blue-600 bg-white border border-blue-300 rounded-md hover:bg-blue-50 dark:bg-gray-800 dark:text-blue-400 dark:border-gray-700 dark:hover:bg-gray-700\"\n                  onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n                >\n                  <ChevronDownIcon className=\"h-5 w-5\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {`Mehr anzeigen (${filteredAndSortedRoles.length - displayLimit} verbleibend)`}\n                </div>\n              </div>\n            </div>\n          )}\n        </>\n      );\n    } else {\n      // Card-Ansicht fr grere Bildschirme\n      return (\n        <>\n          <div className=\"space-y-4\">\n            {filteredAndSortedRoles.slice(0, displayLimit).map((role) => (\n              <RoleCard \n                key={role.id} \n                role={role} \n                onEdit={prepareRoleForEditing}\n                onDelete={handleDelete}\n                onCopy={handleCopyRole}\n                canEdit={!readOnly && hasPermission('roles', 'write', 'table') && !isStandardRole(role.id, role.name)}\n                canDelete={!readOnly && hasPermission('roles', 'write', 'table') && !isStandardRole(role.id, role.name)}\n                canCopy={!readOnly && hasPermission('roles', 'write', 'table') && isStandardRole(role.id, role.name)}\n              />\n            ))}\n          </div>\n          \n          {/* \"Mehr anzeigen\" Button - Desktop */}\n          {filteredAndSortedRoles.length > displayLimit && (\n            <div className=\"mt-4 flex justify-center\">\n              <div className=\"relative group\">\n                <button\n                  className=\"p-2 text-blue-600 bg-white border border-blue-300 rounded-md hover:bg-blue-50 dark:bg-gray-800 dark:text-blue-400 dark:border-gray-700 dark:hover:bg-gray-700\"\n                  onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n                >\n                  <ChevronDownIcon className=\"h-5 w-5\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {`Mehr anzeigen (${filteredAndSortedRoles.length - displayLimit} verbleibend)`}\n                </div>\n              </div>\n            </div>\n          )}\n        </>\n      );\n    }\n  };\n\n  // Standard-Filter erstellen und speichern\n  useEffect(() => {\n    const createStandardFilters = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        \n        if (!token) {\n          console.error('Nicht authentifiziert');\n          return;\n        }\n\n        // Prfen, ob die Standard-Filter bereits existieren\n        const existingFiltersResponse = await axiosInstance.get(\n          API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(ROLES_TABLE_ID)\n        );\n\n        const existingFilters = existingFiltersResponse.data || [];\n        const alleFilterExists = existingFilters.some(filter => filter.name === 'Alle');\n\n        // Erstelle \"Alle\"-Filter, wenn er noch nicht existiert\n        if (!alleFilterExists) {\n          const alleFilter = {\n            tableId: ROLES_TABLE_ID,\n            name: 'Alle',\n            conditions: [],\n            operators: []\n          };\n\n          await axiosInstance.post(\n            API_ENDPOINTS.SAVED_FILTERS.BASE,\n            alleFilter\n          );\n          console.log('Alle-Filter fr Rollen erstellt');\n        }\n      } catch (error) {\n        console.error('Fehler beim Erstellen der Standard-Filter:', error);\n      }\n    };\n\n    createStandardFilters();\n  }, []);\n\n  // Initialer Default-Filter setzen (Controlled Mode)\n  useEffect(() => {\n    const setInitialFilter = async () => {\n      try {\n        const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(ROLES_TABLE_ID));\n        const filters = response.data;\n        \n        const alleFilter = filters.find((filter: any) => filter.name === 'Alle');\n        if (alleFilter) {\n          setActiveFilterName('Alle');\n          setSelectedFilterId(alleFilter.id);\n          applyFilterConditions(alleFilter.conditions, alleFilter.operators);\n        }\n      } catch (error) {\n        console.error('Fehler beim Setzen des initialen Filters:', error);\n      }\n    };\n\n    setInitialFilter();\n  }, []);\n\n  // Funktion zum Anwenden von Filterbedingungen\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n  };\n  \n  // Funktion zum Zurcksetzen der Filter\n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n  \n  // Filter Change Handler (Controlled Mode)\n  const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators);\n  };\n\n  return (\n    <div>\n      {/* Spaltenanzeige und Suche */}\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center justify-between mb-4\">\n          {/* Linke Seite: \"Neue Rolle erstellen\"-Button */}\n          <div className=\"flex items-center\">\n            {!readOnly && hasPermission('roles', 'write', 'table') && (\n              <div className=\"relative group\">\n                <button\n                  onClick={() => setIsModalOpen(true)}\n                  className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n                  style={{ width: '30.19px', height: '30.19px' }}\n                  aria-label={t('roles.createRole')}\n                >\n                  <PlusIcon className=\"h-4 w-4\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {t('roles.createRole')}\n                </div>\n              </div>\n            )}\n          </div>\n          \n          {/* Mitte: Titel - Kein Titel in der Mitte notwendig bei dieser Komponente, da der Tab-Header bereits den Titel zeigt */}\n          <div></div>\n          \n          {/* Rechte Seite: Suchfeld, Filter-Button, Spalten-Konfiguration */}\n          <div className=\"flex items-center gap-1.5\">\n            <input\n              type=\"text\"\n              placeholder=\"Suchen...\"\n              className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n            />\n            <div className=\"relative group ml-1\">\n              <button\n                className={`p-2 rounded-md ${getActiveFilterCount() > 0 ? 'bg-blue-50 text-blue-600' : 'hover:bg-gray-100'}`}\n                onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n              >\n                <FunnelIcon className=\"w-5 h-5\" />\n                {getActiveFilterCount() > 0 && (\n                  <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 text-white rounded-full text-xs flex items-center justify-center\">\n                    {getActiveFilterCount()}\n                  </span>\n                )}\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                Filter\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Filter-Modal */}\n        {isFilterModalOpen && (\n          <FilterPane\n            columns={[\n              { id: 'name', label: 'Name' },\n              { id: 'description', label: 'Beschreibung' },\n              { id: 'permissions', label: 'Berechtigungen' }\n            ]}\n            onApply={applyFilterConditions}\n            onReset={resetFilterConditions}\n            savedConditions={filterConditions}\n            savedOperators={filterLogicalOperators}\n            tableId={ROLES_TABLE_ID}\n          />\n        )}\n        \n        {/* Gespeicherte Filter als Tags anzeigen */}\n        <SavedFilterTags\n          tableId={ROLES_TABLE_ID}\n          onSelectFilter={applyFilterConditions}\n          onReset={resetFilterConditions}\n          activeFilterName={activeFilterName}\n          selectedFilterId={selectedFilterId}\n          onFilterChange={handleFilterChange}\n          defaultFilterName=\"Alle\"\n        />\n\n        {loading ? (\n          <div className=\"flex justify-center items-center py-8\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n          </div>\n        ) : (\n          renderRoles()\n        )}\n      </div>\n\n      {/* Modal/Sidepane fr Rollenerstellung/Bearbeitung */}\n      {isModalOpen && (\n        <>\n          {/* Mobile (unter 640px) - Modal */}\n          {isMobile ? (\n            <Dialog open={isModalOpen} onClose={() => setIsModalOpen(false)} className=\"relative z-50\">\n              <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n              \n              <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[calc(100vh-2rem)] flex flex-col overflow-hidden\">\n                  {/* Header */}\n                  <div className=\"px-6 py-4 border-b dark:border-gray-700 flex-shrink-0\">\n                    <div className=\"flex items-center justify-between\">\n                      <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                        {editingRole ? t('roles.editRole') : t('roles.createRole')}\n                      </Dialog.Title>\n                      <button\n                        onClick={() => setIsModalOpen(false)}\n                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                      >\n                        <XMarkIcon className=\"h-6 w-6\" />\n                      </button>\n                    </div>\n                  </div>\n                  \n                  {/* Form */}\n                  <form onSubmit={handleSubmit} className=\"flex flex-col flex-1 min-h-0\">\n                    {/* Content - scrollbarer Bereich */}\n                    <div className=\"flex-1 overflow-y-auto min-h-0\">\n                      <div className=\"p-6 space-y-5\">\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Name</label>\n                  <input\n                    type=\"text\"\n                    value={formData.name}\n                    onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                    required\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Beschreibung</label>\n                  <input\n                    type=\"text\"\n                    value={formData.description}\n                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                  />\n                </div>\n                  </div>\n                  \n                  {/* Branch-Zuweisungen */}\n                  <div className=\"mt-4\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      {t('roles.form.branchAssignment') || 'Branch-Zuweisung'}\n                    </label>\n                    <div className=\"space-y-3\">\n                      <label className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          checked={allBranches}\n                          onChange={(e) => {\n                            setAllBranches(e.target.checked);\n                            if (e.target.checked) {\n                              setSelectedBranchIds([]);\n                            }\n                          }}\n                          className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                        />\n                        <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                          {t('roles.form.allBranches') || 'Fr alle Branches gltig'}\n                        </span>\n                      </label>\n                      \n                      {!allBranches && (\n                        <div className=\"ml-6\">\n                          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                            {t('roles.form.specificBranches') || 'Spezifische Branches:'}\n                          </label>\n                          {loadingBranches ? (\n                            <div className=\"text-sm text-gray-500\">Lade Branches...</div>\n                          ) : branches.length === 0 ? (\n                            <div className=\"text-sm text-gray-500\">Keine Branches verfgbar</div>\n                          ) : (\n                            <div className=\"space-y-2 max-h-40 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-md p-2\">\n                              {branches.map((branch) => (\n                                <label key={branch.id} className=\"flex items-center\">\n                                  <input\n                                    type=\"checkbox\"\n                                    checked={selectedBranchIds.includes(branch.id)}\n                                    onChange={(e) => {\n                                      if (e.target.checked) {\n                                        setSelectedBranchIds([...selectedBranchIds, branch.id]);\n                                      } else {\n                                        setSelectedBranchIds(selectedBranchIds.filter(id => id !== branch.id));\n                                      }\n                                    }}\n                                    className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                                  />\n                                  <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                                    {branch.name}\n                                  </span>\n                                </label>\n                              ))}\n                            </div>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                  \n                  <div className=\"mt-2\">\n                    <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('roles.form.detailedPermissions')}</label>\n                        {/* Bulk Actions - kompakt integriert */}\n                        <div className=\"flex flex-wrap items-center gap-1.5\">\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllPagePermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800\"\n                            >\n                              {t('roles.form.pagesChecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.activateAllPages')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllPagePermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              {t('roles.form.pagesUnchecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.deactivateAllPages')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllTablePermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800\"\n                            >\n                              {t('roles.form.tablesChecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.activateAllTables')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllTablePermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              {t('roles.form.tablesUnchecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.deactivateAllTables')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllButtonPermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800\"\n                            >\n                              {t('roles.form.buttonsChecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.activateAllButtons')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllButtonPermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              {t('roles.form.buttonsUnchecked')}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('roles.form.deactivateAllButtons')}\n                            </div>\n                          </div>\n                        </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-1 gap-4 overflow-y-auto border rounded-lg p-4 dark:border-gray-600\">\n                    {formData.permissions\n                      .filter(permission => \n                        permission.entityType === 'page'\n                      )\n                      .map((permission, index) => {\n                        const permIndex = formData.permissions.indexOf(permission);\n                        const isActive = permission.accessLevel === 'both';\n                        return (\n                          <div key={`permission-page-${permission.entity}-${index}`}>\n                            <div className=\"flex items-center justify-between\">\n                              <span className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{pageDisplayNames[permission.entity] || permission.entity}</span>\n                              <label className={`inline-flex items-center ${alwaysVisiblePages.includes(permission.entity) ? 'cursor-not-allowed opacity-80' : 'cursor-pointer'}`}>\n                                <input\n                                  type=\"checkbox\"\n                                  className=\"sr-only peer\"\n                                  checked={isActive}\n                                  disabled={alwaysVisiblePages.includes(permission.entity)}\n                                  onChange={() => {\n                                    const newPermissions = [...formData.permissions];\n                                    newPermissions[permIndex] = {\n                                      ...permission,\n                                      accessLevel: isActive ? 'none' : 'both'\n                                    };\n                                    setFormData({ ...formData, permissions: newPermissions });\n                                  }}\n                                />\n                                <div className={`relative w-11 h-6 ${alwaysVisiblePages.includes(permission.entity) ? 'bg-blue-600 dark:bg-blue-700' : 'bg-gray-200 dark:bg-gray-700'} peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700`}>\n                                  {alwaysVisiblePages.includes(permission.entity) && (\n                                    <span className=\"absolute inset-0 flex items-center justify-center text-xs text-white font-medium\">\n                                      Fix\n                                    </span>\n                                  )}\n                                </div>\n                              </label>\n                            </div>\n                            \n                            {/* Tabellen-Berechtigungen mit zugehrigen Buttons gruppiert */}\n                            {formData.permissions\n                              .filter(tablePerm => \n                                tablePerm.entityType === 'table' && \n                                tableToPageMapping[tablePerm.entity] === permission.entity\n                              )\n                              .sort((a, b) => {\n                                const aName = tableDisplayNames[a.entity] || a.entity;\n                                const bName = tableDisplayNames[b.entity] || b.entity;\n                                // Sortierung: users, roles, organization zuerst (in dieser Reihenfolge)\n                                const priorityOrder = ['users', 'roles', 'organization'];\n                                const aIndex = priorityOrder.indexOf(a.entity);\n                                const bIndex = priorityOrder.indexOf(b.entity);\n                                if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;\n                                if (aIndex !== -1) return -1;\n                                if (bIndex !== -1) return 1;\n                                return aName.localeCompare(bName);\n                              })\n                              .map((tablePerm, tableIndex) => {\n                                const tablePermIndex = formData.permissions.indexOf(tablePerm);\n                                const isTableActive = tablePerm.accessLevel === 'both';\n                                const tableEntity = tablePerm.entity;\n                                const tableDisplayName = tableDisplayNames[tableEntity] || tableEntity;\n                                \n                                // Finde alle Buttons, die zu dieser Tabelle gehren\n                                // Filtere Duplikate: task_* und todo_* sind dasselbe, nur task_* behalten\n                                const relatedButtons = formData.permissions\n                                  .filter(buttonPerm => \n                                    buttonPerm.entityType === 'button' && \n                                    buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                    buttonToTableMapping[buttonPerm.entity] === tableEntity &&\n                                    // Entferne todo_* Buttons wenn task_* existiert (sind dasselbe)\n                                    !(tableEntity === 'tasks' && buttonPerm.entity.startsWith('todo_'))\n                                  )\n                                  .sort((a, b) => {\n                                    const aName = buttonDisplayNames[a.entity] || a.entity;\n                                    const bName = buttonDisplayNames[b.entity] || b.entity;\n                                    // Logische Reihenfolge: Start, Stop, Erstellen, Bearbeiten, Lschen, dann alphabetisch\n                                    const order = [\n                                      t('roleManagement.buttonOrder.start'),\n                                      t('roleManagement.buttonOrder.stop'),\n                                      t('roleManagement.buttonOrder.create'),\n                                      t('roleManagement.buttonOrder.edit'),\n                                      t('roleManagement.buttonOrder.delete')\n                                    ];\n                                    const aIndex = order.indexOf(aName);\n                                    const bIndex = order.indexOf(bName);\n                                    if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;\n                                    if (aIndex !== -1) return -1;\n                                    if (bIndex !== -1) return 1;\n                                    return aName.localeCompare(bName);\n                                  });\n                                \n                                return (\n                                  <div key={`table-permission-${tableEntity}-${tableIndex}`} className=\"mt-3\">\n                                    {/* Tabelle selbst */}\n                                    <div className=\"flex items-center justify-between pl-6 border-l-2 border-blue-300 dark:border-blue-600\">\n                                      <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\"> {tableDisplayName}</span>\n                                      <label className=\"inline-flex items-center cursor-pointer\">\n                                        <input\n                                          type=\"checkbox\"\n                                          className=\"sr-only peer\"\n                                          checked={isTableActive}\n                                          onChange={() => {\n                                            const newPermissions = [...formData.permissions];\n                                            newPermissions[tablePermIndex] = {\n                                              ...tablePerm,\n                                              accessLevel: isTableActive ? 'none' : 'both'\n                                            };\n                                            setFormData({ ...formData, permissions: newPermissions });\n                                          }}\n                                        />\n                                        <div className=\"relative w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                        </div>\n                                      </label>\n                                    </div>\n                                    \n                                    {/* Zu dieser Tabelle gehrige Buttons */}\n                                    {relatedButtons.map((buttonPerm, buttonIndex) => {\n                                      const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                      const isButtonActive = buttonPerm.accessLevel === 'both';\n                                      const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                      return (\n                                        <div key={`button-permission-${buttonPerm.entity}-${buttonIndex}`} \n                                          className=\"flex items-center justify-between mt-2 pl-12 border-l-2 border-gray-300 dark:border-gray-600\">\n                                          <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                          <label className=\"inline-flex items-center cursor-pointer\">\n                                            <input\n                                              type=\"checkbox\"\n                                              className=\"sr-only peer\"\n                                              checked={isButtonActive}\n                                              onChange={() => {\n                                                const newPermissions = [...formData.permissions];\n                                                newPermissions[buttonPermIndex] = {\n                                                  ...buttonPerm,\n                                                  accessLevel: isButtonActive ? 'none' : 'both'\n                                                };\n                                                setFormData({ ...formData, permissions: newPermissions });\n                                              }}\n                                            />\n                                            <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                            </div>\n                                          </label>\n                                        </div>\n                                      );\n                                    })}\n                                  </div>\n                                );\n                              })\n                            }\n                              \n                              {/* Button-Berechtigungen ohne Tabelle-Zuordnung (am Ende) */}\n                              {formData.permissions\n                                .filter(buttonPerm => \n                                  buttonPerm.entityType === 'button' && \n                                  buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                  !buttonToTableMapping[buttonPerm.entity]\n                                )\n                                .sort((a, b) => {\n                                  const aName = buttonDisplayNames[a.entity] || a.entity;\n                                  const bName = buttonDisplayNames[b.entity] || b.entity;\n                                  return aName.localeCompare(bName);\n                                })\n                                .map((buttonPerm, buttonIndex) => {\n                                  const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                  const isButtonActive = buttonPerm.accessLevel === 'both';\n                                  const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                  return (\n                                    <div key={`button-permission-${buttonPerm.entity}-${buttonIndex}`} \n                                      className=\"flex items-center justify-between mt-2 pl-6 border-l-2 border-gray-300 dark:border-gray-600\">\n                                      <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                      <label className=\"inline-flex items-center cursor-pointer\">\n                                        <input\n                                          type=\"checkbox\"\n                                          className=\"sr-only peer\"\n                                          checked={isButtonActive}\n                                          onChange={() => {\n                                            const newPermissions = [...formData.permissions];\n                                            newPermissions[buttonPermIndex] = {\n                                              ...buttonPerm,\n                                              accessLevel: isButtonActive ? 'none' : 'both'\n                                            };\n                                            setFormData({ ...formData, permissions: newPermissions });\n                                          }}\n                                        />\n                                        <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                        </div>\n                                      </label>\n                          </div>\n                        );\n                      })\n                    }\n                            </div>\n                          );\n                        })\n                      }\n                    </div>\n                  </div>\n                    </div>\n                  </div>\n                  \n                  {/* Footer */}\n                  <div className=\"px-6 py-4 bg-gray-50 dark:bg-gray-700 flex justify-end gap-2 border-t dark:border-gray-600 flex-shrink-0\">\n                    <div className=\"relative group\">\n                      <button\n                        type=\"button\"\n                        onClick={() => setIsModalOpen(false)}\n                        className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                      >\n                        <XMarkIcon className=\"h-5 w-5\" />\n                      </button>\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                        Abbrechen\n                      </div>\n                    </div>\n                    <div className=\"relative group\">\n                      <button\n                        type=\"submit\"\n                        className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                      >\n                        <CheckIcon className=\"h-5 w-5\" />\n                      </button>\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                        {editingRole ? 'Aktualisieren' : 'Erstellen'}\n                      </div>\n                    </div>\n                  </div>\n                </form>\n              </Dialog.Panel>\n            </div>\n          </Dialog>\n          ) : (\n            /* Desktop (ab 640px) - Sidepane */\n            /* WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition */\n            <>\n              {/* Backdrop - nur wenn offen und <= 1070px */}\n              {/* Hinweis: onClick entfernt, da Backdrop pointer-events: none hat, damit Hauptinhalt interaktiv bleibt */}\n              {isModalOpen && !isLargeScreen && (\n                <div \n                  className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n                  aria-hidden=\"true\" \n                  style={{\n                    opacity: isModalOpen ? 1 : 0,\n                    transition: 'opacity 300ms ease-out'\n                  }}\n                />\n              )}\n              \n              {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n              <div \n                className={`fixed top-16 bottom-0 right-0 max-w-2xl w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isModalOpen ? 'translate-x-0' : 'translate-x-full'}`}\n                style={{\n                  transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n                  pointerEvents: isModalOpen ? 'auto' : 'none'\n                }}\n                aria-hidden={!isModalOpen}\n                role=\"dialog\"\n                aria-modal={isModalOpen}\n              >\n                <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n                  <h2 className=\"text-lg font-semibold dark:text-white\">\n                    {editingRole ? 'Rolle bearbeiten' : 'Neue Rolle erstellen'}\n                  </h2>\n                  <button\n                    onClick={() => setIsModalOpen(false)}\n                    className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                  >\n                    <XMarkIcon className=\"h-6 w-6\" />\n                  </button>\n                </div>\n\n                <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n                  <form onSubmit={handleSubmit} className=\"space-y-5\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('roles.form.name')}</label>\n                        <input\n                          type=\"text\"\n                          value={formData.name}\n                          onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                          className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                          required\n                        />\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('roles.form.description')}</label>\n                        <input\n                          type=\"text\"\n                          value={formData.description}\n                          onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                          className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white\"\n                        />\n                      </div>\n                    </div>\n                    \n                    <div className=\"mt-2\">\n                      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">Detaillierte Berechtigungen</label>\n                        {/* Bulk Actions */}\n                        <div className=\"flex flex-wrap items-center gap-1.5\">\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllPagePermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800\"\n                            >\n                              Seiten \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Seiten aktivieren\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllPagePermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              Seiten \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Seiten deaktivieren\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllTablePermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800\"\n                            >\n                              Tabellen \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Tabellen aktivieren\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllTablePermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              Tabellen \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Tabellen deaktivieren\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllButtonPermissions('both')}\n                              className=\"px-2 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800\"\n                            >\n                              Buttons \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Buttons aktivieren\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              type=\"button\"\n                              onClick={() => setAllButtonPermissions('none')}\n                              className=\"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600\"\n                            >\n                              Buttons \n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              Alle Buttons deaktivieren\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <div className=\"grid grid-cols-1 gap-4 overflow-y-auto border rounded-lg p-4 dark:border-gray-600 max-h-[60vh]\">\n                        {formData.permissions\n                          .filter(permission => \n                            permission.entityType === 'page'\n                          )\n                          .map((permission, index) => {\n                            const permIndex = formData.permissions.indexOf(permission);\n                            const isActive = permission.accessLevel === 'both';\n                            return (\n                              <div key={`permission-page-desktop-${permission.entity}-${index}`}>\n                                <div className=\"flex items-center justify-between\">\n                                  <span className=\"text-sm font-medium text-gray-900 dark:text-gray-100\">{pageDisplayNames[permission.entity] || permission.entity}</span>\n                                  <label className={`inline-flex items-center ${alwaysVisiblePages.includes(permission.entity) ? 'cursor-not-allowed opacity-80' : 'cursor-pointer'}`}>\n                                    <input\n                                      type=\"checkbox\"\n                                      className=\"sr-only peer\"\n                                      checked={isActive}\n                                      disabled={alwaysVisiblePages.includes(permission.entity)}\n                                      onChange={() => {\n                                        const newPermissions = [...formData.permissions];\n                                        newPermissions[permIndex] = {\n                                          ...permission,\n                                          accessLevel: isActive ? 'none' : 'both'\n                                        };\n                                        setFormData({ ...formData, permissions: newPermissions });\n                                      }}\n                                    />\n                                    <div className={`relative w-11 h-6 ${alwaysVisiblePages.includes(permission.entity) ? 'bg-blue-600 dark:bg-blue-700' : 'bg-gray-200 dark:bg-gray-700'} peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700`}>\n                                      {alwaysVisiblePages.includes(permission.entity) && (\n                                        <span className=\"absolute inset-0 flex items-center justify-center text-xs text-white font-medium\">\n                                          Fix\n                                        </span>\n                                      )}\n                                    </div>\n                                  </label>\n                                </div>\n                                \n                                {/* Tabellen-Berechtigungen mit zugehrigen Buttons gruppiert */}\n                                {formData.permissions\n                                  .filter(tablePerm => \n                                    tablePerm.entityType === 'table' && \n                                    tableToPageMapping[tablePerm.entity] === permission.entity\n                                  )\n                                  .sort((a, b) => {\n                                    const aName = tableDisplayNames[a.entity] || a.entity;\n                                    const bName = tableDisplayNames[b.entity] || b.entity;\n                                    return aName.localeCompare(bName);\n                                  })\n                                  .map((tablePerm, tableIndex) => {\n                                    const tablePermIndex = formData.permissions.indexOf(tablePerm);\n                                    const isTableActive = tablePerm.accessLevel === 'both';\n                                    const tableEntity = tablePerm.entity;\n                                    const tableDisplayName = tableDisplayNames[tableEntity] || tableEntity;\n                                    \n                                    // Finde alle Buttons, die zu dieser Tabelle gehren\n                                    const relatedButtons = formData.permissions\n                                      .filter(buttonPerm => \n                                        buttonPerm.entityType === 'button' && \n                                        buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                        buttonToTableMapping[buttonPerm.entity] === tableEntity &&\n                                        !(tableEntity === 'tasks' && buttonPerm.entity.startsWith('todo_'))\n                                      )\n                                      .sort((a, b) => {\n                                        const aName = buttonDisplayNames[a.entity] || a.entity;\n                                        const bName = buttonDisplayNames[b.entity] || b.entity;\n                                        const order = [\n                                      t('roleManagement.buttonOrder.start'),\n                                      t('roleManagement.buttonOrder.stop'),\n                                      t('roleManagement.buttonOrder.create'),\n                                      t('roleManagement.buttonOrder.edit'),\n                                      t('roleManagement.buttonOrder.delete')\n                                    ];\n                                        const aIndex = order.indexOf(aName);\n                                        const bIndex = order.indexOf(bName);\n                                        if (aIndex !== -1 && bIndex !== -1) return aIndex - bIndex;\n                                        if (aIndex !== -1) return -1;\n                                        if (bIndex !== -1) return 1;\n                                        return aName.localeCompare(bName);\n                                      });\n                                    \n                                    return (\n                                      <div key={`table-permission-desktop-${tableEntity}-${tableIndex}`} className=\"mt-3\">\n                                        {/* Tabelle selbst */}\n                                        <div className=\"flex items-center justify-between pl-6 border-l-2 border-blue-300 dark:border-blue-600\">\n                                          <span className=\"text-sm font-semibold text-gray-800 dark:text-gray-200\"> {tableDisplayName}</span>\n                                          <label className=\"inline-flex items-center cursor-pointer\">\n                                            <input\n                                              type=\"checkbox\"\n                                              className=\"sr-only peer\"\n                                              checked={isTableActive}\n                                              onChange={() => {\n                                                const newPermissions = [...formData.permissions];\n                                                newPermissions[tablePermIndex] = {\n                                                  ...tablePerm,\n                                                  accessLevel: isTableActive ? 'none' : 'both'\n                                                };\n                                                setFormData({ ...formData, permissions: newPermissions });\n                                              }}\n                                            />\n                                            <div className=\"relative w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                            </div>\n                                          </label>\n                                        </div>\n                                        \n                                        {/* Zu dieser Tabelle gehrige Buttons */}\n                                        {relatedButtons.map((buttonPerm, buttonIndex) => {\n                                          const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                          const isButtonActive = buttonPerm.accessLevel === 'both';\n                                          const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                          return (\n                                            <div key={`button-permission-desktop-${buttonPerm.entity}-${buttonIndex}`} \n                                              className=\"flex items-center justify-between mt-2 pl-12 border-l-2 border-gray-300 dark:border-gray-600\">\n                                              <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                              <label className=\"inline-flex items-center cursor-pointer\">\n                                                <input\n                                                  type=\"checkbox\"\n                                                  className=\"sr-only peer\"\n                                                  checked={isButtonActive}\n                                                  onChange={() => {\n                                                    const newPermissions = [...formData.permissions];\n                                                    newPermissions[buttonPermIndex] = {\n                                                      ...buttonPerm,\n                                                      accessLevel: isButtonActive ? 'none' : 'both'\n                                                    };\n                                                    setFormData({ ...formData, permissions: newPermissions });\n                                                  }}\n                                                />\n                                                <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                                </div>\n                                              </label>\n                                            </div>\n                                          );\n                                        })}\n                                      </div>\n                                    );\n                                  })\n                                }\n                                  \n                                {/* Button-Berechtigungen ohne Tabelle-Zuordnung (am Ende) */}\n                                {formData.permissions\n                                  .filter(buttonPerm => \n                                    buttonPerm.entityType === 'button' && \n                                    buttonToPageMapping[buttonPerm.entity] === permission.entity &&\n                                    !buttonToTableMapping[buttonPerm.entity]\n                                  )\n                                  .sort((a, b) => {\n                                    const aName = buttonDisplayNames[a.entity] || a.entity;\n                                    const bName = buttonDisplayNames[b.entity] || b.entity;\n                                    return aName.localeCompare(bName);\n                                  })\n                                  .map((buttonPerm, buttonIndex) => {\n                                    const buttonPermIndex = formData.permissions.indexOf(buttonPerm);\n                                    const isButtonActive = buttonPerm.accessLevel === 'both';\n                                    const buttonDisplayName = buttonDisplayNames[buttonPerm.entity] || buttonPerm.entity;\n                                    return (\n                                      <div key={`button-permission-desktop-${buttonPerm.entity}-${buttonIndex}`} \n                                        className=\"flex items-center justify-between mt-2 pl-6 border-l-2 border-gray-300 dark:border-gray-600\">\n                                        <span className=\"text-xs text-gray-600 dark:text-gray-400\"> {buttonDisplayName}</span>\n                                        <label className=\"inline-flex items-center cursor-pointer\">\n                                          <input\n                                            type=\"checkbox\"\n                                            className=\"sr-only peer\"\n                                            checked={isButtonActive}\n                                            onChange={() => {\n                                              const newPermissions = [...formData.permissions];\n                                              newPermissions[buttonPermIndex] = {\n                                                ...buttonPerm,\n                                                accessLevel: isButtonActive ? 'none' : 'both'\n                                              };\n                                              setFormData({ ...formData, permissions: newPermissions });\n                                            }}\n                                          />\n                                          <div className=\"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700\">\n                                          </div>\n                                        </label>\n                                      </div>\n                                    );\n                                  })\n                                }\n                              </div>\n                            );\n                          })\n                        }\n                      </div>\n                    </div>\n\n                    {/* Buttons */}\n                    <div className=\"flex justify-end pt-4 gap-2\">\n                      <div className=\"relative group\">\n                        <button\n                          type=\"button\"\n                          onClick={() => setIsModalOpen(false)}\n                          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                        >\n                          <XMarkIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          Abbrechen\n                        </div>\n                      </div>\n                      <div className=\"relative group\">\n                        <button\n                          type=\"submit\"\n                          className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors\"\n                        >\n                          <CheckIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {editingRole ? 'Aktualisieren' : 'Erstellen'}\n                        </div>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default RoleManagementTab; ","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { PencilIcon, TrashIcon, PlusIcon, XMarkIcon, CheckIcon, FunnelIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport axiosInstance from '../config/axios.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport FilterPane from '../components/FilterPane.tsx';\nimport SavedFilterTags from '../components/SavedFilterTags.tsx';\nimport { FilterCondition } from '../components/FilterRow.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface Branch {\n    id: number;\n    name: string;\n    whatsappSettings?: any;\n    lobbyPmsSettings?: any;\n    boldPaymentSettings?: any;\n    doorSystemSettings?: any;\n    emailSettings?: any;\n}\n\ninterface BranchManagementTabProps {\n    onError: (error: string) => void;\n}\n\n// BranchCard-Komponente fr mobile und Desktop-Ansicht\nconst BranchCard: React.FC<{\n    branch: Branch;\n    onEdit: (branch: Branch) => void;\n    onDelete: (branchId: number) => void;\n    canEdit: boolean;\n    canDelete: boolean;\n}> = ({ branch, onEdit, onDelete, canEdit, canDelete }) => {\n    const { t } = useTranslation();\n    return (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4\">\n            {/* Header mit Branchname und Aktionen */}\n            <div className=\"flex justify-between items-start mb-2\">\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">{branch.name}</h3>\n                \n                <div className=\"flex space-x-2\">\n                    {canEdit && (\n                        <div className=\"relative group\">\n                            <button\n                                onClick={() => onEdit(branch)}\n                                className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n                            >\n                                <PencilIcon className=\"h-5 w-5\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('common.edit', { defaultValue: 'Bearbeiten' })}\n                            </div>\n                        </div>\n                    )}\n                    \n                    {canDelete && (\n                        <div className=\"relative group\">\n                            <button\n                                onClick={() => onDelete(branch.id)}\n                                className=\"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 p-1\"\n                            >\n                                <TrashIcon className=\"h-5 w-5\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('common.delete', { defaultValue: 'Lschen' })}\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\n// TableID fr gespeicherte Filter\nconst BRANCHES_TABLE_ID = 'branches-table';\n\nconst BranchManagementTab: React.FC<BranchManagementTabProps> = ({ onError }) => {\n    const { t } = useTranslation();\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [editingBranch, setEditingBranch] = useState<Branch | null>(null);\n    const [branches, setBranches] = useState<Branch[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [formData, setFormData] = useState({ \n        name: '',\n        whatsappSettings: {\n            provider: 'whatsapp-business-api' as 'twilio' | 'whatsapp-business-api',\n            apiKey: '',\n            apiSecret: '',\n            phoneNumberId: '',\n            ai: {\n                enabled: false,\n                model: 'gpt-4o',\n                systemPrompt: '',\n                rules: [] as string[],\n                sources: [] as string[],\n                temperature: 0.7,\n                maxTokens: 500\n            }\n        },\n        lobbyPmsSettings: {\n            apiUrl: '',\n            apiKey: '',\n            propertyId: '',\n            autoCreateTasks: false,\n            lateCheckInThreshold: '22:00',\n            notificationChannels: ['email'] as string[],\n            autoSendInvitation: false\n        },\n        boldPaymentSettings: {\n            apiKey: '',\n            merchantId: '',\n            environment: 'sandbox' as 'sandbox' | 'production'\n        },\n        doorSystemSettings: {\n            clientId: '',\n            clientSecret: '',\n            username: '',\n            password: '',\n            apiUrl: 'https://euopen.ttlock.com',\n            lockIds: [] as string[],\n            appName: 'TTLock'\n        },\n        emailSettings: {\n            smtpHost: '',\n            smtpPort: 587,\n            smtpUser: '',\n            smtpPass: '',\n            smtpFromEmail: '',\n            smtpFromName: '',\n            imap: {\n                enabled: false,\n                host: '',\n                port: 993,\n                secure: true,\n                user: '',\n                password: '',\n                folder: 'INBOX',\n                processedFolder: ''\n            }\n        }\n    });\n    const [activeSettingsTab, setActiveSettingsTab] = useState<'whatsapp' | 'lobbypms' | 'boldpayment' | 'doorsystem' | 'email'>('whatsapp');\n    const [showSecrets, setShowSecrets] = useState<Record<string, boolean>>({});\n    const [searchTerm, setSearchTerm] = useState('');\n    const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n    const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n    const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n    const [activeFilterName, setActiveFilterName] = useState<string>('');\n    const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n    const [displayLimit, setDisplayLimit] = useState(10);\n    const { hasPermission } = usePermissions();\n    const { openSidepane, closeSidepane } = useSidepane();\n\n    // Berechtigungen prfen\n    const canCreate = hasPermission('branches', 'write', 'table');\n    const canEdit = hasPermission('branches', 'write', 'table');\n    const canDelete = hasPermission('branches', 'write', 'table');\n\n    // Branches laden\n    const fetchBranches = useCallback(async () => {\n        setLoading(true);\n        try {\n            const response = await axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE);\n            setBranches(response.data);\n        } catch (error: any) {\n            console.error('Fehler beim Laden der Niederlassungen:', error);\n            const errorMessage = error.response?.data?.message || t('branches.loadError');\n            onError(errorMessage);\n        } finally {\n            setLoading(false);\n        }\n    }, [onError]);\n\n    useEffect(() => {\n        fetchBranches();\n    }, [fetchBranches]);\n\n    // Sidepane ffnen/schlieen basierend auf Modal-Status\n    useEffect(() => {\n        if (isModalOpen) {\n            openSidepane();\n        } else {\n            closeSidepane();\n        }\n        \n        return () => {\n            closeSidepane();\n        };\n    }, [isModalOpen, openSidepane, closeSidepane]);\n\n    // Formular zurcksetzen\n    const resetForm = () => {\n        setFormData({ \n            name: '',\n            whatsappSettings: {\n                provider: 'whatsapp-business-api' as 'twilio' | 'whatsapp-business-api',\n                apiKey: '',\n                apiSecret: '',\n                phoneNumberId: '',\n                ai: {\n                    enabled: false,\n                    model: 'gpt-4o',\n                    systemPrompt: '',\n                    rules: [] as string[],\n                    sources: [] as string[],\n                    temperature: 0.7,\n                    maxTokens: 500\n                }\n            },\n            lobbyPmsSettings: {\n                apiUrl: '',\n                apiKey: '',\n                propertyId: '',\n                autoCreateTasks: false,\n                lateCheckInThreshold: '22:00',\n                notificationChannels: ['email'] as string[],\n                autoSendInvitation: false\n            },\n            boldPaymentSettings: {\n                apiKey: '',\n                merchantId: '',\n                environment: 'sandbox' as 'sandbox' | 'production'\n            },\n            doorSystemSettings: {\n                clientId: '',\n                clientSecret: '',\n                username: '',\n                password: '',\n                apiUrl: 'https://euopen.ttlock.com',\n                lockIds: [] as string[],\n                appName: 'TTLock'\n            },\n            sireSettings: {\n                enabled: false,\n                autoRegisterOnCheckIn: false,\n                apiUrl: '',\n                apiKey: '',\n                apiSecret: '',\n                propertyCode: ''\n            },\n            emailSettings: {\n                smtpHost: '',\n                smtpPort: 587,\n                smtpUser: '',\n                smtpPass: '',\n                smtpFromEmail: '',\n                smtpFromName: '',\n                imap: {\n                    enabled: false,\n                    host: '',\n                    port: 993,\n                    secure: true,\n                    user: '',\n                    password: '',\n                    folder: 'INBOX',\n                    processedFolder: ''\n                }\n            }\n        });\n        setActiveSettingsTab('whatsapp');\n        setEditingBranch(null);\n    };\n\n    // Modal ffnen fr neue Branch\n    const handleCreate = () => {\n        resetForm();\n        setIsModalOpen(true);\n    };\n\n    // Modal ffnen fr Bearbeitung\n    const handleEdit = async (branch: Branch) => {\n        setEditingBranch(branch);\n        const existingWhatsapp = branch.whatsappSettings || {};\n        const existingLobbyPms = branch.lobbyPmsSettings || {};\n        const existingBoldPayment = branch.boldPaymentSettings || {};\n        const existingDoorSystem = branch.doorSystemSettings || {};\n        const existingEmail = branch.emailSettings || {};\n        \n        setFormData({ \n            name: branch.name,\n            whatsappSettings: {\n                provider: existingWhatsapp.provider || 'whatsapp-business-api',\n                apiKey: existingWhatsapp.apiKey || '',\n                apiSecret: existingWhatsapp.apiSecret || '',\n                phoneNumberId: existingWhatsapp.phoneNumberId || '',\n                ai: existingWhatsapp.ai || {\n                    enabled: false,\n                    model: 'gpt-4o',\n                    systemPrompt: '',\n                    rules: [],\n                    sources: [],\n                    temperature: 0.7,\n                    maxTokens: 500\n                }\n            },\n            lobbyPmsSettings: {\n                apiUrl: existingLobbyPms.apiUrl || '',\n                apiKey: existingLobbyPms.apiKey || '',\n                propertyId: existingLobbyPms.propertyId || '',\n                autoCreateTasks: existingLobbyPms.autoCreateTasks || false,\n                lateCheckInThreshold: existingLobbyPms.lateCheckInThreshold || '22:00',\n                notificationChannels: existingLobbyPms.notificationChannels || ['email'],\n                autoSendInvitation: existingLobbyPms.autoSendInvitation || false\n            },\n            boldPaymentSettings: {\n                apiKey: existingBoldPayment.apiKey || '',\n                merchantId: existingBoldPayment.merchantId || '',\n                environment: existingBoldPayment.environment || 'sandbox'\n            },\n            doorSystemSettings: {\n                clientId: existingDoorSystem.clientId || '',\n                clientSecret: existingDoorSystem.clientSecret || '',\n                username: existingDoorSystem.username || '',\n                password: existingDoorSystem.password || '',\n                apiUrl: existingDoorSystem.apiUrl || 'https://euopen.ttlock.com',\n                lockIds: existingDoorSystem.lockIds || [],\n                appName: existingDoorSystem.appName || 'TTLock'\n            },\n            emailSettings: {\n                smtpHost: existingEmail.smtpHost || '',\n                smtpPort: existingEmail.smtpPort || 587,\n                smtpUser: existingEmail.smtpUser || '',\n                smtpPass: existingEmail.smtpPass || '',\n                smtpFromEmail: existingEmail.smtpFromEmail || '',\n                smtpFromName: existingEmail.smtpFromName || '',\n                imap: existingEmail.imap || {\n                    enabled: false,\n                    host: '',\n                    port: 993,\n                    secure: true,\n                    user: '',\n                    password: '',\n                    folder: 'INBOX',\n                    processedFolder: ''\n                }\n            }\n        });\n        setIsModalOpen(true);\n    };\n\n    // Modal schlieen\n    const handleCloseModal = () => {\n        setIsModalOpen(false);\n        resetForm();\n    };\n\n    // Formular absenden\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        \n        if (!formData.name.trim()) {\n            onError(t('branches.nameRequired'));\n            return;\n        }\n\n        try {\n            if (editingBranch) {\n                // Branch aktualisieren\n                await axiosInstance.put(API_ENDPOINTS.BRANCHES.UPDATE(editingBranch.id), {\n                    name: formData.name.trim(),\n                    whatsappSettings: formData.whatsappSettings,\n                    lobbyPmsSettings: formData.lobbyPmsSettings,\n                    boldPaymentSettings: formData.boldPaymentSettings,\n                    doorSystemSettings: formData.doorSystemSettings,\n                    emailSettings: formData.emailSettings\n                });\n            } else {\n                // Neue Branch erstellen\n                await axiosInstance.post(API_ENDPOINTS.BRANCHES.CREATE, {\n                    name: formData.name.trim()\n                });\n            }\n            \n            await fetchBranches();\n            handleCloseModal();\n        } catch (error: any) {\n            console.error('Fehler beim Speichern der Niederlassung:', error);\n            const errorMessage = error.response?.data?.message || t('branches.saveError');\n            onError(errorMessage);\n        }\n    };\n\n    // Branch lschen\n    const handleDelete = async (branchId: number) => {\n        if (!window.confirm(t('branches.deleteConfirm', { defaultValue: 'Mchten Sie diese Niederlassung wirklich lschen?' }))) {\n            return;\n        }\n\n        try {\n            await axiosInstance.delete(API_ENDPOINTS.BRANCHES.DELETE(branchId));\n            await fetchBranches();\n        } catch (error: any) {\n            console.error('Fehler beim Lschen der Niederlassung:', error);\n            const errorMessage = error.response?.data?.message || t('branches.deleteError');\n            onError(errorMessage);\n        }\n    };\n\n    // Funktion zum Zhlen der aktiven Filter\n    const getActiveFilterCount = () => {\n        return filterConditions.length;\n    };\n\n    // Filtern und sortieren der Branches\n    const filteredAndSortedBranches = useMemo(() => {\n        return branches\n            .filter(branch => {\n                // Globale Suche\n                if (searchTerm) {\n                    const searchLower = searchTerm.toLowerCase();\n                    const matchesSearch = branch.name.toLowerCase().includes(searchLower);\n                    \n                    if (!matchesSearch) return false;\n                }\n                \n                // Prfe erweiterte Filterbedingungen, wenn vorhanden\n                if (filterConditions.length > 0) {\n                    let result = filterConditions.length > 0;\n                    \n                    for (let i = 0; i < filterConditions.length; i++) {\n                        const condition = filterConditions[i];\n                        let conditionMet = false;\n                        \n                        switch (condition.column) {\n                            case 'name':\n                                if (condition.operator === 'equals') {\n                                    conditionMet = branch.name.toLowerCase() === (condition.value as string || '').toLowerCase();\n                                } else if (condition.operator === 'contains') {\n                                    conditionMet = branch.name.toLowerCase().includes((condition.value as string || '').toLowerCase());\n                                } else if (condition.operator === 'startsWith') {\n                                    conditionMet = branch.name.toLowerCase().startsWith((condition.value as string || '').toLowerCase());\n                                }\n                                break;\n                        }\n                        \n                        // Verknpfe das Ergebnis dieser Bedingung mit dem Gesamtergebnis\n                        if (i === 0) {\n                            result = conditionMet;\n                        } else {\n                            const operator = filterLogicalOperators[i - 1];\n                            result = operator === 'AND' ? (result && conditionMet) : (result || conditionMet);\n                        }\n                    }\n                    \n                    if (!result) return false;\n                }\n                \n                return true;\n            })\n            .sort((a, b) => {\n                return a.name.localeCompare(b.name);\n            });\n    }, [branches, searchTerm, filterConditions, filterLogicalOperators]);\n\n    // Funktion zum Anwenden von Filterbedingungen\n    const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n        setFilterConditions(conditions);\n        setFilterLogicalOperators(operators);\n    };\n    \n    // Funktion zum Zurcksetzen der Filter\n    const resetFilterConditions = () => {\n        setFilterConditions([]);\n        setFilterLogicalOperators([]);\n        setActiveFilterName('');\n        setSelectedFilterId(null);\n    };\n    \n    // Filter Change Handler (Controlled Mode)\n    const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n        setActiveFilterName(name);\n        setSelectedFilterId(id);\n        applyFilterConditions(conditions, operators);\n    };\n\n    // Standard-Filter erstellen und speichern\n    useEffect(() => {\n        const createStandardFilters = async () => {\n            try {\n                const token = localStorage.getItem('token');\n                \n                if (!token) {\n                    console.error(t('common.notAuthenticated'));\n                    return;\n                }\n\n                // Prfen, ob die Standard-Filter bereits existieren\n                const existingFiltersResponse = await axiosInstance.get(\n                    API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(BRANCHES_TABLE_ID)\n                );\n\n                const existingFilters = existingFiltersResponse.data || [];\n                const alleFilterExists = existingFilters.some((filter: any) => filter.name === 'Alle');\n\n                // Erstelle \"Alle\"-Filter, wenn er noch nicht existiert\n                if (!alleFilterExists) {\n                    const alleFilter = {\n                        tableId: BRANCHES_TABLE_ID,\n                        name: 'Alle',\n                        conditions: [],\n                        operators: []\n                    };\n\n                    await axiosInstance.post(\n                        API_ENDPOINTS.SAVED_FILTERS.BASE,\n                        alleFilter\n                    );\n                    console.log(t('branches.filterCreated'));\n                }\n            } catch (error) {\n                console.error(t('branches.createStandardFiltersError'), error);\n            }\n        };\n\n        createStandardFilters();\n    }, []);\n\n    // Initialer Default-Filter setzen (Controlled Mode)\n    useEffect(() => {\n        const setInitialFilter = async () => {\n            try {\n                const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(BRANCHES_TABLE_ID));\n                const filters = response.data;\n                \n                const alleFilter = filters.find((filter: any) => filter.name === 'Alle');\n                if (alleFilter) {\n                    setActiveFilterName('Alle');\n                    setSelectedFilterId(alleFilter.id);\n                    applyFilterConditions(alleFilter.conditions, alleFilter.operators);\n                }\n            } catch (error) {\n                console.error(t('branches.setInitialFilterError'), error);\n            }\n        };\n\n        setInitialFilter();\n    }, []);\n\n    // Branches rendern\n    const renderBranches = () => {\n        if (filteredAndSortedBranches.length === 0) {\n            return (\n                <div className=\"p-4 bg-gray-50 dark:bg-gray-700 rounded text-center\">\n                    <p className=\"text-gray-600 dark:text-gray-400\">\n                        {t('branches.noBranches', { defaultValue: 'Keine Niederlassungen gefunden. Erstellen Sie eine neue Niederlassung mit dem Button oben.' })}\n                    </p>\n                </div>\n            );\n        }\n        \n        // Card-Ansicht\n        return (\n            <>\n                <div className=\"space-y-4\">\n                    {filteredAndSortedBranches.slice(0, displayLimit).map((branch) => (\n                        <BranchCard \n                            key={branch.id} \n                            branch={branch} \n                            onEdit={handleEdit}\n                            onDelete={handleDelete}\n                            canEdit={canEdit}\n                            canDelete={canDelete}\n                        />\n                    ))}\n                </div>\n                \n                {/* \"Mehr anzeigen\" Button */}\n                {filteredAndSortedBranches.length > displayLimit && (\n                    <div className=\"mt-4 flex justify-center\">\n                        <button\n                            className=\"px-4 py-2 text-sm font-medium text-blue-600 bg-white border border-blue-300 rounded-md hover:bg-blue-50 dark:bg-gray-800 dark:text-blue-400 dark:border-gray-700 dark:hover:bg-gray-700\"\n                            onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n                        >\n                            {t('common.showMore', { defaultValue: 'Mehr anzeigen' })} ({filteredAndSortedBranches.length - displayLimit} {t('common.remaining', { defaultValue: 'verbleibend' })})\n                        </button>\n                    </div>\n                )}\n            </>\n        );\n    };\n\n    // Mobile-Erkennung\n    const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n    \n    useEffect(() => {\n        const handleResize = () => {\n            setIsMobile(window.innerWidth < 640);\n        };\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, []);\n\n    return (\n        <div>\n            {/* Spaltenanzeige und Suche */}\n            <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between mb-4\">\n                    {/* Linke Seite: \"Neue Niederlassung erstellen\"-Button */}\n                    <div className=\"flex items-center\">\n                        {canCreate && (\n                            <div className=\"relative group\">\n                                <button\n                                    onClick={handleCreate}\n                                    className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n                                    style={{ width: '30.19px', height: '30.19px' }}\n                                    aria-label={t('branches.create', { defaultValue: 'Neue Niederlassung' })}\n                                >\n                                    <PlusIcon className=\"h-4 w-4\" />\n                                </button>\n                                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                    {t('branches.create', { defaultValue: 'Neue Niederlassung' })}\n                                </div>\n                            </div>\n                        )}\n                    </div>\n                    \n                    {/* Mitte: Titel - Kein Titel in der Mitte notwendig bei dieser Komponente, da der Tab-Header bereits den Titel zeigt */}\n                    <div></div>\n                    \n                    {/* Rechte Seite: Suchfeld, Filter-Button */}\n                    <div className=\"flex items-center gap-1.5\">\n                        <input\n                            type=\"text\"\n                            placeholder={t('common.search', { defaultValue: 'Suchen...' })}\n                            className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n                            value={searchTerm}\n                            onChange={(e) => setSearchTerm(e.target.value)}\n                        />\n                        <div className=\"relative group ml-1\">\n                            <button\n                                className={`p-2 rounded-md ${getActiveFilterCount() > 0 ? 'bg-blue-50 text-blue-600' : 'hover:bg-gray-100'} relative`}\n                                onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n                            >\n                                <FunnelIcon className=\"w-5 h-5\" />\n                                {getActiveFilterCount() > 0 && (\n                                    <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 text-white rounded-full text-xs flex items-center justify-center\">\n                                        {getActiveFilterCount()}\n                                    </span>\n                                )}\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('common.filter', { defaultValue: 'Filter' })}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Filter-Modal */}\n                {isFilterModalOpen && (\n                    <FilterPane\n                        columns={[\n                            { id: 'name', label: t('branches.name', { defaultValue: 'Name' }) }\n                        ]}\n                        onApply={applyFilterConditions}\n                        onReset={resetFilterConditions}\n                        savedConditions={filterConditions}\n                        savedOperators={filterLogicalOperators}\n                        tableId={BRANCHES_TABLE_ID}\n                    />\n                )}\n                \n                {/* Gespeicherte Filter als Tags anzeigen */}\n                <SavedFilterTags\n                    tableId={BRANCHES_TABLE_ID}\n                    onSelectFilter={applyFilterConditions}\n                    onReset={resetFilterConditions}\n                    activeFilterName={activeFilterName}\n                    selectedFilterId={selectedFilterId}\n                    onFilterChange={handleFilterChange}\n                    defaultFilterName=\"Alle\"\n                />\n\n                {loading ? (\n                    <div className=\"flex justify-center items-center py-8\">\n                        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n                    </div>\n                ) : (\n                    renderBranches()\n                )}\n            </div>\n\n            {/* Modal/Sidepane fr Branch-Erstellung/Bearbeitung */}\n            {isModalOpen && (\n                <>\n                    {/* Mobile (unter 640px) - Modal */}\n                    {isMobile ? (\n                        <Dialog open={isModalOpen} onClose={handleCloseModal} className=\"relative z-50\">\n                            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n                            \n                            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                                <Dialog.Panel className=\"mx-auto max-w-sm w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                                    {/* Header */}\n                                    <div className=\"px-6 py-4 border-b dark:border-gray-700 flex-shrink-0\">\n                                        <div className=\"flex items-center justify-between\">\n                                            <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                                                {editingBranch \n                                                    ? t('branches.edit', { defaultValue: 'Niederlassung bearbeiten' })\n                                                    : t('branches.create', { defaultValue: 'Neue Niederlassung' })\n                                                }\n                                            </Dialog.Title>\n                                            <button\n                                                onClick={handleCloseModal}\n                                                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                            >\n                                                <XMarkIcon className=\"h-6 w-6\" />\n                                            </button>\n                                        </div>\n                                    </div>\n                                    \n                                    {/* Form */}\n                                    <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n                                        <div>\n                                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                {t('branches.name', { defaultValue: 'Name' })}\n                                            </label>\n                                            <input\n                                                type=\"text\"\n                                                value={formData.name}\n                                                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                required\n                                                autoFocus\n                                            />\n                                        </div>\n\n                                        {/* Settings Tabs - nur beim Bearbeiten */}\n                                        {editingBranch && (\n                                            <>\n                                                {/* Tab Navigation */}\n                                                <div className=\"border-b border-gray-200 dark:border-gray-700 mb-4\">\n                                                    <nav className=\"-mb-px flex space-x-2 overflow-x-auto\">\n                                                        {['whatsapp', 'lobbypms', 'boldpayment', 'doorsystem', 'email'].map((tab) => (\n                                                            <button\n                                                                key={tab}\n                                                                type=\"button\"\n                                                                onClick={() => setActiveSettingsTab(tab as any)}\n                                                                className={`py-2 px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ${\n                                                                    activeSettingsTab === tab\n                                                                        ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                                                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                                                                }`}\n                                                            >\n                                                                {tab === 'whatsapp' ? 'WhatsApp' : tab === 'lobbypms' ? 'LobbyPMS' : tab === 'boldpayment' ? 'Bold Payment' : tab === 'doorsystem' ? 'TTLock' : 'Email'}\n                                                            </button>\n                                                        ))}\n                                                    </nav>\n                                                </div>\n\n                                                {/* Tab Content */}\n                                                <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n                                                    {/* WhatsApp Settings Tab */}\n                                                    {activeSettingsTab === 'whatsapp' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                WhatsApp Settings\n                                                            </h4>\n                                                \n                                                <div className=\"space-y-4\">\n                                                    <div>\n                                                        <label htmlFor=\"whatsappProvider\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                            Provider\n                                                        </label>\n                                                        <select\n                                                            id=\"whatsappProvider\"\n                                                            value={formData.whatsappSettings.provider}\n                                                            onChange={(e) => setFormData({\n                                                                ...formData,\n                                                                whatsappSettings: {\n                                                                    ...formData.whatsappSettings,\n                                                                    provider: e.target.value as 'twilio' | 'whatsapp-business-api'\n                                                                }\n                                                            })}\n                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                        >\n                                                            <option value=\"twilio\">Twilio</option>\n                                                            <option value=\"whatsapp-business-api\">WhatsApp Business API</option>\n                                                        </select>\n                                                    </div>\n\n                                                    <div>\n                                                        <label htmlFor=\"whatsappApiKey\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                            API Key / Access Token\n                                                        </label>\n                                                        <div className=\"relative\">\n                                                            <input\n                                                                type={showSecrets['whatsappApiKey'] ? 'text' : 'password'}\n                                                                id=\"whatsappApiKey\"\n                                                                value={formData.whatsappSettings.apiKey}\n                                                                onChange={(e) => setFormData({\n                                                                    ...formData,\n                                                                    whatsappSettings: {\n                                                                        ...formData.whatsappSettings,\n                                                                        apiKey: e.target.value\n                                                                    }\n                                                                })}\n                                                                placeholder=\"API Key / Access Token\"\n                                                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                            />\n                                                            <button\n                                                                type=\"button\"\n                                                                onClick={() => setShowSecrets(prev => ({ ...prev, whatsappApiKey: !prev.whatsappApiKey }))}\n                                                                className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                            >\n                                                                {showSecrets['whatsappApiKey'] ? (\n                                                                    <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                    </svg>\n                                                                ) : (\n                                                                    <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                    </svg>\n                                                                )}\n                                                            </button>\n                                                        </div>\n                                                    </div>\n\n                                                    <div>\n                                                        <label htmlFor=\"whatsappPhoneNumberId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                            Phone Number ID\n                                                        </label>\n                                                        <input\n                                                            type=\"text\"\n                                                            id=\"whatsappPhoneNumberId\"\n                                                            value={formData.whatsappSettings.phoneNumberId}\n                                                            onChange={(e) => setFormData({\n                                                                ...formData,\n                                                                whatsappSettings: {\n                                                                    ...formData.whatsappSettings,\n                                                                    phoneNumberId: e.target.value\n                                                                }\n                                                            })}\n                                                            placeholder=\"Phone Number ID\"\n                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                        />\n                                                    </div>\n\n                                                    {/* AI Configuration */}\n                                                    <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4\">\n                                                        <div className=\"flex items-center justify-between mb-4\">\n                                                            <h5 className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                                                KI-Konfiguration (AI)\n                                                            </h5>\n                                                            <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                <input\n                                                                    type=\"checkbox\"\n                                                                    checked={formData.whatsappSettings.ai.enabled}\n                                                                    onChange={(e) => setFormData({\n                                                                        ...formData,\n                                                                        whatsappSettings: {\n                                                                            ...formData.whatsappSettings,\n                                                                            ai: {\n                                                                                ...formData.whatsappSettings.ai,\n                                                                                enabled: e.target.checked\n                                                                            }\n                                                                        }\n                                                                    })}\n                                                                    className=\"sr-only peer\"\n                                                                />\n                                                                <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                    {formData.whatsappSettings.ai.enabled ? 'Aktiviert' : 'Deaktiviert'}\n                                                                </span>\n                                                            </label>\n                                                        </div>\n\n                                                        {formData.whatsappSettings.ai.enabled && (\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label htmlFor=\"aiModel\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Modell\n                                                                    </label>\n                                                                    <select\n                                                                        id=\"aiModel\"\n                                                                        value={formData.whatsappSettings.ai.model}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    model: e.target.value\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    >\n                                                                        <option value=\"gpt-4o\">GPT-4o</option>\n                                                                        <option value=\"gpt-4\">GPT-4</option>\n                                                                        <option value=\"gpt-3.5-turbo\">GPT-3.5 Turbo</option>\n                                                                    </select>\n                                                                </div>\n\n                                                                <div>\n                                                                    <label htmlFor=\"aiSystemPrompt\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        System Prompt\n                                                                    </label>\n                                                                    <textarea\n                                                                        id=\"aiSystemPrompt\"\n                                                                        value={formData.whatsappSettings.ai.systemPrompt}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    systemPrompt: e.target.value\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={4}\n                                                                        placeholder=\"Du bist ein hilfreicher Assistent fr...\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Regeln (eine pro Zeile)\n                                                                    </label>\n                                                                    <textarea\n                                                                        value={formData.whatsappSettings.ai.rules.join('\\n')}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    rules: e.target.value.split('\\n').filter(r => r.trim())\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={3}\n                                                                        placeholder=\"Antworte immer auf Spanisch&#10;Sei freundlich und professionell\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Quellen/URLs (eine pro Zeile)\n                                                                    </label>\n                                                                    <textarea\n                                                                        value={formData.whatsappSettings.ai.sources.join('\\n')}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    sources: e.target.value.split('\\n').filter(s => s.trim())\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={2}\n                                                                        placeholder=\"https://wiki.example.com/manila-procedures&#10;https://wiki.example.com/faq\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div className=\"grid grid-cols-2 gap-4\">\n                                                                    <div>\n                                                                        <label htmlFor=\"aiTemperature\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                            Temperature ({formData.whatsappSettings.ai.temperature})\n                                                                        </label>\n                                                                        <input\n                                                                            type=\"range\"\n                                                                            id=\"aiTemperature\"\n                                                                            min=\"0\"\n                                                                            max=\"2\"\n                                                                            step=\"0.1\"\n                                                                            value={formData.whatsappSettings.ai.temperature}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                whatsappSettings: {\n                                                                                    ...formData.whatsappSettings,\n                                                                                    ai: {\n                                                                                        ...formData.whatsappSettings.ai,\n                                                                                        temperature: parseFloat(e.target.value)\n                                                                                    }\n                                                                                }\n                                                                            })}\n                                                                            className=\"mt-1 block w-full\"\n                                                                        />\n                                                                    </div>\n\n                                                                    <div>\n                                                                        <label htmlFor=\"aiMaxTokens\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                            Max Tokens\n                                                                        </label>\n                                                                        <input\n                                                                            type=\"number\"\n                                                                            id=\"aiMaxTokens\"\n                                                                            min=\"100\"\n                                                                            max=\"4000\"\n                                                                            step=\"100\"\n                                                                            value={formData.whatsappSettings.ai.maxTokens}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                whatsappSettings: {\n                                                                                    ...formData.whatsappSettings,\n                                                                                    ai: {\n                                                                                        ...formData.whatsappSettings.ai,\n                                                                                        maxTokens: parseInt(e.target.value) || 500\n                                                                                    }\n                                                                                }\n                                                                            })}\n                                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                        />\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        )}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                                    {/* LobbyPMS Settings Tab */}\n                                                    {activeSettingsTab === 'lobbypms' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                LobbyPMS Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API URL\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.lobbyPmsSettings.apiUrl}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, apiUrl: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"https://api.lobbypms.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API Key\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['lobbyPmsApiKey'] ? 'text' : 'password'}\n                                                                        value={formData.lobbyPmsSettings.apiKey}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, apiKey: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"API Key\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Property ID\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.lobbyPmsSettings.propertyId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, propertyId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Property ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* Bold Payment Settings Tab */}\n                                                    {activeSettingsTab === 'boldpayment' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                Bold Payment Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API Key\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['boldPaymentApiKey'] ? 'text' : 'password'}\n                                                                        value={formData.boldPaymentSettings.apiKey}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, apiKey: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"API Key\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Merchant ID\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['boldPaymentMerchantId'] ? 'text' : 'password'}\n                                                                        value={formData.boldPaymentSettings.merchantId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, merchantId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Merchant ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Environment\n                                                                    </label>\n                                                                    <select\n                                                                        value={formData.boldPaymentSettings.environment}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, environment: e.target.value as 'sandbox' | 'production' }\n                                                                        })}\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    >\n                                                                        <option value=\"sandbox\">Sandbox</option>\n                                                                        <option value=\"production\">Production</option>\n                                                                    </select>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* TTLock Settings Tab */}\n                                                    {activeSettingsTab === 'doorsystem' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                TTLock Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Client ID\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.doorSystemSettings.clientId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, clientId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Client ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Client Secret\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['doorSystemClientSecret'] ? 'text' : 'password'}\n                                                                        value={formData.doorSystemSettings.clientSecret}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, clientSecret: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Client Secret\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Username\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.doorSystemSettings.username}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, username: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Username\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Password\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['doorSystemPassword'] ? 'text' : 'password'}\n                                                                        value={formData.doorSystemSettings.password}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, password: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Password\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* Email Settings Tab */}\n                                                    {activeSettingsTab === 'email' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                Email Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Host\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpHost}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpHost: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"smtp.example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Port\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"number\"\n                                                                        value={formData.emailSettings.smtpPort}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpPort: parseInt(e.target.value) || 587 }\n                                                                        })}\n                                                                        placeholder=\"587\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP User\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpUser}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpUser: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"user@example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Password\n                                                                    </label>\n                                                                    <div className=\"relative\">\n                                                                        <input\n                                                                            type={showSecrets['emailSmtpPass'] ? 'text' : 'password'}\n                                                                            value={formData.emailSettings.smtpPass}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                emailSettings: { ...formData.emailSettings, smtpPass: e.target.value }\n                                                                            })}\n                                                                            placeholder=\"Password\"\n                                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                                        />\n                                                                        <button\n                                                                            type=\"button\"\n                                                                            onClick={() => setShowSecrets({ ...showSecrets, emailSmtpPass: !showSecrets['emailSmtpPass'] })}\n                                                                            className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                                        >\n                                                                            {showSecrets['emailSmtpPass'] ? (\n                                                                                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                                </svg>\n                                                                            ) : (\n                                                                                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                                </svg>\n                                                                            )}\n                                                                        </button>\n                                                                    </div>\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP From Email\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"email\"\n                                                                        value={formData.emailSettings.smtpFromEmail}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpFromEmail: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"noreply@example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP From Name\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpFromName}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpFromName: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Branch Name\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                {/* IMAP Settings Section */}\n                                                                <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4\">\n                                                                    <div className=\"flex items-center justify-between mb-4\">\n                                                                        <h5 className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                                                            IMAP Settings (Email Reading)\n                                                                        </h5>\n                                                                        <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                            <input\n                                                                                type=\"checkbox\"\n                                                                                checked={formData.emailSettings.imap.enabled}\n                                                                                onChange={(e) => setFormData({\n                                                                                    ...formData,\n                                                                                    emailSettings: {\n                                                                                        ...formData.emailSettings,\n                                                                                        imap: {\n                                                                                            ...formData.emailSettings.imap,\n                                                                                            enabled: e.target.checked\n                                                                                        }\n                                                                                    }\n                                                                                })}\n                                                                                className=\"sr-only peer\"\n                                                                            />\n                                                                            <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                            <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                                {formData.emailSettings.imap.enabled ? 'Enabled' : 'Disabled'}\n                                                                            </span>\n                                                                        </label>\n                                                                    </div>\n\n                                                                    {formData.emailSettings.imap.enabled && (\n                                                                        <div className=\"space-y-4\">\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Host\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.host}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, host: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"imap.example.com\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Port\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"number\"\n                                                                                    value={formData.emailSettings.imap.port}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, port: parseInt(e.target.value) || 993 }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"993\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                                    <input\n                                                                                        type=\"checkbox\"\n                                                                                        checked={formData.emailSettings.imap.secure}\n                                                                                        onChange={(e) => setFormData({\n                                                                                            ...formData,\n                                                                                            emailSettings: {\n                                                                                                ...formData.emailSettings,\n                                                                                                imap: { ...formData.emailSettings.imap, secure: e.target.checked }\n                                                                                            }\n                                                                                        })}\n                                                                                        className=\"sr-only peer\"\n                                                                                    />\n                                                                                    <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                                    <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                                        Secure (SSL/TLS)\n                                                                                    </span>\n                                                                                </label>\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP User\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.user}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, user: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"user@example.com\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Password\n                                                                                </label>\n                                                                                <div className=\"relative\">\n                                                                                    <input\n                                                                                        type={showSecrets['emailImapPass'] ? 'text' : 'password'}\n                                                                                        value={formData.emailSettings.imap.password}\n                                                                                        onChange={(e) => setFormData({\n                                                                                            ...formData,\n                                                                                            emailSettings: {\n                                                                                                ...formData.emailSettings,\n                                                                                                imap: { ...formData.emailSettings.imap, password: e.target.value }\n                                                                                            }\n                                                                                        })}\n                                                                                        placeholder=\"Password\"\n                                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                                                    />\n                                                                                    <button\n                                                                                        type=\"button\"\n                                                                                        onClick={() => setShowSecrets({ ...showSecrets, emailImapPass: !showSecrets['emailImapPass'] })}\n                                                                                        className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                                                    >\n                                                                                        {showSecrets['emailImapPass'] ? (\n                                                                                            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                                            </svg>\n                                                                                        ) : (\n                                                                                            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                                            </svg>\n                                                                                        )}\n                                                                                    </button>\n                                                                                </div>\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Folder\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.folder}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, folder: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"INBOX\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    Processed Folder (optional)\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.processedFolder}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, processedFolder: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"Processed\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                        </div>\n                                                                    )}\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            </>\n                                        )}\n\n                                        {/* Buttons */}\n                                        <div className=\"flex justify-end pt-4 gap-2\">\n                                            <div className=\"relative group\">\n                                                <button\n                                                    type=\"button\"\n                                                    onClick={handleCloseModal}\n                                                    className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                                                >\n                                                    <XMarkIcon className=\"h-5 w-5\" />\n                                                </button>\n                                                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                                    {t('common.cancel', { defaultValue: 'Abbrechen' })}\n                                                </div>\n                                            </div>\n                                            <div className=\"relative group\">\n                                                <button\n                                                    type=\"submit\"\n                                                    className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors\"\n                                                >\n                                                    <CheckIcon className=\"h-5 w-5\" />\n                                                </button>\n                                                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                                    {editingBranch ? t('common.update', { defaultValue: 'Aktualisieren' }) : t('common.create', { defaultValue: 'Erstellen' })}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </form>\n                                </Dialog.Panel>\n                            </div>\n                        </Dialog>\n                    ) : (\n                        // Desktop - Sidepane (dynamische Breite basierend auf Tab-Anzahl)\n                        <div className=\"fixed inset-y-0 right-0 w-full sm:min-w-[500px] sm:max-w-[600px] bg-white dark:bg-gray-800 shadow-xl z-50 flex flex-col\">\n                            {/* Header */}\n                            <div className=\"px-6 py-4 border-b dark:border-gray-700 flex-shrink-0\">\n                                <div className=\"flex items-center justify-between\">\n                                    <h2 className=\"text-lg font-semibold dark:text-white\">\n                                        {editingBranch \n                                            ? t('branches.edit', { defaultValue: 'Niederlassung bearbeiten' })\n                                            : t('branches.create', { defaultValue: 'Neue Niederlassung' })\n                                        }\n                                    </h2>\n                                    <button\n                                        onClick={handleCloseModal}\n                                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                    >\n                                        <XMarkIcon className=\"h-6 w-6\" />\n                                    </button>\n                                </div>\n                            </div>\n                            \n                            {/* Form */}\n                            <form onSubmit={handleSubmit} className=\"flex flex-col flex-1 min-h-0\">\n                                <div className=\"flex-1 overflow-y-auto min-h-0\">\n                                    <div className=\"p-6 space-y-4\">\n                                        <div>\n                                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                {t('branches.name', { defaultValue: 'Name' })}\n                                            </label>\n                                            <input\n                                                type=\"text\"\n                                                value={formData.name}\n                                                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                required\n                                                autoFocus\n                                            />\n                                        </div>\n\n                                        {/* Settings Tabs - nur beim Bearbeiten */}\n                                        {editingBranch && (\n                                            <>\n                                                {/* Tab Navigation */}\n                                                <div className=\"border-b border-gray-200 dark:border-gray-700 mb-4\">\n                                                    <nav className=\"-mb-px flex space-x-2 overflow-x-auto\">\n                                                        {['whatsapp', 'lobbypms', 'boldpayment', 'doorsystem', 'email'].map((tab) => (\n                                                            <button\n                                                                key={tab}\n                                                                type=\"button\"\n                                                                onClick={() => setActiveSettingsTab(tab as any)}\n                                                                className={`py-2 px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ${\n                                                                    activeSettingsTab === tab\n                                                                        ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                                                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                                                                }`}\n                                                            >\n                                                                {tab === 'whatsapp' ? 'WhatsApp' : tab === 'lobbypms' ? 'LobbyPMS' : tab === 'boldpayment' ? 'Bold Payment' : tab === 'doorsystem' ? 'TTLock' : 'Email'}\n                                                            </button>\n                                                        ))}\n                                                    </nav>\n                                                </div>\n\n                                                {/* Tab Content */}\n                                                <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n                                                    {/* WhatsApp Settings Tab */}\n                                                    {activeSettingsTab === 'whatsapp' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                WhatsApp Settings\n                                                            </h4>\n                                                            \n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label htmlFor=\"whatsappProviderDesktop\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Provider\n                                                                    </label>\n                                                                    <select\n                                                                        id=\"whatsappProviderDesktop\"\n                                                                        value={formData.whatsappSettings.provider}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                provider: e.target.value as 'twilio' | 'whatsapp-business-api'\n                                                                            }\n                                                                        })}\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    >\n                                                                        <option value=\"twilio\">Twilio</option>\n                                                                        <option value=\"whatsapp-business-api\">WhatsApp Business API</option>\n                                                                    </select>\n                                                                </div>\n\n                                                    <div>\n                                                        <label htmlFor=\"whatsappApiKey\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                            API Key / Access Token\n                                                        </label>\n                                                        <div className=\"relative\">\n                                                            <input\n                                                                type={showSecrets['whatsappApiKey'] ? 'text' : 'password'}\n                                                                id=\"whatsappApiKey\"\n                                                                value={formData.whatsappSettings.apiKey}\n                                                                onChange={(e) => setFormData({\n                                                                    ...formData,\n                                                                    whatsappSettings: {\n                                                                        ...formData.whatsappSettings,\n                                                                        apiKey: e.target.value\n                                                                    }\n                                                                })}\n                                                                placeholder=\"API Key / Access Token\"\n                                                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                            />\n                                                            <button\n                                                                type=\"button\"\n                                                                onClick={() => setShowSecrets(prev => ({ ...prev, whatsappApiKey: !prev.whatsappApiKey }))}\n                                                                className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                            >\n                                                                {showSecrets['whatsappApiKey'] ? (\n                                                                    <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                    </svg>\n                                                                ) : (\n                                                                    <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                    </svg>\n                                                                )}\n                                                            </button>\n                                                        </div>\n                                                    </div>\n\n                                                    <div>\n                                                        <label htmlFor=\"whatsappPhoneNumberId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                            Phone Number ID\n                                                        </label>\n                                                        <input\n                                                            type=\"text\"\n                                                            id=\"whatsappPhoneNumberId\"\n                                                            value={formData.whatsappSettings.phoneNumberId}\n                                                            onChange={(e) => setFormData({\n                                                                ...formData,\n                                                                whatsappSettings: {\n                                                                    ...formData.whatsappSettings,\n                                                                    phoneNumberId: e.target.value\n                                                                }\n                                                            })}\n                                                            placeholder=\"Phone Number ID\"\n                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                        />\n                                                    </div>\n\n                                                    {/* AI Configuration */}\n                                                    <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4\">\n                                                        <div className=\"flex items-center justify-between mb-4\">\n                                                            <h5 className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                                                KI-Konfiguration (AI)\n                                                            </h5>\n                                                            <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                <input\n                                                                    type=\"checkbox\"\n                                                                    checked={formData.whatsappSettings.ai.enabled}\n                                                                    onChange={(e) => setFormData({\n                                                                        ...formData,\n                                                                        whatsappSettings: {\n                                                                            ...formData.whatsappSettings,\n                                                                            ai: {\n                                                                                ...formData.whatsappSettings.ai,\n                                                                                enabled: e.target.checked\n                                                                            }\n                                                                        }\n                                                                    })}\n                                                                    className=\"sr-only peer\"\n                                                                />\n                                                                <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                    {formData.whatsappSettings.ai.enabled ? 'Aktiviert' : 'Deaktiviert'}\n                                                                </span>\n                                                            </label>\n                                                        </div>\n\n                                                        {formData.whatsappSettings.ai.enabled && (\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label htmlFor=\"aiModelDesktop\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Modell\n                                                                    </label>\n                                                                    <select\n                                                                        id=\"aiModelDesktop\"\n                                                                        value={formData.whatsappSettings.ai.model}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    model: e.target.value\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    >\n                                                                        <option value=\"gpt-4o\">GPT-4o</option>\n                                                                        <option value=\"gpt-4\">GPT-4</option>\n                                                                        <option value=\"gpt-3.5-turbo\">GPT-3.5 Turbo</option>\n                                                                    </select>\n                                                                </div>\n\n                                                                <div>\n                                                                    <label htmlFor=\"aiSystemPromptDesktop\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        System Prompt\n                                                                    </label>\n                                                                    <textarea\n                                                                        id=\"aiSystemPromptDesktop\"\n                                                                        value={formData.whatsappSettings.ai.systemPrompt}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    systemPrompt: e.target.value\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={4}\n                                                                        placeholder=\"Du bist ein hilfreicher Assistent fr...\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Regeln (eine pro Zeile)\n                                                                    </label>\n                                                                    <textarea\n                                                                        value={formData.whatsappSettings.ai.rules.join('\\n')}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    rules: e.target.value.split('\\n').filter(r => r.trim())\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={3}\n                                                                        placeholder=\"Antworte immer auf Spanisch&#10;Sei freundlich und professionell\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Quellen/URLs (eine pro Zeile)\n                                                                    </label>\n                                                                    <textarea\n                                                                        value={formData.whatsappSettings.ai.sources.join('\\n')}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            whatsappSettings: {\n                                                                                ...formData.whatsappSettings,\n                                                                                ai: {\n                                                                                    ...formData.whatsappSettings.ai,\n                                                                                    sources: e.target.value.split('\\n').filter(s => s.trim())\n                                                                                }\n                                                                            }\n                                                                        })}\n                                                                        rows={2}\n                                                                        placeholder=\"https://wiki.example.com/manila-procedures&#10;https://wiki.example.com/faq\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                <div className=\"grid grid-cols-2 gap-4\">\n                                                                    <div>\n                                                                        <label htmlFor=\"aiTemperatureDesktop\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                            Temperature ({formData.whatsappSettings.ai.temperature})\n                                                                        </label>\n                                                                        <input\n                                                                            type=\"range\"\n                                                                            id=\"aiTemperatureDesktop\"\n                                                                            min=\"0\"\n                                                                            max=\"2\"\n                                                                            step=\"0.1\"\n                                                                            value={formData.whatsappSettings.ai.temperature}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                whatsappSettings: {\n                                                                                    ...formData.whatsappSettings,\n                                                                                    ai: {\n                                                                                        ...formData.whatsappSettings.ai,\n                                                                                        temperature: parseFloat(e.target.value)\n                                                                                    }\n                                                                                }\n                                                                            })}\n                                                                            className=\"mt-1 block w-full\"\n                                                                        />\n                                                                    </div>\n\n                                                                    <div>\n                                                                        <label htmlFor=\"aiMaxTokensDesktop\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                            Max Tokens\n                                                                        </label>\n                                                                        <input\n                                                                            type=\"number\"\n                                                                            id=\"aiMaxTokensDesktop\"\n                                                                            min=\"100\"\n                                                                            max=\"4000\"\n                                                                            step=\"100\"\n                                                                            value={formData.whatsappSettings.ai.maxTokens}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                whatsappSettings: {\n                                                                                    ...formData.whatsappSettings,\n                                                                                    ai: {\n                                                                                        ...formData.whatsappSettings.ai,\n                                                                                        maxTokens: parseInt(e.target.value) || 500\n                                                                                    }\n                                                                                }\n                                                                            })}\n                                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                        />\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        )}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                                    {/* LobbyPMS Settings Tab */}\n                                                    {activeSettingsTab === 'lobbypms' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                LobbyPMS Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API URL\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.lobbyPmsSettings.apiUrl}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, apiUrl: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"https://api.lobbypms.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API Key\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['lobbyPmsApiKey'] ? 'text' : 'password'}\n                                                                        value={formData.lobbyPmsSettings.apiKey}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, apiKey: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"API Key\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Property ID\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.lobbyPmsSettings.propertyId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            lobbyPmsSettings: { ...formData.lobbyPmsSettings, propertyId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Property ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* Bold Payment Settings Tab */}\n                                                    {activeSettingsTab === 'boldpayment' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                Bold Payment Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        API Key\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['boldPaymentApiKey'] ? 'text' : 'password'}\n                                                                        value={formData.boldPaymentSettings.apiKey}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, apiKey: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"API Key\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Merchant ID\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['boldPaymentMerchantId'] ? 'text' : 'password'}\n                                                                        value={formData.boldPaymentSettings.merchantId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, merchantId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Merchant ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Environment\n                                                                    </label>\n                                                                    <select\n                                                                        value={formData.boldPaymentSettings.environment}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            boldPaymentSettings: { ...formData.boldPaymentSettings, environment: e.target.value as 'sandbox' | 'production' }\n                                                                        })}\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    >\n                                                                        <option value=\"sandbox\">Sandbox</option>\n                                                                        <option value=\"production\">Production</option>\n                                                                    </select>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* TTLock Settings Tab */}\n                                                    {activeSettingsTab === 'doorsystem' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                TTLock Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Client ID\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.doorSystemSettings.clientId}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, clientId: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Client ID\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Client Secret\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['doorSystemClientSecret'] ? 'text' : 'password'}\n                                                                        value={formData.doorSystemSettings.clientSecret}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, clientSecret: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Client Secret\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Username\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.doorSystemSettings.username}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, username: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Username\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        Password\n                                                                    </label>\n                                                                    <input\n                                                                        type={showSecrets['doorSystemPassword'] ? 'text' : 'password'}\n                                                                        value={formData.doorSystemSettings.password}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            doorSystemSettings: { ...formData.doorSystemSettings, password: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Password\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n\n                                                    {/* Email Settings Tab */}\n                                                    {activeSettingsTab === 'email' && (\n                                                        <div>\n                                                            <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n                                                                Email Settings\n                                                            </h4>\n                                                            <div className=\"space-y-4\">\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Host\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpHost}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpHost: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"smtp.example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Port\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"number\"\n                                                                        value={formData.emailSettings.smtpPort}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpPort: parseInt(e.target.value) || 587 }\n                                                                        })}\n                                                                        placeholder=\"587\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP User\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpUser}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpUser: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"user@example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP Password\n                                                                    </label>\n                                                                    <div className=\"relative\">\n                                                                        <input\n                                                                            type={showSecrets['emailSmtpPass'] ? 'text' : 'password'}\n                                                                            value={formData.emailSettings.smtpPass}\n                                                                            onChange={(e) => setFormData({\n                                                                                ...formData,\n                                                                                emailSettings: { ...formData.emailSettings, smtpPass: e.target.value }\n                                                                            })}\n                                                                            placeholder=\"Password\"\n                                                                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                                        />\n                                                                        <button\n                                                                            type=\"button\"\n                                                                            onClick={() => setShowSecrets({ ...showSecrets, emailSmtpPass: !showSecrets['emailSmtpPass'] })}\n                                                                            className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                                        >\n                                                                            {showSecrets['emailSmtpPass'] ? (\n                                                                                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                                </svg>\n                                                                            ) : (\n                                                                                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                                </svg>\n                                                                            )}\n                                                                        </button>\n                                                                    </div>\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP From Email\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"email\"\n                                                                        value={formData.emailSettings.smtpFromEmail}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpFromEmail: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"noreply@example.com\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n                                                                <div>\n                                                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                        SMTP From Name\n                                                                    </label>\n                                                                    <input\n                                                                        type=\"text\"\n                                                                        value={formData.emailSettings.smtpFromName}\n                                                                        onChange={(e) => setFormData({\n                                                                            ...formData,\n                                                                            emailSettings: { ...formData.emailSettings, smtpFromName: e.target.value }\n                                                                        })}\n                                                                        placeholder=\"Branch Name\"\n                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                    />\n                                                                </div>\n\n                                                                {/* IMAP Settings Section */}\n                                                                <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4 mt-4\">\n                                                                    <div className=\"flex items-center justify-between mb-4\">\n                                                                        <h5 className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                                                            IMAP Settings (Email Reading)\n                                                                        </h5>\n                                                                        <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                            <input\n                                                                                type=\"checkbox\"\n                                                                                checked={formData.emailSettings.imap.enabled}\n                                                                                onChange={(e) => setFormData({\n                                                                                    ...formData,\n                                                                                    emailSettings: {\n                                                                                        ...formData.emailSettings,\n                                                                                        imap: {\n                                                                                            ...formData.emailSettings.imap,\n                                                                                            enabled: e.target.checked\n                                                                                        }\n                                                                                    }\n                                                                                })}\n                                                                                className=\"sr-only peer\"\n                                                                            />\n                                                                            <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                            <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                                {formData.emailSettings.imap.enabled ? 'Enabled' : 'Disabled'}\n                                                                            </span>\n                                                                        </label>\n                                                                    </div>\n\n                                                                    {formData.emailSettings.imap.enabled && (\n                                                                        <div className=\"space-y-4\">\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Host\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.host}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, host: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"imap.example.com\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Port\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"number\"\n                                                                                    value={formData.emailSettings.imap.port}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, port: parseInt(e.target.value) || 993 }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"993\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"relative inline-flex items-center cursor-pointer\">\n                                                                                    <input\n                                                                                        type=\"checkbox\"\n                                                                                        checked={formData.emailSettings.imap.secure}\n                                                                                        onChange={(e) => setFormData({\n                                                                                            ...formData,\n                                                                                            emailSettings: {\n                                                                                                ...formData.emailSettings,\n                                                                                                imap: { ...formData.emailSettings.imap, secure: e.target.checked }\n                                                                                            }\n                                                                                        })}\n                                                                                        className=\"sr-only peer\"\n                                                                                    />\n                                                                                    <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                                                                    <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\n                                                                                        Secure (SSL/TLS)\n                                                                                    </span>\n                                                                                </label>\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP User\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.user}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, user: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"user@example.com\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Password\n                                                                                </label>\n                                                                                <div className=\"relative\">\n                                                                                    <input\n                                                                                        type={showSecrets['emailImapPass'] ? 'text' : 'password'}\n                                                                                        value={formData.emailSettings.imap.password}\n                                                                                        onChange={(e) => setFormData({\n                                                                                            ...formData,\n                                                                                            emailSettings: {\n                                                                                                ...formData.emailSettings,\n                                                                                                imap: { ...formData.emailSettings.imap, password: e.target.value }\n                                                                                            }\n                                                                                        })}\n                                                                                        placeholder=\"Password\"\n                                                                                        className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n                                                                                    />\n                                                                                    <button\n                                                                                        type=\"button\"\n                                                                                        onClick={() => setShowSecrets({ ...showSecrets, emailImapPass: !showSecrets['emailImapPass'] })}\n                                                                                        className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                                                    >\n                                                                                        {showSecrets['emailImapPass'] ? (\n                                                                                            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                                                                                            </svg>\n                                                                                        ) : (\n                                                                                            <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                                                                            </svg>\n                                                                                        )}\n                                                                                    </button>\n                                                                                </div>\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    IMAP Folder\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.folder}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, folder: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"INBOX\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                            <div>\n                                                                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                                                                    Processed Folder (optional)\n                                                                                </label>\n                                                                                <input\n                                                                                    type=\"text\"\n                                                                                    value={formData.emailSettings.imap.processedFolder}\n                                                                                    onChange={(e) => setFormData({\n                                                                                        ...formData,\n                                                                                        emailSettings: {\n                                                                                            ...formData.emailSettings,\n                                                                                            imap: { ...formData.emailSettings.imap, processedFolder: e.target.value }\n                                                                                        }\n                                                                                    })}\n                                                                                    placeholder=\"Processed\"\n                                                                                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                                                                                />\n                                                                            </div>\n                                                                        </div>\n                                                                    )}\n                                                                </div>\n                                                            </div>\n                                                        </div>\n                                                    )}\n                                                </div>\n                                            </>\n                                        )}\n                                    </div>\n                                </div>\n\n                                {/* Buttons */}\n                                <div className=\"flex justify-end pt-4 gap-2 px-6 pb-6 border-t dark:border-gray-700\">\n                                    <div className=\"relative group\">\n                                        <button\n                                            type=\"button\"\n                                            onClick={handleCloseModal}\n                                            className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                                        >\n                                            <XMarkIcon className=\"h-5 w-5\" />\n                                        </button>\n                                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                            {t('common.cancel', { defaultValue: 'Abbrechen' })}\n                                        </div>\n                                    </div>\n                                    <div className=\"relative group\">\n                                        <button\n                                            type=\"submit\"\n                                            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors\"\n                                        >\n                                            <CheckIcon className=\"h-5 w-5\" />\n                                        </button>\n                                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                            {editingBranch ? t('common.update', { defaultValue: 'Aktualisieren' }) : t('common.create', { defaultValue: 'Erstellen' })}\n                                        </div>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                    )}\n                </>\n            )}\n        </div>\n    );\n};\n\nexport default BranchManagementTab;\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../../config/axios.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport { useAuth } from '../../hooks/useAuth.tsx';\nimport { TourProvider } from '../../types/tour.ts';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface Branch {\n    id: number;\n    name: string;\n}\n\ninterface CreateTourProviderModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onProviderCreated: (newProvider: TourProvider) => void;\n}\n\nconst CreateTourProviderModal = ({ isOpen, onClose, onProviderCreated }: CreateTourProviderModalProps) => {\n    const { t } = useTranslation();\n    const { user } = useAuth();\n    const { showMessage } = useMessage();\n    \n    const [name, setName] = useState('');\n    const [phone, setPhone] = useState('');\n    const [email, setEmail] = useState('');\n    const [contactPerson, setContactPerson] = useState('');\n    const [notes, setNotes] = useState('');\n    const [branchId, setBranchId] = useState<number | ''>('');\n    \n    const [branches, setBranches] = useState<Branch[]>([]);\n    const [error, setError] = useState<string | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [loadingData, setLoadingData] = useState(true);\n\n    // Lade Branches\n    useEffect(() => {\n        const loadData = async () => {\n            try {\n                setLoadingData(true);\n                const branchesRes = await axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE);\n                setBranches(branchesRes.data?.data || branchesRes.data || []);\n            } catch (err: any) {\n                console.error('Fehler beim Laden der Daten:', err);\n                showMessage(t('errors.loadError'), 'error');\n            } finally {\n                setLoadingData(false);\n            }\n        };\n        \n        if (isOpen) {\n            loadData();\n        }\n    }, [isOpen, t, showMessage]);\n\n    // Reset form when modal opens/closes\n    useEffect(() => {\n        if (!isOpen) {\n            setName('');\n            setPhone('');\n            setEmail('');\n            setContactPerson('');\n            setNotes('');\n            setBranchId('');\n            setError(null);\n        }\n    }, [isOpen]);\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError(null);\n\n        // Validierung\n        if (!name.trim()) {\n            setError(t('tours.providers.validation.nameRequired', { defaultValue: 'Name ist erforderlich' }));\n            return;\n        }\n\n        setLoading(true);\n        try {\n            const response = await axiosInstance.post(API_ENDPOINTS.TOUR_PROVIDERS.BASE, {\n                name: name.trim(),\n                phone: phone.trim() || null,\n                email: email.trim() || null,\n                contactPerson: contactPerson.trim() || null,\n                notes: notes.trim() || null,\n                branchId: branchId ? Number(branchId) : null\n            });\n\n            if (response.data?.success && response.data?.data) {\n                showMessage(\n                    t('tours.providers.created', { defaultValue: 'Tour-Provider erfolgreich erstellt' }),\n                    'success'\n                );\n                onProviderCreated(response.data.data);\n                onClose();\n            } else {\n                throw new Error(response.data?.message || 'Fehler beim Erstellen des Providers');\n            }\n        } catch (err: any) {\n            console.error('Fehler beim Erstellen des Providers:', err);\n            const errorMessage = err.response?.data?.message || err.message || t('errors.unknownError');\n            setError(errorMessage);\n            showMessage(errorMessage, 'error');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    return (\n        <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                    <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\n                        <Dialog.Title className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                            {t('tours.providers.create', { defaultValue: 'Neuer Tour-Provider' })}\n                        </Dialog.Title>\n                        <button\n                            onClick={onClose}\n                            className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n                        >\n                            <XMarkIcon className=\"h-6 w-6\" />\n                        </button>\n                    </div>\n\n                    <form onSubmit={handleSubmit} className=\"p-4 space-y-4\">\n                        {error && (\n                            <div className=\"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg p-3\">\n                                <p className=\"text-sm text-red-800 dark:text-red-200\">{error}</p>\n                            </div>\n                        )}\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.name', { defaultValue: 'Name' })} *\n                            </label>\n                            <input\n                                type=\"text\"\n                                value={name}\n                                onChange={(e) => setName(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                required\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.contactPerson', { defaultValue: 'Ansprechpartner' })}\n                            </label>\n                            <input\n                                type=\"text\"\n                                value={contactPerson}\n                                onChange={(e) => setContactPerson(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.phone', { defaultValue: 'Telefon' })}\n                            </label>\n                            <input\n                                type=\"tel\"\n                                value={phone}\n                                onChange={(e) => setPhone(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.email', { defaultValue: 'E-Mail' })}\n                            </label>\n                            <input\n                                type=\"email\"\n                                value={email}\n                                onChange={(e) => setEmail(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.branch', { defaultValue: 'Niederlassung' })}\n                            </label>\n                            <select\n                                value={branchId}\n                                onChange={(e) => setBranchId(e.target.value ? Number(e.target.value) : '')}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            >\n                                <option value=\"\">{t('common.all', { defaultValue: 'Alle' })}</option>\n                                {branches.map(branch => (\n                                    <option key={branch.id} value={branch.id}>\n                                        {branch.name}\n                                    </option>\n                                ))}\n                            </select>\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.notes', { defaultValue: 'Notizen' })}\n                            </label>\n                            <textarea\n                                value={notes}\n                                onChange={(e) => setNotes(e.target.value)}\n                                rows={3}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div className=\"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                            <button\n                                type=\"button\"\n                                onClick={onClose}\n                                className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n                            >\n                                {t('common.cancel', 'Abbrechen')}\n                            </button>\n                            <button\n                                type=\"submit\"\n                                disabled={loading || loadingData}\n                                className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                                {loading ? t('common.saving', 'Speichere...') : t('common.save', 'Speichern')}\n                            </button>\n                        </div>\n                    </form>\n                </Dialog.Panel>\n            </div>\n        </Dialog>\n    );\n};\n\nexport default CreateTourProviderModal;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../../config/axios.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport { useAuth } from '../../hooks/useAuth.tsx';\nimport { TourProvider } from '../../types/tour.ts';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface Branch {\n    id: number;\n    name: string;\n}\n\ninterface EditTourProviderModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    provider: TourProvider | null;\n    onProviderUpdated: (updatedProvider: TourProvider) => void;\n}\n\nconst EditTourProviderModal = ({ isOpen, onClose, provider, onProviderUpdated }: EditTourProviderModalProps) => {\n    const { t } = useTranslation();\n    const { user } = useAuth();\n    const { showMessage } = useMessage();\n    \n    const [name, setName] = useState('');\n    const [phone, setPhone] = useState('');\n    const [email, setEmail] = useState('');\n    const [contactPerson, setContactPerson] = useState('');\n    const [notes, setNotes] = useState('');\n    const [branchId, setBranchId] = useState<number | ''>('');\n    \n    const [branches, setBranches] = useState<Branch[]>([]);\n    const [error, setError] = useState<string | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [loadingData, setLoadingData] = useState(true);\n\n    // Lade Branches und setze Form-Daten\n    useEffect(() => {\n        const loadData = async () => {\n            try {\n                setLoadingData(true);\n                const branchesRes = await axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE);\n                setBranches(branchesRes.data?.data || branchesRes.data || []);\n            } catch (err: any) {\n                console.error('Fehler beim Laden der Daten:', err);\n                showMessage(t('errors.loadError'), 'error');\n            } finally {\n                setLoadingData(false);\n            }\n        };\n        \n        if (isOpen) {\n            loadData();\n        }\n    }, [isOpen, t, showMessage]);\n\n    // Setze Form-Daten wenn Provider geladen wird\n    useEffect(() => {\n        if (provider) {\n            setName(provider.name || '');\n            setPhone(provider.phone || '');\n            setEmail(provider.email || '');\n            setContactPerson(provider.contactPerson || '');\n            setNotes(provider.notes || '');\n            setBranchId(provider.branchId || '');\n        } else {\n            setName('');\n            setPhone('');\n            setEmail('');\n            setContactPerson('');\n            setNotes('');\n            setBranchId('');\n        }\n        setError(null);\n    }, [provider, isOpen]);\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        if (!provider) return;\n        setError(null);\n\n        // Validierung\n        if (!name.trim()) {\n            setError(t('tours.providers.validation.nameRequired', { defaultValue: 'Name ist erforderlich' }));\n            return;\n        }\n\n        setLoading(true);\n        try {\n            const response = await axiosInstance.put(API_ENDPOINTS.TOUR_PROVIDERS.BY_ID(provider.id), {\n                name: name.trim(),\n                phone: phone.trim() || null,\n                email: email.trim() || null,\n                contactPerson: contactPerson.trim() || null,\n                notes: notes.trim() || null,\n                branchId: branchId ? Number(branchId) : null\n            });\n\n            if (response.data?.success && response.data?.data) {\n                showMessage(\n                    t('tours.providers.updated', { defaultValue: 'Tour-Provider erfolgreich aktualisiert' }),\n                    'success'\n                );\n                onProviderUpdated(response.data.data);\n                onClose();\n            } else {\n                throw new Error(response.data?.message || 'Fehler beim Aktualisieren des Providers');\n            }\n        } catch (err: any) {\n            console.error('Fehler beim Aktualisieren des Providers:', err);\n            const errorMessage = err.response?.data?.message || err.message || t('errors.unknownError');\n            setError(errorMessage);\n            showMessage(errorMessage, 'error');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (!provider) return null;\n\n    return (\n        <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                    <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\n                        <Dialog.Title className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                            {t('tours.providers.edit', { defaultValue: 'Tour-Provider bearbeiten' })}\n                        </Dialog.Title>\n                        <button\n                            onClick={onClose}\n                            className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n                        >\n                            <XMarkIcon className=\"h-6 w-6\" />\n                        </button>\n                    </div>\n\n                    <form onSubmit={handleSubmit} className=\"p-4 space-y-4\">\n                        {error && (\n                            <div className=\"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg p-3\">\n                                <p className=\"text-sm text-red-800 dark:text-red-200\">{error}</p>\n                            </div>\n                        )}\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.name', { defaultValue: 'Name' })} *\n                            </label>\n                            <input\n                                type=\"text\"\n                                value={name}\n                                onChange={(e) => setName(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                required\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.contactPerson', { defaultValue: 'Ansprechpartner' })}\n                            </label>\n                            <input\n                                type=\"text\"\n                                value={contactPerson}\n                                onChange={(e) => setContactPerson(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.phone', { defaultValue: 'Telefon' })}\n                            </label>\n                            <input\n                                type=\"tel\"\n                                value={phone}\n                                onChange={(e) => setPhone(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.email', { defaultValue: 'E-Mail' })}\n                            </label>\n                            <input\n                                type=\"email\"\n                                value={email}\n                                onChange={(e) => setEmail(e.target.value)}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.branch', { defaultValue: 'Niederlassung' })}\n                            </label>\n                            <select\n                                value={branchId}\n                                onChange={(e) => setBranchId(e.target.value ? Number(e.target.value) : '')}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            >\n                                <option value=\"\">{t('common.all', { defaultValue: 'Alle' })}</option>\n                                {branches.map(branch => (\n                                    <option key={branch.id} value={branch.id}>\n                                        {branch.name}\n                                    </option>\n                                ))}\n                            </select>\n                        </div>\n\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                {t('tours.providers.notes', { defaultValue: 'Notizen' })}\n                            </label>\n                            <textarea\n                                value={notes}\n                                onChange={(e) => setNotes(e.target.value)}\n                                rows={3}\n                                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                                disabled={loading || loadingData}\n                            />\n                        </div>\n\n                        <div className=\"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                            <button\n                                type=\"button\"\n                                onClick={onClose}\n                                className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n                            >\n                                {t('common.cancel', 'Abbrechen')}\n                            </button>\n                            <button\n                                type=\"submit\"\n                                disabled={loading || loadingData}\n                                className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                                {loading ? t('common.saving', 'Speichere...') : t('common.save', 'Speichern')}\n                            </button>\n                        </div>\n                    </form>\n                </Dialog.Panel>\n            </div>\n        </Dialog>\n    );\n};\n\nexport default EditTourProviderModal;\n\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { PencilIcon, TrashIcon, PlusIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport axiosInstance from '../../config/axios.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport { TourProvider } from '../../types/tour.ts';\nimport CreateTourProviderModal from './CreateTourProviderModal.tsx';\nimport EditTourProviderModal from './EditTourProviderModal.tsx';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface TourProvidersTabProps {\n    onError: (error: string) => void;\n}\n\n// ProviderCard-Komponente fr mobile und Desktop-Ansicht\nconst ProviderCard: React.FC<{\n    provider: TourProvider;\n    onEdit: (provider: TourProvider) => void;\n    onDelete: (providerId: number) => void;\n    canEdit: boolean;\n    canDelete: boolean;\n}> = ({ provider, onEdit, onDelete, canEdit, canDelete }) => {\n    const { t } = useTranslation();\n    return (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4\">\n            {/* Header mit Provider-Name und Aktionen */}\n            <div className=\"flex justify-between items-start mb-2\">\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">{provider.name}</h3>\n                \n                <div className=\"flex space-x-2\">\n                    {canEdit && (\n                        <div className=\"relative group\">\n                            <button\n                                onClick={() => onEdit(provider)}\n                                className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n                            >\n                                <PencilIcon className=\"h-5 w-5\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('common.edit', { defaultValue: 'Bearbeiten' })}\n                            </div>\n                        </div>\n                    )}\n                    \n                    {canDelete && (\n                        <div className=\"relative group\">\n                            <button\n                                onClick={() => onDelete(provider.id)}\n                                className=\"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 p-1\"\n                            >\n                                <TrashIcon className=\"h-5 w-5\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('common.delete', { defaultValue: 'Lschen' })}\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            {/* Details */}\n            <div className=\"space-y-1 text-sm text-gray-600 dark:text-gray-400\">\n                {provider.contactPerson && (\n                    <p>\n                        <span className=\"font-medium\">{t('tours.providers.contactPerson', { defaultValue: 'Ansprechpartner' })}:</span>{' '}\n                        {provider.contactPerson}\n                    </p>\n                )}\n                {provider.phone && (\n                    <p>\n                        <span className=\"font-medium\">{t('tours.providers.phone', { defaultValue: 'Telefon' })}:</span>{' '}\n                        {provider.phone}\n                    </p>\n                )}\n                {provider.email && (\n                    <p>\n                        <span className=\"font-medium\">{t('tours.providers.email', { defaultValue: 'E-Mail' })}:</span>{' '}\n                        {provider.email}\n                    </p>\n                )}\n                {provider.notes && (\n                    <p className=\"mt-2 text-xs\">\n                        <span className=\"font-medium\">{t('tours.providers.notes', { defaultValue: 'Notizen' })}:</span>{' '}\n                        {provider.notes}\n                    </p>\n                )}\n            </div>\n        </div>\n    );\n};\n\nconst TourProvidersTab: React.FC<TourProvidersTabProps> = ({ onError }) => {\n    const { t } = useTranslation();\n    const { showMessage } = useMessage();\n    const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n    const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n    const [editingProvider, setEditingProvider] = useState<TourProvider | null>(null);\n    const [providers, setProviders] = useState<TourProvider[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [searchTerm, setSearchTerm] = useState('');\n    const { hasPermission } = usePermissions();\n\n    // Berechtigungen prfen\n    const canCreate = hasPermission('tour_providers', 'write', 'table');\n    const canEdit = hasPermission('tour_providers', 'write', 'table');\n    const canDelete = hasPermission('tour_providers', 'write', 'table');\n\n    // Providers laden\n    const fetchProviders = useCallback(async () => {\n        setLoading(true);\n        try {\n            const response = await axiosInstance.get(API_ENDPOINTS.TOUR_PROVIDERS.BASE);\n            const data = response.data?.data || response.data || [];\n            setProviders(Array.isArray(data) ? data : []);\n        } catch (error: any) {\n            console.error('Fehler beim Laden der Tour-Provider:', error);\n            const errorMessage = error.response?.data?.message || t('tours.providers.loadError', { defaultValue: 'Fehler beim Laden der Provider' });\n            onError(errorMessage);\n            showMessage(errorMessage, 'error');\n        } finally {\n            setLoading(false);\n        }\n    }, [onError, t, showMessage]);\n\n    useEffect(() => {\n        fetchProviders();\n    }, [fetchProviders]);\n\n    // Gefilterte Provider\n    const filteredProviders = providers.filter(provider => {\n        if (!searchTerm) return true;\n        const search = searchTerm.toLowerCase();\n        return (\n            provider.name.toLowerCase().includes(search) ||\n            provider.contactPerson?.toLowerCase().includes(search) ||\n            provider.phone?.toLowerCase().includes(search) ||\n            provider.email?.toLowerCase().includes(search) ||\n            provider.notes?.toLowerCase().includes(search)\n        );\n    });\n\n    // Handler fr Create\n    const handleCreate = () => {\n        setIsCreateModalOpen(true);\n    };\n\n    // Handler fr Edit\n    const handleEdit = (provider: TourProvider) => {\n        setEditingProvider(provider);\n        setIsEditModalOpen(true);\n    };\n\n    // Handler fr Delete\n    const handleDelete = async (providerId: number) => {\n        if (!window.confirm(t('tours.providers.deleteConfirm', { defaultValue: 'Mchten Sie diesen Provider wirklich lschen?' }))) {\n            return;\n        }\n\n        try {\n            await axiosInstance.delete(API_ENDPOINTS.TOUR_PROVIDERS.BY_ID(providerId));\n            showMessage(\n                t('tours.providers.deleted', { defaultValue: 'Tour-Provider erfolgreich gelscht' }),\n                'success'\n            );\n            fetchProviders();\n        } catch (error: any) {\n            console.error('Fehler beim Lschen des Providers:', error);\n            const errorMessage = error.response?.data?.message || t('errors.unknownError');\n            onError(errorMessage);\n            showMessage(errorMessage, 'error');\n        }\n    };\n\n    // Handler fr Provider erstellt\n    const handleProviderCreated = (newProvider: TourProvider) => {\n        fetchProviders();\n    };\n\n    // Handler fr Provider aktualisiert\n    const handleProviderUpdated = (updatedProvider: TourProvider) => {\n        fetchProviders();\n    };\n\n    if (loading) {\n        return (\n            <div className=\"flex justify-center items-center py-12\">\n                <div className=\"text-gray-500 dark:text-gray-400\">{t('common.loading', { defaultValue: 'Lade...' })}</div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"space-y-4\">\n            {/* Header mit Suche und Create-Button */}\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n                <div className=\"flex-1 w-full sm:max-w-md\">\n                    <input\n                        type=\"text\"\n                        placeholder={t('tours.providers.search', { defaultValue: 'Provider suchen...' })}\n                        value={searchTerm}\n                        onChange={(e) => setSearchTerm(e.target.value)}\n                        className=\"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                </div>\n                {canCreate && (\n                    <div className=\"relative group\">\n                        <button \n                            onClick={handleCreate}\n                            className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                            style={{ width: '30.19px', height: '30.19px' }}\n                            aria-label={t('tours.providers.create', { defaultValue: 'Neuer Provider' })}\n                        >\n                            <PlusIcon className=\"h-4 w-4\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                            {t('tours.providers.create', { defaultValue: 'Neuer Provider' })}\n                        </div>\n                    </div>\n                )}\n            </div>\n\n            {/* Provider-Liste */}\n            {filteredProviders.length === 0 ? (\n                <div className=\"text-center py-12 text-gray-500 dark:text-gray-400\">\n                    {searchTerm\n                        ? t('tours.providers.noResults', { defaultValue: 'Keine Provider gefunden' })\n                        : t('tours.providers.empty', { defaultValue: 'Keine Tour-Provider vorhanden' })}\n                </div>\n            ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {filteredProviders.map(provider => (\n                        <ProviderCard\n                            key={provider.id}\n                            provider={provider}\n                            onEdit={handleEdit}\n                            onDelete={handleDelete}\n                            canEdit={canEdit}\n                            canDelete={canDelete}\n                        />\n                    ))}\n                </div>\n            )}\n\n            {/* Modals */}\n            <CreateTourProviderModal\n                isOpen={isCreateModalOpen}\n                onClose={() => setIsCreateModalOpen(false)}\n                onProviderCreated={handleProviderCreated}\n            />\n            <EditTourProviderModal\n                isOpen={isEditModalOpen}\n                onClose={() => {\n                    setIsEditModalOpen(false);\n                    setEditingProvider(null);\n                }}\n                provider={editingProvider}\n                onProviderUpdated={handleProviderUpdated}\n            />\n        </div>\n    );\n};\n\nexport default TourProvidersTab;\n\n","export enum TourType {\r\n  OWN = 'own',\r\n  EXTERNAL = 'external'\r\n}\r\n\r\nexport enum TourBookingStatus {\r\n  CONFIRMED = 'confirmed',\r\n  CANCELLED = 'cancelled',\r\n  COMPLETED = 'completed',\r\n  NO_SHOW = 'no_show'\r\n}\r\n\r\nexport enum MessageDirection {\r\n  OUTGOING = 'outgoing',\r\n  INCOMING = 'incoming'\r\n}\r\n\r\nexport enum MessageStatus {\r\n  SENT = 'sent',\r\n  DELIVERED = 'delivered',\r\n  READ = 'read',\r\n  FAILED = 'failed'\r\n}\r\n\r\nexport interface Tour {\r\n  id: number;\r\n  title: string;\r\n  description?: string | null;\r\n  type: TourType;\r\n  isActive: boolean;\r\n  duration?: number | null;\r\n  maxParticipants?: number | null;\r\n  minParticipants?: number | null;\r\n  price?: number | string | null;\r\n  currency?: string | null;\r\n  location?: string | null;\r\n  meetingPoint?: string | null;\r\n  includes?: string | null;\r\n  excludes?: string | null;\r\n  requirements?: string | null;\r\n  totalCommission?: number | string | null;\r\n  totalCommissionPercent?: number | string | null;\r\n  sellerCommissionPercent?: number | string | null;\r\n  sellerCommissionFixed?: number | string | null;\r\n  externalProviderId?: number | null;\r\n  externalProvider?: TourProvider | null;\r\n  externalBookingUrl?: string | null;\r\n  imageUrl?: string | null;\r\n  galleryUrls?: string[] | null;\r\n  availableFrom?: string | null;\r\n  availableTo?: string | null;\r\n  recurringSchedule?: any | null;\r\n  organizationId: number;\r\n  branchId?: number | null;\r\n  branch?: { id: number; name: string } | null;\r\n  createdById?: number | null;\r\n  createdBy?: { id: number; firstName: string; lastName: string } | null;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface TourProvider {\r\n  id: number;\r\n  name: string;\r\n  phone?: string | null;\r\n  email?: string | null;\r\n  contactPerson?: string | null;\r\n  notes?: string | null;\r\n  organizationId: number;\r\n  branchId?: number | null;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface TourBooking {\r\n  id: number;\r\n  tourId: number;\r\n  tour?: Tour | null;\r\n  bookingDate: string;\r\n  tourDate: string;\r\n  numberOfParticipants: number;\r\n  totalPrice: number | string;\r\n  currency: string;\r\n  customerName: string;\r\n  customerEmail?: string | null;\r\n  customerPhone?: string | null;\r\n  customerNotes?: string | null;\r\n  paymentStatus: 'pending' | 'paid' | 'partially_paid' | 'refunded';\r\n  amountPaid?: number | string | null;\r\n  amountPending?: number | string | null;\r\n  paymentLink?: string | null;\r\n  paymentDeadline?: string | null;\r\n  autoCancelEnabled?: boolean;\r\n  reservedUntil?: string | null;\r\n  bookedById?: number | null;\r\n  bookedBy?: { id: number; firstName: string; lastName: string } | null;\r\n  commissionAmount?: number | string | null;\r\n  commissionCalculatedAt?: string | null;\r\n  status: TourBookingStatus;\r\n  cancelledBy?: string | null;\r\n  cancelledAt?: string | null;\r\n  cancelledReason?: string | null;\r\n  isExternal: boolean;\r\n  externalBookingId?: string | null;\r\n  externalStatus?: string | null;\r\n  externalMessage?: string | null;\r\n  alternativeTours?: number[] | null;\r\n  organizationId: number;\r\n  branchId?: number | null;\r\n  branch?: { id: number; name: string } | null;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface TourReservation {\r\n  id: number;\r\n  tourId: number;\r\n  tour?: Tour | null;\r\n  bookingId: number;\r\n  booking?: TourBooking | null;\r\n  reservationId: number;\r\n  reservation?: any | null;\r\n  tourPrice: number | string;\r\n  accommodationPrice: number | string;\r\n  currency: string;\r\n  tourPricePaid?: number | string | null;\r\n  tourPricePending?: number | string | null;\r\n  accommodationPaid?: number | string | null;\r\n  accommodationPending?: number | string | null;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\nexport interface TourWhatsAppMessage {\r\n  id: number;\r\n  bookingId: number;\r\n  booking?: TourBooking | null;\r\n  direction: MessageDirection;\r\n  message: string;\r\n  phoneNumber: string;\r\n  sentAt: string;\r\n  status: MessageStatus;\r\n  errorMessage?: string | null;\r\n  processed: boolean;\r\n  processedAt?: string | null;\r\n  action?: string | null;\r\n  extractedData?: any | null;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n}\r\n\r\n\r\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../../config/axios.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport { useAuth } from '../../hooks/useAuth.tsx';\nimport { Tour, TourType, TourProvider } from '../../types/tour.ts';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface Branch {\n    id: number;\n    name: string;\n}\n\ninterface CreateTourModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onTourCreated: (newTour: Tour) => void;\n}\n\nconst CreateTourModal = ({ isOpen, onClose, onTourCreated }: CreateTourModalProps) => {\n    const { t } = useTranslation();\n    const { user } = useAuth();\n    const { showMessage } = useMessage();\n    \n    const [title, setTitle] = useState('');\n    const [description, setDescription] = useState('');\n    const [type, setType] = useState<TourType>(TourType.OWN);\n    const [isActive, setIsActive] = useState(true);\n    const [duration, setDuration] = useState<number | ''>('');\n    const [maxParticipants, setMaxParticipants] = useState<number | ''>('');\n    const [minParticipants, setMinParticipants] = useState<number | ''>('');\n    const [price, setPrice] = useState<number | ''>('');\n    const [currency, setCurrency] = useState('COP');\n    const [location, setLocation] = useState('');\n    const [meetingPoint, setMeetingPoint] = useState('');\n    const [includes, setIncludes] = useState('');\n    const [excludes, setExcludes] = useState('');\n    const [requirements, setRequirements] = useState('');\n    const [totalCommission, setTotalCommission] = useState<number | ''>('');\n    const [totalCommissionPercent, setTotalCommissionPercent] = useState<number | ''>('');\n    const [sellerCommissionPercent, setSellerCommissionPercent] = useState<number | ''>('');\n    const [sellerCommissionFixed, setSellerCommissionFixed] = useState<number | ''>('');\n    const [externalProviderId, setExternalProviderId] = useState<number | ''>('');\n    const [externalBookingUrl, setExternalBookingUrl] = useState('');\n    const [branchId, setBranchId] = useState<number | ''>('');\n    const [imageFile, setImageFile] = useState<File | null>(null);\n    const [imagePreview, setImagePreview] = useState<string | null>(null);\n    const [galleryFiles, setGalleryFiles] = useState<File[]>([]);\n    const [galleryPreviews, setGalleryPreviews] = useState<string[]>([]);\n    const [uploadingImage, setUploadingImage] = useState(false);\n    \n    const [branches, setBranches] = useState<Branch[]>([]);\n    const [tourProviders, setTourProviders] = useState<TourProvider[]>([]);\n    const [error, setError] = useState<string | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [loadingData, setLoadingData] = useState(true);\n\n    // Lade Branches und TourProviders\n    useEffect(() => {\n        const loadData = async () => {\n            try {\n                setLoadingData(true);\n                const [branchesRes, providersRes] = await Promise.all([\n                    axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE),\n                    axiosInstance.get(API_ENDPOINTS.TOUR_PROVIDERS?.BASE || '/api/tour-providers')\n                ]);\n                \n                setBranches(branchesRes.data?.data || branchesRes.data || []);\n                setTourProviders(providersRes.data?.data || providersRes.data || []);\n            } catch (err: any) {\n                console.error('Fehler beim Laden der Daten:', err);\n                showMessage(t('errors.loadError'), 'error');\n            } finally {\n                setLoadingData(false);\n            }\n        };\n        \n        if (isOpen) {\n            loadData();\n        }\n    }, [isOpen, t, showMessage]);\n\n    // Reset form when modal opens/closes\n    useEffect(() => {\n        if (!isOpen) {\n            setTitle('');\n            setDescription('');\n            setType(TourType.OWN);\n            setIsActive(true);\n            setDuration('');\n            setMaxParticipants('');\n            setMinParticipants('');\n            setPrice('');\n            setCurrency('COP');\n            setLocation('');\n            setMeetingPoint('');\n            setIncludes('');\n            setExcludes('');\n            setRequirements('');\n            setTotalCommission('');\n            setTotalCommissionPercent('');\n            setSellerCommissionPercent('');\n            setSellerCommissionFixed('');\n            setExternalProviderId('');\n            setExternalBookingUrl('');\n            setBranchId('');\n            setImageFile(null);\n            setImagePreview(null);\n            setGalleryFiles([]);\n            setGalleryPreviews([]);\n            setError(null);\n        }\n    }, [isOpen]);\n    \n    // Bild-Vorschau erstellen\n    const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        if (file) {\n            setImageFile(file);\n            const reader = new FileReader();\n            reader.onloadend = () => {\n                setImagePreview(reader.result as string);\n            };\n            reader.readAsDataURL(file);\n        }\n    };\n    \n    const handleGalleryChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const files = Array.from(e.target.files || []);\n        if (files.length > 0) {\n            setGalleryFiles(prev => [...prev, ...files]);\n            files.forEach(file => {\n                const reader = new FileReader();\n                reader.onloadend = () => {\n                    setGalleryPreviews(prev => [...prev, reader.result as string]);\n                };\n                reader.readAsDataURL(file);\n            });\n        }\n    };\n    \n    const removeGalleryImage = (index: number) => {\n        setGalleryFiles(prev => prev.filter((_, i) => i !== index));\n        setGalleryPreviews(prev => prev.filter((_, i) => i !== index));\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError(null);\n\n        // Validierungen\n        if (!title.trim() || title.trim().length < 3) {\n            setError(t('tours.validation.titleMinLength', { defaultValue: 'Titel muss mindestens 3 Zeichen lang sein' }));\n            return;\n        }\n\n        const maxPart = maxParticipants ? Number(maxParticipants) : null;\n        const minPart = minParticipants ? Number(minParticipants) : null;\n        if (maxPart !== null && minPart !== null && maxPart < minPart) {\n            setError(t('tours.validation.maxParticipantsMin', { defaultValue: 'Maximale Teilnehmeranzahl muss >= minimale Teilnehmeranzahl sein' }));\n            return;\n        }\n\n        if (type === TourType.EXTERNAL && !externalProviderId) {\n            setError(t('tours.validation.externalProviderRequired', { defaultValue: 'Externer Anbieter ist bei externen Touren erforderlich' }));\n            return;\n        }\n\n        // availableFrom <= availableTo Validierung (falls beide gesetzt) - wird im Backend validiert\n\n        // Preise >= 0\n        if (price !== '' && Number(price) < 0) {\n            setError(t('tours.validation.priceNonNegative', { defaultValue: 'Preis muss >= 0 sein' }));\n            return;\n        }\n\n        if (totalCommission !== '' && Number(totalCommission) < 0) {\n            setError(t('tours.validation.commissionNonNegative', { defaultValue: 'Kommission muss >= 0 sein' }));\n            return;\n        }\n\n        setLoading(true);\n\n        try {\n            const tourData: any = {\n                title,\n                description: description || null,\n                type,\n                isActive,\n                duration: duration ? Number(duration) : null,\n                maxParticipants: maxParticipants ? Number(maxParticipants) : null,\n                minParticipants: minParticipants ? Number(minParticipants) : null,\n                price: price ? Number(price) : null,\n                currency: currency || 'COP',\n                location: location || null,\n                meetingPoint: meetingPoint || null,\n                includes: includes || null,\n                excludes: excludes || null,\n                requirements: requirements || null,\n                totalCommission: totalCommission ? Number(totalCommission) : null,\n                totalCommissionPercent: totalCommissionPercent ? Number(totalCommissionPercent) : null,\n                sellerCommissionPercent: sellerCommissionPercent ? Number(sellerCommissionPercent) : null,\n                sellerCommissionFixed: sellerCommissionFixed ? Number(sellerCommissionFixed) : null,\n                externalProviderId: externalProviderId ? Number(externalProviderId) : null,\n                externalBookingUrl: externalBookingUrl || null,\n                branchId: branchId ? Number(branchId) : null\n            };\n\n            const response = await axiosInstance.post(API_ENDPOINTS.TOURS.BASE, tourData);\n            \n            if (response.data.success) {\n                const createdTour = response.data.data;\n                \n                // Hauptbild hochladen (falls vorhanden)\n                if (imageFile && createdTour.id) {\n                    try {\n                        setUploadingImage(true);\n                        const formData = new FormData();\n                        formData.append('image', imageFile);\n                        await axiosInstance.post(API_ENDPOINTS.TOURS.UPLOAD_IMAGE(createdTour.id), formData, {\n                            headers: { 'Content-Type': 'multipart/form-data' }\n                        });\n                    } catch (imgErr: any) {\n                        console.error('Fehler beim Hochladen des Hauptbildes:', imgErr);\n                        showMessage(t('tours.imageUploadError', 'Tour erstellt, aber Fehler beim Hochladen des Bildes'), 'warning');\n                    } finally {\n                        setUploadingImage(false);\n                    }\n                }\n                \n                // Galerie-Bilder hochladen (falls vorhanden)\n                if (galleryFiles.length > 0 && createdTour.id) {\n                    try {\n                        setUploadingImage(true);\n                        for (const file of galleryFiles) {\n                            const formData = new FormData();\n                            formData.append('image', file);\n                            await axiosInstance.post(API_ENDPOINTS.TOURS.UPLOAD_GALLERY(createdTour.id), formData, {\n                                headers: { 'Content-Type': 'multipart/form-data' }\n                            });\n                        }\n                    } catch (galleryErr: any) {\n                        console.error('Fehler beim Hochladen der Galerie-Bilder:', galleryErr);\n                        showMessage(t('tours.galleryUploadError', 'Tour erstellt, aber Fehler beim Hochladen der Galerie-Bilder'), 'warning');\n                    } finally {\n                        setUploadingImage(false);\n                    }\n                }\n                \n                showMessage(t('tours.createSuccess', 'Tour erfolgreich erstellt'), 'success');\n                // Lade Tour neu, um Bilder zu erhalten\n                const updatedResponse = await axiosInstance.get(API_ENDPOINTS.TOURS.BY_ID(createdTour.id));\n                onTourCreated(updatedResponse.data.data);\n                onClose();\n            } else {\n                setError(response.data.message || t('errors.saveError'));\n            }\n        } catch (err: any) {\n            console.error('Fehler beim Erstellen der Tour:', err);\n            const errorMessage = err.response?.data?.message || t('errors.saveError');\n            setError(errorMessage);\n            showMessage(errorMessage, 'error');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[90vh] overflow-y-auto\">\n                    <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\n                        <Dialog.Title className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n                            {t('tours.create', 'Neue Tour erstellen')}\n                        </Dialog.Title>\n                        <button\n                            onClick={onClose}\n                            className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n                        >\n                            <XMarkIcon className=\"h-6 w-6\" />\n                        </button>\n                    </div>\n\n                    <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n                        {error && (\n                            <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-200 px-4 py-3 rounded\">\n                                {error}\n                            </div>\n                        )}\n\n                        {/* Grundinformationen */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.basicInfo', 'Grundinformationen')}\n                            </h3>\n                            \n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.name', 'Titel')} *\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    value={title}\n                                    onChange={(e) => setTitle(e.target.value)}\n                                    required\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.description', 'Beschreibung')}\n                                </label>\n                                <textarea\n                                    value={description}\n                                    onChange={(e) => setDescription(e.target.value)}\n                                    rows={4}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.type', 'Typ')} *\n                                    </label>\n                                    <select\n                                        value={type}\n                                        onChange={(e) => setType(e.target.value as TourType)}\n                                        required\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    >\n                                        <option value={TourType.OWN}>{t('tours.typeOwn', 'Eigene Tour')}</option>\n                                        <option value={TourType.EXTERNAL}>{t('tours.typeExternal', 'Externe Tour')}</option>\n                                    </select>\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.status', 'Status')}\n                                    </label>\n                                    <select\n                                        value={isActive ? 'true' : 'false'}\n                                        onChange={(e) => setIsActive(e.target.value === 'true')}\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    >\n                                        <option value=\"true\">{t('tours.statusActive', 'Aktiv')}</option>\n                                        <option value=\"false\">{t('tours.statusInactive', 'Inaktiv')}</option>\n                                    </select>\n                                </div>\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.branch', 'Niederlassung')}\n                                </label>\n                                <select\n                                    value={branchId}\n                                    onChange={(e) => setBranchId(e.target.value ? Number(e.target.value) : '')}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                >\n                                    <option value=\"\">{t('common.all', 'Alle')}</option>\n                                    {branches.map(branch => (\n                                        <option key={branch.id} value={branch.id}>{branch.name}</option>\n                                    ))}\n                                </select>\n                            </div>\n                        </div>\n\n                        {/* Tour-Details */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.details', 'Tour-Details')}\n                            </h3>\n                            \n                            <div className=\"grid grid-cols-3 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.duration', 'Dauer (Stunden)')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={duration}\n                                        onChange={(e) => setDuration(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.minParticipants', 'Min. Teilnehmer')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={minParticipants}\n                                        onChange={(e) => setMinParticipants(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.maxParticipants', 'Max. Teilnehmer')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={maxParticipants}\n                                        onChange={(e) => setMaxParticipants(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n\n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.price', 'Preis')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={price}\n                                        onChange={(e) => setPrice(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.currency', 'Whrung')}\n                                    </label>\n                                    <input\n                                        type=\"text\"\n                                        value={currency}\n                                        onChange={(e) => setCurrency(e.target.value)}\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.location', 'Ort')}\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    value={location}\n                                    onChange={(e) => setLocation(e.target.value)}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.meetingPoint', 'Treffpunkt')}\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    value={meetingPoint}\n                                    onChange={(e) => setMeetingPoint(e.target.value)}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n                        </div>\n\n                        {/* Externe Tour-Informationen */}\n                        {type === TourType.EXTERNAL && (\n                            <div className=\"space-y-4\">\n                                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                    {t('tours.externalInfo', 'Externe Tour-Informationen')}\n                                </h3>\n                                \n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.externalProvider', 'Externer Anbieter')}\n                                    </label>\n                                    <select\n                                        value={externalProviderId}\n                                        onChange={(e) => setExternalProviderId(e.target.value ? Number(e.target.value) : '')}\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    >\n                                        <option value=\"\">{t('common.select', 'Auswhlen')}</option>\n                                        {tourProviders.map(provider => (\n                                            <option key={provider.id} value={provider.id}>{provider.name}</option>\n                                        ))}\n                                    </select>\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.externalBookingUrl', 'Externe Buchungs-URL')}\n                                    </label>\n                                    <input\n                                        type=\"url\"\n                                        value={externalBookingUrl}\n                                        onChange={(e) => setExternalBookingUrl(e.target.value)}\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Kommissionen */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.commissions', 'Kommissionen')}\n                            </h3>\n                            \n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.totalCommission', 'Gesamtkommission')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={totalCommission}\n                                        onChange={(e) => setTotalCommission(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.totalCommissionPercent', 'Gesamtkommission (%)')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={totalCommissionPercent}\n                                        onChange={(e) => setTotalCommissionPercent(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        max=\"100\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.sellerCommissionPercent', 'Verkufer-Kommission (%)')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={sellerCommissionPercent}\n                                        onChange={(e) => setSellerCommissionPercent(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        max=\"100\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.sellerCommissionFixed', 'Verkufer-Kommission (Fix)')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={sellerCommissionFixed}\n                                        onChange={(e) => setSellerCommissionFixed(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Zustzliche Informationen */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.additionalInfo', 'Zustzliche Informationen')}\n                            </h3>\n                            \n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.includes', 'Enthlt')}\n                                </label>\n                                <textarea\n                                    value={includes}\n                                    onChange={(e) => setIncludes(e.target.value)}\n                                    rows={3}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.excludes', 'Nicht enthalten')}\n                                </label>\n                                <textarea\n                                    value={excludes}\n                                    onChange={(e) => setExcludes(e.target.value)}\n                                    rows={3}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.requirements', 'Anforderungen')}\n                                </label>\n                                <textarea\n                                    value={requirements}\n                                    onChange={(e) => setRequirements(e.target.value)}\n                                    rows={3}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n                        </div>\n\n                        <div className=\"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                            <button\n                                type=\"button\"\n                                onClick={onClose}\n                                className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n                            >\n                                {t('common.cancel', 'Abbrechen')}\n                            </button>\n                            <button\n                                type=\"submit\"\n                                disabled={loading || loadingData}\n                                className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                                {loading ? t('common.saving', 'Speichere...') : t('common.save', 'Speichern')}\n                            </button>\n                        </div>\n                    </form>\n                </Dialog.Panel>\n            </div>\n        </Dialog>\n    );\n};\n\nexport default CreateTourModal;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../../config/axios.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport { useAuth } from '../../hooks/useAuth.tsx';\nimport { Tour, TourType, TourProvider } from '../../types/tour.ts';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface Branch {\n    id: number;\n    name: string;\n}\n\ninterface EditTourModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onTourUpdated: (updatedTour: Tour) => void;\n    tour: Tour | null;\n}\n\nconst EditTourModal = ({ isOpen, onClose, onTourUpdated, tour }: EditTourModalProps) => {\n    const { t } = useTranslation();\n    const { user } = useAuth();\n    const { showMessage } = useMessage();\n    \n    const [title, setTitle] = useState(tour?.title || '');\n    const [description, setDescription] = useState(tour?.description || '');\n    const [type, setType] = useState<TourType>(tour?.type || TourType.OWN);\n    const [isActive, setIsActive] = useState(tour?.isActive ?? true);\n    const [duration, setDuration] = useState<number | ''>(tour?.duration || '');\n    const [maxParticipants, setMaxParticipants] = useState<number | ''>(tour?.maxParticipants || '');\n    const [minParticipants, setMinParticipants] = useState<number | ''>(tour?.minParticipants || '');\n    const [price, setPrice] = useState<number | ''>(tour?.price ? (typeof tour.price === 'string' ? parseFloat(tour.price) : tour.price) : '');\n    const [currency, setCurrency] = useState(tour?.currency || 'COP');\n    const [location, setLocation] = useState(tour?.location || '');\n    const [meetingPoint, setMeetingPoint] = useState(tour?.meetingPoint || '');\n    const [includes, setIncludes] = useState(tour?.includes || '');\n    const [excludes, setExcludes] = useState(tour?.excludes || '');\n    const [requirements, setRequirements] = useState(tour?.requirements || '');\n    const [totalCommission, setTotalCommission] = useState<number | ''>(tour?.totalCommission ? (typeof tour.totalCommission === 'string' ? parseFloat(tour.totalCommission) : tour.totalCommission) : '');\n    const [totalCommissionPercent, setTotalCommissionPercent] = useState<number | ''>(tour?.totalCommissionPercent ? (typeof tour.totalCommissionPercent === 'string' ? parseFloat(tour.totalCommissionPercent) : tour.totalCommissionPercent) : '');\n    const [sellerCommissionPercent, setSellerCommissionPercent] = useState<number | ''>(tour?.sellerCommissionPercent ? (typeof tour.sellerCommissionPercent === 'string' ? parseFloat(tour.sellerCommissionPercent) : tour.sellerCommissionPercent) : '');\n    const [sellerCommissionFixed, setSellerCommissionFixed] = useState<number | ''>(tour?.sellerCommissionFixed ? (typeof tour.sellerCommissionFixed === 'string' ? parseFloat(tour.sellerCommissionFixed) : tour.sellerCommissionFixed) : '');\n    const [externalProviderId, setExternalProviderId] = useState<number | ''>(tour?.externalProviderId || '');\n    const [externalBookingUrl, setExternalBookingUrl] = useState(tour?.externalBookingUrl || '');\n    const [branchId, setBranchId] = useState<number | ''>(tour?.branchId || '');\n    const [imageFile, setImageFile] = useState<File | null>(null);\n    const [imagePreview, setImagePreview] = useState<string | null>(tour?.imageUrl ? `${API_BASE_URL || ''}${tour.imageUrl}` : null);\n    const [galleryFiles, setGalleryFiles] = useState<File[]>([]);\n    const [galleryPreviews, setGalleryPreviews] = useState<string[]>(tour?.galleryUrls?.map(url => `${API_BASE_URL || ''}${url}`) || []);\n    const [uploadingImage, setUploadingImage] = useState(false);\n    \n    const [branches, setBranches] = useState<Branch[]>([]);\n    const [tourProviders, setTourProviders] = useState<TourProvider[]>([]);\n    const [error, setError] = useState<string | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [loadingData, setLoadingData] = useState(true);\n\n    // Lade Branches und TourProviders\n    useEffect(() => {\n        const loadData = async () => {\n            try {\n                setLoadingData(true);\n                const [branchesRes, providersRes] = await Promise.all([\n                    axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE),\n                    axiosInstance.get(API_ENDPOINTS.TOUR_PROVIDERS?.BASE || '/api/tour-providers')\n                ]);\n                \n                setBranches(branchesRes.data?.data || branchesRes.data || []);\n                setTourProviders(providersRes.data?.data || providersRes.data || []);\n            } catch (err: any) {\n                console.error('Fehler beim Laden der Daten:', err);\n                showMessage(t('errors.loadError'), 'error');\n            } finally {\n                setLoadingData(false);\n            }\n        };\n        \n        if (isOpen) {\n            loadData();\n        }\n    }, [isOpen, t, showMessage]);\n\n    // Update form when tour changes\n    useEffect(() => {\n        if (tour) {\n            setTitle(tour.title || '');\n            setDescription(tour.description || '');\n            setType(tour.type || TourType.OWN);\n            setIsActive(tour.isActive ?? true);\n            setDuration(tour.duration || '');\n            setMaxParticipants(tour.maxParticipants || '');\n            setMinParticipants(tour.minParticipants || '');\n            setPrice(tour.price ? (typeof tour.price === 'string' ? parseFloat(tour.price) : tour.price) : '');\n            setCurrency(tour.currency || 'COP');\n            setLocation(tour.location || '');\n            setMeetingPoint(tour.meetingPoint || '');\n            setIncludes(tour.includes || '');\n            setExcludes(tour.excludes || '');\n            setRequirements(tour.requirements || '');\n            setTotalCommission(tour.totalCommission ? (typeof tour.totalCommission === 'string' ? parseFloat(tour.totalCommission) : tour.totalCommission) : '');\n            setTotalCommissionPercent(tour.totalCommissionPercent ? (typeof tour.totalCommissionPercent === 'string' ? parseFloat(tour.totalCommissionPercent) : tour.totalCommissionPercent) : '');\n            setSellerCommissionPercent(tour.sellerCommissionPercent ? (typeof tour.sellerCommissionPercent === 'string' ? parseFloat(tour.sellerCommissionPercent) : tour.sellerCommissionPercent) : '');\n            setSellerCommissionFixed(tour.sellerCommissionFixed ? (typeof tour.sellerCommissionFixed === 'string' ? parseFloat(tour.sellerCommissionFixed) : tour.sellerCommissionFixed) : '');\n            setExternalProviderId(tour.externalProviderId || '');\n            setExternalBookingUrl(tour.externalBookingUrl || '');\n            setBranchId(tour.branchId || '');\n            setImagePreview(tour.imageUrl ? `${API_BASE_URL || ''}${tour.imageUrl}` : null);\n            setGalleryPreviews(tour.galleryUrls?.map(url => `${API_BASE_URL || ''}${url}`) || []);\n        }\n    }, [tour]);\n    \n    // Bild-Vorschau erstellen\n    const handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files?.[0];\n        if (file) {\n            setImageFile(file);\n            const reader = new FileReader();\n            reader.onloadend = () => {\n                setImagePreview(reader.result as string);\n            };\n            reader.readAsDataURL(file);\n        }\n    };\n    \n    const handleGalleryChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const files = Array.from(e.target.files || []);\n        if (files.length > 0) {\n            setGalleryFiles(prev => [...prev, ...files]);\n            files.forEach(file => {\n                const reader = new FileReader();\n                reader.onloadend = () => {\n                    setGalleryPreviews(prev => [...prev, reader.result as string]);\n                };\n                reader.readAsDataURL(file);\n            });\n        }\n    };\n    \n    const removeGalleryImage = async (index: number) => {\n        // Wenn es ein existierendes Bild ist (aus tour.galleryUrls), lsche es vom Server\n        const currentGallery = tour.galleryUrls || [];\n        if (index < currentGallery.length) {\n            try {\n                await axiosInstance.delete(API_ENDPOINTS.TOURS.DELETE_GALLERY_IMAGE(tour.id, index));\n                // Lade Tour neu\n                const response = await axiosInstance.get(API_ENDPOINTS.TOURS.BY_ID(tour.id));\n                if (response.data.success) {\n                    onTourUpdated(response.data.data);\n                }\n            } catch (err: any) {\n                console.error('Fehler beim Lschen des Galerie-Bildes:', err);\n                showMessage(err.response?.data?.message || t('errors.deleteError'), 'error');\n            }\n        } else {\n            // Wenn es ein neues Bild ist (noch nicht hochgeladen), entferne es nur aus dem State\n            const newIndex = index - currentGallery.length;\n            setGalleryFiles(prev => prev.filter((_, i) => i !== newIndex));\n            setGalleryPreviews(prev => prev.filter((_, i) => i !== index));\n        }\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError(null);\n\n        // Validierungen\n        if (!title.trim() || title.trim().length < 3) {\n            setError(t('tours.validation.titleMinLength', { defaultValue: 'Titel muss mindestens 3 Zeichen lang sein' }));\n            return;\n        }\n\n        const maxPart = maxParticipants ? Number(maxParticipants) : null;\n        const minPart = minParticipants ? Number(minParticipants) : null;\n        if (maxPart !== null && minPart !== null && maxPart < minPart) {\n            setError(t('tours.validation.maxParticipantsMin', { defaultValue: 'Maximale Teilnehmeranzahl muss >= minimale Teilnehmeranzahl sein' }));\n            return;\n        }\n\n        if (type === TourType.EXTERNAL && !externalProviderId) {\n            setError(t('tours.validation.externalProviderRequired', { defaultValue: 'Externer Anbieter ist bei externen Touren erforderlich' }));\n            return;\n        }\n\n        // Preise >= 0\n        if (price !== '' && Number(price) < 0) {\n            setError(t('tours.validation.priceNonNegative', { defaultValue: 'Preis muss >= 0 sein' }));\n            return;\n        }\n\n        if (totalCommission !== '' && Number(totalCommission) < 0) {\n            setError(t('tours.validation.commissionNonNegative', { defaultValue: 'Kommission muss >= 0 sein' }));\n            return;\n        }\n\n        setLoading(true);\n\n        try {\n            const tourData: any = {\n                title,\n                description: description || null,\n                type,\n                isActive,\n                duration: duration ? Number(duration) : null,\n                maxParticipants: maxParticipants ? Number(maxParticipants) : null,\n                minParticipants: minParticipants ? Number(minParticipants) : null,\n                price: price ? Number(price) : null,\n                currency: currency || 'COP',\n                location: location || null,\n                meetingPoint: meetingPoint || null,\n                includes: includes || null,\n                excludes: excludes || null,\n                requirements: requirements || null,\n                totalCommission: totalCommission ? Number(totalCommission) : null,\n                totalCommissionPercent: totalCommissionPercent ? Number(totalCommissionPercent) : null,\n                sellerCommissionPercent: sellerCommissionPercent ? Number(sellerCommissionPercent) : null,\n                sellerCommissionFixed: sellerCommissionFixed ? Number(sellerCommissionFixed) : null,\n                externalProviderId: externalProviderId ? Number(externalProviderId) : null,\n                externalBookingUrl: externalBookingUrl || null,\n                branchId: branchId ? Number(branchId) : null\n            };\n\n            const response = await axiosInstance.put(API_ENDPOINTS.TOURS.BY_ID(tour.id), tourData);\n            \n            if (response.data.success) {\n                const updatedTour = response.data.data;\n                \n                // Hauptbild hochladen (falls gendert)\n                if (imageFile) {\n                    try {\n                        setUploadingImage(true);\n                        const formData = new FormData();\n                        formData.append('image', imageFile);\n                        await axiosInstance.post(API_ENDPOINTS.TOURS.UPLOAD_IMAGE(tour.id), formData, {\n                            headers: { 'Content-Type': 'multipart/form-data' }\n                        });\n                    } catch (imgErr: any) {\n                        console.error('Fehler beim Hochladen des Hauptbildes:', imgErr);\n                        showMessage(t('tours.imageUploadError', 'Tour aktualisiert, aber Fehler beim Hochladen des Bildes'), 'warning');\n                    } finally {\n                        setUploadingImage(false);\n                    }\n                }\n                \n                // Neue Galerie-Bilder hochladen (falls vorhanden)\n                if (galleryFiles.length > 0) {\n                    try {\n                        setUploadingImage(true);\n                        for (const file of galleryFiles) {\n                            const formData = new FormData();\n                            formData.append('image', file);\n                            await axiosInstance.post(API_ENDPOINTS.TOURS.UPLOAD_GALLERY(tour.id), formData, {\n                                headers: { 'Content-Type': 'multipart/form-data' }\n                            });\n                        }\n                    } catch (galleryErr: any) {\n                        console.error('Fehler beim Hochladen der Galerie-Bilder:', galleryErr);\n                        showMessage(t('tours.galleryUploadError', 'Tour aktualisiert, aber Fehler beim Hochladen der Galerie-Bilder'), 'warning');\n                    } finally {\n                        setUploadingImage(false);\n                    }\n                }\n                \n                showMessage(t('tours.updateSuccess', 'Tour erfolgreich aktualisiert'), 'success');\n                // Lade Tour neu, um aktualisierte Bilder zu erhalten\n                const updatedResponse = await axiosInstance.get(API_ENDPOINTS.TOURS.BY_ID(tour.id));\n                onTourUpdated(updatedResponse.data.data);\n                onClose();\n            } else {\n                setError(response.data.message || t('errors.saveError'));\n            }\n        } catch (err: any) {\n            console.error('Fehler beim Aktualisieren der Tour:', err);\n            const errorMessage = err.response?.data?.message || t('errors.saveError');\n            setError(errorMessage);\n            showMessage(errorMessage, 'error');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (!isOpen || !tour) return null;\n\n    return (\n        <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[90vh] overflow-y-auto\">\n                    <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\n                        <Dialog.Title className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n                            {t('tours.edit', 'Tour bearbeiten')}\n                        </Dialog.Title>\n                        <button\n                            onClick={onClose}\n                            className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n                        >\n                            <XMarkIcon className=\"h-6 w-6\" />\n                        </button>\n                    </div>\n\n                    <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\n                        {error && (\n                            <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-800 dark:text-red-200 px-4 py-3 rounded\">\n                                {error}\n                            </div>\n                        )}\n\n                        {/* Grundinformationen */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.basicInfo', 'Grundinformationen')}\n                            </h3>\n                            \n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.name', 'Titel')} *\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    value={title}\n                                    onChange={(e) => setTitle(e.target.value)}\n                                    required\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.description', 'Beschreibung')}\n                                </label>\n                                <textarea\n                                    value={description}\n                                    onChange={(e) => setDescription(e.target.value)}\n                                    rows={4}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.type', 'Typ')} *\n                                    </label>\n                                    <select\n                                        value={type}\n                                        onChange={(e) => setType(e.target.value as TourType)}\n                                        required\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    >\n                                        <option value={TourType.OWN}>{t('tours.typeOwn', 'Eigene Tour')}</option>\n                                        <option value={TourType.EXTERNAL}>{t('tours.typeExternal', 'Externe Tour')}</option>\n                                    </select>\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.status', 'Status')}\n                                    </label>\n                                    <select\n                                        value={isActive ? 'true' : 'false'}\n                                        onChange={(e) => setIsActive(e.target.value === 'true')}\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    >\n                                        <option value=\"true\">{t('tours.statusActive', 'Aktiv')}</option>\n                                        <option value=\"false\">{t('tours.statusInactive', 'Inaktiv')}</option>\n                                    </select>\n                                </div>\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.branch', 'Niederlassung')}\n                                </label>\n                                <select\n                                    value={branchId}\n                                    onChange={(e) => setBranchId(e.target.value ? Number(e.target.value) : '')}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                >\n                                    <option value=\"\">{t('common.all', 'Alle')}</option>\n                                    {branches.map(branch => (\n                                        <option key={branch.id} value={branch.id}>{branch.name}</option>\n                                    ))}\n                                </select>\n                            </div>\n                        </div>\n\n                        {/* Tour-Details */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.details', 'Tour-Details')}\n                            </h3>\n                            \n                            <div className=\"grid grid-cols-3 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.duration', 'Dauer (Stunden)')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={duration}\n                                        onChange={(e) => setDuration(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.minParticipants', 'Min. Teilnehmer')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={minParticipants}\n                                        onChange={(e) => setMinParticipants(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.maxParticipants', 'Max. Teilnehmer')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={maxParticipants}\n                                        onChange={(e) => setMaxParticipants(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n\n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.price', 'Preis')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={price}\n                                        onChange={(e) => setPrice(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.currency', 'Whrung')}\n                                    </label>\n                                    <input\n                                        type=\"text\"\n                                        value={currency}\n                                        onChange={(e) => setCurrency(e.target.value)}\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.location', 'Ort')}\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    value={location}\n                                    onChange={(e) => setLocation(e.target.value)}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.meetingPoint', 'Treffpunkt')}\n                                </label>\n                                <input\n                                    type=\"text\"\n                                    value={meetingPoint}\n                                    onChange={(e) => setMeetingPoint(e.target.value)}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n                        </div>\n\n                        {/* Externe Tour-Informationen */}\n                        {type === TourType.EXTERNAL && (\n                            <div className=\"space-y-4\">\n                                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                    {t('tours.externalInfo', 'Externe Tour-Informationen')}\n                                </h3>\n                                \n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.externalProvider', 'Externer Anbieter')}\n                                    </label>\n                                    <select\n                                        value={externalProviderId}\n                                        onChange={(e) => setExternalProviderId(e.target.value ? Number(e.target.value) : '')}\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    >\n                                        <option value=\"\">{t('common.select', 'Auswhlen')}</option>\n                                        {tourProviders.map(provider => (\n                                            <option key={provider.id} value={provider.id}>{provider.name}</option>\n                                        ))}\n                                    </select>\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.externalBookingUrl', 'Externe Buchungs-URL')}\n                                    </label>\n                                    <input\n                                        type=\"url\"\n                                        value={externalBookingUrl}\n                                        onChange={(e) => setExternalBookingUrl(e.target.value)}\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Kommissionen */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.commissions', 'Kommissionen')}\n                            </h3>\n                            \n                            <div className=\"grid grid-cols-2 gap-4\">\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.totalCommission', 'Gesamtkommission')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={totalCommission}\n                                        onChange={(e) => setTotalCommission(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.totalCommissionPercent', 'Gesamtkommission (%)')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={totalCommissionPercent}\n                                        onChange={(e) => setTotalCommissionPercent(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        max=\"100\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.sellerCommissionPercent', 'Verkufer-Kommission (%)')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={sellerCommissionPercent}\n                                        onChange={(e) => setSellerCommissionPercent(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        max=\"100\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n\n                                <div>\n                                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('tours.sellerCommissionFixed', 'Verkufer-Kommission (Fix)')}\n                                    </label>\n                                    <input\n                                        type=\"number\"\n                                        value={sellerCommissionFixed}\n                                        onChange={(e) => setSellerCommissionFixed(e.target.value ? Number(e.target.value) : '')}\n                                        min=\"0\"\n                                        step=\"0.01\"\n                                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Zustzliche Informationen */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.additionalInfo', 'Zustzliche Informationen')}\n                            </h3>\n                            \n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.includes', 'Enthlt')}\n                                </label>\n                                <textarea\n                                    value={includes}\n                                    onChange={(e) => setIncludes(e.target.value)}\n                                    rows={3}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.excludes', 'Nicht enthalten')}\n                                </label>\n                                <textarea\n                                    value={excludes}\n                                    onChange={(e) => setExcludes(e.target.value)}\n                                    rows={3}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.requirements', 'Anforderungen')}\n                                </label>\n                                <textarea\n                                    value={requirements}\n                                    onChange={(e) => setRequirements(e.target.value)}\n                                    rows={3}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                            </div>\n                        </div>\n\n                        {/* Bild-Upload */}\n                        <div className=\"space-y-4\">\n                            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                {t('tours.images', 'Bilder')}\n                            </h3>\n                            \n                            {/* Hauptbild */}\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.mainImage', 'Hauptbild')}\n                                </label>\n                                <input\n                                    type=\"file\"\n                                    accept=\"image/*\"\n                                    onChange={handleImageChange}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                                {imagePreview && (\n                                    <div className=\"mt-2\">\n                                        <img\n                                            src={imagePreview}\n                                            alt=\"Vorschau\"\n                                            className=\"max-w-xs h-48 object-cover rounded-md border border-gray-300 dark:border-gray-600\"\n                                        />\n                                    </div>\n                                )}\n                            </div>\n                            \n                            {/* Galerie */}\n                            <div>\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('tours.gallery', 'Galerie')}\n                                </label>\n                                <input\n                                    type=\"file\"\n                                    accept=\"image/*\"\n                                    multiple\n                                    onChange={handleGalleryChange}\n                                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\n                                />\n                                {galleryPreviews.length > 0 && (\n                                    <div className=\"mt-2 grid grid-cols-3 gap-2\">\n                                        {galleryPreviews.map((preview, index) => (\n                                            <div key={index} className=\"relative\">\n                                                <img\n                                                    src={preview}\n                                                    alt={`Galerie ${index + 1}`}\n                                                    className=\"w-full h-32 object-cover rounded-md border border-gray-300 dark:border-gray-600\"\n                                                />\n                                                <button\n                                                    type=\"button\"\n                                                    onClick={() => removeGalleryImage(index)}\n                                                    className=\"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 hover:bg-red-600\"\n                                                >\n                                                    <XMarkIcon className=\"h-4 w-4\" />\n                                                </button>\n                                            </div>\n                                        ))}\n                                    </div>\n                                )}\n                            </div>\n                        </div>\n\n                        <div className=\"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                            <button\n                                type=\"button\"\n                                onClick={onClose}\n                                className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n                            >\n                                {t('common.cancel', 'Abbrechen')}\n                            </button>\n                            <button\n                                type=\"submit\"\n                                disabled={loading || loadingData || uploadingImage}\n                                className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                            >\n                                {loading ? t('common.saving', 'Speichere...') : t('common.save', 'Speichern')}\n                            </button>\n                        </div>\n                    </form>\n                </Dialog.Panel>\n            </div>\n        </Dialog>\n    );\n};\n\nexport default EditTourModal;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../../config/axios.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, MapPinIcon, ClockIcon, UsersIcon, CurrencyDollarIcon, BuildingOfficeIcon, UserIcon, PlusIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport { Tour, TourType, TourBooking } from '../../types/tour.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { format } from 'date-fns';\nimport { de } from 'date-fns/locale';\nimport CreateTourBookingModal from './CreateTourBookingModal.tsx';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\n\ninterface TourDetailsModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    tourId: number;\n    onTourUpdated?: (updatedTour: Tour) => void;\n}\n\nconst TourDetailsModal = ({ isOpen, onClose, tourId, onTourUpdated }: TourDetailsModalProps) => {\n    const { t } = useTranslation();\n    const { showMessage } = useMessage();\n    const { hasPermission } = usePermissions();\n    const [tour, setTour] = useState<Tour | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const [isCreateBookingModalOpen, setIsCreateBookingModalOpen] = useState(false);\n\n    useEffect(() => {\n        if (isOpen && tourId) {\n            loadTour();\n        }\n    }, [isOpen, tourId]);\n\n    const loadTour = async () => {\n        try {\n            setLoading(true);\n            setError(null);\n            const response = await axiosInstance.get(API_ENDPOINTS.TOURS.BY_ID(tourId));\n            if (response.data.success) {\n                setTour(response.data.data);\n            } else {\n                setError(response.data.message || t('errors.loadError'));\n            }\n        } catch (err: any) {\n            console.error('Fehler beim Laden der Tour:', err);\n            const errorMessage = err.response?.data?.message || t('errors.loadError');\n            setError(errorMessage);\n            showMessage(errorMessage, 'error');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[90vh] overflow-y-auto\">\n                    <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\n                        <Dialog.Title className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n                            {t('tours.details', 'Tour-Details')}\n                        </Dialog.Title>\n                        <div className=\"flex items-center gap-3\">\n                            {hasPermission('tour_bookings', 'write', 'table') && tour && tour.isActive && (\n                                <div className=\"relative group\">\n                                    <button\n                                        onClick={() => setIsCreateBookingModalOpen(true)}\n                                        className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                                        style={{ width: '30.19px', height: '30.19px' }}\n                                        aria-label={t('tourBookings.create', 'Buchung erstellen')}\n                                    >\n                                        <PlusIcon className=\"h-4 w-4\" />\n                                    </button>\n                                    <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                        {t('tourBookings.create', 'Buchung erstellen')}\n                                    </div>\n                                </div>\n                            )}\n                            <button\n                                onClick={onClose}\n                                className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n                            >\n                                <XMarkIcon className=\"h-6 w-6\" />\n                            </button>\n                        </div>\n                    </div>\n\n                    <div className=\"p-6\">\n                        {loading ? (\n                            <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                                {t('common.loading')}\n                            </div>\n                        ) : error ? (\n                            <div className=\"text-center py-8 text-red-500 dark:text-red-400\">\n                                {error}\n                            </div>\n                        ) : !tour ? (\n                            <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n                                {t('tours.notFound', 'Tour nicht gefunden')}\n                            </div>\n                        ) : (\n                            <div className=\"space-y-6\">\n                                {/* Header */}\n                                <div>\n                                    <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n                                        {tour.title || '-'}\n                                    </h2>\n                                    <div className=\"flex items-center gap-2\">\n                                        <span className={`px-3 py-1 text-sm rounded-full ${\n                                            tour.type === TourType.OWN\n                                                ? 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200'\n                                                : 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200'\n                                        }`}>\n                                            {tour.type === TourType.OWN ? t('tours.typeOwn') : t('tours.typeExternal')}\n                                        </span>\n                                        <span className={`px-3 py-1 text-sm rounded-full ${\n                                            tour.isActive\n                                                ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200'\n                                                : 'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200'\n                                        }`}>\n                                            {tour.isActive ? t('tours.statusActive') : t('tours.statusInactive')}\n                                        </span>\n                                    </div>\n                                </div>\n\n                                {/* Beschreibung */}\n                                {tour.description && (\n                                    <div>\n                                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n                                            {t('tours.description')}\n                                        </h3>\n                                        <p className=\"text-gray-700 dark:text-gray-300 whitespace-pre-wrap\">\n                                            {tour.description}\n                                        </p>\n                                    </div>\n                                )}\n\n                                {/* Tour-Details Grid */}\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                                    {/* Linke Spalte */}\n                                    <div className=\"space-y-4\">\n                                        {tour.duration && (\n                                            <div className=\"flex items-start gap-3\">\n                                                <ClockIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.duration')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {tour.duration} {t('common.hours', 'h')}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {(tour.minParticipants || tour.maxParticipants) && (\n                                            <div className=\"flex items-start gap-3\">\n                                                <UsersIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.participants', 'Teilnehmer')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {tour.minParticipants && tour.maxParticipants\n                                                            ? `${tour.minParticipants} - ${tour.maxParticipants}`\n                                                            : tour.minParticipants\n                                                            ? `${tour.minParticipants}+`\n                                                            : tour.maxParticipants\n                                                            ? `bis ${tour.maxParticipants}`\n                                                            : '-'}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {tour.price && (\n                                            <div className=\"flex items-start gap-3\">\n                                                <CurrencyDollarIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.price')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white font-semibold\">\n                                                        {Number(tour.price).toLocaleString()} {tour.currency || 'COP'}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {tour.location && (\n                                            <div className=\"flex items-start gap-3\">\n                                                <MapPinIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.location')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {tour.location}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {tour.meetingPoint && (\n                                            <div className=\"flex items-start gap-3\">\n                                                <MapPinIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.meetingPoint')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {tour.meetingPoint}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n                                    </div>\n\n                                    {/* Rechte Spalte */}\n                                    <div className=\"space-y-4\">\n                                        {tour.branch && (\n                                            <div className=\"flex items-start gap-3\">\n                                                <BuildingOfficeIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.branch')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {tour.branch.name}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {tour.createdBy && (\n                                            <div className=\"flex items-start gap-3\">\n                                                <UserIcon className=\"h-5 w-5 text-gray-400 mt-0.5\" />\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.columns.createdBy')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {tour.createdBy.firstName} {tour.createdBy.lastName}\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {tour.createdAt && (\n                                            <div>\n                                                <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                    {t('common.createdAt', 'Erstellt am')}\n                                                </div>\n                                                <div className=\"text-gray-900 dark:text-white\">\n                                                    {format(new Date(tour.createdAt), 'dd.MM.yyyy HH:mm', { locale: de })}\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {tour.externalProvider && (\n                                            <div>\n                                                <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                    {t('tours.externalProvider')}\n                                                </div>\n                                                <div className=\"text-gray-900 dark:text-white\">\n                                                    {tour.externalProvider.name}\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {tour.externalBookingUrl && (\n                                            <div>\n                                                <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                    {t('tours.externalBookingUrl')}\n                                                </div>\n                                                <a\n                                                    href={tour.externalBookingUrl}\n                                                    target=\"_blank\"\n                                                    rel=\"noopener noreferrer\"\n                                                    className=\"text-blue-600 dark:text-blue-400 hover:underline\"\n                                                >\n                                                    {tour.externalBookingUrl}\n                                                </a>\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n\n                                {/* Kommissionen */}\n                                {(tour.totalCommission || tour.totalCommissionPercent || tour.sellerCommissionPercent || tour.sellerCommissionFixed) && (\n                                    <div className=\"border-t border-gray-200 dark:border-gray-700 pt-6\">\n                                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n                                            {t('tours.commissions')}\n                                        </h3>\n                                        <div className=\"grid grid-cols-2 gap-4\">\n                                            {tour.totalCommission && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.totalCommission')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {Number(tour.totalCommission).toLocaleString()} {tour.currency || 'COP'}\n                                                    </div>\n                                                </div>\n                                            )}\n                                            {tour.totalCommissionPercent && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.totalCommissionPercent')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {Number(tour.totalCommissionPercent)}%\n                                                    </div>\n                                                </div>\n                                            )}\n                                            {tour.sellerCommissionPercent && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.sellerCommissionPercent')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {Number(tour.sellerCommissionPercent)}%\n                                                    </div>\n                                                </div>\n                                            )}\n                                            {tour.sellerCommissionFixed && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.sellerCommissionFixed')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {Number(tour.sellerCommissionFixed).toLocaleString()} {tour.currency || 'COP'}\n                                                    </div>\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                )}\n\n                                {/* Zustzliche Informationen */}\n                                {(tour.includes || tour.excludes || tour.requirements) && (\n                                    <div className=\"border-t border-gray-200 dark:border-gray-700 pt-6\">\n                                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n                                            {t('tours.additionalInfo')}\n                                        </h3>\n                                        <div className=\"space-y-4\">\n                                            {tour.includes && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1\">\n                                                        {t('tours.includes')}\n                                                    </div>\n                                                    <p className=\"text-gray-700 dark:text-gray-300 whitespace-pre-wrap\">\n                                                        {tour.includes}\n                                                    </p>\n                                                </div>\n                                            )}\n                                            {tour.excludes && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1\">\n                                                        {t('tours.excludes')}\n                                                    </div>\n                                                    <p className=\"text-gray-700 dark:text-gray-300 whitespace-pre-wrap\">\n                                                        {tour.excludes}\n                                                    </p>\n                                                </div>\n                                            )}\n                                            {tour.requirements && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1\">\n                                                        {t('tours.requirements')}\n                                                    </div>\n                                                    <p className=\"text-gray-700 dark:text-gray-300 whitespace-pre-wrap\">\n                                                        {tour.requirements}\n                                                    </p>\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                )}\n\n                                {/* Verfgbarkeit */}\n                                {(tour.availableFrom || tour.availableTo) && (\n                                    <div className=\"border-t border-gray-200 dark:border-gray-700 pt-6\">\n                                        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n                                            {t('tours.availability', 'Verfgbarkeit')}\n                                        </h3>\n                                        <div className=\"grid grid-cols-2 gap-4\">\n                                            {tour.availableFrom && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.availableFrom', 'Verfgbar ab')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {format(new Date(tour.availableFrom), 'dd.MM.yyyy', { locale: de })}\n                                                    </div>\n                                                </div>\n                                            )}\n                                            {tour.availableTo && (\n                                                <div>\n                                                    <div className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                                                        {t('tours.availableTo', 'Verfgbar bis')}\n                                                    </div>\n                                                    <div className=\"text-gray-900 dark:text-white\">\n                                                        {format(new Date(tour.availableTo), 'dd.MM.yyyy', { locale: de })}\n                                                    </div>\n                                                </div>\n                                            )}\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        )}\n                    </div>\n\n                    <div className=\"flex justify-end p-6 border-t border-gray-200 dark:border-gray-700\">\n                        <button\n                            onClick={onClose}\n                            className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n                        >\n                            {t('common.close', 'Schlieen')}\n                        </button>\n                    </div>\n                </Dialog.Panel>\n            </div>\n            \n            {/* Create Tour Booking Modal */}\n            {tour && (\n                <CreateTourBookingModal\n                    isOpen={isCreateBookingModalOpen}\n                    onClose={() => setIsCreateBookingModalOpen(false)}\n                    tour={tour}\n                    onBookingCreated={async (newBooking: TourBooking) => {\n                        showMessage(\n                            t('tourBookings.created', { defaultValue: 'Tour-Buchung erfolgreich erstellt' }),\n                            'success'\n                        );\n                        setIsCreateBookingModalOpen(false);\n                    }}\n                />\n            )}\n        </Dialog>\n    );\n};\n\nexport default TourDetailsModal;\n\n","import React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, ArrowDownTrayIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../../config/axios.ts';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface TourExportDialogProps {\n    isOpen: boolean;\n    onClose: () => void;\n    tourCount: number;\n}\n\nconst TourExportDialog = ({ isOpen, onClose, tourCount }: TourExportDialogProps) => {\n    const { t } = useTranslation();\n    const { showMessage } = useMessage();\n    \n    const [selectedFields, setSelectedFields] = useState<string[]>([\n        'id', 'title', 'description', 'type', 'price', 'currency', 'duration',\n        'maxParticipants', 'minParticipants', 'location', 'meetingPoint',\n        'imageUrl', 'galleryUrls', 'availableFrom', 'availableTo'\n    ]);\n    const [exporting, setExporting] = useState(false);\n    const [format, setFormat] = useState<'json' | 'csv'>('json');\n\n    const availableFields = [\n        { id: 'id', label: t('tours.columns.title', 'Titel') },\n        { id: 'title', label: t('tours.name', 'Titel') },\n        { id: 'description', label: t('tours.description', 'Beschreibung') },\n        { id: 'type', label: t('tours.type', 'Typ') },\n        { id: 'price', label: t('tours.price', 'Preis') },\n        { id: 'currency', label: t('tours.currency', 'Whrung') },\n        { id: 'duration', label: t('tours.duration', 'Dauer') },\n        { id: 'maxParticipants', label: t('tours.maxParticipants', 'Max. Teilnehmer') },\n        { id: 'minParticipants', label: t('tours.minParticipants', 'Min. Teilnehmer') },\n        { id: 'location', label: t('tours.location', 'Ort') },\n        { id: 'meetingPoint', label: t('tours.meetingPoint', 'Treffpunkt') },\n        { id: 'includes', label: t('tours.includes', 'Enthlt') },\n        { id: 'excludes', label: t('tours.excludes', 'Nicht enthalten') },\n        { id: 'requirements', label: t('tours.requirements', 'Anforderungen') },\n        { id: 'imageUrl', label: t('tours.mainImage', 'Hauptbild') },\n        { id: 'galleryUrls', label: t('tours.gallery', 'Galerie') },\n        { id: 'availableFrom', label: t('tours.availableFrom', 'Verfgbar ab') },\n        { id: 'availableTo', label: t('tours.availableTo', 'Verfgbar bis') },\n        { id: 'externalBookingUrl', label: t('tours.externalBookingUrl', 'Externe Buchungs-URL') },\n        { id: 'branch', label: t('tours.branch', 'Niederlassung') },\n        { id: 'externalProvider', label: t('tours.externalProvider', 'Externer Anbieter') }\n    ];\n\n    const toggleField = (fieldId: string) => {\n        setSelectedFields(prev =>\n            prev.includes(fieldId)\n                ? prev.filter(f => f !== fieldId)\n                : [...prev, fieldId]\n        );\n    };\n\n    const selectAll = () => {\n        setSelectedFields(availableFields.map(f => f.id));\n    };\n\n    const deselectAll = () => {\n        setSelectedFields([]);\n    };\n\n    const handleExport = async () => {\n        if (selectedFields.length === 0) {\n            showMessage(t('tours.export.noFieldsSelected', 'Bitte whlen Sie mindestens ein Feld aus'), 'error');\n            return;\n        }\n\n        setExporting(true);\n        try {\n            const fieldsParam = selectedFields.join(',');\n            const response = await axiosInstance.get(API_ENDPOINTS.TOURS.EXPORT, {\n                params: { fields: fieldsParam }\n            });\n\n            const tours = response.data.tours || response.data;\n\n            if (format === 'json') {\n                // JSON-Export\n                const blob = new Blob([JSON.stringify(tours, null, 2)], { type: 'application/json' });\n                const url = window.URL.createObjectURL(blob);\n                const a = document.createElement('a');\n                a.href = url;\n                a.download = `tours-export-${new Date().toISOString().split('T')[0]}.json`;\n                document.body.appendChild(a);\n                a.click();\n                document.body.removeChild(a);\n                window.URL.revokeObjectURL(url);\n            } else {\n                // CSV-Export\n                if (!Array.isArray(tours) || tours.length === 0) {\n                    showMessage(t('tours.export.noData', 'Keine Daten zum Exportieren'), 'warning');\n                    return;\n                }\n\n                // CSV-Header\n                const headers = selectedFields.map(fieldId => {\n                    const field = availableFields.find(f => f.id === fieldId);\n                    return field?.label || fieldId;\n                });\n\n                // CSV-Rows\n                const rows = tours.map((tour: any) => {\n                    return selectedFields.map(fieldId => {\n                        let value = tour[fieldId];\n                        if (value === null || value === undefined) return '';\n                        if (typeof value === 'object') {\n                            if (fieldId === 'branch') return value?.name || '';\n                            if (fieldId === 'externalProvider') return value?.name || '';\n                            if (fieldId === 'galleryUrls' && Array.isArray(value)) return value.join('; ');\n                            return JSON.stringify(value);\n                        }\n                        if (typeof value === 'boolean') return value ? 'Ja' : 'Nein';\n                        return String(value);\n                    });\n                });\n\n                // CSV-String erstellen\n                const csvContent = [\n                    headers.join(','),\n                    ...rows.map(row => row.map(cell => `\"${String(cell).replace(/\"/g, '\"\"')}\"`).join(','))\n                ].join('\\n');\n\n                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n                const url = window.URL.createObjectURL(blob);\n                const a = document.createElement('a');\n                a.href = url;\n                a.download = `tours-export-${new Date().toISOString().split('T')[0]}.csv`;\n                document.body.appendChild(a);\n                a.click();\n                document.body.removeChild(a);\n                window.URL.revokeObjectURL(url);\n            }\n\n            showMessage(t('tours.export.success', 'Export erfolgreich'), 'success');\n            onClose();\n        } catch (err: any) {\n            console.error('Fehler beim Exportieren:', err);\n            showMessage(err.response?.data?.message || t('tours.export.error', 'Fehler beim Exportieren'), 'error');\n        } finally {\n            setExporting(false);\n        }\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-2xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                    <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\n                        <Dialog.Title className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n                            {t('tours.export.title', 'Touren exportieren')} ({tourCount})\n                        </Dialog.Title>\n                        <button\n                            onClick={onClose}\n                            className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n                        >\n                            <XMarkIcon className=\"h-6 w-6\" />\n                        </button>\n                    </div>\n\n                    <div className=\"p-6 space-y-6\">\n                        {/* Format-Auswahl */}\n                        <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                                {t('tours.export.format', 'Export-Format')}\n                            </label>\n                            <div className=\"flex gap-4\">\n                                <label className=\"flex items-center\">\n                                    <input\n                                        type=\"radio\"\n                                        value=\"json\"\n                                        checked={format === 'json'}\n                                        onChange={(e) => setFormat(e.target.value as 'json' | 'csv')}\n                                        className=\"mr-2\"\n                                    />\n                                    JSON\n                                </label>\n                                <label className=\"flex items-center\">\n                                    <input\n                                        type=\"radio\"\n                                        value=\"csv\"\n                                        checked={format === 'csv'}\n                                        onChange={(e) => setFormat(e.target.value as 'json' | 'csv')}\n                                        className=\"mr-2\"\n                                    />\n                                    CSV\n                                </label>\n                            </div>\n                        </div>\n\n                        {/* Feldauswahl */}\n                        <div>\n                            <div className=\"flex items-center justify-between mb-3\">\n                                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                    {t('tours.export.selectFields', 'Felder auswhlen')}\n                                </label>\n                                <div className=\"flex gap-2\">\n                                    <button\n                                        type=\"button\"\n                                        onClick={selectAll}\n                                        className=\"text-sm text-blue-600 dark:text-blue-400 hover:underline\"\n                                    >\n                                        {t('common.selectAll', 'Alle auswhlen')}\n                                    </button>\n                                    <span className=\"text-gray-400\">|</span>\n                                    <button\n                                        type=\"button\"\n                                        onClick={deselectAll}\n                                        className=\"text-sm text-blue-600 dark:text-blue-400 hover:underline\"\n                                    >\n                                        {t('common.deselectAll', 'Alle abwhlen')}\n                                    </button>\n                                </div>\n                            </div>\n                            <div className=\"border border-gray-300 dark:border-gray-600 rounded-md p-4 max-h-96 overflow-y-auto\">\n                                <div className=\"grid grid-cols-2 gap-2\">\n                                    {availableFields.map(field => (\n                                        <label key={field.id} className=\"flex items-center\">\n                                            <input\n                                                type=\"checkbox\"\n                                                checked={selectedFields.includes(field.id)}\n                                                onChange={() => toggleField(field.id)}\n                                                className=\"mr-2 rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                                            />\n                                            <span className=\"text-sm text-gray-700 dark:text-gray-300\">\n                                                {field.label}\n                                            </span>\n                                        </label>\n                                    ))}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"flex justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700\">\n                        <button\n                            type=\"button\"\n                            onClick={onClose}\n                            className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n                        >\n                            {t('common.cancel', 'Abbrechen')}\n                        </button>\n                        <button\n                            type=\"button\"\n                            onClick={handleExport}\n                            disabled={exporting || selectedFields.length === 0}\n                            className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n                        >\n                            <ArrowDownTrayIcon className=\"h-4 w-4\" />\n                            {exporting ? t('common.exporting', 'Exportiere...') : t('common.export', 'Exportieren')}\n                        </button>\n                    </div>\n                </Dialog.Panel>\n            </div>\n        </Dialog>\n    );\n};\n\nexport default TourExportDialog;\n\n","import React, { useState, useEffect, useMemo, useCallback, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { PencilIcon, PlusIcon, ArrowsUpDownIcon, FunnelIcon, InformationCircleIcon, Squares2X2Icon, TableCellsIcon, ArrowDownTrayIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport axiosInstance from '../../config/axios.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport { useTableSettings } from '../../hooks/useTableSettings.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport TableColumnConfig from '../TableColumnConfig.tsx';\nimport FilterPane from '../FilterPane.tsx';\nimport SavedFilterTags from '../SavedFilterTags.tsx';\nimport CreateTourModal from './CreateTourModal.tsx';\nimport EditTourModal from './EditTourModal.tsx';\nimport TourDetailsModal from './TourDetailsModal.tsx';\nimport TourExportDialog from './TourExportDialog.tsx';\nimport { Tour, TourType } from '../../types/tour.ts';\nimport { FilterCondition } from '../FilterRow.tsx';\nimport { applyFilters, evaluateUserRoleCondition } from '../../utils/filterLogic.ts';\n\ninterface ToursTabProps {\n    onError: (error: string) => void;\n}\n\ninterface TourSortConfig {\n    key: 'title' | 'type' | 'price' | 'location' | 'duration' | 'branch' | 'createdBy' | 'isActive';\n    direction: 'asc' | 'desc';\n}\n\nconst TOURS_TABLE_ID = 'worktracker-tours';\n\nconst defaultTourColumnOrder = ['title', 'type', 'price', 'location', 'duration', 'branch', 'isActive', 'actions'];\n\nconst defaultTourCardSortDirections: Record<string, 'asc' | 'desc'> = {\n    title: 'asc',\n    type: 'asc',\n    price: 'asc',\n    location: 'asc',\n    duration: 'asc',\n    branch: 'asc',\n    createdBy: 'asc',\n    isActive: 'asc'\n};\n\nconst tourCardToTableMapping: Record<string, string> = {\n    'title': 'title',\n    'type': 'type',\n    'price': 'price',\n    'location': 'location',\n    'duration': 'duration',\n    'branch': 'branch',\n    'createdBy': 'createdBy',\n    'isActive': 'isActive'\n};\n\nconst getTourCardMetadataFromColumnOrder = (columnOrder: string[]): string[] => {\n    const cardMetadata: string[] = [];\n    columnOrder.forEach(tableCol => {\n        const cardMeta = tourCardToTableMapping[tableCol] || [];\n        if (cardMeta && typeof cardMeta === 'string') {\n            cardMetadata.push(cardMeta);\n        }\n    });\n    return cardMetadata;\n};\n\nconst getTourHiddenCardMetadata = (hiddenTableColumns: string[]): Set<string> => {\n    const hiddenCardMetadata = new Set<string>();\n    hiddenTableColumns.forEach(tableCol => {\n        const cardMeta = tourCardToTableMapping[tableCol];\n        if (cardMeta) {\n            hiddenCardMetadata.add(cardMeta);\n        }\n    });\n    return hiddenCardMetadata;\n};\n\nconst ToursTab: React.FC<ToursTabProps> = ({ onError }) => {\n    const { t } = useTranslation();\n    const { hasPermission } = usePermissions();\n    const { showMessage } = useMessage();\n    \n    // Tour-States\n    const [tours, setTours] = useState<Tour[]>([]);\n    const [toursLoading, setToursLoading] = useState(false);\n    const [toursError, setToursError] = useState<string | null>(null);\n    const [tourSearchTerm, setTourSearchTerm] = useState('');\n    const [tourFilterConditions, setTourFilterConditions] = useState<FilterCondition[]>([]);\n    const [tourFilterLogicalOperators, setTourFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n    const [tourFilterSortDirections, setTourFilterSortDirections] = useState<Array<{ column: string; direction: 'asc' | 'desc'; priority: number; conditionIndex: number }>>([]);\n    const [tourActiveFilterName, setTourActiveFilterName] = useState<string>(t('tours.filters.current', 'Aktuell'));\n    const [tourSelectedFilterId, setTourSelectedFilterId] = useState<number | null>(null);\n    const [isCreateTourModalOpen, setIsCreateTourModalOpen] = useState(false);\n    const [isEditTourModalOpen, setIsEditTourModalOpen] = useState(false);\n    const [isTourDetailsModalOpen, setIsTourDetailsModalOpen] = useState(false);\n    const [isTourExportDialogOpen, setIsTourExportDialogOpen] = useState(false);\n    const [selectedTour, setSelectedTour] = useState<Tour | null>(null);\n    const [selectedTourId, setSelectedTourId] = useState<number | null>(null);\n    const [displayLimit, setDisplayLimit] = useState<number>(10);\n    const [draggedColumn, setDraggedColumn] = useState<string | null>(null);\n    const [dragOverColumn, setDragOverColumn] = useState<string | null>(null);\n    const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n    \n    // Tabellen-Einstellungen\n    const {\n        settings,\n        isLoading: isLoadingSettings,\n        updateColumnOrder,\n        updateHiddenColumns,\n        toggleColumnVisibility,\n        isColumnVisible,\n        updateViewMode\n    } = useTableSettings(TOURS_TABLE_ID, {\n        defaultColumnOrder: defaultTourColumnOrder,\n        defaultHiddenColumns: [],\n        defaultViewMode: 'cards'\n    });\n    \n    // Tours-Spalten\n    const availableTourColumns = useMemo(() => [\n        { id: 'title', label: t('tours.columns.title', 'Titel'), shortLabel: t('tours.columns.title', 'Titel').substring(0, 4) },\n        { id: 'type', label: t('tours.columns.type', 'Typ'), shortLabel: t('tours.columns.type', 'Typ').substring(0, 3) },\n        { id: 'price', label: t('tours.columns.price', 'Preis'), shortLabel: t('tours.columns.price', 'Preis').substring(0, 3) },\n        { id: 'location', label: t('tours.columns.location', 'Ort'), shortLabel: t('tours.columns.location', 'Ort').substring(0, 3) },\n        { id: 'duration', label: t('tours.columns.duration', 'Dauer'), shortLabel: t('tours.columns.duration', 'Dauer').substring(0, 3) },\n        { id: 'branch', label: t('tours.columns.branch', 'Niederlassung'), shortLabel: t('tours.columns.branch', 'Niederlassung').substring(0, 5) },\n        { id: 'createdBy', label: t('tours.columns.createdBy', 'Erstellt von'), shortLabel: t('tours.columns.createdBy', 'Erstellt von').substring(0, 5) },\n        { id: 'isActive', label: t('tours.columns.status', 'Status'), shortLabel: t('tours.columns.status', 'Status').substring(0, 3) },\n        { id: 'actions', label: t('tours.columns.actions', 'Aktionen'), shortLabel: t('common.actions').substring(0, 3) },\n    ], [t]);\n    \n    const tourFilterOnlyColumns = useMemo(() => [\n        { id: 'description', label: t('tours.columns.description', 'Beschreibung'), shortLabel: t('tours.columns.description', 'Beschreibung').substring(0, 3) },\n        { id: 'maxParticipants', label: t('tours.columns.maxParticipants', 'Max. Teilnehmer'), shortLabel: t('tours.columns.maxParticipants', 'Max. Teilnehmer').substring(0, 3) },\n        { id: 'minParticipants', label: t('tours.columns.minParticipants', 'Min. Teilnehmer'), shortLabel: t('tours.columns.minParticipants', 'Min. Teilnehmer').substring(0, 3) },\n    ], [t]);\n    \n    // Tabellen-Header-Sortierung fr Tours\n    const [tourTableSortConfig, setTourTableSortConfig] = useState<TourSortConfig>({ key: 'title', direction: 'asc' });\n    \n    // Lokale Sortierrichtungen fr Tours Cards\n    const [tourCardSortDirections, setTourCardSortDirections] = useState<Record<string, 'asc' | 'desc'>>(() => {\n        return defaultTourCardSortDirections;\n    });\n    \n    const handleTourCardSortDirectionChange = (columnId: string, direction: 'asc' | 'desc') => {\n        setTourCardSortDirections(prev => ({\n            ...prev,\n            [columnId]: direction\n        }));\n    };\n    \n    const viewMode = settings?.viewMode || 'cards';\n    \n    // Card-Metadaten-Reihenfolge aus columnOrder ableiten\n    const cardMetadataOrder = useMemo(() => {\n        return getTourCardMetadataFromColumnOrder(settings?.columnOrder || defaultTourColumnOrder);\n    }, [settings?.columnOrder]);\n    \n    // Versteckte Card-Metadaten aus hiddenColumns ableiten\n    const hiddenCardMetadata = useMemo(() => {\n        return getTourHiddenCardMetadata(settings?.hiddenColumns || []);\n    }, [settings?.hiddenColumns]);\n    \n    // Sichtbare Card-Metadaten\n    const visibleCardMetadata = useMemo(() => {\n        return new Set(cardMetadataOrder.filter(meta => !hiddenCardMetadata.has(meta)));\n    }, [cardMetadataOrder, hiddenCardMetadata]);\n    \n    // Funktion zum Laden der Tours\n    const loadTours = useCallback(async (filterId?: number, filterConditions?: any[], background = false) => {\n        try {\n            if (!background) {\n                setToursLoading(true);\n                setToursError(null);\n            }\n            \n            const params: any = {};\n            if (filterId) {\n                params.filterId = filterId;\n            } else if (filterConditions && filterConditions.length > 0) {\n                params.filterConditions = JSON.stringify({\n                    conditions: filterConditions,\n                    operators: tourFilterLogicalOperators\n                });\n            }\n            \n            const response = await axiosInstance.get(API_ENDPOINTS.TOURS.BASE, { params });\n            if (response.data.success) {\n                const rawData = response.data.data || [];\n                const toursData = Array.isArray(rawData) \n                    ? rawData.filter((tour: Tour | null) => \n                        tour != null && \n                        typeof tour === 'object' && \n                        tour.title != null && \n                        typeof tour.title === 'string'\n                    )\n                    : [];\n                if (!background) {\n                    setTours(toursData);\n                }\n            } else {\n                const errorMessage = response.data.message || t('errors.loadError');\n                if (!background) {\n                    setToursError(errorMessage);\n                    showMessage(errorMessage, 'error');\n                }\n            }\n        } catch (err: any) {\n            console.error('Fehler beim Laden der Touren:', err);\n            const errorMessage = err.response?.data?.message || t('errors.loadError');\n            if (!background) {\n                setToursError(errorMessage);\n                showMessage(errorMessage, 'error');\n            }\n        } finally {\n            if (!background) {\n                setToursLoading(false);\n            }\n        }\n    }, [tourFilterLogicalOperators, t, showMessage]);\n    \n    //  MEMORY: Cleanup - Alle groen Arrays beim Unmount lschen\n    useEffect(() => {\n        return () => {\n            setTours([]);\n            setTourFilterConditions([]);\n        };\n    }, []); // Nur beim Unmount ausfhren\n    \n    // Lade Tours beim Mount\n    useEffect(() => {\n        if (hasPermission('tours', 'read', 'table')) {\n            loadTours();\n        }\n    }, [loadTours, hasPermission]);\n    \n    // Tour-Filter-Funktionen\n    const applyTourFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[], sortDirections: Array<{ column: string; direction: 'asc' | 'desc'; priority: number; conditionIndex: number }>) => {\n        setTourFilterConditions(conditions);\n        setTourFilterLogicalOperators(operators);\n        setTourFilterSortDirections(sortDirections);\n        loadTours(undefined, conditions, false);\n    };\n    \n    const resetTourFilterConditions = () => {\n        setTourFilterConditions([]);\n        setTourFilterLogicalOperators([]);\n        setTourFilterSortDirections([]);\n        setTourActiveFilterName(t('tours.filters.current', 'Aktuell'));\n        setTourSelectedFilterId(null);\n        loadTours();\n    };\n    \n    const handleTourFilterChange = (filterId: number | null, filterName: string) => {\n        setTourSelectedFilterId(filterId);\n        setTourActiveFilterName(filterName);\n        if (filterId) {\n            loadTours(filterId);\n        } else {\n            resetTourFilterConditions();\n        }\n    };\n    \n    const handleTourSort = (key: TourSortConfig['key']) => {\n        if (viewMode === 'table') {\n            setTourTableSortConfig(current => ({\n                key,\n                direction: current.key === key && current.direction === 'asc' ? 'desc' : 'asc'\n            }));\n        }\n    };\n    \n    // Drag & Drop Handler\n    const handleDragStart = (columnId: string) => {\n        setDraggedColumn(columnId);\n    };\n    \n    const handleDragOver = (e: React.DragEvent, columnId: string) => {\n        e.preventDefault();\n        if (draggedColumn && draggedColumn !== columnId) {\n            setDragOverColumn(columnId);\n        }\n    };\n    \n    const handleDrop = (e: React.DragEvent, columnId: string) => {\n        e.preventDefault();\n            if (draggedColumn && draggedColumn !== columnId) {\n                const columnOrder = settings?.columnOrder || defaultTourColumnOrder;\n                const dragIndex = columnOrder.indexOf(draggedColumn);\n                const hoverIndex = columnOrder.indexOf(columnId);\n\n                if (dragIndex > -1 && hoverIndex > -1) {\n                    const newColumnOrder = [...columnOrder];\n                const draggedColumn_ = newColumnOrder[dragIndex];\n                newColumnOrder.splice(dragIndex, 1);\n                newColumnOrder.splice(hoverIndex, 0, draggedColumn_);\n                updateColumnOrder(newColumnOrder);\n            }\n        }\n        setDraggedColumn(null);\n        setDragOverColumn(null);\n    };\n    \n    const handleDragEnd = () => {\n        setDraggedColumn(null);\n        setDragOverColumn(null);\n    };\n    \n    // Filtern und sortieren der Spalten gem den Benutzereinstellungen\n    const completeColumnOrder = useMemo(() => {\n        const currentOrder = settings?.columnOrder || [];\n        const validOrder = currentOrder.filter(id => id != null && typeof id === 'string');\n        const missingColumns = defaultTourColumnOrder.filter(id => !validOrder.includes(id));\n        return [...validOrder, ...missingColumns];\n    }, [settings?.columnOrder]);\n    \n    const visibleColumnIds = completeColumnOrder.filter(id => id != null && typeof id === 'string' && isColumnVisible(id));\n    \n    const getActiveFilterCount = () => {\n        return tourFilterConditions.length;\n    };\n    \n    // Filter- und Sortierlogik fr Tours\n    const filteredAndSortedTours = useMemo(() => {\n        // Sicherstellen, dass tours ein Array ist\n        if (!Array.isArray(tours)) {\n            return [];\n        }\n        \n        const validTours = tours.filter(tour => tour != null && tour.title != null && typeof tour.title === 'string');\n        \n        let filtered = validTours.filter(tour => {\n            // Such-Filter\n            if (tourSearchTerm) {\n                const searchLower = tourSearchTerm.toLowerCase();\n                const matchesSearch = \n                    (tour.title && tour.title.toLowerCase().includes(searchLower)) ||\n                    (tour.description && tour.description.toLowerCase().includes(searchLower)) ||\n                    (tour.location && tour.location.toLowerCase().includes(searchLower));\n                \n                if (!matchesSearch) return false;\n            }\n            \n            return true;\n        });\n\n        // Erweiterte Filterbedingungen anwenden\n        if (tourFilterConditions.length > 0) {\n            const columnEvaluators: any = {\n                'title': (tour: Tour, cond: FilterCondition) => {\n                    if (!tour || !tour.title) return false;\n                    const value = (cond.value as string || '').toLowerCase();\n                    const title = (tour.title || '').toLowerCase();\n                    if (cond.operator === 'equals') return tour.title === cond.value;\n                    if (cond.operator === 'contains') return title.includes(value);\n                    if (cond.operator === 'startsWith') return title.startsWith(value);\n                    if (cond.operator === 'endsWith') return title.endsWith(value);\n                    return null;\n                },\n                'type': (tour: Tour, cond: FilterCondition) => {\n                    if (!tour || !tour.type) return false;\n                    if (cond.operator === 'equals') return tour.type === cond.value;\n                    if (cond.operator === 'notEquals') return tour.type !== cond.value;\n                    return null;\n                },\n                'isActive': (tour: Tour, cond: FilterCondition) => {\n                    const value = cond.value === 'true' || cond.value === true || cond.value === '1';\n                    if (cond.operator === 'equals') return tour.isActive === value;\n                    if (cond.operator === 'notEquals') return tour.isActive !== value;\n                    return null;\n                },\n                'price': (tour: Tour, cond: FilterCondition) => {\n                    const price = typeof tour.price === 'string' ? parseFloat(tour.price) : (tour.price || 0);\n                    const compareValue = typeof cond.value === 'string' ? parseFloat(cond.value) : (cond.value || 0);\n                    if (isNaN(price) || isNaN(compareValue)) return false;\n                    if (cond.operator === 'equals') return Math.abs(price - compareValue) < 0.01;\n                    if (cond.operator === 'greaterThan') return price > compareValue;\n                    if (cond.operator === 'lessThan') return price < compareValue;\n                    return null;\n                },\n                'location': (tour: Tour, cond: FilterCondition) => {\n                    const value = (cond.value as string || '').toLowerCase();\n                    const location = (tour.location || '').toLowerCase();\n                    if (cond.operator === 'equals') return tour.location === cond.value;\n                    if (cond.operator === 'contains') return location.includes(value);\n                    if (cond.operator === 'startsWith') return location.startsWith(value);\n                    if (cond.operator === 'endsWith') return location.endsWith(value);\n                    return null;\n                },\n                'branch': (tour: Tour, cond: FilterCondition) => {\n                    const branchName = (tour.branch?.name || '').toLowerCase();\n                    const value = (cond.value as string || '').toLowerCase();\n                    if (cond.operator === 'equals') return branchName === value;\n                    if (cond.operator === 'contains') return branchName.includes(value);\n                    return null;\n                },\n                'createdBy': (tour: Tour, cond: FilterCondition) => {\n                    const createdByName = tour.createdBy\n                        ? `${tour.createdBy.firstName} ${tour.createdBy.lastName}`\n                        : '';\n                    return evaluateUserRoleCondition(\n                        tour.createdById || null,\n                        null,\n                        cond,\n                        createdByName\n                    );\n                }\n            };\n\n            const getFieldValue = (tour: Tour | null, columnId: string): any => {\n                if (!tour) return '';\n                switch (columnId) {\n                    case 'title': return tour.title || '';\n                    case 'type': return tour.type || '';\n                    case 'price': return typeof tour.price === 'string' ? parseFloat(tour.price) : (tour.price || 0);\n                    case 'location': return tour.location || '';\n                    case 'duration': return tour.duration || 0;\n                    case 'branch': return tour.branch?.name || '';\n                    case 'createdBy': return tour.createdBy ? `${tour.createdBy.firstName} ${tour.createdBy.lastName}` : '';\n                    case 'isActive': return tour.isActive;\n                    default: return '';\n                }\n            };\n\n            filtered = applyFilters(\n                filtered,\n                tourFilterConditions,\n                tourFilterLogicalOperators,\n                getFieldValue,\n                columnEvaluators\n            );\n        }\n        \n        // Hilfsfunktion zum Extrahieren von Werten fr Sortierung\n        const getTourSortValue = (tour: Tour | null, columnId: string): any => {\n            if (!tour) return '';\n            switch (columnId) {\n                case 'title':\n                    return (tour.title || '').toLowerCase();\n                case 'type':\n                    return (tour.type || '').toLowerCase();\n                case 'price':\n                    return typeof tour.price === 'string' ? parseFloat(tour.price) : (tour.price || 0);\n                case 'location':\n                    return (tour.location || '').toLowerCase();\n                case 'duration':\n                    return tour.duration || 0;\n                case 'branch':\n                    return (tour.branch?.name || '').toLowerCase();\n                case 'createdBy':\n                    return tour.createdBy ? `${tour.createdBy.firstName} ${tour.createdBy.lastName}`.toLowerCase() : '';\n                case 'isActive':\n                    return tour.isActive ? 1 : 0;\n                default:\n                    return '';\n            }\n        };\n        \n        // Sortierung basierend auf Prioritten\n        const sorted = filtered.sort((a, b) => {\n            // Null-Check fr a und b\n            if (!a || !b) {\n                if (!a && !b) return 0;\n                if (!a) return 1;\n                if (!b) return -1;\n            }\n            \n            // 1. Prioritt: Filter-Sortierung (hchste Prioritt)\n            if (tourFilterSortDirections.length > 0) {\n                for (const sortDir of tourFilterSortDirections.sort((x, y) => x.priority - y.priority)) {\n                    const valueA = getTourSortValue(a, sortDir.column);\n                    const valueB = getTourSortValue(b, sortDir.column);\n                    \n                    let comparison = 0;\n                    if (typeof valueA === 'number' && typeof valueB === 'number') {\n                        comparison = valueA - valueB;\n                    } else {\n                        comparison = String(valueA).localeCompare(String(valueB));\n                    }\n                    \n                    if (sortDir.direction === 'desc') {\n                        comparison = -comparison;\n                    }\n                    \n                    if (comparison !== 0) {\n                        return comparison;\n                    }\n                }\n                return 0;\n            }\n            \n            // 2. Prioritt: Table-Header-Sortierung (temporre berschreibung, auch wenn Filter aktiv)\n            if (viewMode === 'table' && tourTableSortConfig.key) {\n                const valueA = getTourSortValue(a, tourTableSortConfig.key);\n                const valueB = getTourSortValue(b, tourTableSortConfig.key);\n                \n                let comparison = 0;\n                if (typeof valueA === 'number' && typeof valueB === 'number') {\n                    comparison = valueA - valueB;\n                } else {\n                    comparison = String(valueA).localeCompare(String(valueB));\n                }\n                \n                if (comparison !== 0) {\n                    return tourTableSortConfig.direction === 'asc' ? comparison : -comparison;\n                }\n            }\n            \n            // 3. Prioritt: Cards-Mode Multi-Sortierung (wenn kein Filter aktiv, Cards-Mode)\n            if (viewMode === 'cards' && tourFilterConditions.length === 0) {\n                const sortableColumns = ['title', 'type', 'price', 'location', 'duration', 'branch', 'createdBy', 'isActive'];\n                \n                for (const columnId of sortableColumns) {\n                    const direction = tourCardSortDirections[columnId] || 'asc';\n                    const valueA = getTourSortValue(a, columnId);\n                    const valueB = getTourSortValue(b, columnId);\n                    \n                    let comparison = 0;\n                    if (typeof valueA === 'number' && typeof valueB === 'number') {\n                        comparison = valueA - valueB;\n                    } else {\n                        comparison = String(valueA).localeCompare(String(valueB));\n                    }\n                    \n                    if (direction === 'desc') {\n                        comparison = -comparison;\n                    }\n                    \n                    if (comparison !== 0) {\n                        return comparison;\n                    }\n                }\n                return 0;\n            }\n            \n            // 4. Fallback: Titel (alphabetisch)\n            const titleA = (a?.title || '').toLowerCase();\n            const titleB = (b?.title || '').toLowerCase();\n            return titleA.localeCompare(titleB);\n        });\n        \n        return sorted;\n    }, [tours, tourSearchTerm, tourFilterConditions, tourFilterLogicalOperators, tourFilterSortDirections, viewMode, tourTableSortConfig, tourCardSortDirections]);\n\n    return (\n        <div className=\"space-y-4\">\n            {/* Header mit Suche, View-Toggle, Filter, Export, Create */}\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n                {/* Linke Seite: Suche */}\n                <div className=\"flex-1 w-full sm:max-w-md\">\n                    <input\n                        type=\"text\"\n                        placeholder={t('common.search') + '...'}\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n                        value={tourSearchTerm}\n                        onChange={(e) => setTourSearchTerm(e.target.value)}\n                    />\n                </div>\n                \n                {/* Rechte Seite: View-Toggle, Filter, Export, Create */}\n                <div className=\"flex items-center gap-1.5\">\n                    {/* View-Mode Toggle */}\n                    <div className=\"relative group\">\n                        <button\n                            className={`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                                viewMode === 'cards' ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : ''\n                            }`}\n                            onClick={() => updateViewMode(viewMode === 'table' ? 'cards' : 'table')}\n                        >\n                            {viewMode === 'table' ? (\n                                <Squares2X2Icon className=\"h-5 w-5\" />\n                            ) : (\n                                <TableCellsIcon className=\"h-5 w-5\" />\n                            )}\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                            {viewMode === 'table' ? t('common.viewAsCards') : t('common.viewAsTable')}\n                        </div>\n                    </div>\n                    \n                    {/* Filter-Button */}\n                    <div className=\"relative group ml-1\">\n                        <button\n                            className={`p-2 rounded-md ${getActiveFilterCount() > 0 ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'hover:bg-gray-100 dark:hover:bg-gray-700'} relative`}\n                            onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n                        >\n                            <FunnelIcon className=\"h-5 w-5\" />\n                            {getActiveFilterCount() > 0 && (\n                                <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 text-white rounded-full text-xs flex items-center justify-center\">\n                                    {getActiveFilterCount()}\n                                </span>\n                            )}\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                            {t('common.filter')}\n                        </div>\n                    </div>\n                    \n                    {/* Export-Button */}\n                    {hasPermission('tour_edit', 'write', 'button') && (\n                        <div className=\"relative group\">\n                            <button\n                                onClick={() => setIsTourExportDialogOpen(true)}\n                                className=\"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700\"\n                            >\n                                <ArrowDownTrayIcon className=\"h-5 w-5\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('tours.export', 'Exportieren')}\n                            </div>\n                        </div>\n                    )}\n                    \n                    {/* Spalten-Konfiguration */}\n                    <div className=\"ml-1\">\n                        <TableColumnConfig\n                            columns={viewMode === 'cards'\n                                ? [\n                                    { id: 'title', label: t('tours.columns.title', 'Titel') },\n                                    { id: 'type', label: t('tours.columns.type', 'Typ') },\n                                    { id: 'price', label: t('tours.columns.price', 'Preis') },\n                                    { id: 'location', label: t('tours.columns.location', 'Ort') },\n                                    { id: 'duration', label: t('tours.columns.duration', 'Dauer') },\n                                    { id: 'branch', label: t('tours.columns.branch', 'Niederlassung') },\n                                    { id: 'createdBy', label: t('tours.columns.createdBy', 'Erstellt von') },\n                                    { id: 'isActive', label: t('tours.columns.status', 'Status') }\n                                ]\n                                : availableTourColumns}\n                            visibleColumns={viewMode === 'cards'\n                                ? Array.from(visibleCardMetadata)\n                                : visibleColumnIds}\n                            columnOrder={viewMode === 'cards'\n                                ? cardMetadataOrder\n                                : settings.columnOrder}\n                            onToggleColumnVisibility={(columnId) => {\n                                if (viewMode === 'cards') {\n                                    const tableColumn = tourCardToTableMapping[columnId];\n                                    if (tableColumn) {\n                                        toggleColumnVisibility(tableColumn);\n                                    }\n                                } else {\n                                    toggleColumnVisibility(columnId);\n                                }\n                            }}\n                            onColumnOrderChange={(newOrder) => {\n                                if (viewMode === 'cards') {\n                                    const newTableOrder = newOrder.map(cardMeta => tourCardToTableMapping[cardMeta] || cardMeta).filter(Boolean);\n                                    updateColumnOrder(newTableOrder);\n                                } else {\n                                    updateColumnOrder(newOrder);\n                                }\n                            }}\n                            modalTitle={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n                            sortDirections={viewMode === 'cards' ? tourCardSortDirections : undefined}\n                            onSortDirectionChange={viewMode === 'cards' ? handleTourCardSortDirectionChange : undefined}\n                            showSortDirection={viewMode === 'cards'}\n                            onClose={() => {}}\n                        />\n                    </div>\n                    \n                    {/* Create-Button */}\n                    {hasPermission('tour_create', 'write', 'button') && (\n                        <div className=\"relative group\">\n                            <button\n                                onClick={() => setIsCreateTourModalOpen(true)}\n                                className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                                style={{ width: '30.19px', height: '30.19px' }}\n                                aria-label={t('tours.create', 'Neue Tour erstellen')}\n                            >\n                                <PlusIcon className=\"h-4 w-4\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                {t('tours.create', 'Neue Tour erstellen')}\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n\n            {/* Filter-Pane */}\n            {isFilterModalOpen && (\n                <div className=\"px-3 sm:px-4 md:px-6\">\n                    <FilterPane\n                        columns={[...availableTourColumns, ...tourFilterOnlyColumns]}\n                        onApply={applyTourFilterConditions}\n                        onReset={resetTourFilterConditions}\n                        savedConditions={tourFilterConditions}\n                        savedOperators={tourFilterLogicalOperators}\n                        savedSortDirections={tourFilterSortDirections}\n                        onSortDirectionsChange={setTourFilterSortDirections}\n                        tableId={TOURS_TABLE_ID}\n                    />\n                </div>\n            )}\n\n            {/* Gespeicherte Filter als Tags */}\n            <SavedFilterTags\n                tableId={TOURS_TABLE_ID}\n                onSelectFilter={applyTourFilterConditions}\n                onReset={resetTourFilterConditions}\n                activeFilterName={tourActiveFilterName}\n                selectedFilterId={tourSelectedFilterId}\n                onFilterChange={handleTourFilterChange}\n                defaultFilterName={t('tours.filters.current', 'Aktuell')}\n            />\n\n            {/* Table View */}\n            {viewMode === 'table' && (\n                <div className=\"overflow-x-auto -mx-3 sm:-mx-4 md:-mx-6\">\n                    <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n                        <thead className=\"bg-gray-50 dark:bg-gray-800\">\n                            <tr>\n                                {visibleColumnIds.map(columnId => {\n                                    const column = availableTourColumns.find(col => col.id === columnId);\n                                    if (!column) return null;\n                                    \n                                    return (\n                                        <th\n                                            key={columnId}\n                                            scope=\"col\"\n                                            className={`px-3 sm:px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider ${columnId === dragOverColumn ? 'bg-blue-100 dark:bg-blue-800' : ''}`}\n                                            draggable={true}\n                                            onDragStart={() => handleDragStart(columnId)}\n                                            onDragOver={(e) => handleDragOver(e, columnId)}\n                                            onDrop={(e) => handleDrop(e, columnId)}\n                                            onDragEnd={handleDragEnd}\n                                        >\n                                            <div className=\"flex items-center\">\n                                                {window.innerWidth <= 640 ? column.shortLabel : column.label}\n                                                {columnId !== 'actions' && (\n                                                    <button \n                                                        onClick={() => handleTourSort(columnId as TourSortConfig['key'])}\n                                                        className=\"ml-1 focus:outline-none\"\n                                                    >\n                                                        <ArrowsUpDownIcon className=\"h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                                                    </button>\n                                                )}\n                                            </div>\n                                        </th>\n                                    );\n                                })}\n                            </tr>\n                        </thead>\n                        <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                            {toursLoading ? (\n                                <tr>\n                                    <td colSpan={visibleColumnIds.length} className=\"px-3 sm:px-4 md:px-6 py-8 text-center text-gray-500 dark:text-gray-400\">\n                                        {t('common.loading')}\n                                    </td>\n                                </tr>\n                            ) : toursError ? (\n                                <tr>\n                                    <td colSpan={visibleColumnIds.length} className=\"px-3 sm:px-4 md:px-6 py-8 text-center text-red-500 dark:text-red-400\">\n                                        {toursError}\n                                    </td>\n                                </tr>\n                            ) : filteredAndSortedTours.length === 0 ? (\n                                <tr>\n                                    <td colSpan={visibleColumnIds.length} className=\"px-3 sm:px-4 md:px-6 py-8 text-center text-gray-500 dark:text-gray-400\">\n                                        {t('tours.noTours')}\n                                    </td>\n                                </tr>\n                            ) : (\n                                <>\n                                    {filteredAndSortedTours.slice(0, displayLimit).filter(tour => tour != null && tour.title != null).map(tour => (\n                                        <tr \n                                            key={tour.id} \n                                            className=\"hover:bg-gray-50 dark:hover:bg-gray-700\"\n                                        >\n                                            {visibleColumnIds.map(columnId => {\n                                                switch (columnId) {\n                                                    case 'title':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4\">\n                                                                <div className=\"text-sm text-gray-900 dark:text-gray-200 break-words\">\n                                                                    {tour?.title || '-'}\n                                                                </div>\n                                                            </td>\n                                                        );\n                                                    case 'type':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                                                    {tour.type === TourType.OWN ? t('tours.typeOwn') : t('tours.typeExternal')}\n                                                                </div>\n                                                            </td>\n                                                        );\n                                                    case 'price':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                                                    {tour.price ? `${Number(tour.price).toLocaleString()} ${tour.currency || 'COP'}` : '-'}\n                                                                </div>\n                                                            </td>\n                                                        );\n                                                    case 'location':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                                                    {tour.location || '-'}\n                                                                </div>\n                                                            </td>\n                                                        );\n                                                    case 'duration':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                                                    {tour.duration ? `${tour.duration} ${t('common.hours', 'h')}` : '-'}\n                                                                </div>\n                                                            </td>\n                                                        );\n                                                    case 'branch':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                                                    {tour.branch?.name || '-'}\n                                                                </div>\n                                                            </td>\n                                                        );\n                                                    case 'createdBy':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                                                    {tour.createdBy ? `${tour.createdBy.firstName} ${tour.createdBy.lastName}` : '-'}\n                                                                </div>\n                                                            </td>\n                                                        );\n                                                    case 'isActive':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                {hasPermission('tour_edit', 'write', 'button') ? (\n                                                                    <button\n                                                                        onClick={async (e) => {\n                                                                            e.stopPropagation();\n                                                                            try {\n                                                                                await axiosInstance.put(API_ENDPOINTS.TOURS.TOGGLE_ACTIVE(tour.id));\n                                                                                showMessage(\n                                                                                    tour.isActive \n                                                                                        ? t('tours.deactivated', { defaultValue: 'Tour deaktiviert' })\n                                                                                        : t('tours.activated', { defaultValue: 'Tour aktiviert' }),\n                                                                                    'success'\n                                                                                );\n                                                                                await loadTours();\n                                                                            } catch (err: any) {\n                                                                                console.error('Fehler beim Toggle der Tour:', err);\n                                                                                showMessage(\n                                                                                    err.response?.data?.message || t('errors.unknownError'),\n                                                                                    'error'\n                                                                                );\n                                                                            }\n                                                                        }}\n                                                                        className={`px-2 py-1 text-xs rounded transition-colors ${\n                                                                            tour.isActive \n                                                                                ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 hover:bg-green-200 dark:hover:bg-green-800' \n                                                                                : 'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700'\n                                                                        }`}\n                                                                    >\n                                                                        {tour.isActive ? t('tours.statusActive') : t('tours.statusInactive')}\n                                                                    </button>\n                                                                ) : (\n                                                                    <span className={`px-2 py-1 text-xs rounded ${\n                                                                        tour.isActive \n                                                                            ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' \n                                                                            : 'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200'\n                                                                    }`}>\n                                                                        {tour.isActive ? t('tours.statusActive') : t('tours.statusInactive')}\n                                                                    </span>\n                                                                )}\n                                                            </td>\n                                                        );\n                                                    case 'actions':\n                                                        return (\n                                                            <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                <div className=\"flex space-x-2 action-buttons\">\n                                                                    <div className=\"relative group\">\n                                                                        <button\n                                                                            onClick={(e) => {\n                                                                                e.stopPropagation();\n                                                                                setSelectedTourId(tour.id);\n                                                                                setIsTourDetailsModalOpen(true);\n                                                                            }}\n                                                                            className=\"p-1.5 text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300\"\n                                                                        >\n                                                                            <InformationCircleIcon className=\"h-4 w-4\" />\n                                                                        </button>\n                                                                        <div className=\"absolute right-full mr-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                                                            {t('common.viewDetails', 'Details anzeigen')}\n                                                                        </div>\n                                                                    </div>\n                                                                    {hasPermission('tour_edit', 'write', 'button') && (\n                                                                        <div className=\"relative group\">\n                                                                            <button\n                                                                                onClick={(e) => {\n                                                                                    e.stopPropagation();\n                                                                                    setSelectedTour(tour);\n                                                                                    setIsEditTourModalOpen(true);\n                                                                                }}\n                                                                                className=\"p-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                                                                            >\n                                                                                <PencilIcon className=\"h-4 w-4\" />\n                                                                            </button>\n                                                                            <div className=\"absolute right-full mr-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                                                                {t('tours.edit', 'Bearbeiten')}\n                                                                            </div>\n                                                                        </div>\n                                                                    )}\n                                                                </div>\n                                                            </td>\n                                                        );\n                                                    default:\n                                                        return null;\n                                                }\n                                            })}\n                                        </tr>\n                                    ))}\n                                </>\n                            )}\n                        </tbody>\n                    </table>\n                </div>\n            )}\n\n            {/* Card View */}\n            {viewMode === 'cards' && (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                    {toursLoading ? (\n                        <div className=\"col-span-full text-center py-8 text-gray-500 dark:text-gray-400\">\n                            {t('common.loading')}\n                        </div>\n                    ) : toursError ? (\n                        <div className=\"col-span-full text-center py-8 text-red-500 dark:text-red-400\">\n                            {toursError}\n                        </div>\n                    ) : filteredAndSortedTours.length === 0 ? (\n                        <div className=\"col-span-full text-center py-8 text-gray-500 dark:text-gray-400\">\n                            {t('tours.noTours')}\n                        </div>\n                    ) : (\n                        filteredAndSortedTours.slice(0, displayLimit).filter(tour => tour != null && tour.title != null).map((tour) => (\n                            <div\n                                key={tour.id}\n                                className=\"bg-white dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 p-4 hover:shadow-md transition-shadow\"\n                            >\n                                <div className=\"flex items-start justify-between mb-2\">\n                                    <h4 className=\"text-lg font-semibold dark:text-white\">{tour?.title || '-'}</h4>\n                                    {hasPermission('tour_edit', 'write', 'button') ? (\n                                        <button\n                                            onClick={async () => {\n                                                try {\n                                                    await axiosInstance.put(API_ENDPOINTS.TOURS.TOGGLE_ACTIVE(tour.id));\n                                                    showMessage(\n                                                        tour.isActive \n                                                            ? t('tours.deactivated', { defaultValue: 'Tour deaktiviert' })\n                                                            : t('tours.activated', { defaultValue: 'Tour aktiviert' }),\n                                                        'success'\n                                                    );\n                                                    await loadTours();\n                                                } catch (err: any) {\n                                                    console.error('Fehler beim Toggle der Tour:', err);\n                                                    showMessage(\n                                                        err.response?.data?.message || t('errors.unknownError'),\n                                                        'error'\n                                                    );\n                                                }\n                                            }}\n                                            className={`px-2 py-1 text-xs rounded transition-colors ${\n                                                tour.isActive \n                                                    ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 hover:bg-green-200 dark:hover:bg-green-800' \n                                                    : 'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700'\n                                            }`}\n                                        >\n                                            {tour.isActive ? t('tours.statusActive') : t('tours.statusInactive')}\n                                        </button>\n                                    ) : (\n                                        <span className={`px-2 py-1 text-xs rounded ${\n                                            tour.isActive \n                                                ? 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200' \n                                                : 'bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200'\n                                        }`}>\n                                            {tour.isActive ? t('tours.statusActive') : t('tours.statusInactive')}\n                                        </span>\n                                    )}\n                                </div>\n                                \n                                {tour.description && (\n                                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-2\">\n                                        {tour.description}\n                                    </p>\n                                )}\n\n                                <div className=\"flex items-center justify-between mt-4\">\n                                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                                        <span className=\"font-medium\">{t('tours.type')}:</span>{' '}\n                                        {tour.type === TourType.OWN ? t('tours.typeOwn') : t('tours.typeExternal')}\n                                    </div>\n                                    {tour.price && (\n                                        <div className=\"text-sm font-semibold dark:text-white\">\n                                            {Number(tour.price).toLocaleString()} {tour.currency || 'COP'}\n                                        </div>\n                                    )}\n                                </div>\n                                \n                                {hasPermission('tour_edit', 'write', 'button') && (\n                                    <div className=\"mt-4 flex justify-end\">\n                                        <button\n                                            onClick={() => {\n                                                setSelectedTour(tour);\n                                                setIsEditTourModalOpen(true);\n                                            }}\n                                            className=\"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm\"\n                                        >\n                                            {t('tours.edit', 'Bearbeiten')}\n                                        </button>\n                                    </div>\n                                )}\n                            </div>\n                        ))\n                    )}\n                </div>\n            )}\n\n            {/* \"Mehr anzeigen\" Button */}\n            {filteredAndSortedTours.length > displayLimit && (\n                <div className=\"mt-4 flex justify-center\">\n                    <button\n                        className=\"px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-700 border border-blue-300 dark:border-gray-600 rounded-md hover:bg-blue-50 dark:hover:bg-gray-600\"\n                        onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n                    >\n                        {t('common.showMore')} ({filteredAndSortedTours.length - displayLimit} {t('common.remaining')})\n                    </button>\n                </div>\n            )}\n\n            {/* Modals */}\n            <CreateTourModal\n                isOpen={isCreateTourModalOpen}\n                onClose={() => setIsCreateTourModalOpen(false)}\n                onTourCreated={async () => {\n                    await loadTours();\n                }}\n            />\n            \n            {selectedTour && (\n                <EditTourModal\n                    isOpen={isEditTourModalOpen}\n                    onClose={() => {\n                        setIsEditTourModalOpen(false);\n                        setSelectedTour(null);\n                    }}\n                    onTourUpdated={async () => {\n                        await loadTours();\n                        setIsEditTourModalOpen(false);\n                        setSelectedTour(null);\n                    }}\n                    tour={selectedTour}\n                />\n            )}\n            \n            {selectedTourId && (\n                <TourDetailsModal\n                    isOpen={isTourDetailsModalOpen}\n                    onClose={() => {\n                        setIsTourDetailsModalOpen(false);\n                        setSelectedTourId(null);\n                    }}\n                    tourId={selectedTourId}\n                    onTourUpdated={async () => {\n                        await loadTours();\n                    }}\n                />\n            )}\n            \n            <TourExportDialog\n                isOpen={isTourExportDialogOpen}\n                onClose={() => setIsTourExportDialogOpen(false)}\n                tourCount={filteredAndSortedTours.length}\n            />\n        </div>\n    );\n};\n\nexport default ToursTab;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { CreateOrganizationRequest } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\nimport { useAuth } from '../../hooks/useAuth.tsx';\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n}\n\nconst CreateOrganizationModal: React.FC<Props> = ({ isOpen, onClose, onSuccess }) => {\n  const { t } = useTranslation();\n  const [formData, setFormData] = useState<CreateOrganizationRequest>({\n    name: '',\n    displayName: '',\n    domain: ''\n  });\n  const [loading, setLoading] = useState<boolean>(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  const { fetchCurrentUser } = useAuth();\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    \n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    \n    if (!formData.name.trim()) {\n      newErrors.name = t('organization.create.nameRequired');\n    }\n    \n    if (!formData.displayName.trim()) {\n      newErrors.displayName = t('organization.create.displayNameRequired');\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n    // Fehler fr dieses Feld lschen\n    if (errors[name]) {\n      setErrors(prev => ({ ...prev, [name]: '' }));\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      showMessage(t('joinRequest.fillRequired'), 'error');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      await organizationService.createOrganization(formData);\n      setErrors({});\n      showMessage(t('organization.create.createSuccess'), 'success');\n      \n      // WICHTIG: User und Berechtigungen neu laden nach Erstellen der Organisation\n      // Der User wurde der Admin-Rolle zugeordnet und hat jetzt neue Berechtigungen\n      await fetchCurrentUser();\n      \n      // Formular zurcksetzen\n      setFormData({\n        name: '',\n        displayName: '',\n        domain: ''\n      });\n      onClose();\n      if (onSuccess) {\n        onSuccess();\n      }\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('organization.create.createError');\n      showMessage(errorMessage, 'error');\n      setErrors({ submit: errorMessage });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    // Formular zurcksetzen\n    setFormData({\n      name: '',\n      displayName: '',\n      domain: ''\n    });\n    setErrors({});\n    onClose();\n  };\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('organization.create.title')}\n              </Dialog.Title>\n              <button\n                onClick={handleClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-4\">\n              {errors.submit && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {errors.submit}\n                </div>\n              )}\n\n              <div className=\"space-y-4\">\n                <div>\n                  <label \n                    htmlFor=\"name\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.create.name')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"name\"\n                    name=\"name\"\n                    value={formData.name}\n                    onChange={handleChange}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.name \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  />\n                  {errors.name && (\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.name}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"displayName\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.create.displayName')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"displayName\"\n                    name=\"displayName\"\n                    value={formData.displayName}\n                    onChange={handleChange}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.displayName \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  />\n                  {errors.displayName && (\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"domain\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.create.domain')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"domain\"\n                    name=\"domain\"\n                    value={formData.domain}\n                    onChange={handleChange}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                  title={t('joinRequest.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title={loading ? t('organization.create.creating') : t('organization.create.createButton')}\n                >\n                  {loading ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={handleClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('organization.create.title')}\n          </h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {errors.submit && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {errors.submit}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label \n                htmlFor=\"name\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.create.name')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"name\"\n                name=\"name\"\n                value={formData.name}\n                onChange={handleChange}\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                  errors.name \n                    ? 'border-red-300 dark:border-red-600' \n                    : 'border-gray-300 dark:border-gray-600'\n                }`}\n              />\n              {errors.name && (\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.name}</p>\n              )}\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"displayName\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.create.displayName')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"displayName\"\n                name=\"displayName\"\n                value={formData.displayName}\n                onChange={handleChange}\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                  errors.displayName \n                    ? 'border-red-300 dark:border-red-600' \n                    : 'border-gray-300 dark:border-gray-600'\n                }`}\n              />\n              {errors.displayName && (\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\n              )}\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"domain\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.create.domain')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"domain\"\n                name=\"domain\"\n                value={formData.domain}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"flex justify-end pt-4 gap-2\">\n              <button\n                type=\"button\"\n                onClick={handleClose}\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                title={t('common.cancel')}\n              >\n                <XMarkIcon className=\"h-5 w-5\" />\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                title={loading ? t('organization.create.creating') : t('organization.create.createButton')}\n              >\n                {loading ? (\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                ) : (\n                  <CheckIcon className=\"h-5 w-5\" />\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default CreateOrganizationModal; ","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { CreateJoinRequestRequest, Organization } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n}\n\nconst JoinOrganizationModal: React.FC<Props> = ({ isOpen, onClose, onSuccess }) => {\n  const { t } = useTranslation();\n  const [formData, setFormData] = useState<CreateJoinRequestRequest>({\n    organizationName: '',\n    message: ''\n  });\n  const [loading, setLoading] = useState<boolean>(false);\n  const [searching, setSearching] = useState<boolean>(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [organizations, setOrganizations] = useState<Organization[]>([]);\n  const [showDropdown, setShowDropdown] = useState<boolean>(false);\n  const [selectedOrganization, setSelectedOrganization] = useState<Organization | null>(null);\n  const searchTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const { showMessage } = useMessage();\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    \n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  // Click outside handler fr Dropdown\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setShowDropdown(false);\n      }\n    };\n\n    if (showDropdown) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showDropdown]);\n\n  const searchOrganizations = async (searchTerm: string) => {\n    if (searchTerm.length < 2) {\n      setOrganizations([]);\n      setShowDropdown(false);\n      return;\n    }\n\n    try {\n      setSearching(true);\n      const results = await organizationService.searchOrganizations(searchTerm);\n      setOrganizations(results);\n      setShowDropdown(true);\n    } catch (err: any) {\n      console.error('Fehler bei der Organisationen-Suche:', err);\n      setOrganizations([]);\n    } finally {\n      setSearching(false);\n    }\n  };\n\n  const handleOrganizationInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setFormData(prev => ({ ...prev, organizationName: value }));\n    setSelectedOrganization(null);\n    \n    // Fehler lschen\n    if (errors.organizationName) {\n      setErrors(prev => ({ ...prev, organizationName: '' }));\n    }\n\n    // Debounce fr Suche\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n\n    searchTimeoutRef.current = setTimeout(() => {\n      searchOrganizations(value);\n    }, 300);\n  };\n\n  const handleSelectOrganization = (org: Organization) => {\n    setSelectedOrganization(org);\n    setFormData(prev => ({ ...prev, organizationName: org.name }));\n    setShowDropdown(false);\n    setOrganizations([]);\n  };\n\n  const handleMessageChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setFormData(prev => ({ ...prev, message: e.target.value }));\n    if (errors.message) {\n      setErrors(prev => ({ ...prev, message: '' }));\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    \n    if (!formData.organizationName.trim()) {\n      newErrors.organizationName = t('organization.join.nameRequired');\n    } else if (!selectedOrganization) {\n      newErrors.organizationName = t('organization.join.selectFromList');\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      showMessage(t('joinRequest.fillRequired'), 'error');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      await organizationService.createJoinRequest(formData);\n      setErrors({});\n      showMessage(t('organization.join.sendSuccess'), 'success');\n      // Formular zurcksetzen\n      setFormData({\n        organizationName: '',\n        message: ''\n      });\n      setSelectedOrganization(null);\n      setOrganizations([]);\n      onClose();\n      if (onSuccess) {\n        onSuccess();\n      }\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('organization.join.sendError');\n      showMessage(errorMessage, 'error');\n      setErrors({ submit: errorMessage });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    // Formular zurcksetzen\n    setFormData({\n      organizationName: '',\n      message: ''\n    });\n    setSelectedOrganization(null);\n    setOrganizations([]);\n    setErrors({});\n    setShowDropdown(false);\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n    onClose();\n  };\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('organization.join.title')}\n              </Dialog.Title>\n              <button\n                onClick={handleClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-4\">\n              {errors.submit && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {errors.submit}\n                </div>\n              )}\n\n              <div className=\"space-y-4\">\n                <div className=\"relative\" ref={dropdownRef}>\n                  <label \n                    htmlFor=\"organizationName\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.join.search')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"organizationName\"\n                    name=\"organizationName\"\n                    value={formData.organizationName}\n                    onChange={handleOrganizationInputChange}\n                    placeholder={t('organization.join.searchPlaceholder')}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.organizationName \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  />\n                  {errors.organizationName && (\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.organizationName}</p>\n                  )}\n                  \n                  {/* Autocomplete Dropdown */}\n                  {showDropdown && (organizations.length > 0 || searching) && (\n                    <div className=\"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto\">\n                      {searching ? (\n                        <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\n                          {t('organization.join.searching')}\n                        </div>\n                      ) : organizations.length > 0 ? (\n                        organizations.map(org => (\n                          <button\n                            key={org.id}\n                            type=\"button\"\n                            onClick={() => handleSelectOrganization(org)}\n                            className=\"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 focus:bg-gray-100 dark:focus:bg-gray-700 focus:outline-none\"\n                          >\n                            <div className=\"font-medium text-gray-900 dark:text-white\">\n                              {org.displayName || org.name}\n                            </div>\n                            {org.displayName && (\n                              <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                                {org.name}\n                              </div>\n                            )}\n                          </button>\n                        ))\n                      ) : (\n                        <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\n                          {t('organization.join.noOrganizations')}\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"message\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.join.message')}\n                  </label>\n                  <textarea\n                    id=\"message\"\n                    name=\"message\"\n                    value={formData.message || ''}\n                    onChange={handleMessageChange}\n                    rows={3}\n                    placeholder={t('organization.join.messagePlaceholder')}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                  title={t('joinRequest.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title={loading ? t('organization.join.sending') : t('organization.join.send')}\n                >\n                  {loading ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={handleClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('organization.join.title')}\n          </h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {errors.submit && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {errors.submit}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"relative\" ref={dropdownRef}>\n              <label \n                htmlFor=\"organizationName\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.join.search')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"organizationName\"\n                name=\"organizationName\"\n                value={formData.organizationName}\n                onChange={handleOrganizationInputChange}\n                placeholder={t('organization.join.searchPlaceholder')}\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                  errors.organizationName \n                    ? 'border-red-300 dark:border-red-600' \n                    : 'border-gray-300 dark:border-gray-600'\n                }`}\n              />\n              {errors.organizationName && (\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.organizationName}</p>\n              )}\n              \n              {/* Autocomplete Dropdown */}\n              {showDropdown && (organizations.length > 0 || searching) && (\n                <div className=\"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto\">\n                  {searching ? (\n                    <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\n                      {t('organization.join.searching')}\n                    </div>\n                  ) : organizations.length > 0 ? (\n                    organizations.map(org => (\n                      <button\n                        key={org.id}\n                        type=\"button\"\n                        onClick={() => handleSelectOrganization(org)}\n                        className=\"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 focus:bg-gray-100 dark:focus:bg-gray-700 focus:outline-none\"\n                      >\n                        <div className=\"font-medium text-gray-900 dark:text-white\">\n                          {org.displayName || org.name}\n                        </div>\n                        {org.displayName && (\n                          <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                            {org.name}\n                          </div>\n                        )}\n                      </button>\n                    ))\n                  ) : (\n                    <div className=\"p-3 text-center text-gray-500 dark:text-gray-400\">\n                      {t('organization.join.noOrganizations')}\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"message\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.join.message')}\n              </label>\n              <textarea\n                id=\"message\"\n                name=\"message\"\n                value={formData.message || ''}\n                onChange={handleMessageChange}\n                rows={3}\n                placeholder={t('organization.join.messagePlaceholder')}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"flex justify-end pt-4 gap-2\">\n              <button\n                type=\"button\"\n                onClick={handleClose}\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                title={t('common.cancel')}\n              >\n                <XMarkIcon className=\"h-5 w-5\" />\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                title={loading ? t('organization.join.sending') : t('organization.join.send')}\n              >\n                {loading ? (\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                ) : (\n                  <CheckIcon className=\"h-5 w-5\" />\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default JoinOrganizationModal; ","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../../config/axios.ts';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport { roleApi } from '../../api/apiClient.ts';\nimport { Role } from '../../types/interfaces.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\n\ninterface Organization {\n  id: number;\n  displayName?: string;\n  name?: string;\n  settings?: any;\n}\n\ninterface RoleConfigurationTabProps {\n  organization: Organization | null;\n  onSave?: () => void;\n}\n\nconst RoleConfigurationTab: React.FC<RoleConfigurationTabProps> = ({\n  organization,\n  onSave\n}) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [lifecycleRoles, setLifecycleRoles] = useState<{\n    adminRoleId?: number | null;\n    hrRoleId?: number | null;\n    legalRoleId?: number | null;\n    employeeRoleIds?: number[];\n  }>({});\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [loadingRoles, setLoadingRoles] = useState(false);\n\n  useEffect(() => {\n    if (organization) {\n      loadRoles();\n      loadLifecycleRoles();\n    }\n  }, [organization]);\n\n  const loadRoles = async () => {\n    setLoadingRoles(true);\n    try {\n      const response = await roleApi.getAll();\n      if (response.data && Array.isArray(response.data)) {\n        setRoles(response.data);\n      }\n    } catch (error) {\n      console.error('Fehler beim Laden der Rollen:', error);\n      showMessage(\n        t('lifecycle.loadRolesError', { defaultValue: 'Fehler beim Laden der Rollen' }),\n        'error'\n      );\n    } finally {\n      setLoadingRoles(false);\n    }\n  };\n\n  const loadLifecycleRoles = async () => {\n    setLoading(true);\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.LIFECYCLE_ROLES);\n      setLifecycleRoles(response.data.lifecycleRoles || {});\n    } catch (error: any) {\n      console.error('Fehler beim Laden der Lebenszyklus-Rollen:', error);\n      // Wenn 404, dann gibt es noch keine Konfiguration - das ist OK\n      if (error.response?.status !== 404) {\n        showMessage(\n          error.response?.data?.message || t('lifecycle.loadLifecycleRolesError', { defaultValue: 'Fehler beim Laden der Konfiguration' }),\n          'error'\n        );\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      // Konvertiere zu Number oder null (verhindert, dass 0 oder undefined als String gesendet wird)\n      const prepareRoleId = (id: number | null | undefined): number | null => {\n        if (id === null || id === undefined || id === 0) {\n          return null;\n        }\n        return Number(id);\n      };\n\n      await axiosInstance.put(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.LIFECYCLE_ROLES, {\n        adminRoleId: prepareRoleId(lifecycleRoles.adminRoleId),\n        hrRoleId: prepareRoleId(lifecycleRoles.hrRoleId),\n        legalRoleId: prepareRoleId(lifecycleRoles.legalRoleId),\n        employeeRoleIds: (lifecycleRoles.employeeRoleIds || []).map(prepareRoleId).filter((id): id is number => id !== null)\n      });\n      showMessage(\n        t('lifecycle.rolesSaved', { defaultValue: 'Rollen-Konfiguration erfolgreich gespeichert' }),\n        'success'\n      );\n      if (onSave) {\n        onSave();\n      }\n    } catch (error: any) {\n      console.error('Fehler beim Speichern:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.saveError', { defaultValue: 'Fehler beim Speichern' }),\n        'error'\n      );\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleAssignStandardRoles = () => {\n    // Finde Standard-Rollen\n    const adminRole = roles.find(r => r.name.toLowerCase().includes('admin') || r.name.toLowerCase().includes('administrator'));\n    const hrRole = roles.find(r => r.name.toLowerCase().includes('hr') || r.name.toLowerCase().includes('human'));\n    const legalRole = roles.find(r => r.name.toLowerCase() === 'derecho' || r.name.toLowerCase().includes('legal'));\n\n    setLifecycleRoles({\n      ...lifecycleRoles,\n      adminRoleId: adminRole?.id || null,\n      hrRoleId: hrRole?.id || null,\n      legalRoleId: legalRole?.id || null\n    });\n\n    showMessage(\n      t('lifecycle.standardRolesAssigned', { defaultValue: 'Standard-Rollen zugewiesen' }),\n      'success'\n    );\n  };\n\n  if (loading && !lifecycleRoles) {\n    return (\n      <div className=\"flex items-center justify-center py-8\">\n        <ArrowPathIcon className=\"h-6 w-6 animate-spin text-gray-400\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold dark:text-white\">\n            {t('organization.lifecycleRoles.title', { defaultValue: 'Lebenszyklus-Rollen' })}\n          </h3>\n          <button\n            onClick={handleAssignStandardRoles}\n            className=\"px-3 py-1.5 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors\"\n          >\n            {t('lifecycle.assignStandardRoles', { defaultValue: 'Standard-Rollen zuweisen' })}\n          </button>\n        </div>\n        \n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              {t('organization.lifecycleRoles.admin', { defaultValue: 'Admin-Rolle' })}\n            </label>\n            <select\n              value={lifecycleRoles.adminRoleId || ''}\n              onChange={(e) => {\n                const value = e.target.value;\n                setLifecycleRoles({ \n                ...lifecycleRoles, \n                  adminRoleId: (value && value !== '' && !isNaN(parseInt(value, 10))) ? parseInt(value, 10) : null \n                });\n              }}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              disabled={loadingRoles}\n            >\n              <option value=\"\">{t('common.pleaseSelect')}</option>\n              {roles.map(role => (\n                <option key={role.id} value={role.id}>\n                  {role.name}\n                </option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              {t('organization.lifecycleRoles.hr', { defaultValue: 'HR-Rolle' })}\n            </label>\n            <select\n              value={lifecycleRoles.hrRoleId || ''}\n              onChange={(e) => {\n                const value = e.target.value;\n                setLifecycleRoles({ \n                ...lifecycleRoles, \n                  hrRoleId: (value && value !== '' && !isNaN(parseInt(value, 10))) ? parseInt(value, 10) : null \n                });\n              }}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              disabled={loadingRoles}\n            >\n              <option value=\"\">{t('common.pleaseSelect')}</option>\n              {roles.map(role => (\n                <option key={role.id} value={role.id}>\n                  {role.name}\n                </option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n              {t('organization.lifecycleRoles.legal', { defaultValue: 'Legal-Rolle' })}\n            </label>\n            <select\n              value={lifecycleRoles.legalRoleId || ''}\n              onChange={(e) => {\n                const value = e.target.value;\n                setLifecycleRoles({ \n                ...lifecycleRoles, \n                  legalRoleId: (value && value !== '' && !isNaN(parseInt(value, 10))) ? parseInt(value, 10) : null \n                });\n              }}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n              disabled={loadingRoles}\n            >\n              <option value=\"\">{t('common.pleaseSelect')}</option>\n              {roles.map(role => (\n                <option key={role.id} value={role.id}>\n                  {role.name}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n        \n        <div className=\"mt-6 flex justify-end\">\n          <button\n            onClick={handleSave}\n            disabled={saving || loadingRoles}\n            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            title={saving ? t('common.saving', { defaultValue: 'Speichere...' }) : t('common.save', { defaultValue: 'Speichern' })}\n          >\n            {saving ? (\n              <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n            ) : (\n              <CheckIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default RoleConfigurationTab;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { DocumentTextIcon, ArrowPathIcon, CheckIcon, PlusIcon, TrashIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../../config/axios.ts';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { organizationService } from '../../services/organizationService.ts';\n\ninterface Organization {\n  id: number;\n  displayName?: string;\n  name?: string;\n  settings?: any;\n}\n\ninterface DocumentConfigurationTabProps {\n  organization: Organization | null;\n  onSave?: () => void;\n}\n\ninterface DocumentTemplate {\n  id?: number;\n  name: string;\n  type: 'certificate' | 'contract';\n  filePath?: string;\n  version?: string;\n}\n\nconst DocumentConfigurationTab: React.FC<DocumentConfigurationTabProps> = ({\n  organization,\n  onSave\n}) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [templates, setTemplates] = useState<DocumentTemplate[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [templateType, setTemplateType] = useState<'certificate' | 'contract'>('certificate');\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (organization) {\n      loadTemplates();\n    }\n  }, [organization]);\n\n  const loadTemplates = async () => {\n    setLoading(true);\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.DOCUMENT_TEMPLATES);\n      const documentTemplates = response.data.documentTemplates || {};\n      \n      // Konvertiere zu Template-Array\n      const templatesList: DocumentTemplate[] = [];\n      if (documentTemplates.employmentCertificate) {\n        templatesList.push({\n          name: 'Arbeitszeugnis',\n          type: 'certificate',\n          filePath: documentTemplates.employmentCertificate.path,\n          version: documentTemplates.employmentCertificate.version\n        });\n      }\n      if (documentTemplates.employmentContract) {\n        templatesList.push({\n          name: 'Arbeitsvertrag',\n          type: 'contract',\n          filePath: documentTemplates.employmentContract.path,\n          version: documentTemplates.employmentContract.version\n        });\n      }\n      \n      setTemplates(templatesList);\n    } catch (error: any) {\n      console.error('Fehler beim Laden der Templates:', error);\n      if (error.response?.status !== 404) {\n        showMessage(\n          error.response?.data?.message || t('lifecycle.loadTemplatesError', { defaultValue: 'Fehler beim Laden der Templates' }),\n          'error'\n        );\n      }\n      setTemplates([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    // Prfe Dateityp\n    if (file.type !== 'application/pdf') {\n      showMessage(\n        t('lifecycle.onlyPdfAllowed', { defaultValue: 'Nur PDF-Dateien sind erlaubt' }),\n        'error'\n      );\n      return;\n    }\n\n    setUploading(true);\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('type', templateType === 'certificate' ? 'employmentCertificate' : 'employmentContract');\n\n      const response = await axiosInstance.post(\n        API_ENDPOINTS.ORGANIZATION_LIFECYCLE.UPLOAD_TEMPLATE,\n        formData,\n        {\n          headers: { 'Content-Type': 'multipart/form-data' }\n        }\n      );\n      \n      showMessage(\n        response.data.message || t('lifecycle.templateUploaded', { defaultValue: 'Template erfolgreich hochgeladen' }),\n        'success'\n      );\n      \n      // Lade Templates neu\n      loadTemplates();\n    } catch (error: any) {\n      console.error('Fehler beim Hochladen:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.uploadError', { defaultValue: 'Fehler beim Hochladen' }),\n        'error'\n      );\n    } finally {\n      setUploading(false);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    }\n  };\n\n  const handleDeleteTemplate = async (templateType: 'certificate' | 'contract') => {\n    if (!window.confirm(t('lifecycle.deleteTemplateConfirm', { defaultValue: 'Template wirklich lschen?' }))) {\n      return;\n    }\n\n    try {\n      // Hole aktuelle Organisation\n      const orgResponse = await axiosInstance.get(API_ENDPOINTS.ORGANIZATIONS.CURRENT);\n      const settings = orgResponse.data.settings || {};\n      \n      // Entferne Template\n      if (settings.documentTemplates) {\n        const typeKey = templateType === 'certificate' ? 'employmentCertificate' : 'employmentContract';\n        delete settings.documentTemplates[typeKey];\n        \n        // Aktualisiere Organisation\n        await axiosInstance.put(API_ENDPOINTS.ORGANIZATIONS.CURRENT, {\n          settings\n        });\n      }\n      \n      showMessage(\n        t('lifecycle.templateDeleted', { defaultValue: 'Template erfolgreich gelscht' }),\n        'success'\n      );\n      \n      // Lade Templates neu\n      loadTemplates();\n    } catch (error: any) {\n      console.error('Fehler beim Lschen:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.deleteError', { defaultValue: 'Fehler beim Lschen' }),\n        'error'\n      );\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-8\">\n        <ArrowPathIcon className=\"h-6 w-6 animate-spin text-gray-400\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold flex items-center dark:text-white\">\n            <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n            {t('organization.documentTemplates', { defaultValue: 'Dokumenten-Templates' })}\n          </h3>\n          <div className=\"flex items-center space-x-2\">\n            <select\n              value={templateType}\n              onChange={(e) => setTemplateType(e.target.value as 'certificate' | 'contract')}\n              className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n            >\n              <option value=\"certificate\">Arbeitszeugnis</option>\n              <option value=\"contract\">Arbeitsvertrag</option>\n            </select>\n            <button\n              onClick={() => fileInputRef.current?.click()}\n              disabled={uploading}\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              title={uploading ? t('common.uploading', { defaultValue: 'Lade hoch...' }) : t('lifecycle.uploadTemplate', { defaultValue: 'Template hochladen' })}\n            >\n              {uploading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <PlusIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n          </div>\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            accept=\".pdf\"\n            onChange={handleFileUpload}\n            className=\"hidden\"\n          />\n        </div>\n        \n        {templates.length === 0 ? (\n          <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n            <DocumentTextIcon className=\"h-12 w-12 mx-auto mb-4 text-gray-400\" />\n            <p>{t('lifecycle.noTemplates', { defaultValue: 'Keine Templates vorhanden' })}</p>\n            <p className=\"text-sm mt-2\">{t('lifecycle.uploadFirstTemplate', { defaultValue: 'Laden Sie Ihr erstes Template hoch' })}</p>\n          </div>\n        ) : (\n          <div className=\"space-y-2\">\n            {templates.map((template) => (\n              <div\n                key={template.type}\n                className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\"\n              >\n                <div>\n                  <div className=\"font-medium dark:text-white\">{template.name}</div>\n                  <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                    {template.type === 'certificate' \n                      ? t('lifecycle.certificate', { defaultValue: 'Arbeitszeugnis' })\n                      : t('lifecycle.contract', { defaultValue: 'Arbeitsvertrag' })}\n                    {template.version && ` - Version ${template.version}`}\n                  </div>\n                  {template.filePath && (\n                    <div className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">\n                      {template.filePath}\n                    </div>\n                  )}\n                </div>\n                <button\n                  onClick={() => handleDeleteTemplate(template.type)}\n                  className=\"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 rounded-md\"\n                  title={t('common.delete', { defaultValue: 'Lschen' })}\n                >\n                  <TrashIcon className=\"h-5 w-5\" />\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n      \n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold flex items-center dark:text-white\">\n            <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n            {t('organization.documentSignatures', { defaultValue: 'Dokumenten-Signaturen' })}\n          </h3>\n        </div>\n        \n        <SignatureUploadSection \n          organization={organization}\n          onUpload={loadTemplates}\n        />\n      </div>\n      \n      <FieldPositionConfiguration \n        organization={organization}\n        onSave={onSave}\n      />\n    </div>\n  );\n};\n\ninterface SignatureUploadSectionProps {\n  organization: Organization | null;\n  onUpload: () => void;\n}\n\nconst SignatureUploadSection: React.FC<SignatureUploadSectionProps> = ({\n  organization,\n  onUpload\n}) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [signatures, setSignatures] = useState<Array<{\n    type: 'certificate' | 'contract';\n    signerName: string;\n    signerPosition?: string;\n    path: string;\n    position?: {\n      x: number;\n      y: number;\n      page: number;\n    };\n  }>>([]);\n  const [loading, setLoading] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const [signatureType, setSignatureType] = useState<'certificate' | 'contract'>('certificate');\n  const [signerName, setSignerName] = useState('');\n  const [signerPosition, setSignerPosition] = useState('');\n  const [positionX, setPositionX] = useState<string>('400');\n  const [positionY, setPositionY] = useState<string>('100');\n  const [positionPage, setPositionPage] = useState<string>('1');\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (organization) {\n      loadSignatures();\n    }\n  }, [organization]);\n\n  const loadSignatures = async () => {\n    setLoading(true);\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.ORGANIZATION_LIFECYCLE.DOCUMENT_SIGNATURES);\n      const documentSignatures = response.data.documentSignatures || {};\n      \n      const signaturesList: Array<{\n        type: 'certificate' | 'contract';\n        signerName: string;\n        signerPosition?: string;\n        path: string;\n        position?: {\n          x: number;\n          y: number;\n          page: number;\n        };\n      }> = [];\n      \n      if (documentSignatures.employmentCertificate) {\n        signaturesList.push({\n          type: 'certificate',\n          signerName: documentSignatures.employmentCertificate.signerName,\n          signerPosition: documentSignatures.employmentCertificate.signerPosition,\n          path: documentSignatures.employmentCertificate.path,\n          position: documentSignatures.employmentCertificate.position\n        });\n      }\n      if (documentSignatures.employmentContract) {\n        signaturesList.push({\n          type: 'contract',\n          signerName: documentSignatures.employmentContract.signerName,\n          signerPosition: documentSignatures.employmentContract.signerPosition,\n          path: documentSignatures.employmentContract.path,\n          position: documentSignatures.employmentContract.position\n        });\n      }\n      \n      setSignatures(signaturesList);\n    } catch (error: any) {\n      console.error('Fehler beim Laden der Signaturen:', error);\n      if (error.response?.status !== 404) {\n        showMessage(\n          error.response?.data?.message || t('lifecycle.loadSignaturesError', { defaultValue: 'Fehler beim Laden der Signaturen' }),\n          'error'\n        );\n      }\n      setSignatures([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    // Prfe Dateityp\n    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'application/pdf'];\n    if (!allowedTypes.includes(file.type)) {\n      showMessage(\n        t('lifecycle.onlyImageOrPdfAllowed', { defaultValue: 'Nur Bilder (JPEG, PNG, GIF) oder PDF-Dateien sind erlaubt' }),\n        'error'\n      );\n      return;\n    }\n\n    if (!signerName.trim()) {\n      showMessage(\n        t('lifecycle.signerNameRequired', { defaultValue: 'Name des Unterzeichners ist erforderlich' }),\n        'error'\n      );\n      return;\n    }\n\n    setUploading(true);\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('type', signatureType === 'certificate' ? 'employmentCertificate' : 'employmentContract');\n      formData.append('signerName', signerName);\n      if (signerPosition) {\n        formData.append('signerPosition', signerPosition);\n      }\n      // Positionen hinzufgen\n      formData.append('positionX', positionX || '400');\n      formData.append('positionY', positionY || '100');\n      formData.append('page', positionPage || '1');\n\n      const response = await axiosInstance.post(\n        API_ENDPOINTS.ORGANIZATION_LIFECYCLE.UPLOAD_SIGNATURE,\n        formData,\n        {\n          headers: { 'Content-Type': 'multipart/form-data' }\n        }\n      );\n      \n      showMessage(\n        response.data.message || t('lifecycle.signatureUploaded', { defaultValue: 'Signatur erfolgreich hochgeladen' }),\n        'success'\n      );\n      \n      // Reset form\n      setSignerName('');\n      setSignerPosition('');\n      setPositionX('400');\n      setPositionY('100');\n      setPositionPage('1');\n      \n      // Lade Signaturen neu\n      loadSignatures();\n      onUpload();\n    } catch (error: any) {\n      console.error('Fehler beim Hochladen:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.uploadError', { defaultValue: 'Fehler beim Hochladen' }),\n        'error'\n      );\n    } finally {\n      setUploading(false);\n      if (fileInputRef.current) {\n        fileInputRef.current.value = '';\n      }\n    }\n  };\n\n  const handleDeleteSignature = async (signatureType: 'certificate' | 'contract') => {\n    if (!window.confirm(t('lifecycle.deleteSignatureConfirm', { defaultValue: 'Signatur wirklich lschen?' }))) {\n      return;\n    }\n\n    try {\n      const orgResponse = await axiosInstance.get(API_ENDPOINTS.ORGANIZATIONS.CURRENT);\n      const settings = orgResponse.data.settings || {};\n      \n      if (settings.documentSignatures) {\n        const typeKey = signatureType === 'certificate' ? 'employmentCertificate' : 'employmentContract';\n        delete settings.documentSignatures[typeKey];\n        \n        await axiosInstance.put(API_ENDPOINTS.ORGANIZATIONS.CURRENT, {\n          settings\n        });\n      }\n      \n      showMessage(\n        t('lifecycle.signatureDeleted', { defaultValue: 'Signatur erfolgreich gelscht' }),\n        'success'\n      );\n      \n      loadSignatures();\n    } catch (error: any) {\n      console.error('Fehler beim Lschen:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.deleteError', { defaultValue: 'Fehler beim Lschen' }),\n        'error'\n      );\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-4\">\n        <ArrowPathIcon className=\"h-5 w-5 animate-spin text-gray-400\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"border border-gray-300 dark:border-gray-600 rounded-lg p-4\">\n        <div className=\"space-y-3\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              {t('lifecycle.signatureType', { defaultValue: 'Signatur-Typ' })}\n            </label>\n            <select\n              value={signatureType}\n              onChange={(e) => setSignatureType(e.target.value as 'certificate' | 'contract')}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n            >\n              <option value=\"certificate\">{t('lifecycle.certificate', { defaultValue: 'Arbeitszeugnis' })}</option>\n              <option value=\"contract\">{t('lifecycle.contract', { defaultValue: 'Arbeitsvertrag' })}</option>\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              {t('lifecycle.signerName', { defaultValue: 'Name des Unterzeichners' })} <span className=\"text-red-500\">*</span>\n            </label>\n            <input\n              type=\"text\"\n              value={signerName}\n              onChange={(e) => setSignerName(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n              placeholder={t('lifecycle.signerNamePlaceholder', { defaultValue: 'z.B. Stefan Bossart' })}\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              {t('lifecycle.signerPosition', { defaultValue: 'Position' })}\n            </label>\n            <input\n              type=\"text\"\n              value={signerPosition}\n              onChange={(e) => setSignerPosition(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n              placeholder={t('lifecycle.signerPositionPlaceholder', { defaultValue: 'z.B. Geschftsfhrer' })}\n            />\n          </div>\n          \n          <div className=\"border-t border-gray-200 dark:border-gray-700 pt-3\">\n            <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\n              {t('lifecycle.signaturePosition', { defaultValue: 'Signatur-Position im PDF' })}\n            </h4>\n            <div className=\"grid grid-cols-3 gap-3\">\n              <div>\n                <label className=\"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1\">\n                  {t('lifecycle.positionX', { defaultValue: 'X (horizontal)' })}\n                </label>\n                <input\n                  type=\"number\"\n                  value={positionX}\n                  onChange={(e) => setPositionX(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                  placeholder=\"400\"\n                  min=\"0\"\n                />\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                  {t('lifecycle.positionXHint', { defaultValue: '0 = links' })}\n                </p>\n              </div>\n              <div>\n                <label className=\"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1\">\n                  {t('lifecycle.positionY', { defaultValue: 'Y (vertikal)' })}\n                </label>\n                <input\n                  type=\"number\"\n                  value={positionY}\n                  onChange={(e) => setPositionY(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                  placeholder=\"100\"\n                  min=\"0\"\n                />\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                  {t('lifecycle.positionYHint', { defaultValue: '0 = unten' })}\n                </p>\n              </div>\n              <div>\n                <label className=\"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1\">\n                  {t('lifecycle.positionPage', { defaultValue: 'Seite' })}\n                </label>\n                <input\n                  type=\"number\"\n                  value={positionPage}\n                  onChange={(e) => setPositionPage(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                  placeholder=\"1\"\n                  min=\"1\"\n                />\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                  {t('lifecycle.positionPageHint', { defaultValue: 'Seitennummer' })}\n                </p>\n              </div>\n            </div>\n            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n              {t('lifecycle.signaturePositionHint', { defaultValue: 'Koordinaten in PDF-Punkten (1 Punkt = 1/72 Zoll). A4: 595 x 842 Punkte. Standard: X=400, Y=100, Seite=1' })}\n            </p>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n              {t('lifecycle.signatureFile', { defaultValue: 'Signatur-Datei' })} <span className=\"text-red-500\">*</span>\n            </label>\n            <div className=\"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center\">\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\"image/jpeg,image/png,image/gif,application/pdf\"\n                onChange={handleFileUpload}\n                className=\"hidden\"\n              />\n              <button\n                onClick={() => fileInputRef.current?.click()}\n                disabled={uploading || !signerName.trim()}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {uploading ? (\n                  <span className=\"flex items-center space-x-2\">\n                    <ArrowPathIcon className=\"h-4 w-4 animate-spin\" />\n                    <span>{t('common.uploading', { defaultValue: 'Lade hoch...' })}</span>\n                  </span>\n                ) : (\n                  t('lifecycle.selectSignatureFile', { defaultValue: 'Datei auswhlen' })\n                )}\n              </button>\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2\">\n                {t('lifecycle.signatureFileHint', { defaultValue: 'JPEG, PNG, GIF oder PDF (max. 5MB)' })}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      {signatures.length > 0 && (\n        <div className=\"space-y-2\">\n          <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n            {t('lifecycle.uploadedSignatures', { defaultValue: 'Hochgeladene Signaturen' })}\n          </h4>\n          {signatures.map((signature) => (\n            <div\n              key={signature.type}\n              className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg\"\n            >\n              <div>\n                <div className=\"font-medium dark:text-white\">\n                  {signature.type === 'certificate' \n                    ? t('lifecycle.certificate', { defaultValue: 'Arbeitszeugnis' })\n                    : t('lifecycle.contract', { defaultValue: 'Arbeitsvertrag' })}\n                </div>\n                <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                  {signature.signerName}\n                  {signature.signerPosition && ` - ${signature.signerPosition}`}\n                </div>\n                {signature.position && (\n                  <div className=\"text-xs text-gray-400 dark:text-gray-500 mt-1\">\n                    {t('lifecycle.position', { defaultValue: 'Position' })}: X={signature.position.x}, Y={signature.position.y}, {t('lifecycle.page', { defaultValue: 'Seite' })} {signature.position.page}\n                  </div>\n                )}\n              </div>\n              <button\n                onClick={() => handleDeleteSignature(signature.type)}\n                className=\"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 rounded-md\"\n                title={t('common.delete', { defaultValue: 'Lschen' })}\n              >\n                <TrashIcon className=\"h-5 w-5\" />\n              </button>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\ninterface FieldPositionConfigurationProps {\n  organization: Organization | null;\n  onSave?: () => void;\n}\n\nconst FieldPositionConfiguration: React.FC<FieldPositionConfigurationProps> = ({\n  organization,\n  onSave\n}) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [templateType, setTemplateType] = useState<'certificate' | 'contract'>('certificate');\n  const [fields, setFields] = useState<Record<string, { x: number; y: number; fontSize?: number }>>({});\n  const [loading, setLoading] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  // Standard-Felder fr Certificate und Contract\n  const certificateFields = ['userName', 'organizationName', 'currentDate', 'identificationNumber', 'startDate', 'endDate'];\n  const contractFields = ['userName', 'organizationName', 'currentDate', 'identificationNumber', 'startDate', 'endDate', 'position', 'salary', 'workingHours'];\n\n  useEffect(() => {\n    if (organization) {\n      loadFields();\n    }\n  }, [organization, templateType]);\n\n  const loadFields = async () => {\n    try {\n      const settings = organization?.settings as any;\n      const templateSettings = settings?.documentTemplates?.[templateType === 'certificate' ? 'employmentCertificate' : 'employmentContract'];\n      const savedFields = templateSettings?.fields || {};\n      \n      // Standard-Positionen (A4: 595.28 x 841.89 Punkte)\n      // Y-Koordinate: 0 ist unten, 841.89 ist oben (PDF-Koordinatensystem)\n      const pageHeight = 841.89;\n      const margin = 50;\n      const lineHeight = 20;\n      let currentY = pageHeight - margin - 30;\n      \n      // Lade gespeicherte Felder oder verwende Standard-Werte (synchronisiert mit Backend)\n      const defaultFields: Record<string, { x: number; y: number; fontSize?: number }> = {};\n      const fieldList = templateType === 'certificate' ? certificateFields : contractFields;\n      \n      // Standard-Positionen (wie im Backend getDefaultFieldPositions)\n      const defaultPositions: Record<string, { x: number; y: number; fontSize?: number }> = {\n        userName: { x: margin, y: currentY, fontSize: 14 },\n        organizationName: { x: margin, y: currentY - lineHeight, fontSize: 12 },\n        currentDate: { x: margin, y: currentY - lineHeight * 2, fontSize: 12 },\n        identificationNumber: { x: margin, y: currentY - lineHeight * 3, fontSize: 12 },\n        startDate: { x: margin, y: currentY - lineHeight * 4, fontSize: 12 },\n        endDate: { x: margin, y: currentY - lineHeight * 5, fontSize: 12 }\n      };\n      \n      if (templateType === 'contract') {\n        defaultPositions.position = { x: margin, y: currentY - lineHeight * 6, fontSize: 12 };\n        defaultPositions.salary = { x: margin, y: currentY - lineHeight * 7, fontSize: 12 };\n        defaultPositions.workingHours = { x: margin, y: currentY - lineHeight * 8, fontSize: 12 };\n      }\n      \n      fieldList.forEach((fieldName) => {\n        defaultFields[fieldName] = savedFields[fieldName] || defaultPositions[fieldName] || {\n          x: margin,\n          y: currentY,\n          fontSize: fieldName === 'userName' ? 14 : 12\n        };\n      });\n      \n      setFields(defaultFields);\n    } catch (error) {\n      console.error('Fehler beim Laden der Felder:', error);\n    }\n  };\n\n  const handleFieldChange = (fieldName: string, property: 'x' | 'y' | 'fontSize', value: string) => {\n    setFields(prev => ({\n      ...prev,\n      [fieldName]: {\n        ...prev[fieldName],\n        [property]: property === 'fontSize' ? parseFloat(value) || 12 : parseFloat(value) || 0\n      }\n    }));\n  };\n\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      const orgResponse = await axiosInstance.get(API_ENDPOINTS.ORGANIZATIONS.CURRENT);\n      const currentSettings = orgResponse.data.settings || {};\n      \n      if (!currentSettings.documentTemplates) {\n        currentSettings.documentTemplates = {};\n      }\n      \n      const typeKey = templateType === 'certificate' ? 'employmentCertificate' : 'employmentContract';\n      if (!currentSettings.documentTemplates[typeKey]) {\n        currentSettings.documentTemplates[typeKey] = {};\n      }\n      \n      currentSettings.documentTemplates[typeKey].fields = fields;\n      \n      await organizationService.updateOrganization({\n        settings: currentSettings\n      });\n      \n      showMessage(\n        t('lifecycle.fieldPositionsSaved', { defaultValue: 'Feld-Positionen erfolgreich gespeichert' }),\n        'success'\n      );\n      \n      if (onSave) {\n        onSave();\n      }\n    } catch (error: any) {\n      console.error('Fehler beim Speichern:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.saveError', { defaultValue: 'Fehler beim Speichern' }),\n        'error'\n      );\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleReset = async () => {\n    if (window.confirm(t('lifecycle.resetFieldPositionsConfirm', { defaultValue: 'Positionen auf Standardwerte zurcksetzen?' }))) {\n      // Setze Felder auf Standard-Werte zurck\n      const pageHeight = 841.89;\n      const margin = 50;\n      const lineHeight = 20;\n      let currentY = pageHeight - margin - 30;\n      \n      const defaultPositions: Record<string, { x: number; y: number; fontSize?: number }> = {\n        userName: { x: margin, y: currentY, fontSize: 14 },\n        organizationName: { x: margin, y: currentY - lineHeight, fontSize: 12 },\n        currentDate: { x: margin, y: currentY - lineHeight * 2, fontSize: 12 },\n        identificationNumber: { x: margin, y: currentY - lineHeight * 3, fontSize: 12 },\n        startDate: { x: margin, y: currentY - lineHeight * 4, fontSize: 12 },\n        endDate: { x: margin, y: currentY - lineHeight * 5, fontSize: 12 }\n      };\n      \n      if (templateType === 'contract') {\n        defaultPositions.position = { x: margin, y: currentY - lineHeight * 6, fontSize: 12 };\n        defaultPositions.salary = { x: margin, y: currentY - lineHeight * 7, fontSize: 12 };\n        defaultPositions.workingHours = { x: margin, y: currentY - lineHeight * 8, fontSize: 12 };\n      }\n      \n      const fieldList = templateType === 'certificate' ? certificateFields : contractFields;\n      const resetFields: Record<string, { x: number; y: number; fontSize?: number }> = {};\n      \n      fieldList.forEach((fieldName) => {\n        resetFields[fieldName] = defaultPositions[fieldName] || {\n          x: margin,\n          y: currentY,\n          fontSize: fieldName === 'userName' ? 14 : 12\n        };\n      });\n      \n      setFields(resetFields);\n    }\n  };\n\n  const fieldList = templateType === 'certificate' ? certificateFields : contractFields;\n  const fieldLabels: Record<string, string> = {\n    userName: t('lifecycle.fieldUserName', { defaultValue: 'Benutzername' }),\n    organizationName: t('lifecycle.fieldOrganizationName', { defaultValue: 'Organisationsname' }),\n    currentDate: t('lifecycle.fieldCurrentDate', { defaultValue: 'Aktuelles Datum' }),\n    identificationNumber: t('lifecycle.fieldIdentificationNumber', { defaultValue: 'Ausweisnummer' }),\n    startDate: t('lifecycle.fieldStartDate', { defaultValue: 'Startdatum' }),\n    endDate: t('lifecycle.fieldEndDate', { defaultValue: 'Enddatum' }),\n    position: t('lifecycle.fieldPosition', { defaultValue: 'Position' }),\n    salary: t('lifecycle.fieldSalary', { defaultValue: 'Gehalt' }),\n    workingHours: t('lifecycle.fieldWorkingHours', { defaultValue: 'Arbeitsstunden' })\n  };\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-lg font-semibold dark:text-white\">\n          {t('organization.fieldPositions', { defaultValue: 'Feld-Positionen konfigurieren' })}\n        </h3>\n        <div className=\"flex items-center space-x-2\">\n          <select\n            value={templateType}\n            onChange={(e) => setTemplateType(e.target.value as 'certificate' | 'contract')}\n            className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n          >\n            <option value=\"certificate\">{t('lifecycle.certificate', { defaultValue: 'Certificado Laboral' })}</option>\n            <option value=\"contract\">{t('lifecycle.contract', { defaultValue: 'Contrato de Trabajo' })}</option>\n          </select>\n        </div>\n      </div>\n      \n      <div className=\"space-y-4\">\n        <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3\">\n          <p className=\"text-sm text-blue-800 dark:text-blue-200 font-medium mb-1\">\n            {t('lifecycle.fieldPositionsInfo', { defaultValue: 'Konfigurieren Sie die Positionen der Felder im Template-PDF.' })}\n          </p>\n          <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n            {t('lifecycle.fieldPositionsHint', { defaultValue: 'Koordinaten in PDF-Punkten. A4: 595 x 842 Punkte. Y=0 ist unten, Y=842 ist oben. X=0 ist links, X=595 ist rechts.' })}\n          </p>\n        </div>\n        \n        <div className=\"space-y-3 max-h-96 overflow-y-auto\">\n          {fieldList.map((fieldName) => (\n            <div key={fieldName} className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-3\">\n              <div className=\"font-medium text-sm dark:text-white mb-2\">\n                {fieldLabels[fieldName] || fieldName}\n              </div>\n              <div className=\"grid grid-cols-3 gap-2\">\n                <div>\n                  <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\n                    X\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={fields[fieldName]?.x || 0}\n                    onChange={(e) => handleFieldChange(fieldName, 'x', e.target.value)}\n                    className=\"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                    min=\"0\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\n                    Y\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={fields[fieldName]?.y || 0}\n                    onChange={(e) => handleFieldChange(fieldName, 'y', e.target.value)}\n                    className=\"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                    min=\"0\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-xs text-gray-600 dark:text-gray-400 mb-1\">\n                    {t('lifecycle.fontSize', { defaultValue: 'Schriftgre' })}\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={fields[fieldName]?.fontSize || 12}\n                    onChange={(e) => handleFieldChange(fieldName, 'fontSize', e.target.value)}\n                    className=\"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white text-sm\"\n                    min=\"8\"\n                    max=\"72\"\n                  />\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n        \n        <div className=\"flex items-center justify-end space-x-2 pt-2 border-t border-gray-200 dark:border-gray-700\">\n          <button\n            onClick={handleReset}\n            className=\"p-2 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 dark:text-white\"\n            title={t('common.reset', { defaultValue: 'Zurcksetzen' })}\n          >\n            <ArrowPathIcon className=\"h-5 w-5\" />\n          </button>\n          <button\n            onClick={handleSave}\n            disabled={saving}\n            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-blue-700 dark:hover:bg-blue-800\"\n            title={saving ? t('common.saving', { defaultValue: 'Speichern...' }) : t('common.save', { defaultValue: 'Speichern' })}\n          >\n            {saving ? (\n              <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n            ) : (\n              <CheckIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DocumentConfigurationTab;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { EnvelopeIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { Organization } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\n\ninterface Props {\n  organization: Organization | null;\n  onSave?: () => void;\n}\n\nconst SMTPConfigurationTab: React.FC<Props> = ({ organization, onSave }) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [loading, setLoading] = useState(false);\n  const [smtpSettings, setSmtpSettings] = useState({\n    smtpHost: '',\n    smtpPort: '587',\n    smtpUser: '',\n    smtpPass: '',\n    smtpFromEmail: '',\n    smtpFromName: ''\n  });\n  const [showPassword, setShowPassword] = useState(false);\n\n  useEffect(() => {\n    if (organization?.settings) {\n      const settings = organization.settings as any;\n      setSmtpSettings({\n        smtpHost: settings.smtpHost || '',\n        smtpPort: settings.smtpPort?.toString() || '587',\n        smtpUser: settings.smtpUser || '',\n        smtpPass: settings.smtpPass || '',\n        smtpFromEmail: settings.smtpFromEmail || (organization?.domain ? `noreply@${organization.domain}` : ''),\n        smtpFromName: settings.smtpFromName || organization?.displayName || ''\n      });\n    }\n  }, [organization]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setSmtpSettings(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!smtpSettings.smtpHost || !smtpSettings.smtpUser || !smtpSettings.smtpPass) {\n      showMessage(t('organization.smtp.requiredFields'), 'error');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      \n      const settings = {\n        ...(organization?.settings || {}),\n        smtpHost: smtpSettings.smtpHost,\n        smtpPort: parseInt(smtpSettings.smtpPort) || 587,\n        smtpUser: smtpSettings.smtpUser,\n        smtpPass: smtpSettings.smtpPass,\n        smtpFromEmail: smtpSettings.smtpFromEmail,\n        smtpFromName: smtpSettings.smtpFromName\n      };\n\n      await organizationService.updateOrganization({\n        settings: settings\n      });\n      \n      showMessage(t('organization.smtp.saveSuccess'), 'success');\n      if (onSave) {\n        onSave();\n      }\n    } catch (error: any) {\n      const errorMessage = error.response?.data?.message || t('organization.smtp.saveError');\n      showMessage(errorMessage, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClear = () => {\n    setSmtpSettings({\n      smtpHost: '',\n      smtpPort: '587',\n      smtpUser: '',\n      smtpPass: '',\n      smtpFromEmail: organization?.domain ? `noreply@${organization.domain}` : '',\n      smtpFromName: organization?.displayName || ''\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-2 mb-4\">\n        <EnvelopeIcon className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n          {t('organization.smtp.title')}\n        </h3>\n      </div>\n\n      <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">\n        {t('organization.smtp.description')}\n      </p>\n\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div>\n          <label htmlFor=\"smtpHost\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n            {t('organization.smtp.host')} <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"text\"\n            id=\"smtpHost\"\n            name=\"smtpHost\"\n            value={smtpSettings.smtpHost}\n            onChange={handleChange}\n            placeholder=\"smtp.example.com\"\n            required\n            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n          />\n          <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n            {t('organization.smtp.hostHint')}\n          </p>\n        </div>\n\n        <div>\n          <label htmlFor=\"smtpPort\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n            {t('organization.smtp.port')} <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"number\"\n            id=\"smtpPort\"\n            name=\"smtpPort\"\n            value={smtpSettings.smtpPort}\n            onChange={handleChange}\n            placeholder=\"587\"\n            required\n            min=\"1\"\n            max=\"65535\"\n            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n          />\n          <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n            {t('organization.smtp.portHint')}\n          </p>\n        </div>\n\n        <div>\n          <label htmlFor=\"smtpUser\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n            {t('organization.smtp.user')} <span className=\"text-red-500\">*</span>\n          </label>\n          <input\n            type=\"text\"\n            id=\"smtpUser\"\n            name=\"smtpUser\"\n            value={smtpSettings.smtpUser}\n            onChange={handleChange}\n            placeholder=\"noreply@example.com\"\n            required\n            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n          />\n          <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n            {t('organization.smtp.userHint')}\n          </p>\n        </div>\n\n        <div>\n          <label htmlFor=\"smtpPass\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n            {t('organization.smtp.password')} <span className=\"text-red-500\">*</span>\n          </label>\n          <div className=\"relative\">\n            <input\n              type={showPassword ? 'text' : 'password'}\n              id=\"smtpPass\"\n              name=\"smtpPass\"\n              value={smtpSettings.smtpPass}\n              onChange={handleChange}\n              placeholder=\"\"\n              required\n              className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n            />\n            <button\n              type=\"button\"\n              onClick={() => setShowPassword(!showPassword)}\n              className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n            >\n              {showPassword ? (\n                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n                </svg>\n              ) : (\n                <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                </svg>\n              )}\n            </button>\n          </div>\n          <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n            {t('organization.smtp.passwordHint')}\n          </p>\n        </div>\n\n        <div className=\"border-t pt-4\">\n          <h4 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3\">\n            {t('organization.smtp.fromSettings')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"smtpFromEmail\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.smtp.fromEmail')}\n              </label>\n              <input\n                type=\"email\"\n                id=\"smtpFromEmail\"\n                name=\"smtpFromEmail\"\n                value={smtpSettings.smtpFromEmail}\n                onChange={handleChange}\n                placeholder=\"noreply@example.com\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                {t('organization.smtp.fromEmailHint')}\n              </p>\n            </div>\n\n            <div>\n              <label htmlFor=\"smtpFromName\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.smtp.fromName')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"smtpFromName\"\n                name=\"smtpFromName\"\n                value={smtpSettings.smtpFromName}\n                onChange={handleChange}\n                placeholder={organization?.displayName || 'Intranet'}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                {t('organization.smtp.fromNameHint')}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md p-4\">\n          <p className=\"text-sm text-blue-800 dark:text-blue-200\">\n            <strong>{t('organization.smtp.infoTitle')}</strong>\n          </p>\n          <ul className=\"mt-2 text-sm text-blue-700 dark:text-blue-300 list-disc list-inside space-y-1\">\n            <li>{t('organization.smtp.info1')}</li>\n            <li>{t('organization.smtp.info2')}</li>\n            <li>{t('organization.smtp.info3')}</li>\n          </ul>\n        </div>\n\n        <div className=\"flex justify-end gap-2 pt-4\">\n          <button\n            type=\"button\"\n            onClick={handleClear}\n            className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n            title={t('organization.smtp.clear')}\n          >\n            <ArrowPathIcon className=\"h-5 w-5\" />\n          </button>\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n            title={loading ? t('organization.saving') : t('common.save')}\n          >\n            {loading ? (\n              <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n            ) : (\n              <CheckIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default SMTPConfigurationTab;\n\n","/**\n * URL-Validierung fr API-Endpunkte (Frontend)\n * \n * Verhindert SSRF durch Whitelist-basierte Validierung\n */\n\nconst ALLOWED_DOMAINS = {\n  lobbyPms: ['app.lobbypms.com'],\n  ttlock: ['open.ttlock.com', 'euopen.ttlock.com', 'api.sciener.com'],\n  sire: ['api.sire.gov.co'],\n  boldPayment: ['api.bold.co', 'sandbox.bold.co'],\n} as const;\n\nexport type ApiService = keyof typeof ALLOWED_DOMAINS;\n\n/**\n * Validiert eine API-URL gegen eine Whitelist\n * \n * @param url - Die zu validierende URL\n * @param service - Der API-Service\n * @returns true wenn URL gltig ist, false sonst\n */\nexport const validateApiUrl = (url: string, service: ApiService): boolean => {\n  if (!url || typeof url !== 'string') {\n    return false;\n  }\n\n  try {\n    const parsed = new URL(url);\n    const allowedDomains = ALLOWED_DOMAINS[service];\n\n    return allowedDomains.some(domain => {\n      // Exakte bereinstimmung\n      if (parsed.hostname === domain) {\n        return true;\n      }\n\n      // Subdomain (z.B. api.app.lobbypms.com)\n      if (parsed.hostname.endsWith(`.${domain}`)) {\n        return true;\n      }\n\n      return false;\n    });\n  } catch (error) {\n    // Ungltige URL\n    return false;\n  }\n};\n\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { KeyIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { Organization, OrganizationSettings } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport { validateApiUrl } from '../../utils/urlValidation.ts';\n\n// Feste LobbyPMS API URL\nconst LOBBYPMS_API_URL = 'https://api.lobbypms.com';\n\ninterface Props {\n  organization: Organization | null;\n  onSave?: () => void;\n}\n\nconst ApiConfigurationTab: React.FC<Props> = ({ organization, onSave }) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const { canManageOrganization, loading: permissionsLoading } = usePermissions();\n  const [loading, setLoading] = useState(false);\n  const [apiSettings, setApiSettings] = useState({\n    // LobbyPMS\n    lobbyPmsApiKey: '',\n    lobbyPmsPropertyId: '',\n    lobbyPmsSyncEnabled: false,\n    lobbyPmsAutoCreateTasks: false,\n    lobbyPmsAutoSendReservationInvitation: true, // Default: true (Rckwrtskompatibilitt)\n    lobbyPmsLateCheckInThreshold: '22:00',\n    \n    // TTLock\n    ttlockClientId: '',\n    ttlockClientSecret: '',\n    ttlockApiUrl: 'https://open.ttlock.com',\n    ttlockUsername: '',\n    ttlockPassword: '',\n    ttlockPasscodeType: 'auto' as 'auto' | 'custom',\n    \n    // SIRE\n    sireApiUrl: '',\n    sireApiKey: '',\n    sireApiSecret: '',\n    sireEnabled: false,\n    sireAutoRegisterOnCheckIn: false,\n    sirePropertyCode: '',\n    \n    // Bold Payment\n    boldPaymentApiKey: '',\n    boldPaymentMerchantId: '',\n    boldPaymentEnvironment: 'sandbox' as 'sandbox' | 'production',\n    \n    // WhatsApp\n    whatsappProvider: 'twilio' as 'twilio' | 'whatsapp-business-api',\n    whatsappApiKey: '',\n    whatsappApiSecret: '',\n    whatsappPhoneNumberId: ''\n  });\n  const [showSecrets, setShowSecrets] = useState<Record<string, boolean>>({});\n\n  useEffect(() => {\n    if (organization?.settings) {\n      const settings = organization.settings as OrganizationSettings;\n      const lobbyPms = settings.lobbyPms || {};\n      const doorSystem = settings.doorSystem || {};\n      const sire = settings.sire || {};\n      const boldPayment = settings.boldPayment || {};\n      const whatsapp = settings.whatsapp || {};\n      \n      setApiSettings({\n        lobbyPmsApiKey: lobbyPms.apiKey || '',\n        lobbyPmsPropertyId: lobbyPms.propertyId || '',\n        lobbyPmsSyncEnabled: lobbyPms.syncEnabled || false,\n        lobbyPmsAutoCreateTasks: lobbyPms.autoCreateTasks || false,\n        lobbyPmsAutoSendReservationInvitation: lobbyPms.autoSendReservationInvitation !== false, // Default: true\n        lobbyPmsLateCheckInThreshold: lobbyPms.lateCheckInThreshold || '22:00',\n        \n        ttlockClientId: doorSystem.clientId || '',\n        ttlockClientSecret: doorSystem.clientSecret || '',\n        ttlockApiUrl: doorSystem.apiUrl || 'https://open.ttlock.com',\n        ttlockUsername: doorSystem.username || '',\n        ttlockPassword: '', // Password wird nicht angezeigt (aus Sicherheitsgrnden)\n        ttlockPasscodeType: (doorSystem.passcodeType as 'auto' | 'custom') || 'auto',\n        \n        sireApiUrl: sire.apiUrl || '',\n        sireApiKey: sire.apiKey || '',\n        sireApiSecret: sire.apiSecret || '',\n        sireEnabled: sire.enabled || false,\n        sireAutoRegisterOnCheckIn: sire.autoRegisterOnCheckIn || false,\n        sirePropertyCode: sire.propertyCode || '',\n        \n        boldPaymentApiKey: boldPayment.apiKey || '',\n        boldPaymentMerchantId: boldPayment.merchantId || '',\n        boldPaymentEnvironment: boldPayment.environment || 'sandbox',\n        \n        whatsappProvider: (whatsapp.provider as 'twilio' | 'whatsapp-business-api') || 'twilio',\n        whatsappApiKey: whatsapp.apiKey || '',\n        whatsappApiSecret: whatsapp.apiSecret || '',\n        whatsappPhoneNumberId: whatsapp.phoneNumberId || ''\n      });\n    }\n  }, [organization]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value, type } = e.target;\n    const checked = (e.target as HTMLInputElement).checked;\n    \n    setApiSettings(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n\n  const toggleShowSecret = (key: string) => {\n    setShowSecrets(prev => ({\n      ...prev,\n      [key]: !prev[key]\n    }));\n  };\n\n  const handleClear = () => {\n    setApiSettings({\n      lobbyPmsApiKey: '',\n      lobbyPmsPropertyId: '',\n      lobbyPmsSyncEnabled: false,\n      lobbyPmsAutoCreateTasks: false,\n      lobbyPmsAutoSendReservationInvitation: true,\n      lobbyPmsLateCheckInThreshold: '22:00',\n      ttlockClientId: '',\n      ttlockClientSecret: '',\n      ttlockApiUrl: 'https://open.ttlock.com',\n      ttlockUsername: '',\n      ttlockPassword: '',\n      ttlockPasscodeType: 'auto' as 'auto' | 'custom',\n      sireApiUrl: '',\n      sireApiKey: '',\n      sireApiSecret: '',\n      sireEnabled: false,\n      sireAutoRegisterOnCheckIn: false,\n      sirePropertyCode: '',\n        boldPaymentApiKey: '',\n        boldPaymentMerchantId: '',\n        boldPaymentEnvironment: 'sandbox',\n        whatsappProvider: 'twilio' as 'twilio' | 'whatsapp-business-api',\n        whatsappApiKey: '',\n        whatsappApiSecret: '',\n        whatsappPhoneNumberId: ''\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    //  VALIDIERUNG: Prfe Pflichtfelder\n    if (apiSettings.lobbyPmsSyncEnabled) {\n      if (!apiSettings.lobbyPmsApiKey) {\n        showMessage(t('organization.api.validation.apiKeyRequired'), 'error');\n        return;\n      }\n    }\n\n    //  URL-VALIDIERUNG: Prfe alle URLs\n    if (apiSettings.ttlockApiUrl && !validateApiUrl(apiSettings.ttlockApiUrl, 'ttlock')) {\n      showMessage(t('organization.api.validation.invalidUrl'), 'error');\n      return;\n    }\n    if (apiSettings.sireApiUrl && !validateApiUrl(apiSettings.sireApiUrl, 'sire')) {\n      showMessage(t('organization.api.validation.invalidUrl'), 'error');\n      return;\n    }\n\n    //  ZEITFORMAT-VALIDIERUNG: Prfe lateCheckInThreshold\n    if (apiSettings.lobbyPmsLateCheckInThreshold && !/^([0-1][0-9]|2[0-3]):[0-5][0-9]$/.test(apiSettings.lobbyPmsLateCheckInThreshold)) {\n      showMessage(t('organization.api.validation.invalidTimeFormat'), 'error');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      \n      const currentSettings = (organization?.settings || {}) as OrganizationSettings;\n      const settings: OrganizationSettings = {\n        ...currentSettings,\n        lobbyPms: {\n          ...currentSettings.lobbyPms,\n          apiUrl: LOBBYPMS_API_URL, // Feste URL\n          apiKey: apiSettings.lobbyPmsApiKey || undefined,\n          propertyId: apiSettings.lobbyPmsPropertyId || undefined,\n          syncEnabled: apiSettings.lobbyPmsSyncEnabled,\n          autoCreateTasks: apiSettings.lobbyPmsAutoCreateTasks,\n          autoSendReservationInvitation: apiSettings.lobbyPmsAutoSendReservationInvitation,\n          lateCheckInThreshold: apiSettings.lobbyPmsLateCheckInThreshold || undefined\n        },\n        doorSystem: {\n          ...currentSettings.doorSystem,\n          provider: 'ttlock' as const,\n          apiUrl: apiSettings.ttlockApiUrl || undefined,\n          clientId: apiSettings.ttlockClientId || undefined,\n          clientSecret: apiSettings.ttlockClientSecret || undefined,\n          username: apiSettings.ttlockUsername || undefined,\n          password: apiSettings.ttlockPassword || undefined, // Wird MD5-gehasht im Backend\n          passcodeType: apiSettings.ttlockPasscodeType || 'auto'\n        },\n        sire: {\n          ...currentSettings.sire,\n          apiUrl: apiSettings.sireApiUrl || undefined,\n          apiKey: apiSettings.sireApiKey || undefined,\n          apiSecret: apiSettings.sireApiSecret || undefined,\n          enabled: apiSettings.sireEnabled,\n          autoRegisterOnCheckIn: apiSettings.sireAutoRegisterOnCheckIn,\n          propertyCode: apiSettings.sirePropertyCode || undefined\n        },\n        boldPayment: {\n          ...currentSettings.boldPayment,\n          apiKey: apiSettings.boldPaymentApiKey || undefined,\n          merchantId: apiSettings.boldPaymentMerchantId || undefined,\n          environment: apiSettings.boldPaymentEnvironment\n        },\n        whatsapp: {\n          ...currentSettings.whatsapp,\n          provider: apiSettings.whatsappProvider,\n          apiKey: apiSettings.whatsappApiKey || undefined,\n          apiSecret: apiSettings.whatsappApiSecret || undefined,\n          phoneNumberId: apiSettings.whatsappPhoneNumberId || undefined\n        }\n      };\n\n      await organizationService.updateOrganization({\n        settings: settings\n      });\n      \n      showMessage(t('organization.api.saveSuccess'), 'success');\n      if (onSave) {\n        onSave();\n      }\n    } catch (error: any) {\n      console.error('Error saving API settings:', error);\n      \n      // Detaillierte Fehlermeldung\n      let errorMessage = t('organization.api.saveError');\n      \n      if (error.response?.data) {\n        const data = error.response.data;\n        \n        // Spezifische Fehlermeldung vom Backend\n        if (data.message) {\n          errorMessage = data.message;\n        }\n        \n        // Validierungsfehler anzeigen\n        if (data.errors && Array.isArray(data.errors)) {\n          const validationErrors = data.errors\n            .map((err: any) => `${err.path?.join('.') || ''}: ${err.message || ''}`)\n            .filter((msg: string) => msg)\n            .join(', ');\n          \n          if (validationErrors) {\n            errorMessage += ` (${validationErrors})`;\n          }\n          \n          // URL-Fehler anzeigen (wenn errors Strings sind)\n          if (data.errors.length > 0 && typeof data.errors[0] === 'string') {\n            errorMessage = data.errors.join(', ');\n          }\n        }\n      } else if (error.message) {\n        errorMessage = error.message;\n      }\n      \n      showMessage(errorMessage, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const SecretInput: React.FC<{\n    name: string;\n    value: string;\n    onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n    placeholder?: string;\n    label: string;\n    required?: boolean;\n  }> = ({ name, value, onChange, placeholder, label, required = false }) => {\n    const showSecret = showSecrets[name] || false;\n    \n    return (\n      <div>\n        <label htmlFor={name} className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n          {label} {required && <span className=\"text-red-500\">*</span>}\n        </label>\n        <div className=\"relative\">\n          <input\n            type={showSecret ? 'text' : 'password'}\n            id={name}\n            name={name}\n            value={value}\n            onChange={onChange}\n            placeholder={placeholder || ''}\n            required={required}\n            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10\"\n          />\n          <button\n            type=\"button\"\n            onClick={() => toggleShowSecret(name)}\n            className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            {showSecret ? (\n              <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12\" />\n              </svg>\n            ) : (\n              <svg className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n              </svg>\n            )}\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  //  BERECHTIGUNGSPRFUNG\n  if (permissionsLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-8\">\n        <ArrowPathIcon className=\"h-6 w-6 animate-spin text-gray-400\" />\n        <span className=\"ml-3 text-gray-600 dark:text-gray-400\">{t('common.loadingPermissions')}</span>\n      </div>\n    );\n  }\n\n  if (!canManageOrganization()) {\n    return (\n      <div className=\"text-center py-8\">\n        <p className=\"text-gray-500 dark:text-gray-400\">{t('organization.api.noPermission')}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-2 mb-4\">\n        <KeyIcon className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n          {t('organization.api.title')}\n        </h3>\n      </div>\n\n      <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-4\">\n        {t('organization.api.description')}\n      </p>\n\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\n        {/* LobbyPMS */}\n        <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n            {t('organization.api.lobbyPms.title')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <SecretInput\n              name=\"lobbyPmsApiKey\"\n              value={apiSettings.lobbyPmsApiKey}\n              onChange={handleChange}\n              label={t('organization.api.lobbyPms.apiKey')}\n              placeholder=\"API Token\"\n            />\n\n            <div>\n              <label htmlFor=\"lobbyPmsPropertyId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.lobbyPms.propertyId')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"lobbyPmsPropertyId\"\n                name=\"lobbyPmsPropertyId\"\n                value={apiSettings.lobbyPmsPropertyId}\n                onChange={handleChange}\n                placeholder=\"Property ID\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  name=\"lobbyPmsSyncEnabled\"\n                  checked={apiSettings.lobbyPmsSyncEnabled}\n                  onChange={handleChange}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                  {t('organization.api.lobbyPms.syncEnabled')}\n                </span>\n              </label>\n\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  name=\"lobbyPmsAutoCreateTasks\"\n                  checked={apiSettings.lobbyPmsAutoCreateTasks}\n                  onChange={handleChange}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                  {t('organization.api.lobbyPms.autoCreateTasks')}\n                </span>\n              </label>\n\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  name=\"lobbyPmsAutoSendReservationInvitation\"\n                  checked={apiSettings.lobbyPmsAutoSendReservationInvitation}\n                  onChange={handleChange}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                  {t('organization.api.lobbyPms.autoSendReservationInvitation', 'Automatisch Einladung bei Reservation-Erstellung senden')}\n                </span>\n              </label>\n            </div>\n\n            <div>\n              <label htmlFor=\"lobbyPmsLateCheckInThreshold\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.lobbyPms.lateCheckInThreshold')}\n              </label>\n              <input\n                type=\"time\"\n                id=\"lobbyPmsLateCheckInThreshold\"\n                name=\"lobbyPmsLateCheckInThreshold\"\n                value={apiSettings.lobbyPmsLateCheckInThreshold}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* TTLock */}\n        <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n            {t('organization.api.ttlock.title')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"ttlockApiUrl\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.ttlock.apiUrl')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"ttlockApiUrl\"\n                name=\"ttlockApiUrl\"\n                value={apiSettings.ttlockApiUrl}\n                onChange={handleChange}\n                placeholder=\"https://open.ttlock.com\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"ttlockClientId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.ttlock.clientId')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"ttlockClientId\"\n                name=\"ttlockClientId\"\n                value={apiSettings.ttlockClientId}\n                onChange={handleChange}\n                placeholder=\"Client ID\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <SecretInput\n              name=\"ttlockClientSecret\"\n              value={apiSettings.ttlockClientSecret}\n              onChange={handleChange}\n              label={t('organization.api.ttlock.clientSecret')}\n              placeholder=\"Client Secret\"\n            />\n\n            <div>\n              <label htmlFor=\"ttlockUsername\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.ttlock.username')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"ttlockUsername\"\n                name=\"ttlockUsername\"\n                value={apiSettings.ttlockUsername}\n                onChange={handleChange}\n                placeholder=\"TTLock App Username (z.B. +573024498991)\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                {t('organization.api.ttlock.usernameHint')}\n              </p>\n            </div>\n\n            <SecretInput\n              name=\"ttlockPassword\"\n              value={apiSettings.ttlockPassword}\n              onChange={handleChange}\n              label={t('organization.api.ttlock.password')}\n              placeholder=\"TTLock App Password\"\n            />\n            <p className=\"text-xs text-gray-500 dark:text-gray-400 -mt-2\">\n              {t('organization.api.ttlock.passwordHint')}\n            </p>\n\n            <div>\n              <label htmlFor=\"ttlockPasscodeType\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.ttlock.passcodeType')}\n              </label>\n              <select\n                id=\"ttlockPasscodeType\"\n                name=\"ttlockPasscodeType\"\n                value={apiSettings.ttlockPasscodeType}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              >\n                <option value=\"auto\">{t('organization.api.ttlock.passcodeTypeAuto')}</option>\n                <option value=\"custom\">{t('organization.api.ttlock.passcodeTypeCustom')}</option>\n              </select>\n              <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                {t('organization.api.ttlock.passcodeTypeHint')}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* SIRE */}\n        <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n            {t('organization.api.sire.title')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"sireApiUrl\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.sire.apiUrl')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"sireApiUrl\"\n                name=\"sireApiUrl\"\n                value={apiSettings.sireApiUrl}\n                onChange={handleChange}\n                placeholder=\"https://api.sire.gov.co\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <SecretInput\n              name=\"sireApiKey\"\n              value={apiSettings.sireApiKey}\n              onChange={handleChange}\n              label={t('organization.api.sire.apiKey')}\n              placeholder=\"API Key\"\n            />\n\n            <SecretInput\n              name=\"sireApiSecret\"\n              value={apiSettings.sireApiSecret}\n              onChange={handleChange}\n              label={t('organization.api.sire.apiSecret')}\n              placeholder=\"API Secret\"\n            />\n\n            <div>\n              <label htmlFor=\"sirePropertyCode\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.sire.propertyCode')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"sirePropertyCode\"\n                name=\"sirePropertyCode\"\n                value={apiSettings.sirePropertyCode}\n                onChange={handleChange}\n                placeholder=\"Property Code\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  name=\"sireEnabled\"\n                  checked={apiSettings.sireEnabled}\n                  onChange={handleChange}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                  {t('organization.api.sire.enabled')}\n                </span>\n              </label>\n\n              <label className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  name=\"sireAutoRegisterOnCheckIn\"\n                  checked={apiSettings.sireAutoRegisterOnCheckIn}\n                  onChange={handleChange}\n                  className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700 dark:text-gray-300\">\n                  {t('organization.api.sire.autoRegisterOnCheckIn')}\n                </span>\n              </label>\n            </div>\n          </div>\n        </div>\n\n        {/* Bold Payment */}\n        <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n            {t('organization.api.boldPayment.title')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <SecretInput\n              name=\"boldPaymentApiKey\"\n              value={apiSettings.boldPaymentApiKey}\n              onChange={handleChange}\n              label={t('organization.api.boldPayment.apiKey')}\n              placeholder=\"API Key\"\n            />\n\n            <div>\n              <label htmlFor=\"boldPaymentMerchantId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.boldPayment.merchantId')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"boldPaymentMerchantId\"\n                name=\"boldPaymentMerchantId\"\n                value={apiSettings.boldPaymentMerchantId}\n                onChange={handleChange}\n                placeholder=\"Merchant ID\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"boldPaymentEnvironment\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.boldPayment.environment')}\n              </label>\n              <select\n                id=\"boldPaymentEnvironment\"\n                name=\"boldPaymentEnvironment\"\n                value={apiSettings.boldPaymentEnvironment}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              >\n                <option value=\"sandbox\">{t('organization.api.boldPayment.sandbox')}</option>\n                <option value=\"production\">{t('organization.api.boldPayment.production')}</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n        {/* WhatsApp */}\n        <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg p-4\">\n          <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-4\">\n            {t('organization.api.whatsapp.title')}\n          </h4>\n          \n          <div className=\"space-y-4\">\n            <div>\n              <label htmlFor=\"whatsappProvider\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.whatsapp.provider')}\n              </label>\n              <select\n                id=\"whatsappProvider\"\n                name=\"whatsappProvider\"\n                value={apiSettings.whatsappProvider}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              >\n                <option value=\"twilio\">{t('organization.api.whatsapp.providerTwilio')}</option>\n                <option value=\"whatsapp-business-api\">{t('organization.api.whatsapp.providerBusinessApi')}</option>\n              </select>\n            </div>\n\n            <SecretInput\n              name=\"whatsappApiKey\"\n              value={apiSettings.whatsappApiKey}\n              onChange={handleChange}\n              label={t('organization.api.whatsapp.apiKey')}\n              placeholder=\"API Key / Access Token\"\n            />\n\n            <SecretInput\n              name=\"whatsappApiSecret\"\n              value={apiSettings.whatsappApiSecret}\n              onChange={handleChange}\n              label={t('organization.api.whatsapp.apiSecret')}\n              placeholder=\"API Secret (optional)\"\n            />\n\n            <div>\n              <label htmlFor=\"whatsappPhoneNumberId\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('organization.api.whatsapp.phoneNumberId')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"whatsappPhoneNumberId\"\n                name=\"whatsappPhoneNumberId\"\n                value={apiSettings.whatsappPhoneNumberId}\n                onChange={handleChange}\n                placeholder=\"Phone Number ID\"\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex justify-end gap-2 pt-4\">\n          <button\n            type=\"button\"\n            onClick={handleClear}\n            className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600\"\n            title={t('organization.api.clear')}\n          >\n            <ArrowPathIcon className=\"h-5 w-5\" />\n          </button>\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n            title={loading ? t('organization.saving') : t('common.save')}\n          >\n            {loading ? (\n              <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n            ) : (\n              <CheckIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default ApiConfigurationTab;\n\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { UpdateOrganizationRequest, Organization } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\nimport { useLanguage } from '../../hooks/useLanguage.ts';\nimport { useAuth } from '../../hooks/useAuth.tsx';\nimport RoleConfigurationTab from './RoleConfigurationTab.tsx';\nimport DocumentConfigurationTab from './DocumentConfigurationTab.tsx';\nimport SMTPConfigurationTab from './SMTPConfigurationTab.tsx';\nimport ApiConfigurationTab from './ApiConfigurationTab.tsx';\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess?: () => void;\n  organization: Organization | null;\n}\n\nconst EditOrganizationModal: React.FC<Props> = ({ isOpen, onClose, onSuccess, organization }) => {\n  const { t } = useTranslation();\n  const { fetchCurrentUser } = useAuth();\n  const [formData, setFormData] = useState<UpdateOrganizationRequest>({\n    displayName: '',\n    domain: '',\n    logo: '',\n    country: null,\n    nit: null,\n    settings: {}\n  });\n  const [selectedCountry, setSelectedCountry] = useState<string>('');\n  const [nit, setNit] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n  const { organizationLanguage, setOrganizationLanguage } = useLanguage();\n  const [selectedOrgLanguage, setSelectedOrgLanguage] = useState<string>('');\n  const [savingOrgLanguage, setSavingOrgLanguage] = useState<boolean>(false);\n  const [activeTab, setActiveTab] = useState<'general' | 'roles' | 'documents' | 'smtp' | 'api'>('general');\n  const [logoFile, setLogoFile] = useState<File | null>(null);\n  const [logoPreview, setLogoPreview] = useState<string | null>(null);\n\n  // Lnder-Liste\n  const COUNTRIES = [\n    { code: 'CO', name: t('countries.CO') },\n    { code: 'CH', name: t('countries.CH') },\n    { code: 'DE', name: t('countries.DE') },\n    { code: 'AT', name: t('countries.AT') }\n  ];\n\n  // Lade Organisations-Daten wenn Modal geffnet wird\n  useEffect(() => {\n    if (isOpen && organization) {\n      const orgSettings = organization.settings || {};\n      setFormData({\n        displayName: organization.displayName || '',\n        domain: organization.domain || '',\n        logo: organization.logo || '',\n        country: organization.country || null,\n        nit: organization.nit || null,\n        settings: orgSettings\n      });\n      \n      // Setze Land direkt aus organization (statt aus settings)\n      setSelectedCountry(organization.country || '');\n      setNit(organization.nit || '');\n      \n      // Setze Logo-Preview wenn Logo vorhanden\n      if (organization.logo) {\n        setLogoPreview(organization.logo);\n      } else {\n        setLogoPreview(null);\n      }\n      setLogoFile(null);\n      \n      // Lade Organisation-Sprache\n      const loadOrgLanguage = async () => {\n        try {\n          const langResponse = await organizationService.getOrganizationLanguage();\n          setSelectedOrgLanguage(langResponse.language || '');\n        } catch (langError) {\n          console.error(t('organization.loadLanguageError'), langError);\n          setSelectedOrgLanguage('');\n        }\n      };\n      \n      loadOrgLanguage();\n    }\n  }, [isOpen, organization, t]);\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    \n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value } = e.target;\n    if (name === 'country') {\n      setSelectedCountry(value);\n      setFormData(prev => ({\n        ...prev,\n        country: value || null\n      }));\n      // Wenn Country nicht \"CO\" ist, NIT zurcksetzen\n      if (value !== 'CO') {\n        setNit('');\n        setFormData(prev => ({\n          ...prev,\n          nit: null\n        }));\n      }\n    } else if (name === 'nit') {\n      setNit(value);\n      setFormData(prev => ({\n        ...prev,\n        nit: value || null\n      }));\n    } else {\n      setFormData(prev => ({ ...prev, [name]: value }));\n    }\n    // Fehler fr dieses Feld lschen\n    if (errors[name]) {\n      setErrors(prev => ({ ...prev, [name]: '' }));\n    }\n  };\n\n  const handleLogoFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    // Prfe Dateityp\n    if (!file.type.match('image/(png|jpeg|jpg)')) {\n      showMessage(t('organization.logoInvalidType') || 'Nur PNG und JPEG Dateien sind erlaubt', 'error');\n      return;\n    }\n\n    // Prfe Dateigre (max 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      showMessage(t('organization.logoTooLarge') || 'Logo darf maximal 5MB gro sein', 'error');\n      return;\n    }\n\n    setLogoFile(file);\n\n    // Erstelle Preview\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      const base64String = reader.result as string;\n      setLogoPreview(base64String);\n      setFormData(prev => ({ ...prev, logo: base64String }));\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    try {\n      setLoading(true);\n      setErrors({});\n      await organizationService.updateOrganization(formData);\n      showMessage(t('organization.updateSuccess'), 'success');\n      \n      // User-Daten neu laden, damit das Logo im Header aktualisiert wird\n      try {\n        await fetchCurrentUser();\n      } catch (error) {\n        console.error('Fehler beim Neuladen der User-Daten:', error);\n      }\n      \n      onClose();\n      if (onSuccess) {\n        onSuccess();\n      }\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('organization.updateError');\n      showMessage(errorMessage, 'error');\n      setErrors({ submit: errorMessage });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleClose = () => {\n    // Formular zurcksetzen\n    if (organization) {\n      const orgSettings = organization.settings || {};\n      setFormData({\n        displayName: organization.displayName || '',\n        domain: organization.domain || '',\n        logo: organization.logo || '',\n        country: organization.country || null,\n        nit: organization.nit || null,\n        settings: orgSettings\n      });\n      setSelectedCountry(organization.country || '');\n      setNit(organization.nit || '');\n    }\n    setErrors({});\n    onClose();\n  };\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('organization.edit.title')}\n              </Dialog.Title>\n              <button\n                onClick={handleClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-4\">\n              {errors.submit && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {errors.submit}\n                </div>\n              )}\n\n              <div className=\"space-y-4\">\n                <div>\n                  <label \n                    htmlFor=\"displayName\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.displayName')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"displayName\"\n                    name=\"displayName\"\n                    value={formData.displayName || ''}\n                    onChange={handleChange}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.displayName \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  />\n                  {errors.displayName && (\n                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"domain\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.domain')}\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"domain\"\n                    name=\"domain\"\n                    value={formData.domain || ''}\n                    onChange={handleChange}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  />\n                </div>\n\n                <div>\n                  <label \n                    htmlFor=\"logo-mobile\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.logo') || 'Logo'}\n                  </label>\n                  <input\n                    type=\"file\"\n                    id=\"logo-mobile\"\n                    name=\"logo\"\n                    accept=\"image/png,image/jpeg,image/jpg\"\n                    onChange={handleLogoFileChange}\n                    className=\"mt-1 block w-full text-sm text-gray-500 dark:text-gray-400\n                      file:mr-4 file:py-2 file:px-4\n                      file:rounded-md file:border-0\n                      file:text-sm file:font-semibold\n                      file:bg-blue-50 file:text-blue-700\n                      hover:file:bg-blue-100\n                      dark:file:bg-blue-900 dark:file:text-blue-300\n                      dark:hover:file:bg-blue-800\"\n                  />\n                  {logoPreview && (\n                    <div className=\"mt-2\">\n                      <img \n                        src={logoPreview} \n                        alt=\"Logo Preview\" \n                        className=\"h-20 w-auto border border-gray-300 dark:border-gray-600 rounded\"\n                      />\n                    </div>\n                  )}\n                  {formData.logo && !logoPreview && (\n                    <div className=\"mt-2\">\n                      <img \n                        src={formData.logo} \n                        alt=\"Current Logo\" \n                        className=\"h-20 w-auto border border-gray-300 dark:border-gray-600 rounded\"\n                      />\n                    </div>\n                  )}\n                </div>\n\n                {/* Land */}\n                <div className=\"border-t pt-4\">\n                  <label \n                    htmlFor=\"country\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.country')}\n                  </label>\n                  <select\n                    id=\"country\"\n                    name=\"country\"\n                    value={selectedCountry}\n                    onChange={handleChange}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  >\n                    <option value=\"\">{t('organization.selectCountry')}</option>\n                    {COUNTRIES.map((country) => (\n                      <option key={country.code} value={country.code}>\n                        {country.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                {/* Organisation-Sprache */}\n                <div className=\"border-t pt-4\">\n                  <label \n                    htmlFor=\"organizationLanguage\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('organization.language')}\n                  </label>\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">\n                    {t('organization.languageDescription')}\n                  </p>\n                  <select\n                    id=\"organizationLanguage\"\n                    value={selectedOrgLanguage || organizationLanguage || ''}\n                    onChange={async (e) => {\n                      const newLanguage = e.target.value;\n                      setSelectedOrgLanguage(newLanguage);\n                      if (newLanguage && newLanguage !== organizationLanguage) {\n                        setSavingOrgLanguage(true);\n                        try {\n                          await setOrganizationLanguage(newLanguage);\n                          showMessage(t('common.save'), 'success');\n                        } catch (error) {\n                          console.error(t('organization.saveLanguageError'), error);\n                          showMessage(t('worktime.messages.orgLanguageError'), 'error');\n                        } finally {\n                          setSavingOrgLanguage(false);\n                        }\n                      }\n                    }}\n                    disabled={savingOrgLanguage || loading}\n                    className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed\"\n                  >\n                    <option value=\"\">{t('settings.useOrganizationLanguage')} ({t('worktime.language.fallback')}: {t('worktime.language.german')})</option>\n                    <option value=\"de\">{t('worktime.language.german')}</option>\n                    <option value=\"es\">{t('worktime.language.spanish')}</option>\n                    <option value=\"en\">{t('worktime.language.english')}</option>\n                  </select>\n                </div>\n              </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                  title={t('common.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title={loading ? t('organization.saving') : t('common.save')}\n                >\n                  {loading ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={handleClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('organization.edit.title')}\n          </h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        {/* Tabs Navigation */}\n        <div className=\"border-b border-gray-200 dark:border-gray-700\">\n          <nav className=\"-mb-px flex space-x-4 px-4\" aria-label=\"Tabs\">\n            <button\n              type=\"button\"\n              onClick={() => setActiveTab('general')}\n              className={`${\n                activeTab === 'general'\n                  ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n              } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n            >\n              {t('organization.tabs.general')}\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setActiveTab('roles')}\n              className={`${\n                activeTab === 'roles'\n                  ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n              } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n            >\n              {t('organization.tabs.roles')}\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setActiveTab('documents')}\n              className={`${\n                activeTab === 'documents'\n                  ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n              } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n            >\n              {t('organization.tabs.documents')}\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setActiveTab('smtp')}\n              className={`${\n                activeTab === 'smtp'\n                  ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n              } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n            >\n              {t('organization.tabs.smtp')}\n            </button>\n            {selectedCountry === 'CO' && (\n              <button\n                type=\"button\"\n                onClick={() => setActiveTab('api')}\n                className={`${\n                  activeTab === 'api'\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n              >\n                {t('organization.tabs.api')}\n              </button>\n            )}\n          </nav>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {errors.submit && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {errors.submit}\n            </div>\n          )}\n\n          {activeTab === 'general' && (\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label \n                htmlFor=\"displayName\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.displayName')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"displayName\"\n                name=\"displayName\"\n                value={formData.displayName || ''}\n                onChange={handleChange}\n                className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                  errors.displayName \n                    ? 'border-red-300 dark:border-red-600' \n                    : 'border-gray-300 dark:border-gray-600'\n                }`}\n              />\n              {errors.displayName && (\n                <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.displayName}</p>\n              )}\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"domain\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.domain')}\n              </label>\n              <input\n                type=\"text\"\n                id=\"domain\"\n                name=\"domain\"\n                value={formData.domain || ''}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div>\n              <label \n                htmlFor=\"logo\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.logo') || 'Logo'}\n              </label>\n              <input\n                type=\"file\"\n                id=\"logo\"\n                name=\"logo\"\n                accept=\"image/png,image/jpeg,image/jpg\"\n                onChange={handleLogoFileChange}\n                className=\"mt-1 block w-full text-sm text-gray-500 dark:text-gray-400\n                  file:mr-4 file:py-2 file:px-4\n                  file:rounded-md file:border-0\n                  file:text-sm file:font-semibold\n                  file:bg-blue-50 file:text-blue-700\n                  hover:file:bg-blue-100\n                  dark:file:bg-blue-900 dark:file:text-blue-300\n                  dark:hover:file:bg-blue-800\"\n              />\n              {logoPreview && (\n                <div className=\"mt-2\">\n                  <img \n                    src={logoPreview} \n                    alt=\"Logo Preview\" \n                    className=\"h-20 w-auto border border-gray-300 dark:border-gray-600 rounded\"\n                  />\n                </div>\n              )}\n              {formData.logo && !logoPreview && (\n                <div className=\"mt-2\">\n                  <img \n                    src={formData.logo} \n                    alt=\"Current Logo\" \n                    className=\"h-20 w-auto border border-gray-300 dark:border-gray-600 rounded\"\n                  />\n                </div>\n              )}\n            </div>\n\n            {/* Land */}\n            <div className=\"border-t pt-4\">\n              <label \n                htmlFor=\"country\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.country')}\n              </label>\n              <select\n                id=\"country\"\n                name=\"country\"\n                value={selectedCountry}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              >\n                <option value=\"\">{t('organization.selectCountry')}</option>\n                {COUNTRIES.map((country) => (\n                  <option key={country.code} value={country.code}>\n                    {country.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* NIT (nur fr Kolumbien) */}\n            {selectedCountry === 'CO' && (\n              <div>\n                <label \n                  htmlFor=\"nit\" \n                  className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                >\n                  {t('organization.nit')}\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"nit\"\n                  name=\"nit\"\n                  value={nit}\n                  onChange={handleChange}\n                  placeholder={t('organization.nitDescription')}\n                  className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                />\n                <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">\n                  {t('organization.nitDescription')}\n                </p>\n              </div>\n            )}\n\n            {/* Organisation-Sprache */}\n            <div className=\"border-t pt-4\">\n              <label \n                htmlFor=\"organizationLanguage\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('organization.language')}\n              </label>\n              <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-2\">\n                {t('organization.languageDescription')}\n              </p>\n              <select\n                id=\"organizationLanguage\"\n                value={selectedOrgLanguage || organizationLanguage || ''}\n                onChange={async (e) => {\n                  const newLanguage = e.target.value;\n                  setSelectedOrgLanguage(newLanguage);\n                  if (newLanguage && newLanguage !== organizationLanguage) {\n                    setSavingOrgLanguage(true);\n                    try {\n                      await setOrganizationLanguage(newLanguage);\n                      showMessage(t('common.save'), 'success');\n                    } catch (error) {\n                      console.error('Fehler beim Speichern der Organisation-Sprache:', error);\n                      showMessage(t('worktime.messages.orgLanguageError'), 'error');\n                    } finally {\n                      setSavingOrgLanguage(false);\n                    }\n                  }\n                }}\n                disabled={savingOrgLanguage || loading}\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed\"\n              >\n                <option value=\"\">{t('settings.useOrganizationLanguage')} ({t('worktime.language.fallback')}: {t('worktime.language.german')})</option>\n                <option value=\"de\">{t('worktime.language.german')}</option>\n                <option value=\"es\">{t('worktime.language.spanish')}</option>\n                <option value=\"en\">{t('worktime.language.english')}</option>\n              </select>\n            </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                  title={t('common.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  title={loading ? t('organization.saving') : t('common.save')}\n                >\n                  {loading ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          )}\n\n          {activeTab === 'roles' && (\n            <RoleConfigurationTab \n              organization={organization}\n              onSave={() => {\n                if (onSuccess) {\n                  onSuccess();\n                }\n              }}\n            />\n          )}\n\n          {activeTab === 'documents' && (\n            <DocumentConfigurationTab \n              organization={organization}\n              onSave={() => {\n                if (onSuccess) {\n                  onSuccess();\n                }\n              }}\n            />\n          )}\n\n          {activeTab === 'smtp' && (\n            <SMTPConfigurationTab \n              organization={organization}\n              onSave={() => {\n                if (onSuccess) {\n                  onSuccess();\n                }\n              }}\n            />\n          )}\n\n          {activeTab === 'api' && selectedCountry === 'CO' && (\n            <ApiConfigurationTab \n              organization={organization}\n              onSave={() => {\n                if (onSuccess) {\n                  onSuccess();\n                }\n              }}\n            />\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default EditOrganizationModal;\n\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { XMarkIcon, ArrowPathIcon, FunnelIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { OrganizationJoinRequest } from '../../types/organization.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport FilterPane from '../FilterPane.tsx';\nimport SavedFilterTags from '../SavedFilterTags.tsx';\nimport { FilterCondition } from '../FilterRow.tsx';\nimport axiosInstance from '../../config/axios.ts';\n\n// Status-Badge Funktionen\nconst getStatusColor = (status: string) => {\n  switch (status) {\n    case 'pending':\n      return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300';\n    case 'approved':\n      return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300';\n    case 'rejected':\n      return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300';\n    case 'withdrawn':\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\n    default:\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\n  }\n};\n\nconst getStatusText = (status: string, t: any) => {\n  switch (status) {\n    case 'pending':\n      return t('joinRequestsList.status.pending');\n    case 'approved':\n      return t('joinRequestsList.status.approved');\n    case 'rejected':\n      return t('joinRequestsList.status.rejected');\n    case 'withdrawn':\n      return t('joinRequestsList.status.withdrawn');\n    default:\n      return status;\n  }\n};\n\nconst MY_JOIN_REQUESTS_TABLE_ID = 'my-join-requests-table';\n\nconst MyJoinRequestsList: React.FC = () => {\n  const { t } = useTranslation();\n  const [joinRequests, setJoinRequests] = useState<OrganizationJoinRequest[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isFilterPanelOpen, setIsFilterPanelOpen] = useState<boolean>(false);\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const { showMessage } = useMessage();\n  const mountedRef = useRef(true);\n  const [withdrawingId, setWithdrawingId] = useState<number | null>(null);\n  \n  // Filter State Management (Controlled Mode)\n  const [activeFilterName, setActiveFilterName] = useState<string>('Alle');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n\n  useEffect(() => {\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    console.log('MyJoinRequestsList: useEffect called - component mounted');\n    \n    // WICHTIG: State beim Mount zurcksetzen, um Caching zwischen Usern zu vermeiden\n    console.log('MyJoinRequestsList: Resetting state on mount to prevent data leaks');\n    setJoinRequests([]);\n    setError(null);\n    setLoading(true);\n    \n    let isMounted = true;\n    \n    const fetchMyJoinRequests = async () => {\n      if (!isMounted) {\n        console.log('MyJoinRequestsList: Component unmounted, skipping fetch');\n        return;\n      }\n      \n      console.log('MyJoinRequestsList: Starting fetch');\n      \n      // Timeout nach 10 Sekunden\n      const timeoutId = setTimeout(() => {\n        if (isMounted) {\n          console.error('Request timeout after 10 seconds');\n          setError('Anfrage dauert zu lange. Bitte Seite neu laden.');\n          setLoading(false);\n        }\n      }, 10000);\n      \n      try {\n        console.log('MyJoinRequestsList: Setting loading to true');\n        setLoading(true);\n        setError(null);\n        \n        // Debug: Log die URL die aufgerufen wird\n        console.log('MyJoinRequestsList: Fetching my join requests from:', API_ENDPOINTS.ORGANIZATIONS.MY_JOIN_REQUESTS);\n        \n        const requests = await organizationService.getMyJoinRequests();\n        \n        console.log('MyJoinRequestsList: Received requests:', requests);\n        console.log('MyJoinRequestsList: Requests type:', typeof requests);\n        console.log('MyJoinRequestsList: Requests isArray:', Array.isArray(requests));\n        console.log('MyJoinRequestsList: Requests length:', requests?.length || 0);\n        \n        // SICHERHEIT: Validiere, dass alle Anfragen wirklich Arrays sind\n        if (!Array.isArray(requests)) {\n          console.error(' MyJoinRequestsList: Response is not an array!', requests);\n          throw new Error('Ungltige Antwort vom Server');\n        }\n        \n        clearTimeout(timeoutId);\n        \n        // State immer setzen, auch wenn Component unmounted ist\n        // (React kann den State trotzdem setzen, wenn Component wieder gemountet wird)\n        if (isMounted) {\n          console.log('MyJoinRequestsList: Setting joinRequests state');\n          setJoinRequests(requests);\n          console.log('MyJoinRequestsList: State updated with', requests.length, 'requests');\n        } else {\n          console.log('MyJoinRequestsList: Component was unmounted, but setting state anyway');\n          setJoinRequests(requests);\n        }\n      } catch (err: any) {\n        clearTimeout(timeoutId);\n        \n        if (!isMounted) {\n          console.log('MyJoinRequestsList: Component unmounted during error, skipping error handling');\n          return;\n        }\n        \n        console.error('MyJoinRequestsList: Error fetching my join requests:', err);\n        console.error('MyJoinRequestsList: Error response:', err.response);\n        console.error('MyJoinRequestsList: Error status:', err.response?.status);\n        console.error('MyJoinRequestsList: Error data:', err.response?.data);\n        \n        const errorMessage = err.response?.data?.message || err.message || t('myJoinRequests.loadError');\n        setError(errorMessage);\n        setTimeout(() => {\n          showMessage(errorMessage, 'error');\n        }, 0);\n      } finally {\n        if (isMounted) {\n          console.log('MyJoinRequestsList: Setting loading to false');\n          setLoading(false);\n        } else {\n          // Auch wenn unmounted, loading auf false setzen\n          console.log('MyJoinRequestsList: Component unmounted, but setting loading to false anyway');\n          setLoading(false);\n        }\n      }\n    };\n\n    // IMMER neu laden beim Mount (auch beim Tab-Wechsel zurck)\n    fetchMyJoinRequests();\n    \n    return () => {\n      console.log('MyJoinRequestsList: useEffect cleanup - component unmounting');\n      isMounted = false;\n      mountedRef.current = false;\n      // State beim Unmount zurcksetzen\n      setJoinRequests([]);\n      setError(null);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleWithdraw = async (requestId: number) => {\n    if (!window.confirm(t('myJoinRequests.confirmWithdraw'))) {\n      return;\n    }\n\n    try {\n      setWithdrawingId(requestId);\n      await organizationService.withdrawJoinRequest(requestId);\n      \n      // Update local state\n      setJoinRequests(prev => \n        prev.map(req => \n          req.id === requestId \n            ? { ...req, status: 'withdrawn' as const, processedAt: new Date().toISOString() }\n            : req\n        )\n      );\n      \n      showMessage(t('myJoinRequests.withdrawSuccess'), 'success');\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('myJoinRequests.withdrawError');\n      showMessage(errorMessage, 'error');\n    } finally {\n      setWithdrawingId(null);\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('de-DE', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // Filter-Funktionen\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n  };\n\n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n\n  // Filter Change Handler (Controlled Mode)\n  const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators);\n  };\n\n  const getActiveFilterCount = () => {\n    return filterConditions.length;\n  };\n\n  // Initialer Default-Filter setzen (Controlled Mode)\n  useEffect(() => {\n    const setInitialFilter = async () => {\n      try {\n        const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(MY_JOIN_REQUESTS_TABLE_ID));\n        const filters = response.data;\n        \n        const alleFilter = filters.find((filter: any) => filter.name === 'Alle');\n        if (alleFilter) {\n          setActiveFilterName('Alle');\n          setSelectedFilterId(alleFilter.id);\n          applyFilterConditions(alleFilter.conditions, alleFilter.operators);\n        }\n      } catch (error) {\n        console.error('Fehler beim Setzen des initialen Filters:', error);\n      }\n    };\n\n    setInitialFilter();\n  }, []);\n\n  // Standard-Filter erstellen und speichern\n  useEffect(() => {\n    const createStandardFilters = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        \n        if (!token) {\n          console.error('Nicht authentifiziert');\n          return;\n        }\n\n        // Prfen, ob die Standard-Filter bereits existieren\n        const existingFiltersResponse = await axiosInstance.get(\n          API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(MY_JOIN_REQUESTS_TABLE_ID)\n        );\n\n        const existingFilters = existingFiltersResponse.data || [];\n        const alleFilterExists = existingFilters.some((filter: any) => filter.name === 'Alle');\n\n        // Erstelle \"Alle\"-Filter, wenn er noch nicht existiert\n        if (!alleFilterExists) {\n          const alleFilter = {\n            tableId: MY_JOIN_REQUESTS_TABLE_ID,\n            name: 'Alle',\n            conditions: [],\n            operators: []\n          };\n\n          await axiosInstance.post(\n            API_ENDPOINTS.SAVED_FILTERS.BASE,\n            alleFilter\n          );\n          console.log('Alle-Filter fr Meine Beitrittsanfragen erstellt');\n        }\n      } catch (error) {\n        console.error('Fehler beim Erstellen der Standard-Filter:', error);\n      }\n    };\n\n    createStandardFilters();\n  }, []);\n\n  // Gefilterte Join-Requests\n  const filteredJoinRequests = useMemo(() => {\n    let filtered = [...joinRequests];\n\n    // Suchfeld-Filter\n    if (searchTerm) {\n      const searchLower = searchTerm.toLowerCase();\n      filtered = filtered.filter(request => {\n        const orgName = (request.organization.displayName || request.organization.name || '').toLowerCase();\n        const message = request.message?.toLowerCase() || '';\n        return orgName.includes(searchLower) || message.includes(searchLower);\n      });\n    }\n\n    // Filter-Bedingungen aus FilterPane\n    if (filterConditions.length > 0) {\n      filtered = filterConditions.reduce((acc, condition, index) => {\n        if (!condition.column || condition.value === null || condition.value === '') {\n          return acc;\n        }\n\n        const operator = condition.operator;\n        const value = condition.value;\n\n        return acc.filter(request => {\n          switch (condition.column) {\n            case 'organization':\n              const orgName = (request.organization.displayName || request.organization.name || '').toLowerCase();\n              const searchValue = String(value).toLowerCase();\n              \n              if (operator === 'contains') {\n                return orgName.includes(searchValue);\n              } else if (operator === 'equals') {\n                return orgName === searchValue;\n              } else if (operator === 'startsWith') {\n                return orgName.startsWith(searchValue);\n              }\n              return false;\n\n            case 'message':\n              const message = request.message?.toLowerCase() || '';\n              const msgValue = String(value).toLowerCase();\n              \n              if (operator === 'contains') {\n                return message.includes(msgValue);\n              } else if (operator === 'equals') {\n                return message === msgValue;\n              } else if (operator === 'startsWith') {\n                return message.startsWith(msgValue);\n              }\n              return false;\n\n            case 'status':\n              if (operator === 'equals') {\n                return request.status === value;\n              }\n              return false;\n\n            default:\n              return true;\n          }\n        });\n      }, filtered);\n    }\n\n    return filtered;\n  }, [joinRequests, searchTerm, filterConditions, filterLogicalOperators]);\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n      {/* Titelzeile mit Icon, Suchfeld, Filter-Button */}\n      <div className=\"flex items-center justify-between mb-4\">\n        <h2 className=\"text-xl font-semibold dark:text-white\">\n          {t('myJoinRequests.title')}\n        </h2>\n        \n        <div className=\"flex items-center gap-1.5\">\n          {/* Suchfeld */}\n          <input\n            type=\"text\"\n            placeholder={t('common.search', { defaultValue: 'Suchen...' })}\n            className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n\n          {/* Filter-Button */}\n          <button\n            className={`p-2 rounded-md border ${getActiveFilterCount() > 0 ? 'border-blue-300 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700'} relative`}\n            onClick={() => setIsFilterPanelOpen(!isFilterPanelOpen)}\n            title={t('common.filter')}\n          >\n            <FunnelIcon className=\"h-5 w-5\" />\n            {getActiveFilterCount() > 0 && (\n              <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center\">\n                {getActiveFilterCount()}\n              </span>\n            )}\n          </button>\n        </div>\n      </div>\n\n      {/* Filter-Panel */}\n      {isFilterPanelOpen && (\n        <div className=\"mb-4\">\n          <FilterPane\n            columns={[\n              { id: 'organization', label: t('myJoinRequests.filter.organization', { defaultValue: 'Organisation' }) },\n              { id: 'message', label: t('joinRequestsList.filter.message') },\n              { id: 'status', label: t('joinRequestsList.status.title', { defaultValue: 'Status' }) }\n            ]}\n            onApply={applyFilterConditions}\n            onReset={resetFilterConditions}\n            savedConditions={filterConditions}\n            savedOperators={filterLogicalOperators}\n            tableId={MY_JOIN_REQUESTS_TABLE_ID}\n          />\n        </div>\n      )}\n\n      {/* Gespeicherte Filter als Tags anzeigen */}\n      <SavedFilterTags\n        tableId={MY_JOIN_REQUESTS_TABLE_ID}\n        onSelectFilter={applyFilterConditions}\n        onReset={resetFilterConditions}\n        activeFilterName={activeFilterName}\n        selectedFilterId={selectedFilterId}\n        onFilterChange={handleFilterChange}\n        defaultFilterName=\"Alle\"\n      />\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"mb-4 p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded\">\n          {error}\n        </div>\n      )}\n\n      {/* Loading State */}\n      {loading ? (\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('myJoinRequests.loading')}</span>\n        </div>\n      ) : joinRequests.length === 0 ? (\n        <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n          {t('myJoinRequests.noRequests')}\n        </div>\n      ) : (\n        /* Cards fr Join-Requests */\n        <div className=\"space-y-4\">\n          {filteredJoinRequests.map(request => (\n            <div\n              key={request.id}\n              className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\"\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                        {request.organization.displayName || request.organization.name}\n                      </h3>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        {formatDate(request.createdAt)}\n                      </p>\n                    </div>\n                    <span className={`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(request.status)}`}>\n                      {getStatusText(request.status, t)}\n                    </span>\n                  </div>\n\n                  {request.message && (\n                    <div className=\"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\n                      <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                        <span className=\"font-medium\">{t('joinRequestsList.filter.message')}:</span> {request.message}\n                      </p>\n                    </div>\n                  )}\n\n                  {request.response && (\n                    <div className=\"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-700\">\n                      <p className=\"text-sm text-blue-700 dark:text-blue-300\">\n                        <span className=\"font-medium\">{t('joinRequestsList.response')}:</span> {request.response}\n                      </p>\n                    </div>\n                  )}\n\n                  {request.processor && (\n                    <div className=\"mt-2 text-sm text-gray-600 dark:text-gray-400\">\n                      {t('myJoinRequests.processedBy')}: {request.processor.firstName} {request.processor.lastName}\n                      {request.processedAt && ` - ${formatDate(request.processedAt)}`}\n                    </div>\n                  )}\n\n                  {request.status === 'pending' && (\n                    <div className=\"mt-4 flex items-center gap-2\">\n                      <button \n                        onClick={() => handleWithdraw(request.id)}\n                        disabled={withdrawingId === request.id}\n                        className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md dark:bg-red-700 dark:hover:bg-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 flex items-center disabled:opacity-50 disabled:cursor-not-allowed\"\n                      >\n                        {withdrawingId === request.id ? (\n                          <>\n                            <ArrowPathIcon className=\"h-4 w-4 mr-1 animate-spin\" />\n                            {t('myJoinRequests.withdrawing')}\n                          </>\n                        ) : (\n                          <>\n                            <XMarkIcon className=\"h-4 w-4 mr-1\" />\n                            {t('myJoinRequests.withdraw')}\n                          </>\n                        )}\n                      </button>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MyJoinRequestsList;\n\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { BuildingOfficeIcon, PlusIcon, UserPlusIcon, UserGroupIcon, ShieldCheckIcon, EnvelopeIcon, ChartBarIcon, PencilIcon } from '@heroicons/react/24/outline';\nimport { useTranslation } from 'react-i18next';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { Organization } from '../../types/organization.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useOrganization } from '../../contexts/OrganizationContext.tsx';\nimport { useAuth } from '../../hooks/useAuth.tsx';\nimport CreateOrganizationModal from './CreateOrganizationModal.tsx';\nimport JoinOrganizationModal from './JoinOrganizationModal.tsx';\nimport EditOrganizationModal from './EditOrganizationModal.tsx';\nimport MyJoinRequestsList from './MyJoinRequestsList.tsx';\n\ninterface OrganizationStats {\n  currentUsers: number;\n  maxUsers: number;\n  availableSlots: number;\n  utilizationPercent: number;\n  _count: {\n    roles: number;\n    joinRequests: number;\n    invitations: number;\n  };\n}\n\nconst OrganizationSettings: React.FC = () => {\n  const [organization, setOrganization] = useState<Organization | null>(null);\n  const [stats, setStats] = useState<OrganizationStats | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [loadingStats, setLoadingStats] = useState<boolean>(false);\n  const [error, setError] = useState<string | null>(null);\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState<boolean>(false);\n  const [isJoinModalOpen, setIsJoinModalOpen] = useState<boolean>(false);\n  const [isEditModalOpen, setIsEditModalOpen] = useState<boolean>(false);\n  const { canViewOrganization, canManageOrganization, loading: permissionsLoading } = usePermissions();\n  const { showMessage } = useMessage();\n  const { t } = useTranslation();\n  const { refreshOrganization } = useOrganization();\n  const { fetchCurrentUser } = useAuth();\n\n  const fetchOrganization = useCallback(async (includeSettings = false) => {\n    try {\n      setLoading(true);\n      setError(null);\n      //  PERFORMANCE: Settings nur laden wenn wirklich bentigt (beim Bearbeiten)\n      const org = await organizationService.getCurrentOrganization(undefined, includeSettings);\n      setOrganization(org);\n      \n      // Statistiken laden\n      try {\n        setLoadingStats(true);\n        const statsData = await organizationService.getOrganizationStats();\n        setStats(statsData);\n      } catch (statsErr: any) {\n        console.error('Fehler beim Laden der Statistiken:', statsErr);\n        // Statistiken-Fehler nicht kritisch, keine Error-Message\n      } finally {\n        setLoadingStats(false);\n      }\n    } catch (err: any) {\n      // Prfe ob es ein 404-Fehler ist (keine Organisation gefunden)\n      if (err.response?.status === 404 && err.response?.data?.hasOrganization === false) {\n        // Benutzer hat keine Organisation - das ist OK, setze Error aber nicht kritisch\n        // Verwende IMMER die bersetzung, nicht die Backend-Nachricht\n        setError(t('organization.notFound'));\n        setOrganization(null);\n        // Zeige Info-Message statt Error\n        showMessage(t('organization.notFound'), 'info');\n      } else {\n        // Andere Fehler - kritisch\n        const errorMessage = err.response?.data?.message || t('organization.loadError');\n        setError(errorMessage);\n        showMessage(errorMessage, 'error');\n      }\n    } finally {\n      setLoading(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const hasInitialLoadRef = useRef(false);\n\n  useEffect(() => {\n    // Warte bis Berechtigungen geladen sind\n    if (permissionsLoading) {\n      return;\n    }\n\n    // Nur einmal beim initialen Load ausfhren\n    if (hasInitialLoadRef.current) {\n      return;\n    }\n\n    const hasPermission = canViewOrganization();\n    if (hasPermission) {\n    hasInitialLoadRef.current = true;\n    //  PERFORMANCE: Initial OHNE Settings laden (nur beim Bearbeiten)\n    fetchOrganization(false);\n    } else {\n      setError(t('organization.noPermission'));\n      setLoading(false);\n      hasInitialLoadRef.current = true;\n    }\n    \n    //  MEMORY: Cleanup - Settings aus State entfernen beim Unmount\n    return () => {\n      setOrganization(null);\n      setStats(null);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [permissionsLoading]);\n\n  const handleEditSuccess = () => {\n    //  PERFORMANCE: Nach Bearbeiten Settings laden (fr Anzeige)\n    fetchOrganization(true);\n    // Aktualisiere auch den OrganizationContext\n    refreshOrganization();\n  };\n\n  //  MEMORY: Settings beim Schlieen des Modals lschen\n  const handleEditModalClose = () => {\n    setIsEditModalOpen(false);\n    // Settings aus State entfernen (nur Settings, nicht die gesamte Organization)\n    if (organization?.settings) {\n      setOrganization({\n        ...organization,\n        settings: undefined\n      });\n    }\n  };\n\n  if (permissionsLoading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('common.loadingPermissions')}</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (!canViewOrganization()) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n          <div className=\"p-4 text-red-600 dark:text-red-400\">\n          {t('organization.noPermission')}\n        </div>\n      </div>\n    );\n  }\n\n  const handleCreateSuccess = () => {\n    //  PERFORMANCE: Nach Erstellen OHNE Settings laden (nicht bentigt)\n    fetchOrganization(false);\n  };\n\n  const handleJoinSuccess = async () => {\n    // Nach Beitritt: Organisation neu laden (OHNE Settings, nicht bentigt)\n    fetchOrganization(false);\n    // WICHTIG: User-Rollen neu laden, damit neue Rolle sichtbar wird\n    // OnboardingContext erkennt dann automatisch die neue Rolle\n    await fetchCurrentUser();\n  };\n\n  return (\n    <>\n      <div className=\"space-y-4\">\n        {/* Titelzeile mit Action-Buttons */}\n        <div className=\"flex items-center mb-4 sm:mb-4\">\n          {/* Linke Seite: Action-Buttons */}\n          <div className=\"flex items-center\" data-onboarding=\"organization-buttons\">\n            {/* Button: Neue Organisation erstellen - immer sichtbar (nicht nur fr Admins) */}\n            <button\n              onClick={() => setIsCreateModalOpen(true)}\n              data-onboarding=\"create-organization-button\"\n              className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center\"\n              style={{ width: '30.19px', height: '30.19px' }}\n              title={t('organization.createOrganization')}\n              aria-label={t('organization.createOrganization')}\n            >\n              <PlusIcon className=\"h-4 w-4\" />\n            </button>\n            \n            {/* Button: Organisation beitreten - immer sichtbar */}\n            <button\n              onClick={() => setIsJoinModalOpen(true)}\n              data-onboarding=\"join-organization-button\"\n              className=\"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center ml-2\"\n              style={{ width: '30.19px', height: '30.19px' }}\n              title={t('organization.joinOrganization')}\n              aria-label={t('organization.joinOrganization')}\n            >\n              <UserPlusIcon className=\"h-4 w-4\" />\n            </button>\n          </div>\n        </div>\n\n      {/* Loading State */}\n      {loading ? (\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('common.loadingOrganization')}</span>\n        </div>\n      ) : (\n        <>\n          {/* Error/Info Display */}\n          {error && (\n            <div className={`mb-4 p-4 border rounded ${\n              !organization \n                ? 'bg-blue-50 dark:bg-blue-900/30 border-blue-400 dark:border-blue-700 text-blue-700 dark:text-blue-300'\n                : 'bg-red-100 dark:bg-red-900 border-red-400 dark:border-red-700 text-red-700 dark:text-red-300'\n            }`}>\n              <div className=\"flex items-start\">\n                <div className=\"flex-shrink-0\">\n                  {!organization ? (\n                    <UserGroupIcon className=\"h-5 w-5\" />\n                  ) : (\n                    <span className=\"text-red-600 dark:text-red-400\"></span>\n                  )}\n                </div>\n                <div className=\"ml-3 flex-1\">\n                  <p className=\"font-medium\">{error}</p>\n                  {!organization && (\n                    <p className=\"mt-2 text-sm\">{t('organization.createOrJoinHint')}</p>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Card-Ansicht - nur anzeigen wenn Organisation existiert */}\n          {organization ? (\n            <>\n            {/* Card mit Organisations-Infos */}\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-4\">\n            <div>\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white flex items-center\">\n                        <BuildingOfficeIcon className=\"h-5 w-5 mr-2\" />\n                        {organization.displayName || organization.name}\n                      </h3>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n                        {organization.domain || t('organization.noDomain')}\n                      </p>\n            </div>\n                    {canManageOrganization() && (\n                      <button\n                        onClick={async () => {\n                          //  PERFORMANCE: Settings nur laden wenn Bearbeiten-Modal geffnet wird\n                          if (!organization?.settings) {\n                            await fetchOrganization(true);\n                          }\n                          setIsEditModalOpen(true);\n                        }}\n                        className=\"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1\"\n                        title={t('organization.edit.title')}\n                      >\n                        <PencilIcon className=\"h-5 w-5\" />\n                      </button>\n                    )}\n            </div>\n\n                  {/* Organisations-Infos */}\n                  <div className=\"space-y-3\">\n                    {organization.subscriptionPlan && (\n            <div>\n                        <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">{t('organization.subscriptionPlan')}:</span>\n                        <span className=\"ml-2 text-sm text-gray-900 dark:text-white capitalize\">{organization.subscriptionPlan}</span>\n              </div>\n            )}\n              </div>\n\n                  {/* Statistiken direkt in der Card */}\n          {stats && (\n                    <>\n            <div className=\"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700\">\n              <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">{t('organization.statistics')}</h3>\n              {loadingStats ? (\n                <div className=\"flex items-center justify-center py-4\">\n                  <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-2\"></div>\n                  <span className=\"text-sm text-gray-500 dark:text-gray-400\">{t('common.loadingStatistics')}</span>\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {/* Benutzer Card */}\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0 bg-blue-100 dark:bg-blue-900/30 rounded-lg p-3\">\n                        <UserGroupIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.users')}</p>\n                        <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                          {stats.currentUsers} / {stats.maxUsers}\n                        </p>\n                            {stats.utilizationPercent !== undefined && (\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                            {stats.utilizationPercent}% {t('organization.utilizationPercent')}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Rollen Card */}\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0 bg-purple-100 dark:bg-purple-900/30 rounded-lg p-3\">\n                        <ShieldCheckIcon className=\"h-6 w-6 text-purple-600 dark:text-purple-400\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.roles')}</p>\n                        <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                          {stats._count.roles}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Beitrittsanfragen Card */}\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg p-3\">\n                        <EnvelopeIcon className=\"h-6 w-6 text-yellow-600 dark:text-yellow-400\" />\n                      </div>\n                      <div className=\"ml-4\">\n                        <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.joinRequests')}</p>\n                        <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                          {stats._count.joinRequests}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Einladungen Card */}\n                  {stats._count.invitations !== undefined && (\n                    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                      <div className=\"flex items-center\">\n                        <div className=\"flex-shrink-0 bg-green-100 dark:bg-green-900/30 rounded-lg p-3\">\n                          <EnvelopeIcon className=\"h-6 w-6 text-green-600 dark:text-green-400\" />\n                        </div>\n                        <div className=\"ml-4\">\n                          <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.invitations')}</p>\n                          <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                            {stats._count.invitations}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Auslastung Card */}\n                  {stats.utilizationPercent !== undefined && (\n                    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\">\n                      <div className=\"flex items-center\">\n                        <div className=\"flex-shrink-0 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg p-3\">\n                          <ChartBarIcon className=\"h-6 w-6 text-indigo-600 dark:text-indigo-400\" />\n                        </div>\n                        <div className=\"ml-4\">\n                          <p className=\"text-sm font-medium text-gray-600 dark:text-gray-400\">{t('organization.utilization')}</p>\n                          <p className=\"text-2xl font-semibold text-gray-900 dark:text-white\">\n                            {stats.utilizationPercent}%\n                          </p>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                            {stats.availableSlots} {t('organization.availableSlots')}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n                    </>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            </>\n          ) : (\n            /* Keine Organisation - zeige Hinweis */\n            <div className=\"text-center py-8\">\n            <UserGroupIcon className=\"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500 mb-4\" />\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n              {t('organization.notFound')}\n            </h3>\n            <p className=\"text-gray-600 dark:text-gray-400\">\n              {t('organization.createOrJoinHint')}\n            </p>\n          </div>\n        )}\n        </>\n      )}\n      </div>\n\n      {/* Meine Beitrittsanfragen - immer anzeigen */}\n      <MyJoinRequestsList />\n\n      {/* Modals */}\n      <CreateOrganizationModal\n        isOpen={isCreateModalOpen}\n        onClose={() => setIsCreateModalOpen(false)}\n        onSuccess={handleCreateSuccess}\n      />\n\n      <JoinOrganizationModal\n        isOpen={isJoinModalOpen}\n        onClose={() => setIsJoinModalOpen(false)}\n        onSuccess={handleJoinSuccess}\n      />\n\n      <EditOrganizationModal\n        isOpen={isEditModalOpen}\n        onClose={handleEditModalClose}\n        onSuccess={handleEditSuccess}\n        organization={organization}\n      />\n    </>\n  );\n};\n\nexport default OrganizationSettings; ","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon, XCircleIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { OrganizationJoinRequest, ProcessJoinRequestRequest } from '../../types/organization.ts';\nimport { roleApi } from '../../api/apiClient.ts';\nimport { Role } from '../../types/interfaces.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport { useSidepane } from '../../contexts/SidepaneContext.tsx';\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  joinRequest: OrganizationJoinRequest | null;\n  onSuccess: () => void;\n}\n\nconst ProcessJoinRequestModal: React.FC<Props> = ({ isOpen, onClose, joinRequest, onSuccess }) => {\n  const { t } = useTranslation();\n  const [action, setAction] = useState<'approve' | 'reject'>('approve');\n  const [roleId, setRoleId] = useState<number | null>(null);\n  const [response, setResponse] = useState<string>('');\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [loadingRoles, setLoadingRoles] = useState<boolean>(false);\n  const [saving, setSaving] = useState<boolean>(false);\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const { showMessage } = useMessage();\n\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    \n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  useEffect(() => {\n    if (isOpen && joinRequest) {\n      // Reset form when modal opens\n      setAction('approve');\n      setRoleId(null);\n      setResponse('');\n      setErrors({});\n      \n      // Load roles for the organization\n      if (joinRequest.organizationId) {\n        fetchRoles();\n      }\n    }\n  }, [isOpen, joinRequest]);\n\n  const fetchRoles = async () => {\n    try {\n      setLoadingRoles(true);\n      const response = await roleApi.getAll();\n      if (response.data && Array.isArray(response.data)) {\n        setRoles(response.data);\n      }\n    } catch (err: any) {\n      console.error('Fehler beim Laden der Rollen:', err);\n      showMessage(t('joinRequest.loadRolesError'), 'error');\n    } finally {\n      setLoadingRoles(false);\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: Record<string, string> = {};\n    \n    if (action === 'approve' && !roleId) {\n      newErrors.roleId = t('joinRequest.selectRoleError');\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      showMessage(t('joinRequest.fillRequired'), 'error');\n      return;\n    }\n    \n    if (!joinRequest) {\n      return;\n    }\n    \n    try {\n      setSaving(true);\n      const data: ProcessJoinRequestRequest = {\n        action,\n        response: response.trim() || undefined,\n        roleId: action === 'approve' ? roleId || undefined : undefined\n      };\n      \n      await organizationService.processJoinRequest(joinRequest.id, data);\n      showMessage(\n        action === 'approve' ? t('joinRequest.approveSuccess') : t('joinRequest.rejectSuccess'),\n        'success'\n      );\n      \n      // Reset form\n      setAction('approve');\n      setRoleId(null);\n      setResponse('');\n      setErrors({});\n      \n      onClose();\n      onSuccess();\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || t('joinRequest.processError');\n      showMessage(errorMessage, 'error');\n      setErrors({ submit: errorMessage });\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleClose = () => {\n    setAction('approve');\n    setRoleId(null);\n    setResponse('');\n    setErrors({});\n    onClose();\n  };\n\n  if (!joinRequest) {\n    return null;\n  }\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('joinRequest.title')}\n              </Dialog.Title>\n              <button\n                onClick={handleClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit} className=\"p-4\">\n              {errors.submit && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {errors.submit}\n                </div>\n              )}\n\n              <div className=\"space-y-4\">\n                {/* Antragsteller Info */}\n                <div className=\"p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\n                  <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">{t('joinRequest.applicant')}:</p>\n                  <p className=\"text-sm text-gray-900 dark:text-white\">\n                    {joinRequest.requester.firstName} {joinRequest.requester.lastName}\n                  </p>\n                  <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.requester.email}</p>\n                  {joinRequest.message && (\n                    <div className=\"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600\">\n                      <p className=\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">{t('joinRequest.message')}:</p>\n                      <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.message}</p>\n                    </div>\n                  )}\n                </div>\n\n                {/* Aktion (Genehmigen/Ablehnen) */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                    {t('joinRequest.actionRequired')}\n                  </label>\n                  <div className=\"flex gap-4 mt-2\">\n                    <label className=\"flex items-center\">\n                      <input\n                        type=\"radio\"\n                        value=\"approve\"\n                        checked={action === 'approve'}\n                        onChange={(e) => {\n                          setAction(e.target.value as 'approve' | 'reject');\n                          setErrors({});\n                        }}\n                        className=\"mr-2 text-blue-600 focus:ring-blue-500\"\n                      />\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300\">{t('joinRequest.approve')}</span>\n                    </label>\n                    <label className=\"flex items-center\">\n                      <input\n                        type=\"radio\"\n                        value=\"reject\"\n                        checked={action === 'reject'}\n                        onChange={(e) => {\n                          setAction(e.target.value as 'approve' | 'reject');\n                          setErrors({});\n                        }}\n                        className=\"mr-2 text-red-600 focus:ring-red-500\"\n                      />\n                      <span className=\"text-sm text-gray-700 dark:text-gray-300\">{t('joinRequest.reject')}</span>\n                    </label>\n                  </div>\n                </div>\n\n                {/* Rollenauswahl (nur bei Genehmigung) */}\n                {action === 'approve' && (\n                  <div>\n                    <label \n                      htmlFor=\"roleId\" \n                      className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                    >\n                      {t('joinRequest.assignRole')}\n                    </label>\n                    {loadingRoles ? (\n                      <div className=\"flex items-center py-2\">\n                        <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"></div>\n                        <span className=\"text-sm text-gray-500 dark:text-gray-400\">{t('joinRequest.loadingRoles')}</span>\n                      </div>\n                    ) : (\n                      <select\n                        id=\"roleId\"\n                        value={roleId || ''}\n                        onChange={(e) => {\n                          setRoleId(Number(e.target.value) || null);\n                          if (errors.roleId) {\n                            setErrors(prev => ({ ...prev, roleId: '' }));\n                          }\n                        }}\n                        className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                          errors.roleId \n                            ? 'border-red-300 dark:border-red-600' \n                            : 'border-gray-300 dark:border-gray-600'\n                        }`}\n                      >\n                        <option value=\"\">{t('joinRequest.selectRole')}</option>\n                        {roles.map(role => (\n                          <option key={role.id} value={role.id}>\n                            {role.name} {role.description ? `- ${role.description}` : ''}\n                          </option>\n                        ))}\n                      </select>\n                    )}\n                    {errors.roleId && (\n                      <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.roleId}</p>\n                    )}\n                  </div>\n                )}\n\n                {/* Antwort-Message */}\n                <div>\n                  <label \n                    htmlFor=\"response\" \n                    className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                  >\n                    {t('joinRequest.response')}\n                  </label>\n                  <textarea\n                    id=\"response\"\n                    value={response}\n                    onChange={(e) => setResponse(e.target.value)}\n                    rows={3}\n                    placeholder={t('joinRequest.addOptional', { type: action === 'approve' ? t('joinRequest.welcomeMessage') : t('joinRequest.rejectionReason') })}\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end pt-4 gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                  title={t('joinRequest.cancel')}\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                  type=\"submit\"\n                  disabled={saving}\n                  className={`p-2 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors ${\n                    action === 'approve'\n                      ? 'bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:ring-green-500'\n                      : 'bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 focus:ring-red-500'\n                  }`}\n                  title={saving ? (action === 'approve' ? t('joinRequest.approving') : t('joinRequest.rejecting')) : (action === 'approve' ? t('joinRequest.approve') : t('joinRequest.reject'))}\n                >\n                  {saving ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : action === 'approve' ? (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  ) : (\n                    <XCircleIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={handleClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('joinRequest.title')}\n          </h2>\n          <button\n            onClick={handleClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {errors.submit && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {errors.submit}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {/* Antragsteller Info */}\n            <div className=\"p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\n              <p className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">{t('joinRequest.applicant')}:</p>\n              <p className=\"text-sm text-gray-900 dark:text-white\">\n                {joinRequest.requester.firstName} {joinRequest.requester.lastName}\n              </p>\n              <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.requester.email}</p>\n              {joinRequest.message && (\n                <div className=\"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600\">\n                  <p className=\"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1\">{t('joinRequest.message')}:</p>\n                  <p className=\"text-xs text-gray-600 dark:text-gray-400\">{joinRequest.message}</p>\n                </div>\n              )}\n            </div>\n\n            {/* Aktion (Genehmigen/Ablehnen) */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                {t('joinRequest.actionRequired')}\n              </label>\n              <div className=\"flex gap-4 mt-2\">\n                <label className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                    value=\"approve\"\n                    checked={action === 'approve'}\n                    onChange={(e) => {\n                      setAction(e.target.value as 'approve' | 'reject');\n                      setErrors({});\n                    }}\n                    className=\"mr-2 text-blue-600 focus:ring-blue-500\"\n                  />\n                  <span className=\"text-sm text-gray-700 dark:text-gray-300\">{t('joinRequest.approve')}</span>\n                </label>\n                <label className=\"flex items-center\">\n                  <input\n                    type=\"radio\"\n                    value=\"reject\"\n                    checked={action === 'reject'}\n                    onChange={(e) => {\n                      setAction(e.target.value as 'approve' | 'reject');\n                      setErrors({});\n                    }}\n                    className=\"mr-2 text-red-600 focus:ring-red-500\"\n                  />\n                  <span className=\"text-sm text-gray-700 dark:text-gray-300\">{t('joinRequest.reject')}</span>\n                </label>\n              </div>\n            </div>\n\n            {/* Rollenauswahl (nur bei Genehmigung) */}\n            {action === 'approve' && (\n              <div>\n                <label \n                  htmlFor=\"roleId\" \n                  className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n                >\n                  {t('joinRequest.assignRole')}\n                </label>\n                {loadingRoles ? (\n                  <div className=\"flex items-center py-2\">\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"></div>\n                    <span className=\"text-sm text-gray-500 dark:text-gray-400\">{t('joinRequest.loadingRoles')}</span>\n                  </div>\n                ) : (\n                  <select\n                    id=\"roleId\"\n                    value={roleId || ''}\n                    onChange={(e) => {\n                      setRoleId(Number(e.target.value) || null);\n                      if (errors.roleId) {\n                        setErrors(prev => ({ ...prev, roleId: '' }));\n                      }\n                    }}\n                    className={`mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ${\n                      errors.roleId \n                        ? 'border-red-300 dark:border-red-600' \n                        : 'border-gray-300 dark:border-gray-600'\n                    }`}\n                  >\n                    <option value=\"\">{t('joinRequest.selectRole')}</option>\n                    {roles.map(role => (\n                      <option key={role.id} value={role.id}>\n                        {role.name} {role.description ? `- ${role.description}` : ''}\n                      </option>\n                    ))}\n                  </select>\n                )}\n                {errors.roleId && (\n                  <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.roleId}</p>\n                )}\n              </div>\n            )}\n\n            {/* Antwort-Message */}\n            <div>\n              <label \n                htmlFor=\"response\" \n                className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\"\n              >\n                {t('joinRequest.response')}\n              </label>\n              <textarea\n                id=\"response\"\n                value={response}\n                onChange={(e) => setResponse(e.target.value)}\n                rows={3}\n                placeholder={t('joinRequest.addOptional', { type: action === 'approve' ? t('joinRequest.welcomeMessage') : t('joinRequest.rejectionReason') })}\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2\"\n              />\n            </div>\n\n            <div className=\"flex justify-end pt-4 gap-2\">\n              <button\n                type=\"button\"\n                onClick={handleClose}\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                title={t('common.cancel')}\n              >\n                <XMarkIcon className=\"h-5 w-5\" />\n              </button>\n              <button\n                type=\"submit\"\n                disabled={saving}\n                className={`p-2 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${\n                  action === 'approve'\n                    ? 'bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:ring-green-500'\n                    : 'bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 focus:ring-red-500'\n                }`}\n                title={saving ? (action === 'approve' ? 'Genehmige...' : 'Lehne ab...') : (action === 'approve' ? 'Genehmigen' : 'Ablehnen')}\n              >\n                {saving ? (\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                ) : action === 'approve' ? (\n                  <CheckIcon className=\"h-5 w-5\" />\n                ) : (\n                  <XCircleIcon className=\"h-5 w-5\" />\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ProcessJoinRequestModal;\n\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { UserPlusIcon, FunnelIcon, PencilIcon } from '@heroicons/react/24/outline';\nimport { organizationService } from '../../services/organizationService.ts';\nimport { OrganizationJoinRequest } from '../../types/organization.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport useMessage from '../../hooks/useMessage.ts';\nimport FilterPane from '../FilterPane.tsx';\nimport SavedFilterTags from '../SavedFilterTags.tsx';\nimport { FilterCondition } from '../FilterRow.tsx';\nimport ProcessJoinRequestModal from './ProcessJoinRequestModal.tsx';\nimport { API_ENDPOINTS } from '../../config/api.ts';\nimport axiosInstance from '../../config/axios.ts';\n\n// Status-Badge Funktionen\nconst getStatusColor = (status: string) => {\n  switch (status) {\n    case 'pending':\n      return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300';\n    case 'approved':\n      return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300';\n    case 'rejected':\n      return 'bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300';\n    case 'withdrawn':\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\n    default:\n      return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\n  }\n};\n\nconst getStatusText = (status: string, t: any) => {\n  switch (status) {\n    case 'pending':\n      return t('joinRequestsList.status.pending');\n    case 'approved':\n      return t('joinRequestsList.status.approved');\n    case 'rejected':\n      return t('joinRequestsList.status.rejected');\n    case 'withdrawn':\n      return t('joinRequestsList.status.withdrawn');\n    default:\n      return status;\n  }\n};\n\nconst JOIN_REQUESTS_TABLE_ID = 'join-requests-table';\n\nconst JoinRequestsList: React.FC = () => {\n  const { t } = useTranslation();\n  const [joinRequests, setJoinRequests] = useState<OrganizationJoinRequest[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isFilterPanelOpen, setIsFilterPanelOpen] = useState<boolean>(false);\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const [isProcessModalOpen, setIsProcessModalOpen] = useState<boolean>(false);\n  const [selectedRequest, setSelectedRequest] = useState<OrganizationJoinRequest | null>(null);\n  \n  // Filter State Management (Controlled Mode)\n  const [activeFilterName, setActiveFilterName] = useState<string>('Alle');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n  \n  const { canViewJoinRequests, canManageJoinRequests, loading: permissionsLoading } = usePermissions();\n  const { showMessage } = useMessage();\n  const mountedRef = useRef(true);\n  const hasInitialLoadRef = useRef(false);\n\n  // Debug: Log permissionsLoading nderungen\n  useEffect(() => {\n    console.log('[JoinRequestsList] permissionsLoading gendert:', permissionsLoading);\n  }, [permissionsLoading]);\n\n  // Reset beim Mount - wichtig fr Neuladen wenn Komponente neu gemountet wird\n  useEffect(() => {\n    console.log('[JoinRequestsList] Component mounted, reset hasInitialLoadRef');\n    hasInitialLoadRef.current = false;\n    mountedRef.current = true;\n    \n    return () => {\n      console.log('[JoinRequestsList] Component unmounting');\n      mountedRef.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    console.log('[JoinRequestsList] useEffect triggered', { \n      permissionsLoading, \n      hasInitialLoad: hasInitialLoadRef.current,\n      joinRequestsCount: joinRequests.length \n    });\n    \n    // Warte bis Berechtigungen geladen sind\n    if (permissionsLoading) {\n      console.log('[JoinRequestsList] Warte auf Berechtigungen...');\n      return;\n    }\n\n    // Prfe Berechtigung direkt\n    const hasPermission = canViewJoinRequests();\n    console.log('[JoinRequestsList] Berechtigung geprft:', hasPermission);\n    \n    if (!hasPermission) {\n      console.log('[JoinRequestsList] Keine Berechtigung zum Anzeigen');\n      setError(t('joinRequestsList.noPermission'));\n      setLoading(false);\n      hasInitialLoadRef.current = true;\n      return;\n    }\n\n    // WICHTIG: Nur laden wenn noch nicht erfolgreich geladen wurde\n    // Das verhindert unntige Re-Fetches bei jedem permissionsLoading-Change\n    if (hasInitialLoadRef.current) {\n      console.log('[JoinRequestsList] Bereits geladen, berspringe Fetch');\n      return;\n    }\n\n    console.log('[JoinRequestsList] Starte Fetch der Join Requests...');\n    \n    const fetchJoinRequests = async () => {\n      if (!mountedRef.current) {\n        console.log('[JoinRequestsList] Component unmounted, breche ab');\n        return;\n      }\n      \n      try {\n        console.log('[JoinRequestsList] Setze loading auf true');\n        setLoading(true);\n        setError(null);\n        \n        console.log('[JoinRequestsList] Rufe organizationService.getJoinRequests() auf...');\n        console.log('[JoinRequestsList] API Endpoint:', API_ENDPOINTS.ORGANIZATIONS.JOIN_REQUESTS);\n        \n        const requests = await organizationService.getJoinRequests();\n        \n        console.log('[JoinRequestsList] Antwort erhalten:', requests);\n        console.log('[JoinRequestsList] Antwort Typ:', typeof requests);\n        console.log('[JoinRequestsList] Ist Array:', Array.isArray(requests));\n        console.log('[JoinRequestsList] Ist null/undefined:', requests === null || requests === undefined);\n        \n        if (!mountedRef.current) {\n          console.log('[JoinRequestsList] Component whrend Request unmounted');\n          return;\n        }\n        \n        // Validiere, dass die Antwort vorhanden ist\n        if (requests === null || requests === undefined) {\n          console.error('[JoinRequestsList]  Antwort ist null oder undefined!');\n          throw new Error('Ungltige Antwort vom Server: Antwort ist null oder undefined');\n        }\n        \n        // Validiere, dass die Antwort ein Array ist\n        if (!Array.isArray(requests)) {\n          console.error('[JoinRequestsList]  Antwort ist kein Array!', requests);\n          throw new Error('Ungltige Antwort vom Server: Erwartetes Array, erhalten: ' + typeof requests);\n        }\n        \n        console.log('[JoinRequestsList]  Setze', requests.length, 'Join Requests');\n        setJoinRequests(requests);\n        setError(null); // Fehler zurcksetzen bei Erfolg\n        hasInitialLoadRef.current = true; // Nur bei Erfolg setzen\n      } catch (err: any) {\n        console.error('[JoinRequestsList]  Fehler beim Laden:', err);\n        console.error('[JoinRequestsList] Fehler Details:', {\n          message: err.message,\n          response: err.response,\n          status: err.response?.status,\n          data: err.response?.data,\n          stack: err.stack\n        });\n        \n        if (!mountedRef.current) {\n          console.log('[JoinRequestsList] Component whrend Error-Handling unmounted');\n          return;\n        }\n        \n        const errorMessage = err.response?.data?.message || err.message || t('joinRequestsList.loadError', { defaultValue: 'Fehler beim Laden der Beitrittsanfragen' });\n        console.log('[JoinRequestsList] Zeige Fehlermeldung:', errorMessage);\n        setError(errorMessage);\n        // showMessage nur auerhalb useEffect verwenden, um Re-Renders zu vermeiden\n        // Verwende setTimeout, um es asynchron auszufhren\n        setTimeout(() => {\n          showMessage(errorMessage, 'error');\n        }, 0);\n        // Bei Fehler NICHT hasInitialLoadRef setzen, damit bei nchstem permissionsLoading-Change neu geladen wird\n      } finally {\n        if (mountedRef.current) {\n          console.log('[JoinRequestsList] Setze loading auf false');\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchJoinRequests();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [permissionsLoading]); // canViewJoinRequests ist eine Funktion, nicht als Dependency\n\n  const handleOpenProcessModal = (request: OrganizationJoinRequest) => {\n    if (!canManageJoinRequests()) {\n      const errorMessage = t('joinRequestsList.noPermissionEdit');\n      setError(errorMessage);\n      showMessage(errorMessage, 'error');\n      return;\n    }\n    setSelectedRequest(request);\n    setIsProcessModalOpen(true);\n  };\n\n  const handleProcessSuccess = async () => {\n    // Neulade die Liste nach erfolgreicher Bearbeitung\n    // Reset das Flag, damit neu geladen werden kann\n    hasInitialLoadRef.current = false;\n    \n    try {\n      setLoading(true);\n      const requests = await organizationService.getJoinRequests();\n      setJoinRequests(requests);\n      setError(null);\n      hasInitialLoadRef.current = true;\n    } catch (err: any) {\n      const errorMessage = err.response?.data?.message || 'Fehler beim Laden der Beitrittsanfragen';\n      setError(errorMessage);\n      hasInitialLoadRef.current = true;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Filter-Funktionen\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n  };\n\n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n\n  // Filter Change Handler (Controlled Mode)\n  const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators);\n  };\n\n  const getActiveFilterCount = () => {\n    return filterConditions.length;\n  };\n\n  // Initialer Default-Filter setzen (Controlled Mode)\n  useEffect(() => {\n    const setInitialFilter = async () => {\n      try {\n        const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(JOIN_REQUESTS_TABLE_ID));\n        const filters = response.data;\n        \n        const alleFilter = filters.find((filter: any) => filter.name === 'Alle');\n        if (alleFilter) {\n          setActiveFilterName('Alle');\n          setSelectedFilterId(alleFilter.id);\n          applyFilterConditions(alleFilter.conditions, alleFilter.operators);\n        }\n      } catch (error) {\n        console.error('Fehler beim Setzen des initialen Filters:', error);\n      }\n    };\n\n    setInitialFilter();\n  }, []);\n\n  // Standard-Filter erstellen und speichern\n  useEffect(() => {\n    const createStandardFilters = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        \n        if (!token) {\n          console.error('Nicht authentifiziert');\n          return;\n        }\n\n        // Prfen, ob die Standard-Filter bereits existieren\n        const existingFiltersResponse = await axiosInstance.get(\n          API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(JOIN_REQUESTS_TABLE_ID)\n        );\n\n        const existingFilters = existingFiltersResponse.data || [];\n        const alleFilterExists = existingFilters.some((filter: any) => filter.name === 'Alle');\n\n        // Erstelle \"Alle\"-Filter, wenn er noch nicht existiert\n        if (!alleFilterExists) {\n          const alleFilter = {\n            tableId: JOIN_REQUESTS_TABLE_ID,\n            name: 'Alle',\n            conditions: [],\n            operators: []\n          };\n\n          await axiosInstance.post(\n            API_ENDPOINTS.SAVED_FILTERS.BASE,\n            alleFilter\n          );\n          console.log('Alle-Filter fr Join Requests erstellt');\n        }\n      } catch (error) {\n        console.error('Fehler beim Erstellen der Standard-Filter:', error);\n      }\n    };\n\n    createStandardFilters();\n  }, []);\n\n  // Gefilterte Join-Requests\n  const filteredJoinRequests = useMemo(() => {\n    let filtered = [...joinRequests];\n\n    // Suchfeld-Filter\n    if (searchTerm) {\n      const searchLower = searchTerm.toLowerCase();\n      filtered = filtered.filter(request => {\n        const requesterName = `${request.requester.firstName} ${request.requester.lastName}`.toLowerCase();\n        const requesterEmail = request.requester.email?.toLowerCase() || '';\n        const message = request.message?.toLowerCase() || '';\n        return requesterName.includes(searchLower) || requesterEmail.includes(searchLower) || message.includes(searchLower);\n      });\n    }\n\n    // Filter-Bedingungen aus FilterPane\n    if (filterConditions.length > 0) {\n      filtered = filterConditions.reduce((acc, condition, index) => {\n        if (!condition.column || condition.value === null || condition.value === '') {\n          return acc;\n        }\n\n        const operator = condition.operator;\n        const value = condition.value;\n\n        return acc.filter(request => {\n          switch (condition.column) {\n            case 'requester':\n              const requesterName = `${request.requester.firstName} ${request.requester.lastName}`.toLowerCase();\n              const requesterEmail = request.requester.email?.toLowerCase() || '';\n              const searchValue = String(value).toLowerCase();\n              \n              if (operator === 'contains') {\n                return requesterName.includes(searchValue) || requesterEmail.includes(searchValue);\n              } else if (operator === 'equals') {\n                return requesterName === searchValue || requesterEmail === searchValue;\n              } else if (operator === 'startsWith') {\n                return requesterName.startsWith(searchValue) || requesterEmail.startsWith(searchValue);\n    }\n              return false;\n\n            case 'message':\n              const message = request.message?.toLowerCase() || '';\n              const msgValue = String(value).toLowerCase();\n              \n              if (operator === 'contains') {\n                return message.includes(msgValue);\n              } else if (operator === 'equals') {\n                return message === msgValue;\n              } else if (operator === 'startsWith') {\n                return message.startsWith(msgValue);\n              }\n              return false;\n\n            case 'status':\n              if (operator === 'equals') {\n                return request.status === value;\n              }\n              return false;\n\n            default:\n              return true;\n          }\n        });\n      }, filtered);\n    }\n\n    return filtered;\n  }, [joinRequests, searchTerm, filterConditions, filterLogicalOperators]);\n\n  if (permissionsLoading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('joinRequestsList.loadingPermissions')}</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (!canViewJoinRequests()) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6\">\n      <div className=\"p-4 text-red-600 dark:text-red-400\">\n        {t('joinRequestsList.noPermission')}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 sm:p-6 mb-6\">\n      {/* Titelzeile mit Icon, Suchfeld, Filter-Button */}\n      <div className=\"flex items-center justify-between mb-4 sm:mb-4\">\n        <h2 className=\"text-xl sm:text-xl font-semibold flex items-center dark:text-white\">\n          <UserPlusIcon className=\"h-6 w-6 sm:h-6 sm:w-6 mr-2 sm:mr-2\" />\n          {t('joinRequestsList.title')}\n        </h2>\n        \n        <div className=\"flex items-center gap-1.5\">\n          {/* Suchfeld */}\n          <input\n            type=\"text\"\n            placeholder={t('common.search', { defaultValue: 'Suchen...' })}\n            className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n\n          {/* Filter-Button */}\n          <button\n            className={`p-2 rounded-md border ${getActiveFilterCount() > 0 ? 'border-blue-300 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700'} relative`}\n            onClick={() => setIsFilterPanelOpen(!isFilterPanelOpen)}\n            title={t('common.filter')}\n          >\n            <FunnelIcon className=\"h-5 w-5\" />\n            {getActiveFilterCount() > 0 && (\n              <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center\">\n                {getActiveFilterCount()}\n              </span>\n            )}\n          </button>\n        </div>\n      </div>\n\n      {/* Filter-Panel */}\n      {isFilterPanelOpen && (\n        <div className=\"mb-4\">\n          <FilterPane\n            columns={[\n              { id: 'requester', label: t('joinRequestsList.filter.requester') },\n              { id: 'message', label: t('joinRequestsList.filter.message') },\n              { id: 'status', label: t('joinRequestsList.status.title', { defaultValue: 'Status' }) }\n            ]}\n            onApply={applyFilterConditions}\n            onReset={resetFilterConditions}\n            savedConditions={filterConditions}\n            savedOperators={filterLogicalOperators}\n            tableId={JOIN_REQUESTS_TABLE_ID}\n          />\n        </div>\n      )}\n\n      {/* Gespeicherte Filter als Tags anzeigen */}\n      <SavedFilterTags\n        tableId={JOIN_REQUESTS_TABLE_ID}\n        onSelectFilter={applyFilterConditions}\n        onReset={resetFilterConditions}\n        activeFilterName={activeFilterName}\n        selectedFilterId={selectedFilterId}\n        onFilterChange={handleFilterChange}\n        defaultFilterName=\"Alle\"\n      />\n\n      {/* Error Display */}\n      {error && (\n        <div className=\"mb-4 p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded\">\n          {error}\n        </div>\n      )}\n\n      {/* Loading State */}\n      {loading ? (\n        <div className=\"flex items-center justify-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-gray-700 dark:text-gray-300\">{t('joinRequestsList.loading')}</span>\n        </div>\n      ) : filteredJoinRequests.length === 0 ? (\n        <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n          {joinRequests.length === 0 \n            ? t('joinRequestsList.noRequests')\n            : t('joinRequestsList.noMatching')}\n        </div>\n      ) : (\n        /* Cards fr Join-Requests */\n        <div className=\"space-y-4\">\n          {filteredJoinRequests.map(request => (\n            <div\n              key={request.id}\n              className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow\"\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                        {request.requester.firstName} {request.requester.lastName}\n                      </h3>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        {request.requester.email}\n              </p>\n                    </div>\n                    <span className={`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(request.status)}`}>\n                      {getStatusText(request.status, t)}\n                    </span>\n                  </div>\n\n                  {request.message && (\n                    <div className=\"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600\">\n                      <p className=\"text-sm text-gray-700 dark:text-gray-300\">\n                        <span className=\"font-medium\">{t('joinRequestsList.filter.message')}:</span> {request.message}\n                      </p>\n                    </div>\n                  )}\n\n                  {request.response && (\n                    <div className=\"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-700\">\n                      <p className=\"text-sm text-blue-700 dark:text-blue-300\">\n                        <span className=\"font-medium\">{t('joinRequestsList.response')}:</span> {request.response}\n                      </p>\n                    </div>\n                  )}\n\n              {request.status === 'pending' && canManageJoinRequests() && (\n                    <div className=\"mt-4 flex items-center gap-2\">\n                  <button \n                        onClick={() => handleOpenProcessModal(request)}\n                        className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center\"\n                      >\n                        <PencilIcon className=\"h-4 w-4 mr-1\" />\n                        {t('joinRequestsList.edit')}\n                  </button>\n                </div>\n              )}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Process Join Request Modal */}\n      <ProcessJoinRequestModal\n        isOpen={isProcessModalOpen}\n        onClose={() => {\n          setIsProcessModalOpen(false);\n          setSelectedRequest(null);\n        }}\n        joinRequest={selectedRequest}\n        onSuccess={handleProcessSuccess}\n      />\n    </div>\n  );\n};\n\nexport default JoinRequestsList; ","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { UserGroupIcon, UserIcon, ShieldCheckIcon, MapPinIcon, TruckIcon } from '@heroicons/react/24/outline';\nimport UserManagementTab from '../components/UserManagementTab.tsx';\nimport RoleManagementTab from '../components/RoleManagementTab.tsx';\nimport BranchManagementTab from '../components/BranchManagementTab.tsx';\nimport TourProvidersTab from '../components/tours/TourProvidersTab.tsx';\nimport ToursTab from '../components/tours/ToursTab.tsx';\nimport useMessage from '../hooks/useMessage.ts';\nimport OrganizationSettings from '../components/organization/OrganizationSettings.tsx';\nimport JoinRequestsList from '../components/organization/JoinRequestsList.tsx';\n\nconst Organisation: React.FC = () => {\n  const { t } = useTranslation();\n  // Gemeinsame States\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const { showMessage } = useMessage();\n\n  const { \n    isAdmin, \n    hasPermission, \n    canViewOrganization,\n    loading: permissionsLoading\n  } = usePermissions();\n\n  // Berechtigungen prfen\n  const canViewOrganisation = hasPermission('organization_management', 'read', 'page');\n  const canViewUsers = hasPermission('users', 'read', 'table');\n  const canViewRoles = hasPermission('roles', 'read', 'table');\n  const canViewBranches = hasPermission('branches', 'read', 'table');\n  const canViewProviders = hasPermission('tour_providers', 'read', 'table');\n  const canViewOrg = canViewOrganization();\n\n  const [activeTabState, setActiveTabState] = useState<'users' | 'roles' | 'branches' | 'providers' | 'organization'>('users');\n  const [providersViewMode, setProvidersViewMode] = useState<'tours' | 'providers'>('tours');\n  const isInitialized = useRef(false);\n\n  // Tab beim ersten Laden basierend auf Berechtigungen setzen (nur wenn Berechtigungen geladen sind)\n  // Reihenfolge: users -> roles -> branches -> providers -> organization\n  useEffect(() => {\n    if (!permissionsLoading && !isInitialized.current) {\n      let defaultTab: 'users' | 'roles' | 'branches' | 'providers' | 'organization' = 'organization'; // Fallback\n      \n      if (canViewUsers) {\n        defaultTab = 'users';\n      } else if (canViewRoles) {\n        defaultTab = 'roles';\n      } else if (canViewBranches) {\n        defaultTab = 'branches';\n      } else if (canViewProviders) {\n        defaultTab = 'providers';\n      } else if (canViewOrg) {\n        defaultTab = 'organization';\n      }\n      \n      setActiveTabState(defaultTab);\n      isInitialized.current = true;\n    }\n  }, [permissionsLoading, canViewUsers, canViewRoles, canViewBranches, canViewProviders, canViewOrg]);\n\n  // Tab-Wechsel Handler - Fehler beim Wechsel zurcksetzen\n  const handleTabChange = (tab: 'users' | 'roles' | 'branches' | 'providers' | 'organization') => {\n    // Prfe Berechtigung fr den Tab\n    if (tab === 'users' && !canViewUsers) {\n      return; // Tab nicht aktivierbar\n    }\n    if (tab === 'roles' && !canViewRoles) {\n      return; // Tab nicht aktivierbar\n    }\n    if (tab === 'branches' && !canViewBranches) {\n      return; // Tab nicht aktivierbar\n    }\n    if (tab === 'providers' && !canViewProviders) {\n      return; // Tab nicht aktivierbar\n    }\n    if (tab === 'organization' && !canViewOrg) {\n      return; // Tab nicht aktivierbar\n    }\n    setActiveTabState(tab);\n    setError(null);\n  };\n\n  // Gemeinsame Fehlerbehandlung\n  const handleError = (err: any) => {\n    let message = t('errors.unknownError');\n    if (err.response?.data?.message) {\n      message = err.response.data.message;\n    } else if (err instanceof Error) {\n      message = err.message;\n    }\n    setError(message);\n    showMessage(message, 'error');\n  };\n\n  // Keine Berechtigung fr die Seite\n  if (!canViewOrganisation) {\n    return <div className=\"p-4 text-red-600 dark:text-red-400\">{t('organisation.noPermission')}</div>;\n  }\n\n  return (\n    <div className=\"min-h-screen dark:bg-gray-900\">\n      <div className=\"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6\">\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n          {/* Header mit Icon */}\n          <div className=\"flex items-center mb-6\">\n            <UserGroupIcon className=\"h-6 w-6 mr-2 dark:text-white\" />\n            <h2 className=\"text-xl font-semibold dark:text-white\">{t('organisation.title')}</h2>\n          </div>\n\n          {/* Tabs fr Navigation */}\n          <div className=\"border-b border-gray-200 dark:border-gray-700 mb-6\">\n            <nav className=\"-mb-px flex space-x-4 sm:space-x-8 overflow-x-auto overflow-y-hidden\">\n              {/* Users Tab - immer sichtbar, aber mit Pro-Badge wenn nicht berechtigt */}\n              <button\n                className={`${\n                  activeTabState === 'users' && canViewUsers\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                    : !canViewUsers\n                    ? 'border-transparent text-gray-400 dark:text-gray-500 cursor-not-allowed opacity-60'\n                    : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                } whitespace-nowrap py-2 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center relative flex-shrink-0`}\n                onClick={() => canViewUsers && handleTabChange('users')}\n                disabled={!canViewUsers}\n              >\n                <UserIcon className=\"h-3 w-3 sm:h-5 sm:w-5 mr-1 sm:mr-2\" />\n                {t('organisation.tabs.users')}\n                {!canViewUsers && (\n                  <span className=\"ml-1 sm:ml-2 px-1 sm:px-2 py-0.5 text-[0.625rem] sm:text-xs font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded\">\n                    PRO\n                  </span>\n                )}\n              </button>\n\n              {/* Roles Tab - immer sichtbar, aber mit Pro-Badge wenn nicht berechtigt */}\n              <button\n                className={`${\n                  activeTabState === 'roles' && canViewRoles\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                    : !canViewRoles\n                    ? 'border-transparent text-gray-400 dark:text-gray-500 cursor-not-allowed opacity-60'\n                    : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                } whitespace-nowrap py-2 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center relative flex-shrink-0`}\n                onClick={() => canViewRoles && handleTabChange('roles')}\n                disabled={!canViewRoles}\n              >\n                <ShieldCheckIcon className=\"h-3 w-3 sm:h-5 sm:w-5 mr-1 sm:mr-2\" />\n                {t('organisation.tabs.roles')}\n                {!canViewRoles && (\n                  <span className=\"ml-1 sm:ml-2 px-1 sm:px-2 py-0.5 text-[0.625rem] sm:text-xs font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded\">\n                    PRO\n                  </span>\n                )}\n              </button>\n\n              {/* Branches Tab - immer sichtbar, aber mit Pro-Badge wenn nicht berechtigt */}\n              <button\n                className={`${\n                  activeTabState === 'branches' && canViewBranches\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                    : !canViewBranches\n                    ? 'border-transparent text-gray-400 dark:text-gray-500 cursor-not-allowed opacity-60'\n                    : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                } whitespace-nowrap py-2 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center relative flex-shrink-0`}\n                onClick={() => canViewBranches && handleTabChange('branches')}\n                disabled={!canViewBranches}\n              >\n                <MapPinIcon className=\"h-3 w-3 sm:h-5 sm:w-5 mr-1 sm:mr-2\" />\n                {t('organisation.tabs.branches', { defaultValue: 'Niederlassungen' })}\n                {!canViewBranches && (\n                  <span className=\"ml-1 sm:ml-2 px-1 sm:px-2 py-0.5 text-[0.625rem] sm:text-xs font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded\">\n                    PRO\n                  </span>\n                )}\n              </button>\n\n              {/* Providers Tab - immer sichtbar, aber mit Pro-Badge wenn nicht berechtigt */}\n              <button\n                className={`${\n                  activeTabState === 'providers' && canViewProviders\n                    ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                    : !canViewProviders\n                    ? 'border-transparent text-gray-400 dark:text-gray-500 cursor-not-allowed opacity-60'\n                    : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                } whitespace-nowrap py-2 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center relative flex-shrink-0`}\n                onClick={() => canViewProviders && handleTabChange('providers')}\n                disabled={!canViewProviders}\n              >\n                <TruckIcon className=\"h-3 w-3 sm:h-5 sm:w-5 mr-1 sm:mr-2\" />\n                {t('organisation.tabs.providers', { defaultValue: 'Proveedores' })}\n                {!canViewProviders && (\n                  <span className=\"ml-1 sm:ml-2 px-1 sm:px-2 py-0.5 text-[0.625rem] sm:text-xs font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded\">\n                    PRO\n                  </span>\n                )}\n              </button>\n\n              {/* Organization Tab - sichtbar wenn berechtigt */}\n              {canViewOrg && (\n                <button\n                  className={`${\n                    activeTabState === 'organization'\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                  } whitespace-nowrap py-2 sm:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm flex items-center flex-shrink-0`}\n                  onClick={() => handleTabChange('organization')}\n                >\n                  <UserGroupIcon className=\"h-3 w-3 sm:h-5 sm:w-5 mr-1 sm:mr-2\" />\n                  {t('organisation.tabs.organization')}\n                </button>\n              )}\n            </nav>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4\">\n              <p className=\"font-bold\">{t('organisation.error')}</p>\n              <p>{error}</p>\n            </div>\n          )}\n\n          {loading && <div className=\"p-4 dark:text-gray-300\">{t('organisation.loading')}</div>}\n\n          {/* Tab Inhalte */}\n          <div className=\"mt-6\">\n            {activeTabState === 'users' ? (\n              canViewUsers ? (\n                <UserManagementTab onError={handleError} />\n              ) : (\n                <div className=\"p-8 text-center\">\n                  <div className=\"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6\">\n                    <span className=\"inline-block px-3 py-1 text-sm font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded mb-4\">\n                      PRO\n                    </span>\n                    <p className=\"text-gray-700 dark:text-gray-300 mt-4\">\n                      {t('organisation.proFeature.users')}\n                    </p>\n                  </div>\n                </div>\n              )\n            ) : activeTabState === 'roles' ? (\n              canViewRoles ? (\n                <RoleManagementTab onError={handleError} />\n              ) : (\n                <div className=\"p-8 text-center\">\n                  <div className=\"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6\">\n                    <span className=\"inline-block px-3 py-1 text-sm font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded mb-4\">\n                      PRO\n                    </span>\n                    <p className=\"text-gray-700 dark:text-gray-300 mt-4\">\n                      {t('organisation.proFeature.roles')}\n                    </p>\n                  </div>\n                </div>\n              )\n            ) : activeTabState === 'branches' ? (\n              canViewBranches ? (\n                <BranchManagementTab onError={handleError} />\n              ) : (\n                <div className=\"p-8 text-center\">\n                  <div className=\"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6\">\n                    <span className=\"inline-block px-3 py-1 text-sm font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded mb-4\">\n                      PRO\n                    </span>\n                    <p className=\"text-gray-700 dark:text-gray-300 mt-4\">\n                      {t('organisation.proFeature.branches', { defaultValue: 'Niederlassungs-Verwaltung ist eine PRO-Funktion' })}\n                    </p>\n                  </div>\n                </div>\n              )\n            ) : activeTabState === 'providers' ? (\n              canViewProviders ? (\n                <div className=\"space-y-4\">\n                  {/* Switch fr Tours/Providers */}\n                  <div className=\"flex gap-2 mb-4\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setProvidersViewMode('tours')}\n                      className={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${\n                        providersViewMode === 'tours'\n                          ? 'bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400'\n                          : 'bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600'\n                      }`}\n                    >\n                      {t('tours.title', 'Touren')}\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setProvidersViewMode('providers')}\n                      className={`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${\n                        providersViewMode === 'providers'\n                          ? 'bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400'\n                          : 'bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600'\n                      }`}\n                    >\n                      {t('organisation.tabs.providers', { defaultValue: 'Proveedores' })}\n                    </button>\n                  </div>\n                  \n                  {/* Bedingtes Rendering */}\n                  {providersViewMode === 'tours' ? (\n                    <ToursTab onError={handleError} />\n                  ) : (\n                    <TourProvidersTab onError={handleError} />\n                  )}\n                </div>\n              ) : (\n                <div className=\"p-8 text-center\">\n                  <div className=\"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6\">\n                    <span className=\"inline-block px-3 py-1 text-sm font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded mb-4\">\n                      PRO\n                    </span>\n                    <p className=\"text-gray-700 dark:text-gray-300 mt-4\">\n                      {t('organisation.proFeature.providers', { defaultValue: 'Tour-Provider-Verwaltung ist eine PRO-Funktion' })}\n                    </p>\n                  </div>\n                </div>\n              )\n            ) : activeTabState === 'organization' && canViewOrg ? (\n              <div className=\"space-y-6\">\n                <OrganizationSettings />\n                <JoinRequestsList />\n              </div>\n            ) : (\n              <div className=\"p-4 text-red-600 dark:text-red-400\">\n                {t('organisation.noPermissionForPage')}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Organisation;\n\n\n"],"names":["getLocalStorageKey","tableId","concat","tableSettingsApi","async","axiosInstance","get","data","error","console","localStorageKey","storedSettings","localStorage","getItem","JSON","parse","localError","columnOrder","hiddenColumns","post","settings","setItem","stringify","useTableSettings","options","setSettings","useState","defaultColumnOrder","defaultHiddenColumns","isLoading","setIsLoading","setError","useEffect","isMounted","loadedSettings","log","length","viewMode","defaultViewMode","err","Error","loadSettings","updateColumnOrder","useCallback","updatedSettings","_objectSpread","newColumnOrder","updateHiddenColumns","newHiddenColumns","toggleColumnVisibility","includes","columnId","filter","id","updateViewMode","newViewMode","isColumnVisible","evaluateCondition","fieldValue","condition","operator","value","undefined","strField","strValue","fieldValueStr","String","lowerField","toLowerCase","valueStr","lowerValue","startsWith","typeof","endsWith","fieldDate","Date","valueDate","isNaN","getTime","fieldNum","parseFloat","valueNum","applyFilters","items","conditions","operators","getFieldValue","columnEvaluators","item","result","i","conditionMet","column","customResult","evaluateDateCondition","dateValue","date","dateYear","getUTCFullYear","dateMonth","getUTCMonth","dateDay","getUTCDate","normalizedDate","conditionDate","localToday","setHours","conditionDateRaw","conditionYear","conditionMonth","conditionDay","evaluateUserRoleCondition","userId","roleId","textValue","targetUserId","parseInt","replace","matches","targetRoleId","textValueLower","valueLower","_ref","isOpen","onClose","onBookingCreated","tour","preselectedTour","t","useTranslation","user","useAuth","showMessage","useMessage","tourId","setTourId","tourDate","setTourDate","numberOfParticipants","setNumberOfParticipants","customerName","setCustomerName","customerEmail","setCustomerEmail","customerPhone","setCustomerPhone","customerNotes","setCustomerNotes","tours","setTours","selectedTour","setSelectedTour","loading","setLoading","loadingData","setLoadingData","_response$data","response","API_ENDPOINTS","TOURS","BASE","params","isActive","toursData","Array","isArray","loadData","find","Number","_jsxs","Dialog","open","className","children","_jsx","Panel","Title","defaultValue","onClick","XMarkIcon","onSubmit","e","preventDefault","trim","numPart","minParticipants","min","max","maxParticipants","_response$data2","_response$data3","TOUR_BOOKINGS","_response$data4","success","message","_err$response","_err$response$data","errorMessage","onChange","target","required","disabled","title","map","type","rows","DraggableColumnItem","label","index","isVisible","isDragging","isOver","onDragStart","onDragOver","onDragEnd","onToggleVisibility","sortDirection","onSortDirectionChange","showSortDirection","sortOrder","draggable","Bars2Icon","stopPropagation","ArrowUpIcon","ArrowDownIcon","EyeIcon","EyeSlashIcon","_ref2","columns","visibleColumns","onToggleColumnVisibility","onMoveColumn","buttonTitle","modalTitle","sortDirections","defaultButtonTitle","defaultModalTitle","setIsOpen","draggedIndex","setDraggedIndex","overIndex","setOverIndex","menuRef","useRef","sortedColumns","sort","a","b","indexA","indexOf","indexB","handleDragStart","handleDragOver","handleDragEnd","handleClose","handleClickOutside","event","current","contains","document","addEventListener","removeEventListener","ref","ArrowsUpDownIcon","xmlns","viewBox","fill","fillRule","d","clipRule","CheckIcon","col","findIndex","onCertificateCreated","userName","currentUser","isHR","isAdmin","permissionsLoading","usePermissions","openSidepane","closeSidepane","useSidepane","isMobile","setIsMobile","window","innerWidth","isLargeScreen","setIsLargeScreen","activeTab","setActiveTab","userData","setUserData","issueDate","setIssueDate","toISOString","split","certificateType","setCertificateType","pdfFile","setPdfFile","pdfPreviewUrl","setPdfPreviewUrl","uploading","setUploading","availableTemplates","setAvailableTemplates","selectedTemplate","setSelectedTemplate","useTemplate","setUseTemplate","fileInputRef","handleResize","fetchUserData","fetchTemplates","documentTemplates","ORGANIZATION_LIFECYCLE","DOCUMENT_TEMPLATES","templates","employmentCertificate","push","version","path","userResponse","lifecycleResponse","Promise","all","USERS","BY_ID","LIFECYCLE","BY_USER","lifecycle","userDataObj","firstName","lastName","identificationNumber","contractStartDate","contractEndDate","contractType","salary","position","URL","revokeObjectURL","style","animation","DocumentTextIcon","_Fragment","UserIcon","CalendarIcon","toLocaleDateString","checked","template","accept","_event$target$files","file","files","size","url","createObjectURL","name","toFixed","_fileInputRef$current","click","src","height","validationError","validateForm","issueDateObj","pdfPath","templateUsed","templateVersion","now","certificateData","CERTIFICATES","ArrowPathIcon","onContractCreated","setContractType","startDate","setStartDate","endDate","setEndDate","setSalary","workingHours","setWorkingHours","setPosition","employmentContract","toString","placeholder","CurrencyDollarIcon","step","startDateObj","endDateObj","contractData","CONTRACTS","onCertificateUpdated","certificate","existingPdfUrl","setExistingPdfUrl","CERTIFICATE_DOWNLOAD","handleSubmit","updateData","put","CERTIFICATE","onContractUpdated","contract","CONTRACT_DOWNLOAD","CONTRACT","lifecycleId","onUpdate","isLegal","registrations","setRegistrations","arl","eps","pension","caja","editingType","setEditingType","formData","setFormData","status","registrationNumber","provider","registrationDate","notes","saving","setSaving","loadingRef","abortControllerRef","loadRegistrations","abort","abortController","AbortController","registrationPromises","signal","aborted","registration","SOCIAL_SECURITY","timeout","_error$response","_error$message","code","warn","results","newRegistrations","forEach","registrationType","number","registeredAt","completedAt","handleCancel","handleSave","resolve","setTimeout","_error$response2","_error$response2$data","getStatusIcon","CheckCircleIcon","ClockIcon","XCircleIcon","getStatusLabel","labelKey","getTypeLabel","isEditing","handleEdit","PencilIcon","onOffboardingStarted","exitDate","setExitDate","exitReason","setExitReason","validationErrors","setValidationErrors","today","errors","selectedDate","maxDate","setFullYear","getFullYear","Object","keys","STATUS","renderForm","ExclamationTriangleIcon","htmlFor","prev","ArrowRightIcon","opacity","transition","pointerEvents","role","onOffboardingCompleted","offboardingTasks","confirmText","setConfirmText","completedTasks","task","allTasksCompleted","requiredConfirmText","isCompleted","_lifecycleData$lifecy","lifecycleData","setLifecycleData","certificates","setCertificates","contracts","setContracts","setOffboardingTasks","isCertificateCreateModalOpen","setIsCertificateCreateModalOpen","isContractCreateModalOpen","setIsContractCreateModalOpen","editingCertificate","setEditingCertificate","editingContract","setEditingContract","downloadingCertId","setDownloadingCertId","downloadingContractId","setDownloadingContractId","isOffboardingStartModalOpen","setIsOffboardingStartModalOpen","isOffboardingCompleteModalOpen","setIsOffboardingCompleteModalOpen","isEditContractDatesModalOpen","setIsEditContractDatesModalOpen","editingContractStartDate","setEditingContractStartDate","editingContractEndDate","setEditingContractEndDate","fetchDataRef","fetchData","force","arguments","_certsResponse$data","_contractsResponse$da","_lifecycleResponse$da","_lifecycleResponse$da2","_lifecycleResponse$da3","_lifecycleResponse$da4","certsResponse","contractsResponse","tasksResponse","TASKS","catch","allTasks","offboardingTaskTitles","filteredTasks","progress","percent","handleEditContractDates","formatDate","dateString","year","month","day","socialSecurityRegistrations","BuildingOfficeIcon","clickable","config","onboarding","color","active","contract_change","offboarding","archived","getStatusBadge","onboardingStartedAt","onboardingCompletedAt","offboardingStartedAt","completed","total","width","totalTasks","Math","round","description","PlusIcon","cert","isLatest","generatedByUser","certId","responseType","blob","Blob","downloadUrl","link","createElement","href","download","body","appendChild","removeChild","handleDownloadCertificate","ArrowDownTrayIcon","toLocaleString","currency","contractId","handleDownloadContract","SocialSecurityEditor","CertificateCreationModal","ContractCreationModal","CertificateEditModal","ContractEditModal","OffboardingStartModal","OffboardingCompleteModal","CONTRACT_TYPES","onError","COUNTRIES","PAYROLL_COUNTRIES","LANGUAGES","users","setUsers","selectedUser","setSelectedUser","userFormData","setUserFormData","isEditingUser","setIsEditingUser","selectedRoles","setSelectedRoles","lifecycleRefreshKey","setLifecycleRefreshKey","isDebugMode","setIsDebugMode","roleWarning","setRoleWarning","roles","setRoles","loadingRoles","setLoadingRoles","branches","setBranches","loadingBranches","setLoadingBranches","selectedBranches","setSelectedBranches","activeUserTab","setActiveUserTab","userFilterTab","setUserFilterTab","isCreateModalOpen","setIsCreateModalOpen","showDocumentUpload","setShowDocumentUpload","newUserFormData","setNewUserFormData","email","password","allUsers","setAllUsers","fetchAllUsers","userApi","getAll","filterUsersByActiveStatus","handleError","sorted","aUsername","username","bUsername","aFirstName","bFirstName","localeCompare","fetchUserDetails","getById","birthday","roleIds","userRole","r","branchIds","branch","userBranch","branchId","fallbackRoles","permissions","roleApi","fetchRoles","branchApi","fetchBranches","handleUserInputChange","finalValue","toggleRole","isRoleSelected","newSelectedRoles","updateRoles","toggleBranch","isBranchSelected","newSelectedBranches","updateBranches","handleNewUserInputChange","handleCreateUser","match","create","newUser","prevUsers","_err$response5","_err$response5$data","UserCircleIcon","ShieldCheckIcon","MapPinIcon","_userFormData$usernam","_userFormData$email","dataToSend","bankDetails","gender","phoneNumber","language","hourlyRate","monthlySalary","payrollCountry","update","updatedData","_err$response2","_err$response4","_err$response3","_err$response3$data","errorMsg","IdentificationDocumentForm","onDocumentSaved","onCancel","identificationDocuments","_COUNTRIES$find","latestDoc","readOnly","country","c","documentType","passport","national_id","driving_license","residence_permit","work_permit","tax_id","social_security","documentNumber","expiryDate","handleCancelEdit","currentUserId","currentActiveStatus","newActiveStatus","selectedUserActive","updatePayload","updatedAllUsers","IdentificationDocumentList","some","ids","join","isFixedRole","LifecycleView","alwaysVisiblePages","defaultPages","defaultTables","defaultButtons","tableToPageMapping","buttonToPageMapping","buttonToTableMapping","ROLES_TABLE_ID","STANDARD_ROLE_IDS","STANDARD_ROLE_NAMES","isStandardRole","roleName","RoleCard","onEdit","onDelete","onCopy","canEdit","canDelete","canCopy","DocumentDuplicateIcon","TrashIcon","allBranches","perm","accessLevel","slice","permission","entity","entityType","onRolesChange","isModalOpen","setIsModalOpen","editingRole","setEditingRole","pageDisplayNames","useMemo","tableDisplayNames","buttonDisplayNames","page","table","button","hasPermission","searchTerm","setSearchTerm","isFilterModalOpen","setIsFilterModalOpen","setAllBranches","selectedBranchIds","setSelectedBranchIds","filterConditions","setFilterConditions","filterLogicalOperators","setFilterLogicalOperators","activeFilterName","setActiveFilterName","selectedFilterId","setSelectedFilterId","handleValidationError","useError","isAddPermissionModalOpen","setIsAddPermissionModalOpen","selectedPermission","setSelectedPermission","displayLimit","setDisplayLimit","component","action","filteredPermissions","category","ErrorCategory","PERMISSION","updateError","meta","cause","createError","resetForm","handleDelete","confirm","delete","deleteError","refreshError","handleCopyRole","copiedRoleData","prevRoles","prepareRoleForEditing","allPermissions","existingPermIndex","p","_branchData$branches","branchData","getRoleBranches","setAllPagePermissions","newPermissions","permIndex","setAllTablePermissions","setAllButtonPermissions","getActiveFilterCount","filteredAndSortedRoles","searchLower","count","existingFilters","SAVED_FILTERS","BY_TABLE","alleFilter","createStandardFilters","applyFilterConditions","setInitialFilter","resetFilterConditions","FunnelIcon","FilterPane","onApply","onReset","savedConditions","savedOperators","SavedFilterTags","onSelectFilter","onFilterChange","handleFilterChange","defaultFilterName","prevLimit","ChevronDownIcon","tablePerm","aName","bName","priorityOrder","aIndex","bIndex","tableIndex","tablePermIndex","isTableActive","tableEntity","tableDisplayName","relatedButtons","buttonPerm","order","buttonIndex","buttonPermIndex","isButtonActive","buttonDisplayName","BranchCard","BRANCHES_TABLE_ID","editingBranch","setEditingBranch","whatsappSettings","apiKey","apiSecret","phoneNumberId","ai","enabled","model","systemPrompt","rules","sources","temperature","maxTokens","lobbyPmsSettings","apiUrl","propertyId","autoCreateTasks","lateCheckInThreshold","notificationChannels","autoSendInvitation","boldPaymentSettings","merchantId","environment","doorSystemSettings","clientId","clientSecret","lockIds","appName","emailSettings","smtpHost","smtpPort","smtpUser","smtpPass","smtpFromEmail","smtpFromName","imap","host","port","secure","folder","processedFolder","activeSettingsTab","setActiveSettingsTab","showSecrets","setShowSecrets","canCreate","BRANCHES","_error$response$data","sireSettings","autoRegisterOnCheckIn","propertyCode","existingWhatsapp","existingLobbyPms","existingBoldPayment","existingDoorSystem","existingEmail","handleCloseModal","UPDATE","CREATE","DELETE","_error$response3","_error$response3$data","filteredAndSortedBranches","handleCreate","autoFocus","tab","whatsappApiKey","stroke","strokeLinecap","strokeLinejoin","strokeWidth","s","emailSmtpPass","emailImapPass","onProviderCreated","setName","phone","setPhone","setEmail","contactPerson","setContactPerson","setNotes","setBranchId","_branchesRes$data","branchesRes","TOUR_PROVIDERS","onProviderUpdated","ProviderCard","isEditModalOpen","setIsEditModalOpen","editingProvider","setEditingProvider","providers","setProviders","fetchProviders","filteredProviders","_provider$contactPers","_provider$phone","_provider$email","_provider$notes","search","providerId","CreateTourProviderModal","newProvider","EditTourProviderModal","updatedProvider","TourType","onTourCreated","setTitle","setDescription","setType","OWN","setIsActive","duration","setDuration","setMaxParticipants","setMinParticipants","price","setPrice","setCurrency","location","setLocation","meetingPoint","setMeetingPoint","setIncludes","excludes","setExcludes","requirements","setRequirements","totalCommission","setTotalCommission","totalCommissionPercent","setTotalCommissionPercent","sellerCommissionPercent","setSellerCommissionPercent","sellerCommissionFixed","setSellerCommissionFixed","externalProviderId","setExternalProviderId","externalBookingUrl","setExternalBookingUrl","imageFile","setImageFile","imagePreview","setImagePreview","galleryFiles","setGalleryFiles","galleryPreviews","setGalleryPreviews","uploadingImage","setUploadingImage","tourProviders","setTourProviders","_API_ENDPOINTS$TOUR_P","_providersRes$data","providersRes","maxPart","minPart","EXTERNAL","tourData","createdTour","FormData","append","UPLOAD_IMAGE","headers","imgErr","UPLOAD_GALLERY","galleryErr","updatedResponse","_tour$isActive","_tour$galleryUrls","onTourUpdated","imageUrl","API_BASE_URL","galleryUrls","_tour$isActive2","_tour$galleryUrls2","_err$response2$data","_e$target$files","reader","FileReader","onloadend","readAsDataURL","alt","multiple","from","preview","currentGallery","DELETE_GALLERY_IMAGE","newIndex","_","removeGalleryImage","setTour","isCreateBookingModalOpen","setIsCreateBookingModalOpen","loadTour","UsersIcon","createdBy","createdAt","format","locale","de","externalProvider","rel","availableFrom","availableTo","CreateTourBookingModal","tourCount","selectedFields","setSelectedFields","exporting","setExporting","setFormat","availableFields","selectAll","f","deselectAll","field","toggleField","fieldId","fieldsParam","EXPORT","fields","csvContent","row","cell","TOURS_TABLE_ID","defaultTourColumnOrder","defaultTourCardSortDirections","tourCardToTableMapping","toursLoading","setToursLoading","toursError","setToursError","tourSearchTerm","setTourSearchTerm","tourFilterConditions","setTourFilterConditions","tourFilterLogicalOperators","setTourFilterLogicalOperators","tourFilterSortDirections","setTourFilterSortDirections","tourActiveFilterName","setTourActiveFilterName","tourSelectedFilterId","setTourSelectedFilterId","isCreateTourModalOpen","setIsCreateTourModalOpen","isEditTourModalOpen","setIsEditTourModalOpen","isTourDetailsModalOpen","setIsTourDetailsModalOpen","isTourExportDialogOpen","setIsTourExportDialogOpen","selectedTourId","setSelectedTourId","draggedColumn","setDraggedColumn","dragOverColumn","setDragOverColumn","isLoadingSettings","availableTourColumns","shortLabel","substring","tourFilterOnlyColumns","tourTableSortConfig","setTourTableSortConfig","key","direction","tourCardSortDirections","setTourCardSortDirections","cardMetadataOrder","cardMetadata","tableCol","cardMeta","getTourCardMetadataFromColumnOrder","hiddenCardMetadata","hiddenTableColumns","Set","add","getTourHiddenCardMetadata","visibleCardMetadata","has","loadTours","filterId","background","rawData","applyTourFilterConditions","resetTourFilterConditions","visibleColumnIds","validOrder","missingColumns","filteredAndSortedTours","filtered","cond","compareValue","abs","_tour$branch","branchName","createdByName","createdById","_tour$branch2","getTourSortValue","_tour$branch3","sortDir","x","y","priority","valueA","valueB","comparison","sortableColumns","titleA","titleB","Squares2X2Icon","TableCellsIcon","TableColumnConfig","tableColumn","onColumnOrderChange","newOrder","newTableOrder","Boolean","handleTourCardSortDirectionChange","savedSortDirections","onSortDirectionsChange","handleTourFilterChange","filterName","scope","onDrop","handleDrop","dragIndex","hoverIndex","draggedColumn_","splice","handleTourSort","colSpan","_tour$branch4","TOGGLE_ACTIVE","InformationCircleIcon","CreateTourModal","EditTourModal","TourDetailsModal","TourExportDialog","onSuccess","displayName","domain","setErrors","fetchCurrentUser","checkScreenSize","handleChange","newErrors","organizationService","createOrganization","submit","organizationName","searching","setSearching","organizations","setOrganizations","showDropdown","setShowDropdown","selectedOrganization","setSelectedOrganization","searchTimeoutRef","dropdownRef","handleOrganizationInputChange","clearTimeout","searchOrganizations","handleSelectOrganization","org","handleMessageChange","createJoinRequest","organization","onSave","lifecycleRoles","setLifecycleRoles","loadRoles","loadLifecycleRoles","LIFECYCLE_ROLES","handleAssignStandardRoles","adminRole","hrRole","legalRole","adminRoleId","hrRoleId","legalRoleId","prepareRoleId","employeeRoleIds","SignatureUploadSection","onUpload","signatures","setSignatures","signatureType","setSignatureType","signerName","setSignerName","signerPosition","setSignerPosition","positionX","setPositionX","positionY","setPositionY","positionPage","setPositionPage","React","loadSignatures","documentSignatures","DOCUMENT_SIGNATURES","signaturesList","_error$response5","_error$response6","_error$response6$data","_event$target$files2","UPLOAD_SIGNATURE","_error$response7","_error$response7$data","_fileInputRef$current2","signature","ORGANIZATIONS","CURRENT","typeKey","_error$response8","_error$response8$data","handleDeleteSignature","FieldPositionConfiguration","_ref3","templateType","setTemplateType","setFields","certificateFields","contractFields","loadFields","_settings$documentTem","templateSettings","savedFields","margin","lineHeight","currentY","defaultFields","fieldList","defaultPositions","fontSize","currentDate","fieldName","handleFieldChange","property","fieldLabels","_fields$fieldName","_fields$fieldName2","_fields$fieldName3","resetFields","currentSettings","updateOrganization","_error$response9","_error$response9$data","setTemplates","loadTemplates","templatesList","filePath","UPLOAD_TEMPLATE","_error$response4","_error$response4$data","handleDeleteTemplate","smtpSettings","setSmtpSettings","showPassword","setShowPassword","_settings$smtpPort","EnvelopeIcon","handleClear","ALLOWED_DOMAINS","lobbyPms","ttlock","sire","boldPayment","validateApiUrl","service","parsed","hostname","canManageOrganization","apiSettings","setApiSettings","lobbyPmsApiKey","lobbyPmsPropertyId","lobbyPmsSyncEnabled","lobbyPmsAutoCreateTasks","lobbyPmsAutoSendReservationInvitation","lobbyPmsLateCheckInThreshold","ttlockClientId","ttlockClientSecret","ttlockApiUrl","ttlockUsername","ttlockPassword","ttlockPasscodeType","sireApiUrl","sireApiKey","sireApiSecret","sireEnabled","sireAutoRegisterOnCheckIn","sirePropertyCode","boldPaymentApiKey","boldPaymentMerchantId","boldPaymentEnvironment","whatsappProvider","whatsappApiSecret","whatsappPhoneNumberId","doorSystem","whatsapp","syncEnabled","autoSendReservationInvitation","passcodeType","SecretInput","showSecret","toggleShowSecret","KeyIcon","test","_err$path","msg","logo","nit","selectedCountry","setSelectedCountry","setNit","organizationLanguage","setOrganizationLanguage","useLanguage","selectedOrgLanguage","setSelectedOrgLanguage","savingOrgLanguage","setSavingOrgLanguage","logoFile","setLogoFile","logoPreview","setLogoPreview","orgSettings","langResponse","getOrganizationLanguage","langError","loadOrgLanguage","handleLogoFileChange","base64String","newLanguage","RoleConfigurationTab","DocumentConfigurationTab","SMTPConfigurationTab","ApiConfigurationTab","getStatusColor","getStatusText","MY_JOIN_REQUESTS_TABLE_ID","MyJoinRequestsList","joinRequests","setJoinRequests","isFilterPanelOpen","setIsFilterPanelOpen","mountedRef","withdrawingId","setWithdrawingId","timeoutId","MY_JOIN_REQUESTS","requests","getMyJoinRequests","fetchMyJoinRequests","hour","minute","filteredJoinRequests","request","_request$message","orgName","reduce","acc","_request$message2","searchValue","msgValue","processor","processedAt","requestId","withdrawJoinRequest","req","_err$response4$data","handleWithdraw","OrganizationSettings","setOrganization","stats","setStats","loadingStats","setLoadingStats","isJoinModalOpen","setIsJoinModalOpen","canViewOrganization","refreshOrganization","useOrganization","fetchOrganization","includeSettings","getCurrentOrganization","statsData","getOrganizationStats","statsErr","hasOrganization","hasInitialLoadRef","UserPlusIcon","UserGroupIcon","subscriptionPlan","currentUsers","maxUsers","utilizationPercent","_count","invitations","ChartBarIcon","availableSlots","CreateOrganizationModal","handleCreateSuccess","JoinOrganizationModal","EditOrganizationModal","handleEditModalClose","handleEditSuccess","joinRequest","setAction","setRoleId","setResponse","organizationId","processJoinRequest","requester","JOIN_REQUESTS_TABLE_ID","JoinRequestsList","isProcessModalOpen","setIsProcessModalOpen","selectedRequest","setSelectedRequest","canViewJoinRequests","canManageJoinRequests","hasInitialLoad","joinRequestsCount","JOIN_REQUESTS","getJoinRequests","stack","fetchJoinRequests","_request$requester$em","requesterName","requesterEmail","_request$requester$em2","handleOpenProcessModal","ProcessJoinRequestModal","Organisation","canViewOrganisation","canViewUsers","canViewRoles","canViewBranches","canViewProviders","canViewOrg","activeTabState","setActiveTabState","providersViewMode","setProvidersViewMode","isInitialized","defaultTab","handleTabChange","TruckIcon","UserManagementTab","RoleManagementTab","BranchManagementTab","ToursTab","TourProvidersTab"],"sourceRoot":""}