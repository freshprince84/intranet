"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[138],{5138:(t,e,s)=>{s.r(e),s.d(e,{default:()=>u});var a=s(9379),r=s(5043),o=s(4117),n=s(8682),i=s(7985),l=s(1816),m=s(9422),d=s(8673),c=s(7855),p=s(1801),x=s(1923),g=s(579);const u=t=>{let{organization:e,onSave:s}=t;const{t:u}=(0,o.Bd)(),{showMessage:b}=(0,c.A)(),[h,y]=(0,r.useState)(!1),[k,f]=(0,r.useState)({smtpHost:"",smtpPort:"587",smtpUser:"",smtpPass:"",smtpFromEmail:"",smtpFromName:""}),[j,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(null!==e&&void 0!==e&&e.settings){var t;const s=e.settings;f({smtpHost:s.smtpHost||"",smtpPort:(null===(t=s.smtpPort)||void 0===t?void 0:t.toString())||"587",smtpUser:s.smtpUser||"",smtpPass:s.smtpPass||"",smtpFromEmail:s.smtpFromEmail||(null!==e&&void 0!==e&&e.domain?"noreply@".concat(e.domain):""),smtpFromName:s.smtpFromName||(null===e||void 0===e?void 0:e.displayName)||""})}}),[e]);const z=t=>{const{name:e,value:s}=t.target;f((t=>(0,a.A)((0,a.A)({},t),{},{[e]:s})))};return(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,g.jsx)(n.A,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),(0,g.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:u("organization.smtp.title")})]}),(0,g.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:u("organization.smtp.description")}),(0,g.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),k.smtpHost&&k.smtpUser&&k.smtpPass)try{y(!0);const t=(0,a.A)((0,a.A)({},(null===e||void 0===e?void 0:e.settings)||{}),{},{smtpHost:k.smtpHost,smtpPort:parseInt(k.smtpPort)||587,smtpUser:k.smtpUser,smtpPass:k.smtpPass,smtpFromEmail:k.smtpFromEmail,smtpFromName:k.smtpFromName});await d.h.updateOrganization({settings:t}),b(u("organization.smtp.saveSuccess"),"success"),s&&s()}catch(n){var r,o;const t=(null===(r=n.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.message)||u("organization.smtp.saveError");b(t,"error")}finally{y(!1)}else b(u("organization.smtp.requiredFields"),"error")},className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsxs)("label",{htmlFor:"smtpHost",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[u("organization.smtp.host")," ",(0,g.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,g.jsx)("input",{type:"text",id:"smtpHost",name:"smtpHost",value:k.smtpHost,onChange:z,placeholder:"smtp.example.com",required:!0,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2"}),(0,g.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:u("organization.smtp.hostHint")})]}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("label",{htmlFor:"smtpPort",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[u("organization.smtp.port")," ",(0,g.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,g.jsx)("input",{type:"number",id:"smtpPort",name:"smtpPort",value:k.smtpPort,onChange:z,placeholder:"587",required:!0,min:"1",max:"65535",className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2"}),(0,g.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:u("organization.smtp.portHint")})]}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("label",{htmlFor:"smtpUser",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[u("organization.smtp.user")," ",(0,g.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,g.jsx)("input",{type:"text",id:"smtpUser",name:"smtpUser",value:k.smtpUser,onChange:z,placeholder:"noreply@example.com",required:!0,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2"}),(0,g.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:u("organization.smtp.userHint")})]}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("label",{htmlFor:"smtpPass",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[u("organization.smtp.password")," ",(0,g.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("input",{type:j?"text":"password",id:"smtpPass",name:"smtpPass",value:k.smtpPass,onChange:z,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 pr-10"}),(0,g.jsx)("button",{type:"button",onClick:()=>v(!j),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:j?(0,g.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.29 3.29m0 0L3 3m3.29 3.29L12 12m-5.71-5.71L12 12"})}):(0,g.jsxs)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,g.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),(0,g.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:u("organization.smtp.passwordHint")})]}),(0,g.jsxs)("div",{className:"border-t pt-4",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:u("organization.smtp.fromSettings")}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"smtpFromEmail",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:u("organization.smtp.fromEmail")}),(0,g.jsx)("input",{type:"email",id:"smtpFromEmail",name:"smtpFromEmail",value:k.smtpFromEmail,onChange:z,placeholder:"noreply@example.com",className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2"}),(0,g.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:u("organization.smtp.fromEmailHint")})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"smtpFromName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:u("organization.smtp.fromName")}),(0,g.jsx)("input",{type:"text",id:"smtpFromName",name:"smtpFromName",value:k.smtpFromName,onChange:z,placeholder:(null===e||void 0===e?void 0:e.displayName)||"Intranet",className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2"}),(0,g.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:u("organization.smtp.fromNameHint")})]})]})]}),(0,g.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md p-4",children:[(0,g.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:(0,g.jsx)("strong",{children:u("organization.smtp.infoTitle")})}),(0,g.jsxs)("ul",{className:"mt-2 text-sm text-blue-700 dark:text-blue-300 list-disc list-inside space-y-1",children:[(0,g.jsx)("li",{children:u("organization.smtp.info1")}),(0,g.jsx)("li",{children:u("organization.smtp.info2")}),(0,g.jsx)("li",{children:u("organization.smtp.info3")})]})]}),(0,g.jsxs)("div",{className:"border-t pt-6 mt-6",children:[(0,g.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,g.jsx)(i.A,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"}),(0,g.jsx)("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:u("organization.smtp.branding.title")})]}),(0,g.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:u("organization.smtp.branding.description")}),(0,g.jsx)("button",{type:"button",onClick:async()=>{if(null!==e&&void 0!==e&&e.logo&&""!==e.logo.trim())try{w(!0);(await x.A.post("".concat(p.H$).concat(p.Sn.SETTINGS.BRANDING_EXTRACT))).data.testEmailSent?b(u("organization.smtp.branding.extractSuccess")+" "+u("organization.smtp.branding.testEmailSent"),"success"):b(u("organization.smtp.branding.extractSuccess"),"success"),s&&s()}catch(r){var t,a;const e=(null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||u("organization.smtp.branding.extractError");b(e,"error")}finally{w(!1)}else b(u("organization.smtp.branding.noLogo"),"error")},disabled:N||!(null!==e&&void 0!==e&&e.logo)||""===e.logo.trim(),className:"w-full sm:w-auto px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 dark:bg-purple-700 dark:hover:bg-purple-800 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:N?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.A,{className:"h-5 w-5 animate-spin"}),(0,g.jsx)("span",{children:u("organization.smtp.branding.extracting")})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(i.A,{className:"h-5 w-5"}),(0,g.jsx)("span",{children:u("organization.smtp.branding.extractButton")})]})})]}),(0,g.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,g.jsx)("button",{type:"button",onClick:()=>{f({smtpHost:"",smtpPort:"587",smtpUser:"",smtpPass:"",smtpFromEmail:null!==e&&void 0!==e&&e.domain?"noreply@".concat(e.domain):"",smtpFromName:(null===e||void 0===e?void 0:e.displayName)||""})},className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600",title:u("organization.smtp.clear"),children:(0,g.jsx)(l.A,{className:"h-5 w-5"})}),(0,g.jsx)("button",{type:"submit",disabled:h,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",title:u(h?"organization.saving":"common.save"),children:h?(0,g.jsx)(l.A,{className:"h-5 w-5 animate-spin"}):(0,g.jsx)(m.A,{className:"h-5 w-5"})})]})]})]})}},7985:(t,e,s)=>{s.d(e,{A:()=>i});var a=s(45),r=s(5043);const o=["title","titleId"];function n(t,e){let{title:s,titleId:n}=t,i=(0,a.A)(t,o);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":n},i),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const i=r.forwardRef(n)}}]);
//# sourceMappingURL=138.56acfaf2.chunk.js.map