{"version":3,"file":"static/js/786.e4fec7cb.chunk.js","mappings":"mMAMAA,EAAAA,EAAOC,IAAI,wCAAyCC,EAAAA,IAGpD,MAAMC,EAAYC,EAAAA,EAGlBD,EAAUE,aAAaC,QAAQC,KAC5BC,IAAY,IAADC,EAEV,MAAMC,EAAO,GAAAC,OAAMH,EAAOI,SAAOD,OAAGH,EAAOK,KAC3Cb,EAAAA,EAAOC,IAAI,wDAAsDS,GACjEV,EAAAA,EAAOC,IAAI,4CAA0D,QAAfQ,EAAED,EAAOM,cAAM,IAAAL,OAAA,EAAbA,EAAeM,eACvEf,EAAAA,EAAOC,IAAI,4CAA6CO,EAAOQ,SAC/DhB,EAAAA,EAAOC,IAAI,0CAA2CO,EAAOS,MAE7D,MAAMC,EAAQC,aAAaC,QAAQ,SAGnC,OAFApB,EAAAA,EAAOC,IAAI,8CAA+CiB,GAEnDV,CAAM,IAEda,IACCrB,EAAAA,EAAOqB,MAAM,0DAA2DA,GACjEC,QAAQC,OAAOF,MAK1BlB,EAAUE,aAAamB,SAASjB,KAC7BiB,IACCxB,EAAAA,EAAOC,IAAI,8CAA+CuB,EAASC,OAAQD,EAAShB,OAAOK,KACpFW,KAERH,IACCrB,EAAAA,EAAOqB,MAAM,2DAA4DA,EAAMK,SAE3EL,EAAMG,UACRxB,EAAAA,EAAOqB,MAAM,4CAA6CA,EAAMG,SAASC,QACzEzB,EAAAA,EAAOqB,MAAM,2CAA4CA,EAAMG,SAASP,OAExEjB,EAAAA,EAAOqB,MAAM,oDAGRC,QAAQC,OAAOF,MAKnB,MAAMM,EAAU,CACrBC,OAAQA,IAAMzB,EAAU0B,IAAI,UAC5BC,QAAUC,GAAe5B,EAAU0B,IAAI,UAADlB,OAAWoB,IACjDC,OAASf,IACPjB,EAAAA,EAAOC,IAAI,qEAAsEgB,GACjF,IACE,OAAOd,EAAU8B,KAAK,SAAUhB,GAC7BiB,MAAKV,IACJxB,EAAAA,EAAOC,IAAI,mDAAoDuB,GACxDA,KAERW,OAAMd,IAEL,MADArB,EAAAA,EAAOqB,MAAM,kDAAmDA,EAAMG,UAAYH,GAC5EA,CAAK,GAEjB,CAAE,MAAOe,GAEP,MADApC,EAAAA,EAAOqB,MAAM,wEAAyEe,GAChFA,CACR,GAEFC,OAAQA,CAACN,EAAYd,IAAcd,EAAUmC,IAAI,UAAD3B,OAAWoB,GAAMd,GACjEsB,YAAaA,CAACR,EAAYS,IAAsBrC,EAAUmC,IAAI,UAAD3B,OAAWoB,EAAE,UAAU,CAAES,YACtFC,eAAgBA,CAACV,EAAYW,IAAwBvC,EAAUmC,IAAI,UAAD3B,OAAWoB,EAAE,aAAa,CAAEW,eAInFC,EAAU,CACrBf,OAASgB,IACP5C,EAAAA,EAAOC,IAAI,0DAA2D2C,EAAQ,gBAAAjC,OAAmBiC,GAAa,IAC9G,MAAM/B,EAAM+B,EAAQ,mBAAAjC,OAAsBiC,GAAa,SACvD,OAAOzC,EAAU0B,IAAIhB,GAClBqB,MAAKV,IACJxB,EAAAA,EAAOC,IAAI,uDAAwDuB,EAASP,KAAK4B,OAAQ,kBAClFrB,KAERW,OAAMd,IAEL,MADArB,EAAAA,EAAOqB,MAAM,kDAAmDA,EAAMK,SAChEL,CAAK,GACX,EAENS,QAAUC,IACR/B,EAAAA,EAAOC,IAAI,4CAADU,OAA6CoB,EAAE,sBAClD5B,EAAU0B,IAAI,UAADlB,OAAWoB,KAEjCC,OAASf,IACPjB,EAAAA,EAAOC,IAAI,qEAAsEgB,GACjF,IACE,OAAOd,EAAU8B,KAAK,SAAUhB,GAC7BiB,MAAKV,IACJxB,EAAAA,EAAOC,IAAI,mDAAoDuB,GACxDA,KAERW,OAAMd,IAEL,MADArB,EAAAA,EAAOqB,MAAM,kDAAmDA,EAAMG,UAAYH,GAC5EA,CAAK,GAEjB,CAAE,MAAOe,GAEP,MADApC,EAAAA,EAAOqB,MAAM,wEAAyEe,GAChFA,CACR,GAEFC,OAAQA,CAACN,EAAYd,KACnBjB,EAAAA,EAAOC,IAAI,qDAADU,OAAmDoB,EAAE,+BAA+Bd,GAC9F,IACE,OAAOd,EAAUmC,IAAI,UAAD3B,OAAWoB,GAAMd,GAClCiB,MAAKV,IACJxB,EAAAA,EAAOC,IAAI,mDAAoDuB,GACxDA,KAERW,OAAMd,IAEL,MADArB,EAAAA,EAAOqB,MAAM,kDAAmDA,EAAMG,UAAYH,GAC5EA,CAAK,GAEjB,CAAE,MAAOe,GAEP,MADApC,EAAAA,EAAOqB,MAAM,wEAAyEe,GAChFA,CACR,GAEFU,OAASf,IACP/B,EAAAA,EAAOC,IAAI,2CAADU,OAA4CoB,EAAE,sBACjD5B,EAAU2C,OAAO,UAADnC,OAAWoB,KAEpCgB,gBAAkBhB,IAChB/B,EAAAA,EAAOC,IAAI,oDAADU,OAAqDoB,EAAE,sBAC1D5B,EAAU0B,IAAI,UAADlB,OAAWoB,EAAE,eAEnCiB,mBAAoBA,CAACjB,EAAYd,KAC/BjB,EAAAA,EAAOC,IAAI,uDAADU,OAAwDoB,EAAE,0BAA0Bd,GACvFd,EAAUmC,IAAI,UAAD3B,OAAWoB,EAAE,aAAad,KAKrCgC,EAAY,CACvBrB,OAASsB,IACP,MAAMrC,EAAMqC,EAAM,oBAAAvC,OAAuBuC,GAAW,YACpD,OAAO/C,EAAU0B,IAAIhB,EAAI,EAE3BiB,QAAUC,GAAe5B,EAAU0B,IAAI,aAADlB,OAAcoB,IACpDoB,gBAAiBA,IAAMhD,EAAU0B,IAAI,kBACrCuB,aAAeR,GAAqBzC,EAAUmC,IAAI,mBAAoB,CAAEM,aACxEZ,OAASf,GAAcd,EAAU8B,KAAK,YAAahB,GACnDoB,OAAQA,CAACN,EAAYd,IAAcd,EAAUmC,IAAI,aAAD3B,OAAcoB,GAAMd,GACpE6B,OAASf,GAAe5B,EAAU2C,OAAO,aAADnC,OAAcoB,KAGxD,G,sFC1JO,MAWMsB,EAAsBC,MACjCC,EACAC,KAEA,IAUE,aATuBrD,EAAAA,GAAU8B,KAC/BwB,EAAAA,GAAcC,yBAAyBC,QAAQJ,GAC/CC,EACA,CACExC,QAAS,CACP,eAAgB,0BAINC,IAClB,CAAE,MAAOI,GAEP,MADAuC,QAAQvC,MAAM,2CAAyCA,GACjDA,CACR,GAqCWwC,EAAyBP,MACpCQ,EACAN,KAEA,IAUE,aATuBrD,EAAAA,GAAUmC,IAC/BmB,EAAAA,GAAcC,yBAAyBK,MAAMD,GAC7CN,EACA,CACExC,QAAS,CACP,eAAgB,0BAINC,IAClB,CAAE,MAAOI,GAEP,MADAuC,QAAQvC,MAAM,2CAA4CA,GACpDA,CACR,G,cCrFK,MAAM2C,EAAWA,IACf,iEAAiEC,KAAKC,UAAUC,YAAcC,OAAOC,WAAa,I,qDCK3H,MAsMA,EAtMoDC,IAA8B,IAA7B,UAAEC,EAAS,SAAEC,GAAUF,EAC1E,MAAM,EAAEG,IAAMC,EAAAA,EAAAA,OACPC,EAAQC,IAAaC,EAAAA,EAAAA,UAA6B,OAClDC,EAAeC,IAAoBF,EAAAA,EAAAA,UAAwB,OAC3DxD,EAAO2D,IAAYH,EAAAA,EAAAA,UAAwB,MAC5CI,GAAWC,EAAAA,EAAAA,QAAyB,MACpCC,GAAYD,EAAAA,EAAAA,QAA0B,MAGtCE,EAAc9B,UAClB,IAEE0B,EAAS,MAGT,MAAMK,QAAoBnB,UAAUoB,aAAaC,aAAa,CAC5DC,MAAO,CAAEC,WAAY,iBAEvBb,EAAUS,GAENJ,EAASS,UACXT,EAASS,QAAQC,UAAYN,EAEjC,CAAE,MAAOhE,GACPuC,QAAQvC,MAAM,sCAAuCA,GACrD2D,EAASP,EAAE,sBACb,GAIImB,EAAaA,KACbjB,IACFA,EAAOkB,YAAYC,SAAQC,GAASA,EAAMC,SAC1CpB,EAAU,MACZ,EAgDF,OAZAqB,EAAAA,EAAAA,YAAU,KACJjC,KACFoB,IAIK,KACLQ,GAAY,IAEb,IAGE5B,KAoBHkC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sCAAqCC,SAAA,EAClDC,EAAAA,EAAAA,KAAA,UAAQC,IAAKnB,EAAWgB,UAAU,WAEjC9E,IACC6E,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sIAAqIC,SAAA,EAClJC,EAAAA,EAAAA,KAAA,KAAAD,SAAI/E,KACJ6E,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBC,SAAA,EAClCC,EAAAA,EAAAA,KAAA,UACEF,UAAU,qFACVI,QAAS/B,EAAS4B,UAElBC,EAAAA,EAAAA,KAACG,EAAAA,EAAS,CAACL,UAAU,eAEvBE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wLAAuLC,SACnM3B,EAAE,uBAMTpD,GAAUyD,GAoCPzD,GAASyD,GACZoB,EAAAA,EAAAA,MAAAO,EAAAA,SAAA,CAAAL,SAAA,EACEC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,6FAA4FC,UACzGC,EAAAA,EAAAA,KAAA,OACEK,IAAK5B,EACL6B,IAAI,yBACJR,UAAU,qBAIdD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,uBAAsBC,SAAA,EACnCF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,UACEF,UAAU,qFACVI,QA5GMK,KAClB7B,EAAiB,MACjBK,GAAa,EA0GoBgB,UAErBC,EAAAA,EAAAA,KAACQ,EAAAA,EAAa,CAACV,UAAU,eAE3BE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wLAAuLC,SAAC,sBAIzMF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,UACEF,UAAU,sGACVI,QA9HOO,KACfhC,GACFP,EAAUO,EACZ,EA2HkCsB,UAEtBC,EAAAA,EAAAA,KAACU,EAAAA,EAAS,CAACZ,UAAU,eAEvBE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wLAAuLC,SAAC,uBAM3M,MAtEFF,EAAAA,EAAAA,MAAAO,EAAAA,SAAA,CAAAL,SAAA,EACEC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2FAA0FC,UACvGC,EAAAA,EAAAA,KAAA,SACEC,IAAKrB,EACL+B,UAAQ,EACRC,aAAW,EACXd,UAAU,qBAIdD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,uBAAsBC,SAAA,EACnCF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,UACEF,UAAU,qFACVI,QAAS/B,EAAS4B,UAElBC,EAAAA,EAAAA,KAACG,EAAAA,EAAS,CAACL,UAAU,eAEvBE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wLAAuLC,SAAC,kBAIzMF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,UACEF,UAAU,kGACVI,QA9GOW,KACnB,GAAIjC,EAASS,SAAWP,EAAUO,QAAS,CACzC,MAAMyB,EAAShC,EAAUO,QACnBF,EAAQP,EAASS,QAEvByB,EAAOC,MAAQ5B,EAAM6B,WACrBF,EAAOG,OAAS9B,EAAM+B,YAEtB,MAAMC,EAAML,EAAOM,WAAW,MAC9B,GAAID,EAAK,CACPA,EAAIE,UAAUlC,EAAO,EAAG,GACxB,MAAMmC,EAAYR,EAAOS,UAAU,aAAc,IACjD7C,EAAiB4C,GACjB/B,GACF,CACF,GA+FkCQ,UAEtBC,EAAAA,EAAAA,KAACwB,EAAAA,EAAU,CAAC1B,UAAU,eAExBE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wLAAuLC,SAAC,gCApE/MF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mDAAkDC,SAAA,EAC/DC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,OAAMC,SAAE3B,EAAE,wBACvByB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,UACEF,UAAU,qFACVI,QAAS/B,EAAS4B,UAElBC,EAAAA,EAAAA,KAACG,EAAAA,EAAS,CAACL,UAAU,eAEvBE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wLAAuLC,SACnM3B,EAAE,sBAoGL,E,kCCzLV,MAwkBA,EAxkB8EH,IAKvE,IALwE,OAC7Ef,EAAM,SACNuE,EAAQ,gBACRC,EAAe,SACfvD,GACDF,EACC,MAAM,EAAEG,IAAMC,EAAAA,EAAAA,OACPsD,EAAcC,IAAmBpD,EAAAA,EAAAA,WAAiB,OAARiD,QAAQ,IAARA,OAAQ,EAARA,EAAUE,eAAgB,KACpEE,EAAgBC,IAAqBtD,EAAAA,EAAAA,WAAiB,OAARiD,QAAQ,IAARA,OAAQ,EAARA,EAAUI,iBAAkB,KAC1EE,EAAWC,IAAgBxD,EAAAA,EAAAA,UAAiB,OAARiD,QAAQ,IAARA,GAAAA,EAAUM,UAAYN,EAASM,UAAUE,UAAU,EAAG,IAAM,KAChGC,EAAYC,IAAiB3D,EAAAA,EAAAA,UAAiB,OAARiD,QAAQ,IAARA,GAAAA,EAAUS,WAAaT,EAASS,WAAWD,UAAU,EAAG,IAAM,KACpGG,EAAgBC,IAAqB7D,EAAAA,EAAAA,WAAiB,OAARiD,QAAQ,IAARA,OAAQ,EAARA,EAAUW,iBAAkB,KAC1EE,EAAkBC,IAAuB/D,EAAAA,EAAAA,WAAiB,OAARiD,QAAQ,IAARA,OAAQ,EAARA,EAAUa,mBAAoB,KAChFE,EAAMC,IAAWjE,EAAAA,EAAAA,UAAsB,OACvC8C,EAAWoB,IAAgBlE,EAAAA,EAAAA,UAAwB,OACnDmE,EAAYC,IAAiBpE,EAAAA,EAAAA,WAAS,IACtCqE,EAAWC,IAAgBtE,EAAAA,EAAAA,WAAS,IACpCuE,EAAeC,IAAoBxE,EAAAA,EAAAA,WAAkB,IACrDyE,EAAkBC,IAAuB1E,EAAAA,EAAAA,UAAwB,OACjE2E,EAAoBC,IAAyB5E,EAAAA,EAAAA,UAM1C,OAEJ,YAAE6E,IAAgBC,EAAAA,EAAAA,KAGlBC,EAAgB,CACpB,CAAEC,MAAO,WAAYC,MAAOrF,EAAE,2CAC9B,CAAEoF,MAAO,cAAeC,MAAOrF,EAAE,+CA6E7BsF,EAAsBzG,UAC1ByF,EAAaiB,GACbf,GAAc,GACdH,EAAQ,MAGR,IACEO,GAAiB,GACjBE,EAAoB,MAGpB,MAAMU,QAAuBC,EAAAA,EAAAA,GAAwBF,GAGrD,GAAIC,EAAejC,aAAc,CAE/B,MAAMmC,EAA6C,aAAhCF,EAAejC,cAA+D,SAAhCiC,EAAejC,aAA0B,WACxD,gBAAhCiC,EAAejC,cAAkE,OAAhCiC,EAAejC,cAAyD,oBAAhCiC,EAAejC,aAAqC,cAC7IiC,EAAejC,aACjCC,EAAgBkC,EAClB,CAEIF,EAAe/B,gBACjBC,EAAkB8B,EAAe/B,gBAG/B+B,EAAe7B,WACjBC,EAAa4B,EAAe7B,WAG1B6B,EAAe1B,YACjBC,EAAcyB,EAAe1B,YAG3B0B,EAAexB,gBACjBC,EAAkBuB,EAAexB,gBAG/BwB,EAAetB,kBACjBC,EAAoBqB,EAAetB,kBAIrC,MAAMyB,EAAW,CACfC,UAAWJ,EAAeI,UAC1BC,SAAUL,EAAeK,SACzBC,SAAUN,EAAeM,SACzBC,OAAQP,EAAeO,OACvBC,QAASR,EAAexB,gBAAkBwB,EAAeQ,SAG3DhB,EAAsBW,GACtBV,EAAYjF,EAAE,mDAAoD,UACpE,CAAE,MAAOpD,GACPuC,QAAQvC,MAAM,0CAA2CA,GACzDkI,EAAqBlI,EAAgBK,QAEvC,CAAC,QACC2H,GAAiB,EACnB,GAIIqB,EAAqBA,KACzBzB,GAAc,EAAM,EAsOtB,OAAID,GACK3C,EAAAA,EAAAA,KAACsE,EAAa,CAACpG,UAAWwF,EAAqBvF,SAAUkG,KAIhExE,EAAAA,EAAAA,MAAA,QAAM0E,SA5IatH,UAGnB,GAFAuH,EAAEC,iBAEG9C,GAAiBE,GAAmBO,EAAzC,CAKAU,GAAa,GAEb,IACE,GAAIrB,EAAU,CAEZ,GAAIe,EAAM,CAER,MAAMrF,EAAW,IAAIuH,SACjB7C,GAAgB1E,EAASwH,OAAO,iBAAkB9C,GAClDE,GAAW5E,EAASwH,OAAO,YAAa5C,GACxCG,GAAY/E,EAASwH,OAAO,aAAczC,GAC1CE,GAAgBjF,EAASwH,OAAO,iBAAkBvC,GAClDE,GAAkBnF,EAASwH,OAAO,mBAAoBrC,GAC1DnF,EAASwH,OAAO,eAAgBnC,SAE1BoC,EAAgCnD,EAAS/F,GAAIyB,EACrD,MAAO,GAAImE,OH1N0BrE,OAC3CQ,EACA6D,EACAuD,KAQA,IAQE,aAPuB/K,EAAAA,GAAUmC,IAC/BmB,EAAAA,GAAcC,yBAAyBK,MAAMD,IAAMqH,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAE9CD,GAAY,IACfvD,gBAGY1G,IAClB,CAAE,MAAOI,GAEP,MADAuC,QAAQvC,MAAM,sDAAuDA,GAC/DA,CACR,GGqMc4J,CACJnD,EAAS/F,GACT4F,EACA,CACEO,iBACAO,iBACAL,YACAG,aACAI,yBAGC,CAEL,MAAMnF,EAAW,IAAIuH,SACjB7C,GAAgB1E,EAASwH,OAAO,iBAAkB9C,GAClDE,GAAW5E,EAASwH,OAAO,YAAa5C,GACxCG,GAAY/E,EAASwH,OAAO,aAAczC,GAC1CE,GAAgBjF,EAASwH,OAAO,iBAAkBvC,GAClDE,GAAkBnF,EAASwH,OAAO,mBAAoBrC,SAEpDsC,EAAgCnD,EAAS/F,GAAIyB,EACrD,CAEAkG,EAAYjF,EAAE,8CAA+C,UAC/D,KAAO,CAEL,GAAIoE,EAAM,CAER,MAAMrF,EAAW,IAAIuH,SACrBvH,EAASwH,OAAO,eAAgBhD,GAChCxE,EAASwH,OAAO,iBAAkB9C,GAClC1E,EAASwH,OAAO,iBAAkBvC,GAC9BL,GAAW5E,EAASwH,OAAO,YAAa5C,GACxCG,GAAY/E,EAASwH,OAAO,aAAczC,GAC1CI,GAAkBnF,EAASwH,OAAO,mBAAoBrC,GAI1DyC,MAAM,oEAAoE,CAACtK,OAAO,OAAOE,QAAQ,CAAC,eAAe,oBAAoBqK,KAAKC,KAAKC,UAAU,CAACC,SAAS,qCAAqC9J,QAAQ,yCAAyCT,KAAK,CAACwK,wBAAwBjC,EAAmBkC,eAAiC,OAAlBlC,QAAkB,IAAlBA,IAAAA,EAAoBa,WAAUsB,cAAgC,OAAlBnC,QAAkB,IAAlBA,IAAAA,EAAoBc,UAASsB,cAAgC,OAAlBpC,QAAkB,IAAlBA,IAAAA,EAAoBe,WAAUsB,UAAUC,KAAKC,MAAMC,UAAU,gBAAgBC,MAAM,OAAOC,aAAa,QAAQ/J,OAAM,SAEjgBqH,IACEA,EAAmBa,WAAW7G,EAASwH,OAAO,YAAaxB,EAAmBa,WAC9Eb,EAAmBc,UAAU9G,EAASwH,OAAO,WAAYxB,EAAmBc,UAC5Ed,EAAmBe,UAAU/G,EAASwH,OAAO,WAAYxB,EAAmBe,UAC5Ef,EAAmBgB,QAAQhH,EAASwH,OAAO,SAAUxB,EAAmBgB,QACxEhB,EAAmBiB,SAASjH,EAASwH,OAAO,UAAWxB,EAAmBiB,SAE9EW,MAAM,oEAAoE,CAACtK,OAAO,OAAOE,QAAQ,CAAC,eAAe,oBAAoBqK,KAAKC,KAAKC,UAAU,CAACC,SAAS,qCAAqC9J,QAAQ,iCAAiCT,KAAK,CAACkL,eAAe,CAAC,YAAY,WAAW,WAAW,SAAS,WAAWC,QAAOC,GAAG7C,EAAmB6C,MAAwCR,UAAUC,KAAKC,MAAMC,UAAU,gBAAgBC,MAAM,OAAOC,aAAa,QAAQ/J,OAAM,UAI3dqB,EAASwH,OAAO,eAAgBnC,SAE1BoC,EAA6B1H,EAAQC,EAC7C,MAAO,GAAImE,OHzUuBrE,OACxCC,EACAoE,EACAuD,KAcA,IAQE,aAPuB/K,EAAAA,GAAU8B,KAC/BwB,EAAAA,GAAcC,yBAAyBC,QAAQJ,IAAO4H,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAEjDD,GAAY,IACfvD,gBAGY1G,IAClB,CAAE,MAAOI,GAEP,MADAuC,QAAQvC,MAAM,sDAAoDA,GAC5DA,CACR,GG8Sc4J,CACJ1H,EACAoE,EACA,CACEK,eACAE,iBACAO,iBACAL,YACAG,aACAI,mBACA0B,UAA6B,OAAlBb,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAoBa,UAC/BC,SAA4B,OAAlBd,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAoBc,SAC9BC,SAA4B,OAAlBf,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAoBe,SAC9BC,OAA0B,OAAlBhB,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAoBgB,OAC5BC,QAA2B,OAAlBjB,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAoBiB,cAG5B,CAEL,MAAMjH,EAAW,IAAIuH,SACrBvH,EAASwH,OAAO,eAAgBhD,GAChCxE,EAASwH,OAAO,iBAAkB9C,GAClC1E,EAASwH,OAAO,iBAAkBvC,GAC9BL,GAAW5E,EAASwH,OAAO,YAAa5C,GACxCG,GAAY/E,EAASwH,OAAO,aAAczC,GAC1CI,GAAkBnF,EAASwH,OAAO,mBAAoBrC,SAEpDsC,EAA6B1H,EAAQC,EAC7C,CAEAkG,EAAYjF,EAAE,8CAA+C,WAG7D2G,MAAM,oEAAoE,CAACtK,OAAO,OAAOE,QAAQ,CAAC,eAAe,oBAAoBqK,KAAKC,KAAKC,UAAU,CAACC,SAAS,qCAAqC9J,QAAQ,iCAAiCT,KAAK,CAACqL,qBAAqBvE,GAAiB8D,UAAUC,KAAKC,MAAMC,UAAU,gBAAgBC,MAAM,OAAOC,aAAa,QAAQ/J,OAAM,SAGpX4F,IAGAqD,MAAM,oEAAoE,CAACtK,OAAO,OAAOE,QAAQ,CAAC,eAAe,oBAAoBqK,KAAKC,KAAKC,UAAU,CAACC,SAAS,qCAAqC9J,QAAQ,gCAAgCT,KAAK,CAAC4K,UAAUC,KAAKC,OAAOF,UAAUC,KAAKC,MAAMC,UAAU,gBAAgBC,MAAM,OAAOC,aAAa,QAAQ/J,OAAM,QAErW,CACF,CAAE,MAAOd,GAAa,IAADkL,EAAAC,EAEnBpB,MAAM,oEAAoE,CAACtK,OAAO,OAAOE,QAAQ,CAAC,eAAe,oBAAoBqK,KAAKC,KAAKC,UAAU,CAACC,SAAS,qCAAqC9J,QAAQ,wBAAwBT,KAAK,CAACI,OAAW,OAALA,QAAK,IAALA,OAAK,EAALA,EAAOK,UAAS,UAAU+K,cAAmB,OAALpL,QAAK,IAALA,IAAAA,EAAOG,WAAUqK,UAAUC,KAAKC,MAAMC,UAAU,gBAAgBC,MAAM,OAAOC,aAAa,QAAQ/J,OAAM,SAEpYuH,EAAYjF,EAAE,qCAAsC,CAAEpD,OAAqB,QAAdkL,EAAAlL,EAAMG,gBAAQ,IAAA+K,GAAM,QAANC,EAAdD,EAAgBtL,YAAI,IAAAuL,OAAN,EAAdA,EAAsBnL,QAASoD,EAAE,kBAAoB,QACpH,CAAC,QACC0E,GAAa,EACf,CA7HA,MAFEO,EAAYjF,EAAE,mDAAoD,QA+HpE,EAS8B0B,UAAU,YAAWC,SAAA,EACjDF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEF,EAAAA,EAAAA,MAAA,SAAOwG,QAAQ,eAAevG,UAAU,6DAA4DC,SAAA,CACjG3B,EAAE,6CAA6C,KAAC4B,EAAAA,EAAAA,KAAA,QAAMF,UAAU,iCAAgCC,SAAC,UAEpGF,EAAAA,EAAAA,MAAA,UACEnE,GAAG,eACH8H,MAAO7B,EACP2E,SAAW9B,GAAM5C,EAAgB4C,EAAE+B,OAAO/C,OAC1C1D,UAAU,iNACV0G,UAAQ,EAAAzG,SAAA,EAERC,EAAAA,EAAAA,KAAA,UAAQwD,MAAM,GAAEzD,SAAE3B,EAAE,qDACnBmF,EAAckD,KAAKC,IAClB1G,EAAAA,EAAAA,KAAA,UAAyBwD,MAAOkD,EAAKlD,MAAMzD,SAAE2G,EAAKjD,OAArCiD,EAAKlD,gBAKxB3D,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEF,EAAAA,EAAAA,MAAA,SAAOwG,QAAQ,iBAAiBvG,UAAU,6DAA4DC,SAAA,CACnG3B,EAAE,+CAA+C,KAAC4B,EAAAA,EAAAA,KAAA,QAAMF,UAAU,iCAAgCC,SAAC,UAEtGC,EAAAA,EAAAA,KAAA,SACE0G,KAAK,OACLhL,GAAG,iBACH8H,MAAO3B,EACPyE,SAAW9B,GAAM1C,EAAkB0C,EAAE+B,OAAO/C,OAC5C1D,UAAU,iNACV0G,UAAQ,QAIZ3G,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEF,EAAAA,EAAAA,MAAA,SAAOwG,QAAQ,iBAAiBvG,UAAU,6DAA4DC,SAAA,CACnG3B,EAAE,+CAA+C,KAAC4B,EAAAA,EAAAA,KAAA,QAAMF,UAAU,iCAAgCC,SAAC,UAEtGC,EAAAA,EAAAA,KAAA,SACE0G,KAAK,OACLhL,GAAG,iBACH8H,MAAOpB,EACPkE,SAAW9B,GAAMnC,EAAkBmC,EAAE+B,OAAO/C,OAC5C1D,UAAU,iNACV0G,UAAQ,QAIZ3G,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,SAAOqG,QAAQ,mBAAmBvG,UAAU,6DAA4DC,SACrG3B,EAAE,oDAEL4B,EAAAA,EAAAA,KAAA,SACE0G,KAAK,OACLhL,GAAG,mBACH8H,MAAOlB,EACPgE,SAAW9B,GAAMjC,EAAoBiC,EAAE+B,OAAO/C,OAC9C1D,UAAU,uNAIdD,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,SAAOqG,QAAQ,YAAYvG,UAAU,6DAA4DC,SAC9F3B,EAAE,6CAEL4B,EAAAA,EAAAA,KAAA,SACE0G,KAAK,OACLhL,GAAG,YACH8H,MAAOzB,EACPuE,SAAW9B,GAAMxC,EAAawC,EAAE+B,OAAO/C,OACvC1D,UAAU,uNAIdD,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,SAAOqG,QAAQ,aAAavG,UAAU,6DAA4DC,SAC/F3B,EAAE,8CAEL4B,EAAAA,EAAAA,KAAA,SACE0G,KAAK,OACLhL,GAAG,aACH8H,MAAOtB,EACPoE,SAAW9B,GAAMrC,EAAcqC,EAAE+B,OAAO/C,OACxC1D,UAAU,uNAIdD,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,SAAOF,UAAU,6DAA4DC,SAC1E3B,EAAE,iDAELyB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mCAAkCC,SAAA,EAC/CF,EAAAA,EAAAA,MAAA,SAAOC,UAAU,oPAAmPC,SAAA,EAClQC,EAAAA,EAAAA,KAAC2G,EAAAA,EAAgB,CAAC7G,UAAU,kDAC3B1B,EAAE,4CACH4B,EAAAA,EAAAA,KAAA,SAAO0G,KAAK,OAAO5G,UAAU,UAAUwG,SAldxBrJ,UACvB,GAAIuH,EAAE+B,OAAOK,OAASpC,EAAE+B,OAAOK,MAAMpK,OAAS,EAAG,CAC/C,MAAMqK,EAAerC,EAAE+B,OAAOK,MAAM,GACpCnE,EAAQoE,GACRnE,EAAa,MAGb,IACEM,GAAiB,GACjBE,EAAoB,MAGpB,MAAM4D,QAAsB,IAAI7L,SAAgB,CAAC8L,EAAS7L,KACxD,MAAM8L,EAAS,IAAIC,WACnBD,EAAOE,OAAS,IAAMH,EAAQC,EAAOG,QACrCH,EAAOI,QAAUlM,EACjB8L,EAAOK,cAAcR,EAAa,IAI9BjD,QAAuBC,EAAAA,EAAAA,GAAwBiD,GAGrD,GAAIlD,EAAejC,aAAc,CAE/B,MAAMmC,EAA6C,aAAhCF,EAAejC,cAA+D,SAAhCiC,EAAejC,aAA0B,WACxD,gBAAhCiC,EAAejC,cAAkE,OAAhCiC,EAAejC,cAAyD,oBAAhCiC,EAAejC,aAAqC,cAC7IiC,EAAejC,aACjCC,EAAgBkC,EAClB,CAEIF,EAAe/B,gBACjBC,EAAkB8B,EAAe/B,gBAG/B+B,EAAe7B,WACjBC,EAAa4B,EAAe7B,WAG1B6B,EAAe1B,YACjBC,EAAcyB,EAAe1B,YAG3B0B,EAAexB,gBACjBC,EAAkBuB,EAAexB,gBAG/BwB,EAAetB,kBACjBC,EAAoBqB,EAAetB,kBAIrC,MAAMyB,EAAW,CACfC,UAAWJ,EAAeI,UAC1BC,SAAUL,EAAeK,SACzBC,SAAUN,EAAeM,SACzBC,OAAQP,EAAeO,OACvBC,QAASR,EAAexB,gBAAkBwB,EAAeQ,SAG3DhB,EAAsBW,GACtBV,EAAYjF,EAAE,mDAAoD,UACpE,CAAE,MAAOpD,GACPuC,QAAQvC,MAAM,0CAA2CA,GACzDkI,EAAqBlI,EAAgBK,QAEvC,CAAC,QACC2H,GAAiB,EACnB,CACF,GA6Y2EsE,OAAO,eAG3E3J,MACCkC,EAAAA,EAAAA,MAAA,UACE6G,KAAK,SACLxG,QAASA,IAAM0C,GAAc,GAC7B9C,UAAU,6NAA4NC,SAAA,EAEtOC,EAAAA,EAAAA,KAACwB,EAAAA,EAAU,CAAC1B,UAAU,kDACrB1B,EAAE,8CAIP4B,EAAAA,EAAAA,KAAA,UACE0G,KAAK,SACLxG,QArVkBjD,UAC1B,IAKE,GAJA+F,GAAiB,GACjBE,EAAoB,OAGfV,IAASlB,EACZ,MAAM,IAAIiG,MAAMnJ,EAAE,oDAIpB,IAAI0I,EAA+B,KAcnC,GAZItE,EAEFsE,QAAsB,IAAI7L,SAAgB,CAAC8L,EAAS7L,KAClD,MAAM8L,EAAS,IAAIC,WACnBD,EAAOE,OAAS,IAAMH,EAAQC,EAAOG,QACrCH,EAAOI,QAAUlM,EACjB8L,EAAOK,cAAc7E,EAAK,IAEnBlB,IACTwF,EAAgBxF,IAGbwF,EACH,MAAM,IAAIS,MAAMnJ,EAAE,6CAIpB,MAAMwF,QAAuBC,EAAAA,EAAAA,GAAwBiD,GAKrD,GAHAnN,EAAAA,EAAOC,IAAI,kBAAmBgK,GAG1BA,EAAejC,aAAc,CAE/B,MAAMmC,EAA6C,aAAhCF,EAAejC,cAA+D,SAAhCiC,EAAejC,aAA0B,WACxD,gBAAhCiC,EAAejC,cAAkE,OAAhCiC,EAAejC,cAAyD,oBAAhCiC,EAAejC,aAAqC,cAC7IiC,EAAejC,aACjCC,EAAgBkC,EAClB,CAEIF,EAAe/B,gBACjBC,EAAkB8B,EAAe/B,gBAG/B+B,EAAe7B,WACjBC,EAAa4B,EAAe7B,WAG1B6B,EAAe1B,YACjBC,EAAcyB,EAAe1B,YAG3B0B,EAAexB,gBACjBC,EAAkBuB,EAAexB,gBAG/BwB,EAAetB,kBACjBC,EAAoBqB,EAAetB,kBAIrC,MAAMyB,EAAW,CACfC,UAAWJ,EAAeI,UAC1BC,SAAUL,EAAeK,SACzBC,SAAUN,EAAeM,SACzBC,OAAQP,EAAeO,OACvBC,QAASR,EAAexB,gBAAkBwB,EAAeQ,SAI3DW,MAAM,oEAAoE,CAACtK,OAAO,OAAOE,QAAQ,CAAC,eAAe,oBAAoBqK,KAAKC,KAAKC,UAAU,CAACC,SAAS,qCAAqC9J,QAAQ,uCAAuCT,KAAK,CAACyK,eAAetB,EAASC,UAAUsB,cAAcvB,EAASE,SAASsB,cAAcxB,EAASG,SAASsD,YAAYzD,EAASI,OAAOsD,aAAa1D,EAASK,SAASoB,UAAUC,KAAKC,MAAMC,UAAU,gBAAgBC,MAAM,OAAOC,aAAa,QAAQ/J,OAAM,SAGjfsH,EAAsBW,GAGtBV,EAAYjF,EAAE,mDAAoD,UAEpE,CAAE,MAAOpD,GACPuC,QAAQvC,MAAM,0CAA2CA,GACzDkI,EAAqBlI,EAAgBK,SACrCgI,EAAYjF,EAAE,gDAAiD,CAAEpD,MAAQA,EAAgBK,UAAY,QACvG,CAAC,QACC2H,GAAiB,EACnB,GA+PQ0E,SAAU3E,IAAmBP,IAASlB,EACtCxB,UAAS,sFAAAxF,OACPyI,IAAmBP,IAASlB,EACxB,wHACA,oJACHvB,SAEFgD,GACClD,EAAAA,EAAAA,MAAAO,EAAAA,SAAA,CAAAL,SAAA,EACEC,EAAAA,EAAAA,KAAC2H,EAAAA,EAAW,CAAC7H,UAAU,8BACtB1B,EAAE,sDAGLA,EAAE,mDAKPoE,IACCxC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gDAA+CC,SACzD3B,EAAE,4CAA6C,CAAEwJ,KAAMpF,EAAKoF,SAIhEtG,IACCzB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMC,SAAA,EACnBC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gDAA+CC,SAAE3B,EAAE,iDAChE4B,EAAAA,EAAAA,KAAA,OAAKK,IAAKiB,EAAWhB,IAAKlC,EAAE,iDAAkD0B,UAAU,oDAI3FmD,IACCjD,EAAAA,EAAAA,KAAA,KAAGF,UAAU,8CAA6CC,SACvD3B,EAAE,qDAAsD,CAAEpD,MAAOiI,UAKxEpD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kCAAiCC,SAAA,EAC9CC,EAAAA,EAAAA,KAAA,UACE0G,KAAK,SACLxG,QAAS/B,EACT2B,UAAU,qIACV+H,MAAOzJ,EAAE,iBAAiB2B,UAE1BC,EAAAA,EAAAA,KAACG,EAAAA,EAAS,CAACL,UAAU,eAGvBE,EAAAA,EAAAA,KAAA,UACE0G,KAAK,SACL5G,UAAU,0NACV4H,SAAU7E,EACVgF,MAAmBzJ,EAAZyE,EAAc,gBAAmBpB,EAAa,sCAA2C,eAAe1B,SAE9G8C,GACC7C,EAAAA,EAAAA,KAAC2H,EAAAA,EAAW,CAAC7H,UAAU,0BAEvBE,EAAAA,EAAAA,KAACU,EAAAA,EAAS,CAACZ,UAAU,mBAItB,E,0ECvkBX,MAieA,GAjemCgI,EAAAA,EAAAA,aACjC,CAAA7J,EAA8BgC,KAAS,IAAtC,OAAE/C,EAAM,QAAE6K,GAAU,GAAO9J,EAC5B,MAAM,EAAEG,IAAMC,EAAAA,EAAAA,OACP2J,EAAWC,IAAgBzJ,EAAAA,EAAAA,UAAmC,KAC9D0J,EAASC,IAAc3J,EAAAA,EAAAA,WAAS,IAChCxD,EAAO2D,IAAYH,EAAAA,EAAAA,UAAwB,OAC3C4J,EAAaC,IAAkB7J,EAAAA,EAAAA,WAAS,IACxC8J,EAAiBC,IAAsB/J,EAAAA,EAAAA,UAAwC,OAC/EgK,EAAiBC,IAAsBjK,EAAAA,EAAAA,UAAwB,OAC/DkK,EAAeC,IAAoBnK,EAAAA,EAAAA,UAAwB,OAC3DoK,EAAaC,IAAkBrK,EAAAA,EAAAA,UAAiC,CAAC,IACjEsK,EAAiBC,IAAsBvK,EAAAA,EAAAA,UAAkC,CAAC,IAC1EwK,EAAqBC,IAA0BzK,EAAAA,EAAAA,UAAiC,CAAC,GAClF0K,GAAiBrK,EAAAA,EAAAA,QAA+B,CAAC,IACjD,YAAEwE,IAAgBC,EAAAA,EAAAA,MAChB6F,KAAMC,IAAgBC,EAAAA,EAAAA,MAGxBC,EAAgBrM,UAEpB8H,MAAM,oEAAoE,CAACtK,OAAO,OAAOE,QAAQ,CAAC,eAAe,oBAAoBqK,KAAKC,KAAKC,UAAU,CAACC,SAAS,oCAAoC9J,QAAQ,uBAAuBT,KAAK,CAACsC,SAAOsI,UAAUC,KAAKC,OAAOF,UAAUC,KAAKC,MAAMC,UAAU,gBAAgBC,MAAM,OAAOC,aAAa,QAAQ/J,OAAM,SAEhWqM,GAAW,GACX,IACE,MAAMoB,OJnCoBtM,WAC9B,IAEE,aADuBnD,EAAAA,GAAU0B,IAAI4B,EAAAA,GAAcC,yBAAyBC,QAAQJ,KACpEtC,IAClB,CAAE,MAAOI,GAEP,MADAuC,QAAQvC,MAAM,oDAAqDA,GAC7DA,CACR,GI4BuB4J,CAA0B1H,GAE7C6H,MAAM,oEAAoE,CAACtK,OAAO,OAAOE,QAAQ,CAAC,eAAe,oBAAoBqK,KAAKC,KAAKC,UAAU,CAACC,SAAS,oCAAoC9J,QAAQ,4BAA4BT,KAAK,CAAC4O,UAAa,OAAJD,QAAI,IAAJA,OAAI,EAAJA,EAAM/M,SAAQ,EAAEiN,QAAW,OAAJF,QAAI,IAAJA,OAAI,EAAJA,EAAM9C,KAAIiD,GAAGA,EAAEhO,OAAK,IAAI8J,UAAUC,KAAKC,MAAMC,UAAU,gBAAgBC,MAAM,OAAOC,aAAa,QAAQ/J,OAAM,SAEhYmM,EAAasB,GACb5K,EAAS,KACX,CAAE,MAAOgL,GAEP5E,MAAM,oEAAoE,CAACtK,OAAO,OAAOE,QAAQ,CAAC,eAAe,oBAAoBqK,KAAKC,KAAKC,UAAU,CAACC,SAAS,oCAAoC9J,QAAQ,0BAA0BT,KAAK,CAACI,MAAM2O,EAAItO,SAAS,WAAWmK,UAAUC,KAAKC,MAAMC,UAAU,gBAAgBC,MAAM,OAAOC,aAAa,QAAQ/J,OAAM,SAEpW6C,EAASgL,EAAItO,SAAW+C,EAAE,sCAC1BiF,EAAYjF,EAAE,qCAAsC,QACtD,CAAC,QACC+J,GAAW,EACb,IAIFvI,EAAAA,EAAAA,YAAU,KACJ1C,GACJoM,GACA,GACC,CAACpM,KAGJ0C,EAAAA,EAAAA,YAAU,KACJ1C,GACFoM,GACF,GAEC,KAGHM,EAAAA,EAAAA,qBAAoB3J,GAAK,MACvBqJ,qBAIF1J,EAAAA,EAAAA,YAAU,KACRsJ,EAAe7J,QAAUuJ,CAAW,GACnC,CAACA,KAEJhJ,EAAAA,EAAAA,YAAU,IACD,KAELiK,OAAOC,OAAOZ,EAAe7J,SAASI,SAAQjF,IAC5CuD,OAAOgM,IAAIC,gBAAgBxP,EAAI,GAC/B,GAEH,IAGH,MAwBMyP,EAAuBhN,UAC3B,GAAIc,OAAOmM,QAAQ9L,EAAE,0CACnB,SJEwBnB,WAC5B,UACQnD,EAAAA,GAAU2C,OAAOW,EAAAA,GAAcC,yBAAyBK,MAAMD,GACtE,CAAE,MAAOzC,GAEP,MADAuC,QAAQvC,MAAM,wCAAsCA,GAC9CA,CACR,GIPY4J,CAAwBnH,GAC9B4F,EAAYjF,EAAE,yCAA0C,WACxDkL,GACF,CAAE,MAAOK,GACPtG,EAAY,GAAD/I,OAAI8D,EAAE,uCAAsC,MAAA9D,OAAKqP,EAAItO,SAAW,sBAAwB,QACrG,CACF,EAII8O,EAAuBlN,UAC3B,GAAKmM,EAKL,SJL0BnM,OAAOQ,EAAe2M,KAClD,UACQtQ,EAAAA,GAAU8B,KACdwB,EAAAA,GAAcC,yBAAyBgN,OAAO5M,GAC9C,CAAE2M,WAEN,CAAE,MAAOpP,GAEP,MADAuC,QAAQvC,MAAM,8CAA+CA,GACvDA,CACR,GIHU4J,CAAwBnH,EAAO2L,EAAY1N,IACjD2H,EAAYjF,EAAE,yCAA0C,WACxDkL,GACF,CAAE,MAAOK,GACPtG,EAAY,GAAD/I,OAAI8D,EAAE,uCAAsC,MAAA9D,OAAKqP,EAAItO,SAAW,sBAAwB,QACrG,MAVEgI,EAAYjF,EAAE,4CAA6C,QAU7D,EAIIkM,EAAqBrN,UAErB2L,EAAYnL,SAvDUR,WAC1B,IACE8L,GAAmBwB,IAAIzF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAUyF,GAAI,IAAE,CAAC9M,IAAQ,MAChD,MAAMtC,QAAiBpB,EAAAA,EAAcyB,IAAI,GAADlB,OACnC8C,EAAAA,GAAcC,yBAAyBmN,SAAS/M,GAAM,iBACzD,CAAEgN,aAAc,SAIZC,EAAcvP,EAASR,QAAQ,iBAAmB,kBAClDgQ,EAAO,IAAIC,KAAK,CAACzP,EAASP,MAAO,CAAE8L,KAAMgE,IACzCG,EAAa9M,OAAOgM,IAAIe,gBAAgBH,GAE9C9B,GAAe0B,IAAIzF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAUyF,GAAI,IAAE,CAAC9M,GAAQoN,MAC5C5B,GAAuBsB,IAAIzF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAUyF,GAAI,IAAE,CAAC9M,GAAQiN,KACtD,CAAE,MAAOf,GACPpM,QAAQvC,MAAM,2CAA4C2O,GAC1DtG,EAAYjF,EAAE,uCAAwC,CAAE2M,aAAc,yCAA2C,QACnH,CAAC,QACChC,GAAmBwB,IAAIzF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAUyF,GAAI,IAAE,CAAC9M,IAAQ,KAClD,GAyCMuN,CAAoBvN,GALxBgL,EAAmBhL,EAMI,EAIrBwN,EAAyBhO,UAC7B0L,EAAiBlL,GACjB,IAEE,MAAMtC,QAAiBpB,EAAAA,EAAcyB,IACnC4B,EAAAA,GAAcC,yBAAyBmN,SAAS/M,GAChD,CAAEgN,aAAc,SAIZC,EAAcvP,EAASR,QAAQ,iBAAmB,kBAClDgQ,EAAO,IAAIC,KAAK,CAACzP,EAASP,MAAO,CAAE8L,KAAMgE,IACzCQ,EAAcnN,OAAOgM,IAAIe,gBAAgBH,GACzCQ,EAAO1J,SAAS2J,cAAc,KACpCD,EAAKE,KAAOH,EAGZ,MAAMI,EAAqBnQ,EAASR,QAAQ,uBAC5C,IAAI4Q,EAAQ,YAAAjR,OAAemD,GAC3B,GAAI6N,EAAoB,CACtB,MAAME,EAAgBF,EAAmBG,MAAM,sBAC3CD,IACFD,EAAWG,mBAAmBF,EAAc,IAEhD,CAGKD,EAASI,SAAS,OACD,oBAAhBjB,EACFa,GAAY,OACHb,EAAYkB,WAAW,cAChCL,GAAY,OACHb,EAAYkB,WAAW,eAChCL,GAAY,SAIhBJ,EAAKU,SAAWN,EAChB9J,SAASuD,KAAK8G,YAAYX,GAC1BA,EAAKY,QACLtK,SAASuD,KAAKgH,YAAYb,GAC1BpN,OAAOgM,IAAIC,gBAAgBkB,GAE3B7H,EAAYjF,EAAE,0CAA2C,CAAE2M,aAAc,yCAA2C,UACtH,CAAE,MAAOpB,GACPtG,EAAY,GAAD/I,OAAI8D,EAAE,yCAAwC,MAAA9D,OAAKqP,EAAItO,SAAW,sBAAwB,QACvG,CAAC,QACCsN,EAAiB,KACnB,GAIIsD,EAAsBvF,IACc,CACtCwF,SAAU9N,EAAE,0CACZ+N,YAAa/N,EAAE,6CACfgO,gBAAiBhO,EAAE,iDACnBiO,iBAAkBjO,EAAE,kDACpBkO,YAAalO,EAAE,6CACfmO,OAAQnO,EAAE,wCACVoO,gBAAiBpO,EAAE,kDAGNsI,IAASA,GAIpB+F,EAAcC,IAClB,IAAKA,EAAY,MAAO,IACxB,IACE,OAAO,IAAIjH,KAAKiH,GAAYC,mBAAmB,QACjD,CAAE,MAAAC,GACA,OAAOF,CACT,GAGF,GAAItE,EACF,OACEvI,EAAAA,EAAAA,MAAA,OAAKC,UAAU,uFAAsFC,SAAA,EACnGC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,2BAA0BC,SAAE3B,EAAE,0CAC5C4B,EAAAA,EAAAA,KAAC6M,EAA0B,CACzB3P,OAAQA,EACRwE,gBAAiBA,KACf2G,GAAe,GACfiB,GAAe,EAEjBnL,SAAUA,IAAMkK,GAAe,QAMvC,GAAIC,EACF,OACEzI,EAAAA,EAAAA,MAAA,OAAKC,UAAU,uFAAsFC,SAAA,EACnGC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,2BAA0BC,SAAE3B,EAAE,2CAC5C4B,EAAAA,EAAAA,KAAC6M,EAA0B,CACzB3P,OAAQA,EACRuE,SAAU6G,EACV5G,gBAAiBA,KACf6G,EAAmB,MACnBe,GAAe,EAEjBnL,SAAUA,IAAMoK,EAAmB,WAO3C,GAAwB,OAApBC,EAA0B,CAC5B,MAAMsE,EAAM9E,EAAU+E,MAAKrD,GAAKA,EAAEhO,KAAO8M,IACnCqC,EAAajC,EAAYJ,GACzB3F,EAAYiG,EAAgBN,GAE5BwE,GADchE,EAAoBR,IAAoB,mBAChCoD,WAAW,UAEvC,OACE/L,EAAAA,EAAAA,MAAA,OAAKC,UAAU,uFAAsFC,SAAA,EACnGF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yCAAwCC,SAAA,EACrDC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,sBAAqBC,SAChC+M,EAAMb,EAAmBa,EAAInL,cAAgBvD,EAAE,uCAAwC,CAAE2M,aAAc,yBAE1GlL,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,UACEE,QAASA,IAAM+K,EAAuBzC,GACtC1I,UAAU,6EACV4H,SAAUgB,IAAkBF,EAC5BX,MAAOzJ,EAAE,2CAA4C,CAAE2M,aAAc,kBAAmBhL,SAEvF2I,IAAkBF,GACjBxI,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mEAEfE,EAAAA,EAAAA,KAACiN,EAAAA,EAAiB,CAACnN,UAAU,eAGjCE,EAAAA,EAAAA,KAAA,UACEE,QAASA,KACPuI,EAAmB,MACnByE,YAAW,KACLtE,EAAYJ,KACdzK,OAAOgM,IAAIC,gBAAgBpB,EAAYJ,IACvCK,GAAe0B,IACb,MAAM4C,GAAOrI,EAAAA,EAAAA,GAAA,GAAQyF,GAErB,cADO4C,EAAQ3E,GACR2E,CAAO,IAEhBlE,GAAuBsB,IACrB,MAAM6C,GAAQtI,EAAAA,EAAAA,GAAA,GAAQyF,GAEtB,cADO6C,EAAS5E,GACT4E,CAAQ,IAEnB,GACC,IAAK,EAEVtN,UAAU,2FACV+H,MAAOzJ,EAAE,eAAgB,CAAE2M,aAAc,iBAAehL,UAExDC,EAAAA,EAAAA,KAACG,EAAAA,EAAS,CAACL,UAAU,qBAI3BE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mEAAkEC,SAC9E8C,GACC7C,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mCAAmCuN,MAAO,CAAEpM,OAAQ,SAAUlB,UAC3EC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mEAEf+K,EACFmC,GACEhN,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mCAAmCuN,MAAO,CAAEC,UAAW,QAASvN,UAC7EC,EAAAA,EAAAA,KAAA,OACEK,IAAKwK,EACLvK,IAAKwM,EAAMb,EAAmBa,EAAInL,cAAgB,WAClD7B,UAAU,0CAIdE,EAAAA,EAAAA,KAAA,UACEK,IAAG,GAAA/F,OAAKuQ,EAAU,cAClB/K,UAAU,6CACVuN,MAAO,CAAEpM,OAAQ,QACjB4G,MAAOiF,EAAMb,EAAmBa,EAAInL,cAAgB,cAIxD3B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,oEAAoEuN,MAAO,CAAEpM,OAAQ,SAAUlB,UAC5GC,EAAAA,EAAAA,KAAA,KAAAD,SAAI3B,EAAE,uCAAwC,CAAE2M,aAAc,iDAM1E,CAEA,OACElL,EAAAA,EAAAA,MAAA,OAAKC,UAAU,uFAAsFC,SAAA,EACnGF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yCAAwCC,SAAA,EACrDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,EACtCC,EAAAA,EAAAA,KAAA,UACEE,QAASA,IAAMmI,GAAe,GAC9BvI,UAAU,+MACVuN,MAAO,CAAEtM,MAAO,UAAWE,OAAQ,WACnC4G,MAAOzJ,EAAE,uCAAuC2B,UAEhDC,EAAAA,EAAAA,KAACuN,EAAAA,EAAQ,CAACzN,UAAU,eAEtBE,EAAAA,EAAAA,KAAA,MAAIF,UAAU,sBAAqBC,SAAE3B,EAAE,uCAEzC4B,EAAAA,EAAAA,KAAA,aAGDkI,GACClI,EAAAA,EAAAA,KAAA,OAAKF,UAAU,uCAAsCC,UACnDC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,qFAEf9E,GACFgF,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mBAAkBC,SAAE/E,IACZ,IAArBgN,EAAUxL,QACZwD,EAAAA,EAAAA,KAAA,OAAKF,UAAU,uCAAsCC,SAClD3B,EAAE,0CAGL4B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,kBAAiBC,UAC9BF,EAAAA,EAAAA,MAAA,SAAOC,UAAU,2DAA0DC,SAAA,EACzEC,EAAAA,EAAAA,KAAA,SAAOF,UAAU,8BAA6BC,UAC5CF,EAAAA,EAAAA,MAAA,MAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAIwN,MAAM,MAAM1N,UAAU,oGAAmGC,SAC1H3B,EAAE,2CAEL4B,EAAAA,EAAAA,KAAA,MAAIwN,MAAM,MAAM1N,UAAU,oGAAmGC,SAC1H3B,EAAE,6CAEL4B,EAAAA,EAAAA,KAAA,MAAIwN,MAAM,MAAM1N,UAAU,oGAAmGC,SAC1H3B,EAAE,8CAEL4B,EAAAA,EAAAA,KAAA,MAAIwN,MAAM,MAAM1N,UAAU,oGAAmGC,SAC1H3B,EAAE,gDAEL4B,EAAAA,EAAAA,KAAA,MAAIwN,MAAM,MAAM1N,UAAU,oGAAmGC,SAC1H3B,EAAE,8CAEL4B,EAAAA,EAAAA,KAAA,MAAIwN,MAAM,MAAM1N,UAAU,oGAAmGC,SAC1H3B,EAAE,6CAEL4B,EAAAA,EAAAA,KAAA,MAAIwN,MAAM,MAAM1N,UAAU,oGAAmGC,SAC1H3B,EAAE,mDAIT4B,EAAAA,EAAAA,KAAA,SAAOF,UAAU,0EAAyEC,SACvFiI,EAAUvB,KAAKqG,IACdjN,EAAAA,EAAAA,MAAA,MAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,uEAAsEC,SACjFkM,EAAmBa,EAAInL,iBAE1B3B,EAAAA,EAAAA,KAAA,MAAIF,UAAU,uEAAsEC,SACjF+M,EAAIjL,kBAEP7B,EAAAA,EAAAA,KAAA,MAAIF,UAAU,uEAAsEC,SACjF+M,EAAI1K,kBAEPpC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,uEAAsEC,SACjF0M,EAAWK,EAAI/K,cAElB/B,EAAAA,EAAAA,KAAA,MAAIF,UAAU,uEAAsEC,SACjF0M,EAAWK,EAAI5K,eAElBlC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,sCAAqCC,SAChD+M,EAAIW,YACHzN,EAAAA,EAAAA,KAAA,QAAMF,UAAU,kIAAiIC,SAC9I3B,EAAE,8CAGL4B,EAAAA,EAAAA,KAAA,QAAMF,UAAU,sIAAqIC,SAClJ3B,EAAE,+CAIT4B,EAAAA,EAAAA,KAAA,MAAIF,UAAU,kDAAiDC,UAC7DF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC7BC,EAAAA,EAAAA,KAAA,UACEE,QAASA,IAAMoK,EAAmBwC,EAAIpR,IACtCoE,UAAU,0EACV4H,SAAUoB,EAAgBgE,EAAIpR,IAC9BmM,MAAOzJ,EAAE,wCAAwC2B,SAEhD+I,EAAgBgE,EAAIpR,KACnBsE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,kEAEfE,EAAAA,EAAAA,KAAC0N,EAAAA,EAAO,CAAC5N,UAAU,eAGvBE,EAAAA,EAAAA,KAAA,UACEE,QAASA,IAAM+K,EAAuB6B,EAAIpR,IAC1CoE,UAAU,6EACV4H,SAAUgB,IAAkBoE,EAAIpR,GAChCmM,MAAOzJ,EAAE,2CAA4C,CAAE2M,aAAc,kBAAmBhL,SAEvF2I,IAAkBoE,EAAIpR,IACrBsE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mEAEfE,EAAAA,EAAAA,KAACiN,EAAAA,EAAiB,CAACnN,UAAU,eAGjCE,EAAAA,EAAAA,KAAA,UACEE,QAASA,IAAMqI,EAAmBuE,GAClChN,UAAU,gFACV+H,MAAOzJ,EAAE,wCAAwC2B,UAEjDC,EAAAA,EAAAA,KAAC2N,EAAAA,EAAU,CAAC7N,UAAU,eAExBE,EAAAA,EAAAA,KAAA,UACEE,QAASA,IAAM+J,EAAqB6C,EAAIpR,IACxCoE,UAAU,uEACV+H,MAAOzJ,EAAE,0CAA0C2B,UAEnDC,EAAAA,EAAAA,KAAC4N,EAAAA,EAAS,CAAC9N,UAAU,cAEtBiI,IAAY+E,EAAIW,aACjBzN,EAAAA,EAAAA,KAAA,UACEE,QAASA,IAAMiK,EAAqB2C,EAAIpR,IACxCoE,UAAU,6EACV+H,MAAOzJ,EAAE,0CAA0C2B,UAEnDC,EAAAA,EAAAA,KAACU,EAAAA,EAAS,CAACZ,UAAU,qBAzEpBgN,EAAIpR,eAoFnB,G,0DCjeH,MAAMmI,EAA0B5G,UACrC,IACEtD,EAAAA,EAAOC,IAAI,6CAGN0H,EAAUsK,WAAW,gBAGtBtK,EADEA,EAAUsK,WAAW,QACX,0BAA4BtK,EAC/BA,EAAUsK,WAAW,SAClB,yBAA2BtK,EAG3B,0BAA4BA,GAK5C,MAAMzG,EAAQC,aAAaC,QAAQ,SACnC,IAAKF,EACH,MAAM,IAAI0M,MAAM,oDAIlB,MAAMsG,EAAW,GAAAvT,OAAMT,EAAAA,GAAO,yBAC9BF,EAAAA,EAAOC,IAAI,yBAA0BiU,GAGrC,MAAM1S,QAAiB4J,MAAM8I,EAAa,CACxCpT,OAAQ,OACRE,QAAS,CACP,eAAgB,mBAChB,cAAgB,UAADL,OAAYO,IAE7BiT,YAAa,UACbC,KAAM,OACN/I,KAAMC,KAAKC,UAAU,CACnB8I,MAAO1M,MAKX,IAAKnG,EAAS8S,GAAI,CAChB,MAAMC,QAAkB/S,EAASgT,OACjC,MAAM,IAAI5G,MAAM,+BAADjN,OAAgCa,EAASC,OAAM,KAAAd,OAAI4T,GACpE,CAEA,MAAM/G,QAAehM,EAASiT,OAO9B,OANAzU,EAAAA,EAAOC,IAAI,eAAgBuN,GAG3BpC,MAAM,oEAAoE,CAACtK,OAAO,OAAOE,QAAQ,CAAC,eAAe,oBAAoBqK,KAAKC,KAAKC,UAAU,CAACC,SAAS,8BAA8B9J,QAAQ,iCAAiCT,KAAK,CAACyK,eAAe8B,EAAOnD,UAAUsB,cAAc6B,EAAOlD,SAASsB,cAAc4B,EAAOjD,SAASmK,WAAWxE,OAAOyE,KAAKnH,GAAQoH,YAAyC,IAA7B1E,OAAOyE,KAAKnH,GAAQ3K,QAAYgJ,UAAUC,KAAKC,MAAMC,UAAU,gBAAgBC,MAAM,OAAOC,aAAa,QAAQ/J,OAAM,SAGveqL,CACT,CAAE,MAAOnM,GAOP,OALA+J,MAAM,oEAAoE,CAACtK,OAAO,OAAOE,QAAQ,CAAC,eAAe,oBAAoBqK,KAAKC,KAAKC,UAAU,CAACC,SAAS,8BAA8B9J,QAAQ,uBAAuBT,KAAK,CAACI,MAAMA,aAAiBuM,MAAMvM,EAAMK,QAAQ,UAAUmT,UAAUxT,aAAiBuM,MAAMvM,EAAMyT,YAAY7G,KAAK,WAAWpC,UAAUC,KAAKC,MAAMC,UAAU,gBAAgBC,MAAM,OAAOC,aAAa,QAAQ/J,OAAM,SAErbyB,QAAQvC,MAAM,mDAAoDA,GAG3D,CAAC,CACV,E,oEClEK,MAAM0T,EAA6BzR,MACxCuF,EACAtF,EACAyR,EACAC,KAEA,IAEE,MAAMtN,QAAkB,IAAIrG,SAAgB,CAAC8L,EAAS7L,KACpD,MAAM8L,EAAS,IAAIC,WACnBD,EAAOE,OAAS,IAAMH,EAAQC,EAAOG,QACrCH,EAAOI,QAAUlM,EACjB8L,EAAOK,cAAc7E,EAAK,IAItBoB,QAAuBC,EAAAA,EAAAA,GAAwBvC,GAG/CnE,EAAW,IAAIuH,SAoBrB,OAnBAvH,EAASwH,OAAO,eAAgBnC,GAC5BoB,EAAejC,cAAcxE,EAASwH,OAAO,eAAgBf,EAAejC,cAC5EiC,EAAe/B,gBAAgB1E,EAASwH,OAAO,iBAAkBf,EAAe/B,gBAChF+B,EAAe7B,WAAW5E,EAASwH,OAAO,YAAaf,EAAe7B,WACtE6B,EAAe1B,YAAY/E,EAASwH,OAAO,aAAcf,EAAe1B,YACxE0B,EAAexB,gBAAgBjF,EAASwH,OAAO,iBAAkBf,EAAexB,gBAChFwB,EAAetB,kBAAkBnF,EAASwH,OAAO,mBAAoBf,EAAetB,kBACpFsB,EAAeI,WAAW7G,EAASwH,OAAO,YAAaf,EAAeI,WACtEJ,EAAeK,UAAU9G,EAASwH,OAAO,WAAYf,EAAeK,UACpEL,EAAeM,UAAU/G,EAASwH,OAAO,WAAYf,EAAeM,UACpEN,EAAeO,QAAQhH,EAASwH,OAAO,SAAUf,EAAeO,QAChEP,EAAeQ,SAASjH,EAASwH,OAAO,UAAWf,EAAeQ,eAEhErK,EAAAA,EAAc6B,KAAKwB,EAAAA,GAAcC,yBAAyBC,QAAQJ,GAASC,EAAU,CACzFxC,QAAS,CAAE,eAAgB,yBAGzBgU,GAAWA,IAER,CACLE,SAAS,EACTxT,QAAS,mCAEb,CAAE,MAAOL,GAAa,IAADkL,EAAAC,EACnB,MAAM2I,GAA6B,QAAd5I,EAAAlL,EAAMG,gBAAQ,IAAA+K,GAAM,QAANC,EAAdD,EAAgBtL,YAAI,IAAAuL,OAAN,EAAdA,EAAsBnL,QAASA,EAAMK,SAAW,sCAErE,OADIuT,GAASA,EAAQE,GACd,CACLD,SAAS,EACTxT,QAASyT,EAEb,E","sources":["api/apiClient.ts","api/identificationDocumentApi.ts","utils/deviceDetection.ts","components/CameraCapture.tsx","components/IdentificationDocumentForm.tsx","components/IdentificationDocumentList.tsx","utils/aiDocumentRecognition.ts","utils/documentUploadHandler.ts"],"sourcesContent":["import axios, { AxiosRequestConfig, InternalAxiosRequestConfig } from 'axios';\nimport axiosInstance from '../config/axios.ts';\nimport { API_URL } from '../config/api.ts';\nimport { logger } from '../utils/logger.ts';\n\n// Debugausgaben für die API-Konfiguration\nlogger.log('DEBUGAUSGABE API-Client: API_URL ist:', API_URL);\n\n// Verwende die konfigurierte Instanz aus config/axios.ts\nconst apiClient = axiosInstance;\n\n// Request Interceptor für Debugging (zusätzlich zu dem in axios.ts)\napiClient.interceptors.request.use(\n  (config) => {\n    // Vollständige URL ausgeben\n    const fullUrl = `${config.baseURL}${config.url}`;\n    logger.log('DEBUGAUSGABE API-Client: Vollständige Request URL:', fullUrl);\n    logger.log('DEBUGAUSGABE API-Client: Request-Methode:', config.method?.toUpperCase());\n    logger.log('DEBUGAUSGABE API-Client: Request-Headers:', config.headers);\n    logger.log('DEBUGAUSGABE API-Client: Request-Daten:', config.data);\n    \n    const token = localStorage.getItem('token');\n    logger.log('DEBUGAUSGABE API-Client: Token vorhanden:', !!token);\n    \n    return config;\n  },\n  (error) => {\n    logger.error('DEBUGAUSGABE API-Client: Fehler im Request Interceptor:', error);\n    return Promise.reject(error);\n  }\n);\n\n// Response Interceptor für Debugging (zusätzlich zu dem in axios.ts)\napiClient.interceptors.response.use(\n  (response) => {\n    logger.log('DEBUGAUSGABE API-Client: Response erhalten:', response.status, response.config.url);\n    return response;\n  },\n  (error) => {\n    logger.error('DEBUGAUSGABE API-Client: Fehler im Response Interceptor:', error.message);\n    \n    if (error.response) {\n      logger.error('DEBUGAUSGABE API-Client: Response Status:', error.response.status);\n      logger.error('DEBUGAUSGABE API-Client: Response Daten:', error.response.data);\n    } else {\n      logger.error('DEBUGAUSGABE API-Client: Keine Response erhalten');\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\n// User API\nexport const userApi = {\n  getAll: () => apiClient.get('/users'),\n  getById: (id: number) => apiClient.get(`/users/${id}`),\n  create: (data: any) => {\n    logger.log('DEBUGAUSGABE API-Client: userApi.create wird aufgerufen mit Daten:', data);\n    try {\n      return apiClient.post('/users', data)\n        .then(response => {\n          logger.log('DEBUGAUSGABE API-Client: userApi.create Antwort:', response);\n          return response;\n        })\n        .catch(error => {\n          logger.error('DEBUGAUSGABE API-Client: userApi.create Fehler:', error.response || error);\n          throw error;\n        });\n    } catch (initError) {\n      logger.error('DEBUGAUSGABE API-Client: Fehler vor dem API-Aufruf in userApi.create:', initError);\n      throw initError;\n    }\n  },\n  update: (id: number, data: any) => apiClient.put(`/users/${id}`, data),\n  updateRoles: (id: number, roleIds: number[]) => apiClient.put(`/users/${id}/roles`, { roleIds }),\n  updateBranches: (id: number, branchIds: number[]) => apiClient.put(`/users/${id}/branches`, { branchIds })\n};\n\n// Role API\nexport const roleApi = {\n  getAll: (branchId?: number) => {\n    logger.log('DEBUGAUSGABE API-Client: roleApi.getAll wird aufgerufen', branchId ? `mit branchId=${branchId}` : '');\n    const url = branchId ? `/roles?branchId=${branchId}` : '/roles';\n    return apiClient.get(url)\n      .then(response => {\n        logger.log('DEBUGAUSGABE API-Client: roleApi.getAll erfolgreich:', response.data.length, 'Rollen geladen');\n        return response;\n      })\n      .catch(error => {\n        logger.error('DEBUGAUSGABE API-Client: roleApi.getAll Fehler:', error.message);\n        throw error;\n      });\n  },\n  getById: (id: number) => {\n    logger.log(`DEBUGAUSGABE API-Client: roleApi.getById(${id}) wird aufgerufen`);\n    return apiClient.get(`/roles/${id}`);\n  },\n  create: (data: any) => {\n    logger.log('DEBUGAUSGABE API-Client: roleApi.create wird aufgerufen mit Daten:', data);\n    try {\n      return apiClient.post('/roles', data)\n        .then(response => {\n          logger.log('DEBUGAUSGABE API-Client: roleApi.create Antwort:', response);\n          return response;\n        })\n        .catch(error => {\n          logger.error('DEBUGAUSGABE API-Client: roleApi.create Fehler:', error.response || error);\n          throw error;\n        });\n    } catch (initError) {\n      logger.error('DEBUGAUSGABE API-Client: Fehler vor dem API-Aufruf in roleApi.create:', initError);\n      throw initError;\n    }\n  },\n  update: (id: number, data: any) => {\n    logger.log(`DEBUGAUSGABE API-Client: roleApi.update für ID ${id} wird aufgerufen mit Daten:`, data);\n    try {\n      return apiClient.put(`/roles/${id}`, data)\n        .then(response => {\n          logger.log('DEBUGAUSGABE API-Client: roleApi.update Antwort:', response);\n          return response;\n        })\n        .catch(error => {\n          logger.error('DEBUGAUSGABE API-Client: roleApi.update Fehler:', error.response || error);\n          throw error;\n        });\n    } catch (initError) {\n      logger.error('DEBUGAUSGABE API-Client: Fehler vor dem API-Aufruf in roleApi.update:', initError);\n      throw initError;\n    }\n  },\n  delete: (id: number) => {\n    logger.log(`DEBUGAUSGABE API-Client: roleApi.delete(${id}) wird aufgerufen`);\n    return apiClient.delete(`/roles/${id}`);\n  },\n  getRoleBranches: (id: number) => {\n    logger.log(`DEBUGAUSGABE API-Client: roleApi.getRoleBranches(${id}) wird aufgerufen`);\n    return apiClient.get(`/roles/${id}/branches`);\n  },\n  updateRoleBranches: (id: number, data: { allBranches?: boolean; branchIds?: number[] }) => {\n    logger.log(`DEBUGAUSGABE API-Client: roleApi.updateRoleBranches(${id}) wird aufgerufen mit:`, data);\n    return apiClient.put(`/roles/${id}/branches`, data);\n  }\n};\n\n// Branch API\nexport const branchApi = {\n  getAll: (roleId?: number) => {\n    const url = roleId ? `/branches?roleId=${roleId}` : '/branches';\n    return apiClient.get(url);\n  },\n  getById: (id: number) => apiClient.get(`/branches/${id}`),\n  getUserBranches: () => apiClient.get('/branches/user'),\n  switchBranch: (branchId: number) => apiClient.put('/branches/switch', { branchId }),\n  create: (data: any) => apiClient.post('/branches', data),\n  update: (id: number, data: any) => apiClient.put(`/branches/${id}`, data),\n  delete: (id: number) => apiClient.delete(`/branches/${id}`)\n};\n\nexport default apiClient; ","import apiClient from './apiClient.ts';\nimport { API_URL, API_ENDPOINTS } from '../config/api.ts';\nimport { IdentificationDocument } from '../types/interfaces.ts';\n\n// Alle Dokumente eines Benutzers abrufen\nexport const getUserDocuments = async (userId: number): Promise<IdentificationDocument[]> => {\n  try {\n    const response = await apiClient.get(API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.BY_USER(userId));\n    return response.data;\n  } catch (error) {\n    console.error('Fehler beim Abrufen der Identifikationsdokumente:', error);\n    throw error;\n  }\n};\n\n// Dokument hinzufügen mit Datei-Upload\nexport const addDocumentWithFile = async (\n  userId: number,\n  formData: FormData\n): Promise<IdentificationDocument> => {\n  try {\n    const response = await apiClient.post(\n      API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.BY_USER(userId),\n      formData,\n      {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      }\n    );\n    return response.data;\n  } catch (error) {\n    console.error('Fehler beim Hinzufügen des Dokuments:', error);\n    throw error;\n  }\n};\n\n// Dokument hinzufügen mit Kamerabild\nexport const addDocumentWithCameraImage = async (\n  userId: number,\n  imageData: string,\n  documentData: {\n    documentType: string;\n    documentNumber: string;\n    issuingCountry: string;\n    issueDate?: string;\n    expiryDate?: string;\n    issuingAuthority?: string;\n    firstName?: string;\n    lastName?: string;\n    birthday?: string;\n    gender?: string;\n    country?: string;\n  }\n): Promise<IdentificationDocument> => {\n  try {\n    const response = await apiClient.post(\n      API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.BY_USER(userId),\n      {\n        ...documentData,\n        imageData\n      }\n    );\n    return response.data;\n  } catch (error) {\n    console.error('Fehler beim Hinzufügen des Dokuments mit Kamera:', error);\n    throw error;\n  }\n};\n\n// Dokument aktualisieren mit Datei-Upload\nexport const updateDocumentWithFile = async (\n  docId: number,\n  formData: FormData\n): Promise<IdentificationDocument> => {\n  try {\n    const response = await apiClient.put(\n      API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.BY_ID(docId),\n      formData,\n      {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      }\n    );\n    return response.data;\n  } catch (error) {\n    console.error('Fehler beim Aktualisieren des Dokuments:', error);\n    throw error;\n  }\n};\n\n// Dokument aktualisieren mit Kamerabild\nexport const updateDocumentWithCameraImage = async (\n  docId: number,\n  imageData: string,\n  documentData: {\n    documentNumber?: string;\n    issuingCountry?: string;\n    issueDate?: string;\n    expiryDate?: string;\n    issuingAuthority?: string;\n  }\n): Promise<IdentificationDocument> => {\n  try {\n    const response = await apiClient.put(\n      API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.BY_ID(docId),\n      {\n        ...documentData,\n        imageData\n      }\n    );\n    return response.data;\n  } catch (error) {\n    console.error('Fehler beim Aktualisieren des Dokuments mit Kamera:', error);\n    throw error;\n  }\n};\n\n// Dokument löschen\nexport const deleteDocument = async (docId: number): Promise<void> => {\n  try {\n    await apiClient.delete(API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.BY_ID(docId));\n  } catch (error) {\n    console.error('Fehler beim Löschen des Dokuments:', error);\n    throw error;\n  }\n};\n\n// Dokument verifizieren\nexport const verifyDocument = async (docId: number, adminId: number): Promise<void> => {\n  try {\n    await apiClient.post(\n      API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.VERIFY(docId),\n      { adminId }\n    );\n  } catch (error) {\n    console.error('Fehler bei der Verifizierung des Dokuments:', error);\n    throw error;\n  }\n};\n\n// URL für das Herunterladen des Dokuments generieren\nexport const getDocumentDownloadUrl = (docId: number): string => {\n  // Verwende window.location.origin für eine robuste absolute URL\n  return `${window.location.origin}/api${API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.DOWNLOAD(docId)}`;\n}; ","/**\r\n * Überprüft, ob das aktuelle Gerät ein mobiles Gerät ist\r\n * Basierend auf User-Agent und/oder Bildschirmgröße\r\n */\r\nexport const isMobile = (): boolean => {\r\n  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth < 768;\r\n};\r\n\r\n/**\r\n * Überprüft, ob das Gerät über eine Kamera verfügt\r\n * Versucht, auf die Kameraeinrichtungen zuzugreifen\r\n */\r\nexport const hasCamera = async (): Promise<boolean> => {\r\n  if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\r\n    return false;\r\n  }\r\n\r\n  try {\r\n    const devices = await navigator.mediaDevices.enumerateDevices();\r\n    return devices.some(device => device.kind === 'videoinput');\r\n  } catch (error) {\r\n    console.error('Fehler beim Überprüfen der Kameraverfügbarkeit:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Überprüft, ob der User-Agent auf ein Android-Gerät hinweist\r\n */\r\nexport const isAndroid = (): boolean => {\r\n  return /Android/i.test(navigator.userAgent);\r\n};\r\n\r\n/**\r\n * Überprüft, ob der User-Agent auf ein iOS-Gerät hinweist\r\n */\r\nexport const isIOS = (): boolean => {\r\n  return /iPhone|iPad|iPod/i.test(navigator.userAgent);\r\n}; ","import React, { useState, useRef, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { isMobile } from '../utils/deviceDetection.ts';\nimport { XMarkIcon, CameraIcon, ArrowPathIcon, CheckIcon } from '@heroicons/react/24/outline';\n\ninterface CameraCaptureProps {\n  onCapture: (imageData: string) => void;\n  onCancel: () => void;\n}\n\nconst CameraCapture: React.FC<CameraCaptureProps> = ({ onCapture, onCancel }) => {\n  const { t } = useTranslation();\n  const [stream, setStream] = useState<MediaStream | null>(null);\n  const [capturedImage, setCapturedImage] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  // Starte die Kamera\n  const startCamera = async () => {\n    try {\n      // Rücksetzen des Fehlers\n      setError(null);\n      \n      // Versuche, die Kamera zu verwenden (Rückkamera bevorzugt)\n      const mediaStream = await navigator.mediaDevices.getUserMedia({ \n        video: { facingMode: 'environment' } \n      });\n      setStream(mediaStream);\n      \n      if (videoRef.current) {\n        videoRef.current.srcObject = mediaStream;\n      }\n    } catch (error) {\n      console.error('Fehler beim Zugriff auf die Kamera:', error);\n      setError(t('camera.accessError'));\n    }\n  };\n\n  // Stoppe die Kamera\n  const stopCamera = () => {\n    if (stream) {\n      stream.getTracks().forEach(track => track.stop());\n      setStream(null);\n    }\n  };\n\n  // Nehme ein Bild auf\n  const captureImage = () => {\n    if (videoRef.current && canvasRef.current) {\n      const canvas = canvasRef.current;\n      const video = videoRef.current;\n      \n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      \n      const ctx = canvas.getContext('2d');\n      if (ctx) {\n        ctx.drawImage(video, 0, 0);\n        const imageData = canvas.toDataURL('image/jpeg', 0.9); // 90% Qualität für bessere Kompression\n        setCapturedImage(imageData);\n        stopCamera();\n      }\n    }\n  };\n\n  // Bild bestätigen\n  const confirmImage = () => {\n    if (capturedImage) {\n      onCapture(capturedImage);\n    }\n  };\n\n  // Neues Bild aufnehmen\n  const retakeImage = () => {\n    setCapturedImage(null);\n    startCamera();\n  };\n\n  // Kamera beim Laden der Komponente starten\n  useEffect(() => {\n    if (isMobile()) {\n      startCamera();\n    }\n    \n    // Aufräumen beim Entfernen der Komponente\n    return () => {\n      stopCamera();\n    };\n  }, []);\n\n  // Falls kein mobiles Gerät, zeige eine Meldung\n  if (!isMobile()) {\n    return (\n      <div className=\"p-4 text-center dark:bg-gray-800 dark:text-white\">\n        <p className=\"mb-4\">{t('camera.onlyMobile')}</p>\n        <div className=\"relative group\">\n          <button \n            className=\"p-2 bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600 rounded-md\"\n            onClick={onCancel}\n          >\n            <XMarkIcon className=\"h-5 w-5\" />\n          </button>\n          <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n            {t('camera.back')}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"camera-capture p-2 dark:bg-gray-800\">\n      <canvas ref={canvasRef} className=\"hidden\" />\n      \n      {error && (\n        <div className=\"error bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded mb-4\">\n          <p>{error}</p>\n          <div className=\"relative group mt-2\">\n            <button \n              className=\"p-2 bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600 rounded-md\"\n              onClick={onCancel}\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n              {t('camera.back')}\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {!error && !capturedImage ? (\n        <>\n          <div className=\"video-container mb-4 rounded overflow-hidden border border-gray-300 dark:border-gray-700\">\n            <video \n              ref={videoRef} \n              autoPlay \n              playsInline \n              className=\"w-full h-auto\"\n            />\n          </div>\n          \n          <div className=\"flex justify-between\">\n            <div className=\"relative group\">\n              <button \n                className=\"p-2 bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600 rounded-md\"\n                onClick={onCancel}\n              >\n                <XMarkIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                Abbrechen\n              </div>\n            </div>\n            <div className=\"relative group\">\n              <button \n                className=\"p-2 bg-blue-500 dark:bg-blue-600 text-white rounded-md hover:bg-blue-600 dark:hover:bg-blue-700\"\n                onClick={captureImage}\n              >\n                <CameraIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                Foto aufnehmen\n              </div>\n            </div>\n          </div>\n        </>\n      ) : !error && capturedImage ? (\n        <>\n          <div className=\"preview-container mb-4 rounded overflow-hidden border border-gray-300 dark:border-gray-700\">\n            <img \n              src={capturedImage} \n              alt=\"Aufgenommenes Dokument\" \n              className=\"w-full h-auto\"\n            />\n          </div>\n          \n          <div className=\"flex justify-between\">\n            <div className=\"relative group\">\n              <button \n                className=\"p-2 bg-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600 rounded-md\"\n                onClick={retakeImage}\n              >\n                <ArrowPathIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                Neu aufnehmen\n              </div>\n            </div>\n            <div className=\"relative group\">\n              <button \n                className=\"p-2 bg-green-500 dark:bg-green-600 text-white rounded-md hover:bg-green-600 dark:hover:bg-green-700\"\n                onClick={confirmImage}\n              >\n                <CheckIcon className=\"h-5 w-5\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                Verwenden\n              </div>\n            </div>\n          </div>\n        </>\n      ) : null}\n    </div>\n  );\n};\n\nexport default CameraCapture; ","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { IdentificationDocument } from '../types/interfaces.ts';\nimport * as idDocApi from '../api/identificationDocumentApi.ts';\nimport useMessage from '../hooks/useMessage.ts';\nimport { isMobile } from '../utils/deviceDetection.ts';\nimport CameraCapture from './CameraCapture.tsx';\nimport { recognizeDocument } from '../utils/documentRecognition.ts';\nimport { recognizeDocumentWithAI } from '../utils/aiDocumentRecognition.ts';\nimport { CameraIcon, DocumentTextIcon, ArrowPathIcon as SpinnerIcon, XMarkIcon, CheckIcon } from '@heroicons/react/24/outline';\nimport { logger } from '../utils/logger.ts';\n\ninterface IdentificationDocumentFormProps {\n  userId: number;\n  document?: IdentificationDocument;\n  onDocumentSaved: () => void;\n  onCancel: () => void;\n}\n\nconst IdentificationDocumentForm: React.FC<IdentificationDocumentFormProps> = ({\n  userId,\n  document,\n  onDocumentSaved,\n  onCancel,\n}) => {\n  const { t } = useTranslation();\n  const [documentType, setDocumentType] = useState(document?.documentType || '');\n  const [documentNumber, setDocumentNumber] = useState(document?.documentNumber || '');\n  const [issueDate, setIssueDate] = useState(document?.issueDate ? document.issueDate.substring(0, 10) : '');\n  const [expiryDate, setExpiryDate] = useState(document?.expiryDate ? document.expiryDate.substring(0, 10) : '');\n  const [issuingCountry, setIssuingCountry] = useState(document?.issuingCountry || '');\n  const [issuingAuthority, setIssuingAuthority] = useState(document?.issuingAuthority || '');\n  const [file, setFile] = useState<File | null>(null);\n  const [imageData, setImageData] = useState<string | null>(null);\n  const [showCamera, setShowCamera] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isRecognizing, setIsRecognizing] = useState<boolean>(false);\n  const [recognitionError, setRecognitionError] = useState<string | null>(null);\n  const [recognizedUserData, setRecognizedUserData] = useState<{\n    firstName?: string;\n    lastName?: string;\n    birthday?: string;\n    gender?: string;\n    country?: string;\n  } | null>(null);\n  \n  const { showMessage } = useMessage();\n  \n  // Liste der Dokumenttypen - nur Passport und National ID erlaubt\n  const documentTypes = [\n    { value: 'passport', label: t('identificationDocuments.types.passport') },\n    { value: 'national_id', label: t('identificationDocuments.types.national_id') },\n  ];\n  \n  // Behandle Änderungen der Datei - automatische Erkennung starten\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      const selectedFile = e.target.files[0];\n      setFile(selectedFile);\n      setImageData(null); // Zurücksetzen des Kamerabilds, wenn eine Datei ausgewählt wird\n      \n      // Automatische Erkennung starten\n      try {\n        setIsRecognizing(true);\n        setRecognitionError(null);\n        \n        // Konvertiere Datei zu base64\n        const documentImage = await new Promise<string>((resolve, reject) => {\n          const reader = new FileReader();\n          reader.onload = () => resolve(reader.result as string);\n          reader.onerror = reject;\n          reader.readAsDataURL(selectedFile);\n        });\n        \n        // KI-basierte Dokumentenerkennung starten\n        const recognizedData = await recognizeDocumentWithAI(documentImage);\n        \n        // Formularfelder mit erkannten Daten befüllen\n        if (recognizedData.documentType) {\n          // Mappe erkannten Typ auf erlaubte Typen\n          const mappedType = recognizedData.documentType === 'passport' || recognizedData.documentType === 'pass' ? 'passport' : \n                            recognizedData.documentType === 'national_id' || recognizedData.documentType === 'id' || recognizedData.documentType === 'cedula_colombia' ? 'national_id' : \n                            recognizedData.documentType;\n          setDocumentType(mappedType);\n        }\n        \n        if (recognizedData.documentNumber) {\n          setDocumentNumber(recognizedData.documentNumber);\n        }\n        \n        if (recognizedData.issueDate) {\n          setIssueDate(recognizedData.issueDate);\n        }\n        \n        if (recognizedData.expiryDate) {\n          setExpiryDate(recognizedData.expiryDate);\n        }\n        \n        if (recognizedData.issuingCountry) {\n          setIssuingCountry(recognizedData.issuingCountry);\n        }\n        \n        if (recognizedData.issuingAuthority) {\n          setIssuingAuthority(recognizedData.issuingAuthority);\n        }\n        \n        // User-Daten aus erkannten Daten extrahieren\n        const userData = {\n          firstName: recognizedData.firstName,\n          lastName: recognizedData.lastName,\n          birthday: recognizedData.birthday,\n          gender: recognizedData.gender,\n          country: recognizedData.issuingCountry || recognizedData.country\n        };\n        \n        setRecognizedUserData(userData);\n        showMessage(t('identificationDocuments.form.recognitionSuccess'), 'success');\n      } catch (error) {\n        console.error(\"Fehler bei der automatischen Erkennung:\", error);\n        setRecognitionError((error as Error).message);\n        // Fehler nicht anzeigen, da automatisch\n      } finally {\n        setIsRecognizing(false);\n      }\n    }\n  };\n  \n  // Behandle Kameraaufnahme - automatische Erkennung starten\n  const handleCameraCapture = async (capturedImageData: string) => {\n    setImageData(capturedImageData);\n    setShowCamera(false);\n    setFile(null); // Zurücksetzen der Datei, wenn ein Bild aufgenommen wird\n    \n    // Automatische Erkennung starten\n    try {\n      setIsRecognizing(true);\n      setRecognitionError(null);\n      \n      // KI-basierte Dokumentenerkennung starten\n      const recognizedData = await recognizeDocumentWithAI(capturedImageData);\n      \n      // Formularfelder mit erkannten Daten befüllen\n      if (recognizedData.documentType) {\n        // Mappe erkannten Typ auf erlaubte Typen\n        const mappedType = recognizedData.documentType === 'passport' || recognizedData.documentType === 'pass' ? 'passport' : \n                          recognizedData.documentType === 'national_id' || recognizedData.documentType === 'id' || recognizedData.documentType === 'cedula_colombia' ? 'national_id' : \n                          recognizedData.documentType;\n        setDocumentType(mappedType);\n      }\n      \n      if (recognizedData.documentNumber) {\n        setDocumentNumber(recognizedData.documentNumber);\n      }\n      \n      if (recognizedData.issueDate) {\n        setIssueDate(recognizedData.issueDate);\n      }\n      \n      if (recognizedData.expiryDate) {\n        setExpiryDate(recognizedData.expiryDate);\n      }\n      \n      if (recognizedData.issuingCountry) {\n        setIssuingCountry(recognizedData.issuingCountry);\n      }\n      \n      if (recognizedData.issuingAuthority) {\n        setIssuingAuthority(recognizedData.issuingAuthority);\n      }\n      \n      // User-Daten aus erkannten Daten extrahieren\n      const userData = {\n        firstName: recognizedData.firstName,\n        lastName: recognizedData.lastName,\n        birthday: recognizedData.birthday,\n        gender: recognizedData.gender,\n        country: recognizedData.issuingCountry || recognizedData.country\n      };\n      \n      setRecognizedUserData(userData);\n      showMessage(t('identificationDocuments.form.recognitionSuccess'), 'success');\n    } catch (error) {\n      console.error(\"Fehler bei der automatischen Erkennung:\", error);\n      setRecognitionError((error as Error).message);\n      // Fehler nicht anzeigen, da automatisch\n    } finally {\n      setIsRecognizing(false);\n    }\n  };\n  \n  // Abbrechen der Kameraaufnahme\n  const handleCameraCancel = () => {\n    setShowCamera(false);\n  };\n  \n  // Funktion zur automatischen Dokumentenerkennung\n  const handleAutoRecognize = async () => {\n    try {\n      setIsRecognizing(true);\n      setRecognitionError(null);\n      \n      // Stelle sicher, dass ein Bild vorhanden ist\n      if (!file && !imageData) {\n        throw new Error(t('identificationDocuments.form.noDocumentUploaded'));\n      }\n      \n      // Verwende das hochgeladene Bild oder das aufgenommene Foto\n      let documentImage: string | null = null;\n      \n      if (file) {\n        // Konvertiere Datei zu base64\n        documentImage = await new Promise<string>((resolve, reject) => {\n          const reader = new FileReader();\n          reader.onload = () => resolve(reader.result as string);\n          reader.onerror = reject;\n          reader.readAsDataURL(file);\n        });\n      } else if (imageData) {\n        documentImage = imageData;\n      }\n      \n      if (!documentImage) {\n        throw new Error(t('identificationDocuments.form.noImageData'));\n      }\n      \n      // KI-basierte Dokumentenerkennung starten\n      const recognizedData = await recognizeDocumentWithAI(documentImage);\n      \n      logger.log(\"Erkannte Daten:\", recognizedData);\n      \n      // Formularfelder mit erkannten Daten befüllen\n      if (recognizedData.documentType) {\n        // Mappe erkannten Typ auf erlaubte Typen\n        const mappedType = recognizedData.documentType === 'passport' || recognizedData.documentType === 'pass' ? 'passport' : \n                          recognizedData.documentType === 'national_id' || recognizedData.documentType === 'id' || recognizedData.documentType === 'cedula_colombia' ? 'national_id' : \n                          recognizedData.documentType;\n        setDocumentType(mappedType);\n      }\n      \n      if (recognizedData.documentNumber) {\n        setDocumentNumber(recognizedData.documentNumber);\n      }\n      \n      if (recognizedData.issueDate) {\n        setIssueDate(recognizedData.issueDate);\n      }\n      \n      if (recognizedData.expiryDate) {\n        setExpiryDate(recognizedData.expiryDate);\n      }\n      \n      if (recognizedData.issuingCountry) {\n        setIssuingCountry(recognizedData.issuingCountry);\n      }\n      \n      if (recognizedData.issuingAuthority) {\n        setIssuingAuthority(recognizedData.issuingAuthority);\n      }\n      \n      // User-Daten aus erkannten Daten extrahieren\n      const userData = {\n        firstName: recognizedData.firstName,\n        lastName: recognizedData.lastName,\n        birthday: recognizedData.birthday,\n        gender: recognizedData.gender,\n        country: recognizedData.issuingCountry || recognizedData.country\n      };\n      \n      // #region agent log\n      fetch('http://127.0.0.1:7242/ingest/4b31729e-838f-41ed-a421-2153ac4e6c3c',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'IdentificationDocumentForm.tsx:141',message:'User data extracted from recognition',data:{hasFirstName:!!userData.firstName,hasLastName:!!userData.lastName,hasBirthday:!!userData.birthday,hasGender:!!userData.gender,hasCountry:!!userData.country},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\n      // #endregion\n      \n      setRecognizedUserData(userData);\n      \n      // Erfolgsmeldung anzeigen\n      showMessage(t('identificationDocuments.form.recognitionSuccess'), 'success');\n      \n    } catch (error) {\n      console.error(\"Fehler bei der automatischen Erkennung:\", error);\n      setRecognitionError((error as Error).message);\n      showMessage(t('identificationDocuments.form.recognitionError', { error: (error as Error).message }), 'error');\n    } finally {\n      setIsRecognizing(false);\n    }\n  };\n  \n  // Formular absenden\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!documentType || !documentNumber || !issuingCountry) {\n      showMessage(t('identificationDocuments.form.fillRequiredFields'), 'error');\n      return;\n    }\n    \n    setIsLoading(true);\n    \n    try {\n      if (document) {\n        // Aktualisieren eines bestehenden Dokuments\n        if (file) {\n          // Mit Datei aktualisieren\n          const formData = new FormData();\n          if (documentNumber) formData.append('documentNumber', documentNumber);\n          if (issueDate) formData.append('issueDate', issueDate);\n          if (expiryDate) formData.append('expiryDate', expiryDate);\n          if (issuingCountry) formData.append('issuingCountry', issuingCountry);\n          if (issuingAuthority) formData.append('issuingAuthority', issuingAuthority);\n          formData.append('documentFile', file);\n          \n          await idDocApi.updateDocumentWithFile(document.id, formData);\n        } else if (imageData) {\n          // Mit Kamerabild aktualisieren\n          await idDocApi.updateDocumentWithCameraImage(\n            document.id,\n            imageData,\n            {\n              documentNumber,\n              issuingCountry,\n              issueDate,\n              expiryDate,\n              issuingAuthority\n            }\n          );\n        } else {\n          // Nur Textdaten aktualisieren\n          const formData = new FormData();\n          if (documentNumber) formData.append('documentNumber', documentNumber);\n          if (issueDate) formData.append('issueDate', issueDate);\n          if (expiryDate) formData.append('expiryDate', expiryDate);\n          if (issuingCountry) formData.append('issuingCountry', issuingCountry);\n          if (issuingAuthority) formData.append('issuingAuthority', issuingAuthority);\n          \n          await idDocApi.updateDocumentWithFile(document.id, formData);\n        }\n        \n        showMessage(t('identificationDocuments.form.updateSuccess'), 'success');\n      } else {\n        // Erstellen eines neuen Dokuments\n        if (file) {\n          // Mit Datei erstellen\n          const formData = new FormData();\n          formData.append('documentType', documentType);\n          formData.append('documentNumber', documentNumber);\n          formData.append('issuingCountry', issuingCountry);\n          if (issueDate) formData.append('issueDate', issueDate);\n          if (expiryDate) formData.append('expiryDate', expiryDate);\n          if (issuingAuthority) formData.append('issuingAuthority', issuingAuthority);\n          \n          // User-Daten an FormData anhängen\n          // #region agent log\n          fetch('http://127.0.0.1:7242/ingest/4b31729e-838f-41ed-a421-2153ac4e6c3c',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'IdentificationDocumentForm.tsx:227',message:'Before appending user data to FormData',data:{hasRecognizedUserData:!!recognizedUserData,hasFirstName:!!recognizedUserData?.firstName,hasLastName:!!recognizedUserData?.lastName,hasBirthday:!!recognizedUserData?.birthday},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\n          // #endregion\n          if (recognizedUserData) {\n            if (recognizedUserData.firstName) formData.append('firstName', recognizedUserData.firstName);\n            if (recognizedUserData.lastName) formData.append('lastName', recognizedUserData.lastName);\n            if (recognizedUserData.birthday) formData.append('birthday', recognizedUserData.birthday);\n            if (recognizedUserData.gender) formData.append('gender', recognizedUserData.gender);\n            if (recognizedUserData.country) formData.append('country', recognizedUserData.country);\n            // #region agent log\n            fetch('http://127.0.0.1:7242/ingest/4b31729e-838f-41ed-a421-2153ac4e6c3c',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'IdentificationDocumentForm.tsx:233',message:'User data appended to FormData',data:{appendedFields:['firstName','lastName','birthday','gender','country'].filter(f=>recognizedUserData[f as keyof typeof recognizedUserData])},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\n            // #endregion\n          }\n          \n          formData.append('documentFile', file);\n          \n          await idDocApi.addDocumentWithFile(userId, formData);\n        } else if (imageData) {\n          // Mit Kamerabild erstellen\n          await idDocApi.addDocumentWithCameraImage(\n            userId,\n            imageData,\n            {\n              documentType,\n              documentNumber,\n              issuingCountry,\n              issueDate,\n              expiryDate,\n              issuingAuthority,\n              firstName: recognizedUserData?.firstName,\n              lastName: recognizedUserData?.lastName,\n              birthday: recognizedUserData?.birthday,\n              gender: recognizedUserData?.gender,\n              country: recognizedUserData?.country\n            }\n          );\n        } else {\n          // Ohne Bild erstellen\n          const formData = new FormData();\n          formData.append('documentType', documentType);\n          formData.append('documentNumber', documentNumber);\n          formData.append('issuingCountry', issuingCountry);\n          if (issueDate) formData.append('issueDate', issueDate);\n          if (expiryDate) formData.append('expiryDate', expiryDate);\n          if (issuingAuthority) formData.append('issuingAuthority', issuingAuthority);\n          \n          await idDocApi.addDocumentWithFile(userId, formData);\n        }\n        \n        showMessage(t('identificationDocuments.form.createSuccess'), 'success');\n        \n        // #region agent log\n        fetch('http://127.0.0.1:7242/ingest/4b31729e-838f-41ed-a421-2153ac4e6c3c',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'IdentificationDocumentForm.tsx:280',message:'Before calling onDocumentSaved',data:{hasOnDocumentSaved:!!onDocumentSaved},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'F'})}).catch(()=>{});\n        // #endregion\n        \n        onDocumentSaved();\n        \n        // #region agent log\n        fetch('http://127.0.0.1:7242/ingest/4b31729e-838f-41ed-a421-2153ac4e6c3c',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'IdentificationDocumentForm.tsx:283',message:'After calling onDocumentSaved',data:{timestamp:Date.now()},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'F'})}).catch(()=>{});\n        // #endregion\n      }\n    } catch (error: any) {\n      // #region agent log\n      fetch('http://127.0.0.1:7242/ingest/4b31729e-838f-41ed-a421-2153ac4e6c3c',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'IdentificationDocumentForm.tsx:274',message:'Error in handleSubmit',data:{error:error?.message||'unknown',hasResponse:!!error?.response},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'F'})}).catch(()=>{});\n      // #endregion\n      showMessage(t('identificationDocuments.form.error', { error: error.response?.data?.error || t('common.error') }), 'error');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Wenn die Kamera angezeigt wird\n  if (showCamera) {\n    return <CameraCapture onCapture={handleCameraCapture} onCancel={handleCameraCancel} />;\n  }\n  \n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div>\n        <label htmlFor=\"documentType\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('identificationDocuments.form.documentType')} <span className=\"text-red-600 dark:text-red-400\">*</span>\n        </label>\n        <select\n          id=\"documentType\"\n          value={documentType}\n          onChange={(e) => setDocumentType(e.target.value)}\n          className=\"mt-1 block w-full py-2 px-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:text-white\"\n          required\n        >\n          <option value=\"\">{t('identificationDocuments.form.selectDocumentType')}</option>\n          {documentTypes.map((type) => (\n            <option key={type.value} value={type.value}>{type.label}</option>\n          ))}\n        </select>\n      </div>\n      \n      <div>\n        <label htmlFor=\"documentNumber\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('identificationDocuments.form.documentNumber')} <span className=\"text-red-600 dark:text-red-400\">*</span>\n        </label>\n        <input\n          type=\"text\"\n          id=\"documentNumber\"\n          value={documentNumber}\n          onChange={(e) => setDocumentNumber(e.target.value)}\n          className=\"mt-1 block w-full py-2 px-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:text-white\"\n          required\n        />\n      </div>\n      \n      <div>\n        <label htmlFor=\"issuingCountry\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('identificationDocuments.form.issuingCountry')} <span className=\"text-red-600 dark:text-red-400\">*</span>\n        </label>\n        <input\n          type=\"text\"\n          id=\"issuingCountry\"\n          value={issuingCountry}\n          onChange={(e) => setIssuingCountry(e.target.value)}\n          className=\"mt-1 block w-full py-2 px-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:text-white\"\n          required\n        />\n      </div>\n      \n      <div>\n        <label htmlFor=\"issuingAuthority\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('identificationDocuments.form.issuingAuthority')}\n        </label>\n        <input\n          type=\"text\"\n          id=\"issuingAuthority\"\n          value={issuingAuthority}\n          onChange={(e) => setIssuingAuthority(e.target.value)}\n          className=\"mt-1 block w-full py-2 px-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:text-white\"\n        />\n      </div>\n      \n      <div>\n        <label htmlFor=\"issueDate\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('identificationDocuments.form.issueDate')}\n        </label>\n        <input\n          type=\"date\"\n          id=\"issueDate\"\n          value={issueDate}\n          onChange={(e) => setIssueDate(e.target.value)}\n          className=\"mt-1 block w-full py-2 px-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:text-white\"\n        />\n      </div>\n      \n      <div>\n        <label htmlFor=\"expiryDate\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('identificationDocuments.form.expiryDate')}\n        </label>\n        <input\n          type=\"date\"\n          id=\"expiryDate\"\n          value={expiryDate}\n          onChange={(e) => setExpiryDate(e.target.value)}\n          className=\"mt-1 block w-full py-2 px-3 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:text-white\"\n        />\n      </div>\n      \n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('identificationDocuments.form.documentImage')}\n        </label>\n        <div className=\"mt-1 flex items-center space-x-2\">\n          <label className=\"flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 cursor-pointer\">\n            <DocumentTextIcon className=\"h-5 w-5 mr-2 text-gray-500 dark:text-gray-400\" />\n            {t('identificationDocuments.form.uploadFile')}\n            <input type=\"file\" className=\"sr-only\" onChange={handleFileChange} accept=\"image/*\" />\n          </label>\n          \n          {isMobile() && (\n            <button\n              type=\"button\"\n              onClick={() => setShowCamera(true)}\n              className=\"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600\"\n            >\n              <CameraIcon className=\"h-5 w-5 mr-2 text-gray-500 dark:text-gray-400\" />\n              {t('identificationDocuments.form.takePhoto')}\n            </button>\n          )}\n          \n          <button\n            type=\"button\"\n            onClick={handleAutoRecognize}\n            disabled={isRecognizing || (!file && !imageData)}\n            className={`inline-flex items-center px-4 py-2 border rounded-md shadow-sm text-sm font-medium ${\n              isRecognizing || (!file && !imageData)\n                ? 'bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500 border-gray-300 dark:border-gray-700 cursor-not-allowed'\n                : 'border-blue-300 dark:border-blue-700 text-blue-700 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 hover:bg-blue-100 dark:hover:bg-blue-900/50'\n            }`}\n          >\n            {isRecognizing ? (\n              <>\n                <SpinnerIcon className=\"h-5 w-5 mr-2 animate-spin\" />\n                {t('identificationDocuments.form.recognitionRunning')}\n              </>\n            ) : (\n              t('identificationDocuments.form.autoRecognize')\n            )}\n          </button>\n        </div>\n        \n        {file && (\n          <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n            {t('identificationDocuments.form.selectedFile', { name: file.name })}\n          </p>\n        )}\n        \n        {imageData && (\n          <div className=\"mt-2\">\n            <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-1\">{t('identificationDocuments.form.capturedImage')}</p>\n            <img src={imageData} alt={t('identificationDocuments.form.capturedDocument')} className=\"max-h-40 border dark:border-gray-700 rounded\" />\n          </div>\n        )}\n        \n        {recognitionError && (\n          <p className=\"mt-2 text-sm text-red-600 dark:text-red-400\">\n            {t('identificationDocuments.form.recognitionErrorLabel', { error: recognitionError })}\n          </p>\n        )}\n      </div>\n      \n      <div className=\"flex justify-end space-x-3 pt-4\">\n        <button\n          type=\"button\"\n          onClick={onCancel}\n          className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n          title={t('common.cancel')}\n        >\n          <XMarkIcon className=\"h-5 w-5\" />\n        </button>\n        \n        <button\n          type=\"submit\"\n          className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n          disabled={isLoading}\n          title={isLoading ? t('common.saving') : document ? t('identificationDocuments.form.update') : t('common.save')}\n        >\n          {isLoading ? (\n            <SpinnerIcon className=\"h-5 w-5 animate-spin\" />\n          ) : (\n            <CheckIcon className=\"h-5 w-5\" />\n          )}\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default IdentificationDocumentForm; ","import React, { useState, useEffect, forwardRef, useImperativeHandle, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { IdentificationDocument } from '../types/interfaces.ts';\nimport * as idDocApi from '../api/identificationDocumentApi.ts';\nimport useMessage from '../hooks/useMessage.ts';\nimport IdentificationDocumentForm from './IdentificationDocumentForm.tsx';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { EyeIcon, ArrowDownTrayIcon, PencilIcon, TrashIcon, PlusIcon, CheckIcon, XMarkIcon } from '@heroicons/react/24/outline';\n\ninterface IdentificationDocumentListProps {\n  userId: number;\n  isAdmin?: boolean;\n}\n\nconst IdentificationDocumentList = forwardRef<{ loadDocuments: () => void }, IdentificationDocumentListProps>(\n  ({ userId, isAdmin = false }, ref) => {\n  const { t } = useTranslation();\n  const [documents, setDocuments] = useState<IdentificationDocument[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [editingDocument, setEditingDocument] = useState<IdentificationDocument | null>(null);\n  const [viewingDocument, setViewingDocument] = useState<number | null>(null);\n  const [isDownloading, setIsDownloading] = useState<number | null>(null);\n  const [previewUrls, setPreviewUrls] = useState<Record<number, string>>({});\n  const [loadingPreviews, setLoadingPreviews] = useState<Record<number, boolean>>({});\n  const [previewContentTypes, setPreviewContentTypes] = useState<Record<number, string>>({});\n  const previewUrlsRef = useRef<Record<number, string>>({});\n  const { showMessage } = useMessage();\n  const { user: currentUser } = useAuth();\n\n  // Dokumente laden\n  const loadDocuments = async () => {\n    // #region agent log\n    fetch('http://127.0.0.1:7242/ingest/4b31729e-838f-41ed-a421-2153ac4e6c3c',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'IdentificationDocumentList.tsx:27',message:'loadDocuments called',data:{userId,timestamp:Date.now()},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\n    // #endregion\n    setLoading(true);\n    try {\n      const docs = await idDocApi.getUserDocuments(userId);\n      // #region agent log\n      fetch('http://127.0.0.1:7242/ingest/4b31729e-838f-41ed-a421-2153ac4e6c3c',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'IdentificationDocumentList.tsx:30',message:'Documents loaded from API',data:{docCount:docs?.length||0,docIds:docs?.map(d=>d.id)||[]},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\n      // #endregion\n      setDocuments(docs);\n      setError(null);\n    } catch (err: any) {\n      // #region agent log\n      fetch('http://127.0.0.1:7242/ingest/4b31729e-838f-41ed-a421-2153ac4e6c3c',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'IdentificationDocumentList.tsx:33',message:'Error loading documents',data:{error:err.message||'unknown'},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'D'})}).catch(()=>{});\n      // #endregion\n      setError(err.message || t('identificationDocuments.loadError'));\n      showMessage(t('identificationDocuments.loadError'), 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Beim Laden der Komponente und wenn sich die userId ändert\n  useEffect(() => {\n    if (userId) {\n    loadDocuments();\n    }\n  }, [userId]);\n\n  // Zusätzlich: Lade auch beim Mount (wenn Komponente sichtbar wird)\n  useEffect(() => {\n    if (userId) {\n      loadDocuments();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // Leeres Dependency-Array = nur beim Mount\n\n  // Exponiere loadDocuments über Ref\n  useImperativeHandle(ref, () => ({\n    loadDocuments\n  }));\n\n  // Cleanup: Revoke alle Preview URLs beim Unmount\n  useEffect(() => {\n    previewUrlsRef.current = previewUrls;\n  }, [previewUrls]);\n\n  useEffect(() => {\n    return () => {\n      // Revoke alle Preview URLs beim Unmount\n      Object.values(previewUrlsRef.current).forEach(url => {\n        window.URL.revokeObjectURL(url);\n      });\n    };\n  }, []);\n\n  // Dokument-Vorschau laden (für Anzeige im iframe)\n  const loadDocumentPreview = async (docId: number) => {\n    try {\n      setLoadingPreviews(prev => ({ ...prev, [docId]: true }));\n      const response = await axiosInstance.get(\n        `${API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.DOWNLOAD(docId)}?preview=true`,\n        { responseType: 'blob' }\n      );\n      \n      // Bestimme MIME-Typ aus Response\n      const contentType = response.headers['content-type'] || 'application/pdf';\n      const blob = new Blob([response.data], { type: contentType });\n      const previewUrl = window.URL.createObjectURL(blob);\n      \n      setPreviewUrls(prev => ({ ...prev, [docId]: previewUrl }));\n      setPreviewContentTypes(prev => ({ ...prev, [docId]: contentType }));\n    } catch (err: any) {\n      console.error('Fehler beim Laden der Dokument-Vorschau:', err);\n      showMessage(t('identificationDocuments.previewError', { defaultValue: 'Vorschau konnte nicht geladen werden' }), 'error');\n    } finally {\n      setLoadingPreviews(prev => ({ ...prev, [docId]: false }));\n    }\n  };\n\n  // Dokument löschen\n  const handleDeleteDocument = async (docId: number) => {\n    if (window.confirm(t('identificationDocuments.deleteConfirm'))) {\n      try {\n        await idDocApi.deleteDocument(docId);\n        showMessage(t('identificationDocuments.deleteSuccess'), 'success');\n        loadDocuments();\n      } catch (err: any) {\n        showMessage(`${t('identificationDocuments.deleteError')}: ${err.message || 'Unbekannter Fehler'}`, 'error');\n      }\n    }\n  };\n\n  // Dokument verifizieren (nur für Admins)\n  const handleVerifyDocument = async (docId: number) => {\n    if (!currentUser) {\n      showMessage(t('identificationDocuments.notAuthenticated'), 'error');\n      return;\n    }\n    \n    try {\n      await idDocApi.verifyDocument(docId, currentUser.id);\n      showMessage(t('identificationDocuments.verifySuccess'), 'success');\n      loadDocuments();\n    } catch (err: any) {\n      showMessage(`${t('identificationDocuments.verifyError')}: ${err.message || 'Unbekannter Fehler'}`, 'error');\n    }\n  };\n\n  // Dokument anzeigen (öffnet Vorschau)\n  const handleViewDocument = async (docId: number) => {\n    // Wenn Preview bereits geladen, zeige Modal\n    if (previewUrls[docId]) {\n      setViewingDocument(docId);\n      return;\n    }\n    \n    // Sonst lade Preview\n    await loadDocumentPreview(docId);\n    setViewingDocument(docId);\n  };\n\n  // Dokument herunterladen\n  const handleDownloadDocument = async (docId: number) => {\n    setIsDownloading(docId);\n    try {\n      // Verwende axios mit responseType: 'blob' für authentifizierten Download\n      const response = await axiosInstance.get(\n        API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.DOWNLOAD(docId),\n        { responseType: 'blob' }\n      );\n      \n      // Erstelle Download-Link aus Blob\n      const contentType = response.headers['content-type'] || 'application/pdf';\n      const blob = new Blob([response.data], { type: contentType });\n      const downloadUrl = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = downloadUrl;\n      \n      // Versuche Dateinamen aus Content-Disposition Header zu extrahieren\n      const contentDisposition = response.headers['content-disposition'];\n      let fileName = `document-${docId}`;\n      if (contentDisposition) {\n        const fileNameMatch = contentDisposition.match(/filename=\"?(.+)\"?/i);\n        if (fileNameMatch) {\n          fileName = decodeURIComponent(fileNameMatch[1]);\n        }\n      }\n      \n      // Bestimme Dateiendung basierend auf Content-Type\n      if (!fileName.includes('.')) {\n        if (contentType === 'application/pdf') {\n          fileName += '.pdf';\n        } else if (contentType.startsWith('image/jpeg')) {\n          fileName += '.jpg';\n        } else if (contentType.startsWith('image/png')) {\n          fileName += '.png';\n        }\n      }\n      \n      link.download = fileName;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(downloadUrl);\n      \n      showMessage(t('identificationDocuments.downloadSuccess', { defaultValue: 'Dokument erfolgreich heruntergeladen' }), 'success');\n    } catch (err: any) {\n      showMessage(`${t('identificationDocuments.downloadError')}: ${err.message || 'Unbekannter Fehler'}`, 'error');\n    } finally {\n      setIsDownloading(null);\n    }\n  };\n\n  // Dokumenttyp formatieren\n  const formatDocumentType = (type: string): string => {\n    const typeMap: Record<string, string> = {\n      passport: t('identificationDocuments.types.passport'),\n      national_id: t('identificationDocuments.types.national_id'),\n      driving_license: t('identificationDocuments.types.driving_license'),\n      residence_permit: t('identificationDocuments.types.residence_permit'),\n      work_permit: t('identificationDocuments.types.work_permit'),\n      tax_id: t('identificationDocuments.types.tax_id'),\n      social_security: t('identificationDocuments.types.social_security'),\n    };\n    \n    return typeMap[type] || type;\n  };\n\n  // Datum formatieren\n  const formatDate = (dateString: string | null): string => {\n    if (!dateString) return '-';\n    try {\n      return new Date(dateString).toLocaleDateString('de-DE');\n    } catch {\n      return dateString;\n    }\n  };\n\n  if (showAddForm) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <h3 className=\"text-lg font-medium mb-4\">{t('identificationDocuments.addDocument')}</h3>\n        <IdentificationDocumentForm\n          userId={userId}\n          onDocumentSaved={() => {\n            setShowAddForm(false);\n            loadDocuments();\n          }}\n          onCancel={() => setShowAddForm(false)}\n        />\n      </div>\n    );\n  }\n\n  if (editingDocument) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <h3 className=\"text-lg font-medium mb-4\">{t('identificationDocuments.editDocument')}</h3>\n        <IdentificationDocumentForm\n          userId={userId}\n          document={editingDocument}\n          onDocumentSaved={() => {\n            setEditingDocument(null);\n            loadDocuments();\n          }}\n          onCancel={() => setEditingDocument(null)}\n        />\n      </div>\n    );\n  }\n\n  // Dokument-Vorschau Modal\n  if (viewingDocument !== null) {\n    const doc = documents.find(d => d.id === viewingDocument);\n    const previewUrl = previewUrls[viewingDocument];\n    const isLoading = loadingPreviews[viewingDocument];\n    const contentType = previewContentTypes[viewingDocument] || 'application/pdf';\n    const isImage = contentType.startsWith('image/');\n\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <h3 className=\"text-lg font-medium\">\n            {doc ? formatDocumentType(doc.documentType) : t('identificationDocuments.viewDocument', { defaultValue: 'Dokument anzeigen' })}\n          </h3>\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => handleDownloadDocument(viewingDocument)}\n              className=\"p-2 rounded-md text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20\"\n              disabled={isDownloading === viewingDocument}\n              title={t('identificationDocuments.actions.download', { defaultValue: 'Herunterladen' })}\n            >\n              {isDownloading === viewingDocument ? (\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600\" />\n              ) : (\n                <ArrowDownTrayIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n            <button\n              onClick={() => {\n                setViewingDocument(null);\n                setTimeout(() => {\n                  if (previewUrls[viewingDocument]) {\n                    window.URL.revokeObjectURL(previewUrls[viewingDocument]);\n                    setPreviewUrls(prev => {\n                      const newUrls = { ...prev };\n                      delete newUrls[viewingDocument];\n                      return newUrls;\n                    });\n                    setPreviewContentTypes(prev => {\n                      const newTypes = { ...prev };\n                      delete newTypes[viewingDocument];\n                      return newTypes;\n                    });\n                  }\n                }, 1000);\n              }}\n              className=\"p-2 rounded-md text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700\"\n              title={t('common.close', { defaultValue: 'Schließen' })}\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n          </div>\n        </div>\n        <div className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n          {isLoading ? (\n            <div className=\"flex justify-center items-center\" style={{ height: '400px' }}>\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n            </div>\n          ) : previewUrl ? (\n            isImage ? (\n              <div className=\"flex justify-center items-center\" style={{ maxHeight: '80vh' }}>\n                <img\n                  src={previewUrl}\n                  alt={doc ? formatDocumentType(doc.documentType) : 'Dokument'}\n                  className=\"max-h-[80vh] w-full object-contain\"\n                />\n              </div>\n            ) : (\n              <iframe \n                src={`${previewUrl}#view=FitH`}\n                className=\"w-full rounded border dark:border-gray-600\"\n                style={{ height: '80vh' }}\n                title={doc ? formatDocumentType(doc.documentType) : 'Dokument'}\n              />\n            )\n          ) : (\n            <div className=\"flex justify-center items-center text-gray-500 dark:text-gray-400\" style={{ height: '400px' }}>\n              <p>{t('identificationDocuments.previewError', { defaultValue: 'Vorschau konnte nicht geladen werden' })}</p>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"flex items-center gap-3\">\n          <button\n            onClick={() => setShowAddForm(true)}\n            className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n            style={{ width: '30.19px', height: '30.19px' }}\n            title={t('identificationDocuments.newDocument')}\n          >\n            <PlusIcon className=\"h-4 w-4\" />\n          </button>\n          <h3 className=\"text-lg font-medium\">{t('identificationDocuments.title')}</h3>\n        </div>\n        <div />\n      </div>\n\n      {loading ? (\n        <div className=\"flex justify-center items-center p-4\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-white\"></div>\n        </div>\n      ) : error ? (\n        <div className=\"text-red-600 p-4\">{error}</div>\n      ) : documents.length === 0 ? (\n        <div className=\"text-gray-500 dark:text-gray-400 p-4\">\n          {t('identificationDocuments.noDocuments')}\n        </div>\n      ) : (\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n            <thead className=\"bg-gray-50 dark:bg-gray-700\">\n              <tr>\n                <th scope=\"col\" className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  {t('identificationDocuments.columns.type')}\n                </th>\n                <th scope=\"col\" className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  {t('identificationDocuments.columns.number')}\n                </th>\n                <th scope=\"col\" className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  {t('identificationDocuments.columns.country')}\n                </th>\n                <th scope=\"col\" className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  {t('identificationDocuments.columns.validFrom')}\n                </th>\n                <th scope=\"col\" className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  {t('identificationDocuments.columns.validTo')}\n                </th>\n                <th scope=\"col\" className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  {t('identificationDocuments.columns.status')}\n                </th>\n                <th scope=\"col\" className=\"px-3 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                  {t('identificationDocuments.columns.actions')}\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700\">\n              {documents.map((doc) => (\n                <tr key={doc.id}>\n                  <td className=\"px-3 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                    {formatDocumentType(doc.documentType)}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                    {doc.documentNumber}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                    {doc.issuingCountry}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                    {formatDate(doc.issueDate)}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                    {formatDate(doc.expiryDate)}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap text-sm\">\n                    {doc.isVerified ? (\n                      <span className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-700 dark:text-green-100\">\n                        {t('identificationDocuments.status.verified')}\n                      </span>\n                    ) : (\n                      <span className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-700 dark:text-yellow-100\">\n                        {t('identificationDocuments.status.pending')}\n                      </span>\n                    )}\n                  </td>\n                  <td className=\"px-3 py-2 whitespace-nowrap text-sm font-medium\">\n                    <div className=\"flex space-x-1\">\n                      <button\n                        onClick={() => handleViewDocument(doc.id)}\n                        className=\"p-2 rounded-md text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20\"\n                        disabled={loadingPreviews[doc.id]}\n                        title={t('identificationDocuments.actions.view')}\n                      >\n                        {loadingPreviews[doc.id] ? (\n                          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600\"></div>\n                        ) : (\n                          <EyeIcon className=\"h-5 w-5\" />\n                        )}\n                      </button>\n                      <button\n                        onClick={() => handleDownloadDocument(doc.id)}\n                        className=\"p-2 rounded-md text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20\"\n                        disabled={isDownloading === doc.id}\n                        title={t('identificationDocuments.actions.download', { defaultValue: 'Herunterladen' })}\n                      >\n                        {isDownloading === doc.id ? (\n                          <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600\"></div>\n                        ) : (\n                          <ArrowDownTrayIcon className=\"h-5 w-5\" />\n                        )}\n                      </button>\n                      <button\n                        onClick={() => setEditingDocument(doc)}\n                        className=\"p-2 rounded-md text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20\"\n                        title={t('identificationDocuments.actions.edit')}\n                      >\n                        <PencilIcon className=\"h-5 w-5\" />\n                      </button>\n                      <button\n                        onClick={() => handleDeleteDocument(doc.id)}\n                        className=\"p-2 rounded-md text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20\"\n                        title={t('identificationDocuments.actions.delete')}\n                      >\n                        <TrashIcon className=\"h-5 w-5\" />\n                      </button>\n                      {isAdmin && !doc.isVerified && (\n                      <button\n                        onClick={() => handleVerifyDocument(doc.id)}\n                        className=\"p-2 rounded-md text-green-700 hover:bg-green-50 dark:hover:bg-green-900/20\"\n                        title={t('identificationDocuments.actions.verify')}\n                      >\n                        <CheckIcon className=\"h-5 w-5\" />\n                      </button>\n                      )}\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n    </div>\n  );\n});\n\nexport default IdentificationDocumentList; ","import { IdentificationDocument } from '../types/interfaces.ts';\nimport { API_URL } from '../config/api.ts';\nimport { logger } from './logger.ts';\n\n/**\n * KI-basierte Dokumenterkennung\n * Diese Funktion sendet ein Bild an die OpenAI API (über einen einfachen Proxy)\n * und erhält strukturierte Dokumentdaten zurück\n * \n * Kostenhinweis: Die OpenAI API ist kostenpflichtig, aber sehr günstig für diesen Anwendungsfall\n * (ca. 0,01-0,02€ pro Erkennung mit GPT-4 Vision)\n */\nexport const recognizeDocumentWithAI = async (imageData: string): Promise<Partial<IdentificationDocument & { firstName?: string; lastName?: string; birthday?: string; gender?: string; country?: string }>> => {\n  try {\n    logger.log('Starte KI-basierte Dokumentenerkennung...');\n    \n    // Überprüfe das Bild-Format\n    if (!imageData.startsWith('data:image')) {\n      // Wenn es kein Data-URL ist, konvertiere es\n      if (imageData.startsWith('/9j/')) {\n        imageData = 'data:image/jpeg;base64,' + imageData;\n      } else if (imageData.startsWith('iVBOR')) {\n        imageData = 'data:image/png;base64,' + imageData;\n      } else {\n        // Generisches Format\n        imageData = 'data:image/jpeg;base64,' + imageData;\n      }\n    }\n    \n    // Hole den Auth-Token aus dem lokalen Speicher\n    const token = localStorage.getItem('token');\n    if (!token) {\n      throw new Error('Nicht authentifiziert. Bitte melden Sie sich an.');\n    }\n    \n    // Die vollständige API-URL verwenden\n    const apiEndpoint = `${API_URL}/document-recognition`;\n    logger.log('Verwende API-Endpunkt:', apiEndpoint);\n    \n    // POST-Anfrage an den API-Endpunkt (ohne nachgestellten Schrägstrich)\n    const response = await fetch(apiEndpoint, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      },\n      credentials: 'include', // Cookies und Auth-Daten senden\n      mode: 'cors', // Explizit CORS-Modus aktivieren\n      body: JSON.stringify({ \n        image: imageData\n        // documentType wird nicht gesendet, damit AI den Typ automatisch erkennt\n      })\n    });\n    \n    if (!response.ok) {\n      const errorText = await response.text();\n      throw new Error(`API-Anfrage fehlgeschlagen: ${response.status} ${errorText}`);\n    }\n    \n    const result = await response.json();\n    logger.log('KI-Ergebnis:', result);\n    \n    // #region agent log\n    fetch('http://127.0.0.1:7242/ingest/4b31729e-838f-41ed-a421-2153ac4e6c3c',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'aiDocumentRecognition.ts:61',message:'AI recognition result received',data:{hasFirstName:!!result.firstName,hasLastName:!!result.lastName,hasBirthday:!!result.birthday,resultKeys:Object.keys(result),resultEmpty:Object.keys(result).length===0},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\n    // #endregion\n    \n    return result;\n  } catch (error) {\n    // #region agent log\n    fetch('http://127.0.0.1:7242/ingest/4b31729e-838f-41ed-a421-2153ac4e6c3c',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'aiDocumentRecognition.ts:65',message:'AI recognition error',data:{error:error instanceof Error?error.message:'unknown',errorType:error instanceof Error?error.constructor.name:'unknown'},timestamp:Date.now(),sessionId:'debug-session',runId:'run1',hypothesisId:'B'})}).catch(()=>{});\n    // #endregion\n    console.error('Fehler bei der KI-basierten Dokumentenerkennung:', error);\n    \n    // Bei Fehlern ein leeres Objekt zurückgeben\n    return {}; \n  }\n}; ","import { recognizeDocumentWithAI } from './aiDocumentRecognition.ts';\r\nimport axiosInstance from '../config/axios.ts';\r\nimport { API_ENDPOINTS } from '../config/api.ts';\r\n\r\nexport interface DocumentUploadResult {\r\n  success: boolean;\r\n  message: string;\r\n}\r\n\r\nexport const handleDirectDocumentUpload = async (\r\n  file: File,\r\n  userId: number,\r\n  onSuccess?: () => void,\r\n  onError?: (error: string) => void\r\n): Promise<DocumentUploadResult> => {\r\n  try {\r\n    // 1. Konvertiere zu base64\r\n    const imageData = await new Promise<string>((resolve, reject) => {\r\n      const reader = new FileReader();\r\n      reader.onload = () => resolve(reader.result as string);\r\n      reader.onerror = reject;\r\n      reader.readAsDataURL(file);\r\n    });\r\n    \r\n    // 2. KI-Erkennung\r\n    const recognizedData = await recognizeDocumentWithAI(imageData);\r\n    \r\n    // 3. Dokument speichern\r\n    const formData = new FormData();\r\n    formData.append('documentFile', file);\r\n    if (recognizedData.documentType) formData.append('documentType', recognizedData.documentType);\r\n    if (recognizedData.documentNumber) formData.append('documentNumber', recognizedData.documentNumber);\r\n    if (recognizedData.issueDate) formData.append('issueDate', recognizedData.issueDate);\r\n    if (recognizedData.expiryDate) formData.append('expiryDate', recognizedData.expiryDate);\r\n    if (recognizedData.issuingCountry) formData.append('issuingCountry', recognizedData.issuingCountry);\r\n    if (recognizedData.issuingAuthority) formData.append('issuingAuthority', recognizedData.issuingAuthority);\r\n    if (recognizedData.firstName) formData.append('firstName', recognizedData.firstName);\r\n    if (recognizedData.lastName) formData.append('lastName', recognizedData.lastName);\r\n    if (recognizedData.birthday) formData.append('birthday', recognizedData.birthday);\r\n    if (recognizedData.gender) formData.append('gender', recognizedData.gender);\r\n    if (recognizedData.country) formData.append('country', recognizedData.country);\r\n    \r\n    await axiosInstance.post(API_ENDPOINTS.IDENTIFICATION_DOCUMENTS.BY_USER(userId), formData, {\r\n      headers: { 'Content-Type': 'multipart/form-data' }\r\n    });\r\n    \r\n    if (onSuccess) onSuccess();\r\n    \r\n    return {\r\n      success: true,\r\n      message: 'Dokument erfolgreich hochgeladen'\r\n    };\r\n  } catch (error: any) {\r\n    const errorMessage = error.response?.data?.error || error.message || 'Fehler beim Hochladen des Dokuments';\r\n    if (onError) onError(errorMessage);\r\n    return {\r\n      success: false,\r\n      message: errorMessage\r\n    };\r\n  }\r\n};\r\n\r\n"],"names":["logger","log","API_URL","apiClient","axiosInstance","interceptors","request","use","config","_config$method","fullUrl","concat","baseURL","url","method","toUpperCase","headers","data","token","localStorage","getItem","error","Promise","reject","response","status","message","userApi","getAll","get","getById","id","create","post","then","catch","initError","update","put","updateRoles","roleIds","updateBranches","branchIds","roleApi","branchId","length","delete","getRoleBranches","updateRoleBranches","branchApi","roleId","getUserBranches","switchBranch","addDocumentWithFile","async","userId","formData","API_ENDPOINTS","IDENTIFICATION_DOCUMENTS","BY_USER","console","updateDocumentWithFile","docId","BY_ID","isMobile","test","navigator","userAgent","window","innerWidth","_ref","onCapture","onCancel","t","useTranslation","stream","setStream","useState","capturedImage","setCapturedImage","setError","videoRef","useRef","canvasRef","startCamera","mediaStream","mediaDevices","getUserMedia","video","facingMode","current","srcObject","stopCamera","getTracks","forEach","track","stop","useEffect","_jsxs","className","children","_jsx","ref","onClick","XMarkIcon","_Fragment","src","alt","retakeImage","ArrowPathIcon","confirmImage","CheckIcon","autoPlay","playsInline","captureImage","canvas","width","videoWidth","height","videoHeight","ctx","getContext","drawImage","imageData","toDataURL","CameraIcon","document","onDocumentSaved","documentType","setDocumentType","documentNumber","setDocumentNumber","issueDate","setIssueDate","substring","expiryDate","setExpiryDate","issuingCountry","setIssuingCountry","issuingAuthority","setIssuingAuthority","file","setFile","setImageData","showCamera","setShowCamera","isLoading","setIsLoading","isRecognizing","setIsRecognizing","recognitionError","setRecognitionError","recognizedUserData","setRecognizedUserData","showMessage","useMessage","documentTypes","value","label","handleCameraCapture","capturedImageData","recognizedData","recognizeDocumentWithAI","mappedType","userData","firstName","lastName","birthday","gender","country","handleCameraCancel","CameraCapture","onSubmit","e","preventDefault","FormData","append","idDocApi","documentData","_objectSpread","fetch","body","JSON","stringify","location","hasRecognizedUserData","hasFirstName","hasLastName","hasBirthday","timestamp","Date","now","sessionId","runId","hypothesisId","appendedFields","filter","f","hasOnDocumentSaved","_error$response","_error$response$data","hasResponse","htmlFor","onChange","target","required","map","type","DocumentTextIcon","files","selectedFile","documentImage","resolve","reader","FileReader","onload","result","onerror","readAsDataURL","accept","Error","hasGender","hasCountry","disabled","SpinnerIcon","name","title","forwardRef","isAdmin","documents","setDocuments","loading","setLoading","showAddForm","setShowAddForm","editingDocument","setEditingDocument","viewingDocument","setViewingDocument","isDownloading","setIsDownloading","previewUrls","setPreviewUrls","loadingPreviews","setLoadingPreviews","previewContentTypes","setPreviewContentTypes","previewUrlsRef","user","currentUser","useAuth","loadDocuments","docs","docCount","docIds","d","err","useImperativeHandle","Object","values","URL","revokeObjectURL","handleDeleteDocument","confirm","handleVerifyDocument","adminId","VERIFY","handleViewDocument","prev","DOWNLOAD","responseType","contentType","blob","Blob","previewUrl","createObjectURL","defaultValue","loadDocumentPreview","handleDownloadDocument","downloadUrl","link","createElement","href","contentDisposition","fileName","fileNameMatch","match","decodeURIComponent","includes","startsWith","download","appendChild","click","removeChild","formatDocumentType","passport","national_id","driving_license","residence_permit","work_permit","tax_id","social_security","formatDate","dateString","toLocaleDateString","_unused","IdentificationDocumentForm","doc","find","isImage","ArrowDownTrayIcon","setTimeout","newUrls","newTypes","style","maxHeight","PlusIcon","scope","isVerified","EyeIcon","PencilIcon","TrashIcon","apiEndpoint","credentials","mode","image","ok","errorText","text","json","resultKeys","keys","resultEmpty","errorType","constructor","handleDirectDocumentUpload","onSuccess","onError","success","errorMessage"],"sourceRoot":""}