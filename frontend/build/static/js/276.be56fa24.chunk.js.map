{"version":3,"file":"static/js/276.be56fa24.chunk.js","mappings":"6cAqBA,MA4JA,EA5JsEA,IAK/D,IALgE,kBACrEC,EAAiB,kBACjBC,EAAoB,GAAE,iBACtBC,EAAgB,gBAChBC,GACDJ,EACC,MAAOK,EAAUC,IAAeC,EAAAA,EAAAA,UAA2B,KACpDC,EAAmBC,IAAwBF,EAAAA,EAAAA,UAAwB,OACnEG,EAAwBC,IAA6BJ,EAAAA,EAAAA,UAAgC,OACrFK,EAASC,IAAcN,EAAAA,EAAAA,WAAS,IAChCO,EAAOC,IAAYR,EAAAA,EAAAA,UAAwB,OAGlDS,EAAAA,EAAAA,YAAU,KACiBC,WACvB,IACEJ,GAAW,GACXE,EAAS,MAET,MAGMG,SAHiBC,EAAAA,EAAcC,IAAIC,EAAAA,GAAcC,QAAQC,SAASC,OAGtCC,KAAKC,QACpCC,IAA6BzB,EAAkB0B,SAASD,EAAQE,MAGnEvB,EAAYY,EACd,CAAE,MAAOY,GAAM,IAADC,EAAAC,EACZC,QAAQnB,MAAM,mCAAoCgB,GAElD,MAAMI,EAAaJ,EACnBf,GAA4B,QAAnBgB,EAAAG,EAAWC,gBAAQ,IAAAJ,GAAM,QAANC,EAAnBD,EAAqBN,YAAI,IAAAO,OAAN,EAAnBA,EAA2BI,UAAWF,EAAWE,SAAW,0CACvE,CAAC,QACCvB,GAAW,EACb,GAGFwB,EAAkB,GACjB,CAACnC,IA6CJ,OACEoC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMC,SAAA,EACnBC,EAAAA,EAAAA,KAAA,SAAOF,UAAU,+CAA8CC,SAAC,mCAIhEF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBC,SAAA,EAClCF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,0BAAyBC,SAAA,EACtCF,EAAAA,EAAAA,MAAA,UACEC,UAAU,oNACVG,MAAOlC,GAAqB,GAC5BmC,SAzCmBC,IAC3B,MAAMC,EAAYC,SAASF,EAAEG,OAAOL,MAAO,IAE3C,GAAKM,MAAMH,GAWTpC,EAAqB,MACrBE,EAA0B,UAZL,CACrBF,EAAqBoC,GAGGxC,EAAS4C,MAAKtB,GAAWA,EAAQE,KAAOgB,KAnBxC5B,WAC1B,IACEJ,GAAW,GACX,MAAMsB,QAAiBhB,EAAAA,EAAcC,IAAIC,EAAAA,GAAcC,QAAQC,SAAS2B,MAAML,IAC9ElC,EAA0BwB,EAASV,KACrC,CAAE,MAAOK,GACPG,QAAQnB,MAAM,0CAA2CgB,EAC3D,CAAC,QACCjB,GAAW,EACb,GAcIsC,CAAoBN,EAExB,CAGA,EAyBsCL,SAAA,EAE9BC,EAAAA,EAAAA,KAAA,UAAQC,MAAM,GAAEF,SAAC,+BAChBnC,EAAS+C,KAAKzB,IACbc,EAAAA,EAAAA,KAAA,UAAyBC,MAAOf,EAAQE,GAAGW,SACxCb,EAAQ0B,OADE1B,EAAQE,UAMzBY,EAAAA,EAAAA,KAAA,UACEa,KAAK,SACLC,QAlCmBC,KAC3B,GAA0B,OAAtBhD,EAA4B,CAC9B,MAAMiD,EAAkBpD,EAAS4C,MAAKtB,GAAWA,EAAQE,KAAOrB,IAC5DiD,IACFxD,EAAkBwD,GAClBhD,EAAqB,MACrBE,EAA0B,MAE9B,GA2BQ+C,SAAgC,OAAtBlD,EACV+B,UAAU,wLAAuLC,SAClM,qBAKF5B,IACC6B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wBAAuBC,SAAC,oBAKxC1B,IACC2B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,uBAAsBC,SAClC1B,IAIJJ,IACC4B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wDAAuDC,SAAA,EACpEC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,2BAA0BC,SAAE9B,EAAuB2C,SACjEZ,EAAAA,EAAAA,KAAA,OAAKF,UAAU,4BAA2BC,SACvC9B,EAAuBiD,SACtBrB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iDAAgDC,SAAA,CAC5D9B,EAAuBiD,QAAQC,UAAU,EAAG,KAC5ClD,EAAuBiD,QAAQE,OAAS,KAAO,UAGlDpB,EAAAA,EAAAA,KAAA,KAAGF,UAAU,+BAA8BC,SAAC,gCAGhDC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,OAAMC,UACnBC,EAAAA,EAAAA,KAAA,KACEqB,KAAI,qBAAAC,OAAuBrD,EAAuBsD,MAClDjB,OAAO,SACPkB,IAAI,sBACJ1B,UAAU,wCAAuCC,SAClD,gCAOL,E,wBC9FV,MAwnBM0B,EAAoCC,IAoCnC,IApCoC,MACvCrD,EAAK,MACLuC,EAAK,SACLe,EAAQ,YACRC,EAAW,eACXC,EAAc,aACdC,EAAY,gBACZC,EAAe,cACfC,EAAa,iBACbC,EAAgB,OAChBC,EAAM,UACNC,EAAS,iBACTC,EAAgB,oBAChBC,EAAmB,SACnBC,EAAQ,YACRC,EAAW,QACXC,EAAO,WACPC,EAAU,MACVC,EAAK,MACLC,EAAK,SACLC,EAAQ,QACRzE,EAAO,aACP0E,EAAY,YACZC,EAAW,iBACXpF,EAAgB,gBAChBqF,EAAe,gBACfpF,EAAe,UACfqF,GAAY,EAAK,qBACjBC,EAAuB,GAAE,aACzBC,EAAY,mBACZC,EAAkB,YAClBC,EAAW,aACXC,EAAY,YACZC,EAAW,WACXC,EAAU,eACVC,GACH9B,EACG,MAAM,EAAE+B,IAAMC,EAAAA,EAAAA,OACPC,EAAWC,IAAgB9F,EAAAA,EAAAA,UAA6B,QAE/D,OACI+B,EAAAA,EAAAA,MAAA,QAAMgE,SAAUhB,EAAc/C,UAAU,YAAYgE,YAAU,EAAA/D,SAAA,CACzD1B,IACG2B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mHAAkHC,UAC7HC,EAAAA,EAAAA,KAAA,KAAAD,SAAI1B,OAKZ2B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,gDAA+CC,UAC1DF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wBAAwB,aAAW,OAAMC,SAAA,EACpDC,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLf,UAAS,GAAAwB,OACS,SAAdqC,EACM,mDACA,oJAAmJ,+DAE7J7C,QAASA,IAAM8C,EAAa,QAAQ7D,SACvC,WAGDC,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLf,UAAS,GAAAwB,OACS,YAAdqC,EACM,mDACA,oJAAmJ,+DAE7J7C,QAASA,IAAM8C,EAAa,WAAW7D,SAC1C,yBAOM,SAAd4D,IACG9D,EAAAA,EAAAA,MAAAkE,EAAAA,SAAA,CAAAhE,SAAA,EACIF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIF,EAAAA,EAAAA,MAAA,SAAOmE,QAAQ,QAAQlE,UAAU,6DAA4DC,SAAA,CACxF0D,EAAE,+BAA+B,SAEtCzD,EAAAA,EAAAA,KAAA,SACIa,KAAK,OACLzB,GAAG,QACHa,MAAOW,EACPV,SAAWC,GAAMwB,EAASxB,EAAEG,OAAOL,OACnCH,UAAU,gMACVmE,UAAQ,QAIhBjE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,UACtBF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIC,EAAAA,EAAAA,KAAA,SAAOgE,QAAQ,uBAAuBlE,UAAU,6DAA4DC,SACvG0D,EAAE,wCAEP5D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,WAAUC,SAAA,EACrBC,EAAAA,EAAAA,KAAA,YACIkE,IAAKd,EACLhE,GAAG,0BACH+E,KAAM,EACNrE,UAAU,+JACVG,MAAO2B,EACP1B,SAAWC,GAAM0B,EAAe1B,EAAEG,OAAOL,OACzCmE,QAASd,EACTe,OAAQd,EACRe,WAAYd,EACZe,YAAad,EAAE,mDAGnBzD,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLC,QAASA,KAAA,IAAA0D,EAAA,OAAkB,OAAZnB,QAAY,IAAZA,GAAqB,QAATmB,EAAZnB,EAAcoB,eAAO,IAAAD,OAAT,EAAZA,EAAuBE,OAAO,EAC7C5E,UAAU,4HACVc,MAAO6C,EAAE,oCAAoC1D,UAE7CC,EAAAA,EAAAA,KAAA,OAAK2E,MAAM,6BAA6B7E,UAAU,UAAU8E,KAAK,OAAOC,QAAQ,YAAYC,OAAO,eAAc/E,UAC7GC,EAAAA,EAAAA,KAAA,QAAM+E,cAAc,QAAQC,eAAe,QAAQC,YAAa,EAAGC,EAAE,8HAG7ElF,EAAAA,EAAAA,KAAA,SACIkE,IAAKb,EACLxC,KAAK,OACLX,SAAUgD,EACVpD,UAAU,WAEbkD,IACGhD,EAAAA,EAAAA,KAAA,OAAKF,UAAU,+GAA8GC,UACzHC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,2CAA0CC,SAAE0D,EAAE,0CAKzER,GAAwBA,EAAqB7B,OAAS,IACnDpB,EAAAA,EAAAA,KAAA,OAAKF,UAAU,OAAMC,UACjBC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,uBAAsBC,SAC/BkD,EAAqBtC,KAAI,CAACwE,EAAYC,KACnCvF,EAAAA,EAAAA,MAAA,MAAgBC,UAAU,4FAA2FC,SAAA,EACjHC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,uDAAsDC,SACjEoF,EAAWE,YAEhBrF,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,UACtBC,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLC,QAASA,IAAwB,OAAlBqC,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAqBiC,GACpCtF,UAAU,uCACVc,MAAO6C,EAAE,gCAAgC1D,UAEzCC,EAAAA,EAAAA,KAAA,OAAK2E,MAAM,6BAA6B7E,UAAU,UAAU8E,KAAK,OAAOC,QAAQ,YAAYC,OAAO,eAAc/E,UAC7GC,EAAAA,EAAAA,KAAA,QAAM+E,cAAc,QAAQC,eAAe,QAAQC,YAAa,EAAGC,EAAE,+BAKhFC,EAAWG,SAASC,WAAW,WAAaJ,EAAWK,OACpDxF,EAAAA,EAAAA,KAAA,OAAKF,UAAU,4JAA2JC,UACtKC,EAAAA,EAAAA,KAAA,OACIyF,IAAKC,IAAIC,gBAAgBR,EAAWK,MACpCI,IAAKT,EAAWE,SAChBvF,UAAU,mDAtBjBsF,SA+BxBxD,IACG5B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,OAAMC,UACjBC,EAAAA,EAAAA,KAAC6F,EAAAA,EAAe,CACZ3E,QAASU,EACTqB,qBAAsBA,EACtB6C,kBAAkB,YAOtCjG,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EACtBF,EAAAA,EAAAA,MAAA,SAAOC,UAAU,6DAA4DC,SAAA,CACxE0D,EAAE,wCAAwC,SAE/C5D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC3BF,EAAAA,EAAAA,MAAA,SAAOC,UAAU,2BAA0BC,SAAA,EACvCC,EAAAA,EAAAA,KAAA,SACIa,KAAK,QACLf,UAAU,iEACViG,KAAK,eACL9F,MAAM,OACN+F,QAA0B,SAAjBlE,EACT5B,SAAUA,KACN6B,EAAgB,QAChBI,EAAU,GAAG,KAGrBnC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,0BAAyBC,SAAE0D,EAAE,oCAEjD5D,EAAAA,EAAAA,MAAA,SAAOC,UAAU,2BAA0BC,SAAA,EACvCC,EAAAA,EAAAA,KAAA,SACIa,KAAK,QACLf,UAAU,iEACViG,KAAK,eACL9F,MAAM,OACN+F,QAA0B,SAAjBlE,EACT5B,SAAUA,KACN6B,EAAgB,QAChBE,EAAiB,GAAG,KAG5BjC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,0BAAyBC,SAAE0D,EAAE,yCAKvC,SAAjB3B,GACGjC,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIF,EAAAA,EAAAA,MAAA,SAAOmE,QAAQ,cAAclE,UAAU,6DAA4DC,SAAA,CAC9F0D,EAAE,yCAAyC,SAEhD5D,EAAAA,EAAAA,MAAA,UACIT,GAAG,cACHa,MAAO+B,EACP9B,SAAWC,GAAM8B,EAAiB9B,EAAEG,OAAOL,MAAQgG,OAAO9F,EAAEG,OAAOL,OAAS,IAC5EH,UAAU,gMACVmE,UAAQ,EAAAlE,SAAA,EAERC,EAAAA,EAAAA,KAAA,UAAQC,MAAM,GAAEF,SAAE0D,EAAE,wCACnByC,MAAMC,QAAQzD,IAAUA,EAAM/B,KAAIyF,IAC/BvG,EAAAA,EAAAA,MAAA,UAAsBI,MAAOmG,EAAKhH,GAAGW,SAAA,CAChCqG,EAAKC,UAAU,IAAED,EAAKE,WADdF,EAAKhH,aAO9BS,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIF,EAAAA,EAAAA,MAAA,SAAOmE,QAAQ,OAAOlE,UAAU,6DAA4DC,SAAA,CACvF0D,EAAE,yCAAyC,SAEhD5D,EAAAA,EAAAA,MAAA,UACIT,GAAG,OACHa,MAAOiC,EACPhC,SAAWC,GAAMgC,EAAUhC,EAAEG,OAAOL,MAAQgG,OAAO9F,EAAEG,OAAOL,OAAS,IACrEH,UAAU,gMACVmE,UAAQ,EAAAlE,SAAA,EAERC,EAAAA,EAAAA,KAAA,UAAQC,MAAM,GAAEF,SAAE0D,EAAE,wCACnByC,MAAMC,QAAQxD,IAAUA,EAAMhC,KAAI4F,IAC/BvG,EAAAA,EAAAA,KAAA,UAAsBC,MAAOsG,EAAKnH,GAAGW,SAChCwG,EAAKR,MADGQ,EAAKnH,aAQlCS,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIC,EAAAA,EAAAA,KAAA,SAAOgE,QAAQ,iBAAiBlE,UAAU,6DAA4DC,SACjG0D,EAAE,2CAEP5D,EAAAA,EAAAA,MAAA,UACIT,GAAG,iBACHa,MAAOmC,EACPlC,SAAWC,GAAMkC,EAAoBlC,EAAEG,OAAOL,MAAQgG,OAAO9F,EAAEG,OAAOL,OAAS,IAC/EH,UAAU,gMAA+LC,SAAA,EAEzMC,EAAAA,EAAAA,KAAA,UAAQC,MAAM,GAAEF,SAAE0D,EAAE,4CACnByC,MAAMC,QAAQzD,IAAUA,EAAM/B,KAAIyF,IAC/BvG,EAAAA,EAAAA,MAAA,UAAsBI,MAAOmG,EAAKhH,GAAGW,SAAA,CAChCqG,EAAKC,UAAU,IAAED,EAAKE,WADdF,EAAKhH,aAO9BS,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIF,EAAAA,EAAAA,MAAA,SAAOmE,QAAQ,SAASlE,UAAU,6DAA4DC,SAAA,CACzF0D,EAAE,gCAAgC,SAEvC5D,EAAAA,EAAAA,MAAA,UACIT,GAAG,SACHa,MAAOqC,EACPpC,SAAWC,GAAMoC,EAAY0D,OAAO9F,EAAEG,OAAOL,QAC7CH,UAAU,gMACVmE,UAAQ,EAAAlE,SAAA,EAERC,EAAAA,EAAAA,KAAA,UAAQC,MAAM,GAAEF,SAAE0D,EAAE,yBACnByC,MAAMC,QAAQvD,IAAaA,EAASjC,KAAI6F,IACrCxG,EAAAA,EAAAA,KAAA,UAAwBC,MAAOuG,EAAOpH,GAAGW,SACpCyG,EAAOT,MADCS,EAAOpH,aAOhCS,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIC,EAAAA,EAAAA,KAAA,SAAOgE,QAAQ,UAAUlE,UAAU,6DAA4DC,SAC1F0D,EAAE,oCAEPzD,EAAAA,EAAAA,KAAA,SACIa,KAAK,OACLzB,GAAG,UACHa,MAAOuC,EACPtC,SAAWC,GAAMsC,EAAWtC,EAAEG,OAAOL,OACrCH,UAAU,wMAOX,YAAd6D,IACG9D,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMC,SAAA,EACjBC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,uDAAsDC,SAAC,kCAEpErC,EAAiB0D,OAAS,GACvBpB,EAAAA,EAAAA,KAAA,MAAIF,UAAU,iBAAgBC,SACzBrC,EAAiBiD,KAAIzB,IAClBW,EAAAA,EAAAA,MAAA,MAAqBC,UAAU,4EAA2EC,SAAA,EACtGC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,qBAAoBC,SAAEb,EAAQ0B,SAC9CZ,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLC,QAASA,IAAMnD,EAAgBuB,EAAQE,IACvCU,UAAU,kCAAiCC,SAE1C0D,EAAE,oCAPFvE,EAAQE,SAazBY,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gDAA+CC,SAAE0D,EAAE,gDAIxEzD,EAAAA,EAAAA,KAACyG,EAAsB,CACnBjJ,kBAAmBuF,EACnBtF,kBAAmBC,EAAiBiD,KAAI+F,GAAKA,EAAEtH,KAC/C1B,iBAAkBA,EAClBC,gBAAiBA,QAK7BkC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8BAA6BC,SAAA,EACxCC,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLC,QAASgC,EACThD,UAAU,uJACVc,MAAO6C,EAAE,gCAAgC1D,UAEzCC,EAAAA,EAAAA,KAAC2G,EAAAA,EAAS,CAAC7G,UAAU,eAEzBE,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLf,UAAU,4OACVc,MAAiB6C,EAAVtF,EAAY,iCAAsC,gCACzD8C,SAAU9C,EAAQ4B,SAEjB5B,GACG6B,EAAAA,EAAAA,KAAC4G,EAAAA,EAAa,CAAC9G,UAAU,0BAEzBE,EAAAA,EAAAA,KAAC6G,EAAAA,EAAS,CAAC/G,UAAU,mBAI9B,EAIf,EA/+BwBvC,IAA+D,IAA9D,OAAEuJ,EAAM,QAAEC,EAAO,cAAEC,GAAqCzJ,EAC7E,MAAM,EAAEkG,IAAMC,EAAAA,EAAAA,OACR,KAAE0C,IAASa,EAAAA,EAAAA,OACX,aAAEC,EAAY,cAAEC,IAAkBC,EAAAA,EAAAA,MACjCC,EAAeC,IAAoBxJ,EAAAA,EAAAA,UAASyJ,OAAOC,WAAa,OAEhE5G,EAAOe,IAAY7D,EAAAA,EAAAA,UAAS,KAC5B8D,EAAaC,IAAkB/D,EAAAA,EAAAA,UAAS,KACxCgE,EAAcC,IAAmBjE,EAAAA,EAAAA,UAA0B,SAC3DkE,EAAeC,IAAoBnE,EAAAA,EAAAA,UAAsB,KACzDoE,EAAQC,IAAarE,EAAAA,EAAAA,UAAsB,KAC3CsE,EAAkBC,IAAuBvE,EAAAA,EAAAA,UAAsB,KAC/DwE,EAAUC,IAAezE,EAAAA,EAAAA,UAAsB,KAC/C0E,EAASC,IAAc3E,EAAAA,EAAAA,UAAS,KAChC4E,EAAO+E,IAAY3J,EAAAA,EAAAA,UAAiB,KACpC6E,EAAO+E,IAAY5J,EAAAA,EAAAA,UAAiB,KACpC8E,EAAU+E,IAAe7J,EAAAA,EAAAA,UAAmB,KAC5CO,EAAOC,IAAYR,EAAAA,EAAAA,UAAwB,OAC3CK,EAASC,IAAcN,EAAAA,EAAAA,WAAS,IAChC8J,EAAUC,IAAe/J,EAAAA,EAAAA,UAASyJ,OAAOC,WAAa,MACtD9J,EAAkBoK,IAAuBhK,EAAAA,EAAAA,UAA2B,KACpE6F,EAAWC,IAAgB9F,EAAAA,EAAAA,UAA6B,SACxDmF,EAAsB8E,IAA2BjK,EAAAA,EAAAA,UAA2B,KAC5EkF,GAAWgF,KAAgBlK,EAAAA,EAAAA,WAAS,GACrCuF,IAAe4E,EAAAA,EAAAA,QAAyB,MACxC7E,IAAc6E,EAAAA,EAAAA,QAA4B,OAQhD1J,EAAAA,EAAAA,YAAU,KACFuI,IACAoB,KACAC,KACAC,KAEIhC,GACA/D,EAAoB+D,EAAKhH,IAG7BqD,EAhBkB4F,MACtB,MAAMC,EAAO,IAAIC,KAEjB,OADAD,EAAKE,QAAQF,EAAKG,UAAY,GACvBH,EAAKI,cAAcC,MAAM,KAAK,EAAE,EAaxBN,IACf,GACD,CAACvB,EAAQV,KAEZ7H,EAAAA,EAAAA,YAAU,KACFqE,EAASxB,OAAS,GAAkB,KAAbkB,IACC,IAApBM,EAASxB,QAEFwB,EAASxB,OAAS,IADzBmB,EAAYK,EAAS,GAAGxD,GAIhC,GACD,CAACwD,EAAUN,KAEd/D,EAAAA,EAAAA,YAAU,KAEN,MAAMqK,EAAkBA,KACpBf,EAAYN,OAAOC,WAAa,KAChCF,EAAiBC,OAAOC,WAAa,KAAK,EAU9C,OANAoB,IAGArB,OAAOsB,iBAAiB,SAAUD,GAG3B,KACHrB,OAAOuB,oBAAoB,SAAUF,EAAgB,CACxD,GACF,KAGHrK,EAAAA,EAAAA,YAAU,KACFuI,EACAI,IAEAC,IAGG,KACHA,GAAe,IAEpB,CAACL,EAAQI,EAAcC,IAE1B,MAAMe,GAAa1J,UACf,IACIF,EAAS,MAET,IADcyK,aAAaC,QAAQ,SAG/B,YADA1K,EAAS,yBAIbkB,QAAQyJ,IAAI,2CAEZ,MAAMvJ,QAAiBhB,EAAAA,EAAcC,IAAIC,EAAAA,GAAcsK,MAAMC,UAE7D3J,QAAQyJ,IAAI,oBAAqBvJ,EAASV,KAAKoC,QAC/CqG,EAAS/H,EAASV,MAAQ,GAC9B,CAAE,MAAOK,GACLG,QAAQnB,MAAM,kCAAmCgB,GAGjD,MAAMI,EAAaJ,EAGX,IAADC,EAAAC,EAFP,GAAwB,gBAApBE,EAAW2J,KACX9K,EAASmF,EAAE,iDAEXnF,EAAS,GAADgD,OAAImC,EAAE,0CAAyC,MAAAnC,QAAwB,QAAnBhC,EAAAG,EAAWC,gBAAQ,IAAAJ,GAAM,QAANC,EAAnBD,EAAqBN,YAAI,IAAAO,OAAN,EAAnBA,EAA2BI,UAAWF,EAAWE,SAErH,GAGEwI,GAAa3J,UACf,IACIF,EAAS,MAET,IADcyK,aAAaC,QAAQ,SAG/B,YADA1K,EAAS,yBAIb,MAAMoB,QAAiBhB,EAAAA,EAAcC,IAAIC,EAAAA,GAAcyK,MAAMtK,MAC7D2I,EAAShI,EAASV,MAAQ,GAC9B,CAAE,MAAOK,GACLG,QAAQnB,MAAM,gCAAiCgB,GAG/C,MAAMI,EAAaJ,EAGX,IAADiK,EAAAC,EAFP,GAAwB,gBAApB9J,EAAW2J,KACX9K,EAASmF,EAAE,iDAEXnF,EAAS,GAADgD,OAAImC,EAAE,0CAAyC,MAAAnC,QAAwB,QAAnBgI,EAAA7J,EAAWC,gBAAQ,IAAA4J,GAAM,QAANC,EAAnBD,EAAqBtK,YAAI,IAAAuK,OAAN,EAAnBA,EAA2B5J,UAAWF,EAAWE,SAErH,GAGEyI,GAAgB5J,UAClB,IACIF,EAAS,MAET,IADcyK,aAAaC,QAAQ,SAG/B,YADA1K,EAAS,yBAIbkB,QAAQyJ,IAAI,kDAEZ,MAAMvJ,QAAiBhB,EAAAA,EAAcC,IAAIC,EAAAA,GAAc4K,SAASzK,MAEhES,QAAQyJ,IAAI,2BAA4BvJ,EAASV,KAAKoC,QACtDuG,EAAYjI,EAASV,MAAQ,GACjC,CAAE,MAAOK,GACLG,QAAQnB,MAAM,yCAA0CgB,GAGxD,MAAMI,EAAaJ,EAGX,IAADoK,EAAAC,EAFP,GAAwB,gBAApBjK,EAAW2J,KACX9K,EAASmF,EAAE,iDAEXnF,EAAS,GAADgD,OAAImC,EAAE,6CAA4C,MAAAnC,QAAwB,QAAnBmI,EAAAhK,EAAWC,gBAAQ,IAAA+J,GAAM,QAANC,EAAnBD,EAAqBzK,YAAI,IAAA0K,OAAN,EAAnBA,EAA2B/J,UAAWF,EAAWE,SAExH,GAGE2D,GAAc9E,UAChB,MAAMmL,EAAQC,EAAMC,cAAcF,MAElC,IAAK,IAAIG,EAAI,EAAGA,EAAIH,EAAMvI,OAAQ0I,IAAK,CACnC,MAAMC,EAAOJ,EAAMG,GAGnB,GAAmC,IAA/BC,EAAKlJ,KAAKmJ,QAAQ,SAAgB,CAClCJ,EAAMK,iBAEN,MAAMzE,EAAOuE,EAAKG,YAIlB,YAHI1E,SACM2E,GAA0B3E,GAGxC,CACJ,GAGEjC,GAAa/E,UAIf,GAHAoL,EAAMK,iBACNL,EAAMQ,kBAEFR,EAAMS,aAAaC,OAASV,EAAMS,aAAaC,MAAMlJ,OAAS,EAAG,CACjE,MAAMoE,EAAOoE,EAAMS,aAAaC,MAAM,SAChCH,GAA0B3E,EACpC,GAGEhC,GAAkBoG,IACpBA,EAAMK,iBACNL,EAAMQ,iBAAiB,EAGrBD,GAA4B3L,UAC9BwJ,IAAa,GACb1J,EAAS,MAET,IAEI,MAAMiM,EAAgC,CAClClF,SAAUG,EAAKO,KACfT,SAAUE,EAAK3E,KACf2J,SAAUhF,EAAKiF,KACfjF,KAAMA,GAGVuC,GAAwB2C,GAAQ,IAAIA,EAAMH,KAI1C,IAAII,EAAa,GAWjB,GAPIA,EAHAnF,EAAK3E,KAAK0E,WAAW,UAGX,OAAAjE,OAAUkE,EAAKO,KAAI,MAAAzE,OAAKmC,EAAE,2CAA0C,OAGpE,MAAAnC,OAASkE,EAAKO,KAAI,MAAAzE,OAAKmC,EAAE,2CAA0C,OAI7EL,GAAYqB,QAAS,CACrB,MAAMmG,EAAYxH,GAAYqB,QAAQoG,eAChCC,EAAalJ,EAAYT,UAAU,EAAGyJ,GACtCG,EAAYnJ,EAAYT,UAAUyJ,GAExC/I,EAAeiJ,EAAaH,EAAaI,GAGzCC,YAAW,KACP,GAAI5H,GAAYqB,QAAS,CACrB,MAAMwG,EAASL,EAAYD,EAAWvJ,OACtCgC,GAAYqB,QAAQoG,eAAiBI,EACrC7H,GAAYqB,QAAQyG,aAAeD,EACnC7H,GAAYqB,QAAQ0G,OACxB,IACD,EACP,MACItJ,EAAeD,EAAc+I,EAErC,CAAE,MAAOtL,GAAM,IAAD+L,EAAAC,EACV7L,QAAQnB,MAAM,qCAAsCgB,GAEpD,MAAMI,EAAaJ,EACnBf,GAA4B,QAAnB8M,EAAA3L,EAAWC,gBAAQ,IAAA0L,GAAM,QAANC,EAAnBD,EAAqBpM,YAAI,IAAAqM,OAAN,EAAnBA,EAA2B1L,UAAWF,EAAWE,SAAW,0CACzE,CAAC,QACGqI,IAAa,EACjB,GAGEsD,GAAmB9M,UACrB,MAAM8L,EAAQV,EAAMtJ,OAAOgK,MAC3B,IAAKA,GAA0B,IAAjBA,EAAMlJ,OAAc,OAElC,MAAMoE,EAAO8E,EAAM,SACbH,GAA0B3E,GAG5BnC,GAAaoB,UACbpB,GAAaoB,QAAQxE,MAAQ,GACjC,EAGEsL,GAAmCnG,IAErC,MAAMoG,EAAqBvI,EAAqBmC,GAEhD,GAAIoG,IAEAzD,EAAwB9E,EAAqBhE,QAAO,CAACwM,EAAG3B,IAAMA,IAAM1E,KAGhEoG,EAAmBnG,UAAU,CAE7B,MAAMqG,EAAkBF,EAAmBnG,SAASsG,QAAQ,sBAAuB,QAC7EC,EAAanI,EAAE,2CACfoI,EAAe,IAAIC,OAAO,OAADxK,OAAQoK,EAAe,UAAApK,OAASsK,EAAWD,QAAQ,sBAAuB,QAAO,OAAO,KACjHI,EAAc,IAAID,OAAO,MAADxK,OAAOoK,EAAe,UAAApK,OAASsK,EAAWD,QAAQ,sBAAuB,QAAO,OAAO,KAG/GK,EAAiBpK,EAClB+J,QAAQE,EAAc,IACtBF,QAAQI,EAAa,IAErBJ,QAAQ,UAAW,QAExB9J,EAAemK,EACnB,CACJ,EAoCEnJ,GAAerE,UACjB2B,EAAE8J,iBACF3L,EAAS,MACTF,GAAW,GAEX,IAEI,IAAKwC,IAAWoB,IAAkBE,IAAYI,EAG1C,OAFAhE,EAASmF,EAAE,+CACXrF,GAAW,GAIf,GAAI4D,GAAiBE,EAGjB,OAFA5D,EAASmF,EAAE,kDACXrF,GAAW,GAKf,IADc2K,aAAaC,QAAQ,SAI/B,OAFA1K,EAAS,8BACTF,GAAW,GAKf,MAAMoI,EAASP,OAAO3D,GAChB2J,EAAiB7J,EAAmB6D,OAAO7D,GAAoB,KAC/D8J,EAAclK,EAAgBiE,OAAOjE,GAAiB,KACtDuE,EAAOrE,EAAS+D,OAAO/D,GAAU,KAEvC,GAAKF,GAAiBzB,MAAM2L,IACvBhK,GAAU3B,MAAMgG,IACjBhG,MAAMiG,IACLpE,GAAoB7B,MAAM0L,GAG3B,OAFA3N,EAASmF,EAAE,4CACXrF,GAAW,GAKf,MAAM+N,EAAgB,CAClBvL,QACAgB,cACAwK,OAAQ,OACRhK,iBAAkB6J,EAClB3J,SAAUkE,EACVhE,WAIiB,SAAjBV,GAA2BE,EAC3BmK,EAASnK,cAAgBA,EACD,SAAjBF,GAA2BI,IAClCiK,EAASjK,OAASA,GAGtB,MAAMxC,QAAiBhB,EAAAA,EAAc2N,KAAKzN,EAAAA,GAAc0N,MAAMvN,KAAMoN,GAE9DI,EAAY7M,EAASV,KAAKI,GAG5B1B,EAAiB0D,OAAS,SACpBoL,QAAQC,IACV/O,EAAiBiD,KAAIzB,GACjBR,EAAAA,EAAc2N,KAAKzN,EAAAA,GAAc0N,MAAMI,cAAcH,EAAWrN,EAAQE,aAnGzDZ,WAC/B,GAAoC,IAAhCyE,EAAqB7B,OAEzB,IACIhD,GAAW,GAGX,IAAK,MAAM+G,KAAclC,EAAsB,CAC3C,IAAKkC,EAAWK,KAAM,SAEtB,MAAMmH,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQ1H,EAAWK,YAE7B9G,EAAAA,EAAc2N,KAChBzN,EAAAA,GAAc0N,MAAMQ,YAAYC,GAChCJ,EACA,CACIK,QAAS,CACL,eAAgB,wBAIhC,CAEAxN,QAAQyJ,IAAI,GAAD3H,OAAI2B,EAAqB7B,OAAM,wCAC9C,CAAE,MAAO/B,GACLG,QAAQnB,MAAM,wCAAsCgB,EAExD,CAAC,QACGjB,GAAW,EACf,GA2EU6O,CAA2BV,GAEjC/M,QAAQyJ,IAAI,6BAA8BvJ,EAASV,MAEnDgI,EAActH,EAASV,MACvB8D,IACJ,CAAE,MAAOzD,GAAM,IAAD6N,EAAAC,EACV3N,QAAQnB,MAAM,mCAAoCgB,GAGlD,MAAMI,EAAaJ,EACnBf,GAA4B,QAAnB4O,EAAAzN,EAAWC,gBAAQ,IAAAwN,GAAM,QAANC,EAAnBD,EAAqBlO,YAAI,IAAAmO,OAAN,EAAnBA,EAA2B9O,QAASoB,EAAWE,SAAW8D,EAAE,uCACzE,CAAC,QACGrF,GAAW,EACf,GAGE0E,GAAcA,KAChBnB,EAAS,IACTE,EAAe,IACfE,EAAgB,QAChBE,EAAiB,IACjBE,EAAU,IACVE,EAAoB,IACpBE,EAAY,IACZE,EAAW,IACXnE,EAAS,MACTwJ,EAAoB,IACpBC,EAAwB,IACxBhB,GAAS,EAGPqG,GAAoBlO,IACtB4I,GAAoB4C,GAAQ,IAAIA,EAAMxL,IAAS,EAG7CmO,GAAuBjN,IACzB0H,GAAoB4C,GAAQA,EAAKzL,QAAOyH,GAAKA,EAAEtH,KAAOgB,KAAW,EAIrE,OAAIwH,GAEI/H,EAAAA,EAAAA,MAACyN,EAAAA,GAAM,CAACC,KAAMzG,EAAQC,QAASjE,GAAahD,UAAU,gBAAeC,SAAA,EACjEC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,4BAA4B,cAAY,UAEvDE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,qDAAoDC,UAC/DF,EAAAA,EAAAA,MAACyN,EAAAA,GAAOE,MAAK,CAAC1N,UAAU,yEAAwEC,SAAA,EAC5FF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sEAAqEC,SAAA,EAChFC,EAAAA,EAAAA,KAACsN,EAAAA,GAAOG,MAAK,CAAC3N,UAAU,wCAAuCC,SAC1D0D,EAAE,6BAEPzD,EAAAA,EAAAA,KAAA,UACIc,QAASgC,GACThD,UAAU,gFAA+EC,UAEzFC,EAAAA,EAAAA,KAAC2G,EAAAA,EAAS,CAAC7G,UAAU,kBAI7BE,EAAAA,EAAAA,KAACyB,EAAQ,CACLpD,MAAOA,EACPuC,MAAOA,EACPe,SAAUA,EACVC,YAAaA,EACbC,eAAgBA,EAChBC,aAAcA,EACdC,gBAAiBA,EACjBC,cAAeA,EACfC,iBAAkBA,EAClBC,OAAQA,EACRC,UAAWA,EACXC,iBAAkBA,EAClBC,oBAAqBA,EACrBC,SAAUA,EACVC,YAAaA,EACbC,QAASA,EACTC,WAAYA,EACZC,MAAOA,EACPC,MAAOA,EACPC,SAAUA,EACVzE,QAASA,EACT0E,aAAcA,GACdC,YAAaA,GACbpF,iBAAkBA,EAClBqF,gBAAiBqK,GACjBzP,gBAAiB0P,GACjBrK,UAAWA,GACXC,qBAAsBA,EACtBC,aAAcoI,GACdnI,mBAAoBoI,GACpBnI,YAAaA,GACbC,aAAcA,GACdC,YAAaA,GACbC,WAAYA,GACZC,eAAgBA,cAWpC3D,EAAAA,EAAAA,MAAAkE,EAAAA,SAAA,CAAAhE,SAAA,CAGK+G,IAAWO,IACRrH,EAAAA,EAAAA,KAAA,OACIF,UAAU,uFACV,cAAY,OACZ4N,MAAO,CACHC,QAAS7G,EAAS,EAAI,EACtB8G,WAAY,6BAMxB/N,EAAAA,EAAAA,MAAA,OACIC,UAAS,0JAAAwB,OAA4JwF,EAAS,gBAAkB,oBAChM4G,MAAO,CACHE,WAAY,uDACZC,cAAe/G,EAAS,OAAS,QAErC,eAAcA,EACdP,KAAK,SACL,aAAYO,EAAO/G,SAAA,EAEnBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oFAAmFC,SAAA,EAC9FC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,wCAAuCC,SAChD0D,EAAE,6BAEPzD,EAAAA,EAAAA,KAAA,UACIc,QAASgC,GACThD,UAAU,gFAA+EC,UAEzFC,EAAAA,EAAAA,KAAC2G,EAAAA,EAAS,CAAC7G,UAAU,kBAI7BE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,qCAAoCC,UAC/CC,EAAAA,EAAAA,KAACyB,EAAQ,CACLpD,MAAOA,EACPuC,MAAOA,EACPe,SAAUA,EACVC,YAAaA,EACbC,eAAgBA,EAChBC,aAAcA,EACdC,gBAAiBA,EACjBC,cAAeA,EACfC,iBAAkBA,EAClBC,OAAQA,EACRC,UAAWA,EACXC,iBAAkBA,EAClBC,oBAAqBA,EACrBC,SAAUA,EACVC,YAAaA,EACbC,QAASA,EACTC,WAAYA,EACZC,MAAOA,EACPC,MAAOA,EACPC,SAAUA,EACVzE,QAASA,EACT0E,aAAcA,GACdC,YAAaA,GACbpF,iBAAkBA,EAClBqF,gBAAiBqK,GACjBzP,gBAAiB0P,GACjBrK,UAAWA,GACXC,qBAAsBA,EACtBC,aAAcoI,GACdnI,mBAAoBoI,GACpBnI,YAAaA,GACbC,aAAcA,GACdC,YAAaA,GACbC,WAAYA,GACZC,eAAgBA,YAI7B,E,wCC3pBX,SAASsK,EAAqBvQ,EAI3BwQ,GAAQ,IAJoB,MAC7BnN,EAAK,QACLoN,GAEDzQ,EADI0Q,GAAKC,EAAAA,EAAAA,GAAA3Q,EAAA4Q,GAER,OAAoBC,EAAAA,cAAoB,MAAOC,OAAOC,OAAO,CAC3D3J,MAAO,6BACPC,KAAM,OACNC,QAAS,YACTI,YAAa,IACbH,OAAQ,eACR,cAAe,OACf,YAAa,OACbZ,IAAK6J,EACL,kBAAmBC,GAClBC,GAAQrN,EAAqBwN,EAAAA,cAAoB,QAAS,CAC3DhP,GAAI4O,GACHpN,GAAS,KAAmBwN,EAAAA,cAAoB,OAAQ,CACzDrJ,cAAe,QACfC,eAAgB,QAChBE,EAAG,ujBAEP,CACA,MACA,EADiCkJ,EAAAA,WAAiBN,G,cCRlD,MAgGA,EAhGgDvQ,IAAe,IAADgR,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,IAAb,KAAEC,GAAMrR,EACvD,MAAM,EAAEkG,IAAMC,EAAAA,EAAAA,OACR,YAAEmL,IAAgBC,EAAAA,EAAAA,KAIlBC,GAA4B,QAAVR,EAAAK,EAAKhO,aAAK,IAAA2N,OAAA,EAAVA,EAAYpP,SAAS,UACX,QADiBqP,EAC3BI,EAAKhO,aAAK,IAAA4N,OAAA,EAAVA,EAAYrP,SAAS,UACX,QADiBsP,EAC3BG,EAAKhO,aAAK,IAAA6N,OAAA,EAAVA,EAAYtP,SAAS,cACX,QADqBuP,EAC/BE,EAAKhO,aAAK,IAAA8N,OAAA,EAAVA,EAAYvP,SAAS,WACL,QADYwP,EAC5BC,EAAKhN,mBAAW,IAAA+M,OAAA,EAAhBA,EAAkBxP,SAAS,cAGnD,IAAI6P,EAAyC,CAAC,EAE9C,GAAIJ,EAAKhN,YACP,IAEE,MAAMqN,EAAYL,EAAKhN,YAAYsN,MAAM,eACrCD,IACFD,EAAoBG,KAAKC,MAAMH,EAAU,IAE7C,CAAE,MAAO9O,GAEOyO,EAAKhN,YAAY+G,MAAM,MAC/B0G,SAAQC,IACZ,MAAMJ,EAAQI,EAAKJ,MAAM,mBACzB,GAAIA,EAAO,CACT,MAAMK,EAAML,EAAM,GAAGM,OACfvP,EAAQiP,EAAM,GAAGM,OACvBR,EAAkBO,GAAOtP,CAC3B,IAEJ,CAI4C,IAA1CoO,OAAOoB,KAAKT,GAAmB5N,QAAgB2N,IACjDC,EAAoB,CAClBU,SAAUd,EAAKhO,MACfgB,YAAagN,EAAKhN,aAAe6B,EAAE,+BAgBvC,OAAKsL,GAA6D,IAA1CV,OAAOoB,KAAKT,GAAmB5N,QAKrDvB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4FAA2FC,SAAA,EACxGF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yCAAwCC,SAAA,EACrDF,EAAAA,EAAAA,MAAA,MAAIC,UAAU,0DAAyDC,SAAA,EACrEC,EAAAA,EAAAA,KAAC8N,EAAqB,CAAChO,UAAU,iBAChC2D,EAAE,8BAA+B,CAAEkM,aAAc,qCAEpD3P,EAAAA,EAAAA,KAAA,UACEc,QAxBetC,UACrB,IACE,MAAMoR,EAAaT,KAAKU,UAAUb,EAAmB,KAAM,SACrDc,UAAUC,UAAUC,UAAUJ,GACpCf,EAAYpL,EAAE,uBAAwB,CAAEkM,aAAc,oCAAsC,UAC9F,CAAE,MAAOtR,GACPmB,QAAQnB,MAAM,wBAAyBA,GACvCwQ,EAAYpL,EAAE,sBAAuB,CAAEkM,aAAc,yBAA2B,QAClF,GAiBM7P,UAAU,2DAA0DC,SAEnE0D,EAAE,qBAAsB,CAAEkM,aAAc,yBAG7C3P,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,SACvBsO,OAAOoB,KAAKT,GAAmB5N,OAAS,EACvCiN,OAAO4B,QAAQjB,GAAmBrO,KAAIe,IAAA,IAAE6N,EAAKtP,GAAMyB,EAAA,OACjD7B,EAAAA,EAAAA,MAAA,OAAeC,UAAU,2DAA0DC,SAAA,EACjFF,EAAAA,EAAAA,MAAA,QAAMC,UAAU,iDAAgDC,SAAA,CAC7D0D,EAAE,aAADnC,OAAciO,KAAUA,EAAI,QAEhCvP,EAAAA,EAAAA,KAAA,QAAMF,UAAU,sDAAqDC,SACjD,kBAAVE,EAAqBkP,KAAKU,UAAU5P,EAAO,KAAM,GAAKiQ,OAAOjQ,OAL/DsP,EAOJ,KAGRvP,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2CAA0CC,SACtD0D,EAAE,4BAA6B,CAAEkM,aAAc,4DA/BjD,IAmCD,E,0CC3GV,SAASQ,EAAiB5S,EAIvBwQ,GAAQ,IAJgB,MACzBnN,EAAK,QACLoN,GAEDzQ,EADI0Q,GAAKC,EAAAA,EAAAA,GAAA3Q,EAAA4Q,GAER,OAAoBC,EAAAA,cAAoB,MAAOC,OAAOC,OAAO,CAC3D3J,MAAO,6BACPC,KAAM,OACNC,QAAS,YACTI,YAAa,IACbH,OAAQ,eACR,cAAe,OACf,YAAa,OACbZ,IAAK6J,EACL,kBAAmBC,GAClBC,GAAQrN,EAAqBwN,EAAAA,cAAoB,QAAS,CAC3DhP,GAAI4O,GACHpN,GAAS,KAAmBwN,EAAAA,cAAoB,OAAQ,CACzDrJ,cAAe,QACfC,eAAgB,QAChBE,EAAG,sGAEP,CACA,MACA,EADiCkJ,EAAAA,WAAiB+B,GCiJlD,EAxJ0D5S,IAAe,IAADgR,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,IAAb,KAAEC,GAAMrR,EACjE,MAAM,EAAEkG,IAAMC,EAAAA,EAAAA,OACR,YAAEmL,IAAgBC,EAAAA,EAAAA,MACjBsB,EAAeC,IAAoBvS,EAAAA,EAAAA,UAAiB,KACpDK,EAASC,IAAcN,EAAAA,EAAAA,WAAS,IAChCwS,EAAWC,IAAgBzS,EAAAA,EAAAA,WAAS,IACpC0S,EAAYC,IAAiB3S,EAAAA,EAAAA,WAAS,GAU7C,MAPkC,QAAVyQ,EAAAK,EAAKhO,aAAK,IAAA2N,OAAA,EAAVA,EAAYpP,SAAS,UACX,QADiBqP,EAC3BI,EAAKhO,aAAK,IAAA4N,OAAA,EAAVA,EAAYrP,SAAS,UACX,QADiBsP,EAC3BG,EAAKhO,aAAK,IAAA6N,OAAA,EAAVA,EAAYtP,SAAS,cACX,QADqBuP,EAC/BE,EAAKhO,aAAK,IAAA8N,OAAA,EAAVA,EAAYvP,SAAS,WACL,QADYwP,EAC5BC,EAAKhN,mBAAW,IAAA+M,OAAA,EAAhBA,EAAkBxP,SAAS,eAIjD,OAAO,KAgET,OACEU,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4FAA2FC,SAAA,EACxGF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yCAAwCC,SAAA,EACrDF,EAAAA,EAAAA,MAAA,MAAIC,UAAU,0DAAyDC,SAAA,EACrEC,EAAAA,EAAAA,KAAC0Q,EAAAA,EAAY,CAAC5Q,UAAU,iBACvB2D,EAAE,0BAA2B,CAAEkM,aAAc,sBAEhD3P,EAAAA,EAAAA,KAAA,UACEc,QArEuBtC,UAC7BiS,GAAc,GACd,IAOE,MAAME,EAAQ,8GAAArP,OAEiDsN,EAAKhO,MAAK,oHAOzEyP,EAAiBM,GACjB9B,EAAYpL,EAAE,8BAA+B,CAAEkM,aAAc,4BAA8B,UAC7F,CAAE,MAAOtR,GAAa,IAADuS,EAAAC,EACnBrR,QAAQnB,MAAM,4CAA6CA,GAC3DwQ,GACgB,QAAd+B,EAAAvS,EAAMqB,gBAAQ,IAAAkR,GAAM,QAANC,EAAdD,EAAgB5R,YAAI,IAAA6R,OAAN,EAAdA,EAAsBlR,UAAW8D,EAAE,oCAAqC,CAAEkM,aAAc,uCACxF,QAEJ,CAAC,QACCc,GAAc,EAChB,GA0CMxP,SAAUuP,EACV1Q,UAAU,0IAAyIC,SAElJyQ,GACC3Q,EAAAA,EAAAA,MAAAkE,EAAAA,SAAA,CAAAhE,SAAA,EACEC,EAAAA,EAAAA,KAAC4G,EAAAA,EAAa,CAAC9G,UAAU,8BACxB2D,EAAE,oBAAqB,CAAEkM,aAAc,oBAG1ClM,EAAE,6BAA8B,CAAEkM,aAAc,4BAKrDS,IACCvQ,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EACxBC,EAAAA,EAAAA,KAAA,YACEC,MAAOmQ,EACPlQ,SAAWC,IACTkQ,EAAiBlQ,EAAEG,OAAOL,OAC1BsQ,GAAa,EAAM,EAErBzQ,UAAU,+JACVqE,KAAM,GACNI,YAAad,EAAE,gCAAiC,CAAEkM,aAAc,4CAElE3P,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mBAAkBC,UAC/BC,EAAAA,EAAAA,KAAA,UACEc,QAnEYtC,UACtB,GAAK4R,EAAcZ,OAAnB,CAKApR,GAAW,GACX,UAQQ,IAAIoO,SAAQsE,GAAW9F,WAAW8F,EAAS,OAEjDP,GAAa,GACb1B,EAAYpL,EAAE,sBAAuB,CAAEkM,aAAc,gCAAkC,UACzF,CAAE,MAAOtR,GAAa,IAAD0S,EAAAC,EACnBxR,QAAQnB,MAAM,mCAAoCA,GAClDwQ,GACgB,QAAdkC,EAAA1S,EAAMqB,gBAAQ,IAAAqR,GAAM,QAANC,EAAdD,EAAgB/R,YAAI,IAAAgS,OAAN,EAAdA,EAAsBrR,UAAW8D,EAAE,2BAA4B,CAAEkM,aAAc,oCAC/E,QAEJ,CAAC,QACCvR,GAAW,EACb,CAvBA,MAFEyQ,EAAYpL,EAAE,6BAA8B,CAAEkM,aAAc,6CAA+C,UAyB7G,EAyCU1O,SAAU9C,GAAWmS,EACrBxQ,UAAU,4IAA2IC,SAEpJ5B,GACC0B,EAAAA,EAAAA,MAAAkE,EAAAA,SAAA,CAAAhE,SAAA,EACEC,EAAAA,EAAAA,KAAC4G,EAAAA,EAAa,CAAC9G,UAAU,8BACxB2D,EAAE,iBAAkB,CAAEkM,aAAc,gBAErCW,GACFzQ,EAAAA,EAAAA,MAAAkE,EAAAA,SAAA,CAAAhE,SAAA,EACEC,EAAAA,EAAAA,KAAC6G,EAAAA,EAAS,CAAC/G,UAAU,iBACpB2D,EAAE,sBAAuB,CAAEkM,aAAc,kBAG5C9P,EAAAA,EAAAA,MAAAkE,EAAAA,SAAA,CAAAhE,SAAA,EACEC,EAAAA,EAAAA,KAACmQ,EAAiB,CAACrQ,UAAU,iBAC5B2D,EAAE,sBAAuB,CAAEkM,aAAc,+BAQpDS,IACApQ,EAAAA,EAAAA,KAAA,OAAKF,UAAU,4DAA2DC,SACvE0D,EAAE,uBAAwB,CAAEkM,aAAc,gFAG3C,ECwCV,EAzLgFpS,IAGzE,IAADgR,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,IAH2E,KAC/EC,EAAI,WACJqC,GACD1T,EACC,MAAM,EAAEkG,IAAMC,EAAAA,EAAAA,OACR,YAAEmL,IAAgBC,EAAAA,EAAAA,MACjBnC,EAAUuE,IAAepT,EAAAA,EAAAA,UAAS,CACvCqT,mBAAoB,GACpBC,SAAU,GACVC,iBAAkB,GAClBC,MAAO,MAEFnT,EAASC,IAAcN,EAAAA,EAAAA,WAAS,GAmBvC,MAhBkC,QAAVyQ,EAAAK,EAAKhO,aAAK,IAAA2N,OAAA,EAAVA,EAAYpP,SAAS,UACX,QADiBqP,EAC3BI,EAAKhO,aAAK,IAAA4N,OAAA,EAAVA,EAAYrP,SAAS,UACX,QADiBsP,EAC3BG,EAAKhO,aAAK,IAAA6N,OAAA,EAAVA,EAAYtP,SAAS,cACX,QADqBuP,EAC/BE,EAAKhO,aAAK,IAAA8N,OAAA,EAAVA,EAAYvP,SAAS,WACL,QADYwP,EAC5BC,EAAKhN,mBAAW,IAAA+M,OAAA,EAAhBA,EAAkBxP,SAAS,eAajD,OAAO,KAGT,MAAMoS,EAbwBC,MAAsB,IAADC,EAAAC,EAAAC,EAAAC,EACjD,OAAc,QAAdH,EAAI7C,EAAKhO,aAAK,IAAA6Q,GAAVA,EAAYtS,SAAS,OAAe,MAC1B,QAAduS,EAAI9C,EAAKhO,aAAK,IAAA8Q,GAAVA,EAAYvS,SAAS,OAAe,MAC1B,QAAdwS,EAAI/C,EAAKhO,aAAK,IAAA+Q,GAAVA,EAAYxS,SAAS,WAAmB,UAC9B,QAAdyS,EAAIhD,EAAKhO,aAAK,IAAAgR,GAAVA,EAAYzS,SAAS,QAAgB,OAClC,IAAI,EAQcqS,GAsE3B,OACE3R,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4FAA2FC,SAAA,EACxGC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,6CAA4CC,SACvD0D,EAAE,iCAAkC,CAAEkM,aAAc,gCAEvD9P,EAAAA,EAAAA,MAAA,QAAMgE,SA3DWrF,UACnB2B,EAAE8J,iBACF7L,GAAW,GAEX,IACE,MAAMyT,EAjBYC,MAEpB,GAAIlD,EAAKhN,YAAa,CACpB,MAAMmQ,EAAcnD,EAAKhN,YAAYsN,MAAM,sBAC3C,GAAI6C,EACF,OAAO1R,SAAS0R,EAAY,GAAI,GAEpC,CAEA,OAAOnD,EAAK5M,aAAa,EAQR8P,GACf,IAAKD,IAAWN,EAKd,YAJA1C,EACEpL,EAAE,wBAAyB,CAAEkM,aAAc,mDAC3C,eAMEjR,EAAAA,EAAcsT,IAClBpT,EAAAA,GAAcqT,UAAUC,gBAAgBL,EAAQN,GAChD,CACEnF,OAAQ,aACR+E,mBAAoBxE,EAASwE,mBAC7BC,SAAUzE,EAASyE,SACnBC,iBAAkB1E,EAAS0E,iBAC3BC,MAAO3E,EAAS2E,MAChBa,aAAa,IAAI5J,MAAOG,gBAI5BmG,EACEpL,EAAE,kCAAmC,CAAEkM,aAAc,wCACrD,WAIFuB,EAAY,CACVC,mBAAoB,GACpBC,SAAU,GACVC,iBAAkB,GAClBC,MAAO,KAGLL,GACFA,GAEJ,CAAE,MAAO5S,GAAa,IAADuS,EAAAC,EACnBrR,QAAQnB,MAAM,4CAA0CA,GACxDwQ,GACgB,QAAd+B,EAAAvS,EAAMqB,gBAAQ,IAAAkR,GAAM,QAANC,EAAdD,EAAgB5R,YAAI,IAAA6R,OAAN,EAAdA,EAAsBlR,UAAW8D,EAAE,8BAA+B,CAAEkM,aAAc,6CAClF,QAEJ,CAAC,QACCvR,GAAW,EACb,GAQgC0B,UAAU,YAAWC,SAAA,EACjDF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEF,EAAAA,EAAAA,MAAA,SAAOC,UAAU,kEAAiEC,SAAA,CAC/E0D,EAAE,+BAAgC,CAAEkM,aAAc,yBAA0B,SAE/E3P,EAAAA,EAAAA,KAAA,SACEa,KAAK,OACLZ,MAAO0M,EAASwE,mBAChBjR,SAAWC,GAAM+Q,GAAWkB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIzF,GAAQ,IAAEwE,mBAAoBhR,EAAEG,OAAOL,SACzEH,UAAU,+JACVmE,UAAQ,EACRM,YAAad,EAAE,0CAA2C,CAAEkM,aAAc,yBAG9E9P,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEF,EAAAA,EAAAA,MAAA,SAAOC,UAAU,kEAAiEC,SAAA,CAC/E0D,EAAE,qBAAsB,CAAEkM,aAAc,aAAc,SAEzD3P,EAAAA,EAAAA,KAAA,SACEa,KAAK,OACLZ,MAAO0M,EAASyE,SAChBlR,SAAWC,GAAM+Q,GAAWkB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIzF,GAAQ,IAAEyE,SAAUjR,EAAEG,OAAOL,SAC/DH,UAAU,+JACVmE,UAAQ,EACRM,YAAad,EAAE,gCAAiC,CAAEkM,aAAc,qCAGpE9P,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEF,EAAAA,EAAAA,MAAA,SAAOC,UAAU,kEAAiEC,SAAA,CAC/E0D,EAAE,6BAA8B,CAAEkM,aAAc,iBAAkB,SAErE3P,EAAAA,EAAAA,KAAA,SACEa,KAAK,OACLZ,MAAO0M,EAAS0E,iBAChBnR,SAAWC,GAAM+Q,GAAWkB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIzF,GAAQ,IAAE0E,iBAAkBlR,EAAEG,OAAOL,SACvEH,UAAU,+JACVmE,UAAQ,QAGZpE,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,SAAOF,UAAU,kEAAiEC,SAC/E0D,EAAE,kBAAmB,CAAEkM,aAAc,eAExC3P,EAAAA,EAAAA,KAAA,YACEC,MAAO0M,EAAS2E,MAChBpR,SAAWC,GAAM+Q,GAAWkB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIzF,GAAQ,IAAE2E,MAAOnR,EAAEG,OAAOL,SAC5DH,UAAU,+JACVqE,KAAM,EACNI,YAAad,EAAE,6BAA8B,CAAEkM,aAAc,0CAGjE3P,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mBAAkBC,UAC/BC,EAAAA,EAAAA,KAAA,UACEa,KAAK,SACLI,SAAU9C,EACV2B,UAAU,4IAA2IC,SAEpJ5B,GACC0B,EAAAA,EAAAA,MAAAkE,EAAAA,SAAA,CAAAhE,SAAA,EACEC,EAAAA,EAAAA,KAAC4G,EAAAA,EAAa,CAAC9G,UAAU,8BACxB2D,EAAE,gBAAiB,CAAEkM,aAAc,qBAGtC9P,EAAAA,EAAAA,MAAAkE,EAAAA,SAAA,CAAAhE,SAAA,EACEC,EAAAA,EAAAA,KAAC6G,EAAAA,EAAS,CAAC/G,UAAU,iBACpB2D,EAAE,qBAAsB,CAAEkM,aAAc,+BAM/C,ECq/BV,EAzmCoDpS,IAA+C,IAAD8U,EAAAC,EAAA,IAA7C,OAAExL,EAAM,QAAEC,EAAO,cAAEwL,EAAa,KAAE3D,GAAMrR,EACzF,MAAM,EAAEkG,IAAMC,EAAAA,EAAAA,OACR,cAAE8O,IAAkBC,EAAAA,EAAAA,MACpB,KAAErM,IAASa,EAAAA,EAAAA,OACX,aAAEC,EAAY,cAAEC,IAAkBC,EAAAA,EAAAA,MACjCC,EAAeC,IAAoBxJ,EAAAA,EAAAA,UAASyJ,OAAOC,WAAa,OAShE5G,EAAOe,IAAY7D,EAAAA,EAAAA,UAAS8Q,EAAKhO,OAAS,KAC1CgB,EAAaC,IAAkB/D,EAAAA,EAAAA,WAPT4U,EAOsC9D,EAAKhN,aAAe,IAJ5E8Q,EAAK/G,QAAQ,0BAA2B,IAAI6D,OAFjC,IADOkD,MAS7B,MAAMC,EAAsB/D,EAAKhN,aAAe,IACzCwK,EAAQwG,IAAa9U,EAAAA,EAAAA,UAAS8Q,EAAKxC,QAAU,SAC7CtK,EAAcC,IAAmBjE,EAAAA,EAAAA,UAA0B8Q,EAAK1M,OAAS,OAAS,SAClFF,EAAeC,IAAoBnE,EAAAA,EAAAA,UAAwB8Q,EAAK5M,eAAiB,OACjFE,EAAQC,IAAarE,EAAAA,EAAAA,UAAwB8Q,EAAK1M,QAAU,OAC5DE,EAAkBC,IAAuBvE,EAAAA,EAAAA,WAA2C,QAAnBuU,EAAAzD,EAAK3C,sBAAc,IAAAoG,OAAA,EAAnBA,EAAqBjT,KAAM,OAC5FkD,EAAUC,IAAezE,EAAAA,EAAAA,WAA4B,QAAXwU,EAAA1D,EAAKpI,cAAM,IAAA8L,OAAA,EAAXA,EAAalT,KAAM,IAC7DyT,EAAaC,IAAkBhV,EAAAA,EAAAA,UAA2B8Q,EAAKiE,aAAe,KAC9E5P,EAAsB8E,IAA2BjK,EAAAA,EAAAA,UAA2B,KAC5EkF,EAAWgF,KAAgBlK,EAAAA,EAAAA,WAAS,IAEpCiV,GAAoBC,KAAyBlV,EAAAA,EAAAA,UAAmB,IACjEuF,IAAe4E,EAAAA,EAAAA,QAAyB,MACxC7E,IAAc6E,EAAAA,EAAAA,QAA4B,OAczCzF,GAASC,KAAc3E,EAAAA,EAAAA,UAXVmV,KAChB,IAAKA,EAAY,OAAO,KAGxB,MAAM3K,EAAO,IAAIC,KAAK0K,GACtB,OAAI1S,MAAM+H,EAAK4K,WAAmB,KAG3B5K,EAAKI,cAAcC,MAAM,KAAK,EAAE,EAGWwK,CAAWvE,EAAKpM,WAC/DE,GAAO+E,KAAY3J,EAAAA,EAAAA,UAAiB,KACpC6E,GAAO+E,KAAY5J,EAAAA,EAAAA,UAAiB,KACpC8E,GAAU+E,KAAe7J,EAAAA,EAAAA,UAAmB,KAC5CO,GAAOC,KAAYR,EAAAA,EAAAA,UAAwB,OAC3CK,GAASC,KAAcN,EAAAA,EAAAA,WAAS,IAChCsV,GAAeC,KAAoBvV,EAAAA,EAAAA,WAAS,IAC5C8J,GAAUC,KAAe/J,EAAAA,EAAAA,UAASyJ,OAAOC,WAAa,MACtD8L,GAAgBC,KAAqBzV,EAAAA,EAAAA,UAA2B,KAChE6F,GAAWC,KAAgB9F,EAAAA,EAAAA,UAA6B,QAEzD0V,GAAgBhB,EAAc,QAAS,OAAQ,UAGrDjU,EAAAA,EAAAA,YAAU,KACN,MAAMkV,EAAeA,KACjB5L,GAAYN,OAAOC,WAAa,KAChCF,EAAiBC,OAAOC,WAAa,KAAK,EAG9C,OADAD,OAAOsB,iBAAiB,SAAU4K,GAC3B,IAAMlM,OAAOuB,oBAAoB,SAAU2K,EAAa,GAChE,KAGHlV,EAAAA,EAAAA,YAAU,KACN,IAAKuI,GAAUiM,GAAmB3R,OAAS,EAAG,CAE1B5C,WACZ,IAAK,MAAMkV,KAAgBX,GACvB,UACUrU,EAAAA,EAAciV,OAAO/U,EAAAA,GAAc0N,MAAMsH,WAAWhF,EAAKxP,GAAIsU,IACnElU,QAAQyJ,IAAI,mBAAD3H,OAAoBoS,EAAY,mDAC/C,CAAE,MAAOrU,GACLG,QAAQnB,MAAM,8CAADiD,OAA4CoS,EAAY,KAAKrU,EAC9E,CAEJ2T,GAAsB,GAAG,EAE7Ba,EACJ,IACD,CAAC/M,EAAQiM,GAAoBnE,EAAKxP,MAGrCb,EAAAA,EAAAA,YAAU,KACFuI,EACAI,IAEAC,IAGG,KACHA,GAAe,IAEpB,CAACL,EAAQI,EAAcC,KAE1B5I,EAAAA,EAAAA,YAAU,KACFuI,IACAoB,KACAC,KACAC,KACA0L,KACAC,KACJ,GACD,CAACjN,EAAQ8H,EAAKxP,KAEjB,MAAM8I,GAAa1J,UACf,IACIF,GAAS,MAET,IADcyK,aAAaC,QAAQ,SAG/B,YADA1K,GAAS,yBAIb,MAAMoB,QAAiBhB,EAAAA,EAAcC,IAAIC,EAAAA,GAAcsK,MAAMC,UAC7D1B,GAAS/H,EAASV,MAAQ,GAC9B,CAAE,MAAOK,GACLG,QAAQnB,MAAM,kCAAmCgB,GAGjD,MAAMI,EAAaJ,EAGX,IAADC,EAAAC,EAFP,GAAwB,gBAApBE,EAAW2J,KACX9K,GAASmF,EAAE,+CAEXnF,GAAS,GAADgD,OAAImC,EAAE,wCAAuC,MAAAnC,QAAwB,QAAnBhC,EAAAG,EAAWC,gBAAQ,IAAAJ,GAAM,QAANC,EAAnBD,EAAqBN,YAAI,IAAAO,OAAN,EAAnBA,EAA2BI,UAAWF,EAAWE,SAEnH,GAGEwI,GAAa3J,UACf,IACIF,GAAS,MAET,IADcyK,aAAaC,QAAQ,SAG/B,YADA1K,GAAS,yBAIb,MAAMoB,QAAiBhB,EAAAA,EAAcC,IAAIC,EAAAA,GAAcyK,MAAMtK,MAC7D2I,GAAShI,EAASV,MAAQ,GAC9B,CAAE,MAAOK,GACLG,QAAQnB,MAAM,gCAAiCgB,GAG/C,MAAMI,EAAaJ,EAGX,IAADiK,EAAAC,EAFP,GAAwB,gBAApB9J,EAAW2J,KACX9K,GAASmF,EAAE,+CAEXnF,GAAS,GAADgD,OAAImC,EAAE,wCAAuC,MAAAnC,QAAwB,QAAnBgI,EAAA7J,EAAWC,gBAAQ,IAAA4J,GAAM,QAANC,EAAnBD,EAAqBtK,YAAI,IAAAuK,OAAN,EAAnBA,EAA2B5J,UAAWF,EAAWE,SAEnH,GAGEyI,GAAgB5J,UAClB,IACIF,GAAS,MAET,IADcyK,aAAaC,QAAQ,SAG/B,YADA1K,GAAS,yBAIb,MAAMoB,QAAiBhB,EAAAA,EAAcC,IAAIC,EAAAA,GAAc4K,SAASzK,MAChE4I,GAAYjI,EAASV,MAAQ,GACjC,CAAE,MAAOK,GACLG,QAAQnB,MAAM,yCAA0CgB,GAGxD,MAAMI,EAAaJ,EAGX,IAADoK,EAAAC,EAFP,GAAwB,gBAApBjK,EAAW2J,KACX9K,GAASmF,EAAE,+CAEXnF,GAAS,GAADgD,OAAImC,EAAE,2CAA0C,MAAAnC,QAAwB,QAAnBmI,EAAAhK,EAAWC,gBAAQ,IAAA+J,GAAM,QAANC,EAAnBD,EAAqBzK,YAAI,IAAA0K,OAAN,EAAnBA,EAA2B/J,UAAWF,EAAWE,SAEtH,GAGEmU,GAAsBtV,UACxB,IACIF,GAAS,MACT,MAAMoB,QAAiBhB,EAAAA,EAAcC,IAAIC,EAAAA,GAAc0N,MAAM0H,UAAUpF,EAAKxP,KAC5EmU,GAAkB7T,EAASV,MAAQ,GACvC,CAAE,MAAOK,GAAM,IAAD+L,EAAAC,EACV7L,QAAQnB,MAAM,gDAA8CgB,GAG5D,MAAMI,EAAaJ,EACnBf,IAA4B,QAAnB8M,EAAA3L,EAAWC,gBAAQ,IAAA0L,GAAM,QAANC,EAAnBD,EAAqBpM,YAAI,IAAAqM,OAAN,EAAnBA,EAA2B1L,UAAWF,EAAWE,SAAW,0CACzE,GAGEoU,GAAmBvV,UACrB,IACIF,GAAS,MACT,MAAMoB,QAAiBhB,EAAAA,EAAcC,IAAIC,EAAAA,GAAc0N,MAAMQ,YAAY8B,EAAKxP,KAC9E0T,EAAepT,EAASV,MAAQ,GACpC,CAAE,MAAOK,GAAM,IAAD6N,EAAAC,EACV3N,QAAQnB,MAAM,oCAAkCgB,GAGhD,MAAMI,EAAaJ,EACnBf,IAA4B,QAAnB4O,EAAAzN,EAAWC,gBAAQ,IAAAwN,GAAM,QAANC,EAAnBD,EAAqBlO,YAAI,IAAAmO,OAAN,EAAnBA,EAA2BxN,UAAWF,EAAWE,SAAW,2CACrEmT,EAAe,GACnB,GAGExP,GAAc9E,UAChB,MAAMmL,EAAQC,EAAMC,cAAcF,MAElC,IAAK,IAAIG,EAAI,EAAGA,EAAIH,EAAMvI,OAAQ0I,IAAK,CACnC,MAAMC,EAAOJ,EAAMG,GAGnB,GAAmC,IAA/BC,EAAKlJ,KAAKmJ,QAAQ,SAAgB,CAClCJ,EAAMK,iBAEN,MAAMzE,EAAOuE,EAAKG,YAIlB,YAHI1E,SACMyO,GAAwBzO,GAGtC,CACJ,GAGEjC,GAAa/E,UAIf,GAHAoL,EAAMK,iBACNL,EAAMQ,kBAEFR,EAAMS,aAAaC,OAASV,EAAMS,aAAaC,MAAMlJ,OAAS,EAAG,CACjE,MAAMoE,EAAOoE,EAAMS,aAAaC,MAAM,SAChC2J,GAAwBzO,EAClC,GAGEhC,GAAkBoG,IACpBA,EAAMK,iBACNL,EAAMQ,iBAAiB,EAGrB6J,GAA0BzV,UAC5BwJ,IAAa,GACb1J,GAAS,MAET,IACI,MAAMqO,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQrH,GAExB,MAUM+E,SAViB7L,EAAAA,EAAc2N,KACjCzN,EAAAA,GAAc0N,MAAMQ,YAAY8B,EAAKxP,IACrCuN,EACA,CACIK,QAAS,CACL,eAAgB,0BAKGhO,KAO/B,GANA8T,EAAe,IAAID,EAAatI,IAEhCyI,IAAsBtI,GAAQ,IAAIA,EAAMH,EAAcnL,OAIjDmL,EAAcjF,SAASC,WAAW,UAAW,CAC9C,MAAMoF,EAAU,MAAArJ,OAASiJ,EAAclF,SAAQ,MAAA/D,QAAK4S,EAAAA,EAAAA,IAAqBtF,EAAKxP,GAAImL,EAAcnL,IAAG,OAGnG,GAAIgE,GAAYqB,QAAS,CACrB,MAAMmG,EAAYxH,GAAYqB,QAAQoG,eAChCC,EAAalJ,EAAYT,UAAU,EAAGyJ,GACtCG,EAAYnJ,EAAYT,UAAUyJ,GAExC/I,EAAeiJ,EAAaH,EAAaI,GAGzCC,YAAW,KACP,GAAI5H,GAAYqB,QAAS,CACrB,MAAMwG,EAASL,EAAYD,EAAWvJ,OACtCgC,GAAYqB,QAAQoG,eAAiBI,EACrC7H,GAAYqB,QAAQyG,aAAeD,EACnC7H,GAAYqB,QAAQ0G,OACxB,IACD,EACP,MACItJ,EAAeD,EAAc+I,EAErC,CACJ,CAAE,MAAOtL,GAAM,IAAD8U,EAAAC,EACV5U,QAAQnB,MAAM,qCAAsCgB,GAEpD,MAAMI,EAAaJ,EACnBf,IAA4B,QAAnB6V,EAAA1U,EAAWC,gBAAQ,IAAAyU,GAAM,QAANC,EAAnBD,EAAqBnV,YAAI,IAAAoV,OAAN,EAAnBA,EAA2BzU,UAAWF,EAAWE,SAAW,0CACzE,CAAC,QACGqI,IAAa,EACjB,GAGEsD,GAAmB9M,UACrB,MAAM8L,EAAQV,EAAMtJ,OAAOgK,MAC3B,IAAKA,GAA0B,IAAjBA,EAAMlJ,OAAc,OAElC,MAAMoE,EAAO8E,EAAM,SACb2J,GAAwBzO,GAG1BnC,GAAaoB,UACbpB,GAAaoB,QAAQxE,MAAQ,GACjC,EAGE4C,GAAerE,UACjB2B,EAAE8J,iBACF3L,GAAS,MACTF,IAAW,GAEX,IAEI,IAAKwC,IAAUwL,IAAW9J,EAGtB,OAFAhE,GAASmF,EAAE,6CACXrF,IAAW,GAKf,GAAqB,SAAjB0D,IAA4BE,EAG5B,OAFA1D,GAASmF,EAAE,wCACXrF,IAAW,GAIf,GAAqB,SAAjB0D,IAA4BI,EAG5B,OAFA5D,GAASmF,EAAE,wCACXrF,IAAW,GAMf,IAAIiW,EAAmBzS,GAAe,GACtC,MAAM0S,EAAmBzB,EAAY5T,QAAOsV,IAAG,IAAAC,EAAA,OAAgB,QAAZA,EAAAD,EAAIjP,gBAAQ,IAAAkP,OAAA,EAAZA,EAAcjP,WAAW,YAAagP,EAAInV,EAAE,IAGzFqV,EAAuB,0BACvBC,EAA2B,GACjC,IAAIxF,EACJ,GAAIyD,EACA,KAAoE,QAA5DzD,EAAQuF,EAAqBE,KAAKhC,KACtC+B,EAAeE,KAAK1F,EAAM,IAKlC,IAAK,MAAM/J,KAAcmP,EAAkB,CACvC,MAAMO,GAAWX,EAAAA,EAAAA,IAAqBtF,EAAKxP,GAAI+F,EAAW/F,IACpD0V,EAAa,KAAAxT,OAAQ6D,EAAWE,SAAQ,MAAA/D,OAAKuT,EAAQ,KAGrDnJ,EAAkBvG,EAAWE,SAASsG,QAAQ,sBAAuB,QACtD,IAAIG,OAAO,OAADxK,OAAQoK,EAAe,kBAAkB,KAEtDqJ,KAAKV,KAEnBA,EAAmBA,EAAgB,GAAA/S,OAAM+S,EAAgB,MAAA/S,OAAKwT,GAAkBA,EAExF,CAGA,IAAK,MAAME,KAAiBN,EACnBL,EAAiBlV,SAAS6V,KAC3BX,EAAmBA,EAAgB,GAAA/S,OAAM+S,EAAgB,MAAA/S,OAAK0T,GAAkBA,GAKxF,MAAM7I,EAAgB,CAClBvL,QACAgB,YAAayS,EACbjI,SACAhK,mBACAE,WACAE,YAIiB,SAAjBV,GACAqK,EAASnK,cAAgBA,EACzBmK,EAASjK,OAAS,MACM,SAAjBJ,IACPqK,EAASjK,OAASA,EAClBiK,EAASnK,cAAgB,MAG7B,MAAMtC,QAAiBhB,EAAAA,EAAcsT,IAAI,GAAD1Q,OAAI1C,EAAAA,GAAc0N,MAAMvN,KAAI,KAAAuC,OAAIsN,EAAKxP,IAAM+M,GAEnF3M,QAAQyJ,IAAI,qBAAsBvJ,EAASV,MAG3C,MAAMiW,QAA4BvW,EAAAA,EAAcC,IAAIC,EAAAA,GAAc0N,MAAM7L,MAAMmO,EAAKxP,KAI/E6V,EAAoBjW,KAAK6T,YACzBoC,EAAoBjW,KAAK6T,YAAcoC,EAAoBjW,KAAK6T,YAAYlS,KAAK4T,IAAQ,CACrFnV,GAAImV,EAAInV,GACRiG,SAAUkP,EAAIlP,SACdC,SAAUiP,EAAIjP,SACdkF,SAAU+J,EAAI/J,SACd0K,SAAUX,EAAIW,SACdC,WAAYZ,EAAIY,WAChBC,KAAKlB,EAAAA,EAAAA,IAAqBtF,EAAKxP,GAAImV,EAAInV,QAG3C6V,EAAoBjW,KAAK6T,YAAc,GAK3CG,GAAsB,IACtBT,EAAc0C,EAAoBjW,MAClC+H,GACJ,CAAE,MAAO1H,GAAM,IAADgW,EAAAC,EACV9V,QAAQnB,MAAM,uCAAwCgB,GAGtD,MAAMI,EAAaJ,EACnBf,IAA4B,QAAnB+W,EAAA5V,EAAWC,gBAAQ,IAAA2V,GAAM,QAANC,EAAnBD,EAAqBrW,YAAI,IAAAsW,OAAN,EAAnBA,EAA2B3V,UAAWF,EAAWE,SAAW,0CACzE,CAAC,QACGvB,IAAW,EACf,GAGEmX,GAAe/W,UACjB,GAAK4U,GAKL,IAEI,IADcrK,aAAaC,QAAQ,SAG/B,YADA1K,GAAS,+BAIPI,EAAAA,EAAciV,OAAO/U,EAAAA,GAAc0N,MAAM7L,MAAMmO,EAAKxP,KAG1DmT,OAAciD,GACdzO,GACJ,CAAE,MAAO1H,GAAM,IAADoW,EAAAC,EACVlW,QAAQnB,MAAM,gBAAiBgB,GAG/B,MAAMI,EAAaJ,EACnBf,IAA4B,QAAnBmX,EAAAhW,EAAWC,gBAAQ,IAAA+V,GAAM,QAANC,EAAnBD,EAAqBzW,YAAI,IAAA0W,OAAN,EAAnBA,EAA2B/V,UAAWF,EAAWE,SAAW,0CACzE,MAtBI0T,IAAiB,EAsBrB,EAGEjG,GAAmB5O,UACrB,IACIF,GAAS,YAEHI,EAAAA,EAAc2N,KAChBzN,EAAAA,GAAc0N,MAAMI,cAAckC,EAAKxP,GAAIF,EAAQE,KAGvDmU,IAAkB7I,GAAQ,IAAIA,EAAMxL,IACxC,CAAE,MAAOG,GAAM,IAADsW,EAAAC,EACVpW,QAAQnB,MAAM,0CAAwCgB,GAGtD,MAAMI,EAAaJ,EACnBf,IAA4B,QAAnBqX,EAAAlW,EAAWC,gBAAQ,IAAAiW,GAAM,QAANC,EAAnBD,EAAqB3W,YAAI,IAAA4W,OAAN,EAAnBA,EAA2BjW,UAAWF,EAAWE,SAAW,0CACzE,GAGE0N,GAAsB7O,UACxB,IACIF,GAAS,YAEHI,EAAAA,EAAciV,OAChB/U,EAAAA,GAAc0N,MAAMuJ,gBAAgBjH,EAAKxP,GAAIgB,IAGjDmT,IAAkB7I,GAAQA,EAAKzL,QAAOyH,GAAKA,EAAEtH,KAAOgB,KACxD,CAAE,MAAOf,GAAM,IAADyW,EAAAC,EACVvW,QAAQnB,MAAM,mDAAiDgB,GAG/D,MAAMI,EAAaJ,EACnBf,IAA4B,QAAnBwX,EAAArW,EAAWC,gBAAQ,IAAAoW,GAAM,QAANC,EAAnBD,EAAqB9W,YAAI,IAAA+W,OAAN,EAAnBA,EAA2BpW,UAAWF,EAAWE,SAAW,0CACzE,GAiGEqW,GAAaA,KAAA,IAAAzH,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OACf9O,EAAAA,EAAAA,MAAA,QAAMgE,SAAUhB,GAAc/C,UAAU,YAAWC,SAAA,EAE/CC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,gDAA+CC,UAC1DF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wBAAwB,aAAW,OAAMC,SAAA,EACpDC,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLf,UAAS,GAAAwB,OACS,SAAdqC,GACM,mDACA,oJAAmJ,+DAE7J7C,QAASA,IAAM8C,GAAa,QAAQ7D,SAEnC0D,EAAE,+BAEPzD,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLf,UAAS,GAAAwB,OACS,YAAdqC,GACM,mDACA,oJAAmJ,+DAE7J7C,QAASA,IAAM8C,GAAa,WAAW7D,SAEtC0D,EAAE,sCAMA,SAAdE,KACG9D,EAAAA,EAAAA,MAAAkE,EAAAA,SAAA,CAAAhE,SAAA,EACIF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIC,EAAAA,EAAAA,KAAA,SAAOgE,QAAQ,QAAQlE,UAAU,6DAA4DC,SACxF0D,EAAE,gCAEPzD,EAAAA,EAAAA,KAAA,SACIa,KAAK,OACLzB,GAAG,QACHa,MAAOW,EACPV,SAAWC,GAAMwB,EAASxB,EAAEG,OAAOL,OACnCH,UAAU,gMACVmE,UAAQ,QAIhBpE,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIC,EAAAA,EAAAA,KAAA,SAAOgE,QAAQ,mBAAmBlE,UAAU,6DAA4DC,SACnG0D,EAAE,sCAEP5D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,WAAUC,SAAA,EACrBC,EAAAA,EAAAA,KAAA,YACIkE,IAAKd,GACLhE,GAAG,mBACH+E,KAAM,EACNrE,UAAU,yJACVG,MAAO2B,EACP1B,SAAWC,GAAM0B,EAAe1B,EAAEG,OAAOL,OACzCmE,QAASd,GACTe,OAAQd,GACRe,WAAYd,GACZe,YAAad,EAAE,iDAEnBzD,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLC,QAASA,KAAA,IAAA0D,EAAA,OAA0B,QAA1BA,EAAMnB,GAAaoB,eAAO,IAAAD,OAAA,EAApBA,EAAsBE,OAAO,EAC5C5E,UAAU,4HACVc,MAAO6C,EAAE,kCAAkC1D,UAE3CC,EAAAA,EAAAA,KAAA,OAAK2E,MAAM,6BAA6B7E,UAAU,UAAU8E,KAAK,OAAOC,QAAQ,YAAYC,OAAO,eAAc/E,UAC7GC,EAAAA,EAAAA,KAAA,QAAM+E,cAAc,QAAQC,eAAe,QAAQC,YAAa,EAAGC,EAAE,8HAG7ElF,EAAAA,EAAAA,KAAA,SACIkE,IAAKb,GACLxC,KAAK,OACLX,SAAUoL,GACVxL,UAAU,WAEbkD,IACGhD,EAAAA,EAAAA,KAAA,OAAKF,UAAU,+GAA8GC,UACzHC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,2CAA0CC,SAAE0D,EAAE,wCAIzEwS,KACAC,SAILrW,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIC,EAAAA,EAAAA,KAAA,SAAOgE,QAAQ,SAASlE,UAAU,6DAA4DC,SACzF0D,EAAE,iCAEP5D,EAAAA,EAAAA,MAAA,UACIT,GAAG,SACHa,MAAOmM,EACPlM,SAAWC,GAAMyS,EAAUzS,EAAEG,OAAOL,OACpCH,UAAU,gMAA+LC,SAAA,EAEzMC,EAAAA,EAAAA,KAAA,UAAQC,MAAM,OAAMF,SAAE0D,EAAE,wBACxBzD,EAAAA,EAAAA,KAAA,UAAQC,MAAM,cAAaF,SAAE0D,EAAE,+BAC/BzD,EAAAA,EAAAA,KAAA,UAAQC,MAAM,WAAUF,SAAE0D,EAAE,4BAC5BzD,EAAAA,EAAAA,KAAA,UAAQC,MAAM,kBAAiBF,SAAE0D,EAAE,mCACnCzD,EAAAA,EAAAA,KAAA,UAAQC,MAAM,OAAMF,SAAE0D,EAAE,8BAIhC5D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EACtBF,EAAAA,EAAAA,MAAA,SAAOC,UAAU,6DAA4DC,SAAA,CACxE0D,EAAE,sCAAsC,SAE7C5D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC3BF,EAAAA,EAAAA,MAAA,SAAOC,UAAU,2BAA0BC,SAAA,EACvCC,EAAAA,EAAAA,KAAA,SACIa,KAAK,QACLf,UAAU,iEACViG,KAAK,eACL9F,MAAM,OACN+F,QAA0B,SAAjBlE,EACT5B,SAAUA,KACN6B,EAAgB,QAChBI,EAAU,KAAK,KAGvBnC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,0BAAyBC,SAAE0D,EAAE,kCAEjD5D,EAAAA,EAAAA,MAAA,SAAOC,UAAU,2BAA0BC,SAAA,EACvCC,EAAAA,EAAAA,KAAA,SACIa,KAAK,QACLf,UAAU,iEACViG,KAAK,eACL9F,MAAM,OACN+F,QAA0B,SAAjBlE,EACT5B,SAAUA,KACN6B,EAAgB,QAChBE,EAAiB,KAAK,KAG9BjC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,0BAAyBC,SAAE0D,EAAE,uCAKvC,SAAjB3B,GACGjC,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIF,EAAAA,EAAAA,MAAA,SAAOmE,QAAQ,cAAclE,UAAU,6DAA4DC,SAAA,CAC9F0D,EAAE,uCAAuC,SAE9C5D,EAAAA,EAAAA,MAAA,UACIT,GAAG,cACHa,MAAyB,OAAlB+B,EAAyB,GAAKA,EACrC9B,SAAWC,GAAM8B,EAAiB9B,EAAEG,OAAOL,MAAQgG,OAAO9F,EAAEG,OAAOL,OAAS,MAC5EH,UAAU,gMACVmE,SAA2B,SAAjBnC,EAAwB/B,SAAA,EAElCC,EAAAA,EAAAA,KAAA,UAAQC,MAAM,GAAEF,SAAE0D,EAAE,sCACnByC,MAAMC,QAAQzD,KAAUA,GAAM/B,KAAIyF,IAC/BvG,EAAAA,EAAAA,MAAA,UAAsBI,MAAOmG,EAAKhH,GAAGW,SAAA,CAChCqG,EAAKC,UAAU,IAAED,EAAKE,WADdF,EAAKhH,aAO9BS,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIF,EAAAA,EAAAA,MAAA,SAAOmE,QAAQ,OAAOlE,UAAU,6DAA4DC,SAAA,CACvF0D,EAAE,uCAAuC,SAE9C5D,EAAAA,EAAAA,MAAA,UACIT,GAAG,OACHa,MAAkB,OAAXiC,EAAkB,GAAKA,EAC9BhC,SAAWC,GAAMgC,EAAUhC,EAAEG,OAAOL,MAAQgG,OAAO9F,EAAEG,OAAOL,OAAS,MACrEH,UAAU,gMACVmE,SAA2B,SAAjBnC,EAAwB/B,SAAA,EAElCC,EAAAA,EAAAA,KAAA,UAAQC,MAAM,GAAEF,SAAE0D,EAAE,sCACnByC,MAAMC,QAAQxD,KAAUA,GAAMhC,KAAI4F,IAC/BvG,EAAAA,EAAAA,KAAA,UAAsBC,MAAOsG,EAAKnH,GAAGW,SAChCwG,EAAKR,MADGQ,EAAKnH,aAQlCS,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIC,EAAAA,EAAAA,KAAA,SAAOgE,QAAQ,iBAAiBlE,UAAU,6DAA4DC,SACjG0D,EAAE,yCAEP5D,EAAAA,EAAAA,MAAA,UACIT,GAAG,iBACHa,MAA4B,OAArBmC,EAA4B,GAAKA,EACxClC,SAAWC,GAAMkC,EAAoBlC,EAAEG,OAAOL,MAAQgG,OAAO9F,EAAEG,OAAOL,OAAS,MAC/EH,UAAU,gMAA+LC,SAAA,EAEzMC,EAAAA,EAAAA,KAAA,UAAQC,MAAM,GAAEF,SAAE0D,EAAE,0CACnByC,MAAMC,QAAQzD,KAAUA,GAAM/B,KAAIyF,IAC/BvG,EAAAA,EAAAA,MAAA,UAAsBI,MAAOmG,EAAKhH,GAAGW,SAAA,CAChCqG,EAAKC,UAAU,IAAED,EAAKE,WADdF,EAAKhH,aAO9BS,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIC,EAAAA,EAAAA,KAAA,SAAOgE,QAAQ,SAASlE,UAAU,6DAA4DC,SACzF0D,EAAE,iCAEP5D,EAAAA,EAAAA,MAAA,UACIT,GAAG,SACHa,MAAoB,IAAbqC,EAAiB,GAAKA,EAC7BpC,SAAWC,GAAMoC,EAAYpC,EAAEG,OAAOL,MAAQgG,OAAO9F,EAAEG,OAAOL,OAAS,GACvEH,UAAU,gMACVmE,UAAQ,EAAAlE,SAAA,EAERC,EAAAA,EAAAA,KAAA,UAAQC,MAAM,GAAEF,SAAE0D,EAAE,yBACnByC,MAAMC,QAAQvD,KAAaA,GAASjC,KAAI6F,IACrCxG,EAAAA,EAAAA,KAAA,UAAwBC,MAAOuG,EAAOpH,GAAGW,SACpCyG,EAAOT,MADCS,EAAOpH,aAOhCS,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIC,EAAAA,EAAAA,KAAA,SAAOgE,QAAQ,UAAUlE,UAAU,6DAA4DC,SAC1F0D,EAAE,kCAEPzD,EAAAA,EAAAA,KAAA,SACIa,KAAK,OACLzB,GAAG,UACHa,MAAOuC,IAAW,GAClBtC,SAAWC,IAEFA,EAAEG,OAAOL,MAIVwC,GAAWtC,EAAEG,OAAOL,OAHpBwC,GAAW,KAIf,EAEJ3C,UAAU,wMAOX,YAAd6D,KACG9D,EAAAA,EAAAA,MAAA,OAAAE,SAAA,CACKuT,GAAelS,OAAS,IACrBvB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMC,SAAA,EACjBC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,4DAA2DC,SAAE0D,EAAE,gDAC7EzD,EAAAA,EAAAA,KAAA,MAAIF,UAAU,YAAWC,SACpBuT,GAAe3S,KAAIzB,IAChBW,EAAAA,EAAAA,MAAA,MAAqBC,UAAU,4EAA2EC,SAAA,EACtGC,EAAAA,EAAAA,KAAA,KACIqB,KAAI,qBAAAC,OAAuBpC,EAAQqC,MACnCjB,OAAO,SACPkB,IAAI,sBACJ1B,UAAU,4EAA2EC,SAEpFb,EAAQ0B,SAEbZ,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLC,QAASA,IAAMuM,GAAoBnO,EAAQE,IAC3CU,UAAU,4EAA2EC,SAEpF0D,EAAE,kCAdFvE,EAAQE,YAsBjCY,EAAAA,EAAAA,KAACyG,EAAsB,CACnBjJ,kBAAmB4P,GACnB3P,kBAAmB6V,GAAe3S,KAAI+F,GAAKA,EAAEtH,KAC7C1B,iBAAkB4V,GAClB3V,gBAAiB0P,QAMd,SAAd1J,MAAmC,QAAV4K,EAAAK,EAAKhO,aAAK,IAAA2N,OAAA,EAAVA,EAAYpP,SAAS,UACX,QADiBqP,EAC3BI,EAAKhO,aAAK,IAAA4N,OAAA,EAAVA,EAAYrP,SAAS,UACX,QADiBsP,EAC3BG,EAAKhO,aAAK,IAAA6N,OAAA,EAAVA,EAAYtP,SAAS,cACX,QADqBuP,EAC/BE,EAAKhO,aAAK,IAAA8N,OAAA,EAAVA,EAAYvP,SAAS,WACL,QADYwP,EAC5BC,EAAKhN,mBAAW,IAAA+M,OAAA,EAAhBA,EAAkBxP,SAAS,iBACjDU,EAAAA,EAAAA,MAAAkE,EAAAA,SAAA,CAAAhE,SAAA,EACIC,EAAAA,EAAAA,KAACmW,EAAW,CAACvH,KAAMA,KACnB5O,EAAAA,EAAAA,KAACoW,EAAgB,CAACxH,KAAMA,KACxB5O,EAAAA,EAAAA,KAACqW,EAA2B,CACxBzH,KAAMA,EACNqC,WAAYA,KAGJ,QAOpBpR,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4BAA2BC,SAAA,CACrCyT,KACGxT,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLC,QAASyU,GACTzV,UAAS,kBAAAwB,OACL8R,GACM,+FACA,6EAEVxS,MAAuB6C,EAAhB2P,GAAkB,oCAAyC,8BAA8BrT,SAE/FqT,IACGpT,EAAAA,EAAAA,KAAC6G,EAAAA,EAAS,CAAC/G,UAAU,aAErBE,EAAAA,EAAAA,KAACsW,EAAAA,EAAS,CAACxW,UAAU,eAIjCD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYC,SAAA,EACvBC,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLC,QAASiG,EACTjH,UAAU,uJACVc,MAAO6C,EAAE,8BAA8B1D,UAEvCC,EAAAA,EAAAA,KAAC2G,EAAAA,EAAS,CAAC7G,UAAU,eAEzBE,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLf,UAAU,4OACVc,MAAiB6C,EAAVtF,GAAY,6BAAkC,4BACrD8C,SAAU9C,GAAQ4B,SAEjB5B,IACG6B,EAAAA,EAAAA,KAAC4G,EAAAA,EAAa,CAAC9G,UAAU,0BAEzBE,EAAAA,EAAAA,KAAC6G,EAAAA,EAAS,CAAC/G,UAAU,sBAKlC,EAGLmW,GAAoBA,IACK,IAAvBpD,EAAYzR,OAAqB,MAGjCpB,EAAAA,EAAAA,KAAA,OAAKF,UAAU,OAAMC,UACjBC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,uBAAsBC,SAC/B8S,EAAYlS,KAAKwE,IACdtF,EAAAA,EAAAA,MAAA,MAAwBC,UAAU,4FAA2FC,SAAA,EACzHC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,uDAAsDC,SACjEoF,EAAWE,YAEhBxF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EACtBC,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLC,QAASA,IApaRtC,WAC7B,IACI,MAAMkB,QAAiBhB,EAAAA,EAAcC,IACjCC,EAAAA,GAAc0N,MAAMsH,WAAWhF,EAAKxP,GAAI+F,EAAW/F,IACnD,CAAEmX,aAAc,SAIdnB,EAAM7N,OAAO7B,IAAIC,gBAAgB,IAAI6Q,KAAK,CAAC9W,EAASV,QACpDyX,EAAOC,SAASC,cAAc,KACpCF,EAAKpV,KAAO+T,EACZqB,EAAKG,aAAa,WAAYzR,EAAWE,UACzCqR,SAASG,KAAKC,YAAYL,GAC1BA,EAAK/R,QACL+R,EAAKM,QACT,CAAE,MAAO1X,GAAM,IAAD2X,EAAAC,EACVzX,QAAQnB,MAAM,yCAA0CgB,GAGxD,MAAMI,EAAaJ,EACnBf,IAA4B,QAAnB0Y,EAAAvX,EAAWC,gBAAQ,IAAAsX,GAAM,QAANC,EAAnBD,EAAqBhY,YAAI,IAAAiY,OAAN,EAAnBA,EAA2BtX,UAAWF,EAAWE,SAAW,0CACzE,GA+Y2CuX,CAAyB/R,GACxCrF,UAAU,qFACVc,MAAO6C,EAAE,gCAAgC1D,UAEzCC,EAAAA,EAAAA,KAAA,OAAK2E,MAAM,6BAA6B7E,UAAU,UAAU8E,KAAK,OAAOC,QAAQ,YAAYC,OAAO,eAAc/E,UAC7GC,EAAAA,EAAAA,KAAA,QAAM+E,cAAc,QAAQC,eAAe,QAAQC,YAAa,EAAGC,EAAE,wEAG7ElF,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLC,QAASA,IAxdVtC,WAC3B,IACIF,GAAS,MAGT,MAAMkN,EAAqBqH,EAAYrS,MAAKkG,GAAKA,EAAEtH,KAAOsU,IAE1D,GAAIlI,UACM9M,EAAAA,EAAciV,OAAO/U,EAAAA,GAAc0N,MAAMsH,WAAWhF,EAAKxP,GAAIsU,IAGnEZ,EAAeD,EAAY5T,QAAOkG,GAAcA,EAAW/F,KAAOsU,KAG9DlI,EAAmBnG,UAAU,CAE7B,MACM8R,GADgBjD,EAAAA,EAAAA,IAAqBtF,EAAKxP,GAAIsU,GACT/H,QAAQ,sBAAuB,QAGpEE,EAAe,IAAIC,OAAO,kBAADxK,OAAmB6V,EAAoB,OAAO,KACvEpL,EAAc,IAAID,OAAO,iBAADxK,OAAkB6V,EAAoB,OAAO,KAGrEnL,EAAiBpK,EAClB+J,QAAQE,EAAc,IACtBF,QAAQI,EAAa,IAErBJ,QAAQ,UAAW,QAExB9J,EAAemK,EACnB,CAER,CAAE,MAAO3M,GAAM,IAAD+X,EAAAC,EACV7X,QAAQnB,MAAM,sCAAoCgB,GAGlD,MAAMI,EAAaJ,EACnBf,IAA4B,QAAnB8Y,EAAA3X,EAAWC,gBAAQ,IAAA0X,GAAM,QAANC,EAAnBD,EAAqBpY,YAAI,IAAAqY,OAAN,EAAnBA,EAA2B1X,UAAWF,EAAWE,SAAW,0CACzE,GAib2C2X,CAAuBnS,EAAW/F,IACjDU,UAAU,iFACVc,MAAO6C,EAAE,8BAA8B1D,UAEvCC,EAAAA,EAAAA,KAAA,OAAK2E,MAAM,6BAA6B7E,UAAU,UAAU8E,KAAK,OAAOC,QAAQ,YAAYC,OAAO,eAAc/E,UAC7GC,EAAAA,EAAAA,KAAA,QAAM+E,cAAc,QAAQC,eAAe,QAAQC,YAAa,EAAGC,EAAE,gCAKhFC,EAAWG,SAASC,WAAW,YAC5BvF,EAAAA,EAAAA,KAAA,OAAKF,UAAU,4JAA2JC,UACtKC,EAAAA,EAAAA,KAAA,OACIyF,KAAKyO,EAAAA,EAAAA,IAAqBtF,EAAKxP,GAAI+F,EAAW/F,IAC9CwG,IAAKT,EAAWE,SAChBvF,UAAU,mDAhCjBqF,EAAW/F,UA2ClC8W,GAA6BA,IACK,IAAhCjT,EAAqB7B,OAAqB,MAG1CpB,EAAAA,EAAAA,KAAA,OAAKF,UAAU,OAAMC,UACjBC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,uBAAsBC,SAC/BkD,EAAqBtC,KAAI,CAACwE,EAAYC,KAAK,IAAAmS,EAAA,OACxC1X,EAAAA,EAAAA,MAAA,MAA0BC,UAAU,4FAA2FC,SAAA,EAC3HC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,uDAAsDC,SACjEoF,EAAWE,YAEhBrF,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,UACtBC,EAAAA,EAAAA,KAAA,UACIa,KAAK,SACLC,QAASA,IA9bAsE,KAErC,MAAMoG,EAAqBvI,EAAqBmC,GAEhD,GAAIoG,IAEAzD,EAAwB9E,EAAqBhE,QAAO,CAACwM,EAAG3B,IAAMA,IAAM1E,KAGhEoG,EAAmBnG,UAAU,CAE7B,MAAMqG,EAAkBF,EAAmBnG,SAASsG,QAAQ,sBAAuB,QAC7EC,EAAanI,EAAE,yCACfoI,EAAe,IAAIC,OAAO,OAADxK,OAAQoK,EAAe,UAAApK,OAASsK,EAAWD,QAAQ,sBAAuB,QAAO,OAAO,KACjHI,EAAc,IAAID,OAAO,MAADxK,OAAOoK,EAAe,UAAApK,OAASsK,EAAWD,QAAQ,sBAAuB,QAAO,OAAO,KAG/GK,EAAiBpK,EAClB+J,QAAQE,EAAc,IACtBF,QAAQI,EAAa,IAErBJ,QAAQ,UAAW,QAExB9J,EAAemK,EACnB,CACJ,EAqa2CT,CAAgCnG,GAC/CtF,UAAU,iFACVc,MAAO6C,EAAE,8BAA8B1D,UAEvCC,EAAAA,EAAAA,KAAA,OAAK2E,MAAM,6BAA6B7E,UAAU,UAAU8E,KAAK,OAAOC,QAAQ,YAAYC,OAAO,eAAc/E,UAC7GC,EAAAA,EAAAA,KAAA,QAAM+E,cAAc,QAAQC,eAAe,QAAQC,YAAa,EAAGC,EAAE,gCAK7D,QAAnBqS,EAAApS,EAAWG,gBAAQ,IAAAiS,OAAA,EAAnBA,EAAqBhS,WAAW,YAAaJ,EAAWK,OACrDxF,EAAAA,EAAAA,KAAA,OAAKF,UAAU,4JAA2JC,UACtKC,EAAAA,EAAAA,KAAA,OACIyF,IAAKC,IAAIC,gBAAgBR,EAAWK,MACpCI,IAAKT,EAAWE,SAChBvF,UAAU,mDAGrB,QAAAwB,OAzBY8D,GA0BZ,QAOzB,OAAK0B,EAGDc,IAEI/H,EAAAA,EAAAA,MAACyN,EAAAA,GAAM,CAACC,KAAMzG,EAAQC,QAASA,EAASjH,UAAU,gBAAeC,SAAA,EAC7DC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,4BAA4B,cAAY,UAEvDE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,qDAAoDC,UAC/DF,EAAAA,EAAAA,MAACyN,EAAAA,GAAOE,MAAK,CAAC1N,UAAU,yEAAwEC,SAAA,EAC5FF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sEAAqEC,SAAA,EAChFC,EAAAA,EAAAA,KAACsN,EAAAA,GAAOG,MAAK,CAAC3N,UAAU,wCAAuCC,SAC1D0D,EAAE,2BAEPzD,EAAAA,EAAAA,KAAA,UACIc,QAASiG,EACTjH,UAAU,gFAA+EC,UAEzFC,EAAAA,EAAAA,KAAC2G,EAAAA,EAAS,CAAC7G,UAAU,kBAI7BD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,MAAKC,SAAA,CACf1B,KACG2B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,6EAA4EC,SACtF1B,KAIR2X,iBAWrBnW,EAAAA,EAAAA,MAAAkE,EAAAA,SAAA,CAAAhE,SAAA,CAEK+G,IAAWO,IACRrH,EAAAA,EAAAA,KAAA,OACIF,UAAU,uFACV,cAAY,OACZgB,QAASiG,EACT2G,MAAO,CACHC,QAAS7G,EAAS,EAAI,EACtB8G,WAAY,6BAMxB/N,EAAAA,EAAAA,MAAA,OACIC,UAAS,0JAAAwB,OAA4JwF,EAAS,gBAAkB,oBAChM4G,MAAO,CACHE,WAAY,uDACZC,cAAe/G,EAAS,OAAS,QAErC,eAAcA,EACdP,KAAK,SACL,aAAYO,EAAO/G,SAAA,EAEnBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oFAAmFC,SAAA,EAC9FC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,wCAAuCC,SAC5C0D,EAAE,2BAEXzD,EAAAA,EAAAA,KAAA,UACIc,QAASiG,EACTjH,UAAU,gFAA+EC,UAEzFC,EAAAA,EAAAA,KAAC2G,EAAAA,EAAS,CAAC7G,UAAU,kBAI7BD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qCAAoCC,SAAA,CAC9C1B,KACG2B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,6EAA4EC,SACtF1B,KAIR2X,cApFG,IAuFb,E,qDCzrCX,SAASwB,GAAcja,EAIpBwQ,GAAQ,IAJa,MACtBnN,EAAK,QACLoN,GAEDzQ,EADI0Q,GAAKC,EAAAA,EAAAA,GAAA3Q,EAAA4Q,IAER,OAAoBC,EAAAA,cAAoB,MAAOC,OAAOC,OAAO,CAC3D3J,MAAO,6BACPC,KAAM,OACNC,QAAS,YACTI,YAAa,IACbH,OAAQ,eACR,cAAe,OACf,YAAa,OACbZ,IAAK6J,EACL,kBAAmBC,GAClBC,GAAQrN,EAAqBwN,EAAAA,cAAoB,QAAS,CAC3DhP,GAAI4O,GACHpN,GAAS,KAAmBwN,EAAAA,cAAoB,OAAQ,CACzDrJ,cAAe,QACfC,eAAgB,QAChBE,EAAG,0RAEP,CACA,MACA,GADiCkJ,EAAAA,WAAiBoJ,I,gDCelD,MA0dA,GA1dkCC,KAE9B,MAAM,EAAEhU,IAAMC,EAAAA,EAAAA,OACPgU,EAAYC,IAAiB7Z,EAAAA,EAAAA,WAAS,IACtC8Z,EAAWC,IAAgB/Z,EAAAA,EAAAA,UAAsB,OACjDga,EAAaC,IAAkBja,EAAAA,EAAAA,UAAiB,aAChDka,EAAgBC,IAAqBna,EAAAA,EAAAA,UAA0B,OAC/Doa,EAAWC,IAAgBra,EAAAA,EAAAA,WAAS,IACpCsa,EAAmBC,IAAwBva,EAAAA,EAAAA,WAAS,IACpDwa,EAAaC,IAAkBza,EAAAA,EAAAA,UAAwB,OACxD,KAAEsI,IAASa,EAAAA,EAAAA,OACX,qBAAEuR,IAAyBC,EAAAA,GAAAA,MAC3B,SAAE7V,EAAQ,eAAE8V,EAAc,kBAAEC,IAAsBC,EAAAA,GAAAA,MAClD,aAAEC,IAAiBC,EAAAA,GAAAA,KAGnBC,GAA0BC,EAAAA,EAAAA,UAAQ,OAC/BhB,IAAmBa,MAEc,OAAlCb,EAAeiB,qBAA+CzD,IAApBqD,EAAazZ,KAEpD4Y,EAAeiB,iBAAmBJ,EAAazZ,KACvD,CAAC4Y,EAAgBa,IAGdK,GAAsBC,EAAAA,EAAAA,cAAY3a,UACpC,IACI2Z,GAAa,GACbI,EAAe,MAEf/Y,QAAQyJ,IAAI,oCACZzJ,QAAQyJ,IAAI,oBAAyB,OAAJ7C,QAAI,IAAJA,OAAI,EAAJA,EAAMhH,IAEvC,MAAMga,EAAQrQ,aAAaC,QAAQ,SAGnC,GAFAxJ,QAAQyJ,IAAI,mBAAoBmQ,EAAQ,KAAO,SAE1CA,EAID,OAHA5Z,QAAQnB,MAAM,yCACdka,EAAe9U,EAAE,2CACjB0U,GAAa,GAIjB,IAEI,MAAMzY,QAAiBhB,EAAAA,EAAcC,IAAIC,EAAAA,GAAcya,SAASC,QAEhE9Z,QAAQyJ,IAAI,sBAAuBvJ,EAAS0M,QAE5C,MAAMpN,EAAOU,EAASV,KAGtB,GAFAQ,QAAQyJ,IAAI,8BAA+BjK,GAEvCA,IAAwB,IAAhBA,EAAKua,OAAiB,CAC9B/Z,QAAQyJ,IAAI,iCAAkCjK,EAAKI,IAGnD,MAAMoa,EAAiBxa,EAAK4Y,UAAU6B,SAAS,KACzCza,EAAK4Y,UAAUzW,UAAU,EAAGnC,EAAK4Y,UAAUxW,OAAS,GACpDpC,EAAK4Y,UAEL8B,EAAgB,IAAInR,KAAKiR,GAIzBG,GADM,IAAIpR,MACC2K,UAAYwG,EAAcxG,UACrC0G,EAAeC,KAAKC,MAAMH,EAAO,KACjCI,EAAQF,KAAKC,MAAMF,EAAe,MAClCI,EAAUH,KAAKC,MAAOF,EAAe,KAAQ,IAC7CK,EAAUL,EAAe,GAG/B3B,EAAkBjZ,GAClB6Y,EAAa6B,GACb3B,EAAe,GAADzW,OACPyY,EAAMG,WAAWC,SAAS,EAAG,KAAI,KAAA7Y,OAAI0Y,EACnCE,WAAWC,SAAS,EAAG,KAAI,KAAA7Y,OAAI2Y,EAAQC,WAAWC,SAAS,EAAG,OAEvExC,GAAc,GAGVe,IAAmB1Z,EAAKsD,UACxBqW,EAAkB3Z,EAAKsD,UAI3BkW,GAAqB,EACzB,MACIhZ,QAAQyJ,IAAI,wCAEZ0O,GAAc,GACdM,EAAkB,MAClBJ,EAAa,MACbE,EAAe,YAGfS,GAAqB,EAE7B,CAAE,MAAOna,GACLmB,QAAQnB,MAAM,iDAAkDA,GAGhE,MAAMoB,EAAapB,EAGX,IAADiB,EAAAC,EAFP,GAAwB,gBAApBE,EAAW2J,KACXmP,EAAe9U,EAAE,0CAEjB8U,EAAe,GAADjX,OAAImC,EAAE,+BAA8B,MAAAnC,QAAwB,QAAnBhC,EAAAG,EAAWC,gBAAQ,IAAAJ,GAAM,QAANC,EAAnBD,EAAqBN,YAAI,IAAAO,OAAN,EAAnBA,EAA2BI,UAAWF,EAAWE,SAEhH,CACJ,CAAC,QACGwY,GAAa,EACjB,IACD,CAAK,OAAJ/R,QAAI,IAAJA,OAAI,EAAJA,EAAMhH,GAAIoZ,EAAsBE,EAAgBG,KAGpDta,EAAAA,EAAAA,YAAU,KACF6H,GACA5G,QAAQyJ,IAAI,sEAAiE7C,EAAKhH,IAClF8Z,MAEA1Z,QAAQyJ,IAAI,mEACZkP,GAAa,GACjB,GACD,CAAC/R,EAAM8S,KAGV3a,EAAAA,EAAAA,YAAU,KACN,IAAI6b,EAqBJ,OAnBI1C,GAAcE,IACdwC,EAAa7S,OAAO8S,aAAY,KAC5B,MACMV,GADM,IAAIpR,MACC2K,UAAY0E,EAAU1E,UAGjC0G,EAAeC,KAAKC,MAAMH,EAAO,KACjCI,EAAQF,KAAKC,MAAMF,EAAe,MAClCI,EAAUH,KAAKC,MAAOF,EAAe,KAAQ,IAC7CK,EAAUL,EAAe,GAE/B7B,EAAe,GAADzW,OACPyY,EAAMG,WAAWC,SAAS,EAAG,KAAI,KAAA7Y,OAAI0Y,EACnCE,WACAC,SAAS,EAAG,KAAI,KAAA7Y,OAAI2Y,EAAQC,WAAWC,SAAS,EAAG,MAC3D,GACF,MAGA,KACCC,GACAE,cAAcF,EAClB,CACH,GACF,CAAC1C,EAAYE,IAEhB,MAQM2C,EAAsB/b,UACxB,GAAKka,EAKL,IACI,MAAMU,EAAQrQ,aAAaC,QAAQ,SACnC,IAAKoQ,EAGD,OAFA5Z,QAAQnB,MAAM,8CACdmc,MAAM/W,EAAE,6CAKZ,MAiBMzE,SAjBiBN,EAAAA,EAAc2N,KACjCzN,EAAAA,GAAcya,SAASoB,MACvB,CACInY,SAAUoW,EAIVd,UAAW,IAAIrP,MAAK,IAAIA,MAAO2K,UAA6C,KAAjC,IAAI3K,MAAOmS,sBAE1D,CACI1N,QAAS,CACL,cAAgB,UAAD1L,OAAY8X,GAC3B,eAAgB,uBAKNpa,KAIhBwa,EAAiBxa,EAAK4Y,UAAU6B,SAAS,KACzCza,EAAK4Y,UAAUzW,UAAU,EAAGnC,EAAK4Y,UAAUxW,OAAS,GACpDpC,EAAK4Y,UAEL8B,EAAgB,IAAInR,KAAKiR,GAI/BvB,EAAkBjZ,GAClB6Y,EAAa6B,GACb3B,EAAe,YACfJ,GAAc,GAGda,GAAqB,EACzB,CAAE,MAAOna,GACLmB,QAAQnB,MAAM,UAAWA,GAGzB,IAAIsc,EAAelX,EAAE,+BACA,IAADoN,EAApB,GAAIxS,EAAMqB,SACNib,GAAkC,QAAnB9J,EAAAxS,EAAMqB,SAASV,YAAI,IAAA6R,OAAA,EAAnBA,EAAqBlR,UAAO,mBAAA2B,OAAuBjD,EAAMqB,SAAS0M,OAAM,KAG3FoO,MAAMG,EACV,MA3DIH,MAAM/W,EAAE,iCA2DZ,EAGEmX,EAAqBpc,UACvB,IACI,MAAM4a,EAAQrQ,aAAaC,QAAQ,SACnC,IAAKoQ,EAGD,OAFA5Z,QAAQnB,MAAM,8CACdmc,MAAM/W,EAAE,mDAKW/E,EAAAA,EAAc2N,KACjCzN,EAAAA,GAAcya,SAASwB,KACvB,CAEIC,QAAS,IAAIvS,MAAK,IAAIA,MAAO2K,UAA6C,KAAjC,IAAI3K,MAAOmS,sBAExD,CACI1N,QAAS,CACL,cAAgB,UAAD1L,OAAY8X,GAC3B,eAAgB,sBAM5BzB,GAAc,GACdM,EAAkB,MAClBJ,EAAa,MACbE,EAAe,YAGfS,GAAqB,EACzB,CAAE,MAAOna,GACLmB,QAAQnB,MAAM,UAAWA,GAGzB,IAAIsc,EAAelX,EAAE,8BACA,IAADsX,EAApB,GAAI1c,EAAMqB,SACNib,GAAkC,QAAnBI,EAAA1c,EAAMqB,SAASV,YAAI,IAAA+b,OAAA,EAAnBA,EAAqBpb,UAAO,mBAAA2B,OAAuBjD,EAAMqB,SAAS0M,OAAM,KAG3FoO,MAAMG,EACV,GAYEK,GAAahC,EAAAA,EAAAA,UAAQ,KAAO,IAADiC,EAC7B,OAAKjD,GACsD,QAApDiD,EAAArY,EAASpC,MAAK0a,GAAKA,EAAE9b,KAAO4Y,EAAe1V,kBAAS,IAAA2Y,OAAA,EAApDA,EAAsDlV,OAAQtC,EAAE,4BAD3C,IACsE,GACnG,CAACb,EAAUoV,IA4Ed,OAAIE,GAEIlY,EAAAA,EAAAA,KAAA,OAAKF,UAAU,4FAA2FC,UACtGC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wCAAuCC,UAClDC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2FAO3BD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,+FAA8FC,SAAA,EACzGC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,yCAAwCC,UACnDF,EAAAA,EAAAA,MAAA,MAAIC,UAAU,0DAAyDC,SAAA,EACnEC,EAAAA,EAAAA,KAACmb,EAAAA,EAAS,CAACrb,UAAU,iBACpB2D,EAAE,+BAIV6U,IACGzY,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8JAA6JC,SAAA,EACxKC,EAAAA,EAAAA,KAAA,QAAAD,SAAOuY,IACNA,IAAgB7U,EAAE,uCACf5D,EAAAA,EAAAA,MAAA,UACIiB,QA5FAtC,UACpB,GAAK+I,OAAO6T,QAAQ3X,EAAE,sCAItB,IACI,MAAM2V,EAAQrQ,aAAaC,QAAQ,SACnC,IAAKoQ,EAGD,OAFA5Z,QAAQnB,MAAM,8CACdmc,MAAM/W,EAAE,mDAKW/E,EAAAA,EAAc2N,KACjCzN,EAAAA,GAAcya,SAASwB,KACvB,CAEIC,QAAS,IAAIvS,MAAK,IAAIA,MAAO2K,UAA6C,KAAjC,IAAI3K,MAAOmS,qBACpDW,OAAO,GAEX,CACIrO,QAAS,CACL,cAAgB,UAAD1L,OAAY8X,GAC3B,eAAgB,sBAK5BzB,GAAc,GACdE,EAAa,MACbE,EAAe,YACfE,EAAkB,MAClBM,EAAe,MACfiC,MAAM/W,EAAE,sCAGR+U,GAAqB,EACzB,CAAE,MAAOna,GAAQ,IAADuS,EACZpR,QAAQnB,MAAM,UAAWA,GACzBka,EAAe,wBAADjX,QAAuC,QAAdsP,EAAAvS,EAAMqB,gBAAQ,IAAAkR,OAAA,EAAdA,EAAgBxE,SAAU,mBACjEoO,MAAM/W,EAAE,mCACZ,GAmDoB3D,UAAU,gIAA+HC,SAAA,CAExI0D,EAAE,yBAAyB,IAAEA,EAAE,eAAgB,mBAO/DiU,GAAcqB,IACXlZ,EAAAA,EAAAA,MAAA,OAAKC,UAAU,+JAA8JC,SAAA,EACzKC,EAAAA,EAAAA,KAACsb,EAAAA,EAAuB,CAACxb,UAAU,uCACnCD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,SAAQC,SAAA,EACnBC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,cAAaC,SAAE0D,EAAE,sDAAuD,mCACrFzD,EAAAA,EAAAA,KAAA,KAAGF,UAAU,eAAcC,SACtB0D,EAAE,wDAAyD,kKAO5E5D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,uCAAsCC,SAAA,EACjDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,6BAA4BC,SAAA,EACvCF,EAAAA,EAAAA,MAAA,SAAOC,UAAU,mDAAkDC,SAAA,EAC/DC,EAAAA,EAAAA,KAAA,SACIa,KAAK,WACLf,UAAU,eACVkG,QAAS0R,EACTxX,SAnQK1B,UACrBkZ,QACMkD,UAEAL,GACV,EA+PoBtZ,UAAWyX,IAAmBhB,EAC9B,kBAAiBA,EAAa,gBAAkB,oBAEpD1X,EAAAA,EAAAA,KAAA,OAAKF,UAAS,wDAAAwB,OACRoW,EACI,mEACA,+BAA8B,gtBAW5C1X,EAAAA,EAAAA,KAAA,QAAMF,UAAU,2BAA0BC,SACrC2X,GACK1X,EAAAA,EAAAA,KAAA,QAAMF,UAAU,+CAA8CC,SAAE0D,EAAE,+BAClEzD,EAAAA,EAAAA,KAAA,QAAMF,UAAU,mCAAkCC,SAAE0D,EAAE,kCAMpEzD,EAAAA,EAAAA,KAAA,UACIc,QA1KUya,KACtBlD,GAAqB,EAAK,EA0KdvY,UAAU,uNACVc,MAAO6C,EAAE,8BAA8B1D,UAEvCC,EAAAA,EAAAA,KAACwX,GAAc,CAAC1X,UAAU,kBAKlCE,EAAAA,EAAAA,KAAA,OAAKF,UAAS,+BAAAwB,OAAiCoW,GAAcM,EAAiB,uDAAyD,kDAAmDjY,SACrL2X,GAAcM,GACXnY,EAAAA,EAAAA,MAAAkE,EAAAA,SAAA,CAAAhE,SAAA,EACIF,EAAAA,EAAAA,MAAA,KAAAE,SAAA,EAAGC,EAAAA,EAAAA,KAAA,UAAAD,SAAS0D,EAAE,qCAA4C,IAAEqU,MAC5DjY,EAAAA,EAAAA,MAAA,KAAAE,SAAA,EAAGC,EAAAA,EAAAA,KAAA,UAAAD,SAAS0D,EAAE,8BAAqC,IArH9CwP,KAEK,kBAAfA,GAA2BA,EAAWwG,SAAS,OACtDxG,EAAaA,EAAW9R,UAAU,EAAG8R,EAAW7R,OAAS,IAG7D,MAAMkH,EAAO,IAAIC,KAAK0K,GAGhBuI,EAAMlT,EAAKG,UAAUyR,WAAWC,SAAS,EAAG,KAC5CsB,GAASnT,EAAKoT,WAAa,GAAGxB,WAAWC,SAAS,EAAG,KACrDwB,EAAOrT,EAAKsT,cAGZ7B,EAAQzR,EAAKuT,WAAW3B,WAAWC,SAAS,EAAG,KAC/CH,EAAU1R,EAAKwT,aAAa5B,WAAWC,SAAS,EAAG,KACnDF,EAAU3R,EAAKyT,aAAa7B,WAAWC,SAAS,EAAG,KAGzD,MAAM,GAAN7Y,OAAUka,EAAG,KAAAla,OAAIma,EAAK,KAAAna,OAAIqa,EAAI,MAAAra,OAAKyY,EAAK,KAAAzY,OAAI0Y,EAAO,KAAA1Y,OAAI2Y,EAAO,EAkGO+B,CAAgBpE,GAAarP,KAAK0T,WACvFpc,EAAAA,EAAAA,MAAA,KAAAE,SAAA,EAAGF,EAAAA,EAAAA,MAAA,UAAAE,SAAA,CAAS0D,EAAE,sCAAsC,OAAU,IAAEuX,GAAcvX,EAAE,mCAGpF5D,EAAAA,EAAAA,MAAAkE,EAAAA,SAAA,CAAAhE,SAAA,EACIC,EAAAA,EAAAA,KAAA,KAAAD,SAAG,UACHC,EAAAA,EAAAA,KAAA,KAAAD,SAAG,UACHC,EAAAA,EAAAA,KAAA,KAAAD,SAAG,cAMdqY,IACGpY,EAAAA,EAAAA,KAACkc,GAAAA,EAAa,CAACpV,OAAQsR,EAAmBrR,QAjM3BoV,KACvB9D,GAAqB,EAAM,MAkMrB,E,oGCvbd,MAAM+D,GAAqB,CAAC,QAAS,+BAAgC,SAAU,UAAW,SAAU,WAG9FC,GAAiB,oBAKjBC,GAA4D,CAChE1b,MAAO,MACPwL,OAAQ,MACRF,YAAa,MACbD,eAAgB,MAChBzF,OAAQ,MACRhE,QAAS,MACTZ,YAAa,OAKT2a,GAA+C,CACnD,MAAS,CAAC,SACV,OAAU,CAAC,UACX,6BAAgC,CAAC,cAAe,kBAChD,OAAU,CAAC,UACX,QAAW,CAAC,WACZ,QAAW,GACX,YAAe,CAAC,gBAIZC,GAA6C,CACjD,MAAS,QACT,OAAU,SACV,YAAe,+BACf,eAAkB,+BAClB,OAAU,SACV,QAAW,UACX,YAAe,eAw/DjB,GA39D8BC,KAC1B,MAAM,EAAEhZ,IAAMC,EAAAA,EAAAA,OACR,KAAE0C,IAASa,EAAAA,EAAAA,OACX,cAAEuL,IAAkBC,EAAAA,EAAAA,KACpBiK,GAAWC,EAAAA,EAAAA,MAGXC,GAAmB5D,EAAAA,EAAAA,UAAQ,IAAM,CACnC,CAAE5Z,GAAI,QAASyd,MAAOpZ,EAAE,uBAAwBqZ,WAAYrZ,EAAE,wBAC9D,CAAErE,GAAI,SAAUyd,MAAOpZ,EAAE,wBAAyBqZ,WAAYrZ,EAAE,yBAChE,CAAErE,GAAI,+BAAgCyd,MAAOpZ,EAAE,8CAA+CqZ,WAAYrZ,EAAE,8CAA8CkF,MAAM,KAAK,IACrK,CAAEvJ,GAAI,SAAUyd,MAAOpZ,EAAE,wBAAyBqZ,WAAYrZ,EAAE,wBAAwBtC,UAAU,EAAG,IACrG,CAAE/B,GAAI,UAAWyd,MAAOpZ,EAAE,yBAA0BqZ,WAAYrZ,EAAE,yBAAyBtC,UAAU,EAAG,IACxG,CAAE/B,GAAI,UAAWyd,MAAOpZ,EAAE,yBAA0BqZ,WAAYrZ,EAAE,kBAAkBtC,UAAU,EAAG,MAClG,CAACsC,IAGEsZ,GAAoB/D,EAAAA,EAAAA,UAAQ,IAAM,CACpC,CAAE5Z,GAAI,cAAeyd,MAAOpZ,EAAE,6BAA8BqZ,WAAYrZ,EAAE,6BAA6BtC,UAAU,EAAG,IACpH,CAAE/B,GAAI,iBAAkByd,MAAOpZ,EAAE,gCAAiCqZ,WAAYrZ,EAAE,gCAAgCtC,UAAU,EAAG,MAC9H,CAACsC,KAOGuZ,EAAOC,IAAYnf,EAAAA,EAAAA,UAAiB,KACpCK,EAASC,IAAcN,EAAAA,EAAAA,WAAS,IAChCO,EAAOC,IAAYR,EAAAA,EAAAA,UAAwB,OAC3Cof,EAAYC,IAAiBrf,EAAAA,EAAAA,UAAS,KACtCsf,EAAcC,IAAmBvf,EAAAA,EAAAA,UAAiC,QAGlEwf,EAAkBC,IAAuBzf,EAAAA,EAAAA,UAA4B,KACrE0f,EAAwBC,IAA6B3f,EAAAA,EAAAA,UAA2B,KAGhF4f,EAAkBC,IAAuB7f,EAAAA,EAAAA,UAAiB,KAC1D8f,EAAkBC,IAAuB/f,EAAAA,EAAAA,UAAwB,OAEjEggB,GAAmBC,KAAwBjgB,EAAAA,EAAAA,WAAS,IACpDkgB,GAAYC,KAAiBngB,EAAAA,EAAAA,UAAqB,CAAEyR,IAAK,UAAW2O,UAAW,SAC/EC,GAAmBC,KAAwBtgB,EAAAA,EAAAA,WAAS,IACpDugB,GAAiBC,KAAsBxgB,EAAAA,EAAAA,WAAS,IAChDygB,GAAcC,KAAmB1gB,EAAAA,EAAAA,UAAsB,OACvD2gB,GAAYC,KAAiB5gB,EAAAA,EAAAA,UAAsB,OAGpD,SACF6gB,GACAzG,UAAW0G,GAAiB,kBAC5BC,GAAiB,oBACjBC,GAAmB,uBACnBC,GAAsB,gBACtBC,GAAe,eACfC,KACAC,EAAAA,EAAAA,GAAiB,oBAAqB,CACtC9C,sBACA+C,qBAAsB,GACtBC,gBAAiB,WAGdC,GAAeC,KAAoBxhB,EAAAA,EAAAA,UAAwB,OAC3DyhB,GAAgBC,KAAqB1hB,EAAAA,EAAAA,UAAwB,OAC7D2hB,GAAcC,KAAmB5hB,EAAAA,EAAAA,UAAiB,IAGnD6hB,GAAWhB,GAASgB,UAAY,SAG/BC,GAAoBC,KAAyB/hB,EAAAA,EAAAA,WAAyC,IAClFwe,KAKLwD,IAAoB9G,EAAAA,EAAAA,UAAQ,IA5FE+G,KACtC,MAAMC,EAAyB,GAW/B,OAVAD,EAAY1Q,SAAQ4Q,IAClB,MAAMC,EAAW3D,GAAmB0D,GAChCC,GAAYA,EAAS9e,OAAS,GAChC4e,EAAapL,QAAQsL,EACvB,IAGGF,EAAa7gB,SAAS,gBACzB6gB,EAAapL,KAAK,eAEboL,CAAY,EAiFNG,CAA+BxB,GAASoB,aAAe3D,KAC/D,CAACuC,GAASoB,cAGPK,IAAqBpH,EAAAA,EAAAA,UAAQ,IA3GRqH,KAC7B,MAAMD,EAAqB,IAAIE,IAK/B,OAJAD,EAAmBhR,SAAQ4Q,KACJ1D,GAAmB0D,IAAa,IACxC5Q,SAAQ6Q,GAAYE,EAAmBG,IAAIL,IAAU,IAE7DE,CAAkB,EAsGZI,CAAsB7B,GAAS8B,eAAiB,KACxD,CAAC9B,GAAS8B,gBAGPC,IAAsB1H,EAAAA,EAAAA,UAAQ,IACzB,IAAIsH,IAAIR,GAAkB7gB,QAAO0hB,IAASP,GAAmBQ,IAAID,OACzE,CAACb,GAAmBM,MAGvB7hB,EAAAA,EAAAA,YAAU,KACWmY,SAASmK,iBAAiB,4BAClCxR,SAAQyR,IACI,UAAbnB,GACAmB,EAAQC,UAAUR,IAAI,cAEtBO,EAAQC,UAAUhK,OAAO,aAC7B,GACF,GACH,CAAC4I,KAIJ,MAAMqB,IAAe/Y,EAAAA,EAAAA,SAAO,GAGtBgZ,GAAYziB,UACd,IACIJ,GAAW,GACX,MAAMsB,QAAiBhB,EAAAA,EAAcC,IAAIC,EAAAA,GAAc0N,MAAMvN,MAMvDmiB,EALYxhB,EAASV,KAMtBC,QAAQ2P,GAAuB,MAARA,IACvBjO,KAAKiO,IACF,MAAMiE,GAAejE,EAAKiE,aAAe,IACpC5T,QAAQsV,GAAoB,MAAPA,IACrB5T,KAAK4T,IAAQ,CACVnV,GAAImV,EAAInV,GACRiG,SAAUkP,EAAIlP,SACdC,SAAUiP,EAAIjP,SACdkF,SAAU+J,EAAI/J,SACd0K,SAAUX,EAAIW,SACdC,WAAYZ,EAAIY,WAChBC,KAAKlB,EAAAA,EAAAA,IAAqBtF,EAAKxP,GAAImV,EAAInV,QAG/C,OAAAgT,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACOxD,GAAI,IACPiE,YAAaA,GAAW,IAIpCrT,QAAQyJ,IAAI,8BAAqBiY,EAAqB9f,OAAQ,SAC9D6b,EAASiE,GACT5iB,EAAS,KACb,CAAE,MAAOD,GACLmB,QAAQnB,MAAM,+BAAgCA,GAC9CC,EAASmF,EAAE,oCACf,CAAC,QACGrF,GAAW,EACf,IAIJG,EAAAA,EAAAA,YAAU,KACDyiB,GAAavc,UACduc,GAAavc,SAAU,EACvBwc,KACJ,GACD,KAGH1iB,EAAAA,EAAAA,YAAU,KACN,GAAIye,EAAM5b,OAAS,EAAG,CAClB,MACM+f,EADc,IAAIC,gBAAgB1E,EAAS2E,QAClB1iB,IAAI,YAEnC,GAAIwiB,EAAY,CACZ,MAAMpU,EAAS1M,SAAS8gB,EAAY,IACpC,IAAK5gB,MAAMwM,GAAS,CAChB,MAAM6B,EAAOoO,EAAMxc,MAAKiD,GAAKA,EAAErE,KAAO2N,IAClC6B,IACA4P,GAAgB5P,GAChB0P,IAAmB,GAE3B,CACJ,CACJ,IACD,CAACtB,EAAON,EAAS2E,UAGpB9iB,EAAAA,EAAAA,YAAU,KACmBC,WACrB,IACI,MAAMkB,QAAiBhB,EAAAA,EAAcC,IAAIC,EAAAA,GAAc0iB,cAAcC,SAASlF,KAGxEmF,EAFU9hB,EAASV,KAEKwB,MAAMvB,GAAgC,YAAhBA,EAAO8G,OACvDyb,IACA7D,EAAoBla,EAAE,0BACtBoa,EAAoB2D,EAAcpiB,IAClCqiB,GAAsBD,EAAcE,WAAYF,EAAcG,WAEtE,CAAE,MAAOtjB,GACLmB,QAAQnB,MAAM,4CAA6CA,EAC/D,GAGJujB,EAAkB,GACnB,KAGHrjB,EAAAA,EAAAA,YAAU,KACwBC,WAC1B,IACI,MAAM4a,EAAQrQ,aAAaC,QAAQ,SAEnC,IAAKoQ,EAED,YADA5Z,QAAQnB,MAAM,yBAKlB,MASMwjB,SATgCnjB,EAAAA,EAAcC,IAAI,GAAD2C,OAChD1C,EAAAA,GAAc0iB,cAAcC,SAASlF,KACxC,CACIrP,QAAS,CACL8U,cAAc,UAADxgB,OAAY8X,OAKWpa,MAAQ,GAClD+iB,EAAqBF,EAAgBG,MAAK/iB,GAA0B,WAAhBA,EAAO8G,OAC3Dkc,EAAsBJ,EAAgBG,MAAK/iB,GAA0B,YAAhBA,EAAO8G,OAGlE,IAAKgc,EAAoB,CACrB,MAAMG,EAAe,CACjBC,QAAS9F,GACTtW,KAAM,SACN2b,WAAY,CACR,CAAEU,OAAQ,SAAUC,SAAU,SAAUpiB,MAAO,SAEnD0hB,UAAW,UAGTjjB,EAAAA,EAAc2N,KAAK,GAAD/K,OACjB1C,EAAAA,GAAc0iB,cAAcviB,MAC/BmjB,EACA,CACIlV,QAAS,CACL8U,cAAc,UAADxgB,OAAY8X,KAIzC,CAGA,IAAK6I,EAAqB,CACtB,MAAMT,EAAgB,CAClBW,QAAS9F,GACTtW,KAAM,UACN2b,WAAY,CACR,CAAEU,OAAQ,SAAUC,SAAU,YAAapiB,MAAO,SAEtD0hB,UAAW,UAGTjjB,EAAAA,EAAc2N,KAAK,GAAD/K,OACjB1C,EAAAA,GAAc0iB,cAAcviB,MAC/ByiB,EACA,CACIxU,QAAS,CACL8U,cAAc,UAADxgB,OAAY8X,KAIzC,CACJ,CAAE,MAAO/a,GACLmB,QAAQnB,MAAM,6CAA8CA,EAChE,GAGJikB,EAAuB,GACxB,IAIH,MAAMC,GAAqB/jB,MAAOuO,EAAgByV,KAC9C,IAEIvF,GAASwF,GACcA,EAAUxjB,QAAO2P,GAAgB,MAARA,IAC1BjO,KAAIiO,GAClBA,EAAKxP,KAAO2N,GAAMqF,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQxD,GAAI,IAAExC,OAAQoW,IAAc5T,YAIxDlQ,EAAAA,EAAcgkB,MAAM9jB,EAAAA,GAAc0N,MAAM7L,MAAMsM,GAAS,CAAEX,OAAQoW,IACvEG,GAAAA,GAAMC,QAAQnf,EAAE,iCACpB,CAAE,MAAOpF,GAELmB,QAAQnB,MAAM,wCAAyCA,GACvD4iB,KACI0B,GAAAA,GAAMtkB,MAAMoF,EAAE,sCACtB,GAQEof,GAAwBjU,IAC1B,OAAIA,EAAK1C,YACE0C,EAAK1C,YAAY9M,MAAW,OAAJgH,QAAI,IAAJA,OAAI,EAAJA,EAAMhH,IAC9BwP,EAAKrI,OAED,OAAJH,QAAI,IAAJA,GAAW,QAAP0c,EAAJ1c,EAAMzD,aAAK,IAAAmgB,OAAP,EAAJA,EAAad,MAAKe,IAAQ,IAAAC,EAAAC,EAAA,OAAiB,QAAbD,EAAAD,EAASxc,YAAI,IAAAyc,OAAA,EAAbA,EAAe5jB,OAAgB,QAAd6jB,EAAKrU,EAAKrI,YAAI,IAAA0c,OAAA,EAATA,EAAW7jB,GAAG,OAEtE,EAJgB,IAAD0jB,CAIV,EAGVI,GAA2BtU,IAAgB,IAADyD,EAC5C,OAA0B,QAAnBA,EAAAzD,EAAK3C,sBAAc,IAAAoG,OAAA,EAAnBA,EAAqBjT,OAAW,OAAJgH,QAAI,IAAJA,OAAI,EAAJA,EAAMhH,GAAE,EAGzC+jB,GAAc5T,IAChB0O,IAAcxZ,IAAO,CACjB8K,MACA2O,UAAWzZ,EAAQ8K,MAAQA,GAA6B,QAAtB9K,EAAQyZ,UAAsB,OAAS,SAC1E,EAGDkF,GAAuBxU,IACzB,MAAMyU,EAAyB,GAK/B,OAFuB7Q,EAAc,QAAS,QAAS,UAKnC,gBAAhB5D,EAAKxC,QAA4ByW,GAAqBjU,GACtDyU,EAAQzO,MACJ5U,EAAAA,EAAAA,KAAA,UAEIc,QAASA,IAAMyhB,GAAmB3T,EAAKxP,GAAI,QAC3CU,UAAU,6FACVc,MAAO6C,EAAE,4BAA4B1D,UAErCC,EAAAA,EAAAA,KAACsjB,EAAAA,EAAa,CAACxjB,UAAU,aALrB,SAQW,oBAAhB8O,EAAKxC,QAAgCyW,GAAqBjU,GACjEyU,EAAQzO,MACJ5U,EAAAA,EAAAA,KAAA,UAEIc,QAASA,IAAMyhB,GAAmB3T,EAAKxP,GAAI,eAC3CU,UAAU,6FACVc,MAAO6C,EAAE,kCAAkC1D,UAE3CC,EAAAA,EAAAA,KAACsjB,EAAAA,EAAa,CAACxjB,UAAU,aALrB,SAQW,SAAhB8O,EAAKxC,QAAqB8W,GAAwBtU,IACzDyU,EAAQzO,MACJ5U,EAAAA,EAAAA,KAAA,UAEIc,QAASA,IAAMyhB,GAAmB3T,EAAKxP,GAAI,mBAC3CU,UAAU,2FACVc,MAAO6C,EAAE,sCAAsC1D,UAE/CC,EAAAA,EAAAA,KAACsjB,EAAAA,EAAa,CAACxjB,UAAU,aALrB,SAWI,SAAhB8O,EAAKxC,QAAqByW,GAAqBjU,GAC/CyU,EAAQzO,MACJ5U,EAAAA,EAAAA,KAAA,UAEIc,QAASA,IAAMyhB,GAAmB3T,EAAKxP,GAAI,eAC3CU,UAAU,iGACVc,MAAO6C,EAAE,+BAA+B1D,UAExCC,EAAAA,EAAAA,KAACujB,EAAAA,EAAc,CAACzjB,UAAU,aALtB,YAQW,gBAAhB8O,EAAKxC,QAA4ByW,GAAqBjU,GAC7DyU,EAAQzO,MACJ5U,EAAAA,EAAAA,KAAA,UAEIc,QAASA,IAAMyhB,GAAmB3T,EAAKxP,GAAI,mBAC3CU,UAAU,yGACVc,MAAO6C,EAAE,mCAAmC1D,UAE5CC,EAAAA,EAAAA,KAACujB,EAAAA,EAAc,CAACzjB,UAAU,aALtB,YAQW,oBAAhB8O,EAAKxC,QAAgC8W,GAAwBtU,IACpEyU,EAAQzO,MACJ5U,EAAAA,EAAAA,KAAA,UAEIc,QAASA,IAAMyhB,GAAmB3T,EAAKxP,GAAI,QAC3CU,UAAU,qGACVc,MAAO6C,EAAE,0BAA0B1D,UAEnCC,EAAAA,EAAAA,KAACujB,EAAAA,EAAc,CAACzjB,UAAU,aALtB,YAUTujB,GA1EqBA,CA0Ed,EAGZG,GAAuBA,IAClBlG,EAAiBlc,OAGtBqgB,GAAwBA,CAACC,EAA+BC,KAC1DpE,EAAoBmE,GACpBjE,EAA0BkE,EAAU,EAGlC8B,GAAwBA,KAC1BlG,EAAoB,IACpBE,EAA0B,IAC1BE,EAAoB,IACpBE,EAAoB,KAAK,EAIvB6F,GAAqBA,CAAC3d,EAAc3G,EAAmBsiB,EAA+BC,KACxFhE,EAAoB5X,GACpB8X,EAAoBze,GACpBqiB,GAAsBC,EAAYC,EAAU,EAG1CgC,GAAqBvX,IACvB,OAAQA,GACJ,IAAK,OAAQ,OAAO,EACpB,IAAK,cAAe,OAAO,EAC3B,IAAK,WAAY,OAAO,EACxB,IAAK,kBAAmB,OAAO,EAC/B,IAAK,OAAQ,OAAO,EACpB,QAAS,OAAO,GACpB,EAGEwX,IAAyB5K,EAAAA,EAAAA,UAAQ,KACnCxZ,QAAQyJ,IAAI,8BAAqB+T,EAAM5b,OAAQ,mBAC/C5B,QAAQyJ,IAAI,kCAAyBqU,GAErC,MACMuG,EADa7G,EAAM/d,QAAO2P,GAAgB,MAARA,IAEnC3P,QAAO2P,IAEJ,GAAIsO,EAAY,CACZ,MAAM4G,EAAc5G,EAAW6G,cAS/B,KAPInV,EAAKhO,MAAMmjB,cAAc5kB,SAAS2kB,IACjClV,EAAKhN,aAAegN,EAAKhN,YAAYmiB,cAAc5kB,SAAS2kB,MAC5DlV,EAAK1C,aAAc,GAAA5K,OAAGsN,EAAK1C,YAAY7F,UAAS,KAAA/E,OAAIsN,EAAK1C,YAAY5F,UAAWyd,cAAc5kB,SAAS2kB,MACvGlV,EAAKrI,MAAOqI,EAAKrI,KAAKR,KAAKge,cAAc5kB,SAAS2kB,IAClDlV,EAAK3C,gBAAkB,GAAA3K,OAAGsN,EAAK3C,eAAe5F,UAAS,KAAA/E,OAAIsN,EAAK3C,eAAe3F,UAAWyd,cAAc5kB,SAAS2kB,IAClHlV,EAAKpI,OAAOT,KAAKge,cAAc5kB,SAAS2kB,IAExB,OAAO,CAC/B,CAGA,GAAIxG,EAAiBlc,OAAS,EAAG,CAE7B,IAAI4iB,EAAS1G,EAAiBlc,OAAS,EAEvC,IAAK,IAAI0I,EAAI,EAAGA,EAAIwT,EAAiBlc,OAAQ0I,IAAK,CAC9C,MAAMma,EAAY3G,EAAiBxT,GACnC,IAAIoa,GAAe,EAEnB,OAAQD,EAAU7B,QACd,IAAK,QAC0B,WAAvB6B,EAAU5B,SACV6B,EAAetV,EAAKhO,QAAUqjB,EAAUhkB,MACV,aAAvBgkB,EAAU5B,SACjB6B,EAAetV,EAAKhO,MAAMmjB,cAAc5kB,UAAU8kB,EAAUhkB,OAAmB,IAAI8jB,eACrD,eAAvBE,EAAU5B,SACjB6B,EAAetV,EAAKhO,MAAMmjB,cAAcxe,YAAY0e,EAAUhkB,OAAmB,IAAI8jB,eACvD,aAAvBE,EAAU5B,WACjB6B,EAAetV,EAAKhO,MAAMmjB,cAActK,UAAUwK,EAAUhkB,OAAmB,IAAI8jB,gBAEvF,MAEJ,IAAK,SAC0B,WAAvBE,EAAU5B,SACV6B,EAAetV,EAAKxC,SAAW6X,EAAUhkB,MACX,cAAvBgkB,EAAU5B,WACjB6B,EAAetV,EAAKxC,SAAW6X,EAAUhkB,OAE7C,MAEJ,IAAK,cACD,MAAMkkB,EAAmBF,EAAUhkB,OAAmB,GAEtD,GAAIkkB,EAAiB5e,WAAW,SAAU,CAEtC,MAAMsM,EAASxR,SAAS8jB,EAAiBxY,QAAQ,QAAS,KAC1DuY,IAAiBtV,EAAK1C,aAAe0C,EAAK1C,YAAY9M,KAAOyS,CACjE,MAAO,GAAIsS,EAAiB5e,WAAW,SAAU,CAE7C,MAAMrD,EAAS7B,SAAS8jB,EAAiBxY,QAAQ,QAAS,KAC1DuY,IAAiBtV,EAAKrI,MAAQqI,EAAKrI,KAAKnH,KAAO8C,CACnD,MAAO,GAAyB,KAArBiiB,EAEPD,GAAe,OACZ,GAA2B,WAAvBD,EAAU5B,SAAuB,CAOxC6B,GALwBtV,EAAK1C,YACvB,GAAA5K,OAAGsN,EAAK1C,YAAY7F,UAAS,KAAA/E,OAAIsN,EAAK1C,YAAY5F,UAAWyd,cAC7DnV,EAAKrI,KACDqI,EAAKrI,KAAKR,KAAKge,cACf,MACyBI,EAAiBJ,aACxD,MAAO,GAA2B,aAAvBE,EAAU5B,SAAyB,CAO1C6B,GALwBtV,EAAK1C,YACvB,GAAA5K,OAAGsN,EAAK1C,YAAY7F,UAAS,KAAA/E,OAAIsN,EAAK1C,YAAY5F,UAAWyd,cAC7DnV,EAAKrI,KACDqI,EAAKrI,KAAKR,KAAKge,cACf,IACqB5kB,SAASglB,EAAiBJ,cAC7D,CACA,MAEJ,IAAK,iBACD,MAAMK,EAAsBH,EAAUhkB,OAAmB,GAEzD,GAAImkB,EAAoB7e,WAAW,SAAU,CAEzC,MAAMsM,EAASxR,SAAS+jB,EAAoBzY,QAAQ,QAAS,KAC7DuY,IAAiBtV,EAAK3C,gBAAkB2C,EAAK3C,eAAe7M,KAAOyS,CACvE,MAAO,GAA4B,KAAxBuS,EAEPF,GAAe,OACZ,GAA2B,WAAvBD,EAAU5B,SAAuB,CAKxC6B,GAH2BtV,EAAK3C,eAC1B,GAAA3K,OAAGsN,EAAK3C,eAAe5F,UAAS,KAAA/E,OAAIsN,EAAK3C,eAAe3F,UAAWyd,cACnE,MACgCK,EAAoBL,aAC9D,MAAO,GAA2B,aAAvBE,EAAU5B,SAAyB,CAK1C6B,GAH2BtV,EAAK3C,eAC1B,GAAA3K,OAAGsN,EAAK3C,eAAe5F,UAAS,KAAA/E,OAAIsN,EAAK3C,eAAe3F,UAAWyd,cACnE,IAC4B5kB,SAASilB,EAAoBL,cACnE,CACA,MAGJ,IAAK,+BACD,MAAMM,EAAgBJ,EAAUhkB,OAAmB,GAEnD,GAAIokB,EAAc9e,WAAW,SAAU,CAEnC,MAAMsM,EAASxR,SAASgkB,EAAc1Y,QAAQ,QAAS,KACvDuY,IACOtV,EAAK1C,aAAe0C,EAAK1C,YAAY9M,KAAOyS,KAC5CjD,EAAK3C,gBAAkB2C,EAAK3C,eAAe7M,KAAOyS,CAC7D,MAAO,GAAIwS,EAAc9e,WAAW,SAAU,CAE1C,MAAMrD,EAAS7B,SAASgkB,EAAc1Y,QAAQ,QAAS,KACvDuY,IAAiBtV,EAAKrI,MAAQqI,EAAKrI,KAAKnH,KAAO8C,CACnD,MAAO,GAAsB,KAAlBmiB,EAEPH,GAAe,OACZ,GAA2B,WAAvBD,EAAU5B,SAAuB,CAExC,MAAMiC,EAAkB1V,EAAK1C,YACvB,GAAA5K,OAAGsN,EAAK1C,YAAY7F,UAAS,KAAA/E,OAAIsN,EAAK1C,YAAY5F,UAAWyd,cAC7DnV,EAAKrI,KACDqI,EAAKrI,KAAKR,KAAKge,cACf,GACJQ,EAAqB3V,EAAK3C,eAC1B,GAAA3K,OAAGsN,EAAK3C,eAAe5F,UAAS,KAAA/E,OAAIsN,EAAK3C,eAAe3F,UAAWyd,cACnE,GACNG,EACII,IAAoBD,EAAcN,eAClCQ,IAAuBF,EAAcN,aAC7C,MAAO,GAA2B,aAAvBE,EAAU5B,SAAyB,CAE1C,MAAMiC,EAAkB1V,EAAK1C,YACvB,GAAA5K,OAAGsN,EAAK1C,YAAY7F,UAAS,KAAA/E,OAAIsN,EAAK1C,YAAY5F,UAAWyd,cAC7DnV,EAAKrI,KACDqI,EAAKrI,KAAKR,KAAKge,cACf,GACJQ,EAAqB3V,EAAK3C,eAC1B,GAAA3K,OAAGsN,EAAK3C,eAAe5F,UAAS,KAAA/E,OAAIsN,EAAK3C,eAAe3F,UAAWyd,cACnE,GACNG,EACII,EAAgBnlB,SAASklB,EAAcN,gBACvCQ,EAAmBplB,SAASklB,EAAcN,cAClD,CACA,MAEJ,IAAK,SACD,MAAM/I,EAAapM,EAAKpI,OAAOT,KAAKge,cAET,WAAvBE,EAAU5B,SACV6B,EAAelJ,KAAgBiJ,EAAUhkB,OAAmB,IAAI8jB,cAClC,aAAvBE,EAAU5B,WACjB6B,EAAelJ,EAAW7b,UAAU8kB,EAAUhkB,OAAmB,IAAI8jB,gBAEzE,MAEJ,IAAK,UACD,IAAKnV,EAAKpM,QAAS,CACf0hB,GAAe,EACf,KACJ,CAEA,MAAMM,EAAW,IAAIjc,KAAKqG,EAAKpM,SAE/B,GAA2B,WAAvByhB,EAAU5B,SAAuB,CACjC,MAAMoC,EAAa,IAAIlc,KAAK0b,EAAUhkB,OACtCikB,EAAeM,EAASE,iBAAmBD,EAAWC,cAC1D,MAAO,GAA2B,WAAvBT,EAAU5B,SAAuB,CAExC6B,EAAeM,EADI,IAAIjc,KAAK0b,EAAUhkB,MAE1C,MAAO,GAA2B,UAAvBgkB,EAAU5B,SAAsB,CAEvC6B,EAAeM,EADI,IAAIjc,KAAK0b,EAAUhkB,MAE1C,EAKR,GAAU,IAAN6J,EACAka,EAASE,MACN,CAEHF,EAAsB,QADLxG,EAAuB1T,EAAI,GACbka,GAAUE,EAAiBF,GAAUE,CACxE,CACJ,CAEA,IAAKF,EAAQ,OAAO,CACxB,CAEA,OAAO,CAAI,IAGnBxkB,QAAQyJ,IAAI,2BAAuB4a,EAASziB,OAAQ,MAAO4b,EAAM5b,QACjE,MAAMujB,EAASd,EACVe,MAAK,CAACle,EAAGwU,KAEN,GAAiB,UAAbyE,GAAsB,CACtB,MAAMkF,EAAkB/E,GAAkB7gB,QAAO6lB,GAASpE,GAAoBE,IAAIkE,KAElF,IAAK,MAAMC,KAAYF,EAAiB,CACpC,MAAM3G,EAAY0B,GAAmBmF,IAAa,MAClD,IAAIC,EAAaC,EAEjB,OAAQF,GACJ,IAAK,QACDC,EAASte,EAAE9F,MAAMmjB,cACjBkB,EAAS/J,EAAEta,MAAMmjB,cACjB,MACJ,IAAK,SACDiB,EAASrB,GAAkBjd,EAAE0F,QAC7B6Y,EAAStB,GAAkBzI,EAAE9O,QAC7B,MACJ,IAAK,cACD4Y,EAASte,EAAEwF,YAAc,GAAA5K,OAAGoF,EAAEwF,YAAY7F,UAAS,KAAA/E,OAAIoF,EAAEwF,YAAY5F,UAAWyd,cAAiBrd,EAAEH,KAAO,UAAAjF,OAAUoF,EAAEH,KAAKR,MAAOge,cAAgB,GAClJkB,EAAS/J,EAAEhP,YAAc,GAAA5K,OAAG4Z,EAAEhP,YAAY7F,UAAS,KAAA/E,OAAI4Z,EAAEhP,YAAY5F,UAAWyd,cAAiB7I,EAAE3U,KAAO,UAAAjF,OAAU4Z,EAAE3U,KAAKR,MAAOge,cAAgB,GAClJ,MACJ,IAAK,iBACDiB,EAASte,EAAEuF,eAAiB,GAAA3K,OAAGoF,EAAEuF,eAAe5F,UAAS,KAAA/E,OAAIoF,EAAEuF,eAAe3F,UAAWyd,cAAgB,GACzGkB,EAAS/J,EAAEjP,eAAiB,GAAA3K,OAAG4Z,EAAEjP,eAAe5F,UAAS,KAAA/E,OAAI4Z,EAAEjP,eAAe3F,UAAWyd,cAAgB,GACzG,MACJ,IAAK,SACDiB,EAASte,EAAEF,OAAOT,KAAKge,cACvBkB,EAAS/J,EAAE1U,OAAOT,KAAKge,cACvB,MACJ,IAAK,UACDiB,EAASte,EAAElE,QAAU,IAAI+F,KAAK7B,EAAElE,SAAS0Q,UAAYjN,OAAOif,iBAC5DD,EAAS/J,EAAE1Y,QAAU,IAAI+F,KAAK2S,EAAE1Y,SAAS0Q,UAAYjN,OAAOif,iBAC5D,MACJ,IAAK,cACDF,GAAUte,EAAE9E,aAAe,IAAImiB,cAC/BkB,GAAU/J,EAAEtZ,aAAe,IAAImiB,cAC/B,MACJ,QACI,SAIR,IAAIoB,EAAa,EAajB,GAXIA,EADkB,kBAAXH,GAAyC,kBAAXC,EACxBD,EAASC,EAET/U,OAAO8U,GAAQI,cAAclV,OAAO+U,IAInC,SAAd/G,IACAiH,GAAcA,GAIC,IAAfA,EACA,OAAOA,CAEf,CACA,OAAO,CACX,CAAO,CAEH,GAAInH,GAAWzO,IAAK,CAChB,IAAIyV,EAAQC,EAGZ,OAAQjH,GAAWzO,KACf,IAAK,QACDyV,EAASte,EAAE9F,MACXqkB,EAAS/J,EAAEta,MACX,MACJ,IAAK,SACDokB,EAASrB,GAAkBjd,EAAE0F,QAC7B6Y,EAAStB,GAAkBzI,EAAE9O,QAC7B,MACJ,IAAK,wBACD4Y,EAASte,EAAEwF,YAAW,GAAA5K,OAAMoF,EAAEwF,YAAY7F,UAAS,KAAA/E,OAAIoF,EAAEwF,YAAY5F,UAAcI,EAAEH,KAAI,UAAAjF,OAAaoF,EAAEH,KAAKR,MAAS,GACtHkf,EAAS/J,EAAEhP,YAAW,GAAA5K,OAAM4Z,EAAEhP,YAAY7F,UAAS,KAAA/E,OAAI4Z,EAAEhP,YAAY5F,UAAc4U,EAAE3U,KAAI,UAAAjF,OAAa4Z,EAAE3U,KAAKR,MAAS,GACtH,MACJ,IAAK,2BACDif,EAASte,EAAEuF,eAAc,GAAA3K,OAAMoF,EAAEuF,eAAe5F,UAAS,KAAA/E,OAAIoF,EAAEuF,eAAe3F,UAAa,GAC3F2e,EAAS/J,EAAEjP,eAAc,GAAA3K,OAAM4Z,EAAEjP,eAAe5F,UAAS,KAAA/E,OAAI4Z,EAAEjP,eAAe3F,UAAa,GAC3F,MACJ,IAAK,cACD0e,EAASte,EAAEF,OAAOT,KAClBkf,EAAS/J,EAAE1U,OAAOT,KAClB,MACJ,IAAK,UACDif,EAASte,EAAElE,QAAU,IAAI+F,KAAK7B,EAAElE,SAAS0Q,UAAYjN,OAAOif,iBAC5DD,EAAS/J,EAAE1Y,QAAU,IAAI+F,KAAK2S,EAAE1Y,SAAS0Q,UAAYjN,OAAOif,iBAC5D,MACJ,QACIF,EAASte,EAAEsX,GAAWzO,KACtB0V,EAAS/J,EAAE8C,GAAWzO,KAI9B,GAAsB,kBAAXyV,GAAyC,kBAAXC,EACrC,MAAgC,QAAzBjH,GAAWE,UAAsB8G,EAASC,EAASA,EAASD,EAChE,CACH,MAAMG,EAAajV,OAAO8U,GAAQI,cAAclV,OAAO+U,IACvD,MAAgC,QAAzBjH,GAAWE,UAAsBiH,GAAcA,CAC1D,CACJ,CAGA,MAAME,EAAQ3e,EAAElE,QAAU,IAAI+F,KAAK7B,EAAElE,SAAS0Q,UAAYjN,OAAOif,iBAC3DI,EAAQpK,EAAE1Y,QAAU,IAAI+F,KAAK2S,EAAE1Y,SAAS0Q,UAAYjN,OAAOif,iBAEjE,GAAIG,IAAUC,EACV,OAAOD,EAAQC,EAInB,MAAMC,EAAc5B,GAAkBjd,EAAE0F,QAClCoZ,EAAc7B,GAAkBzI,EAAE9O,QAExC,OAAImZ,IAAgBC,EACTD,EAAcC,EAIlB9e,EAAE9F,MAAMwkB,cAAclK,EAAEta,MACnC,KAIR,OADApB,QAAQyJ,IAAI,yCAAqC0b,EAAOvjB,QACjDujB,CAAM,GACd,CAAC3H,EAAOE,EAAYc,GAAY2F,GAAmBrG,EAAkBE,EAAwBmC,GAAUG,GAAmBY,GAAqBd,KAG5I6F,GAAmBA,CAACC,EAAmBC,KAEzC,MAAMC,EAAiB,IAAIjH,GAASoB,aAC9BV,EAAgBuG,EAAeF,GAGrCE,EAAeC,OAAOH,EAAW,GACjCE,EAAeC,OAAOF,EAAY,EAAGtG,GAGrCR,GAAkB+G,EAAe,EAI/BE,GAAmBf,IACrBzF,GAAiByF,EAAS,EAGxBvhB,GAAiBA,CAACrD,EAAoB4kB,KACxC5kB,EAAE8J,iBACEoV,IAAiBA,KAAkB0F,GACnCvF,GAAkBuF,EACtB,EAGExhB,GAAaA,CAACpD,EAAoB4kB,KAEpC,GADA5kB,EAAE8J,iBACEoV,IAAiBA,KAAkB0F,EAAU,CAC7C,MAAMW,EAAY/G,GAASoB,YAAY/V,QAAQqV,IACzCsG,EAAahH,GAASoB,YAAY/V,QAAQ+a,GAE5CW,GAAa,GAAKC,GAAc,GAChCF,GAAiBC,EAAWC,EAEpC,CACArG,GAAiB,MACjBE,GAAkB,KAAK,EAGrBuG,GAAgBA,KAClBzG,GAAiB,MACjBE,GAAkB,KAAK,EAcrBwG,IATsBhN,EAAAA,EAAAA,UAAQ,KAChC,MAEMiN,GAFetH,GAASoB,aAAe,IAEb9gB,QAAOG,GAAY,MAANA,GAA4B,kBAAPA,IAE5D8mB,EAAiB9J,GAAmBnd,QAAOG,IAAO6mB,EAAW9mB,SAASC,KAC5E,MAAO,IAAI6mB,KAAeC,EAAe,GAC1C,CAACvH,GAASoB,cAEgC9gB,QAAOG,GAAY,MAANA,GAA4B,kBAAPA,GAAmB4f,GAAgB5f,KAG5G+mB,GAAiB3nB,UACnB,IAAK,IAAD4nB,EAEA,MAAMC,EAAiB,CACnBzlB,MAAM,GAADU,OAAKsN,EAAKhO,MAAK,UACpBgB,YAAagN,EAAKhN,YAClBwK,OAAQ,OACRpK,cAAe4M,EAAK1C,YAAc0C,EAAK1C,YAAY9M,GAAK,KACxD8C,OAAQ0M,EAAKrI,KAAOqI,EAAKrI,KAAKnH,GAAK,KACnCgD,kBAAqC,QAAnBgkB,EAAAxX,EAAK3C,sBAAc,IAAAma,OAAA,EAAnBA,EAAqBhnB,KAAM,KAC7CkD,SAAUsM,EAAKpI,OAAOpH,GACtBoD,QAASoM,EAAKpM,SAIZ9C,QAAiBhB,EAAAA,EAAc2N,KACjCzN,EAAAA,GAAc0N,MAAMvN,KACpBsnB,GAIJpJ,GAASwF,GAAa,CAAC/iB,EAASV,QAASyjB,KAGzCjE,GAAgB9e,EAASV,MACzBsf,IAAmB,EAEvB,CAAE,MAAOjf,GAAM,IAADC,EAAAC,EACVC,QAAQnB,MAAM,kCAAmCgB,GAEjD,MAAMI,EAAaJ,EACnBf,GAA4B,QAAnBgB,EAAAG,EAAWC,gBAAQ,IAAAJ,GAAM,QAANC,EAAnBD,EAAqBN,YAAI,IAAAO,OAAN,EAAnBA,EAA2BI,UAAWF,EAAWE,SAAW,0CACzE,GAGE2mB,GAAmB9nB,UACrB,GAAI+I,OAAO6T,QAAQ3X,EAAE,wCAAyC,CAC1DjE,QAAQyJ,IAAI,kDAAiC8D,GAC7CvN,QAAQyJ,IAAI,+CAAmC+T,EAAM5b,QAIrD6b,GAASwF,IACL,MAAMoB,EAAWpB,EAAUxjB,QAAO2P,GAAgB,MAARA,GAAgBA,EAAKxP,KAAO2N,IAEtE,OADAvN,QAAQyJ,IAAI,qCAA4B4a,EAASziB,OAAQ,MAAOqhB,EAAUrhB,QACnEyiB,CAAQ,IAInBlB,GAAAA,GAAM4D,KAAK,kCAEX,IACI/mB,QAAQyJ,IAAI,8CACNvK,EAAAA,EAAciV,OAAO/U,EAAAA,GAAc0N,MAAM7L,MAAMsM,IACrDvN,QAAQyJ,IAAI,6BAEZ0Z,GAAAA,GAAMC,QAAQnf,EAAE,iCACpB,CAAE,MAAOpF,GAELmB,QAAQnB,MAAM,6CAAsCA,GACpD4iB,KACA0B,GAAAA,GAAMtkB,MAAMoF,EAAE,sCAClB,CACJ,GAiBJ,OACI5D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gCAA+BC,SAAA,EAC1CC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,sEAAqEC,UAEhFF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,cAAaC,SAAA,EAExBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yBAAwBC,SAAA,EAEnCF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wHAAuHC,SAAA,EAClIF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yDAAwDC,SAAA,EAEnEC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,oBAAmBC,SAC7ByS,EAAc,QAAS,QAAS,WAC7BxS,EAAAA,EAAAA,KAAA,UACIc,QAASA,IAAMsd,IAAqB,GACpCte,UAAU,+MACV4N,MAAO,CAAE8Y,MAAO,UAAWC,OAAQ,WACnC7lB,MAAO6C,EAAE,oBACT,aAAYA,EAAE,oBAAoB1D,UAElCC,EAAAA,EAAAA,KAAC0mB,EAAAA,EAAQ,CAAC5mB,UAAU,iBAMhCD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oBAAmBC,SAAA,EAC9BC,EAAAA,EAAAA,KAAC2mB,EAAAA,EAAe,CAAC7mB,UAAU,kCAC3BE,EAAAA,EAAAA,KAAA,MAAIF,UAAU,wCAAuCC,SAAE0D,EAAE,qBAI7D5D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4BAA2BC,SAAA,EACtCC,EAAAA,EAAAA,KAAA,SACIa,KAAK,OACL0D,YAAad,EAAE,iBAAmB,MAClC3D,UAAU,4OACVG,MAAOid,EACPhd,SAAWC,GAAMgd,EAAchd,EAAEG,OAAOL,UAI5CD,EAAAA,EAAAA,KAAA,UACIF,UAAS,2DAAAwB,OACQ,UAAbqe,GAAuB,kEAAoE,IAE/F7e,QAASA,IAAMme,GAA4B,UAAbU,GAAuB,QAAU,SAC/D/e,MAA8B6C,EAAV,UAAbkc,GAAyB,qBAA0B,sBAAsB5f,SAElE,UAAb4f,IACG3f,EAAAA,EAAAA,KAAC4mB,EAAAA,EAAc,CAAC9mB,UAAU,aAE1BE,EAAAA,EAAAA,KAAC6mB,EAAAA,EAAc,CAAC/mB,UAAU,eAKlCD,EAAAA,EAAAA,MAAA,UACIC,UAAS,kBAAAwB,OAAoBkiB,KAAyB,EAAI,kEAAoE,2CAA0C,kBACxK1iB,QAASA,IAAMid,IAAsBD,IACrCld,MAAO6C,EAAE,iBAAiB1D,SAAA,EAE1BC,EAAAA,EAAAA,KAAC8mB,EAAAA,EAAU,CAAChnB,UAAU,YACrB0jB,KAAyB,IACtBxjB,EAAAA,EAAAA,KAAA,QAAMF,UAAU,gHAA+GC,SAC1HyjB,WAMbxjB,EAAAA,EAAAA,KAAA,OAAKF,UAAU,OAAMC,UACjBC,EAAAA,EAAAA,KAAC+mB,EAAAA,EAAiB,CACdC,QAAsB,UAAbrH,GACH,CACE,CAAEvgB,GAAI,QAASyd,MAAOpZ,EAAE,wBACxB,CAAErE,GAAI,SAAUyd,MAAOpZ,EAAE,yBACzB,CAAErE,GAAI,cAAeyd,MAAOpZ,EAAE,8BAC9B,CAAErE,GAAI,iBAAkByd,MAAOpZ,EAAE,iCACjC,CAAErE,GAAI,SAAUyd,MAAOpZ,EAAE,yBACzB,CAAErE,GAAI,UAAWyd,MAAOpZ,EAAE,0BAC1B,CAAErE,GAAI,cAAeyd,MAAOpZ,EAAE,+BAEhCmZ,EACNqK,eAA6B,UAAbtH,GACVzZ,MAAMghB,KAAKxG,IACXsF,GACNjG,YAA0B,UAAbJ,GACPG,GACAnB,GAASoB,YACfoH,yBAA2BpC,IACvB,GAAiB,UAAbpF,GAAsB,CAEtB,MAAMyH,EAAc5K,GAAmBuI,GACnCqC,GACArI,GAAuBqI,EAE/B,MACIrI,GAAuBgG,EAC3B,EAEJsC,aAA2B,UAAb1H,GACR,CAAC+F,EAAmBC,KAClB,MAAM2B,EAAe,IAAIxH,IACnByH,EAAUD,EAAa5B,GAC7B4B,EAAazB,OAAOH,EAAW,GAC/B4B,EAAazB,OAAOF,EAAY,EAAG4B,GAGnC,MAAMC,EAA0B,GAC1BC,EAAmB,IAAInH,IAE7BgH,EAAajY,SAAQ6Q,IACjB,MAAMD,EAAWzD,GAAmB0D,GAChCD,IAAawH,EAAiB7G,IAAIX,KAClCwH,EAAiBlH,IAAIN,GACrBuH,EAAc5S,KAAKqL,GACvB,IAIJrD,EAAiBvN,SAAQqY,IAChBF,EAAcroB,SAASuoB,EAAItoB,KAAkB,YAAXsoB,EAAItoB,IACvCooB,EAAc5S,KAAK8S,EAAItoB,GAC3B,IAGJyf,GAAkB2I,EAAc,EAElC/B,GACNkC,eAA6B,UAAbhI,GAAuBC,QAAqBpK,EAC5DoS,sBAAoC,UAAbjI,GACjB,CAACoF,EAAkB7G,KACjB2B,IAAsBnV,IAAI0H,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACnB1H,GAAI,IACP,CAACqa,GAAW7G,KACb,OAEL1I,EACNqS,kBAAgC,UAAblI,GACnBmI,YAAoCrkB,EAAV,UAAbkc,GAAyB,6BAAkC,yBACxEoI,WAAmCtkB,EAAV,UAAbkc,GAAyB,6BAAkC,yBACvE5Y,QAASA,iBAOxB+W,KACG9d,EAAAA,EAAAA,KAAA,OAAKF,UAAwB,UAAb6f,GAAuB,+CAAiD,uBAAuB5f,UAC3GC,EAAAA,EAAAA,KAACgoB,GAAAA,EAAU,CACXhB,QAAS,IAAIpK,KAAqBG,GAClCkL,QAASxG,GACTyG,QAASzE,GACT0E,gBAAiB7K,EACjB8K,eAAgB5K,EAChB2E,QAAS9F,QAMjBrc,EAAAA,EAAAA,KAAA,OAAKF,UAAwB,UAAb6f,GAAuB,+CAAiD,uBAAuB5f,UAC3GC,EAAAA,EAAAA,KAACqoB,GAAAA,EAAe,CAChBlG,QAAS9F,GACTiM,eAAgB7G,GAChByG,QAASzE,GACT/F,iBAAkBA,EAClBE,iBAAkBA,EAClB2K,eAAgB7E,GAChB8E,kBAAmB/kB,EAAE,6BAKX,UAAbkc,IAEG3f,EAAAA,EAAAA,KAAA,OAAKF,UAAU,0CAAyCC,UACpDF,EAAAA,EAAAA,MAAA,SAAOC,UAAU,2DAA0DC,SAAA,EACvEC,EAAAA,EAAAA,KAAA,SAAOF,UAAU,8BAA6BC,UAC1CC,EAAAA,EAAAA,KAAA,MAAAD,SACKimB,GAAiBrlB,KAAKokB,IACnB,MAAM3C,EAASxF,EAAiBpc,MAAKknB,GAAOA,EAAItoB,KAAO2lB,IACvD,OAAK3C,GAGDpiB,EAAAA,EAAAA,KAAA,MAEIyoB,MAAM,MACN3oB,UAAS,qHAAAwB,OAAuHyjB,IAAaxF,GAAiB,+BAAiC,IAC/LmJ,WAAW,EACXC,YAAaA,IAAM7C,GAAgBf,GACnCzgB,WAAanE,GAAMqD,GAAerD,EAAG4kB,GACrC1gB,OAASlE,GAAMoD,GAAWpD,EAAG4kB,GAC7B6D,UAAW7C,GAAchmB,UAEzBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oBAAmBC,SAAA,CAC7BwH,OAAOC,YAAc,IAAM4a,EAAOtF,WAAasF,EAAOvF,MACzC,YAAbkI,IACG/kB,EAAAA,EAAAA,KAAA,UACIc,QAASA,IAAMqiB,GAAW4B,GAC1BjlB,UAAU,0BAAyBC,UAEnCC,EAAAA,EAAAA,KAAC6oB,EAAAA,EAAgB,CAAC/oB,UAAU,mDAhBnCilB,GAJO,IAwBX,SAKrB/kB,EAAAA,EAAAA,KAAA,SAAOF,UAAU,0EAAyEC,SACrF5B,GACG6B,EAAAA,EAAAA,KAAA,MAAAD,UACIC,EAAAA,EAAAA,KAAA,MAAI8oB,QAAS9C,GAAiB5kB,OAAQtB,UAAU,wCAAuCC,UACnFC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,sBAAqBC,UAChCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,4FAI3BzB,GACA2B,EAAAA,EAAAA,KAAA,MAAAD,UACIC,EAAAA,EAAAA,KAAA,MAAI8oB,QAAS9C,GAAiB5kB,OAAQtB,UAAU,uDAAsDC,SACjG1B,MAGyB,IAAlCulB,GAAuBxiB,QACvBpB,EAAAA,EAAAA,KAAA,MAAAD,UACIC,EAAAA,EAAAA,KAAA,MAAI8oB,QAAS9C,GAAiB5kB,OAAQtB,UAAU,yDAAwDC,UACpGF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kDAAiDC,SAAA,EAChEC,EAAAA,EAAAA,KAAC+oB,EAAAA,EAAyB,CAACjpB,UAAU,gDACrCE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,UAASC,SAAE0D,EAAE,gCAKxCzD,EAAAA,EAAAA,KAAA+D,EAAAA,SAAA,CAAAhE,SACC6jB,GAAuBoF,MAAM,EAAGvJ,IAAc9e,KAAIiO,IACnD,MAAMqa,GAAeC,EAAAA,GAAAA,IAAgBta,EAAKpM,QAAS,YAAQgT,EAAW5G,EAAKhO,MAAOgO,EAAKhN,aACjFunB,GAAeC,EAAAA,GAAAA,IAAsBH,GAE3C,OACIjpB,EAAAA,EAAAA,KAAA,MAEIF,UAAS,2CAAAwB,OACY,SAAjB2nB,EAAuB,GAAA3nB,OAAM6nB,EAAaE,QAAO,KAAA/nB,OAAI6nB,EAAaG,YAAW,eAAgB,IAC9FvpB,SAEFimB,GAAiBrlB,KAAIokB,IACtB,OAAQA,GACJ,IAAK,QACD,OACI/kB,EAAAA,EAAAA,KAAA,MAAmBF,UAAU,4BAA2BC,UACpDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yEAAwEC,SAAA,CAClF6O,EAAKhO,MACDgO,EAAKhN,cACF/B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBC,SAAA,EAChCC,EAAAA,EAAAA,KAAA,UACIF,UAAU,gFACVc,MAAO6C,EAAE,yBAAyB1D,UAElCC,EAAAA,EAAAA,KAACupB,EAAAA,EAAqB,CAACzpB,UAAU,eAErCE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,kOAAiOC,UAC5OC,EAAAA,EAAAA,KAAC6F,EAAAA,EAAe,CAAC3E,QAAS0N,EAAKhN,YAAakE,kBAAkB,aAZ7Eif,GAmBb,IAAK,SACD,OACI/kB,EAAAA,EAAAA,KAAA,MAAmBF,UAAU,8CAA6CC,UACtEC,EAAAA,EAAAA,KAAA,QAAMF,UAAS,iEAAAwB,QAAmEkoB,EAAAA,GAAAA,IAAe5a,EAAKxC,OAAQ,QAAO,kCAAiCrM,SACjJ6O,EAAKxC,UAFL2Y,GAMjB,IAAK,+BACD,OACI/kB,EAAAA,EAAAA,KAAA,MAAmBF,UAAU,8CAA6CC,UACtEF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAeC,SAAA,EAC1BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2CAA0CC,SAAA,EACrDF,EAAAA,EAAAA,MAAA,QAAMC,UAAU,4DAA2DC,SAAA,CAAE0D,EAAE,6BAA6B,QAC5G5D,EAAAA,EAAAA,MAAA,QAAMC,UAAU,4DAA2DC,SAAA,CAAE0D,EAAE,6BAA6BtC,UAAU,EAAG,GAAG,QAAQnB,EAAAA,EAAAA,KAAA,SACnI4O,EAAK1C,YAAW,GAAA5K,OAAMsN,EAAK1C,YAAY7F,UAAS,KAAA/E,OAAIsN,EAAK1C,YAAY5F,UAAasI,EAAKrI,KAAOqI,EAAKrI,KAAKR,KAAO,QAEpHlG,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gDAA+CC,SAAA,EAC1DC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,4DAA2DC,SAAE0D,EAAE,gCAC/E5D,EAAAA,EAAAA,MAAA,QAAMC,UAAU,4DAA2DC,SAAA,CAAE0D,EAAE,gCAAgCtC,UAAU,EAAG,GAAG,QAAQnB,EAAAA,EAAAA,KAAA,SACtI4O,EAAK3C,eAAc,GAAA3K,OAAMsN,EAAK3C,eAAe5F,UAAS,KAAA/E,OAAIsN,EAAK3C,eAAe3F,UAAa,WAV/Fye,GAejB,IAAK,SACD,OACI/kB,EAAAA,EAAAA,KAAA,MAAmBF,UAAU,8CAA6CC,UACtEC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2CAA0CC,SAAE6O,EAAKpI,OAAOT,QADlEgf,GAIjB,IAAK,UACD,MAAM0E,GAAsBP,EAAAA,GAAAA,IAAgBta,EAAKpM,QAAS,YAAQgT,EAAW5G,EAAKhO,MAAOgO,EAAKhN,aACxF8nB,GAAsBN,EAAAA,GAAAA,IAAsBK,GAClD,OACIzpB,EAAAA,EAAAA,KAAA,MAAmBF,UAAU,8CAA6CC,UACtEF,EAAAA,EAAAA,MAAA,OAAKC,UAAS,WAAAwB,OAAqC,SAAxBmoB,EAAiCC,EAAoBC,UAAY,oCAAqC5pB,SAAA,CAC5H6O,EAAKpM,QAAU,IAAI+F,KAAKqG,EAAKpM,SAASonB,qBAAuB,IACrC,SAAxBH,IACGzpB,EAAAA,EAAAA,KAAA,QAAMF,UAAU,eAAcC,SAAC,eAJlCglB,GASjB,IAAK,UACD,OACI/kB,EAAAA,EAAAA,KAAA,MAAmBF,UAAU,8CAA6CC,UACtEF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gCAA+BC,SAAA,EAC1CC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iBAAgBC,SAC1BqjB,GAAoBxU,KAExB4D,EAAc,QAAS,QAAS,WAC7BxS,EAAAA,EAAAA,KAAA,UACIc,QAASA,KACL0d,GAAgB5P,GAChB0P,IAAmB,EAAK,EAE5Bxe,UAAU,sFACVc,MAAO6C,EAAE,eAAe1D,UAExBC,EAAAA,EAAAA,KAAC6pB,EAAAA,EAAU,CAAC/pB,UAAU,cAG7B0S,EAAc,QAAS,OAAQ,WAC5BxS,EAAAA,EAAAA,KAAA,UACIc,QAASA,IAAMqlB,GAAevX,GAC9B9O,UAAU,0FACVc,MAAO6C,EAAE,sBAAsB1D,UAE/BC,EAAAA,EAAAA,KAAC8pB,EAAAA,EAAqB,CAAChqB,UAAU,cAGxC0S,EAAc,QAAS,SAAU,WAC9BxS,EAAAA,EAAAA,KAAA,UACIc,QAASA,IAAMwlB,GAAiB1X,EAAKxP,IACrCU,UAAU,kFACVc,MAAO6C,EAAE,iBAAiB1D,UAE1BC,EAAAA,EAAAA,KAACsW,EAAAA,EAAS,CAACxW,UAAU,kBAhC5BilB,GAsCjB,QACI,OAAO,KACf,KAlHCnW,EAAKxP,GAoHL,cAUzBY,EAAAA,EAAAA,KAAA,OAAKF,UAAU,0BAAyBC,SACnC5B,GACG6B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,4BAA2BC,UACtCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wFAEnBzB,GACA2B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2DAA0DC,SACpE1B,IAE6B,IAAlCulB,GAAuBxiB,QACvBvB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mFAAkFC,SAAA,EAC7FC,EAAAA,EAAAA,KAAC+oB,EAAAA,EAAyB,CAACjpB,UAAU,qDACrCE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,UAASC,SAAC,+BAG7BC,EAAAA,EAAAA,KAAC+pB,GAAAA,EAAQ,CAAAhqB,SACJ6jB,GAAuBoF,MAAM,EAAGvJ,IAAc9e,KAAIiO,KAC1Bsa,EAAAA,GAAAA,IAAgBta,EAAKpM,QAAS,YAAQgT,EAAW5G,EAAKhO,MAAOgO,EAAKhN,aAAvF,MAGMooB,EAA2B,GAajC,GAVItJ,GAAoBE,IAAI,WACxBoJ,EAASpV,KAAK,CACVqV,MAAMjqB,EAAAA,EAAAA,KAACkqB,EAAAA,EAAkB,CAACpqB,UAAU,YACpC+c,MAAOpZ,EAAE,wBACTxD,MAAO2O,EAAKpI,OAAOT,KACnBokB,QAAS,SAKbzJ,GAAoBE,IAAI,eAAgB,CAExC,MAAMuD,EAAmBvV,EAAK1C,YAAW,GAAA5K,OAAMsN,EAAK1C,YAAY7F,UAAS,KAAA/E,OAAIsN,EAAK1C,YAAY5F,UAAcsI,EAAKrI,KAAOqI,EAAKrI,KAAKR,KAAO,IACnIqkB,EAAgBjG,EAAiB/iB,OAAS,GAA0B,MAArB+iB,EAA2BA,EAAiBhjB,UAAU,EAAG,GAAKgjB,EACnH6F,EAASpV,KAAK,CACVqV,MAAMjqB,EAAAA,EAAAA,KAACqqB,EAAAA,EAAQ,CAACvqB,UAAU,YAC1B+c,MAAOpZ,EAAE,6BACTxD,MAAOmqB,EACPD,QAAS,QAEjB,CACA,GAAIzJ,GAAoBE,IAAI,kBAAmB,CAE3C,MAAMwD,EAAsBxV,EAAK3C,eAAc,GAAA3K,OAAMsN,EAAK3C,eAAe5F,UAAS,KAAA/E,OAAIsN,EAAK3C,eAAe3F,UAAa,IACjH8jB,EAAgBhG,EAAoBhjB,OAAS,GAA6B,MAAxBgjB,EAA8BA,EAAoBjjB,UAAU,EAAG,GAAKijB,EAC5H4F,EAASpV,KAAK,CACVqV,MAAMjqB,EAAAA,EAAAA,KAACqqB,EAAAA,EAAQ,CAACvqB,UAAU,YAC1B+c,MAAOpZ,EAAE,gCACTxD,MAAOmqB,EACPD,QAAS,eAEjB,CAGA,GAAIzJ,GAAoBE,IAAI,WAAY,CACpC,MAAM0J,GAAcC,EAAAA,GAAAA,IAChB3b,EAAKpM,QACL,OACAoM,EAAKhO,MACLgO,EAAKhN,aACL5B,EAAAA,EAAAA,KAACwqB,EAAAA,EAAY,CAAC1qB,UAAU,YACxB2D,EAAE,0BACD6E,IAASmiB,EAAAA,GAAAA,IAAOniB,EAAM,aAAc,CAAEoiB,OAAQC,GAAAA,OAC/C,GAEJX,EAASpV,MAAIxC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EACRkY,GAAW,IACdH,QAAS,iBAEjB,CAGIzJ,GAAoBE,IAAI,gBAAkBhS,EAAKhN,aAC/CooB,EAASpV,KAAK,CACViI,MAAOpZ,EAAE,6BACTxD,MAAO,GACP2qB,mBAAoBhc,EAAKhN,YACzBipB,mBAAoBjc,EAAKiE,aAAe,GACxCsX,QAAS,SAKjB,MAAMW,GACFjrB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8BAA6BC,SAAA,EAExCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iBAAgBC,SAC1BqjB,GAAoBxU,KAExB4D,EAAc,QAAS,QAAS,WAC7BxS,EAAAA,EAAAA,KAAA,UACIc,QAAUX,IACNA,EAAEiK,kBACFoU,GAAgB5P,GAChB0P,IAAmB,EAAK,EAE5Bxe,UAAU,sFACVc,MAAO6C,EAAE,eAAe1D,UAExBC,EAAAA,EAAAA,KAAC6pB,EAAAA,EAAU,CAAC/pB,UAAU,cAG7B0S,EAAc,QAAS,OAAQ,WAC5BxS,EAAAA,EAAAA,KAAA,UACIc,QAAUX,IACNA,EAAEiK,kBACF+b,GAAevX,EAAK,EAExB9O,UAAU,0FACVc,MAAO6C,EAAE,sBAAsB1D,UAE/BC,EAAAA,EAAAA,KAAC8pB,EAAAA,EAAqB,CAAChqB,UAAU,iBAMjD,OACIE,EAAAA,EAAAA,KAAC+qB,GAAAA,EAAQ,CAELnqB,MAAOgO,EAAKhO,MACZwL,OAAQ,CACJyQ,OAAOmO,EAAAA,GAAAA,IAAcpc,EAAKxC,OAAQ,OAAQ3I,GAC1CwnB,OAAOzB,EAAAA,GAAAA,IAAe5a,EAAKxC,OAAQ,QACnC8e,qBAAiB1V,EACjB2V,iBAAa3V,GAEjBwU,SAAUA,EACVoB,QAASN,GATJlc,EAAKxP,GAUZ,QASzBwkB,GAAuBxiB,OAASqe,KAC7Bzf,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2BAA0BC,UACrCF,EAAAA,EAAAA,MAAA,UACIC,UAAU,0LACVgB,QAASA,IAAM4e,IAAgB2L,GAAaA,EAAY,KAAItrB,SAAA,CAE3D0D,EAAE,mBAAmB,KAAGmgB,GAAuBxiB,OAASqe,GAAa,IAAEhc,EAAE,oBAAoB,aAO9GzD,EAAAA,EAAAA,KAAA,OAAKF,UAAU,8HAA6HC,UACxIC,EAAAA,EAAAA,KAACyX,GAAe,UAKxB5X,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kBAAiBC,SAAA,EAE5BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,OAAMC,UACjBC,EAAAA,EAAAA,KAACyX,GAAe,OAIpB5X,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wHAAuHC,SAAA,EAClIF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8DAA6DC,SAAA,EAExEC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,oBAAmBC,SAC7ByS,EAAc,QAAS,QAAS,WAC7BxS,EAAAA,EAAAA,KAAA,UACIc,QAASA,IAAMsd,IAAqB,GACpCte,UAAU,+MACV4N,MAAO,CAAE8Y,MAAO,UAAWC,OAAQ,WACnC7lB,MAAO6C,EAAE,oBACT,aAAYA,EAAE,oBACd,kBAAgB,qBAAoB1D,UAEpCC,EAAAA,EAAAA,KAAC0mB,EAAAA,EAAQ,CAAC5mB,UAAU,iBAMhCD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oBAAmBC,SAAA,EAC9BC,EAAAA,EAAAA,KAAC2mB,EAAAA,EAAe,CAAC7mB,UAAU,kCAC3BE,EAAAA,EAAAA,KAAA,MAAIF,UAAU,wCAAuCC,SAAE0D,EAAE,qBAI7D5D,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4BAA2BC,SAAA,EACtCC,EAAAA,EAAAA,KAAA,SACIa,KAAK,OACL0D,YAAad,EAAE,iBAAmB,MAClC3D,UAAU,4OACVG,MAAOid,EACPhd,SAAWC,GAAMgd,EAAchd,EAAEG,OAAOL,UAI5CD,EAAAA,EAAAA,KAAA,UACIF,UAAS,2DAAAwB,OACQ,UAAbqe,GAAuB,kEAAoE,IAE/F7e,QAASA,IAAMme,GAA4B,UAAbU,GAAuB,QAAU,SAC/D/e,MAA8B6C,EAAV,UAAbkc,GAAyB,qBAA0B,sBAAsB5f,SAElE,UAAb4f,IACG3f,EAAAA,EAAAA,KAAC4mB,EAAAA,EAAc,CAAC9mB,UAAU,aAE1BE,EAAAA,EAAAA,KAAC6mB,EAAAA,EAAc,CAAC/mB,UAAU,eAKlCD,EAAAA,EAAAA,MAAA,UACIC,UAAS,kBAAAwB,OAAoBkiB,KAAyB,EAAI,kEAAoE,2CAA0C,kBACxK1iB,QAASA,IAAMid,IAAsBD,IACrCld,MAAO6C,EAAE,iBAAiB1D,SAAA,EAE1BC,EAAAA,EAAAA,KAAC8mB,EAAAA,EAAU,CAAChnB,UAAU,YACrB0jB,KAAyB,IACtBxjB,EAAAA,EAAAA,KAAA,QAAMF,UAAU,gHAA+GC,SAC1HyjB,WAMbxjB,EAAAA,EAAAA,KAAA,OAAKF,UAAU,OAAMC,UACjBC,EAAAA,EAAAA,KAAC+mB,EAAAA,EAAiB,CACdC,QAAsB,UAAbrH,GACH,CACE,CAAEvgB,GAAI,QAASyd,MAAOpZ,EAAE,wBACxB,CAAErE,GAAI,SAAUyd,MAAOpZ,EAAE,yBACzB,CAAErE,GAAI,cAAeyd,MAAOpZ,EAAE,8BAC9B,CAAErE,GAAI,iBAAkByd,MAAOpZ,EAAE,iCACjC,CAAErE,GAAI,SAAUyd,MAAOpZ,EAAE,yBACzB,CAAErE,GAAI,UAAWyd,MAAOpZ,EAAE,0BAC1B,CAAErE,GAAI,cAAeyd,MAAOpZ,EAAE,+BAEhCmZ,EACNqK,eAA6B,UAAbtH,GACVzZ,MAAMghB,KAAKxG,IACXsF,GACNjG,YAA0B,UAAbJ,GACPG,GACAnB,GAASoB,YACfoH,yBAA2BpC,IACvB,GAAiB,UAAbpF,GAAsB,CACtB,MAAMyH,EAAc5K,GAAmBuI,GACnCqC,GACArI,GAAuBqI,EAE/B,MACIrI,GAAuBgG,EAC3B,EAEJsC,aAA2B,UAAb1H,GACR,CAAC+F,EAAmBC,KAClB,MAAM2B,EAAe,IAAIxH,IACnByH,EAAUD,EAAa5B,GAC7B4B,EAAazB,OAAOH,EAAW,GAC/B4B,EAAazB,OAAOF,EAAY,EAAG4B,GAEnC,MAAMC,EAA0B,GAC1BC,EAAmB,IAAInH,IAE7BgH,EAAajY,SAAQ6Q,IACjB,MAAMD,EAAWzD,GAAmB0D,GAChCD,IAAawH,EAAiB7G,IAAIX,KAClCwH,EAAiBlH,IAAIN,GACrBuH,EAAc5S,KAAKqL,GACvB,IAGJrD,EAAiBvN,SAAQqY,IAChBF,EAAcroB,SAASuoB,EAAItoB,KAAkB,YAAXsoB,EAAItoB,IACvCooB,EAAc5S,KAAK8S,EAAItoB,GAC3B,IAGJyf,GAAkB2I,EAAc,EAElC/B,GACNkC,eAA6B,UAAbhI,GAAuBC,QAAqBpK,EAC5DoS,sBAAoC,UAAbjI,GACjB,CAACoF,EAAkB7G,KACjB2B,IAAsBnV,IAAI0H,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACnB1H,GAAI,IACP,CAACqa,GAAW7G,KACb,OAEL1I,EACNqS,kBAAgC,UAAblI,GACnBmI,YAAoCrkB,EAAV,UAAbkc,GAAyB,6BAAkC,yBACxEoI,WAAmCtkB,EAAV,UAAbkc,GAAyB,6BAAkC,yBACvE5Y,QAASA,iBAOxB+W,KACG9d,EAAAA,EAAAA,KAAA,OAAKF,UAAwB,UAAb6f,GAAuB,+CAAiD,uBAAuB5f,UAC3GC,EAAAA,EAAAA,KAACgoB,GAAAA,EAAU,CACXhB,QAAS,IAAIpK,KAAqBG,GAClCkL,QAASxG,GACTyG,QAASzE,GACT0E,gBAAiB7K,EACjB8K,eAAgB5K,EAChB2E,QAAS9F,QAMjBrc,EAAAA,EAAAA,KAACqoB,GAAAA,EAAe,CACZlG,QAAS9F,GACTiM,eAAgB7G,GAChByG,QAASzE,GACT/F,iBAAkBA,EAClBE,iBAAkBA,EAClB2K,eAAgB7E,GAChB8E,kBAAmB/kB,EAAE,2BAIX,UAAbkc,IAEG3f,EAAAA,EAAAA,KAAA,OAAKF,UAAU,kBAAiBC,UAC5BF,EAAAA,EAAAA,MAAA,SAAOC,UAAU,2DAA2D,kBAAgB,YAAWC,SAAA,EACnGC,EAAAA,EAAAA,KAAA,SAAOF,UAAU,8BAA6BC,UAC1CC,EAAAA,EAAAA,KAAA,MAAAD,SACKimB,GAAiBrlB,KAAKokB,IACnB,MAAM3C,EAASxF,EAAiBpc,MAAKknB,GAAOA,EAAItoB,KAAO2lB,IACvD,OAAK3C,GAGDpiB,EAAAA,EAAAA,KAAA,MAEIyoB,MAAM,MACN3oB,UAAS,qHAAAwB,OAAuHyjB,IAAaxF,GAAiB,+BAAiC,IAC/LmJ,WAAW,EACXC,YAAaA,IAAM7C,GAAgBf,GACnCzgB,WAAanE,GAAMqD,GAAerD,EAAG4kB,GACrC1gB,OAASlE,GAAMoD,GAAWpD,EAAG4kB,GAC7B6D,UAAW7C,GAAchmB,UAEzBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oBAAmBC,SAAA,CAC7BwH,OAAOC,YAAc,IAAM4a,EAAOtF,WAAasF,EAAOvF,MACzC,YAAbkI,IACG/kB,EAAAA,EAAAA,KAAA,UACIc,QAASA,IAAMqiB,GAAW4B,GAC1BjlB,UAAU,0BAAyBC,UAEnCC,EAAAA,EAAAA,KAAC6oB,EAAAA,EAAgB,CAAC/oB,UAAU,mDAhBnCilB,GAJO,IAwBX,SAKrB/kB,EAAAA,EAAAA,KAAA,SAAOF,UAAU,0EAAyEC,SACrF5B,GACG6B,EAAAA,EAAAA,KAAA,MAAAD,UACIC,EAAAA,EAAAA,KAAA,MAAI8oB,QAAS9C,GAAiB5kB,OAAQtB,UAAU,wCAAuCC,UACnFC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,sBAAqBC,UAChCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,4FAI3BzB,GACA2B,EAAAA,EAAAA,KAAA,MAAAD,UACIC,EAAAA,EAAAA,KAAA,MAAI8oB,QAAS9C,GAAiB5kB,OAAQtB,UAAU,uDAAsDC,SACjG1B,MAGyB,IAAlCulB,GAAuBxiB,QACvBpB,EAAAA,EAAAA,KAAA,MAAAD,UACIC,EAAAA,EAAAA,KAAA,MAAI8oB,QAAS9C,GAAiB5kB,OAAQtB,UAAU,yDAAwDC,UACpGF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kDAAiDC,SAAA,EAChEC,EAAAA,EAAAA,KAAC+oB,EAAAA,EAAyB,CAACjpB,UAAU,gDACrCE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,UAASC,SAAE0D,EAAE,gCAKxCzD,EAAAA,EAAAA,KAAA+D,EAAAA,SAAA,CAAAhE,SACC6jB,GAAuBoF,MAAM,EAAGvJ,IAAc9e,KAAIiO,IACnD,MAAMqa,GAAeC,EAAAA,GAAAA,IAAgBta,EAAKpM,QAAS,YAAQgT,EAAW5G,EAAKhO,MAAOgO,EAAKhN,aACjFunB,GAAeC,EAAAA,GAAAA,IAAsBH,GAE3C,OACIjpB,EAAAA,EAAAA,KAAA,MAEIF,UAAS,2CAAAwB,OACY,SAAjB2nB,EAAuB,GAAA3nB,OAAM6nB,EAAaE,QAAO,KAAA/nB,OAAI6nB,EAAaG,YAAW,eAAgB,IAC9FvpB,SAEFimB,GAAiBrlB,KAAIokB,IACtB,OAAQA,GACJ,IAAK,QACD,OACI/kB,EAAAA,EAAAA,KAAA,MAAmBF,UAAU,4BAA2BC,UACpDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yEAAwEC,SAAA,CAClF6O,EAAKhO,MACDgO,EAAKhN,cACF/B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sBAAqBC,SAAA,EAChCC,EAAAA,EAAAA,KAAA,UACIF,UAAU,gFACVc,MAAO6C,EAAE,yBAAyB1D,UAElCC,EAAAA,EAAAA,KAACupB,EAAAA,EAAqB,CAACzpB,UAAU,eAErCE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,kOAAiOC,UAC5OC,EAAAA,EAAAA,KAAC6F,EAAAA,EAAe,CAAC3E,QAAS0N,EAAKhN,YAAakE,kBAAkB,aAZ7Eif,GAmBb,IAAK,SACD,OACI/kB,EAAAA,EAAAA,KAAA,MAAmBF,UAAU,8CAA6CC,UACtEC,EAAAA,EAAAA,KAAA,QAAMF,UAAS,iEAAAwB,QAAmEkoB,EAAAA,GAAAA,IAAe5a,EAAKxC,OAAQ,QAAO,kCAAiCrM,SACjJ6O,EAAKxC,UAFL2Y,GAMjB,IAAK,+BACD,OACI/kB,EAAAA,EAAAA,KAAA,MAAmBF,UAAU,8CAA6CC,UACtEF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAeC,SAAA,EAC1BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2CAA0CC,SAAA,EACrDF,EAAAA,EAAAA,MAAA,QAAMC,UAAU,4DAA2DC,SAAA,CAAE0D,EAAE,6BAA6B,QAC5G5D,EAAAA,EAAAA,MAAA,QAAMC,UAAU,4DAA2DC,SAAA,CAAE0D,EAAE,6BAA6BtC,UAAU,EAAG,GAAG,QAAQnB,EAAAA,EAAAA,KAAA,SACnI4O,EAAK1C,YAAW,GAAA5K,OAAMsN,EAAK1C,YAAY7F,UAAS,KAAA/E,OAAIsN,EAAK1C,YAAY5F,UAAasI,EAAKrI,KAAOqI,EAAKrI,KAAKR,KAAO,QAEpHlG,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gDAA+CC,SAAA,EAC1DC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,4DAA2DC,SAAE0D,EAAE,gCAC/E5D,EAAAA,EAAAA,MAAA,QAAMC,UAAU,4DAA2DC,SAAA,CAAE0D,EAAE,gCAAgCtC,UAAU,EAAG,GAAG,QAAQnB,EAAAA,EAAAA,KAAA,SACtI4O,EAAK3C,eAAc,GAAA3K,OAAMsN,EAAK3C,eAAe5F,UAAS,KAAA/E,OAAIsN,EAAK3C,eAAe3F,UAAa,WAV/Fye,GAejB,IAAK,SACD,OACI/kB,EAAAA,EAAAA,KAAA,MAAmBF,UAAU,8CAA6CC,UACtEC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2CAA0CC,SAAE6O,EAAKpI,OAAOT,QADlEgf,GAIjB,IAAK,UACD,MAAMuG,GAAuBpC,EAAAA,GAAAA,IAAgBta,EAAKpM,QAAS,YAAQgT,EAAW5G,EAAKhO,MAAOgO,EAAKhN,aACzF2pB,GAAuBnC,EAAAA,GAAAA,IAAsBkC,GACnD,OACItrB,EAAAA,EAAAA,KAAA,MAAmBF,UAAU,8CAA6CC,UACtEF,EAAAA,EAAAA,MAAA,OAAKC,UAAS,WAAAwB,OAAsC,SAAzBgqB,EAAkCC,EAAqB5B,UAAY,oCAAqC5pB,SAAA,CAC9H6O,EAAKpM,QAAU,IAAI+F,KAAKqG,EAAKpM,SAASonB,qBAAuB,IACpC,SAAzB0B,IACGtrB,EAAAA,EAAAA,KAAA,QAAMF,UAAU,eAAcC,SAAC,eAJlCglB,GASjB,IAAK,UACD,OACI/kB,EAAAA,EAAAA,KAAA,MAAmBF,UAAU,8CAA6CC,UACtEF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gCAA+BC,SAAA,EAC1CC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iBAAgBC,SAC1BqjB,GAAoBxU,KAExB4D,EAAc,QAAS,QAAS,WAC7BxS,EAAAA,EAAAA,KAAA,UACIc,QAASA,KACL0d,GAAgB5P,GAChB0P,IAAmB,EAAK,EAE5Bxe,UAAU,sFACVc,MAAO6C,EAAE,eAAe1D,UAExBC,EAAAA,EAAAA,KAAC6pB,EAAAA,EAAU,CAAC/pB,UAAU,cAG7B0S,EAAc,QAAS,OAAQ,WAC5BxS,EAAAA,EAAAA,KAAA,UACIc,QAASA,IAAMqlB,GAAevX,GAC9B9O,UAAU,0FACVc,MAAO6C,EAAE,sBAAsB1D,UAE/BC,EAAAA,EAAAA,KAAC8pB,EAAAA,EAAqB,CAAChqB,UAAU,cAGxC0S,EAAc,QAAS,SAAU,WAC9BxS,EAAAA,EAAAA,KAAA,UACIc,QAASA,IAAMwlB,GAAiB1X,EAAKxP,IACrCU,UAAU,kFACVc,MAAO6C,EAAE,iBAAiB1D,UAE1BC,EAAAA,EAAAA,KAACsW,EAAAA,EAAS,CAACxW,UAAU,kBAhC5BilB,GAsCjB,QACI,OAAO,KACf,KAlHCnW,EAAKxP,GAoHL,cAUzBY,EAAAA,EAAAA,KAAA,OAAKF,UAAU,0BAAyBC,SACnC5B,GACG6B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,4BAA2BC,UACtCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wFAEnBzB,GACA2B,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2DAA0DC,SACpE1B,IAE6B,IAAlCulB,GAAuBxiB,QACvBvB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mFAAkFC,SAAA,EAC7FC,EAAAA,EAAAA,KAAC+oB,EAAAA,EAAyB,CAACjpB,UAAU,qDACrCE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,UAASC,SAAC,+BAG7BC,EAAAA,EAAAA,KAAC+pB,GAAAA,EAAQ,CAAAhqB,SACJ6jB,GAAuBoF,MAAM,EAAGvJ,IAAc9e,KAAIiO,KAC1Bsa,EAAAA,GAAAA,IAAgBta,EAAKpM,QAAS,YAAQgT,EAAW5G,EAAKhO,MAAOgO,EAAKhN,aAAvF,MAGMooB,EAA2B,GAajC,GAVItJ,GAAoBE,IAAI,WACxBoJ,EAASpV,KAAK,CACVqV,MAAMjqB,EAAAA,EAAAA,KAACkqB,EAAAA,EAAkB,CAACpqB,UAAU,YACpC+c,MAAOpZ,EAAE,wBACTxD,MAAO2O,EAAKpI,OAAOT,KACnBokB,QAAS,SAKbzJ,GAAoBE,IAAI,eAAgB,CAExC,MAAMuD,EAAmBvV,EAAK1C,YAAW,GAAA5K,OAAMsN,EAAK1C,YAAY7F,UAAS,KAAA/E,OAAIsN,EAAK1C,YAAY5F,UAAcsI,EAAKrI,KAAOqI,EAAKrI,KAAKR,KAAO,IACnIqkB,EAAgBjG,EAAiB/iB,OAAS,GAA0B,MAArB+iB,EAA2BA,EAAiBhjB,UAAU,EAAG,GAAKgjB,EACnH6F,EAASpV,KAAK,CACVqV,MAAMjqB,EAAAA,EAAAA,KAACqqB,EAAAA,EAAQ,CAACvqB,UAAU,YAC1B+c,MAAOpZ,EAAE,6BACTxD,MAAOmqB,EACPD,QAAS,QAEjB,CACA,GAAIzJ,GAAoBE,IAAI,kBAAmB,CAE3C,MAAMwD,EAAsBxV,EAAK3C,eAAc,GAAA3K,OAAMsN,EAAK3C,eAAe5F,UAAS,KAAA/E,OAAIsN,EAAK3C,eAAe3F,UAAa,IACjH8jB,EAAgBhG,EAAoBhjB,OAAS,GAA6B,MAAxBgjB,EAA8BA,EAAoBjjB,UAAU,EAAG,GAAKijB,EAC5H4F,EAASpV,KAAK,CACVqV,MAAMjqB,EAAAA,EAAAA,KAACqqB,EAAAA,EAAQ,CAACvqB,UAAU,YAC1B+c,MAAOpZ,EAAE,gCACTxD,MAAOmqB,EACPD,QAAS,eAEjB,CAGA,GAAIzJ,GAAoBE,IAAI,WAAY,CACpC,MAAM0J,GAAcC,EAAAA,GAAAA,IAChB3b,EAAKpM,QACL,OACAoM,EAAKhO,MACLgO,EAAKhN,aACL5B,EAAAA,EAAAA,KAACwqB,EAAAA,EAAY,CAAC1qB,UAAU,YACxB2D,EAAE,0BACD6E,IAASmiB,EAAAA,GAAAA,IAAOniB,EAAM,aAAc,CAAEoiB,OAAQC,GAAAA,OAC/C,GAEJX,EAASpV,MAAIxC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EACRkY,GAAW,IACdH,QAAS,iBAEjB,CAGIzJ,GAAoBE,IAAI,gBAAkBhS,EAAKhN,aAC/CooB,EAASpV,KAAK,CACViI,MAAOpZ,EAAE,6BACTxD,MAAO,GACP2qB,mBAAoBhc,EAAKhN,YACzBipB,mBAAoBjc,EAAKiE,aAAe,GACxCsX,QAAS,SAKjB,MAAMW,GACFjrB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8BAA6BC,SAAA,EAExCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iBAAgBC,SAC1BqjB,GAAoBxU,KAExB4D,EAAc,QAAS,QAAS,WAC7BxS,EAAAA,EAAAA,KAAA,UACIc,QAAUX,IACNA,EAAEiK,kBACFoU,GAAgB5P,GAChB0P,IAAmB,EAAK,EAE5Bxe,UAAU,sFACVc,MAAO6C,EAAE,eAAe1D,UAExBC,EAAAA,EAAAA,KAAC6pB,EAAAA,EAAU,CAAC/pB,UAAU,cAG7B0S,EAAc,QAAS,OAAQ,WAC5BxS,EAAAA,EAAAA,KAAA,UACIc,QAAUX,IACNA,EAAEiK,kBACF+b,GAAevX,EAAK,EAExB9O,UAAU,0FACVc,MAAO6C,EAAE,sBAAsB1D,UAE/BC,EAAAA,EAAAA,KAAC8pB,EAAAA,EAAqB,CAAChqB,UAAU,iBAMjD,OACIE,EAAAA,EAAAA,KAAC+qB,GAAAA,EAAQ,CAELnqB,MAAOgO,EAAKhO,MACZwL,OAAQ,CACJyQ,OAAOmO,EAAAA,GAAAA,IAAcpc,EAAKxC,OAAQ,OAAQ3I,GAC1CwnB,OAAOzB,EAAAA,GAAAA,IAAe5a,EAAKxC,OAAQ,QACnC8e,qBAAiB1V,EACjB2V,iBAAa3V,GAEjBwU,SAAUA,EACVoB,QAASN,GATJlc,EAAKxP,GAUZ,QASzBwkB,GAAuBxiB,OAASqe,KAC7Bzf,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2BAA0BC,UACrCF,EAAAA,EAAAA,MAAA,UACIC,UAAU,0LACVgB,QAASA,IAAM4e,IAAgB2L,GAAaA,EAAY,KAAItrB,SAAA,CAE3D0D,EAAE,mBAAmB,KAAGmgB,GAAuBxiB,OAASqe,GAAa,IAAEhc,EAAE,oBAAoB,qBAW1HzD,EAAAA,EAAAA,KAACwrB,EAAe,CACZ1kB,OAAQqX,GACRpX,QAASA,IAAMqX,IAAqB,GACpCpX,cAAgBykB,IAEG,MAAXA,IACAxO,GAASwF,IACL,MAAMiJ,EAAajJ,EAAUxjB,QAAO2P,GAAgB,MAARA,IAC5C,MAAO,CAAC6c,KAAYC,EAAW,IAEnCpN,IAAmB,GACnBE,GAAgBiN,GACpB,IAIPlN,KACGve,EAAAA,EAAAA,KAAC2rB,EAAa,CACV7kB,OAAQuX,GACRtX,QAASA,KACLuX,IAAmB,GACnBE,GAAgB,KAAK,EAEzBjM,cAAgBqZ,IAEO,MAAfA,IACA3O,GAASwF,GACLA,EACKxjB,QAAO2P,GAAgB,MAARA,IACfjO,KAAIiO,GACDA,EAAKxP,KAAOwsB,EAAYxsB,GAAKwsB,EAAchd,MAGvD0P,IAAmB,GACnBE,GAAgB,MAChBmE,GAAAA,GAAMC,QAAQnf,EAAE,kCACpB,EAEJmL,KAAM2P,OAGZ,C,oFC/lEd,SAASoI,EAAeppB,EAIrBwQ,GAAQ,IAJc,MACvBnN,EAAK,QACLoN,GAEDzQ,EADI0Q,GAAKC,EAAAA,EAAAA,GAAA3Q,EAAA4Q,GAER,OAAoBC,EAAAA,cAAoB,MAAOC,OAAOC,OAAO,CAC3D3J,MAAO,6BACPC,KAAM,OACNC,QAAS,YACTI,YAAa,IACbH,OAAQ,eACR,cAAe,OACf,YAAa,OACbZ,IAAK6J,EACL,kBAAmBC,GAClBC,GAAQrN,EAAqBwN,EAAAA,cAAoB,QAAS,CAC3DhP,GAAI4O,GACHpN,GAAS,KAAmBwN,EAAAA,cAAoB,OAAQ,CACzDrJ,cAAe,QACfC,eAAgB,QAChBE,EAAG,mEAEP,CACA,MACA,EADiCkJ,EAAAA,WAAiBuY,E,oFCvBlD,SAASxL,EAAS5d,EAIfwQ,GAAQ,IAJQ,MACjBnN,EAAK,QACLoN,GAEDzQ,EADI0Q,GAAKC,EAAAA,EAAAA,GAAA3Q,EAAA4Q,GAER,OAAoBC,EAAAA,cAAoB,MAAOC,OAAOC,OAAO,CAC3D3J,MAAO,6BACPC,KAAM,OACNC,QAAS,YACTI,YAAa,IACbH,OAAQ,eACR,cAAe,OACf,YAAa,OACbZ,IAAK6J,EACL,kBAAmBC,GAClBC,GAAQrN,EAAqBwN,EAAAA,cAAoB,QAAS,CAC3DhP,GAAI4O,GACHpN,GAAS,KAAmBwN,EAAAA,cAAoB,OAAQ,CACzDrJ,cAAe,QACfC,eAAgB,QAChBE,EAAG,qDAEP,CACA,MACA,EADiCkJ,EAAAA,WAAiB+M,E,oFCvBlD,SAASzK,EAAYnT,EAIlBwQ,GAAQ,IAJW,MACpBnN,EAAK,QACLoN,GAEDzQ,EADI0Q,GAAKC,EAAAA,EAAAA,GAAA3Q,EAAA4Q,GAER,OAAoBC,EAAAA,cAAoB,MAAOC,OAAOC,OAAO,CAC3D3J,MAAO,6BACPC,KAAM,OACNC,QAAS,YACTI,YAAa,IACbH,OAAQ,eACR,cAAe,OACf,YAAa,OACbZ,IAAK6J,EACL,kBAAmBC,GAClBC,GAAQrN,EAAqBwN,EAAAA,cAAoB,QAAS,CAC3DhP,GAAI4O,GACHpN,GAAS,KAAmBwN,EAAAA,cAAoB,OAAQ,CACzDrJ,cAAe,QACfC,eAAgB,QAChBE,EAAG,mQAEP,CACA,MACA,EADiCkJ,EAAAA,WAAiBsC,E","sources":["components/CerebroArticleSelector.tsx","components/CreateTaskModal.tsx","../node_modules/@heroicons/react/24/outline/esm/ClipboardDocumentIcon.js","components/TaskDataBox.tsx","../node_modules/@heroicons/react/24/outline/esm/PaperAirplaneIcon.js","components/EmailTemplateBox.tsx","components/SocialSecurityCompletionBox.tsx","components/EditTaskModal.tsx","../node_modules/@heroicons/react/24/outline/esm/ListBulletIcon.js","components/WorktimeTracker.tsx","pages/Worktracker.tsx","../node_modules/@heroicons/react/24/outline/esm/CheckCircleIcon.js","../node_modules/@heroicons/react/24/outline/esm/ClockIcon.js","../node_modules/@heroicons/react/24/outline/esm/EnvelopeIcon.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { MagnifyingGlassIcon } from '@heroicons/react/24/solid';\nimport { XCircleIcon } from '@heroicons/react/24/solid';\nimport debounce from 'lodash/debounce';\n\ninterface CerebroArticle {\n  id: number;\n  title: string;\n  slug: string;\n  content?: string;\n}\n\ninterface CerebroArticleSelectorProps {\n  onArticleSelected: (article: CerebroArticle) => void;\n  excludeArticleIds?: number[];\n  selectedArticles?: CerebroArticle[];\n  onArticleRemove?: (articleId: number) => void;\n}\n\nconst CerebroArticleSelector: React.FC<CerebroArticleSelectorProps> = ({\n  onArticleSelected,\n  excludeArticleIds = [],\n  selectedArticles,\n  onArticleRemove\n}) => {\n  const [articles, setArticles] = useState<CerebroArticle[]>([]);\n  const [selectedArticleId, setSelectedArticleId] = useState<number | null>(null);\n  const [selectedArticlePreview, setSelectedArticlePreview] = useState<CerebroArticle | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Alle Artikel beim Laden abrufen\n  useEffect(() => {\n    const fetchAllArticles = async () => {\n      try {\n        setLoading(true);\n        setError(null);\n        \n        const response = await axiosInstance.get(API_ENDPOINTS.CEREBRO.ARTICLES.BASE);\n        \n        // Filtere bereits ausgewhlte Artikel\n        const filteredArticles = response.data.filter(\n          (article: CerebroArticle) => !excludeArticleIds.includes(article.id)\n        );\n        \n        setArticles(filteredArticles);\n      } catch (err) {\n        console.error('Fehler beim Abrufen der Artikel:', err);\n        // Einfachere Fehlerbehandlung ohne axios-Import\n        const axiosError = err as any;\n        setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchAllArticles();\n  }, [excludeArticleIds]);\n\n  // Artikeldetails abrufen, wenn ein Artikel ausgewhlt wird\n  const fetchArticleDetails = async (articleId: number) => {\n    try {\n      setLoading(true);\n      const response = await axiosInstance.get(API_ENDPOINTS.CEREBRO.ARTICLES.BY_ID(articleId));\n      setSelectedArticlePreview(response.data);\n    } catch (err) {\n      console.error('Fehler beim Abrufen der Artikeldetails:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleArticleSelect = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    const articleId = parseInt(e.target.value, 10);\n    \n    if (!isNaN(articleId)) {\n      setSelectedArticleId(articleId);\n      \n      // Artikel aus der Liste finden\n      const selectedArticle = articles.find(article => article.id === articleId);\n      \n      if (selectedArticle) {\n        // Artikeldetails abrufen fr die Vorschau\n        fetchArticleDetails(articleId);\n      }\n    } else {\n      setSelectedArticleId(null);\n      setSelectedArticlePreview(null);\n    }\n  };\n\n  const handleArticleConfirm = () => {\n    if (selectedArticleId !== null) {\n      const selectedArticle = articles.find(article => article.id === selectedArticleId);\n      if (selectedArticle) {\n        onArticleSelected(selectedArticle);\n        setSelectedArticleId(null);\n        setSelectedArticlePreview(null);\n      }\n    }\n  };\n\n  return (\n    <div className=\"mt-4\">\n      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n        Cerebro-Artikel verknpfen\n      </label>\n      \n      <div className=\"flex flex-col gap-3\">\n        <div className=\"flex items-center gap-2\">\n          <select\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            value={selectedArticleId || ''}\n            onChange={handleArticleSelect}\n          >\n            <option value=\"\">-- Artikel auswhlen --</option>\n            {articles.map((article) => (\n              <option key={article.id} value={article.id}>\n                {article.title}\n              </option>\n            ))}\n          </select>\n          \n          <button\n            type=\"button\"\n            onClick={handleArticleConfirm}\n            disabled={selectedArticleId === null}\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            Verknpfen\n          </button>\n        </div>\n\n        {loading && (\n          <div className=\"text-sm text-gray-500\">\n            Lade Artikel...\n          </div>\n        )}\n        \n        {error && (\n          <div className=\"text-sm text-red-600\">\n            {error}\n          </div>\n        )}\n        \n        {selectedArticlePreview && (\n          <div className=\"mt-2 p-4 border border-gray-300 rounded-md bg-gray-50\">\n            <h4 className=\"font-medium text-lg mb-2\">{selectedArticlePreview.title}</h4>\n            <div className=\"prose prose-sm max-w-none\">\n              {selectedArticlePreview.content ? (\n                <div className=\"text-sm text-gray-700 max-h-40 overflow-y-auto\">\n                  {selectedArticlePreview.content.substring(0, 300)}\n                  {selectedArticlePreview.content.length > 300 && '...'}\n                </div>\n              ) : (\n                <p className=\"text-sm text-gray-500 italic\">Kein Inhalt verfgbar</p>\n              )}\n            </div>\n            <div className=\"mt-2\">\n              <a \n                href={`/cerebro/articles/${selectedArticlePreview.slug}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"text-sm text-blue-600 hover:underline\"\n              >\n                Artikel ffnen\n              </a>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CerebroArticleSelector; ","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../config/axios.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, ArrowPathIcon, CheckIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport CerebroArticleSelector from './CerebroArticleSelector.tsx';\nimport MarkdownPreview from './MarkdownPreview.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface User {\n    id: number;\n    firstName: string;\n    lastName: string;\n}\n\ninterface Role {\n    id: number;\n    name: string;\n}\n\ninterface Branch {\n    id: number;\n    name: string;\n}\n\ninterface CerebroArticle {\n    id: number;\n    title: string;\n    slug: string;\n    content?: string;\n}\n\ninterface TaskAttachment {\n    id?: number;\n    fileName: string;\n    fileType: string;\n    fileSize: number;\n    filePath?: string;\n    uploadedAt?: string;\n    file?: File; // Fr temporre Anhnge vor dem Hochladen\n}\n\ninterface CreateTaskModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onTaskCreated: (newTask: Task) => void;\n}\n\ninterface Task {\n    id: number;\n    title: string;\n    description: string | null;\n    status: 'open' | 'in_progress' | 'improval' | 'quality_control' | 'done';\n    responsible: {\n        id: number;\n        firstName: string;\n        lastName: string;\n    } | null;\n    responsibleId: number | null;\n    role: {\n        id: number;\n        name: string;\n    } | null;\n    roleId: number | null;\n    qualityControl: {\n        id: number;\n        firstName: string;\n        lastName: string;\n    } | null;\n    branch: {\n        id: number;\n        name: string;\n    };\n    dueDate: string | null;\n    requestId: number | null;\n}\n\nconst CreateTaskModal = ({ isOpen, onClose, onTaskCreated }: CreateTaskModalProps) => {\n    const { t } = useTranslation();\n    const { user } = useAuth();\n    const { openSidepane, closeSidepane } = useSidepane();\n    const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n    \n    const [title, setTitle] = useState('');\n    const [description, setDescription] = useState('');\n    const [assigneeType, setAssigneeType] = useState<'user' | 'role'>('user');\n    const [responsibleId, setResponsibleId] = useState<number | ''>('');\n    const [roleId, setRoleId] = useState<number | ''>('');\n    const [qualityControlId, setQualityControlId] = useState<number | ''>('');\n    const [branchId, setBranchId] = useState<number | ''>('');\n    const [dueDate, setDueDate] = useState('');\n    const [users, setUsers] = useState<User[]>([]);\n    const [roles, setRoles] = useState<Role[]>([]);\n    const [branches, setBranches] = useState<Branch[]>([]);\n    const [error, setError] = useState<string | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n    const [selectedArticles, setSelectedArticles] = useState<CerebroArticle[]>([]);\n    const [activeTab, setActiveTab] = useState<'data' | 'cerebro'>('data');\n    const [temporaryAttachments, setTemporaryAttachments] = useState<TaskAttachment[]>([]);\n    const [uploading, setUploading] = useState(false);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n    const getDefaultDueDate = () => {\n        const date = new Date();\n        date.setDate(date.getDate() + 7);\n        return date.toISOString().split('T')[0];\n    };\n\n    useEffect(() => {\n        if (isOpen) {\n            fetchUsers();\n            fetchRoles();\n            fetchBranches();\n            \n            if (user) {\n                setQualityControlId(user.id);\n            }\n            \n            setDueDate(getDefaultDueDate());\n        }\n    }, [isOpen, user]);\n\n    useEffect(() => {\n        if (branches.length > 0 && branchId === '') {\n            if (branches.length === 1) {\n                setBranchId(branches[0].id);\n            } else if (branches.length > 1) {\n                setBranchId(branches[0].id);\n            }\n        }\n    }, [branches, branchId]);\n    \n    useEffect(() => {\n        // Prfen der Bildschirmgre beim Mounten\n        const checkScreenSize = () => {\n            setIsMobile(window.innerWidth < 640);\n            setIsLargeScreen(window.innerWidth > 1070);\n        };\n        \n        // Initial prfen\n        checkScreenSize();\n        \n        // Event-Listener fr Grennderungen\n        window.addEventListener('resize', checkScreenSize);\n        \n        // Cleanup\n        return () => {\n            window.removeEventListener('resize', checkScreenSize);\n        };\n    }, []);\n\n    // Sidepane-Status verwalten\n    useEffect(() => {\n        if (isOpen) {\n            openSidepane();\n        } else {\n            closeSidepane();\n        }\n        \n        return () => {\n            closeSidepane();\n        };\n    }, [isOpen, openSidepane, closeSidepane]);\n\n    const fetchUsers = async () => {\n        try {\n            setError(null);\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                return;\n            }\n\n            console.log('Lade Benutzer fr CreateTaskModal...');\n            \n            const response = await axiosInstance.get(API_ENDPOINTS.USERS.DROPDOWN);\n            \n            console.log('Benutzer geladen:', response.data.length);\n            setUsers(response.data || []);\n        } catch (err) {\n            console.error('Fehler beim Laden der Benutzer:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            if (axiosError.code === 'ERR_NETWORK') {\n                setError(t('tasks.createTask.errors.connectionError'));\n            } else {\n                setError(`${t('tasks.createTask.errors.loadUsersError')}: ${axiosError.response?.data?.message || axiosError.message}`);\n            }\n        }\n    };\n\n    const fetchRoles = async () => {\n        try {\n            setError(null);\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                return;\n            }\n            \n            const response = await axiosInstance.get(API_ENDPOINTS.ROLES.BASE);\n            setRoles(response.data || []);\n        } catch (err) {\n            console.error('Fehler beim Laden der Rollen:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            if (axiosError.code === 'ERR_NETWORK') {\n                setError(t('tasks.createTask.errors.connectionError'));\n            } else {\n                setError(`${t('tasks.createTask.errors.loadRolesError')}: ${axiosError.response?.data?.message || axiosError.message}`);\n            }\n        }\n    };\n\n    const fetchBranches = async () => {\n        try {\n            setError(null);\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                return;\n            }\n\n            console.log('Lade Niederlassungen fr CreateTaskModal...');\n            \n            const response = await axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE);\n            \n            console.log('Niederlassungen geladen:', response.data.length);\n            setBranches(response.data || []);\n        } catch (err) {\n            console.error('Fehler beim Laden der Niederlassungen:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            if (axiosError.code === 'ERR_NETWORK') {\n                setError(t('tasks.createTask.errors.connectionError'));\n            } else {\n                setError(`${t('tasks.createTask.errors.loadBranchesError')}: ${axiosError.response?.data?.message || axiosError.message}`);\n            }\n        }\n    };\n\n    const handlePaste = async (event: React.ClipboardEvent) => {\n        const items = event.clipboardData.items;\n        \n        for (let i = 0; i < items.length; i++) {\n            const item = items[i];\n            \n            // Prfen, ob das eingefgte Element ein Bild ist\n            if (item.type.indexOf('image') === 0) {\n                event.preventDefault(); // Standardeingabe verhindern\n                \n                const file = item.getAsFile();\n                if (file) {\n                    await handleTemporaryAttachment(file);\n                }\n                return;\n            }\n        }\n    };\n\n    const handleDrop = async (event: React.DragEvent) => {\n        event.preventDefault();\n        event.stopPropagation();\n        \n        if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\n            const file = event.dataTransfer.files[0];\n            await handleTemporaryAttachment(file);\n        }\n    };\n\n    const handleDragOver = (event: React.DragEvent) => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    const handleTemporaryAttachment = async (file: File) => {\n        setUploading(true);\n        setError(null);\n\n        try {\n            // Erstelle einen temporren Anhang\n            const newAttachment: TaskAttachment = {\n                fileName: file.name,\n                fileType: file.type,\n                fileSize: file.size,\n                file: file // Speichern der Datei fr spteren Upload\n            };\n            \n            setTemporaryAttachments(prev => [...prev, newAttachment]);\n\n            // Fge Markdown-Link ins Textarea ein (fr Card-Anzeige)\n            // Bilder werden zustzlich als groe Vorschau unter dem Textarea angezeigt\n            let insertText = '';\n            if (file.type.startsWith('image/')) {\n                // Hinweis: Wir verwenden hier den Platzhalter, da die Datei erst nach dem Erstellen hochgeladen wird\n                // Die tatschliche URL wird nach dem erfolgreichen Upload im Backend gesetzt\n                insertText = `\\n![${file.name}](${t('tasks.createTask.form.uploadAfterCreate')})\\n`;\n            } else {\n                // Fr andere Dateien einen temporren Platzhalter\n                insertText = `\\n[${file.name}](${t('tasks.createTask.form.uploadAfterCreate')})\\n`;\n            }\n            \n            // Fge den Link an der aktuellen Cursorposition ein\n            if (textareaRef.current) {\n                const cursorPos = textareaRef.current.selectionStart;\n                const textBefore = description.substring(0, cursorPos);\n                const textAfter = description.substring(cursorPos);\n                \n                setDescription(textBefore + insertText + textAfter);\n                \n                // Setze den Cursor hinter den eingefgten Link\n                setTimeout(() => {\n                    if (textareaRef.current) {\n                        const newPos = cursorPos + insertText.length;\n                        textareaRef.current.selectionStart = newPos;\n                        textareaRef.current.selectionEnd = newPos;\n                        textareaRef.current.focus();\n                    }\n                }, 0);\n            } else {\n                setDescription(description + insertText);\n            }\n        } catch (err) {\n            console.error('Fehler beim Verarbeiten der Datei:', err);\n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        } finally {\n            setUploading(false);\n        }\n    };\n\n    const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n        const files = event.target.files;\n        if (!files || files.length === 0) return;\n\n        const file = files[0];\n        await handleTemporaryAttachment(file);\n        \n        // Zurcksetzen des Datei-Inputs\n        if (fileInputRef.current) {\n            fileInputRef.current.value = '';\n        }\n    };\n\n    const handleRemoveTemporaryAttachment = (index: number) => {\n        // Finde den zu entfernenden Anhang\n        const attachmentToRemove = temporaryAttachments[index];\n        \n        if (attachmentToRemove) {\n            // Entferne den Anhang aus dem temporaryAttachments-Array\n            setTemporaryAttachments(temporaryAttachments.filter((_, i) => i !== index));\n            \n            // Entferne auch den Verweis im Beschreibungstext\n            if (attachmentToRemove.fileName) {\n                // Suche nach Bild- und Link-Markdown mit dem Dateinamen\n                const escapedFileName = attachmentToRemove.fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n                const uploadText = t('tasks.createTask.form.uploadAfterCreate');\n                const imagePattern = new RegExp(`!\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n                const linkPattern = new RegExp(`\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n                \n                // Bereinige die Beschreibung\n                const newDescription = description\n                    .replace(imagePattern, '')\n                    .replace(linkPattern, '')\n                    // Entferne berschssige Leerzeilen, die durch das Entfernen entstehen knnten\n                    .replace(/\\n{3,}/g, '\\n\\n');\n                \n                setDescription(newDescription);\n            }\n        }\n    };\n\n    const uploadTemporaryAttachments = async (taskId: number) => {\n        if (temporaryAttachments.length === 0) return;\n        \n        try {\n            setLoading(true);\n            \n            // Upload jeder temporren Datei\n            for (const attachment of temporaryAttachments) {\n                if (!attachment.file) continue;\n                \n                const formData = new FormData();\n                formData.append('file', attachment.file);\n                \n                await axiosInstance.post(\n                    API_ENDPOINTS.TASKS.ATTACHMENTS(taskId),\n                    formData,\n                    {\n                        headers: {\n                            'Content-Type': 'multipart/form-data',\n                        },\n                    }\n                );\n            }\n            \n            console.log(`${temporaryAttachments.length} Anhnge erfolgreich hochgeladen.`);\n        } catch (err) {\n            console.error('Fehler beim Hochladen der Anhnge:', err);\n            // Wir zeigen hier keinen Fehler, da der Task bereits erstellt wurde\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError(null);\n        setLoading(true);\n\n        try {\n            // Validierung\n            if (!title || (!responsibleId && !roleId) || !branchId) {\n                setError(t('tasks.createTask.errors.fillAllFields'));\n                setLoading(false);\n                return;\n            }\n\n            if (responsibleId && roleId) {\n                setError(t('tasks.createTask.errors.chooseUserOrRole'));\n                setLoading(false);\n                return;\n            }\n\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                setLoading(false);\n                return;\n            }\n\n            // Validiere die IDs\n            const branch = Number(branchId);\n            const qualityControl = qualityControlId ? Number(qualityControlId) : null;\n            const responsible = responsibleId ? Number(responsibleId) : null;\n            const role = roleId ? Number(roleId) : null;\n\n            if ((responsibleId && isNaN(responsible!)) || \n                (roleId && isNaN(role!)) || \n                isNaN(branch) || \n                (qualityControlId && isNaN(qualityControl!))) {\n                setError(t('tasks.createTask.errors.invalidIds'));\n                setLoading(false);\n                return;\n            }\n\n            // Basisdaten fr die Anfrage vorbereiten\n            const taskData: any = {\n                title,\n                description,\n                status: 'open',\n                qualityControlId: qualityControl,\n                branchId: branch,\n                dueDate\n            };\n\n            // Nur ein Feld hinzufgen - entweder responsibleId oder roleId, aber nicht beide\n            if (assigneeType === 'user' && responsibleId) {\n                taskData.responsibleId = responsibleId;\n            } else if (assigneeType === 'role' && roleId) {\n                taskData.roleId = roleId;\n            }\n\n            const response = await axiosInstance.post(API_ENDPOINTS.TASKS.BASE, taskData);\n\n            const newTaskId = response.data.id;\n            \n            // Verknpfe Cerebro-Artikel, falls vorhanden\n            if (selectedArticles.length > 0) {\n                await Promise.all(\n                    selectedArticles.map(article => \n                        axiosInstance.post(API_ENDPOINTS.TASKS.LINK_CARTICLE(newTaskId, article.id))\n                    )\n                );\n            }\n            \n            // Lade temporre Anhnge hoch, falls vorhanden\n            await uploadTemporaryAttachments(newTaskId);\n            \n            console.log('Task erfolgreich erstellt:', response.data);\n            // bergebe den neuen Task an den Callback\n            onTaskCreated(response.data);\n            handleClose();\n        } catch (err) {\n            console.error('Fehler beim Erstellen des Tasks:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.error || axiosError.message || t('tasks.createTask.errors.createError'));\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleClose = () => {\n        setTitle('');\n        setDescription('');\n        setAssigneeType('user');\n        setResponsibleId('');\n        setRoleId('');\n        setQualityControlId('');\n        setBranchId('');\n        setDueDate('');\n        setError(null);\n        setSelectedArticles([]);\n        setTemporaryAttachments([]);\n        onClose();\n    };\n\n    const handleAddArticle = (article: CerebroArticle) => {\n        setSelectedArticles(prev => [...prev, article]);\n    };\n    \n    const handleRemoveArticle = (articleId: number) => {\n        setSelectedArticles(prev => prev.filter(a => a.id !== articleId));\n    };\n\n    // Fr Mobile (unter 640px) - klassisches Modal\n    if (isMobile) {\n        return (\n            <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\n                <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n                \n                <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                    <Dialog.Panel className=\"mx-auto max-w-xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n                            <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                                {t('tasks.createTask.title')}\n                            </Dialog.Title>\n                            <button\n                                onClick={handleClose}\n                                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                            >\n                                <XMarkIcon className=\"h-6 w-6\" />\n                            </button>\n                        </div>\n\n                        <TaskForm \n                            error={error}\n                            title={title}\n                            setTitle={setTitle}\n                            description={description}\n                            setDescription={setDescription}\n                            assigneeType={assigneeType}\n                            setAssigneeType={setAssigneeType}\n                            responsibleId={responsibleId}\n                            setResponsibleId={setResponsibleId}\n                            roleId={roleId}\n                            setRoleId={setRoleId}\n                            qualityControlId={qualityControlId}\n                            setQualityControlId={setQualityControlId}\n                            branchId={branchId}\n                            setBranchId={setBranchId}\n                            dueDate={dueDate}\n                            setDueDate={setDueDate}\n                            users={users}\n                            roles={roles}\n                            branches={branches}\n                            loading={loading}\n                            handleSubmit={handleSubmit}\n                            handleClose={handleClose}\n                            selectedArticles={selectedArticles}\n                            onArticleSelect={handleAddArticle}\n                            onArticleRemove={handleRemoveArticle}\n                            uploading={uploading}\n                            temporaryAttachments={temporaryAttachments}\n                            onFileUpload={handleFileUpload}\n                            onRemoveAttachment={handleRemoveTemporaryAttachment}\n                            textareaRef={textareaRef}\n                            fileInputRef={fileInputRef}\n                            handlePaste={handlePaste}\n                            handleDrop={handleDrop}\n                            handleDragOver={handleDragOver}\n                        />\n                    </Dialog.Panel>\n                </div>\n            </Dialog>\n        );\n    }\n    \n    // Fr Desktop (ab 640px) - Sidepane\n    // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n    return (\n        <>\n            {/* Backdrop - nur wenn offen und <= 1070px */}\n            {/* Hinweis: onClick entfernt, da Backdrop pointer-events: none hat, damit Hauptinhalt interaktiv bleibt */}\n            {isOpen && !isLargeScreen && (\n                <div \n                    className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n                    aria-hidden=\"true\" \n                    style={{\n                        opacity: isOpen ? 1 : 0,\n                        transition: 'opacity 300ms ease-out'\n                    }}\n                />\n            )}\n            \n            {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n            <div \n                className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n                style={{\n                    transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n                    pointerEvents: isOpen ? 'auto' : 'none'\n                }}\n                aria-hidden={!isOpen}\n                role=\"dialog\"\n                aria-modal={isOpen}\n            >\n                <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n                    <h2 className=\"text-lg font-semibold dark:text-white\">\n                        {t('tasks.createTask.title')}\n                    </h2>\n                    <button\n                        onClick={handleClose}\n                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                    >\n                        <XMarkIcon className=\"h-6 w-6\" />\n                    </button>\n                </div>\n\n                <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n                    <TaskForm \n                        error={error}\n                        title={title}\n                        setTitle={setTitle}\n                        description={description}\n                        setDescription={setDescription}\n                        assigneeType={assigneeType}\n                        setAssigneeType={setAssigneeType}\n                        responsibleId={responsibleId}\n                        setResponsibleId={setResponsibleId}\n                        roleId={roleId}\n                        setRoleId={setRoleId}\n                        qualityControlId={qualityControlId}\n                        setQualityControlId={setQualityControlId}\n                        branchId={branchId}\n                        setBranchId={setBranchId}\n                        dueDate={dueDate}\n                        setDueDate={setDueDate}\n                        users={users}\n                        roles={roles}\n                        branches={branches}\n                        loading={loading}\n                        handleSubmit={handleSubmit}\n                        handleClose={handleClose}\n                        selectedArticles={selectedArticles}\n                        onArticleSelect={handleAddArticle}\n                        onArticleRemove={handleRemoveArticle}\n                        uploading={uploading}\n                        temporaryAttachments={temporaryAttachments}\n                        onFileUpload={handleFileUpload}\n                        onRemoveAttachment={handleRemoveTemporaryAttachment}\n                        textareaRef={textareaRef}\n                        fileInputRef={fileInputRef}\n                        handlePaste={handlePaste}\n                        handleDrop={handleDrop}\n                        handleDragOver={handleDragOver}\n                    />\n                </div>\n            </div>\n        </>\n    );\n};\n\n// Ausgelagerte Formular-Komponente, um Code-Duplizierung zu vermeiden\ninterface TaskFormProps {\n    error: string | null;\n    title: string;\n    setTitle: (value: string) => void;\n    description: string;\n    setDescription: (value: string) => void;\n    assigneeType: 'user' | 'role';\n    setAssigneeType: (value: 'user' | 'role') => void;\n    responsibleId: number | '';\n    setResponsibleId: (value: number | '') => void;\n    roleId: number | '';\n    setRoleId: (value: number | '') => void;\n    qualityControlId: number | '';\n    setQualityControlId: (value: number | '') => void;\n    branchId: number | '';\n    setBranchId: (value: number | '') => void;\n    dueDate: string;\n    setDueDate: (value: string) => void;\n    users: User[];\n    roles: Role[];\n    branches: Branch[];\n    loading: boolean;\n    handleSubmit: (e: React.FormEvent) => Promise<void>;\n    handleClose: () => void;\n    selectedArticles: CerebroArticle[];\n    onArticleSelect: (article: CerebroArticle) => void;\n    onArticleRemove: (articleId: number) => void;\n    uploading?: boolean;\n    temporaryAttachments?: TaskAttachment[];\n    onFileUpload?: (event: React.ChangeEvent<HTMLInputElement>) => Promise<void>;\n    onRemoveAttachment?: (index: number) => void;\n    textareaRef?: React.RefObject<HTMLTextAreaElement>;\n    fileInputRef?: React.RefObject<HTMLInputElement>;\n    handlePaste?: (event: React.ClipboardEvent) => Promise<void>;\n    handleDrop?: (event: React.DragEvent) => Promise<void>;\n    handleDragOver?: (event: React.DragEvent) => void;\n}\n\nconst TaskForm: React.FC<TaskFormProps> = ({\n    error,\n    title,\n    setTitle,\n    description,\n    setDescription,\n    assigneeType,\n    setAssigneeType,\n    responsibleId,\n    setResponsibleId,\n    roleId,\n    setRoleId,\n    qualityControlId,\n    setQualityControlId,\n    branchId,\n    setBranchId,\n    dueDate,\n    setDueDate,\n    users,\n    roles,\n    branches,\n    loading,\n    handleSubmit,\n    handleClose,\n    selectedArticles,\n    onArticleSelect,\n    onArticleRemove,\n    uploading = false,\n    temporaryAttachments = [],\n    onFileUpload,\n    onRemoveAttachment,\n    textareaRef,\n    fileInputRef,\n    handlePaste,\n    handleDrop,\n    handleDragOver,\n}) => {\n    const { t } = useTranslation();\n    const [activeTab, setActiveTab] = useState<'data' | 'cerebro'>('data');\n    \n    return (\n        <form onSubmit={handleSubmit} className=\"space-y-4\" noValidate>\n            {error && (\n                <div className=\"bg-red-100 dark:bg-red-900 border-l-4 border-red-500 dark:border-red-700 text-red-700 dark:text-red-300 p-4 mb-4\">\n                    <p>{error}</p>\n                </div>\n            )}\n\n            {/* Tabs Navigation */}\n            <div className=\"border-b border-gray-200 dark:border-gray-700\">\n                <nav className=\"-mb-px flex space-x-4\" aria-label=\"Tabs\">\n                    <button\n                        type=\"button\"\n                        className={`${\n                            activeTab === 'data'\n                                ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:border-gray-600'\n                        } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                        onClick={() => setActiveTab('data')}\n                    >\n                        Daten\n                    </button>\n                    <button\n                        type=\"button\"\n                        className={`${\n                            activeTab === 'cerebro'\n                                ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:border-gray-600'\n                        } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                        onClick={() => setActiveTab('cerebro')}\n                    >\n                        Cerebro Artikel\n                    </button>\n                </nav>\n            </div>\n\n            {/* Data Tab Content */}\n            {activeTab === 'data' && (\n                <>\n                    <div>\n                        <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.createTask.form.title')} *\n                        </label>\n                        <input\n                            type=\"text\"\n                            id=\"title\"\n                            value={title}\n                            onChange={(e) => setTitle(e.target.value)}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                            required\n                        />\n                    </div>\n\n                    <div className=\"space-y-4\">\n                        <div>\n                            <label htmlFor=\"description_sidepane\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                {t('tasks.createTask.form.description')}\n                            </label>\n                            <div className=\"relative\">\n                                <textarea\n                                    ref={textareaRef}\n                                    id=\"description_task_create\"\n                                    rows={6}\n                                    className=\"block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm\"\n                                    value={description}\n                                    onChange={(e) => setDescription(e.target.value)}\n                                    onPaste={handlePaste}\n                                    onDrop={handleDrop}\n                                    onDragOver={handleDragOver}\n                                    placeholder={t('tasks.createTask.form.descriptionPlaceholder')}\n                                />\n                                {/* Heftklammer-Icon zum Hinzufgen von Dateien */}\n                                <button\n                                    type=\"button\"\n                                    onClick={() => fileInputRef?.current?.click()}\n                                    className=\"absolute bottom-2 left-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none\"\n                                    title={t('tasks.createTask.form.fileUpload')}\n                                >\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n                                    </svg>\n                                </button>\n                                <input\n                                    ref={fileInputRef}\n                                    type=\"file\"\n                                    onChange={onFileUpload}\n                                    className=\"hidden\"\n                                />\n                                {uploading && (\n                                    <div className=\"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-70 dark:bg-opacity-70\">\n                                        <span className=\"text-sm text-gray-500 dark:text-gray-400\">{t('tasks.createTask.form.uploading')}</span>\n                                    </div>\n                                )}\n                            </div>\n                            {/* Anzeige der temporren Anhnge direkt unter dem Textfeld */}\n                            {temporaryAttachments && temporaryAttachments.length > 0 && (\n                                <div className=\"mt-2\">\n                                    <ul className=\"flex flex-wrap gap-2\">\n                                        {temporaryAttachments.map((attachment, index) => (\n                                            <li key={index} className=\"inline-flex items-center bg-gray-100 dark:bg-gray-700 rounded-md px-2 py-1 relative group\">\n                                                <span className=\"text-sm font-medium text-gray-800 dark:text-gray-300\">\n                                                    {attachment.fileName}\n                                                </span>\n                                                <div className=\"flex ml-2\">\n                                                    <button\n                                                        type=\"button\"\n                                                        onClick={() => onRemoveAttachment?.(index)}\n                                                        className=\"text-red-600 hover:text-red-900 ml-1\"\n                                                        title={t('tasks.createTask.form.remove')}\n                                                    >\n                                                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                                                        </svg>\n                                                    </button>\n                                                </div>\n                                                {/* Tooltip fr Bildvorschau bei Bild-Dateien */}\n                                                {attachment.fileType.startsWith('image/') && attachment.file && (\n                                                    <div className=\"absolute z-10 invisible group-hover:visible bg-white dark:bg-gray-800 p-2 rounded-md shadow-lg -top-32 left-0 border border-gray-200 dark:border-gray-700\">\n                                                        <img \n                                                            src={URL.createObjectURL(attachment.file)}\n                                                            alt={attachment.fileName}\n                                                            className=\"max-w-[200px] max-h-[150px] object-contain\"\n                                                        />\n                                                    </div>\n                                                )}\n                                            </li>\n                                        ))}\n                                    </ul>\n                                </div>\n                            )}\n                            {description && (\n                                <div className=\"mt-3\">\n                                    <MarkdownPreview \n                                        content={description} \n                                        temporaryAttachments={temporaryAttachments}\n                                        showImagePreview={true}\n                                    />\n                                </div>\n                            )}\n                        </div>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.createTask.form.responsibleFor')} *\n                        </label>\n                        <div className=\"flex space-x-4\">\n                            <label className=\"inline-flex items-center\">\n                                <input\n                                    type=\"radio\"\n                                    className=\"form-radio text-blue-600 dark:bg-gray-700 dark:border-gray-600\"\n                                    name=\"assigneeType\"\n                                    value=\"user\"\n                                    checked={assigneeType === 'user'}\n                                    onChange={() => {\n                                        setAssigneeType('user');\n                                        setRoleId('');\n                                    }}\n                                />\n                                <span className=\"ml-2 dark:text-gray-300\">{t('tasks.createTask.form.user')}</span>\n                            </label>\n                            <label className=\"inline-flex items-center\">\n                                <input\n                                    type=\"radio\"\n                                    className=\"form-radio text-blue-600 dark:bg-gray-700 dark:border-gray-600\"\n                                    name=\"assigneeType\"\n                                    value=\"role\"\n                                    checked={assigneeType === 'role'}\n                                    onChange={() => {\n                                        setAssigneeType('role');\n                                        setResponsibleId('');\n                                    }}\n                                />\n                                <span className=\"ml-2 dark:text-gray-300\">{t('tasks.createTask.form.role')}</span>\n                            </label>\n                        </div>\n                    </div>\n\n                    {assigneeType === 'user' ? (\n                        <div>\n                            <label htmlFor=\"responsible\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                {t('tasks.createTask.form.responsibleUser')} *\n                            </label>\n                            <select\n                                id=\"responsible\"\n                                value={responsibleId}\n                                onChange={(e) => setResponsibleId(e.target.value ? Number(e.target.value) : '')}\n                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                                required\n                            >\n                                <option value=\"\">{t('tasks.createTask.form.pleaseSelect')}</option>\n                                {Array.isArray(users) && users.map(user => (\n                                    <option key={user.id} value={user.id}>\n                                        {user.firstName} {user.lastName}\n                                    </option>\n                                ))}\n                            </select>\n                        </div>\n                    ) : (\n                        <div>\n                            <label htmlFor=\"role\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                {t('tasks.createTask.form.responsibleRole')} *\n                            </label>\n                            <select\n                                id=\"role\"\n                                value={roleId}\n                                onChange={(e) => setRoleId(e.target.value ? Number(e.target.value) : '')}\n                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                                required\n                            >\n                                <option value=\"\">{t('tasks.createTask.form.pleaseSelect')}</option>\n                                {Array.isArray(roles) && roles.map(role => (\n                                    <option key={role.id} value={role.id}>\n                                        {role.name}\n                                    </option>\n                                ))}\n                            </select>\n                        </div>\n                    )}\n\n                    <div>\n                        <label htmlFor=\"qualityControl\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.createTask.form.qualityControl')}\n                        </label>\n                        <select\n                            id=\"qualityControl\"\n                            value={qualityControlId}\n                            onChange={(e) => setQualityControlId(e.target.value ? Number(e.target.value) : '')}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                        >\n                            <option value=\"\">{t('tasks.createTask.form.noQualityControl')}</option>\n                            {Array.isArray(users) && users.map(user => (\n                                <option key={user.id} value={user.id}>\n                                    {user.firstName} {user.lastName}\n                                </option>\n                            ))}\n                        </select>\n                    </div>\n\n                    <div>\n                        <label htmlFor=\"branch\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.createTask.form.branch')} *\n                        </label>\n                        <select\n                            id=\"branch\"\n                            value={branchId}\n                            onChange={(e) => setBranchId(Number(e.target.value))}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                            required\n                        >\n                            <option value=\"\">{t('common.pleaseSelect')}</option>\n                            {Array.isArray(branches) && branches.map(branch => (\n                                <option key={branch.id} value={branch.id}>\n                                    {branch.name}\n                                </option>\n                            ))}\n                        </select>\n                    </div>\n\n                    <div>\n                        <label htmlFor=\"dueDate\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.createTask.form.dueDate')}\n                        </label>\n                        <input\n                            type=\"date\"\n                            id=\"dueDate\"\n                            value={dueDate}\n                            onChange={(e) => setDueDate(e.target.value)}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                        />\n                    </div>\n                </>\n            )}\n\n            {/* Cerebro Articles Tab Content */}\n            {activeTab === 'cerebro' && (\n                <div>\n                    <div className=\"mb-4\">\n                        <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Verknpfte Cerebro-Artikel</h3>\n                        \n                        {selectedArticles.length > 0 ? (\n                            <ul className=\"mt-2 space-y-2\">\n                                {selectedArticles.map(article => (\n                                    <li key={article.id} className=\"flex items-center justify-between bg-gray-50 dark:bg-gray-700 p-2 rounded\">\n                                        <span className=\"dark:text-gray-300\">{article.title}</span>\n                                        <button\n                                            type=\"button\"\n                                            onClick={() => onArticleRemove(article.id)}\n                                            className=\"text-red-600 hover:text-red-800\"\n                                        >\n                                            {t('tasks.createTask.form.remove')}\n                                        </button>\n                                    </li>\n                                ))}\n                            </ul>\n                        ) : (\n                            <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">{t('tasks.createTask.form.noArticlesLinked')}</p>\n                        )}\n                    </div>\n                    \n                    <CerebroArticleSelector\n                        onArticleSelected={onArticleSelect}\n                        excludeArticleIds={selectedArticles.map(a => a.id)}\n                        selectedArticles={selectedArticles}\n                        onArticleRemove={onArticleRemove}\n                    />\n                </div>\n            )}\n\n            <div className=\"flex justify-end gap-3 pt-4\">\n                <button\n                    type=\"button\"\n                    onClick={handleClose}\n                    className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                    title={t('tasks.createTask.form.cancel')}\n                >\n                    <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <button\n                    type=\"submit\"\n                    className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                    title={loading ? t('tasks.createTask.form.creating') : t('tasks.createTask.form.create')}\n                    disabled={loading}\n                >\n                    {loading ? (\n                        <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                    ) : (\n                        <CheckIcon className=\"h-5 w-5\" />\n                    )}\n                </button>\n            </div>\n        </form>\n    );\n};\n\nexport default CreateTaskModal; ","import * as React from \"react\";\nfunction ClipboardDocumentIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ClipboardDocumentIcon);\nexport default ForwardRef;","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { ClipboardDocumentIcon } from '@heroicons/react/24/outline';\r\nimport useMessage from '../hooks/useMessage.ts';\r\n\r\ninterface Task {\r\n  id: number;\r\n  title: string;\r\n  description: string | null;\r\n  [key: string]: any;\r\n}\r\n\r\ninterface TaskDataBoxProps {\r\n  task: Task;\r\n}\r\n\r\nconst TaskDataBox: React.FC<TaskDataBoxProps> = ({ task }) => {\r\n  const { t } = useTranslation();\r\n  const { showMessage } = useMessage();\r\n\r\n  // Extrahiere automatisch generierte Daten aus task.description oder task.metadata\r\n  // Prfe ob Task ein Lebenszyklus-Task ist\r\n  const isLifecycleTask = task.title?.includes('ARL') || \r\n                          task.title?.includes('EPS') || \r\n                          task.title?.includes('Pension') || \r\n                          task.title?.includes('Caja') ||\r\n                          task.description?.includes('lifecycle');\r\n\r\n  // Versuche Daten aus description zu extrahieren (JSON-Format)\r\n  let autoGeneratedData: Record<string, any> = {};\r\n  \r\n  if (task.description) {\r\n    try {\r\n      // Versuche JSON aus description zu extrahieren\r\n      const jsonMatch = task.description.match(/\\{[\\s\\S]*\\}/);\r\n      if (jsonMatch) {\r\n        autoGeneratedData = JSON.parse(jsonMatch[0]);\r\n      }\r\n    } catch (e) {\r\n      // Kein JSON gefunden, versuche strukturierte Daten zu extrahieren\r\n      const lines = task.description.split('\\n');\r\n      lines.forEach(line => {\r\n        const match = line.match(/([^:]+):\\s*(.+)/);\r\n        if (match) {\r\n          const key = match[1].trim();\r\n          const value = match[2].trim();\r\n          autoGeneratedData[key] = value;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  // Wenn keine Daten gefunden wurden und es ein Lebenszyklus-Task ist, zeige Standard-Daten\r\n  if (Object.keys(autoGeneratedData).length === 0 && isLifecycleTask) {\r\n    autoGeneratedData = {\r\n      taskType: task.title,\r\n      description: task.description || t('lifecycle.noDataAvailable')\r\n    };\r\n  }\r\n\r\n  const handleCopyData = async () => {\r\n    try {\r\n      const dataString = JSON.stringify(autoGeneratedData, null, 2);\r\n      await navigator.clipboard.writeText(dataString);\r\n      showMessage(t('lifecycle.dataCopied', { defaultValue: 'Daten in Zwischenablage kopiert' }), 'success');\r\n    } catch (error) {\r\n      console.error('Fehler beim Kopieren:', error);\r\n      showMessage(t('lifecycle.copyError', { defaultValue: 'Fehler beim Kopieren' }), 'error');\r\n    }\r\n  };\r\n\r\n  // Zeige Box nur wenn es ein Lebenszyklus-Task ist oder Daten vorhanden sind\r\n  if (!isLifecycleTask && Object.keys(autoGeneratedData).length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 mb-4\">\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <h3 className=\"text-lg font-semibold flex items-center dark:text-white\">\r\n          <ClipboardDocumentIcon className=\"h-5 w-5 mr-2\" />\r\n          {t('lifecycle.autoGeneratedData', { defaultValue: 'Automatisch generierte Daten' })}\r\n        </h3>\r\n        <button\r\n          onClick={handleCopyData}\r\n          className=\"text-blue-600 dark:text-blue-400 hover:underline text-sm\"\r\n        >\r\n          {t('lifecycle.copyData', { defaultValue: 'Daten kopieren' })}\r\n        </button>\r\n      </div>\r\n      <div className=\"space-y-2\">\r\n        {Object.keys(autoGeneratedData).length > 0 ? (\r\n          Object.entries(autoGeneratedData).map(([key, value]) => (\r\n            <div key={key} className=\"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2\">\r\n              <span className=\"font-medium w-full sm:w-1/3 dark:text-gray-300\">\r\n                {t(`lifecycle.${key}`) || key}:\r\n              </span>\r\n              <span className=\"text-gray-600 dark:text-gray-400 flex-1 break-words\">\r\n                {typeof value === 'object' ? JSON.stringify(value, null, 2) : String(value)}\r\n              </span>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <div className=\"text-gray-500 dark:text-gray-400 text-sm\">\r\n            {t('lifecycle.noDataAvailable', { defaultValue: 'Keine automatisch generierten Daten verfgbar' })}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TaskDataBox;\r\n\r\n","import * as React from \"react\";\nfunction PaperAirplaneIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PaperAirplaneIcon);\nexport default ForwardRef;","import React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { EnvelopeIcon, PaperAirplaneIcon, ArrowPathIcon, CheckIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface Task {\n  id: number;\n  title: string;\n  description: string | null;\n  [key: string]: any;\n}\n\ninterface EmailTemplateBoxProps {\n  task: Task;\n}\n\nconst EmailTemplateBox: React.FC<EmailTemplateBoxProps> = ({ task }) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [emailTemplate, setEmailTemplate] = useState<string>('');\n  const [loading, setLoading] = useState(false);\n  const [emailSent, setEmailSent] = useState(false);\n  const [generating, setGenerating] = useState(false);\n\n  // Prfe ob Task ein Lebenszyklus-Task ist\n  const isLifecycleTask = task.title?.includes('ARL') || \n                          task.title?.includes('EPS') || \n                          task.title?.includes('Pension') || \n                          task.title?.includes('Caja') ||\n                          task.description?.includes('lifecycle');\n\n  // Zeige Box nur wenn es ein Lebenszyklus-Task ist\n  if (!isLifecycleTask) {\n    return null;\n  }\n\n  const handleGenerateTemplate = async () => {\n    setGenerating(true);\n    try {\n      // API-Call zum Generieren der Email-Vorlage\n      // TODO: Endpoint implementieren wenn Backend bereit ist\n      // const response = await axiosInstance.post(`/api/tasks/${task.id}/generate-email`);\n      // setEmailTemplate(response.data.template);\n      \n      // Temporr: Generiere einfache Vorlage basierend auf Task-Daten\n      const template = `Sehr geehrte Damen und Herren,\n\nim Rahmen des Onboarding-Prozesses bentigen wir die Anmeldung fr ${task.title}.\n\nBitte senden Sie uns die erforderlichen Informationen zurck.\n\nMit freundlichen Gren\nIhr Team`;\n      \n      setEmailTemplate(template);\n      showMessage(t('lifecycle.templateGenerated', { defaultValue: 'Email-Vorlage generiert' }), 'success');\n    } catch (error: any) {\n      console.error('Fehler beim Generieren der Email-Vorlage:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.templateGenerationError', { defaultValue: 'Fehler beim Generieren der Vorlage' }),\n        'error'\n      );\n    } finally {\n      setGenerating(false);\n    }\n  };\n\n  const handleSendEmail = async () => {\n    if (!emailTemplate.trim()) {\n      showMessage(t('lifecycle.templateRequired', { defaultValue: 'Bitte generieren Sie zuerst eine Vorlage' }), 'warning');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      // API-Call zum Versenden der Email\n      // TODO: Endpoint implementieren wenn Backend bereit ist\n      // await axiosInstance.post(`/api/tasks/${task.id}/send-email`, {\n      //   template: emailTemplate\n      // });\n      \n      // Temporr: Simuliere Versand\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      setEmailSent(true);\n      showMessage(t('lifecycle.emailSent', { defaultValue: 'Email erfolgreich versendet' }), 'success');\n    } catch (error: any) {\n      console.error('Fehler beim Versenden der Email:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.emailSendError', { defaultValue: 'Fehler beim Versenden der Email' }),\n        'error'\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 mb-4\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-lg font-semibold flex items-center dark:text-white\">\n          <EnvelopeIcon className=\"h-5 w-5 mr-2\" />\n          {t('lifecycle.emailTemplate', { defaultValue: 'Email-Vorlage' })}\n        </h3>\n        <button\n          onClick={handleGenerateTemplate}\n          disabled={generating}\n          className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center text-sm\"\n        >\n          {generating ? (\n            <>\n              <ArrowPathIcon className=\"h-4 w-4 mr-2 animate-spin\" />\n              {t('common.generating', { defaultValue: 'Generiere...' })}\n            </>\n          ) : (\n            t('lifecycle.generateTemplate', { defaultValue: 'Vorlage generieren' })\n          )}\n        </button>\n      </div>\n      \n      {emailTemplate && (\n        <div className=\"space-y-4\">\n          <textarea\n            value={emailTemplate}\n            onChange={(e) => {\n              setEmailTemplate(e.target.value);\n              setEmailSent(false);\n            }}\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            rows={10}\n            placeholder={t('lifecycle.templatePlaceholder', { defaultValue: 'Email-Vorlage wird hier angezeigt...' })}\n          />\n          <div className=\"flex justify-end\">\n            <button\n              onClick={handleSendEmail}\n              disabled={loading || emailSent}\n              className=\"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center text-sm\"\n            >\n              {loading ? (\n                <>\n                  <ArrowPathIcon className=\"h-4 w-4 mr-2 animate-spin\" />\n                  {t('common.sending', { defaultValue: 'Sende...' })}\n                </>\n              ) : emailSent ? (\n                <>\n                  <CheckIcon className=\"h-4 w-4 mr-2\" />\n                  {t('lifecycle.emailSent', { defaultValue: 'Versendet' })}\n                </>\n              ) : (\n                <>\n                  <PaperAirplaneIcon className=\"h-4 w-4 mr-2\" />\n                  {t('lifecycle.sendEmail', { defaultValue: 'Email versenden' })}\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n      )}\n      \n      {!emailTemplate && (\n        <div className=\"text-gray-500 dark:text-gray-400 text-sm text-center py-4\">\n          {t('lifecycle.noTemplate', { defaultValue: 'Klicken Sie auf \"Vorlage generieren\" um eine Email-Vorlage zu erstellen' })}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default EmailTemplateBox;\n\n","import React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport useMessage from '../hooks/useMessage.ts';\n\ninterface Task {\n  id: number;\n  title: string;\n  description: string | null;\n  responsibleId: number | null;\n  [key: string]: any;\n}\n\ninterface SocialSecurityCompletionBoxProps {\n  task: Task;\n  onComplete?: () => void;\n}\n\nconst SocialSecurityCompletionBox: React.FC<SocialSecurityCompletionBoxProps> = ({\n  task,\n  onComplete\n}) => {\n  const { t } = useTranslation();\n  const { showMessage } = useMessage();\n  const [formData, setFormData] = useState({\n    registrationNumber: '',\n    provider: '',\n    registrationDate: '',\n    notes: ''\n  });\n  const [loading, setLoading] = useState(false);\n\n  // Prfe ob Task ein Lebenszyklus-Task ist\n  const isLifecycleTask = task.title?.includes('ARL') || \n                          task.title?.includes('EPS') || \n                          task.title?.includes('Pension') || \n                          task.title?.includes('Caja') ||\n                          task.description?.includes('lifecycle');\n\n  // Bestimme Typ der Sozialversicherung aus Task-Titel\n  const getSocialSecurityType = (): string | null => {\n    if (task.title?.includes('ARL')) return 'arl';\n    if (task.title?.includes('EPS')) return 'eps';\n    if (task.title?.includes('Pension')) return 'pension';\n    if (task.title?.includes('Caja')) return 'caja';\n    return null;\n  };\n\n  // Zeige Box nur wenn es ein Lebenszyklus-Task ist\n  if (!isLifecycleTask) {\n    return null;\n  }\n\n  const socialSecurityType = getSocialSecurityType();\n\n  // Extrahiere userId aus task (muss aus task.responsibleId oder task.description kommen)\n  // TODO: Backend sollte userId in task-Metadaten bereitstellen\n  const extractUserId = (): number | null => {\n    // Versuche userId aus description zu extrahieren\n    if (task.description) {\n      const userIdMatch = task.description.match(/userId[:\\s]+(\\d+)/i);\n      if (userIdMatch) {\n        return parseInt(userIdMatch[1], 10);\n      }\n    }\n    // Fallback: verwende responsibleId (wenn es der User selbst ist)\n    return task.responsibleId;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    \n    try {\n      const userId = extractUserId();\n      if (!userId || !socialSecurityType) {\n        showMessage(\n          t('lifecycle.missingData', { defaultValue: 'Benutzer-ID oder Sozialversicherungs-Typ fehlt' }),\n          'error'\n        );\n        return;\n      }\n\n      // API-Call zum Abschlieen der Anmeldung\n      await axiosInstance.put(\n        API_ENDPOINTS.LIFECYCLE.SOCIAL_SECURITY(userId, socialSecurityType),\n        {\n          status: 'registered',\n          registrationNumber: formData.registrationNumber,\n          provider: formData.provider,\n          registrationDate: formData.registrationDate,\n          notes: formData.notes,\n          completedAt: new Date().toISOString()\n        }\n      );\n\n      showMessage(\n        t('lifecycle.registrationCompleted', { defaultValue: 'Anmeldung erfolgreich abgeschlossen' }),\n        'success'\n      );\n\n      // Formular zurcksetzen\n      setFormData({\n        registrationNumber: '',\n        provider: '',\n        registrationDate: '',\n        notes: ''\n      });\n\n      if (onComplete) {\n        onComplete();\n      }\n    } catch (error: any) {\n      console.error('Fehler beim Abschlieen der Anmeldung:', error);\n      showMessage(\n        error.response?.data?.message || t('lifecycle.registrationError', { defaultValue: 'Fehler beim Abschlieen der Anmeldung' }),\n        'error'\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 mb-4\">\n      <h3 className=\"text-lg font-semibold mb-4 dark:text-white\">\n        {t('lifecycle.completeRegistration', { defaultValue: 'Anmeldung abschlieen' })}\n      </h3>\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n            {t('lifecycle.registrationNumber', { defaultValue: 'Registrierungsnummer' })} *\n          </label>\n          <input\n            type=\"text\"\n            value={formData.registrationNumber}\n            onChange={(e) => setFormData({ ...formData, registrationNumber: e.target.value })}\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            required\n            placeholder={t('lifecycle.registrationNumberPlaceholder', { defaultValue: 'z.B. 123456789' })}\n          />\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n            {t('lifecycle.provider', { defaultValue: 'Anbieter' })} *\n          </label>\n          <input\n            type=\"text\"\n            value={formData.provider}\n            onChange={(e) => setFormData({ ...formData, provider: e.target.value })}\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            required\n            placeholder={t('lifecycle.providerPlaceholder', { defaultValue: 'z.B. ARL Sura, EPS Sanitas' })}\n          />\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n            {t('lifecycle.registrationDate', { defaultValue: 'Anmeldedatum' })} *\n          </label>\n          <input\n            type=\"date\"\n            value={formData.registrationDate}\n            onChange={(e) => setFormData({ ...formData, registrationDate: e.target.value })}\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            required\n          />\n        </div>\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n            {t('lifecycle.notes', { defaultValue: 'Notizen' })}\n          </label>\n          <textarea\n            value={formData.notes}\n            onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            rows={3}\n            placeholder={t('lifecycle.notesPlaceholder', { defaultValue: 'Zustzliche Informationen...' })}\n          />\n        </div>\n        <div className=\"flex justify-end\">\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center text-sm\"\n          >\n            {loading ? (\n              <>\n                <ArrowPathIcon className=\"h-4 w-4 mr-2 animate-spin\" />\n                {t('common.saving', { defaultValue: 'Speichere...' })}\n              </>\n            ) : (\n              <>\n                <CheckIcon className=\"h-4 w-4 mr-2\" />\n                {t('lifecycle.complete', { defaultValue: 'Abschlieen' })}\n              </>\n            )}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default SocialSecurityCompletionBox;\n\n","import React, { useEffect, useState, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS, getTaskAttachmentUrl } from '../config/api.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport CerebroArticleSelector from './CerebroArticleSelector.tsx';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, TrashIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport MarkdownPreview from './MarkdownPreview.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport TaskDataBox from './TaskDataBox.tsx';\nimport EmailTemplateBox from './EmailTemplateBox.tsx';\nimport SocialSecurityCompletionBox from './SocialSecurityCompletionBox.tsx';\n\ninterface User {\n    id: number;\n    firstName: string;\n    lastName: string;\n}\n\ninterface Role {\n    id: number;\n    name: string;\n}\n\ninterface Branch {\n    id: number;\n    name: string;\n}\n\ninterface TaskAttachment {\n    id: number;\n    fileName: string;\n    fileType: string;\n    fileSize: number;\n    filePath: string;\n    uploadedAt: string;\n    file?: File;\n}\n\ninterface CerebroArticle {\n    id: number;\n    title: string;\n    slug: string;\n    content?: string;\n}\n\ninterface Task {\n    id: number;\n    title: string;\n    description: string | null;\n    status: 'open' | 'in_progress' | 'improval' | 'quality_control' | 'done';\n    responsible: {\n        id: number;\n        firstName: string;\n        lastName: string;\n    } | null;\n    responsibleId: number | null;\n    role: {\n        id: number;\n        name: string;\n    } | null;\n    roleId: number | null;\n    qualityControl: {\n        id: number;\n        firstName: string;\n        lastName: string;\n    } | null;\n    branch: {\n        id: number;\n        name: string;\n    };\n    dueDate: string | null;\n    requestId: number | null;\n    attachments?: TaskAttachment[];\n}\n\ninterface EditTaskModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onTaskUpdated: (updatedTask: Task) => void;\n    task: Task;\n}\n\nconst EditTaskModal: React.FC<EditTaskModalProps> = ({ isOpen, onClose, onTaskUpdated, task }) => {\n    const { t } = useTranslation();\n    const { hasPermission } = usePermissions();\n    const { user } = useAuth();\n    const { openSidepane, closeSidepane } = useSidepane();\n    const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n    \n    // Entferne Bild-Markdown-Links aus der Beschreibung (fr Textarea-Anzeige)\n    const removeImageMarkdown = (text: string): string => {\n        if (!text) return '';\n        // Entferne alle Bild-Markdown-Links: ![alt](url)\n        return text.replace(/!\\[([^\\]]*)\\]\\([^)]+\\)/g, '').trim();\n    };\n    \n    const [title, setTitle] = useState(task.title || '');\n    const [description, setDescription] = useState(removeImageMarkdown(task.description || ''));\n    // Speichere die originale Beschreibung (mit Bildern) fr das Speichern\n    const originalDescription = task.description || '';\n    const [status, setStatus] = useState(task.status || 'open');\n    const [assigneeType, setAssigneeType] = useState<'user' | 'role'>(task.roleId ? 'role' : 'user');\n    const [responsibleId, setResponsibleId] = useState<number | null>(task.responsibleId || null);\n    const [roleId, setRoleId] = useState<number | null>(task.roleId || null);\n    const [qualityControlId, setQualityControlId] = useState<number | null>(task.qualityControl?.id || null);\n    const [branchId, setBranchId] = useState<number>(task.branch?.id || 0);\n    const [attachments, setAttachments] = useState<TaskAttachment[]>(task.attachments || []);\n    const [temporaryAttachments, setTemporaryAttachments] = useState<TaskAttachment[]>([]);\n    const [uploading, setUploading] = useState(false);\n    // Liste der whrend der Bearbeitung hochgeladenen Attachments (fr Cleanup bei Abbrechen)\n    const [uploadedDuringEdit, setUploadedDuringEdit] = useState<number[]>([]);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n    // Formatiere das Datum im Format YYYY-MM-DD fr das HTML-Datumseingabefeld\n    const formatDate = (dateString: string | null): string | null => {\n        if (!dateString) return null;\n        \n        // Versuche das Datum zu parsen\n        const date = new Date(dateString);\n        if (isNaN(date.getTime())) return null; // Ungltiges Datum\n        \n        // Formatiere als YYYY-MM-DD\n        return date.toISOString().split('T')[0];\n    };\n\n    const [dueDate, setDueDate] = useState<string | null>(formatDate(task.dueDate));\n    const [users, setUsers] = useState<User[]>([]);\n    const [roles, setRoles] = useState<Role[]>([]);\n    const [branches, setBranches] = useState<Branch[]>([]);\n    const [error, setError] = useState<string | null>(null);\n    const [loading, setLoading] = useState(false);\n    const [confirmDelete, setConfirmDelete] = useState(false);\n    const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n    const [linkedArticles, setLinkedArticles] = useState<CerebroArticle[]>([]);\n    const [activeTab, setActiveTab] = useState<'data' | 'cerebro'>('data');\n\n    const canDeleteTask = hasPermission('tasks', 'both', 'table');\n\n    // Responsive Design: berwache Fensterbreite\n    useEffect(() => {\n        const handleResize = () => {\n            setIsMobile(window.innerWidth < 640);\n            setIsLargeScreen(window.innerWidth > 1070);\n        };\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, []);\n\n    // Cleanup: Lsche hochgeladene Attachments wenn Modal ohne Speichern geschlossen wird\n    useEffect(() => {\n        if (!isOpen && uploadedDuringEdit.length > 0) {\n            // Modal wurde geschlossen - lsche alle whrend der Bearbeitung hochgeladenen Attachments\n            const cleanup = async () => {\n                for (const attachmentId of uploadedDuringEdit) {\n                    try {\n                        await axiosInstance.delete(API_ENDPOINTS.TASKS.ATTACHMENT(task.id, attachmentId));\n                        console.log(`Task Attachment ${attachmentId} gelscht (Modal ohne Speichern geschlossen)`);\n                    } catch (err) {\n                        console.error(`Fehler beim Lschen von Task Attachment ${attachmentId}:`, err);\n                    }\n                }\n                setUploadedDuringEdit([]);\n            };\n            cleanup();\n        }\n    }, [isOpen, uploadedDuringEdit, task.id]);\n\n    // Sidepane-Status verwalten\n    useEffect(() => {\n        if (isOpen) {\n            openSidepane();\n        } else {\n            closeSidepane();\n        }\n        \n        return () => {\n            closeSidepane();\n        };\n    }, [isOpen, openSidepane, closeSidepane]);\n\n    useEffect(() => {\n        if (isOpen) {\n            fetchUsers();\n            fetchRoles();\n            fetchBranches();\n            fetchLinkedArticles();\n            fetchAttachments();\n        }\n    }, [isOpen, task.id]);\n\n    const fetchUsers = async () => {\n        try {\n            setError(null);\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                return;\n            }\n            \n            const response = await axiosInstance.get(API_ENDPOINTS.USERS.DROPDOWN);\n            setUsers(response.data || []);\n        } catch (err) {\n            console.error('Fehler beim Laden der Benutzer:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            if (axiosError.code === 'ERR_NETWORK') {\n                setError(t('tasks.editTask.errors.connectionError'));\n            } else {\n                setError(`${t('tasks.editTask.errors.loadUsersError')}: ${axiosError.response?.data?.message || axiosError.message}`);\n            }\n        }\n    };\n\n    const fetchRoles = async () => {\n        try {\n            setError(null);\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                return;\n            }\n            \n            const response = await axiosInstance.get(API_ENDPOINTS.ROLES.BASE);\n            setRoles(response.data || []);\n        } catch (err) {\n            console.error('Fehler beim Laden der Rollen:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            if (axiosError.code === 'ERR_NETWORK') {\n                setError(t('tasks.editTask.errors.connectionError'));\n            } else {\n                setError(`${t('tasks.editTask.errors.loadRolesError')}: ${axiosError.response?.data?.message || axiosError.message}`);\n            }\n        }\n    };\n\n    const fetchBranches = async () => {\n        try {\n            setError(null);\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                return;\n            }\n            \n            const response = await axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE);\n            setBranches(response.data || []);\n        } catch (err) {\n            console.error('Fehler beim Laden der Niederlassungen:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            if (axiosError.code === 'ERR_NETWORK') {\n                setError(t('tasks.editTask.errors.connectionError'));\n            } else {\n                setError(`${t('tasks.editTask.errors.loadBranchesError')}: ${axiosError.response?.data?.message || axiosError.message}`);\n            }\n        }\n    };\n\n    const fetchLinkedArticles = async () => {\n        try {\n            setError(null);\n            const response = await axiosInstance.get(API_ENDPOINTS.TASKS.CARTICLES(task.id));\n            setLinkedArticles(response.data || []);\n        } catch (err) {\n            console.error('Fehler beim Laden der verknpften Artikel:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        }\n    };\n\n    const fetchAttachments = async () => {\n        try {\n            setError(null);\n            const response = await axiosInstance.get(API_ENDPOINTS.TASKS.ATTACHMENTS(task.id));\n            setAttachments(response.data || []);\n        } catch (err) {\n            console.error('Fehler beim Laden der Anhnge:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n            setAttachments([]);\n        }\n    };\n\n    const handlePaste = async (event: React.ClipboardEvent) => {\n        const items = event.clipboardData.items;\n        \n        for (let i = 0; i < items.length; i++) {\n            const item = items[i];\n            \n            // Prfen, ob das eingefgte Element ein Bild ist\n            if (item.type.indexOf('image') === 0) {\n                event.preventDefault(); // Standardeingabe verhindern\n                \n                const file = item.getAsFile();\n                if (file) {\n                    await uploadFileAndInsertLink(file);\n                }\n                return;\n            }\n        }\n    };\n\n    const handleDrop = async (event: React.DragEvent) => {\n        event.preventDefault();\n        event.stopPropagation();\n        \n        if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\n            const file = event.dataTransfer.files[0];\n            await uploadFileAndInsertLink(file);\n        }\n    };\n\n    const handleDragOver = (event: React.DragEvent) => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    const uploadFileAndInsertLink = async (file: File) => {\n        setUploading(true);\n        setError(null);\n\n        try {\n            const formData = new FormData();\n            formData.append('file', file);\n\n            const response = await axiosInstance.post(\n                API_ENDPOINTS.TASKS.ATTACHMENTS(task.id),\n                formData,\n                {\n                    headers: {\n                        'Content-Type': 'multipart/form-data',\n                    },\n                }\n            );\n\n            const newAttachment = response.data;\n            setAttachments([...attachments, newAttachment]);\n            // Merke diese Attachment-ID fr mgliches Cleanup\n            setUploadedDuringEdit(prev => [...prev, newAttachment.id]);\n\n            // Fr Bilder: KEIN Markdown-Link ins Textarea einfgen (wird beim Speichern automatisch hinzugefgt)\n            // Fr andere Dateien: Link ins Textarea einfgen\n            if (!newAttachment.fileType.startsWith('image/')) {\n                const insertText = `\\n[${newAttachment.fileName}](${getTaskAttachmentUrl(task.id, newAttachment.id)})\\n`;\n                \n                // Fge den Link an der aktuellen Cursorposition ein\n                if (textareaRef.current) {\n                    const cursorPos = textareaRef.current.selectionStart;\n                    const textBefore = description.substring(0, cursorPos);\n                    const textAfter = description.substring(cursorPos);\n                    \n                    setDescription(textBefore + insertText + textAfter);\n                    \n                    // Setze den Cursor hinter den eingefgten Link\n                    setTimeout(() => {\n                        if (textareaRef.current) {\n                            const newPos = cursorPos + insertText.length;\n                            textareaRef.current.selectionStart = newPos;\n                            textareaRef.current.selectionEnd = newPos;\n                            textareaRef.current.focus();\n                        }\n                    }, 0);\n                } else {\n                    setDescription(description + insertText);\n                }\n            }\n        } catch (err) {\n            console.error('Fehler beim Verarbeiten der Datei:', err);\n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        } finally {\n            setUploading(false);\n        }\n    };\n\n    const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n        const files = event.target.files;\n        if (!files || files.length === 0) return;\n\n        const file = files[0];\n        await uploadFileAndInsertLink(file);\n        \n        // Zurcksetzen des Datei-Inputs\n        if (fileInputRef.current) {\n            fileInputRef.current.value = '';\n        }\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setError(null);\n        setLoading(true);\n\n        try {\n            // Validierung\n            if (!title || !status || !branchId) {\n                setError(t('tasks.editTask.errors.fillAllFields'));\n                setLoading(false);\n                return;\n            }\n\n            // berprfen, ob entweder Benutzer oder Rolle ausgewhlt wurde\n            if (assigneeType === 'user' && !responsibleId) {\n                setError(t('tasks.editTask.form.chooseUser'));\n                setLoading(false);\n                return;\n            }\n            \n            if (assigneeType === 'role' && !roleId) {\n                setError(t('tasks.editTask.form.chooseRole'));\n                setLoading(false);\n                return;\n            }\n\n            // Verwende description (vom Textarea) als Basis\n            // Fge Markdown-Links fr Bilder automatisch hinzu (falls noch nicht vorhanden)\n            let finalDescription = description || ''; // WICHTIG: Verwende description als Basis, nicht originalDescription\n            const imageAttachments = attachments.filter(att => att.fileType?.startsWith('image/') && att.id);\n            \n            // Extrahiere bereits vorhandene Bilder aus originalDescription (falls vorhanden)\n            const existingImagePattern = /!\\[([^\\]]*)\\]\\([^)]+\\)/g;\n            const existingImages: string[] = [];\n            let match;\n            if (originalDescription) {\n                while ((match = existingImagePattern.exec(originalDescription)) !== null) {\n                    existingImages.push(match[0]);\n                }\n            }\n            \n            // Fge alle Bilder hinzu (sowohl neue als auch bereits vorhandene)\n            for (const attachment of imageAttachments) {\n                const imageUrl = getTaskAttachmentUrl(task.id, attachment.id!);\n                const imageMarkdown = `![${attachment.fileName}](${imageUrl})`;\n                \n                // Prfe, ob dieser Bild-Link bereits in der Beschreibung vorhanden ist\n                const escapedFileName = attachment.fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n                const imagePattern = new RegExp(`!\\\\[${escapedFileName}\\\\]\\\\([^)]+\\\\)`, 'g');\n                \n                if (!imagePattern.test(finalDescription)) {\n                    // Bild-Link ist noch nicht in der Beschreibung, fge ihn hinzu\n                    finalDescription = finalDescription ? `${finalDescription}\\n${imageMarkdown}` : imageMarkdown;\n                }\n            }\n            \n            // Fge auch bereits vorhandene Bilder hinzu, die nicht in attachments sind (z.B. von anderen Quellen)\n            for (const existingImage of existingImages) {\n                if (!finalDescription.includes(existingImage)) {\n                    finalDescription = finalDescription ? `${finalDescription}\\n${existingImage}` : existingImage;\n                }\n            }\n\n            // Basis-Daten fr die Anfrage\n            const taskData: any = {\n                title,\n                description: finalDescription,\n                status,\n                qualityControlId,\n                branchId,\n                dueDate\n            };\n\n            // Entweder responsibleId oder roleId hinzufgen, nicht beides\n            if (assigneeType === 'user') {\n                taskData.responsibleId = responsibleId;\n                taskData.roleId = null; // Rolle explizit auf null setzen, um sie zu entfernen\n            } else if (assigneeType === 'role') {\n                taskData.roleId = roleId;\n                taskData.responsibleId = null; // Benutzer explizit auf null setzen, um ihn zu entfernen\n            }\n\n            const response = await axiosInstance.put(`${API_ENDPOINTS.TASKS.BASE}/${task.id}`, taskData);\n\n            console.log('Task aktualisiert:', response.data);\n            \n            // Hole den aktualisierten Task vom Server (inkl. Attachments)\n            const updatedTaskResponse = await axiosInstance.get(API_ENDPOINTS.TASKS.BY_ID(task.id));\n            \n            // Attachments sind bereits in der Response enthalten\n            // URL-Generierung fr Attachments hinzufgen\n            if (updatedTaskResponse.data.attachments) {\n                updatedTaskResponse.data.attachments = updatedTaskResponse.data.attachments.map((att: any) => ({\n                    id: att.id,\n                    fileName: att.fileName,\n                    fileType: att.fileType,\n                    fileSize: att.fileSize,\n                    filePath: att.filePath,\n                    uploadedAt: att.uploadedAt,\n                    url: getTaskAttachmentUrl(task.id, att.id)\n                }));\n            } else {\n                updatedTaskResponse.data.attachments = [];\n            }\n            \n            // bergebe den aktualisierten Task an den Callback\n            // Reset uploadedDuringEdit da erfolgreich gespeichert\n            setUploadedDuringEdit([]);\n            onTaskUpdated(updatedTaskResponse.data);\n            onClose();\n        } catch (err) {\n            console.error('Fehler beim Aktualisieren des Tasks:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleDelete = async () => {\n        if (!confirmDelete) {\n            setConfirmDelete(true);\n            return;\n        }\n        \n        try {\n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                return;\n            }\n\n            await axiosInstance.delete(API_ENDPOINTS.TASKS.BY_ID(task.id));\n\n            // Beim Lschen wird kein Task zurckgegeben, daher undefined bergeben\n            onTaskUpdated(undefined as any);\n            onClose();\n        } catch (err) {\n            console.error('Delete Error:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        }\n    };\n\n    const handleAddArticle = async (article: CerebroArticle) => {\n        try {\n            setError(null);\n            \n            await axiosInstance.post(\n                API_ENDPOINTS.TASKS.LINK_CARTICLE(task.id, article.id)\n            );\n            \n            setLinkedArticles(prev => [...prev, article]);\n        } catch (err) {\n            console.error('Fehler beim Verknpfen des Artikels:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        }\n    };\n    \n    const handleRemoveArticle = async (articleId: number) => {\n        try {\n            setError(null);\n            \n            await axiosInstance.delete(\n                API_ENDPOINTS.TASKS.UNLINK_CARTICLE(task.id, articleId)\n            );\n            \n            setLinkedArticles(prev => prev.filter(a => a.id !== articleId));\n        } catch (err) {\n            console.error('Fehler beim Entfernen der Artikelverknpfung:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        }\n    };\n\n    const handleDeleteAttachment = async (attachmentId: number) => {\n        try {\n            setError(null);\n            \n            // Finde den zu entfernenden Anhang\n            const attachmentToRemove = attachments.find(a => a.id === attachmentId);\n            \n            if (attachmentToRemove) {\n                await axiosInstance.delete(API_ENDPOINTS.TASKS.ATTACHMENT(task.id, attachmentId));\n                \n                // Entferne den Anhang aus der Liste\n                setAttachments(attachments.filter(attachment => attachment.id !== attachmentId));\n                \n                // Entferne auch die Verweise im Beschreibungstext\n                if (attachmentToRemove.fileName) {\n                    // Erzeuge URL-Muster fr diesen Anhang\n                    const attachmentUrl = getTaskAttachmentUrl(task.id, attachmentId);\n                    const escapedAttachmentUrl = attachmentUrl.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n                    \n                    // Suche nach Bild- und Link-Markdown\n                    const imagePattern = new RegExp(`!\\\\[(.*?)\\\\]\\\\(${escapedAttachmentUrl}\\\\)`, 'g');\n                    const linkPattern = new RegExp(`\\\\[(.*?)\\\\]\\\\(${escapedAttachmentUrl}\\\\)`, 'g');\n                    \n                    // Bereinige die Beschreibung\n                    const newDescription = description\n                        .replace(imagePattern, '')\n                        .replace(linkPattern, '')\n                        // Entferne berschssige Leerzeilen, die durch das Entfernen entstehen knnten\n                        .replace(/\\n{3,}/g, '\\n\\n');\n                    \n                    setDescription(newDescription);\n                }\n            }\n        } catch (err) {\n            console.error('Fehler beim Lschen des Anhangs:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        }\n    };\n\n    const handleDownloadAttachment = async (attachment: TaskAttachment) => {\n        try {\n            const response = await axiosInstance.get(\n                API_ENDPOINTS.TASKS.ATTACHMENT(task.id, attachment.id),\n                { responseType: 'blob' }\n            );\n            \n            // Blob-URL erstellen und Download auslsen\n            const url = window.URL.createObjectURL(new Blob([response.data]));\n            const link = document.createElement('a');\n            link.href = url;\n            link.setAttribute('download', attachment.fileName);\n            document.body.appendChild(link);\n            link.click();\n            link.remove();\n        } catch (err) {\n            console.error('Fehler beim Herunterladen des Anhangs:', err);\n            \n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        }\n    };\n\n    const handleRemoveTemporaryAttachment = (index: number) => {\n        // Finde den zu entfernenden Anhang\n        const attachmentToRemove = temporaryAttachments[index];\n        \n        if (attachmentToRemove) {\n            // Entferne den Anhang aus dem temporaryAttachments-Array\n            setTemporaryAttachments(temporaryAttachments.filter((_, i) => i !== index));\n            \n            // Entferne auch den Verweis im Beschreibungstext\n            if (attachmentToRemove.fileName) {\n                // Suche nach Bild- und Link-Markdown mit dem Dateinamen\n                const escapedFileName = attachmentToRemove.fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n                const uploadText = t('tasks.editTask.form.uploadAfterCreate');\n                const imagePattern = new RegExp(`!\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n                const linkPattern = new RegExp(`\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n                \n                // Bereinige die Beschreibung\n                const newDescription = description\n                    .replace(imagePattern, '')\n                    .replace(linkPattern, '')\n                    // Entferne berschssige Leerzeilen, die durch das Entfernen entstehen knnten\n                    .replace(/\\n{3,}/g, '\\n\\n');\n                \n                setDescription(newDescription);\n            }\n        }\n    };\n\n    const renderForm = () => (\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {/* Tabs Navigation */}\n            <div className=\"border-b border-gray-200 dark:border-gray-700\">\n                <nav className=\"-mb-px flex space-x-4\" aria-label=\"Tabs\">\n                    <button\n                        type=\"button\"\n                        className={`${\n                            activeTab === 'data'\n                                ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:border-gray-600'\n                        } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                        onClick={() => setActiveTab('data')}\n                    >\n                        {t('tasks.editTask.tabs.data')}\n                    </button>\n                    <button\n                        type=\"button\"\n                        className={`${\n                            activeTab === 'cerebro'\n                                ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:border-gray-600'\n                        } whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm`}\n                        onClick={() => setActiveTab('cerebro')}\n                    >\n                        {t('tasks.editTask.tabs.cerebro')}\n                    </button>\n                </nav>\n            </div>\n\n            {/* Data Tab Content */}\n            {activeTab === 'data' && (\n                <>\n                    <div>\n                        <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.editTask.form.title')}\n                        </label>\n                        <input\n                            type=\"text\"\n                            id=\"title\"\n                            value={title}\n                            onChange={(e) => setTitle(e.target.value)}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                            required\n                        />\n                    </div>\n\n                    <div>\n                        <label htmlFor=\"description_edit\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.editTask.form.description')}\n                        </label>\n                        <div className=\"relative\">\n                            <textarea\n                                ref={textareaRef}\n                                id=\"description_edit\"\n                                rows={6}\n                                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                                value={description}\n                                onChange={(e) => setDescription(e.target.value)}\n                                onPaste={handlePaste}\n                                onDrop={handleDrop}\n                                onDragOver={handleDragOver}\n                                placeholder={t('tasks.editTask.form.descriptionPlaceholder')}\n                            />\n                            <button\n                                type=\"button\"\n                                onClick={() => fileInputRef.current?.click()}\n                                className=\"absolute bottom-2 left-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none\"\n                                title={t('tasks.editTask.form.fileUpload')}\n                            >\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n                                </svg>\n                            </button>\n                            <input\n                                ref={fileInputRef}\n                                type=\"file\"\n                                onChange={handleFileUpload}\n                                className=\"hidden\"\n                            />\n                            {uploading && (\n                                <div className=\"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-70 dark:bg-opacity-70\">\n                                    <span className=\"text-sm text-gray-600 dark:text-gray-300\">{t('tasks.editTask.form.uploading')}</span>\n                                </div>\n                            )}\n                        </div>\n                        {renderAttachments()}\n                        {renderTemporaryAttachments()}\n                        {/* Bilder werden bereits im Textarea als Markdown angezeigt und in der Card durch MarkdownPreview mit showImagePreview={true} */}\n                    </div>\n\n                    <div>\n                        <label htmlFor=\"status\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.editTask.form.status')}\n                        </label>\n                        <select\n                            id=\"status\"\n                            value={status}\n                            onChange={(e) => setStatus(e.target.value as Task['status'])}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                        >\n                            <option value=\"open\">{t('tasks.status.open')}</option>\n                            <option value=\"in_progress\">{t('tasks.status.in_progress')}</option>\n                            <option value=\"improval\">{t('tasks.status.improval')}</option>\n                            <option value=\"quality_control\">{t('tasks.status.quality_control')}</option>\n                            <option value=\"done\">{t('tasks.status.done')}</option>\n                        </select>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.editTask.form.responsibleFor')} *\n                        </label>\n                        <div className=\"flex space-x-4\">\n                            <label className=\"inline-flex items-center\">\n                                <input\n                                    type=\"radio\"\n                                    className=\"form-radio text-blue-600 dark:bg-gray-700 dark:border-gray-600\"\n                                    name=\"assigneeType\"\n                                    value=\"user\"\n                                    checked={assigneeType === 'user'}\n                                    onChange={() => {\n                                        setAssigneeType('user');\n                                        setRoleId(null);\n                                    }}\n                                />\n                                <span className=\"ml-2 dark:text-gray-300\">{t('tasks.editTask.form.user')}</span>\n                            </label>\n                            <label className=\"inline-flex items-center\">\n                                <input\n                                    type=\"radio\"\n                                    className=\"form-radio text-blue-600 dark:bg-gray-700 dark:border-gray-600\"\n                                    name=\"assigneeType\"\n                                    value=\"role\"\n                                    checked={assigneeType === 'role'}\n                                    onChange={() => {\n                                        setAssigneeType('role');\n                                        setResponsibleId(null);\n                                    }}\n                                />\n                                <span className=\"ml-2 dark:text-gray-300\">{t('tasks.editTask.form.role')}</span>\n                            </label>\n                        </div>\n                    </div>\n\n                    {assigneeType === 'user' ? (\n                        <div>\n                            <label htmlFor=\"responsible\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                {t('tasks.editTask.form.responsibleUser')} *\n                            </label>\n                            <select\n                                id=\"responsible\"\n                                value={responsibleId === null ? '' : responsibleId}\n                                onChange={(e) => setResponsibleId(e.target.value ? Number(e.target.value) : null)}\n                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                                required={assigneeType === 'user'}\n                            >\n                                <option value=\"\">{t('tasks.editTask.form.pleaseSelect')}</option>\n                                {Array.isArray(users) && users.map(user => (\n                                    <option key={user.id} value={user.id}>\n                                        {user.firstName} {user.lastName}\n                                    </option>\n                                ))}\n                            </select>\n                        </div>\n                    ) : (\n                        <div>\n                            <label htmlFor=\"role\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                {t('tasks.editTask.form.responsibleRole')} *\n                            </label>\n                            <select\n                                id=\"role\"\n                                value={roleId === null ? '' : roleId}\n                                onChange={(e) => setRoleId(e.target.value ? Number(e.target.value) : null)}\n                                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                                required={assigneeType === 'role'}\n                            >\n                                <option value=\"\">{t('tasks.editTask.form.pleaseSelect')}</option>\n                                {Array.isArray(roles) && roles.map(role => (\n                                    <option key={role.id} value={role.id}>\n                                        {role.name}\n                                    </option>\n                                ))}\n                            </select>\n                        </div>\n                    )}\n\n                    <div>\n                        <label htmlFor=\"qualityControl\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.editTask.form.qualityControl')}\n                        </label>\n                        <select\n                            id=\"qualityControl\"\n                            value={qualityControlId === null ? '' : qualityControlId}\n                            onChange={(e) => setQualityControlId(e.target.value ? Number(e.target.value) : null)}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                        >\n                            <option value=\"\">{t('tasks.editTask.form.noQualityControl')}</option>\n                            {Array.isArray(users) && users.map(user => (\n                                <option key={user.id} value={user.id}>\n                                    {user.firstName} {user.lastName}\n                                </option>\n                            ))}\n                        </select>\n                    </div>\n\n                    <div>\n                        <label htmlFor=\"branch\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.editTask.form.branch')}\n                        </label>\n                        <select\n                            id=\"branch\"\n                            value={branchId === 0 ? '' : branchId}\n                            onChange={(e) => setBranchId(e.target.value ? Number(e.target.value) : 0)}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                            required\n                        >\n                            <option value=\"\">{t('common.pleaseSelect')}</option>\n                            {Array.isArray(branches) && branches.map(branch => (\n                                <option key={branch.id} value={branch.id}>\n                                    {branch.name}\n                                </option>\n                            ))}\n                        </select>\n                    </div>\n\n                    <div>\n                        <label htmlFor=\"dueDate\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                            {t('tasks.editTask.form.dueDate')}\n                        </label>\n                        <input\n                            type=\"date\"\n                            id=\"dueDate\"\n                            value={dueDate || ''}\n                            onChange={(e) => {\n                                // Wenn das Feld leer ist, setze auf null\n                                if (!e.target.value) {\n                                    setDueDate(null);\n                                } else {\n                                    // Ansonsten behalte das Format YYYY-MM-DD bei\n                                    setDueDate(e.target.value);\n                                }\n                            }}\n                            className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                        />\n                    </div>\n                </>\n            )}\n\n            {/* Cerebro Articles Tab Content */}\n            {activeTab === 'cerebro' && (\n                <div>\n                    {linkedArticles.length > 0 && (\n                        <div className=\"mb-4\">\n                            <h3 className=\"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">{t('tasks.editTask.form.linkedCerebroArticles')}</h3>\n                            <ul className=\"space-y-2\">\n                                {linkedArticles.map(article => (\n                                    <li key={article.id} className=\"flex items-center justify-between bg-gray-50 dark:bg-gray-700 p-2 rounded\">\n                                        <a \n                                            href={`/cerebro/articles/${article.slug}`} \n                                            target=\"_blank\" \n                                            rel=\"noopener noreferrer\"\n                                            className=\"text-blue-600 hover:underline dark:text-blue-400 dark:hover:text-blue-300\"\n                                        >\n                                            {article.title}\n                                        </a>\n                                        <button\n                                            type=\"button\"\n                                            onClick={() => handleRemoveArticle(article.id)}\n                                            className=\"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300\"\n                                        >\n                                            {t('tasks.editTask.form.remove')}\n                                        </button>\n                                    </li>\n                                ))}\n                            </ul>\n                        </div>\n                    )}\n\n                    <CerebroArticleSelector \n                        onArticleSelected={handleAddArticle}\n                        excludeArticleIds={linkedArticles.map(a => a.id)}\n                        selectedArticles={linkedArticles}\n                        onArticleRemove={handleRemoveArticle}\n                    />\n                </div>\n            )}\n\n            {/* Lifecycle Task Boxes - nur fr Lebenszyklus-Tasks */}\n            {activeTab === 'data' && (task.title?.includes('ARL') || \n                                      task.title?.includes('EPS') || \n                                      task.title?.includes('Pension') || \n                                      task.title?.includes('Caja') ||\n                                      task.description?.includes('lifecycle')) && (\n                <>\n                    <TaskDataBox task={task} />\n                    <EmailTemplateBox task={task} />\n                    <SocialSecurityCompletionBox \n                        task={task} \n                        onComplete={() => {\n                            // Optional: Task neu laden oder Status aktualisieren\n                            if (onTaskUpdated) {\n                                // Task wird automatisch aktualisiert wenn Modal geschlossen wird\n                            }\n                        }} \n                    />\n                </>\n            )}\n                \n            <div className=\"flex justify-between pt-4\">\n                {canDeleteTask && (\n                    <button\n                        type=\"button\"\n                        onClick={handleDelete}\n                        className={`p-2 rounded-md ${\n                            confirmDelete\n                                ? 'bg-red-600 text-white dark:bg-red-700 dark:text-white hover:bg-red-700 dark:hover:bg-red-600'\n                                : 'text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300'\n                        }`}\n                        title={confirmDelete ? t('tasks.editTask.form.confirmDelete') : t('tasks.editTask.form.delete')}\n                    >\n                        {confirmDelete ? (\n                            <CheckIcon className=\"h-5 w-5\" />\n                        ) : (\n                            <TrashIcon className=\"h-5 w-5\" />\n                        )}\n                    </button>\n                )}\n                <div className=\"flex gap-2\">\n                    <button\n                        type=\"button\"\n                        onClick={onClose}\n                        className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n                        title={t('tasks.editTask.form.cancel')}\n                    >\n                        <XMarkIcon className=\"h-5 w-5\" />\n                    </button>\n                    <button\n                        type=\"submit\"\n                        className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                        title={loading ? t('tasks.editTask.form.saving') : t('tasks.editTask.form.save')}\n                        disabled={loading}\n                    >\n                        {loading ? (\n                            <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                        ) : (\n                            <CheckIcon className=\"h-5 w-5\" />\n                        )}\n                    </button>\n                </div>\n            </div>\n        </form>\n    );\n\n    const renderAttachments = () => {\n        if (attachments.length === 0) return null;\n        \n        return (\n            <div className=\"mt-2\">\n                <ul className=\"flex flex-wrap gap-2\">\n                    {attachments.map((attachment) => (\n                        <li key={attachment.id} className=\"inline-flex items-center bg-gray-100 dark:bg-gray-700 rounded-md px-2 py-1 relative group\">\n                            <span className=\"text-sm font-medium text-gray-800 dark:text-gray-300\">\n                                {attachment.fileName}\n                            </span>\n                            <div className=\"flex ml-2\">\n                                <button\n                                    type=\"button\"\n                                    onClick={() => handleDownloadAttachment(attachment)}\n                                    className=\"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-1\"\n                                    title={t('tasks.editTask.form.download')}\n                                >\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n                                    </svg>\n                                </button>\n                                <button\n                                    type=\"button\"\n                                    onClick={() => handleDeleteAttachment(attachment.id)}\n                                    className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 ml-1\"\n                                    title={t('tasks.editTask.form.remove')}\n                                >\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                                    </svg>\n                                </button>\n                            </div>\n                            {/* Tooltip fr Bildvorschau bei Bild-Dateien */}\n                            {attachment.fileType.startsWith('image/') && (\n                                <div className=\"absolute z-10 invisible group-hover:visible bg-white dark:bg-gray-800 p-2 rounded-md shadow-lg -top-32 left-0 border border-gray-200 dark:border-gray-600\">\n                                    <img \n                                        src={getTaskAttachmentUrl(task.id, attachment.id)}\n                                        alt={attachment.fileName}\n                                        className=\"max-w-[200px] max-h-[150px] object-contain\"\n                                    />\n                                </div>\n                            )}\n                        </li>\n                    ))}\n                </ul>\n            </div>\n        );\n    };\n\n    const renderTemporaryAttachments = () => {\n        if (temporaryAttachments.length === 0) return null;\n        \n        return (\n            <div className=\"mt-2\">\n                <ul className=\"flex flex-wrap gap-2\">\n                    {temporaryAttachments.map((attachment, index) => (\n                        <li key={`temp-${index}`} className=\"inline-flex items-center bg-gray-100 dark:bg-gray-700 rounded-md px-2 py-1 relative group\">\n                            <span className=\"text-sm font-medium text-gray-800 dark:text-gray-300\">\n                                {attachment.fileName}\n                            </span>\n                            <div className=\"flex ml-2\">\n                                <button\n                                    type=\"button\"\n                                    onClick={() => handleRemoveTemporaryAttachment(index)}\n                                    className=\"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 ml-1\"\n                                    title={t('tasks.editTask.form.remove')}\n                                >\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                                    </svg>\n                                </button>\n                            </div>\n                            {/* Tooltip fr Bildvorschau bei Bild-Dateien */}\n                            {attachment.fileType?.startsWith('image/') && attachment.file && (\n                                <div className=\"absolute z-10 invisible group-hover:visible bg-white dark:bg-gray-800 p-2 rounded-md shadow-lg -top-32 left-0 border border-gray-200 dark:border-gray-600\">\n                                    <img \n                                        src={URL.createObjectURL(attachment.file)}\n                                        alt={attachment.fileName}\n                                        className=\"max-w-[200px] max-h-[150px] object-contain\"\n                                    />\n                                </div>\n                            )}\n                        </li>\n                    ))}\n                </ul>\n            </div>\n        );\n    };\n\n    if (!isOpen) return null;\n\n    // Fr Mobile (unter 640px) - klassisches Modal\n    if (isMobile) {\n        return (\n            <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n                <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n                \n                <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                    <Dialog.Panel className=\"mx-auto max-w-xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n                            <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                                {t('tasks.editTask.title')}\n                            </Dialog.Title>\n                            <button\n                                onClick={onClose}\n                                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                            >\n                                <XMarkIcon className=\"h-6 w-6\" />\n                            </button>\n                        </div>\n\n                        <div className=\"p-4\">\n                            {error && (\n                                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                                    {error}\n                                </div>\n                            )}\n\n                            {renderForm()}\n                        </div>\n                    </Dialog.Panel>\n                </div>\n            </Dialog>\n        );\n    }\n\n    // Fr Desktop (ab 640px) - Sidepane\n    // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n    return (\n        <>\n            {/* Backdrop - nur wenn offen und <= 1070px */}\n            {isOpen && !isLargeScreen && (\n                <div \n                    className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n                    aria-hidden=\"true\" \n                    onClick={onClose}\n                    style={{\n                        opacity: isOpen ? 1 : 0,\n                        transition: 'opacity 300ms ease-out'\n                    }}\n                />\n            )}\n            \n            {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n            <div \n                className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n                style={{\n                    transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n                    pointerEvents: isOpen ? 'auto' : 'none'\n                }}\n                aria-hidden={!isOpen}\n                role=\"dialog\"\n                aria-modal={isOpen}\n            >\n                <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n                    <h2 className=\"text-lg font-semibold dark:text-white\">\n                            {t('tasks.editTask.title')}\n                    </h2>\n                    <button\n                        onClick={onClose}\n                        className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n                    >\n                        <XMarkIcon className=\"h-6 w-6\" />\n                    </button>\n                </div>\n\n                <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n                    {error && (\n                        <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                            {error}\n                        </div>\n                    )}\n\n                    {renderForm()}\n                </div>\n            </div>\n        </>\n    );\n};\n\nexport default EditTaskModal; ","import * as React from \"react\";\nfunction ListBulletIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ListBulletIcon);\nexport default ForwardRef;","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { ClockIcon, ListBulletIcon, ArrowPathIcon, ExclamationTriangleIcon } from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { useWorktime } from '../contexts/WorktimeContext.tsx';\nimport { useBranch } from '../contexts/BranchContext.tsx';\nimport { useOrganization } from '../contexts/OrganizationContext.tsx';\nimport { WorktimeModal } from './WorktimeModal.tsx';\n\n// Wir entfernen die benutzerdefinierten API-URL-Definitionen und verwenden die direkte URL,\n// um Konflikte mit der globalen Axios-Konfiguration zu vermeiden\n// const API_BASE_URL = 'http://localhost:5000';\n// const API_URL = `${API_BASE_URL}/api`;\n\ninterface Branch {\n    id: number;\n    name: string;\n}\n\ninterface WorkTime {\n    id: number;\n    startTime: Date;\n    endTime: Date | null;\n    branchId: number;\n    userId: number;\n    organizationId: number | null;\n    branch: {\n        id: number;\n        name: string;\n    };\n}\n\ninterface WorktimeModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nconst WorktimeTracker: React.FC = () => {\n    /* CLAUDE-ANCHOR: a7c238f1-9d6a-42e5-8af1-6d8b2e9a4f18 - WORKTIME_TRACKER_COMPONENT */\n    const { t } = useTranslation();\n    const [isTracking, setIsTracking] = useState(false);\n    const [startTime, setStartTime] = useState<Date | null>(null);\n    const [elapsedTime, setElapsedTime] = useState<string>('00:00:00');\n    const [activeWorktime, setActiveWorktime] = useState<WorkTime | null>(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [showWorkTimeModal, setShowWorkTimeModal] = useState(false);\n    const [statusError, setStatusError] = useState<string | null>(null);\n    const { user } = useAuth();\n    const { updateTrackingStatus } = useWorktime();\n    const { branches, selectedBranch, setSelectedBranch } = useBranch();\n    const { organization } = useOrganization();\n\n    // Prfe ob aktive WorkTime zu anderer Organisation gehrt\n    const isDifferentOrganization = useMemo(() => {\n        if (!activeWorktime || !organization) return false;\n        // Beide null = standalone User, keine Warnung\n        if (activeWorktime.organizationId === null && organization.id === undefined) return false;\n        // Vergleich: WorkTime gehrt zu anderer Organisation\n        return activeWorktime.organizationId !== organization.id;\n    }, [activeWorktime, organization]);\n\n    // Funktion zum Abrufen des aktiven Worktime-Status\n    const checkActiveWorktime = useCallback(async () => {\n        try {\n            setIsLoading(true);\n            setStatusError(null);\n            \n            console.log('Prfe aktive Zeiterfassung...');\n            console.log('Benutzer geladen:', user?.id);\n            \n            const token = localStorage.getItem('token');\n            console.log('Token vorhanden:', token ? 'Ja' : 'Nein');\n            \n            if (!token) {\n                console.error('Kein Authentifizierungstoken gefunden');\n                setStatusError(t('worktime.tracker.notAuthenticated'));\n                setIsLoading(false);\n                return;\n            }\n            \n            try {\n                // Verwende axiosInstance statt direktem axios\n                const response = await axiosInstance.get(API_ENDPOINTS.WORKTIME.ACTIVE);\n                \n                console.log('API-Antwort Status:', response.status);\n                \n                const data = response.data;\n                console.log('Aktive Zeiterfassung Daten:', data);\n                \n                if (data && data.active === true) {\n                    console.log('Aktive Zeiterfassung gefunden:', data.id);\n                    // Startzeit setzen und Timer initialisieren\n                    // Entferne das 'Z' am Ende des Strings, damit JS den Zeitstempel nicht als UTC interpretiert\n                    const startISOString = data.startTime.endsWith('Z') \n                        ? data.startTime.substring(0, data.startTime.length - 1)\n                        : data.startTime;\n                    \n                    const startTimeDate = new Date(startISOString);\n                    \n                    // Initial berechnete Zeit anzeigen\n                    const now = new Date();\n                    const diff = now.getTime() - startTimeDate.getTime();\n                    const totalSeconds = Math.floor(diff / 1000);\n                    const hours = Math.floor(totalSeconds / 3600);\n                    const minutes = Math.floor((totalSeconds % 3600) / 60);\n                    const seconds = totalSeconds % 60;\n                    \n                    // Alle State-Updates in einem Batch zusammenfassen, um nur einen Re-Render zu verursachen\n                    setActiveWorktime(data);\n                    setStartTime(startTimeDate);\n                    setElapsedTime(\n                        `${hours.toString().padStart(2, '0')}:${minutes\n                            .toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`\n                    );\n                    setIsTracking(true);\n                    \n                    // Nur Branch setzen, wenn es sich gendert hat (vermeidet unntigen Re-Render)\n                    if (selectedBranch !== data.branchId) {\n                        setSelectedBranch(data.branchId);\n                    }\n                    \n                    // Aktualisiere den globalen Tracking-Status\n                    updateTrackingStatus(true);\n                } else {\n                    console.log('Keine aktive Zeiterfassung vorhanden');\n                    // Alle State-Updates in einem Batch zusammenfassen\n                    setIsTracking(false);\n                    setActiveWorktime(null);\n                    setStartTime(null);\n                    setElapsedTime('00:00:00');\n                    \n                    // Aktualisiere den globalen Tracking-Status\n                    updateTrackingStatus(false);\n                }\n            } catch (error) {\n                console.error('Fehler beim Abrufen der aktiven Zeiterfassung:', error);\n                \n                // Einfachere Fehlerbehandlung ohne axios-Import\n                const axiosError = error as any;\n                if (axiosError.code === 'ERR_NETWORK') {\n                    setStatusError(t('worktime.tracker.connectionError'));\n                } else {\n                    setStatusError(`${t('worktime.tracker.errorFetch')}: ${axiosError.response?.data?.message || axiosError.message}`);\n                }\n            }\n        } finally {\n            setIsLoading(false);\n        }\n    }, [user?.id, updateTrackingStatus, selectedBranch, organization]);\n    \n    // Initiale Prfung, ob bereits eine aktive Zeiterfassung luft\n    useEffect(() => {\n        if (user) {\n            console.log('Benutzer geladen, prfe aktive Zeiterfassung fr Benutzer-ID:', user.id);\n            checkActiveWorktime();\n        } else {\n            console.log('Warte auf Benutzer-Daten vor dem Prfen der Zeiterfassung...');\n            setIsLoading(false);\n        }\n    }, [user, checkActiveWorktime]);\n\n    // Timer-Logik\n    useEffect(() => {\n        let intervalId: number;\n\n        if (isTracking && startTime) {\n            intervalId = window.setInterval(() => {\n                const now = new Date();\n                const diff = now.getTime() - startTime.getTime();\n                \n                // Berechnung mit Millisekunden, um negative Werte zu vermeiden\n                const totalSeconds = Math.floor(diff / 1000);\n                const hours = Math.floor(totalSeconds / 3600);\n                const minutes = Math.floor((totalSeconds % 3600) / 60);\n                const seconds = totalSeconds % 60;\n\n                setElapsedTime(\n                    `${hours.toString().padStart(2, '0')}:${minutes\n                        .toString()\n                        .padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`\n                );\n            }, 1000);\n        }\n\n        return () => {\n            if (intervalId) {\n                clearInterval(intervalId);\n            }\n        };\n    }, [isTracking, startTime]);\n\n    const handleToggleTracking = async () => {\n        if (isTracking) {\n            await handleStopTracking();\n        } else {\n            await handleStartTracking();\n        }\n    };\n\n    const handleStartTracking = async () => {\n        if (!selectedBranch) {\n            alert(t('worktime.tracker.selectBranch'));\n            return;\n        }\n\n        try {\n            const token = localStorage.getItem('token');\n            if (!token) {\n                console.error('Kein Authentifizierungstoken gefunden');\n                alert(t('worktime.tracker.notAuthenticatedMessage'));\n                return;\n            }\n            \n            // Verwende axiosInstance statt direktem axios\n            const response = await axiosInstance.post(\n                API_ENDPOINTS.WORKTIME.START,\n                {\n                    branchId: selectedBranch,\n                    // Die aktuelle Zeit mit Bercksichtigung der Zeitzonenverschiebung senden\n                    // Da die Datenbank in UTC speichert, mssen wir die lokale Zeit so senden,\n                    // dass sie nach der automatischen UTC-Umwandlung korrekt ist\n                    startTime: new Date(new Date().getTime() - new Date().getTimezoneOffset() * 60000)\n                },\n                {\n                    headers: {\n                        'Authorization': `Bearer ${token}`,\n                        'Content-Type': 'application/json'\n                    }\n                }\n            );\n\n            const data = response.data;\n            \n            // Erstelle ein Date-Objekt ohne Zeitzonenumrechnung\n            // Entferne das 'Z' am Ende des Strings, damit JS den Zeitstempel nicht als UTC interpretiert\n            const startISOString = data.startTime.endsWith('Z') \n                ? data.startTime.substring(0, data.startTime.length - 1)\n                : data.startTime;\n            \n            const startTimeDate = new Date(startISOString);\n            \n            // Initial berechnete Zeit anzeigen (0:00:00 beim Start)\n            // Alle State-Updates in einem Batch zusammenfassen, um nur einen Re-Render zu verursachen\n            setActiveWorktime(data);\n            setStartTime(startTimeDate);\n            setElapsedTime('00:00:00');\n            setIsTracking(true);\n            \n            // Aktualisiere den globalen Tracking-Status\n            updateTrackingStatus(true);\n        } catch (error) {\n            console.error('Fehler:', error);\n            \n            // Detaillierte Fehlerbehandlung\n            let errorMessage = t('worktime.tracker.errorStart');\n            if (error.response) {\n                errorMessage = error.response.data?.message || `Fehler (Status: ${error.response.status})`;\n            }\n            \n            alert(errorMessage);\n        }\n    };\n\n    const handleStopTracking = async () => {\n        try {\n            const token = localStorage.getItem('token');\n            if (!token) {\n                console.error('Kein Authentifizierungstoken gefunden');\n                alert(t('worktime.tracker.notAuthenticatedMessage'));\n                return;\n            }\n            \n            // Verwende axiosInstance statt direktem axios\n            const response = await axiosInstance.post(\n                API_ENDPOINTS.WORKTIME.STOP,\n                {\n                    // Die aktuelle Zeit mit Bercksichtigung der Zeitzonenverschiebung senden\n                    endTime: new Date(new Date().getTime() - new Date().getTimezoneOffset() * 60000)\n                },\n                {\n                    headers: {\n                        'Authorization': `Bearer ${token}`,\n                        'Content-Type': 'application/json'\n                    }\n                }\n            );\n\n            // Alle State-Updates in einem Batch zusammenfassen, um nur einen Re-Render zu verursachen\n            setIsTracking(false);\n            setActiveWorktime(null);\n            setStartTime(null);\n            setElapsedTime('00:00:00');\n            \n            // Aktualisiere den globalen Tracking-Status\n            updateTrackingStatus(false);\n        } catch (error) {\n            console.error('Fehler:', error);\n            \n            // Detaillierte Fehlerbehandlung\n            let errorMessage = t('worktime.tracker.errorStop');\n            if (error.response) {\n                errorMessage = error.response.data?.message || `Fehler (Status: ${error.response.status})`;\n            }\n            \n            alert(errorMessage);\n        }\n    };\n\n    const openWorkTimeModal = () => {\n        setShowWorkTimeModal(true);\n    };\n\n    const closeWorkTimeModal = () => {\n        setShowWorkTimeModal(false);\n    };\n\n    // Branch-Name memoized berechnen (vermeidet unntige Re-Berechnungen)\n    const branchName = useMemo(() => {\n        if (!activeWorktime) return null;\n        return branches.find(b => b.id === activeWorktime.branchId)?.name || t('worktime.tracker.unknown');\n    }, [branches, activeWorktime]);\n\n    // Manuelle Statusaktualisierung\n    const handleRefreshStatus = () => {\n        checkActiveWorktime();\n    };\n\n    // Manuelle Zeiterfassung forciert stoppen (fr Notflle)\n    const handleForceStop = async () => {\n        if (!window.confirm(t('worktime.tracker.forceStopConfirm'))) {\n            return;\n        }\n        \n        try {\n            const token = localStorage.getItem('token');\n            if (!token) {\n                console.error('Kein Authentifizierungstoken gefunden');\n                alert(t('worktime.tracker.notAuthenticatedMessage'));\n                return;\n            }\n            \n            // Verwende axiosInstance statt direktem axios\n            const response = await axiosInstance.post(\n                API_ENDPOINTS.WORKTIME.STOP,\n                {\n                    // Die aktuelle Zeit mit Bercksichtigung der Zeitzonenverschiebung senden\n                    endTime: new Date(new Date().getTime() - new Date().getTimezoneOffset() * 60000),\n                    force: true\n                },\n                {\n                    headers: {\n                        'Authorization': `Bearer ${token}`,\n                        'Content-Type': 'application/json'\n                    }\n                }\n            );\n\n            setIsTracking(false);\n            setStartTime(null);\n            setElapsedTime('00:00:00');\n            setActiveWorktime(null);\n            setStatusError(null);\n            alert(t('worktime.tracker.forceStopSuccess'));\n            \n            // Aktualisiere den globalen Tracking-Status\n            updateTrackingStatus(false);\n        } catch (error) {\n            console.error('Fehler:', error);\n            setStatusError(`Fehler beim Stoppen: ${error.response?.status || 'Netzwerkfehler'}`);\n            alert(t('worktime.tracker.forceStopError'));\n        }\n    };\n\n    // Formatiere das Startdatum fr die lokale Anzeige\n    const formatStartDate = (dateString: string | number | Date) => {\n        // Entferne das 'Z' am Ende des Strings, damit JS den Zeitstempel nicht als UTC interpretiert\n        if (typeof dateString === 'string' && dateString.endsWith('Z')) {\n            dateString = dateString.substring(0, dateString.length - 1);\n        }\n        \n        const date = new Date(dateString);\n        \n        // Tag, Monat und Jahr aus lokaler Zeit extrahieren\n        const day = date.getDate().toString().padStart(2, '0');\n        const month = (date.getMonth() + 1).toString().padStart(2, '0');\n        const year = date.getFullYear();\n        \n        // Stunden, Minuten und Sekunden aus lokaler Zeit extrahieren\n        const hours = date.getHours().toString().padStart(2, '0');\n        const minutes = date.getMinutes().toString().padStart(2, '0');\n        const seconds = date.getSeconds().toString().padStart(2, '0');\n        \n        // Im deutschen Format zurckgeben\n        return `${day}.${month}.${year}, ${hours}:${minutes}:${seconds}`;\n    };\n\n    if (isLoading) {\n        return (\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 mb-6\">\n                <div className=\"flex justify-center items-center h-32\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-gray-300\"></div>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 sm:mb-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-xl font-semibold flex items-center dark:text-white\">\n                    <ClockIcon className=\"h-6 w-6 mr-2\" />\n                    {t('worktime.tracker.title')}\n                </h2>\n            </div>\n            \n            {statusError && (\n                <div className=\"mb-4 p-2 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-300 border border-red-200 dark:border-red-700 rounded-md flex justify-between items-center\">\n                    <span>{statusError}</span>\n                    {statusError !== t('worktime.tracker.noActiveTracking') && (\n                        <button \n                            onClick={handleForceStop}\n                            className=\"text-sm bg-red-100 hover:bg-red-200 text-red-700 dark:bg-red-800 dark:hover:bg-red-700 dark:text-red-300 px-2 py-1 rounded-md\"\n                        >\n                            {t('worktime.tracker.stop')} {t('common.force', 'Erzwingen')}\n                        </button>\n                    )}\n                </div>\n            )}\n\n            {/* Warnung wenn WorkTime zu anderer Organisation gehrt */}\n            {isTracking && isDifferentOrganization && (\n                <div className=\"mb-4 p-3 bg-yellow-50 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200 border border-yellow-200 dark:border-yellow-700 rounded-md flex items-start\">\n                    <ExclamationTriangleIcon className=\"h-5 w-5 mr-2 mt-0.5 flex-shrink-0\" />\n                    <div className=\"flex-1\">\n                        <p className=\"font-medium\">{t('worktime.tracker.differentOrganizationWarning.title', 'Hinweis: Andere Organisation')}</p>\n                        <p className=\"text-sm mt-1\">\n                            {t('worktime.tracker.differentOrganizationWarning.message', 'Diese Zeiterfassung wurde in einer anderen Organisation gestartet. Sie wird nach dem Stoppen der Organisation zugeordnet, in der sie gestartet wurde.')}\n                        </p>\n                    </div>\n                </div>\n            )}\n            \n            {/* Ein-/Ausschalter fr die Zeiterfassung - verkleinert */}\n            <div className=\"flex items-start justify-center mb-4\">\n                <div className=\"flex flex-col items-center\">\n                    <label className=\"relative inline-flex items-center cursor-pointer\">\n                        <input \n                            type=\"checkbox\" \n                            className=\"sr-only peer\" \n                            checked={isTracking}\n                            onChange={handleToggleTracking}\n                            disabled={!selectedBranch && !isTracking}\n                            data-onboarding={isTracking ? \"stop-worktime\" : \"start-worktime\"}\n                        />\n                        <div className={`w-20 h-10 rounded-full \n                            ${isTracking \n                                ? 'bg-green-500 shadow-lg shadow-green-200 dark:shadow-green-900/20' \n                                : 'bg-gray-300 dark:bg-gray-600'\n                            }\n                            before:content-[''] before:absolute before:top-0 before:left-0 before:bottom-0 before:right-0 \n                            peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-700\n                            peer-checked:after:translate-x-10\n                            after:content-[''] after:absolute after:top-1 after:left-1\n                            after:bg-white dark:after:bg-gray-200 after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full\n                            after:h-8 after:w-8 after:transition-all after:duration-300 ease-in-out\n                            transition-colors duration-300`}>\n                        </div>\n                    </label>\n                    <span className=\"mt-2 text-sm font-medium\">\n                        {isTracking \n                            ? <span className=\"text-green-600 dark:text-green-400 font-bold\">{t('worktime.tracker.running')}</span> \n                            : <span className=\"text-gray-600 dark:text-gray-400\">{t('worktime.tracker.start')}</span>\n                        }\n                    </span>\n                </div>\n\n                {/* Icon-Button zum ffnen des Modals */}\n                <button \n                    onClick={openWorkTimeModal}\n                    className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-2 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-blue-700 shadow-sm flex items-center justify-center ml-8 mt-1\"\n                    title={t('worktime.tracker.showTimes')}\n                >\n                    <ListBulletIcon className=\"h-6 w-6\" />\n                </button>\n            </div>\n\n            {/* Informationen zur aktiven Zeiterfassung oder Platzhalter */}\n            <div className={`p-2 my-2 rounded-md text-sm ${isTracking && activeWorktime ? 'bg-green-50 dark:bg-green-900/20 dark:text-green-200' : 'bg-gray-50 dark:bg-gray-700 dark:text-gray-300'}`}>\n                {isTracking && activeWorktime ? (\n                    <>\n                        <p><strong>{t('worktime.tracker.activeTracking')}</strong> {elapsedTime}</p>\n                        <p><strong>{t('worktime.tracker.started')}</strong> {formatStartDate(startTime || Date.now())}</p>\n                        <p><strong>{t('worktime.tracker.selectBranchLabel')}:</strong> {branchName || t('worktime.tracker.unknown')}</p>\n                    </>\n                ) : (\n                    <>\n                        <p>&nbsp;</p>\n                        <p>&nbsp;</p>\n                        <p>&nbsp;</p>\n                    </>\n                )}\n            </div>\n\n            {/* WorkTime Modal */}\n            {showWorkTimeModal && (\n                <WorktimeModal isOpen={showWorkTimeModal} onClose={closeWorkTimeModal} />\n            )}\n        </div>\n    );\n};\n\nexport default WorktimeTracker; ","import React, { useEffect, useState, useMemo, useCallback, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useLocation } from 'react-router-dom';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useTableSettings } from '../hooks/useTableSettings.ts';\nimport TableColumnConfig from '../components/TableColumnConfig.tsx';\nimport { PencilIcon, TrashIcon, PlusIcon, ArrowLeftIcon, ArrowRightIcon, CheckCircleIcon, ArrowsUpDownIcon, FunnelIcon, XMarkIcon, DocumentDuplicateIcon, InformationCircleIcon, ClipboardDocumentListIcon, ArrowPathIcon, Squares2X2Icon, TableCellsIcon, UserIcon, BuildingOfficeIcon, CalendarIcon, ChevronLeftIcon, ChevronRightIcon } from '@heroicons/react/24/outline';\nimport CreateTaskModal from '../components/CreateTaskModal.tsx';\nimport EditTaskModal from '../components/EditTaskModal.tsx';\nimport WorktimeTracker from '../components/WorktimeTracker.tsx';\nimport WorktimeList from '../components/WorktimeList.tsx';\nimport { API_ENDPOINTS, getTaskAttachmentUrl } from '../config/api.ts';\nimport axiosInstance from '../config/axios.ts';\nimport FilterPane from '../components/FilterPane.tsx';\nimport { FilterCondition } from '../components/FilterRow.tsx';\nimport SavedFilterTags from '../components/SavedFilterTags.tsx';\nimport { toast } from 'react-toastify';\nimport MarkdownPreview from '../components/MarkdownPreview.tsx';\nimport { getExpiryStatus, getExpiryColorClasses, createDueDateMetadataItem } from '../utils/expiryUtils.ts';\nimport { getStatusText, getStatusColor } from '../utils/statusUtils.tsx';\nimport DataCard, { MetadataItem } from '../components/shared/DataCard.tsx';\nimport CardGrid from '../components/shared/CardGrid.tsx';\nimport { format } from 'date-fns';\nimport { de } from 'date-fns/locale';\n\ninterface Task {\n    id: number;\n    title: string;\n    description: string | null;\n    status: 'open' | 'in_progress' | 'improval' | 'quality_control' | 'done';\n    responsible: {\n        id: number;\n        firstName: string;\n        lastName: string;\n    } | null;\n    responsibleId: number | null;\n    role: {\n        id: number;\n        name: string;\n    } | null;\n    roleId: number | null;\n    qualityControl: {\n        id: number;\n        firstName: string;\n        lastName: string;\n    } | null;\n    branch: {\n        id: number;\n        name: string;\n    };\n    dueDate: string | null;\n    requestId: number | null;\n    attachments?: Array<{\n        id: number;\n        fileName: string;\n        fileType: string;\n        fileSize?: number;\n        filePath?: string;\n        uploadedAt?: string;\n        url: string;\n    }>;\n}\n\ninterface SortConfig {\n    key: keyof Task | 'responsible.firstName' | 'qualityControl.firstName' | 'branch.name';\n    direction: 'asc' | 'desc';\n}\n\n// Standard-Spaltenreihenfolge (wird in der Komponente neu definiert)\nconst defaultColumnOrder = ['title', 'responsibleAndQualityControl', 'status', 'dueDate', 'branch', 'actions'];\n\n// Definiere eine tableId fr die To-Dos Tabelle\nconst TODOS_TABLE_ID = 'worktracker-todos';\n\n// Card-Einstellungen Standardwerte\nconst defaultCardMetadata = ['title', 'status', 'responsible', 'qualityControl', 'branch', 'dueDate', 'description'];\nconst defaultCardColumnOrder = ['title', 'status', 'responsible', 'qualityControl', 'branch', 'dueDate', 'description'];\nconst defaultCardSortDirections: Record<string, 'asc' | 'desc'> = {\n  title: 'asc',\n  status: 'asc',\n  responsible: 'asc',\n  qualityControl: 'asc',\n  branch: 'asc',\n  dueDate: 'asc',\n  description: 'asc'\n};\n\n// Mapping zwischen Tabellen-Spalten-IDs und Card-Metadaten-IDs\n// Tabellen-Spalte -> Card-Metadaten (kann Array sein fr 1:N Mapping)\nconst tableToCardMapping: Record<string, string[]> = {\n  'title': ['title'],\n  'status': ['status'],\n  'responsibleAndQualityControl': ['responsible', 'qualityControl'], // 1 Tabelle-Spalte -> 2 Card-Metadaten\n  'branch': ['branch'],\n  'dueDate': ['dueDate'],\n  'actions': [], // Keine Card-Entsprechung\n  'description': ['description'] // Nur in Cards verfgbar\n};\n\n// Reverse Mapping: Card-Metadaten -> Tabellen-Spalten\nconst cardToTableMapping: Record<string, string> = {\n  'title': 'title',\n  'status': 'status',\n  'responsible': 'responsibleAndQualityControl',\n  'qualityControl': 'responsibleAndQualityControl',\n  'branch': 'branch',\n  'dueDate': 'dueDate',\n  'description': 'description'\n};\n\n// Helfer-Funktion: Tabellen-Spalte ausgeblendet -> Card-Metadaten ausblenden\nconst getHiddenCardMetadata = (hiddenTableColumns: string[]): Set<string> => {\n  const hiddenCardMetadata = new Set<string>();\n  hiddenTableColumns.forEach(tableCol => {\n    const cardMetadata = tableToCardMapping[tableCol] || [];\n    cardMetadata.forEach(cardMeta => hiddenCardMetadata.add(cardMeta));\n  });\n  return hiddenCardMetadata;\n};\n\n// Helfer-Funktion: Card-Metadaten zu Tabellen-Spalten konvertieren\nconst getCardMetadataFromColumnOrder = (columnOrder: string[]): string[] => {\n  const cardMetadata: string[] = [];\n  columnOrder.forEach(tableCol => {\n    const cardMeta = tableToCardMapping[tableCol];\n    if (cardMeta && cardMeta.length > 0) {\n      cardMetadata.push(...cardMeta);\n    }\n  });\n  // Beschreibung hinzufgen, wenn nicht schon vorhanden\n  if (!cardMetadata.includes('description')) {\n    cardMetadata.push('description');\n  }\n  return cardMetadata;\n};\n\nconst Worktracker: React.FC = () => {\n    const { t } = useTranslation();\n    const { user } = useAuth();\n    const { hasPermission } = usePermissions();\n    const location = useLocation();\n    \n    // Definiere die verfgbaren Spalten fr die Tabelle (dynamisch aus bersetzungen)\n    const availableColumns = useMemo(() => [\n        { id: 'title', label: t('tasks.columns.title'), shortLabel: t('tasks.columns.title') },\n        { id: 'status', label: t('tasks.columns.status'), shortLabel: t('tasks.columns.status') },\n        { id: 'responsibleAndQualityControl', label: t('tasks.columns.responsibleAndQualityControl'), shortLabel: t('tasks.columns.responsibleAndQualityControl').split('/')[0] },\n        { id: 'branch', label: t('tasks.columns.branch'), shortLabel: t('tasks.columns.branch').substring(0, 5) },\n        { id: 'dueDate', label: t('tasks.columns.dueDate'), shortLabel: t('tasks.columns.dueDate').substring(0, 5) },\n        { id: 'actions', label: t('tasks.columns.actions'), shortLabel: t('common.actions').substring(0, 3) },\n    ], [t]);\n\n    // Definiere zustzliche Spalten, die nur fr den Filter verfgbar sind, nicht fr die Tabellenanzeige\n    const filterOnlyColumns = useMemo(() => [\n        { id: 'responsible', label: t('tasks.columns.responsible'), shortLabel: t('tasks.columns.responsible').substring(0, 3) },\n        { id: 'qualityControl', label: t('tasks.columns.qualityControl'), shortLabel: t('tasks.columns.qualityControl').substring(0, 2) },\n    ], [t]);\n    \n    // Status-bersetzungen (verwende zentrale Utils mit bersetzungsuntersttzung)\n    // WICHTIG: Funktionalitt bleibt identisch - nur Code-Duplikation entfernt!\n    const getStatusLabel = (status: Task['status']): string => {\n        return getStatusText(status, 'task', t);\n    };\n    const [tasks, setTasks] = useState<Task[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n    const [searchTerm, setSearchTerm] = useState('');\n    const [statusFilter, setStatusFilter] = useState<Task['status'] | 'all'>('all');\n    \n    // State fr erweiterte Filterbedingungen\n    const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n    const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n    \n    // Filter State Management (Controlled Mode)\n    const [activeFilterName, setActiveFilterName] = useState<string>('');\n    const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n    \n    const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n    const [sortConfig, setSortConfig] = useState<SortConfig>({ key: 'dueDate', direction: 'asc' });\n    const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n    const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n    const [selectedTask, setSelectedTask] = useState<Task | null>(null);\n    const [copiedTask, setCopiedTask] = useState<Task | null>(null);\n\n    // Tabellen-Einstellungen laden\n    const {\n        settings,\n        isLoading: isLoadingSettings,\n        updateColumnOrder,\n        updateHiddenColumns,\n        toggleColumnVisibility,\n        isColumnVisible,\n        updateViewMode\n    } = useTableSettings('worktracker_tasks', {\n        defaultColumnOrder,\n        defaultHiddenColumns: [],\n        defaultViewMode: 'cards'\n    });\n\n    const [draggedColumn, setDraggedColumn] = useState<string | null>(null);\n    const [dragOverColumn, setDragOverColumn] = useState<string | null>(null);\n    const [displayLimit, setDisplayLimit] = useState<number>(10);\n\n    // View-Mode aus Settings laden\n    const viewMode = settings.viewMode || 'cards';\n    \n    // Lokale Sortierrichtungen fr Cards (nicht persistiert)\n    const [cardSortDirections, setCardSortDirections] = useState<Record<string, 'asc' | 'desc'>>(() => {\n        return defaultCardSortDirections;\n    });\n\n    // Abgeleitete Werte fr Card-Ansicht aus Tabellen-Settings\n    // Card-Metadaten-Reihenfolge aus columnOrder ableiten\n    const cardMetadataOrder = useMemo(() => {\n        return getCardMetadataFromColumnOrder(settings.columnOrder || defaultColumnOrder);\n    }, [settings.columnOrder]);\n\n    // Versteckte Card-Metadaten aus hiddenColumns ableiten\n    const hiddenCardMetadata = useMemo(() => {\n        return getHiddenCardMetadata(settings.hiddenColumns || []);\n    }, [settings.hiddenColumns]);\n\n    // Sichtbare Card-Metadaten (alle Card-Metadaten minus versteckte)\n    const visibleCardMetadata = useMemo(() => {\n        return new Set(cardMetadataOrder.filter(meta => !hiddenCardMetadata.has(meta)));\n    }, [cardMetadataOrder, hiddenCardMetadata]);\n\n    // CSS-Klasse fr Container-Box setzen (fr CSS-basierte Schattierungs-Entfernung)\n    useEffect(() => {\n        const wrappers = document.querySelectorAll('.dashboard-tasks-wrapper');\n        wrappers.forEach(wrapper => {\n            if (viewMode === 'cards') {\n                wrapper.classList.add('cards-mode');\n            } else {\n                wrapper.classList.remove('cards-mode');\n            }\n        });\n    }, [viewMode]);\n\n    // Ref um sicherzustellen, dass loadTasks nur einmal beim Mount aufgerufen wird\n    // (auch bei React.StrictMode doppelter Ausfhrung)\n    const hasLoadedRef = useRef(false);\n\n    // Funktion zum Neu Laden der Tasks\n    const loadTasks = async () => {\n        try {\n            setLoading(true);\n            const response = await axiosInstance.get(API_ENDPOINTS.TASKS.BASE);\n            const tasksData = response.data;\n            \n            // Attachments sind bereits in der Response enthalten\n            // URL-Generierung fr Attachments hinzufgen\n            // Sicherstellen, dass keine undefined/null Werte im Array sind\n            const tasksWithAttachments = tasksData\n                .filter((task: Task) => task != null)\n                .map((task: Task) => {\n                    const attachments = (task.attachments || [])\n                        .filter((att: any) => att != null)\n                        .map((att: any) => ({\n                            id: att.id,\n                            fileName: att.fileName,\n                            fileType: att.fileType,\n                            fileSize: att.fileSize,\n                            filePath: att.filePath,\n                            uploadedAt: att.uploadedAt,\n                            url: getTaskAttachmentUrl(task.id, att.id)\n                        }));\n                    \n                    return {\n                        ...task,\n                        attachments: attachments\n                    };\n                });\n            \n            console.log(' Tasks geladen:', tasksWithAttachments.length, 'Tasks');\n            setTasks(tasksWithAttachments);\n            setError(null);\n        } catch (error) {\n            console.error('Fehler beim Laden der Tasks:', error);\n            setError(t('worktime.messages.tasksLoadError'));\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    // Lade Tasks beim ersten Render (nur einmal, auch bei React.StrictMode)\n    useEffect(() => {\n        if (!hasLoadedRef.current) {\n            hasLoadedRef.current = true;\n            loadTasks();\n        }\n    }, []);\n\n    // URL-Parameter fr editTask verarbeiten\n    useEffect(() => {\n        if (tasks.length > 0) {\n            const queryParams = new URLSearchParams(location.search);\n            const editTaskId = queryParams.get('editTask');\n            \n            if (editTaskId) {\n                const taskId = parseInt(editTaskId, 10);\n                if (!isNaN(taskId)) {\n                    const task = tasks.find(t => t.id === taskId);\n                    if (task) {\n                        setSelectedTask(task);\n                        setIsEditModalOpen(true);\n                    }\n                }\n            }\n        }\n    }, [tasks, location.search]);\n\n    // Initialer Default-Filter setzen (Controlled Mode)\n    useEffect(() => {\n        const setInitialFilter = async () => {\n            try {\n                const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(TODOS_TABLE_ID));\n                const filters = response.data;\n                \n                const aktuellFilter = filters.find((filter: any) => filter.name === 'Aktuell');\n                if (aktuellFilter) {\n                    setActiveFilterName(t('tasks.filters.current'));\n                    setSelectedFilterId(aktuellFilter.id);\n                    applyFilterConditions(aktuellFilter.conditions, aktuellFilter.operators);\n                }\n            } catch (error) {\n                console.error('Fehler beim Setzen des initialen Filters:', error);\n            }\n        };\n\n        setInitialFilter();\n    }, []);\n\n    // Standard-Filter erstellen und speichern\n    useEffect(() => {\n        const createStandardFilters = async () => {\n            try {\n                const token = localStorage.getItem('token');\n                \n                if (!token) {\n                    console.error('Nicht authentifiziert');\n                    return;\n                }\n\n                // Prfen, ob die Standard-Filter bereits existieren\n                const existingFiltersResponse = await axiosInstance.get(\n                    `${API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(TODOS_TABLE_ID)}`,\n                    {\n                        headers: {\n                            Authorization: `Bearer ${token}`\n                        }\n                    }\n                );\n\n                const existingFilters = existingFiltersResponse.data || [];\n                const archivFilterExists = existingFilters.some(filter => filter.name === 'Archiv');\n                const aktuellFilterExists = existingFilters.some(filter => filter.name === 'Aktuell');\n\n                // Erstelle \"Archiv\"-Filter, wenn er noch nicht existiert\n                if (!archivFilterExists) {\n                    const archivFilter = {\n                        tableId: TODOS_TABLE_ID,\n                        name: 'Archiv', // Immer auf Deutsch speichern, wird beim Anzeigen bersetzt\n                        conditions: [\n                            { column: 'status', operator: 'equals', value: 'done' }\n                        ],\n                        operators: []\n                    };\n\n                    await axiosInstance.post(\n                        `${API_ENDPOINTS.SAVED_FILTERS.BASE}`,\n                        archivFilter,\n                        {\n                            headers: {\n                                Authorization: `Bearer ${token}`\n                            }\n                        }\n                    );\n                }\n\n                // Erstelle \"Aktuell\"-Filter, wenn er noch nicht existiert\n                if (!aktuellFilterExists) {\n                    const aktuellFilter = {\n                        tableId: TODOS_TABLE_ID,\n                        name: 'Aktuell', // Immer auf Deutsch speichern, wird beim Anzeigen bersetzt\n                        conditions: [\n                            { column: 'status', operator: 'notEquals', value: 'done' }\n                        ],\n                        operators: []\n                    };\n\n                    await axiosInstance.post(\n                        `${API_ENDPOINTS.SAVED_FILTERS.BASE}`,\n                        aktuellFilter,\n                        {\n                            headers: {\n                                Authorization: `Bearer ${token}`\n                            }\n                        }\n                    );\n                }\n            } catch (error) {\n                console.error('Fehler beim Erstellen der Standard-Filter:', error);\n            }\n        };\n\n        createStandardFilters();\n    }, []);\n\n    // getStatusColor und getStatusText werden jetzt von statusUtils verwendet (siehe getStatusLabel oben)\n\n    const handleStatusChange = async (taskId: number, newStatus: Task['status']) => {\n        try {\n            // Optimistisches Update: State sofort aktualisieren\n            setTasks(prevTasks => {\n                const validTasks = prevTasks.filter(task => task != null);\n                return validTasks.map(task => \n                    task.id === taskId ? { ...task, status: newStatus } : task\n                );\n            });\n\n            await axiosInstance.patch(API_ENDPOINTS.TASKS.BY_ID(taskId), { status: newStatus });\n            toast.success(t('worktime.messages.taskUpdated'));\n        } catch (error) {\n            // Rollback bei Fehler: Vollstndiges Reload\n            console.error('Fehler beim Aktualisieren des Status:', error);\n            loadTasks();\n                toast.error(t('worktime.messages.taskUpdatedError'));\n        }\n    };\n\n    const handleEditClick = (task: Task) => {\n        setSelectedTask(task);\n        setIsEditModalOpen(true);\n    };\n\n    const isResponsibleForTask = (task: Task) => {\n        if (task.responsible) {\n            return task.responsible.id === user?.id;\n        } else if (task.role) {\n            // Prfe, ob der Benutzer die angegebene Rolle hat\n            return user?.roles?.some(userRole => userRole.role?.id === task.role?.id) || false;\n        }\n        return false;\n    };\n\n    const isQualityControlForTask = (task: Task) => {\n        return task.qualityControl?.id === user?.id;\n    };\n\n    const handleSort = (key: SortConfig['key']) => {\n        setSortConfig(current => ({\n            key,\n            direction: current.key === key && current.direction === 'asc' ? 'desc' : 'asc'\n        }));\n    };\n\n    const renderStatusButtons = (task: Task): JSX.Element[] => {\n        const buttons: JSX.Element[] = [];\n        \n        // Prfe, ob der Benutzer Schreibberechtigungen fr Tasks hat\n        const canModifyTasks = hasPermission('tasks', 'write', 'table');\n        \n        if (!canModifyTasks) return buttons;\n        \n        // Zurck-Button (links)\n        if (task.status === 'in_progress' && isResponsibleForTask(task)) {\n            buttons.push(\n                <button\n                    key=\"back\"\n                    onClick={() => handleStatusChange(task.id, 'open')}\n                    className=\"p-1.5 bg-red-600 dark:bg-red-500 text-white rounded hover:bg-red-700 dark:hover:bg-red-600\"\n                    title={t('tasks.actions.backToOpen')}\n                >\n                    <ArrowLeftIcon className=\"h-5 w-5\" />\n                </button>\n            );\n        } else if (task.status === 'quality_control' && isResponsibleForTask(task)) {\n            buttons.push(\n                <button\n                    key=\"back\"\n                    onClick={() => handleStatusChange(task.id, 'in_progress')}\n                    className=\"p-1.5 bg-red-600 dark:bg-red-500 text-white rounded hover:bg-red-700 dark:hover:bg-red-600\"\n                    title={t('tasks.actions.backToInProgress')}\n                >\n                    <ArrowLeftIcon className=\"h-5 w-5\" />\n                </button>\n            );\n        } else if (task.status === 'done' && isQualityControlForTask(task)) {\n            buttons.push(\n                <button\n                    key=\"back\"\n                    onClick={() => handleStatusChange(task.id, 'quality_control')}\n                    className=\"p-2 bg-red-600 dark:bg-red-500 text-white rounded hover:bg-red-700 dark:hover:bg-red-600\"\n                    title={t('tasks.actions.backToQualityControl')}\n                >\n                    <ArrowLeftIcon className=\"h-6 w-6\" />\n                </button>\n            );\n        }\n\n        // Weiter-Button (rechts)\n        if (task.status === 'open' && isResponsibleForTask(task)) {\n            buttons.push(\n                <button\n                    key=\"forward\"\n                    onClick={() => handleStatusChange(task.id, 'in_progress')}\n                    className=\"p-1.5 bg-blue-600 dark:bg-blue-500 text-white rounded hover:bg-blue-700 dark:hover:bg-blue-600\"\n                    title={t('tasks.actions.setInProgress')}\n                >\n                    <ArrowRightIcon className=\"h-5 w-5\" />\n                </button>\n            );\n        } else if (task.status === 'in_progress' && isResponsibleForTask(task)) {\n            buttons.push(\n                <button\n                    key=\"forward\"\n                    onClick={() => handleStatusChange(task.id, 'quality_control')}\n                    className=\"p-1.5 bg-purple-600 dark:bg-purple-500 text-white rounded hover:bg-purple-700 dark:hover:bg-purple-600\"\n                    title={t('tasks.actions.setQualityControl')}\n                >\n                    <ArrowRightIcon className=\"h-5 w-5\" />\n                </button>\n            );\n        } else if (task.status === 'quality_control' && isQualityControlForTask(task)) {\n            buttons.push(\n                <button\n                    key=\"forward\"\n                    onClick={() => handleStatusChange(task.id, 'done')}\n                    className=\"p-1.5 bg-green-600 dark:bg-green-500 text-white rounded hover:bg-green-700 dark:hover:bg-green-600\"\n                    title={t('tasks.actions.markDone')}\n                >\n                    <ArrowRightIcon className=\"h-5 w-5\" />\n                </button>\n            );\n        }\n\n        return buttons;\n    };\n\n    const getActiveFilterCount = () => {\n        return filterConditions.length;\n    };\n\n    const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n        setFilterConditions(conditions);\n        setFilterLogicalOperators(operators);\n    };\n    \n    const resetFilterConditions = () => {\n        setFilterConditions([]);\n        setFilterLogicalOperators([]);\n        setActiveFilterName('');\n        setSelectedFilterId(null);\n    };\n    \n    // Filter Change Handler (Controlled Mode)\n    const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n        setActiveFilterName(name);\n        setSelectedFilterId(id);\n        applyFilterConditions(conditions, operators);\n    };\n\n    const getStatusPriority = (status: Task['status']): number => {\n        switch (status) {\n            case 'open': return 1;\n            case 'in_progress': return 2;\n            case 'improval': return 3;\n            case 'quality_control': return 4;\n            case 'done': return 5;\n            default: return 99; // Fallback fr unbekannte Status\n        }\n    };\n\n    const filteredAndSortedTasks = useMemo(() => {\n        console.log(' Filtere Tasks:', tasks.length, 'Tasks vorhanden');\n        console.log(' Filterbedingungen:', filterConditions);\n        // Sicherstellen, dass keine undefined/null Werte im Array sind\n        const validTasks = tasks.filter(task => task != null);\n        const filtered = validTasks\n            .filter(task => {\n                // Globale Suchfunktion\n                if (searchTerm) {\n                    const searchLower = searchTerm.toLowerCase();\n                    const matchesSearch = \n                        task.title.toLowerCase().includes(searchLower) ||\n                        (task.description && task.description.toLowerCase().includes(searchLower)) ||\n                        (task.responsible ? `${task.responsible.firstName} ${task.responsible.lastName}`.toLowerCase().includes(searchLower) : false) ||\n                        (task.role ? task.role.name.toLowerCase().includes(searchLower) : false) ||\n                        (task.qualityControl && `${task.qualityControl.firstName} ${task.qualityControl.lastName}`.toLowerCase().includes(searchLower)) ||\n                        task.branch.name.toLowerCase().includes(searchLower);\n                    \n                    if (!matchesSearch) return false;\n                }\n                \n                // Wenn erweiterte Filterbedingungen definiert sind, wende diese an\n                if (filterConditions.length > 0) {\n                    // Implementiere die logische Verknpfung der Bedingungen (UND/ODER)\n                    let result = filterConditions.length > 0;\n                    \n                    for (let i = 0; i < filterConditions.length; i++) {\n                        const condition = filterConditions[i];\n                        let conditionMet = false;\n                        \n                        switch (condition.column) {\n                            case 'title':\n                                if (condition.operator === 'equals') {\n                                    conditionMet = task.title === condition.value;\n                                } else if (condition.operator === 'contains') {\n                                    conditionMet = task.title.toLowerCase().includes((condition.value as string || '').toLowerCase());\n                                } else if (condition.operator === 'startsWith') {\n                                    conditionMet = task.title.toLowerCase().startsWith((condition.value as string || '').toLowerCase());\n                                } else if (condition.operator === 'endsWith') {\n                                    conditionMet = task.title.toLowerCase().endsWith((condition.value as string || '').toLowerCase());\n                                }\n                                break;\n                            \n                            case 'status':\n                                if (condition.operator === 'equals') {\n                                    conditionMet = task.status === condition.value;\n                                } else if (condition.operator === 'notEquals') {\n                                    conditionMet = task.status !== condition.value;\n                                }\n                                break;\n                            \n                            case 'responsible':\n                                const responsibleValue = condition.value as string || '';\n                                \n                                if (responsibleValue.startsWith('user-')) {\n                                    // Vergleiche mit Benutzer-ID\n                                    const userId = parseInt(responsibleValue.replace('user-', ''));\n                                    conditionMet = !!task.responsible && task.responsible.id === userId;\n                                } else if (responsibleValue.startsWith('role-')) {\n                                    // Vergleiche mit Rollen-ID\n                                    const roleId = parseInt(responsibleValue.replace('role-', ''));\n                                    conditionMet = !!task.role && task.role.id === roleId;\n                                } else if (responsibleValue === '') {\n                                    // Leerer Wert entspricht allen\n                                    conditionMet = true;\n                                } else if (condition.operator === 'equals') {\n                                    // Fallback fr Texteingabe (alte Implementierung)\n                                    const responsibleName = task.responsible\n                                        ? `${task.responsible.firstName} ${task.responsible.lastName}`.toLowerCase()\n                                        : task.role\n                                            ? task.role.name.toLowerCase()\n                                            : '';\n                                    conditionMet = responsibleName === responsibleValue.toLowerCase();\n                                } else if (condition.operator === 'contains') {\n                                    // Fallback fr Texteingabe (alte Implementierung)\n                                    const responsibleName = task.responsible\n                                        ? `${task.responsible.firstName} ${task.responsible.lastName}`.toLowerCase()\n                                        : task.role\n                                            ? task.role.name.toLowerCase()\n                                            : '';\n                                    conditionMet = responsibleName.includes(responsibleValue.toLowerCase());\n                                }\n                                break;\n                            \n                            case 'qualityControl':\n                                const qualityControlValue = condition.value as string || '';\n                                \n                                if (qualityControlValue.startsWith('user-')) {\n                                    // Vergleiche mit Benutzer-ID\n                                    const userId = parseInt(qualityControlValue.replace('user-', ''));\n                                    conditionMet = !!task.qualityControl && task.qualityControl.id === userId;\n                                } else if (qualityControlValue === '') {\n                                    // Leerer Wert entspricht allen\n                                    conditionMet = true;\n                                } else if (condition.operator === 'equals') {\n                                    // Fallback fr Texteingabe (alte Implementierung)\n                                    const qualityControlName = task.qualityControl\n                                        ? `${task.qualityControl.firstName} ${task.qualityControl.lastName}`.toLowerCase()\n                                        : '';\n                                    conditionMet = qualityControlName === qualityControlValue.toLowerCase();\n                                } else if (condition.operator === 'contains') {\n                                    // Fallback fr Texteingabe (alte Implementierung)\n                                    const qualityControlName = task.qualityControl\n                                        ? `${task.qualityControl.firstName} ${task.qualityControl.lastName}`.toLowerCase()\n                                        : '';\n                                    conditionMet = qualityControlName.includes(qualityControlValue.toLowerCase());\n                                }\n                                break;\n                            \n                            // Fr den kombinierten Filter responsibleAndQualityControl\n                            case 'responsibleAndQualityControl':\n                                const combinedValue = condition.value as string || '';\n                                \n                                if (combinedValue.startsWith('user-')) {\n                                    // Vergleiche mit Benutzer-ID fr beide Felder\n                                    const userId = parseInt(combinedValue.replace('user-', ''));\n                                    conditionMet = \n                                        (!!task.responsible && task.responsible.id === userId) || \n                                        (!!task.qualityControl && task.qualityControl.id === userId);\n                                } else if (combinedValue.startsWith('role-')) {\n                                    // Bei Rollen nur mit Verantwortlichem vergleichen\n                                    const roleId = parseInt(combinedValue.replace('role-', ''));\n                                    conditionMet = !!task.role && task.role.id === roleId;\n                                } else if (combinedValue === '') {\n                                    // Leerer Wert entspricht allen\n                                    conditionMet = true;\n                                } else if (condition.operator === 'equals') {\n                                    // Fallback fr Texteingabe (alte Implementierung)\n                                    const responsibleName = task.responsible\n                                        ? `${task.responsible.firstName} ${task.responsible.lastName}`.toLowerCase()\n                                        : task.role\n                                            ? task.role.name.toLowerCase()\n                                            : '';\n                                    const qualityControlName = task.qualityControl\n                                        ? `${task.qualityControl.firstName} ${task.qualityControl.lastName}`.toLowerCase()\n                                        : '';\n                                    conditionMet = \n                                        responsibleName === combinedValue.toLowerCase() || \n                                        qualityControlName === combinedValue.toLowerCase();\n                                } else if (condition.operator === 'contains') {\n                                    // Fallback fr Texteingabe (alte Implementierung)\n                                    const responsibleName = task.responsible\n                                        ? `${task.responsible.firstName} ${task.responsible.lastName}`.toLowerCase()\n                                        : task.role\n                                            ? task.role.name.toLowerCase()\n                                            : '';\n                                    const qualityControlName = task.qualityControl\n                                        ? `${task.qualityControl.firstName} ${task.qualityControl.lastName}`.toLowerCase()\n                                        : '';\n                                    conditionMet = \n                                        responsibleName.includes(combinedValue.toLowerCase()) || \n                                        qualityControlName.includes(combinedValue.toLowerCase());\n                                }\n                                break;\n                            \n                            case 'branch':\n                                const branchName = task.branch.name.toLowerCase();\n                                \n                                if (condition.operator === 'equals') {\n                                    conditionMet = branchName === (condition.value as string || '').toLowerCase();\n                                } else if (condition.operator === 'contains') {\n                                    conditionMet = branchName.includes((condition.value as string || '').toLowerCase());\n                                }\n                                break;\n                            \n                            case 'dueDate':\n                                if (!task.dueDate) {\n                                    conditionMet = false;\n                                    break;\n                                }\n                                \n                                const taskDate = new Date(task.dueDate);\n                                \n                                if (condition.operator === 'equals') {\n                                    const filterDate = new Date(condition.value as string);\n                                    conditionMet = taskDate.toDateString() === filterDate.toDateString();\n                                } else if (condition.operator === 'before') {\n                                    const filterDate = new Date(condition.value as string);\n                                    conditionMet = taskDate < filterDate;\n                                } else if (condition.operator === 'after') {\n                                    const filterDate = new Date(condition.value as string);\n                                    conditionMet = taskDate > filterDate;\n                                }\n                                break;\n                        }\n                        \n                        // Verknpfe das Ergebnis dieser Bedingung mit dem Gesamtergebnis\n                        if (i === 0) {\n                            result = conditionMet;\n                        } else {\n                            const operator = filterLogicalOperators[i - 1];\n                            result = operator === 'AND' ? (result && conditionMet) : (result || conditionMet);\n                        }\n                    }\n                    \n                    if (!result) return false;\n                }\n                \n                return true;\n            });\n        \n        console.log(' Gefilterte Tasks:', filtered.length, 'von', tasks.length);\n        const sorted = filtered\n            .sort((a, b) => {\n                // Multi-Sortierung fr Cards-Mode\n                if (viewMode === 'cards') {\n                    const sortableColumns = cardMetadataOrder.filter(colId => visibleCardMetadata.has(colId));\n                    \n                    for (const columnId of sortableColumns) {\n                        const direction = cardSortDirections[columnId] || 'asc';\n                        let valueA: any, valueB: any;\n                        \n                        switch (columnId) {\n                            case 'title':\n                                valueA = a.title.toLowerCase();\n                                valueB = b.title.toLowerCase();\n                                break;\n                            case 'status':\n                                valueA = getStatusPriority(a.status);\n                                valueB = getStatusPriority(b.status);\n                                break;\n                            case 'responsible':\n                                valueA = a.responsible ? `${a.responsible.firstName} ${a.responsible.lastName}`.toLowerCase() : (a.role ? `Rolle: ${a.role.name}`.toLowerCase() : '');\n                                valueB = b.responsible ? `${b.responsible.firstName} ${b.responsible.lastName}`.toLowerCase() : (b.role ? `Rolle: ${b.role.name}`.toLowerCase() : '');\n                                break;\n                            case 'qualityControl':\n                                valueA = a.qualityControl ? `${a.qualityControl.firstName} ${a.qualityControl.lastName}`.toLowerCase() : '';\n                                valueB = b.qualityControl ? `${b.qualityControl.firstName} ${b.qualityControl.lastName}`.toLowerCase() : '';\n                                break;\n                            case 'branch':\n                                valueA = a.branch.name.toLowerCase();\n                                valueB = b.branch.name.toLowerCase();\n                                break;\n                            case 'dueDate':\n                                valueA = a.dueDate ? new Date(a.dueDate).getTime() : Number.MAX_SAFE_INTEGER;\n                                valueB = b.dueDate ? new Date(b.dueDate).getTime() : Number.MAX_SAFE_INTEGER;\n                                break;\n                            case 'description':\n                                valueA = (a.description || '').toLowerCase();\n                                valueB = (b.description || '').toLowerCase();\n                                break;\n                            default:\n                                continue; // berspringe unbekannte Spalten\n                        }\n                        \n                        // Vergleich basierend auf Typ\n                        let comparison = 0;\n                        if (typeof valueA === 'number' && typeof valueB === 'number') {\n                            comparison = valueA - valueB;\n                        } else {\n                            comparison = String(valueA).localeCompare(String(valueB));\n                        }\n                        \n                        // Sortierrichtung anwenden\n                        if (direction === 'desc') {\n                            comparison = -comparison;\n                        }\n                        \n                        // Wenn unterschiedlich, gebe Vergleich zurck\n                        if (comparison !== 0) {\n                            return comparison;\n                        }\n                    }\n                    return 0; // Alle Spalten identisch\n                } else {\n                    // Tabellen-Mode: Einzel-Sortierung wie bisher\n                    if (sortConfig.key) {\n                        let valueA, valueB;\n                        \n                        // Extrahiere die Werte basierend auf dem Sortierungsschlssel\n                        switch (sortConfig.key) {\n                            case 'title':\n                                valueA = a.title;\n                                valueB = b.title;\n                                break;\n                            case 'status':\n                                valueA = getStatusPriority(a.status);\n                                valueB = getStatusPriority(b.status);\n                                break;\n                            case 'responsible.firstName':\n                                valueA = a.responsible ? `${a.responsible.firstName} ${a.responsible.lastName}` : (a.role ? `Rolle: ${a.role.name}` : '');\n                                valueB = b.responsible ? `${b.responsible.firstName} ${b.responsible.lastName}` : (b.role ? `Rolle: ${b.role.name}` : '');\n                                break;\n                            case 'qualityControl.firstName':\n                                valueA = a.qualityControl ? `${a.qualityControl.firstName} ${a.qualityControl.lastName}` : '';\n                                valueB = b.qualityControl ? `${b.qualityControl.firstName} ${b.qualityControl.lastName}` : '';\n                                break;\n                            case 'branch.name':\n                                valueA = a.branch.name;\n                                valueB = b.branch.name;\n                                break;\n                            case 'dueDate':\n                                valueA = a.dueDate ? new Date(a.dueDate).getTime() : Number.MAX_SAFE_INTEGER;\n                                valueB = b.dueDate ? new Date(b.dueDate).getTime() : Number.MAX_SAFE_INTEGER;\n                                break;\n                            default:\n                                valueA = a[sortConfig.key as keyof Task];\n                                valueB = b[sortConfig.key as keyof Task];\n                        }\n                        \n                        // Vergleiche die Werte basierend auf der Sortierrichtung\n                        if (typeof valueA === 'number' && typeof valueB === 'number') {\n                            return sortConfig.direction === 'asc' ? valueA - valueB : valueB - valueA;\n                        } else {\n                            const comparison = String(valueA).localeCompare(String(valueB));\n                            return sortConfig.direction === 'asc' ? comparison : -comparison;\n                        }\n                    }\n                    // Standardsortierung nur anwenden, wenn keine benutzerdefinierte Sortierung aktiv ist\n                    // Primre Sortierung nach Flligkeitsdatum\n                    const aDate = a.dueDate ? new Date(a.dueDate).getTime() : Number.MAX_SAFE_INTEGER;\n                    const bDate = b.dueDate ? new Date(b.dueDate).getTime() : Number.MAX_SAFE_INTEGER;\n                    \n                    if (aDate !== bDate) {\n                        return aDate - bDate; // Aufsteigend nach Datum\n                    }\n                    \n                    // Sekundre Sortierung nach Status-Prioritt\n                    const aStatusPrio = getStatusPriority(a.status);\n                    const bStatusPrio = getStatusPriority(b.status);\n                    \n                    if (aStatusPrio !== bStatusPrio) {\n                        return aStatusPrio - bStatusPrio; // Aufsteigend nach Prioritt\n                    }\n                    \n                    // Tertire Sortierung nach Titel\n                    return a.title.localeCompare(b.title);\n                }\n            });\n        \n        console.log(' Gefilterte und sortierte Tasks:', sorted.length);\n        return sorted;\n    }, [tasks, searchTerm, sortConfig, getStatusPriority, filterConditions, filterLogicalOperators, viewMode, cardMetadataOrder, visibleCardMetadata, cardSortDirections]);\n\n    // Handler fr das Verschieben von Spalten per Drag & Drop\n    const handleMoveColumn = (dragIndex: number, hoverIndex: number) => {\n        // Neue Spaltenreihenfolge erstellen\n        const newColumnOrder = [...settings.columnOrder];\n        const draggedColumn = newColumnOrder[dragIndex];\n        \n        // Spalten neu anordnen\n        newColumnOrder.splice(dragIndex, 1); // Entferne die gezogene Spalte\n        newColumnOrder.splice(hoverIndex, 0, draggedColumn); // Fge sie an der neuen Position ein\n        \n        // Aktualisiere die Spaltenreihenfolge\n        updateColumnOrder(newColumnOrder);\n    };\n\n    // Handler fr Drag & Drop direkt in der Tabelle\n    const handleDragStart = (columnId: string) => {\n        setDraggedColumn(columnId);\n    };\n\n    const handleDragOver = (e: React.DragEvent, columnId: string) => {\n        e.preventDefault();\n        if (draggedColumn && draggedColumn !== columnId) {\n            setDragOverColumn(columnId);\n        }\n    };\n\n    const handleDrop = (e: React.DragEvent, columnId: string) => {\n        e.preventDefault();\n        if (draggedColumn && draggedColumn !== columnId) {\n            const dragIndex = settings.columnOrder.indexOf(draggedColumn);\n            const hoverIndex = settings.columnOrder.indexOf(columnId);\n            \n            if (dragIndex > -1 && hoverIndex > -1) {\n                handleMoveColumn(dragIndex, hoverIndex);\n            }\n        }\n        setDraggedColumn(null);\n        setDragOverColumn(null);\n    };\n\n    const handleDragEnd = () => {\n        setDraggedColumn(null);\n        setDragOverColumn(null);\n    };\n\n    // Filtern und sortieren der Spalten gem den Benutzereinstellungen\n    // Sicherstellen, dass alle Spalten aus defaultColumnOrder in columnOrder enthalten sind\n    const completeColumnOrder = useMemo(() => {\n        const currentOrder = settings.columnOrder || [];\n        // Sicherstellen, dass keine undefined/null Werte im Array sind\n        const validOrder = currentOrder.filter(id => id != null && typeof id === 'string');\n        // Fehlende Spalten aus defaultColumnOrder hinzufgen\n        const missingColumns = defaultColumnOrder.filter(id => !validOrder.includes(id));\n        return [...validOrder, ...missingColumns];\n    }, [settings.columnOrder]);\n\n    const visibleColumnIds = completeColumnOrder.filter(id => id != null && typeof id === 'string' && isColumnVisible(id));\n\n    // Funktion zum Kopieren eines Tasks\n    const handleCopyTask = async (task: Task) => {\n        try {\n            // Kopie des Tasks erstellen mit angepasstem Titel\n            const copiedTaskData = {\n                title: `${task.title}-Kopie`,\n                description: task.description,\n                status: 'open', // Immer als \"offen\" erstellen\n                responsibleId: task.responsible ? task.responsible.id : null,\n                roleId: task.role ? task.role.id : null,\n                qualityControlId: task.qualityControl?.id || null,\n                branchId: task.branch.id,\n                dueDate: task.dueDate\n            };\n\n            // Task erstellen\n            const response = await axiosInstance.post(\n                API_ENDPOINTS.TASKS.BASE,\n                copiedTaskData\n            );\n\n            // Optimistisches Update: Neuen Task zur Liste hinzufgen statt vollstndigem Reload\n            setTasks(prevTasks => [response.data, ...prevTasks]);\n            \n            // Bearbeitungsmodal fr den kopierten Task ffnen\n            setSelectedTask(response.data);\n            setIsEditModalOpen(true);\n            \n        } catch (err) {\n            console.error('Fehler beim Kopieren des Tasks:', err);\n            // Einfachere Fehlerbehandlung ohne axios-Import\n            const axiosError = err as any;\n            setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n        }\n    };\n\n    const handleDeleteTask = async (taskId: number) => {\n        if (window.confirm(t('worktime.messages.taskDeleteConfirm'))) {\n            console.log(' Starte Lschung von Task:', taskId);\n            console.log(' Aktuelle Tasks vor Lschung:', tasks.length);\n            \n            // Optimistisches Update: Task sofort aus Liste entfernen fr sofortiges Feedback\n            // Sicherstellen, dass keine undefined/null Werte im Array bleiben\n            setTasks(prevTasks => {\n                const filtered = prevTasks.filter(task => task != null && task.id !== taskId);\n                console.log(' Tasks nach Filterung:', filtered.length, 'von', prevTasks.length);\n                return filtered;\n            });\n\n            // Test-Toast um zu prfen, ob Toast funktioniert\n            toast.info('Test: Task wird gelscht...');\n\n            try {\n                console.log(' Sende Delete-Request...');\n                await axiosInstance.delete(API_ENDPOINTS.TASKS.BY_ID(taskId));\n                console.log(' Delete erfolgreich');\n                // Erfolgs-Rckmeldung anzeigen\n                toast.success(t('worktime.messages.taskDeleted'));\n            } catch (error) {\n                // Rollback bei Fehler: Vollstndiges Reload\n                console.error(' Fehler beim Lschen der Aufgabe:', error);\n                loadTasks();\n                toast.error(t('worktime.messages.taskDeletedError'));\n            }\n        }\n    };\n\n    const handleSaveTask = async (task: Task) => {\n        try {\n            await axiosInstance.put(API_ENDPOINTS.TASKS.BY_ID(task.id), task);\n            // Aktualisiere die Aufgabenliste\n            loadTasks();\n            setIsEditModalOpen(false);\n            setSelectedTask(null);\n            toast.success(t('worktime.messages.taskUpdated'));\n        } catch (error) {\n            console.error('Fehler beim Speichern der Aufgabe:', error);\n                toast.error(t('worktime.messages.taskSaveError'));\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen dark:bg-gray-900\">\n            <div className=\"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6\">\n                {/* Neu angeordnete UI-Elemente in einer Zeile */}\n                <div className=\"w-full mb-4\">\n                    {/* Auf mobilen Gerten wird diese Reihenfolge angezeigt - Tasks oben, Zeiterfassung unten */}\n                    <div className=\"block sm:hidden w-full\">\n                    {/* Tasks */}\n                        <div className=\"dashboard-tasks-wrapper bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 w-full mb-20\">\n                            <div className=\"flex items-center justify-between px-3 sm:px-4 md:px-6\">\n                                {/* Linke Seite: \"Neuer Task\"-Button */}\n                                <div className=\"flex items-center\">\n                                    {hasPermission('tasks', 'write', 'table') && (\n                                        <button \n                                            onClick={() => setIsCreateModalOpen(true)}\n                                            className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                                            style={{ width: '30.19px', height: '30.19px' }}\n                                            title={t('tasks.createTask')}\n                                            aria-label={t('tasks.createTask')}\n                                        >\n                                            <PlusIcon className=\"h-4 w-4\" />\n                                        </button>\n                                    )}\n                                </div>\n                                \n                                {/* Mitte: Titel */}\n                                <div className=\"flex items-center\">\n                                    <CheckCircleIcon className=\"h-6 w-6 mr-2 dark:text-white\" />\n                                    <h2 className=\"text-xl font-semibold dark:text-white\">{t('tasks.title')}</h2>\n                                </div>\n                                \n                                {/* Rechte Seite: Suchfeld, Filter-Button, Status-Filter, Spalten-Konfiguration */}\n                                <div className=\"flex items-center gap-1.5\">\n                                    <input\n                                        type=\"text\"\n                                        placeholder={t('common.search') + '...'}\n                                        className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n                                        value={searchTerm}\n                                        onChange={(e) => setSearchTerm(e.target.value)}\n                                    />\n                                    \n                                    {/* View-Mode Toggle */}\n                                    <button\n                                        className={`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                                            viewMode === 'cards' ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : ''\n                                        }`}\n                                        onClick={() => updateViewMode(viewMode === 'table' ? 'cards' : 'table')}\n                                        title={viewMode === 'table' ? t('common.viewAsCards') : t('common.viewAsTable')}\n                                    >\n                                        {viewMode === 'table' ? (\n                                            <Squares2X2Icon className=\"h-5 w-5\" />\n                                        ) : (\n                                            <TableCellsIcon className=\"h-5 w-5\" />\n                                        )}\n                                    </button>\n                                    \n                                    {/* Filter-Button */}\n                                    <button\n                                        className={`p-2 rounded-md ${getActiveFilterCount() > 0 ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'hover:bg-gray-100 dark:hover:bg-gray-700'} ml-1 relative`}\n                                        onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n                                        title={t('common.filter')}\n                                    >\n                                        <FunnelIcon className=\"h-5 w-5\" />\n                                        {getActiveFilterCount() > 0 && (\n                                            <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 text-white rounded-full text-xs flex items-center justify-center\">\n                                                {getActiveFilterCount()}\n                                            </span>\n                                        )}\n                                    </button>\n                                    \n                                    {/* Spalten-Konfiguration */}\n                                    <div className=\"ml-1\">\n                                        <TableColumnConfig \n                                            columns={viewMode === 'cards'\n                                                ? [\n                                                    { id: 'title', label: t('tasks.columns.title') },\n                                                    { id: 'status', label: t('tasks.columns.status') },\n                                                    { id: 'responsible', label: t('tasks.columns.responsible') },\n                                                    { id: 'qualityControl', label: t('tasks.columns.qualityControl') },\n                                                    { id: 'branch', label: t('tasks.columns.branch') },\n                                                    { id: 'dueDate', label: t('tasks.columns.dueDate') },\n                                                    { id: 'description', label: t('tasks.columns.description') }\n                                                ]\n                                                : availableColumns}\n                                            visibleColumns={viewMode === 'cards'\n                                                ? Array.from(visibleCardMetadata)\n                                                : visibleColumnIds}\n                                            columnOrder={viewMode === 'cards'\n                                                ? cardMetadataOrder\n                                                : settings.columnOrder}\n                                            onToggleColumnVisibility={(columnId) => {\n                                                if (viewMode === 'cards') {\n                                                    // Fr Cards: Mapping zurck zu Tabellen-Spalten\n                                                    const tableColumn = cardToTableMapping[columnId];\n                                                    if (tableColumn) {\n                                                        toggleColumnVisibility(tableColumn);\n                                                    }\n                                                } else {\n                                                    toggleColumnVisibility(columnId);\n                                                }\n                                            }}\n                                            onMoveColumn={viewMode === 'cards'\n                                                ? (dragIndex: number, hoverIndex: number) => {\n                                                    const newCardOrder = [...cardMetadataOrder];\n                                                    const dragged = newCardOrder[dragIndex];\n                                                    newCardOrder.splice(dragIndex, 1);\n                                                    newCardOrder.splice(hoverIndex, 0, dragged);\n                                                    \n                                                    // Konvertiere zurck zu Tabellen-Spalten-Reihenfolge\n                                                    const newTableOrder: string[] = [];\n                                                    const usedTableColumns = new Set<string>();\n                                                    \n                                                    newCardOrder.forEach(cardMeta => {\n                                                        const tableCol = cardToTableMapping[cardMeta];\n                                                        if (tableCol && !usedTableColumns.has(tableCol)) {\n                                                            usedTableColumns.add(tableCol);\n                                                            newTableOrder.push(tableCol);\n                                                        }\n                                                    });\n                                                    \n                                                    // Fge fehlende Tabellen-Spalten hinzu\n                                                    availableColumns.forEach(col => {\n                                                        if (!newTableOrder.includes(col.id) && col.id !== 'actions') {\n                                                            newTableOrder.push(col.id);\n                                                        }\n                                                    });\n                                                    \n                                                    updateColumnOrder(newTableOrder);\n                                                }\n                                                : handleMoveColumn}\n                                            sortDirections={viewMode === 'cards' ? cardSortDirections : undefined}\n                                            onSortDirectionChange={viewMode === 'cards'\n                                                ? (columnId: string, direction: 'asc' | 'desc') => {\n                                                    setCardSortDirections(prev => ({\n                                                        ...prev,\n                                                        [columnId]: direction\n                                                    }));\n                                                }\n                                                : undefined}\n                                            showSortDirection={viewMode === 'cards'}\n                                            buttonTitle={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n                                            modalTitle={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n                                            onClose={() => {}}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Filter-Pane */}\n                            {isFilterModalOpen && (\n                                <div className={viewMode === 'cards' ? '-mx-3 sm:-mx-4 md:-mx-6 px-3 sm:px-4 md:px-6' : 'px-3 sm:px-4 md:px-6'}>\n                                    <FilterPane\n                                    columns={[...availableColumns, ...filterOnlyColumns]}\n                                    onApply={applyFilterConditions}\n                                    onReset={resetFilterConditions}\n                                    savedConditions={filterConditions}\n                                    savedOperators={filterLogicalOperators}\n                                    tableId={TODOS_TABLE_ID}\n                                />\n                                </div>\n                            )}\n                            \n                            {/* Gespeicherte Filter als Tags anzeigen */}\n                            <div className={viewMode === 'cards' ? '-mx-3 sm:-mx-4 md:-mx-6 px-3 sm:px-4 md:px-6' : 'px-3 sm:px-4 md:px-6'}>\n                                <SavedFilterTags\n                                tableId={TODOS_TABLE_ID}\n                                onSelectFilter={applyFilterConditions}\n                                onReset={resetFilterConditions}\n                                activeFilterName={activeFilterName}\n                                selectedFilterId={selectedFilterId}\n                                onFilterChange={handleFilterChange}\n                                defaultFilterName={t('tasks.filters.current')}\n                            />\n                            </div>\n                            \n                            {/* Tabelle oder Cards */}\n                            {viewMode === 'table' ? (\n                                /* Tabellen-Ansicht */\n                                <div className=\"overflow-x-auto -mx-3 sm:-mx-4 md:-mx-6\">\n                                    <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n                                        <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                                            <tr>\n                                                {visibleColumnIds.map((columnId) => {\n                                                    const column = availableColumns.find(col => col.id === columnId);\n                                                    if (!column) return null;\n                                                    \n                                                    return (\n                                                        <th\n                                                            key={columnId}\n                                                            scope=\"col\"\n                                                            className={`px-3 sm:px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider ${columnId === dragOverColumn ? 'bg-blue-100 dark:bg-blue-800' : ''}`}\n                                                            draggable={true}\n                                                            onDragStart={() => handleDragStart(columnId)}\n                                                            onDragOver={(e) => handleDragOver(e, columnId)}\n                                                            onDrop={(e) => handleDrop(e, columnId)}\n                                                            onDragEnd={handleDragEnd}\n                                                        >\n                                                            <div className=\"flex items-center\">\n                                                                {window.innerWidth <= 640 ? column.shortLabel : column.label}\n                                                                {columnId !== 'actions' && (\n                                                                    <button \n                                                                        onClick={() => handleSort(columnId as keyof Task)}\n                                                                        className=\"ml-1 focus:outline-none\"\n                                                                    >\n                                                                        <ArrowsUpDownIcon className=\"h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                                                                    </button>\n                                                                )}\n                                                            </div>\n                                                        </th>\n                                                    );\n                                                })}\n                                            </tr>\n                                        </thead>\n                                        <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                                            {loading ? (\n                                                <tr>\n                                                    <td colSpan={visibleColumnIds.length} className=\"px-3 sm:px-4 md:px-6 py-4 text-center\">\n                                                        <div className=\"flex justify-center\">\n                                                            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900 dark:border-gray-100\"></div>\n                                                        </div>\n                                                    </td>\n                                                </tr>\n                                            ) : error ? (\n                                                <tr>\n                                                    <td colSpan={visibleColumnIds.length} className=\"px-6 py-4 text-center text-red-600 dark:text-red-400\">\n                                                        {error}\n                                                    </td>\n                                                </tr>\n                                            ) : filteredAndSortedTasks.length === 0 ? (\n                                                <tr>\n                                                    <td colSpan={visibleColumnIds.length} className=\"px-6 py-4 text-center text-gray-500 dark:text-gray-400\">\n                                                        <div className=\"flex flex-col items-center justify-center gap-4\">\n                                                        <ClipboardDocumentListIcon className=\"h-10 w-10 text-gray-400 dark:text-gray-500\" />\n                                                        <div className=\"text-sm\">{t('tasks.noTasksFound')}</div>\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        ) : (\n                                            <>\n                                            {filteredAndSortedTasks.slice(0, displayLimit).map(task => {\n                                            const expiryStatus = getExpiryStatus(task.dueDate, 'todo', undefined, task.title, task.description);\n                                            const expiryColors = getExpiryColorClasses(expiryStatus);\n                                            \n                                            return (\n                                                <tr \n                                                    key={task.id} \n                                                    className={`hover:bg-gray-50 dark:hover:bg-gray-700 ${\n                                                        expiryStatus !== 'none' ? `${expiryColors.bgClass} ${expiryColors.borderClass} border-l-4` : ''\n                                                    }`}\n                                                >\n                                                    {visibleColumnIds.map(columnId => {\n                                                    switch (columnId) {\n                                                        case 'title':\n                                                            return (\n                                                                <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4\">\n                                                                    <div className=\"text-sm text-gray-900 dark:text-gray-200 break-words flex items-center\">\n                                                                        {task.title}\n                                                                            {task.description && (\n                                                                                <div className=\"ml-2 relative group\">\n                                                                                    <button \n                                                                                        className=\"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300\"\n                                                                                        title={t('tasks.showDescription')}\n                                                                                    >\n                                                                                        <InformationCircleIcon className=\"h-5 w-5\" />\n                                                                                    </button>\n                                                                                    <div className=\"hidden group-hover:block absolute left-0 mt-2 p-2 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 shadow-lg rounded-md border border-gray-200 dark:border-gray-700 w-144 max-h-96 overflow-y-auto min-w-[36rem] z-10\">\n                                                                                        <MarkdownPreview content={task.description} showImagePreview={true} />\n                                                                                    </div>\n                                                                                </div>\n                                                                            )}\n                                                                        </div>\n                                                                    </td>\n                                                                );\n                                                            case 'status':\n                                                                return (\n                                                                    <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                        <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(task.status, 'task')} dark:bg-opacity-30 status-col`}>\n                                                                            {task.status}\n                                                                        </span>\n                                                                    </td>\n                                                                );\n                                                            case 'responsibleAndQualityControl':\n                                                                return (\n                                                                    <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                        <div className=\"flex flex-col\">\n                                                                            <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                                                                <span className=\"text-xs text-gray-500 dark:text-gray-400 hidden sm:inline\">{t('tasks.columns.responsible')}:</span>\n                                                                                <span className=\"text-xs text-gray-500 dark:text-gray-400 inline sm:hidden\">{t('tasks.columns.responsible').substring(0, 3)}:</span><br />\n                                                                                {task.responsible ? `${task.responsible.firstName} ${task.responsible.lastName}` : task.role ? task.role.name : '-'}\n                                                                            </div>\n                                                                            <div className=\"text-sm text-gray-900 dark:text-gray-200 mt-1\">\n                                                                                <span className=\"text-xs text-gray-500 dark:text-gray-400 hidden sm:inline\">{t('tasks.qualityControlLabel')}</span>\n                                                                                <span className=\"text-xs text-gray-500 dark:text-gray-400 inline sm:hidden\">{t('tasks.columns.qualityControl').substring(0, 2)}:</span><br />\n                                                                                {task.qualityControl ? `${task.qualityControl.firstName} ${task.qualityControl.lastName}` : '-'}\n                                                                            </div>\n                                                                        </div>\n                                                                    </td>\n                                                                );\n                                                            case 'branch':\n                                                                return (\n                                                                    <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                        <div className=\"text-sm text-gray-900 dark:text-gray-200\">{task.branch.name}</div>\n                                                                    </td>\n                                                                );\n                                                            case 'dueDate':\n                                                                const expiryStatusForDate = getExpiryStatus(task.dueDate, 'todo', undefined, task.title, task.description);\n                                                                const expiryColorsForDate = getExpiryColorClasses(expiryStatusForDate);\n                                                                return (\n                                                                    <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                        <div className={`text-sm ${expiryStatusForDate !== 'none' ? expiryColorsForDate.textClass : 'text-gray-900 dark:text-gray-200'}`}>\n                                                                            {task.dueDate ? new Date(task.dueDate).toLocaleDateString() : '-'}\n                                                                            {expiryStatusForDate !== 'none' && (\n                                                                                <span className=\"ml-2 text-xs\"></span>\n                                                                            )}\n                                                                        </div>\n                                                                    </td>\n                                                                );\n                                                            case 'actions':\n                                                                return (\n                                                                    <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                        <div className=\"flex space-x-2 action-buttons\">\n                                                                            <div className=\"status-buttons\">\n                                                                                {renderStatusButtons(task)}\n                                                                            </div>\n                                                                            {hasPermission('tasks', 'write', 'table') && (\n                                                                                <button\n                                                                                    onClick={() => {\n                                                                                        setSelectedTask(task);\n                                                                                        setIsEditModalOpen(true);\n                                                                                    }}\n                                                                                    className=\"p-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                                                                                    title={t('common.edit')}\n                                                                                >\n                                                                                    <PencilIcon className=\"h-4 w-4\" />\n                                                                                </button>\n                                                                            )}\n                                                                            {hasPermission('tasks', 'both', 'table') && (\n                                                                                <button\n                                                                                    onClick={() => handleCopyTask(task)}\n                                                                                    className=\"p-1.5 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                                                                                    title={t('tasks.actions.copy')}\n                                                                                >\n                                                                                    <DocumentDuplicateIcon className=\"h-4 w-4\" />\n                                                                                </button>\n                                                                            )}\n                                                                            {hasPermission('tasks', 'delete', 'table') && (\n                                                                                <button\n                                                                                    onClick={() => handleDeleteTask(task.id)}\n                                                                                    className=\"p-1.5 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300\"\n                                                                                    title={t('common.delete')}\n                                                                                >\n                                                                                    <TrashIcon className=\"h-4 w-4\" />\n                                                                                </button>\n                                                                            )}\n                                                                        </div>\n                                                                    </td>\n                                                                );\n                                                            default:\n                                                                return null;\n                                                        }\n                                                    })}\n                                                    </tr>\n                                                );\n                                            })}\n                                            </>\n                                        )}\n                                    </tbody>\n                                </table>\n                            </div>\n                            ) : (\n                                /* Card-Ansicht - ohne Box-Schattierung, Cards auf voller Breite */\n                                <div className=\"-mx-3 sm:-mx-4 md:-mx-6\">\n                                    {loading ? (\n                                        <div className=\"flex justify-center py-12\">\n                                            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900 dark:border-gray-100\"></div>\n                                        </div>\n                                    ) : error ? (\n                                        <div className=\"flex justify-center py-12 text-red-600 dark:text-red-400\">\n                                            {error}\n                                        </div>\n                                    ) : filteredAndSortedTasks.length === 0 ? (\n                                        <div className=\"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400\">\n                                            <ClipboardDocumentListIcon className=\"h-10 w-10 mb-4 text-gray-400 dark:text-gray-500\" />\n                                            <div className=\"text-sm\">Keine To Do's gefunden</div>\n                                        </div>\n                                    ) : (\n                                        <CardGrid>\n                                            {filteredAndSortedTasks.slice(0, displayLimit).map(task => {\n                                                const expiryStatus = getExpiryStatus(task.dueDate, 'todo', undefined, task.title, task.description);\n                                                \n                                                // Metadaten basierend auf sichtbaren Einstellungen - strukturiert nach Position\n                                                const metadata: MetadataItem[] = [];\n                                                \n                                                // Links: Niederlassung\n                                                if (visibleCardMetadata.has('branch')) {\n                                                    metadata.push({\n                                                        icon: <BuildingOfficeIcon className=\"h-4 w-4\" />,\n                                                        label: t('tasks.columns.branch'),\n                                                        value: task.branch.name,\n                                                        section: 'left'\n                                                    });\n                                                }\n                                                \n                                                // Haupt-Metadaten: Verantwortlicher & Qualittskontrolle\n                                                if (visibleCardMetadata.has('responsible')) {\n                                                    // Benutzernamen auf 4 Zeichen krzen\n                                                    const responsibleValue = task.responsible ? `${task.responsible.firstName} ${task.responsible.lastName}` : (task.role ? task.role.name : '-');\n                                                    const shortenedName = responsibleValue.length > 4 && responsibleValue !== '-' ? responsibleValue.substring(0, 4) : responsibleValue;\n                                                    metadata.push({\n                                                        icon: <UserIcon className=\"h-4 w-4\" />,\n                                                        label: t('tasks.columns.responsible'),\n                                                        value: shortenedName,\n                                                        section: 'main'\n                                                    });\n                                                }\n                                                if (visibleCardMetadata.has('qualityControl')) {\n                                                    // Benutzernamen auf 4 Zeichen krzen\n                                                    const qualityControlValue = task.qualityControl ? `${task.qualityControl.firstName} ${task.qualityControl.lastName}` : '-';\n                                                    const shortenedName = qualityControlValue.length > 4 && qualityControlValue !== '-' ? qualityControlValue.substring(0, 4) : qualityControlValue;\n                                                    metadata.push({\n                                                        icon: <UserIcon className=\"h-4 w-4\" />,\n                                                        label: t('tasks.columns.qualityControl'),\n                                                        value: shortenedName,\n                                                        section: 'main-second'\n                                                    });\n                                                }\n                                                \n                                                // Rechts: Flligkeit (erste Zeile rechts, neben Status)\n                                                if (visibleCardMetadata.has('dueDate')) {\n                                                    const dueDateItem = createDueDateMetadataItem(\n                                                        task.dueDate,\n                                                        'todo',\n                                                        task.title,\n                                                        task.description,\n                                                        <CalendarIcon className=\"h-4 w-4\" />,\n                                                        t('tasks.columns.dueDate'),\n                                                        (date) => format(date, 'dd.MM.yyyy', { locale: de }),\n                                                        false // Keine Badge-Art, nur Text\n                                                    );\n                                                    metadata.push({\n                                                        ...dueDateItem,\n                                                        section: 'right-inline' // Neue Section fr inline rechts (neben Status)\n                                                    });\n                                                }\n                                                \n                                                // Full-Width: Beschreibung\n                                                if (visibleCardMetadata.has('description') && task.description) {\n                                                    metadata.push({\n                                                        label: t('tasks.columns.description'),\n                                                        value: '',\n                                                        descriptionContent: task.description,\n                                                        attachmentMetadata: task.attachments || [], // Attachment-Metadaten fr Vorschau\n                                                        section: 'full'\n                                                    });\n                                                }\n                                                \n                                                // Action-Buttons\n                                                const actionButtons = (\n                                                    <div className=\"flex items-center space-x-2\">\n                                                        {/* Status-Buttons */}\n                                                        <div className=\"status-buttons\">\n                                                            {renderStatusButtons(task)}\n                                                        </div>\n                                                        {hasPermission('tasks', 'write', 'table') && (\n                                                            <button\n                                                                onClick={(e) => {\n                                                                    e.stopPropagation();\n                                                                    setSelectedTask(task);\n                                                                    setIsEditModalOpen(true);\n                                                                }}\n                                                                className=\"p-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                                                                title={t('common.edit')}\n                                                            >\n                                                                <PencilIcon className=\"h-4 w-4\" />\n                                                            </button>\n                                                        )}\n                                                        {hasPermission('tasks', 'both', 'table') && (\n                                                            <button\n                                                                onClick={(e) => {\n                                                                    e.stopPropagation();\n                                                                    handleCopyTask(task);\n                                                                }}\n                                                                className=\"p-1.5 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                                                                title={t('tasks.actions.copy')}\n                                                            >\n                                                                <DocumentDuplicateIcon className=\"h-4 w-4\" />\n                                                            </button>\n                                                        )}\n                                                    </div>\n                                                );\n                                                \n                                                return (\n                                                    <DataCard\n                                                        key={task.id}\n                                                        title={task.title}\n                                                        status={{\n                                                            label: getStatusText(task.status, 'task', t),\n                                                            color: getStatusColor(task.status, 'task'),\n                                                            onPreviousClick: undefined,\n                                                            onNextClick: undefined\n                                                        }}\n                                                        metadata={metadata}\n                                                        actions={actionButtons}\n                                                    />\n                                                );\n                                            })}\n                                        </CardGrid>\n                                    )}\n                                </div>\n                            )}\n                            \n                            {/* \"Mehr anzeigen\" Button - Mobil */}\n                            {filteredAndSortedTasks.length > displayLimit && (\n                                <div className=\"mt-4 flex justify-center\">\n                                    <button\n                                        className=\"px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-700 border border-blue-300 dark:border-gray-600 rounded-md hover:bg-blue-50 dark:hover:bg-gray-600\"\n                                        onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n                                    >\n                                        {t('common.showMore')} ({filteredAndSortedTasks.length - displayLimit} {t('common.remaining')})\n                                    </button>\n                                </div>\n                            )}\n                        </div>\n                        \n                        {/* Zeiterfassung - auf Mobilgerten fixiert ber dem Footermen */}\n                        <div className=\"fixed bottom-13 left-0 right-0 w-full bg-white dark:bg-gray-800 z-9 shadow-lg border-t-0 dark:border-t dark:border-gray-700\">\n                            <WorktimeTracker />\n                        </div>\n                    </div>\n\n                    {/* Auf greren Gerten bleibt die ursprngliche Reihenfolge - Zeiterfassung oben, Tasks unten */}\n                    <div className=\"hidden sm:block\">\n                        {/* Zeiterfassung */}\n                        <div className=\"mb-8\">\n                            <WorktimeTracker />\n                        </div>\n                        \n                        {/* Tasks - vollstndiger Inhalt fr Desktop-Ansicht */}\n                        <div className=\"dashboard-tasks-wrapper bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 w-full mb-20\">\n                            <div className=\"flex items-center mb-4 justify-between px-3 sm:px-4 md:px-6\">\n                                {/* Linke Seite: \"Neuer Task\"-Button */}\n                                <div className=\"flex items-center\">\n                                    {hasPermission('tasks', 'write', 'table') && (\n                                        <button\n                                            onClick={() => setIsCreateModalOpen(true)}\n                                            className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                                            style={{ width: '30.19px', height: '30.19px' }}\n                                            title={t('tasks.createTask')}\n                                            aria-label={t('tasks.createTask')}\n                                            data-onboarding=\"create-task-button\"\n                                        >\n                                            <PlusIcon className=\"h-4 w-4\" />\n                                        </button>\n                                    )}\n                                </div>\n                                \n                                {/* Mitte: Titel */}\n                                <div className=\"flex items-center\">\n                                    <CheckCircleIcon className=\"h-6 w-6 mr-2 dark:text-white\" />\n                                    <h2 className=\"text-xl font-semibold dark:text-white\">{t('tasks.title')}</h2>\n                                </div>\n                                \n                                {/* Rechte Seite: Suchfeld, Filter-Button, Status-Filter, Spalten-Konfiguration */}\n                                <div className=\"flex items-center gap-1.5\">\n                                    <input\n                                        type=\"text\"\n                                        placeholder={t('common.search') + '...'}\n                                        className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n                                        value={searchTerm}\n                                        onChange={(e) => setSearchTerm(e.target.value)}\n                                    />\n                                    \n                                    {/* View-Mode Toggle */}\n                                    <button\n                                        className={`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                                            viewMode === 'cards' ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : ''\n                                        }`}\n                                        onClick={() => updateViewMode(viewMode === 'table' ? 'cards' : 'table')}\n                                        title={viewMode === 'table' ? t('common.viewAsCards') : t('common.viewAsTable')}\n                                    >\n                                        {viewMode === 'table' ? (\n                                            <Squares2X2Icon className=\"h-5 w-5\" />\n                                        ) : (\n                                            <TableCellsIcon className=\"h-5 w-5\" />\n                                        )}\n                                    </button>\n                                    \n                                    {/* Filter-Button */}\n                                    <button\n                                        className={`p-2 rounded-md ${getActiveFilterCount() > 0 ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'hover:bg-gray-100 dark:hover:bg-gray-700'} ml-1 relative`}\n                                        onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n                                        title={t('common.filter')}\n                                    >\n                                        <FunnelIcon className=\"h-5 w-5\" />\n                                        {getActiveFilterCount() > 0 && (\n                                            <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 text-white rounded-full text-xs flex items-center justify-center\">\n                                                {getActiveFilterCount()}\n                                            </span>\n                                        )}\n                                    </button>\n                                    \n                                    {/* Spalten-Konfiguration */}\n                                    <div className=\"ml-1\">\n                                        <TableColumnConfig\n                                            columns={viewMode === 'cards'\n                                                ? [\n                                                    { id: 'title', label: t('tasks.columns.title') },\n                                                    { id: 'status', label: t('tasks.columns.status') },\n                                                    { id: 'responsible', label: t('tasks.columns.responsible') },\n                                                    { id: 'qualityControl', label: t('tasks.columns.qualityControl') },\n                                                    { id: 'branch', label: t('tasks.columns.branch') },\n                                                    { id: 'dueDate', label: t('tasks.columns.dueDate') },\n                                                    { id: 'description', label: t('tasks.columns.description') }\n                                                ]\n                                                : availableColumns}\n                                            visibleColumns={viewMode === 'cards'\n                                                ? Array.from(visibleCardMetadata)\n                                                : visibleColumnIds}\n                                            columnOrder={viewMode === 'cards'\n                                                ? cardMetadataOrder\n                                                : settings.columnOrder}\n                                            onToggleColumnVisibility={(columnId) => {\n                                                if (viewMode === 'cards') {\n                                                    const tableColumn = cardToTableMapping[columnId];\n                                                    if (tableColumn) {\n                                                        toggleColumnVisibility(tableColumn);\n                                                    }\n                                                } else {\n                                                    toggleColumnVisibility(columnId);\n                                                }\n                                            }}\n                                            onMoveColumn={viewMode === 'cards'\n                                                ? (dragIndex: number, hoverIndex: number) => {\n                                                    const newCardOrder = [...cardMetadataOrder];\n                                                    const dragged = newCardOrder[dragIndex];\n                                                    newCardOrder.splice(dragIndex, 1);\n                                                    newCardOrder.splice(hoverIndex, 0, dragged);\n                                                    \n                                                    const newTableOrder: string[] = [];\n                                                    const usedTableColumns = new Set<string>();\n                                                    \n                                                    newCardOrder.forEach(cardMeta => {\n                                                        const tableCol = cardToTableMapping[cardMeta];\n                                                        if (tableCol && !usedTableColumns.has(tableCol)) {\n                                                            usedTableColumns.add(tableCol);\n                                                            newTableOrder.push(tableCol);\n                                                        }\n                                                    });\n                                                    \n                                                    availableColumns.forEach(col => {\n                                                        if (!newTableOrder.includes(col.id) && col.id !== 'actions') {\n                                                            newTableOrder.push(col.id);\n                                                        }\n                                                    });\n                                                    \n                                                    updateColumnOrder(newTableOrder);\n                                                }\n                                                : handleMoveColumn}\n                                            sortDirections={viewMode === 'cards' ? cardSortDirections : undefined}\n                                            onSortDirectionChange={viewMode === 'cards'\n                                                ? (columnId: string, direction: 'asc' | 'desc') => {\n                                                    setCardSortDirections(prev => ({\n                                                        ...prev,\n                                                        [columnId]: direction\n                                                    }));\n                                                }\n                                                : undefined}\n                                            showSortDirection={viewMode === 'cards'}\n                                            buttonTitle={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n                                            modalTitle={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n                                            onClose={() => {}}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Filter-Pane */}\n                            {isFilterModalOpen && (\n                                <div className={viewMode === 'cards' ? '-mx-3 sm:-mx-4 md:-mx-6 px-3 sm:px-4 md:px-6' : 'px-3 sm:px-4 md:px-6'}>\n                                    <FilterPane\n                                    columns={[...availableColumns, ...filterOnlyColumns]}\n                                    onApply={applyFilterConditions}\n                                    onReset={resetFilterConditions}\n                                    savedConditions={filterConditions}\n                                    savedOperators={filterLogicalOperators}\n                                    tableId={TODOS_TABLE_ID}\n                                />\n                                </div>\n                            )}\n\n                            {/* Gespeicherte Filter als Tags anzeigen */}\n                            <SavedFilterTags\n                                tableId={TODOS_TABLE_ID}\n                                onSelectFilter={applyFilterConditions}\n                                onReset={resetFilterConditions}\n                                activeFilterName={activeFilterName}\n                                selectedFilterId={selectedFilterId}\n                                onFilterChange={handleFilterChange}\n                                defaultFilterName={t('tasks.filters.current')}\n                            />\n\n                            {/* Tabelle oder Cards */}\n                            {viewMode === 'table' ? (\n                                /* Tabellen-Ansicht */\n                                <div className=\"overflow-x-auto\">\n                                    <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\" data-onboarding=\"task-list\">\n                                        <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                                            <tr>\n                                                {visibleColumnIds.map((columnId) => {\n                                                    const column = availableColumns.find(col => col.id === columnId);\n                                                    if (!column) return null;\n\n                                                    return (\n                                                        <th \n                                                            key={columnId}\n                                                            scope=\"col\"\n                                                            className={`px-3 sm:px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider ${columnId === dragOverColumn ? 'bg-blue-100 dark:bg-blue-800' : ''}`}\n                                                            draggable={true}\n                                                            onDragStart={() => handleDragStart(columnId)}\n                                                            onDragOver={(e) => handleDragOver(e, columnId)}\n                                                            onDrop={(e) => handleDrop(e, columnId)}\n                                                            onDragEnd={handleDragEnd}\n                                                        >\n                                                            <div className=\"flex items-center\">\n                                                                {window.innerWidth <= 640 ? column.shortLabel : column.label}\n                                                                {columnId !== 'actions' && (\n                                                                    <button \n                                                                        onClick={() => handleSort(columnId as keyof Task)}\n                                                                        className=\"ml-1 focus:outline-none\"\n                                                                    >\n                                                                        <ArrowsUpDownIcon className=\"h-4 w-4 text-gray-400 dark:text-gray-500\" />\n                                                                    </button>\n                                                                )}\n                                                            </div>\n                                                        </th>\n                                                    );\n                                                })}\n                                            </tr>\n                                        </thead>\n                                        <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                                            {loading ? (\n                                                <tr>\n                                                    <td colSpan={visibleColumnIds.length} className=\"px-3 sm:px-4 md:px-6 py-4 text-center\">\n                                                        <div className=\"flex justify-center\">\n                                                            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900 dark:border-gray-100\"></div>\n                                                        </div>\n                                                    </td>\n                                                </tr>\n                                            ) : error ? (\n                                                <tr>\n                                                    <td colSpan={visibleColumnIds.length} className=\"px-6 py-4 text-center text-red-600 dark:text-red-400\">\n                                                        {error}\n                                                    </td>\n                                                </tr>\n                                            ) : filteredAndSortedTasks.length === 0 ? (\n                                                <tr>\n                                                    <td colSpan={visibleColumnIds.length} className=\"px-6 py-4 text-center text-gray-500 dark:text-gray-400\">\n                                                        <div className=\"flex flex-col items-center justify-center gap-4\">\n                                                        <ClipboardDocumentListIcon className=\"h-10 w-10 text-gray-400 dark:text-gray-500\" />\n                                                        <div className=\"text-sm\">{t('tasks.noTasksFound')}</div>\n                                                    </div>\n                                                </td>\n                                            </tr>\n                                        ) : (\n                                            <>\n                                            {filteredAndSortedTasks.slice(0, displayLimit).map(task => {\n                                            const expiryStatus = getExpiryStatus(task.dueDate, 'todo', undefined, task.title, task.description);\n                                            const expiryColors = getExpiryColorClasses(expiryStatus);\n                                            \n                                            return (\n                                                <tr \n                                                    key={task.id} \n                                                    className={`hover:bg-gray-50 dark:hover:bg-gray-700 ${\n                                                        expiryStatus !== 'none' ? `${expiryColors.bgClass} ${expiryColors.borderClass} border-l-4` : ''\n                                                    }`}\n                                                >\n                                                    {visibleColumnIds.map(columnId => {\n                                                    switch (columnId) {\n                                                        case 'title':\n                                                            return (\n                                                                <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4\">\n                                                                    <div className=\"text-sm text-gray-900 dark:text-gray-200 break-words flex items-center\">\n                                                                        {task.title}\n                                                                            {task.description && (\n                                                                                <div className=\"ml-2 relative group\">\n                                                                                    <button \n                                                                                        className=\"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300\"\n                                                                                        title={t('tasks.showDescription')}\n                                                                                    >\n                                                                                        <InformationCircleIcon className=\"h-5 w-5\" />\n                                                                                    </button>\n                                                                                    <div className=\"hidden group-hover:block absolute left-0 mt-2 p-2 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 shadow-lg rounded-md border border-gray-200 dark:border-gray-700 w-144 max-h-96 overflow-y-auto min-w-[36rem] z-10\">\n                                                                                        <MarkdownPreview content={task.description} showImagePreview={true} />\n                                                                                    </div>\n                                                                                </div>\n                                                                            )}\n                                                                        </div>\n                                                                    </td>\n                                                                );\n                                                            case 'status':\n                                                                return (\n                                                                    <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                        <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(task.status, 'task')} dark:bg-opacity-30 status-col`}>\n                                                                            {task.status}\n                                                                        </span>\n                                                                    </td>\n                                                                );\n                                                            case 'responsibleAndQualityControl':\n                                                                return (\n                                                                    <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                        <div className=\"flex flex-col\">\n                                                                            <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                                                                <span className=\"text-xs text-gray-500 dark:text-gray-400 hidden sm:inline\">{t('tasks.columns.responsible')}:</span>\n                                                                                <span className=\"text-xs text-gray-500 dark:text-gray-400 inline sm:hidden\">{t('tasks.columns.responsible').substring(0, 3)}:</span><br />\n                                                                                {task.responsible ? `${task.responsible.firstName} ${task.responsible.lastName}` : task.role ? task.role.name : '-'}\n                                                                            </div>\n                                                                            <div className=\"text-sm text-gray-900 dark:text-gray-200 mt-1\">\n                                                                                <span className=\"text-xs text-gray-500 dark:text-gray-400 hidden sm:inline\">{t('tasks.qualityControlLabel')}</span>\n                                                                                <span className=\"text-xs text-gray-500 dark:text-gray-400 inline sm:hidden\">{t('tasks.columns.qualityControl').substring(0, 2)}:</span><br />\n                                                                                {task.qualityControl ? `${task.qualityControl.firstName} ${task.qualityControl.lastName}` : '-'}\n                                                                            </div>\n                                                                        </div>\n                                                                    </td>\n                                                                );\n                                                            case 'branch':\n                                                                return (\n                                                                    <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                        <div className=\"text-sm text-gray-900 dark:text-gray-200\">{task.branch.name}</div>\n                                                                    </td>\n                                                                );\n                                                            case 'dueDate':\n                                                                const expiryStatusForDate2 = getExpiryStatus(task.dueDate, 'todo', undefined, task.title, task.description);\n                                                                const expiryColorsForDate2 = getExpiryColorClasses(expiryStatusForDate2);\n                                                                return (\n                                                                    <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                        <div className={`text-sm ${expiryStatusForDate2 !== 'none' ? expiryColorsForDate2.textClass : 'text-gray-900 dark:text-gray-200'}`}>\n                                                                            {task.dueDate ? new Date(task.dueDate).toLocaleDateString() : '-'}\n                                                                            {expiryStatusForDate2 !== 'none' && (\n                                                                                <span className=\"ml-2 text-xs\"></span>\n                                                                            )}\n                                                                        </div>\n                                                                    </td>\n                                                                );\n                                                            case 'actions':\n                                                                return (\n                                                                    <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4 whitespace-nowrap\">\n                                                                        <div className=\"flex space-x-2 action-buttons\">\n                                                                            <div className=\"status-buttons\">\n                                                                                {renderStatusButtons(task)}\n                                                                            </div>\n                                                                            {hasPermission('tasks', 'write', 'table') && (\n                                                                                <button\n                                                                                    onClick={() => {\n                                                                                        setSelectedTask(task);\n                                                                                        setIsEditModalOpen(true);\n                                                                                    }}\n                                                                                    className=\"p-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                                                                                    title={t('common.edit')}\n                                                                                >\n                                                                                    <PencilIcon className=\"h-4 w-4\" />\n                                                                                </button>\n                                                                            )}\n                                                                            {hasPermission('tasks', 'both', 'table') && (\n                                                                                <button\n                                                                                    onClick={() => handleCopyTask(task)}\n                                                                                    className=\"p-1.5 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                                                                                    title={t('tasks.actions.copy')}\n                                                                                >\n                                                                                    <DocumentDuplicateIcon className=\"h-4 w-4\" />\n                                                                                </button>\n                                                                            )}\n                                                                            {hasPermission('tasks', 'delete', 'table') && (\n                                                                                <button\n                                                                                    onClick={() => handleDeleteTask(task.id)}\n                                                                                    className=\"p-1.5 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300\"\n                                                                                    title={t('common.delete')}\n                                                                                >\n                                                                                    <TrashIcon className=\"h-4 w-4\" />\n                                                                                </button>\n                                                                            )}\n                                                                        </div>\n                                                                    </td>\n                                                                );\n                                                            default:\n                                                                return null;\n                                                        }\n                                                    })}\n                                                    </tr>\n                                                );\n                                            })}\n                                            </>\n                                        )}\n                                    </tbody>\n                                </table>\n                            </div>\n                            ) : (\n                                /* Card-Ansicht - ohne Box-Schattierung, Cards auf voller Breite */\n                                <div className=\"-mx-3 sm:-mx-4 md:-mx-6\">\n                                    {loading ? (\n                                        <div className=\"flex justify-center py-12\">\n                                            <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900 dark:border-gray-100\"></div>\n                                        </div>\n                                    ) : error ? (\n                                        <div className=\"flex justify-center py-12 text-red-600 dark:text-red-400\">\n                                            {error}\n                                        </div>\n                                    ) : filteredAndSortedTasks.length === 0 ? (\n                                        <div className=\"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400\">\n                                            <ClipboardDocumentListIcon className=\"h-10 w-10 mb-4 text-gray-400 dark:text-gray-500\" />\n                                            <div className=\"text-sm\">Keine To Do's gefunden</div>\n                                        </div>\n                                    ) : (\n                                        <CardGrid>\n                                            {filteredAndSortedTasks.slice(0, displayLimit).map(task => {\n                                                const expiryStatus = getExpiryStatus(task.dueDate, 'todo', undefined, task.title, task.description);\n                                                \n                                                // Metadaten basierend auf sichtbaren Einstellungen - strukturiert nach Position\n                                                const metadata: MetadataItem[] = [];\n                                                \n                                                // Links: Niederlassung\n                                                if (visibleCardMetadata.has('branch')) {\n                                                    metadata.push({\n                                                        icon: <BuildingOfficeIcon className=\"h-4 w-4\" />,\n                                                        label: t('tasks.columns.branch'),\n                                                        value: task.branch.name,\n                                                        section: 'left'\n                                                    });\n                                                }\n                                                \n                                                // Haupt-Metadaten: Verantwortlicher & Qualittskontrolle\n                                                if (visibleCardMetadata.has('responsible')) {\n                                                    // Benutzernamen auf 4 Zeichen krzen\n                                                    const responsibleValue = task.responsible ? `${task.responsible.firstName} ${task.responsible.lastName}` : (task.role ? task.role.name : '-');\n                                                    const shortenedName = responsibleValue.length > 4 && responsibleValue !== '-' ? responsibleValue.substring(0, 4) : responsibleValue;\n                                                    metadata.push({\n                                                        icon: <UserIcon className=\"h-4 w-4\" />,\n                                                        label: t('tasks.columns.responsible'),\n                                                        value: shortenedName,\n                                                        section: 'main'\n                                                    });\n                                                }\n                                                if (visibleCardMetadata.has('qualityControl')) {\n                                                    // Benutzernamen auf 4 Zeichen krzen\n                                                    const qualityControlValue = task.qualityControl ? `${task.qualityControl.firstName} ${task.qualityControl.lastName}` : '-';\n                                                    const shortenedName = qualityControlValue.length > 4 && qualityControlValue !== '-' ? qualityControlValue.substring(0, 4) : qualityControlValue;\n                                                    metadata.push({\n                                                        icon: <UserIcon className=\"h-4 w-4\" />,\n                                                        label: t('tasks.columns.qualityControl'),\n                                                        value: shortenedName,\n                                                        section: 'main-second'\n                                                    });\n                                                }\n                                                \n                                                // Rechts: Flligkeit (erste Zeile rechts, neben Status)\n                                                if (visibleCardMetadata.has('dueDate')) {\n                                                    const dueDateItem = createDueDateMetadataItem(\n                                                        task.dueDate,\n                                                        'todo',\n                                                        task.title,\n                                                        task.description,\n                                                        <CalendarIcon className=\"h-4 w-4\" />,\n                                                        t('tasks.columns.dueDate'),\n                                                        (date) => format(date, 'dd.MM.yyyy', { locale: de }),\n                                                        false // Keine Badge-Art, nur Text\n                                                    );\n                                                    metadata.push({\n                                                        ...dueDateItem,\n                                                        section: 'right-inline' // Neue Section fr inline rechts (neben Status)\n                                                    });\n                                                }\n                                                \n                                                // Full-Width: Beschreibung\n                                                if (visibleCardMetadata.has('description') && task.description) {\n                                                    metadata.push({\n                                                        label: t('tasks.columns.description'),\n                                                        value: '',\n                                                        descriptionContent: task.description,\n                                                        attachmentMetadata: task.attachments || [], // Attachment-Metadaten fr Vorschau\n                                                        section: 'full'\n                                                    });\n                                                }\n                                                \n                                                // Action-Buttons\n                                                const actionButtons = (\n                                                    <div className=\"flex items-center space-x-2\">\n                                                        {/* Status-Buttons */}\n                                                        <div className=\"status-buttons\">\n                                                            {renderStatusButtons(task)}\n                                                        </div>\n                                                        {hasPermission('tasks', 'write', 'table') && (\n                                                            <button\n                                                                onClick={(e) => {\n                                                                    e.stopPropagation();\n                                                                    setSelectedTask(task);\n                                                                    setIsEditModalOpen(true);\n                                                                }}\n                                                                className=\"p-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                                                                title={t('common.edit')}\n                                                            >\n                                                                <PencilIcon className=\"h-4 w-4\" />\n                                                            </button>\n                                                        )}\n                                                        {hasPermission('tasks', 'both', 'table') && (\n                                                            <button\n                                                                onClick={(e) => {\n                                                                    e.stopPropagation();\n                                                                    handleCopyTask(task);\n                                                                }}\n                                                                className=\"p-1.5 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                                                                title={t('tasks.actions.copy')}\n                                                            >\n                                                                <DocumentDuplicateIcon className=\"h-4 w-4\" />\n                                                            </button>\n                                                        )}\n                                                    </div>\n                                                );\n                                                \n                                                return (\n                                                    <DataCard\n                                                        key={task.id}\n                                                        title={task.title}\n                                                        status={{\n                                                            label: getStatusText(task.status, 'task', t),\n                                                            color: getStatusColor(task.status, 'task'),\n                                                            onPreviousClick: undefined,\n                                                            onNextClick: undefined\n                                                        }}\n                                                        metadata={metadata}\n                                                        actions={actionButtons}\n                                                    />\n                                                );\n                                            })}\n                                        </CardGrid>\n                                    )}\n                                </div>\n                            )}\n                            \n                            {/* \"Mehr anzeigen\" Button - Desktop */}\n                            {filteredAndSortedTasks.length > displayLimit && (\n                                <div className=\"mt-4 flex justify-center\">\n                                    <button\n                                        className=\"px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-700 border border-blue-300 dark:border-gray-600 rounded-md hover:bg-blue-50 dark:hover:bg-gray-600\"\n                                        onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n                                    >\n                                        {t('common.showMore')} ({filteredAndSortedTasks.length - displayLimit} {t('common.remaining')})\n                                    </button>\n                                </div>\n                            )}\n                            \n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n            {/* Die Modals fr beide Ansichten (mobil und desktop) */}\n            <CreateTaskModal \n                isOpen={isCreateModalOpen}\n                onClose={() => setIsCreateModalOpen(false)}\n                onTaskCreated={(newTask) => {\n                    // Optimistisches Update: Neuen Task zur Liste hinzufgen statt vollstndigem Reload\n                    if (newTask != null) {\n                        setTasks(prevTasks => {\n                            const validTasks = prevTasks.filter(task => task != null);\n                            return [newTask, ...validTasks];\n                        });\n                        setIsEditModalOpen(true);\n                        setSelectedTask(newTask);\n                    }\n                }}\n            />\n            \n            {selectedTask && (\n                <EditTaskModal\n                    isOpen={isEditModalOpen}\n                    onClose={() => {\n                        setIsEditModalOpen(false);\n                        setSelectedTask(null);\n                    }}\n                    onTaskUpdated={(updatedTask) => {\n                        // Optimistisches Update: Task in Liste aktualisieren statt vollstndigem Reload\n                        if (updatedTask != null) {\n                            setTasks(prevTasks => \n                                prevTasks\n                                    .filter(task => task != null)\n                                    .map(task => \n                                        task.id === updatedTask.id ? updatedTask : task\n                                    )\n                            );\n                            setIsEditModalOpen(false);\n                            setSelectedTask(null);\n                            toast.success(t('worktime.messages.taskUpdated'));\n                        }\n                    }}\n                    task={selectedTask}\n                />\n            )}\n        </div>\n    );\n};\n\nexport default Worktracker; ","import * as React from \"react\";\nfunction CheckCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CheckCircleIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ClockIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ClockIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction EnvelopeIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(EnvelopeIcon);\nexport default ForwardRef;"],"names":["_ref","onArticleSelected","excludeArticleIds","selectedArticles","onArticleRemove","articles","setArticles","useState","selectedArticleId","setSelectedArticleId","selectedArticlePreview","setSelectedArticlePreview","loading","setLoading","error","setError","useEffect","async","filteredArticles","axiosInstance","get","API_ENDPOINTS","CEREBRO","ARTICLES","BASE","data","filter","article","includes","id","err","_axiosError$response","_axiosError$response$","console","axiosError","response","message","fetchAllArticles","_jsxs","className","children","_jsx","value","onChange","e","articleId","parseInt","target","isNaN","find","BY_ID","fetchArticleDetails","map","title","type","onClick","handleArticleConfirm","selectedArticle","disabled","content","substring","length","href","concat","slug","rel","TaskForm","_ref2","setTitle","description","setDescription","assigneeType","setAssigneeType","responsibleId","setResponsibleId","roleId","setRoleId","qualityControlId","setQualityControlId","branchId","setBranchId","dueDate","setDueDate","users","roles","branches","handleSubmit","handleClose","onArticleSelect","uploading","temporaryAttachments","onFileUpload","onRemoveAttachment","textareaRef","fileInputRef","handlePaste","handleDrop","handleDragOver","t","useTranslation","activeTab","setActiveTab","onSubmit","noValidate","_Fragment","htmlFor","required","ref","rows","onPaste","onDrop","onDragOver","placeholder","_fileInputRef$current","current","click","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","attachment","index","fileName","fileType","startsWith","file","src","URL","createObjectURL","alt","MarkdownPreview","showImagePreview","name","checked","Number","Array","isArray","user","firstName","lastName","role","branch","CerebroArticleSelector","a","XMarkIcon","ArrowPathIcon","CheckIcon","isOpen","onClose","onTaskCreated","useAuth","openSidepane","closeSidepane","useSidepane","isLargeScreen","setIsLargeScreen","window","innerWidth","setUsers","setRoles","setBranches","isMobile","setIsMobile","setSelectedArticles","setTemporaryAttachments","setUploading","useRef","fetchUsers","fetchRoles","fetchBranches","getDefaultDueDate","date","Date","setDate","getDate","toISOString","split","checkScreenSize","addEventListener","removeEventListener","localStorage","getItem","log","USERS","DROPDOWN","code","ROLES","_axiosError$response2","_axiosError$response3","BRANCHES","_axiosError$response4","_axiosError$response5","items","event","clipboardData","i","item","indexOf","preventDefault","getAsFile","handleTemporaryAttachment","stopPropagation","dataTransfer","files","newAttachment","fileSize","size","prev","insertText","cursorPos","selectionStart","textBefore","textAfter","setTimeout","newPos","selectionEnd","focus","_axiosError$response6","_axiosError$response7","handleFileUpload","handleRemoveTemporaryAttachment","attachmentToRemove","_","escapedFileName","replace","uploadText","imagePattern","RegExp","linkPattern","newDescription","qualityControl","responsible","taskData","status","post","TASKS","newTaskId","Promise","all","LINK_CARTICLE","formData","FormData","append","ATTACHMENTS","taskId","headers","uploadTemporaryAttachments","_axiosError$response8","_axiosError$response9","handleAddArticle","handleRemoveArticle","Dialog","open","Panel","Title","style","opacity","transition","pointerEvents","ClipboardDocumentIcon","svgRef","titleId","props","_objectWithoutProperties","_excluded","React","Object","assign","_task$title","_task$title2","_task$title3","_task$title4","_task$description","task","showMessage","useMessage","isLifecycleTask","autoGeneratedData","jsonMatch","match","JSON","parse","forEach","line","key","trim","keys","taskType","defaultValue","dataString","stringify","navigator","clipboard","writeText","entries","String","PaperAirplaneIcon","emailTemplate","setEmailTemplate","emailSent","setEmailSent","generating","setGenerating","EnvelopeIcon","template","_error$response","_error$response$data","resolve","_error$response2","_error$response2$data","onComplete","setFormData","registrationNumber","provider","registrationDate","notes","socialSecurityType","getSocialSecurityType","_task$title5","_task$title6","_task$title7","_task$title8","userId","extractUserId","userIdMatch","put","LIFECYCLE","SOCIAL_SECURITY","completedAt","_objectSpread","_task$qualityControl","_task$branch","onTaskUpdated","hasPermission","usePermissions","text","originalDescription","setStatus","attachments","setAttachments","uploadedDuringEdit","setUploadedDuringEdit","dateString","getTime","formatDate","confirmDelete","setConfirmDelete","linkedArticles","setLinkedArticles","canDeleteTask","handleResize","attachmentId","delete","ATTACHMENT","cleanup","fetchLinkedArticles","fetchAttachments","CARTICLES","uploadFileAndInsertLink","getTaskAttachmentUrl","_axiosError$response10","_axiosError$response11","finalDescription","imageAttachments","att","_att$fileType","existingImagePattern","existingImages","exec","push","imageUrl","imageMarkdown","test","existingImage","updatedTaskResponse","filePath","uploadedAt","url","_axiosError$response12","_axiosError$response13","handleDelete","undefined","_axiosError$response14","_axiosError$response15","_axiosError$response16","_axiosError$response17","UNLINK_CARTICLE","_axiosError$response18","_axiosError$response19","renderForm","renderAttachments","renderTemporaryAttachments","TaskDataBox","EmailTemplateBox","SocialSecurityCompletionBox","TrashIcon","responseType","Blob","link","document","createElement","setAttribute","body","appendChild","remove","_axiosError$response22","_axiosError$response23","handleDownloadAttachment","escapedAttachmentUrl","_axiosError$response20","_axiosError$response21","handleDeleteAttachment","_attachment$fileType","ListBulletIcon","WorktimeTracker","isTracking","setIsTracking","startTime","setStartTime","elapsedTime","setElapsedTime","activeWorktime","setActiveWorktime","isLoading","setIsLoading","showWorkTimeModal","setShowWorkTimeModal","statusError","setStatusError","updateTrackingStatus","useWorktime","selectedBranch","setSelectedBranch","useBranch","organization","useOrganization","isDifferentOrganization","useMemo","organizationId","checkActiveWorktime","useCallback","token","WORKTIME","ACTIVE","active","startISOString","endsWith","startTimeDate","diff","totalSeconds","Math","floor","hours","minutes","seconds","toString","padStart","intervalId","setInterval","clearInterval","handleStartTracking","alert","START","getTimezoneOffset","errorMessage","handleStopTracking","STOP","endTime","_error$response$data2","branchName","_branches$find","b","ClockIcon","confirm","force","ExclamationTriangleIcon","openWorkTimeModal","day","month","getMonth","year","getFullYear","getHours","getMinutes","getSeconds","formatStartDate","now","WorktimeModal","closeWorkTimeModal","defaultColumnOrder","TODOS_TABLE_ID","defaultCardSortDirections","tableToCardMapping","cardToTableMapping","Worktracker","location","useLocation","availableColumns","label","shortLabel","filterOnlyColumns","tasks","setTasks","searchTerm","setSearchTerm","statusFilter","setStatusFilter","filterConditions","setFilterConditions","filterLogicalOperators","setFilterLogicalOperators","activeFilterName","setActiveFilterName","selectedFilterId","setSelectedFilterId","isFilterModalOpen","setIsFilterModalOpen","sortConfig","setSortConfig","direction","isCreateModalOpen","setIsCreateModalOpen","isEditModalOpen","setIsEditModalOpen","selectedTask","setSelectedTask","copiedTask","setCopiedTask","settings","isLoadingSettings","updateColumnOrder","updateHiddenColumns","toggleColumnVisibility","isColumnVisible","updateViewMode","useTableSettings","defaultHiddenColumns","defaultViewMode","draggedColumn","setDraggedColumn","dragOverColumn","setDragOverColumn","displayLimit","setDisplayLimit","viewMode","cardSortDirections","setCardSortDirections","cardMetadataOrder","columnOrder","cardMetadata","tableCol","cardMeta","getCardMetadataFromColumnOrder","hiddenCardMetadata","hiddenTableColumns","Set","add","getHiddenCardMetadata","hiddenColumns","visibleCardMetadata","meta","has","querySelectorAll","wrapper","classList","hasLoadedRef","loadTasks","tasksWithAttachments","editTaskId","URLSearchParams","search","SAVED_FILTERS","BY_TABLE","aktuellFilter","applyFilterConditions","conditions","operators","setInitialFilter","existingFilters","Authorization","archivFilterExists","some","aktuellFilterExists","archivFilter","tableId","column","operator","createStandardFilters","handleStatusChange","newStatus","prevTasks","patch","toast","success","isResponsibleForTask","_user$roles","userRole","_userRole$role","_task$role","isQualityControlForTask","handleSort","renderStatusButtons","buttons","ArrowLeftIcon","ArrowRightIcon","getActiveFilterCount","resetFilterConditions","handleFilterChange","getStatusPriority","filteredAndSortedTasks","filtered","searchLower","toLowerCase","result","condition","conditionMet","responsibleValue","qualityControlValue","combinedValue","responsibleName","qualityControlName","taskDate","filterDate","toDateString","sorted","sort","sortableColumns","colId","columnId","valueA","valueB","MAX_SAFE_INTEGER","comparison","localeCompare","aDate","bDate","aStatusPrio","bStatusPrio","handleMoveColumn","dragIndex","hoverIndex","newColumnOrder","splice","handleDragStart","handleDragEnd","visibleColumnIds","validOrder","missingColumns","handleCopyTask","_task$qualityControl2","copiedTaskData","handleDeleteTask","info","width","height","PlusIcon","CheckCircleIcon","Squares2X2Icon","TableCellsIcon","FunnelIcon","TableColumnConfig","columns","visibleColumns","from","onToggleColumnVisibility","tableColumn","onMoveColumn","newCardOrder","dragged","newTableOrder","usedTableColumns","col","sortDirections","onSortDirectionChange","showSortDirection","buttonTitle","modalTitle","FilterPane","onApply","onReset","savedConditions","savedOperators","SavedFilterTags","onSelectFilter","onFilterChange","defaultFilterName","scope","draggable","onDragStart","onDragEnd","ArrowsUpDownIcon","colSpan","ClipboardDocumentListIcon","slice","expiryStatus","getExpiryStatus","expiryColors","getExpiryColorClasses","bgClass","borderClass","InformationCircleIcon","getStatusColor","expiryStatusForDate","expiryColorsForDate","textClass","toLocaleDateString","PencilIcon","DocumentDuplicateIcon","CardGrid","metadata","icon","BuildingOfficeIcon","section","shortenedName","UserIcon","dueDateItem","createDueDateMetadataItem","CalendarIcon","format","locale","de","descriptionContent","attachmentMetadata","actionButtons","DataCard","getStatusText","color","onPreviousClick","onNextClick","actions","prevLimit","expiryStatusForDate2","expiryColorsForDate2","CreateTaskModal","newTask","validTasks","EditTaskModal","updatedTask"],"sourceRoot":""}