{"version":3,"file":"static/js/786.6f61d742.chunk.js","mappings":"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","sources":["components/CreateRequestModal.tsx","components/EditRequestModal.tsx","components/Requests.tsx","components/WorktimeStats.tsx","components/AppDownload.tsx","pages/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../config/axios.ts'; // Importiere die konfigurierte axios-Instanz\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, ArrowPathIcon, CheckIcon } from '@heroicons/react/24/outline';\nimport MarkdownPreview from './MarkdownPreview.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface User {\n  id: number;\n  firstName: string;\n  username: string;\n  branchId?: number; // Optional, falls in manchen Kontexten nicht verfgbar\n}\n\ninterface Branch {\n  id: number;\n  name: string;\n}\n\ninterface RequestAttachment {\n  id?: number;\n  fileName: string;\n  fileType: string;\n  fileSize: number;\n  filePath?: string;\n  uploadedAt?: string;\n  file?: File; // Fr temporre Anhnge vor dem Hochladen\n}\n\ninterface Request {\n  id: number;\n  title: string;\n  status: 'approval' | 'approved' | 'to_improve' | 'denied';\n  requestedBy: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  responsible: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  branch: {\n    id: number;\n    name: string;\n  };\n  dueDate: string;\n  createTodo: boolean;\n  description?: string;\n}\n\ninterface CreateRequestModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onRequestCreated: (newRequest: Request) => void;\n}\n\nconst CreateRequestModal = ({ isOpen, onClose, onRequestCreated }: CreateRequestModalProps) => {\n  const { t } = useTranslation();\n  const { user } = useAuth();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [users, setUsers] = useState<User[]>([]);\n  const [branches, setBranches] = useState<Branch[]>([]);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    responsible_id: '',\n    branch_id: '',\n    type: 'other' as 'vacation' | 'improvement_suggestion' | 'sick_leave' | 'employment_certificate' | 'other',\n    is_private: false,\n    due_date: '',\n    create_todo: false\n  });\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [temporaryAttachments, setTemporaryAttachments] = useState<RequestAttachment[]>([]);\n  const [uploading, setUploading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  // Lade Benutzer und Niederlassungen beim ffnen des Modals\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setError(null);\n        const token = localStorage.getItem('token');\n        if (!token) {\n          setError(t('createRequest.errors.notAuthenticated'));\n          return;\n        }\n\n        console.log('Lade Daten fr CreateRequestModal...');\n        \n        try {\n          const [usersResponse, branchesResponse] = await Promise.all([\n            axiosInstance.get(API_ENDPOINTS.USERS.DROPDOWN),\n            axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE)\n          ]);\n\n          console.log('Benutzer geladen:', usersResponse.data.length);\n          console.log('Niederlassungen geladen:', branchesResponse.data.length);\n          \n          setUsers(usersResponse.data || []);\n          setBranches(branchesResponse.data || []);\n\n          // Voreinstellungen setzen\n          if (user) {\n            // 1. Verantwortlicher: Aktueller Benutzer\n            setFormData(prevData => ({ \n              ...prevData, \n              responsible_id: user.id.toString() \n            }));\n\n            // 2. Niederlassung: Aktuell gewhlte Niederlassung des Benutzers\n            // Fallback: erste verfgbare Niederlassung verwenden\n            if (branchesResponse.data && branchesResponse.data.length > 0) {\n              // Wir versuchen, die vom Benutzer zuletzt genutzte Niederlassung zu verwenden\n              // Falls nicht verfgbar, verwenden wir die erste Niederlassung\n              const userBranch = branchesResponse.data[0]?.id.toString();\n              setFormData(prevData => ({ \n                ...prevData, \n                branch_id: userBranch \n              }));\n            }\n\n            // 3. Flligkeitsdatum: Datum \"jetzt + 2 Wochen\"\n            const twoWeeksFromNow = new Date();\n            twoWeeksFromNow.setDate(twoWeeksFromNow.getDate() + 14);\n            const formattedDate = twoWeeksFromNow.toISOString().split('T')[0]; // Format: YYYY-MM-DD\n            setFormData(prevData => ({ \n              ...prevData, \n              due_date: formattedDate \n            }));\n          }\n        } catch (err) {\n          console.error('Fehler beim Laden der Daten:', err);\n          \n          // Einfachere Fehlerbehandlung ohne axios-Import\n          const axiosError = err as any;\n          if (axiosError.code === 'ERR_NETWORK') {\n            setError('Verbindung zum Server konnte nicht hergestellt werden. Bitte stellen Sie sicher, dass der Server luft.');\n          } else {\n            setError(`Fehler beim Laden der Daten: ${axiosError.response?.data?.message || axiosError.message}`);\n          }\n        }\n      } catch (err) {\n        console.error('Unerwarteter Fehler:', err);\n        setError('Ein unerwarteter Fehler ist aufgetreten');\n      }\n    };\n\n    if (isOpen) {\n      fetchData();\n    }\n  }, [isOpen]);\n\n  // berprfung der Bildschirmgre\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    // Initial prfen\n    checkScreenSize();\n    \n    // Event-Listener fr Grennderungen\n    window.addEventListener('resize', checkScreenSize);\n    \n    // Cleanup\n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  // Formatiere den Benutzernamen (erstes Wort vom Vornamen + erstes Wort vom Benutzernamen)\n  const formatUserName = (user: User) => {\n    const firstName = user.firstName?.split(' ')[0];\n    const username = user.username?.split(' ')[0];\n    \n    // Wenn kein firstName vorhanden ist, nur username anzeigen\n    if (!firstName) {\n      return username || t('createRequest.errors.unknownUser');\n    }\n    \n    // Standard: firstName (username)\n    return `${firstName} (${username})`;\n  };\n\n  const handlePaste = async (event: React.ClipboardEvent) => {\n    const items = event.clipboardData.items;\n    \n    for (let i = 0; i < items.length; i++) {\n      const item = items[i];\n      \n      // Prfen, ob das eingefgte Element ein Bild ist\n      if (item.type.indexOf('image') === 0) {\n        event.preventDefault(); // Standardeingabe verhindern\n        \n        const file = item.getAsFile();\n        if (file) {\n          await handleTemporaryAttachment(file);\n        }\n        return;\n      }\n    }\n  };\n\n  const handleDrop = async (event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n    \n    if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\n      const file = event.dataTransfer.files[0];\n      await handleTemporaryAttachment(file);\n    }\n  };\n\n  const handleDragOver = (event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  const handleTemporaryAttachment = async (file: File) => {\n    setUploading(true);\n    setError(null);\n\n    try {\n      // Erstelle einen temporren Anhang\n      const newAttachment: RequestAttachment = {\n        fileName: file.name,\n        fileType: file.type,\n        fileSize: file.size,\n        file: file // Speichern der Datei fr spteren Upload\n      };\n      \n      setTemporaryAttachments(prev => [...prev, newAttachment]);\n\n      // Fge Markdown-Link ins Textarea ein (fr Card-Anzeige)\n      // Bilder werden zustzlich als groe Vorschau unter dem Textarea angezeigt\n      let insertText = '';\n      if (file.type.startsWith('image/')) {\n        // Hinweis: Wir verwenden hier den Platzhalter, da die Datei erst nach dem Erstellen hochgeladen wird\n        // Die tatschliche URL wird nach dem erfolgreichen Upload im Backend gesetzt\n        insertText = `\\n![${file.name}](${t('createRequest.form.uploadAfterCreate')})\\n`;\n      } else {\n        // Fr andere Dateien einen temporren Platzhalter\n        insertText = `\\n[${file.name}](${t('createRequest.form.uploadAfterCreate')})\\n`;\n      }\n      \n      // Fge den Link an der aktuellen Cursorposition ein\n      if (textareaRef.current) {\n        const cursorPos = textareaRef.current.selectionStart;\n        const textBefore = formData.description.substring(0, cursorPos);\n        const textAfter = formData.description.substring(cursorPos);\n        \n        setFormData({\n          ...formData,\n          description: textBefore + insertText + textAfter\n        });\n        \n        // Setze den Cursor hinter den eingefgten Link\n        setTimeout(() => {\n          if (textareaRef.current) {\n            const newPos = cursorPos + insertText.length;\n            textareaRef.current.selectionStart = newPos;\n            textareaRef.current.selectionEnd = newPos;\n            textareaRef.current.focus();\n          }\n        }, 0);\n      } else {\n        setFormData({\n          ...formData,\n          description: formData.description + insertText\n        });\n      }\n    } catch (err) {\n      console.error('Fehler beim Verarbeiten der Datei:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.errors.unknownError'));\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n    if (!files || files.length === 0) return;\n\n    const file = files[0];\n    await handleTemporaryAttachment(file);\n    \n    // Zurcksetzen des Datei-Inputs\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleRemoveTemporaryAttachment = (index: number) => {\n    // Hole den zu entfernenden Anhang\n    const attachmentToRemove = temporaryAttachments[index];\n    \n    if (attachmentToRemove) {\n      // Entferne den Anhang aus der Liste\n      setTemporaryAttachments(prev => prev.filter((_, i) => i !== index));\n      \n      // Entferne auch den Anhang aus der Beschreibung\n      if (attachmentToRemove.fileName) {\n        // Je nach Dateityp knnen verschiedene Markdown-Formate in der Beschreibung sein\n        const uploadAfterCreateText = t('createRequest.form.uploadAfterCreate');\n        const imagePattern = new RegExp(`!\\\\[${attachmentToRemove.fileName}\\\\]\\\\(${uploadAfterCreateText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n        const linkPattern = new RegExp(`\\\\[${attachmentToRemove.fileName}\\\\]\\\\(${uploadAfterCreateText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n        \n        // Ersetze alle Vorkommen durch leeren Text\n        const newDescription = formData.description\n          .replace(imagePattern, '')\n          .replace(linkPattern, '')\n          // Entferne berschssige Leerzeilen, die durch das Entfernen entstehen knnten\n          .replace(/\\n{3,}/g, '\\n\\n');\n        \n        setFormData({\n          ...formData,\n          description: newDescription\n        });\n      }\n    }\n  };\n\n  const uploadTemporaryAttachments = async (requestId: number) => {\n    if (temporaryAttachments.length === 0) return;\n    \n    try {\n      setLoading(true);\n      \n      // Upload jeder temporren Datei\n      for (const attachment of temporaryAttachments) {\n        if (!attachment.file) continue;\n        \n        const formData = new FormData();\n        formData.append('file', attachment.file);\n        \n        await axiosInstance.post(\n          API_ENDPOINTS.REQUESTS.ATTACHMENTS(requestId),\n          formData,\n          {\n            headers: {\n              'Content-Type': 'multipart/form-data',\n            },\n          }\n        );\n      }\n      \n      console.log(t('createRequest.messages.attachmentsUploaded', { count: temporaryAttachments.length }));\n    } catch (err) {\n      console.error('Fehler beim Hochladen der Anhnge:', err);\n      // Wir zeigen hier keinen Fehler, da der Request bereits erstellt wurde\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setLoading(true);\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) throw new Error(t('createRequest.errors.notAuthenticated'));\n      if (!user?.id) throw new Error(t('createRequest.errors.unknownUser'));\n\n      // Validiere die IDs\n      const responsibleId = parseInt(formData.responsible_id);\n      const branchId = parseInt(formData.branch_id);\n\n      if (isNaN(responsibleId) || isNaN(branchId)) {\n        throw new Error(t('createRequest.errors.invalidIds'));\n      }\n\n      const response = await axiosInstance.post(API_ENDPOINTS.REQUESTS.BASE, \n        {\n          title: formData.title,\n          description: formData.description || '',\n          responsible_id: responsibleId,\n          branch_id: branchId,\n          requested_by_id: user.id,\n          type: formData.type,\n          is_private: formData.is_private,\n          due_date: formData.due_date || null,\n          create_todo: formData.create_todo,\n          status: 'approval'\n        }\n      );\n\n      if (response.status !== 201) {\n        throw new Error(t('createRequest.errors.createError'));\n      }\n\n      // Lade temporre Anhnge hoch, falls vorhanden\n      await uploadTemporaryAttachments(response.data.id);\n\n      // bergebe den neuen Request an den Callback\n      onRequestCreated(response.data);\n      onClose();\n      setFormData({\n        title: '',\n        description: '',\n        responsible_id: '',\n        branch_id: '',\n        type: 'other',\n        is_private: false,\n        due_date: '',\n        create_todo: false\n      });\n      setTemporaryAttachments([]);\n    } catch (err) {\n      console.error('Create Request Error:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.errors.createError'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderTemporaryAttachments = () => {\n    if (temporaryAttachments.length === 0) return null;\n    \n    return (\n      <div className=\"mt-2\">\n        <ul className=\"flex flex-wrap gap-2\">\n          {temporaryAttachments.map((attachment, index) => (\n            <li key={index} className=\"inline-flex items-center bg-gray-100 rounded-md px-2 py-1 relative group\">\n              <span className=\"text-sm font-medium text-gray-800\">\n                {attachment.fileName}\n              </span>\n              <div className=\"flex ml-2\">\n                <div className=\"relative group ml-1\">\n                  <button\n                    type=\"button\"\n                    onClick={() => handleRemoveTemporaryAttachment(index)}\n                    className=\"text-red-600 hover:text-red-900\"\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                    {t('createRequest.form.remove')}\n                  </div>\n                </div>\n              </div>\n              {/* Tooltip fr Bildvorschau bei Bild-Dateien */}\n              {attachment.fileType.startsWith('image/') && attachment.file && (\n                <div className=\"absolute z-10 bg-white p-2 rounded-md shadow-lg -top-32 left-0 border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none\">\n                  <img \n                    src={URL.createObjectURL(attachment.file)}\n                    alt={attachment.fileName}\n                    className=\"max-w-[200px] max-h-[150px] object-contain\"\n                  />\n                </div>\n              )}\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  };\n\n  // Rendere groe Bildvorschauen fr Bilder (nicht PDFs)\n  const renderImagePreviews = () => {\n    const temporaryImageAttachments = temporaryAttachments.filter(att => \n      att.fileType?.startsWith('image/') && att.file\n    );\n    \n    if (temporaryImageAttachments.length === 0) return null;\n    \n    return (\n      <div className=\"flex flex-col gap-3 mt-2\">\n        {temporaryImageAttachments.map((attachment, index) => (\n          <div key={`temp-img-${index}`} className=\"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-700/50\">\n            <img \n              src={URL.createObjectURL(attachment.file!)}\n              alt={attachment.fileName}\n              className=\"w-full h-auto max-h-96 object-contain\"\n              style={{ display: 'block' }}\n            />\n          </div>\n        ))}\n      </div>\n    );\n  };\n\n  if (!isOpen) return null;\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('createRequest.title')}\n              </Dialog.Title>\n              <button\n                onClick={onClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <div className=\"p-4\">\n              {error && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {error}\n                </div>\n              )}\n\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.title')}</label>\n                  <input\n                    type=\"text\"\n                    required\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                    value={formData.title}\n                    onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                  />\n                </div>\n\n                <div>\n                  <label htmlFor=\"description_request_create\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    {t('createRequest.form.description')}\n                  </label>\n                  <div className=\"relative\">\n                    <textarea\n                      ref={textareaRef}\n                      id=\"description_request_create\"\n                      rows={6}\n                      className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                      value={formData.description}\n                      onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                      onPaste={handlePaste}\n                      onDrop={handleDrop}\n                      onDragOver={handleDragOver}\n                      placeholder={t('createRequest.form.descriptionPlaceholder')}\n                    />\n                    {/* Heftklammer-Icon zum Hinzufgen von Dateien */}\n                    <div className=\"relative group absolute bottom-2 left-2\">\n                      <button\n                        type=\"button\"\n                        onClick={() => fileInputRef.current?.click()}\n                        className=\"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none\"\n                      >\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n                        </svg>\n                      </button>\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                        {t('createRequest.form.addFile')}\n                      </div>\n                    </div>\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      onChange={handleFileUpload}\n                      className=\"hidden\"\n                    />\n                    {uploading && (\n                      <div className=\"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-70 dark:bg-opacity-70\">\n                        <span className=\"text-sm text-gray-600 dark:text-gray-300\">{t('createRequest.form.uploading')}</span>\n                      </div>\n                    )}\n                  </div>\n                  {renderTemporaryAttachments()}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.responsible')}</label>\n                  <select\n                    required\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                    value={formData.responsible_id}\n                    onChange={(e) => setFormData({ ...formData, responsible_id: e.target.value })}\n                  >\n                    <option value=\"\">{t('createRequest.form.select')}</option>\n                    {Array.isArray(users) && users.map(user => (\n                      <option key={user.id} value={user.id}>\n                        {formatUserName(user)}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.branch')}</label>\n                  <select\n                    required\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                    value={formData.branch_id}\n                    onChange={(e) => setFormData({ ...formData, branch_id: e.target.value })}\n                  >\n                    <option value=\"\">{t('createRequest.form.select')}</option>\n                    {Array.isArray(branches) && branches.map(branch => (\n                      <option key={branch.id} value={branch.id}>\n                        {branch.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.type')}</label>\n                  <select\n                    required\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                    value={formData.type}\n                    onChange={(e) => setFormData({ ...formData, type: e.target.value as any })}\n                  >\n                    <option value=\"vacation\">{t('requests.types.vacation')}</option>\n                    <option value=\"improvement_suggestion\">{t('requests.types.improvement_suggestion')}</option>\n                    <option value=\"sick_leave\">{t('requests.types.sick_leave')}</option>\n                    <option value=\"employment_certificate\">{t('requests.types.employment_certificate')}</option>\n                    <option value=\"other\">{t('requests.types.other')}</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.dueDate')}</label>\n                  <input\n                    type=\"date\"\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                    value={formData.due_date}\n                    onChange={(e) => setFormData({ ...formData, due_date: e.target.value })}\n                  />\n                </div>\n\n                <div className=\"flex items-center\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"is_private\"\n                    className=\"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:text-gray-300\"\n                    checked={formData.is_private}\n                    onChange={(e) => setFormData({ ...formData, is_private: e.target.checked })}\n                  />\n                  <label htmlFor=\"is_private\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\n                    {t('createRequest.form.isPrivate')}\n                  </label>\n                </div>\n\n                <div className=\"flex items-center\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"create_todo\"\n                    className=\"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:text-gray-300\"\n                    checked={formData.create_todo}\n                    onChange={(e) => setFormData({ ...formData, create_todo: e.target.checked })}\n                  />\n                  <label htmlFor=\"create_todo\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\n                    {t('createRequest.form.createTodo')}\n                  </label>\n                </div>\n\n                <div className=\"flex justify-end pt-4 gap-2\">\n                  <div className=\"relative group\">\n                    <button\n                      type=\"button\"\n                      onClick={onClose}\n                      className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                    >\n                      <XMarkIcon className=\"h-5 w-5\" />\n                    </button>\n                    <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                      {t('createRequest.form.cancel')}\n                    </div>\n                  </div>\n                  <div className=\"relative group\">\n                    <button\n                      type=\"submit\"\n                      className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                      disabled={loading}\n                    >\n                      {loading ? (\n                        <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                      ) : (\n                        <CheckIcon className=\"h-5 w-5\" />\n                      )}\n                    </button>\n                    <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                      {loading ? t('createRequest.form.creating') : t('createRequest.form.create')}\n                    </div>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {/* Hinweis: onClick entfernt, da Backdrop pointer-events: none hat, damit Hauptinhalt interaktiv bleibt */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('createRequest.title')}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {error && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {error}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\" data-onboarding=\"request-form\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.title')}</label>\n              <input\n                type=\"text\"\n                required\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"description_request_create\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                {t('createRequest.form.description')}\n              </label>\n              <div className=\"relative\">\n                <textarea\n                  ref={textareaRef}\n                  id=\"description_request_create\"\n                  rows={6}\n                  className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                  onPaste={handlePaste}\n                  onDrop={handleDrop}\n                  onDragOver={handleDragOver}\n                  placeholder={t('createRequest.form.descriptionPlaceholder')}\n                />\n                {/* Heftklammer-Icon zum Hinzufgen von Dateien */}\n                <div className=\"relative group absolute bottom-2 left-2\">\n                  <button\n                    type=\"button\"\n                    onClick={() => fileInputRef.current?.click()}\n                    className=\"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none\"\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n                    </svg>\n                  </button>\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                    {t('createRequest.form.addFile')}\n                  </div>\n                </div>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  onChange={handleFileUpload}\n                  className=\"hidden\"\n                />\n                {uploading && (\n                  <div className=\"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-70 dark:bg-opacity-70\">\n                    <span className=\"text-sm text-gray-600 dark:text-gray-300\">{t('createRequest.form.uploading')}</span>\n                  </div>\n                )}\n              </div>\n              {renderTemporaryAttachments()}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.responsible')}</label>\n              <select\n                required\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                value={formData.responsible_id}\n                onChange={(e) => setFormData({ ...formData, responsible_id: e.target.value })}\n              >\n                <option value=\"\">{t('createRequest.form.select')}</option>\n                {Array.isArray(users) && users.map(user => (\n                  <option key={user.id} value={user.id}>\n                    {formatUserName(user)}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.branch')}</label>\n              <select\n                required\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                value={formData.branch_id}\n                onChange={(e) => setFormData({ ...formData, branch_id: e.target.value })}\n              >\n                <option value=\"\">{t('createRequest.form.select')}</option>\n                {Array.isArray(branches) && branches.map(branch => (\n                  <option key={branch.id} value={branch.id}>\n                    {branch.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.type')}</label>\n              <select\n                required\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                value={formData.type}\n                onChange={(e) => setFormData({ ...formData, type: e.target.value as any })}\n              >\n                <option value=\"vacation\">{t('requests.types.vacation')}</option>\n                <option value=\"improvement_suggestion\">{t('requests.types.improvement_suggestion')}</option>\n                <option value=\"sick_leave\">{t('requests.types.sick_leave')}</option>\n                <option value=\"employment_certificate\">{t('requests.types.employment_certificate')}</option>\n                <option value=\"other\">{t('requests.types.other')}</option>\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.dueDate')}</label>\n              <input\n                type=\"date\"\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                value={formData.due_date}\n                onChange={(e) => setFormData({ ...formData, due_date: e.target.value })}\n              />\n            </div>\n\n            <div className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                id=\"is_private_sidepane\"\n                className=\"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:text-gray-300\"\n                checked={formData.is_private}\n                onChange={(e) => setFormData({ ...formData, is_private: e.target.checked })}\n              />\n              <label htmlFor=\"is_private_sidepane\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\n                {t('createRequest.form.isPrivate')}\n              </label>\n            </div>\n\n            <div className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                id=\"create_todo_sidepane\"\n                className=\"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:text-gray-300\"\n                checked={formData.create_todo}\n                onChange={(e) => setFormData({ ...formData, create_todo: e.target.checked })}\n              />\n              <label htmlFor=\"create_todo_sidepane\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\n                {t('createRequest.form.createTodo')}\n              </label>\n            </div>\n\n            <div className=\"flex justify-end pt-4 gap-2\">\n              <div className=\"relative group\">\n                <button\n                  type=\"button\"\n                  onClick={onClose}\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                >\n                  <XMarkIcon className=\"h-5 w-5\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {t('createRequest.form.cancel')}\n                </div>\n              </div>\n              <div className=\"relative group\">\n                <button\n                  type=\"submit\"\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                  disabled={loading}\n                >\n                  {loading ? (\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                  ) : (\n                    <CheckIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {loading ? t('createRequest.form.creating') : t('createRequest.form.create')}\n                </div>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default CreateRequestModal; ","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS, getRequestAttachmentUrl } from '../config/api.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, TrashIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport MarkdownPreview from './MarkdownPreview.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface Request {\n  id: number;\n  title: string;\n  status: 'approval' | 'approved' | 'to_improve' | 'denied';\n  type?: 'vacation' | 'improvement_suggestion' | 'sick_leave' | 'employment_certificate' | 'other';\n  isPrivate?: boolean;\n  requestedBy: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  responsible: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  branch: {\n    id: number;\n    name: string;\n  };\n  dueDate: string;\n  createTodo: boolean;\n  description?: string;\n  attachments?: RequestAttachment[];\n}\n\ninterface EditRequestModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onRequestUpdated: (updatedRequest: Request) => void;\n  request: {\n    id: number;\n    title: string;\n    description?: string;\n    responsible: {\n      id: number;\n    };\n    branch: {\n      id: number;\n    };\n    dueDate: string | null;\n    createTodo: boolean;\n    attachments?: RequestAttachment[];\n  };\n}\n\ninterface User {\n  id: number;\n  firstName: string;\n  username: string;\n}\n\ninterface Branch {\n  id: number;\n  name: string;\n}\n\ninterface RequestAttachment {\n  id?: number;\n  fileName: string;\n  fileType: string;\n  fileSize: number;\n  filePath?: string;\n  uploadedAt?: string;\n  file?: File; // Fr temporre Anhnge vor dem Hochladen\n}\n\nconst EditRequestModal = ({\n  isOpen,\n  onClose,\n  onRequestUpdated,\n  request\n}: EditRequestModalProps) => {\n  const { t, i18n } = useTranslation();\n  const { user } = useAuth();\n  \n  // Entferne Bild-Markdown-Links aus der Beschreibung (fr Textarea-Anzeige)\n  const removeImageMarkdown = (text: string): string => {\n    if (!text) return '';\n    // Entferne alle Bild-Markdown-Links: ![alt](url)\n    return text.replace(/!\\[([^\\]]*)\\]\\([^)]+\\)/g, '').trim();\n  };\n  \n  // Debug: Log aktuelle Sprache und verfgbare bersetzungen\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'development') {\n      console.log('EditRequestModal - Aktuelle Sprache:', i18n.language);\n      console.log('EditRequestModal - Verfgbare Sprachen:', i18n.languages);\n      console.log('EditRequestModal - createRequest.editRequest.title:', t('createRequest.editRequest.title'));\n      console.log('EditRequestModal - createRequest.editRequest.form.title:', t('createRequest.editRequest.form.title'));\n    }\n  }, [i18n.language, t]);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [title, setTitle] = useState(request.title);\n  const [description, setDescription] = useState(removeImageMarkdown(request.description || ''));\n  const [responsibleId, setResponsibleId] = useState(request.responsible.id);\n  const [branchId, setBranchId] = useState(request.branch.id);\n  const [type, setType] = useState<'vacation' | 'improvement_suggestion' | 'sick_leave' | 'employment_certificate' | 'other'>(request.type || 'other');\n  const [isPrivate, setIsPrivate] = useState(request.isPrivate || false);\n  const [dueDate, setDueDate] = useState(request.dueDate ? request.dueDate.split('T')[0] : '');\n  const [createTodo, setCreateTodo] = useState(request.createTodo);\n  const [users, setUsers] = useState<User[]>([]);\n  const [branches, setBranches] = useState<Branch[]>([]);\n  const [error, setError] = useState<string | null>(null);\n  const [confirmDelete, setConfirmDelete] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [attachments, setAttachments] = useState<RequestAttachment[]>(request.attachments || []);\n  const [uploading, setUploading] = useState(false);\n  const [temporaryAttachments, setTemporaryAttachments] = useState<RequestAttachment[]>([]);\n  // Liste der whrend der Bearbeitung hochgeladenen Attachments (fr Cleanup bei Abbrechen)\n  const [uploadedDuringEdit, setUploadedDuringEdit] = useState<number[]>([]);\n  \n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  \n  const { hasPermission } = usePermissions();\n  const canDeleteRequest = hasPermission('requests', 'both', 'table');\n\n  // Cleanup: Lsche hochgeladene Attachments wenn Modal ohne Speichern geschlossen wird\n  useEffect(() => {\n    if (!isOpen && uploadedDuringEdit.length > 0) {\n      // Modal wurde geschlossen - lsche alle whrend der Bearbeitung hochgeladenen Attachments\n      const cleanup = async () => {\n        for (const attachmentId of uploadedDuringEdit) {\n          try {\n            await axiosInstance.delete(API_ENDPOINTS.REQUESTS.ATTACHMENT(request.id, attachmentId));\n            console.log(`Attachment ${attachmentId} gelscht (Modal ohne Speichern geschlossen)`);\n          } catch (err) {\n            console.error(`Fehler beim Lschen von Attachment ${attachmentId}:`, err);\n          }\n        }\n        setUploadedDuringEdit([]);\n      };\n      cleanup();\n    }\n  }, [isOpen, uploadedDuringEdit, request.id]);\n\n  // Responsive Design: berwache Fensterbreite\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n\n    // Initialer Check\n    checkScreenSize();\n\n    // Event Listener fr Grennderungen\n    window.addEventListener('resize', checkScreenSize);\n\n    // Cleanup\n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchData();\n      fetchAttachments();\n      // Aktualisiere State wenn Request-Props sich ndern\n      setTitle(request.title);\n      setDescription(removeImageMarkdown(request.description || ''));\n      setResponsibleId(request.responsible.id);\n      setBranchId(request.branch.id);\n      setType((request as any).type || 'other');\n      setIsPrivate((request as any).isPrivate || false);\n      setDueDate(request.dueDate ? request.dueDate.split('T')[0] : '');\n      setCreateTodo(request.createTodo);\n    }\n  }, [isOpen, request]);\n\n  const fetchData = async () => {\n    try {\n      setError(null);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError(t('createRequest.editRequest.errors.notAuthenticated'));\n        return;\n      }\n\n      const [usersResponse, branchesResponse] = await Promise.all([\n        axiosInstance.get(API_ENDPOINTS.USERS.DROPDOWN),\n        axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE)\n      ]);\n\n      setUsers(usersResponse.data || []);\n      setBranches(branchesResponse.data || []);\n    } catch (err) {\n      console.error('Unerwarteter Fehler:', err);\n      \n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      if (axiosError.code === 'ERR_NETWORK') {\n        setError(t('createRequest.editRequest.errors.connectionError'));\n      } else {\n        setError(`${t('createRequest.editRequest.errors.loadError')}: ${axiosError.response?.data?.message || axiosError.message}`);\n      }\n    }\n  };\n\n  const fetchAttachments = async () => {\n    try {\n      setError(null);\n      const response = await axiosInstance.get(API_ENDPOINTS.REQUESTS.ATTACHMENTS(request.id));\n      setAttachments(response.data || []);\n    } catch (err) {\n      console.error('Fehler beim Laden der Anhnge:', err);\n      // Setze eine leere Anhangliste im Fehlerfall, damit die Komponente nicht abstrzt\n      setAttachments([]);\n      \n      // Zeige einen benutzerfreundlichen Fehler an, aber lass die Komponente weiterlaufen\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      const errorMessage = axiosError.response?.data?.message || axiosError.message;\n      console.warn(`Anhnge konnten nicht geladen werden: ${errorMessage}`);\n      // Setze keinen Fehler in state, damit der Dialog trotzdem nutzbar bleibt\n      // Nur Warnung in der Konsole\n    }\n  };\n\n  const handlePaste = async (event: React.ClipboardEvent) => {\n    const items = event.clipboardData.items;\n    \n    for (let i = 0; i < items.length; i++) {\n      const item = items[i];\n      \n      // Prfen, ob das eingefgte Element ein Bild ist\n      if (item.type.indexOf('image') === 0) {\n        event.preventDefault(); // Standardeingabe verhindern\n        \n        const file = item.getAsFile();\n        if (file) {\n          await uploadFileAndInsertLink(file);\n        }\n        return;\n      }\n    }\n  };\n\n  const handleDrop = async (event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n    \n    if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\n      const file = event.dataTransfer.files[0];\n      // Bei Edit-Modals sofort hochladen (wie bei Tasks)\n      await uploadFileAndInsertLink(file);\n    }\n  };\n\n  const handleDragOver = (event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  const uploadFileAndInsertLink = async (file: File) => {\n    setUploading(true);\n    setError(null);\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n\n      const response = await axiosInstance.post(\n        API_ENDPOINTS.REQUESTS.ATTACHMENTS(request.id),\n        formData,\n        {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        }\n      );\n\n      const newAttachment = response.data;\n      setAttachments([...attachments, newAttachment]);\n      // Merke diese Attachment-ID fr mgliches Cleanup\n      setUploadedDuringEdit(prev => [...prev, newAttachment.id]);\n\n      // Fr Bilder: KEIN Markdown-Link ins Textarea einfgen (wird beim Speichern automatisch hinzugefgt)\n      // Fr andere Dateien: Link ins Textarea einfgen\n      if (!newAttachment.fileType.startsWith('image/')) {\n        const insertText = `\\n[${newAttachment.fileName}](${getRequestAttachmentUrl(request.id, newAttachment.id)})\\n`;\n        \n        // Fge den Link an der aktuellen Cursorposition ein\n        if (textareaRef.current) {\n          const cursorPos = textareaRef.current.selectionStart;\n          const textBefore = description.substring(0, cursorPos);\n          const textAfter = description.substring(cursorPos);\n          \n          setDescription(textBefore + insertText + textAfter);\n          \n          // Setze den Cursor hinter den eingefgten Link\n          setTimeout(() => {\n            if (textareaRef.current) {\n              const newPos = cursorPos + insertText.length;\n              textareaRef.current.selectionStart = newPos;\n              textareaRef.current.selectionEnd = newPos;\n              textareaRef.current.focus();\n            }\n          }, 0);\n        } else {\n          setDescription(description + insertText);\n        }\n      }\n\n      // Erstelle ein Element fr das Vorschaubild und fge es dem Dokument hinzu\n      const img = document.createElement('img');\n      img.src = getRequestAttachmentUrl(request.id, newAttachment.id);\n      img.alt = newAttachment.fileName;\n      img.classList.add('hidden'); // Verstecken\n\n      document.body.appendChild(img);\n\n      // Warte bis das Bild geladen ist und bestimme dann seine Dimensionen\n      img.onload = () => {\n        document.body.removeChild(img);\n\n        // Je nach Gre entscheide, ob ein groes oder kleines Bild eingefgt wird\n      }\n    } catch (err) {\n      console.error('Fehler beim Hochladen der Datei:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n    if (!files || files.length === 0) return;\n\n    const file = files[0];\n    // Bei Edit-Modals sofort hochladen (wie bei Tasks)\n    await uploadFileAndInsertLink(file);\n    \n    // Zurcksetzen des Datei-Inputs\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleDeleteAttachment = async (attachmentId: number) => {\n    try {\n      setError(null);\n      \n      // Finde den zu entfernenden Anhang\n      const attachmentToRemove = attachments.find(a => a.id === attachmentId);\n      \n      if (attachmentToRemove) {\n        await axiosInstance.delete(API_ENDPOINTS.REQUESTS.ATTACHMENT(request.id, attachmentId));\n        \n        // Entferne den Anhang aus der Liste\n        setAttachments(attachments.filter(attachment => attachment.id !== attachmentId));\n        \n        // Entferne auch die Verweise im Beschreibungstext\n        if (attachmentToRemove.fileName) {\n          // Erzeuge URL-Muster fr diesen Anhang\n          const escapedFileName = attachmentToRemove.fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n          \n          // Suche nach Bild- und Link-Markdown\n          const imagePattern = new RegExp(`!\\\\[(.*?)\\\\]\\\\(${escapedFileName}\\\\)`, 'g');\n          const linkPattern = new RegExp(`\\\\[(.*?)\\\\]\\\\(${escapedFileName}\\\\)`, 'g');\n          \n          // Bereinige die Beschreibung\n          const newDescription = description\n            .replace(imagePattern, '')\n            .replace(linkPattern, '')\n            // Entferne berschssige Leerzeilen, die durch das Entfernen entstehen knnten\n            .replace(/\\n{3,}/g, '\\n\\n');\n          \n          setDescription(newDescription);\n        }\n      }\n    } catch (err) {\n      console.error('Fehler beim Lschen des Anhangs:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    }\n  };\n\n  const handleDownloadAttachment = async (attachment: RequestAttachment) => {\n    try {\n      if (attachment.id === undefined) {\n        throw new Error('Anhang-ID fehlt');\n      }\n      const response = await axiosInstance.get(\n        API_ENDPOINTS.REQUESTS.ATTACHMENT(request.id, attachment.id),\n        { responseType: 'blob' }\n      );\n      \n      // Blob-URL erstellen und Download auslsen\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', attachment.fileName);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n    } catch (err) {\n      console.error('Fehler beim Herunterladen des Anhangs:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setLoading(true);\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) throw new Error(t('createRequest.editRequest.errors.notAuthenticated'));\n      \n      // Keine Validierung notwendig, da bereits Zahlen vorliegen\n      // Direkte Verwendung der Zustnde\n\n      // Verwende description (vom Textarea) als Basis\n      // Fge Markdown-Links fr Bilder automatisch hinzu (falls noch nicht vorhanden)\n      const originalDescription = request.description || '';\n      let finalDescription = description || ''; // WICHTIG: Verwende description als Basis, nicht originalDescription\n      const imageAttachments = attachments.filter(att => att.fileType?.startsWith('image/') && att.id);\n      \n      // Extrahiere bereits vorhandene Bilder aus originalDescription (falls vorhanden)\n      const existingImagePattern = /!\\[([^\\]]*)\\]\\([^)]+\\)/g;\n      const existingImages: string[] = [];\n      let match;\n      if (originalDescription) {\n        while ((match = existingImagePattern.exec(originalDescription)) !== null) {\n          existingImages.push(match[0]);\n        }\n      }\n      \n      // Fge alle Bilder hinzu (sowohl neue als auch bereits vorhandene)\n      for (const attachment of imageAttachments) {\n        const imageUrl = getRequestAttachmentUrl(request.id, attachment.id!);\n        const imageMarkdown = `![${attachment.fileName}](${imageUrl})`;\n        \n        // Prfe, ob dieser Bild-Link bereits in der Beschreibung vorhanden ist\n        const escapedFileName = attachment.fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n        const imagePattern = new RegExp(`!\\\\[${escapedFileName}\\\\]\\\\([^)]+\\\\)`, 'g');\n        \n        if (!imagePattern.test(finalDescription)) {\n          // Bild-Link ist noch nicht in der Beschreibung, fge ihn hinzu\n          finalDescription = finalDescription ? `${finalDescription}\\n${imageMarkdown}` : imageMarkdown;\n        }\n      }\n      \n      // Fge auch bereits vorhandene Bilder hinzu, die nicht in attachments sind (z.B. von anderen Quellen)\n      for (const existingImage of existingImages) {\n        if (!finalDescription.includes(existingImage)) {\n          finalDescription = finalDescription ? `${finalDescription}\\n${existingImage}` : existingImage;\n        }\n      }\n\n      await axiosInstance.put(API_ENDPOINTS.REQUESTS.BY_ID(request.id), {\n        title: title,\n        description: finalDescription,\n        responsible_id: responsibleId,\n        branch_id: branchId,\n        type: type,\n        is_private: isPrivate,\n        due_date: dueDate || null,\n        create_todo: createTodo,\n      });\n\n      // Hole den aktualisierten Request vom Server (inkl. Attachments)\n      const updatedResponse = await axiosInstance.get(API_ENDPOINTS.REQUESTS.BY_ID(request.id));\n      \n      // Attachments sind bereits in der Response enthalten\n      // URL-Generierung fr Attachments hinzufgen\n      if (updatedResponse.data.attachments) {\n        updatedResponse.data.attachments = updatedResponse.data.attachments.map((att: any) => ({\n          id: att.id,\n          fileName: att.fileName,\n          fileType: att.fileType,\n          fileSize: att.fileSize,\n          filePath: att.filePath,\n          uploadedAt: att.uploadedAt,\n          url: getRequestAttachmentUrl(request.id, att.id)\n        }));\n      } else {\n        updatedResponse.data.attachments = [];\n      }\n\n      // Erfolgreiches Update - Schliee das Modal\n      // Reset uploadedDuringEdit da erfolgreich gespeichert\n      setUploadedDuringEdit([]);\n      onClose();\n      if (onRequestUpdated) {\n        // bergebe den aktualisierten Request an den Callback\n        onRequestUpdated(updatedResponse.data);\n      }\n    } catch (err) {\n      console.error('Fehler beim Aktualisieren des Requests:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    if (!confirmDelete) {\n      setConfirmDelete(true);\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      \n      await axiosInstance.delete(API_ENDPOINTS.REQUESTS.BY_ID(request.id));\n\n      // Beim Lschen brauchen wir keinen Request-Update, aber der Callback wird fr Konsistenz aufgerufen\n      // Der Parent muss die Liste aktualisieren (wird in Requests.tsx implementiert)\n      onClose();\n    } catch (err) {\n      console.error('Delete Error:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRemoveTemporaryAttachment = (index: number) => {\n    // Finde den zu entfernenden Anhang\n    const attachmentToRemove = temporaryAttachments[index];\n    \n    if (attachmentToRemove) {\n      // Entferne den Anhang aus dem temporaryAttachments-Array\n      setTemporaryAttachments(temporaryAttachments.filter((_, i) => i !== index));\n      \n      // Entferne auch den Verweis im Beschreibungstext\n      if (attachmentToRemove.fileName) {\n        // Suche nach Bild- und Link-Markdown mit dem Dateinamen\n        const escapedFileName = attachmentToRemove.fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n        const uploadText = t('createRequest.editRequest.form.uploadAfterCreate');\n        const imagePattern = new RegExp(`!\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n        const linkPattern = new RegExp(`\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n        \n        // Bereinige die Beschreibung\n        const newDescription = description\n          .replace(imagePattern, '')\n          .replace(linkPattern, '')\n          // Entferne berschssige Leerzeilen, die durch das Entfernen entstehen knnten\n          .replace(/\\n{3,}/g, '\\n\\n');\n        \n        setDescription(newDescription);\n      }\n    }\n  };\n\n  const handleTemporaryAttachment = async (file: File) => {\n    setUploading(true);\n    setError(null);\n\n    try {\n      // Erstelle einen temporren Anhang\n      const newAttachment: RequestAttachment = {\n        fileName: file.name,\n        fileType: file.type,\n        fileSize: file.size,\n        file: file // Speichern der Datei fr spteren Upload\n      };\n      \n      setTemporaryAttachments(prev => [...prev, newAttachment]);\n\n      // Fr Bilder: KEIN Markdown-Link ins Textarea einfgen (wird beim Speichern automatisch hinzugefgt)\n      // Fr andere Dateien: Link ins Textarea einfgen\n      if (!file.type.startsWith('image/')) {\n        const insertText = `\\n[${file.name}](${t('createRequest.editRequest.form.uploadAfterCreate')})\\n`;\n        \n        // Fge den Link an der aktuellen Cursorposition ein\n        if (textareaRef.current) {\n          const cursorPos = textareaRef.current.selectionStart;\n          const textBefore = description.substring(0, cursorPos);\n          const textAfter = description.substring(cursorPos);\n          \n          setDescription(textBefore + insertText + textAfter);\n          \n          // Setze den Cursor hinter den eingefgten Link\n          setTimeout(() => {\n            if (textareaRef.current) {\n              const newPos = cursorPos + insertText.length;\n              textareaRef.current.selectionStart = newPos;\n              textareaRef.current.selectionEnd = newPos;\n              textareaRef.current.focus();\n            }\n          }, 0);\n        } else {\n          setDescription(description + insertText);\n        }\n      }\n    } catch (err) {\n      console.error('Fehler beim Verarbeiten der Datei:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const uploadTemporaryAttachments = async () => {\n    if (temporaryAttachments.length === 0) return;\n    \n    try {\n      setLoading(true);\n      \n      let updatedDescription = description;\n      const uploadText = t('createRequest.editRequest.form.uploadAfterCreate');\n      \n      // Upload jeder temporren Datei und aktualisiere die URLs im Beschreibungstext\n      for (const attachment of temporaryAttachments) {\n        if (!attachment.file) continue;\n        \n        const formData = new FormData();\n        formData.append('file', attachment.file);\n        \n        const response = await axiosInstance.post(\n          API_ENDPOINTS.REQUESTS.ATTACHMENTS(request.id),\n          formData,\n          {\n            headers: {\n              'Content-Type': 'multipart/form-data',\n            },\n          }\n        );\n        \n        const newAttachment = response.data;\n        \n        // Fr Bilder: Prfe, ob bereits im Text vorhanden, sonst hinzufgen\n        if (newAttachment.fileType.startsWith('image/')) {\n          const fileName = attachment.fileName;\n          const escapedFileName = fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n          const imagePattern = new RegExp(`!\\\\[${escapedFileName}\\\\]\\\\([^)]+\\\\)`, 'g');\n          \n          if (!imagePattern.test(updatedDescription)) {\n            // Bild-Link ist noch nicht in der Beschreibung, fge ihn hinzu\n            const realUrl = getRequestAttachmentUrl(request.id, newAttachment.id);\n            updatedDescription = updatedDescription ? `${updatedDescription}\\n![${fileName}](${realUrl})` : `![${fileName}](${realUrl})`;\n          } else {\n            // Ersetze Platzhalter durch echte URL, falls vorhanden\n            const placeholderPattern = new RegExp(`!\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n            const realUrl = getRequestAttachmentUrl(request.id, newAttachment.id);\n            updatedDescription = updatedDescription.replace(placeholderPattern, `![${fileName}](${realUrl})`);\n          }\n        } else {\n          // Fr andere Dateien: Ersetze Platzhalter durch echte URL\n          const fileName = attachment.fileName;\n          const escapedFileName = fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n          const placeholderLinkPattern = new RegExp(`\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n          const realUrl = getRequestAttachmentUrl(request.id, newAttachment.id);\n          updatedDescription = updatedDescription.replace(placeholderLinkPattern, `[${fileName}](${realUrl})`);\n        }\n      }\n      \n      // Aktualisiere die Beschreibung mit den echten URLs\n      if (updatedDescription !== description) {\n        await axiosInstance.put(API_ENDPOINTS.REQUESTS.BY_ID(request.id), {\n          title: title,\n          description: updatedDescription,\n          responsible_id: responsibleId,\n          branch_id: branchId,\n          due_date: dueDate || null,\n          create_todo: createTodo,\n        });\n        setDescription(updatedDescription);\n      }\n      \n      console.log(`${temporaryAttachments.length} Anhnge erfolgreich hochgeladen.`);\n      // Nach erfolgreichem Upload leeren wir die temporren Anhnge\n      setTemporaryAttachments([]);\n    } catch (err) {\n      console.error('Fehler beim Hochladen der Anhnge:', err);\n      // Wir zeigen hier keinen Fehler, da der Request bereits aktualisiert wurde\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderAttachments = () => {\n    if (attachments.length === 0) return null;\n    \n    return (\n      <div className=\"mt-2\">\n        <ul className=\"flex flex-wrap gap-2\">\n          {attachments.map((attachment) => (\n            <li key={attachment.id || `temp-${attachment.fileName}`} className=\"inline-flex items-center bg-gray-100 rounded-md px-2 py-1 relative group\">\n              <span className=\"text-sm font-medium text-gray-800\">\n                {attachment.fileName}\n              </span>\n              <div className=\"flex ml-2\">\n                <div className=\"relative group mr-1\">\n                  <button\n                    type=\"button\"\n                    onClick={() => handleDownloadAttachment(attachment)}\n                    className=\"text-blue-600 hover:text-blue-900\"\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n                    </svg>\n                  </button>\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                    {t('createRequest.editRequest.form.download')}\n                  </div>\n                </div>\n                <div className=\"relative group ml-1\">\n                  <button\n                    type=\"button\"\n                    onClick={() => attachment.id !== undefined && handleDeleteAttachment(attachment.id)}\n                    className=\"text-red-600 hover:text-red-900\"\n                    disabled={attachment.id === undefined}\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                    {t('createRequest.editRequest.form.remove')}\n                  </div>\n                </div>\n              </div>\n              {/* Tooltip fr Bildvorschau bei Bild-Dateien */}\n              {attachment.fileType.startsWith('image/') && attachment.id && (\n                <div className=\"absolute z-10 bg-white p-2 rounded-md shadow-lg -top-32 left-0 border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none\">\n                  <img \n                    src={getRequestAttachmentUrl(request.id, attachment.id)}\n                    alt={attachment.fileName}\n                    className=\"max-w-[200px] max-h-[150px] object-contain\"\n                  />\n                </div>\n              )}\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  };\n\n  const renderTemporaryAttachments = () => {\n    if (temporaryAttachments.length === 0) return null;\n    \n    return (\n      <div className=\"mt-2\">\n        <ul className=\"flex flex-wrap gap-2\">\n          {temporaryAttachments.map((attachment, index) => (\n            <li key={`temp-${index}`} className=\"inline-flex items-center bg-gray-100 rounded-md px-2 py-1 relative group\">\n              <span className=\"text-sm font-medium text-gray-800\">\n                {attachment.fileName}\n              </span>\n              <div className=\"flex ml-2\">\n                <div className=\"relative group ml-1\">\n                  <button\n                    type=\"button\"\n                    onClick={() => handleRemoveTemporaryAttachment(index)}\n                    className=\"text-red-600 hover:text-red-900\"\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                    {t('createRequest.editRequest.form.remove')}\n                  </div>\n                </div>\n              </div>\n              {/* Tooltip fr Bildvorschau bei Bild-Dateien */}\n              {attachment.fileType.startsWith('image/') && attachment.file && (\n                <div className=\"absolute z-10 bg-white p-2 rounded-md shadow-lg -top-32 left-0 border border-gray-200 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none\">\n                  <img \n                    src={URL.createObjectURL(attachment.file)}\n                    alt={attachment.fileName}\n                    className=\"max-w-[200px] max-h-[150px] object-contain\"\n                  />\n                </div>\n              )}\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  };\n\n  if (!isOpen) return null;\n\n  const renderForm = () => (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.editRequest.form.title')}</label>\n        <input\n          type=\"text\"\n          required\n          className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n        />\n      </div>\n\n      <div>\n        <label htmlFor=\"description_request_edit\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('createRequest.editRequest.form.description')}\n        </label>\n        <div className=\"relative\">\n          <textarea\n            ref={textareaRef}\n            rows={isMobile ? 5 : 10}\n            className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            onPaste={handlePaste}\n            onDrop={handleDrop}\n            onDragOver={handleDragOver}\n          />\n          {/* Heftklammer-Icon zum Hinzufgen von Dateien */}\n          <div className=\"relative group absolute bottom-2 left-2\">\n            <button\n              type=\"button\"\n              onClick={() => fileInputRef.current?.click()}\n              className=\"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n              </svg>\n            </button>\n            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n              {t('createRequest.editRequest.form.fileUpload')}\n            </div>\n          </div>\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            onChange={handleFileUpload}\n            className=\"hidden\"\n          />\n          {uploading && (\n            <div className=\"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-70 dark:bg-opacity-70\">\n              <span className=\"text-sm text-gray-600 dark:text-gray-300\">{t('createRequest.editRequest.form.uploading')}</span>\n            </div>\n          )}\n        </div>\n        {renderAttachments()}\n        {renderTemporaryAttachments()}\n        {/* Bilder werden NICHT ins Textarea eingefgt */}\n        {/* Beim Speichern werden sie automatisch zum Markdown-Text hinzugefgt (fr Card-Anzeige) */}\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.editRequest.form.responsible')}</label>\n        <select\n          className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n          value={responsibleId}\n          onChange={(e) => setResponsibleId(Number(e.target.value))}\n        >\n          {users.map(user => (\n            <option key={user.id} value={user.id}>\n              {user.firstName} ({user.username})\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.editRequest.form.branch')}</label>\n        <select\n          className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n          value={branchId}\n          onChange={(e) => setBranchId(Number(e.target.value))}\n        >\n          {branches.map(branch => (\n            <option key={branch.id} value={branch.id}>\n              {branch.name}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.editRequest.form.type')}</label>\n        <select\n          className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n          value={type}\n          onChange={(e) => setType(e.target.value as any)}\n        >\n          <option value=\"vacation\">{t('requests.types.vacation')}</option>\n          <option value=\"improvement_suggestion\">{t('requests.types.improvement_suggestion')}</option>\n          <option value=\"sick_leave\">{t('requests.types.sick_leave')}</option>\n          <option value=\"employment_certificate\">{t('requests.types.employment_certificate')}</option>\n          <option value=\"other\">{t('requests.types.other')}</option>\n        </select>\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.editRequest.form.dueDate')}</label>\n        <input\n          type=\"date\"\n          className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n          value={dueDate}\n          onChange={(e) => setDueDate(e.target.value)}\n        />\n      </div>\n\n      <div className=\"flex items-center\">\n        <input\n          type=\"checkbox\"\n          id=\"is_private_edit\"\n          className=\"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:border-gray-600\"\n          checked={isPrivate}\n          onChange={(e) => setIsPrivate(e.target.checked)}\n        />\n        <label htmlFor=\"is_private_edit\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\n          {t('createRequest.editRequest.form.isPrivate')}\n        </label>\n      </div>\n\n      <div className=\"flex items-center\">\n        <input\n          type=\"checkbox\"\n          id=\"create_todo_edit\"\n          className=\"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:border-gray-600\"\n          checked={createTodo}\n          onChange={(e) => setCreateTodo(e.target.checked)}\n        />\n        <label htmlFor=\"create_todo_edit\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\n          {t('createRequest.editRequest.form.createTodo')}\n        </label>\n      </div>\n\n      <div className=\"flex justify-between pt-4\">\n        {canDeleteRequest && (\n          <button\n            type=\"button\"\n            onClick={handleDelete}\n            className={`p-2 rounded-md ${\n              confirmDelete\n                ? 'bg-red-600 text-white dark:bg-red-700 dark:text-white hover:bg-red-700 dark:hover:bg-red-600'\n                : 'text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300'\n            }`}\n            title={confirmDelete ? t('createRequest.editRequest.form.confirmDelete') : t('createRequest.editRequest.form.delete')}\n          >\n            {confirmDelete ? (\n              <CheckIcon className=\"h-5 w-5\" />\n            ) : (\n              <TrashIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n        )}\n        <div className=\"flex gap-2\">\n          <div className=\"relative group\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n            >\n              <XMarkIcon className=\"h-5 w-5\" />\n            </button>\n            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n              {t('createRequest.editRequest.form.cancel')}\n            </div>\n          </div>\n          <div className=\"relative group\">\n            <button\n              type=\"submit\"\n              className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              disabled={loading}\n            >\n              {loading ? (\n                <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n              ) : (\n                <CheckIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n              {loading ? t('createRequest.editRequest.form.saving') : t('createRequest.editRequest.form.save')}\n            </div>\n          </div>\n        </div>\n      </div>\n    </form>\n  );\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('createRequest.editRequest.title')}\n              </Dialog.Title>\n              <button\n                onClick={onClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <div className=\"p-4\">\n              {error && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {error}\n                </div>\n              )}\n\n              {renderForm()}\n            </div>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={onClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('createRequest.editRequest.title')}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {error && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {error}\n            </div>\n          )}\n\n          {renderForm()}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default EditRequestModal; ","import React, { useEffect, useState, useMemo, useCallback, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { CircularProgress } from '@mui/material';\nimport axiosInstance from '../config/axios.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useTableSettings } from '../hooks/useTableSettings.ts';\nimport CreateRequestModal from './CreateRequestModal.tsx';\nimport EditRequestModal from './EditRequestModal.tsx';\nimport TableColumnConfig from './TableColumnConfig.tsx';\nimport FilterPane from './FilterPane.tsx';\nimport SavedFilterTags from './SavedFilterTags.tsx';\nimport { FilterCondition } from './FilterRow.tsx';\nimport { applyFilters, evaluateDateCondition, evaluateUserRoleCondition } from '../utils/filterLogic.ts';\nimport { getStatusColor, getStatusText } from '../utils/statusUtils.tsx';\nimport { API_ENDPOINTS, getRequestAttachmentUrl } from '../config/api.ts';\nimport { \n  PlusIcon,\n  CheckIcon, \n  XMarkIcon,\n  ArrowPathIcon,\n  ExclamationTriangleIcon,\n  PencilIcon,\n  ArrowsUpDownIcon,\n  FunnelIcon,\n  DocumentTextIcon,\n  DocumentDuplicateIcon,\n  InformationCircleIcon,\n  Squares2X2Icon,\n  TableCellsIcon,\n  UserIcon,\n  ChevronDownIcon,\n  BuildingOfficeIcon,\n  CalendarIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon\n} from '@heroicons/react/24/outline';\nimport { format } from 'date-fns';\nimport { de } from 'date-fns/locale';\nimport MarkdownPreview from './MarkdownPreview.tsx';\nimport DataCard, { MetadataItem } from './shared/DataCard.tsx';\nimport CardGrid from './shared/CardGrid.tsx';\nimport { getExpiryStatus, getExpiryColorClasses, createDueDateMetadataItem } from '../utils/expiryUtils.ts';\n\n// Helper-Funktion fr Request-Typ-Icons\nconst getRequestTypeIcon = (type?: string): string => {\n  switch (type) {\n    case 'vacation':\n      return '';\n    case 'improvement_suggestion':\n      return '';\n    case 'sick_leave':\n      return '';\n    case 'employment_certificate':\n      return '';\n    case 'other':\n    default:\n      return '';\n  }\n};\n\ninterface Request {\n  id: number;\n  title: string;\n  status: 'approval' | 'approved' | 'to_improve' | 'denied';\n  type?: 'vacation' | 'improvement_suggestion' | 'sick_leave' | 'employment_certificate' | 'other';\n  isPrivate?: boolean;\n  requestedBy: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  responsible: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  branch: {\n    id: number;\n    name: string;\n  };\n  dueDate: string;\n  createTodo: boolean;\n  description?: string;\n  attachments?: Array<{\n    id: number;\n    fileName: string;\n    fileType: string;\n    fileSize?: number;\n    filePath?: string;\n    uploadedAt?: string;\n    url: string;\n  }>;\n}\n\ninterface SortConfig {\n  key: keyof Request | 'requestedBy.firstName' | 'responsible.firstName' | 'branch.name' | 'type';\n  direction: 'asc' | 'desc';\n}\n\n// Definition der verfgbaren Spalten - werden dynamisch aus bersetzungen geladen\n\n// Standardreihenfolge der Spalten\nconst defaultColumnOrder = ['title', 'requestedByResponsible', 'status', 'type', 'dueDate', 'branch', 'actions'];\n\n// TableID fr gespeicherte Filter\nconst REQUESTS_TABLE_ID = 'requests-table';\n\n// Mapping zwischen Tabellen-Spalten-IDs und Card-Metadaten-IDs\n// Tabellen-Spalte -> Card-Metadaten (kann Array sein fr 1:N Mapping)\nconst tableToCardMapping: Record<string, string[]> = {\n  'title': ['title'],\n  'status': ['status'],\n  'type': ['type'],\n  'requestedByResponsible': ['requestedBy', 'responsible'], // 1 Tabelle-Spalte -> 2 Card-Metadaten\n  'branch': ['branch'],\n  'dueDate': ['dueDate'],\n  'actions': [], // Keine Card-Entsprechung\n  'description': ['description'] // Nur in Cards verfgbar\n};\n\n// Reverse Mapping: Card-Metadaten -> Tabellen-Spalten\nconst cardToTableMapping: Record<string, string> = {\n  'title': 'title',\n  'status': 'status',\n  'type': 'type',\n  'requestedBy': 'requestedByResponsible',\n  'responsible': 'requestedByResponsible',\n  'branch': 'branch',\n  'dueDate': 'dueDate',\n  'description': 'description'\n};\n\n// Helfer-Funktion: Tabellen-Spalte ausgeblendet -> Card-Metadaten ausblenden\n// WICHTIG: 'type' wird NICHT ausgeblendet, auch wenn die Tabellen-Spalte ausgeblendet ist\n// WICHTIG: Fr 'requestedByResponsible' werden die Metadaten separat verwaltet\nconst getHiddenCardMetadata = (hiddenTableColumns: string[]): Set<string> => {\n  const hiddenCardMetadata = new Set<string>();\n  const requestedByResponsibleHidden = hiddenTableColumns.includes('requestedByResponsible');\n  \n  hiddenTableColumns.forEach(tableCol => {\n    // 'type' wird immer angezeigt, auch wenn Tabellen-Spalte ausgeblendet ist\n    if (tableCol === 'type') {\n      return; // berspringe 'type', damit es immer sichtbar bleibt\n    }\n    \n    // Spezielle Behandlung fr requestedByResponsible: Wenn ausgeblendet, werden beide Metadaten ausgeblendet\n    if (tableCol === 'requestedByResponsible') {\n      if (requestedByResponsibleHidden) {\n        hiddenCardMetadata.add('requestedBy');\n        hiddenCardMetadata.add('responsible');\n      }\n      return; // berspringe, da wir es bereits behandelt haben\n    }\n    \n    const cardMetadata = tableToCardMapping[tableCol] || [];\n    cardMetadata.forEach(cardMeta => {\n      // Auch hier: 'type' nicht ausblenden\n      if (cardMeta !== 'type') {\n        hiddenCardMetadata.add(cardMeta);\n      }\n    });\n  });\n  return hiddenCardMetadata;\n};\n\n// Helfer-Funktion: Card-Metadaten zu Tabellen-Spalten konvertieren\nconst getCardMetadataFromColumnOrder = (columnOrder: string[]): string[] => {\n  const cardMetadata: string[] = [];\n  columnOrder.forEach(tableCol => {\n    const cardMeta = tableToCardMapping[tableCol];\n    if (cardMeta && cardMeta.length > 0) {\n      cardMetadata.push(...cardMeta);\n    }\n  });\n  // Sicherstellen, dass 'type' immer verfgbar ist (auch wenn in Tabellen-Ansicht ausgeblendet)\n  if (!cardMetadata.includes('type')) {\n    cardMetadata.push('type');\n  }\n  // Sicherstellen, dass requestedBy und responsible immer verfgbar sind, wenn requestedByResponsible in columnOrder ist\n  if (columnOrder.includes('requestedByResponsible')) {\n    if (!cardMetadata.includes('requestedBy')) {\n      cardMetadata.push('requestedBy');\n    }\n    if (!cardMetadata.includes('responsible')) {\n      cardMetadata.push('responsible');\n    }\n  }\n  // Beschreibung hinzufgen, wenn nicht schon vorhanden\n  if (!cardMetadata.includes('description')) {\n    cardMetadata.push('description');\n  }\n  return cardMetadata;\n};\n\nconst Requests: React.FC = () => {\n  const { t } = useTranslation();\n  const [requests, setRequests] = useState<Request[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  //  Infinite Scroll fr Anzeige (KEINE Pagination beim Laden)\n  const [requestsDisplayLimit, setRequestsDisplayLimit] = useState<number>(20); // Initial: 20 Items (wird basierend auf viewMode gesetzt)\n  const [searchTerm, setSearchTerm] = useState('');\n  \n  // State-Variablen fr erweiterte Filterbedingungen\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  const [filterSortDirections, setFilterSortDirections] = useState<Array<{ column: string; direction: 'asc' | 'desc'; priority: number; conditionIndex: number }>>([]);\n  \n  // Filter State Management (Controlled Mode)\n  const [activeFilterName, setActiveFilterName] = useState<string>('');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n  \n  const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n  const [sortConfig, setSortConfig] = useState<SortConfig>({ key: 'dueDate', direction: 'asc' });\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const [selectedRequest, setSelectedRequest] = useState<Request | null>(null);\n  const { user } = useAuth();\n  const { hasPermission } = usePermissions();\n  \n  // Status-Funktionen (verwende zentrale Utils mit bersetzungsuntersttzung)\n  // WICHTIG: Funktionalitt bleibt identisch - nur Code-Duplikation entfernt!\n  const getStatusLabel = (status: string): string => {\n    return getStatusText(status, 'request', t);\n  };\n  \n  // Definition der verfgbaren Spalten (dynamisch aus bersetzungen)\n  const availableColumns = useMemo(() => [\n    { id: 'title', label: t('requests.columns.title'), shortLabel: t('requests.columns.title') },\n    { id: 'status', label: t('requests.columns.status'), shortLabel: t('requests.columns.status') },\n    { id: 'type', label: t('requests.columns.type'), shortLabel: t('requests.columns.type') },\n    { id: 'requestedByResponsible', label: t('requests.columns.requestedByResponsible'), shortLabel: t('requests.columns.requestedByResponsible').split('/')[0] },\n    { id: 'branch', label: t('requests.columns.branch'), shortLabel: t('requests.columns.branch').substring(0, 5) },\n    { id: 'dueDate', label: t('requests.columns.dueDate'), shortLabel: t('requests.columns.dueDate').substring(0, 5) },\n    { id: 'actions', label: t('requests.columns.actions'), shortLabel: t('common.actions').substring(0, 3) }\n  ], [t]);\n  \n  // Tabellen-Einstellungen laden\n  const {\n    settings,\n    isLoading: isLoadingSettings,\n    updateColumnOrder,\n    updateHiddenColumns,\n    toggleColumnVisibility,\n    isColumnVisible,\n    updateViewMode\n  } = useTableSettings('dashboard_requests', {\n    defaultColumnOrder,\n    defaultHiddenColumns: [],\n    defaultViewMode: 'cards'\n  });\n\n  const [draggedColumn, setDraggedColumn] = useState<string | null>(null);\n  const [dragOverColumn, setDragOverColumn] = useState<string | null>(null);\n  \n  // Ref um zu verfolgen, ob wir die hiddenColumns selbst ndern (verhindert Endlosschleife)\n  const isUpdatingHiddenColumnsRef = useRef(false);\n\n  // View-Mode aus Settings laden\n  const viewMode = settings.viewMode || 'cards';\n  \n  // Lokale Sortierrichtungen fr Cards (nicht persistiert)\n  const [cardSortDirections, setCardSortDirections] = useState<Record<string, 'asc' | 'desc'>>(() => {\n    const defaults: Record<string, 'asc' | 'desc'> = {\n      title: 'asc',\n      status: 'asc',\n      type: 'asc',\n      requestedBy: 'asc',\n      responsible: 'asc',\n      branch: 'asc',\n      dueDate: 'asc',\n      description: 'asc'\n    };\n    return defaults;\n  });\n\n  // Abgeleitete Werte fr Card-Ansicht aus Tabellen-Settings\n  // Card-Metadaten-Reihenfolge aus columnOrder ableiten\n  const cardMetadataOrder = useMemo(() => {\n    return getCardMetadataFromColumnOrder(settings.columnOrder || defaultColumnOrder);\n  }, [settings.columnOrder]);\n\n  // Separater State fr Metadaten-Sichtbarkeit von requestedBy/responsible\n  // Diese werden separat von der Tabellen-Spalte requestedByResponsible verwaltet\n  const [metadataVisibility, setMetadataVisibility] = useState<{requestedBy: boolean, responsible: boolean}>(() => {\n    // Initialisiere basierend auf aktuellen hiddenColumns\n    const requestedByResponsibleHidden = (settings.hiddenColumns || []).includes('requestedByResponsible');\n    return {\n      requestedBy: !requestedByResponsibleHidden,\n      responsible: !requestedByResponsibleHidden\n    };\n  });\n\n  // Synchronisiere metadataVisibility mit settings.hiddenColumns (nur wenn von auen gendert)\n  useEffect(() => {\n    // berspringe Synchronisation, wenn wir selbst die hiddenColumns ndern\n    if (isUpdatingHiddenColumnsRef.current) {\n      isUpdatingHiddenColumnsRef.current = false;\n      return;\n    }\n    \n    const requestedByResponsibleHidden = (settings.hiddenColumns || []).includes('requestedByResponsible');\n    // Wenn requestedByResponsible ausgeblendet ist, sind beide ausgeblendet\n    // Wenn es nicht ausgeblendet ist, sind beide standardmig sichtbar (beim Neuladen)\n    setMetadataVisibility(prev => {\n      // Nur aktualisieren, wenn sich der Zustand gendert hat\n      if (requestedByResponsibleHidden) {\n        if (prev.requestedBy === true || prev.responsible === true) {\n          return { requestedBy: false, responsible: false };\n        }\n      } else {\n        // Wenn requestedByResponsible nicht ausgeblendet ist, aber beide aktuell ausgeblendet sind,\n        // dann wurden sie wahrscheinlich manuell ausgeblendet, also nicht berschreiben\n        // Nur wenn beide aktuell ausgeblendet sind UND requestedByResponsible nicht ausgeblendet ist,\n        // dann setzen wir beide auf true (beim Neuladen, wenn beide ausgeblendet waren)\n        if (prev.requestedBy === false && prev.responsible === false) {\n          return { requestedBy: true, responsible: true };\n        }\n      }\n      return prev;\n    });\n  }, [settings.hiddenColumns]);\n\n  // Versteckte Card-Metadaten aus hiddenColumns ableiten\n  const hiddenCardMetadata = useMemo(() => {\n    const hidden = getHiddenCardMetadata(settings.hiddenColumns || []);\n    \n    // berschreibe fr requestedBy/responsible mit separatem State\n    if (!metadataVisibility.requestedBy) {\n      hidden.add('requestedBy');\n    } else {\n      hidden.delete('requestedBy');\n    }\n    if (!metadataVisibility.responsible) {\n      hidden.add('responsible');\n    } else {\n      hidden.delete('responsible');\n    }\n    \n    return hidden;\n  }, [settings.hiddenColumns, metadataVisibility]);\n\n  // Sichtbare Card-Metadaten (alle Card-Metadaten minus versteckte)\n  const visibleCardMetadata = useMemo(() => {\n    return new Set(cardMetadataOrder.filter(meta => !hiddenCardMetadata.has(meta)));\n  }, [cardMetadataOrder, hiddenCardMetadata]);\n\n  // CSS-Klasse fr Dashboard-Box setzen (fr CSS-basierte Schattierungs-Entfernung)\n  useEffect(() => {\n    const wrapper = document.querySelector('.dashboard-requests-wrapper');\n    if (wrapper) {\n      if (viewMode === 'cards') {\n        wrapper.classList.add('cards-mode');\n      } else {\n        wrapper.classList.remove('cards-mode');\n      }\n    }\n  }, [viewMode]);\n\n  //  PERFORMANCE: fetchRequests als useCallback (stabile Referenz fr useEffect)\n  //  KEINE Pagination mehr - immer ALLE Ergebnisse laden\n  const fetchRequests = useCallback(async (\n    filterId?: number, \n    filterConditions?: any[], \n    background = false\n  ) => {\n    try {\n      if (!background) {\n        setLoading(true);\n      }\n      \n      // Baue Query-Parameter ( KEINE limit/offset Parameter mehr)\n      const params: any = {\n        includeAttachments: 'false' //  PERFORMANCE: Attachments optional - nur laden wenn bentigt\n      };\n      if (filterId) {\n        params.filterId = filterId;\n      } else if (filterConditions && filterConditions.length > 0) {\n        params.filterConditions = JSON.stringify({\n          conditions: filterConditions,\n          operators: filterLogicalOperators\n        });\n      }\n      \n      const response = await axiosInstance.get('/requests', { params });\n      const requestsData = response.data;\n      \n      //  ALLE Requests werden geladen (kein limit/offset)\n      // Attachments sind bereits in der Response enthalten\n      // URL-Generierung fr Attachments hinzufgen\n      const requestsWithAttachments = requestsData.map((request: Request) => {\n        const attachments = (request.attachments || []).map((att: any) => ({\n          id: att.id,\n          fileName: att.fileName,\n          fileType: att.fileType,\n          fileSize: att.fileSize,\n          filePath: att.filePath,\n          uploadedAt: att.uploadedAt,\n          url: getRequestAttachmentUrl(request.id, att.id)\n        }));\n        \n        return {\n          ...request,\n          attachments: attachments\n        };\n      });\n      \n        //  MEMORY: Nur max 100 Items im State behalten (alte Items automatisch entfernen)\n        const MAX_ITEMS_IN_STATE = 100;\n      const requestsToStore = requestsWithAttachments.length > MAX_ITEMS_IN_STATE\n        ? requestsWithAttachments.slice(-MAX_ITEMS_IN_STATE)\n        : requestsWithAttachments;\n      \n      // Initiales Laden: Ersetze Requests (ALLE werden geladen)\n      setRequests(requestsToStore);\n      //  Initial displayLimit setzen (abhngig von viewMode)\n      setRequestsDisplayLimit(viewMode === 'cards' ? 10 : 20);\n      \n      setError(null);\n    } catch (err) {\n      console.error('Request Error:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      if (!background) {\n        if (axiosError.code === 'ERR_NETWORK') {\n          setError('Verbindung zum Server konnte nicht hergestellt werden. Bitte stellen Sie sicher, dass der Server luft.');\n        } else {\n          setError(`Fehler beim Laden der Requests: ${axiosError.response?.data?.message || axiosError.message}`);\n        }\n      }\n    } finally {\n      if (!background) {\n        setLoading(false);\n      }\n      }\n  }, [filterLogicalOperators, viewMode]);\n\n  //  loadMoreRequests entfernt - nicht mehr ntig (Infinite Scroll nur fr Anzeige)\n\n  // Standard-Filter erstellen und speichern\n  useEffect(() => {\n    const createStandardFilters = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        \n        if (!token) {\n          console.error('Nicht authentifiziert');\n          return;\n        }\n\n        // Prfen, ob die Standard-Filter bereits existieren\n        const existingFiltersResponse = await axiosInstance.get(\n          `${API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(REQUESTS_TABLE_ID)}`,\n          {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          }\n        );\n\n        const existingFilters = existingFiltersResponse.data || [];\n        // Suche nach Filtern mit deutschen oder bersetzten Namen (fr Rckwrtskompatibilitt)\n        const archivFilterExists = existingFilters.some(filter => \n          filter.name === 'Archiv' || \n          filter.name === t('requests.filters.archiv') ||\n          filter.name === 'Archivo'\n        );\n        const aktuellFilterExists = existingFilters.some(filter => \n          filter.name === 'Aktuell' || \n          filter.name === t('requests.filters.aktuell') ||\n          filter.name === 'Actual'\n        );\n\n        // Erstelle \"Archiv\"-Filter, wenn er noch nicht existiert\n        if (!archivFilterExists) {\n          const archivFilter = {\n            tableId: REQUESTS_TABLE_ID,\n            name: 'Archiv', // Immer auf Deutsch speichern, wird beim Anzeigen bersetzt\n            conditions: [\n              { column: 'status', operator: 'equals', value: 'approved' },\n              { column: 'status', operator: 'equals', value: 'denied' }\n            ],\n            operators: ['OR']\n          };\n\n          await axiosInstance.post(\n            `${API_ENDPOINTS.SAVED_FILTERS.BASE}`,\n            archivFilter,\n            {\n              headers: {\n                Authorization: `Bearer ${token}`,\n                'Content-Type': 'application/json'\n              }\n            }\n          );\n          console.log('Archiv-Filter fr Requests erstellt');\n        }\n\n      // Erstelle \"Aktuell\"-Filter, wenn er noch nicht existiert (immer mit deutschem Namen fr Konsistenz)\n      if (!aktuellFilterExists) {\n        const aktuellFilter = {\n          tableId: REQUESTS_TABLE_ID,\n          name: 'Aktuell', // Immer auf Deutsch speichern, wird beim Anzeigen bersetzt\n          conditions: [\n            { column: 'status', operator: 'notEquals', value: 'approved' },\n            { column: 'status', operator: 'notEquals', value: 'denied' }\n          ],\n          operators: ['AND']\n        };\n\n          await axiosInstance.post(\n            `${API_ENDPOINTS.SAVED_FILTERS.BASE}`,\n            aktuellFilter,\n            {\n              headers: {\n                Authorization: `Bearer ${token}`,\n                'Content-Type': 'application/json'\n              }\n            }\n          );\n          console.log('Aktuell-Filter fr Requests erstellt');\n        }\n      } catch (error) {\n        console.error('Fehler beim Erstellen der Standard-Filter:', error);\n      }\n    };\n\n    createStandardFilters();\n  }, []);\n\n  // Infinite Scroll Handler fr Requests\n  //  PERFORMANCE: filterConditions als useRef verwenden (verhindert Re-Render-Loops)\n  const filterConditionsRef = useRef(filterConditions);\n  useEffect(() => {\n    filterConditionsRef.current = filterConditions;\n  }, [filterConditions]);\n\n  //  MEMORY: Event Listener mit useRef (nur einmal registrieren, verhindert Memory-Leak)\n  //  Infinite Scroll fr Anzeige (nicht fr Laden)\n  // Hinweis: filteredAndSortedRequests wird spter deklariert, daher verwenden wir requests.length als Nherung\n  const scrollHandlerRef = useRef<() => void>();\n  useEffect(() => {\n    scrollHandlerRef.current = () => {\n      // Prfe ob User nahe am Ende der Seite ist\n      // Verwende requests.length als Nherung (filteredAndSortedRequests wird spter deklariert)\n      if (\n        window.innerHeight + window.scrollY >= document.documentElement.offsetHeight - 1000 &&\n        requestsDisplayLimit < requests.length\n      ) {\n        //  Infinite Scroll fr Anzeige: Zeige weitere Items\n        const increment = viewMode === 'cards' ? 10 : 20;\n        setRequestsDisplayLimit(prev => prev + increment);\n      }\n    };\n    \n    const handleScroll = () => scrollHandlerRef.current?.();\n    \n    window.addEventListener('scroll', handleScroll);\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [requestsDisplayLimit, viewMode, requests.length]);\n\n  //  FIX: fetchFirst5Requests entfernt - Initial mit normalem fetchRequests laden (20 Requests)\n  // Initial Requests laden (ohne Filter - SavedFilterTags wendet Default-Filter an)\n  useEffect(() => {\n    fetchRequests();\n  }, []);\n\n  //  MEMORY: Cleanup - Requests Array beim Unmount lschen\n  useEffect(() => {\n    return () => {\n      setRequests([]);\n      setFilterConditions([]);\n    };\n  }, []); // Nur beim Unmount ausfhren\n\n  // getStatusText wird jetzt direkt von statusUtils verwendet (siehe getStatusLabel oben)\n\n  // Status-Workflow: vorheriger/nchster Status fr Shift-Buttons\n  const getPreviousStatus = (status: Request['status']): Request['status'] | null => {\n    switch (status) {\n      case 'to_improve':\n      case 'approved':\n      case 'denied':\n        return 'approval';\n      default:\n        return null;\n    }\n  };\n\n  const getNextStatuses = (status: Request['status']): Request['status'][] => {\n    switch (status) {\n      case 'approval':\n        return ['approved', 'to_improve', 'denied'];\n      case 'to_improve':\n        return ['denied'];\n      default:\n        return [];\n    }\n  };\n\n  const handleSort = (key: SortConfig['key']) => {\n    setSortConfig(current => ({\n      key,\n      direction: current.key === key && current.direction === 'asc' ? 'desc' : 'asc'\n    }));\n  };\n\n  const handleStatusChange = async (requestId: number, newStatus: Request['status']) => {\n    try {\n      const currentRequest = requests.find(r => r.id === requestId);\n      if (!currentRequest) {\n        setError('Request nicht gefunden');\n        return;\n      }\n\n      // Optimistisches Update: State sofort aktualisieren\n      setRequests(prevRequests => \n        prevRequests.map(request => \n          request.id === requestId ? { ...request, status: newStatus } : request\n        )\n      );\n\n      await axiosInstance.put(`/requests/${requestId}`, \n        { \n          status: newStatus,\n          create_todo: currentRequest.createTodo\n        }\n      );\n    } catch (err) {\n      // Rollback bei Fehler: Vollstndiges Reload\n      console.error('Status Update Error:', err);\n      fetchRequests();\n      const axiosError = err as any;\n      setError(`Fehler beim Aktualisieren des Status: ${axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten'}`);\n    }\n  };\n\n  // Handler fr das Verschieben von Spalten per Drag & Drop\n  const handleMoveColumn = useCallback((dragIndex: number, hoverIndex: number) => {\n    // Erstelle eine neue Kopie der Spaltenreihenfolge\n    const newColumnOrder = [...settings.columnOrder];\n    \n    // Ermittle die zu verschiebenden Spalten\n    const movingColumn = newColumnOrder[dragIndex];\n    \n    // Entferne die Spalte an der alten Position\n    newColumnOrder.splice(dragIndex, 1);\n    \n    // Fge die Spalte an der neuen Position ein\n    newColumnOrder.splice(hoverIndex, 0, movingColumn);\n    \n    // Aktualisiere die Spaltenreihenfolge\n    updateColumnOrder(newColumnOrder);\n  }, [settings.columnOrder, updateColumnOrder]);\n\n  // Handler fr Drag & Drop direkt in der Tabelle\n  const handleDragStart = (columnId: string) => {\n    setDraggedColumn(columnId);\n  };\n\n  const handleDragOver = (e: React.DragEvent, columnId: string) => {\n    e.preventDefault();\n    if (draggedColumn && draggedColumn !== columnId) {\n      setDragOverColumn(columnId);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent, columnId: string) => {\n    e.preventDefault();\n    if (draggedColumn && draggedColumn !== columnId) {\n      const dragIndex = settings.columnOrder.indexOf(draggedColumn);\n      const hoverIndex = settings.columnOrder.indexOf(columnId);\n      \n      if (dragIndex > -1 && hoverIndex > -1) {\n        handleMoveColumn(dragIndex, hoverIndex);\n      }\n    }\n    setDraggedColumn(null);\n    setDragOverColumn(null);\n  };\n\n  const handleDragEnd = () => {\n    setDraggedColumn(null);\n    setDragOverColumn(null);\n  };\n\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[], sortDirections?: Array<{ column: string; direction: 'asc' | 'desc'; priority: number; conditionIndex: number }>) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n    if (sortDirections !== undefined) {\n      // Sicherstellen, dass sortDirections ein Array ist\n      const validSortDirections = Array.isArray(sortDirections) ? sortDirections : [];\n      setFilterSortDirections(validSortDirections);\n    }\n  };\n  \n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setFilterSortDirections([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n  \n  // Filter Change Handler (Controlled Mode)\n  const handleFilterChange = async (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[], sortDirections?: Array<{ column: string; direction: 'asc' | 'desc'; priority: number; conditionIndex: number }>) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators, sortDirections);\n    // Table-Header-Sortierung zurcksetzen, damit Filter-Sortierung bernimmt\n    setSortConfig({ key: 'dueDate', direction: 'asc' });\n    \n    //  Filter zurcksetzen bei Filter-Wechsel\n    setRequestsDisplayLimit(viewMode === 'cards' ? 10 : 20);\n    \n    // Wenn Filter-ID vorhanden (Standardfilter): Server-seitig laden\n    // Sonst: Client-seitig filtern (komplexe Filter)\n    if (id) {\n      await fetchRequests(id, undefined, false); //  KEINE Pagination mehr\n    }\n    // Wenn kein ID: Client-seitiges Filtering wird automatisch durch filteredAndSortedRequests angewendet\n  };\n\n  const getActiveFilterCount = () => {\n    return filterConditions.length;\n  };\n\n  const filteredAndSortedRequests = useMemo(() => {\n    // Verwende requests (bereits server-seitig gefiltert)\n    const requestsToFilter = requests;\n    \n    return requestsToFilter\n      .filter(request => {\n        // Globale Suchfunktion\n        if (searchTerm) {\n          const searchLower = searchTerm.toLowerCase();\n          const matchesSearch = \n            request.title.toLowerCase().includes(searchLower) ||\n            `${request.requestedBy.firstName} ${request.requestedBy.lastName}`.toLowerCase().includes(searchLower) ||\n            `${request.responsible.firstName} ${request.responsible.lastName}`.toLowerCase().includes(searchLower) ||\n            request.branch.name.toLowerCase().includes(searchLower);\n          \n          if (!matchesSearch) return false;\n        }\n        \n        // Wenn erweiterte Filterbedingungen definiert sind, wende diese an\n        // WICHTIG: Verwende zentrale Filter-Logik - Funktionalitt bleibt identisch!\n        if (filterConditions.length > 0) {\n          // Column-Evaluatoren fr Requests (exakt gleiche Logik wie vorher)\n          const columnEvaluators: any = {\n            'title': (req: Request, cond: FilterCondition) => {\n              const value = (cond.value as string || '').toLowerCase();\n              const title = req.title.toLowerCase();\n              if (cond.operator === 'equals') return req.title === cond.value;\n              if (cond.operator === 'contains') return title.includes(value);\n              if (cond.operator === 'startsWith') return title.startsWith(value);\n              if (cond.operator === 'endsWith') return title.endsWith(value);\n              return null;\n            },\n            'status': (req: Request, cond: FilterCondition) => {\n              if (cond.operator === 'equals') return req.status === cond.value;\n              if (cond.operator === 'notEquals') return req.status !== cond.value;\n              return null;\n            },\n            'type': (req: Request, cond: FilterCondition) => {\n              const requestType = req.type || 'other';\n              if (cond.operator === 'equals') return requestType === cond.value;\n              if (cond.operator === 'notEquals') return requestType !== cond.value;\n              return null;\n            },\n            'requestedBy': (req: Request, cond: FilterCondition) => {\n              // Untersttzt user-{id} Format und Text-Fallback\n              const requestedByName = `${req.requestedBy.firstName} ${req.requestedBy.lastName}`;\n              return evaluateUserRoleCondition(\n                req.requestedBy.id,\n                null, // Requests haben keine Rollen\n                cond,\n                requestedByName\n              );\n            },\n            'responsible': (req: Request, cond: FilterCondition) => {\n              // Untersttzt user-{id} Format und Text-Fallback\n              const responsibleName = `${req.responsible.firstName} ${req.responsible.lastName}`;\n              return evaluateUserRoleCondition(\n                req.responsible.id,\n                null, // Requests haben keine Rollen\n                cond,\n                responsibleName\n              );\n            },\n            'branch': (req: Request, cond: FilterCondition) => {\n              const branchName = req.branch.name.toLowerCase();\n              const value = (cond.value as string || '').toLowerCase();\n              if (cond.operator === 'contains') return branchName.includes(value);\n              if (cond.operator === 'equals') return branchName === value;\n              return null;\n            },\n            'dueDate': (req: Request, cond: FilterCondition) => {\n              return evaluateDateCondition(req.dueDate, cond);\n            }\n          };\n\n          const getFieldValue = (req: Request, columnId: string): any => {\n            switch (columnId) {\n              case 'title': return req.title;\n              case 'status': return req.status;\n              case 'type': return req.type || 'other';\n              case 'requestedBy': return `${req.requestedBy.firstName} ${req.requestedBy.lastName}`;\n              case 'responsible': return `${req.responsible.firstName} ${req.responsible.lastName}`;\n              case 'branch': return req.branch.name;\n              case 'dueDate': return req.dueDate;\n              default: return (req as any)[columnId];\n            }\n          };\n\n          // Wende Filter mit zentraler Logik an (nur fr dieses einzelne Item)\n          const filtered = applyFilters(\n            [request],\n            filterConditions,\n            filterLogicalOperators,\n            getFieldValue,\n            columnEvaluators\n          );\n          \n          if (filtered.length === 0) return false;\n        }\n        \n        return true;\n      })\n      .sort((a, b) => {\n        // Hilfsfunktion zum Abrufen von Sortierwerten\n        const getSortValue = (request: Request, columnId: string): any => {\n          switch (columnId) {\n            case 'title':\n              return request.title.toLowerCase();\n            case 'status':\n              const statusOrder: Record<string, number> = {\n                'approval': 0,\n                'to_improve': 1,\n                'approved': 2,\n                'denied': 3\n              };\n              return statusOrder[request.status] ?? 999;\n            case 'type':\n              const typeOrder: Record<string, number> = {\n                'vacation': 0,\n                'improvement_suggestion': 1,\n                'sick_leave': 2,\n                'employment_certificate': 3,\n                'other': 4\n              };\n              return typeOrder[request.type || 'other'] ?? 999;\n            case 'requestedBy':\n            case 'requestedByResponsible':\n              return `${request.requestedBy.firstName} ${request.requestedBy.lastName}`.toLowerCase();\n            case 'responsible':\n              return `${request.responsible.firstName} ${request.responsible.lastName}`.toLowerCase();\n            case 'branch':\n              return request.branch.name.toLowerCase();\n            case 'dueDate':\n              return new Date(request.dueDate).getTime();\n            case 'description':\n              return (request.description || '').toLowerCase();\n            default:\n              return '';\n          }\n        };\n        \n        // 1. Prioritt: Table-Header-Sortierung (temporre berschreibung, auch wenn Filter aktiv)\n        if (viewMode === 'table' && sortConfig.key) {\n          const valueA = getSortValue(a, sortConfig.key);\n          const valueB = getSortValue(b, sortConfig.key);\n          \n          let comparison = 0;\n          if (typeof valueA === 'number' && typeof valueB === 'number') {\n            comparison = valueA - valueB;\n          } else {\n            comparison = String(valueA).localeCompare(String(valueB));\n          }\n          \n          if (comparison !== 0) {\n            return sortConfig.direction === 'asc' ? comparison : -comparison;\n          }\n        }\n        \n        // 2. Prioritt: Filter-Sortierrichtungen (wenn Filter aktiv)\n        if (filterSortDirections.length > 0 && filterConditions.length > 0) {\n          // Sortiere nach Prioritt (1, 2, 3, ...)\n          const sortedByPriority = [...filterSortDirections].sort((sd1, sd2) => sd1.priority - sd2.priority);\n          \n          for (const sortDir of sortedByPriority) {\n            const valueA = getSortValue(a, sortDir.column);\n            const valueB = getSortValue(b, sortDir.column);\n            \n            let comparison = 0;\n            if (typeof valueA === 'number' && typeof valueB === 'number') {\n              comparison = valueA - valueB;\n            } else {\n              comparison = String(valueA).localeCompare(String(valueB));\n            }\n            \n            if (sortDir.direction === 'desc') {\n              comparison = -comparison;\n            }\n            \n            if (comparison !== 0) {\n              return comparison;\n            }\n          }\n          return 0;\n        }\n        \n        // 3. Prioritt: Cards-Mode Multi-Sortierung (wenn kein Filter aktiv, Cards-Mode)\n        if (viewMode === 'cards' && filterConditions.length === 0) {\n          const sortableColumns = cardMetadataOrder.filter(colId => visibleCardMetadata.has(colId));\n          \n          for (const columnId of sortableColumns) {\n            const valueA = getSortValue(a, columnId);\n            const valueB = getSortValue(b, columnId);\n            \n            const direction = cardSortDirections[columnId] || 'asc';\n            let comparison = 0;\n            if (typeof valueA === 'number' && typeof valueB === 'number') {\n              comparison = valueA - valueB;\n            } else {\n              comparison = String(valueA).localeCompare(String(valueB));\n            }\n            \n            if (direction === 'desc') {\n              comparison = -comparison;\n            }\n            \n            if (comparison !== 0) {\n              return comparison;\n            }\n          }\n          return 0;\n        }\n        \n        // 4. Prioritt: Tabellen-Mode Einzel-Sortierung (wenn kein Filter aktiv, Table-Mode)\n        if (viewMode === 'table' && filterConditions.length === 0 && sortConfig.key) {\n          let aValue: any = a[sortConfig.key as keyof Request];\n          let bValue: any = b[sortConfig.key as keyof Request];\n\n          // Handle nested properties\n          if (sortConfig.key === 'requestedBy.firstName') {\n            aValue = a.requestedBy.firstName;\n            bValue = b.requestedBy.firstName;\n          } else if (sortConfig.key === 'responsible.firstName') {\n            aValue = a.responsible.firstName;\n            bValue = b.responsible.firstName;\n          } else if (sortConfig.key === 'branch.name') {\n            aValue = a.branch.name;\n            bValue = b.branch.name;\n          } else if (sortConfig.key === 'type') {\n            const typeOrder: Record<string, number> = {\n              'vacation': 0,\n              'improvement_suggestion': 1,\n              'sick_leave': 2,\n              'employment_certificate': 3,\n              'other': 4\n            };\n            aValue = typeOrder[(a as any).type || 'other'] ?? 999;\n            bValue = typeOrder[(b as any).type || 'other'] ?? 999;\n          }\n\n          if (aValue < bValue) return sortConfig.direction === 'asc' ? -1 : 1;\n          if (aValue > bValue) return sortConfig.direction === 'asc' ? 1 : -1;\n          return 0;\n        }\n        \n        // 5. Fallback: Standardsortierung\n        return 0;\n      });\n  }, [requests, selectedFilterId, searchTerm, sortConfig, filterConditions, filterLogicalOperators, filterSortDirections, viewMode, cardMetadataOrder, visibleCardMetadata, cardSortDirections]);\n\n  // Funktion zum Kopieren eines Requests\n  const handleCopyRequest = async (request) => {\n    try {\n      if (!user) {\n        setError('Benutzer nicht authentifiziert');\n        return;\n      }\n      \n      // Kopie des Requests erstellen mit angepasstem Titel\n      const copiedRequestData = {\n        title: `${request.title}-Kopie`,\n        responsible_id: request.responsible.id,\n        branch_id: request.branch.id,\n        type: request.type || 'other',\n        is_private: request.isPrivate || false,\n        due_date: request.dueDate ? request.dueDate.split('T')[0] : '',\n        create_todo: request.createTodo,\n        requested_by_id: user.id\n      };\n\n      // Request erstellen\n      const response = await axiosInstance.post(\n        API_ENDPOINTS.REQUESTS.BASE,\n        copiedRequestData\n      );\n\n      // Optimistisches Update: Neuen Request zur Liste hinzufgen statt vollstndigem Reload\n      setRequests(prevRequests => [response.data, ...prevRequests]);\n      \n      // Bearbeitungsmodal fr den kopierten Request ffnen\n      setSelectedRequest(response.data);\n      setIsEditModalOpen(true);\n      \n    } catch (err) {\n      console.error('Fehler beim Kopieren des Requests:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n    }\n  };\n\n  //  PERFORMANCE: Skeleton-Loading fr LCP-Element (sofort sichtbar, auch ohne Daten)\n  if (loading && requests.length === 0) {\n    return (\n      <div className=\"-mx-3 sm:-mx-4 md:-mx-6\">\n        <CardGrid>\n          {Array(3).fill(null).map((_, i) => (\n            <div key={`skeleton-${i}`} className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-3 sm:p-4 md:p-5 lg:p-6 shadow-sm\">\n              <div className=\"space-y-4\">\n                {/* LCP-Element: Titel-Skeleton */}\n                <div className=\"flex items-center gap-2 mb-2\">\n                  <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-12\"></div>\n                  <div className=\"h-6 bg-gray-200 dark:bg-gray-700 rounded flex-1 min-w-0\"></div>\n                </div>\n                {/* Status-Skeleton */}\n                <div className=\"h-6 bg-gray-200 dark:bg-gray-700 rounded w-24\"></div>\n                {/* Metadaten-Skeleton */}\n                <div className=\"space-y-2\">\n                  <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4\"></div>\n                  <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2\"></div>\n                  <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6\"></div>\n                </div>\n              </div>\n            </div>\n          ))}\n        </CardGrid>\n      </div>\n    );\n  }\n  if (error) return <div className=\"p-4 text-red-600\">{error}</div>;\n\n  // Filtern und sortieren der Spalten gem den Benutzereinstellungen\n  const visibleColumnIds = settings.columnOrder.filter(id => isColumnVisible(id));\n\n  return (\n    <>\n      <CreateRequestModal \n        isOpen={isCreateModalOpen}\n        onClose={() => setIsCreateModalOpen(false)}\n        onRequestCreated={(newRequest) => {\n          // Optimistisches Update: Neuen Request zur Liste hinzufgen statt vollstndigem Reload\n          setRequests(prevRequests => [newRequest, ...prevRequests]);\n          setIsEditModalOpen(true);\n          setSelectedRequest(newRequest);\n        }}\n      />\n      {selectedRequest && (\n        <EditRequestModal\n          isOpen={isEditModalOpen}\n          onClose={() => {\n            setIsEditModalOpen(false);\n            setSelectedRequest(null);\n          }}\n          onRequestUpdated={(updatedRequest) => {\n            // Optimistisches Update: Request in Liste aktualisieren statt vollstndigem Reload\n            setRequests(prevRequests => \n              prevRequests.map(request => \n                request.id === updatedRequest.id ? updatedRequest : request\n              )\n            );\n            setIsEditModalOpen(false);\n            setSelectedRequest(null);\n          }}\n          request={selectedRequest}\n        />\n      )}\n\n      {/* Neu angeordnete UI-Elemente in einer Zeile */}\n      <div className=\"flex items-center mb-4 justify-between px-3 sm:px-4 md:px-6\">\n          {/* Linke Seite: \"Neuer Request\"-Button */}\n          <div className=\"flex items-center\">\n            {hasPermission('requests', 'write', 'table') && (\n              <div className=\"relative group\">\n                <button\n                  onClick={() => setIsCreateModalOpen(true)}\n                  className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                  style={{ width: '30.19px', height: '30.19px' }}\n                  aria-label={t('requests.createRequest')}\n                  data-onboarding=\"create-request-button\"\n                >\n                  <PlusIcon className=\"h-4 w-4\" />\n                </button>\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                  {t('requests.createRequest')}\n                </div>\n              </div>\n            )}\n          </div>\n          \n          {/* Mitte: Titel mit Icon */}\n          <div className=\"flex items-center\">\n            <DocumentTextIcon className=\"h-6 w-6 mr-2 dark:text-white\" />\n            <h2 className=\"text-xl font-semibold dark:text-white\">{t('requests.title')}</h2>\n          </div>\n          \n          {/* Rechte Seite: Suchfeld, Filter, View-Toggle und Spalten */}\n          <div className=\"flex items-center gap-1.5\">\n            <input\n              type=\"text\"\n              placeholder={t('common.search') + '...'}\n              className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n            />\n            \n            {/* View-Mode Toggle */}\n            <div className=\"relative group\">\n              <button\n                className={`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                  viewMode === 'cards' ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : ''\n                }`}\n                onClick={() => updateViewMode(viewMode === 'table' ? 'cards' : 'table')}\n              >\n                {viewMode === 'table' ? (\n                  <Squares2X2Icon className=\"h-5 w-5\" />\n                ) : (\n                  <TableCellsIcon className=\"h-5 w-5\" />\n                )}\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {viewMode === 'table' ? t('common.viewAsCards') : t('common.viewAsTable')}\n              </div>\n            </div>\n            \n            {/* Filter-Button */}\n            <div className=\"relative group\">\n              <button\n                className={`p-2 rounded-md ${getActiveFilterCount() > 0 ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'hover:bg-gray-100 dark:hover:bg-gray-700'} ml-1`}\n                onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n              >\n                <FunnelIcon className=\"h-5 w-5\" />\n                {getActiveFilterCount() > 0 && (\n                  <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center z-10\" style={{ position: 'absolute', top: '-0.25rem', right: '-0.25rem' }}>\n                    {getActiveFilterCount()}\n                  </span>\n                )}\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('common.filter')}\n              </div>\n            </div>\n            \n            {/* Anzeige anpassen - bei beiden Ansichten */}\n            <div className=\"ml-1\">\n              <TableColumnConfig\n                columns={viewMode === 'cards'\n                  ? [\n                      { id: 'title', label: t('requests.columns.title') },\n                      { id: 'status', label: t('requests.columns.status') },\n                      { id: 'type', label: t('requests.columns.type') },\n                      { id: 'requestedBy', label: t('requests.columns.requestedBy') },\n                      { id: 'responsible', label: t('requests.columns.responsible') },\n                      { id: 'branch', label: t('requests.columns.branch') },\n                      { id: 'dueDate', label: t('requests.columns.dueDate') },\n                      { id: 'description', label: t('common.description') }\n                    ]\n                  : availableColumns}\n                visibleColumns={viewMode === 'cards'\n                  ? Array.from(visibleCardMetadata)\n                  : visibleColumnIds}\n                columnOrder={viewMode === 'cards'\n                  ? cardMetadataOrder\n                  : settings.columnOrder}\n                onToggleColumnVisibility={(columnId) => {\n                  if (viewMode === 'cards') {\n                    // Card-Metadaten-ID -> Tabellen-Spalten-ID\n                    const tableColumnId = cardToTableMapping[columnId];\n                    if (tableColumnId) {\n                      // Spezielle Logik fr requestedByResponsible - Metadaten separat verwalten\n                      if (tableColumnId === 'requestedByResponsible') {\n                        // Toggle die Metadaten-Sichtbarkeit im separaten State\n                        const newMetadataVisibility = { ...metadataVisibility };\n                        if (columnId === 'requestedBy') {\n                          newMetadataVisibility.requestedBy = !newMetadataVisibility.requestedBy;\n                        } else if (columnId === 'responsible') {\n                          newMetadataVisibility.responsible = !newMetadataVisibility.responsible;\n                        }\n                        setMetadataVisibility(newMetadataVisibility);\n                        \n                        // Aktualisiere hiddenColumns basierend auf Metadaten-Sichtbarkeit\n                        const newHiddenColumns = [...settings.hiddenColumns];\n                        const tableColumnIndex = newHiddenColumns.indexOf(tableColumnId);\n                        \n                        // Wenn beide Metadaten ausgeblendet sind, blende requestedByResponsible aus\n                        // Wenn mindestens eine sichtbar ist, blende requestedByResponsible ein\n                        if (!newMetadataVisibility.requestedBy && !newMetadataVisibility.responsible) {\n                          // Beide ausgeblendet  requestedByResponsible ausblenden\n                          if (tableColumnIndex === -1) {\n                            newHiddenColumns.push(tableColumnId);\n                            isUpdatingHiddenColumnsRef.current = true;\n                            updateHiddenColumns(newHiddenColumns);\n                          }\n                        } else {\n                          // Mindestens eine sichtbar  requestedByResponsible einblenden\n                          if (tableColumnIndex !== -1) {\n                            newHiddenColumns.splice(tableColumnIndex, 1);\n                            isUpdatingHiddenColumnsRef.current = true;\n                            updateHiddenColumns(newHiddenColumns);\n                          }\n                        }\n                      } else {\n                        // Normale Spalte: direkt ein/ausblenden\n                        toggleColumnVisibility(tableColumnId);\n                      }\n                    }\n                  } else {\n                    toggleColumnVisibility(columnId);\n                  }\n                }}\n                onMoveColumn={viewMode === 'cards' \n                  ? (dragIndex: number, hoverIndex: number) => {\n                      // Card-Metadaten-Reihenfolge ndern = Tabellen-Spalten-Reihenfolge ndern\n                      const newCardOrder = [...cardMetadataOrder];\n                      const movingCardMeta = newCardOrder[dragIndex];\n                      newCardOrder.splice(dragIndex, 1);\n                      newCardOrder.splice(hoverIndex, 0, movingCardMeta);\n                      \n                      // Konvertiere Card-Metadaten-Reihenfolge zurck zu Tabellen-Spalten-Reihenfolge\n                      // Finde die ursprngliche Tabellen-Spalte fr jedes Card-Metadatum\n                      const newTableOrder: string[] = [];\n                      const processedTableCols = new Set<string>();\n                      \n                      newCardOrder.forEach(cardMeta => {\n                        const tableCol = cardToTableMapping[cardMeta];\n                        if (tableCol && !processedTableCols.has(tableCol)) {\n                          newTableOrder.push(tableCol);\n                          processedTableCols.add(tableCol);\n                        }\n                      });\n                      \n                      // Fehlende Tabellen-Spalten hinzufgen (actions, etc.)\n                      settings.columnOrder.forEach(tableCol => {\n                        if (!newTableOrder.includes(tableCol)) {\n                          newTableOrder.push(tableCol);\n                        }\n                      });\n                      \n                      updateColumnOrder(newTableOrder);\n                    }\n                  : handleMoveColumn}\n                onClose={() => {}}\n                buttonTitle={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n                modalTitle={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n                sortDirections={undefined}\n                onSortDirectionChange={undefined}\n                showSortDirection={false}\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Filter-Pane */}\n        {isFilterModalOpen && (\n          <div className={viewMode === 'cards' ? '-mx-3 sm:-mx-4 md:-mx-6 px-3 sm:px-4 md:px-6' : 'px-3 sm:px-4 md:px-6'}>\n            <FilterPane\n            columns={[\n              { id: 'title', label: t('requests.columns.title') },\n              { id: 'type', label: t('requests.columns.type') },\n              { id: 'requestedBy', label: t('requests.columns.requestedBy').replace(':', '') },\n              { id: 'responsible', label: t('requests.columns.responsible').replace(':', '') },\n              { id: 'dueDate', label: t('requests.columns.dueDate') },\n              { id: 'status', label: t('requests.columns.status') },\n              { id: 'branch', label: t('requests.columns.branch') }\n            ]}\n            onApply={applyFilterConditions}\n            onReset={resetFilterConditions}\n            savedConditions={filterConditions}\n            savedOperators={filterLogicalOperators}\n            savedSortDirections={filterSortDirections}\n            onSortDirectionsChange={setFilterSortDirections}\n            tableId={REQUESTS_TABLE_ID}\n            />\n          </div>\n        )}\n        \n        {/* Gespeicherte Filter als Tags anzeigen */}\n        <div className={viewMode === 'cards' ? '-mx-3 sm:-mx-4 md:-mx-6 px-3 sm:px-4 md:px-6' : 'px-3 sm:px-4 md:px-6'}>\n          <SavedFilterTags\n          tableId={REQUESTS_TABLE_ID}\n          onSelectFilter={(conditions, operators, sortDirections) => applyFilterConditions(conditions, operators, sortDirections)}\n          onReset={resetFilterConditions}\n          activeFilterName={activeFilterName}\n          selectedFilterId={selectedFilterId}\n          onFilterChange={(name, id, conditions, operators, sortDirections) => handleFilterChange(name, id, conditions, operators, sortDirections)}\n          defaultFilterName=\"Aktuell\"\n          />\n        </div>\n\n        {/* Conditional Rendering: Table oder Cards */}\n        {viewMode === 'table' ? (\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n            <thead className=\"bg-gray-50 dark:bg-gray-700\">\n              <tr>\n                {/* Dynamisch generierte Spaltenberschriften basierend auf den sichtbaren Spalten */}\n                {visibleColumnIds.map(columnId => {\n                  const column = availableColumns.find(col => col.id === columnId);\n                  if (!column) return null;\n\n                  // Besondere Behandlung fr die Spalte mit requestedBy/responsible\n                  if (columnId === 'requestedByResponsible') {\n                    return (\n                      <th \n                        key={columnId}\n                        className=\"px-3 sm:px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-move relative\"\n                        draggable\n                        onDragStart={() => handleDragStart(columnId)}\n                        onDragOver={(e) => handleDragOver(e, columnId)}\n                        onDrop={(e) => handleDrop(e, columnId)}\n                        onDragEnd={handleDragEnd}\n                      >\n                        <div className={`flex items-center ${dragOverColumn === columnId ? 'border-l-2 pl-1 border-blue-500' : ''} ${draggedColumn === columnId ? 'opacity-50' : ''}`}>\n                          <ArrowsUpDownIcon className=\"h-3 w-3 mr-1 text-gray-400 dark:text-gray-500\" />\n                          <span className=\"hidden sm:inline\">{column.label}</span>\n                          <span className=\"inline sm:hidden\">{column.shortLabel}</span>\n                        </div>\n                      </th>\n                    );\n                  }\n                  \n                  // Fr alle anderen Spalten\n                  let sortKey: SortConfig['key'] | undefined;\n                  if (columnId === 'title') sortKey = 'title';\n                  if (columnId === 'status') sortKey = 'status';\n                  if (columnId === 'type') sortKey = 'type';\n                  if (columnId === 'branch') sortKey = 'branch.name';\n                  if (columnId === 'dueDate') sortKey = 'dueDate';\n\n                  return (\n                      <th \n                        key={columnId}\n                        className={`px-3 sm:px-4 md:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider relative ${sortKey ? 'cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700' : ''} ${columnId !== 'actions' ? 'cursor-move' : ''}`}\n                      onClick={sortKey ? () => handleSort(sortKey) : undefined}\n                      draggable={columnId !== 'actions'}\n                      onDragStart={columnId !== 'actions' ? () => handleDragStart(columnId) : undefined}\n                      onDragOver={columnId !== 'actions' ? (e) => handleDragOver(e, columnId) : undefined}\n                      onDrop={columnId !== 'actions' ? (e) => handleDrop(e, columnId) : undefined}\n                      onDragEnd={columnId !== 'actions' ? handleDragEnd : undefined}\n                    >\n                      <div className={`flex items-center ${dragOverColumn === columnId ? 'border-l-2 pl-1 border-blue-500' : ''} ${draggedColumn === columnId ? 'opacity-50' : ''}`}>\n                        {columnId !== 'actions' && <ArrowsUpDownIcon className=\"h-3 w-3 mr-1 text-gray-400 dark:text-gray-500\" />}\n                        <span className=\"hidden sm:inline\">{column.label}</span>\n                        <span className=\"inline sm:hidden\">{column.shortLabel}</span>\n                        {sortKey && sortConfig.key === sortKey && (sortConfig.direction === 'asc' ? '' : '')}\n                      </div>\n                    </th>\n                  );\n                })}\n              </tr>\n            </thead>\n            <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n              {filteredAndSortedRequests.length === 0 ? (\n                <tr>\n                  <td colSpan={visibleColumnIds.length} className=\"px-3 py-4 text-center text-gray-500 dark:text-gray-400\">\n                    <div className=\"flex flex-col items-center justify-center gap-4\">\n                      <DocumentTextIcon className=\"h-10 w-10 text-gray-400 dark:text-gray-500\" />\n                      <div className=\"text-sm\">Keine Requests gefunden</div>\n                    </div>\n                  </td>\n                </tr>\n              ) : (\n                <>\n                  {filteredAndSortedRequests.slice(0, requestsDisplayLimit).map(request => {\n                    const expiryStatus = getExpiryStatus(request.dueDate, 'request');\n                    const expiryColors = getExpiryColorClasses(expiryStatus);\n                    \n                    return (\n                      <tr \n                        key={request.id} \n                        className={`hover:bg-gray-50 dark:hover:bg-gray-700 ${\n                          expiryStatus !== 'none' ? `${expiryColors.bgClass} ${expiryColors.borderClass} border-l-4` : ''\n                        }`}\n                      >\n                        {/* Dynamisch generierte Zellen basierend auf den sichtbaren Spalten */}\n                        {visibleColumnIds.map(columnId => {\n                        switch (columnId) {\n                          case 'title':\n                            return (\n                              <td key={columnId} className=\"px-3 sm:px-4 md:px-6 py-4\">\n                                <div className=\"text-sm text-gray-900 dark:text-gray-200 break-words flex items-center\">\n                                  {request.title}\n                                  {request.description && (\n                                    <div className=\"ml-2 relative group\">\n                                      <button \n                                        className=\"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300\"\n                                      >\n                                        <InformationCircleIcon className=\"h-5 w-5\" />\n                                      </button>\n                                      <div className=\"absolute left-0 mt-2 p-2 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 shadow-lg rounded-md border border-gray-200 dark:border-gray-700 w-144 max-h-96 overflow-y-auto min-w-[36rem] z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none\">\n                                        <MarkdownPreview content={request.description} showImagePreview={true} />\n                                      </div>\n                                    </div>\n                                  )}\n                                </div>\n                              </td>\n                            );\n                          case 'status':\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(request.status, 'request')} dark:bg-opacity-30 status-col`}>\n                                  {getStatusLabel(request.status)}\n                                </span>\n                              </td>\n                            );\n                          case 'type':\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <div className=\"flex items-center gap-2 text-sm text-gray-900 dark:text-gray-200\">\n                                  <span className=\"text-lg\">{getRequestTypeIcon(request.type)}</span>\n                                  <span>{request.type ? t(`requests.types.${request.type}`) : t('requests.types.other')}</span>\n                                  {request.isPrivate && (\n                                    <div className=\"relative group inline-block ml-1\">\n                                      <span className=\"text-xs text-gray-500 dark:text-gray-400\"></span>\n                                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                        {t('createRequest.form.isPrivate')}\n                                      </div>\n                                    </div>\n                                  )}\n                                </div>\n                              </td>\n                            );\n                          case 'requestedByResponsible':\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <div className=\"flex flex-col\">\n                                  <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                    <span className=\"text-xs text-gray-500 dark:text-gray-400 hidden sm:inline\">{t('requests.columns.requestedBy')}:</span>\n                                    <span className=\"text-xs text-gray-500 dark:text-gray-400 inline sm:hidden\">{t('requests.columns.requestedBy').substring(0, 5)}:</span><br />\n                                    {`${request.requestedBy.firstName} ${request.requestedBy.lastName}`}\n                                  </div>\n                                  <div className=\"text-sm text-gray-900 dark:text-gray-200 mt-1\">\n                                    <span className=\"text-xs text-gray-500 dark:text-gray-400 hidden sm:inline\">{t('requests.columns.responsible')}:</span>\n                                    <span className=\"text-xs text-gray-500 dark:text-gray-400 inline sm:hidden\">{t('requests.columns.responsible').substring(0, 4)}:</span><br />\n                                    {`${request.responsible.firstName} ${request.responsible.lastName}`}\n                                  </div>\n                                </div>\n                              </td>\n                            );\n                          case 'branch':\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <div className=\"text-sm text-gray-900 dark:text-gray-200\">{request.branch.name}</div>\n                              </td>\n                            );\n                          case 'dueDate':\n                            const expiryStatusForDate = getExpiryStatus(request.dueDate, 'request');\n                            const expiryColorsForDate = getExpiryColorClasses(expiryStatusForDate);\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <div className={`text-sm ${expiryStatusForDate !== 'none' ? expiryColorsForDate.textClass : 'text-gray-900 dark:text-gray-200'}`}>\n                                  {new Date(request.dueDate).toLocaleDateString()}\n                                  {expiryStatusForDate !== 'none' && (\n                                    <span className=\"ml-2 text-xs\"></span>\n                                  )}\n                                </div>\n                              </td>\n                            );\n                          case 'actions':\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <div className=\"flex space-x-2 action-buttons\">\n                                  <div className=\"status-buttons\">\n                                  {request.status === 'approval' && hasPermission('requests', 'write', 'table') && (\n                                    <>\n                                      <div className=\"relative group\">\n                                        <button\n                                          onClick={() => handleStatusChange(request.id, 'approved')}\n                                          className=\"p-1 bg-green-600 dark:bg-green-500 text-white rounded hover:bg-green-700 dark:hover:bg-green-600\"\n                                        >\n                                          <CheckIcon className=\"h-5 w-5\" />\n                                        </button>\n                                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                          {t('requests.actions.approve')}\n                                        </div>\n                                      </div>\n                                      <div className=\"relative group\">\n                                        <button\n                                          onClick={() => handleStatusChange(request.id, 'to_improve')}\n                                          className=\"p-1 bg-orange-600 dark:bg-orange-500 text-white rounded hover:bg-orange-700 dark:hover:bg-orange-600\"\n                                        >\n                                          <ExclamationTriangleIcon className=\"h-5 w-5\" />\n                                        </button>\n                                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                          {t('requests.actions.improve')}\n                                        </div>\n                                      </div>\n                                      <div className=\"relative group\">\n                                        <button\n                                          onClick={() => handleStatusChange(request.id, 'denied')}\n                                          className=\"p-1 bg-red-600 dark:bg-red-500 text-white rounded hover:bg-red-700 dark:hover:bg-red-600\"\n                                        >\n                                          <XMarkIcon className=\"h-5 w-5\" />\n                                        </button>\n                                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                          {t('requests.actions.deny')}\n                                        </div>\n                                      </div>\n                                    </>\n                                  )}\n                                  {request.status === 'to_improve' && hasPermission('requests', 'write', 'table') && (\n                                    <>\n                                      <div className=\"relative group\">\n                                        <button\n                                          onClick={() => handleStatusChange(request.id, 'approval')}\n                                          className=\"p-1 bg-yellow-600 dark:bg-yellow-500 text-white rounded hover:bg-yellow-700 dark:hover:bg-yellow-600\"\n                                        >\n                                          <ArrowPathIcon className=\"h-5 w-5\" />\n                                        </button>\n                                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                          {t('requests.actions.recheck')}\n                                        </div>\n                                      </div>\n                                      <div className=\"relative group\">\n                                        <button\n                                          onClick={() => handleStatusChange(request.id, 'denied')}\n                                          className=\"p-1 bg-red-600 dark:bg-red-500 text-white rounded hover:bg-red-700 dark:hover:bg-red-600\"\n                                        >\n                                          <XMarkIcon className=\"h-5 w-5\" />\n                                        </button>\n                                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                          {t('requests.actions.deny')}\n                                        </div>\n                                      </div>\n                                    </>\n                                  )}\n                                  {(request.status === 'approved' || request.status === 'denied') && hasPermission('requests', 'write', 'table') && (\n                                    <div className=\"relative group\">\n                                      <button\n                                        onClick={() => handleStatusChange(request.id, 'approval')}\n                                        className=\"p-1 bg-yellow-600 dark:bg-yellow-500 text-white rounded hover:bg-yellow-700 dark:hover:bg-yellow-600\"\n                                      >\n                                        <ArrowPathIcon className=\"h-5 w-5\" />\n                                      </button>\n                                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                        {t('requests.actions.recheck')}\n                                      </div>\n                                    </div>\n                                  )}\n                                  </div>\n                                  {hasPermission('requests', 'write', 'table') && (\n                                    <button\n                                      onClick={() => {\n                                        setSelectedRequest(request);\n                                        setIsEditModalOpen(true);\n                                      }}\n                                      className=\"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 edit-button ml-0.5\"\n                                    >\n                                      <PencilIcon className=\"h-5 w-5\" />\n                                    </button>\n                                  )}\n                                  {hasPermission('requests', 'both', 'table') && (\n                                    <div className=\"relative group\">\n                                      <button\n                                        onClick={() => handleCopyRequest(request)}\n                                        className=\"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 copy-button ml-0.5\"\n                                      >\n                                        <DocumentDuplicateIcon className=\"h-5 w-5\" />\n                                      </button>\n                                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                                        {t('requests.actions.copy')}\n                                      </div>\n                                    </div>\n                                  )}\n                                </div>\n                              </td>\n                            );\n                          default:\n                            return null;\n                        }\n                        })}\n                      </tr>\n                    );\n                  })}\n                </>\n              )}\n            </tbody>\n          </table>\n        </div>\n        ) : (\n          /* Card-Ansicht - ohne Box-Schattierung, Cards auf voller Breite */\n          <div className=\"-mx-3 sm:-mx-4 md:-mx-6\">\n            {filteredAndSortedRequests.length === 0 ? (\n              <div className=\"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400\">\n                <DocumentTextIcon className=\"h-10 w-10 mb-4 text-gray-400 dark:text-gray-500\" />\n                <div className=\"text-sm\">{t('requests.createRequest.noRequestsFound')}</div>\n              </div>\n            ) : (\n              <CardGrid>\n                {filteredAndSortedRequests.slice(0, requestsDisplayLimit).map(request => {\n                  // Metadaten basierend auf sichtbaren Einstellungen - strukturiert nach Position\n                  const metadata: MetadataItem[] = [];\n                  \n                  // Links: Niederlassung (meist ausgeblendet)\n                  if (visibleCardMetadata.has('branch')) {\n                    metadata.push({\n                      icon: <BuildingOfficeIcon className=\"h-4 w-4\" />,\n                      label: t('requests.columns.branch'),\n                      value: request.branch.name,\n                      section: 'left'\n                    });\n                  }\n                  \n                  // Haupt-Metadaten: Typ (ohne Label, nur Wert) - auf gleicher Zeile wie Titel, Datum, Status\n                  if (visibleCardMetadata.has('type')) {\n                    const typeIcon = getRequestTypeIcon(request.type);\n                    const typeLabel = request.type ? t(`requests.types.${request.type}`) : t('requests.types.other');\n                    metadata.push({\n                      label: '', // Kein Label, nur Wert\n                      value: `${typeIcon} ${typeLabel}${request.isPrivate ? ' ' : ''}`,\n                      section: 'main'\n                    });\n                  }\n                  \n                  // Haupt-Metadaten: Ersteller (zweite Zeile, unter Typ)\n                  if (visibleCardMetadata.has('requestedBy')) {\n                    // Benutzernamen auf 4 Zeichen krzen\n                    const requestedByName = `${request.requestedBy.firstName} ${request.requestedBy.lastName}`;\n                    const shortenedName = requestedByName.length > 4 ? requestedByName.substring(0, 4) : requestedByName;\n                    metadata.push({\n                      icon: <UserIcon className=\"h-4 w-4\" />,\n                      label: t('requests.columns.requestedBy'),\n                      value: shortenedName,\n                      section: 'main-second'\n                    });\n                  }\n                  \n                  // Verantwortlicher (dritte Zeile, unter Ersteller)\n                  if (visibleCardMetadata.has('responsible')) {\n                    // Benutzernamen auf 4 Zeichen krzen\n                    const responsibleName = `${request.responsible.firstName} ${request.responsible.lastName}`;\n                    const shortenedName = responsibleName.length > 4 ? responsibleName.substring(0, 4) : responsibleName;\n                    metadata.push({\n                      icon: <UserIcon className=\"h-4 w-4\" />,\n                      label: t('requests.columns.responsible'),\n                      value: shortenedName,\n                      section: 'main-third'\n                    });\n                  }\n                  \n                  // Rechts: Flligkeit (erste Zeile rechts, neben Status)\n                  if (visibleCardMetadata.has('dueDate')) {\n                    const dueDateItem = createDueDateMetadataItem(\n                      request.dueDate,\n                      'request',\n                      undefined,\n                      undefined,\n                      <CalendarIcon className=\"h-4 w-4\" />,\n                      t('requests.columns.dueDate'),\n                      (date) => format(date, 'dd.MM.yyyy', { locale: de }),\n                      false // Keine Badge-Art, nur Text\n                    );\n                    metadata.push({\n                      ...dueDateItem,\n                      section: 'right-inline' // Neue Section fr inline rechts (neben Status)\n                    });\n                  }\n                  \n                  // Full-Width: Beschreibung\n                  if (visibleCardMetadata.has('description') && request.description) {\n                    metadata.push({\n                      label: t('common.description'),\n                      value: '', // Nicht verwendet bei descriptionContent\n                      descriptionContent: request.description, // Fr expandierbare Beschreibung\n                      attachmentMetadata: request.attachments || [], // Attachment-Metadaten fr Vorschau\n                      section: 'full'\n                    });\n                  }\n\n                  // Action-Buttons zusammenstellen\n                  const actionButtons = (\n                    <div className=\"flex items-center space-x-2\">\n                      {/* Status-Buttons */}\n                      {request.status === 'approval' && hasPermission('requests', 'write', 'table') && (\n                        <>\n                          <div className=\"relative group\">\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleStatusChange(request.id, 'approved');\n                              }}\n                              className=\"p-1.5 bg-green-600 text-white rounded hover:bg-green-700\"\n                            >\n                              <CheckIcon className=\"h-4 w-4\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('requests.actions.approve')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleStatusChange(request.id, 'to_improve');\n                              }}\n                              className=\"p-1.5 bg-orange-600 text-white rounded hover:bg-orange-700\"\n                            >\n                              <ExclamationTriangleIcon className=\"h-4 w-4\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('requests.actions.improve')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleStatusChange(request.id, 'denied');\n                              }}\n                              className=\"p-1.5 bg-red-600 text-white rounded hover:bg-red-700\"\n                            >\n                              <XMarkIcon className=\"h-4 w-4\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('requests.actions.deny')}\n                            </div>\n                          </div>\n                        </>\n                      )}\n                      {request.status === 'to_improve' && hasPermission('requests', 'write', 'table') && (\n                        <>\n                          <div className=\"relative group\">\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleStatusChange(request.id, 'approval');\n                              }}\n                              className=\"p-1.5 bg-yellow-600 text-white rounded hover:bg-yellow-700\"\n                            >\n                              <ArrowPathIcon className=\"h-4 w-4\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('requests.actions.recheck')}\n                            </div>\n                          </div>\n                          <div className=\"relative group\">\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                handleStatusChange(request.id, 'denied');\n                              }}\n                              className=\"p-1.5 bg-red-600 text-white rounded hover:bg-red-700\"\n                            >\n                              <XMarkIcon className=\"h-4 w-4\" />\n                            </button>\n                            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                              {t('requests.actions.deny')}\n                            </div>\n                          </div>\n                        </>\n                      )}\n                      {(request.status === 'approved' || request.status === 'denied') && hasPermission('requests', 'write', 'table') && (\n                        <div className=\"relative group\">\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleStatusChange(request.id, 'approval');\n                            }}\n                            className=\"p-1.5 bg-yellow-600 text-white rounded hover:bg-yellow-700\"\n                          >\n                            <ArrowPathIcon className=\"h-4 w-4\" />\n                          </button>\n                          <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                            {t('requests.actions.recheck')}\n                          </div>\n                        </div>\n                      )}\n                      {hasPermission('requests', 'write', 'table') && (\n                        <div className=\"relative group\">\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              setSelectedRequest(request);\n                              setIsEditModalOpen(true);\n                            }}\n                            className=\"p-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                          >\n                            <PencilIcon className=\"h-4 w-4\" />\n                          </button>\n                          <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                            {t('common.edit')}\n                          </div>\n                        </div>\n                      )}\n                      {hasPermission('requests', 'both', 'table') && (\n                        <div className=\"relative group\">\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleCopyRequest(request);\n                            }}\n                            className=\"p-1.5 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                          >\n                            <DocumentDuplicateIcon className=\"h-4 w-4\" />\n                          </button>\n                          <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                            {t('requests.actions.copy')}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  );\n\n                  // Status-Workflow bestimmen fr Shift-Buttons\n                  const previousStatus = getPreviousStatus(request.status);\n                  const nextStatuses = getNextStatuses(request.status);\n                  const firstNextStatus = nextStatuses.length > 0 ? nextStatuses[0] : null;\n\n                  return (\n                    <DataCard\n                      key={request.id}\n                      title={\n                        <span>\n                          <span className=\"text-xs text-gray-600 dark:text-gray-400\">{request.id}:</span>{' '}\n                          <span>{request.title}</span>\n                        </span>\n                      }\n                      status={{\n                        label: getStatusText(request.status, 'request', t),\n                        color: getStatusColor(request.status, 'request'),\n                        onPreviousClick: previousStatus && hasPermission('requests', 'write', 'table')\n                          ? () => handleStatusChange(request.id, previousStatus)\n                          : undefined,\n                        onNextClick: firstNextStatus && hasPermission('requests', 'write', 'table')\n                          ? () => handleStatusChange(request.id, firstNextStatus)\n                          : undefined\n                      }}\n                      metadata={metadata}\n                      actions={actionButtons}\n                    />\n                  );\n                })}\n              </CardGrid>\n            )}\n          </div>\n        )}\n        \n        {/*  Loading Indicator entfernt - Infinite Scroll ldt keine Daten mehr, nur Anzeige */}\n    </>\n  );\n};\n\nexport default Requests; ","import React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { format, startOfWeek, endOfWeek, eachDayOfInterval, getWeek, getYear, parse, addDays } from 'date-fns';\nimport { de, es, enUS } from 'date-fns/locale';\nimport { useLanguage } from '../hooks/useLanguage.ts';\nimport { ChartBarIcon, DocumentArrowDownIcon, CalendarIcon, ClockIcon } from '@heroicons/react/24/outline';\nimport { API_URL, API_ENDPOINTS } from '../config/api.ts';\nimport WorktimeList from './WorktimeList.tsx';\nimport axios from 'axios';\nimport axiosInstance from '../config/axios.ts';\nimport { WorktimeModal } from './WorktimeModal.tsx';\nimport { convertWeekToDate, getWeekDays, getQuinzenaFromDate, convertQuinzenaToDate, getQuinzenaDays, getCurrentQuinzena } from '../utils/dateUtils.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { useOrganization } from '../contexts/OrganizationContext.tsx';\n\n// Neue Schnittstelle fr das WorktimeModal mit selectedDate\ninterface WorktimeModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    selectedDate: string; // Im Kontext von WorktimeStats ist selectedDate immer erforderlich\n}\n\ninterface WorktimeStats {\n    totalHours: number;\n    averageHoursPerDay: number;\n    daysWorked: number;\n    weeklyData: {\n        day: string;\n        hours: number;\n        date: string; // Datum im Format YYYY-MM-DD\n    }[];\n}\n\ntype TabType = 'worktime' | 'commissions';\n\nconst WorktimeStats: React.FC = () => {\n    const { t, i18n } = useTranslation();\n    const { activeLanguage } = useLanguage();\n    const { user } = useAuth();\n    const { organization } = useOrganization();\n    const [stats, setStats] = useState<WorktimeStats | null>(null);\n    const [fullStats, setFullStats] = useState<WorktimeStats | null>(null); //  Vollstndige Stats (im Hintergrund geladen)\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n    const [maxHours, setMaxHours] = useState<number>(8); // Standard 8 Stunden\n    const [activeTab, setActiveTab] = useState<TabType>('worktime');\n    const [commissionStats, setCommissionStats] = useState<any>(null);\n    const [commissionLoading, setCommissionLoading] = useState(false);\n    \n    // Prfe ob Organisation oder User aus Kolumbien kommt\n    const isColombia = useMemo(() => {\n        // Prfe zuerst User-Land, dann Organisation (falls vorhanden)\n        const userIsColombia = user?.country === 'CO';\n        const orgIsColombia = organization?.country === 'CO'; // KORREKTUR: Direkt auf organization, nicht settings\n        const result = userIsColombia || orgIsColombia;\n        console.log('Quinzena-Check:', { \n            userCountry: user?.country, \n            orgCountry: organization?.country, // KORREKTUR: Direkt auf organization\n            isColombia: result \n        });\n        return result;\n    }, [user?.country, organization?.country]); // KORREKTUR: Spezifische Dependency\n    \n    // Ref um zu tracken, ob useQuinzena manuell gendert wurde (nicht durch isColombia)\n    const isManualPeriodChange = useRef(false);\n    \n    // State fr Woche/Quinzena-Modus\n    // Initial: basierend auf isColombia (kann auch user?.country prfen, bevor organization geladen ist)\n    const [useQuinzena, setUseQuinzena] = useState<boolean>(() => {\n        // Initial: Prfe user?.country, da organization mglicherweise noch nicht geladen ist\n        return user?.country === 'CO';\n    });\n    \n    // Dynamisches Locale basierend auf aktueller Sprache\n    const dateLocale = useMemo(() => {\n        const lang = activeLanguage || i18n.language || 'de';\n        switch (lang) {\n            case 'es': return es;\n            case 'en': return enUS;\n            default: return de;\n        }\n    }, [activeLanguage, i18n.language]);\n    \n    // Aktuelle Woche/Quinzena im Format YYYY-Www oder YYYY-Qq fr das Input-Element\n    const today = new Date();\n    \n    const currentWeekInput = useMemo(() => {\n        return `${getYear(today)}-W${String(getWeek(today, { locale: dateLocale })).padStart(2, '0')}`;\n    }, [dateLocale]);\n    \n    const currentQuinzenaInput = useMemo(() => {\n        return getCurrentQuinzena();\n    }, []);\n    \n    const [selectedWeekInput, setSelectedWeekInput] = useState<string>(currentWeekInput);\n    const [selectedQuinzenaInput, setSelectedQuinzenaInput] = useState<string>(currentQuinzenaInput);\n    \n    // Aktualisiere selectedWeekInput/selectedQuinzenaInput wenn sich die Sprache ndert\n    useEffect(() => {\n        if (useQuinzena) {\n            setSelectedQuinzenaInput(currentQuinzenaInput);\n        } else {\n            setSelectedWeekInput(currentWeekInput);\n        }\n    }, [currentWeekInput, currentQuinzenaInput, useQuinzena]);\n    \n    // Berechne das Datum des Montags der aktuellen Woche oder Start der Quinzena\n    const currentMonday = startOfWeek(today, { weekStartsOn: 1 });\n    const currentQuinzenaStart = convertQuinzenaToDate(currentQuinzenaInput);\n    \n    const [selectedWeekDate, setSelectedWeekDate] = useState<string>(format(currentMonday, 'yyyy-MM-dd'));\n    const [selectedQuinzenaDate, setSelectedQuinzenaDate] = useState<string>(currentQuinzenaStart);\n    \n    // Sicherstellen, dass selectedDate immer korrekt ist (MUSS vor useEffect definiert werden)\n    const selectedDate = useMemo(() => {\n        const result = useQuinzena \n            ? (selectedQuinzenaDate || convertQuinzenaToDate(getCurrentQuinzena()))\n            : (selectedWeekDate || format(startOfWeek(today, { weekStartsOn: 1 }), 'yyyy-MM-dd'));\n        console.log('selectedDate calculated:', { useQuinzena, selectedQuinzenaDate, selectedWeekDate, result });\n        return result;\n    }, [useQuinzena, selectedQuinzenaDate, selectedWeekDate]);\n    \n    // State fr das WorktimeModal\n    const [showWorkTimeModal, setShowWorkTimeModal] = useState(false);\n    const [selectedDateForModal, setSelectedDateForModal] = useState<string>('');\n\n    //  MEMORY: Cleanup - Stats beim Unmount lschen\n    useEffect(() => {\n        return () => {\n            setStats(null);\n            setFullStats(null);\n            setCommissionStats(null);\n        };\n    }, []); // Nur beim Unmount ausfhren\n\n    //  PERFORMANCE: Priorisierung - Erste 5 Tage zuerst (sichtbarer Teil)\n    // Warte bis user geladen ist, bevor wir Daten laden (um isColombia korrekt zu prfen)\n    useEffect(() => {\n        // Warte bis user geladen ist (um isColombia korrekt zu prfen)\n        if (!user) {\n            return;\n        }\n        //  Lade Stats (Backend gibt alle Tage zurck, Frontend zeigt zuerst 5)\n        fetchStats();\n    }, [selectedDate, user, useQuinzena]);\n\n    // Neue Funktion: fetchStatsWithDate (kann mit explizitem Datum aufgerufen werden)\n    const fetchStatsWithDate = async (dateToSend: string, isQuinzena: boolean) => {\n        try {\n            setLoading(true);\n            \n            if (!dateToSend) {\n                console.error('Kein Datum zum Senden verfgbar');\n                setError('Kein Datum verfgbar');\n                setLoading(false);\n                return;\n            }\n            \n            console.log('Fetch Stats:', { isQuinzena, dateToSend });\n            \n            const endpoint = isQuinzena \n                ? `${API_ENDPOINTS.WORKTIME.STATS}?quinzena=${dateToSend}`\n                : `${API_ENDPOINTS.WORKTIME.STATS}?week=${dateToSend}`;\n            \n            console.log('API Endpoint:', endpoint);\n            \n            const response = await axiosInstance.get(endpoint);\n            const data = response.data;\n            \n            console.log('API Response:', data);\n            \n            // Wichtig: Stelle sicher, dass die weeklyData das richtige date-Format haben\n            if (data && data.weeklyData) {\n                if (isQuinzena) {\n                    // Fr Quinzenas: Backend gibt bereits korrekte Daten mit date zurck\n                    console.log('Quinzena-Daten vom Backend:', {\n                        totalHours: data.totalHours,\n                        weeklyDataLength: data.weeklyData.length,\n                        weeklyData: data.weeklyData\n                    });\n                    \n                    // Stelle sicher, dass alle Eintrge ein date-Feld haben und sortiere nach Datum\n                    const validatedData = {\n                        ...data,\n                        weeklyData: data.weeklyData\n                            .map(item => ({\n                                ...item,\n                                date: item.date || '',\n                                hours: item.hours || 0\n                            }))\n                            .sort((a, b) => {\n                                // Sortiere nach Datum\n                                if (a.date && b.date) {\n                                    return a.date.localeCompare(b.date);\n                                }\n                                return 0;\n                            })\n                    };\n                    console.log('Validierte Quinzena-Daten:', validatedData);\n                    //  PERFORMANCE: Priorisierung - Erste 5 Tage zuerst (sichtbarer Teil)\n                    const first5Days = {\n                        ...validatedData,\n                        weeklyData: validatedData.weeklyData.slice(0, 5) //  Nur erste 5 Tage\n                    };\n                    setStats(first5Days);\n                    setFullStats(validatedData); //  Vollstndige Stats fr spter\n                } else {\n                    // Fr Wochen: Mappe Wochentage zu Daten\n                    const weekdayMapping: Record<string, number> = {\n                        \"Montag\": 1,\n                        \"Dienstag\": 2,\n                        \"Mittwoch\": 3,\n                        \"Donnerstag\": 4,\n                        \"Freitag\": 5,\n                        \"Samstag\": 6,\n                        \"Sonntag\": 7,\n                        // Fallback fr andere Sprachen\n                        [t('worktime.days.monday')]: 1,\n                        [t('worktime.days.tuesday')]: 2,\n                        [t('worktime.days.wednesday')]: 3,\n                        [t('worktime.days.thursday')]: 4,\n                        [t('worktime.days.friday')]: 5,\n                        [t('worktime.days.saturday')]: 6,\n                        [t('worktime.days.sunday')]: 7\n                    };\n                    \n                    // Berechne die Tagesdaten fr die Woche (7 Tage)\n                    const periodDates: string[] = [];\n                    for (let i = 0; i < 7; i++) {\n                        periodDates.push(incrementDateString(dateToSend, i));\n                    }\n                    \n                    // Konvertiere die Wochentage in Daten im YYYY-MM-DD Format\n                    const enrichedData = {\n                        ...data,\n                        weeklyData: data.weeklyData.map((item) => {\n                            const dayIndex = weekdayMapping[item.day as keyof typeof weekdayMapping];\n                            if (dayIndex === undefined) {\n                                console.error(`Unbekannter Wochentag: ${item.day}`);\n                                return item;\n                            }\n                            \n                            // Fr Wochen: Da unser weekdayMapping bei 1 beginnt, mssen wir 1 subtrahieren\n                            const formattedDate = periodDates[dayIndex - 1];\n                            return {\n                                ...item,\n                                date: formattedDate\n                            };\n                        })\n                    };\n                    \n                    //  PERFORMANCE: Priorisierung - Erste 5 Tage zuerst (sichtbarer Teil)\n                    const first5Days = {\n                        ...enrichedData,\n                        weeklyData: enrichedData.weeklyData.slice(0, 5) //  Nur erste 5 Tage\n                    };\n                    setStats(first5Days);\n                    setFullStats(enrichedData); //  Vollstndige Stats fr spter\n                }\n            } else {\n                //  PERFORMANCE: Priorisierung - Erste 5 Tage zuerst (sichtbarer Teil)\n                const first5Days = data.weeklyData ? {\n                    ...data,\n                    weeklyData: data.weeklyData.slice(0, 5) //  Nur erste 5 Tage\n                } : data;\n                setStats(first5Days);\n                setFullStats(data); //  Vollstndige Stats fr spter\n            }\n            \n            //  PERFORMANCE: Rest im Hintergrund (nach 200ms Verzgerung)\n            // Zeige vollstndige Stats nach kurzer Verzgerung\n            setTimeout(() => {\n                if (fullStats === null && data && data.weeklyData) {\n                    setStats(data); //  Zeige vollstndige Stats\n                }\n            }, 200);\n            \n            setError(null);\n        } catch (err: any) {\n            console.error('Fehler beim Abrufen der Statistikdaten:', err);\n            setError(err?.response?.data?.message || 'Fehler beim Laden der Daten');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    // Alte fetchStats-Funktion bleibt fr useEffect-Kompatibilitt\n    const fetchStats = async () => {\n        fetchStatsWithDate(selectedDate, useQuinzena);\n    };\n\n    const handleExport = async () => {\n        try {\n            const token = localStorage.getItem('token');\n            const response = await axiosInstance.get(`${API_ENDPOINTS.WORKTIME.BASE}/export?week=${selectedWeekDate}`, {\n                responseType: 'blob'\n            });\n\n            const blob = new Blob([response.data], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\n            const url = window.URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = t('worktime.stats.exportFilename', { week: selectedWeekInput.split('W')[1] });\n            document.body.appendChild(a);\n            a.click();\n            window.URL.revokeObjectURL(url);\n            document.body.removeChild(a);\n        } catch (error) {\n            console.error('Fehler beim Exportieren:', error);\n            setError(t('worktime.stats.export') + ': ' + t('common.error'));\n        }\n    };\n\n    const handleQuinzenaChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const newQuinzenaInput = e.target.value;\n        if (!newQuinzenaInput) return;\n        \n        setSelectedQuinzenaInput(newQuinzenaInput);\n        \n        // Konvertiere das Quinzena-Format in ein Datum fr die API\n        const newQuinzenaDate = convertQuinzenaToDate(newQuinzenaInput);\n        setSelectedQuinzenaDate(newQuinzenaDate);\n        \n        // Explizit Daten neu laden\n        queueMicrotask(() => {\n            fetchStatsWithDate(newQuinzenaDate, true);\n        });\n    };\n    \n    // Handler fr Radio-Button-Wechsel zwischen Semana und Quinzena\n    const handlePeriodChange = (newUseQuinzena: boolean) => {\n        // Markiere als manuelle nderung\n        isManualPeriodChange.current = true;\n        \n        // 1. Setze useQuinzena sofort\n        setUseQuinzena(newUseQuinzena);\n        \n        // 2. Berechne das korrekte Datum synchron\n        let newDate: string;\n        let newInput: string;\n        \n        if (newUseQuinzena) {\n            // Quinzena-Modus\n            const currentQuinzena = getCurrentQuinzena();\n            newInput = currentQuinzena;\n            newDate = convertQuinzenaToDate(currentQuinzena);\n            setSelectedQuinzenaInput(newInput);\n            setSelectedQuinzenaDate(newDate);\n        } else {\n            // Woche-Modus\n            newInput = currentWeekInput;\n            newDate = convertWeekToDate(currentWeekInput);\n            setSelectedWeekInput(newInput);\n            setSelectedWeekDate(newDate);\n        }\n        \n        // 3. Rufe fetchStatsWithDate explizit mit dem neuen Datum auf\n        // Verwende queueMicrotask, um sicherzustellen, dass State-Updates verarbeitet wurden\n        queueMicrotask(() => {\n            fetchStatsWithDate(newDate, newUseQuinzena);\n            // Reset nach kurzer Verzgerung\n            setTimeout(() => {\n                isManualPeriodChange.current = false;\n            }, 100);\n        });\n    };\n    \n    // useEffect fr automatische isColombia-nderungen (nicht fr manuelle Radio-Button-Wechsel)\n    useEffect(() => {\n        // berspringe, wenn die nderung manuell war\n        if (isManualPeriodChange.current) {\n            return;\n        }\n        \n        // Nur ausfhren, wenn sich isColombia ndert (nicht bei manuellem Radio-Button-Klick)\n        if (isColombia && !useQuinzena) {\n            // Automatisch auf Quinzena umschalten wenn Kolumbien erkannt wird\n            const currentQuinzena = getCurrentQuinzena();\n            setSelectedQuinzenaInput(currentQuinzena);\n            const quinzenaDate = convertQuinzenaToDate(currentQuinzena);\n            setSelectedQuinzenaDate(quinzenaDate);\n            setUseQuinzena(true);\n            // Daten neu laden\n            queueMicrotask(() => {\n                fetchStatsWithDate(quinzenaDate, true);\n            });\n        } else if (!isColombia && useQuinzena) {\n            // Automatisch auf Woche umschalten wenn nicht Kolumbien\n            const weekDate = convertWeekToDate(currentWeekInput);\n            setSelectedWeekInput(currentWeekInput);\n            setSelectedWeekDate(weekDate);\n            setUseQuinzena(false);\n            // Daten neu laden\n            queueMicrotask(() => {\n                fetchStatsWithDate(weekDate, false);\n            });\n        }\n    }, [isColombia, useQuinzena]); // isColombia UND useQuinzena als Dependencies, aber mit Ref-Check\n\n    // Funktion zum ffnen des Modals fr den ausgewhlten Tag\n    const openWorkTimeModal = (date: string) => {\n        // Sicherheitsprfung: Falls date undefined ist, nichts tun\n        if (!date) {\n            console.error('Kein Datum fr Modal angegeben');\n            return;\n        }\n        \n        // Klare Debug-Ausgabe ohne unntige Komplexitt\n        // console.log(`Modal wird geffnet mit Datum: ${date}`);\n        \n        // Einfache Sicherheitsberprfung: Stelle sicher, dass ein gltiges Datumsformat verwendet wird\n        if (!date.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n            console.error(`Ungltiges Datum fr Modal: ${date}`);\n            return;\n        }\n        \n        // Keine weitere Manipulationen am Datum - nutze direkt den bergebenen Wert\n        setSelectedDateForModal(date);\n        setShowWorkTimeModal(true);\n    };\n\n    // Funktion zum Schlieen des Modals\n    const closeWorkTimeModal = () => {\n        setShowWorkTimeModal(false);\n    };\n\n    useEffect(() => {\n        if (!loading && stats && stats.weeklyData) {\n            // Finde den hchsten Stundenwert fr die Skalierung\n            const maxHours = stats.weeklyData.reduce((max, day) => {\n                const hours = typeof day.hours === 'number' ? day.hours : parseFloat(day.hours);\n                return hours > max ? hours : max;\n            }, 0);\n            \n            setMaxHours(maxHours);\n        }\n    }, [loading, stats]);\n\n    // Lade Kommissions-Daten\n    const fetchCommissionStats = useCallback(async () => {\n        if (!user?.id) return;\n        try {\n            setCommissionLoading(true);\n            const startDate = new Date(new Date().getFullYear(), 0, 1);\n            const endDate = new Date();\n            const response = await axiosInstance.get(API_ENDPOINTS.TOUR_BOOKINGS.COMMISSIONS(user.id), {\n                params: {\n                    startDate: startDate.toISOString(),\n                    endDate: endDate.toISOString()\n                }\n            });\n            if (response.data.success) {\n                setCommissionStats(response.data.data);\n            }\n        } catch (err: any) {\n            console.error('Fehler beim Laden der Kommissions-Daten:', err);\n        } finally {\n            setCommissionLoading(false);\n        }\n    }, [user?.id]);\n\n    useEffect(() => {\n        if (activeTab === 'commissions' && user?.id) {\n            fetchCommissionStats();\n        }\n    }, [activeTab, user?.id, fetchCommissionStats]);\n\n    if (loading && activeTab === 'worktime') return <div className=\"p-4\">{t('common.loading')}</div>;\n    if (error && activeTab === 'worktime') return <div className=\"p-4 text-red-600\">{error}</div>;\n    if (!stats && activeTab === 'worktime') return null;\n\n    const periodDays = useQuinzena ? getQuinzenaDays(selectedQuinzenaDate) : getWeekDays(selectedWeekDate);\n    \n    // Finde den hchsten Stundenwert fr die Skalierung\n    // Der scaleMax-Wert wird aus dem State-maxHours berechnet\n    const scaleMax = Math.max(8, Math.ceil(maxHours * 1.1));\n    \n    // Konstante fr die Sollarbeitszeit aus dem Benutzerprofil\n    const targetWorkHours = user?.normalWorkingHours ?? 7.6;\n\n    return (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n                <div className=\"flex items-center pl-2 sm:pl-0 flex-shrink min-w-0\">\n                    <ChartBarIcon className=\"h-5 w-5 sm:h-6 sm:w-6 mr-2 dark:text-white flex-shrink-0\" />\n                    <h2 className=\"text-base sm:text-lg md:text-xl font-semibold dark:text-white truncate\">{t('worktime.stats.title')}</h2>\n                </div>\n                \n                {/* Tab-Navigation */}\n                <div className=\"flex items-center gap-2 border-b border-gray-200 dark:border-gray-700\">\n                    <button\n                        onClick={() => setActiveTab('worktime')}\n                        className={`py-2 px-3 border-b-2 font-medium text-sm ${\n                            activeTab === 'worktime'\n                                ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                        }`}\n                    >\n                        {t('worktime.stats.tabs.worktime', 'Arbeitszeit')}\n                    </button>\n                    <button\n                        onClick={() => setActiveTab('commissions')}\n                        className={`py-2 px-3 border-b-2 font-medium text-sm ${\n                            activeTab === 'commissions'\n                                ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300'\n                        }`}\n                    >\n                        {t('worktime.stats.tabs.commissions', 'Kommissionen')}\n                    </button>\n                </div>\n                <div className=\"flex items-center space-x-2 sm:space-x-4\">\n                    {/* Toggle-Button-Switch fr Woche/Quinzena - nur anzeigen wenn Kolumbien */}\n                    {isColombia && (\n                        <div className=\"flex items-center rounded-lg border border-gray-300 dark:border-gray-600 p-0.5 sm:p-1 bg-gray-50 dark:bg-gray-800\">\n                            <button\n                                type=\"button\"\n                                onClick={() => handlePeriodChange(false)}\n                                className={`flex items-center gap-1 sm:gap-2 px-1.5 sm:px-3 py-1 sm:py-1.5 rounded-md text-sm font-medium transition-all duration-200 ${\n                                    !useQuinzena\n                                        ? 'bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm'\n                                        : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200'\n                                }`}\n                            >\n                                <CalendarIcon className=\"h-3.5 w-3.5 sm:h-4 sm:w-4\" />\n                                <span className=\"hidden sm:inline whitespace-nowrap\">{t('worktime.stats.week')}</span>\n                                <span className=\"sm:hidden whitespace-nowrap\">7d</span>\n                            </button>\n                            <button\n                                type=\"button\"\n                                onClick={() => handlePeriodChange(true)}\n                                className={`flex items-center gap-1 sm:gap-2 px-1.5 sm:px-3 py-1 sm:py-1.5 rounded-md text-sm font-medium transition-all duration-200 ${\n                                    useQuinzena\n                                        ? 'bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm'\n                                        : 'text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200'\n                                }`}\n                            >\n                                <ClockIcon className=\"h-3.5 w-3.5 sm:h-4 sm:w-4\" />\n                                <span className=\"hidden sm:inline whitespace-nowrap\">{t('worktime.stats.quinzena')}</span>\n                                <span className=\"sm:hidden whitespace-nowrap\">15d</span>\n                            </button>\n                        </div>\n                    )}\n                    {useQuinzena ? (\n                        <input\n                            type=\"text\"\n                            pattern=\"\\d{4}-\\d{2}-Q[12]\"\n                            placeholder=\"YYYY-MM-Q1\"\n                            value={selectedQuinzenaInput}\n                            onChange={(e) => {\n                                const value = e.target.value;\n                                // Format: YYYY-MM-Q1 oder YYYY-MM-Q2\n                                if (/^\\d{4}-\\d{2}-Q[12]$/.test(value) || value === '') {\n                                    setSelectedQuinzenaInput(value);\n                                    if (value.match(/^\\d{4}-\\d{2}-Q[12]$/)) {\n                                        const newDate = convertQuinzenaToDate(value);\n                                        setSelectedQuinzenaDate(newDate);\n                                        // Explizit Daten neu laden\n                                        queueMicrotask(() => {\n                                            fetchStatsWithDate(newDate, true);\n                                        });\n                                    }\n                                }\n                            }}\n                            className=\"border border-gray-300 dark:border-gray-600 rounded-md text-sm h-7 sm:h-10 px-1.5 sm:px-3 dark:bg-gray-700 dark:text-white min-w-28 w-28 sm:w-28\"\n                            title={t('worktime.stats.quinzenaFormat')}\n                        />\n                    ) : (\n                        <input\n                            type=\"text\"\n                            pattern=\"\\d{4}-W\\d{2}\"\n                            placeholder=\"YYYY-Www\"\n                            value={selectedWeekInput}\n                            onChange={(e) => {\n                                const value = e.target.value;\n                                // Format: YYYY-Www\n                                if (/^\\d{4}-W\\d{1,2}$/.test(value) || value === '') {\n                                    setSelectedWeekInput(value);\n                                    if (value.match(/^\\d{4}-W\\d{2}$/)) {\n                                        const newDate = convertWeekToDate(value);\n                                        setSelectedWeekDate(newDate);\n                                        // Explizit Daten neu laden\n                                        queueMicrotask(() => {\n                                            fetchStatsWithDate(newDate, false);\n                                        });\n                                    }\n                                }\n                            }}\n                            className=\"border border-gray-300 dark:border-gray-600 rounded-md text-sm h-7 sm:h-10 px-1.5 sm:px-3 dark:bg-gray-700 dark:text-white min-w-28 w-28 sm:w-28\"\n                            title={t('worktime.stats.weekFormat')}\n                        />\n                    )}\n                    <button\n                        onClick={handleExport}\n                        className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1 sm:p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center min-w-7 min-h-7 sm:min-w-8 sm:min-h-8 w-7 h-7 sm:w-8 sm:h-8\"\n                        title={t('worktime.stats.export')}\n                        aria-label={t('worktime.stats.exportTitle')}\n                        style={{ marginTop: '1px', marginBottom: '1px' }}\n                    >\n                        <DocumentArrowDownIcon className=\"h-3.5 w-3.5 sm:h-4 sm:w-4\" />\n                    </button>\n                </div>\n            </div>\n\n            {/* Tab-Content */}\n            {activeTab === 'worktime' && (\n                <>\n            <div className=\"flex flex-row gap-2 mb-8 overflow-x-auto\">\n                <div className=\"bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg flex-1 min-w-0\">\n                    <h3 className=\"text-lg font-medium text-blue-900 dark:text-blue-100 mb-2 whitespace-nowrap text-sm sm:text-base md:text-lg text-center\">{t('worktime.stats.totalHours')}</h3>\n                    <p className=\"text-xl sm:text-2xl md:text-3xl font-bold text-blue-600 dark:text-blue-400 whitespace-nowrap text-center\">{stats.totalHours}{t('worktime.stats.hourShort')}</p>\n                </div>\n                <div className=\"bg-green-50 dark:bg-green-900/30 p-4 rounded-lg flex-1 min-w-0\">\n                    <h3 className=\"text-lg font-medium text-green-900 dark:text-green-100 mb-2 whitespace-nowrap text-sm sm:text-base md:text-lg text-center\">{t('worktime.stats.averagePerDay')}</h3>\n                    <p className=\"text-xl sm:text-2xl md:text-3xl font-bold text-green-600 dark:text-green-400 whitespace-nowrap text-center\">{stats.averageHoursPerDay}{t('worktime.stats.hourShort')}</p>\n                </div>\n                <div className=\"bg-purple-50 dark:bg-purple-900/30 p-4 rounded-lg flex-1 min-w-0\">\n                    <h3 className=\"text-lg font-medium text-purple-900 dark:text-purple-100 mb-2 whitespace-nowrap text-sm sm:text-base md:text-lg text-center\">{t('worktime.stats.workDays')}</h3>\n                    <p className=\"text-xl sm:text-2xl md:text-3xl font-bold text-purple-600 dark:text-purple-400 whitespace-nowrap text-center\">{stats.daysWorked}</p>\n                </div>\n            </div>\n\n            <div className=\"mt-8\">\n                <h3 className=\"text-lg font-medium mb-4 dark:text-white\">\n                    {useQuinzena ? t('worktime.stats.quinzenaProgress') : t('worktime.stats.weeklyProgress')}\n                </h3>\n                \n                {/* Chart Container */}\n                <div className=\"relative\" style={{ height: '200px' }}>\n                    {/* Y-Achse Beschriftungen */}\n                    <div className=\"absolute right-0 h-full flex flex-col justify-between text-xs text-gray-500 dark:text-gray-400 pr-1\">\n                        <span>{scaleMax}h</span>\n                        <span>{Math.round(scaleMax * 0.75)}h</span>\n                        <span>{Math.round(scaleMax * 0.5)}h</span>\n                        <span>{Math.round(scaleMax * 0.25)}h</span>\n                        <span>0h</span>\n                    </div>\n                    \n                    {/* Horizontale Hilfslinien */}\n                    <div className=\"absolute inset-0 flex flex-col justify-between pointer-events-none pr-8\">\n                        <div className=\"w-full border-t border-gray-200 dark:border-gray-700\"></div>\n                        <div className=\"w-full border-t border-gray-200 dark:border-gray-700\"></div>\n                        <div className=\"w-full border-t border-gray-200 dark:border-gray-700\"></div>\n                        <div className=\"w-full border-t border-gray-200 dark:border-gray-700\"></div>\n                        <div className=\"w-full border-t border-gray-200 dark:border-gray-700\"></div>\n                    </div>\n                    \n                    {/* Sollarbeitszeit-Linie - nur anzeigen wenn sie ins Diagramm passt */}\n                    {targetWorkHours <= scaleMax && (\n                        <div \n                            className=\"absolute w-full border-t-2 border-red-600 dark:border-red-500 z-10 pr-8\"\n                            style={{ \n                                bottom: `${(targetWorkHours / scaleMax) * 100}%`,\n                                borderStyle: 'dashed'\n                            }}\n                        >\n                            <span className=\"absolute -top-3 right-8 text-xs text-red-600 dark:text-red-500 font-medium\">\n                                {t('worktime.stats.target')}: {targetWorkHours}{t('worktime.stats.hourShort')}\n                            </span>\n                        </div>\n                    )}\n                    \n                    {/* Legende */}\n                    <div className=\"absolute top-0 left-0 text-xs flex items-center gap-2\">\n                        <div className=\"flex items-center\">\n                            <div className=\"w-3 h-3 bg-blue-100 dark:bg-blue-900/50 border-2 border-blue-600 dark:border-blue-400 rounded-sm mr-1\"></div>\n                            <span className=\"text-blue-600 dark:text-blue-400\"> {targetWorkHours}{t('worktime.stats.hourShort')}</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                            <div className=\"w-3 h-3 bg-red-100 dark:bg-red-900/50 border-2 border-red-600 dark:border-red-400 rounded-sm mr-1\"></div>\n                            <span className=\"text-red-600 dark:text-red-400\">&gt; {targetWorkHours}{t('worktime.stats.hourShort')}</span>\n                        </div>\n                    </div>\n                    \n                    {/* Balken */}\n                    <div className=\"absolute inset-0 pr-8 flex items-end\">\n                        <div className=\"w-full h-full flex justify-between\">\n                            {stats.weeklyData.map((dayData, index) => {\n                                // Stellen Sie sicher, dass hours eine Zahl ist\n                                const hours = typeof dayData.hours === 'number' ? dayData.hours : parseFloat(dayData.hours);\n                                \n                                // Berechnung der Hhe fr den Teil ber der Sollarbeitszeit\n                                const overTargetHeight = hours > targetWorkHours \n                                    ? ((hours - targetWorkHours) / scaleMax) * 100 \n                                    : 0;\n                                \n                                // Berechnung der Hhe fr den Teil unter der Sollarbeitszeit\n                                const normalHeight = Math.min(hours, targetWorkHours) / scaleMax * 100;\n                                \n                                // Verwende das bereits berechnete Datum aus weeklyData - keine weitere Berechnung notwendig!\n                                const formattedDate = dayData.date;\n                                \n                                // Fr Quinzenas: dynamische Breite basierend auf Anzahl der Tage\n                                const quinzenaDaysCount = useQuinzena ? getQuinzenaDays(selectedQuinzenaDate).length : 7;\n                                const containerWidth = useQuinzena ? `${100 / quinzenaDaysCount}%` : '13%';\n                                const barWidth = useQuinzena ? 'w-3/12' : 'w-5/12';\n                                \n                                return (\n                                    <div key={index} className=\"flex flex-col items-center\" style={{ width: containerWidth }}>\n                                        <div \n                                            className={`relative ${barWidth} h-full flex flex-col justify-end cursor-pointer`}\n                                            title={t('worktime.stats.clickToView')}\n                                        >\n                                            {/* Teil ber der Sollarbeitszeit (rot) */}\n                                            {overTargetHeight > 0 && (\n                                                <div \n                                                    className=\"w-full bg-red-100 dark:bg-red-900/50 border-2 border-red-600 dark:border-red-400 hover:bg-red-200 dark:hover:bg-red-900/70 cursor-pointer\"\n                                                    onClick={() => openWorkTimeModal(formattedDate)}\n                                                    style={{ \n                                                        height: `${overTargetHeight}%`,\n                                                        minHeight: '2px',\n                                                        borderTopLeftRadius: '8px',\n                                                        borderTopRightRadius: '8px',\n                                                        borderBottomWidth: overTargetHeight > 0 && normalHeight > 0 ? '0' : '2px'\n                                                    }}\n                                                />\n                                            )}\n                                            {/* Teil unter der Sollarbeitszeit (blau) */}\n                                            {normalHeight > 0 && (\n                                                <div \n                                                    className=\"w-full bg-blue-100 dark:bg-blue-900/50 border-2 border-blue-600 dark:border-blue-400 hover:bg-blue-200 dark:hover:bg-blue-900/70 cursor-pointer\"\n                                                    onClick={() => openWorkTimeModal(formattedDate)}\n                                                    style={{ \n                                                        height: `${normalHeight}%`,\n                                                        minHeight: hours > 0 ? '4px' : '0',\n                                                        borderTopLeftRadius: overTargetHeight > 0 ? '0' : '8px',\n                                                        borderTopRightRadius: overTargetHeight > 0 ? '0' : '8px',\n                                                        borderBottomLeftRadius: '4px',\n                                                        borderBottomRightRadius: '4px',\n                                                        borderTopWidth: overTargetHeight > 0 ? '0' : '2px'\n                                                    }}\n                                                />\n                                            )}\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    </div>\n                    \n                    {/* X-Achse Beschriftungen */}\n                    <div className=\"absolute bottom-0 left-0 right-8 pt-8 flex justify-between pointer-events-none\">\n                        {stats.weeklyData.map((dayData, index) => {\n                            const quinzenaDaysCount = useQuinzena ? getQuinzenaDays(selectedQuinzenaDate).length : 7;\n                            const widthPercent = useQuinzena ? `${100 / quinzenaDaysCount}%` : '13%';\n                            return (\n                                <div key={index} className=\"flex flex-col items-center\" style={{ width: widthPercent }}>\n                                    <div className=\"text-xs sm:text-sm text-gray-600 dark:text-gray-400\">\n                                        {(() => {\n                                            // bersetze deutschen Wochentag vom Backend\n                                            const dayLower = dayData.day.toLowerCase();\n                                            if (dayLower.includes('montag') || dayLower.includes('mo')) return t('worktime.days.monday').substring(0, 2);\n                                            if (dayLower.includes('dienstag') || dayLower.includes('di')) return t('worktime.days.tuesday').substring(0, 2);\n                                            if (dayLower.includes('mittwoch') || dayLower.includes('mi')) return t('worktime.days.wednesday').substring(0, 2);\n                                            if (dayLower.includes('donnerstag') || dayLower.includes('do')) return t('worktime.days.thursday').substring(0, 2);\n                                            if (dayLower.includes('freitag') || dayLower.includes('fr')) return t('worktime.days.friday').substring(0, 2);\n                                            if (dayLower.includes('samstag') || dayLower.includes('sa')) return t('worktime.days.saturday').substring(0, 2);\n                                            if (dayLower.includes('sonntag') || dayLower.includes('so')) return t('worktime.days.sunday').substring(0, 2);\n                                            return dayData.day.substring(0, 2);\n                                        })()}\n                                    </div>\n                                    <div className=\"text-xs sm:text-sm font-medium dark:text-gray-300\">\n                                        {dayData.hours.toFixed(1)}{t('worktime.stats.hourShort')}\n                                    </div>\n                                </div>\n                            );\n                        })}\n                    </div>\n                </div>\n            </div>\n            \n            {/* WorktimeModal */}\n            {showWorkTimeModal && (\n                <WorktimeModal \n                    isOpen={showWorkTimeModal}\n                    onClose={closeWorkTimeModal}\n                    selectedDate={selectedDateForModal}\n                />\n            )}\n                </>\n            )}\n            \n            {activeTab === 'commissions' && (\n                <div className=\"space-y-6\">\n                    {commissionLoading ? (\n                        <div className=\"p-4 text-center\">{t('common.loading')}</div>\n                    ) : commissionStats ? (\n                        <>\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                                <div className=\"bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg\">\n                                    <h3 className=\"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2\">\n                                        {t('worktime.stats.commissions.total', 'Gesamtkommissionen')}\n                                    </h3>\n                                    <p className=\"text-2xl font-bold text-blue-600 dark:text-blue-400\">\n                                        {new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'COP' }).format(commissionStats.totalCommissions || 0)}\n                                    </p>\n                                </div>\n                                <div className=\"bg-green-50 dark:bg-green-900/30 p-4 rounded-lg\">\n                                    <h3 className=\"text-sm font-medium text-green-900 dark:text-green-100 mb-2\">\n                                        {t('worktime.stats.commissions.totalBookings', 'Anzahl Buchungen')}\n                                    </h3>\n                                    <p className=\"text-2xl font-bold text-green-600 dark:text-green-400\">\n                                        {commissionStats.totalBookings || 0}\n                                    </p>\n                                </div>\n                                <div className=\"bg-purple-50 dark:bg-purple-900/30 p-4 rounded-lg\">\n                                    <h3 className=\"text-sm font-medium text-purple-900 dark:text-purple-100 mb-2\">\n                                        {t('worktime.stats.commissions.average', 'Durchschnitt')}\n                                    </h3>\n                                    <p className=\"text-2xl font-bold text-purple-600 dark:text-purple-400\">\n                                        {new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'COP' }).format(commissionStats.averageCommission || 0)}\n                                    </p>\n                                </div>\n                            </div>\n                            \n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                                <div className=\"bg-white dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600\">\n                                    <h3 className=\"text-lg font-semibold mb-3 dark:text-white\">\n                                        {t('worktime.stats.commissions.byTourType', 'Nach Tour-Typ')}\n                                    </h3>\n                                    <div className=\"space-y-2\">\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-gray-600 dark:text-gray-400\">\n                                                {t('tours.typeOwn', 'Eigene Touren')}\n                                            </span>\n                                            <span className=\"font-semibold dark:text-white\">\n                                                {new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'COP' }).format(commissionStats.byTourType?.own || 0)}\n                                            </span>\n                                        </div>\n                                        <div className=\"flex justify-between\">\n                                            <span className=\"text-gray-600 dark:text-gray-400\">\n                                                {t('tours.typeExternal', 'Externe Touren')}\n                                            </span>\n                                            <span className=\"font-semibold dark:text-white\">\n                                                {new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'COP' }).format(commissionStats.byTourType?.external || 0)}\n                                            </span>\n                                        </div>\n                                    </div>\n                                </div>\n                                \n                                <div className=\"bg-white dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600\">\n                                    <h3 className=\"text-lg font-semibold mb-3 dark:text-white\">\n                                        {t('worktime.stats.commissions.tourSales', 'Tour-Verkufe')}\n                                    </h3>\n                                    <div className=\"space-y-2 max-h-64 overflow-y-auto\">\n                                        {commissionStats.tourSales?.length > 0 ? (\n                                            commissionStats.tourSales.map((sale: any) => (\n                                                <div key={sale.tourId} className=\"flex justify-between items-center py-2 border-b border-gray-200 dark:border-gray-600 last:border-0\">\n                                                    <div>\n                                                        <p className=\"font-medium dark:text-white\">{sale.tourTitle}</p>\n                                                        <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                                                            {sale.salesCount} {t('worktime.stats.commissions.sales', 'Verkufe')}\n                                                        </p>\n                                                    </div>\n                                                    <span className=\"font-semibold dark:text-white\">\n                                                        {new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'COP' }).format(sale.totalCommission || 0)}\n                                                    </span>\n                                                </div>\n                                            ))\n                                        ) : (\n                                            <p className=\"text-gray-500 dark:text-gray-400 text-center py-4\">\n                                                {t('worktime.stats.commissions.noSales', 'Keine Verkufe')}\n                                            </p>\n                                        )}\n                                    </div>\n                                </div>\n                            </div>\n                        </>\n                    ) : (\n                        <div className=\"p-4 text-center text-gray-500 dark:text-gray-400\">\n                            {t('worktime.stats.commissions.noData', 'Keine Kommissions-Daten verfgbar')}\n                        </div>\n                    )}\n                </div>\n            )}\n        </div>\n    );\n};\n\n// Hilfsfunktion zum Inkrementieren eines Datums im String-Format 'YYYY-MM-DD'\nconst incrementDateString = (dateString: string, daysToAdd: number): string => {\n    // Zerlege das Datum\n    const [year, month, day] = dateString.split('-').map(num => parseInt(num));\n    \n    // Erstelle ein Date-Objekt fr diese Berechnung, aber mit Mittag als Uhrzeit\n    // um Zeitzonenprobleme zu vermeiden\n    const date = new Date(year, month - 1, day, 12, 0, 0);\n    \n    // Fge die Tage hinzu\n    date.setDate(date.getDate() + daysToAdd);\n    \n    // Formatiere das Datum zurck als 'YYYY-MM-DD'\n    return format(date, 'yyyy-MM-dd');\n};\n\nexport default WorktimeStats; ","import React from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Link } from 'react-router-dom';\nimport { DevicePhoneMobileIcon, ArrowRightIcon } from '@heroicons/react/24/outline';\n\n// Konfiguration fr die App-Downloads\nconst APP_CONFIG = {\n  // Die URL zum direkten APK-Download\n  apkDownloadUrl: 'https://65.109.228.106.nip.io/downloads/intranet-app.apk',\n  \n  // URLs fr die App Stores (aktuell Platzhalter, spter durch echte Links ersetzen)\n  androidStoreUrl: 'https://play.google.com/store/apps/details?id=com.yourcompany.intranetapp',\n  iosStoreUrl: 'https://apps.apple.com/app/intranet-app/id1234567890',\n  \n  // Landing-Page fr die App (mit weiteren Informationen)\n  appLandingPageUrl: 'https://65.109.228.106.nip.io/mobile-app',\n};\n\nconst AppDownload: React.FC = () => {\n  const { t } = useTranslation();\n  \n  return (\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 shadow-sm\">\n      <div className=\"flex flex-col md:flex-row items-center justify-between\">\n        <div className=\"flex items-center mb-4 md:mb-0\">\n          <div className=\"bg-blue-100 dark:bg-blue-900/30 p-3 rounded-full mr-4\">\n            <DevicePhoneMobileIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n          </div>\n          <div>\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">{t('appDownload.title')}</h3>\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n              {t('appDownload.description')}\n            </p>\n          </div>\n        </div>\n        \n        <Link \n          to=\"/mobile-app\" \n          className=\"inline-flex items-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800\"\n        >\n          {t('appDownload.download')}\n          <ArrowRightIcon className=\"ml-2 -mr-1 h-4 w-4\" />\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default AppDownload; ","import React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Requests from '../components/Requests.tsx';\nimport WorktimeStats from '../components/WorktimeStats.tsx';\nimport AppDownload from '../components/AppDownload.tsx';\nimport { DocumentTextIcon } from '@heroicons/react/24/outline';\n\ninterface User {\n  id: number;\n  username: string;\n  email: string;\n  first_name: string;\n  last_name: string;\n}\n\nconst Dashboard: React.FC = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n\n    // Hier wrden wir normalerweise Benutzerdaten vom Server abrufen\n    // Fr dieses Beispiel verwenden wir Mock-Daten\n    setUser({\n      id: 1,\n      username: 'testuser',\n      email: 'test@example.com',\n      first_name: 'Test',\n      last_name: 'User'\n    });\n    setLoading(false);\n  }, [navigate]);\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    navigate('/login');\n  };\n\n  if (loading) {\n    return <div className=\"flex items-center justify-center min-h-screen text-gray-700 dark:text-gray-300\">{t('common.loading')}</div>;\n  }\n\n  return (\n    <div className=\"min-h-screen dark:bg-gray-900\">\n      <div className=\"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6\" data-onboarding=\"dashboard-header\">\n        <div data-onboarding=\"worktime-stats\">\n          <WorktimeStats />\n        </div>\n\n        <div className=\"mt-2 sm:mt-4 md:mt-6 grid grid-cols-1 gap-4\">\n          {/* Anfragen-Bereich */}\n          <div className=\"dashboard-requests-wrapper bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 w-full\" data-onboarding=\"requests-section\">\n            <Requests />\n          </div>\n          \n          {/* App-Download-Bereich */}\n          <div className=\"mt-4\">\n            <AppDownload />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard; "],"names":["_ref","isOpen","onClose","onRequestCreated","t","useTranslation","user","useAuth","openSidepane","closeSidepane","useSidepane","isLargeScreen","setIsLargeScreen","useState","window","innerWidth","users","setUsers","branches","setBranches","formData","setFormData","title","description","responsible_id","branch_id","type","is_private","due_date","create_todo","error","setError","loading","setLoading","isMobile","setIsMobile","temporaryAttachments","setTemporaryAttachments","uploading","setUploading","fileInputRef","useRef","textareaRef","useEffect","async","localStorage","getItem","console","log","usersResponse","branchesResponse","Promise","all","axiosInstance","get","API_ENDPOINTS","USERS","DROPDOWN","BRANCHES","BASE","data","length","prevData","_objectSpread","id","toString","_branchesResponse$dat","userBranch","twoWeeksFromNow","Date","setDate","getDate","formattedDate","toISOString","split","err","axiosError","_axiosError$response","_axiosError$response$","code","concat","response","message","fetchData","checkScreenSize","addEventListener","removeEventListener","formatUserName","_user$firstName","_user$username","firstName","username","handlePaste","items","event","clipboardData","i","item","indexOf","preventDefault","file","getAsFile","handleTemporaryAttachment","handleDrop","stopPropagation","dataTransfer","files","handleDragOver","newAttachment","fileName","name","fileType","fileSize","size","prev","insertText","startsWith","current","cursorPos","selectionStart","textBefore","substring","textAfter","setTimeout","newPos","selectionEnd","focus","_axiosError$response2","_axiosError$response3","handleFileUpload","target","value","handleSubmit","e","Error","responsibleId","parseInt","branchId","isNaN","post","REQUESTS","requested_by_id","status","attachment","FormData","append","ATTACHMENTS","requestId","headers","count","uploadTemporaryAttachments","_axiosError$response4","_axiosError$response5","renderTemporaryAttachments","_jsx","className","children","map","index","_jsxs","onClick","attachmentToRemove","filter","_","uploadAfterCreateText","imagePattern","RegExp","replace","linkPattern","newDescription","handleRemoveTemporaryAttachment","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","src","URL","createObjectURL","alt","Dialog","open","Panel","Title","XMarkIcon","onSubmit","required","onChange","htmlFor","ref","rows","onPaste","onDrop","onDragOver","placeholder","_fileInputRef$current","click","Array","isArray","branch","checked","disabled","ArrowPathIcon","CheckIcon","_Fragment","style","opacity","transition","pointerEvents","role","_fileInputRef$current2","onRequestUpdated","request","i18n","removeImageMarkdown","text","trim","process","language","setTitle","setDescription","setResponsibleId","responsible","setBranchId","setType","isPrivate","setIsPrivate","dueDate","setDueDate","createTodo","setCreateTodo","confirmDelete","setConfirmDelete","attachments","setAttachments","uploadedDuringEdit","setUploadedDuringEdit","hasPermission","usePermissions","canDeleteRequest","attachmentId","delete","ATTACHMENT","cleanup","fetchAttachments","errorMessage","warn","uploadFileAndInsertLink","getRequestAttachmentUrl","img","document","createElement","classList","add","body","appendChild","onload","removeChild","originalDescription","finalDescription","imageAttachments","att","_att$fileType","existingImagePattern","existingImages","match","exec","push","imageUrl","imageMarkdown","escapedFileName","test","existingImage","includes","put","BY_ID","updatedResponse","filePath","uploadedAt","url","_axiosError$response10","_axiosError$response11","handleDelete","_axiosError$response12","_axiosError$response13","renderAttachments","undefined","responseType","Blob","link","href","setAttribute","remove","_axiosError$response8","_axiosError$response9","handleDownloadAttachment","find","a","_axiosError$response6","_axiosError$response7","handleDeleteAttachment","uploadText","renderForm","Number","TrashIcon","getRequestTypeIcon","defaultColumnOrder","REQUESTS_TABLE_ID","tableToCardMapping","cardToTableMapping","Requests","requests","setRequests","requestsDisplayLimit","setRequestsDisplayLimit","searchTerm","setSearchTerm","filterConditions","setFilterConditions","filterLogicalOperators","setFilterLogicalOperators","filterSortDirections","setFilterSortDirections","activeFilterName","setActiveFilterName","selectedFilterId","setSelectedFilterId","isFilterModalOpen","setIsFilterModalOpen","sortConfig","setSortConfig","key","direction","isCreateModalOpen","setIsCreateModalOpen","isEditModalOpen","setIsEditModalOpen","selectedRequest","setSelectedRequest","availableColumns","useMemo","label","shortLabel","settings","isLoading","isLoadingSettings","updateColumnOrder","updateHiddenColumns","toggleColumnVisibility","isColumnVisible","updateViewMode","useTableSettings","defaultHiddenColumns","defaultViewMode","draggedColumn","setDraggedColumn","dragOverColumn","setDragOverColumn","isUpdatingHiddenColumnsRef","viewMode","cardSortDirections","setCardSortDirections","requestedBy","cardMetadataOrder","columnOrder","cardMetadata","forEach","tableCol","cardMeta","getCardMetadataFromColumnOrder","metadataVisibility","setMetadataVisibility","requestedByResponsibleHidden","hiddenColumns","hiddenCardMetadata","hidden","hiddenTableColumns","Set","getHiddenCardMetadata","visibleCardMetadata","meta","has","wrapper","querySelector","fetchRequests","useCallback","filterId","background","arguments","params","includeAttachments","JSON","stringify","conditions","operators","requestsWithAttachments","MAX_ITEMS_IN_STATE","requestsToStore","slice","token","existingFilters","SAVED_FILTERS","BY_TABLE","Authorization","archivFilterExists","some","aktuellFilterExists","archivFilter","tableId","column","operator","aktuellFilter","createStandardFilters","filterConditionsRef","scrollHandlerRef","innerHeight","scrollY","documentElement","offsetHeight","increment","handleScroll","_scrollHandlerRef$cur","call","handleStatusChange","newStatus","currentRequest","r","prevRequests","handleMoveColumn","dragIndex","hoverIndex","newColumnOrder","movingColumn","splice","handleDragStart","columnId","handleDragEnd","applyFilterConditions","sortDirections","validSortDirections","resetFilterConditions","getActiveFilterCount","filteredAndSortedRequests","searchLower","toLowerCase","lastName","columnEvaluators","req","cond","endsWith","requestType","requestedByName","evaluateUserRoleCondition","responsibleName","branchName","evaluateDateCondition","getFieldValue","applyFilters","sort","b","getSortValue","_statusOrder$request$","_typeOrder","getTime","valueA","valueB","comparison","String","localeCompare","sortedByPriority","sd1","sd2","priority","sortDir","sortableColumns","colId","aValue","bValue","_typeOrder2","_typeOrder3","typeOrder","handleCopyRequest","copiedRequestData","CardGrid","visibleColumnIds","CreateRequestModal","newRequest","EditRequestModal","updatedRequest","width","height","PlusIcon","DocumentTextIcon","Squares2X2Icon","TableCellsIcon","FunnelIcon","position","top","right","TableColumnConfig","columns","visibleColumns","from","onToggleColumnVisibility","tableColumnId","newMetadataVisibility","newHiddenColumns","tableColumnIndex","onMoveColumn","newCardOrder","movingCardMeta","newTableOrder","processedTableCols","buttonTitle","modalTitle","onSortDirectionChange","showSortDirection","FilterPane","onApply","onReset","savedConditions","savedOperators","savedSortDirections","onSortDirectionsChange","SavedFilterTags","onSelectFilter","onFilterChange","handleFilterChange","defaultFilterName","col","draggable","onDragStart","onDragEnd","ArrowsUpDownIcon","sortKey","handleSort","colSpan","expiryStatus","getExpiryStatus","expiryColors","getExpiryColorClasses","bgClass","borderClass","InformationCircleIcon","MarkdownPreview","content","showImagePreview","getStatusColor","getStatusText","expiryStatusForDate","expiryColorsForDate","textClass","toLocaleDateString","ExclamationTriangleIcon","PencilIcon","DocumentDuplicateIcon","metadata","icon","BuildingOfficeIcon","section","typeIcon","typeLabel","shortenedName","UserIcon","dueDateItem","createDueDateMetadataItem","CalendarIcon","date","format","locale","de","descriptionContent","attachmentMetadata","actionButtons","previousStatus","getPreviousStatus","nextStatuses","getNextStatuses","firstNextStatus","DataCard","color","onPreviousClick","onNextClick","actions","incrementDateString","dateString","daysToAdd","year","month","day","num","WorktimeStats","_user$normalWorkingHo","_commissionStats$byTo","_commissionStats$byTo2","_commissionStats$tour","activeLanguage","useLanguage","organization","useOrganization","stats","setStats","fullStats","setFullStats","maxHours","setMaxHours","activeTab","setActiveTab","commissionStats","setCommissionStats","commissionLoading","setCommissionLoading","isColombia","userIsColombia","country","orgIsColombia","result","userCountry","orgCountry","isManualPeriodChange","useQuinzena","setUseQuinzena","dateLocale","es","enUS","today","currentWeekInput","getYear","getWeek","padStart","currentQuinzenaInput","getCurrentQuinzena","selectedWeekInput","setSelectedWeekInput","selectedQuinzenaInput","setSelectedQuinzenaInput","currentMonday","startOfWeek","weekStartsOn","currentQuinzenaStart","convertQuinzenaToDate","selectedWeekDate","setSelectedWeekDate","selectedQuinzenaDate","setSelectedQuinzenaDate","selectedDate","showWorkTimeModal","setShowWorkTimeModal","selectedDateForModal","setSelectedDateForModal","fetchStats","fetchStatsWithDate","dateToSend","isQuinzena","endpoint","WORKTIME","STATS","weeklyData","totalHours","weeklyDataLength","validatedData","hours","first5Days","weekdayMapping","periodDates","enrichedData","dayIndex","_err$response","_err$response$data","handlePeriodChange","newUseQuinzena","newDate","newInput","currentQuinzena","convertWeekToDate","queueMicrotask","quinzenaDate","weekDate","openWorkTimeModal","reduce","max","parseFloat","fetchCommissionStats","startDate","getFullYear","endDate","TOUR_BOOKINGS","COMMISSIONS","success","getQuinzenaDays","getWeekDays","scaleMax","Math","ceil","targetWorkHours","normalWorkingHours","ChartBarIcon","ClockIcon","pattern","blob","download","week","revokeObjectURL","marginTop","marginBottom","DocumentArrowDownIcon","averageHoursPerDay","daysWorked","round","bottom","borderStyle","dayData","overTargetHeight","normalHeight","min","quinzenaDaysCount","containerWidth","barWidth","minHeight","borderTopLeftRadius","borderTopRightRadius","borderBottomWidth","borderBottomLeftRadius","borderBottomRightRadius","borderTopWidth","widthPercent","dayLower","toFixed","WorktimeModal","closeWorkTimeModal","Intl","NumberFormat","currency","totalCommissions","totalBookings","averageCommission","byTourType","own","external","tourSales","sale","tourTitle","salesCount","totalCommission","tourId","AppDownload","DevicePhoneMobileIcon","Link","to","ArrowRightIcon","Dashboard","navigate","useNavigate","setUser","email","first_name","last_name"],"sourceRoot":""}