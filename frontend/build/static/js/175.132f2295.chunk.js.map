{"version":3,"file":"static/js/175.132f2295.chunk.js","mappings":"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","sources":["components/NotificationSettings.tsx","components/MonthlyReportSettingsModal.tsx","components/DatabaseManagement.tsx","services/passwordManagerApi.ts","components/PasswordEntrySidepane.tsx","components/PasswordEntryPermissionsModal.tsx","components/PasswordEntryAuditLogsModal.tsx","components/PasswordManagerTab.tsx","pages/Settings.tsx","utils/filterLogic.ts"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { \n  Box, \n  Typography, \n  FormControlLabel, \n  Switch, \n  Grid, \n  Snackbar,\n  Alert,\n  Divider\n} from '@mui/material';\nimport { NotificationSettings, notificationSettingsApi } from '../api/notificationApi.ts';\nimport { API_URL } from '../config/api.ts';\nimport useMessage from '../hooks/useMessage.ts';\nimport { logger } from '../utils/logger.ts';\n\nconst defaultSettings = {\n  taskCreate: true,\n  taskUpdate: true,\n  taskDelete: true,\n  taskStatusChange: true,\n  requestCreate: true,\n  requestUpdate: true,\n  requestDelete: true,\n  requestStatusChange: true,\n  userCreate: true,\n  userUpdate: true,\n  userDelete: true,\n  roleCreate: true,\n  roleUpdate: true,\n  roleDelete: true,\n  worktimeStart: true,\n  worktimeStop: true\n};\n\nconst categorySettings = {\n  task: ['taskCreate', 'taskUpdate', 'taskDelete', 'taskStatusChange'],\n  request: ['requestCreate', 'requestUpdate', 'requestDelete', 'requestStatusChange'],\n  user: ['userCreate', 'userUpdate', 'userDelete'],\n  role: ['roleCreate', 'roleUpdate', 'roleDelete'],\n  worktime: ['worktimeStart', 'worktimeStop'],\n} as const;\n\ntype CategoryType = keyof typeof categorySettings;\n\nconst NotificationSettingsComponent: React.FC = () => {\n  const { t } = useTranslation();\n  const [settings, setSettings] = useState<NotificationSettings>(defaultSettings);\n  \n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const { showMessage } = useMessage();\n\n  useEffect(() => {\n    fetchSettings();\n  }, []);\n\n  const fetchSettings = async () => {\n    try {\n      setLoading(true);\n      logger.log('Starte Abruf der Benachrichtigungseinstellungen...');\n      const response = await notificationSettingsApi.getUserSettings();\n      logger.log('Erhaltene Einstellungen:', response.data);\n      \n      if (response?.data) {\n        const newSettings: NotificationSettings = {...defaultSettings, ...response.data};\n        setSettings(newSettings);\n        logger.log('Einstellungen aktualisiert:', newSettings);\n      } else {\n        console.warn('Keine Daten vom Server erhalten, verwende Standardeinstellungen');\n        setSettings(defaultSettings);\n      }\n    } catch (error) {\n      console.error('Fehler beim Laden der Benachrichtigungseinstellungen:', error);\n      setSettings(defaultSettings);\n      showMessage(t('notifications.loadSettingsError'), 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, checked } = event.target;\n    \n    const updatedSettings: NotificationSettings = {\n      ...settings,\n      [name]: checked\n    };\n    \n    setSettings(updatedSettings);\n    \n    try {\n      setSaving(true);\n      await notificationSettingsApi.updateUserSettings(updatedSettings);\n      showMessage(t('notifications.saveSuccess'), 'success');\n    } catch (error) {\n      console.error('Fehler beim Speichern der Einstellungen:', error);\n      showMessage(t('notifications.saveError'), 'error');\n      \n      setSettings(settings);\n    } finally {\n      setSaving(false);\n    }\n  };\n  \n  const toggleAllInCategory = async (category: string, value: boolean) => {\n    const normalizedCategory = category.toLowerCase() as CategoryType;\n    if (!categorySettings[normalizedCategory]) return;\n\n    const updatedSettings = { ...settings };\n    categorySettings[normalizedCategory].forEach(setting => {\n      updatedSettings[setting as keyof NotificationSettings] = value;\n    });\n\n    setSettings(updatedSettings);\n    \n    try {\n      setSaving(true);\n      await notificationSettingsApi.updateUserSettings(updatedSettings);\n      showMessage(t('notifications.saveSuccess'), 'success');\n    } catch (error) {\n      console.error('Fehler beim Speichern der Einstellungen:', error);\n      showMessage(t('notifications.saveError'), 'error');\n      setSettings(settings);\n    } finally {\n      setSaving(false);\n    }\n  };\n  \n  const toggleAll = async (value: boolean) => {\n    const updatedSettings: NotificationSettings = Object.keys(settings).reduce((acc, key) => {\n      acc[key as keyof NotificationSettings] = value;\n      return acc;\n    }, { ...defaultSettings });\n    \n    setSettings(updatedSettings);\n    \n    try {\n      setSaving(true);\n      await notificationSettingsApi.updateUserSettings(updatedSettings);\n      showMessage(t('notifications.saveSuccess'), 'success');\n    } catch (error) {\n      console.error('Fehler beim Speichern der Einstellungen:', error);\n      showMessage(t('notifications.saveError'), 'error');\n      \n      setSettings(settings);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const isAllCheckedInCategory = (category: string): boolean => {\n    const normalizedCategory = category.toLowerCase() as CategoryType;\n    if (!categorySettings[normalizedCategory]) return false;\n    \n    return categorySettings[normalizedCategory].every(setting => \n      settings[setting as keyof NotificationSettings] === true\n    );\n  };\n  \n  const isAllChecked = (): boolean => {\n    if (!settings) return false;\n    return Object.values(settings).every(value => value === true);\n  };\n\n  const CustomToggle: React.FC<{\n    checked: boolean;\n    onChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n    name: string;\n    label: string;\n    description?: string;\n  }> = ({ checked, onChange, name, label, description }) => (\n    <div className=\"flex items-center justify-between gap-8 group relative\">\n      <div className=\"flex-1\">\n        <span className=\"text-gray-600 dark:text-gray-400\">{label}</span>\n      </div>\n      <label className=\"relative inline-flex items-center cursor-pointer flex-shrink-0\">\n        <input\n          type=\"checkbox\"\n          className=\"sr-only peer\"\n          checked={checked}\n          onChange={onChange}\n          name={name}\n        />\n        <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n      </label>\n      {description && (\n        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n          {description}\n        </div>\n      )}\n    </div>\n  );\n\n  const renderToggleSection = (title: string, toggles: Array<{ name: keyof NotificationSettings, label: string, description: string }>) => (\n    <div className=\"mb-6 mt-2\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <div>\n          <h3 className=\"text-lg font-medium dark:text-white\">{title}</h3>\n        </div>\n        <CustomToggle\n          checked={isAllCheckedInCategory(title)}\n          onChange={(e) => toggleAllInCategory(title, e.target.checked)}\n          name={`${title.toLowerCase()}All`}\n          label={t('notifications.all')}\n        />\n      </div>\n      <div className=\"space-y-4\">\n        {toggles.map(({ name, label, description }) => (\n          <CustomToggle\n            key={name}\n            checked={settings[name]}\n            onChange={handleChange}\n            name={name}\n            label={label}\n            description={description}\n          />\n        ))}\n      </div>\n    </div>\n  );\n\n  if (loading) {\n    return <Typography>{t('notifications.loading')}</Typography>;\n  }\n\n  return (\n    <Box className=\"p-4\">\n      <Typography \n        variant=\"body2\" \n        className=\"text-gray-600 dark:text-gray-400 mb-6\"\n      >\n        {t('notifications.description')}\n      </Typography>\n      \n      <div className=\"mb-8 mt-2\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"group relative\">\n            <h3 className=\"text-lg font-medium dark:text-white\">{t('notifications.allNotifications')}</h3>\n            <p className=\"text-sm text-gray-600 dark:text-gray-400\">{t('notifications.allNotificationsDescription')}</p>\n            <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n              {t('notifications.allNotificationsDescription')}\n            </div>\n          </div>\n          <CustomToggle\n            checked={isAllChecked()}\n            onChange={(e) => toggleAll(e.target.checked)}\n            name=\"allNotifications\"\n            label=\"\"\n          />\n        </div>\n      </div>\n      \n      <Divider className=\"my-8\" />\n      \n      {renderToggleSection(t('notifications.categories.tasks'), [\n        { name: 'taskCreate', label: t('notifications.events.taskCreate'), description: t('notifications.events.taskCreateDescription') },\n        { name: 'taskUpdate', label: t('notifications.events.taskUpdate'), description: t('notifications.events.taskUpdateDescription') },\n        { name: 'taskDelete', label: t('notifications.events.taskDelete'), description: t('notifications.events.taskDeleteDescription') },\n        { name: 'taskStatusChange', label: t('notifications.events.taskStatusChange'), description: t('notifications.events.taskStatusChangeDescription') }\n      ])}\n      \n      <Divider className=\"my-8\" />\n      \n      {renderToggleSection(t('notifications.categories.requests'), [\n        { name: 'requestCreate', label: t('notifications.events.requestCreate'), description: t('notifications.events.requestCreateDescription') },\n        { name: 'requestUpdate', label: t('notifications.events.requestUpdate'), description: t('notifications.events.requestUpdateDescription') },\n        { name: 'requestDelete', label: t('notifications.events.requestDelete'), description: t('notifications.events.requestDeleteDescription') },\n        { name: 'requestStatusChange', label: t('notifications.events.requestStatusChange'), description: t('notifications.events.requestStatusChangeDescription') }\n      ])}\n      \n      <Divider className=\"my-8\" />\n      \n      {renderToggleSection(t('notifications.categories.usersAndRoles'), [\n        { name: 'userCreate', label: t('notifications.events.userCreate'), description: t('notifications.events.userCreateDescription') },\n        { name: 'userUpdate', label: t('notifications.events.userUpdate'), description: t('notifications.events.userUpdateDescription') },\n        { name: 'userDelete', label: t('notifications.events.userDelete'), description: t('notifications.events.userDeleteDescription') },\n        { name: 'roleCreate', label: t('notifications.events.roleCreate'), description: t('notifications.events.roleCreateDescription') },\n        { name: 'roleUpdate', label: t('notifications.events.roleUpdate'), description: t('notifications.events.roleUpdateDescription') },\n        { name: 'roleDelete', label: t('notifications.events.roleDelete'), description: t('notifications.events.roleDeleteDescription') }\n      ])}\n      \n      <Divider className=\"my-8\" />\n      \n      {renderToggleSection(t('notifications.categories.worktime'), [\n        { name: 'worktimeStart', label: t('notifications.events.worktimeStart'), description: t('notifications.events.worktimeStartDescription') },\n        { name: 'worktimeStop', label: t('notifications.events.worktimeStop'), description: t('notifications.events.worktimeStopDescription') }\n      ])}\n    </Box>\n  );\n};\n\nexport default NotificationSettingsComponent; ","import React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { MonthlyReportSettings } from '../types/monthlyConsultationReport.ts';\nimport { toast } from 'react-toastify';\n\ninterface MonthlyReportSettingsModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onSave: (settings: MonthlyReportSettings) => Promise<void>;\n    currentSettings: MonthlyReportSettings;\n}\n\nconst MonthlyReportSettingsModal: React.FC<MonthlyReportSettingsModalProps> = ({\n    isOpen,\n    onClose,\n    onSave,\n    currentSettings\n}) => {\n    const { t } = useTranslation();\n    const [formData, setFormData] = useState<MonthlyReportSettings>({\n        monthlyReportEnabled: true, // Wird aktiviert\n        monthlyReportDay: currentSettings.monthlyReportDay || 25,\n        monthlyReportRecipient: currentSettings.monthlyReportRecipient || ''\n    });\n    const [isSaving, setIsSaving] = useState(false);\n    const [errors, setErrors] = useState<Record<string, string>>({});\n\n    const validateForm = () => {\n        const newErrors: Record<string, string> = {};\n        \n        if (!formData.monthlyReportRecipient.trim()) {\n            newErrors.monthlyReportRecipient = t('monthlyReport.recipientRequired');\n        }\n        \n        if (formData.monthlyReportDay < 1 || formData.monthlyReportDay > 28) {\n            newErrors.monthlyReportDay = 'Abrechnungstag muss zwischen 1 und 28 liegen';\n        }\n        \n        setErrors(newErrors);\n        return Object.keys(newErrors).length === 0;\n    };\n\n    const handleSave = async () => {\n        if (!validateForm()) return;\n        \n        try {\n            setIsSaving(true);\n            await onSave(formData);\n            toast.success(t('monthlyReport.saveSuccess'));\n            onClose();\n        } catch (error) {\n            toast.error(t('monthlyReport.saveError'));\n        } finally {\n            setIsSaving(false);\n        }\n    };\n\n    const handleCancel = () => {\n        // Reset form data\n        setFormData({\n            monthlyReportEnabled: true,\n            monthlyReportDay: currentSettings.monthlyReportDay || 25,\n            monthlyReportRecipient: currentSettings.monthlyReportRecipient || ''\n        });\n        setErrors({});\n        onClose();\n    };\n\n    const handleChange = (field: keyof MonthlyReportSettings, value: boolean | number | string) => {\n        setFormData(prev => ({ ...prev, [field]: value }));\n        // Fehler fr dieses Feld lschen\n        if (errors[field]) {\n            setErrors(prev => ({ ...prev, [field]: '' }));\n        }\n    };\n\n    return (\n        <Dialog open={isOpen} onClose={handleCancel} className=\"relative z-50\">\n            <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n            \n            <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n                <Dialog.Panel className=\"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n                    <div className=\"p-6\">\n                        {/* Header */}\n                        <div className=\"flex items-center justify-between mb-6\">\n                            <Dialog.Title className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                                Automatische Monatsabrechnung einrichten\n                            </Dialog.Title>\n                            <button\n                                onClick={handleCancel}\n                                className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\n                            >\n                                <XMarkIcon className=\"h-6 w-6\" />\n                            </button>\n                        </div>\n\n                        {/* Info-Text */}\n                        <div className=\"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg\">\n                            <p className=\"text-sm text-blue-800 dark:text-blue-200\">\n                                Konfigurieren Sie die automatische Generierung von monatlichen Beratungsabrechnungen. \n                                Diese werden automatisch am gewhlten Tag des Monats erstellt und an den angegebenen Empfnger adressiert.\n                            </p>\n                        </div>\n\n                        {/* Form */}\n                        <div className=\"space-y-4\">\n                            {/* Abrechnungstag */}\n                            <div>\n                                <label htmlFor=\"monthlyReportDay\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    Abrechnungstag im Monat\n                                </label>\n                                <select\n                                    id=\"monthlyReportDay\"\n                                    className={`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${\n                                        errors.monthlyReportDay \n                                            ? 'border-red-300 dark:border-red-600' \n                                            : 'border-gray-300 dark:border-gray-600'\n                                    }`}\n                                    value={formData.monthlyReportDay}\n                                    onChange={(e) => handleChange('monthlyReportDay', parseInt(e.target.value))}\n                                >\n                                    {Array.from({ length: 28 }, (_, i) => i + 1).map(day => (\n                                        <option key={day} value={day}>{day}.</option>\n                                    ))}\n                                </select>\n                                {errors.monthlyReportDay && (\n                                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.monthlyReportDay}</p>\n                                )}\n                                <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n                                    Tag im Monat, an dem die Abrechnung automatisch erstellt wird (1-28)\n                                </p>\n                            </div>\n\n                            {/* Rechnungsempfnger */}\n                            <div>\n                                <label htmlFor=\"monthlyReportRecipient\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                    {t('monthlyReport.recipient')} *\n                                </label>\n                                <textarea\n                                    id=\"monthlyReportRecipient\"\n                                    rows={3}\n                                    className={`mt-1 block w-full rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white ${\n                                        errors.monthlyReportRecipient \n                                            ? 'border-red-300 dark:border-red-600' \n                                            : 'border-gray-300 dark:border-gray-600'\n                                    }`}\n                                    value={formData.monthlyReportRecipient}\n                                    onChange={(e) => handleChange('monthlyReportRecipient', e.target.value)}\n                                    placeholder={t('monthlyReport.recipientPlaceholder')}\n                                />\n                                {errors.monthlyReportRecipient && (\n                                    <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">{errors.monthlyReportRecipient}</p>\n                                )}\n                                <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n                                    Vollstndige Adresse des Empfngers (Arbeitgeber) fr die monatliche Abrechnung\n                                </p>\n                            </div>\n                        </div>\n\n                        {/* Vorschau */}\n                        {formData.monthlyReportRecipient.trim() && (\n                            <div className=\"mt-6 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg\">\n                                <h4 className=\"text-sm font-medium text-gray-900 dark:text-white mb-2\">Vorschau:</h4>\n                                <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                                    <p>\n                                         <strong>Abrechnungszeitraum:</strong> {formData.monthlyReportDay}. des Vormonats bis {formData.monthlyReportDay - 1}. des aktuellen Monats\n                                    </p>\n                                    <p className=\"mt-1\">\n                                         <strong>Empfnger:</strong>\n                                    </p>\n                                    <div className=\"ml-4 mt-1 font-mono text-xs bg-white dark:bg-gray-800 p-2 rounded border\">\n                                        {formData.monthlyReportRecipient.split('\\n').map((line, index) => (\n                                            <div key={index}>{line}</div>\n                                        ))}\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Buttons */}\n                        <div className=\"mt-6 flex items-center justify-end space-x-3\">\n                            <button\n                                type=\"button\"\n                                onClick={handleCancel}\n                                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                                title={t('common.cancel')}\n                            >\n                                <XMarkIcon className=\"h-5 w-5\" />\n                            </button>\n                            <button\n                                onClick={handleSave}\n                                disabled={isSaving || !formData.monthlyReportRecipient.trim()}\n                                className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                                title={isSaving ? 'Speichere...' : 'Aktivieren'}\n                            >\n                                {isSaving ? (\n                                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                                ) : (\n                                    <CheckIcon className=\"h-5 w-5\" />\n                                )}\n                            </button>\n                        </div>\n                    </div>\n                </Dialog.Panel>\n            </div>\n        </Dialog>\n    );\n};\n\nexport default MonthlyReportSettingsModal; ","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { \n  TrashIcon, \n  ExclamationTriangleIcon, \n  LockClosedIcon,\n  ClockIcon,\n  DocumentTextIcon,\n  CheckCircleIcon,\n  ArrowPathIcon\n} from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport axiosInstance from '../config/axios.ts';\nimport { toast } from 'react-toastify';\nimport { useAuth } from '../hooks/useAuth.tsx';\n\ninterface ResetableTable {\n  name: string;\n  displayName: string;\n  description: string;\n  hasSeed: boolean;\n  danger: 'low' | 'medium' | 'high';\n}\n\ninterface DatabaseLog {\n  timestamp: string;\n  operation: string;\n  userId: string;\n  status: 'start' | 'success' | 'error';\n  error?: string;\n}\n\nconst DatabaseManagement: React.FC = () => {\n  const { t } = useTranslation();\n  const { user } = useAuth();\n  const [tables, setTables] = useState<ResetableTable[]>([]);\n  const [logs, setLogs] = useState<DatabaseLog[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [logsLoading, setLogsLoading] = useState(false);\n  \n  // bersetzungen fr Tabellennamen\n  const getTableDisplayName = (tableName: string): string => {\n    return t(`database.tables.${tableName}.displayName`, { defaultValue: tableName });\n  };\n  \n  const getTableDescription = (tableName: string): string => {\n    return t(`database.tables.${tableName}.description`, { defaultValue: '' });\n  };\n  \n  // State fr einzelne Tabellen-Resets\n  const [selectedTable, setSelectedTable] = useState<string | null>(null);\n  const [tablePassword, setTablePassword] = useState('');\n  const [showTableConfirm, setShowTableConfirm] = useState(false);\n  const [tableCountdown, setTableCountdown] = useState(0);\n  \n  // State fr Demo-Clients lschen\n  const [demoPassword, setDemoPassword] = useState('');\n  const [showDemoConfirm, setShowDemoConfirm] = useState(false);\n  const [demoCountdown, setDemoCountdown] = useState(0);\n\n  useEffect(() => {\n    loadTables();\n    loadLogs();\n  }, []);\n\n  // Countdown-Timer fr Table Reset\n  useEffect(() => {\n    if (tableCountdown > 0) {\n      const timer = setTimeout(() => setTableCountdown(tableCountdown - 1), 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [tableCountdown]);\n\n  // Countdown-Timer fr Demo-Clients lschen\n  useEffect(() => {\n    if (demoCountdown > 0) {\n      const timer = setTimeout(() => setDemoCountdown(demoCountdown - 1), 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [demoCountdown]);\n\n  const loadTables = async () => {\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.DATABASE.TABLES);\n      setTables(response.data);\n    } catch (error) {\n      console.error('Fehler beim Laden der Tabellen:', error);\n      toast.error(t('database.loadTablesError'));\n    }\n  };\n\n  const loadLogs = async () => {\n    try {\n      setLogsLoading(true);\n      const response = await axiosInstance.get(API_ENDPOINTS.DATABASE.LOGS);\n      setLogs(response.data);\n    } catch (error) {\n      console.error(t('database.loadLogsError'), error);\n    } finally {\n      setLogsLoading(false);\n    }\n  };\n\n  const handleTableReset = (tableName: string) => {\n    setSelectedTable(tableName);\n    setShowTableConfirm(true);\n    setTableCountdown(5); // 5 Sekunden Bedenkzeit\n  };\n\n  const confirmTableReset = async () => {\n    if (!selectedTable || !tablePassword) {\n      toast.error(t('database.passwordRequired'));\n      return;\n    }\n\n    if (tableCountdown > 0) {\n      toast.error(t('database.waitSeconds', { seconds: tableCountdown }));\n      return;\n    }\n\n    try {\n      setLoading(true);\n      await axiosInstance.post(API_ENDPOINTS.DATABASE.RESET_TABLE, {\n        tableName: selectedTable,\n        adminPassword: tablePassword\n      });\n      \n      toast.success(t('database.resetTableSuccess', { tableName: selectedTable }));\n      setShowTableConfirm(false);\n      setSelectedTable(null);\n      setTablePassword('');\n      loadLogs(); // Logs neu laden\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || t('database.resetTableError'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const cancelTableReset = () => {\n    setShowTableConfirm(false);\n    setSelectedTable(null);\n    setTablePassword('');\n    setTableCountdown(0);\n  };\n\n  const handleDeleteDemoClients = () => {\n    setShowDemoConfirm(true);\n    setDemoCountdown(5); // 5 Sekunden Bedenkzeit\n  };\n\n  const confirmDeleteDemoClients = async () => {\n    if (!demoPassword) {\n      toast.error(t('database.passwordRequired'));\n      return;\n    }\n\n    if (demoCountdown > 0) {\n      toast.error(t('database.waitSeconds', { seconds: demoCountdown }));\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const response = await axiosInstance.post(API_ENDPOINTS.DATABASE.DELETE_DEMO_CLIENTS, {\n        adminPassword: demoPassword\n      });\n      \n      toast.success(t('database.deleteDemoClientsSuccess'));\n      setShowDemoConfirm(false);\n      setDemoPassword('');\n      loadLogs(); // Logs neu laden\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || t('database.deleteDemoClientsError'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const cancelDeleteDemoClients = () => {\n    setShowDemoConfirm(false);\n    setDemoPassword('');\n    setDemoCountdown(0);\n  };\n\n  const getDangerColor = (danger: string) => {\n    switch (danger) {\n      case 'low': return 'text-yellow-600 bg-yellow-50 border-yellow-200 dark:text-yellow-400 dark:bg-yellow-900/20 dark:border-yellow-700';\n      case 'medium': return 'text-orange-600 bg-orange-50 border-orange-200 dark:text-orange-400 dark:bg-orange-900/20 dark:border-orange-700';\n      case 'high': return 'text-red-600 bg-red-50 border-red-200 dark:text-red-400 dark:bg-red-900/20 dark:border-red-700';\n      default: return 'text-gray-600 bg-gray-50 border-gray-200 dark:text-gray-400 dark:bg-gray-700 dark:border-gray-600';\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'success': return 'text-green-600 dark:text-green-400';\n      case 'error': return 'text-red-600 dark:text-red-400';\n      case 'start': return 'text-blue-600 dark:text-blue-400';\n      default: return 'text-gray-600 dark:text-gray-400';\n    }\n  };\n\n  if (!user || !user.roles.some(r => r.role.name === 'Admin')) {\n    return (\n      <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center\">\n        <ExclamationTriangleIcon className=\"h-12 w-12 text-red-600 dark:text-red-400 mx-auto mb-4\" />\n        <p className=\"text-red-800 dark:text-red-200 font-medium\">\n          {t('database.noPermission')}\n        </p>\n        <p className=\"text-red-600 dark:text-red-400 text-sm mt-2\">\n          {t('database.adminOnly')}\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      {/* WARNUNG */}\n      <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6\">\n        <div className=\"flex items-start\">\n          <ExclamationTriangleIcon className=\"h-6 w-6 text-yellow-600 dark:text-yellow-400 mr-3 mt-1\" />\n          <div>\n            <h3 className=\"text-lg font-medium text-yellow-800 dark:text-yellow-200 mb-2\">\n              {t('database.warningTitle')}\n            </h3>\n            <ul className=\"text-yellow-700 dark:text-yellow-300 text-sm space-y-1\">\n              <li> {t('database.warning1')}</li>\n              <li> {t('database.warning2')}</li>\n              <li> {t('database.warning3')}</li>\n              <li> {t('database.warning4')}</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      {/* TABELLEN-RESET */}\n      <div className=\"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6\">\n        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center\">\n          <TrashIcon className=\"h-5 w-5 mr-2\" />\n          {t('database.resetTablesTitle')}\n        </h3>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {tables.map((table) => (\n            <div\n              key={table.name}\n              className={`border rounded-lg p-4 ${getDangerColor(table.danger)}`}\n            >\n              <div className=\"flex items-center justify-between mb-2\">\n                <h4 className=\"font-medium\">{getTableDisplayName(table.name)}</h4>\n                <span className={`text-xs px-2 py-1 rounded ${\n                  table.danger === 'high' ? 'bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300' :\n                  table.danger === 'medium' ? 'bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300' :\n                  'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300'\n                }`}>\n                  {table.danger === 'high' ? t('database.danger.high') : \n                   table.danger === 'medium' ? t('database.danger.medium') : t('database.danger.low')}\n                </span>\n              </div>\n              \n              <p className=\"text-sm mb-3\">{getTableDescription(table.name) || table.description}</p>\n              \n              <div className=\"flex items-center text-sm mb-3\">\n                <CheckCircleIcon className=\"h-4 w-4 mr-1\" />\n                {t('database.seedDataRestored')}\n              </div>\n              \n              <div className=\"space-y-2\">\n                {/* Spezieller Button fr Demo-Clients lschen (nur wenn table.name === 'client') */}\n                {table.name === 'client' && (\n                  <button\n                    onClick={handleDeleteDemoClients}\n                    disabled={loading}\n                    className=\"w-full p-2 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50 transition-colors flex items-center justify-center\"\n                    title={t('database.deleteDemoClients')}\n                  >\n                    <TrashIcon className=\"h-5 w-5\" />\n                  </button>\n                )}\n                \n                <button\n                  onClick={() => handleTableReset(table.name)}\n                  disabled={loading}\n                  className=\"w-full p-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50 transition-colors flex items-center justify-center\"\n                  title={t('database.resetAndRefill')}\n                >\n                  <ArrowPathIcon className=\"h-5 w-5\" />\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* LOGS */}\n      <div className=\"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white flex items-center\">\n            <DocumentTextIcon className=\"h-5 w-5 mr-2\" />\n            {t('database.operationsTitle')}\n          </h3>\n          <button\n            onClick={loadLogs}\n            disabled={logsLoading}\n            className=\"p-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 transition-colors\"\n            title={t('common.refresh')}\n          >\n            <ArrowPathIcon className=\"h-5 w-5\" />\n          </button>\n        </div>\n        \n        {logsLoading ? (\n          <div className=\"text-center py-4\">{t('database.loadingLogs')}</div>\n        ) : logs.length === 0 ? (\n          <div className=\"text-center py-4 text-gray-500 dark:text-gray-400\">{t('database.noLogsAvailable')}</div>\n        ) : (\n          <div className=\"space-y-2 max-h-96 overflow-y-auto\">\n            {logs.map((log, index) => (\n              <div\n                key={index}\n                className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded text-sm\"\n              >\n                <div className=\"flex items-center space-x-3\">\n                  <span className=\"text-gray-500 dark:text-gray-400\">\n                    {new Date(log.timestamp).toLocaleString()}\n                  </span>\n                  <span className=\"font-medium text-gray-900 dark:text-white\">{log.operation}</span>\n                  <span className={`font-medium ${getStatusColor(log.status)}`}>\n                    {log.status === 'success' ? '' : log.status === 'error' ? '' : ''} {t(`database.logStatus.${log.status}` as 'database.logStatus.start' | 'database.logStatus.success' | 'database.logStatus.error')}\n                  </span>\n                </div>\n                {log.error && (\n                  <span className=\"text-red-600 dark:text-red-400 text-xs max-w-xs truncate\">\n                    {log.error}\n                  </span>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* TABLE RESET MODAL */}\n      {showTableConfirm && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4\">\n            <div className=\"flex items-center mb-4\">\n              <ExclamationTriangleIcon className=\"h-6 w-6 text-orange-600 mr-2\" />\n              <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                {t('database.confirmResetTitle')}\n              </h3>\n            </div>\n            \n            <div className=\"mb-4\">\n              <p className=\"text-gray-700 dark:text-gray-300 mb-2\">\n                {t('database.confirmResetMessage', { tableName: tables.find(t => t.name === selectedTable)?.displayName })}\n              </p>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-3\">\n                {t('database.confirmResetWarning')}\n              </p>\n              \n              {tableCountdown > 0 && (\n                <div className=\"flex items-center text-orange-600 dark:text-orange-400 mb-3\">\n                  <ClockIcon className=\"h-4 w-4 mr-1\" />\n                  {t('database.reflectionTime', { seconds: tableCountdown })}\n                </div>\n              )}\n            </div>\n            \n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                <LockClosedIcon className=\"h-4 w-4 inline mr-1\" />\n                {t('database.adminPasswordLabel')}\n              </label>\n              <input\n                type=\"password\"\n                value={tablePassword}\n                onChange={(e) => setTablePassword(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                placeholder={t('database.adminPasswordPlaceholder')}\n              />\n            </div>\n            \n            <div className=\"flex space-x-3\">\n              <button\n                onClick={confirmTableReset}\n                disabled={loading || tableCountdown > 0 || !tablePassword}\n                className=\"flex-1 px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50 transition-colors\"\n              >\n                {loading ? t('database.resetting') : t('common.confirm')}\n              </button>\n              <button\n                onClick={cancelTableReset}\n                disabled={loading}\n                className=\"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors\"\n              >\n                {t('common.cancel')}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* DEMO CLIENTS DELETE MODAL */}\n      {showDemoConfirm && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4\">\n            <div className=\"flex items-center mb-4\">\n              <ExclamationTriangleIcon className=\"h-6 w-6 text-orange-600 mr-2\" />\n              <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                {t('database.confirmDeleteDemoClientsTitle')}\n              </h3>\n            </div>\n            \n            <div className=\"mb-4\">\n              <p className=\"text-gray-700 dark:text-gray-300 mb-2\">\n                {t('database.confirmDeleteDemoClientsMessage')}\n              </p>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-3\">\n                {t('database.confirmDeleteDemoClientsWarning')}\n              </p>\n              \n              {demoCountdown > 0 && (\n                <div className=\"flex items-center text-orange-600 dark:text-orange-400 mb-3\">\n                  <ClockIcon className=\"h-4 w-4 mr-1\" />\n                  {t('database.reflectionTime', { seconds: demoCountdown })}\n                </div>\n              )}\n            </div>\n            \n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                <LockClosedIcon className=\"h-4 w-4 inline mr-1\" />\n                {t('database.adminPasswordLabel')}\n              </label>\n              <input\n                type=\"password\"\n                value={demoPassword}\n                onChange={(e) => setDemoPassword(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                placeholder={t('database.adminPasswordPlaceholder')}\n              />\n            </div>\n            \n            <div className=\"flex space-x-3\">\n              <button\n                onClick={confirmDeleteDemoClients}\n                disabled={loading || demoCountdown > 0 || !demoPassword}\n                className=\"flex-1 px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 disabled:opacity-50 transition-colors\"\n              >\n                {loading ? t('database.deleting') : t('common.confirm')}\n              </button>\n              <button\n                onClick={cancelDeleteDemoClients}\n                disabled={loading}\n                className=\"flex-1 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors\"\n              >\n                {t('common.cancel')}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default DatabaseManagement; ","import axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\n\n// WICHTIG: axiosInstance hat bereits baseURL mit /api, daher nur /password-manager hier\nconst API_BASE = '/password-manager';\n\nexport interface PasswordEntry {\n  id: number;\n  title: string;\n  url?: string | null;\n  username?: string | null;\n  password?: string; // Nur wenn entschlsselt\n  notes?: string | null;\n  organizationId?: number | null;\n  createdById: number;\n  createdBy?: {\n    id: number;\n    firstName: string | null;\n    lastName: string | null;\n  };\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface CreatePasswordEntryData {\n  title: string;\n  url?: string;\n  username?: string;\n  password: string;\n  notes?: string;\n  rolePermissions?: Array<{\n    roleId: number;\n    canView: boolean;\n    canEdit: boolean;\n    canDelete: boolean;\n  }>;\n  userPermissions?: Array<{\n    userId: number;\n    canView: boolean;\n    canEdit: boolean;\n    canDelete: boolean;\n  }>;\n}\n\nexport interface UpdatePasswordEntryData {\n  title?: string;\n  url?: string;\n  username?: string;\n  password?: string;\n  notes?: string;\n}\n\nexport interface GeneratePasswordOptions {\n  length?: number;\n  includeNumbers?: boolean;\n  includeSymbols?: boolean;\n}\n\nexport interface PasswordEntryAuditLog {\n  id: number;\n  entryId: number;\n  userId: number;\n  user?: {\n    id: number;\n    firstName: string | null;\n    lastName: string | null;\n  };\n  action: string;\n  details?: any;\n  ipAddress?: string | null;\n  userAgent?: string | null;\n  createdAt: string;\n}\n\nexport interface PasswordEntryPermission {\n  id: number;\n  passwordEntryId: number;\n  roleId?: number;\n  userId?: number;\n  canView: boolean;\n  canEdit: boolean;\n  canDelete: boolean;\n  role?: {\n    id: number;\n    name: string;\n  };\n  user?: {\n    id: number;\n    firstName: string | null;\n    lastName: string | null;\n    email: string;\n  };\n}\n\nexport interface PasswordEntryPermissions {\n  rolePermissions: PasswordEntryPermission[];\n  userPermissions: PasswordEntryPermission[];\n}\n\nexport interface UpdatePermissionsData {\n  rolePermissions?: Array<{\n    roleId: number;\n    canView: boolean;\n    canEdit: boolean;\n    canDelete: boolean;\n  }>;\n  userPermissions?: Array<{\n    userId: number;\n    canView: boolean;\n    canEdit: boolean;\n    canDelete: boolean;\n  }>;\n}\n\nexport const passwordManagerApi = {\n  /**\n   * Alle Passwort-Eintrge abrufen (nur Metadaten, keine Passwrter)\n   */\n  async getAll(): Promise<PasswordEntry[]> {\n    const response = await axiosInstance.get(API_BASE);\n    return response.data;\n  },\n\n  /**\n   * Einzelnen Passwort-Eintrag abrufen (mit Passwort, wenn berechtigt)\n   */\n  async getById(id: number): Promise<PasswordEntry> {\n    const response = await axiosInstance.get(API_ENDPOINTS.PASSWORD_MANAGER.BY_ID(id));\n    return response.data;\n  },\n\n  /**\n   * Nur Passwort abrufen (entschlsselt)\n   */\n  async getPassword(id: number): Promise<{ password: string }> {\n    const response = await axiosInstance.get(API_ENDPOINTS.PASSWORD_MANAGER.PASSWORD(id));\n    return response.data;\n  },\n\n  /**\n   * Neuen Passwort-Eintrag erstellen\n   */\n  async create(data: CreatePasswordEntryData): Promise<PasswordEntry> {\n    const response = await axiosInstance.post(API_BASE, data);\n    return response.data;\n  },\n\n  /**\n   * Passwort-Eintrag aktualisieren\n   */\n  async update(id: number, data: UpdatePasswordEntryData): Promise<PasswordEntry> {\n    const response = await axiosInstance.put(API_ENDPOINTS.PASSWORD_MANAGER.BY_ID(id), data);\n    return response.data;\n  },\n\n  /**\n   * Passwort-Eintrag lschen\n   */\n  async delete(id: number): Promise<void> {\n    await axiosInstance.delete(API_ENDPOINTS.PASSWORD_MANAGER.BY_ID(id));\n  },\n\n  /**\n   * Passwort generieren\n   */\n  async generatePassword(options: GeneratePasswordOptions = {}): Promise<{ password: string }> {\n    const response = await axiosInstance.post(API_ENDPOINTS.PASSWORD_MANAGER.GENERATE_PASSWORD, options);\n    return response.data;\n  },\n\n  /**\n   * Audit-Logs fr Eintrag abrufen\n   */\n  async getAuditLogs(id: number): Promise<PasswordEntryAuditLog[]> {\n    const response = await axiosInstance.get(API_ENDPOINTS.PASSWORD_MANAGER.AUDIT_LOGS(id));\n    return response.data;\n  },\n\n  /**\n   * Berechtigungen fr Eintrag abrufen\n   */\n  async getPermissions(id: number): Promise<PasswordEntryPermissions> {\n    const response = await axiosInstance.get(API_ENDPOINTS.PASSWORD_MANAGER.PERMISSIONS(id));\n    return response.data;\n  },\n\n  /**\n   * Berechtigungen fr Eintrag aktualisieren\n   */\n  async updatePermissions(id: number, data: UpdatePermissionsData): Promise<void> {\n    await axiosInstance.put(API_ENDPOINTS.PASSWORD_MANAGER.PERMISSIONS(id), data);\n  },\n\n  /**\n   * Passwort kopiert - Erstellt copy_password Audit-Log\n   */\n  async logPasswordCopy(id: number): Promise<void> {\n    await axiosInstance.post(API_ENDPOINTS.PASSWORD_MANAGER.COPY_PASSWORD(id));\n  }\n};\n\n","import React, { useState, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Dialog } from '@headlessui/react';\r\nimport { XMarkIcon, CheckIcon, ArrowPathIcon, KeyIcon, EyeIcon, EyeSlashIcon } from '@heroicons/react/24/outline';\r\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\r\nimport { passwordManagerApi, PasswordEntry, CreatePasswordEntryData, UpdatePasswordEntryData } from '../services/passwordManagerApi.ts';\r\nimport { toast } from 'react-toastify';\r\n\r\ninterface PasswordEntrySidepaneProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  entry?: PasswordEntry | null;\r\n  onEntrySaved: (entry: PasswordEntry) => void;\r\n}\r\n\r\nconst PasswordEntrySidepane: React.FC<PasswordEntrySidepaneProps> = ({ isOpen, onClose, entry, onEntrySaved }) => {\r\n  const { t } = useTranslation();\r\n  const { openSidepane, closeSidepane } = useSidepane();\r\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\r\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\r\n  \r\n  const [title, setTitle] = useState('');\r\n  const [url, setUrl] = useState('');\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [notes, setNotes] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [generatingPassword, setGeneratingPassword] = useState(false);\r\n  const [passwordStrength, setPasswordStrength] = useState<'weak' | 'medium' | 'strong' | 'veryStrong' | null>(null);\r\n\r\n  // Bildschirmgre berwachen\r\n  useEffect(() => {\r\n    const checkScreenSize = () => {\r\n      setIsMobile(window.innerWidth < 640);\r\n      setIsLargeScreen(window.innerWidth > 1070);\r\n    };\r\n    \r\n    checkScreenSize();\r\n    window.addEventListener('resize', checkScreenSize);\r\n    \r\n    return () => {\r\n      window.removeEventListener('resize', checkScreenSize);\r\n    };\r\n  }, []);\r\n\r\n  // Sidepane-Status verwalten\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      openSidepane();\r\n    } else {\r\n      closeSidepane();\r\n    }\r\n    \r\n    return () => {\r\n      closeSidepane();\r\n    };\r\n  }, [isOpen, openSidepane, closeSidepane]);\r\n\r\n  // Formular-Daten laden (wenn Bearbeitung)\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      if (entry) {\r\n        setTitle(entry.title || '');\r\n        setUrl(entry.url || '');\r\n        setUsername(entry.username || '');\r\n        setPassword(entry.password || '');\r\n        setNotes(entry.notes || '');\r\n        setShowPassword(false);\r\n      } else {\r\n        // Neuer Eintrag - Formular zurcksetzen\r\n        setTitle('');\r\n        setUrl('');\r\n        setUsername('');\r\n        setPassword('');\r\n        setNotes('');\r\n        setShowPassword(false);\r\n      }\r\n      setError(null);\r\n      setPasswordStrength(null);\r\n    }\r\n  }, [isOpen, entry]);\r\n\r\n  // Passwort-Strke berechnen\r\n  useEffect(() => {\r\n    if (password) {\r\n      calculatePasswordStrength(password);\r\n    } else {\r\n      setPasswordStrength(null);\r\n    }\r\n  }, [password]);\r\n\r\n  const calculatePasswordStrength = (pwd: string) => {\r\n    let strength = 0;\r\n    \r\n    if (pwd.length >= 8) strength++;\r\n    if (pwd.length >= 12) strength++;\r\n    if (pwd.length >= 16) strength++;\r\n    if (/[a-z]/.test(pwd)) strength++;\r\n    if (/[A-Z]/.test(pwd)) strength++;\r\n    if (/[0-9]/.test(pwd)) strength++;\r\n    if (/[^a-zA-Z0-9]/.test(pwd)) strength++;\r\n    \r\n    if (strength <= 2) {\r\n      setPasswordStrength('weak');\r\n    } else if (strength <= 4) {\r\n      setPasswordStrength('medium');\r\n    } else if (strength <= 6) {\r\n      setPasswordStrength('strong');\r\n    } else {\r\n      setPasswordStrength('veryStrong');\r\n    }\r\n  };\r\n\r\n  const getPasswordStrengthColor = () => {\r\n    switch (passwordStrength) {\r\n      case 'weak': return 'bg-red-500';\r\n      case 'medium': return 'bg-yellow-500';\r\n      case 'strong': return 'bg-blue-500';\r\n      case 'veryStrong': return 'bg-green-500';\r\n      default: return 'bg-gray-300';\r\n    }\r\n  };\r\n\r\n  const getPasswordStrengthText = () => {\r\n    switch (passwordStrength) {\r\n      case 'weak': return t('passwordManager.passwordStrengthWeak');\r\n      case 'medium': return t('passwordManager.passwordStrengthMedium');\r\n      case 'strong': return t('passwordManager.passwordStrengthStrong');\r\n      case 'veryStrong': return t('passwordManager.passwordStrengthVeryStrong');\r\n      default: return '';\r\n    }\r\n  };\r\n\r\n  // URL-Validierung\r\n  const isValidUrl = (urlString: string): boolean => {\r\n    if (!urlString) return true; // Leere URL ist erlaubt\r\n    \r\n    try {\r\n      const url = new URL(urlString);\r\n      // Nur http:// und https:// erlauben\r\n      return url.protocol === 'http:' || url.protocol === 'https:';\r\n    } catch {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Passwort generieren\r\n  const handleGeneratePassword = async () => {\r\n    try {\r\n      setGeneratingPassword(true);\r\n      const response = await passwordManagerApi.generatePassword({\r\n        length: 16,\r\n        includeNumbers: true,\r\n        includeSymbols: true\r\n      });\r\n      setPassword(response.password);\r\n      setShowPassword(true);\r\n    } catch (error: any) {\r\n      console.error('Error generating password:', error);\r\n      toast.error(t('passwordManager.error') || 'Fehler beim Generieren des Passworts');\r\n    } finally {\r\n      setGeneratingPassword(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n    setLoading(true);\r\n\r\n    try {\r\n      // Validierung\r\n      if (!title.trim()) {\r\n        setError(t('passwordManager.titleRequired'));\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (!password.trim()) {\r\n        setError(t('passwordManager.passwordRequired'));\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (url && !isValidUrl(url)) {\r\n        setError(t('passwordManager.urlInvalid'));\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      if (entry) {\r\n        // Update\r\n        const updateData: UpdatePasswordEntryData = {\r\n          title: title.trim(),\r\n          url: url.trim() || undefined,\r\n          username: username.trim() || undefined,\r\n          password: password.trim(),\r\n          notes: notes.trim() || undefined\r\n        };\r\n        \r\n        const updatedEntry = await passwordManagerApi.update(entry.id, updateData);\r\n        onEntrySaved(updatedEntry);\r\n        toast.success(t('passwordManager.editEntry') || 'Eintrag erfolgreich aktualisiert');\r\n      } else {\r\n        // Create\r\n        const createData: CreatePasswordEntryData = {\r\n          title: title.trim(),\r\n          url: url.trim() || undefined,\r\n          username: username.trim() || undefined,\r\n          password: password.trim(),\r\n          notes: notes.trim() || undefined\r\n        };\r\n        \r\n        const newEntry = await passwordManagerApi.create(createData);\r\n        onEntrySaved(newEntry);\r\n        toast.success(t('passwordManager.createEntry') || 'Eintrag erfolgreich erstellt');\r\n      }\r\n\r\n      handleClose();\r\n    } catch (error: any) {\r\n      console.error('Error saving password entry:', error);\r\n      setError(error.response?.data?.message || error.message || t('passwordManager.error'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setTitle('');\r\n    setUrl('');\r\n    setUsername('');\r\n    setPassword('');\r\n    setNotes('');\r\n    setShowPassword(false);\r\n    setError(null);\r\n    setPasswordStrength(null);\r\n    onClose();\r\n  };\r\n\r\n  // Mobile: Modal\r\n  if (isMobile) {\r\n    return (\r\n      <Dialog open={isOpen} onClose={handleClose} className=\"relative z-50\">\r\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\r\n        \r\n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n          <Dialog.Panel className=\"mx-auto max-w-xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[90vh] flex flex-col\">\r\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\r\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\r\n                {entry ? t('passwordManager.editEntry') : t('passwordManager.createEntry')}\r\n              </Dialog.Title>\r\n              <button\r\n                onClick={handleClose}\r\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n              >\r\n                <XMarkIcon className=\"h-6 w-6\" />\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\r\n              {error && (\r\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\r\n                  {error}\r\n                </div>\r\n              )}\r\n\r\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                    {t('passwordManager.entryTitle')} *\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={title}\r\n                    onChange={(e) => setTitle(e.target.value)}\r\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                    {t('passwordManager.entryUrl')}\r\n                  </label>\r\n                  <input\r\n                    type=\"url\"\r\n                    value={url}\r\n                    onChange={(e) => setUrl(e.target.value)}\r\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\r\n                    placeholder=\"https://example.com\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                    {t('passwordManager.entryUsername')}\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={username}\r\n                    onChange={(e) => setUsername(e.target.value)}\r\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                    {t('passwordManager.entryPassword')} *\r\n                  </label>\r\n                  <div className=\"mt-1 flex gap-2\">\r\n                    <div className=\"flex-1 relative\">\r\n                      <input\r\n                        type={showPassword ? 'text' : 'password'}\r\n                        value={password}\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                        className=\"block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 pr-10 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\r\n                        required\r\n                      />\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setShowPassword(!showPassword)}\r\n                        className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n                      >\r\n                        {showPassword ? (\r\n                          <EyeSlashIcon className=\"h-5 w-5\" />\r\n                        ) : (\r\n                          <EyeIcon className=\"h-5 w-5\" />\r\n                        )}\r\n                      </button>\r\n                    </div>\r\n                    <div className=\"relative group\">\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={handleGeneratePassword}\r\n                        disabled={generatingPassword}\r\n                        className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                        title={t('passwordManager.generatePassword')}\r\n                      >\r\n                        {generatingPassword ? (\r\n                          <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n                        ) : (\r\n                          <KeyIcon className=\"h-5 w-5\" />\r\n                        )}\r\n                      </button>\r\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\r\n                        {t('passwordManager.generatePassword')}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  {passwordStrength && (\r\n                    <div className=\"mt-2\">\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <div className=\"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden\">\r\n                          <div\r\n                            className={`h-full ${getPasswordStrengthColor()} transition-all duration-300`}\r\n                            style={{ width: passwordStrength === 'weak' ? '25%' : passwordStrength === 'medium' ? '50%' : passwordStrength === 'strong' ? '75%' : '100%' }}\r\n                          />\r\n                        </div>\r\n                        <span className=\"text-xs text-gray-600 dark:text-gray-400\">\r\n                          {getPasswordStrengthText()}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                    {t('passwordManager.entryNotes')}\r\n                  </label>\r\n                  <textarea\r\n                    value={notes}\r\n                    onChange={(e) => setNotes(e.target.value)}\r\n                    rows={3}\r\n                    className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"flex justify-end gap-3 pt-4\">\r\n                  <div className=\"relative group\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={handleClose}\r\n                      className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\r\n                    >\r\n                      <XMarkIcon className=\"h-5 w-5\" />\r\n                    </button>\r\n                    <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\r\n                      {t('passwordManager.cancel')}\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"relative group\">\r\n                    <button\r\n                      type=\"submit\"\r\n                      className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                      disabled={loading}\r\n                    >\r\n                      {loading ? (\r\n                        <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n                      ) : (\r\n                        <CheckIcon className=\"h-5 w-5\" />\r\n                      )}\r\n                    </button>\r\n                    <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\r\n                      {loading ? t('common.saving') : t('passwordManager.save')}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </Dialog.Panel>\r\n        </div>\r\n      </Dialog>\r\n    );\r\n  }\r\n\r\n  // Desktop: Sidepane\r\n  return (\r\n    <>\r\n      {/* Backdrop nur bei <= 1070px */}\r\n      {isOpen && !isLargeScreen && (\r\n        <div \r\n          className=\"fixed inset-0 bg-black/10 sidepane-overlay sidepane-backdrop z-40\" \r\n          aria-hidden=\"true\"\r\n          style={{\r\n            opacity: isOpen ? 1 : 0,\r\n            transition: 'opacity 300ms ease-out'\r\n          }}\r\n        />\r\n      )}\r\n      \r\n      {/* Sidepane */}\r\n      <div \r\n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\r\n        style={{\r\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\r\n          pointerEvents: isOpen ? 'auto' : 'none'\r\n        }}\r\n        aria-hidden={!isOpen}\r\n        role=\"dialog\"\r\n        aria-modal={isOpen}\r\n      >\r\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\r\n          <h2 className=\"text-lg font-semibold dark:text-white\">\r\n            {entry ? t('passwordManager.editEntry') : t('passwordManager.createEntry')}\r\n          </h2>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n          >\r\n            <XMarkIcon className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\r\n          {error && (\r\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                {t('passwordManager.entryTitle')} *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={title}\r\n                onChange={(e) => setTitle(e.target.value)}\r\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                {t('passwordManager.entryUrl')}\r\n              </label>\r\n              <input\r\n                type=\"url\"\r\n                value={url}\r\n                onChange={(e) => setUrl(e.target.value)}\r\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\r\n                placeholder=\"https://example.com\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                {t('passwordManager.entryUsername')}\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={username}\r\n                onChange={(e) => setUsername(e.target.value)}\r\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                {t('passwordManager.entryPassword')} *\r\n              </label>\r\n              <div className=\"mt-1 flex gap-2\">\r\n                <div className=\"flex-1 relative\">\r\n                  <input\r\n                    type={showPassword ? 'text' : 'password'}\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    className=\"block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 pr-10 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\r\n                    required\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowPassword(!showPassword)}\r\n                    className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n                  >\r\n                    {showPassword ? (\r\n                      <EyeSlashIcon className=\"h-5 w-5\" />\r\n                    ) : (\r\n                      <EyeIcon className=\"h-5 w-5\" />\r\n                    )}\r\n                  </button>\r\n                </div>\r\n                <div className=\"relative group\">\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={handleGeneratePassword}\r\n                    disabled={generatingPassword}\r\n                    className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                    title={t('passwordManager.generatePassword')}\r\n                  >\r\n                    {generatingPassword ? (\r\n                      <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n                    ) : (\r\n                      <KeyIcon className=\"h-5 w-5\" />\r\n                    )}\r\n                  </button>\r\n                  <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\r\n                    {t('passwordManager.generatePassword')}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              {passwordStrength && (\r\n                <div className=\"mt-2\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden\">\r\n                      <div\r\n                        className={`h-full ${getPasswordStrengthColor()} transition-all duration-300`}\r\n                        style={{ width: passwordStrength === 'weak' ? '25%' : passwordStrength === 'medium' ? '50%' : passwordStrength === 'strong' ? '75%' : '100%' }}\r\n                      />\r\n                    </div>\r\n                    <span className=\"text-xs text-gray-600 dark:text-gray-400\">\r\n                      {getPasswordStrengthText()}\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\r\n                {t('passwordManager.entryNotes')}\r\n              </label>\r\n              <textarea\r\n                value={notes}\r\n                onChange={(e) => setNotes(e.target.value)}\r\n                rows={3}\r\n                className=\"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"flex justify-end gap-3 pt-4\">\r\n              <div className=\"relative group\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleClose}\r\n                  className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\r\n                >\r\n                  <XMarkIcon className=\"h-5 w-5\" />\r\n                </button>\r\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\r\n                  {t('passwordManager.cancel')}\r\n                </div>\r\n              </div>\r\n              <div className=\"relative group\">\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                  disabled={loading}\r\n                >\r\n                  {loading ? (\r\n                    <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n                  ) : (\r\n                    <CheckIcon className=\"h-5 w-5\" />\r\n                  )}\r\n                </button>\r\n                <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\r\n                  {loading ? t('common.saving') : t('passwordManager.save')}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PasswordEntrySidepane;\r\n\r\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, CheckIcon, UserIcon, UserGroupIcon, PlusIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport { passwordManagerApi, PasswordEntryPermission, UpdatePermissionsData } from '../services/passwordManagerApi.ts';\nimport { toast } from 'react-toastify';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\n\ninterface PasswordEntryPermissionsModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  entryId: number;\n  onPermissionsUpdated: () => void;\n}\n\ninterface Role {\n  id: number;\n  name: string;\n}\n\ninterface User {\n  id: number;\n  firstName: string | null;\n  lastName: string | null;\n  email: string;\n}\n\nconst PasswordEntryPermissionsModal: React.FC<PasswordEntryPermissionsModalProps> = ({\n  isOpen,\n  onClose,\n  entryId,\n  onPermissionsUpdated\n}) => {\n  const { t } = useTranslation();\n  const [rolePermissions, setRolePermissions] = useState<PasswordEntryPermission[]>([]);\n  const [userPermissions, setUserPermissions] = useState<PasswordEntryPermission[]>([]);\n  const [availableRoles, setAvailableRoles] = useState<Role[]>([]);\n  const [availableUsers, setAvailableUsers] = useState<User[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [selectedRoleId, setSelectedRoleId] = useState<number | ''>('');\n  const [selectedUserId, setSelectedUserId] = useState<number | ''>('');\n\n  // Lade Berechtigungen und verfgbare Rollen/User\n  useEffect(() => {\n    if (isOpen && entryId) {\n      loadData();\n    }\n  }, [isOpen, entryId]);\n\n  const loadData = async () => {\n    try {\n      setIsLoading(true);\n      const [permissions, rolesResponse, usersResponse] = await Promise.all([\n        passwordManagerApi.getPermissions(entryId),\n        axiosInstance.get(API_ENDPOINTS.ROLES.BASE),\n        axiosInstance.get(API_ENDPOINTS.USERS.BASE)\n      ]);\n\n      setRolePermissions(permissions.rolePermissions);\n      setUserPermissions(permissions.userPermissions);\n      setAvailableRoles(rolesResponse.data || []);\n      setAvailableUsers(usersResponse.data || []);\n    } catch (error: any) {\n      console.error('Error loading permissions:', error);\n      toast.error(t('passwordManager.errorLoadingPermissions') || 'Fehler beim Laden der Berechtigungen');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleAddRolePermission = () => {\n    if (!selectedRoleId || rolePermissions.find(rp => rp.roleId === selectedRoleId)) {\n      return;\n    }\n\n    const role = availableRoles.find(r => r.id === selectedRoleId);\n    if (!role) return;\n\n    setRolePermissions([\n      ...rolePermissions,\n      {\n        id: 0,\n        passwordEntryId: entryId,\n        roleId: selectedRoleId as number,\n        canView: false,\n        canEdit: false,\n        canDelete: false,\n        role: { id: role.id, name: role.name }\n      }\n    ]);\n    setSelectedRoleId('');\n  };\n\n  const handleAddUserPermission = () => {\n    if (!selectedUserId || userPermissions.find(up => up.userId === selectedUserId)) {\n      return;\n    }\n\n    const user = availableUsers.find(u => u.id === selectedUserId);\n    if (!user) return;\n\n    setUserPermissions([\n      ...userPermissions,\n      {\n        id: 0,\n        passwordEntryId: entryId,\n        userId: selectedUserId as number,\n        canView: false,\n        canEdit: false,\n        canDelete: false,\n        user: {\n          id: user.id,\n          firstName: user.firstName,\n          lastName: user.lastName,\n          email: user.email\n        }\n      }\n    ]);\n    setSelectedUserId('');\n  };\n\n  const handleRemoveRolePermission = (roleId: number) => {\n    setRolePermissions(rolePermissions.filter(rp => rp.roleId !== roleId));\n  };\n\n  const handleRemoveUserPermission = (userId: number) => {\n    setUserPermissions(userPermissions.filter(up => up.userId !== userId));\n  };\n\n  const handleTogglePermission = (\n    type: 'role' | 'user',\n    id: number,\n    permission: 'canView' | 'canEdit' | 'canDelete'\n  ) => {\n    if (type === 'role') {\n      setRolePermissions(\n        rolePermissions.map(rp =>\n          rp.roleId === id ? { ...rp, [permission]: !rp[permission] } : rp\n        )\n      );\n    } else {\n      setUserPermissions(\n        userPermissions.map(up =>\n          up.userId === id ? { ...up, [permission]: !up[permission] } : up\n        )\n      );\n    }\n  };\n\n  const handleSave = async () => {\n    try {\n      setIsSaving(true);\n      const data: UpdatePermissionsData = {\n        rolePermissions: rolePermissions.map(rp => ({\n          roleId: rp.roleId!,\n          canView: rp.canView,\n          canEdit: rp.canEdit,\n          canDelete: rp.canDelete\n        })),\n        userPermissions: userPermissions.map(up => ({\n          userId: up.userId!,\n          canView: up.canView,\n          canEdit: up.canEdit,\n          canDelete: up.canDelete\n        }))\n      };\n\n      await passwordManagerApi.updatePermissions(entryId, data);\n      toast.success(t('passwordManager.permissionsUpdated') || 'Berechtigungen erfolgreich aktualisiert');\n      onPermissionsUpdated();\n      onClose();\n    } catch (error: any) {\n      console.error('Error saving permissions:', error);\n      toast.error(t('passwordManager.errorSavingPermissions') || 'Fehler beim Speichern der Berechtigungen');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const availableRolesToAdd = availableRoles.filter(\n    r => !rolePermissions.find(rp => rp.roleId === r.id)\n  );\n  const availableUsersToAdd = availableUsers.filter(\n    u => !userPermissions.find(up => up.userId === u.id)\n  );\n\n  return (\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n      <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n      \n      <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n        <Dialog.Panel className=\"mx-auto max-w-2xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[90vh] flex flex-col\">\n          <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n            <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n              {t('passwordManager.managePermissions')}\n            </Dialog.Title>\n            <button\n              onClick={onClose}\n              className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n            >\n              <XMarkIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n            {isLoading ? (\n              <div className=\"text-center py-8\">\n                <p className=\"text-gray-600 dark:text-gray-400\">{t('common.loading')}</p>\n              </div>\n            ) : (\n              <div className=\"space-y-6\">\n                {/* Rollen-Berechtigungen */}\n                <div>\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h3 className=\"text-md font-semibold dark:text-white flex items-center gap-2\">\n                      <UserGroupIcon className=\"h-5 w-5\" />\n                      {t('passwordManager.rolePermissions')}\n                    </h3>\n                    {availableRolesToAdd.length > 0 && (\n                      <div className=\"flex gap-2\">\n                        <select\n                          value={selectedRoleId}\n                          onChange={(e) => setSelectedRoleId(Number(e.target.value) || '')}\n                          className=\"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                        >\n                          <option value=\"\">{t('passwordManager.selectRole')}</option>\n                          {availableRolesToAdd.map(role => (\n                            <option key={role.id} value={role.id}>\n                              {role.name}\n                            </option>\n                          ))}\n                        </select>\n                        <div className=\"relative group\">\n                          <button\n                            onClick={handleAddRolePermission}\n                            className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-gray-700 rounded-md\"\n                            title={t('common.add')}\n                          >\n                            <PlusIcon className=\"h-5 w-5\" />\n                          </button>\n                          <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                            {t('common.add')}\n                          </div>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n\n                  {rolePermissions.length === 0 ? (\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                      {t('passwordManager.noRolePermissions')}\n                    </p>\n                  ) : (\n                    <div className=\"space-y-2\">\n                      {rolePermissions.map(rp => (\n                        <div\n                          key={rp.roleId}\n                          className=\"p-3 border border-gray-200 dark:border-gray-700 rounded-md\"\n                        >\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <span className=\"font-medium dark:text-white\">\n                              {rp.role?.name || `Rolle ${rp.roleId}`}\n                            </span>\n                            <button\n                              onClick={() => handleRemoveRolePermission(rp.roleId!)}\n                              className=\"text-red-600 dark:text-red-400 hover:text-red-700 text-sm\"\n                            >\n                              {t('common.remove')}\n                            </button>\n                          </div>\n                          <div className=\"flex gap-4\">\n                            <label className=\"flex items-center gap-2\">\n                              <input\n                                type=\"checkbox\"\n                                checked={rp.canView}\n                                onChange={() => handleTogglePermission('role', rp.roleId!, 'canView')}\n                                className=\"rounded\"\n                              />\n                              <span className=\"text-sm dark:text-gray-300\">{t('passwordManager.canView')}</span>\n                            </label>\n                            <label className=\"flex items-center gap-2\">\n                              <input\n                                type=\"checkbox\"\n                                checked={rp.canEdit}\n                                onChange={() => handleTogglePermission('role', rp.roleId!, 'canEdit')}\n                                className=\"rounded\"\n                              />\n                              <span className=\"text-sm dark:text-gray-300\">{t('passwordManager.canEdit')}</span>\n                            </label>\n                            <label className=\"flex items-center gap-2\">\n                              <input\n                                type=\"checkbox\"\n                                checked={rp.canDelete}\n                                onChange={() => handleTogglePermission('role', rp.roleId!, 'canDelete')}\n                                className=\"rounded\"\n                              />\n                              <span className=\"text-sm dark:text-gray-300\">{t('passwordManager.canDelete')}</span>\n                            </label>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n\n                {/* User-Berechtigungen */}\n                <div>\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <h3 className=\"text-md font-semibold dark:text-white flex items-center gap-2\">\n                      <UserIcon className=\"h-5 w-5\" />\n                      {t('passwordManager.userPermissions')}\n                    </h3>\n                    {availableUsersToAdd.length > 0 && (\n                      <div className=\"flex gap-2\">\n                        <select\n                          value={selectedUserId}\n                          onChange={(e) => setSelectedUserId(Number(e.target.value) || '')}\n                          className=\"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white\"\n                        >\n                          <option value=\"\">{t('passwordManager.selectUser')}</option>\n                          {availableUsersToAdd.map(user => (\n                            <option key={user.id} value={user.id}>\n                              {user.firstName} {user.lastName} ({user.email})\n                            </option>\n                          ))}\n                        </select>\n                        <div className=\"relative group\">\n                          <button\n                            onClick={handleAddUserPermission}\n                            className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-gray-700 rounded-md\"\n                            title={t('common.add')}\n                          >\n                            <PlusIcon className=\"h-5 w-5\" />\n                          </button>\n                          <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                            {t('common.add')}\n                          </div>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n\n                  {userPermissions.length === 0 ? (\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                      {t('passwordManager.noUserPermissions')}\n                    </p>\n                  ) : (\n                    <div className=\"space-y-2\">\n                      {userPermissions.map(up => (\n                        <div\n                          key={up.userId}\n                          className=\"p-3 border border-gray-200 dark:border-gray-700 rounded-md\"\n                        >\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <span className=\"font-medium dark:text-white\">\n                              {up.user?.firstName} {up.user?.lastName} ({up.user?.email})\n                            </span>\n                            <button\n                              onClick={() => handleRemoveUserPermission(up.userId!)}\n                              className=\"text-red-600 dark:text-red-400 hover:text-red-700 text-sm\"\n                            >\n                              {t('common.remove')}\n                            </button>\n                          </div>\n                          <div className=\"flex gap-4\">\n                            <label className=\"flex items-center gap-2\">\n                              <input\n                                type=\"checkbox\"\n                                checked={up.canView}\n                                onChange={() => handleTogglePermission('user', up.userId!, 'canView')}\n                                className=\"rounded\"\n                              />\n                              <span className=\"text-sm dark:text-gray-300\">{t('passwordManager.canView')}</span>\n                            </label>\n                            <label className=\"flex items-center gap-2\">\n                              <input\n                                type=\"checkbox\"\n                                checked={up.canEdit}\n                                onChange={() => handleTogglePermission('user', up.userId!, 'canEdit')}\n                                className=\"rounded\"\n                              />\n                              <span className=\"text-sm dark:text-gray-300\">{t('passwordManager.canEdit')}</span>\n                            </label>\n                            <label className=\"flex items-center gap-2\">\n                              <input\n                                type=\"checkbox\"\n                                checked={up.canDelete}\n                                onChange={() => handleTogglePermission('user', up.userId!, 'canDelete')}\n                                className=\"rounded\"\n                              />\n                              <span className=\"text-sm dark:text-gray-300\">{t('passwordManager.canDelete')}</span>\n                            </label>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n\n          <div className=\"flex items-center justify-end gap-2 p-4 border-t dark:border-gray-700 flex-shrink-0\">\n            <button\n              onClick={onClose}\n              className=\"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600\"\n            >\n              {t('common.cancel')}\n            </button>\n            <div className=\"relative group\">\n              <button\n                onClick={handleSave}\n                disabled={isSaving}\n                className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                title={t('common.save')}\n              >\n                {isSaving ? (\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                ) : (\n                  <CheckIcon className=\"h-5 w-5\" />\n                )}\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('common.save')}\n              </div>\n            </div>\n          </div>\n        </Dialog.Panel>\n      </div>\n    </Dialog>\n  );\n};\n\nexport default PasswordEntryPermissionsModal;\n\n","import React, { useState, useEffect } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Dialog } from '@headlessui/react';\r\nimport { XMarkIcon, ClockIcon } from '@heroicons/react/24/outline';\r\nimport { passwordManagerApi, PasswordEntryAuditLog } from '../services/passwordManagerApi.ts';\r\nimport { toast } from 'react-toastify';\r\n\r\ninterface PasswordEntryAuditLogsModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  entryId: number;\r\n}\r\n\r\nconst PasswordEntryAuditLogsModal: React.FC<PasswordEntryAuditLogsModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  entryId\r\n}) => {\r\n  const { t } = useTranslation();\r\n  const [auditLogs, setAuditLogs] = useState<PasswordEntryAuditLog[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && entryId) {\r\n      loadAuditLogs();\r\n    }\r\n  }, [isOpen, entryId]);\r\n\r\n  const loadAuditLogs = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const logs = await passwordManagerApi.getAuditLogs(entryId);\r\n      setAuditLogs(logs);\r\n    } catch (error: any) {\r\n      console.error('Error loading audit logs:', error);\r\n      toast.error(t('passwordManager.errorLoadingAuditLogs') || 'Fehler beim Laden der Audit-Logs');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    return new Intl.DateTimeFormat('de-DE', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      second: '2-digit'\r\n    }).format(date);\r\n  };\r\n\r\n  const getActionLabel = (action: string) => {\r\n    const labels: Record<string, string> = {\r\n      view: t('passwordManager.auditLogActionView') || 'Anzeigen',\r\n      view_password: t('passwordManager.auditLogActionViewPassword') || 'Passwort anzeigen',\r\n      copy_password: t('passwordManager.auditLogActionCopyPassword') || 'Passwort kopieren',\r\n      create: t('passwordManager.auditLogActionCreate') || 'Erstellen',\r\n      update: t('passwordManager.auditLogActionUpdate') || 'Aktualisieren',\r\n      delete: t('passwordManager.auditLogActionDelete') || 'Lschen'\r\n    };\r\n    return labels[action] || action;\r\n  };\r\n\r\n  return (\r\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\r\n      <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\r\n      \r\n      <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n        <Dialog.Panel className=\"mx-auto max-w-3xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[90vh] flex flex-col\">\r\n          <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\r\n            <Dialog.Title className=\"text-lg font-semibold dark:text-white flex items-center gap-2\">\r\n              <ClockIcon className=\"h-5 w-5\" />\r\n              {t('passwordManager.auditLogs')}\r\n            </Dialog.Title>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\r\n            >\r\n              <XMarkIcon className=\"h-6 w-6\" />\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\r\n            {isLoading ? (\r\n              <div className=\"text-center py-8\">\r\n                <p className=\"text-gray-600 dark:text-gray-400\">{t('common.loading')}</p>\r\n              </div>\r\n            ) : auditLogs.length === 0 ? (\r\n              <div className=\"text-center py-8\">\r\n                <p className=\"text-gray-600 dark:text-gray-400\">\r\n                  {t('passwordManager.noAuditLogs')}\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3\">\r\n                {auditLogs.map(log => (\r\n                  <div\r\n                    key={log.id}\r\n                    className=\"p-4 border border-gray-200 dark:border-gray-700 rounded-md\"\r\n                  >\r\n                    <div className=\"flex items-start justify-between mb-2\">\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center gap-2 mb-1\">\r\n                          <span className=\"font-semibold dark:text-white\">\r\n                            {getActionLabel(log.action)}\r\n                          </span>\r\n                          {log.user && (\r\n                            <span className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                              von {log.user.firstName} {log.user.lastName}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2\">\r\n                          <ClockIcon className=\"h-4 w-4\" />\r\n                          {formatDate(log.createdAt)}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {log.details && Object.keys(log.details).length > 0 && (\r\n                      <div className=\"mt-2 p-2 bg-gray-50 dark:bg-gray-900 rounded text-sm\">\r\n                        <pre className=\"text-xs text-gray-700 dark:text-gray-300 whitespace-pre-wrap\">\r\n                          {JSON.stringify(log.details, null, 2)}\r\n                        </pre>\r\n                      </div>\r\n                    )}\r\n\r\n                    {(log.ipAddress || log.userAgent) && (\r\n                      <div className=\"mt-2 text-xs text-gray-500 dark:text-gray-400\">\r\n                        {log.ipAddress && <div>IP: {log.ipAddress}</div>}\r\n                        {log.userAgent && <div>User-Agent: {log.userAgent}</div>}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex items-center justify-end p-4 border-t dark:border-gray-700 flex-shrink-0\">\r\n            <button\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600\"\r\n            >\r\n              {t('common.close')}\r\n            </button>\r\n          </div>\r\n        </Dialog.Panel>\r\n      </div>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default PasswordEntryAuditLogsModal;\r\n\r\n","import React, { useState, useEffect, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { \n  PlusIcon, \n  PencilIcon, \n  TrashIcon, \n  ClipboardIcon, \n  LinkIcon,\n  EyeIcon,\n  EyeSlashIcon,\n  KeyIcon,\n  ShieldCheckIcon,\n  ClockIcon,\n  FunnelIcon\n} from '@heroicons/react/24/outline';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { passwordManagerApi, PasswordEntry } from '../services/passwordManagerApi.ts';\nimport { toast } from 'react-toastify';\nimport PasswordEntrySidepane from './PasswordEntrySidepane.tsx';\nimport PasswordEntryPermissionsModal from './PasswordEntryPermissionsModal.tsx';\nimport PasswordEntryAuditLogsModal from './PasswordEntryAuditLogsModal.tsx';\nimport FilterPane from './FilterPane.tsx';\nimport SavedFilterTags from './SavedFilterTags.tsx';\nimport { useFilterContext } from '../contexts/FilterContext.tsx';\nimport { FilterCondition } from './FilterRow.tsx';\nimport { applyFilters } from '../utils/filterLogic.ts';\n\n// TableID fr gespeicherte Filter\nconst PASSWORD_MANAGER_TABLE_ID = 'password-manager-table';\n\nconst PasswordManagerTab: React.FC = () => {\n  const { t } = useTranslation();\n  const { hasPermission } = usePermissions();\n  const { user } = useAuth();\n  const [entries, setEntries] = useState<PasswordEntry[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isCreateSidepaneOpen, setIsCreateSidepaneOpen] = useState(false);\n  const [editingEntry, setEditingEntry] = useState<PasswordEntry | null>(null);\n  const [viewingPassword, setViewingPassword] = useState<number | null>(null);\n  const [viewedPasswords, setViewedPasswords] = useState<Record<number, string>>({});\n  const [permissionsEntryId, setPermissionsEntryId] = useState<number | null>(null);\n  const [auditLogsEntryId, setAuditLogsEntryId] = useState<number | null>(null);\n  \n  // Filter State Management (Controlled Mode)\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  const [isFilterPaneOpen, setIsFilterPaneOpen] = useState(false);\n  const [activeFilterName, setActiveFilterName] = useState<string>('');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n  \n  // Spalten-Definitionen fr Filter\n  const availableColumns = useMemo(() => [\n    { id: 'title', label: t('passwordManager.entryTitle') },\n    { id: 'url', label: t('passwordManager.entryUrl') },\n    { id: 'username', label: t('passwordManager.entryUsername') },\n    { id: 'notes', label: t('passwordManager.entryNotes') },\n    { id: 'createdAt', label: t('passwordManager.sortByCreated') },\n    { id: 'updatedAt', label: t('passwordManager.sortByUpdated') },\n    { id: 'createdBy', label: t('common.createdBy') }\n  ], [t]);\n\n  // Prfe Berechtigungen\n  const canView = hasPermission('password_manager', 'read', 'page');\n  const canCreate = hasPermission('password_entry_create', 'write', 'button');\n  const canEdit = hasPermission('password_manager', 'write', 'page');\n  const canDelete = hasPermission('password_manager', 'write', 'page');\n\n  // Lade Eintrge\n  useEffect(() => {\n    if (canView) {\n      loadEntries();\n    }\n  }, [canView]);\n\n  const loadEntries = async () => {\n    try {\n      setIsLoading(true);\n      const data = await passwordManagerApi.getAll();\n      setEntries(data);\n    } catch (error: any) {\n      console.error('Error loading password entries:', error);\n      toast.error(t('passwordManager.error') || 'Fehler beim Laden der Eintrge');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // URL-Validierung\n  const isValidUrl = (urlString: string): boolean => {\n    if (!urlString) return false;\n    \n    try {\n      const url = new URL(urlString);\n      return url.protocol === 'http:' || url.protocol === 'https:';\n    } catch {\n      return false;\n    }\n  };\n\n  // Passwort kopieren\n  const handleCopyPassword = async (entry: PasswordEntry) => {\n    try {\n      // Prfe ob Passwort bereits geladen wurde\n      if (!viewedPasswords[entry.id]) {\n        const passwordData = await passwordManagerApi.getPassword(entry.id);\n        setViewedPasswords(prev => ({ ...prev, [entry.id]: passwordData.password }));\n      }\n      \n      const password = viewedPasswords[entry.id];\n      await navigator.clipboard.writeText(password);\n      \n      // Audit-Log fr copy_password erstellen\n      try {\n        await passwordManagerApi.logPasswordCopy(entry.id);\n      } catch (logError) {\n        // Nicht kritisch, nur loggen\n        console.warn('Error logging password copy:', logError);\n      }\n      \n      toast.success(t('passwordManager.passwordCopied'));\n    } catch (error: any) {\n      console.error('Error copying password:', error);\n      toast.error(t('passwordManager.errorCopyingPassword'));\n    }\n  };\n\n  // ffnen & Passwort kopieren\n  const handleOpenAndCopy = async (entry: PasswordEntry) => {\n    try {\n      // Passwort abrufen (entschlsselt) - erstellt automatisch Audit-Log\n      if (!viewedPasswords[entry.id]) {\n        const passwordData = await passwordManagerApi.getPassword(entry.id);\n        setViewedPasswords(prev => ({ ...prev, [entry.id]: passwordData.password }));\n      }\n      \n      const password = viewedPasswords[entry.id];\n      await navigator.clipboard.writeText(password);\n      \n      // Audit-Log fr copy_password erstellen\n      try {\n        await passwordManagerApi.logPasswordCopy(entry.id);\n      } catch (logError) {\n        // Nicht kritisch, nur loggen\n        console.warn('Error logging password copy:', logError);\n      }\n      \n      // URL in neuem Tab ffnen (nur wenn gltig)\n      if (entry.url && isValidUrl(entry.url)) {\n        window.open(entry.url, '_blank', 'noopener,noreferrer');\n        toast.success(t('passwordManager.passwordCopiedAndOpened'));\n      } else {\n        toast.success(t('passwordManager.passwordCopied'));\n      }\n    } catch (error: any) {\n      console.error('Error opening and copying password:', error);\n      toast.error(t('passwordManager.errorCopyingPassword'));\n    }\n  };\n\n  // Passwort anzeigen/ausblenden (Toggle)\n  const handleShowPassword = async (entry: PasswordEntry) => {\n    try {\n      // Wenn Passwort bereits angezeigt wird, ausblenden\n      if (viewingPassword === entry.id) {\n        setViewingPassword(null);\n        return;\n      }\n      \n      // Passwort laden falls noch nicht geladen\n      if (!viewedPasswords[entry.id]) {\n        const passwordData = await passwordManagerApi.getPassword(entry.id);\n        setViewedPasswords(prev => ({ ...prev, [entry.id]: passwordData.password }));\n      }\n      \n      // Passwort anzeigen\n      setViewingPassword(entry.id);\n    } catch (error: any) {\n      console.error('Error showing password:', error);\n      toast.error(t('passwordManager.error') || 'Fehler beim Anzeigen des Passworts');\n    }\n  };\n\n  // Eintrag lschen\n  const handleDelete = async (entry: PasswordEntry) => {\n    if (!window.confirm(t('passwordManager.deleteConfirm'))) {\n      return;\n    }\n\n    try {\n      await passwordManagerApi.delete(entry.id);\n      setEntries(prev => prev.filter(e => e.id !== entry.id));\n      toast.success(t('passwordManager.deleteEntry') || 'Eintrag erfolgreich gelscht');\n    } catch (error: any) {\n      console.error('Error deleting entry:', error);\n      toast.error(error.response?.data?.message || t('passwordManager.error') || 'Fehler beim Lschen');\n    }\n  };\n\n  // Eintrag bearbeiten\n  const handleEdit = (entry: PasswordEntry) => {\n    setEditingEntry(entry);\n    setIsCreateSidepaneOpen(true);\n  };\n\n  // Eintrag erstellt/aktualisiert\n  const handleEntrySaved = (entry: PasswordEntry) => {\n    if (editingEntry) {\n      // Update\n      setEntries(prev => prev.map(e => e.id === entry.id ? entry : e));\n      setEditingEntry(null);\n    } else {\n      // Create\n      setEntries(prev => [entry, ...prev]);\n    }\n    setIsCreateSidepaneOpen(false);\n    setEditingEntry(null);\n  };\n\n  // Sidepane schlieen\n  const handleSidepaneClose = () => {\n    setIsCreateSidepaneOpen(false);\n    setEditingEntry(null);\n  };\n\n  // Filter-Funktionen\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n  };\n\n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n\n  const handleFilterChange = async (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators);\n  };\n  \n  //  STANDARD: Filter-Laden und Default-Filter-Anwendung\n  const filterContext = useFilterContext();\n  const { loadFilters } = filterContext;\n  \n  useEffect(() => {\n    const initialize = async () => {\n      if (!canView) {\n        return;\n      }\n      \n      // 1. Filter laden (wartet auf State-Update)\n      const filters = await loadFilters(PASSWORD_MANAGER_TABLE_ID);\n      \n      // 2. Default-Filter anwenden (IMMER vorhanden!)\n      const defaultFilter = filters.find(f => f.name === 'Alle Eintrge');\n      if (defaultFilter) {\n        await handleFilterChange(\n          defaultFilter.name,\n          defaultFilter.id,\n          defaultFilter.conditions,\n          defaultFilter.operators\n        );\n        return; // Filter wird angewendet\n      }\n      \n      // 3. Fallback: Kein Filter (sollte nie passieren)\n      // loadEntries wird bereits durch useEffect aufgerufen\n    };\n    \n    initialize();\n  }, [canView, loadFilters, handleFilterChange]);\n\n  // Column Evaluators fr Filter\n  const columnEvaluators: any = {\n    'title': (item: PasswordEntry, cond: FilterCondition) => {\n      const value = item.title?.toLowerCase() || '';\n      return evaluateTextCondition(value, cond);\n    },\n    'url': (item: PasswordEntry, cond: FilterCondition) => {\n      const value = item.url?.toLowerCase() || '';\n      return evaluateTextCondition(value, cond);\n    },\n    'username': (item: PasswordEntry, cond: FilterCondition) => {\n      const value = item.username?.toLowerCase() || '';\n      return evaluateTextCondition(value, cond);\n    },\n    'notes': (item: PasswordEntry, cond: FilterCondition) => {\n      const value = item.notes?.toLowerCase() || '';\n      return evaluateTextCondition(value, cond);\n    },\n    'createdAt': (item: PasswordEntry, cond: FilterCondition) => {\n      return evaluateDateCondition(new Date(item.createdAt), cond);\n    },\n    'updatedAt': (item: PasswordEntry, cond: FilterCondition) => {\n      return evaluateDateCondition(new Date(item.updatedAt), cond);\n    },\n    'createdBy': (item: PasswordEntry, cond: FilterCondition) => {\n      //  OPTIMIERUNG: Template-String nur wenn vorhanden\n      const value = item.createdBy ? `${item.createdBy.firstName} ${item.createdBy.lastName}`.toLowerCase() : '';\n      return evaluateTextCondition(value, cond);\n    }\n  };\n\n  const evaluateTextCondition = (value: string, cond: FilterCondition): boolean => {\n    const condValue = (cond.value || '').toLowerCase();\n    switch (cond.operator) {\n      case 'equals': return value === condValue;\n      case 'contains': return value.includes(condValue);\n      case 'startsWith': return value.startsWith(condValue);\n      case 'endsWith': return value.endsWith(condValue);\n      case 'isNull': return !value;\n      case 'isNotNull': return !!value;\n      default: return false;\n    }\n  };\n\n  const evaluateDateCondition = (date: Date, cond: FilterCondition): boolean => {\n    const condDate = cond.value ? new Date(cond.value) : null;\n    if (!condDate || isNaN(condDate.getTime())) return false;\n    \n    const dateMidnight = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n    const condMidnight = new Date(condDate.getFullYear(), condDate.getMonth(), condDate.getDate());\n    \n    switch (cond.operator) {\n      case 'equals': return dateMidnight.getTime() === condMidnight.getTime();\n      case 'before': return dateMidnight.getTime() < condMidnight.getTime();\n      case 'after': return dateMidnight.getTime() > condMidnight.getTime();\n      default: return false;\n    }\n  };\n\n  const getFieldValue = (item: PasswordEntry, columnId: string): any => {\n    switch (columnId) {\n      case 'title': return item.title;\n      case 'url': return item.url;\n      case 'username': return item.username;\n      case 'notes': return item.notes;\n      case 'createdAt': return item.createdAt;\n      case 'updatedAt': return item.updatedAt;\n      case 'createdBy': return item.createdBy ? `${item.createdBy.firstName} ${item.createdBy.lastName}` : '';\n      default: return (item as any)[columnId];\n    }\n  };\n\n  // Gefilterte und sortierte Eintrge\n  const filteredAndSortedEntries = useMemo(() => {\n    let filtered = [...entries];\n\n    // Filter anwenden\n    if (filterConditions.length > 0) {\n      filtered = applyFilters(\n        filtered,\n        filterConditions,\n        filterLogicalOperators,\n        getFieldValue,\n        columnEvaluators\n      );\n    }\n\n    //  ENTFERNT: Filter-Sortierung - Filter-Sortierung wurde entfernt (Phase 1)\n      // Standard-Sortierung: nach createdAt desc\n      filtered.sort((a, b) => {\n        const aTime = new Date(a.createdAt).getTime();\n        const bTime = new Date(b.createdAt).getTime();\n        return bTime - aTime;\n      });\n\n    return filtered;\n  }, [entries, filterConditions, filterLogicalOperators]);\n\n  if (!canView) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n        <p className=\"text-gray-600 dark:text-gray-400\">\n          {t('passwordManager.error') || 'Keine Berechtigung fr den Passwort-Manager'}\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Header-Bereich: Create-Button links, Filter-Button rechts */}\n      <div className=\"flex items-center justify-between mb-4\">\n        {/* Linke Seite: Create-Button */}\n        <div className=\"flex items-center\">\n          {canCreate && (\n            <div className=\"relative group\">\n              <button\n                onClick={() => {\n                  setEditingEntry(null);\n                  setIsCreateSidepaneOpen(true);\n                }}\n                className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                style={{ width: '30.19px', height: '30.19px' }}\n                aria-label={t('passwordManager.createEntry')}\n              >\n                <PlusIcon className=\"h-4 w-4\" />\n              </button>\n              <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                {t('passwordManager.createEntry')}\n              </div>\n            </div>\n          )}\n        </div>\n        \n        {/* Rechte Seite: Filter-Button */}\n        <div className=\"flex items-center gap-2\">\n          <div className=\"relative\">\n            <button\n              className={`p-2 rounded-md border ${filterConditions.length > 0 ? 'border-blue-300 bg-blue-50 text-blue-600' : 'border-gray-300 hover:bg-gray-100'}`}\n              onClick={() => setIsFilterPaneOpen(!isFilterPaneOpen)}\n              title={t('common.filter')}\n            >\n              <FunnelIcon className=\"h-5 w-5\" />\n              {filterConditions.length > 0 && (\n                <span className=\"absolute top-0 right-0 w-4 h-4 bg-blue-600 text-white rounded-full text-xs flex items-center justify-center\">\n                  {filterConditions.length}\n                </span>\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Filter-Panel */}\n      {isFilterPaneOpen && (\n        <div className=\"px-3 sm:px-4 md:px-6\">\n          <FilterPane\n            columns={availableColumns}\n            onApply={applyFilterConditions}\n            onReset={resetFilterConditions}\n            savedConditions={filterConditions}\n            savedOperators={filterLogicalOperators}\n            tableId={PASSWORD_MANAGER_TABLE_ID}\n          />\n        </div>\n      )}\n\n      {/* Gespeicherte Filter als Tags */}\n      <div className=\"px-3 sm:px-4 md:px-6\">\n        <SavedFilterTags\n          tableId={PASSWORD_MANAGER_TABLE_ID}\n          onSelectFilter={(conditions, operators) => applyFilterConditions(conditions, operators)}\n          onReset={resetFilterConditions}\n          activeFilterName={activeFilterName}\n          selectedFilterId={selectedFilterId}\n          onFilterChange={handleFilterChange}\n          defaultFilterName=\"Alle Eintrge\" //  FIX: Hardcodiert (konsistent mit DB)\n        />\n      </div>\n\n      {/* Liste der Eintrge */}\n      {isLoading ? (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 text-center\">\n          <p className=\"text-gray-600 dark:text-gray-400\">{t('passwordManager.loading')}</p>\n        </div>\n      ) : filteredAndSortedEntries.length === 0 ? (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 text-center\">\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            {filterConditions.length > 0 ? t('passwordManager.noEntriesFiltered', 'Keine Eintrge gefunden') : t('passwordManager.noEntries')}\n          </p>\n        </div>\n      ) : (\n        <div className=\"space-y-3\">\n          {filteredAndSortedEntries.map(entry => (\n            <div\n              key={entry.id}\n              className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-4\"\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n                    {entry.title}\n                  </h3>\n                  \n                  {entry.url && (\n                    <div className=\"mb-2\">\n                      <a\n                        href={entry.url}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1\"\n                        onClick={(e) => {\n                          if (!isValidUrl(entry.url || '')) {\n                            e.preventDefault();\n                            toast.error(t('passwordManager.urlInvalid'));\n                          }\n                        }}\n                      >\n                        <LinkIcon className=\"h-4 w-4\" />\n                        {entry.url}\n                      </a>\n                    </div>\n                  )}\n\n                  {entry.username && (\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">\n                      <span className=\"font-medium\">{t('passwordManager.entryUsername')}:</span> {entry.username}\n                    </p>\n                  )}\n\n                  {viewingPassword === entry.id && viewedPasswords[entry.id] && (\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1 font-mono\">\n                      <span className=\"font-medium\">{t('passwordManager.entryPassword')}:</span> {viewedPasswords[entry.id]}\n                    </p>\n                  )}\n\n                  {entry.notes && (\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-2\">\n                      {entry.notes}\n                    </p>\n                  )}\n\n                  <div className=\"mt-3 flex items-center gap-2 flex-wrap\">\n                    {/* Passwort anzeigen */}\n                    <div className=\"relative group\">\n                      <button\n                        onClick={() => handleShowPassword(entry)}\n                        className=\"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                        title={viewingPassword === entry.id ? t('passwordManager.hidePassword') : t('passwordManager.showPassword')}\n                      >\n                        {viewingPassword === entry.id ? (\n                          <EyeSlashIcon className=\"h-5 w-5\" />\n                        ) : (\n                          <EyeIcon className=\"h-5 w-5\" />\n                        )}\n                      </button>\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                        {viewingPassword === entry.id ? t('passwordManager.hidePassword') : t('passwordManager.showPassword')}\n                      </div>\n                    </div>\n\n                    {/* Passwort kopieren */}\n                    <div className=\"relative group\">\n                      <button\n                        onClick={() => handleCopyPassword(entry)}\n                        className=\"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                        title={t('passwordManager.copyPassword')}\n                      >\n                        <ClipboardIcon className=\"h-5 w-5\" />\n                      </button>\n                      <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                        {t('passwordManager.copyPassword')}\n                      </div>\n                    </div>\n\n                    {/* ffnen & Passwort kopieren */}\n                    {entry.url && (\n                      <div className=\"relative group\">\n                        <button\n                          onClick={() => handleOpenAndCopy(entry)}\n                          className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md\"\n                          title={t('passwordManager.openAndCopy')}\n                        >\n                          <LinkIcon className=\"h-5 w-5\" />\n                        </button>\n                        <div className=\"absolute left-full ml-2 px-2 py-1 bg-gray-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none z-50\">\n                          {t('passwordManager.openAndCopy')}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* Action Buttons */}\n                <div className=\"flex items-center gap-2 ml-4 flex-wrap\">\n                  {user && entry.createdById === user.id && (\n                    <>\n                      <button\n                        onClick={() => setPermissionsEntryId(entry.id)}\n                        className=\"p-2 text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-md\"\n                        title={t('passwordManager.managePermissions')}\n                      >\n                        <ShieldCheckIcon className=\"h-5 w-5\" />\n                      </button>\n                      <button\n                        onClick={() => setAuditLogsEntryId(entry.id)}\n                        className=\"p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-900/20 rounded-md\"\n                        title={t('passwordManager.auditLogs')}\n                      >\n                        <ClockIcon className=\"h-5 w-5\" />\n                      </button>\n                    </>\n                  )}\n                  {canEdit && (\n                    <button\n                      onClick={() => handleEdit(entry)}\n                      className=\"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-md\"\n                      title={t('passwordManager.editEntry')}\n                    >\n                      <PencilIcon className=\"h-5 w-5\" />\n                    </button>\n                  )}\n                  {canDelete && (\n                    <button\n                      onClick={() => handleDelete(entry)}\n                      className=\"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md\"\n                      title={t('passwordManager.deleteEntry')}\n                    >\n                      <TrashIcon className=\"h-5 w-5\" />\n                    </button>\n                  )}\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Sidepane fr Create/Edit */}\n      <PasswordEntrySidepane\n        isOpen={isCreateSidepaneOpen}\n        onClose={handleSidepaneClose}\n        entry={editingEntry}\n        onEntrySaved={handleEntrySaved}\n      />\n\n      {/* Berechtigungen-Modal */}\n      {permissionsEntryId && (\n        <PasswordEntryPermissionsModal\n          isOpen={!!permissionsEntryId}\n          onClose={() => setPermissionsEntryId(null)}\n          entryId={permissionsEntryId}\n          onPermissionsUpdated={() => {\n            loadEntries();\n            setPermissionsEntryId(null);\n          }}\n        />\n      )}\n\n      {/* Audit-Logs-Modal */}\n      {auditLogsEntryId && (\n        <PasswordEntryAuditLogsModal\n          isOpen={!!auditLogsEntryId}\n          onClose={() => setAuditLogsEntryId(null)}\n          entryId={auditLogsEntryId}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default PasswordManagerTab;\n\n","import React, { useState, useEffect, useRef } from 'react';\nimport { CogIcon, UserIcon, BellIcon, BuildingOfficeIcon } from '@heroicons/react/24/outline';\nimport { useTranslation } from 'react-i18next';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { logger } from '../utils/logger.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useLanguage } from '../hooks/useLanguage.ts';\nimport useMessage from '../hooks/useMessage.ts';\nimport { MonthlyReportSettings } from '../types/monthlyConsultationReport.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport axiosInstance from '../config/axios.ts';\nimport { toast } from 'react-toastify';\nimport { useTheme } from '../contexts/ThemeContext.tsx';\nimport { Cog6ToothIcon, UserCircleIcon, ComputerDesktopIcon, DocumentArrowUpIcon, CheckIcon, ArrowPathIcon, AcademicCapIcon, KeyIcon } from '@heroicons/react/24/outline';\nimport NotificationSettingsComponent from '../components/NotificationSettings.tsx';\nimport MonthlyReportSettingsModal from '../components/MonthlyReportSettingsModal.tsx';\nimport DatabaseManagement from '../components/DatabaseManagement.tsx';\nimport PasswordManagerTab from '../components/PasswordManagerTab.tsx';\nimport { API_URL } from '../config/api.ts';\nimport { useOnboarding } from '../contexts/OnboardingContext.tsx';\nimport { useNavigate } from 'react-router-dom';\n\nconst Settings: React.FC = () => {\n    const { user, fetchCurrentUser } = useAuth();\n    const { isAdmin, canView } = usePermissions();\n    const { isDarkMode, toggleDarkMode } = useTheme();\n    const { showMessage } = useMessage();\n    const { t } = useTranslation();\n    const { activeLanguage, organizationLanguage, setUserLanguage, isLoading: languageLoading } = useLanguage();\n    const { resetTour, startTour } = useOnboarding();\n    const navigate = useNavigate();\n    const [selectedLanguage, setSelectedLanguage] = useState<string>('');\n    const [savingLanguage, setSavingLanguage] = useState<boolean>(false);\n    const [selectedFile, setSelectedFile] = useState<File | null>(null);\n    const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n    const [isUploading, setIsUploading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    \n    //  MEMORY: Ref fr Cleanup (optimiert Performance)\n    const prevPreviewUrlRef = useRef<string | null>(null);\n    \n    //  MEMORY: Revoke alte URL, wenn neue erstellt wird\n    useEffect(() => {\n        if (prevPreviewUrlRef.current && prevPreviewUrlRef.current !== previewUrl) {\n            URL.revokeObjectURL(prevPreviewUrlRef.current);\n        }\n        prevPreviewUrlRef.current = previewUrl;\n    }, [previewUrl]);\n    \n    //  MEMORY: Cleanup Blob-URL beim Unmount\n    useEffect(() => {\n        return () => {\n            if (prevPreviewUrlRef.current) {\n                URL.revokeObjectURL(prevPreviewUrlRef.current);\n            }\n        };\n    }, []); // Nur beim Unmount\n    const [isSaving, setIsSaving] = useState(false);\n    // Tab-Zustand fr Navigation zwischen den Einstellungen\n    const [activeTab, setActiveTab] = useState<'personal' | 'notifications' | 'system' | 'password_manager'>('personal');\n    \n    //  FIX: Default Tab setzen basierend auf verfgbaren Tabs\n    useEffect(() => {\n        // Personal und Notifications sind immer verfgbar\n        const availableTabs: ('personal' | 'notifications' | 'system' | 'password_manager')[] = ['personal', 'notifications'];\n        if (canView('system', 'tab')) {\n            availableTabs.push('system');\n        }\n        if (canView('password_manager', 'tab')) {\n            availableTabs.push('password_manager');\n        }\n        \n        // Wenn aktueller Tab nicht verfgbar ist, wechsle zum ersten verfgbaren\n        if (!availableTabs.includes(activeTab)) {\n            setActiveTab(availableTabs[0]);\n        }\n    }, [canView, activeTab]);\n    \n    // Monatsabrechnungs-Einstellungen\n    const [monthlyReportSettings, setMonthlyReportSettings] = useState<MonthlyReportSettings>({\n        monthlyReportEnabled: false,\n        monthlyReportDay: 25,\n        monthlyReportRecipient: ''\n    });\n    const [isLoadingSettings, setIsLoadingSettings] = useState(true);\n    const [isMonthlyReportModalOpen, setIsMonthlyReportModalOpen] = useState(false);\n\n    // Debug-Ausgaben\n    useEffect(() => {\n        logger.log('User:', user);\n        logger.log('Is Admin:', isAdmin());\n        logger.log('User Roles:', user?.roles);\n    }, [user, isAdmin]);\n\n    // Monatsabrechnungs-Einstellungen laden\n    useEffect(() => {\n        const loadMonthlyReportSettings = async () => {\n            if (!user?.invoiceSettings) {\n                setIsLoadingSettings(false);\n                return;\n            }\n\n            try {\n                setMonthlyReportSettings({\n                    monthlyReportEnabled: user.invoiceSettings.monthlyReportEnabled || false,\n                    monthlyReportDay: user.invoiceSettings.monthlyReportDay || 25,\n                    monthlyReportRecipient: user.invoiceSettings.monthlyReportRecipient || ''\n                });\n            } catch (error) {\n                console.error('Fehler beim Laden der Monatsabrechnungs-Einstellungen:', error);\n                showMessage(t('errors.loadSettingsError'), 'error');\n            } finally {\n                setIsLoadingSettings(false);\n            }\n        };\n\n        loadMonthlyReportSettings();\n    }, [user, showMessage]);\n\n    // Toggle fr Monthly Report - ffnet Modal bei Aktivierung\n    const handleMonthlyReportToggle = (enabled: boolean) => {\n        if (enabled) {\n            // Aktivierung: Modal ffnen\n            setIsMonthlyReportModalOpen(true);\n        } else {\n            // Deaktivierung: Direkt speichern\n            updateMonthlyReportSettings({\n                monthlyReportEnabled: false,\n                monthlyReportDay: monthlyReportSettings.monthlyReportDay,\n                monthlyReportRecipient: monthlyReportSettings.monthlyReportRecipient\n            });\n        }\n    };\n\n    // Alle Monthly Report Settings auf einmal speichern\n    const updateMonthlyReportSettings = async (settings: MonthlyReportSettings) => {\n        try {\n            // Alle Felder auf einmal senden\n            await axiosInstance.put(API_ENDPOINTS.USERS.INVOICE_SETTINGS, {\n                monthlyReportEnabled: settings.monthlyReportEnabled,\n                monthlyReportDay: settings.monthlyReportDay,\n                monthlyReportRecipient: settings.monthlyReportRecipient\n            });\n            \n            // Lokalen State aktualisieren\n            setMonthlyReportSettings(settings);\n            \n            // Erfolg-Toast (nur bei Deaktivierung, bei Aktivierung macht das Modal den Toast)\n            if (!settings.monthlyReportEnabled) {\n                toast.success(t('settings.monthlyReportDisabled'));\n            }\n            } catch (error) {\n                console.error('Fehler beim Speichern der Monatsabrechnungs-Einstellungen:', error);\n                toast.error(t('errors.saveMonthlyReportSettingsError'));\n            throw error; // Fr Modal error handling\n        }\n    };\n\n    const handleFileSelect = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const file = event.target.files?.[0];\n        if (file) {\n            if (file.type !== 'image/png' && file.type !== 'image/jpeg') {\n                setError(t('settings.fileUploadError'));\n                showMessage(t('settings.fileUploadError'), 'error');\n                return;\n            }\n            if (file.size > 5 * 1024 * 1024) { // 5MB\n                setError(t('settings.fileSizeError'));\n                showMessage(t('settings.fileSizeError'), 'error');\n                return;\n            }\n            setSelectedFile(file);\n            setPreviewUrl(URL.createObjectURL(file));\n            setError(null);\n            \n            // Automatisch nach Auswahl hochladen\n            uploadFile(file);\n        }\n    };\n    \n    // Separate uploadFile Funktion fr bessere bersichtlichkeit\n    const uploadFile = async (file: File) => {\n        setIsUploading(true);\n        setError(null);\n\n        const formData = new FormData();\n        formData.append('logo', file);\n\n        try {\n            logger.log('Starting upload...');\n            logger.log('Selected file:', file);\n            const token = localStorage.getItem('token');\n            logger.log('Token verfgbar:', !!token);\n\n            // Headers fr die Authentifizierung, aber kein Content-Type\n            const headers: HeadersInit = {};\n            if (token) {\n                headers['Authorization'] = `Bearer ${token}`;\n            }\n\n            const response = await fetch(`${API_URL}/settings/logo`, {\n                method: 'POST',\n                body: formData,\n                headers\n                // 'credentials: include' entfernt, um CORS-Probleme zu vermeiden\n            });\n\n            logger.log('Response Status:', response.status);\n            const responseText = await response.text();\n            logger.log('Response Text:', responseText);\n\n            if (!response.ok) {\n                throw new Error(responseText || t('errors.uploadFailed'));\n            }\n\n            try {\n                const responseData = JSON.parse(responseText);\n                logger.log('Response Data:', responseData);\n                showMessage(t('settings.logoUploadSuccess'), 'success');\n                \n                // User-Daten neu laden, damit das Logo im Header aktualisiert wird\n                try {\n                    await fetchCurrentUser();\n                    logger.log('User-Daten nach Logo-Upload neu geladen');\n                } catch (error) {\n                    console.error('Fehler beim Neuladen der User-Daten:', error);\n                }\n                \n                // Favicon nach Upload aktualisieren\n                const faviconLink = document.getElementById('favicon') as HTMLLinkElement;\n                if (faviconLink) {\n                    // Fge einen Zeitstempel hinzu, um das Caching zu verhindern\n                    const timestamp = new Date().getTime();\n                    try {\n                        const base64Response = await fetch(`${API_URL}/settings/logo/base64`);\n                        if (base64Response.ok) {\n                            const data = await base64Response.json();\n                            faviconLink.href = data.logo;\n                        }\n                    } catch (error) {\n                        console.error('Favicon konnte nicht aktualisiert werden:', error);\n                    }\n                }\n            } catch (parseError) {\n                console.error('Fehler beim Parsen der Antwort:', parseError);\n                throw new Error(t('errors.invalidResponseFormat'));\n            }\n            \n            // Preview zurcksetzen\n            setSelectedFile(null);\n            setPreviewUrl(null);\n        } catch (err) {\n            console.error('Upload error:', err);\n                const errorMessage = t('settings.logoUploadError') + ': ' + (err instanceof Error ? err.message : t('errors.unknownError'));\n                setError(errorMessage);\n                showMessage(errorMessage, 'error');\n        } finally {\n            setIsUploading(false);\n        }\n    };\n\n    // Tab-Wechsel Handler - Fehler beim Wechsel zurcksetzen\n    const handleTabChange = (tab: 'personal' | 'notifications' | 'system' | 'password_manager') => {\n        setActiveTab(tab);\n        setError(null);\n    };\n\n    // Wenn kein Benutzer oder Berechtigungen geladen werden\n    if (!user) {\n        return <div>{t('common.loading')}</div>;\n    }\n\n    return (\n        <div className=\"min-h-screen dark:bg-gray-900\">\n            <div className=\"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6\">\n                <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n                {/* Header mit Icon */}\n                <div className=\"flex items-center mb-6\">\n                    <Cog6ToothIcon className=\"h-6 w-6 mr-2\" />\n                    <h2 className=\"text-xl font-semibold\">{t('settings.title')}</h2>\n                </div>\n                \n                {/* Tabs fr Navigation */}\n                <div className=\"border-b border-gray-200 dark:border-gray-700 mb-6\">\n                    <nav className=\"-mb-px flex space-x-8\">\n                        {/* Personal und Notifications sind immer verfgbar */}\n                        <button\n                            className={`${\n                                activeTab === 'personal'\n                                ? 'border-blue-500 text-blue-600'\n                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                            } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`}\n                            onClick={() => handleTabChange('personal')}\n                        >\n                            <UserCircleIcon className=\"h-4 w-4 mr-2\" />\n                            {t('settings.personal')}\n                        </button>\n                        <button\n                            className={`${\n                                activeTab === 'notifications'\n                                ? 'border-blue-500 text-blue-600'\n                                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                            } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`}\n                            onClick={() => handleTabChange('notifications')}\n                        >\n                            <BellIcon className=\"h-4 w-4 mr-2\" />\n                            {t('settings.notifications')}\n                        </button>\n                        {/*  FIX: System Tab nur anzeigen wenn Berechtigung vorhanden */}\n                        {canView('system', 'tab') && (\n                            <button\n                                className={`${\n                                    activeTab === 'system'\n                                        ? 'border-blue-500 text-blue-600'\n                                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                                } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`}\n                                onClick={() => handleTabChange('system')}\n                            >\n                                <ComputerDesktopIcon className=\"h-4 w-4 mr-2\" />\n                                {t('settings.system')}\n                            </button>\n                        )}\n                        {/*  FIX: Password Manager Tab nur anzeigen wenn Berechtigung vorhanden */}\n                        {canView('password_manager', 'tab') && (\n                            <button\n                                className={`${\n                                    activeTab === 'password_manager'\n                                        ? 'border-blue-500 text-blue-600'\n                                        : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                                } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center`}\n                                onClick={() => handleTabChange('password_manager')}\n                            >\n                                <KeyIcon className=\"h-4 w-4 mr-2\" />\n                                {t('settings.passwordManager')}\n                            </button>\n                        )}\n                    </nav>\n                </div>\n\n                {/* Tab-Inhalte */}\n                {activeTab === 'personal' && (\n                    <div className=\"space-y-6\" data-onboarding=\"settings-overview\">\n                        {/* Sprache */}\n                        <div className=\"flex items-center justify-between border-b pb-6\">\n                            <div className=\"flex-1\">\n                                <h3 className=\"text-lg font-medium dark:text-white\">{t('settings.language')}</h3>\n                                <p className=\"text-gray-600 dark:text-gray-400 text-sm mt-1\">\n                                    {t('settings.userLanguage')}\n                                    {organizationLanguage && (\n                                        <span className=\"block mt-1 text-xs\">\n                                            {t('settings.organizationLanguage')}: {organizationLanguage === 'de' ? t('worktime.language.german') : organizationLanguage === 'es' ? t('worktime.language.spanish') : t('worktime.language.english')}\n                                        </span>\n                                    )}\n                                </p>\n                            </div>\n                            <select\n                                value={selectedLanguage || activeLanguage || (user?.language || '') || ''}\n                                onChange={async (e) => {\n                                    const newLanguage = e.target.value;\n                                    setSelectedLanguage(newLanguage);\n                                    if (newLanguage && newLanguage !== activeLanguage) {\n                                        setSavingLanguage(true);\n                                        try {\n                                            await setUserLanguage(newLanguage);\n                                            showMessage(t('common.save'), 'success');\n                                        } catch (error) {\n                                            console.error('Fehler beim Speichern der Sprache:', error);\n                                            showMessage(t('errors.saveLanguageError'), 'error');\n                                        } finally {\n                                            setSavingLanguage(false);\n                                        }\n                                    }\n                                }}\n                                disabled={savingLanguage || languageLoading}\n                                className=\"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white ml-4\"\n                            >\n                                <option value=\"\">{t('settings.useOrganizationLanguage')}</option>\n                                <option value=\"de\">{t('worktime.language.german')}</option>\n                                <option value=\"es\">{t('worktime.language.spanish')}</option>\n                                <option value=\"en\">{t('worktime.language.english')}</option>\n                            </select>\n                        </div>\n\n                        {/* Dark Mode */}\n                        <div className=\"flex items-center justify-between\">\n                            <div>\n                                <h3 className=\"text-lg font-medium dark:text-white\">{t('settings.darkMode')}</h3>\n                                <p className=\"text-gray-600 dark:text-gray-400\">{t('settings.darkModeDescription')}</p>\n                            </div>\n                            <label className=\"relative inline-flex items-center cursor-pointer\">\n                                <input\n                                    type=\"checkbox\"\n                                    className=\"sr-only peer\"\n                                    checked={isDarkMode}\n                                    onChange={toggleDarkMode}\n                                />\n                                <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                            </label>\n                        </div>\n\n                        {/* Monatsabrechnungs-Einstellungen */}\n                        <div className=\"border-t pt-6\">\n                            {isLoadingSettings ? (\n                                <div className=\"text-gray-500 dark:text-gray-400\">{t('settings.loadingSettings')}</div>\n                            ) : (\n                                <div className=\"space-y-4\">\n                                    {/* Toggle fr Monthly Report (wie Dark Mode) */}\n                                    <div className=\"flex items-center justify-between\">\n                                        <div>\n                                            <h3 className=\"text-lg font-medium dark:text-white\">{t('settings.monthlyReport')}</h3>\n                                            <p className=\"text-gray-600 dark:text-gray-400\">\n                                                {t('settings.monthlyReportDescription')}\n                                                {monthlyReportSettings.monthlyReportEnabled && monthlyReportSettings.monthlyReportRecipient && (\n                                                    <span className=\"block text-sm text-green-600 dark:text-green-400 mt-1\">\n                                                         {t('settings.monthlyReportEnabled')} {monthlyReportSettings.monthlyReportRecipient.split('\\n')[0]}\n                                                    </span>\n                                                )}\n                                            </p>\n                                        </div>\n                                        <label className=\"relative inline-flex items-center cursor-pointer\">\n                                            <input\n                                                type=\"checkbox\"\n                                                className=\"sr-only peer\"\n                                                checked={monthlyReportSettings.monthlyReportEnabled}\n                                                onChange={(e) => handleMonthlyReportToggle(e.target.checked)}\n                                            />\n                                            <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600\"></div>\n                                        </label>\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n\n                        {/* Onboarding-Tour */}\n                        <div className=\"border-t pt-6\">\n                            <div className=\"flex items-center justify-between\">\n                                <div className=\"flex-1\">\n                                    <div className=\"flex items-center gap-2 mb-2\">\n                                        <AcademicCapIcon className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n                                        <h3 className=\"text-lg font-medium dark:text-white\">{t('settings.onboarding.restart')}</h3>\n                                    </div>\n                                    <p className=\"text-gray-600 dark:text-gray-400 text-sm\">\n                                        {t('settings.onboarding.restartDescription')}\n                                    </p>\n                                </div>\n                                <button\n                                    onClick={async () => {\n                                        try {\n                                            await resetTour();\n                                            showMessage(t('settings.onboarding.restart'), 'success');\n                                            // Navigiere zum Dashboard, damit die Tour startet\n                                            navigate('/dashboard');\n                                            // Starte Tour nach kurzer Verzgerung\n                                            setTimeout(() => {\n                                                startTour();\n                                            }, 500);\n                                        } catch (error) {\n                                            console.error('Fehler beim Zurcksetzen der Tour:', error);\n                                            showMessage(t('errors.unknownError'), 'error');\n                                        }\n                                    }}\n                                    className=\"p-2 text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                                    title={t('onboarding.navigation.restart')}\n                                >\n                                    <AcademicCapIcon className=\"h-5 w-5\" />\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                )}\n\n                {activeTab === 'notifications' && (\n                    <div className=\"space-y-4\">\n                        <div className=\"p-0 -mt-4\">\n                            <NotificationSettingsComponent />\n                        </div>\n                    </div>\n                )}\n\n                {activeTab === 'system' && (\n                    <div className=\"space-y-8\">\n                        <div className=\"flex items-center justify-between\">\n                            <div>\n                                <h3 className=\"text-lg font-medium mb-2 dark:text-white\">{t('settings.logoUpload')}</h3>\n                                <p className=\"text-gray-600 dark:text-gray-400\">{t('settings.logoUploadDescription')}</p>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                                <input\n                                    ref={fileInputRef}\n                                    type=\"file\"\n                                    accept=\"image/png,image/jpeg\"\n                                    onChange={handleFileSelect}\n                                    className=\"hidden\"\n                                    disabled={isUploading}\n                                />\n                                <button\n                                    type=\"button\"\n                                    onClick={() => fileInputRef.current?.click()}\n                                    disabled={isUploading}\n                                    className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                                    title={isUploading ? t('settings.logoUploading') : t('settings.logoUploadButton')}\n                                >\n                                    {isUploading ? (\n                                        <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                                    ) : (\n                                        <DocumentArrowUpIcon className=\"h-5 w-5\" />\n                                    )}\n                                </button>\n                            </div>\n                        </div>\n\n                        {error && (\n                            <div className=\"text-red-600 dark:text-red-400 text-sm mt-2\">\n                                {error}\n                            </div>\n                        )}\n\n                        {previewUrl && (\n                            <div className=\"mt-4\">\n                                <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">{t('settings.logoPreview')}</p>\n                                <img\n                                    src={previewUrl}\n                                    alt=\"Logo Vorschau\"\n                                    className=\"max-w-xs h-auto rounded-lg shadow-sm\"\n                                />\n                            </div>\n                        )}\n\n                        <div className=\"border-t pt-6\">\n                            <h3 className=\"text-lg font-medium mb-4 dark:text-white\">{t('settings.uploadDirectories')}</h3>\n                            \n                            <div className=\"space-y-4\">\n                                <div>\n                                    <label htmlFor=\"taskAttachmentsPath\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('settings.taskAttachmentsPath')}\n                                    </label>\n                                    <input\n                                        type=\"text\"\n                                        id=\"taskAttachmentsPath\"\n                                        className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white\"\n                                        defaultValue=\"uploads/task-attachments\"\n                                        placeholder={t('settings.taskAttachmentsPathPlaceholder')}\n                                    />\n                                    <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n                                        {t('settings.taskAttachmentsPathDescription')}\n                                    </p>\n                                </div>\n\n                                <div>\n                                    <label htmlFor=\"requestAttachmentsPath\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                                        {t('settings.requestAttachmentsPath')}\n                                    </label>\n                                    <input\n                                        type=\"text\"\n                                        id=\"requestAttachmentsPath\"\n                                        className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white\"\n                                        defaultValue=\"uploads/request-attachments\"\n                                        placeholder={t('settings.requestAttachmentsPathPlaceholder')}\n                                    />\n                                    <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\n                                        {t('settings.requestAttachmentsPathDescription')}\n                                    </p>\n                                </div>\n\n                                <div className=\"mt-4\">\n                                    <button\n                                        type=\"button\"\n                                        onClick={async () => {\n                                            setIsSaving(true);\n                                            try {\n                                                const taskPath = (document.getElementById('taskAttachmentsPath') as HTMLInputElement)?.value;\n                                                const requestPath = (document.getElementById('requestAttachmentsPath') as HTMLInputElement)?.value;\n                                                \n                                                // TODO: API-Call zum Speichern der Pfade implementieren\n                                                await new Promise(resolve => setTimeout(resolve, 500)); // Placeholder\n                                                \n                                                toast.success(t('settings.saveDirectoriesSuccess'));\n                                            } catch (error) {\n                                                console.error('Fehler beim Speichern der Upload-Verzeichnisse:', error);\n                                                toast.error(t('errors.saveUploadDirectoriesError'));\n                                            } finally {\n                                                setIsSaving(false);\n                                            }\n                                        }}\n                                        disabled={isSaving}\n                                        className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n                                        title={isSaving ? t('settings.savingDirectories') : t('settings.saveDirectories')}\n                                    >\n                                        {isSaving ? (\n                                            <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                                        ) : (\n                                            <CheckIcon className=\"h-5 w-5\" />\n                                        )}\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Database Management Section */}\n                        <div className=\"border-t pt-6\">\n                            <h3 className=\"text-lg font-medium mb-4 dark:text-white\">{t('settings.databaseManagement')}</h3>\n                            <p className=\"text-gray-600 dark:text-gray-400 mb-6\">\n                                {t('settings.databaseManagementDescription')}\n                            </p>\n                            <DatabaseManagement />\n                        </div>\n\n                        {/* LobbyPMS Full Sync Section */}\n                        <div className=\"border-t pt-6\">\n                            <div className=\"flex items-center justify-between\">\n                                <div className=\"flex-1\">\n                                    <h3 className=\"text-lg font-medium mb-2 dark:text-white\">LobbyPMS: Vollstndiger Sync</h3>\n                                    <p className=\"text-gray-600 dark:text-gray-400 text-sm\">\n                                        Synchronisiert alle Reservierungen mit Check-out ab gestern. \n                                        Wird fr den ersten Sync oder manuelle Synchronisation verwendet.\n                                    </p>\n                                </div>\n                                <button\n                                    onClick={async () => {\n                                        try {\n                                            setIsSaving(true);\n                                            const response = await axiosInstance.post(API_ENDPOINTS.RESERVATIONS.SYNC_FULL);\n                                            if (response.data.success) {\n                                                toast.success(`Sync erfolgreich: ${response.data.syncedCount} Reservierungen synchronisiert`);\n                                            } else {\n                                                toast.error('Sync fehlgeschlagen');\n                                            }\n                                        } catch (error) {\n                                            console.error('Fehler beim vollstndigen Sync:', error);\n                                            toast.error(error instanceof Error ? error.message : 'Fehler beim vollstndigen Sync');\n                                        } finally {\n                                            setIsSaving(false);\n                                        }\n                                    }}\n                                    disabled={isSaving}\n                                    className=\"p-2 text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed\"\n                                    title={isSaving ? 'Sync luft...' : 'Vollstndigen Sync starten'}\n                                >\n                                    <ArrowPathIcon className={`h-5 w-5 ${isSaving ? 'animate-spin' : ''}`} />\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                )}\n\n                {activeTab === 'password_manager' && (\n                    <div className=\"space-y-4\">\n                        <PasswordManagerTab />\n                    </div>\n                )}\n            </div>\n\n            {/* Monthly Report Settings Modal */}\n            <MonthlyReportSettingsModal\n                isOpen={isMonthlyReportModalOpen}\n                onClose={() => setIsMonthlyReportModalOpen(false)}\n                onSave={updateMonthlyReportSettings}\n                currentSettings={monthlyReportSettings}\n            />\n            </div>\n        </div>\n    );\n};\n\nexport default Settings; ","/**\r\n * Zentrale Filter-Logik zur Eliminierung von Code-Duplikation\r\n * \r\n * Diese Datei konsolidiert die Filter-Logik, die zuvor in mehreren Komponenten\r\n * dupliziert war (Requests.tsx, Worktracker.tsx, InvoiceManagementTab.tsx, etc.)\r\n * \r\n * WICHTIG: Die Logik ist exakt identisch mit der vorherigen Implementierung.\r\n * Nur die Code-Duplikation wurde entfernt, keine Funktionalittsnderung!\r\n */\r\n\r\nimport { startOfWeek, endOfWeek, startOfMonth, endOfMonth, startOfYear, endOfYear } from 'date-fns';\r\n\r\nexport interface FilterCondition {\r\n  column: string;\r\n  operator: string;\r\n  value: string | number | Date | null;\r\n}\r\n\r\n/**\r\n * Evaluates a single filter condition against a field value\r\n * @param fieldValue - The value to test against\r\n * @param condition - The filter condition to apply\r\n * @returns true if condition is met, false otherwise\r\n */\r\nexport const evaluateCondition = (\r\n  fieldValue: any,\r\n  condition: FilterCondition\r\n): boolean => {\r\n  const { operator, value } = condition;\r\n  \r\n  // Sicherstellen, dass value definiert ist\r\n  if (value === undefined) {\r\n    console.error('evaluateCondition: value ist undefined', condition);\r\n    return false;\r\n  }\r\n  \r\n  // Handle null/undefined values\r\n  if (fieldValue == null && value == null) {\r\n    return operator === 'equals';\r\n  }\r\n  if (fieldValue == null || value == null) {\r\n    if (operator === 'notEquals') return true;\r\n    return false;\r\n  }\r\n\r\n  // String operations\r\n  // Sicherstellen, dass fieldValue und value Strings sind, bevor toLowerCase() aufgerufen wird\r\n  let strField: string = '';\r\n  let strValue: string = '';\r\n  \r\n  try {\r\n    // Konvertiere fieldValue zu String, auch wenn es ein Objekt ist\r\n    const fieldValueStr = fieldValue == null ? '' : (typeof fieldValue === 'string' ? fieldValue : String(fieldValue));\r\n    if (typeof fieldValueStr !== 'string') {\r\n      return false;\r\n    }\r\n    const lowerField = fieldValueStr.toLowerCase();\r\n    if (lowerField === undefined || lowerField === null || typeof lowerField !== 'string') {\r\n      return false;\r\n    }\r\n    strField = lowerField;\r\n    \r\n    // Konvertiere value zu String, auch wenn es ein Objekt ist\r\n    const valueStr = value == null ? '' : (typeof value === 'string' ? value : String(value));\r\n    if (typeof valueStr !== 'string') {\r\n      return false;\r\n    }\r\n    const lowerValue = valueStr.toLowerCase();\r\n    if (lowerValue === undefined || lowerValue === null || typeof lowerValue !== 'string') {\r\n      return false;\r\n    }\r\n    strValue = lowerValue;\r\n  } catch (error) {\r\n    // Falls toLowerCase() fehlschlgt, gebe false zurck\r\n    return false;\r\n  }\r\n\r\n  // Sicherstellen, dass strField und strValue Strings sind und nicht undefined\r\n  if (typeof strField !== 'string' || typeof strValue !== 'string' || strField === undefined || strValue === undefined || strField === null || strValue === null) {\r\n    return false;\r\n  }\r\n\r\n  switch (operator) {\r\n    case 'equals':\r\n      return strField === strValue;\r\n    case 'notEquals':\r\n      return strField !== strValue;\r\n    case 'contains':\r\n      return strField.includes(strValue);\r\n    case 'startsWith':\r\n      return strField.startsWith(strValue);\r\n    case 'endsWith':\r\n      // Explizite Prfung, dass strField und strValue Strings sind, bevor endsWith aufgerufen wird\r\n      if (strField === undefined || strField === null) {\r\n        console.error('endsWith: strField ist undefined/null', { strField, strValue, fieldValue, value, condition });\r\n        return false;\r\n      }\r\n      if (strValue === undefined || strValue === null) {\r\n        console.error('endsWith: strValue ist undefined/null', { strField, strValue, fieldValue, value, condition });\r\n        return false;\r\n      }\r\n      if (typeof strField !== 'string') {\r\n        console.error('endsWith: strField ist kein String', { strField, typeof: typeof strField, strValue, fieldValue, value, condition });\r\n        return false;\r\n      }\r\n      if (typeof strValue !== 'string') {\r\n        console.error('endsWith: strValue ist kein String', { strField, strValue, typeof: typeof strValue, fieldValue, value, condition });\r\n        return false;\r\n      }\r\n      try {\r\n        return strField.endsWith(strValue);\r\n      } catch (error) {\r\n        console.error('endsWith: Fehler bei endsWith-Aufruf', error, { strField, strValue, fieldValue, value, condition });\r\n        return false;\r\n      }\r\n    case 'before':\r\n    case 'after': {\r\n      // Date operations\r\n      const fieldDate = new Date(fieldValue);\r\n      const valueDate = new Date(value as string);\r\n      if (isNaN(fieldDate.getTime()) || isNaN(valueDate.getTime())) {\r\n        return false;\r\n      }\r\n      return operator === 'before' \r\n        ? fieldDate < valueDate \r\n        : fieldDate > valueDate;\r\n    }\r\n    case 'greaterThan':\r\n    case 'lessThan': {\r\n      // Numeric operations\r\n      const fieldNum = parseFloat(String(fieldValue));\r\n      const valueNum = parseFloat(String(value));\r\n      if (isNaN(fieldNum) || isNaN(valueNum)) {\r\n        return false;\r\n      }\r\n      return operator === 'greaterThan'\r\n        ? fieldNum > valueNum\r\n        : fieldNum < valueNum;\r\n    }\r\n    default:\r\n      return true;\r\n  }\r\n};\r\n\r\n/**\r\n * Type for getting field values from items\r\n */\r\nexport type GetFieldValue<T> = (item: T, columnId: string) => any;\r\n\r\n/**\r\n * Type for column-specific evaluation handlers\r\n * Returns true if condition is met, false otherwise\r\n */\r\nexport type ColumnEvaluator<T> = (item: T, condition: FilterCondition) => boolean | null;\r\n\r\n/**\r\n * Applies filter conditions to an array of items\r\n * \r\n * @param items - Array of items to filter\r\n * @param conditions - Array of filter conditions\r\n * @param operators - Array of logical operators ('AND' | 'OR') between conditions\r\n * @param getFieldValue - Function to extract field values from items\r\n * @param columnEvaluators - Optional map of column-specific evaluators for custom logic\r\n * @returns Filtered array of items\r\n * \r\n * @example\r\n * // Standard usage with getFieldValue\r\n * const filtered = applyFilters(items, conditions, operators, (item, col) => item[col]);\r\n * \r\n * // With custom column evaluators\r\n * const filtered = applyFilters(\r\n *   items,\r\n *   conditions,\r\n *   operators,\r\n *   (item, col) => item[col],\r\n *   {\r\n *     'responsible': (item, condition) => {\r\n *       // Custom logic for responsible column\r\n *       return evaluateUserRoleCondition(item.responsible?.id, item.role?.id, condition);\r\n *     }\r\n *   }\r\n * );\r\n */\r\nexport const applyFilters = <T>(\r\n  items: T[],\r\n  conditions: FilterCondition[],\r\n  operators: ('AND' | 'OR')[],\r\n  getFieldValue: GetFieldValue<T>,\r\n  columnEvaluators?: Record<string, ColumnEvaluator<T>>\r\n): T[] => {\r\n  if (conditions.length === 0) {\r\n    return items;\r\n  }\r\n\r\n  return items.filter(item => {\r\n    let result = true;\r\n\r\n    for (let i = 0; i < conditions.length; i++) {\r\n      const condition = conditions[i];\r\n      let conditionMet = false;\r\n\r\n      // Check if there's a custom evaluator for this column\r\n      if (columnEvaluators && columnEvaluators[condition.column]) {\r\n        const customResult = columnEvaluators[condition.column](item, condition);\r\n        if (customResult !== null) {\r\n          conditionMet = customResult;\r\n        } else {\r\n          // Fallback to standard evaluation if custom evaluator returns null\r\n          const fieldValue = getFieldValue(item, condition.column);\r\n          conditionMet = evaluateCondition(fieldValue, condition);\r\n        }\r\n      } else {\r\n        // Standard evaluation\r\n        const fieldValue = getFieldValue(item, condition.column);\r\n        conditionMet = evaluateCondition(fieldValue, condition);\r\n      }\r\n\r\n      // Apply logical operators\r\n      if (i === 0) {\r\n        result = conditionMet;\r\n      } else {\r\n        const operator = operators[i - 1] || 'AND';\r\n        result = operator === 'AND' \r\n          ? (result && conditionMet) \r\n          : (result || conditionMet);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  });\r\n};\r\n\r\n/**\r\n * Helper function to evaluate date conditions with proper date comparison\r\n * Supports __TODAY__ as a dynamic date value\r\n * \r\n * WICHTIG: Extrahiert nur den Datumsteil (Jahr, Monat, Tag) ohne Zeitzone,\r\n * um Zeitzone-Konvertierungsprobleme zu vermeiden (verhindert Tag-Versatz)\r\n */\r\nexport const evaluateDateCondition = (\r\n  dateValue: Date | string | null | undefined,\r\n  condition: FilterCondition\r\n): boolean => {\r\n  if (!dateValue) {\r\n    return false;\r\n  }\r\n\r\n  const date = new Date(dateValue);\r\n  if (isNaN(date.getTime())) {\r\n    return false;\r\n  }\r\n\r\n  // Extrahiere nur den Datumsteil (Jahr, Monat, Tag) mit UTC-Methoden\r\n  // Dies verhindert Zeitzone-Konvertierung, die zu einem Tag-Versatz fhrt\r\n  const dateYear = date.getUTCFullYear();\r\n  const dateMonth = date.getUTCMonth();\r\n  const dateDay = date.getUTCDate();\r\n  // Erstelle lokales Date-Objekt aus den UTC-Werten (ohne Zeitzone)\r\n  const normalizedDate = new Date(dateYear, dateMonth, dateDay);\r\n\r\n  //  PHASE 5: Handle Zeitraum-Platzhalter (__THIS_WEEK__, __THIS_MONTH__, __THIS_YEAR__)\r\n  // Diese funktionieren analog zu __TODAY__, aber fr Zeitrume\r\n  try {\r\n    if (condition.value === '__THIS_WEEK__') {\r\n      if (condition.operator === 'equals') {\r\n        const weekStart = startOfWeek(new Date(), { weekStartsOn: 1 });\r\n        weekStart.setHours(0, 0, 0, 0);\r\n        const weekEnd = endOfWeek(new Date(), { weekStartsOn: 1 });\r\n        weekEnd.setHours(23, 59, 59, 999);\r\n        // Prfe, ob normalizedDate innerhalb des Zeitraums liegt\r\n        return normalizedDate >= weekStart && normalizedDate <= weekEnd;\r\n      }\r\n      // Fr andere Operatoren (before, after) verwende Woche als einzelnes Datum\r\n      const weekStart = startOfWeek(new Date(), { weekStartsOn: 1 });\r\n      weekStart.setHours(0, 0, 0, 0);\r\n      const weekEnd = endOfWeek(new Date(), { weekStartsOn: 1 });\r\n      weekEnd.setHours(23, 59, 59, 999);\r\n      if (condition.operator === 'before') {\r\n        return normalizedDate < weekEnd;\r\n      } else if (condition.operator === 'after') {\r\n        return normalizedDate > weekStart;\r\n      }\r\n      return false;\r\n    } else if (condition.value === '__THIS_MONTH__') {\r\n      if (condition.operator === 'equals') {\r\n        const monthStart = startOfMonth(new Date());\r\n        monthStart.setHours(0, 0, 0, 0);\r\n        const monthEnd = endOfMonth(new Date());\r\n        monthEnd.setHours(23, 59, 59, 999);\r\n        // Prfe, ob normalizedDate innerhalb des Zeitraums liegt\r\n        return normalizedDate >= monthStart && normalizedDate <= monthEnd;\r\n      }\r\n      // Fr andere Operatoren (before, after) verwende Monat als einzelnes Datum\r\n      const monthStart = startOfMonth(new Date());\r\n      monthStart.setHours(0, 0, 0, 0);\r\n      const monthEnd = endOfMonth(new Date());\r\n      monthEnd.setHours(23, 59, 59, 999);\r\n      if (condition.operator === 'before') {\r\n        return normalizedDate < monthEnd;\r\n      } else if (condition.operator === 'after') {\r\n        return normalizedDate > monthStart;\r\n      }\r\n      return false;\r\n    } else if (condition.value === '__THIS_YEAR__') {\r\n      if (condition.operator === 'equals') {\r\n        const yearStart = startOfYear(new Date());\r\n        yearStart.setHours(0, 0, 0, 0);\r\n        const yearEnd = endOfYear(new Date());\r\n        yearEnd.setHours(23, 59, 59, 999);\r\n        // Prfe, ob normalizedDate innerhalb des Zeitraums liegt\r\n        return normalizedDate >= yearStart && normalizedDate <= yearEnd;\r\n      }\r\n      // Fr andere Operatoren (before, after) verwende Jahr als einzelnes Datum\r\n      const yearStart = startOfYear(new Date());\r\n      yearStart.setHours(0, 0, 0, 0);\r\n      const yearEnd = endOfYear(new Date());\r\n      yearEnd.setHours(23, 59, 59, 999);\r\n      if (condition.operator === 'before') {\r\n        return normalizedDate < yearEnd;\r\n      } else if (condition.operator === 'after') {\r\n        return normalizedDate > yearStart;\r\n      }\r\n      return false;\r\n    }\r\n\r\n    // Handle __TODAY__, __WEEK_START__, __WEEK_END__, __MONTH_START__, __MONTH_END__, __YEAR_START__, __YEAR_END__ dynamic dates\r\n    let conditionDate: Date;\r\n    if (condition.value === '__TODAY__') {\r\n      // Get today's date in local timezone (set to midnight)\r\n      const localToday = new Date();\r\n      localToday.setHours(0, 0, 0, 0);\r\n      conditionDate = localToday;\r\n    } else if (condition.value === '__WEEK_START__') {\r\n      const weekStart = startOfWeek(new Date(), { weekStartsOn: 1 });\r\n      weekStart.setHours(0, 0, 0, 0);\r\n      conditionDate = weekStart;\r\n    } else if (condition.value === '__WEEK_END__') {\r\n      const weekEnd = endOfWeek(new Date(), { weekStartsOn: 1 });\r\n      weekEnd.setHours(23, 59, 59, 999);\r\n      conditionDate = weekEnd;\r\n    } else if (condition.value === '__MONTH_START__') {\r\n      const monthStart = startOfMonth(new Date());\r\n      monthStart.setHours(0, 0, 0, 0);\r\n      conditionDate = monthStart;\r\n    } else if (condition.value === '__MONTH_END__') {\r\n      const monthEnd = endOfMonth(new Date());\r\n      monthEnd.setHours(23, 59, 59, 999);\r\n      conditionDate = monthEnd;\r\n    } else if (condition.value === '__YEAR_START__') {\r\n      const yearStart = startOfYear(new Date());\r\n      yearStart.setHours(0, 0, 0, 0);\r\n      conditionDate = yearStart;\r\n    } else if (condition.value === '__YEAR_END__') {\r\n      const yearEnd = endOfYear(new Date());\r\n      yearEnd.setHours(23, 59, 59, 999);\r\n      conditionDate = yearEnd;\r\n    } else {\r\n      const conditionDateRaw = new Date(condition.value as string);\r\n      if (isNaN(conditionDateRaw.getTime())) {\r\n        return false;\r\n      }\r\n      // Extrahiere nur den Datumsteil (Jahr, Monat, Tag) mit UTC-Methoden\r\n      // Dies verhindert Zeitzone-Konvertierung, die zu einem Tag-Versatz fhrt\r\n      const conditionYear = conditionDateRaw.getUTCFullYear();\r\n      const conditionMonth = conditionDateRaw.getUTCMonth();\r\n      const conditionDay = conditionDateRaw.getUTCDate();\r\n      // Erstelle lokales Date-Objekt aus den UTC-Werten (ohne Zeitzone)\r\n      conditionDate = new Date(conditionYear, conditionMonth, conditionDay);\r\n    }\r\n\r\n    switch (condition.operator) {\r\n      case 'equals':\r\n        return normalizedDate.getTime() === conditionDate.getTime();\r\n      case 'before':\r\n        return normalizedDate < conditionDate;\r\n      case 'after':\r\n        return normalizedDate > conditionDate;\r\n      default:\r\n        return true;\r\n    }\r\n  } catch (error) {\r\n    //  PHASE 5: Error Handling fr ungltige Platzhalter-Werte\r\n    console.error(`[evaluateDateCondition] Error with placeholder ${condition.value}:`, error);\r\n    return false; // Fallback: Filter schliet Datensatz aus\r\n  }\r\n};\r\n\r\n/**\r\n * Helper function to evaluate user/role conditions with user-{id} or role-{id} format\r\n * Supports both user-{id} and role-{id} formats, plus text fallback for legacy support\r\n */\r\nexport const evaluateUserRoleCondition = (\r\n  userId: number | null | undefined,\r\n  roleId: number | null | undefined,\r\n  condition: FilterCondition,\r\n  textValue?: string  // Optional: text representation for fallback (e.g. \"John Doe\")\r\n): boolean => {\r\n  const value = condition.value as string || '';\r\n  \r\n  // Handle user-{id} format\r\n  if (value.startsWith('user-')) {\r\n    const targetUserId = parseInt(value.replace('user-', ''), 10);\r\n    if (isNaN(targetUserId)) return false;\r\n    const matches = userId === targetUserId;\r\n    // Untersttze notEquals Operator\r\n    if (condition.operator === 'notEquals') {\r\n      return !matches;\r\n    }\r\n    return matches;\r\n  }\r\n  \r\n  // Handle role-{id} format\r\n  if (value.startsWith('role-')) {\r\n    const targetRoleId = parseInt(value.replace('role-', ''), 10);\r\n    if (isNaN(targetRoleId)) return false;\r\n    const matches = roleId === targetRoleId;\r\n    // Untersttze notEquals Operator\r\n    if (condition.operator === 'notEquals') {\r\n      return !matches;\r\n    }\r\n    return matches;\r\n  }\r\n  \r\n  // Empty value matches all\r\n  if (value === '') {\r\n    return true;\r\n  }\r\n  \r\n  // Fallback to text comparison (legacy support)\r\n  if (textValue !== undefined) {\r\n    const textValueLower = textValue.toLowerCase();\r\n    const valueLower = value.toLowerCase();\r\n    if (condition.operator === 'equals') {\r\n      return textValueLower === valueLower;\r\n    } else if (condition.operator === 'notEquals') {\r\n      return textValueLower !== valueLower;\r\n    } else if (condition.operator === 'contains') {\r\n      return textValueLower.includes(valueLower);\r\n    }\r\n  }\r\n  \r\n  return false;\r\n};\r\n\r\n/**\r\n * Helper function for combined responsible/qualityControl filter (specific to Tasks)\r\n */\r\nexport const evaluateResponsibleAndQualityControl = (\r\n  responsibleId: number | null | undefined,\r\n  responsibleRoleId: number | null | undefined,\r\n  qualityControlId: number | null | undefined,\r\n  condition: FilterCondition,\r\n  responsibleText?: string,\r\n  qualityControlText?: string\r\n): boolean => {\r\n  const value = condition.value as string || '';\r\n  \r\n  // Handle user-{id} format - matches either responsible OR qualityControl\r\n  if (value.startsWith('user-')) {\r\n    const targetUserId = parseInt(value.replace('user-', ''), 10);\r\n    if (isNaN(targetUserId)) return false;\r\n    const matches = (responsibleId === targetUserId) || (qualityControlId === targetUserId);\r\n    // Untersttze notEquals Operator\r\n    if (condition.operator === 'notEquals') {\r\n      return !matches;\r\n    }\r\n    return matches;\r\n  }\r\n  \r\n  // Handle role-{id} format - only matches with responsible role\r\n  if (value.startsWith('role-')) {\r\n    const targetRoleId = parseInt(value.replace('role-', ''), 10);\r\n    if (isNaN(targetRoleId)) return false;\r\n    const matches = responsibleRoleId === targetRoleId;\r\n    // Untersttze notEquals Operator\r\n    if (condition.operator === 'notEquals') {\r\n      return !matches;\r\n    }\r\n    return matches;\r\n  }\r\n  \r\n  // Empty value matches all\r\n  if (value === '') {\r\n    return true;\r\n  }\r\n  \r\n  // Fallback to text comparison (legacy support)\r\n  const valueLower = value.toLowerCase();\r\n  if (condition.operator === 'equals') {\r\n    return (responsibleText?.toLowerCase() === valueLower) || (qualityControlText?.toLowerCase() === valueLower);\r\n  } else if (condition.operator === 'notEquals') {\r\n    return (responsibleText?.toLowerCase() !== valueLower) && (qualityControlText?.toLowerCase() !== valueLower);\r\n  } else if (condition.operator === 'contains') {\r\n    return (responsibleText?.toLowerCase()?.includes(valueLower) ?? false) || (qualityControlText?.toLowerCase()?.includes(valueLower) ?? false);\r\n  }\r\n  \r\n  return false;\r\n};\r\n\r\n"],"names":["defaultSettings","taskCreate","taskUpdate","taskDelete","taskStatusChange","requestCreate","requestUpdate","requestDelete","requestStatusChange","userCreate","userUpdate","userDelete","roleCreate","roleUpdate","roleDelete","worktimeStart","worktimeStop","categorySettings","task","request","user","role","worktime","NotificationSettingsComponent","t","useTranslation","settings","setSettings","useState","loading","setLoading","saving","setSaving","showMessage","useMessage","useEffect","fetchSettings","async","logger","log","response","notificationSettingsApi","getUserSettings","data","newSettings","_objectSpread","console","warn","error","handleChange","name","checked","event","target","updatedSettings","updateUserSettings","isAllCheckedInCategory","category","normalizedCategory","toLowerCase","every","setting","CustomToggle","_ref","onChange","label","description","_jsxs","className","children","_jsx","type","renderToggleSection","title","toggles","e","value","forEach","toggleAllInCategory","concat","map","_ref2","Typography","Box","variant","Object","values","keys","reduce","acc","key","toggleAll","Divider","isOpen","onClose","onSave","currentSettings","formData","setFormData","monthlyReportEnabled","monthlyReportDay","monthlyReportRecipient","isSaving","setIsSaving","errors","setErrors","handleCancel","field","prev","Dialog","open","Panel","Title","onClick","XMarkIcon","htmlFor","id","parseInt","Array","from","length","_","i","day","rows","placeholder","trim","split","line","index","validateForm","newErrors","toast","success","disabled","ArrowPathIcon","CheckIcon","DatabaseManagement","_tables$find","useAuth","tables","setTables","logs","setLogs","logsLoading","setLogsLoading","getTableDescription","tableName","defaultValue","selectedTable","setSelectedTable","tablePassword","setTablePassword","showTableConfirm","setShowTableConfirm","tableCountdown","setTableCountdown","demoPassword","setDemoPassword","showDemoConfirm","setShowDemoConfirm","demoCountdown","setDemoCountdown","loadTables","loadLogs","timer","setTimeout","clearTimeout","axiosInstance","get","API_ENDPOINTS","DATABASE","TABLES","LOGS","handleDeleteDemoClients","getDangerColor","danger","getStatusColor","status","roles","some","r","ExclamationTriangleIcon","TrashIcon","table","CheckCircleIcon","handleTableReset","DocumentTextIcon","Date","timestamp","toLocaleString","operation","find","displayName","ClockIcon","seconds","LockClosedIcon","post","RESET_TABLE","adminPassword","_error$response","_error$response$data","message","cancelTableReset","DELETE_DEMO_CLIENTS","_error$response2","_error$response2$data","cancelDeleteDemoClients","API_BASE","passwordManagerApi","getAll","getById","PASSWORD_MANAGER","BY_ID","getPassword","PASSWORD","create","update","put","delete","generatePassword","options","arguments","undefined","GENERATE_PASSWORD","getAuditLogs","AUDIT_LOGS","getPermissions","PERMISSIONS","updatePermissions","logPasswordCopy","COPY_PASSWORD","entry","onEntrySaved","openSidepane","closeSidepane","useSidepane","isMobile","setIsMobile","window","innerWidth","isLargeScreen","setIsLargeScreen","setTitle","url","setUrl","username","setUsername","password","setPassword","notes","setNotes","showPassword","setShowPassword","setError","generatingPassword","setGeneratingPassword","passwordStrength","setPasswordStrength","checkScreenSize","addEventListener","removeEventListener","calculatePasswordStrength","pwd","strength","test","getPasswordStrengthColor","getPasswordStrengthText","handleGeneratePassword","includeNumbers","includeSymbols","handleSubmit","preventDefault","urlString","URL","protocol","_unused","isValidUrl","updateData","updatedEntry","createData","newEntry","handleClose","onSubmit","required","EyeSlashIcon","EyeIcon","KeyIcon","style","width","_Fragment","opacity","transition","pointerEvents","entryId","onPermissionsUpdated","rolePermissions","setRolePermissions","userPermissions","setUserPermissions","availableRoles","setAvailableRoles","availableUsers","setAvailableUsers","isLoading","setIsLoading","selectedRoleId","setSelectedRoleId","selectedUserId","setSelectedUserId","loadData","permissions","rolesResponse","usersResponse","Promise","all","ROLES","BASE","USERS","handleTogglePermission","permission","rp","roleId","up","userId","availableRolesToAdd","filter","availableUsersToAdd","u","UserGroupIcon","Number","handleAddRolePermission","passwordEntryId","canView","canEdit","canDelete","PlusIcon","_rp$role","handleRemoveRolePermission","UserIcon","firstName","lastName","email","handleAddUserPermission","_up$user","_up$user2","_up$user3","handleRemoveUserPermission","auditLogs","setAuditLogs","loadAuditLogs","formatDate","dateString","date","Intl","DateTimeFormat","year","month","hour","minute","second","format","action","view","view_password","copy_password","createdAt","details","JSON","stringify","ipAddress","userAgent","PASSWORD_MANAGER_TABLE_ID","PasswordManagerTab","hasPermission","usePermissions","entries","setEntries","isCreateSidepaneOpen","setIsCreateSidepaneOpen","editingEntry","setEditingEntry","viewingPassword","setViewingPassword","viewedPasswords","setViewedPasswords","permissionsEntryId","setPermissionsEntryId","auditLogsEntryId","setAuditLogsEntryId","filterConditions","setFilterConditions","filterLogicalOperators","setFilterLogicalOperators","isFilterPaneOpen","setIsFilterPaneOpen","activeFilterName","setActiveFilterName","selectedFilterId","setSelectedFilterId","availableColumns","useMemo","canCreate","loadEntries","applyFilterConditions","conditions","operators","resetFilterConditions","handleFilterChange","filterContext","useFilterContext","loadFilters","defaultFilter","f","initialize","columnEvaluators","item","cond","_item$title","evaluateTextCondition","_item$url","_item$username","_item$notes","evaluateDateCondition","updatedAt","createdBy","condValue","operator","includes","startsWith","endsWith","condDate","isNaN","getTime","dateMidnight","getFullYear","getMonth","getDate","condMidnight","getFieldValue","columnId","filteredAndSortedEntries","filtered","applyFilters","sort","a","b","aTime","height","FunnelIcon","FilterPane","columns","onApply","onReset","savedConditions","savedOperators","tableId","SavedFilterTags","onSelectFilter","onFilterChange","defaultFilterName","href","rel","LinkIcon","passwordData","handleShowPassword","navigator","clipboard","writeText","logError","handleCopyPassword","ClipboardIcon","handleOpenAndCopy","createdById","ShieldCheckIcon","handleEdit","PencilIcon","confirm","handleDelete","PasswordEntrySidepane","handleSidepaneClose","PasswordEntryPermissionsModal","PasswordEntryAuditLogsModal","Settings","fetchCurrentUser","isAdmin","isDarkMode","toggleDarkMode","useTheme","activeLanguage","organizationLanguage","setUserLanguage","languageLoading","useLanguage","resetTour","startTour","useOnboarding","navigate","useNavigate","selectedLanguage","setSelectedLanguage","savingLanguage","setSavingLanguage","selectedFile","setSelectedFile","previewUrl","setPreviewUrl","isUploading","setIsUploading","fileInputRef","useRef","prevPreviewUrlRef","current","revokeObjectURL","activeTab","setActiveTab","availableTabs","push","monthlyReportSettings","setMonthlyReportSettings","isLoadingSettings","setIsLoadingSettings","isMonthlyReportModalOpen","setIsMonthlyReportModalOpen","invoiceSettings","loadMonthlyReportSettings","updateMonthlyReportSettings","INVOICE_SETTINGS","uploadFile","FormData","append","file","token","localStorage","getItem","headers","fetch","API_URL","method","body","responseText","text","ok","Error","responseData","parse","faviconLink","document","getElementById","base64Response","json","logo","parseError","err","errorMessage","handleTabChange","tab","Cog6ToothIcon","UserCircleIcon","BellIcon","ComputerDesktopIcon","language","newLanguage","AcademicCapIcon","ref","accept","_event$target$files","files","size","createObjectURL","_fileInputRef$current","click","DocumentArrowUpIcon","src","alt","_document$getElementB","_document$getElementB2","resolve","RESERVATIONS","SYNC_FULL","syncedCount","MonthlyReportSettingsModal","evaluateCondition","fieldValue","condition","strField","strValue","fieldValueStr","String","lowerField","valueStr","lowerValue","typeof","fieldDate","valueDate","fieldNum","parseFloat","valueNum","items","result","conditionMet","column","customResult","dateValue","dateYear","getUTCFullYear","dateMonth","getUTCMonth","dateDay","getUTCDate","normalizedDate","weekStart","startOfWeek","weekStartsOn","setHours","weekEnd","endOfWeek","monthStart","startOfMonth","monthEnd","endOfMonth","yearStart","startOfYear","yearEnd","endOfYear","conditionDate","localToday","conditionDateRaw","conditionYear","conditionMonth","conditionDay","evaluateUserRoleCondition","textValue","targetUserId","replace","matches","targetRoleId","textValueLower","valueLower"],"sourceRoot":""}