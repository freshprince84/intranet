{"version":3,"file":"static/js/481.01cf4d18.chunk.js","mappings":"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","sources":["components/PayrollComponent.tsx","components/InvoiceDetailModal.tsx","components/InvoiceManagementTab.tsx","components/MonthlyReportsTab.tsx","pages/Payroll.tsx","utils/filterLogic.ts"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { CalculatorIcon, InformationCircleIcon } from '@heroicons/react/24/outline';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport axiosInstance from '../config/axios.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\n\ninterface PayrollData {\n  totalHours: number;\n  totalEarnings: number;\n  deductions: number;\n  netPay: number;\n  period: string;\n}\n\n// Lokale formatCurrency Funktion\nconst formatCurrency = (amount: number): string => {\n  return new Intl.NumberFormat('de-CH', {\n    style: 'currency',\n    currency: 'CHF'\n  }).format(amount);\n};\n\nconst PayrollComponent: React.FC = () => {\n  const { t } = useTranslation();\n  const { hasPermission } = usePermissions();\n  const [payrollData, setPayrollData] = useState<PayrollData | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // TODO: Diese Implementierung wird zuknftig umgebaut\n  // Das Lohnabrechnung-Modul soll die Daten der Monatsabrechnungen nehmen\n  // und daraus Lohnabrechnungen mit Geldbetrgen erstellen\n  \n  useEffect(() => {\n    if (hasPermission('payroll', 'read')) {\n      loadPayrollData();\n    } else {\n      setLoading(false);\n    }\n  }, [hasPermission]);\n\n  const loadPayrollData = async () => {\n    try {\n      setLoading(true);\n      // Temporre Mock-Daten bis zur Umstrukturierung\n      setTimeout(() => {\n        setPayrollData({\n          totalHours: 160,\n          totalEarnings: 8000,\n          deductions: 1200,\n          netPay: 6800,\n          period: 'Oktober 2024'\n        });\n        setLoading(false);\n      }, 500);\n    } catch (error: any) {\n      console.error('Fehler beim Laden der Lohndaten:', error);\n      setError(t('payroll.payrollComponent.loadError'));\n      setLoading(false);\n    }\n  };\n\n  if (!hasPermission('payroll', 'read')) {\n    return (\n      <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 text-center\">\n        <p className=\"text-red-800 dark:text-red-200\">\n          {t('payroll.payrollComponent.noPermission')}\n        </p>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-4\"></div>\n          <div className=\"space-y-3\">\n            {[...Array(4)].map((_, i) => (\n              <div key={i} className=\"h-12 bg-gray-200 dark:bg-gray-700 rounded\"></div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Hinweis zur zuknftigen Umstrukturierung */}\n      <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n        <div className=\"flex\">\n          <InformationCircleIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400 flex-shrink-0\" />\n          <div className=\"ml-3\">\n            <h3 className=\"text-sm font-medium text-blue-800 dark:text-blue-200\">\n              {t('payroll.payrollComponent.futureDevelopment')}\n            </h3>\n            <p className=\"mt-1 text-sm text-blue-700 dark:text-blue-300\">\n              {t('payroll.payrollComponent.futureDevelopmentDescription')}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Header */}\n      <div className=\"bg-white dark:bg-gray-800 shadow-lg rounded-lg p-6\">\n        <div className=\"flex items-center mb-6\">\n          <CalculatorIcon className=\"h-8 w-8 mr-3 text-blue-600 dark:text-blue-400\" />\n          <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n            {t('payroll.payrollComponent.title')}\n          </h2>\n        </div>\n\n        {error ? (\n          <div className=\"text-center text-red-600 dark:text-red-400\">\n            {error}\n          </div>\n        ) : payrollData ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n            <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n              <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                {t('payroll.payrollComponent.totalHours')}\n              </h3>\n              <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                {payrollData.totalHours}h\n              </p>\n            </div>\n\n            <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n              <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                {t('payroll.payrollComponent.grossPay')}\n              </h3>\n              <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                {formatCurrency(payrollData.totalEarnings)}\n              </p>\n            </div>\n\n            <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n              <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                {t('payroll.payrollComponent.deductions')}\n              </h3>\n              <p className=\"text-2xl font-bold text-red-600 dark:text-red-400\">\n                -{formatCurrency(payrollData.deductions)}\n              </p>\n            </div>\n\n            <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n              <h3 className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">\n                {t('payroll.payrollComponent.netPay')}\n              </h3>\n              <p className=\"text-2xl font-bold text-green-600 dark:text-green-400\">\n                {formatCurrency(payrollData.netPay)}\n              </p>\n            </div>\n          </div>\n        ) : (\n          <div className=\"text-center text-gray-500 dark:text-gray-400\">\n            {t('payroll.payrollComponent.noData')}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default PayrollComponent; ","import React, { useState, useEffect } from 'react';\r\nimport { Dialog } from '@headlessui/react';\r\nimport { \r\n  XMarkIcon, \r\n  DocumentArrowDownIcon,\r\n  CurrencyDollarIcon,\r\n  CalendarIcon,\r\n  UserIcon,\r\n  BuildingOfficeIcon,\r\n  ClockIcon,\r\n  ArrowPathIcon,\r\n  LinkIcon\r\n} from '@heroicons/react/24/outline';\r\nimport { format } from 'date-fns';\r\nimport { de } from 'date-fns/locale';\r\nimport { API_ENDPOINTS } from '../config/api.ts';\r\nimport axiosInstance from '../config/axios.ts';\r\nimport { toast } from 'react-toastify';\r\nimport { calculateDuration, formatTime } from '../utils/dateUtils.ts';\r\n\r\ninterface InvoiceDetail {\r\n  id: number;\r\n  invoiceNumber: string;\r\n  clientId: number;\r\n  userId: number;\r\n  issueDate: string;\r\n  dueDate: string;\r\n  status: 'DRAFT' | 'SENT' | 'PAID' | 'OVERDUE' | 'CANCELLED';\r\n  subtotal: number;\r\n  vatRate?: number;\r\n  vatAmount?: number;\r\n  total: number;\r\n  currency: string;\r\n  paymentTerms: string;\r\n  notes?: string;\r\n  pdfPath?: string;\r\n  qrReference?: string;\r\n  createdAt: string;\r\n  updatedAt: string;\r\n  client: {\r\n    id: number;\r\n    name: string;\r\n    company?: string;\r\n    email?: string;\r\n    phone?: string;\r\n    address?: string;\r\n  };\r\n  user: {\r\n    id: number;\r\n    firstName: string;\r\n    lastName: string;\r\n    email: string;\r\n  };\r\n  items: Array<{\r\n    id: number;\r\n    description: string;\r\n    quantity: number;\r\n    unitPrice: number;\r\n    amount: number;\r\n    workTime: {\r\n      id: number;\r\n      startTime: string;\r\n      endTime: string;\r\n      notes?: string;\r\n      branch: {\r\n        name: string;\r\n      };\r\n    };\r\n  }>;\r\n  payments: Array<{\r\n    id: number;\r\n    amount: number;\r\n    paymentDate: string;\r\n    paymentMethod: string;\r\n    reference?: string;\r\n    notes?: string;\r\n    createdAt: string;\r\n  }>;\r\n}\r\n\r\ninterface InvoiceDetailModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  invoiceId: number;\r\n  onInvoiceUpdated: () => void;\r\n}\r\n\r\nconst getStatusBadge = (status: InvoiceDetail['status']) => {\r\n  const statusConfig = {\r\n    DRAFT: { label: 'Entwurf', color: 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300' },\r\n    SENT: { label: 'Gesendet', color: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300' },\r\n    PAID: { label: 'Bezahlt', color: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300' },\r\n    OVERDUE: { label: 'berfllig', color: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300' },\r\n    CANCELLED: { label: 'Storniert', color: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300' }\r\n  };\r\n\r\n  const config = statusConfig[status];\r\n  return (\r\n    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${config.color}`}>\r\n      {config.label}\r\n    </span>\r\n  );\r\n};\r\n\r\nconst InvoiceDetailModal: React.FC<InvoiceDetailModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  invoiceId,\r\n  onInvoiceUpdated\r\n}) => {\r\n  const [invoice, setInvoice] = useState<InvoiceDetail | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isMarkingAsPaid, setIsMarkingAsPaid] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && invoiceId) {\r\n      loadInvoiceDetails();\r\n    }\r\n  }, [isOpen, invoiceId]);\r\n\r\n  const loadInvoiceDetails = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axiosInstance.get(API_ENDPOINTS.CONSULTATION_INVOICES.BY_ID(invoiceId));\r\n      setInvoice(response.data);\r\n      setError(null);\r\n    } catch (error: any) {\r\n      console.error('Fehler beim Laden der Rechnungsdetails:', error);\r\n      setError('Fehler beim Laden der Rechnungsdetails');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDownloadPdf = async () => {\r\n    if (!invoice) return;\r\n    \r\n    try {\r\n      const response = await axiosInstance.get(\r\n        API_ENDPOINTS.CONSULTATION_INVOICES.GENERATE_PDF(invoice.id),\r\n        { \r\n          responseType: 'blob',\r\n          headers: {\r\n            'Accept': 'application/pdf'\r\n          }\r\n        }\r\n      );\r\n      \r\n      // Erstelle Blob und Download-Link\r\n      const blob = new Blob([response.data], { type: 'application/pdf' });\r\n      const url = window.URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `Rechnung_${invoice.invoiceNumber}.pdf`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      window.URL.revokeObjectURL(url);\r\n      \r\n      toast.success('PDF erfolgreich heruntergeladen');\r\n    } catch (error: any) {\r\n      console.error('Fehler beim Download der PDF:', error);\r\n      toast.error(error.response?.data?.message || 'Fehler beim Download der PDF');\r\n    }\r\n  };\r\n\r\n  const handleMarkAsPaid = async () => {\r\n    if (!invoice) return;\r\n\r\n    try {\r\n      setIsMarkingAsPaid(true);\r\n      \r\n      await axiosInstance.post(\r\n        API_ENDPOINTS.CONSULTATION_INVOICES.MARK_PAID(invoice.id),\r\n        {\r\n          amount: invoice.total,\r\n          paymentDate: new Date().toISOString(),\r\n          paymentMethod: 'Manual',\r\n          reference: 'Manuelle Zahlung'\r\n        }\r\n      );\r\n      \r\n      toast.success('Rechnung als bezahlt markiert');\r\n      loadInvoiceDetails(); // Refresh details\r\n      onInvoiceUpdated(); // Refresh parent list\r\n    } catch (error: any) {\r\n      toast.error(error.response?.data?.message || 'Fehler beim Markieren als bezahlt');\r\n    } finally {\r\n      setIsMarkingAsPaid(false);\r\n    }\r\n  };\r\n\r\n  const getTotalPaid = () => {\r\n    if (!invoice?.payments) return 0;\r\n    return invoice.payments.reduce((sum, payment) => sum + Number(payment.amount), 0);\r\n  };\r\n\r\n  const getRemainingAmount = () => {\r\n    if (!invoice) return 0;\r\n    return Number(invoice.total) - getTotalPaid();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\r\n      <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\r\n      \r\n      <div className=\"fixed inset-0 flex items-center justify-center p-4\">\r\n        <Dialog.Panel className=\"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[90vh] overflow-y-auto\">\r\n          <div className=\"p-6\">\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n              <div className=\"flex items-center space-x-4\">\r\n                <Dialog.Title className=\"text-lg font-medium text-gray-900 dark:text-white\">\r\n                  Rechnungsdetails\r\n                </Dialog.Title>\r\n                {invoice && getStatusBadge(invoice.status)}\r\n              </div>\r\n              <button\r\n                onClick={onClose}\r\n                className=\"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300\"\r\n              >\r\n                <XMarkIcon className=\"h-6 w-6\" />\r\n              </button>\r\n            </div>\r\n\r\n            {loading ? (\r\n              <div className=\"animate-pulse space-y-4\">\r\n                <div className=\"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3\"></div>\r\n                <div className=\"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2\"></div>\r\n                <div className=\"h-32 bg-gray-200 dark:bg-gray-700 rounded\"></div>\r\n              </div>\r\n            ) : error ? (\r\n              <div className=\"text-center text-red-600 dark:text-red-400 py-6\">\r\n                {error}\r\n              </div>\r\n            ) : invoice ? (\r\n              <div className=\"space-y-6\">\r\n                {/* Rechnungsinformationen */}\r\n                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6\">\r\n                  <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n                    Rechnungsinformationen\r\n                  </h3>\r\n                  \r\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                        Rechnungsnummer\r\n                      </label>\r\n                      <p className=\"text-gray-900 dark:text-white font-mono\">\r\n                        {invoice.invoiceNumber}\r\n                      </p>\r\n                    </div>\r\n                    \r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                        Rechnungsdatum\r\n                      </label>\r\n                      <p className=\"text-gray-900 dark:text-white\">\r\n                        {format(new Date(invoice.issueDate), 'dd.MM.yyyy', { locale: de })}\r\n                      </p>\r\n                    </div>\r\n                    \r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                        Flligkeitsdatum\r\n                      </label>\r\n                      <p className=\"text-gray-900 dark:text-white\">\r\n                        {format(new Date(invoice.dueDate), 'dd.MM.yyyy', { locale: de })}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Client und Berater Informationen */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                  {/* Client */}\r\n                  <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\r\n                    <h3 className=\"text-lg font-medium text-blue-800 dark:text-blue-200 mb-3 flex items-center\">\r\n                      <UserIcon className=\"h-5 w-5 mr-2\" />\r\n                      Kunde\r\n                    </h3>\r\n                    <div className=\"space-y-2 text-sm\">\r\n                      <p className=\"font-medium text-gray-900 dark:text-white\">\r\n                        {invoice.client.name}\r\n                      </p>\r\n                      {invoice.client.company && (\r\n                        <p className=\"text-gray-600 dark:text-gray-400\">\r\n                          {invoice.client.company}\r\n                        </p>\r\n                      )}\r\n                      {invoice.client.email && (\r\n                        <p className=\"text-gray-600 dark:text-gray-400\">\r\n                          {invoice.client.email}\r\n                        </p>\r\n                      )}\r\n                      {invoice.client.phone && (\r\n                        <p className=\"text-gray-600 dark:text-gray-400\">\r\n                          {invoice.client.phone}\r\n                        </p>\r\n                      )}\r\n                      {invoice.client.address && (\r\n                        <p className=\"text-gray-600 dark:text-gray-400\">\r\n                          {invoice.client.address}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Berater */}\r\n                  <div className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4\">\r\n                    <h3 className=\"text-lg font-medium text-green-800 dark:text-green-200 mb-3 flex items-center\">\r\n                      <BuildingOfficeIcon className=\"h-5 w-5 mr-2\" />\r\n                      Berater\r\n                    </h3>\r\n                    <div className=\"space-y-2 text-sm\">\r\n                      <p className=\"font-medium text-gray-900 dark:text-white\">\r\n                        {invoice.user.firstName} {invoice.user.lastName}\r\n                      </p>\r\n                      <p className=\"text-gray-600 dark:text-gray-400\">\r\n                        {invoice.user.email}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Beratungen */}\r\n                <div>\r\n                  <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center\">\r\n                    <ClockIcon className=\"h-5 w-5 mr-2\" />\r\n                    Abgerechnete Beratungen ({invoice.items.length})\r\n                  </h3>\r\n                  \r\n                  <div className=\"overflow-x-auto\">\r\n                    <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\r\n                      <thead className=\"bg-gray-50 dark:bg-gray-700\">\r\n                        <tr>\r\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                            Datum & Zeit\r\n                          </th>\r\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                            Dauer\r\n                          </th>\r\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                            Niederlassung\r\n                          </th>\r\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                            Stundensatz\r\n                          </th>\r\n                          <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                            Betrag\r\n                          </th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\r\n                        {invoice.items.map((item) => (\r\n                          <tr key={item.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700\">\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\r\n                              <div>\r\n                                <div className=\"font-medium\">\r\n                                  {formatTime(item.workTime.startTime)}\r\n                                </div>\r\n                                <div className=\"text-gray-500 dark:text-gray-400 text-xs\">\r\n                                  {format(new Date(item.workTime.startTime), 'dd.MM.yyyy', { locale: de })}\r\n                                </div>\r\n                              </div>\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\r\n                              {calculateDuration(item.workTime.startTime, item.workTime.endTime)}\r\n                            </td>\r\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\r\n                              {item.workTime.branch.name}\r\n                            </td>\r\n                            <td className=\"px-4 py-2 text-right text-sm text-gray-900 dark:text-gray-200\">\r\n                              {invoice.currency} {Number(item.unitPrice).toFixed(2)}\r\n                            </td>\r\n                            <td className=\"px-4 py-2 text-right text-sm text-gray-900 dark:text-gray-200\">\r\n                              {invoice.currency} {Number(item.amount).toFixed(2)}\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Rechnungssumme */}\r\n                <div className=\"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-6\">\r\n                  <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n                    Rechnungssumme\r\n                  </h3>\r\n                  \r\n                  <div className=\"space-y-2\">\r\n                    <div className=\"flex justify-between\">\r\n                      <span>Zwischensumme:</span>\r\n                      <span>{invoice.currency} {Number(invoice.subtotal).toFixed(2)}</span>\r\n                    </div>\r\n                    {invoice.vatRate && invoice.vatAmount && (\r\n                      <div className=\"flex justify-between\">\r\n                        <span>MwSt. ({Number(invoice.vatRate).toFixed(1)}%):</span>\r\n                        <span>{invoice.currency} {Number(invoice.vatAmount).toFixed(2)}</span>\r\n                      </div>\r\n                    )}\r\n                    <div className=\"flex justify-between border-t border-gray-200 dark:border-gray-600 pt-2 font-bold\">\r\n                      <span>Gesamtbetrag:</span>\r\n                      <span>{invoice.currency} {Number(invoice.total).toFixed(2)}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Zahlungen */}\r\n                {invoice.payments.length > 0 && (\r\n                  <div>\r\n                    <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center\">\r\n                      <CurrencyDollarIcon className=\"h-5 w-5 mr-2\" />\r\n                      Zahlungen ({invoice.payments.length})\r\n                    </h3>\r\n                    \r\n                    <div className=\"space-y-3\">\r\n                      {invoice.payments.map((payment) => (\r\n                        <div\r\n                          key={payment.id}\r\n                          className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4\"\r\n                        >\r\n                          <div className=\"flex justify-between items-start\">\r\n                            <div>\r\n                              <p className=\"font-medium text-green-800 dark:text-green-200\">\r\n                                {invoice.currency} {Number(payment.amount).toFixed(2)}\r\n                              </p>\r\n                              <p className=\"text-sm text-green-600 dark:text-green-400\">\r\n                                {format(new Date(payment.paymentDate), 'dd.MM.yyyy HH:mm', { locale: de })}\r\n                              </p>\r\n                              <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                                {payment.paymentMethod}\r\n                                {payment.reference && ` - ${payment.reference}`}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      ))}\r\n                      \r\n                      {/* Zahlungsbersicht */}\r\n                      <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\r\n                        <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                          <div>\r\n                            <span className=\"text-blue-600 dark:text-blue-400\">Bezahlt:</span>\r\n                            <span className=\"ml-2 font-medium\">\r\n                              {invoice.currency} {getTotalPaid().toFixed(2)}\r\n                            </span>\r\n                          </div>\r\n                          <div>\r\n                            <span className=\"text-blue-600 dark:text-blue-400\">Ausstehend:</span>\r\n                            <span className=\"ml-2 font-medium\">\r\n                              {invoice.currency} {getRemainingAmount().toFixed(2)}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Notizen */}\r\n                {invoice.notes && (\r\n                  <div>\r\n                    <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n                      Notizen\r\n                    </h3>\r\n                    <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4\">\r\n                      <p className=\"text-gray-900 dark:text-white whitespace-pre-wrap\">\r\n                        {invoice.notes}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Aktionen */}\r\n                <div className=\"flex items-center justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700\">\r\n                  <button\r\n                    onClick={handleDownloadPdf}\r\n                    className=\"p-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 rounded-md\"\r\n                    title=\"PDF herunterladen\"\r\n                  >\r\n                    <DocumentArrowDownIcon className=\"h-5 w-5\" />\r\n                  </button>\r\n                  \r\n                  {invoice.status !== 'PAID' && invoice.status !== 'CANCELLED' && getRemainingAmount() > 0 && (\r\n                    <button\r\n                      onClick={handleMarkAsPaid}\r\n                      disabled={isMarkingAsPaid}\r\n                      className=\"p-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:bg-green-700 dark:hover:bg-green-800 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                      title={isMarkingAsPaid ? 'Verarbeitung...' : 'Als bezahlt markieren'}\r\n                    >\r\n                      {isMarkingAsPaid ? (\r\n                        <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\r\n                      ) : (\r\n                        <CurrencyDollarIcon className=\"h-5 w-5\" />\r\n                      )}\r\n                    </button>\r\n                  )}\r\n                  \r\n                  <button\r\n                    onClick={onClose}\r\n                    className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\r\n                    title=\"Schlieen\"\r\n                  >\r\n                    <XMarkIcon className=\"h-5 w-5\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ) : null}\r\n          </div>\r\n        </Dialog.Panel>\r\n      </div>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default InvoiceDetailModal; ","import React, { useState, useEffect, useMemo } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { \n  MagnifyingGlassIcon,\n  FunnelIcon,\n  ArrowsUpDownIcon,\n  DocumentArrowDownIcon,\n  PlusIcon,\n  CurrencyDollarIcon,\n  ChevronDownIcon,\n  PencilIcon,\n  TrashIcon,\n  CheckIcon,\n  XMarkIcon,\n  ArrowPathIcon,\n  CalendarIcon,\n  ClockIcon,\n  Squares2X2Icon,\n  TableCellsIcon,\n  UserIcon,\n  BuildingOfficeIcon\n} from '@heroicons/react/24/outline';\nimport { format } from 'date-fns';\nimport { de } from 'date-fns/locale';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport axiosInstance from '../config/axios.ts';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useTableSettings } from '../hooks/useTableSettings.ts';\nimport TableColumnConfig from '../components/TableColumnConfig.tsx';\nimport FilterPane from '../components/FilterPane.tsx';\nimport SavedFilterTags from '../components/SavedFilterTags.tsx';\nimport InvoiceDetailModal from '../components/InvoiceDetailModal.tsx';\nimport { FilterCondition } from '../components/FilterRow.tsx';\nimport { applyFilters } from '../utils/filterLogic.ts';\nimport { toast } from 'react-toastify';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport DataCard, { MetadataItem } from '../components/shared/DataCard.tsx';\nimport CardGrid from '../components/shared/CardGrid.tsx';\n\ninterface ConsultationInvoice {\n  id: number;\n  invoiceNumber: string;\n  clientId: number;\n  userId: number;\n  issueDate: string;\n  dueDate: string;\n  status: 'DRAFT' | 'SENT' | 'PAID' | 'OVERDUE' | 'CANCELLED';\n  subtotal: number;\n  vatRate?: number;\n  vatAmount?: number;\n  total: number;\n  currency: string;\n  paymentTerms: string;\n  notes?: string;\n  pdfPath?: string;\n  qrReference?: string;\n  createdAt: string;\n  updatedAt: string;\n  client: {\n    id: number;\n    name: string;\n    company?: string;\n    email?: string;\n  };\n  user: {\n    id: number;\n    firstName: string;\n    lastName: string;\n  };\n  items: Array<{\n    id: number;\n    description: string;\n    quantity: number;\n    unitPrice: number;\n    amount: number;\n  }>;\n  payments?: Array<{\n    id: number;\n    amount: number;\n    paymentDate: string;\n    paymentMethod: string;\n    reference?: string;\n  }>;\n}\n\ninterface SortConfig {\n  key: keyof ConsultationInvoice | 'client.name';\n  direction: 'asc' | 'desc';\n}\n\n// Standardreihenfolge der Spalten (IDs)\nconst defaultColumnOrder = ['expand', 'invoiceNumber', 'client', 'issueDate', 'dueDate', 'total', 'status', 'actions'];\nconst INVOICES_TABLE_ID = 'invoice-management';\n\n// Card-Einstellungen Standardwerte\nconst defaultCardMetadata = ['invoiceNumber', 'client', 'issueDate', 'dueDate', 'total', 'status'];\nconst defaultCardColumnOrder = ['invoiceNumber', 'client', 'issueDate', 'dueDate', 'total', 'status'];\nconst defaultCardSortDirections: Record<string, 'asc' | 'desc'> = {\n  invoiceNumber: 'asc',\n  client: 'asc',\n  issueDate: 'desc',\n  dueDate: 'asc',\n  total: 'asc',\n  status: 'asc'\n};\n\n// Mapping zwischen Tabellen-Spalten-IDs und Card-Metadaten-IDs\nconst tableToCardMapping: Record<string, string[]> = {\n  'expand': [], // Keine Card-Entsprechung\n  'invoiceNumber': ['invoiceNumber'],\n  'client': ['client'],\n  'issueDate': ['issueDate'],\n  'dueDate': ['dueDate'],\n  'total': ['total'],\n  'status': ['status'],\n  'actions': [] // Keine Card-Entsprechung\n};\n\n// Reverse Mapping: Card-Metadaten -> Tabellen-Spalten\nconst cardToTableMapping: Record<string, string> = {\n  'invoiceNumber': 'invoiceNumber',\n  'client': 'client',\n  'issueDate': 'issueDate',\n  'dueDate': 'dueDate',\n  'total': 'total',\n  'status': 'status'\n};\n\n// Helfer-Funktion: Tabellen-Spalte ausgeblendet -> Card-Metadaten ausblenden\nconst getHiddenCardMetadata = (hiddenTableColumns: string[]): Set<string> => {\n  const hiddenCardMetadata = new Set<string>();\n  hiddenTableColumns.forEach(tableCol => {\n    const cardMetadata = tableToCardMapping[tableCol] || [];\n    cardMetadata.forEach(cardMeta => hiddenCardMetadata.add(cardMeta));\n  });\n  return hiddenCardMetadata;\n};\n\n// Helfer-Funktion: Card-Metadaten zu Tabellen-Spalten konvertieren\nconst getCardMetadataFromColumnOrder = (columnOrder: string[]): string[] => {\n  const cardMetadata: string[] = [];\n  columnOrder.forEach(tableCol => {\n    const cardMeta = tableToCardMapping[tableCol];\n    if (cardMeta && cardMeta.length > 0) {\n      cardMetadata.push(...cardMeta);\n    }\n  });\n  return cardMetadata;\n};\n\n\ninterface InvoiceManagementTabProps {\n  selectedInvoiceId?: number | null;\n}\n\nconst InvoiceManagementTab: React.FC<InvoiceManagementTabProps> = ({ selectedInvoiceId: initialSelectedInvoiceId }) => {\n  const { t } = useTranslation();\n  const { hasPermission } = usePermissions();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [invoices, setInvoices] = useState<ConsultationInvoice[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [sortConfig, setSortConfig] = useState<SortConfig>({ \n    key: 'issueDate', \n    direction: 'desc' \n  });\n  \n  // Filter States\n  const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  \n  // Filter State Management (Controlled Mode)\n  const [activeFilterName, setActiveFilterName] = useState<string>('');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n  \n  // Detail Modal State\n  const [selectedInvoiceId, setSelectedInvoiceId] = useState<number | null>(initialSelectedInvoiceId || null);\n  const [isDetailModalOpen, setIsDetailModalOpen] = useState(false);\n  \n  // Expand/Collapse States (nach Tasks & Requests Standard)\n  const [expandedRows, setExpandedRows] = useState<Set<number>>(new Set());\n  \n  // Sidepane States (nach Tasks & Requests Standard) \n  const [isEditSidepaneOpen, setIsEditSidepaneOpen] = useState(false);\n  const [editingInvoice, setEditingInvoice] = useState<ConsultationInvoice | null>(null);\n  \n  // Position States fr Position-Bearbeitung innerhalb Sidepane\n  const [editingPositions, setEditingPositions] = useState<Record<number, any[]>>({});\n  \n  // Berechtigungsprfungen\n  const canViewInvoices = hasPermission('consultation_invoices', 'read', 'table');\n  const canEditInvoices = hasPermission('invoice_mark_paid', 'write', 'button');\n  const canDownloadInvoices = hasPermission('invoice_download', 'read', 'button');\n  \n  // Table Settings\n  const {\n    settings,\n    isLoading: isLoadingSettings,\n    updateColumnOrder,\n    updateHiddenColumns,\n    toggleColumnVisibility,\n    isColumnVisible,\n    updateViewMode\n  } = useTableSettings(INVOICES_TABLE_ID, {\n    defaultColumnOrder,\n    defaultHiddenColumns: [],\n    defaultViewMode: 'cards'\n  });\n\n  const [isColumnConfigOpen, setIsColumnConfigOpen] = useState(false);\n\n  // Verfgbare Spalten (dynamisch aus bersetzungen)\n  const availableColumns = useMemo(() => [\n    { id: 'expand', label: '', shortLabel: '' }, // Expand-Button Spalte\n    { id: 'invoiceNumber', label: t('invoices.columns.invoiceNumber'), shortLabel: t('invoices.columns.invoiceNumber').substring(0, 2) },\n    { id: 'client', label: t('invoices.columns.client'), shortLabel: t('invoices.columns.client') },\n    { id: 'issueDate', label: t('invoices.columns.issueDate'), shortLabel: t('common.today').substring(0, 3) },\n    { id: 'dueDate', label: t('invoices.columns.dueDate'), shortLabel: t('invoices.columns.dueDate').substring(0, 5) },\n    { id: 'total', label: t('invoices.columns.total'), shortLabel: t('invoices.columns.total') },\n    { id: 'status', label: t('invoices.columns.status'), shortLabel: t('invoices.columns.status') },\n    { id: 'actions', label: t('common.actions'), shortLabel: t('common.actions').substring(0, 3) }\n  ], [t]);\n  \n  // Status-Konfiguration (mit bersetzungen)\n  const statusConfig = useMemo(() => ({\n    DRAFT: { label: t('invoices.status.draft'), color: 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300' },\n    SENT: { label: t('invoices.status.sent'), color: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300' },\n    PAID: { label: t('invoices.status.paid'), color: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300' },\n    OVERDUE: { label: t('invoices.status.overdue'), color: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300' },\n    CANCELLED: { label: t('invoices.status.cancelled'), color: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300' }\n  }), [t]);\n  \n  const getStatusBadge = (status: ConsultationInvoice['status']) => {\n    const config = statusConfig[status];\n    return (\n      <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${config.color}`}>\n        {config.label}\n      </span>\n    );\n  };\n\n  // View-Mode aus Settings laden\n  const viewMode = settings.viewMode || 'cards';\n  \n  // Lokale Sortierrichtungen fr Cards (nicht persistiert)\n  const [cardSortDirections, setCardSortDirections] = useState<Record<string, 'asc' | 'desc'>>(() => {\n    return defaultCardSortDirections;\n  });\n\n  // Abgeleitete Werte fr Card-Ansicht aus Tabellen-Settings\n  const cardMetadataOrder = useMemo(() => {\n    return getCardMetadataFromColumnOrder(settings.columnOrder || defaultColumnOrder);\n  }, [settings.columnOrder]);\n\n  // Versteckte Card-Metadaten aus hiddenColumns ableiten\n  const hiddenCardMetadata = useMemo(() => {\n    return getHiddenCardMetadata(settings.hiddenColumns || []);\n  }, [settings.hiddenColumns]);\n\n  // Sichtbare Card-Metadaten (alle Card-Metadaten minus versteckte)\n  const visibleCardMetadata = useMemo(() => {\n    return new Set(cardMetadataOrder.filter(meta => !hiddenCardMetadata.has(meta)));\n  }, [cardMetadataOrder, hiddenCardMetadata]);\n\n  // CSS-Klasse fr Container-Box setzen (fr CSS-basierte Schattierungs-Entfernung)\n  useEffect(() => {\n    const wrapper = document.querySelector('.dashboard-invoices-wrapper');\n    if (wrapper) {\n      if (viewMode === 'cards') {\n        wrapper.classList.add('cards-mode');\n      } else {\n        wrapper.classList.remove('cards-mode');\n      }\n    }\n  }, [viewMode]);\n\n  useEffect(() => {\n    loadInvoices();\n  }, []);\n\n  // Auto-open detail modal wenn selectedInvoiceId von auen gesetzt wird\n  useEffect(() => {\n    if (initialSelectedInvoiceId && invoices.length > 0) {\n      const invoice = invoices.find(inv => inv.id === initialSelectedInvoiceId);\n      if (invoice) {\n        setSelectedInvoiceId(initialSelectedInvoiceId);\n        setIsDetailModalOpen(true);\n      }\n    }\n  }, [initialSelectedInvoiceId, invoices]);\n\n  const loadInvoices = async () => {\n    try {\n      setLoading(true);\n      const response = await axiosInstance.get(API_ENDPOINTS.CONSULTATION_INVOICES.BASE);\n      setInvoices(response.data);\n      setError(null);\n    } catch (error: any) {\n      console.error('Fehler beim Laden der Rechnungen:', error);\n      setError('Fehler beim Laden der Rechnungen');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSort = (key: SortConfig['key']) => {\n    setSortConfig(current => ({\n      key,\n      direction: current.key === key && current.direction === 'asc' ? 'desc' : 'asc'\n    }));\n  };\n\n  const handleDownloadPdf = async (invoiceId: number, invoiceNumber: string) => {\n    try {\n      const response = await axiosInstance.get(\n        API_ENDPOINTS.CONSULTATION_INVOICES.GENERATE_PDF(invoiceId),\n        { \n          responseType: 'blob',\n          headers: {\n            'Accept': 'application/pdf'\n          }\n        }\n      );\n      \n      // Erstelle Blob und Download-Link\n      const blob = new Blob([response.data], { type: 'application/pdf' });\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `Rechnung_${invoiceNumber}.pdf`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n      \n      toast.success('PDF erfolgreich heruntergeladen');\n    } catch (error: any) {\n      console.error('Fehler beim Download der PDF:', error);\n      toast.error(error.response?.data?.message || 'Fehler beim Download der PDF');\n    }\n  };\n\n  const handleMarkAsPaid = async (invoiceId: number) => {\n    try {\n      await axiosInstance.post(\n        API_ENDPOINTS.CONSULTATION_INVOICES.MARK_PAID(invoiceId),\n        {\n          amount: invoices.find(inv => inv.id === invoiceId)?.total || 0,\n          paymentDate: new Date().toISOString(),\n          paymentMethod: 'Manual',\n          reference: 'Manuelle Zahlung'\n        }\n      );\n      \n      toast.success('Rechnung als bezahlt markiert');\n      loadInvoices(); // Refresh list\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Fehler beim Markieren als bezahlt');\n    }\n  };\n\n  // Expand/Collapse Handler (nach Tasks & Requests Standard)\n  const toggleExpanded = (invoiceId: number) => {\n    setExpandedRows(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(invoiceId)) {\n        newSet.delete(invoiceId);\n      } else {\n        newSet.add(invoiceId);\n      }\n      return newSet;\n    });\n  };\n\n  // berwache Bildschirmgre\n  useEffect(() => {\n    const handleResize = () => {\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isEditSidepaneOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isEditSidepaneOpen, openSidepane, closeSidepane]);\n\n  // Sidepane Handler (nach Tasks & Requests Standard)\n  const openEditSidepane = (invoice: ConsultationInvoice) => {\n    setEditingInvoice(invoice);\n    setIsEditSidepaneOpen(true);\n  };\n\n  const closeEditSidepane = () => {\n    setIsEditSidepaneOpen(false);\n    setEditingInvoice(null);\n    setEditingPositions({});\n  };\n\n  // Filter-Funktionen\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n  };\n\n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n  \n  // Filter Change Handler (Controlled Mode)\n  const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators);\n  };\n\n  // Gefilterte und sortierte Rechnungen\n  const filteredAndSortedInvoices = useMemo(() => {\n    let filtered = invoices;\n\n    // Globale Suche\n    if (searchTerm) {\n      const searchLower = searchTerm.toLowerCase();\n      filtered = filtered.filter(invoice => \n        invoice.invoiceNumber.toLowerCase().includes(searchLower) ||\n        invoice.client.name.toLowerCase().includes(searchLower) ||\n        (invoice.client.company && invoice.client.company.toLowerCase().includes(searchLower)) ||\n        `${invoice.user.firstName} ${invoice.user.lastName}`.toLowerCase().includes(searchLower)\n      );\n    }\n\n    // Erweiterte Filter anwenden mit zentraler Filter-Logik\n    if (filterConditions.length > 0) {\n      // Column-Evaluatoren fr Invoices (exakt gleiche Logik wie vorher)\n      const columnEvaluators: any = {\n        'client': (invoice: ConsultationInvoice, cond: FilterCondition) => {\n          const clientName = invoice.client.name.toLowerCase();\n          const value = (cond.value as string || '').toLowerCase();\n          if (cond.operator === 'contains') return clientName.includes(value);\n          if (cond.operator === 'equals') return invoice.client.name === cond.value;\n          return null;\n        },\n        'status': (invoice: ConsultationInvoice, cond: FilterCondition) => {\n          if (cond.operator === 'equals') return invoice.status === cond.value;\n          return null;\n        },\n        'total': (invoice: ConsultationInvoice, cond: FilterCondition) => {\n          const amount = invoice.total;\n          const compareValue = parseFloat(cond.value as string);\n          if (isNaN(compareValue)) return false;\n          if (cond.operator === 'greaterThan') return amount > compareValue;\n          if (cond.operator === 'lessThan') return amount < compareValue;\n          if (cond.operator === 'equals') return Math.abs(amount - compareValue) < 0.01;\n          return null;\n        }\n      };\n\n      const getFieldValue = (invoice: ConsultationInvoice, columnId: string): any => {\n        switch (columnId) {\n          case 'client': return invoice.client.name;\n          case 'status': return invoice.status;\n          case 'total': return invoice.total;\n          default: return (invoice as any)[columnId];\n        }\n      };\n\n      filtered = applyFilters(\n        filtered,\n        filterConditions,\n        filterLogicalOperators,\n        getFieldValue,\n        columnEvaluators\n      );\n    }\n\n    // Sortierung\n    if (viewMode === 'cards') {\n      // Multi-Sortierung fr Cards-Mode\n      const sortableColumns = cardMetadataOrder.filter(colId => visibleCardMetadata.has(colId));\n      \n      filtered.sort((a, b) => {\n        for (const columnId of sortableColumns) {\n          const direction = cardSortDirections[columnId] || 'asc';\n          let valueA: any, valueB: any;\n          \n          switch (columnId) {\n            case 'invoiceNumber':\n              valueA = a.invoiceNumber.toLowerCase();\n              valueB = b.invoiceNumber.toLowerCase();\n              break;\n            case 'client':\n              valueA = a.client.name.toLowerCase();\n              valueB = b.client.name.toLowerCase();\n              break;\n            case 'issueDate':\n              valueA = new Date(a.issueDate).getTime();\n              valueB = new Date(b.issueDate).getTime();\n              break;\n            case 'dueDate':\n              valueA = new Date(a.dueDate).getTime();\n              valueB = new Date(b.dueDate).getTime();\n              break;\n            case 'total':\n              valueA = Number(a.total);\n              valueB = Number(b.total);\n              break;\n            case 'status':\n              valueA = a.status.toLowerCase();\n              valueB = b.status.toLowerCase();\n              break;\n            default:\n              continue; // berspringe unbekannte Spalten\n          }\n          \n          // Vergleich basierend auf Typ\n          let comparison = 0;\n          if (typeof valueA === 'number' && typeof valueB === 'number') {\n            comparison = valueA - valueB;\n          } else {\n            comparison = String(valueA).localeCompare(String(valueB));\n          }\n          \n          // Sortierrichtung anwenden\n          if (direction === 'desc') {\n            comparison = -comparison;\n          }\n          \n          // Wenn unterschiedlich, gebe Vergleich zurck\n          if (comparison !== 0) {\n            return comparison;\n          }\n        }\n        return 0; // Alle Spalten identisch\n      });\n    } else {\n      // Tabellen-Mode: Einzel-Sortierung wie bisher\n      filtered.sort((a, b) => {\n        let aValue: any;\n        let bValue: any;\n\n        switch (sortConfig.key) {\n          case 'issueDate':\n            aValue = new Date(a.issueDate).getTime();\n            bValue = new Date(b.issueDate).getTime();\n            break;\n          case 'dueDate':\n            aValue = new Date(a.dueDate).getTime();\n            bValue = new Date(b.dueDate).getTime();\n            break;\n          case 'client.name':\n            aValue = a.client.name;\n            bValue = b.client.name;\n            break;\n          case 'total':\n            aValue = a.total;\n            bValue = b.total;\n            break;\n          case 'invoiceNumber':\n            aValue = a.invoiceNumber;\n            bValue = b.invoiceNumber;\n            break;\n          default:\n            return 0;\n        }\n\n        if (aValue < bValue) return sortConfig.direction === 'asc' ? -1 : 1;\n        if (aValue > bValue) return sortConfig.direction === 'asc' ? 1 : -1;\n        return 0;\n      });\n    }\n\n    return filtered;\n  }, [invoices, searchTerm, filterConditions, filterLogicalOperators, sortConfig, viewMode, cardMetadataOrder, visibleCardMetadata, cardSortDirections]);\n\n  const renderSortableHeader = (columnId: string, label: string, sortKey?: SortConfig['key']) => (\n    <th\n      key={columnId}\n      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer select-none\"\n      onClick={() => sortKey && handleSort(sortKey)}\n    >\n      <div className=\"flex items-center space-x-1\">\n        <span>{label}</span>\n        {sortKey && sortConfig.key === sortKey && (\n          <span>{sortConfig.direction === 'asc' ? '' : ''}</span>\n        )}\n      </div>\n    </th>\n  );\n\n  if (loading && invoices.length === 0) {\n    return (\n      <div className=\"animate-pulse\">\n        <div className=\"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-4\"></div>\n        <div className=\"space-y-3\">\n          {[...Array(5)].map((_, i) => (\n            <div key={i} className=\"h-12 bg-gray-200 dark:bg-gray-700 rounded\"></div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  // Prfe Berechtigungen\n  if (!canViewInvoices) {\n    return (\n      <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md p-4\">\n        <div className=\"flex\">\n          <div className=\"ml-3\">\n            <h3 className=\"text-sm font-medium text-red-800 dark:text-red-200\">\n              Keine Berechtigung\n            </h3>\n            <div className=\"mt-2 text-sm text-red-700 dark:text-red-300\">\n              <p>Sie haben keine Berechtigung, Rechnungen anzuzeigen.</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n          Beratungsrechnungen\n        </h2>\n        <div className=\"flex items-center space-x-2\">\n          <button\n            onClick={() => setIsFilterModalOpen(true)}\n            className={`p-2 rounded-md ${\n              filterConditions.length > 0\n                ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400'\n                : 'bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300'\n            } hover:bg-gray-200 dark:hover:bg-gray-600 relative`}\n            title=\"Filter\"\n          >\n            <FunnelIcon className=\"h-5 w-5\" />\n            {filterConditions.length > 0 && (\n              <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center\">\n                {filterConditions.length}\n              </span>\n            )}\n          </button>\n          {/* View-Mode Toggle */}\n          <button\n            type=\"button\"\n            className={`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 ${\n              viewMode === 'cards' ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : ''\n            }`}\n            onClick={() => updateViewMode(viewMode === 'table' ? 'cards' : 'table')}\n            title={viewMode === 'table' ? t('common.viewAsCards') : t('common.viewAsTable')}\n          >\n            {viewMode === 'table' ? (\n              <Squares2X2Icon className=\"h-5 w-5\" />\n            ) : (\n              <TableCellsIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n          \n          <button\n            onClick={() => setIsColumnConfigOpen(true)}\n            className=\"p-2 bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600\"\n            title={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n          >\n            <ArrowsUpDownIcon className=\"h-5 w-5\" />\n          </button>\n        </div>\n      </div>\n\n      {/* Suchfeld */}\n      <div className=\"relative mb-6\">\n        <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n          <MagnifyingGlassIcon className=\"h-5 w-5 text-gray-400\" />\n        </div>\n        <input\n          type=\"text\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          className=\"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md leading-5 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm\"\n          placeholder=\"Rechnungen durchsuchen...\"\n        />\n      </div>\n\n      {/* Gespeicherte Filter */}\n      <SavedFilterTags\n        tableId={INVOICES_TABLE_ID}\n        onSelectFilter={applyFilterConditions}\n        onReset={resetFilterConditions}\n        activeFilterName={activeFilterName}\n        selectedFilterId={selectedFilterId}\n        onFilterChange={handleFilterChange}\n      />\n\n      {/* Tabelle oder Cards */}\n      {error ? (\n        <div className=\"text-center text-red-600 dark:text-red-400 py-6\">\n          {error}\n        </div>\n      ) : viewMode === 'table' ? (\n        /* Tabellen-Ansicht */\n        <div className=\"dashboard-invoices-wrapper overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n            <thead className=\"bg-gray-50 dark:bg-gray-700\">\n              <tr>\n                {settings.columnOrder\n                  .filter(columnId => isColumnVisible(columnId))\n                  .map(columnId => {\n                    const column = availableColumns.find(col => col.id === columnId);\n                    if (!column) return null;\n                    \n                    switch (columnId) {\n                      case 'expand':\n                        return (\n                          <th key=\"expand\" className=\"px-6 py-3 text-left w-12\">\n                            {/* Leerer Header fr Expand-Spalte */}\n                          </th>\n                        );\n                      case 'invoiceNumber':\n                        return renderSortableHeader('invoiceNumber', column.label, 'invoiceNumber');\n                      case 'client':\n                        return renderSortableHeader('client', column.label, 'client.name');\n                      case 'issueDate':\n                        return renderSortableHeader('issueDate', column.label, 'issueDate');\n                      case 'dueDate':\n                        return renderSortableHeader('dueDate', column.label, 'dueDate');\n                      case 'total':\n                        return renderSortableHeader('total', column.label, 'total');\n                      case 'status':\n                        return renderSortableHeader('status', column.label, 'status');\n                      default:\n                        return renderSortableHeader(columnId, column.label);\n                    }\n                  })}\n              </tr>\n            </thead>\n            <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n              {filteredAndSortedInvoices.map((invoice) => (\n                <React.Fragment key={invoice.id}>\n                  <tr className=\"hover:bg-gray-50 dark:hover:bg-gray-700\">\n                    {isColumnVisible('expand') && (\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <button\n                          onClick={() => toggleExpanded(invoice.id)}\n                          className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n                          title={expandedRows.has(invoice.id) ? 'Einklappen' : 'Ausklappen'}\n                        >\n                          <ChevronDownIcon \n                            className={`h-4 w-4 transition-transform ${\n                              expandedRows.has(invoice.id) ? 'rotate-180' : ''\n                            }`} \n                          />\n                        </button>\n                      </td>\n                    )}\n\n                    {isColumnVisible('invoiceNumber') && (\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-200\">\n                        {invoice.invoiceNumber}\n                      </td>\n                    )}\n                    \n                    {isColumnVisible('client') && (\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                        <div>\n                          <div className=\"font-medium\">{invoice.client.name}</div>\n                          {invoice.client.company && (\n                            <div className=\"text-gray-500 dark:text-gray-400 text-xs\">\n                              {invoice.client.company}\n                            </div>\n                          )}\n                        </div>\n                      </td>\n                    )}\n                    \n                    {isColumnVisible('issueDate') && (\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                        {format(new Date(invoice.issueDate), 'dd.MM.yyyy', { locale: de })}\n                      </td>\n                    )}\n                    \n                    {isColumnVisible('dueDate') && (\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                        {format(new Date(invoice.dueDate), 'dd.MM.yyyy', { locale: de })}\n                      </td>\n                    )}\n                    \n                    {isColumnVisible('total') && (\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                        {invoice.currency} {Number(invoice.total).toFixed(2)}\n                      </td>\n                    )}\n                    \n                    {isColumnVisible('status') && (\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        {getStatusBadge(invoice.status)}\n                      </td>\n                    )}\n                    \n                    {isColumnVisible('actions') && (\n                      <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                        <div className=\"flex items-center justify-end space-x-2\">\n                          <button\n                            onClick={() => openEditSidepane(invoice)}\n                            className=\"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                            title={t('common.edit')}\n                          >\n                            <PencilIcon className=\"h-5 w-5\" />\n                          </button>\n                          {canDownloadInvoices && (\n                            <button\n                              onClick={() => handleDownloadPdf(invoice.id, invoice.invoiceNumber)}\n                              className=\"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                              title=\"PDF herunterladen\"\n                            >\n                              <DocumentArrowDownIcon className=\"h-5 w-5\" />\n                            </button>\n                          )}\n                          {canEditInvoices && invoice.status !== 'PAID' && invoice.status !== 'CANCELLED' && (\n                            <button\n                              onClick={() => handleMarkAsPaid(invoice.id)}\n                              className=\"text-yellow-600 hover:text-yellow-800 dark:text-yellow-400 dark:hover:text-yellow-300\"\n                              title=\"Als bezahlt markieren\"\n                            >\n                              <CurrencyDollarIcon className=\"h-5 w-5\" />\n                            </button>\n                          )}\n                        </div>\n                      </td>\n                    )}\n                  </tr>\n\n                  {/* Erweiterte Details-Zeile */}\n                  {expandedRows.has(invoice.id) && (\n                    <tr className=\"bg-gray-50 dark:bg-gray-900\">\n                      <td colSpan={settings.columnOrder.filter(col => isColumnVisible(col)).length} className=\"px-6 py-4\">\n                        <div className=\"space-y-4\">\n                          <h4 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                            Rechnungsdetails & Positionen\n                          </h4>\n                          \n                          {/* Rechnungsinformationen */}\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\n                            <div>\n                              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                Rechnungsnummer\n                              </label>\n                              <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                {invoice.invoiceNumber}\n                              </div>\n                            </div>\n                            <div>\n                              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                Berater\n                              </label>\n                              <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                {invoice.user ? `${invoice.user.firstName} ${invoice.user.lastName}` : 'Unbekannt'}\n                              </div>\n                            </div>\n                            <div>\n                              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                Zahlungsbedingungen\n                              </label>\n                              <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                {invoice.paymentTerms}\n                              </div>\n                            </div>\n                            <div>\n                              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                Untertotal\n                              </label>\n                              <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                {invoice.currency} {Number(invoice.subtotal).toFixed(2)}\n                              </div>\n                            </div>\n                            <div>\n                              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                MwSt.\n                              </label>\n                              <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                {invoice.vatAmount ? `${invoice.currency} ${Number(invoice.vatAmount).toFixed(2)} (${invoice.vatRate}%)` : 'Keine MwSt.'}\n                              </div>\n                            </div>\n                          </div>\n\n                          {/* Notizen */}\n                          {invoice.notes && (\n                            <div className=\"mb-6\">\n                              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                                Notizen\n                              </label>\n                              <div className=\"text-sm text-gray-900 dark:text-gray-200 bg-white dark:bg-gray-800 p-3 rounded border\">\n                                {invoice.notes}\n                              </div>\n                            </div>\n                          )}\n\n                          {/* Rechnungspositionen */}\n                          <div>\n                            <div className=\"flex items-center justify-between mb-4\">\n                              <h5 className=\"text-md font-medium text-gray-900 dark:text-white\">\n                                Rechnungspositionen ({invoice.items?.length || 0})\n                              </h5>\n                              <button\n                                onClick={() => openEditSidepane(invoice)}\n                                className=\"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"\n                              >\n                                <PencilIcon className=\"h-4 w-4 mr-2\" />\n                                Positionen bearbeiten\n                              </button>\n                            </div>\n                            \n                            {invoice.items && invoice.items.length > 0 ? (\n                              <div className=\"overflow-x-auto\">\n                                <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n                                  <thead className=\"bg-gray-100 dark:bg-gray-700\">\n                                    <tr>\n                                      <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                        Beschreibung\n                                      </th>\n                                      <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                        Menge/Stunden\n                                      </th>\n                                      <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                        Stundensatz\n                                      </th>\n                                      <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                        Betrag\n                                      </th>\n                                    </tr>\n                                  </thead>\n                                  <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                                    {invoice.items.map((item) => (\n                                      <tr key={item.id}>\n                                        <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-gray-200\">\n                                          {item.description}\n                                        </td>\n                                        <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-gray-200\">\n                                          {Number(item.quantity).toFixed(2)}\n                                        </td>\n                                        <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-gray-200\">\n                                          {invoice.currency} {Number(item.unitPrice).toFixed(2)}\n                                        </td>\n                                        <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-gray-200\">\n                                          {invoice.currency} {Number(item.amount).toFixed(2)}\n                                        </td>\n                                      </tr>\n                                    ))}\n                                  </tbody>\n                                </table>\n                              </div>\n                            ) : (\n                              <div className=\"text-center text-gray-500 dark:text-gray-400 py-4\">\n                                Keine Rechnungspositionen vorhanden\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </td>\n                    </tr>\n                  )}\n                </React.Fragment>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      ) : (\n        /* Card-Ansicht */\n        <div className=\"dashboard-invoices-wrapper\">\n          {filteredAndSortedInvoices.length === 0 ? (\n            <div className=\"text-center py-8 text-sm text-gray-500 dark:text-gray-400\">\n              {t('invoices.noInvoicesFound')}\n            </div>\n          ) : (\n            <CardGrid gap=\"md\">\n              {filteredAndSortedInvoices.map((invoice) => {\n                const isExpanded = expandedRows.has(invoice.id);\n\n                // Metadaten fr Card aufbauen\n                const metadata: MetadataItem[] = [];\n\n                if (visibleCardMetadata.has('invoiceNumber')) {\n                  metadata.push({\n                    label: t('invoices.columns.invoiceNumber'),\n                    value: invoice.invoiceNumber,\n                    icon: <DocumentArrowDownIcon className=\"h-4 w-4\" />\n                  });\n                }\n\n                if (visibleCardMetadata.has('client')) {\n                  metadata.push({\n                    label: t('invoices.columns.client'),\n                    value: invoice.client.company \n                      ? `${invoice.client.name} (${invoice.client.company})`\n                      : invoice.client.name,\n                    icon: <BuildingOfficeIcon className=\"h-4 w-4\" />\n                  });\n                }\n\n                if (visibleCardMetadata.has('issueDate')) {\n                  metadata.push({\n                    label: t('invoices.columns.issueDate'),\n                    value: format(new Date(invoice.issueDate), 'dd.MM.yyyy', { locale: de }),\n                    icon: <CalendarIcon className=\"h-4 w-4\" />\n                  });\n                }\n\n                if (visibleCardMetadata.has('dueDate')) {\n                  metadata.push({\n                    label: t('invoices.columns.dueDate'),\n                    value: format(new Date(invoice.dueDate), 'dd.MM.yyyy', { locale: de }),\n                    icon: <CalendarIcon className=\"h-4 w-4\" />\n                  });\n                }\n\n                if (visibleCardMetadata.has('total')) {\n                  metadata.push({\n                    label: t('invoices.columns.total'),\n                    value: `${invoice.currency} ${Number(invoice.total).toFixed(2)}`,\n                    icon: <CurrencyDollarIcon className=\"h-4 w-4\" />\n                  });\n                }\n\n                // Status wird ber das status-Prop der DataCard angezeigt, nicht als Metadata\n                // Status-Konfiguration\n                const statusConfig = {\n                  DRAFT: { label: t('invoices.status.draft'), color: 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300' },\n                  SENT: { label: t('invoices.status.sent'), color: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300' },\n                  PAID: { label: t('invoices.status.paid'), color: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300' },\n                  OVERDUE: { label: t('invoices.status.overdue'), color: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300' },\n                  CANCELLED: { label: t('invoices.status.cancelled'), color: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300' }\n                };\n                const invoiceStatus = statusConfig[invoice.status];\n\n                // Action-Buttons\n                const actions = (\n                  <div className=\"flex items-center justify-end space-x-2\">\n                    <button\n                      onClick={() => openEditSidepane(invoice)}\n                      className=\"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                      title=\"Bearbeiten\"\n                    >\n                      <PencilIcon className=\"h-5 w-5\" />\n                    </button>\n                    {canDownloadInvoices && (\n                      <button\n                        onClick={() => handleDownloadPdf(invoice.id, invoice.invoiceNumber)}\n                        className=\"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                        title=\"PDF herunterladen\"\n                      >\n                        <DocumentArrowDownIcon className=\"h-5 w-5\" />\n                      </button>\n                    )}\n                    {canEditInvoices && invoice.status !== 'PAID' && invoice.status !== 'CANCELLED' && (\n                      <button\n                        onClick={() => handleMarkAsPaid(invoice.id)}\n                        className=\"text-yellow-600 hover:text-yellow-800 dark:text-yellow-400 dark:hover:text-yellow-300\"\n                        title=\"Als bezahlt markieren\"\n                      >\n                        <CurrencyDollarIcon className=\"h-5 w-5\" />\n                      </button>\n                    )}\n                  </div>\n                );\n\n                // Expandable Content fr Details\n                const expandableContent = (\n                  <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                    <h4 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\n                      Rechnungsdetails & Positionen\n                    </h4>\n                    \n                    {/* Rechnungsinformationen */}\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                          Rechnungsnummer\n                        </label>\n                        <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                          {invoice.invoiceNumber}\n                        </div>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                          Berater\n                        </label>\n                        <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                          {invoice.user ? `${invoice.user.firstName} ${invoice.user.lastName}` : 'Unbekannt'}\n                        </div>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                          Zahlungsbedingungen\n                        </label>\n                        <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                          {invoice.paymentTerms}\n                        </div>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                          Untertotal\n                        </label>\n                        <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                          {invoice.currency} {Number(invoice.subtotal).toFixed(2)}\n                        </div>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                          MwSt.\n                        </label>\n                        <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                          {invoice.vatAmount ? `${invoice.currency} ${Number(invoice.vatAmount).toFixed(2)} (${invoice.vatRate}%)` : 'Keine MwSt.'}\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Notizen */}\n                    {invoice.notes && (\n                      <div className=\"mb-6\">\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                          Notizen\n                        </label>\n                        <div className=\"text-sm text-gray-900 dark:text-gray-200 bg-white dark:bg-gray-800 p-3 rounded border\">\n                          {invoice.notes}\n                        </div>\n                      </div>\n                    )}\n\n                    {/* Rechnungspositionen */}\n                    <div>\n                      <div className=\"flex items-center justify-between mb-4\">\n                        <h5 className=\"text-md font-medium text-gray-900 dark:text-white\">\n                          Rechnungspositionen ({invoice.items?.length || 0})\n                        </h5>\n                        <button\n                          onClick={() => openEditSidepane(invoice)}\n                          className=\"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"\n                        >\n                          <PencilIcon className=\"h-4 w-4 mr-2\" />\n                          Positionen bearbeiten\n                        </button>\n                      </div>\n                      \n                      {invoice.items && invoice.items.length > 0 ? (\n                        <div className=\"overflow-x-auto\">\n                          <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n                            <thead className=\"bg-gray-100 dark:bg-gray-700\">\n                              <tr>\n                                <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                  Beschreibung\n                                </th>\n                                <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                  Menge/Stunden\n                                </th>\n                                <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                  Stundensatz\n                                </th>\n                                <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                  Betrag\n                                </th>\n                              </tr>\n                            </thead>\n                            <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                              {invoice.items.map((item) => (\n                                <tr key={item.id}>\n                                  <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-gray-200\">\n                                    {item.description}\n                                  </td>\n                                  <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-gray-200\">\n                                    {Number(item.quantity).toFixed(2)}\n                                  </td>\n                                  <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-gray-200\">\n                                    {invoice.currency} {Number(item.unitPrice).toFixed(2)}\n                                  </td>\n                                  <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-gray-200\">\n                                    {invoice.currency} {Number(item.amount).toFixed(2)}\n                                  </td>\n                                </tr>\n                              ))}\n                            </tbody>\n                          </table>\n                        </div>\n                      ) : (\n                        <div className=\"text-center text-gray-500 dark:text-gray-400 py-4\">\n                          Keine Rechnungspositionen vorhanden\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                );\n\n                return (\n                  <DataCard\n                    key={invoice.id}\n                    title={invoice.invoiceNumber}\n                    status={{\n                      label: invoiceStatus.label,\n                      color: invoiceStatus.color\n                    }}\n                    metadata={metadata}\n                    actions={actions}\n                    expandable={{\n                      isExpanded: isExpanded,\n                      content: expandableContent,\n                      onToggle: () => toggleExpanded(invoice.id)\n                    }}\n                  />\n                );\n              })}\n            </CardGrid>\n          )}\n        </div>\n      )}\n\n      {/* Filter Modal */}\n      {isFilterModalOpen && (\n        <FilterPane\n          columns={[\n            { id: 'client', label: t('invoices.columns.client') },\n            { id: 'status', label: t('invoices.columns.status') },\n            { id: 'total', label: `${t('invoices.columns.total')} (CHF)` }\n          ]}\n          onApply={applyFilterConditions}\n          onReset={resetFilterConditions}\n          savedConditions={filterConditions}\n          savedOperators={filterLogicalOperators}\n          tableId={INVOICES_TABLE_ID}\n        />\n      )}\n\n      {/* Column Config Modal */}\n      {isColumnConfigOpen && (\n        <TableColumnConfig\n          isOpen={isColumnConfigOpen}\n          onClose={() => setIsColumnConfigOpen(false)}\n          columns={availableColumns}\n          columnOrder={settings.columnOrder}\n          hiddenColumns={settings.hiddenColumns}\n          onToggleVisibility={(columnId) => toggleColumnVisibility(columnId)}\n          onReorderColumns={(newOrder) => updateColumnOrder(newOrder)}\n        />\n      )}\n\n      {/* Detail Modal */}\n      {isDetailModalOpen && selectedInvoiceId && (\n        <InvoiceDetailModal\n          isOpen={isDetailModalOpen}\n          onClose={() => {\n            setIsDetailModalOpen(false);\n            setSelectedInvoiceId(null);\n          }}\n          invoiceId={selectedInvoiceId}\n          onInvoiceUpdated={loadInvoices}\n        />\n      )}\n\n      {/* Edit Sidepane (nach Tasks & Requests Standard) */}\n      {isEditSidepaneOpen && editingInvoice && (\n        <div className=\"fixed inset-0 overflow-hidden z-50\" aria-labelledby=\"slide-over-title\" role=\"dialog\" aria-modal=\"true\">\n          <div className=\"absolute inset-0 overflow-hidden\">\n            {/* Backdrop - nur bei <= 1070px */}\n            {!isLargeScreen && (\n              <div className=\"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity sidepane-overlay sidepane-backdrop\" onClick={closeEditSidepane}></div>\n            )}\n            \n            {/* Panel - beginnt unter der Topbar */}\n            <div className=\"fixed top-16 bottom-0 right-0 pl-10 max-w-full flex sidepane-panel sidepane-panel-container\" style={{\n              transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)'\n            }}>\n              <div className=\"w-screen max-w-2xl\">\n                <div className=\"h-full flex flex-col bg-white dark:bg-gray-800 shadow-xl overflow-y-scroll\">\n                  {/* Header */}\n                  <div className=\"px-4 py-6 bg-gray-50 dark:bg-gray-700 sm:px-6\">\n                    <div className=\"flex items-center justify-between\">\n                      <h2 className=\"text-lg font-medium text-gray-900 dark:text-white\" id=\"slide-over-title\">\n                        Rechnung bearbeiten: {editingInvoice.invoiceNumber}\n                      </h2>\n                      <div className=\"ml-3 h-7 flex items-center\">\n                        <button\n                          type=\"button\"\n                          className=\"bg-gray-50 dark:bg-gray-700 rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                          onClick={closeEditSidepane}\n                        >\n                          <span className=\"sr-only\">Panel schlieen</span>\n                          <XMarkIcon className=\"h-6 w-6\" aria-hidden=\"true\" />\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Content */}\n                  <div className=\"flex-1 px-4 py-6 sm:px-6\">\n                    <div className=\"space-y-6\">\n                      \n                      {/* Grundinformationen */}\n                      <div>\n                        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\n                          Grundinformationen\n                        </h3>\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                              Rechnungsnummer\n                            </label>\n                            <input\n                              type=\"text\"\n                              value={editingInvoice.invoiceNumber}\n                              disabled\n                              className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                            />\n                          </div>\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                              Status\n                            </label>\n                            <select\n                              value={editingInvoice.status}\n                              className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                            >\n                              <option value=\"DRAFT\">Entwurf</option>\n                              <option value=\"SENT\">Gesendet</option>\n                              <option value=\"PAID\">Bezahlt</option>\n                              <option value=\"OVERDUE\">berfllig</option>\n                              <option value=\"CANCELLED\">Storniert</option>\n                            </select>\n                          </div>\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                              Rechnungsdatum\n                            </label>\n                            <input\n                              type=\"date\"\n                              value={editingInvoice.issueDate.split('T')[0]}\n                              className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                            />\n                          </div>\n                          <div>\n                            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                              Flligkeitsdatum\n                            </label>\n                            <input\n                              type=\"date\"\n                              value={editingInvoice.dueDate.split('T')[0]}\n                              className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                            />\n                          </div>\n                        </div>\n                      </div>\n\n                      {/* Notizen */}\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                          Notizen\n                        </label>\n                        <textarea\n                          rows={3}\n                          value={editingInvoice.notes || ''}\n                          className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                          placeholder=\"Zustzliche Notizen zur Rechnung...\"\n                        />\n                      </div>\n\n                      {/* Rechnungspositionen */}\n                      <div>\n                        <div className=\"flex items-center justify-between mb-4\">\n                          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                            Rechnungspositionen\n                          </h3>\n                          <button\n                            type=\"button\"\n                            className=\"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                          >\n                            <PlusIcon className=\"h-4 w-4 mr-2\" />\n                            Position hinzufgen\n                          </button>\n                        </div>\n\n                        <div className=\"space-y-3\">\n                          {editingInvoice.items?.map((item, index) => (\n                            <div key={item.id || index} className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n                              <div className=\"grid grid-cols-1 sm:grid-cols-4 gap-4\">\n                                <div className=\"sm:col-span-2\">\n                                  <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300\">\n                                    Beschreibung\n                                  </label>\n                                  <input\n                                    type=\"text\"\n                                    value={item.description}\n                                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                                  />\n                                </div>\n                                <div>\n                                  <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300\">\n                                    Stunden\n                                  </label>\n                                  <input\n                                    type=\"number\"\n                                    step=\"0.01\"\n                                    value={item.quantity}\n                                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                                  />\n                                </div>\n                                <div>\n                                  <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300\">\n                                    Stundensatz\n                                  </label>\n                                  <div className=\"flex items-center space-x-2\">\n                                    <input\n                                      type=\"number\"\n                                      step=\"0.01\"\n                                      value={item.unitPrice}\n                                      className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                                    />\n                                    <button\n                                      type=\"button\"\n                                      className=\"mt-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300\"\n                                      title=\"Position lschen\"\n                                    >\n                                      <TrashIcon className=\"h-4 w-4\" />\n                                    </button>\n                                  </div>\n                                </div>\n                              </div>\n                              <div className=\"mt-2 text-right\">\n                                <span className=\"text-sm text-gray-500 dark:text-gray-400\">\n                                  Betrag: {editingInvoice.currency} {Number(item.amount).toFixed(2)}\n                                </span>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n\n                      {/* Totals */}\n                      <div className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n                        <div className=\"space-y-2\">\n                          <div className=\"flex justify-between\">\n                            <span className=\"text-sm text-gray-600 dark:text-gray-400\">Untertotal:</span>\n                            <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                              {editingInvoice.currency} {Number(editingInvoice.subtotal).toFixed(2)}\n                            </span>\n                          </div>\n                          {editingInvoice.vatAmount && (\n                            <div className=\"flex justify-between\">\n                              <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n                                MwSt. ({editingInvoice.vatRate}%):\n                              </span>\n                              <span className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                                {editingInvoice.currency} {Number(editingInvoice.vatAmount).toFixed(2)}\n                              </span>\n                            </div>\n                          )}\n                          <div className=\"flex justify-between pt-2 border-t border-gray-200 dark:border-gray-600\">\n                            <span className=\"text-base font-medium text-gray-900 dark:text-white\">Total:</span>\n                            <span className=\"text-base font-bold text-gray-900 dark:text-white\">\n                              {editingInvoice.currency} {Number(editingInvoice.total).toFixed(2)}\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Footer */}\n                  <div className=\"flex-shrink-0 px-4 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600\">\n                    <div className=\"flex justify-end space-x-3\">\n                      <button\n                        type=\"button\"\n                        className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                        onClick={closeEditSidepane}\n                        title=\"Abbrechen\"\n                      >\n                        <XMarkIcon className=\"h-5 w-5\" />\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800\"\n                        title=\"Speichern\"\n                      >\n                        <CheckIcon className=\"h-5 w-5\" />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default InvoiceManagementTab; ","import React, { useState, useEffect, useRef } from 'react';\nimport { format } from 'date-fns';\nimport { de } from 'date-fns/locale';\nimport { \n  DocumentArrowDownIcon, \n  TrashIcon, \n  PlusIcon,\n  EyeIcon,\n  ClockIcon,\n  CheckCircleIcon,\n  ExclamationTriangleIcon,\n  ChevronDownIcon,\n  PencilIcon,\n  CheckIcon,\n  XMarkIcon,\n  CalendarIcon,\n  Squares2X2Icon,\n  TableCellsIcon,\n  BuildingOfficeIcon,\n  UserIcon\n} from '@heroicons/react/24/outline';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { toast } from 'react-toastify';\nimport { MonthlyConsultationReport, UnbilledConsultationsCheck } from '../types/monthlyConsultationReport.ts';\nimport { calculateDuration } from '../utils/dateUtils.ts';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\nimport { useTableSettings } from '../hooks/useTableSettings.ts';\nimport DataCard, { MetadataItem } from './shared/DataCard.tsx';\nimport CardGrid from './shared/CardGrid.tsx';\n\ninterface MonthlyReportsTabProps {\n  selectedReportId?: number | null;\n}\n\n// Definition der verfgbaren Spalten\nconst availableColumns = [\n  { id: 'expand', label: '', shortLabel: '' }, // Expand-Button Spalte\n  { id: 'reportNumber', label: 'Berichtsnummer', shortLabel: 'Nr.' },\n  { id: 'period', label: 'Zeitraum', shortLabel: 'Zeitraum' },\n  { id: 'recipient', label: 'Empfnger', shortLabel: 'Empfnger' },\n  { id: 'totalHours', label: 'Stunden', shortLabel: 'Stunden' },\n  { id: 'status', label: 'Status', shortLabel: 'Status' },\n  { id: 'actions', label: 'Aktionen', shortLabel: 'Akt.' }\n];\n\n// Standardreihenfolge der Spalten\nconst defaultColumnOrder = availableColumns.map(col => col.id);\nconst MONTHLY_REPORTS_TABLE_ID = 'monthly-reports-table';\n\n// Card-Einstellungen Standardwerte\nconst defaultCardMetadata = ['reportNumber', 'period', 'recipient', 'totalHours', 'status'];\nconst defaultCardColumnOrder = ['reportNumber', 'period', 'recipient', 'totalHours', 'status'];\nconst defaultCardSortDirections: Record<string, 'asc' | 'desc'> = {\n  reportNumber: 'asc',\n  period: 'desc',\n  recipient: 'asc',\n  totalHours: 'desc',\n  status: 'asc'\n};\n\n// Mapping zwischen Tabellen-Spalten-IDs und Card-Metadaten-IDs\nconst tableToCardMapping: Record<string, string[]> = {\n  'expand': [], // Keine Card-Entsprechung\n  'reportNumber': ['reportNumber'],\n  'period': ['period'],\n  'recipient': ['recipient'],\n  'totalHours': ['totalHours'],\n  'status': ['status'],\n  'actions': [] // Keine Card-Entsprechung\n};\n\n// Reverse Mapping: Card-Metadaten -> Tabellen-Spalten\nconst cardToTableMapping: Record<string, string> = {\n  'reportNumber': 'reportNumber',\n  'period': 'period',\n  'recipient': 'recipient',\n  'totalHours': 'totalHours',\n  'status': 'status'\n};\n\n// Helfer-Funktion: Tabellen-Spalte ausgeblendet -> Card-Metadaten ausblenden\nconst getHiddenCardMetadata = (hiddenTableColumns: string[]): Set<string> => {\n  const hiddenCardMetadata = new Set<string>();\n  hiddenTableColumns.forEach(tableCol => {\n    const cardMetadata = tableToCardMapping[tableCol] || [];\n    cardMetadata.forEach(cardMeta => hiddenCardMetadata.add(cardMeta));\n  });\n  return hiddenCardMetadata;\n};\n\n// Helfer-Funktion: Card-Metadaten zu Tabellen-Spalten konvertieren\nconst getCardMetadataFromColumnOrder = (columnOrder: string[]): string[] => {\n  const cardMetadata: string[] = [];\n  columnOrder.forEach(tableCol => {\n    const cardMeta = tableToCardMapping[tableCol];\n    if (cardMeta && cardMeta.length > 0) {\n      cardMetadata.push(...cardMeta);\n    }\n  });\n  return cardMetadata;\n};\n\nconst MonthlyReportsTab: React.FC<MonthlyReportsTabProps> = ({ selectedReportId }) => {\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [reports, setReports] = useState<MonthlyConsultationReport[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [generating, setGenerating] = useState(false);\n  const [unbilledCheck, setUnbilledCheck] = useState<UnbilledConsultationsCheck | null>(null);\n  const selectedReportRef = useRef<HTMLTableRowElement>(null);\n  \n  // Expand/Collapse States (nach Tasks & Requests Standard)\n  const [expandedRows, setExpandedRows] = useState<Set<number>>(new Set());\n\n  // Table Settings\n  const {\n    settings,\n    isLoading: isLoadingSettings,\n    updateColumnOrder,\n    updateHiddenColumns,\n    toggleColumnVisibility,\n    isColumnVisible,\n    updateViewMode\n  } = useTableSettings(MONTHLY_REPORTS_TABLE_ID, {\n    defaultColumnOrder,\n    defaultHiddenColumns: [],\n    defaultViewMode: 'cards'\n  });\n\n  // View-Mode aus Settings laden\n  const viewMode = settings.viewMode || 'cards';\n  \n  // Lokale Sortierrichtungen fr Cards (nicht persistiert)\n  const [cardSortDirections, setCardSortDirections] = useState<Record<string, 'asc' | 'desc'>>(() => {\n    return defaultCardSortDirections;\n  });\n\n  // Abgeleitete Werte fr Card-Ansicht aus Tabellen-Settings\n  const cardMetadataOrder = React.useMemo(() => {\n    return getCardMetadataFromColumnOrder(settings.columnOrder || defaultColumnOrder);\n  }, [settings.columnOrder]);\n\n  // Versteckte Card-Metadaten aus hiddenColumns ableiten\n  const hiddenCardMetadata = React.useMemo(() => {\n    return getHiddenCardMetadata(settings.hiddenColumns || []);\n  }, [settings.hiddenColumns]);\n\n  // Sichtbare Card-Metadaten (alle Card-Metadaten minus versteckte)\n  const visibleCardMetadata = React.useMemo(() => {\n    return new Set(cardMetadataOrder.filter(meta => !hiddenCardMetadata.has(meta)));\n  }, [cardMetadataOrder, hiddenCardMetadata]);\n\n  // CSS-Klasse fr Container-Box setzen (fr CSS-basierte Schattierungs-Entfernung)\n  useEffect(() => {\n    const wrapper = document.querySelector('.dashboard-monthly-reports-wrapper');\n    if (wrapper) {\n      if (viewMode === 'cards') {\n        wrapper.classList.add('cards-mode');\n      } else {\n        wrapper.classList.remove('cards-mode');\n      }\n    }\n  }, [viewMode]);\n\n  // Sortierte Reports fr Cards-Mode\n  const sortedReports = React.useMemo(() => {\n    if (viewMode === 'cards') {\n      const sorted = [...reports];\n      const sortableColumns = cardMetadataOrder.filter(colId => visibleCardMetadata.has(colId));\n      \n      sorted.sort((a, b) => {\n        for (const columnId of sortableColumns) {\n          const direction = cardSortDirections[columnId] || 'asc';\n          let valueA: any, valueB: any;\n          \n          switch (columnId) {\n            case 'reportNumber':\n              valueA = a.reportNumber.toLowerCase();\n              valueB = b.reportNumber.toLowerCase();\n              break;\n            case 'period':\n              valueA = new Date(a.periodStart).getTime();\n              valueB = new Date(b.periodStart).getTime();\n              break;\n            case 'recipient':\n              valueA = a.recipient.toLowerCase();\n              valueB = b.recipient.toLowerCase();\n              break;\n            case 'totalHours':\n              valueA = Number(a.totalHours);\n              valueB = Number(b.totalHours);\n              break;\n            case 'status':\n              valueA = a.status.toLowerCase();\n              valueB = b.status.toLowerCase();\n              break;\n            default:\n              continue; // berspringe unbekannte Spalten\n          }\n          \n          // Vergleich basierend auf Typ\n          let comparison = 0;\n          if (typeof valueA === 'number' && typeof valueB === 'number') {\n            comparison = valueA - valueB;\n          } else {\n            comparison = String(valueA).localeCompare(String(valueB));\n          }\n          \n          // Sortierrichtung anwenden\n          if (direction === 'desc') {\n            comparison = -comparison;\n          }\n          \n          // Wenn unterschiedlich, gebe Vergleich zurck\n          if (comparison !== 0) {\n            return comparison;\n          }\n        }\n        return 0; // Alle Spalten identisch\n      });\n      \n      return sorted;\n    }\n    return reports;\n  }, [reports, viewMode, cardMetadataOrder, visibleCardMetadata, cardSortDirections]);\n  \n  // Sidepane States - Ersetzt durch Client-Beratungen-Sidepane\n  const [isClientConsultationsSidepaneOpen, setIsClientConsultationsSidepaneOpen] = useState(false);\n  const [editingClientId, setEditingClientId] = useState<number | null>(null);\n  const [editingClientName, setEditingClientName] = useState<string>('');\n  const [clientConsultations, setClientConsultations] = useState<any[]>([]);\n  const [loadingConsultations, setLoadingConsultations] = useState(false);\n\n  useEffect(() => {\n    loadReports();\n    checkUnbilledConsultations();\n  }, []);\n\n  // berwache Bildschirmgre\n  useEffect(() => {\n    const handleResize = () => {\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isClientConsultationsSidepaneOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isClientConsultationsSidepaneOpen, openSidepane, closeSidepane]);\n\n  // Auto-scroll to selected report\n  useEffect(() => {\n    if (selectedReportId && reports.length > 0 && selectedReportRef.current) {\n      selectedReportRef.current.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      \n      // Highlight the row temporarily\n      selectedReportRef.current.style.backgroundColor = '#dbeafe';\n      setTimeout(() => {\n        if (selectedReportRef.current) {\n          selectedReportRef.current.style.backgroundColor = '';\n        }\n      }, 2000);\n    }\n  }, [selectedReportId, reports]);\n\n  const loadReports = async () => {\n    try {\n      setLoading(true);\n      const response = await axiosInstance.get(API_ENDPOINTS.MONTHLY_CONSULTATION_REPORTS.BASE);\n      setReports(response.data);\n    } catch (error: any) {\n      console.error('Fehler beim Laden der Monatsberichte:', error);\n      toast.error('Fehler beim Laden der Monatsberichte');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const checkUnbilledConsultations = async () => {\n    try {\n      const response = await axiosInstance.get(API_ENDPOINTS.MONTHLY_CONSULTATION_REPORTS.CHECK_UNBILLED);\n      setUnbilledCheck(response.data);\n    } catch (error) {\n      console.error('Fehler beim Prfen der nicht-abgerechneten Beratungen:', error);\n    }\n  };\n\n  const handleGenerateReport = async () => {\n    console.log('DEBUG: handleGenerateReport called');\n    try {\n      const response = await axiosInstance.post(API_ENDPOINTS.MONTHLY_CONSULTATION_REPORTS.GENERATE_AUTOMATIC);\n      console.log('DEBUG: API response:', response);\n      await loadReports();\n      toast.success('Monatsbericht erfolgreich erstellt');\n    } catch (error: any) {\n      console.error('DEBUG: Error generating report:', error);\n      console.log('DEBUG: Error details:', {\n        status: error.response?.status,\n        data: error.response?.data,\n        message: error.message\n      });\n      toast.error(error.response?.data?.message || 'Fehler beim Erstellen des Monatsberichts');\n    }\n  };\n\n  const downloadPDF = async (report: MonthlyConsultationReport) => {\n    try {\n      const response = await axiosInstance.get(\n        API_ENDPOINTS.MONTHLY_CONSULTATION_REPORTS.PDF(report.id),\n        { responseType: 'blob' }\n      );\n      \n      const blob = new Blob([response.data], { type: 'application/pdf' });\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `${report.reportNumber}.pdf`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    } catch (error) {\n      toast.error('Fehler beim Download des PDFs');\n    }\n  };\n\n  const deleteReport = async (reportId: number) => {\n    if (!window.confirm('Mchten Sie diesen Monatsbericht wirklich lschen?')) {\n      return;\n    }\n\n    try {\n      await axiosInstance.delete(API_ENDPOINTS.MONTHLY_CONSULTATION_REPORTS.BY_ID(reportId));\n      setReports(prev => prev.filter(r => r.id !== reportId));\n      toast.success('Monatsbericht gelscht');\n      checkUnbilledConsultations();\n    } catch (error: any) {\n      toast.error(error.response?.data?.message || 'Fehler beim Lschen des Monatsberichts');\n    }\n  };\n\n  // Expand/Collapse Handler (nach Tasks & Requests Standard)\n  const toggleExpanded = (reportId: number) => {\n    setExpandedRows(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(reportId)) {\n        newSet.delete(reportId);\n      } else {\n        newSet.add(reportId);\n      }\n      return newSet;\n    });\n  };\n\n  // Ersetzt openEditSidepane - wird nicht mehr bentigt\n  const openClientConsultationsSidepane = async (clientId: number, clientName: string, reportId: number) => {\n    setEditingClientId(clientId);\n    setEditingClientName(clientName);\n    setIsClientConsultationsSidepaneOpen(true);\n    \n    // Lade die Beratungen fr diesen Client im Berichtszeitraum\n    await loadClientConsultations(clientId, reportId);\n  };\n\n  const closeClientConsultationsSidepane = () => {\n    setIsClientConsultationsSidepaneOpen(false);\n    setEditingClientId(null);\n    setEditingClientName('');\n    setClientConsultations([]);\n  };\n\n  const loadClientConsultations = async (clientId: number, reportId: number) => {\n    try {\n      setLoadingConsultations(true);\n      // Hole die Report-Details um den Zeitraum zu bekommen\n      const report = reports.find(r => r.id === reportId);\n      if (!report) return;\n\n      const response = await axiosInstance.get(`${API_ENDPOINTS.CONSULTATIONS.BASE}?clientId=${clientId}&from=${report.periodStart}&to=${report.periodEnd}`);\n      setClientConsultations(response.data);\n    } catch (error) {\n      console.error('Fehler beim Laden der Client-Beratungen:', error);\n      toast.error('Fehler beim Laden der Beratungen');\n    } finally {\n      setLoadingConsultations(false);\n    }\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'GENERATED':\n        return <ClockIcon className=\"h-5 w-5 text-blue-500\" />;\n      case 'SENT':\n        return <CheckCircleIcon className=\"h-5 w-5 text-green-500\" />;\n      case 'ARCHIVED':\n        return <EyeIcon className=\"h-5 w-5 text-gray-500\" />;\n      default:\n        return <ClockIcon className=\"h-5 w-5 text-gray-500\" />;\n    }\n  };\n\n  const getStatusText = (status: string) => {\n    switch (status) {\n      case 'GENERATED':\n        return 'Erstellt';\n      case 'SENT':\n        return 'Versendet';\n      case 'ARCHIVED':\n        return 'Archiviert';\n      default:\n        return status;\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"p-6\">\n        <div className=\"animate-pulse\">\n          <div className=\"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-4\"></div>\n          <div className=\"space-y-3\">\n            {[...Array(3)].map((_, i) => (\n              <div key={i} className=\"h-12 bg-gray-200 dark:bg-gray-700 rounded\"></div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n          Monatsabrechnungen\n        </h2>\n      </div>\n\n      {/* Unbilled Consultations Warning */}\n      {unbilledCheck?.hasUnbilledConsultations && (\n        <div className=\"mb-6 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4\">\n          <div className=\"flex items-start\">\n            <ExclamationTriangleIcon className=\"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5 mr-3\" />\n            <div className=\"flex-1\">\n              <h3 className=\"text-sm font-medium text-yellow-800 dark:text-yellow-200\">\n                Nicht-abgerechnete Beratungen gefunden\n              </h3>\n              <p className=\"text-sm text-yellow-700 dark:text-yellow-300 mt-1\">\n                Sie haben {unbilledCheck.count} nicht-abgerechnete Beratungen. \n                Erstellen Sie einen Monatsbericht fr diese Zeitrume.\n              </p>\n              <button\n                onClick={handleGenerateReport}\n                disabled={generating}\n                className=\"mt-3 inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-yellow-800 dark:text-yellow-200 bg-yellow-100 dark:bg-yellow-800 hover:bg-yellow-200 dark:hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50\"\n              >\n                <PlusIcon className=\"h-4 w-4 mr-2\" />\n                {generating ? 'Erstelle...' : 'Monatsbericht erstellen'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Reports List */}\n      {viewMode === 'table' ? (\n        /* Tabellen-Ansicht */\n        <div className=\"dashboard-monthly-reports-wrapper bg-white dark:bg-gray-800 shadow rounded-lg overflow-hidden\">\n        <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n          <thead className=\"bg-gray-50 dark:bg-gray-700\">\n            <tr>\n              <th className=\"px-6 py-3 text-left w-12\">\n                {/* Expand-Button Spalte */}\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                Berichtsnummer\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                Zeitraum\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                Empfnger\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                Stunden\n              </th>\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                Status\n              </th>\n              <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                Aktionen\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n            {reports.map((report) => (\n              <React.Fragment key={report.id}>\n                <tr \n                  className=\"hover:bg-gray-50 dark:hover:bg-gray-700\" \n                  ref={selectedReportId === report.id ? selectedReportRef : null}\n                >\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <button\n                      onClick={() => toggleExpanded(report.id)}\n                      className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\n                      title={expandedRows.has(report.id) ? 'Einklappen' : 'Ausklappen'}\n                    >\n                      <ChevronDownIcon \n                        className={`h-4 w-4 transition-transform ${\n                          expandedRows.has(report.id) ? 'rotate-180' : ''\n                        }`} \n                      />\n                    </button>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                      {report.reportNumber}\n                    </div>\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                      {format(new Date(report.generatedAt), 'dd.MM.yyyy HH:mm', { locale: de })}\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                    {format(new Date(report.periodStart), 'dd.MM.yyyy', { locale: de })} - {' '}\n                    {format(new Date(report.periodEnd), 'dd.MM.yyyy', { locale: de })}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                    {report.recipient}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                    {Number(report.totalHours).toFixed(2)} h\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"flex items-center\">\n                      {getStatusIcon(report.status)}\n                      <span className=\"ml-2 text-sm text-gray-900 dark:text-white\">\n                        {getStatusText(report.status)}\n                      </span>\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\n                    <div className=\"flex items-center justify-end space-x-2\">\n                      <button\n                        onClick={() => downloadPDF(report)}\n                        className=\"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                        title=\"PDF herunterladen\"\n                      >\n                        <DocumentArrowDownIcon className=\"h-5 w-5\" />\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n\n                {/* Erweiterte Details-Zeile */}\n                {expandedRows.has(report.id) && (\n                  <tr className=\"bg-gray-50 dark:bg-gray-900\">\n                    <td colSpan={7} className=\"px-6 py-4\">\n                      <div className=\"space-y-4\">\n                        {/* Abrechnungspositionen - Ohne Detail-Informationen darber */}\n                        <div>\n                          <h5 className=\"text-md font-medium text-gray-900 dark:text-white mb-4\">\n                            Abrechnungspositionen ({report.items?.length || 0})\n                          </h5>\n                          \n                          {report.items && report.items.length > 0 ? (\n                            <div className=\"overflow-x-auto\">\n                              <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n                                <thead className=\"bg-gray-100 dark:bg-gray-700\">\n                                  <tr>\n                                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                      Client\n                                    </th>\n                                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                      Anzahl Beratungen\n                                    </th>\n                                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                      Stunden\n                                    </th>\n                                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                      Aktionen\n                                    </th>\n                                  </tr>\n                                </thead>\n                                <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                                  {report.items.map((item) => (\n                                    <tr key={item.id}>\n                                      <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-gray-200\">\n                                        {item.clientName}\n                                      </td>\n                                      <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-gray-200\">\n                                        {item.consultationCount}\n                                      </td>\n                                      <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-gray-200 font-semibold\">\n                                        {Number(item.totalHours).toFixed(2)} h\n                                      </td>\n                                      <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-gray-200\">\n                                        <button\n                                          onClick={() => openClientConsultationsSidepane(item.clientId, item.clientName, report.id)}\n                                          className=\"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                                          title=\"Beratungen bearbeiten\"\n                                        >\n                                          <PencilIcon className=\"h-4 w-4\" />\n                                        </button>\n                                      </td>\n                                    </tr>\n                                  ))}\n                                </tbody>\n                              </table>\n                            </div>\n                          ) : (\n                            <div className=\"text-center text-gray-500 dark:text-gray-400 py-4\">\n                              Keine Abrechnungspositionen vorhanden\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </td>\n                  </tr>\n                )}\n              </React.Fragment>\n            ))}\n          </tbody>\n        </table>\n      </div>\n      ) : (\n        /* Card-Ansicht */\n        <div className=\"dashboard-monthly-reports-wrapper\">\n          {sortedReports.length === 0 ? (\n            <div className=\"text-center py-8 text-sm text-gray-500 dark:text-gray-400\">\n              Keine Monatsberichte gefunden\n            </div>\n          ) : (\n            <CardGrid gap=\"md\">\n              {sortedReports.map((report) => {\n                const isExpanded = expandedRows.has(report.id);\n\n                // Metadaten fr Card aufbauen\n                const metadata: MetadataItem[] = [];\n\n                if (visibleCardMetadata.has('reportNumber')) {\n                  metadata.push({\n                    label: 'Berichtsnummer',\n                    value: report.reportNumber,\n                    icon: <DocumentArrowDownIcon className=\"h-4 w-4\" />\n                  });\n                }\n\n                if (visibleCardMetadata.has('period')) {\n                  metadata.push({\n                    label: 'Zeitraum',\n                    value: `${format(new Date(report.periodStart), 'dd.MM.yyyy', { locale: de })} - ${format(new Date(report.periodEnd), 'dd.MM.yyyy', { locale: de })}`,\n                    icon: <CalendarIcon className=\"h-4 w-4\" />\n                  });\n                }\n\n                if (visibleCardMetadata.has('recipient')) {\n                  metadata.push({\n                    label: 'Empfnger',\n                    value: report.recipient,\n                    icon: <BuildingOfficeIcon className=\"h-4 w-4\" />\n                  });\n                }\n\n                if (visibleCardMetadata.has('totalHours')) {\n                  metadata.push({\n                    label: 'Stunden',\n                    value: `${Number(report.totalHours).toFixed(2)} h`,\n                    icon: <ClockIcon className=\"h-4 w-4\" />\n                  });\n                }\n\n                // Status-Konfiguration\n                const statusConfig = {\n                  GENERATED: { label: 'Erstellt', color: 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300' },\n                  SENT: { label: 'Versendet', color: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300' },\n                  ARCHIVED: { label: 'Archiviert', color: 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300' }\n                };\n                const reportStatus = statusConfig[report.status];\n\n                // Action-Buttons\n                const actions = (\n                  <div className=\"flex items-center justify-end space-x-2\">\n                    <button\n                      onClick={() => downloadPDF(report)}\n                      className=\"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                      title=\"PDF herunterladen\"\n                    >\n                      <DocumentArrowDownIcon className=\"h-5 w-5\" />\n                    </button>\n                  </div>\n                );\n\n                // Expandable Content fr Details\n                const expandableContent = (\n                  <div className=\"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                    <h5 className=\"text-md font-medium text-gray-900 dark:text-white mb-4\">\n                      Abrechnungspositionen ({report.items?.length || 0})\n                    </h5>\n                    \n                    {report.items && report.items.length > 0 ? (\n                      <div className=\"overflow-x-auto\">\n                        <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n                          <thead className=\"bg-gray-100 dark:bg-gray-700\">\n                            <tr>\n                              <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                Client\n                              </th>\n                              <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                Anzahl Beratungen\n                              </th>\n                              <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                Stunden\n                              </th>\n                              <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                Aktionen\n                              </th>\n                            </tr>\n                          </thead>\n                          <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                            {report.items.map((item) => (\n                              <tr key={item.id}>\n                                <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-gray-200\">\n                                  {item.clientName}\n                                </td>\n                                <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-gray-200\">\n                                  {item.consultationCount}\n                                </td>\n                                <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-gray-200 font-semibold\">\n                                  {Number(item.totalHours).toFixed(2)} h\n                                </td>\n                                <td className=\"px-4 py-2 text-sm text-gray-900 dark:text-gray-200\">\n                                  <button\n                                    onClick={() => openClientConsultationsSidepane(item.clientId, item.clientName, report.id)}\n                                    className=\"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                                    title=\"Beratungen bearbeiten\"\n                                  >\n                                    <PencilIcon className=\"h-4 w-4\" />\n                                  </button>\n                                </td>\n                              </tr>\n                            ))}\n                          </tbody>\n                        </table>\n                      </div>\n                    ) : (\n                      <div className=\"text-center text-gray-500 dark:text-gray-400 py-4\">\n                        Keine Abrechnungspositionen vorhanden\n                      </div>\n                    )}\n                  </div>\n                );\n\n                return (\n                  <DataCard\n                    key={report.id}\n                    title={report.reportNumber}\n                    subtitle={format(new Date(report.generatedAt), 'dd.MM.yyyy HH:mm', { locale: de })}\n                    status={{\n                      label: reportStatus.label,\n                      color: reportStatus.color\n                    }}\n                    metadata={metadata}\n                    actions={actions}\n                    expandable={{\n                      isExpanded: isExpanded,\n                      content: expandableContent,\n                      onToggle: () => toggleExpanded(report.id)\n                    }}\n                  />\n                );\n              })}\n            </CardGrid>\n          )}\n        </div>\n      )}\n\n      {/* Client Consultations Sidepane (Ersetzt das alte Edit Sidepane) */}\n      {isClientConsultationsSidepaneOpen && editingClientId && (\n        <div className=\"fixed inset-0 overflow-hidden z-50\" aria-labelledby=\"slide-over-title\" role=\"dialog\" aria-modal=\"true\">\n          <div className=\"absolute inset-0 overflow-hidden\">\n            {/* Backdrop - nur bei <= 1070px */}\n            {!isLargeScreen && (\n              <div className=\"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity sidepane-overlay sidepane-backdrop\" onClick={closeClientConsultationsSidepane}></div>\n            )}\n            \n            {/* Panel - beginnt unter der Topbar */}\n            <div className=\"fixed top-16 bottom-0 right-0 pl-10 max-w-full flex sidepane-panel sidepane-panel-container\" style={{\n              transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)'\n            }}>\n              <div className=\"w-screen max-w-3xl\">\n                <div className=\"h-full flex flex-col bg-white dark:bg-gray-800 shadow-xl overflow-y-scroll\">\n                  {/* Header */}\n                  <div className=\"px-4 py-6 bg-gray-50 dark:bg-gray-700 sm:px-6\">\n                    <div className=\"flex items-center justify-between\">\n                      <h2 className=\"text-lg font-medium text-gray-900 dark:text-white\" id=\"slide-over-title\">\n                        Beratungen bearbeiten: {editingClientName}\n                      </h2>\n                      <div className=\"ml-3 h-7 flex items-center\">\n                        <button\n                          type=\"button\"\n                          className=\"bg-gray-50 dark:bg-gray-700 rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                          onClick={closeClientConsultationsSidepane}\n                        >\n                          <span className=\"sr-only\">Panel schlieen</span>\n                          <XMarkIcon className=\"h-6 w-6\" aria-hidden=\"true\" />\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Content */}\n                  <div className=\"flex-1 px-4 py-6 sm:px-6\">\n                    <div className=\"space-y-6\">\n                      \n                      {/* Info */}\n                      <div className=\"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4\">\n                        <p className=\"text-sm text-blue-700 dark:text-blue-300\">\n                          Hier knnen Sie die einzelnen Beratungen fr <strong>{editingClientName}</strong> bearbeiten, lschen oder neue hinzufgen.\n                        </p>\n                      </div>\n\n                      {/* Action Buttons */}\n                      <div className=\"flex justify-between items-center\">\n                        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">\n                          Beratungen ({clientConsultations.length})\n                        </h3>\n                        <button\n                          type=\"button\"\n                          className=\"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                        >\n                          <PlusIcon className=\"h-4 w-4 mr-2\" />\n                          Beratung hinzufgen\n                        </button>\n                      </div>\n\n                      {/* Consultations List */}\n                      {loadingConsultations ? (\n                        <div className=\"text-center py-4\">\n                          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n                          <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-2\">Lade Beratungen...</p>\n                        </div>\n                      ) : clientConsultations.length > 0 ? (\n                        <div className=\"space-y-3\">\n                          {clientConsultations.map((consultation) => (\n                            <div key={consultation.id} className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4\">\n                              <div className=\"flex items-center justify-between\">\n                                <div className=\"flex-1\">\n                                  <div className=\"flex items-center space-x-4\">\n                                    <div>\n                                      <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300\">\n                                        Startzeit\n                                      </label>\n                                      <input\n                                        type=\"datetime-local\"\n                                        value={consultation.startTime ? new Date(consultation.startTime).toISOString().slice(0, 16) : ''}\n                                        className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                                      />\n                                    </div>\n                                    <div>\n                                      <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300\">\n                                        Endzeit\n                                      </label>\n                                      <input\n                                        type=\"datetime-local\"\n                                        value={consultation.endTime ? new Date(consultation.endTime).toISOString().slice(0, 16) : ''}\n                                        className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                                      />\n                                    </div>\n                                    <div className=\"flex-1\">\n                                      <label className=\"block text-xs font-medium text-gray-700 dark:text-gray-300\">\n                                        Notizen\n                                      </label>\n                                      <input\n                                        type=\"text\"\n                                        value={consultation.notes || ''}\n                                        className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm\"\n                                        placeholder=\"Beratungsnotizen...\"\n                                      />\n                                    </div>\n                                  </div>\n                                  <div className=\"mt-2 text-xs text-gray-500 dark:text-gray-400\">\n                                    Dauer: {consultation.endTime ? calculateDuration(consultation.startTime, consultation.endTime) : 'Luft...'}\n                                  </div>\n                                </div>\n                                <div className=\"flex items-center space-x-2 ml-4\">\n                                  <button\n                                    type=\"button\"\n                                    className=\"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                                    title=\"Speichern\"\n                                  >\n                                    <CheckIcon className=\"h-4 w-4\" />\n                                  </button>\n                                  <button\n                                    type=\"button\"\n                                    className=\"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300\"\n                                    title=\"Lschen\"\n                                  >\n                                    <TrashIcon className=\"h-4 w-4\" />\n                                  </button>\n                                </div>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      ) : (\n                        <div className=\"text-center text-gray-500 dark:text-gray-400 py-8\">\n                          <ClockIcon className=\"h-12 w-12 mx-auto mb-4 text-gray-300 dark:text-gray-600\" />\n                          <p>Keine Beratungen fr diesen Client gefunden</p>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Footer */}\n                  <div className=\"flex-shrink-0 px-4 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600\">\n                    <div className=\"flex justify-end space-x-3\">\n                      <button\n                        type=\"button\"\n                        className=\"bg-white dark:bg-gray-600 py-2 px-4 border border-gray-300 dark:border-gray-500 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                        onClick={closeClientConsultationsSidepane}\n                      >\n                        Schlieen\n                      </button>\n                      <button\n                        type=\"button\"\n                        className=\"bg-blue-600 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                      >\n                        Alle nderungen speichern\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MonthlyReportsTab; ","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useLocation } from 'react-router-dom';\nimport PayrollComponent from '../components/PayrollComponent.tsx';\nimport InvoiceManagementTab from '../components/InvoiceManagementTab.tsx';\nimport MonthlyReportsTab from '../components/MonthlyReportsTab.tsx';\nimport { CalculatorIcon, DocumentTextIcon, ClipboardDocumentListIcon } from '@heroicons/react/24/outline';\n\ntype TabType = 'invoices' | 'monthly-reports' | 'payroll';\n\nconst Payroll: React.FC = () => {\n  const { t } = useTranslation();\n  const location = useLocation();\n  const [activeTab, setActiveTab] = useState<TabType>('invoices');\n  const [selectedInvoiceId, setSelectedInvoiceId] = useState<number | null>(null);\n  const [selectedReportId, setSelectedReportId] = useState<number | null>(null);\n\n  // URL-Parameter verarbeiten\n  useEffect(() => {\n    const queryParams = new URLSearchParams(location.search);\n    const tabParam = queryParams.get('tab') as TabType;\n    const invoiceIdParam = queryParams.get('invoiceId');\n    const reportIdParam = queryParams.get('reportId');\n\n    if (tabParam && ['invoices', 'monthly-reports', 'payroll'].includes(tabParam)) {\n      setActiveTab(tabParam);\n    }\n\n    if (invoiceIdParam) {\n      const invoiceId = parseInt(invoiceIdParam, 10);\n      if (!isNaN(invoiceId)) {\n        setSelectedInvoiceId(invoiceId);\n      }\n    }\n\n    if (reportIdParam) {\n      const reportId = parseInt(reportIdParam, 10);\n      if (!isNaN(reportId)) {\n        setSelectedReportId(reportId);\n      }\n    }\n  }, [location.search]);\n\n  const tabs = [\n    {\n      id: 'invoices' as TabType,\n      name: t('payroll.tabs.invoices'),\n      icon: DocumentTextIcon,\n      component: <InvoiceManagementTab />\n    },\n    {\n      id: 'monthly-reports' as TabType,\n      name: t('payroll.tabs.monthlyReports'),\n      icon: ClipboardDocumentListIcon,\n      component: <MonthlyReportsTab />\n    },\n    {\n      id: 'payroll' as TabType,\n      name: t('payroll.tabs.payroll'),\n      icon: CalculatorIcon,\n      component: <PayrollComponent />\n    }\n  ];\n\n  return (\n    <div className=\"min-h-screen dark:bg-gray-900\">\n      <div className=\"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6\">\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700\">\n          {/* Tab Headers */}\n          <div className=\"border-b border-gray-200 dark:border-gray-700\">\n            <nav className=\"-mb-px flex space-x-8 px-6 pt-6\">\n              {tabs.map((tab) => {\n                const Icon = tab.icon;\n                return (\n                  <button\n                    key={tab.id}\n                    onClick={() => setActiveTab(tab.id)}\n                    className={`group inline-flex items-center pb-4 px-1 border-b-2 font-medium text-sm ${\n                      activeTab === tab.id\n                        ? 'border-blue-500 text-blue-600 dark:text-blue-400'\n                        : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\n                    }`}\n                  >\n                    <Icon className=\"h-5 w-5 mr-2\" />\n                    {tab.name}\n                  </button>\n                );\n              })}\n            </nav>\n          </div>\n\n          {/* Tab Content */}\n          <div className=\"p-6\">\n            {tabs.find(tab => tab.id === activeTab)?.component}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Payroll; ","/**\r\n * Zentrale Filter-Logik zur Eliminierung von Code-Duplikation\r\n * \r\n * Diese Datei konsolidiert die Filter-Logik, die zuvor in mehreren Komponenten\r\n * dupliziert war (Requests.tsx, Worktracker.tsx, InvoiceManagementTab.tsx, etc.)\r\n * \r\n * WICHTIG: Die Logik ist exakt identisch mit der vorherigen Implementierung.\r\n * Nur die Code-Duplikation wurde entfernt, keine Funktionalittsnderung!\r\n */\r\n\r\nexport interface FilterCondition {\r\n  column: string;\r\n  operator: string;\r\n  value: string | number | Date | null;\r\n}\r\n\r\n/**\r\n * Evaluates a single filter condition against a field value\r\n * @param fieldValue - The value to test against\r\n * @param condition - The filter condition to apply\r\n * @returns true if condition is met, false otherwise\r\n */\r\nexport const evaluateCondition = (\r\n  fieldValue: any,\r\n  condition: FilterCondition\r\n): boolean => {\r\n  const { operator, value } = condition;\r\n  \r\n  // Handle null/undefined values\r\n  if (fieldValue == null && value == null) {\r\n    return operator === 'equals';\r\n  }\r\n  if (fieldValue == null || value == null) {\r\n    if (operator === 'notEquals') return true;\r\n    return false;\r\n  }\r\n\r\n  // String operations\r\n  const strField = String(fieldValue).toLowerCase();\r\n  const strValue = String(value).toLowerCase();\r\n\r\n  switch (operator) {\r\n    case 'equals':\r\n      return strField === strValue;\r\n    case 'notEquals':\r\n      return strField !== strValue;\r\n    case 'contains':\r\n      return strField.includes(strValue);\r\n    case 'startsWith':\r\n      return strField.startsWith(strValue);\r\n    case 'endsWith':\r\n      return strField.endsWith(strValue);\r\n    case 'before':\r\n    case 'after': {\r\n      // Date operations\r\n      const fieldDate = new Date(fieldValue);\r\n      const valueDate = new Date(value as string);\r\n      if (isNaN(fieldDate.getTime()) || isNaN(valueDate.getTime())) {\r\n        return false;\r\n      }\r\n      return operator === 'before' \r\n        ? fieldDate < valueDate \r\n        : fieldDate > valueDate;\r\n    }\r\n    case 'greaterThan':\r\n    case 'lessThan': {\r\n      // Numeric operations\r\n      const fieldNum = parseFloat(String(fieldValue));\r\n      const valueNum = parseFloat(String(value));\r\n      if (isNaN(fieldNum) || isNaN(valueNum)) {\r\n        return false;\r\n      }\r\n      return operator === 'greaterThan'\r\n        ? fieldNum > valueNum\r\n        : fieldNum < valueNum;\r\n    }\r\n    default:\r\n      return true;\r\n  }\r\n};\r\n\r\n/**\r\n * Type for getting field values from items\r\n */\r\nexport type GetFieldValue<T> = (item: T, columnId: string) => any;\r\n\r\n/**\r\n * Type for column-specific evaluation handlers\r\n * Returns true if condition is met, false otherwise\r\n */\r\nexport type ColumnEvaluator<T> = (item: T, condition: FilterCondition) => boolean | null;\r\n\r\n/**\r\n * Applies filter conditions to an array of items\r\n * \r\n * @param items - Array of items to filter\r\n * @param conditions - Array of filter conditions\r\n * @param operators - Array of logical operators ('AND' | 'OR') between conditions\r\n * @param getFieldValue - Function to extract field values from items\r\n * @param columnEvaluators - Optional map of column-specific evaluators for custom logic\r\n * @returns Filtered array of items\r\n * \r\n * @example\r\n * // Standard usage with getFieldValue\r\n * const filtered = applyFilters(items, conditions, operators, (item, col) => item[col]);\r\n * \r\n * // With custom column evaluators\r\n * const filtered = applyFilters(\r\n *   items,\r\n *   conditions,\r\n *   operators,\r\n *   (item, col) => item[col],\r\n *   {\r\n *     'responsible': (item, condition) => {\r\n *       // Custom logic for responsible column\r\n *       return evaluateUserRoleCondition(item.responsible?.id, item.role?.id, condition);\r\n *     }\r\n *   }\r\n * );\r\n */\r\nexport const applyFilters = <T>(\r\n  items: T[],\r\n  conditions: FilterCondition[],\r\n  operators: ('AND' | 'OR')[],\r\n  getFieldValue: GetFieldValue<T>,\r\n  columnEvaluators?: Record<string, ColumnEvaluator<T>>\r\n): T[] => {\r\n  if (conditions.length === 0) {\r\n    return items;\r\n  }\r\n\r\n  return items.filter(item => {\r\n    let result = true;\r\n\r\n    for (let i = 0; i < conditions.length; i++) {\r\n      const condition = conditions[i];\r\n      let conditionMet = false;\r\n\r\n      // Check if there's a custom evaluator for this column\r\n      if (columnEvaluators && columnEvaluators[condition.column]) {\r\n        const customResult = columnEvaluators[condition.column](item, condition);\r\n        if (customResult !== null) {\r\n          conditionMet = customResult;\r\n        } else {\r\n          // Fallback to standard evaluation if custom evaluator returns null\r\n          const fieldValue = getFieldValue(item, condition.column);\r\n          conditionMet = evaluateCondition(fieldValue, condition);\r\n        }\r\n      } else {\r\n        // Standard evaluation\r\n        const fieldValue = getFieldValue(item, condition.column);\r\n        conditionMet = evaluateCondition(fieldValue, condition);\r\n      }\r\n\r\n      // Apply logical operators\r\n      if (i === 0) {\r\n        result = conditionMet;\r\n      } else {\r\n        const operator = operators[i - 1] || 'AND';\r\n        result = operator === 'AND' \r\n          ? (result && conditionMet) \r\n          : (result || conditionMet);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  });\r\n};\r\n\r\n/**\r\n * Helper function to evaluate date conditions with proper date comparison\r\n */\r\nexport const evaluateDateCondition = (\r\n  dateValue: Date | string | null | undefined,\r\n  condition: FilterCondition\r\n): boolean => {\r\n  if (!dateValue) {\r\n    return false;\r\n  }\r\n\r\n  const date = new Date(dateValue);\r\n  if (isNaN(date.getTime())) {\r\n    return false;\r\n  }\r\n\r\n  const conditionDate = new Date(condition.value as string);\r\n  if (isNaN(conditionDate.getTime())) {\r\n    return false;\r\n  }\r\n\r\n  switch (condition.operator) {\r\n    case 'equals':\r\n      return date.toDateString() === conditionDate.toDateString();\r\n    case 'before':\r\n      return date < conditionDate;\r\n    case 'after':\r\n      return date > conditionDate;\r\n    default:\r\n      return true;\r\n  }\r\n};\r\n\r\n/**\r\n * Helper function to evaluate user/role conditions with user-{id} or role-{id} format\r\n * Supports both user-{id} and role-{id} formats, plus text fallback for legacy support\r\n */\r\nexport const evaluateUserRoleCondition = (\r\n  userId: number | null | undefined,\r\n  roleId: number | null | undefined,\r\n  condition: FilterCondition,\r\n  textValue?: string  // Optional: text representation for fallback (e.g. \"John Doe\")\r\n): boolean => {\r\n  const value = condition.value as string || '';\r\n  \r\n  // Handle user-{id} format\r\n  if (value.startsWith('user-')) {\r\n    const targetUserId = parseInt(value.replace('user-', ''), 10);\r\n    if (isNaN(targetUserId)) return false;\r\n    return userId === targetUserId;\r\n  }\r\n  \r\n  // Handle role-{id} format\r\n  if (value.startsWith('role-')) {\r\n    const targetRoleId = parseInt(value.replace('role-', ''), 10);\r\n    if (isNaN(targetRoleId)) return false;\r\n    return roleId === targetRoleId;\r\n  }\r\n  \r\n  // Empty value matches all\r\n  if (value === '') {\r\n    return true;\r\n  }\r\n  \r\n  // Fallback to text comparison (legacy support)\r\n  if (textValue !== undefined) {\r\n    const textValueLower = textValue.toLowerCase();\r\n    const valueLower = value.toLowerCase();\r\n    if (condition.operator === 'equals') {\r\n      return textValueLower === valueLower;\r\n    } else if (condition.operator === 'contains') {\r\n      return textValueLower.includes(valueLower);\r\n    }\r\n  }\r\n  \r\n  return false;\r\n};\r\n\r\n/**\r\n * Helper function for combined responsible/qualityControl filter (specific to Tasks)\r\n */\r\nexport const evaluateResponsibleAndQualityControl = (\r\n  responsibleId: number | null | undefined,\r\n  responsibleRoleId: number | null | undefined,\r\n  qualityControlId: number | null | undefined,\r\n  condition: FilterCondition,\r\n  responsibleText?: string,\r\n  qualityControlText?: string\r\n): boolean => {\r\n  const value = condition.value as string || '';\r\n  \r\n  // Handle user-{id} format - matches either responsible OR qualityControl\r\n  if (value.startsWith('user-')) {\r\n    const targetUserId = parseInt(value.replace('user-', ''), 10);\r\n    if (isNaN(targetUserId)) return false;\r\n    return (responsibleId === targetUserId) || (qualityControlId === targetUserId);\r\n  }\r\n  \r\n  // Handle role-{id} format - only matches with responsible role\r\n  if (value.startsWith('role-')) {\r\n    const targetRoleId = parseInt(value.replace('role-', ''), 10);\r\n    if (isNaN(targetRoleId)) return false;\r\n    return responsibleRoleId === targetRoleId;\r\n  }\r\n  \r\n  // Empty value matches all\r\n  if (value === '') {\r\n    return true;\r\n  }\r\n  \r\n  // Fallback to text comparison (legacy support)\r\n  const valueLower = value.toLowerCase();\r\n  if (condition.operator === 'equals') {\r\n    return (responsibleText?.toLowerCase() === valueLower) || (qualityControlText?.toLowerCase() === valueLower);\r\n  } else if (condition.operator === 'contains') {\r\n    return (responsibleText?.toLowerCase().includes(valueLower)) || (qualityControlText?.toLowerCase().includes(valueLower));\r\n  }\r\n  \r\n  return false;\r\n};\r\n\r\n"],"names":["formatCurrency","amount","Intl","NumberFormat","style","currency","format","PayrollComponent","t","useTranslation","hasPermission","usePermissions","payrollData","setPayrollData","useState","loading","setLoading","error","setError","useEffect","loadPayrollData","async","setTimeout","totalHours","totalEarnings","deductions","netPay","period","console","_jsx","className","children","_jsxs","Array","map","_","i","InformationCircleIcon","CalculatorIcon","getStatusBadge","status","config","DRAFT","label","color","SENT","PAID","OVERDUE","CANCELLED","_ref","isOpen","onClose","invoiceId","onInvoiceUpdated","invoice","setInvoice","isMarkingAsPaid","setIsMarkingAsPaid","loadInvoiceDetails","response","axiosInstance","get","API_ENDPOINTS","CONSULTATION_INVOICES","BY_ID","data","getTotalPaid","payments","reduce","sum","payment","Number","getRemainingAmount","total","Dialog","open","Panel","Title","onClick","XMarkIcon","invoiceNumber","Date","issueDate","locale","de","dueDate","UserIcon","client","name","company","email","phone","address","BuildingOfficeIcon","user","firstName","lastName","ClockIcon","items","length","item","formatTime","workTime","startTime","calculateDuration","endTime","branch","unitPrice","toFixed","id","subtotal","vatRate","vatAmount","CurrencyDollarIcon","paymentDate","paymentMethod","reference","notes","GENERATE_PDF","responseType","headers","blob","Blob","type","url","window","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","toast","success","_error$response","_error$response$data","message","title","DocumentArrowDownIcon","post","MARK_PAID","toISOString","_error$response2","_error$response2$data","disabled","ArrowPathIcon","defaultColumnOrder","INVOICES_TABLE_ID","defaultCardSortDirections","tableToCardMapping","_editingInvoice$items","selectedInvoiceId","initialSelectedInvoiceId","openSidepane","closeSidepane","useSidepane","isLargeScreen","setIsLargeScreen","innerWidth","invoices","setInvoices","searchTerm","setSearchTerm","sortConfig","setSortConfig","key","direction","isFilterModalOpen","setIsFilterModalOpen","filterConditions","setFilterConditions","filterLogicalOperators","setFilterLogicalOperators","activeFilterName","setActiveFilterName","selectedFilterId","setSelectedFilterId","setSelectedInvoiceId","isDetailModalOpen","setIsDetailModalOpen","expandedRows","setExpandedRows","Set","isEditSidepaneOpen","setIsEditSidepaneOpen","editingInvoice","setEditingInvoice","editingPositions","setEditingPositions","canViewInvoices","canEditInvoices","canDownloadInvoices","settings","isLoading","isLoadingSettings","updateColumnOrder","updateHiddenColumns","toggleColumnVisibility","isColumnVisible","updateViewMode","useTableSettings","defaultHiddenColumns","defaultViewMode","isColumnConfigOpen","setIsColumnConfigOpen","availableColumns","useMemo","shortLabel","substring","statusConfig","viewMode","cardSortDirections","setCardSortDirections","cardMetadataOrder","columnOrder","cardMetadata","forEach","tableCol","cardMeta","push","getCardMetadataFromColumnOrder","hiddenCardMetadata","hiddenTableColumns","add","getHiddenCardMetadata","hiddenColumns","visibleCardMetadata","filter","meta","has","wrapper","querySelector","classList","remove","loadInvoices","find","inv","BASE","handleDownloadPdf","handleMarkAsPaid","_invoices$find","toggleExpanded","prev","newSet","delete","handleResize","addEventListener","removeEventListener","openEditSidepane","closeEditSidepane","applyFilterConditions","conditions","operators","resetFilterConditions","filteredAndSortedInvoices","filtered","searchLower","toLowerCase","includes","columnEvaluators","cond","clientName","value","operator","compareValue","parseFloat","isNaN","Math","abs","getFieldValue","columnId","applyFilters","sortableColumns","colId","sort","a","b","valueA","valueB","getTime","comparison","String","localeCompare","aValue","bValue","renderSortableHeader","sortKey","current","FunnelIcon","Squares2X2Icon","TableCellsIcon","ArrowsUpDownIcon","MagnifyingGlassIcon","onChange","e","target","placeholder","SavedFilterTags","tableId","onSelectFilter","onReset","onFilterChange","handleFilterChange","column","col","_invoice$items","React","ChevronDownIcon","PencilIcon","colSpan","paymentTerms","description","quantity","CardGrid","gap","_invoice$items2","isExpanded","metadata","icon","CalendarIcon","invoiceStatus","actions","expandableContent","DataCard","expandable","content","onToggle","FilterPane","columns","onApply","savedConditions","savedOperators","TableColumnConfig","onToggleVisibility","onReorderColumns","newOrder","InvoiceDetailModal","role","transition","split","rows","PlusIcon","index","step","TrashIcon","CheckIcon","reportNumber","recipient","selectedReportId","reports","setReports","generating","setGenerating","unbilledCheck","setUnbilledCheck","selectedReportRef","useRef","sortedReports","sorted","periodStart","isClientConsultationsSidepaneOpen","setIsClientConsultationsSidepaneOpen","editingClientId","setEditingClientId","editingClientName","setEditingClientName","clientConsultations","setClientConsultations","loadingConsultations","setLoadingConsultations","loadReports","checkUnbilledConsultations","scrollIntoView","behavior","block","backgroundColor","MONTHLY_CONSULTATION_REPORTS","CHECK_UNBILLED","downloadPDF","PDF","report","reportId","openClientConsultationsSidepane","clientId","loadClientConsultations","closeClientConsultationsSidepane","r","CONSULTATIONS","periodEnd","getStatusIcon","CheckCircleIcon","EyeIcon","getStatusText","hasUnbilledConsultations","ExclamationTriangleIcon","count","log","GENERATE_AUTOMATIC","_error$response3","_error$response3$data","_report$items","ref","generatedAt","consultationCount","_report$items2","reportStatus","GENERATED","ARCHIVED","subtitle","consultation","slice","Payroll","_tabs$find","location","useLocation","activeTab","setActiveTab","setSelectedReportId","queryParams","URLSearchParams","search","tabParam","invoiceIdParam","reportIdParam","parseInt","tabs","DocumentTextIcon","component","InvoiceManagementTab","ClipboardDocumentListIcon","MonthlyReportsTab","tab","Icon","evaluateCondition","fieldValue","condition","strField","strValue","startsWith","endsWith","fieldDate","valueDate","fieldNum","valueNum","result","conditionMet","customResult","evaluateDateCondition","dateValue","date","conditionDate","toDateString"],"sourceRoot":""}