"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[679],{637:(e,t,r)=>{r.d(t,{A:()=>a});r(5043);var n=r(579);const a=e=>{let{children:t,columns:r={mobile:1,tablet:1,desktop:1,largeDesktop:1},gap:a="md",className:s=""}=e;const l={sm:"gap-0.5",md:"gap-0.5",lg:"gap-1"}[a];return(0,n.jsx)("div",{className:`flex flex-col ${l} ${s}`,children:t})}},957:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(5043),a=r(2517),s=r(8224),l=r(6365),i=r(6896),o=r(579);const d=e=>{let{item:t}=e;const[r,s]=(0,n.useState)(!1),[l,d]=(0,n.useState)(!1),c=(0,n.useRef)(null),m=(0,n.useRef)(null),g=e=>e.replace(/^#+\s+/gm,"").replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/\[([^\]]+)\]\([^)]+\)/g,"$1").replace(/```[\s\S]*?```/g,"").replace(/`([^`]+)`/g,"$1").replace(/^\s*[-*+]\s+/gm,"").replace(/^\s*\d+\.\s+/gm,"").trim(),x=g(t.descriptionContent||""),h=(e=>{const t=e.indexOf("\n");return t>0&&t<150?e.substring(0,t):e.length>150?e.substring(0,150):e})(x),u=x.length>h.length||x.includes("\n");u&&((e,t)=>{const r=e.indexOf(t);if(-1===r){const r=e.indexOf("\n");return r>0?e.substring(r+1).trim():e.length>t.length?e.substring(t.length).trim():""}const n=e.indexOf("\n",r);n>0?e.substring(n+1).trim():e.length>r+t.length&&e.substring(r+t.length).trim()})(x,h);(0,n.useEffect)((()=>{if(c.current&&x){const e=document.createElement("div");e.style.position="absolute",e.style.visibility="hidden",e.style.width=c.current.offsetWidth+"px",e.style.whiteSpace="nowrap",e.style.fontSize=window.getComputedStyle(c.current).fontSize,e.style.fontFamily=window.getComputedStyle(c.current).fontFamily,e.textContent=x,document.body.appendChild(e);const t=e.scrollWidth,r=c.current.scrollWidth;d((t>r||u)&&u),document.body.removeChild(e)}}),[x,u]);const p=r&&u?((e,t)=>{if(-1===g(e).indexOf(t)){const t=e.indexOf("\n");return t>0?e.substring(t+1).trim():""}const r=e.indexOf("\n",0);if(r>0)return e.substring(r+1).trim();if(e.length>150){let t=150;for(let r=150;r<e.length&&r<200;r++)if(" "===e[r]||"."===e[r]||"\n"===e[r]){t=r+1;break}return e.substring(t).trim()}return""})(t.descriptionContent||"",h):"";return(0,o.jsxs)("div",{className:`text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400 ${t.className||""}`,children:[(0,o.jsxs)("div",{className:"flex items-center gap-1 sm:gap-1.5",children:[(0,o.jsxs)("div",{className:"flex-1 min-w-0 flex items-center gap-1 sm:gap-1.5",children:[(0,o.jsxs)("span",{ref:m,className:"font-medium mr-1 sm:mr-2 whitespace-nowrap flex-shrink-0",children:[t.label,":"]}),(0,o.jsx)("span",{ref:c,className:"text-gray-900 dark:text-white line-clamp-1 flex-1 min-w-0",children:h})]}),u&&l&&!r&&(0,o.jsx)("button",{onClick:e=>{e.stopPropagation(),s(!0)},className:"flex-shrink-0 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:"Beschreibung aufklappen",children:(0,o.jsx)("span",{className:"text-base lg:text-lg xl:text-xl",children:"<"})}),r&&(0,o.jsx)("button",{onClick:e=>{e.stopPropagation(),s(!1)},className:"flex-shrink-0 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",title:"Beschreibung einklappen",children:(0,o.jsx)(a.A,{className:"h-4 w-4 lg:h-5 lg:w-5 xl:h-6 xl:w-6"})})]}),r&&u&&p&&(0,o.jsx)("div",{className:"mt-1",style:{marginLeft:m.current?`${m.current.offsetWidth+8}px`:"calc(0.75rem * 5 + 0.5rem)"},children:(0,o.jsx)(i.A,{content:p,showImagePreview:!0,maxHeight:"none"})})]})},c=e=>{let{title:t,subtitle:r,status:i,metadata:c,actions:m,expandable:g,onClick:x,className:h="",headerClassName:u="",highlightBorder:p=!1,highlightColor:f="green",children:b}=e;const y=p?`border-2 border-${f}-500 dark:border-${f}-600`:"border border-gray-300 dark:border-gray-700";return(0,o.jsxs)("div",{className:`bg-white dark:bg-gray-800 rounded-lg ${y} p-3 sm:p-4 md:p-5 lg:p-6 shadow-sm hover:shadow-md transition-shadow ${x?"cursor-pointer":""} w-full overflow-hidden ${h}`,onClick:x,children:[(0,o.jsxs)("div",{className:"grid items-start gap-4 mb-2 min-w-0",style:{gridTemplateColumns:"200px 180px auto"},children:[(0,o.jsxs)("div",{className:"min-w-0 pr-2 overflow-hidden",children:["string"===typeof t?(0,o.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",style:{fontSize:"clamp(0.9375rem, 1.2vw + 0.5rem, 1.25rem)"},children:t}):t,r&&(0,o.jsx)("p",{className:"text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-500 dark:text-gray-400 mt-1 truncate",children:r})]}),(0,o.jsxs)("div",{className:"flex flex-col gap-1 sm:gap-1.5",children:[c.filter((e=>"main"===e.section||!e.section&&"Angefragt von"===e.label)).length>0&&(0,o.jsx)("div",{className:"flex items-center gap-1 sm:gap-1.5 text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400",children:c.filter((e=>"main"===e.section||!e.section&&"Angefragt von"===e.label)).map(((e,t)=>e.descriptionContent?null:(0,o.jsxs)(n.Fragment,{children:[e.icon&&(0,o.jsx)("span",{className:"flex-shrink-0",children:e.icon}),(0,o.jsxs)("span",{className:"font-medium mr-1 whitespace-nowrap",children:[e.label,":"]}),(0,o.jsx)("span",{className:`${e.className||"text-gray-900 dark:text-white"}`,children:(e.value,e.value)})]},t)))}),c.filter((e=>"main-second"===e.section||!e.section&&"Verantwortlicher"===e.label)).length>0&&(0,o.jsx)("div",{className:"flex items-center gap-1 sm:gap-1.5 text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400",children:c.filter((e=>"main-second"===e.section||!e.section&&"Verantwortlicher"===e.label)).map(((e,t)=>e.descriptionContent?null:(0,o.jsxs)(n.Fragment,{children:[e.icon&&(0,o.jsx)("span",{className:"flex-shrink-0",children:e.icon}),(0,o.jsxs)("span",{className:"font-medium mr-1 whitespace-nowrap",children:[e.label,":"]}),(0,o.jsx)("span",{className:`${e.className||"text-gray-900 dark:text-white"}`,children:(e.value,e.value)})]},t)))})]}),(0,o.jsxs)("div",{className:"flex items-center gap-4 sm:gap-5 min-w-0 flex-shrink-0",children:[c.filter((e=>"right-inline"===e.section)).map(((e,t)=>(0,o.jsxs)("div",{className:"flex items-center gap-1 sm:gap-1.5 text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400",children:[e.icon&&(0,o.jsx)("span",{className:"flex-shrink-0",children:e.icon}),(0,o.jsx)("span",{className:e.className||"text-gray-900 dark:text-white",children:(e.value,e.value)})]},t))),i&&(0,o.jsxs)("div",{className:"flex items-center gap-0.5 sm:gap-1 flex-shrink-0 min-w-0",children:[i.onPreviousClick?(0,o.jsx)("button",{onClick:e=>{var t;e.stopPropagation(),null===(t=i.onPreviousClick)||void 0===t||t.call(i)},className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded transition-colors flex-shrink-0",title:"Vorheriger Status",children:(0,o.jsx)(s.A,{className:"h-6 w-6"})}):null,(0,o.jsx)("span",{className:`px-1.5 sm:px-2 md:px-2.5 py-0.5 sm:py-0.5 md:py-1 text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl font-medium rounded-full ${i.color} ${i.className||""} whitespace-nowrap flex-shrink-0`,children:i.label}),i.onNextClick?(0,o.jsx)("button",{onClick:e=>{var t;e.stopPropagation(),null===(t=i.onNextClick)||void 0===t||t.call(i)},className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded transition-colors flex-shrink-0",title:"N\xe4chster Status",children:(0,o.jsx)(l.A,{className:"h-6 w-6"})}):null]})]})]}),c.filter((e=>"right"===e.section)).length>0&&(0,o.jsx)("div",{className:"flex-shrink-0 ml-4 flex flex-col items-end gap-1 sm:gap-2 mb-3 sm:mb-4 md:mb-5",children:c.filter((e=>"right"===e.section)).map(((e,t)=>{const r=(null!==i&&void 0!==i&&i.onPreviousClick,"w-8 sm:w-10 md:w-12"),n=(null!==i&&void 0!==i&&i.onNextClick,"w-8 sm:w-10 md:w-12");return(0,o.jsxs)("div",{className:"flex items-center gap-1 justify-end",children:[(0,o.jsx)("div",{className:`${r} flex-shrink-0`}),(0,o.jsxs)("div",{className:`flex items-center gap-1 sm:gap-1.5 px-2 sm:px-2.5 py-0.5 sm:py-1 rounded-md ${e.className||"text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700/50"} text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl font-medium`,title:e.label||"F\xe4lligkeit",children:[e.icon&&(0,o.jsx)("span",{className:"flex-shrink-0",children:e.icon}),(0,o.jsx)("span",{className:e.className||"text-gray-900 dark:text-white",children:(e.value,e.value)})]}),(0,o.jsx)("div",{className:`${n} flex-shrink-0`})]},t)}))}),c.filter((e=>"full"===e.section&&e.descriptionContent)).length>0&&(0,o.jsx)("div",{className:"mb-3 sm:mb-4 mt-2 sm:mt-2.5",children:c.filter((e=>"full"===e.section&&e.descriptionContent)).map(((e,t)=>(0,o.jsx)(d,{item:e},t)))}),c.filter((e=>"full"!==e.section&&"main"!==e.section&&"main-second"!==e.section&&"right-inline"!==e.section)).length>0&&(0,o.jsxs)("div",{className:"flex flex-col gap-3 sm:gap-4 mb-3 sm:mb-4",children:[c.filter((e=>"left"===e.section)).length>0&&(0,o.jsx)("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:c.filter((e=>"left"===e.section)).map(((e,t)=>(0,o.jsxs)("div",{className:"flex items-center gap-1 sm:gap-1.5 text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400",children:[e.icon&&(0,o.jsx)("span",{className:"flex-shrink-0",children:e.icon}),(0,o.jsxs)("span",{className:"font-medium mr-1 sm:mr-2 whitespace-nowrap",children:[e.label,":"]}),(0,o.jsx)("span",{className:e.className||"text-gray-900 dark:text-white",children:(e.value,e.value)})]},t)))}),c.filter((e=>{const t=e.section;return"main"!==t&&"main-second"!==t&&"right-inline"!==t&&(!t&&"Angefragt von"!==e.label&&"Verantwortlicher"!==e.label)})).length>0&&(0,o.jsx)("div",{className:"flex flex-col gap-2 sm:gap-2.5",children:c.filter((e=>{const t=e.section;return"main"!==t&&"main-second"!==t&&"right-inline"!==t&&(!t&&"Angefragt von"!==e.label&&"Verantwortlicher"!==e.label)})).map(((e,t)=>e.descriptionContent?(0,o.jsx)(d,{item:e},t):(0,o.jsxs)("div",{className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm md:text-base lg:text-lg xl:text-xl 2xl:text-2xl text-gray-600 dark:text-gray-400",children:[e.icon&&(0,o.jsx)("span",{className:"flex-shrink-0",children:e.icon}),(0,o.jsxs)("span",{className:"font-medium mr-1 sm:mr-2 whitespace-nowrap",children:[e.label,":"]}),(0,o.jsx)("span",{className:`flex-1 min-w-0 break-words ${e.className||"text-gray-900 dark:text-white"}`,children:(e.value,e.value)})]},t)))})]}),b&&(0,o.jsx)("div",{className:"mb-4",children:b}),g&&(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsxs)("button",{onClick:e=>{e.stopPropagation(),g.onToggle()},className:"flex items-center justify-between w-full text-left text-xs text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white",children:[(0,o.jsx)("span",{children:"Details"}),g.isExpanded?(0,o.jsx)(a.A,{className:"h-4 w-4"}):(0,o.jsx)("span",{className:"text-base lg:text-lg xl:text-xl",children:"<"})]}),g.isExpanded&&(0,o.jsx)("div",{className:"mt-2 pt-3 border-t border-gray-200 dark:border-gray-700",children:g.content})]}),m&&(0,o.jsx)("div",{className:"flex items-center justify-end space-x-2 pt-3 border-t border-gray-200 dark:border-gray-700",onClick:e=>e.stopPropagation(),children:m})]})}},1713:(e,t,r)=>{r.d(t,{DW:()=>v,I5:()=>h,IF:()=>u,P0:()=>c,Pg:()=>y,Yq:()=>o,_2:()=>x,c$:()=>p,fU:()=>d,h4:()=>b,pg:()=>m,uT:()=>g,vv:()=>f});var n=r(4653),a=r(9837),s=r(1620),l=r(6981),i=r(887);const o=e=>{if(!e)return"-";try{const t=e.split("-");if(3!==t.length)return"-";const r=parseInt(t[0]),n=parseInt(t[1])-1,a=parseInt(t[2]);return new Date(r,n,a,12,0,0).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(t){return console.error("Fehler beim Formatieren des Datums:",t),"-"}},d=e=>{if(!e)return"-";try{const t=(0,n.H)(e),r=t.getUTCHours().toString().padStart(2,"0");return`${r}:${t.getUTCMinutes().toString().padStart(2,"0")}`}catch(t){return console.error(`Fehler beim Formatieren der Zeit f\xfcr ${e}:`,t),"-"}},c=(e,t)=>{if(!e||!t)return"-";try{const r=e.endsWith("Z")?e.substring(0,e.length-1):e,n=t.endsWith("Z")?t.substring(0,t.length-1):t,a=new Date(r),s=new Date(n).getTime()-a.getTime(),l=Math.floor(s/6e4),i=Math.floor(l/60);return`${i}h ${l%60}m`}catch(r){return console.error("Fehler bei der Dauerberechnung:",r),"-"}},m=e=>{try{const t=parseInt(e.substring(0,4)),r=parseInt(e.substring(6)),n=new Date(Date.UTC(t,0,1,12,0,0)).getUTCDay(),l=n<=4?4-n:11-n,o=new Date(Date.UTC(t,0,1+l,12,0,0)),d=new Date(Date.UTC(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()+7*(r-1),12,0,0)),c=new Date(Date.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()-3,12,0,0)),m=(0,a.GP)(c,"yyyy-MM-dd");if(console.log(`Konvertierte Woche ${e} zu Datum: ${m} (Wochentag: ${(0,a.GP)(c,"EEEE",{locale:i.de})})`),"Montag"!==(0,a.GP)(c,"EEEE",{locale:i.de})){console.warn("Berechnetes Datum ist kein Montag! Korrigiere...");const e=(0,s.k)(c,{weekStartsOn:1});return(0,a.GP)(e,"yyyy-MM-dd")}return m}catch(t){console.error("Fehler beim Konvertieren des Wochendatums:",t);const e=(0,s.k)(new Date,{weekStartsOn:1});return(0,a.GP)(e,"yyyy-MM-dd")}},g=(e,t)=>{try{if(!e||!e.startTime)return!1;return e.startTime.split("T")[0]===t}catch(r){return console.error("Fehler beim Pr\xfcfen der Relevanz eines Worktime-Eintrags:",r),!1}},x=e=>{if(!e)return[];const t=new Date(e),r=[];for(let n=0;n<7;n++){const e=(0,l.f)(t,n),s={date:(0,a.GP)(e,"yyyy-MM-dd"),day:(0,a.GP)(e,"EEEE",{locale:i.de})};r.push(s)}return r},h=e=>{if(!e)return"-";try{return new Date(e).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return console.error("Fehler beim Formatieren des Datums und der Zeit:",t),"-"}},u=e=>{const t=new Date(e);return new Date(t.getTime()+6e4*t.getTimezoneOffset())},p=e=>{try{const t=e.reduce(((e,t)=>{if(!t.endTime)return e;const r=t.startTime.endsWith("Z")?t.startTime.substring(0,t.startTime.length-1):t.startTime,n=t.endTime.endsWith("Z")?t.endTime.substring(0,t.endTime.length-1):t.endTime,a=new Date(r),s=new Date(n).getTime()-a.getTime();return e+Math.floor(s/6e4)}),0),r=Math.floor(t/60);return`${r}h ${t%60}m`}catch(t){return console.error("Fehler bei der Formatierung der Gesamtdauer:",t),"0h 0m"}},f=e=>!!(e.invoiceItems&&e.invoiceItems.length>0),b=e=>{if(!e.invoiceItems||0===e.invoiceItems.length)return null;return e.invoiceItems[0].invoice},y=e=>({DRAFT:"Entwurf",SENT:"Gesendet",PAID:"Bezahlt",OVERDUE:"\xdcberf\xe4llig",CANCELLED:"Storniert"}[e]||e),v=e=>({DRAFT:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",SENT:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",PAID:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",OVERDUE:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",CANCELLED:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300"}[e]||"bg-gray-100 text-gray-800")},2023:(e,t,r)=>{r.d(t,{F:()=>o});var n=r(5043),a=r(1923);const s=e=>`table_settings_${e}`,l=async e=>{try{return(await a.A.get(`/table-settings/${e}`)).data}catch(t){console.error("Fehler beim Abrufen der Tabelleneinstellungen vom Server:",t);try{const t=s(e),r=localStorage.getItem(t);if(r)return JSON.parse(r)}catch(r){console.error("Fehler beim Laden aus localStorage:",r)}return{tableId:e,columnOrder:[],hiddenColumns:[]}}},i=async e=>{try{await a.A.post("/table-settings",e);const t=s(e.tableId);localStorage.setItem(t,JSON.stringify(e))}catch(t){console.error("Fehler beim Speichern der Tabelleneinstellungen auf dem Server:",t);try{const t=s(e.tableId);localStorage.setItem(t,JSON.stringify(e))}catch(r){console.error("Fehler beim Speichern im localStorage:",r)}}},o=(e,t)=>{const[r,a]=(0,n.useState)({tableId:e,columnOrder:(null===t||void 0===t?void 0:t.defaultColumnOrder)||[],hiddenColumns:(null===t||void 0===t?void 0:t.defaultHiddenColumns)||[]}),[s,o]=(0,n.useState)(!0),[d,c]=(0,n.useState)(null);(0,n.useEffect)((()=>{let r=!0;return(async()=>{try{o(!0);const n=await l(e);if(!r)return;console.log("Geladene Tabelleneinstellungen vom Server:",n),0===n.columnOrder.length&&null!==t&&void 0!==t&&t.defaultColumnOrder&&(n.columnOrder=t.defaultColumnOrder),!n.viewMode&&null!==t&&void 0!==t&&t.defaultViewMode&&(n.viewMode=t.defaultViewMode),console.log("Finale Tabelleneinstellungen nach Initialisierung:",n),a(n),c(null)}catch(n){if(!r)return;c(n instanceof Error?n:new Error("Fehler beim Laden der Einstellungen")),console.error("Fehler beim Laden der Tabelleneinstellungen:",n)}finally{r&&o(!1)}})(),()=>{r=!1}}),[e]);const m=(0,n.useCallback)((async e=>{try{const t={...r,columnOrder:e};a(t),await i(t)}catch(t){c(t instanceof Error?t:new Error("Fehler beim Speichern der Spaltenreihenfolge")),console.error("Fehler beim Speichern der Spaltenreihenfolge:",t)}}),[r]),g=(0,n.useCallback)((async e=>{try{const t={...r,hiddenColumns:e};a(t),await i(t)}catch(t){c(t instanceof Error?t:new Error("Fehler beim Speichern der versteckten Spalten")),console.error("Fehler beim Speichern der versteckten Spalten:",t)}}),[r]),x=(0,n.useCallback)((async e=>{try{let t;t=r.hiddenColumns.includes(e)?r.hiddenColumns.filter((t=>t!==e)):[...r.hiddenColumns,e];const n={...r,hiddenColumns:t};a(n),await i(n)}catch(t){c(t instanceof Error?t:new Error("Fehler beim \xc4ndern der Spaltenansicht")),console.error("Fehler beim \xc4ndern der Spaltenansicht:",t)}}),[r]),h=(0,n.useCallback)((async e=>{try{const t={...r,viewMode:e};a(t),await i(t)}catch(t){c(t instanceof Error?t:new Error("Fehler beim Speichern des View-Modes")),console.error("Fehler beim Speichern des View-Modes:",t)}}),[r]);return{settings:r,isLoading:s,error:d,updateColumnOrder:m,updateHiddenColumns:g,toggleColumnVisibility:x,isColumnVisible:e=>!r.hiddenColumns.includes(e),updateViewMode:h}}},6896:(e,t,r)=>{r.d(t,{A:()=>a});r(5043);var n=r(579);const a=e=>{let{content:t,className:r="",maxHeight:a="150px",temporaryAttachments:s=[],showImagePreview:l=!1}=e;if(l){const e={};return"none"===a?e.overflowY="visible":(e.maxHeight="150px"!==a?a:"100%",e.overflowY="auto"),(0,n.jsx)("div",{className:`markdown-preview ${r} dark:text-gray-200`,style:e,children:(0,n.jsx)("div",{dangerouslySetInnerHTML:{__html:t.replace(/\n/g,"<br/>")}})})}return(0,n.jsx)("div",{className:`markdown-preview ${r}`,children:(()=>{const e=[...Array.from(t.matchAll(/!\[(.*?)\]\((.*?)\)/g)).map((e=>({type:"image",alt:e[1],url:e[2],isTemporary:"wird nach dem Erstellen hochgeladen"===e[2]}))),...Array.from(t.matchAll(/\[(.*?)\]\((.*?)\)/g)).filter((e=>!e[0].startsWith("!"))).map((e=>({type:"link",alt:e[1],url:e[2],isTemporary:"wird nach dem Erstellen hochgeladen"===e[2]})))].reduce(((e,t)=>{const r=`${t.type}-${t.alt}`;return e.some((e=>`${e.type}-${e.alt}`===r))||e.push(t),e}),[]);return 0===e.length?null:(0,n.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:e.map(((e,t)=>{let r=e.url;if(e.isTemporary){const t=(e=>{const t=s.find((t=>t.fileName===e));return null!==t&&void 0!==t&&t.file?URL.createObjectURL(t.file):null})(e.alt);t&&(r=t)}return(0,n.jsxs)("div",{className:"group relative",children:[(0,n.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-700 rounded px-2 py-1 text-sm flex items-center dark:text-gray-200",children:[(0,n.jsx)("span",{className:"mr-1",children:"image"===e.type?(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}):(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),e.alt]}),r&&"wird nach dem Erstellen hochgeladen"!==r&&(0,n.jsx)("div",{className:"hidden group-hover:block absolute z-10 bg-white dark:bg-gray-800 border dark:border-gray-700 shadow-lg p-2 rounded-md -bottom-2 left-1/2 transform -translate-x-1/2 translate-y-full max-w-xs",children:"image"===e.type?(0,n.jsx)("img",{src:r,alt:e.alt,className:"max-w-full border rounded dark:border-gray-700",style:{maxHeight:"200px",objectFit:"contain"}}):r.match(/^(https?:\/\/|blob:)/)?(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 dark:text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),(0,n.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:e.alt})]}):(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 dark:text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,n.jsx)("span",{className:"dark:text-gray-200",children:e.alt})]})})]},t)}))})})()})}},8897:(e,t,r)=>{r.d(t,{A:()=>h});var n=r(5043),a=r(4117),s=r(7030),l=r(9626),i=r(2311),o=r(9531),d=r(4832),c=r(1909),m=r(9422),g=r(579);const x=e=>{let{id:t,label:r,index:n,isVisible:c,isDragging:m,isOver:x,onDragStart:h,onDragOver:u,onDragEnd:p,onToggleVisibility:f,sortDirection:b,onSortDirectionChange:y,showSortDirection:v=!1,sortOrder:w}=e;const{t:k}=(0,a.Bd)();return(0,g.jsxs)("li",{draggable:!0,onDragStart:()=>h(n),onDragOver:e=>{e.preventDefault(),u(n)},onDragEnd:p,className:`flex items-center justify-between px-2.5 py-2 rounded-md transition-colors duration-150\n        ${m?"opacity-50 bg-gray-100 dark:bg-gray-700":""}\n        ${x?"border-t-2 border-blue-500 dark:border-blue-400":""}\n        ${m||x?"":"hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[(0,g.jsxs)("div",{className:"flex items-center flex-1 min-w-0",children:[(0,g.jsx)(s.A,{className:"h-4 w-4 mr-2 text-gray-400 dark:text-gray-500 cursor-move flex-shrink-0"}),(0,g.jsxs)("span",{className:"text-sm dark:text-gray-300 flex items-center gap-2",children:[v&&void 0!==w&&c&&(0,g.jsx)("span",{className:"text-xs font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 px-1.5 py-0.5 rounded",children:w}),(0,g.jsx)("span",{children:r})]})]}),(0,g.jsxs)("div",{className:"flex items-center gap-1",children:[v&&c&&void 0!==b&&y&&(0,g.jsx)("button",{onClick:e=>{e.stopPropagation(),y(t,"asc"===b?"desc":"asc")},className:"inline-flex items-center justify-center p-1.5 rounded-md bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-300 transition-colors duration-150",title:`${k("tableColumn.sortDirection")}: ${k("asc"===b?"tableColumn.ascending":"tableColumn.descending")} (${k("tableColumn.clickToToggle")})`,children:"asc"===b?(0,g.jsx)(l.A,{className:"h-4 w-4"}):(0,g.jsx)(i.A,{className:"h-4 w-4"})}),(0,g.jsx)("button",{onClick:()=>f(t),className:"inline-flex items-center justify-center p-1.5 rounded-full bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-300 transition-colors duration-150",title:k(c?"tableColumn.hideColumn":"tableColumn.showColumn"),children:c?(0,g.jsx)(o.A,{className:"w-4 h-4 dark:text-gray-300"}):(0,g.jsx)(d.A,{className:"w-4 h-4 text-gray-400 dark:text-gray-500"})})]})]})},h=e=>{let{columns:t,visibleColumns:r,columnOrder:s,onToggleColumnVisibility:l,onMoveColumn:i,onClose:o,buttonTitle:d,modalTitle:h,sortDirections:u={},onSortDirectionChange:p,showSortDirection:f=!1}=e;const{t:b}=(0,a.Bd)(),y=d||b("tableColumn.configure"),v=h||b("tableColumn.configure"),[w,k]=(0,n.useState)(!1),[j,N]=(0,n.useState)(null),[C,D]=(0,n.useState)(null),S=(0,n.useRef)(null),T=[...t].sort(((e,t)=>{const r=s.indexOf(e.id),n=s.indexOf(t.id);return-1===r?1:-1===n?-1:r-n})),E=e=>{N(e),D(e)},$=e=>{D(e)},F=()=>{null!==j&&null!==C&&j!==C&&i(j,C),N(null),D(null)},A=()=>{k(!1),o()};return(0,n.useEffect)((()=>{const e=e=>{S.current&&!S.current.contains(e.target)&&A()};return w&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[w]),(0,g.jsxs)("div",{className:"relative",ref:S,children:[(0,g.jsx)("button",{className:"inline-flex items-center justify-center p-2 rounded-md bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-300 transition-colors duration-150",onClick:()=>k(!w),title:y,children:f?(0,g.jsx)(c.A,{className:"w-5 h-5"}):(0,g.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:(0,g.jsx)("path",{fillRule:"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 012 10z",clipRule:"evenodd"})})}),w&&(0,g.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white dark:bg-gray-800 rounded-md shadow-lg z-50 border border-gray-300 dark:border-gray-600",onDragOver:e=>e.preventDefault(),children:[(0,g.jsxs)("div",{className:"px-3 py-2.5 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[(0,g.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:v}),(0,g.jsx)("button",{onClick:A,className:"inline-flex items-center justify-center p-2 rounded-md bg-transparent text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-300 transition-colors duration-150",title:b("common.close"),children:(0,g.jsx)(m.A,{className:"w-5 h-5"})})]}),(0,g.jsx)("ul",{className:"px-2 py-1 max-h-64 overflow-y-auto",children:T.map(((e,t)=>{const n=T.filter((e=>r.includes(e.id))).findIndex((t=>t.id===e.id))+1,a=r.includes(e.id);return(0,g.jsx)(x,{id:e.id,label:e.label,index:t,isVisible:a,isDragging:j===t,isOver:C===t&&j!==t,onDragStart:E,onDragOver:$,onDragEnd:F,onToggleVisibility:l,sortDirection:f&&a?u[e.id]||"asc":void 0,onSortDirectionChange:f?p:void 0,showSortDirection:f,sortOrder:f&&a?n:void 0},e.id)}))})]})]})}}}]);
//# sourceMappingURL=679.3b93ce07.chunk.js.map