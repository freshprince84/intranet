{"version":3,"file":"static/js/967.8adca31a.chunk.js","mappings":"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","sources":["api/apiClient.ts","utils/dateUtils.ts","api/cerebroApi.ts","components/cerebro/ArticleList.tsx","components/cerebro/GitHubMarkdownViewer.tsx","components/cerebro/CollapsibleCode.tsx","components/cerebro/ArticleView.tsx","components/cerebro/ArticleEdit.tsx","components/cerebro/ArticleStructure.tsx","components/cerebro/AddMedia.tsx","components/cerebro/AddExternalLink.tsx","components/cerebro/GitHubLinkManager.tsx","components/cerebro/GitHubLinkManagerWrapper.tsx","pages/Cerebro.tsx"],"sourcesContent":["import axios, { AxiosRequestConfig, InternalAxiosRequestConfig } from 'axios';\nimport axiosInstance from '../config/axios.ts';\nimport { API_URL } from '../config/api.ts';\n\n// Debugausgaben fr die API-Konfiguration\nconsole.log('DEBUGAUSGABE API-Client: API_URL ist:', API_URL);\n\n// Verwende die konfigurierte Instanz aus config/axios.ts\nconst apiClient = axiosInstance;\n\n// Request Interceptor fr Debugging (zustzlich zu dem in axios.ts)\napiClient.interceptors.request.use(\n  (config) => {\n    // Vollstndige URL ausgeben\n    const fullUrl = `${config.baseURL}${config.url}`;\n    console.log('DEBUGAUSGABE API-Client: Vollstndige Request URL:', fullUrl);\n    console.log('DEBUGAUSGABE API-Client: Request-Methode:', config.method?.toUpperCase());\n    console.log('DEBUGAUSGABE API-Client: Request-Headers:', config.headers);\n    console.log('DEBUGAUSGABE API-Client: Request-Daten:', config.data);\n    \n    const token = localStorage.getItem('token');\n    console.log('DEBUGAUSGABE API-Client: Token vorhanden:', !!token);\n    \n    return config;\n  },\n  (error) => {\n    console.error('DEBUGAUSGABE API-Client: Fehler im Request Interceptor:', error);\n    return Promise.reject(error);\n  }\n);\n\n// Response Interceptor fr Debugging (zustzlich zu dem in axios.ts)\napiClient.interceptors.response.use(\n  (response) => {\n    console.log('DEBUGAUSGABE API-Client: Response erhalten:', response.status, response.config.url);\n    return response;\n  },\n  (error) => {\n    console.error('DEBUGAUSGABE API-Client: Fehler im Response Interceptor:', error.message);\n    \n    if (error.response) {\n      console.error('DEBUGAUSGABE API-Client: Response Status:', error.response.status);\n      console.error('DEBUGAUSGABE API-Client: Response Daten:', error.response.data);\n    } else {\n      console.error('DEBUGAUSGABE API-Client: Keine Response erhalten');\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\n// User API\nexport const userApi = {\n  getAll: () => apiClient.get('/users'),\n  getById: (id: number) => apiClient.get(`/users/${id}`),\n  create: (data: any) => {\n    console.log('DEBUGAUSGABE API-Client: userApi.create wird aufgerufen mit Daten:', data);\n    try {\n      return apiClient.post('/users', data)\n        .then(response => {\n          console.log('DEBUGAUSGABE API-Client: userApi.create Antwort:', response);\n          return response;\n        })\n        .catch(error => {\n          console.error('DEBUGAUSGABE API-Client: userApi.create Fehler:', error.response || error);\n          throw error;\n        });\n    } catch (initError) {\n      console.error('DEBUGAUSGABE API-Client: Fehler vor dem API-Aufruf in userApi.create:', initError);\n      throw initError;\n    }\n  },\n  update: (id: number, data: any) => apiClient.put(`/users/${id}`, data),\n  updateRoles: (id: number, roleIds: number[]) => apiClient.put(`/users/${id}/roles`, { roleIds })\n};\n\n// Role API\nexport const roleApi = {\n  getAll: () => {\n    console.log('DEBUGAUSGABE API-Client: roleApi.getAll wird aufgerufen');\n    return apiClient.get('/roles')\n      .then(response => {\n        console.log('DEBUGAUSGABE API-Client: roleApi.getAll erfolgreich:', response.data.length, 'Rollen geladen');\n        return response;\n      })\n      .catch(error => {\n        console.error('DEBUGAUSGABE API-Client: roleApi.getAll Fehler:', error.message);\n        throw error;\n      });\n  },\n  getById: (id: number) => {\n    console.log(`DEBUGAUSGABE API-Client: roleApi.getById(${id}) wird aufgerufen`);\n    return apiClient.get(`/roles/${id}`);\n  },\n  create: (data: any) => {\n    console.log('DEBUGAUSGABE API-Client: roleApi.create wird aufgerufen mit Daten:', data);\n    try {\n      return apiClient.post('/roles', data)\n        .then(response => {\n          console.log('DEBUGAUSGABE API-Client: roleApi.create Antwort:', response);\n          return response;\n        })\n        .catch(error => {\n          console.error('DEBUGAUSGABE API-Client: roleApi.create Fehler:', error.response || error);\n          throw error;\n        });\n    } catch (initError) {\n      console.error('DEBUGAUSGABE API-Client: Fehler vor dem API-Aufruf in roleApi.create:', initError);\n      throw initError;\n    }\n  },\n  update: (id: number, data: any) => {\n    console.log(`DEBUGAUSGABE API-Client: roleApi.update fr ID ${id} wird aufgerufen mit Daten:`, data);\n    try {\n      return apiClient.put(`/roles/${id}`, data)\n        .then(response => {\n          console.log('DEBUGAUSGABE API-Client: roleApi.update Antwort:', response);\n          return response;\n        })\n        .catch(error => {\n          console.error('DEBUGAUSGABE API-Client: roleApi.update Fehler:', error.response || error);\n          throw error;\n        });\n    } catch (initError) {\n      console.error('DEBUGAUSGABE API-Client: Fehler vor dem API-Aufruf in roleApi.update:', initError);\n      throw initError;\n    }\n  },\n  delete: (id: number) => {\n    console.log(`DEBUGAUSGABE API-Client: roleApi.delete(${id}) wird aufgerufen`);\n    return apiClient.delete(`/roles/${id}`);\n  }\n};\n\nexport default apiClient; ","import { format, parseISO, differenceInMinutes, parse, getWeek, getYear, addDays, startOfWeek } from 'date-fns';\nimport { de } from 'date-fns/locale';\n\n/**\n * Utility-Funktionen fr die Datums- und Zeitverarbeitung im Frontend.\n * Diese Funktionen sorgen fr eine konsistente Handhabung von Datum und Zeit\n * in allen Komponenten.\n */\n\n/**\n * Formatiert ein Datum fr die Anzeige im deutschen Format.\n * @param dateString Das zu formatierende Datum im Format YYYY-MM-DD\n * @returns Formatiertes Datum im Format DD.MM.YYYY oder '-' bei Fehler\n */\nexport const formatDate = (dateString: string): string => {\n    if (!dateString) return '-';\n    \n    try {\n        // Wir erstellen ein neues Date-Objekt und setzen die Uhrzeit auf 12:00 Mittag\n        // um Probleme mit Zeitzonen zu vermeiden\n        const dateParts = dateString.split('-');\n        if (dateParts.length !== 3) return '-';\n        \n        const year = parseInt(dateParts[0]);\n        const month = parseInt(dateParts[1]) - 1; // Monate sind 0-basiert in JavaScript\n        const day = parseInt(dateParts[2]);\n        \n        const date = new Date(year, month, day, 12, 0, 0);\n        \n        return date.toLocaleDateString('de-DE', {\n            day: '2-digit',\n            month: '2-digit',\n            year: 'numeric'\n        });\n    } catch (error) {\n        console.error('Fehler beim Formatieren des Datums:', error);\n        return '-';\n    }\n};\n\n/**\n * Formatiert eine Zeit fr die Anzeige basierend auf UTC.\n * @param dateString Das zu formatierende Datum im ISO-Format\n * @returns Formatierte Zeit im Format HH:MM oder '-' bei Fehler\n */\nexport const formatTime = (dateString: string): string => {\n    if (!dateString) return '-';\n    \n    try {\n        // Direkt aus dem ISO-String die Uhrzeit extrahieren ohne Umrechnung\n        const date = parseISO(dateString);\n        \n        // Verwende UTC-Stunden und -Minuten, um die DB-Zeit direkt zu zeigen\n        const hours = date.getUTCHours().toString().padStart(2, '0');\n        const minutes = date.getUTCMinutes().toString().padStart(2, '0');\n        \n        return `${hours}:${minutes}`;\n    } catch (error) {\n        console.error(`Fehler beim Formatieren der Zeit fr ${dateString}:`, error);\n        return '-';\n    }\n};\n\n/**\n * Berechnet die Dauer zwischen zwei Zeitpunkten und formatiert sie als \"Nh Nm\".\n * @param startTime Startzeit im ISO-Format\n * @param endTime Endzeit im ISO-Format\n * @returns Formatierte Dauer als \"Nh Nm\" oder '-' bei Fehler\n */\nexport const calculateDuration = (startTime: string, endTime: string | null): string => {\n    if (!startTime || !endTime) return '-';\n    \n    try {\n        // Entferne das 'Z' am Ende der ISO-Strings, um Zeitzonenumrechnungen zu verhindern\n        const startISOString = startTime.endsWith('Z') \n            ? startTime.substring(0, startTime.length - 1)\n            : startTime;\n        \n        const endISOString = endTime.endsWith('Z') \n            ? endTime.substring(0, endTime.length - 1)\n            : endTime;\n        \n        const start = new Date(startISOString);\n        const end = new Date(endISOString);\n        \n        const durationMs = end.getTime() - start.getTime();\n        const durationMinutes = Math.floor(durationMs / (1000 * 60));\n        \n        const hours = Math.floor(durationMinutes / 60);\n        const minutes = durationMinutes % 60;\n        \n        return `${hours}h ${minutes}m`;\n    } catch (error) {\n        console.error('Fehler bei der Dauerberechnung:', error);\n        return '-';\n    }\n};\n\n/**\n * Konvertiert ein Wochenformat (YYYY-Www) in ein Datum (YYYY-MM-DD) fr den Montag dieser Woche.\n * @param weekString Wochenformat im Format YYYY-Www\n * @returns Datum des Montags der Woche im Format YYYY-MM-DD\n */\nexport const convertWeekToDate = (weekString: string): string => {\n    try {\n        // Format: YYYY-Www\n        const year = parseInt(weekString.substring(0, 4));\n        const week = parseInt(weekString.substring(6));\n        \n        // Alternative Methode zur Berechnung des Montags fr eine Kalenderwoche\n        // Statt parse mit yyyy und ww (was einen Fehler verursacht) verwenden wir\n        // einen direkten Algorithmus zur Berechnung\n        \n        // 1. Beginne mit dem ersten Tag des Jahres\n        const firstDayOfYear = new Date(Date.UTC(year, 0, 1, 12, 0, 0));\n        \n        // 2. Finde den ersten Donnerstag des Jahres (fr ISO-Wochen)\n        // Verschiebe den Tag, bis wir am ersten Donnerstag sind\n        const dayOfWeek = firstDayOfYear.getUTCDay(); // 0 = Sonntag, 4 = Donnerstag\n        const daysToThursday = dayOfWeek <= 4 ? 4 - dayOfWeek : 11 - dayOfWeek; // Falls Sonntag ist 7\n        const firstThursday = new Date(Date.UTC(year, 0, 1 + daysToThursday, 12, 0, 0));\n        \n        // 3. Der erste Donnerstag ist immer in der ersten Woche\n        // Jetzt berechnen wir den Donnerstag der gewnschten Woche\n        const targetThursday = new Date(Date.UTC(\n            firstThursday.getUTCFullYear(),\n            firstThursday.getUTCMonth(),\n            firstThursday.getUTCDate() + (7 * (week - 1)),\n            12, 0, 0\n        ));\n        \n        // 4. Berechne den Montag dieser Woche (3 Tage vor dem Donnerstag)\n        const monday = new Date(Date.UTC(\n            targetThursday.getUTCFullYear(),\n            targetThursday.getUTCMonth(),\n            targetThursday.getUTCDate() - 3,\n            12, 0, 0\n        ));\n        \n        // Formatiere das Datum als YYYY-MM-DD\n        const formattedDate = format(monday, 'yyyy-MM-dd');\n        \n        // Protokolliere das berechnete Datum fr Debug-Zwecke\n        console.log(`Konvertierte Woche ${weekString} zu Datum: ${formattedDate} (Wochentag: ${format(monday, 'EEEE', { locale: de })})`);\n        \n        // Zustzliche Sicherheitsberprfung: Stelle sicher, dass es ein Montag ist\n        if (format(monday, 'EEEE', { locale: de }) !== 'Montag') {\n            console.warn(`Berechnetes Datum ist kein Montag! Korrigiere...`);\n            // Finde den nchsten Montag\n            const correctedMonday = startOfWeek(monday, { weekStartsOn: 1 });\n            return format(correctedMonday, 'yyyy-MM-dd');\n        }\n        \n        return formattedDate;\n    } catch (error) {\n        console.error('Fehler beim Konvertieren des Wochendatums:', error);\n        // Im Fehlerfall den letzten Montag als Fallback verwenden\n        const fallbackMonday = startOfWeek(new Date(), { weekStartsOn: 1 });\n        return format(fallbackMonday, 'yyyy-MM-dd');\n    }\n};\n\n/**\n * Prft, ob ein Worktime-Eintrag fr den ausgewhlten Tag relevant ist.\n * @param worktime Der Worktime-Eintrag\n * @param selectedDate Ausgewhltes Datum im Format YYYY-MM-DD\n * @returns true, wenn der Eintrag fr den ausgewhlten Tag relevant ist\n */\nexport const isWorktimeRelevantForSelectedDate = (worktime: any, selectedDate: string): boolean => {\n    try {\n        if (!worktime || !worktime.startTime) return false;\n        \n        // Extrahiere nur den Datumsteil (YYYY-MM-DD) aus dem startTime ISO-String\n        const dateOnly = worktime.startTime.split('T')[0];\n        \n        // Vergleiche mit selectedDate\n        return dateOnly === selectedDate;\n    } catch (error) {\n        console.error(\"Fehler beim Prfen der Relevanz eines Worktime-Eintrags:\", error);\n        return false;\n    }\n};\n\n/**\n * Berechnet die Wochentage von Montag bis Sonntag basierend auf einem Startdatum.\n * @param weekStartDate Montag der Woche im Format YYYY-MM-DD\n * @returns Array von Objekten mit date und day Eigenschaften\n */\nexport const getWeekDays = (weekStartDate: string): Array<{ date: string; day: string }> => {\n    if (!weekStartDate) return [];\n    \n    // Beginne mit dem angegebenen Datum als Montag\n    const weekStart = new Date(weekStartDate);\n    \n    // Berechne alle 7 Tage der Woche\n    const weekDays: Array<{ date: string; day: string }> = [];\n    for (let i = 0; i < 7; i++) {\n        const day = addDays(weekStart, i);\n        const dayInfo = {\n            date: format(day, 'yyyy-MM-dd'),\n            day: format(day, 'EEEE', { locale: de })\n        };\n        weekDays.push(dayInfo);\n    }\n    \n    return weekDays;\n};\n\n/**\n * Formatiert ein ISO-DateTime fr die Anzeige im deutschen Format mit Uhrzeit.\n * Diese Funktion wird speziell fr Cerebro-Artikel verwendet.\n * @param dateTimeString Das zu formatierende Datum im ISO-Format (z.B. 2023-06-15T14:30:00Z)\n * @returns Formatiertes Datum und Uhrzeit im Format DD.MM.YYYY HH:MM\n */\nexport const formatDateTimeForCerebro = (dateTimeString: string): string => {\n    if (!dateTimeString) return '-';\n    \n    try {\n        const date = new Date(dateTimeString);\n        \n        // Datum und Uhrzeit im deutschen Format\n        return date.toLocaleDateString('de-DE', {\n            day: '2-digit',\n            month: '2-digit',\n            year: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n        });\n    } catch (error) {\n        console.error('Fehler beim Formatieren des Datums und der Zeit:', error);\n        return '-';\n    }\n};\n\n/**\n * Hilfsfunktionen fr die Datumsbehandlung im Frontend\n */\n\n/**\n * Erstellt ein Date-Objekt ohne Zeitzonenverschiebung\n * @param dateString Ein ISO-Zeitstring\n * @returns Date-Objekt mit korrigiertem Zeitzonenversatz\n */\nexport const createLocalDate = (dateString: string): Date => {\n  const date = new Date(dateString);\n  // Korrigiere den Zeitzonenversatz\n  return new Date(date.getTime() + date.getTimezoneOffset() * 60000);\n};\n\n/* CLAUDE-ANCHOR: TIMEZONE-CONVERSION-001 - Zentrale Timezone-sichere Konvertierung fr datetime-local Inputs */\n/**\n * KRITISCH: Konvertiert datetime-local Input-Werte korrekt fr die API.\n * \n * PROBLEM: datetime-local gibt lokale Zeit zurck (z.B. \"2024-01-15T14:01\")\n * Wenn wir einfach \":00.000\" anhngen, wird es als UTC interpretiert  5h Unterschied!\n * \n * LSUNG: Explizit als lokale Zeit interpretieren und korrekt formatieren.\n * \n * @param datetimeLocalValue Wert aus datetime-local Input (Format: \"YYYY-MM-DDTHH:mm\")\n * @returns ISO-String der als lokale Zeit interpretiert wird (ohne 'Z' Suffix)\n * \n * @example\n * Input: \"2024-01-15T14:01\" (User gibt 14:01 ein)\n * Output: \"2024-01-15T14:01:00.000\" (wird als lokale Zeit gespeichert)\n * Nicht: \"2024-01-15T14:01:00.000Z\" (wrde als UTC interpretiert)\n */\nexport const convertDatetimeLocalToApi = (datetimeLocalValue: string): string => {\n    if (!datetimeLocalValue) {\n        throw new Error('Datetime-local Wert ist erforderlich');\n    }\n    \n    try {\n        // datetime-local Format: \"YYYY-MM-DDTHH:mm\"\n        // Wir fgen nur Sekunden und Millisekunden hinzu, KEIN 'Z' Suffix\n        const apiFormat = `${datetimeLocalValue}:00.000`;\n        \n        // Zustzliche Validierung: Prfe ob das Format gltig ist\n        if (!/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}$/.test(apiFormat)) {\n            throw new Error(`Ungltiges Datumsformat: ${apiFormat}`);\n        }\n        \n        return apiFormat;\n    } catch (error) {\n        console.error('Fehler bei der Datetime-Local Konvertierung:', error);\n        throw new Error(`Konvertierung von datetime-local fehlgeschlagen: ${datetimeLocalValue}`);\n    }\n};\n\n/**\n * KRITISCH: Konvertiert API-Zeitstempel zurck zu datetime-local Format.\n * \n * Wird verwendet beim Bearbeiten von Zeiten - konvertiert DB-Zeit zurck zu Input-Format.\n * Behandelt sowohl UTC-Timestamps (mit 'Z') als auch lokale Timestamps (ohne 'Z').\n * \n * @param apiTimestamp Zeitstempel aus der API (ISO-String)\n * @returns Formatiert fr datetime-local Input (Format: \"YYYY-MM-DDTHH:mm\")\n * \n * @example\n * Input: \"2024-01-15T14:01:00.000Z\" (UTC aus DB)\n * Output: \"2024-01-15T14:01\" (fr datetime-local Input)\n */\nexport const convertApiToDatetimeLocal = (apiTimestamp: string): string => {\n    if (!apiTimestamp) {\n        throw new Error('API-Timestamp ist erforderlich');\n    }\n    \n    try {\n        // Entferne das 'Z' am Ende des Strings, damit JS den Zeitstempel nicht als UTC interpretiert\n        // Dies ist wichtig fr konsistente Zeitbehandlung\n        const localISOString = apiTimestamp.endsWith('Z')\n            ? apiTimestamp.substring(0, apiTimestamp.length - 1)\n            : apiTimestamp;\n        \n        const date = new Date(localISOString);\n        \n        // Validierung: Prfe ob das Datum gltig ist\n        if (isNaN(date.getTime())) {\n            throw new Error(`Ungltiger Zeitstempel: ${apiTimestamp}`);\n        }\n        \n        // Formatiere fr datetime-local Input: \"YYYY-MM-DDTHH:mm\"\n        const formattedDate = format(date, 'yyyy-MM-dd');\n        const formattedTime = format(date, 'HH:mm');\n        \n        return `${formattedDate}T${formattedTime}`;\n    } catch (error) {\n        console.error('Fehler bei der API-zu-Datetime-Local Konvertierung:', error);\n        throw new Error(`Konvertierung von API-Timestamp fehlgeschlagen: ${apiTimestamp}`);\n    }\n};\n\n/**\n * Formatiert die Gesamtdauer einer Liste von Beratungen in Stunden und Minuten.\n * Bercksichtigt nur abgeschlossene Beratungen (mit endTime).\n * \n * @param consultations Array von Consultation-Objekten\n * @returns Formatierte Gesamtdauer als \"Xh Ym\" oder \"0h 0m\" bei leerer Liste\n * \n * @example\n * // Bei Beratungen mit Gesamtdauer von 125 Minuten\n * formatTotalDuration(consultations) // \"2h 5m\"\n */\nexport const formatTotalDuration = (consultations: Array<{ startTime: string; endTime: string | null }>): string => {\n    try {\n        // Berechne die Gesamtdauer in Minuten\n        const totalMinutes = consultations.reduce((total, consultation) => {\n            // Nur abgeschlossene Beratungen bercksichtigen\n            if (!consultation.endTime) return total;\n            \n            // Berechne Dauer dieser Beratung in Minuten\n            const startTime = consultation.startTime.endsWith('Z') \n                ? consultation.startTime.substring(0, consultation.startTime.length - 1)\n                : consultation.startTime;\n            \n            const endTime = consultation.endTime.endsWith('Z') \n                ? consultation.endTime.substring(0, consultation.endTime.length - 1)\n                : consultation.endTime;\n            \n            const start = new Date(startTime);\n            const end = new Date(endTime);\n            \n            const durationMs = end.getTime() - start.getTime();\n            const durationMinutes = Math.floor(durationMs / (1000 * 60));\n            \n            return total + durationMinutes;\n        }, 0);\n        \n        // Konvertiere zu Stunden und Minuten\n        const hours = Math.floor(totalMinutes / 60);\n        const minutes = totalMinutes % 60;\n        \n        return `${hours}h ${minutes}m`;\n    } catch (error) {\n        console.error('Fehler bei der Formatierung der Gesamtdauer:', error);\n        return '0h 0m';\n    }\n};\n\n/**\n * Prft, ob eine Beratung bereits abgerechnet wurde.\n * \n * @param consultation Consultation-Objekt\n * @returns true wenn abgerechnet, false wenn nicht\n */\nexport const isConsultationInvoiced = (consultation: { invoiceItems?: Array<{ invoice: { status: string } }> }): boolean => {\n    return !!(consultation.invoiceItems && consultation.invoiceItems.length > 0);\n};\n\n/**\n * Holt die Rechnungsinformationen einer Beratung.\n * \n * @param consultation Consultation-Objekt\n * @returns Rechnungsinfo oder null wenn nicht abgerechnet\n */\nexport const getConsultationInvoiceInfo = (consultation: { invoiceItems?: Array<{ invoice: { id: number; invoiceNumber: string; status: string; issueDate: string; total: number } }> }) => {\n    if (!consultation.invoiceItems || consultation.invoiceItems.length === 0) {\n        return null;\n    }\n    \n    // Nimm die erste (und normalerweise einzige) Rechnung\n    const firstItem = consultation.invoiceItems[0];\n    return firstItem.invoice;\n};\n\n/**\n * Erstellt einen benutzerfreundlichen Text fr den Rechnungsstatus.\n * \n * @param status Rechnungsstatus\n * @returns Deutscher Status-Text\n */\nexport const getInvoiceStatusText = (status: 'DRAFT' | 'SENT' | 'PAID' | 'OVERDUE' | 'CANCELLED'): string => {\n    const statusMap = {\n        'DRAFT': 'Entwurf',\n        'SENT': 'Gesendet',\n        'PAID': 'Bezahlt',\n        'OVERDUE': 'berfllig',\n        'CANCELLED': 'Storniert'\n    };\n    return statusMap[status] || status;\n};\n\n/**\n * Gibt die Farbe fr einen Rechnungsstatus zurck.\n * \n * @param status Rechnungsstatus\n * @returns CSS-Klassen fr die Statusfarbe\n */\nexport const getInvoiceStatusColor = (status: 'DRAFT' | 'SENT' | 'PAID' | 'OVERDUE' | 'CANCELLED'): string => {\n    const colorMap = {\n        'DRAFT': 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300',\n        'SENT': 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300',\n        'PAID': 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300',\n        'OVERDUE': 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300',\n        'CANCELLED': 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300'\n    };\n    return colorMap[status] || 'bg-gray-100 text-gray-800';\n}; ","import api from './apiClient.ts';\n\n// Typen fr Artikel\nexport interface CerebroArticle {\n  id: string;\n  title: string;\n  slug: string;\n  content: string | null;\n  parentId: string | null;\n  createdAt: string;\n  updatedAt: string;\n  createdById: string;\n  updatedById: string | null;\n  creatorFirstName: string;\n  creatorLastName: string;\n  updaterFirstName: string | null;\n  updaterLastName: string | null;\n  childrenCount: number;\n  mediaCount: number;\n  linksCount: number;\n  position: number | null;\n  githubPath: string | null;  // Pfad zur GitHub Markdown-Datei\n}\n\nexport interface CerebroArticleDetail extends CerebroArticle {\n  parentTitle: string | null;\n  parentSlug: string | null;\n  children: {\n    id: string;\n    title: string;\n    slug: string;\n  }[];\n  media: CerebroMedia[];\n  externalLinks: CerebroExternalLink[];\n  tasks: {\n    id: string;\n    title: string;\n  }[];\n  requests: {\n    id: string;\n    title: string;\n  }[];\n  tags: string[];\n}\n\nexport interface CerebroArticleStructure {\n  id: string;\n  title: string;\n  slug: string;\n  position?: number | null;\n  children: CerebroArticleStructure[];\n}\n\n// Typen fr Medien\nexport interface CerebroMedia {\n  id: string;\n  filename: string;\n  mimetype: string;\n  path: string;\n  size: number;\n  createdAt: string;\n  createdById: string;\n  creatorFirstName: string;\n  creatorLastName: string;\n  carticleId: string;\n}\n\n// Typen fr externe Links\nexport interface CerebroExternalLink {\n  id: string;\n  url: string;\n  title: string;\n  type: string | null;\n  thumbnail: string | null;\n  createdAt: string;\n  createdById: string;\n  creatorFirstName: string;\n  creatorLastName: string;\n  carticleId: string;\n}\n\nexport interface LinkPreview {\n  title: string | null;\n  thumbnail: string | null;\n  type: string | null;\n}\n\n// Artikel API\nconst articlesApi = {\n  // Alle Artikel abrufen\n  getAllArticles: async (): Promise<CerebroArticle[]> => {\n    const response = await api.get('/cerebro/carticles');\n    return response.data;\n  },\n  \n  // Artikel nach ID abrufen\n  getArticleById: async (id: string): Promise<CerebroArticleDetail> => {\n    const response = await api.get(`/cerebro/carticles/${id}`);\n    return response.data;\n  },\n  \n  // Artikel nach Slug abrufen\n  getArticleBySlug: async (slug: string): Promise<CerebroArticleDetail> => {\n    const response = await api.get(`/cerebro/carticles/slug/${slug}`);\n    return response.data;\n  },\n  \n  // Artikel-Struktur abrufen\n  getArticlesStructure: async (): Promise<CerebroArticleStructure[]> => {\n    const response = await api.get('/cerebro/carticles/structure');\n    return response.data;\n  },\n  \n  // Artikel erstellen\n  createArticle: async (data: {\n    title: string;\n    parentId?: string | null;\n    content?: string;\n  }): Promise<CerebroArticle> => {\n    const response = await api.post('/cerebro/carticles', data);\n    return response.data;\n  },\n  \n  // Artikel aktualisieren\n  updateArticle: async (\n    id: string,\n    data: {\n      title?: string;\n      parentId?: string | null;\n      content?: string;\n    }\n  ): Promise<CerebroArticle> => {\n    const response = await api.put(`/cerebro/carticles/${id}`, data);\n    return response.data;\n  },\n  \n  // Artikel lschen\n  deleteArticle: async (id: string): Promise<void> => {\n    await api.delete(`/cerebro/carticles/${id}`);\n  },\n  \n  // Artikel suchen\n  searchArticles: async (query: string): Promise<CerebroArticle[]> => {\n    const response = await api.get(`/cerebro/carticles/search?q=${encodeURIComponent(query)}`);\n    return response.data;\n  },\n};\n\n// Medien API\nconst mediaApi = {\n  // Medien nach Artikel-ID abrufen\n  getMediaByArticle: async (carticleId: string): Promise<CerebroMedia[]> => {\n    const response = await api.get(`/cerebro/media/carticle/${carticleId}`);\n    return response.data;\n  },\n  \n  // Medien nach ID abrufen\n  getMediaById: async (id: string): Promise<CerebroMedia> => {\n    const response = await api.get(`/cerebro/media/${id}`);\n    return response.data;\n  },\n  \n  // Medien hochladen\n  uploadMedia: async (\n    formData: FormData,\n    onUploadProgress?: (progressEvent: any) => void\n  ): Promise<CerebroMedia> => {\n    const response = await api.post('/cerebro/media', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n      onUploadProgress,\n    });\n    return response.data;\n  },\n  \n  // Medien lschen\n  deleteMedia: async (id: string): Promise<void> => {\n    await api.delete(`/cerebro/media/${id}`);\n  },\n  \n  // Dateiname aktualisieren\n  updateMediaFilename: async (id: string, filename: string): Promise<CerebroMedia> => {\n    const response = await api.put(`/cerebro/media/${id}`, { filename });\n    return response.data;\n  },\n};\n\n// Externe Links API\nconst externalLinksApi = {\n  // Links nach Artikel-ID abrufen\n  getLinksByArticle: async (carticleId: string): Promise<CerebroExternalLink[]> => {\n    const response = await api.get(`/cerebro/links/carticle/${carticleId}`);\n    return response.data;\n  },\n  \n  // Link nach ID abrufen\n  getLinkById: async (id: string): Promise<CerebroExternalLink> => {\n    const response = await api.get(`/cerebro/links/${id}`);\n    return response.data;\n  },\n  \n  // Link-Vorschau abrufen\n  getLinkPreview: async (url: string): Promise<LinkPreview> => {\n    const response = await api.get(`/cerebro/links/preview?url=${encodeURIComponent(url)}`);\n    return response.data;\n  },\n  \n  // Link erstellen\n  createLink: async (link: {\n    url: string;\n    title?: string;\n    carticleSlug: string;\n  }): Promise<CerebroExternalLink> => {\n    const response = await api.post('/cerebro/links', link);\n    return response.data;\n  },\n  \n  // Link aktualisieren\n  updateLink: async (id: string, title: string): Promise<CerebroExternalLink> => {\n    const response = await api.put(`/cerebro/links/${id}`, { title });\n    return response.data;\n  },\n  \n  // Link lschen\n  deleteLink: async (id: string): Promise<void> => {\n    await api.delete(`/cerebro/links/${id}`);\n  },\n  \n  // Link erstellen\n  createExternalLink: async (data: {\n    carticleSlug: string;\n    url: string;\n    title?: string;\n    type?: string;\n  }): Promise<CerebroExternalLink> => {\n    const response = await api.post('/api/cerebro/links', data);\n    return response.data;\n  },\n  \n  // Link aktualisieren\n  updateExternalLink: async (\n    id: string,\n    data: {\n      url?: string;\n      title?: string;\n      type?: string;\n    }\n  ): Promise<CerebroExternalLink> => {\n    const response = await api.put(`/api/cerebro/links/${id}`, data);\n    return response.data;\n  },\n  \n  // Link lschen\n  deleteExternalLink: async (id: string): Promise<void> => {\n    await api.delete(`/api/cerebro/links/${id}`);\n  },\n};\n\n// Export des gesamten API-Clients\nexport const cerebroApi = {\n  articles: articlesApi,\n  media: mediaApi,\n  externalLinks: externalLinksApi,\n}; ","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { cerebroApi, CerebroArticle } from '../../api/cerebroApi.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\n\n// Icons\nimport { FaPlus, FaSearch, FaSortAlphaDown, FaSortAlphaUp, FaSortAmountDown, FaSortAmountUp } from 'react-icons/fa';\n\n// Typen fr die Props\ninterface ArticleListProps {\n  limit?: number;\n  searchQuery?: string;\n}\n\n// Artikellisten-Komponente\nconst ArticleList: React.FC<ArticleListProps> = ({ limit, searchQuery: initialSearchQuery }) => {\n  const [articles, setArticles] = useState<CerebroArticle[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchQuery, setSearchQuery] = useState<string>(initialSearchQuery || '');\n  const [sortBy, setSortBy] = useState<'title' | 'updatedAt'>('updatedAt');\n  const [sortDirection, setSortDirection] = useState<'asc' | 'desc'>('desc');\n  \n  const navigate = useNavigate();\n  const { hasPermission } = usePermissions();\n  const canCreateArticle = hasPermission('cerebro', 'write', 'cerebro');\n  \n  // Artikel laden\n  useEffect(() => {\n    const fetchArticles = async () => {\n      try {\n        setLoading(true);\n        \n        // Wenn ein Suchbegriff bergeben wurde, direkt danach suchen\n        if (initialSearchQuery) {\n          const data = await cerebroApi.articles.searchArticles(initialSearchQuery);\n          setArticles(data);\n        } else {\n          // Ansonsten alle Artikel laden\n          const data = await cerebroApi.articles.getAllArticles();\n          setArticles(data);\n        }\n        \n        setError(null);\n      } catch (err) {\n        console.error('Fehler beim Laden der Artikel:', err);\n        setError('Fehler beim Laden der Artikel. Bitte versuchen Sie es spter erneut.');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchArticles();\n  }, [initialSearchQuery]);\n  \n  // Artikel suchen\n  const handleSearch = async () => {\n    if (!searchQuery.trim()) {\n      // Bei leerem Suchbegriff alle Artikel abrufen\n      try {\n        setLoading(true);\n        const data = await cerebroApi.articles.getAllArticles();\n        setArticles(data);\n        setError(null);\n      } catch (err) {\n        console.error('Fehler beim Laden der Artikel:', err);\n        setError('Fehler beim Laden der Artikel. Bitte versuchen Sie es spter erneut.');\n      } finally {\n        setLoading(false);\n      }\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      const data = await cerebroApi.articles.searchArticles(searchQuery);\n      setArticles(data);\n      setError(null);\n    } catch (err) {\n      console.error('Fehler bei der Suche:', err);\n      setError('Fehler bei der Suche. Bitte versuchen Sie es spter erneut.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  // Sortierung umschalten\n  const toggleSort = (field: 'title' | 'updatedAt') => {\n    if (sortBy === field) {\n      // Sortierrichtung umschalten\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n    } else {\n      // Sortierfeld ndern und Richtung zurcksetzen\n      setSortBy(field);\n      setSortDirection('asc');\n    }\n  };\n  \n  // Artikel sortieren\n  const sortedArticles = [...articles].sort((a, b) => {\n    if (sortBy === 'title') {\n      return sortDirection === 'asc' \n        ? a.title.localeCompare(b.title) \n        : b.title.localeCompare(a.title);\n    } else {\n      const dateA = new Date(a.updatedAt).getTime();\n      const dateB = new Date(b.updatedAt).getTime();\n      return sortDirection === 'asc' ? dateA - dateB : dateB - dateA;\n    }\n  });\n  \n  // Zum Artikel navigieren\n  const navigateToArticle = (slug: string) => {\n    navigate(`/cerebro/${slug}`);\n  };\n  \n  // Neuen Artikel erstellen\n  const navigateToCreateArticle = () => {\n    navigate('/cerebro/create');\n  };\n  \n  // Formatierungsfunktion fr Datum\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString('de-DE', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  \n  // Hilfsfunktion fr den Anzeigenamen des Erstellers\n  const getCreatorName = (article: CerebroArticle) => {\n    if (article.creatorFirstName && article.creatorLastName) {\n      return `${article.creatorFirstName} ${article.creatorLastName}`;\n    }\n    return 'Unbekannt';\n  };\n\n  // Hilfsfunktion fr den bergeordneten Artikel\n  const getParentTitle = (article: CerebroArticle) => {\n    // Die parentId ist vorhanden, aber nicht der Titel des bergeordneten Artikels\n    // in der Standard-Artikelliste\n    return article.parentId ? 'Vorhanden' : 'Keine';\n  };\n  \n  return (\n    <div className=\"container mx-auto px-4 py-6\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <h1 className=\"text-2xl font-bold dark:text-white\">Cerebro</h1>\n        {canCreateArticle && (\n          <button\n            className=\"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded flex items-center\"\n            onClick={navigateToCreateArticle}\n          >\n            <FaPlus className=\"mr-2\" /> Neuer Artikel\n          </button>\n        )}\n      </div>\n      \n      {/* Suchleiste */}\n      <div className=\"mb-6\">\n        <div className=\"flex\">\n          <input\n            type=\"text\"\n            className=\"w-full md:w-[300px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-l-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n            placeholder=\"Artikel suchen...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            onKeyDown={(e) => e.key === 'Enter' && handleSearch()}\n          />\n          <button\n            className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-r-md flex items-center\"\n            onClick={handleSearch}\n          >\n            <FaSearch />\n          </button>\n        </div>\n      </div>\n      \n      {/* Fehlermeldung */}\n      {error && (\n        <div className=\"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4\">\n          {error}\n        </div>\n      )}\n      \n      {/* Ladeindikator */}\n      {loading ? (\n        <div className=\"flex justify-center items-center py-8\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 dark:border-blue-400\"></div>\n        </div>\n      ) : (\n        <>\n          {/* Artikeltabelle */}\n          {articles.length === 0 ? (\n            <div className=\"text-center py-8 text-gray-500 dark:text-gray-400\">\n              {searchQuery ? 'Keine Artikel gefunden, die Ihren Suchkriterien entsprechen.' : 'Noch keine Artikel vorhanden.'}\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto bg-white dark:bg-gray-800 rounded-lg shadow\">\n              <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n                <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                  <tr>\n                    <th\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer\"\n                      onClick={() => toggleSort('title')}\n                    >\n                      <div className=\"flex items-center\">\n                        Titel\n                        {sortBy === 'title' && (\n                          sortDirection === 'asc' ? <FaSortAlphaDown className=\"ml-1\" /> : <FaSortAlphaUp className=\"ml-1\" />\n                        )}\n                      </div>\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                      Erstellt von\n                    </th>\n                    <th\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer\"\n                      onClick={() => toggleSort('updatedAt')}\n                    >\n                      <div className=\"flex items-center\">\n                        Zuletzt aktualisiert\n                        {sortBy === 'updatedAt' && (\n                          sortDirection === 'asc' ? <FaSortAmountDown className=\"ml-1\" /> : <FaSortAmountUp className=\"ml-1\" />\n                        )}\n                      </div>\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                      bergeordnet\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                  {sortedArticles.map((article) => (\n                    <tr\n                      key={article.id}\n                      className=\"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer\"\n                      onClick={() => navigateToArticle(article.slug)}\n                    >\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm font-medium text-gray-900 dark:text-white\">{article.title}</div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400\">{getCreatorName(article)}</div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400\">{formatDate(article.updatedAt)}</div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                          {getParentTitle(article)}\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default ArticleList; ","import React, { useState, useEffect } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport rehypeRaw from 'rehype-raw';\nimport rehypeSanitize from 'rehype-sanitize';\nimport 'github-markdown-css/github-markdown.css'; // GitHub-Styling importieren\n\ninterface GitHubMarkdownViewerProps {\n  owner: string;\n  repo: string;\n  path: string;\n  branch?: string;\n}\n\nconst GitHubMarkdownViewer: React.FC<GitHubMarkdownViewerProps> = ({ \n  owner, \n  repo, \n  path, \n  branch = 'main' \n}) => {\n  const [content, setContent] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchMarkdown = async () => {\n      try {\n        setLoading(true);\n        // Erstellt die URL zur Rohdatei (raw) auf GitHub\n        const url = `https://raw.githubusercontent.com/${owner}/${repo}/${branch}/${path}`;\n        \n        const response = await fetch(url);\n        \n        if (!response.ok) {\n          throw new Error(`HTTP Fehler! Status: ${response.status}`);\n        }\n        \n        const markdownContent = await response.text();\n        setContent(markdownContent);\n        setError(null);\n      } catch (err) {\n        console.error('Fehler beim Laden der Markdown-Datei:', err);\n        setError(`Die Markdown-Datei konnte nicht geladen werden: ${err instanceof Error ? err.message : 'Unbekannter Fehler'}`);\n        setContent('');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchMarkdown();\n  }, [owner, repo, path, branch]);\n\n  // Vereinfachte Code-Komponenten ohne SyntaxHighlighter\n  const components = {\n    code({ node, inline, className, children, ...props }: any) {\n      const match = /language-(\\w+)/.exec(className || '');\n      return !inline && match ? (\n        <pre className={`language-${match[1]} dark:bg-gray-800 dark:border-gray-700`}>\n          <code className={`${className} dark:text-gray-200`} {...props}>\n            {String(children).replace(/\\n$/, '')}\n          </code>\n        </pre>\n      ) : (\n        <code className={`${className || ''} dark:bg-gray-800 dark:text-gray-200`} {...props}>\n          {children}\n        </code>\n      );\n    },\n    // Spezielle Handhabung fr berschriften, um konsistentes Styling zu gewhrleisten\n    h1: (props: any) => <h1 className=\"text-2xl font-bold mb-4 border-b border-gray-200 dark:border-gray-700 pb-2 dark:text-white\" {...props} />,\n    h2: (props: any) => <h2 className=\"text-xl font-bold mt-6 mb-4 border-b border-gray-200 dark:border-gray-700 pb-2 dark:text-white\" {...props} />,\n    h3: (props: any) => <h3 className=\"text-lg font-bold mt-5 mb-3 dark:text-white\" {...props} />,\n    // Spezielle Handhabung fr Links\n    a: (props: any) => <a className=\"text-blue-600 dark:text-blue-400 hover:underline\" target=\"_blank\" rel=\"noopener noreferrer\" {...props} />,\n    // Tabellen\n    table: (props: any) => <table className=\"border-collapse border border-gray-300 dark:border-gray-700 my-4\" {...props} />,\n    th: (props: any) => <th className=\"border border-gray-300 dark:border-gray-700 px-4 py-2 bg-gray-100 dark:bg-gray-800 dark:text-gray-200\" {...props} />,\n    td: (props: any) => <td className=\"border border-gray-300 dark:border-gray-700 px-4 py-2 dark:text-gray-200\" {...props} />,\n    // Listen\n    ul: (props: any) => <ul className=\"list-disc pl-5 mb-4 dark:text-gray-200\" {...props} />,\n    ol: (props: any) => <ol className=\"list-decimal pl-5 mb-4 dark:text-gray-200\" {...props} />,\n    li: (props: any) => <li className=\"mb-1 dark:text-gray-200\" {...props} />,\n    // Bilder\n    img: (props: any) => <img className=\"max-w-full h-auto my-4\" {...props} />,\n    // Paragraph\n    p: (props: any) => <p className=\"dark:text-gray-200 mb-4\" {...props} />,\n    // Blockquote\n    blockquote: (props: any) => <blockquote className=\"border-l-4 border-gray-300 dark:border-gray-700 pl-4 py-2 italic text-gray-600 dark:text-gray-400\" {...props} />\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center p-8\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 dark:border-blue-400\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded\">\n        <h3 className=\"font-bold\">Fehler</h3>\n        <p>{error}</p>\n        <p className=\"mt-2\">\n          Prfe, ob die Datei\n          <a \n            href={`https://github.com/${owner}/${repo}/blob/${branch}/${path}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-blue-600 dark:text-blue-400 hover:underline ml-1\"\n          >\n            {path}\n          </a>\n          {' '}im Repository existiert.\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"github-markdown-content\">\n      <div className=\"bg-gray-100 dark:bg-gray-700 p-2 mb-4 rounded text-sm flex justify-between items-center\">\n        <span className=\"dark:text-gray-300\">\n          Datei: <code className=\"bg-white dark:bg-gray-800 px-1 py-0.5 rounded\">{path}</code>\n        </span>\n        <a \n          href={`https://github.com/${owner}/${repo}/blob/${branch}/${path}`}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"text-blue-600 dark:text-blue-400 hover:underline text-sm\"\n        >\n          Auf GitHub anzeigen \n        </a>\n      </div>\n      \n      {/* GitHub-spezifische CSS-Klasse anwenden */}\n      <div className=\"markdown-body dark:bg-gray-800 dark:text-white\">\n        <ReactMarkdown \n          components={components}\n          remarkPlugins={[remarkGfm]}\n          rehypePlugins={[rehypeRaw, rehypeSanitize]}\n        >\n          {content}\n        </ReactMarkdown>\n      </div>\n    </div>\n  );\n};\n\nexport default GitHubMarkdownViewer; ","import React, { useState } from 'react';\r\n\r\ninterface CollapsibleCodeProps {\r\n  children: React.ReactNode;\r\n  language?: string;\r\n  filename?: string;\r\n}\r\n\r\nconst CollapsibleCode: React.FC<CollapsibleCodeProps> = ({ \r\n  children, \r\n  language = '', \r\n  filename = ''\r\n}) => {\r\n  const [isCollapsed, setIsCollapsed] = useState<boolean>(false);\r\n  \r\n  // Titel fr den Header bestimmen\r\n  const title = filename || (language ? `${language.toUpperCase()} Code` : 'Code');\r\n  \r\n  return (\r\n    <div className=\"border rounded-md overflow-hidden mb-4 dark:border-gray-700\">\r\n      <div \r\n        className=\"flex items-center justify-between p-2 bg-gray-100 dark:bg-gray-800 cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\r\n        onClick={() => setIsCollapsed(!isCollapsed)}\r\n      >\r\n        <div className=\"flex items-center\">\r\n          <span className=\"mr-2 font-bold text-gray-600 dark:text-gray-400\">\r\n            {isCollapsed ? '' : ''}\r\n          </span>\r\n          <span className=\"mr-2 text-blue-600 dark:text-blue-400\">\r\n            &lt;/&gt;\r\n          </span>\r\n          <span className=\"font-medium text-gray-800 dark:text-gray-200\">{title}</span>\r\n        </div>\r\n        <div className=\"text-xs text-gray-500 dark:text-gray-400 bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded\">\r\n          {isCollapsed ? 'Ausklappen' : 'Einklappen'}\r\n        </div>\r\n      </div>\r\n      \r\n      <div className={`transition-all duration-300 ${isCollapsed ? 'max-h-0 opacity-0 overflow-hidden' : 'max-h-full opacity-100'}`}>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CollapsibleCode; ","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport rehypeRaw from 'rehype-raw';\nimport { cerebroApi, CerebroArticleDetail, CerebroMedia, CerebroExternalLink } from '../../api/cerebroApi.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport GitHubMarkdownViewer from './GitHubMarkdownViewer.tsx';\nimport CollapsibleCode from './CollapsibleCode.tsx';\nimport { formatDateTimeForCerebro } from '../../utils/dateUtils.ts';\n\n// Heroicons\nimport { \n  ArrowLeftIcon,\n  PencilIcon,\n  TrashIcon,\n  PlusIcon,\n  UserCircleIcon,\n  ClockIcon,\n  ArrowDownTrayIcon,\n  LinkIcon,\n  DocumentIcon,\n  PhotoIcon,\n  FilmIcon,\n  DocumentTextIcon,\n  ArrowTopRightOnSquareIcon\n} from '@heroicons/react/24/outline';\n\n// Typen fr die Medienvorschau\ntype MediaType = 'image' | 'video' | 'pdf' | 'other';\n\n// Medientyp basierend auf MIME-Typ bestimmen\nconst getMediaType = (mimetype: string): MediaType => {\n  if (mimetype.startsWith('image/')) return 'image';\n  if (mimetype.startsWith('video/')) return 'video';\n  if (mimetype === 'application/pdf') return 'pdf';\n  return 'other';\n};\n\n// Icon-Implementierung mit Heroicons\nconst Icon = {\n  Image: () => <PhotoIcon className=\"h-6 w-6 text-blue-500\" />,\n  Video: () => <FilmIcon className=\"h-6 w-6 text-red-500\" />,\n  PDF: () => <DocumentTextIcon className=\"h-6 w-6 text-red-700\" />,\n  File: () => <DocumentIcon className=\"h-6 w-6 text-gray-500\" />,\n  Download: () => <ArrowDownTrayIcon className=\"h-5 w-5 mr-1\" />,\n  GitHub: () => <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-gray-800\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z\"/></svg>,\n  ExternalLink: () => <ArrowTopRightOnSquareIcon className=\"h-5 w-5 text-green-600\" />,\n  Link: () => <LinkIcon className=\"h-5 w-5 mr-1\" />,\n  Spinner: () => <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>,\n  ArrowLeft: () => <ArrowLeftIcon className=\"h-5 w-5 mr-2\" />,\n  Edit: () => <PencilIcon className=\"h-5 w-5 mr-1\" />,\n  Trash: () => <TrashIcon className=\"h-5 w-5 mr-1\" />,\n  User: () => <UserCircleIcon className=\"h-5 w-5 mr-1\" />,\n  Clock: () => <ClockIcon className=\"h-5 w-5 mr-1\" />,\n  Plus: () => <PlusIcon className=\"h-5 w-5 mr-1\" />\n};\n\n// Medienvorschau-Komponente\nconst MediaPreview: React.FC<{ media: CerebroMedia }> = ({ media }) => {\n  const mediaType = getMediaType(media.mimetype);\n  const mediaPath = `/uploads/cerebro/${media.path.split('/').pop()}`;\n  \n  // Icon basierend auf Medientyp\n  const getMediaIcon = () => {\n    switch(mediaType) {\n      case 'image': return <Icon.Image />;\n      case 'video': return <Icon.Video />;\n      case 'pdf': return <Icon.PDF />;\n      default: return <Icon.File />;\n    }\n  };\n  \n  return (\n    <div className=\"border rounded p-3 mb-2 hover:bg-gray-50\">\n      <div className=\"flex items-center\">\n        {getMediaIcon()}\n        <span className=\"ml-2 flex-grow\">{media.filename}</span>\n        <a \n          href={mediaPath} \n          download={media.filename}\n          className=\"text-blue-600 hover:text-blue-800 flex items-center\"\n        >\n          <Icon.Download /> Download\n        </a>\n      </div>\n      \n      {mediaType === 'image' && (\n        <div className=\"mt-2\">\n          <img \n            src={mediaPath} \n            alt={media.filename} \n            className=\"max-w-full h-auto rounded\"\n            style={{ maxHeight: '200px' }}\n          />\n        </div>\n      )}\n      \n      {mediaType === 'video' && (\n        <div className=\"mt-2\">\n          <video \n            controls \n            className=\"max-w-full rounded\"\n            style={{ maxHeight: '200px' }}\n          >\n            <source src={mediaPath} type={media.mimetype} />\n            Ihr Browser untersttzt das Video-Tag nicht.\n          </video>\n        </div>\n      )}\n      \n      {mediaType === 'pdf' && (\n        <div className=\"mt-2\">\n          <iframe \n            src={`${mediaPath}#view=FitH`} \n            className=\"w-full rounded border\"\n            style={{ height: '200px' }}\n            title={media.filename}\n          ></iframe>\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Externe Link Vorschau\nconst ExternalLinkPreview: React.FC<{ link: CerebroExternalLink }> = ({ link }) => {\n  const isGoogleDrive = link.type === 'google_drive';\n  const isYoutube = link.type === 'youtube';\n  const isGitHubMarkdown = link.type === 'github_markdown';\n  \n  // GitHub URL parsen\n  const parseGitHubUrl = (url: string): { owner: string; repo: string; path: string; branch: string; } | null => {\n    try {\n      let owner = '';\n      let repo = '';\n      let path = '';\n      let branch = '';\n      \n      if (url.includes('raw.githubusercontent.com')) {\n        const parts = url.replace('https://raw.githubusercontent.com/', '').split('/');\n        owner = parts[0];\n        repo = parts[1];\n        branch = parts[2];\n        path = parts.slice(3).join('/');\n      } else if (url.includes('github.com')) {\n        const parts = url.replace('https://github.com/', '').split('/');\n        owner = parts[0];\n        repo = parts[1];\n        const typeIndex = parts.indexOf('blob') !== -1 ? parts.indexOf('blob') : parts.indexOf('raw');\n        branch = parts[typeIndex + 1];\n        path = parts.slice(typeIndex + 2).join('/');\n      } else {\n        return null;\n      }\n      \n      return { owner, repo, path, branch };\n    } catch (err) {\n      console.error('Fehler beim Parsen der GitHub-URL:', err);\n      return null;\n    }\n  };\n  \n  // Fr GitHub Markdown-Links\n  const githubInfo = isGitHubMarkdown ? parseGitHubUrl(link.url) : null;\n  \n  return (\n    <div className=\"border rounded p-3 mb-2 hover:bg-gray-50\">\n      <div className=\"flex items-center\">\n        {isGitHubMarkdown ? (\n          <Icon.GitHub />\n        ) : (\n          <Icon.ExternalLink />\n        )}\n        <span className=\"ml-2 flex-grow\">{link.title || link.url}</span>\n        <a \n          href={link.url} \n          target=\"_blank\" \n          rel=\"noopener noreferrer\"\n          className=\"text-blue-600 hover:text-blue-800 flex items-center\"\n        >\n                <Icon.Link /> {t('cerebro.actions.open')}\n        </a>\n      </div>\n      \n      {isGoogleDrive && (\n        <div className=\"mt-2\">\n          <iframe \n            src={`${link.url.replace('view', 'preview')}`} \n            className=\"w-full rounded border\"\n            style={{ height: '300px' }}\n            title={link.title || 'Google Drive Dokument'}\n            allow=\"autoplay\"\n          ></iframe>\n        </div>\n      )}\n      \n      {isYoutube && (\n        <div className=\"mt-2\">\n          <iframe \n            src={link.url.replace('watch?v=', 'embed/')} \n            className=\"w-full rounded border\"\n            style={{ height: '300px' }}\n            title={link.title || 'YouTube Video'}\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n            allowFullScreen\n          ></iframe>\n        </div>\n      )}\n      \n      {isGitHubMarkdown && githubInfo && (\n        <div className=\"mt-2\">\n          <div className=\"bg-gray-100 p-2 rounded mb-2 flex items-center text-xs\">\n            <span className=\"font-mono text-gray-600\">{githubInfo.owner}/{githubInfo.repo}/{githubInfo.path}</span>\n            <span className=\"ml-2 px-2 py-1 bg-gray-200 rounded\">{githubInfo.branch}</span>\n          </div>\n          <GitHubMarkdownViewer\n            owner={githubInfo.owner}\n            repo={githubInfo.repo}\n            path={githubInfo.path}\n            branch={githubInfo.branch}\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n\n// Hauptkomponente fr die Artikelansicht\nconst ArticleView: React.FC = () => {\n  const { t } = useTranslation();\n  const { slug } = useParams<{ slug: string }>();\n  const navigate = useNavigate();\n  const { hasPermission } = usePermissions();\n  \n  const [article, setArticle] = useState<CerebroArticleDetail | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [githubLinks, setGithubLinks] = useState<CerebroExternalLink[]>([]);\n  const [externalLinks, setExternalLinks] = useState<CerebroExternalLink[]>([]);\n  const [mediaFiles, setMediaFiles] = useState<CerebroMedia[]>([]);\n  const [selectedGithubLink, setSelectedGithubLink] = useState<CerebroExternalLink | null>(null);\n  \n  // berprfen der Berechtigungen an die richtigen Berechtigungen anpassen\n  const hasCerebroButtonPermission = hasPermission('cerebro', 'both', 'button');\n  const hasCerebroPagePermission = hasPermission('cerebro', 'both', 'page');\n  \n  useEffect(() => {\n    const fetchArticle = async () => {\n      if (!slug) return;\n      \n      try {\n        setLoading(true);\n        \n        // Artikel und verknpfte Daten laden\n        const articleData = await cerebroApi.articles.getArticleBySlug(slug);\n        setArticle(articleData);\n        \n        // Sortiere GitHub-Markdown Links und andere externe Links\n        const github = articleData.externalLinks.filter(link => link.type === 'github_markdown');\n        const other = articleData.externalLinks.filter(link => link.type !== 'github_markdown');\n        \n        setGithubLinks(github);\n        setExternalLinks(other);\n        setMediaFiles(articleData.media);\n        \n        if (github.length > 0) {\n          setSelectedGithubLink(github[0]);\n        }\n        \n        setError(null);\n      } catch (err) {\n        console.error('Fehler beim Laden des Artikels:', err);\n        setError(t('cerebro.messages.loadError'));\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchArticle();\n  }, [slug]);\n  \n  const handleDeleteArticle = async () => {\n    if (!article || !window.confirm(t('cerebro.messages.deleteConfirm'))) {\n      return;\n    }\n    \n    try {\n      await cerebroApi.articles.deleteArticle(article.id);\n      navigate('/cerebro');\n    } catch (err) {\n      console.error('Fehler beim Lschen des Artikels:', err);\n      alert(t('cerebro.messages.deleteError'));\n    }\n  };\n  \n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center p-8\">\n        <Icon.Spinner />\n      </div>\n    );\n  }\n  \n  if (error || !article) {\n    return (\n      <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\n        <h3 className=\"font-bold\">{t('common.error')}</h3>\n        <p>{error || t('cerebro.messages.articleNotFound')}</p>\n        <button \n          onClick={() => navigate('/cerebro')}\n          className=\"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded flex items-center\"\n        >\n          <Icon.ArrowLeft /> {t('cerebro.actions.back')}\n        </button>\n      </div>\n    );\n  }\n  \n  // Artikel-Komponente rendern\n  const renderContent = () => {\n    // Prfe, ob der Artikel mit GitHub-Markdown verknpft ist und ein Link ausgewhlt ist\n    if (selectedGithubLink) {\n      // GitHub-Markdown-Links parsen\n      const parseGitHubUrl = (url: string): { owner: string; repo: string; path: string; branch: string; } | null => {\n        try {\n          let owner = '';\n          let repo = '';\n          let path = '';\n          let branch = '';\n          \n          if (url.includes('raw.githubusercontent.com')) {\n            const parts = url.replace('https://raw.githubusercontent.com/', '').split('/');\n            owner = parts[0];\n            repo = parts[1];\n            branch = parts[2];\n            path = parts.slice(3).join('/');\n          } else if (url.includes('github.com')) {\n            const parts = url.replace('https://github.com/', '').split('/');\n            owner = parts[0];\n            repo = parts[1];\n            const typeIndex = parts.indexOf('blob') !== -1 ? parts.indexOf('blob') : parts.indexOf('raw');\n            branch = parts[typeIndex + 1];\n            path = parts.slice(typeIndex + 2).join('/');\n          } else {\n            return null;\n          }\n          \n          return { owner, repo, path, branch };\n        } catch (err) {\n          console.error('Fehler beim Parsen der GitHub-URL:', err);\n          return null;\n        }\n      };\n      \n      const githubInfo = parseGitHubUrl(selectedGithubLink.url);\n      \n      if (githubInfo) {\n        return (\n          <div>\n            <div className=\"bg-gray-100 p-2 rounded mb-4 flex justify-between items-center text-xs\">\n              <div>\n                <span className=\"font-mono text-gray-600\">{githubInfo.owner}/{githubInfo.repo}/{githubInfo.path}</span>\n                <span className=\"ml-2 px-2 py-1 bg-gray-200 rounded\">{githubInfo.branch}</span>\n              </div>\n              <a \n                href={selectedGithubLink.url} \n                target=\"_blank\" \n                rel=\"noopener noreferrer\"\n                className=\"text-blue-600 hover:text-blue-800 flex items-center\"\n              >\n                <Icon.Link /> {t('cerebro.actions.viewOnGitHub')}\n              </a>\n            </div>\n            <GitHubMarkdownViewer\n              owner={githubInfo.owner}\n              repo={githubInfo.repo}\n              path={githubInfo.path}\n              branch={githubInfo.branch}\n            />\n          </div>\n        );\n      }\n    }\n    \n    // Standard-Markdown-Rendering fr den Artikelinhalt\n    return (\n      <ReactMarkdown \n        remarkPlugins={[remarkGfm]}\n        rehypePlugins={[rehypeRaw]}\n        components={{\n          code: ({ node, className, children, ...props }: any) => {\n            const match = /language-(\\w+)/.exec(className || '');\n            if (!props.inline && match) {\n              const language = match[1];\n              const code = String(children).replace(/\\n$/, '');\n              \n              if (code.length > 500) {\n                return (\n                  <CollapsibleCode language={language}>\n                    <pre className={`language-${language} bg-gray-100 p-4 rounded overflow-auto`}>\n                      <code className={className} {...props}>\n                        {code}\n                      </code>\n                    </pre>\n                  </CollapsibleCode>\n                );\n              }\n              \n              try {\n                return (\n                  <div className=\"bg-gray-800 p-4 rounded overflow-auto\">\n                    <pre className={className}>\n                      <code {...props}>\n                        {code}\n                      </code>\n                    </pre>\n                  </div>\n                );\n              } catch (err) {\n                console.error('Error rendering syntax highlighter:', err);\n                return (\n                  <pre className={`language-${language} bg-gray-100 p-4 rounded overflow-auto`}>\n                    <code className={className} {...props}>\n                      {code}\n                    </code>\n                  </pre>\n                );\n              }\n            }\n            return (\n              <code className={className} {...props}>\n                {children}\n              </code>\n            );\n          }\n        }}\n      >\n        {article.content}\n      </ReactMarkdown>\n    );\n  };\n  \n  return (\n    <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n      {/* Aktionsbereich oben (Button-Leiste) */}\n      <div className=\"flex justify-between items-center mb-4\">\n        <button \n          onClick={() => navigate('/cerebro')}\n          className=\"p-2 rounded-full text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700\"\n          aria-label=\"Zurck\"\n        >\n          <ArrowLeftIcon className=\"h-5 w-5\" />\n        </button>\n        \n        <div className=\"flex space-x-2\">\n          {hasCerebroButtonPermission && (\n            <>\n              <button \n                onClick={() => navigate(`/cerebro/${slug}/edit`)}\n                className=\"p-2 rounded-full text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900\"\n                aria-label=\"Bearbeiten\"\n              >\n                <PencilIcon className=\"h-5 w-5\" />\n              </button>\n              \n              <button \n                onClick={handleDeleteArticle}\n                className=\"p-2 rounded-full text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900\"\n                aria-label=\"Lschen\"\n              >\n                <TrashIcon className=\"h-5 w-5\" />\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n      \n      {/* Artikelkopf mit Titel und Metadaten */}\n      <div className=\"mb-6\">\n        <h1 className=\"text-3xl font-bold dark:text-white\">{article.title}</h1>\n        <div className=\"flex text-gray-600 dark:text-gray-400 text-sm mt-2\">\n          <div className=\"flex items-center mr-4\">\n            <Icon.User /> \n            <span>Erstellt von {article.creatorFirstName} {article.creatorLastName}</span>\n          </div>\n          <div className=\"flex items-center\">\n            <Icon.Clock /> \n            <span>Aktualisiert am {formatDateTimeForCerebro(article.updatedAt)}</span>\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"mb-6\">\n        {/* GitHub-Links als Tabs anzeigen, falls vorhanden */}\n        {githubLinks.length > 0 && (\n          <div className=\"mb-4\">\n            <div className=\"border-b border-gray-200 dark:border-gray-700 mb-4\">\n              <div className=\"flex\">\n                {githubLinks.map(link => (\n                  <button\n                    key={link.id}\n                    className={`py-2 px-4 font-medium text-sm ${\n                      selectedGithubLink?.id === link.id\n                        ? 'border-b-2 border-blue-500 text-blue-600 dark:text-blue-400'\n                        : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n                    }`}\n                    onClick={() => setSelectedGithubLink(link)}\n                  >\n                    {link.title || 'GitHub'}\n                  </button>\n                ))}\n                <button\n                  className={`py-2 px-4 font-medium text-sm ${\n                    !selectedGithubLink\n                      ? 'border-b-2 border-blue-500 text-blue-600 dark:text-blue-400'\n                      : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n                  }`}\n                  onClick={() => setSelectedGithubLink(null)}\n                >\n                  Artikel\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n        \n        {/* Inhalt des Artikels oder ausgewhlter GitHub-Markdown */}\n        <div className=\"prose dark:prose-invert max-w-none\">\n          {renderContent()}\n        </div>\n      </div>\n      \n      {/* Medien-Bereich */}\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <h2 className=\"text-xl font-bold mb-2 dark:text-white\">Medien</h2>\n          {hasCerebroButtonPermission && (\n            <Link \n              to={`/cerebro/${slug}/media/add`}\n              className=\"p-2 rounded-full text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900\"\n              aria-label=\"Medien hinzufgen\"\n            >\n              <PlusIcon className=\"h-5 w-5\" />\n            </Link>\n          )}\n        </div>\n        \n        {mediaFiles.length === 0 ? (\n          <p className=\"text-gray-500 dark:text-gray-400\">Keine Medien vorhanden.</p>\n        ) : (\n          <div className=\"grid grid-cols-1 gap-4\">\n            {mediaFiles.map(media => (\n              <MediaPreview key={media.id} media={media} />\n            ))}\n          </div>\n        )}\n      </div>\n      \n      {/* Externe Links Bereich */}\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <h2 className=\"text-xl font-bold mb-2 dark:text-white\">Externe Links</h2>\n          {hasCerebroButtonPermission && (\n            <div className=\"flex space-x-2\">\n              <Link \n                to={`/cerebro/${slug}/link/add`}\n                className=\"p-2 rounded-full text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900\"\n                aria-label=\"Link hinzufgen\"\n              >\n                <PlusIcon className=\"h-5 w-5\" />\n              </Link>\n              \n              <Link \n                to={`/cerebro/${slug}/github/add`}\n                className=\"p-2 rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700\"\n                aria-label=\"GitHub Markdown hinzufgen\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z\"/></svg>\n              </Link>\n            </div>\n          )}\n        </div>\n        \n        {externalLinks.length === 0 ? (\n          <p className=\"text-gray-500 dark:text-gray-400\">Keine externen Links vorhanden.</p>\n        ) : (\n          <div className=\"grid grid-cols-1 gap-4\">\n            {externalLinks.map(link => (\n              <ExternalLinkPreview key={link.id} link={link} />\n            ))}\n          </div>\n        )}\n      </div>\n      \n      {/* Verknpfte Tasks und Requests */}\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div className=\"border rounded p-4 dark:border-gray-700\">\n          <h2 className=\"text-xl font-bold mb-2 dark:text-white\">Verknpfte Tasks</h2>\n          <p className=\"text-gray-500 dark:text-gray-400\">Keine Tasks verknpft.</p>\n        </div>\n        \n        <div className=\"border rounded p-4 dark:border-gray-700\">\n          <h2 className=\"text-xl font-bold mb-2 dark:text-white\">Verknpfte Requests</h2>\n          <p className=\"text-gray-500 dark:text-gray-400\">Keine Requests verknpft.</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ArticleView; ","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { cerebroApi, CerebroArticleDetail } from '../../api/cerebroApi.ts';\r\nimport { usePermissions } from '../../hooks/usePermissions.ts';\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\n\r\n// Typen\r\ninterface FormData {\r\n  title: string;\r\n  parentId: string | null;\r\n  content: string;\r\n}\r\n\r\n// Quill Editor Konfiguration\r\nconst quillModules = {\r\n  toolbar: [\r\n    [{ 'header': [1, 2, 3, 4, 5, 6, false] }],\r\n    ['bold', 'italic', 'underline', 'strike'],\r\n    [{ 'list': 'ordered'}, { 'list': 'bullet' }],\r\n    [{ 'color': [] }, { 'background': [] }],\r\n    [{ 'align': [] }],\r\n    ['link', 'image', 'video'],\r\n    ['clean']\r\n  ],\r\n};\r\n\r\nconst quillFormats = [\r\n  'header',\r\n  'bold', 'italic', 'underline', 'strike',\r\n  'list', 'bullet',\r\n  'color', 'background',\r\n  'align',\r\n  'link', 'image', 'video'\r\n];\r\n\r\n// Funktion zum Extrahieren von Links aus dem Inhalt\r\nconst extractLinks = (content: string): string[] => {\r\n  const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\r\n  return content.match(urlRegex) || [];\r\n};\r\n\r\n// Funktion zum Extrahieren von Bild-URLs aus dem Inhalt\r\nconst extractImageUrls = (content: string): string[] => {\r\n  const imgRegex = /(https?:\\/\\/.*\\.(?:png|jpg|jpeg|gif|webp))/gi;\r\n  return content.match(imgRegex) || [];\r\n};\r\n\r\n// Funktion zum Extrahieren von Video-URLs aus dem Inhalt\r\nconst extractVideoUrls = (content: string): string[] => {\r\n  const videoRegex = /(https?:\\/\\/.*\\.(?:mp4|webm|ogg))/gi;\r\n  const youtubeRegex = /(https?:\\/\\/(?:www\\.)?youtube\\.com\\/watch\\?v=([^&]+))/gi;\r\n  const vimeoRegex = /(https?:\\/\\/(?:www\\.)?vimeo\\.com\\/([0-9]+))/gi;\r\n  \r\n  const directVideos = content.match(videoRegex) || [];\r\n  const youtubeVideos = content.match(youtubeRegex) || [];\r\n  const vimeoVideos = content.match(vimeoRegex) || [];\r\n  \r\n  return [...directVideos, ...youtubeVideos, ...vimeoVideos];\r\n};\r\n\r\n// Funktion zum Extrahieren von PDF-URLs aus dem Inhalt\r\nconst extractPdfUrls = (content: string): string[] => {\r\n  const pdfRegex = /(https?:\\/\\/.*\\.pdf)/gi;\r\n  return content.match(pdfRegex) || [];\r\n};\r\n\r\n// Funktion zum Erkennen von GitHub-Markdown-URLs\r\nconst isGitHubMarkdownUrl = (url: string): boolean => {\r\n  return url.includes('github.com') && (url.endsWith('.md') || url.includes('/blob/') || url.includes('/raw/'));\r\n};\r\n\r\n// Hauptkomponente\r\nconst ArticleEdit: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  const { slug } = useParams<{ slug: string }>();\r\n  const navigate = useNavigate();\r\n  const { hasPermission } = usePermissions();\r\n  \r\n  // Zustand\r\n  const [formData, setFormData] = useState<FormData>({\r\n    title: '',\r\n    parentId: null,\r\n    content: '',\r\n  });\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [saving, setSaving] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [articles, setArticles] = useState<{id: string, title: string}[]>([]);\r\n  const [isNewArticle, setIsNewArticle] = useState<boolean>(true);\r\n  const [articleId, setArticleId] = useState<string | null>(null);\r\n  \r\n  // Automatische Erkennung von Links und Medien beim ndern des Inhalts\r\n  const handleContentChange = useCallback((content: string) => {\r\n    setFormData(prev => ({ ...prev, content }));\r\n    \r\n    // Links und Medien extrahieren\r\n    const links = extractLinks(content);\r\n    const imageUrls = extractImageUrls(content);\r\n    const videoUrls = extractVideoUrls(content);\r\n    const pdfUrls = extractPdfUrls(content);\r\n    \r\n    // Automatisch Links und Medien hinzufgen, wenn der Artikel gespeichert wird\r\n    setAutoDetectedMedia([...imageUrls, ...videoUrls, ...pdfUrls]);\r\n    setAutoDetectedLinks(links.filter(link => \r\n      !imageUrls.includes(link) && \r\n      !videoUrls.includes(link) && \r\n      !pdfUrls.includes(link)\r\n    ));\r\n  }, []);\r\n  \r\n  // Zustand fr automatisch erkannte Medien und Links\r\n  const [autoDetectedMedia, setAutoDetectedMedia] = useState<string[]>([]);\r\n  const [autoDetectedLinks, setAutoDetectedLinks] = useState<string[]>([]);\r\n  \r\n  // berprfen der Berechtigungen - an die richtigen Berechtigungen anpassen\r\n  const hasCerebroButtonPermission = hasPermission('cerebro', 'both', 'button');\r\n  const hasCerebroPagePermission = hasPermission('cerebro', 'both', 'page');\r\n  const canEditArticles = hasCerebroButtonPermission || hasCerebroPagePermission;\r\n  \r\n  // Daten laden\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // Alle Artikel fr die Elternauswahl laden\r\n        const articlesData = await cerebroApi.articles.getAllArticles();\r\n        setArticles(articlesData.map(article => ({\r\n          id: article.id,\r\n          title: article.title\r\n        })));\r\n        \r\n        // Wenn ein Slug vorhanden ist, handelt es sich um eine Bearbeitung\r\n        if (slug) {\r\n          const article = await cerebroApi.articles.getArticleBySlug(slug);\r\n          setIsNewArticle(false);\r\n          setArticleId(article.id);\r\n          setFormData({\r\n            title: article.title,\r\n            parentId: article.parentId,\r\n            content: article.content || '',\r\n          });\r\n        }\r\n        \r\n        setError(null);\r\n      } catch (err) {\r\n        console.error('Fehler beim Laden der Daten:', err);\r\n        setError(t('cerebro.articleEdit.loadError'));\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchData();\r\n  }, [slug]);\r\n  \r\n  // Keine Berechtigung\r\n  if (!canEditArticles) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n          {t('cerebro.messages.noPermission')}\r\n        </div>\r\n        <button\r\n          className=\"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded\"\r\n          onClick={() => navigate('/cerebro')}\r\n        >\r\n          {t('cerebro.actions.backToOverview')}\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  // Input-nderung\r\n  const handleInputChange = (\r\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>\r\n  ) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value === '' ? null : value\r\n    }));\r\n  };\r\n  \r\n  // Formular absenden mit automatischer Erkennung\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!formData.title.trim()) {\r\n      setError(t('cerebro.articleEdit.titleRequired'));\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setSaving(true);\r\n      \r\n      let savedArticle;\r\n      \r\n      if (isNewArticle) {\r\n        // Neuen Artikel erstellen\r\n        savedArticle = await cerebroApi.articles.createArticle({\r\n          title: formData.title,\r\n          parentId: formData.parentId,\r\n          content: formData.content\r\n        });\r\n      } else if (articleId) {\r\n        // Bestehenden Artikel aktualisieren\r\n        savedArticle = await cerebroApi.articles.updateArticle(articleId, {\r\n          title: formData.title,\r\n          parentId: formData.parentId,\r\n          content: formData.content\r\n        });\r\n      }\r\n      \r\n      // Automatisch erkannte Medien und Links verarbeiten\r\n      if (savedArticle) {\r\n        // Links und Medien extrahieren\r\n        const links = extractLinks(formData.content);\r\n        const imageUrls = extractImageUrls(formData.content);\r\n        const videoUrls = extractVideoUrls(formData.content);\r\n        const pdfUrls = extractPdfUrls(formData.content);\r\n        \r\n        // Medien hinzufgen\r\n        const mediaUrls = [...imageUrls, ...videoUrls, ...pdfUrls];\r\n        for (const mediaUrl of mediaUrls) {\r\n          try {\r\n            let mediaType = 'other';\r\n            if (mediaUrl.match(/\\.(jpg|jpeg|png|gif|webp)$/i)) mediaType = 'image';\r\n            else if (mediaUrl.match(/\\.(mp4|webm|ogg)$/i) || mediaUrl.includes('youtube.com') || mediaUrl.includes('vimeo.com')) mediaType = 'video';\r\n            else if (mediaUrl.match(/\\.pdf$/i)) mediaType = 'pdf';\r\n            \r\n            // Formular fr den Upload erstellen\r\n            const formData = new FormData();\r\n            formData.append('carticleId', savedArticle.id);\r\n            formData.append('url', mediaUrl);\r\n            formData.append('type', mediaType);\r\n            formData.append('title', `Automatisch erkannt: ${mediaUrl.split('/').pop() || mediaUrl}`);\r\n            formData.append('description', 'Automatisch erkannt aus dem Artikelinhalt');\r\n            \r\n            // Media hochladen\r\n            await cerebroApi.media.uploadMedia(formData);\r\n          } catch (err) {\r\n            console.error(`Fehler beim Hinzufgen des Mediums ${mediaUrl}:`, err);\r\n          }\r\n        }\r\n        \r\n        // Links hinzufgen (ohne Medien)\r\n        const linkUrls = links.filter(link => \r\n          !imageUrls.includes(link) && \r\n          !videoUrls.includes(link) && \r\n          !pdfUrls.includes(link)\r\n        );\r\n        \r\n        for (const linkUrl of linkUrls) {\r\n          try {\r\n            const isGitHubMarkdown = isGitHubMarkdownUrl(linkUrl);\r\n            \r\n            await cerebroApi.externalLinks.createExternalLink({\r\n              carticleSlug: savedArticle.slug,\r\n              url: linkUrl,\r\n              title: `Automatisch erkannt: ${linkUrl.split('/').pop() || linkUrl}`,\r\n              type: isGitHubMarkdown ? 'github' : 'external'\r\n            });\r\n          } catch (err) {\r\n            console.error(`Fehler beim Hinzufgen des Links ${linkUrl}:`, err);\r\n          }\r\n        }\r\n      }\r\n      \r\n      navigate(`/cerebro/${savedArticle.slug}`);\r\n    } catch (err) {\r\n      console.error('Fehler beim Speichern des Artikels:', err);\r\n      setError('Fehler beim Speichern des Artikels. Bitte versuchen Sie es spter erneut.');\r\n      setSaving(false);\r\n    }\r\n  };\r\n  \r\n  // Abbrechen\r\n  const handleCancel = () => {\r\n    if (slug) {\r\n      navigate(`/cerebro/${slug}`);\r\n    } else {\r\n      navigate('/cerebro');\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <h1 className=\"text-2xl font-bold mb-6\">\r\n        {isNewArticle ? 'Neuen Artikel erstellen' : 'Artikel bearbeiten'}\r\n      </h1>\r\n      \r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n          {error}\r\n        </div>\r\n      )}\r\n      \r\n      {loading ? (\r\n        <div className=\"text-center py-8\">\r\n          <div className=\"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500\"></div>\r\n          <p className=\"mt-2 text-gray-600\">Daten werden geladen...</p>\r\n        </div>\r\n      ) : (\r\n        <form onSubmit={handleSubmit} className=\"bg-white rounded-lg shadow p-6\">\r\n          <div className=\"mb-4\">\r\n            <label htmlFor=\"title\" className=\"block text-gray-700 font-medium mb-2\">\r\n              Titel *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"title\"\r\n              name=\"title\"\r\n              value={formData.title}\r\n              onChange={handleInputChange}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              required\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"mb-4\">\r\n            <label htmlFor=\"parentId\" className=\"block text-gray-700 font-medium mb-2\">\r\n              Elternartikel\r\n            </label>\r\n            <select\r\n              id=\"parentId\"\r\n              name=\"parentId\"\r\n              value={formData.parentId || ''}\r\n              onChange={handleInputChange}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              <option value=\"\">Kein Elternartikel (Root)</option>\r\n              {articles\r\n                .filter(article => article.id !== articleId) // Sich selbst ausschlieen\r\n                .map(article => (\r\n                  <option key={article.id} value={article.id}>\r\n                    {article.title}\r\n                  </option>\r\n                ))}\r\n            </select>\r\n            <p className=\"text-sm text-gray-600 mt-1\">\r\n              Optional. Whlen Sie einen bergeordneten Artikel aus, um eine Hierarchie zu erstellen.\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"mb-6\">\r\n            <label className=\"block text-gray-700 font-medium mb-2\">Inhalt</label>\r\n            <div className=\"border border-gray-300 rounded-md\">\r\n              <ReactQuill\r\n                theme=\"snow\"\r\n                value={formData.content}\r\n                onChange={handleContentChange}\r\n                modules={quillModules}\r\n                formats={quillFormats}\r\n                className=\"h-64 mb-12\"\r\n              />\r\n            </div>\r\n            \r\n            {/* Vorschau der automatisch erkannten Medien und Links */}\r\n            {(autoDetectedMedia.length > 0 || autoDetectedLinks.length > 0) && (\r\n              <div className=\"mt-4 p-4 bg-gray-50 rounded-lg\">\r\n                <h3 className=\"text-lg font-medium mb-2\">Automatisch erkannt:</h3>\r\n                \r\n                {autoDetectedMedia.length > 0 && (\r\n                  <div className=\"mb-3\">\r\n                    <h4 className=\"font-medium text-sm text-gray-700 mb-1\">Medien:</h4>\r\n                    <ul className=\"list-disc pl-5 text-sm\">\r\n                      {autoDetectedMedia.map((url, index) => (\r\n                        <li key={index} className=\"text-blue-600 hover:underline\">\r\n                          <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{url}</a>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n                \r\n                {autoDetectedLinks.length > 0 && (\r\n                  <div>\r\n                    <h4 className=\"font-medium text-sm text-gray-700 mb-1\">Links:</h4>\r\n                    <ul className=\"list-disc pl-5 text-sm\">\r\n                      {autoDetectedLinks.map((url, index) => (\r\n                        <li key={index} className=\"text-blue-600 hover:underline\">\r\n                          <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{url}</a>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n                \r\n                <p className=\"text-xs text-gray-500 mt-2\">\r\n                  Diese Medien und Links werden automatisch mit dem Artikel gespeichert.\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"flex justify-end space-x-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleCancel}\r\n              className=\"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400\"\r\n              disabled={saving}\r\n            >\r\n              Abbrechen\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              disabled={saving}\r\n            >\r\n              {saving ? (\r\n                <>\r\n                  <span className=\"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2\"></span>\r\n                  Speichern...\r\n                </>\r\n              ) : (\r\n                'Speichern'\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ArticleEdit; ","import React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams, Outlet, Link } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { cerebroApi, CerebroArticleStructure } from '../../api/cerebroApi.ts';\nimport { usePermissions } from '../../hooks/usePermissions.ts';\nimport { \n  Bars3Icon, \n  XMarkIcon, \n  PlusIcon as HPlusIcon, \n  MinusIcon, \n  MagnifyingGlassIcon \n} from '@heroicons/react/24/outline';\n\n// Icon-Komponenten\nconst PlusIcon = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-blue-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n  </svg>\n);\nconst SearchIcon = () => (\n  <MagnifyingGlassIcon className=\"h-5 w-5 text-gray-500\" />\n);\n\ninterface ArticleTreeProps {\n  articles: CerebroArticleStructure[];\n  currentSlug?: string;\n  level?: number;\n  expandedIds?: Set<string>;\n  onToggleExpand?: (id: string) => void;\n  onArticleClick?: (slug: string) => void;\n}\n\ninterface MarkdownFile {\n  path: string;\n  title: string;\n}\n\ninterface ArticleStructureProps {\n  mdFiles: MarkdownFile[];\n}\n\n// Rekursive Komponente fr die Baumansicht\nconst ArticleTree: React.FC<ArticleTreeProps> = ({ \n  articles, \n  currentSlug, \n  level = 0, \n  expandedIds = new Set(), \n  onToggleExpand,\n  onArticleClick\n}) => {\n  const navigate = useNavigate();\n  \n  const handleArticleClick = (slug: string) => {\n    if (onArticleClick) {\n      onArticleClick(slug);\n    }\n  };\n  \n  const handleExpandToggle = (\n    e: React.MouseEvent<HTMLButtonElement>,\n    id: string\n  ) => {\n    e.stopPropagation();\n    if (onToggleExpand) {\n      onToggleExpand(id);\n    }\n  };\n  \n  return (\n    <ul className={`pl-${level > 0 ? '4' : '0'}`}>\n      {articles.map((article) => {\n        const hasChildren = article.children && article.children.length > 0;\n        const isExpanded = expandedIds.has(article.id);\n        const isActive = article.slug === currentSlug;\n        \n        return (\n          <li key={article.id} className=\"mb-1\">\n            <div \n              className={`flex items-center py-1 px-2 rounded cursor-pointer ${\n                isActive \n                  ? 'bg-blue-100 text-blue-800' \n                  : 'hover:bg-gray-100'\n              }`}\n              onClick={() => handleArticleClick(article.slug)}\n            >\n              {hasChildren && (\n                <button\n                  onClick={(e) => handleExpandToggle(e, article.id)}\n                  className=\"mr-1 w-4 h-4 flex items-center justify-center text-gray-500\"\n                >\n                  {isExpanded ? <MinusIcon className=\"h-4 w-4\" /> : <HPlusIcon className=\"h-4 w-4\" />}\n                </button>\n              )}\n              \n              <span className=\"flex-1 truncate\">\n                {article.title}\n              </span>\n            </div>\n            \n            {hasChildren && isExpanded && (\n              <ArticleTree \n                articles={article.children} \n                currentSlug={currentSlug}\n                level={level + 1}\n                expandedIds={expandedIds}\n                onToggleExpand={onToggleExpand}\n                onArticleClick={onArticleClick}\n              />\n            )}\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\n// Hauptkomponente fr die Artikelstruktur\nconst ArticleStructure: React.FC<ArticleStructureProps> = ({ mdFiles }) => {\n  const navigate = useNavigate();\n  const [structure, setStructure] = useState<CerebroArticleStructure[]>([]);\n  const [databaseArticles, setDatabaseArticles] = useState<CerebroArticleStructure[]>([]);\n  const [markdownFolder, setMarkdownFolder] = useState<CerebroArticleStructure | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [isMobile, setIsMobile] = useState<boolean>(window.innerWidth < 720);\n  const [expandedIds, setExpandedIds] = useState<Set<string>>(new Set());\n  const [sidebarOpen, setSidebarOpen] = useState<boolean>(window.innerWidth >= 720);\n  const [searchTerm, setSearchTerm] = useState<string>('');\n  const [canCreateArticle, setCanCreateArticle] = useState<boolean>(false);\n  \n  const { slug } = useParams<{ slug: string }>();\n  const { hasPermission } = usePermissions();\n  const { t } = useTranslation();\n  \n  // Berechtigungsprfung fr den Neuer Artikel-Button\n  useEffect(() => {\n    // Prfe nur die vorhandenen Berechtigungen aus dem Bild\n    const hasCerebroButtonPermission = hasPermission('cerebro', 'both', 'button');\n    const hasCerebroPagePermission = hasPermission('cerebro', 'both', 'page');\n    \n    console.log('Berechtigungsprfung:');\n    console.log('cerebro.both.button:', hasCerebroButtonPermission);\n    console.log('cerebro.both.page:', hasCerebroPagePermission);\n    \n    // Setze canCreateArticle auf true, wenn mindestens eine der Berechtigungen vorhanden ist\n    setCanCreateArticle(hasCerebroButtonPermission || hasCerebroPagePermission);\n  }, [hasPermission]);\n  \n  useEffect(() => {\n    const handleResize = () => {\n      const newIsMobile = window.innerWidth < 720;\n      setIsMobile(newIsMobile);\n      \n      // Nur bei Grennderungen die Sidebar anpassen\n      // Auf Tablet-Gren und grer: automatisch ffnen\n      // Auf mobilen Gerten: geschlossen lassen\n      if (window.innerWidth >= 720) {\n        setSidebarOpen(true);\n      }\n    };\n    \n    // Initial setzen\n    handleResize();\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n  \n  // Lade die Artikelstruktur aus der Datenbank\n  useEffect(() => {\n    const fetchArticlesStructure = async () => {\n      try {\n        setLoading(true);\n        // Hole die Artikelstruktur\n        const structureData = await cerebroApi.articles.getArticlesStructure();\n        \n        // Finde den Markdown-Ordner\n        const markdownFolderItem = structureData.find(article => article.title === 'Markdown-Dateien');\n        \n        if (markdownFolderItem) {\n          setMarkdownFolder(markdownFolderItem);\n          \n          // Expandiere den Markdown-Ordner standardmig, damit die Dateien sichtbar sind\n          setExpandedIds(prev => {\n            const newSet = new Set(prev);\n            newSet.add(markdownFolderItem.id);\n            return newSet;\n          });\n        } else {\n          console.warn('Markdown-Ordner nicht gefunden!');\n        }\n        \n        // Setze alle Artikel auer dem Markdown-Ordner in databaseArticles\n        setDatabaseArticles(\n          structureData.filter(article => article.title !== 'Markdown-Dateien')\n        );\n        \n        setLoading(false);\n      } catch (err) {\n        console.error('Fehler beim Laden der Artikelstruktur:', err);\n        setError('Fehler beim Laden der Artikelstruktur. Bitte versuchen Sie es spter erneut.');\n        setLoading(false);\n      }\n    };\n    \n    fetchArticlesStructure();\n  }, []);\n\n  // Handling fr die Suche\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (searchTerm.trim()) {\n      navigate(`/cerebro/search?q=${encodeURIComponent(searchTerm)}`);\n      if (isMobile) {\n        setSidebarOpen(false);\n      }\n    }\n  };\n  \n  // Auf/Zuklappen von Kategorien\n  const handleToggleExpand = (id: string) => {\n    setExpandedIds(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(id)) {\n        newSet.delete(id);\n      } else {\n        newSet.add(id);\n      }\n      return newSet;\n    });\n  };\n  \n  // Sidebar Toggle fr Mobile\n  const toggleSidebar = () => {\n    const newState = !sidebarOpen;\n    setSidebarOpen(newState);\n    \n    // Sende Event an die bergeordnete Komponente\n    const event = new CustomEvent('cerebro-sidebar-toggle', { \n      detail: { open: newState } \n    });\n    window.dispatchEvent(event);\n  };\n  \n  return (\n    <nav className=\"h-full overflow-hidden flex flex-col\">\n      {/* Mobile Toggle-Button - nur fr sehr kleine Gerte sichtbar */}\n      {isMobile && (\n        <button \n          className=\"fixed top-[85px] left-4 z-40 p-2 rounded-full text-gray-600 hover:bg-gray-100 md:hidden\"\n          onClick={toggleSidebar}\n          aria-label={sidebarOpen ? \"Men schlieen\" : \"Men ffnen\"}\n        >\n          {sidebarOpen ? <XMarkIcon className=\"h-5 w-5\" /> : <Bars3Icon className=\"h-5 w-5\" />}\n        </button>\n      )}\n      \n      {/* Sidebar mit Artikelstruktur */}\n      <div \n        className={`\n          bg-white dark:bg-gray-800 flex flex-col h-full\n          ${isMobile \n            ? 'fixed top-[150px] left-0 z-20 transition-transform duration-300 ease-in-out w-60 max-h-[calc(100vh-228px)] border-r border-gray-200 dark:border-gray-700' \n            : 'w-full h-full border-r border-gray-200 dark:border-gray-700'}\n          ${isMobile && !sidebarOpen ? '-translate-x-full' : 'translate-x-0'}\n        `}\n      >\n        <div className={`p-2 ${isMobile ? 'pt-4' : 'pt-6'} flex-grow flex flex-col overflow-hidden`}>\n          {/* X-Button zum Schlieen ENTFERNT */}\n          \n          {/* Suchformular mit Button daneben */}\n          <div className=\"mb-3 flex items-center space-x-2\">\n            {/* Neuer Artikel Button links vom Suchfeld */}\n            {canCreateArticle && (\n              <div className=\"relative group\">\n                <button\n                  className=\"p-2 rounded-full text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900\"\n                  onClick={() => navigate('/cerebro/create')}\n                  aria-label={t('cerebro.actions.createArticle')}\n                >\n                  <HPlusIcon className=\"h-5 w-5\" />\n                </button>\n                {/* Tooltip */}\n                <div className=\"absolute left-0 bottom-full mb-2 hidden group-hover:block bg-gray-800 dark:bg-gray-700 text-white text-xs rounded py-1 px-2 whitespace-nowrap\">\n                  {t('cerebro.actions.createArticle')}\n                </div>\n              </div>\n            )}\n            \n            <form onSubmit={handleSearch} className=\"flex-1\">\n              <div className=\"flex\">\n                <input\n                  type=\"text\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  placeholder=\"Suchen...\"\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-l-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n                />\n                <button\n                  type=\"submit\"\n                  className=\"p-2 rounded-r-md border border-l-0 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600\"\n                  aria-label=\"Suchen\"\n                >\n                  <SearchIcon />\n                </button>\n              </div>\n            </form>\n          </div>\n          \n          {/* Artikelbaum mit Ladeanimation oder Fehlermeldung */}\n          <div className=\"overflow-y-auto flex-grow\">\n            {/* Ladeanimation */}\n            {loading && (\n              <div className=\"flex justify-center items-center p-4\">\n                <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500\"></div>\n              </div>\n            )}\n            \n            {/* Fehlermeldung */}\n            {error && (\n              <div className=\"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-2 py-2 rounded text-sm\">\n                {error}\n              </div>\n            )}\n            \n            {/* Normale Artikel aus der Datenbank */}\n            {!loading && databaseArticles.length > 0 && (\n              <div className=\"space-y-1 mb-4\">\n                <h3 className=\"font-medium text-gray-700 dark:text-gray-300 mb-2\">Artikel</h3>\n                <ArticleTree \n                  articles={databaseArticles} \n                  currentSlug={slug}\n                  expandedIds={expandedIds}\n                  onToggleExpand={handleToggleExpand}\n                  onArticleClick={(slug) => navigate(`/cerebro/${slug}`)}\n                />\n              </div>\n            )}\n            \n            {/* Markdown-Dateien-Bereich */}\n            {!loading && markdownFolder && (\n              <div className=\"mt-4\">\n                <div className=\"flex items-center\">\n                  <button\n                    onClick={() => handleToggleExpand(markdownFolder.id)}\n                    className=\"mr-1 w-4 h-4 flex items-center justify-center text-gray-500 dark:text-gray-400\"\n                  >\n                    {expandedIds.has(markdownFolder.id) ? <MinusIcon className=\"h-4 w-4\" /> : <HPlusIcon className=\"h-4 w-4\" />}\n                  </button>\n                  <h3 className=\"font-medium text-gray-700 dark:text-gray-300\">{markdownFolder.title}</h3>\n                </div>\n                \n                {/* Wenn expandiert, zeige die Markdown-Dateien an */}\n                {expandedIds.has(markdownFolder.id) && markdownFolder.children?.length > 0 && (\n                  <div className=\"ml-4 mt-2 space-y-1\">\n                    {markdownFolder.children.map((mdFile) => (\n                      <Link \n                        key={mdFile.id}\n                        to={`/cerebro/${mdFile.slug}`}\n                        className={`block truncate px-2 py-1 rounded-md ${\n                          mdFile.slug === slug\n                            ? 'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-300'\n                            : 'hover:bg-gray-100 dark:hover:bg-gray-700'\n                        }`}\n                      >\n                        {mdFile.title}\n                      </Link>\n                    ))}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n      \n      {/* Overlay fr Mobile - Klicken schliet die Sidebar - ENTFERNT, damit der Artikel nicht ausgegraut wird */}\n      {/* \n      {isMobile && sidebarOpen && (\n        <div \n          className=\"fixed inset-0 bg-black bg-opacity-50 z-10 md:hidden\"\n          onClick={toggleSidebar}\n        ></div>\n      )}\n      */}\n    </nav>\n  );\n};\n\nexport default ArticleStructure; ","import React, { useState, useRef } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { cerebroApi } from '../../api/cerebroApi.ts';\r\nimport { usePermissions } from '../../hooks/usePermissions.ts';\r\n\r\nconst AddMedia: React.FC = () => {\r\n  const { slug } = useParams<{ slug: string }>();\r\n  const navigate = useNavigate();\r\n  const { hasPermission } = usePermissions();\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  \r\n  // Zustand\r\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\r\n  const [fileName, setFileName] = useState<string>('');\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [progress, setProgress] = useState<number>(0);\r\n  \r\n  // berprfen der Berechtigungen an die richtigen Berechtigungen anpassen\r\n  const hasCerebroButtonPermission = hasPermission('cerebro', 'both', 'button');\r\n  const hasCerebroPagePermission = hasPermission('cerebro', 'both', 'page');\r\n  const canAddMedia = hasCerebroButtonPermission || hasCerebroPagePermission;\r\n  \r\n  // Datei auswhlen\r\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = e.target.files;\r\n    if (!files || files.length === 0) {\r\n      setSelectedFile(null);\r\n      setFileName('');\r\n      return;\r\n    }\r\n    \r\n    const file = files[0];\r\n    setSelectedFile(file);\r\n    setFileName(file.name);\r\n    \r\n    // Prfen, ob der Dateityp untersttzt wird\r\n    if (!isFileTypeSupported(file)) {\r\n      setError('Dieser Dateityp wird nicht untersttzt. Erlaubt sind Bilder, PDFs und Videos.');\r\n    } else {\r\n      setError(null);\r\n    }\r\n  };\r\n  \r\n  // Prfen, ob der Dateityp untersttzt wird\r\n  const isFileTypeSupported = (file: File): boolean => {\r\n    const supportedTypes = [\r\n      'image/jpeg',\r\n      'image/png',\r\n      'image/gif',\r\n      'image/webp',\r\n      'application/pdf',\r\n      'video/mp4',\r\n      'video/webm'\r\n    ];\r\n    \r\n    return supportedTypes.includes(file.type);\r\n  };\r\n  \r\n  // Datei hochladen Button\r\n  const handleSelectFile = () => {\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.click();\r\n    }\r\n  };\r\n  \r\n  // Dateinamen ndern\r\n  const handleFileNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setFileName(e.target.value);\r\n  };\r\n  \r\n  // Formular absenden\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!selectedFile) {\r\n      setError('Bitte whlen Sie eine Datei aus.');\r\n      return;\r\n    }\r\n    \r\n    if (!fileName.trim()) {\r\n      setError('Bitte geben Sie einen Dateinamen ein.');\r\n      return;\r\n    }\r\n    \r\n    if (!slug) {\r\n      setError('Artikel-ID fehlt.');\r\n      return;\r\n    }\r\n    \r\n    if (!isFileTypeSupported(selectedFile)) {\r\n      setError('Dieser Dateityp wird nicht untersttzt. Erlaubt sind Bilder, PDFs und Videos.');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setLoading(true);\r\n      setProgress(0);\r\n      \r\n      // FormData erstellen\r\n      const formData = new FormData();\r\n      formData.append('file', selectedFile);\r\n      formData.append('filename', fileName.trim());\r\n      formData.append('carticleSlug', slug);\r\n      \r\n      // Medien hochladen mit Fortschrittsanzeige\r\n      await cerebroApi.media.uploadMedia(formData, (progressEvent) => {\r\n        const percentCompleted = Math.round(\r\n          (progressEvent.loaded * 100) / progressEvent.total\r\n        );\r\n        setProgress(percentCompleted);\r\n      });\r\n      \r\n      // Zurck zum Artikel navigieren\r\n      navigate(`/cerebro/${slug}`);\r\n    } catch (err) {\r\n      console.error('Fehler beim Hochladen der Datei:', err);\r\n      setError('Fehler beim Hochladen der Datei. Bitte versuchen Sie es spter erneut.');\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  // Keine Berechtigung\r\n  if (!canAddMedia) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n          Sie haben keine Berechtigung, Medien hinzuzufgen.\r\n        </div>\r\n        <button\r\n          className=\"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded\"\r\n          onClick={() => navigate(`/cerebro/${slug}`)}\r\n        >\r\n          Zurck zum Artikel\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  // Dateityp-Icon bestimmen\r\n  const getFileTypeIcon = () => {\r\n    if (!selectedFile) return null;\r\n    \r\n    const fileType = selectedFile.type;\r\n    \r\n    if (fileType.startsWith('image/')) {\r\n      return (\r\n        <div className=\"w-full max-h-60 overflow-hidden bg-gray-100 border rounded mb-4\">\r\n          <img \r\n            src={URL.createObjectURL(selectedFile)} \r\n            alt=\"Vorschau\" \r\n            className=\"w-full h-auto object-contain max-h-60\"\r\n          />\r\n        </div>\r\n      );\r\n    }\r\n    \r\n    if (fileType === 'application/pdf') {\r\n      return (\r\n        <div className=\"flex items-center justify-center h-32 bg-red-50 border rounded mb-4\">\r\n          <div className=\"text-center\">\r\n            <div className=\"text-red-600 text-4xl mb-2\">PDF</div>\r\n            <div className=\"text-sm text-gray-600\">{selectedFile.name}</div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    \r\n    if (fileType.startsWith('video/')) {\r\n      return (\r\n        <div className=\"w-full max-h-60 overflow-hidden bg-gray-100 border rounded mb-4\">\r\n          <video \r\n            src={URL.createObjectURL(selectedFile)} \r\n            controls\r\n            className=\"w-full h-auto max-h-60\"\r\n          >\r\n            Ihr Browser untersttzt das Video-Tag nicht.\r\n          </video>\r\n        </div>\r\n      );\r\n    }\r\n    \r\n    return (\r\n      <div className=\"flex items-center justify-center h-32 bg-gray-50 border rounded mb-4\">\r\n        <div className=\"text-center\">\r\n          <div className=\"text-gray-600 text-4xl mb-2\">Datei</div>\r\n          <div className=\"text-sm text-gray-600\">{selectedFile.name}</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n  \r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <h1 className=\"text-2xl font-bold mb-6\">Medien hinzufgen</h1>\r\n      \r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n          {error}\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <form onSubmit={handleSubmit}>\r\n          {/* Dateivorschau */}\r\n          {selectedFile ? (\r\n            getFileTypeIcon()\r\n          ) : (\r\n            <div \r\n              className=\"border-2 border-dashed border-gray-300 rounded-lg p-12 text-center mb-4 cursor-pointer hover:border-blue-500 transition-colors\"\r\n              onClick={handleSelectFile}\r\n            >\r\n              <div className=\"text-gray-500\">\r\n                <div className=\"text-4xl mb-2\">+</div>\r\n                <p>Klicken Sie, um eine Datei auszuwhlen</p>\r\n                <p className=\"text-sm mt-1\">\r\n                  Untersttzte Dateitypen: JPG, PNG, GIF, WEBP, PDF, MP4, WEBM\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Verstecktes Datei-Input-Feld */}\r\n          <input\r\n            type=\"file\"\r\n            ref={fileInputRef}\r\n            onChange={handleFileChange}\r\n            className=\"hidden\"\r\n            accept=\"image/jpeg,image/png,image/gif,image/webp,application/pdf,video/mp4,video/webm\"\r\n          />\r\n          \r\n          {/* Dateiname */}\r\n          <div className=\"mb-4\">\r\n            <label htmlFor=\"fileName\" className=\"block text-gray-700 font-medium mb-2\">\r\n              Dateiname *\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"fileName\"\r\n              value={fileName}\r\n              onChange={handleFileNameChange}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              placeholder=\"Dateiname\"\r\n              required\r\n            />\r\n          </div>\r\n          \r\n          {/* Datei auswhlen Button */}\r\n          <div className=\"mb-6\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleSelectFile}\r\n              className=\"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400\"\r\n            >\r\n              {selectedFile ? 'Andere Datei auswhlen' : 'Datei auswhlen'}\r\n            </button>\r\n            {selectedFile && (\r\n              <span className=\"ml-2 text-sm text-gray-600\">\r\n                Dateigre: {(selectedFile.size / 1024 / 1024).toFixed(2)} MB\r\n              </span>\r\n            )}\r\n          </div>\r\n          \r\n          {/* Fortschrittsanzeige */}\r\n          {loading && progress > 0 && (\r\n            <div className=\"mb-6\">\r\n              <div className=\"relative pt-1\">\r\n                <div className=\"flex items-center justify-between mb-1\">\r\n                  <div>\r\n                    <span className=\"text-xs font-semibold inline-block text-blue-600\">\r\n                      Upload-Fortschritt\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"text-right\">\r\n                    <span className=\"text-xs font-semibold inline-block text-blue-600\">\r\n                      {progress}%\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"overflow-hidden h-2 text-xs flex rounded bg-blue-200\">\r\n                  <div\r\n                    style={{ width: `${progress}%` }}\r\n                    className=\"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-blue-500\"\r\n                  ></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {/* Buttons */}\r\n          <div className=\"flex justify-end space-x-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => navigate(`/cerebro/${slug}`)}\r\n              className=\"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400\"\r\n              disabled={loading}\r\n            >\r\n              Abbrechen\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              disabled={loading || !selectedFile}\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <span className=\"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2\"></span>\r\n                  Hochladen...\r\n                </>\r\n              ) : (\r\n                'Datei hochladen'\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddMedia; ","import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { cerebroApi } from '../../api/cerebroApi.ts';\r\nimport { usePermissions } from '../../hooks/usePermissions.ts';\r\n\r\ninterface LinkPreview {\r\n  url: string;\r\n  title: string;\r\n  thumbnail: string | null;\r\n  type: string | null;\r\n}\r\n\r\nconst AddExternalLink: React.FC = () => {\r\n  const { slug } = useParams<{ slug: string }>();\r\n  const navigate = useNavigate();\r\n  const { hasPermission } = usePermissions();\r\n  \r\n  // Zustand\r\n  const [url, setUrl] = useState<string>('');\r\n  const [title, setTitle] = useState<string>('');\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [previewLoading, setPreviewLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [preview, setPreview] = useState<LinkPreview | null>(null);\r\n  \r\n  // berprfen der Berechtigungen an die richtigen Berechtigungen anpassen\r\n  const hasCerebroButtonPermission = hasPermission('cerebro', 'both', 'button');\r\n  const hasCerebroPagePermission = hasPermission('cerebro', 'both', 'page');\r\n  const canAddLinks = hasCerebroButtonPermission || hasCerebroPagePermission;\r\n  \r\n  // URL-nderung mit Debounce\r\n  useEffect(() => {\r\n    if (!url || url.trim() === '') {\r\n      setPreview(null);\r\n      return;\r\n    }\r\n    \r\n    const timer = setTimeout(() => {\r\n      getPreview(url);\r\n    }, 500);\r\n    \r\n    return () => clearTimeout(timer);\r\n  }, [url]);\r\n  \r\n  // Vorschau abrufen\r\n  const getPreview = async (urlToPreview: string) => {\r\n    try {\r\n      setPreviewLoading(true);\r\n      \r\n      if (!isValidUrl(urlToPreview)) {\r\n        setError('Bitte geben Sie eine gltige URL ein.');\r\n        setPreviewLoading(false);\r\n        return;\r\n      }\r\n      \r\n      const previewData = await cerebroApi.externalLinks.getLinkPreview(urlToPreview);\r\n      setPreview(previewData);\r\n      \r\n      // Titel automatisch bernehmen, wenn vorhanden\r\n      if (previewData.title && !title) {\r\n        setTitle(previewData.title);\r\n      }\r\n      \r\n      setError(null);\r\n    } catch (err) {\r\n      console.error('Fehler beim Abrufen der Vorschau:', err);\r\n      setError('Fehler beim Abrufen der Vorschau. Bitte berprfen Sie die URL.');\r\n      setPreview(null);\r\n    } finally {\r\n      setPreviewLoading(false);\r\n    }\r\n  };\r\n  \r\n  // URL-Validierung\r\n  const isValidUrl = (string: string) => {\r\n    try {\r\n      new URL(string);\r\n      return true;\r\n    } catch (_) {\r\n      return false;\r\n    }\r\n  };\r\n  \r\n  // Formular absenden\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!url.trim() || !isValidUrl(url)) {\r\n      setError('Bitte geben Sie eine gltige URL ein.');\r\n      return;\r\n    }\r\n    \r\n    if (!slug) {\r\n      setError('Artikel-ID fehlt.');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setLoading(true);\r\n      \r\n      await cerebroApi.externalLinks.createExternalLink({\r\n        url: url.trim(),\r\n        title: title.trim() || undefined,\r\n        carticleSlug: slug\r\n      });\r\n      \r\n      // Zurck zum Artikel navigieren\r\n      navigate(`/cerebro/${slug}`);\r\n    } catch (err) {\r\n      console.error('Fehler beim Speichern des Links:', err);\r\n      setError('Fehler beim Speichern des Links. Bitte versuchen Sie es spter erneut.');\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  // Keine Berechtigung\r\n  if (!canAddLinks) {\r\n    return (\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n          Sie haben keine Berechtigung, Links hinzuzufgen.\r\n        </div>\r\n        <button\r\n          className=\"mt-4 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded\"\r\n          onClick={() => navigate(`/cerebro/${slug}`)}\r\n        >\r\n          Zurck zum Artikel\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  // Link-Typ anzeigen\r\n  const getLinkTypeDisplay = (type: string | null) => {\r\n    if (!type) return 'Standard-Link';\r\n    \r\n    switch (type) {\r\n      case 'google_drive':\r\n        return 'Google Drive Dokument';\r\n      case 'youtube':\r\n        return 'YouTube Video';\r\n      default:\r\n        return 'Externer Link';\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <h1 className=\"text-2xl font-bold mb-6\">Externen Link hinzufgen</h1>\r\n      \r\n      {error && (\r\n        <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n          {error}\r\n        </div>\r\n      )}\r\n      \r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-4\">\r\n            <label htmlFor=\"url\" className=\"block text-gray-700 font-medium mb-2\">\r\n              URL *\r\n            </label>\r\n            <input\r\n              type=\"url\"\r\n              id=\"url\"\r\n              value={url}\r\n              onChange={(e) => setUrl(e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              placeholder=\"https://\"\r\n              required\r\n            />\r\n            <p className=\"text-sm text-gray-600 mt-1\">\r\n              Geben Sie die vollstndige URL ein, einschlielich 'https://'.\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"mb-6\">\r\n            <label htmlFor=\"title\" className=\"block text-gray-700 font-medium mb-2\">\r\n              Titel\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"title\"\r\n              value={title}\r\n              onChange={(e) => setTitle(e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              placeholder=\"Wird automatisch gefllt, wenn verfgbar\"\r\n            />\r\n            <p className=\"text-sm text-gray-600 mt-1\">\r\n              Optional. Wenn leer, wird der Titel automatisch aus der Seite extrahiert.\r\n            </p>\r\n          </div>\r\n          \r\n          {/* Link-Vorschau */}\r\n          {previewLoading ? (\r\n            <div className=\"mb-6 p-4 border rounded bg-gray-50\">\r\n              <div className=\"flex items-center justify-center\">\r\n                <div className=\"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-blue-500 mr-2\"></div>\r\n                Vorschau wird geladen...\r\n              </div>\r\n            </div>\r\n          ) : preview ? (\r\n            <div className=\"mb-6 p-4 border rounded bg-gray-50\">\r\n              <h3 className=\"font-semibold mb-2\">Link-Vorschau:</h3>\r\n              <div className=\"flex items-start\">\r\n                {preview.thumbnail && (\r\n                  <img \r\n                    src={preview.thumbnail} \r\n                    alt={preview.title || 'Vorschau'} \r\n                    className=\"w-16 h-16 object-cover mr-3\"\r\n                  />\r\n                )}\r\n                <div>\r\n                  <p className=\"font-medium\">{preview.title || url}</p>\r\n                  <p className=\"text-sm text-gray-600 mt-1\">{getLinkTypeDisplay(preview.type)}</p>\r\n                  <p className=\"text-sm text-gray-500 mt-1 break-all\">{url}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n          \r\n          <div className=\"flex justify-end space-x-4\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => navigate(`/cerebro/${slug}`)}\r\n              className=\"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400\"\r\n              disabled={loading}\r\n            >\r\n              Abbrechen\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? (\r\n                <>\r\n                  <span className=\"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2\"></span>\r\n                  Speichern...\r\n                </>\r\n              ) : (\r\n                'Link hinzufgen'\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddExternalLink; ","import React, { useState, useEffect } from 'react';\r\nimport { cerebroApi, CerebroExternalLink } from '../../api/cerebroApi.ts';\r\n\r\ninterface GitHubLinkManagerProps {\r\n  articleSlug: string;\r\n  articleId?: string;\r\n  onLinkAdded?: (link: CerebroExternalLink) => void;\r\n  onLinkRemoved?: (linkId: string) => void;\r\n}\r\n\r\nconst GitHubLinkManager: React.FC<GitHubLinkManagerProps> = ({ \r\n  articleSlug, \r\n  articleId,\r\n  onLinkAdded,\r\n  onLinkRemoved\r\n}) => {\r\n  const [links, setLinks] = useState<CerebroExternalLink[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [newLink, setNewLink] = useState<{\r\n    url: string;\r\n    title: string;\r\n    type: string;\r\n  }>({\r\n    url: '',\r\n    title: '',\r\n    type: 'github_markdown'\r\n  });\r\n\r\n  // GitHub-Links fr den aktuellen Artikel laden\r\n  useEffect(() => {\r\n    if (!articleId) return;\r\n\r\n    const fetchLinks = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const fetchedLinks = await cerebroApi.externalLinks.getLinksByArticle(articleId);\r\n        // Filtere nur GitHub-Links\r\n        setLinks(fetchedLinks.filter(link => \r\n          link.type === 'github_markdown' || \r\n          link.url.includes('github.com') || \r\n          link.url.includes('raw.githubusercontent.com')\r\n        ));\r\n        setError(null);\r\n      } catch (err) {\r\n        console.error('Fehler beim Laden der GitHub-Links:', err);\r\n        setError('Die GitHub-Links konnten nicht geladen werden.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchLinks();\r\n  }, [articleId]);\r\n\r\n  // Neuen GitHub-Link hinzufgen\r\n  const addGitHubLink = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!newLink.url.trim()) {\r\n      setError('Bitte geben Sie eine gltige GitHub-URL ein');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Wenn keine Titel angegeben wurde, extrahiere den Dateinamen aus der URL\r\n      let title = newLink.title.trim();\r\n      if (!title) {\r\n        const urlParts = newLink.url.split('/');\r\n        title = urlParts[urlParts.length - 1];\r\n      }\r\n      \r\n      const linkData = {\r\n        carticleSlug: articleSlug,\r\n        url: newLink.url,\r\n        title: `GitHub: ${title}`,\r\n        type: 'github_markdown'\r\n      };\r\n      \r\n      const createdLink = await cerebroApi.externalLinks.createExternalLink(linkData);\r\n      \r\n      setLinks(prev => [...prev, createdLink]);\r\n      setNewLink({ url: '', title: '', type: 'github_markdown' });\r\n      setError(null);\r\n      \r\n      if (onLinkAdded) {\r\n        onLinkAdded(createdLink);\r\n      }\r\n    } catch (err) {\r\n      console.error('Fehler beim Erstellen des GitHub-Links:', err);\r\n      setError('Der GitHub-Link konnte nicht erstellt werden.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // GitHub-Link entfernen\r\n  const removeLink = async (linkId: string) => {\r\n    try {\r\n      setLoading(true);\r\n      await cerebroApi.externalLinks.deleteLink(linkId);\r\n      setLinks(prev => prev.filter(link => link.id !== linkId));\r\n      \r\n      if (onLinkRemoved) {\r\n        onLinkRemoved(linkId);\r\n      }\r\n    } catch (err) {\r\n      console.error('Fehler beim Lschen des GitHub-Links:', err);\r\n      setError('Der GitHub-Link konnte nicht gelscht werden.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // URL-Format validieren (fr GitHub-URLs)\r\n  const isValidGitHubUrl = (url: string): boolean => {\r\n    return (\r\n      url.includes('github.com') || \r\n      url.includes('raw.githubusercontent.com')\r\n    ) && url.trim().length > 0;\r\n  };\r\n\r\n  return (\r\n    <div className=\"github-link-manager\">\r\n      <h3 className=\"text-lg font-medium mb-2 dark:text-white\">GitHub Markdown-Dateien</h3>\r\n      \r\n      {/* Fehleranzeige */}\r\n      {error && (\r\n        <div className=\"bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4\">\r\n          {error}\r\n        </div>\r\n      )}\r\n      \r\n      {/* Formular zum Hinzufgen eines neuen GitHub-Links */}\r\n      <form onSubmit={addGitHubLink} className=\"mb-4\">\r\n        <div className=\"flex flex-col space-y-2\">\r\n          <div>\r\n            <label htmlFor=\"github-url\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              GitHub URL\r\n            </label>\r\n            <input\r\n              id=\"github-url\"\r\n              type=\"url\"\r\n              value={newLink.url}\r\n              onChange={(e) => setNewLink({ ...newLink, url: e.target.value })}\r\n              placeholder=\"https://github.com/username/repo/blob/main/file.md\"\r\n              className={`w-full px-3 py-2 border rounded-md ${\r\n                !isValidGitHubUrl(newLink.url) && newLink.url.length > 0\r\n                  ? 'border-red-300 dark:border-red-700 focus:ring-red-500 focus:border-red-500'\r\n                  : 'border-gray-300 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500'\r\n              } dark:bg-gray-700 dark:text-white`}\r\n              required\r\n            />\r\n            {!isValidGitHubUrl(newLink.url) && newLink.url.length > 0 && (\r\n              <p className=\"mt-1 text-sm text-red-600 dark:text-red-400\">\r\n                Bitte geben Sie eine gltige GitHub-URL ein.\r\n              </p>\r\n            )}\r\n          </div>\r\n          \r\n          <div>\r\n            <label htmlFor=\"github-title\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n              Titel (optional)\r\n            </label>\r\n            <input\r\n              id=\"github-title\"\r\n              type=\"text\"\r\n              value={newLink.title}\r\n              onChange={(e) => setNewLink({ ...newLink, title: e.target.value })}\r\n              placeholder=\"z.B. Readme, Dokumentation, etc.\"\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white\"\r\n            />\r\n          </div>\r\n          \r\n          <button\r\n            type=\"submit\"\r\n            disabled={loading || !isValidGitHubUrl(newLink.url)}\r\n            className={`mt-2 px-4 py-2 rounded-md text-white ${\r\n              loading || !isValidGitHubUrl(newLink.url)\r\n                ? 'bg-blue-400 dark:bg-blue-500/50 cursor-not-allowed'\r\n                : 'bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-600'\r\n            }`}\r\n          >\r\n            {loading ? 'Wird hinzugefgt...' : 'GitHub-Link hinzufgen'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n      \r\n      {/* Liste der vorhandenen GitHub-Links */}\r\n      <div className=\"space-y-3\">\r\n        <h4 className=\"text-md font-medium text-gray-700 dark:text-gray-300\">Verknpfte Markdown-Dateien</h4>\r\n        \r\n        {loading && links.length === 0 ? (\r\n          <div className=\"text-gray-500 dark:text-gray-400 italic\">Lade GitHub-Links...</div>\r\n        ) : links.length === 0 ? (\r\n          <div className=\"text-gray-500 dark:text-gray-400 italic\">Keine GitHub-Links vorhanden</div>\r\n        ) : (\r\n          links.map((link) => (\r\n            <div key={link.id} className=\"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-md dark:bg-gray-800\">\r\n              <div className=\"truncate flex-1\">\r\n                <a \r\n                  href={link.url} \r\n                  target=\"_blank\" \r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"text-blue-600 dark:text-blue-400 hover:underline\"\r\n                >\r\n                  {link.title || link.url}\r\n                </a>\r\n              </div>\r\n              \r\n              <button\r\n                onClick={() => removeLink(link.id)}\r\n                className=\"ml-2 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300\"\r\n                title=\"GitHub-Link entfernen\"\r\n                disabled={loading}\r\n              >\r\n                Entfernen\r\n              </button>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GitHubLinkManager; ","import React from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport GitHubLinkManager from './GitHubLinkManager.tsx';\r\nimport { CerebroExternalLink } from '../../api/cerebroApi.ts';\r\n\r\n/**\r\n * Diese Komponente dient als Wrapper fr den GitHubLinkManager.\r\n * Sie liest den slug-Parameter aus der URL und bergibt ihn an den GitHubLinkManager.\r\n */\r\nconst GitHubLinkManagerWrapper: React.FC = () => {\r\n  // URL-Parameter auslesen\r\n  const { slug } = useParams<{ slug: string }>();\r\n  \r\n  // Callback-Funktionen fr Hinzufgen/Entfernen von Links\r\n  const handleLinkAdded = (link: CerebroExternalLink) => {\r\n    console.log('Link hinzugefgt:', link);\r\n  };\r\n  \r\n  const handleLinkRemoved = (id: string) => {\r\n    console.log('Link entfernt:', id);\r\n  };\r\n  \r\n  // Prfen, ob slug vorhanden ist\r\n  if (!slug) {\r\n    return (\r\n      <div className=\"w-full p-4\">\r\n        <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\r\n          <h1 className=\"text-xl font-semibold mb-4 dark:text-white\">Fehler</h1>\r\n          <p className=\"dark:text-gray-300\">Kein Artikel-Slug angegeben.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <div className=\"w-full p-4\">\r\n      <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\r\n        <h1 className=\"text-xl font-semibold mb-4 dark:text-white\">GitHub-Link hinzufgen</h1>\r\n        <GitHubLinkManager \r\n          articleSlug={slug} \r\n          onLinkAdded={handleLinkAdded}\r\n          onLinkRemoved={handleLinkRemoved}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GitHubLinkManagerWrapper; ","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Routes, Route, Link, useNavigate, Outlet, useParams, useLocation } from 'react-router-dom';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { cerebroApi, CerebroArticle } from '../api/cerebroApi.ts';\nimport ArticleList from '../components/cerebro/ArticleList.tsx';\nimport ArticleView from '../components/cerebro/ArticleView.tsx';\nimport ArticleEdit from '../components/cerebro/ArticleEdit.tsx';\nimport ArticleStructure from '../components/cerebro/ArticleStructure.tsx';\nimport AddMedia from '../components/cerebro/AddMedia.tsx';\nimport AddExternalLink from '../components/cerebro/AddExternalLink.tsx';\nimport GitHubLinkManagerWrapper from '../components/cerebro/GitHubLinkManagerWrapper.tsx';\nimport GitHubMarkdownViewer from '../components/cerebro/GitHubMarkdownViewer.tsx';\nimport ReactMarkdown from 'react-markdown';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\n// Icon-Komponenten fr Plus und Search hinzufgen nach dem Import-Bereich\nconst PlusIcon = () => <span className=\"mr-1\">+</span>;\nconst SearchIcon = () => <span className=\"mr-1\"></span>;\n\n// GitHub Repository-Informationen\nconst GITHUB_OWNER = 'freshprince84';\nconst GITHUB_REPO = 'intranet';\nconst GITHUB_BRANCH = 'main';\n\n// Layout-Komponente, die die ArticleStructure enthlt\nconst CerebroLayout: React.FC = () => {\n  const [isMobile, setIsMobile] = useState<boolean>(window.innerWidth < 768);\n  const [isTabletOrLarger, setIsTabletOrLarger] = useState<boolean>(window.innerWidth >= 768);\n  const [sidebarOpen, setSidebarOpen] = useState<boolean>(window.innerWidth >= 768);\n  \n  useEffect(() => {\n    const handleResize = () => {\n      const newIsMobile = window.innerWidth < 768;\n      setIsMobile(newIsMobile);\n      setIsTabletOrLarger(window.innerWidth >= 768);\n      \n      // Auf Tablet-Gren und grer immer ffnen\n      if (window.innerWidth >= 768) {\n        setSidebarOpen(true);\n      }\n    };\n    \n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n  \n  // Kommunikation mit der ArticleStructure-Komponente fr die Sidebar-Steuerung\n  useEffect(() => {\n    // Event-Listener fr Sidebar-Toggle-Nachrichten\n    const handleSidebarToggle = (event: CustomEvent) => {\n      if (event.detail && typeof event.detail.open === 'boolean') {\n        setSidebarOpen(event.detail.open);\n      }\n    };\n    \n    window.addEventListener('cerebro-sidebar-toggle' as any, handleSidebarToggle as any);\n    return () => window.removeEventListener('cerebro-sidebar-toggle' as any, handleSidebarToggle as any);\n  }, []);\n  \n  return (\n    <div className={`flex min-h-screen w-full ${isTabletOrLarger ? 'fixed-height-container' : ''}`}>\n      {/* Sidebar mit fester Breite auf Desktop, auf Mobile schiebt sie den Inhalt */}\n      <div \n        className={`\n          ${sidebarOpen ? 'w-60' : ''}\n          ${isMobile && !sidebarOpen ? 'w-0' : ''} \n          transition-all duration-300 ease-in-out shrink-0\n        `}\n      >\n        <ArticleStructure mdFiles={[]} />\n      </div>\n      \n      {/* Der Hauptinhalt nimmt den restlichen Platz ein */}\n      <main className={`flex-grow ${isMobile ? 'overflow-y-container' : 'overflow-y-auto'} ${\n        isMobile \n          ? 'px-0 pt-2 pb-16' // Horizontales Padding auf 0, Bottom-Padding erhht fr den Footer\n          : `pl-4 pt-3 pb-4 ${\n              isTabletOrLarger && sidebarOpen \n                ? 'pr-10 md:pr-16 lg:pr-20' \n                : 'pr-4'\n            }`\n      }`}>\n        <div className={isMobile ? 'mobile-full-width' : ''}>\n          <Outlet />\n        </div>\n      </main>\n    </div>\n  );\n};\n\n// Inhalt fr die Startseite - zeigt das README an\nconst CerebroHome: React.FC = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n      <h1 className=\"text-2xl font-bold mb-6 dark:text-white\">{t('cerebro.home.title')}</h1>\n      <GitHubMarkdownViewer \n        owner={GITHUB_OWNER}\n        repo={GITHUB_REPO}\n        path=\"docs/core/README.md\"\n        branch={GITHUB_BRANCH}\n      />\n    </div>\n  );\n};\n\n// Markdown-Viewer fr Dateien aus GitHub\nconst GitHubFileView: React.FC = () => {\n  const { t } = useTranslation();\n  const { slug } = useParams<{ slug: string }>();\n  const [mdFile, setMdFile] = useState<{path: string, title: string} | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  useEffect(() => {\n    if (!slug) return;\n    \n    // Versuche den Artikel aus der Datenbank zu laden\n    const loadArticle = async () => {\n      try {\n        setLoading(true);\n        \n        // berprfe, ob es einen Datenbankartikel mit diesem Slug gibt\n        const article = await cerebroApi.articles.getArticleBySlug(slug);\n        \n        // Prfen, ob es ein GitHub Markdown-Artikel ist\n        // Dies wird in ArticleViewWithRouter bereits geprft, aber wir prfen es hier zur Sicherheit nochmal\n        const markdownFolder = await cerebroApi.articles.getArticleBySlug('markdown-folder');\n        if (markdownFolder && article.parentId === markdownFolder.id) {\n          // Hat der Artikel einen githubPath?\n          if (article.githubPath) {\n            setMdFile({\n              path: article.githubPath,\n              title: article.title\n            });\n            setLoading(false);\n            return;\n          }\n        }\n        \n        // Es handelt sich um einen normalen Artikel, also kein GitHub-Datei-Pfad notwendig\n        // Der Rest der Verarbeitung wird in der ArticleView-Komponente fortgesetzt\n        \n        setLoading(false);\n      } catch (err) {\n        // Falls der Artikel nicht gefunden wurde, versuche es als Markdown aus GitHub zu laden\n        console.log(\"Artikel nicht in der Datenbank gefunden, versuche als Markdown-Datei zu laden\");\n        \n        // Fallback fr den Fall, dass der Artikel nicht in der DB ist oder keinen githubPath hat\n        // Lookup-Map fr bekannte Markdown-Dateien und ihre richtigen Pfade\n        const knownMdFiles: Record<string, {path: string, title: string}> = {\n          'readme': { path: 'docs/core/README.md', title: 'Readme - berblick' },\n          'project-setup': { path: 'docs/core/ENTWICKLUNGSUMGEBUNG.md', title: 'Projekt-Einrichtung' },\n          'dokumentationsstandards': { path: 'docs/core/DOKUMENTATIONSSTANDARDS.md', title: 'Dokumentationsstandards' },\n          'design-standards': { path: 'docs/core/DESIGN_STANDARDS.md', title: 'Design-Standards' },\n          'coding-standards': { path: 'docs/core/CODING_STANDARDS.md', title: 'Coding-Standards' },\n          'modul-zeiterfassung': { path: 'docs/modules/MODUL_ZEITERFASSUNG.md', title: 'Modul: Zeiterfassung' },\n          'cerebro-wiki': { path: 'docs/modules/MODUL_CEREBRO.md', title: 'Cerebro Wiki-System' },\n          'modul-teamkontrolle': { path: 'docs/modules/MODUL_TEAMKONTROLLE.md', title: 'Modul: Teamkontrolle' },\n          'modul-abrechnung': { path: 'docs/modules/MODUL_ABRECHNUNG.md', title: 'Modul: Abrechnung' },\n          'db-schema': { path: 'docs/technical/DATENBANKSCHEMA.md', title: 'Datenbankschema' },\n          'api-integration': { path: 'docs/technical/API_REFERENZ.md', title: 'API-Referenz' },\n          'role-switch': { path: 'docs/modules/ROLE_SWITCH.md', title: 'Rollenwechsel-Funktionalitt' },\n          'changelog': { path: 'docs/core/CHANGELOG.md', title: 'nderungshistorie' }\n        };\n        \n        // HINWEIS: Diese Map dient nur als Fallback und sollte nach einem kompletten Datenbank-Update\n        // mit githubPath-Werten fr alle Artikel entfernt werden knnen\n        \n        // Fr den Fall, dass es ein Custom-Artikel ist, mit korrektem Case im Namen\n        if (knownMdFiles[slug]) {\n          setMdFile(knownMdFiles[slug]);\n        } else {\n          // Fallback: Versuche den Dateinamen aus dem Slug abzuleiten\n          setMdFile({\n            path: `${slug}.md`,\n            title: slug.charAt(0).toUpperCase() + slug.slice(1).replace(/-/g, ' ')\n          });\n        }\n        \n        setLoading(false);\n      }\n    };\n    \n    loadArticle();\n  }, [slug]);\n  \n  if (loading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow flex justify-center\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n  \n  if (!mdFile) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n        <h1 className=\"text-xl font-semibold mb-4 dark:text-white\">{t('cerebro.fileView.fileNotFound')}</h1>\n        <p className=\"dark:text-gray-300\">{t('cerebro.fileView.fileNotFoundDescription')}</p>\n      </div>\n    );\n  }\n  \n  return (\n    <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n      <h1 className=\"text-2xl font-bold mb-6 dark:text-white\">{mdFile.title}</h1>\n      <GitHubMarkdownViewer \n        owner={GITHUB_OWNER}\n        repo={GITHUB_REPO}\n        path={mdFile.path}\n        branch={GITHUB_BRANCH}\n      />\n    </div>\n  );\n};\n\n// Komponente fr alle Artikel\nconst CerebroAllArticles: React.FC = () => {\n  const { t } = useTranslation();\n  return (\n    <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n      <h2 className=\"text-xl font-semibold mb-4 dark:text-white\">{t('cerebro.allArticles.title')}</h2>\n      <ArticleList />\n    </div>\n  );\n};\n\n// Komponente fr die Suche nach Artikeln\nconst CerebroSearch: React.FC = () => {\n  const { t } = useTranslation();\n  const location = useLocation();\n  const queryParams = new URLSearchParams(location.search);\n  const query = queryParams.get('q') || '';\n\n  return (\n    <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow\">\n      <div className=\"flex items-center mb-6\">\n        <h2 className=\"text-xl font-semibold dark:text-white\">{t('cerebro.search.title')} \"{query}\"</h2>\n      </div>\n      <ArticleList searchQuery={query} />\n    </div>\n  );\n};\n\n// Artikelansicht mit Weiche\nconst ArticleViewWithRouter: React.FC = () => {\n  const { slug } = useParams<{ slug: string }>();\n  const [isMarkdownFile, setIsMarkdownFile] = useState<boolean>(false);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [articleExists, setArticleExists] = useState<boolean>(false);\n  \n  useEffect(() => {\n    const checkArticleType = async () => {\n      if (!slug) return;\n      \n      try {\n        setLoading(true);\n        \n        // Prfe, ob der Artikel in der Datenbank existiert\n        const article = await cerebroApi.articles.getArticleBySlug(slug);\n        setArticleExists(true);\n        \n        // Prfe, ob der Artikel ein Markdown-Artikel ist\n        try {\n          const markdownFolder = await cerebroApi.articles.getArticleBySlug('markdown-folder');\n          \n          // Ein Artikel ist ein Markdown-Artikel, wenn:\n          // 1. Er ein Kind des markdown-folders ist ODER\n          // 2. Er einen githubPath hat\n          if ((markdownFolder && article.parentId === markdownFolder.id) || article.githubPath) {\n            setIsMarkdownFile(true);\n          } else {\n            setIsMarkdownFile(false);\n          }\n        } catch (err) {\n          // Wenn der Markdown-Ordner nicht gefunden wird, prfe nur auf githubPath\n          console.warn('Markdown-Ordner nicht gefunden:', err);\n          if (article.githubPath) {\n            setIsMarkdownFile(true);\n          } else {\n            setIsMarkdownFile(false);\n          }\n        }\n        \n        setLoading(false);\n      } catch (err) {\n        console.log('Artikel nicht in der Datenbank gefunden, versuche als Markdown-Datei:', err);\n        setArticleExists(false);\n        setIsMarkdownFile(true);\n        setLoading(false);\n      }\n    };\n    \n    checkArticleType();\n  }, [slug]);\n  \n  if (loading) {\n    return (\n      <div className=\"bg-white dark:bg-gray-800 p-6 rounded-lg shadow flex justify-center\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n  \n  // Entscheide, was angezeigt wird basierend auf den ermittelten Informationen\n  if (articleExists && !isMarkdownFile) {\n    // Es ist ein normaler Artikel in der Datenbank\n    return <ArticleView />;\n  } else {\n    // Es ist eine Markdown-Datei oder existiert nicht als Artikel in der Datenbank\n    return <GitHubFileView />;\n  }\n};\n\n// Hauptkomponente als Router\nconst Cerebro: React.FC = () => {\n  return (\n    <Routes>\n      <Route path=\"/\" element={<CerebroLayout />}>\n        <Route index element={<CerebroHome />} />\n        <Route path=\"all\" element={<CerebroAllArticles />} />\n        <Route path=\"search\" element={<CerebroSearch />} />\n        <Route path=\"create\" element={<ArticleEdit />} />\n        <Route path=\":slug\" element={<ArticleViewWithRouter />} />\n        <Route path=\":slug/edit\" element={<ArticleEdit />} />\n        <Route path=\":slug/media/add\" element={<AddMedia />} />\n        <Route path=\":slug/link/add\" element={<AddExternalLink />} />\n        <Route path=\":slug/github/add\" element={<GitHubLinkManagerWrapper />} />\n      </Route>\n    </Routes>\n  );\n};\n\nexport default Cerebro; "],"names":["console","log","API_URL","apiClient","axiosInstance","interceptors","request","use","config","_config$method","fullUrl","baseURL","url","method","toUpperCase","headers","data","token","localStorage","getItem","error","Promise","reject","response","status","message","userApi","getAll","get","getById","id","create","post","then","catch","initError","update","put","updateRoles","roleIds","roleApi","length","delete","formatDate","dateString","dateParts","split","year","parseInt","month","day","Date","toLocaleDateString","formatTime","date","parseISO","hours","getUTCHours","toString","padStart","getUTCMinutes","calculateDuration","startTime","endTime","startISOString","endsWith","substring","endISOString","start","durationMs","getTime","durationMinutes","Math","floor","convertWeekToDate","weekString","week","dayOfWeek","UTC","getUTCDay","daysToThursday","firstThursday","targetThursday","getUTCFullYear","getUTCMonth","getUTCDate","monday","formattedDate","format","locale","de","warn","correctedMonday","startOfWeek","weekStartsOn","fallbackMonday","isWorktimeRelevantForSelectedDate","worktime","selectedDate","getWeekDays","weekStartDate","weekStart","weekDays","i","addDays","dayInfo","push","formatDateTimeForCerebro","dateTimeString","hour","minute","createLocalDate","getTimezoneOffset","formatTotalDuration","consultations","totalMinutes","reduce","total","consultation","isConsultationInvoiced","invoiceItems","getConsultationInvoiceInfo","invoice","getInvoiceStatusText","getInvoiceStatusColor","cerebroApi","getAllArticles","async","api","getArticleById","getArticleBySlug","slug","getArticlesStructure","createArticle","updateArticle","deleteArticle","searchArticles","encodeURIComponent","query","getMediaByArticle","carticleId","getMediaById","uploadMedia","formData","onUploadProgress","deleteMedia","updateMediaFilename","filename","getLinksByArticle","getLinkById","getLinkPreview","createLink","link","updateLink","title","deleteLink","createExternalLink","updateExternalLink","deleteExternalLink","_ref","limit","searchQuery","initialSearchQuery","articles","setArticles","useState","loading","setLoading","setError","setSearchQuery","sortBy","setSortBy","sortDirection","setSortDirection","navigate","useNavigate","hasPermission","usePermissions","canCreateArticle","useEffect","err","fetchArticles","handleSearch","trim","toggleSort","field","sortedArticles","sort","a","b","localeCompare","dateA","updatedAt","dateB","getCreatorName","article","creatorFirstName","creatorLastName","getParentTitle","parentId","_jsxs","className","children","_jsx","onClick","navigateToCreateArticle","FaPlus","type","placeholder","value","onChange","e","target","onKeyDown","key","FaSearch","_Fragment","FaSortAlphaDown","FaSortAlphaUp","FaSortAmountDown","FaSortAmountUp","map","navigateToArticle","owner","repo","path","branch","content","setContent","fetch","ok","Error","markdownContent","text","fetchMarkdown","components","code","_ref2","node","inline","props","match","exec","String","replace","h1","h2","h3","rel","table","th","td","ul","ol","li","img","p","blockquote","href","ReactMarkdown","remarkPlugins","remarkGfm","rehypePlugins","rehypeRaw","rehypeSanitize","language","isCollapsed","setIsCollapsed","Icon","Image","PhotoIcon","Video","FilmIcon","PDF","DocumentTextIcon","File","DocumentIcon","Download","ArrowDownTrayIcon","GitHub","xmlns","viewBox","fill","d","ExternalLink","ArrowTopRightOnSquareIcon","Link","LinkIcon","Spinner","ArrowLeft","ArrowLeftIcon","User","UserCircleIcon","Clock","ClockIcon","MediaPreview","media","mediaType","mimetype","startsWith","mediaPath","pop","getMediaIcon","download","src","alt","style","maxHeight","controls","height","ExternalLinkPreview","isGoogleDrive","isYoutube","isGitHubMarkdown","githubInfo","includes","parts","slice","join","typeIndex","indexOf","parseGitHubUrl","t","allow","allowFullScreen","GitHubMarkdownViewer","ArticleView","useTranslation","useParams","setArticle","githubLinks","setGithubLinks","externalLinks","setExternalLinks","mediaFiles","setMediaFiles","selectedGithubLink","setSelectedGithubLink","hasCerebroButtonPermission","articleData","github","filter","other","fetchArticle","PencilIcon","window","confirm","alert","TrashIcon","renderContent","_ref3","CollapsibleCode","to","PlusIcon","quillModules","toolbar","quillFormats","extractLinks","extractImageUrls","extractVideoUrls","extractPdfUrls","ArticleEdit","setFormData","saving","setSaving","isNewArticle","setIsNewArticle","articleId","setArticleId","handleContentChange","useCallback","prev","links","imageUrls","videoUrls","pdfUrls","setAutoDetectedMedia","setAutoDetectedLinks","autoDetectedMedia","autoDetectedLinks","hasCerebroPagePermission","canEditArticles","articlesData","fetchData","handleInputChange","name","onSubmit","preventDefault","savedArticle","mediaUrls","mediaUrl","FormData","append","linkUrls","linkUrl","carticleSlug","htmlFor","required","ReactQuill","theme","modules","formats","index","handleCancel","disabled","SearchIcon","MagnifyingGlassIcon","ArticleTree","currentSlug","level","expandedIds","Set","onToggleExpand","onArticleClick","hasChildren","isExpanded","has","isActive","handleArticleClick","handleExpandToggle","stopPropagation","MinusIcon","HPlusIcon","_markdownFolder$child","mdFiles","structure","setStructure","databaseArticles","setDatabaseArticles","markdownFolder","setMarkdownFolder","isMobile","setIsMobile","innerWidth","setExpandedIds","sidebarOpen","setSidebarOpen","searchTerm","setSearchTerm","setCanCreateArticle","handleResize","newIsMobile","addEventListener","removeEventListener","structureData","markdownFolderItem","find","newSet","add","fetchArticlesStructure","handleToggleExpand","toggleSidebar","newState","event","CustomEvent","detail","open","dispatchEvent","XMarkIcon","Bars3Icon","mdFile","AddMedia","fileInputRef","useRef","selectedFile","setSelectedFile","fileName","setFileName","progress","setProgress","isFileTypeSupported","file","handleSelectFile","current","click","progressEvent","percentCompleted","round","loaded","getFileTypeIcon","fileType","URL","createObjectURL","ref","files","accept","size","toFixed","width","AddExternalLink","setUrl","setTitle","previewLoading","setPreviewLoading","preview","setPreview","canAddLinks","timer","setTimeout","getPreview","clearTimeout","isValidUrl","urlToPreview","previewData","string","_","undefined","thumbnail","getLinkTypeDisplay","articleSlug","onLinkAdded","onLinkRemoved","setLinks","newLink","setNewLink","fetchedLinks","fetchLinks","isValidGitHubUrl","urlParts","linkData","createdLink","linkId","removeLink","GitHubLinkManagerWrapper","GitHubLinkManager","GITHUB_OWNER","GITHUB_REPO","GITHUB_BRANCH","CerebroLayout","isTabletOrLarger","setIsTabletOrLarger","handleSidebarToggle","ArticleStructure","Outlet","CerebroHome","GitHubFileView","setMdFile","githubPath","knownMdFiles","charAt","loadArticle","CerebroAllArticles","ArticleList","CerebroSearch","location","useLocation","URLSearchParams","search","ArticleViewWithRouter","isMarkdownFile","setIsMarkdownFile","articleExists","setArticleExists","checkArticleType","Cerebro","Routes","Route","element"],"sourceRoot":""}