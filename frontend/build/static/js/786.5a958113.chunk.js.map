{"version":3,"file":"static/js/786.5a958113.chunk.js","mappings":"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","sources":["utils/expiryUtils.ts","utils/statusUtils.tsx","components/CreateRequestModal.tsx","components/EditRequestModal.tsx","components/Requests.tsx","components/WorktimeStats.tsx","components/AppDownload.tsx","pages/Dashboard.tsx","utils/filterLogic.ts","components/WorktimeModal.tsx"],"sourcesContent":["/**\r\n * Utility-Funktionen fr die Bestimmung des Ablauf-Status von Requests und Todos\r\n * \r\n * Diese Utilities sind wiederverwendbar fr alle Tabellen/Komponenten, die dueDate anzeigen.\r\n */\r\nimport React from 'react';\r\n\r\n/**\r\n * Bestimmt den Ablauf-Status eines Items basierend auf dueDate\r\n */\r\nexport type ExpiryStatus = 'none' | 'expired' | 'critical';\r\n\r\n/**\r\n * Konfiguration fr Ablauf-Schwellenwerte\r\n */\r\nexport interface ExpiryThresholds {\r\n  criticalHours: number; // Nach wie vielen Stunden wird es kritisch (rot)?\r\n}\r\n\r\n/**\r\n * Standard-Schwellenwerte fr verschiedene Item-Typen\r\n */\r\nexport const DEFAULT_EXPIRY_THRESHOLDS: Record<'request' | 'todo', ExpiryThresholds> = {\r\n  request: {\r\n    criticalHours: 24 // Nach 24h wird ein Request kritisch (rot)\r\n  },\r\n  todo: {\r\n    criticalHours: 24 // Nach 24h wird ein Todo kritisch (rot)\r\n  }\r\n};\r\n\r\n/**\r\n * Bestimmt den Typ eines Todos basierend auf Titel und Beschreibung\r\n * @param title Der Titel des Todos\r\n * @param description Die Beschreibung des Todos\r\n * @returns 'hourly' | 'daily' | 'standard'\r\n */\r\nexport function getTodoType(title: string, description?: string | null): 'hourly' | 'daily' | 'standard' {\r\n  const titleLower = title.toLowerCase();\r\n  const descLower = (description || '').toLowerCase();\r\n  \r\n  if (titleLower.includes('stndlich') || descLower.includes('stndlich')) {\r\n    return 'hourly';\r\n  }\r\n  if (titleLower.includes('tglich') || descLower.includes('tglich')) {\r\n    return 'daily';\r\n  }\r\n  return 'standard';\r\n}\r\n\r\n/**\r\n * Schwellenwerte fr verschiedene Todo-Typen\r\n */\r\nconst TODO_EXPIRY_THRESHOLDS: Record<string, ExpiryThresholds> = {\r\n  hourly: { criticalHours: 2 },    // Stndliche Todos: nach 2h kritisch\r\n  daily: { criticalHours: 6 },     // Tgliche Todos: nach 6h kritisch\r\n  standard: { criticalHours: 24 }  // Standard: nach 24h kritisch\r\n};\r\n\r\n/**\r\n * Bestimmt den Ablauf-Status eines Items\r\n * \r\n * @param dueDate Das Flligkeitsdatum (optional)\r\n * @param type Der Typ des Items ('request' oder 'todo')\r\n * @param customThresholds Optionale benutzerdefinierte Schwellenwerte\r\n * @param title Optional: Titel fr Todo-Typ-Erkennung\r\n * @param description Optional: Beschreibung fr Todo-Typ-Erkennung\r\n * @returns 'none' | 'expired' | 'critical'\r\n */\r\nexport function getExpiryStatus(\r\n  dueDate: string | null | undefined,\r\n  type: 'request' | 'todo' = 'request',\r\n  customThresholds?: ExpiryThresholds,\r\n  title?: string,\r\n  description?: string | null\r\n): ExpiryStatus {\r\n  if (!dueDate) {\r\n    return 'none';\r\n  }\r\n\r\n  const now = new Date();\r\n  const due = new Date(dueDate);\r\n  const hoursOverdue = (now.getTime() - due.getTime()) / (1000 * 60 * 60);\r\n\r\n  // Wenn nicht abgelaufen\r\n  if (hoursOverdue <= 0) {\r\n    return 'none';\r\n  }\r\n\r\n  // Bestimme Schwellenwerte\r\n  let thresholds: ExpiryThresholds;\r\n  \r\n  if (customThresholds) {\r\n    thresholds = customThresholds;\r\n  } else if (type === 'todo' && title) {\r\n    // Fr Todos: Typ-basierte Schwellenwerte\r\n    const todoType = getTodoType(title, description);\r\n    thresholds = TODO_EXPIRY_THRESHOLDS[todoType];\r\n  } else {\r\n    thresholds = DEFAULT_EXPIRY_THRESHOLDS[type];\r\n  }\r\n\r\n  // Wenn ber kritischem Schwellenwert\r\n  if (hoursOverdue >= thresholds.criticalHours) {\r\n    return 'critical';\r\n  }\r\n\r\n  // Wenn abgelaufen aber noch nicht kritisch\r\n  return 'expired';\r\n}\r\n\r\n/**\r\n * Gibt die CSS-Klassen fr die Ablauf-Markierung zurck\r\n * \r\n * @param status Der Ablauf-Status\r\n * @returns CSS-Klassen fr Border und Hintergrund\r\n */\r\nexport function getExpiryColorClasses(status: ExpiryStatus): {\r\n  borderClass: string;\r\n  bgClass: string;\r\n  textClass: string;\r\n  badgeClass: string; // Fr Badge-artige Darstellung (z.B. im Header)\r\n} {\r\n  switch (status) {\r\n    case 'expired':\r\n      return {\r\n        borderClass: 'border-orange-500 dark:border-orange-600',\r\n        bgClass: 'bg-orange-50 dark:bg-orange-900/20',\r\n        textClass: 'text-orange-700 dark:text-orange-300',\r\n        badgeClass: 'bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300'\r\n      };\r\n    case 'critical':\r\n      return {\r\n        borderClass: 'border-red-500 dark:border-red-600',\r\n        bgClass: 'bg-red-50 dark:bg-red-900/20',\r\n        textClass: 'text-red-700 dark:text-red-700',\r\n        badgeClass: 'bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300'\r\n      };\r\n    default:\r\n      return {\r\n        borderClass: '',\r\n        bgClass: '',\r\n        textClass: '',\r\n        badgeClass: ''\r\n      };\r\n  }\r\n}\r\n\r\n/**\r\n * Gibt die Highlight-Farbe fr DataCard zurck\r\n * \r\n * @param status Der Ablauf-Status\r\n * @returns 'orange' | 'red' | undefined\r\n */\r\nexport function getExpiryHighlightColor(status: ExpiryStatus): 'orange' | 'red' | undefined {\r\n  switch (status) {\r\n    case 'expired':\r\n      return 'orange';\r\n    case 'critical':\r\n      return 'red';\r\n    default:\r\n      return undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * Erstellt ein MetadataItem fr dueDate mit automatischer Farbmarkierung bei Ablauf\r\n * \r\n * @param dueDate Das Flligkeitsdatum\r\n * @param type Der Typ des Items ('request' oder 'todo')\r\n * @param title Optional: Titel fr Todo-Typ-Erkennung\r\n * @param description Optional: Beschreibung fr Todo-Typ-Erkennung\r\n * @param icon Das Icon fr das Metadaten-Item\r\n * @param label Das Label fr das Metadaten-Item\r\n * @param formatDate Function zum Formatieren des Datums\r\n * @returns MetadataItem mit farblich markiertem dueDate\r\n */\r\nexport function createDueDateMetadataItem(\r\n  dueDate: string | null | undefined,\r\n  type: 'request' | 'todo' = 'request',\r\n  title?: string,\r\n  description?: string | null,\r\n  icon?: React.ReactNode,\r\n  label: string = 'Flligkeit',\r\n  formatDate: (date: Date) => string = (date) => date.toLocaleDateString(),\r\n  useBadge: boolean = false // Fr Badge-artige Darstellung im Header\r\n): { icon?: React.ReactNode; label: string; value: string; className?: string } {\r\n  const expiryStatus = getExpiryStatus(dueDate, type, undefined, title, description);\r\n  const expiryColors = getExpiryColorClasses(expiryStatus);\r\n  \r\n  return {\r\n    icon,\r\n    label,\r\n    value: dueDate ? formatDate(new Date(dueDate)) : '-',\r\n    className: expiryStatus !== 'none' \r\n      ? (useBadge ? expiryColors.badgeClass : expiryColors.textClass)\r\n      : undefined\r\n  };\r\n}\r\n\r\n","/**\r\n * Zentrale Status-Utils zur Eliminierung von Code-Duplikation\r\n * \r\n * Diese Datei konsolidiert Status-Farben und -Texte, die zuvor in mehreren Komponenten\r\n * dupliziert waren (Requests.tsx, Worktracker.tsx, TodoAnalyticsTab.tsx, etc.)\r\n * \r\n * WICHTIG: Die Logik ist exakt identisch mit der vorherigen Implementierung.\r\n * Nur die Code-Duplikation wurde entfernt, keine Funktionalittsnderung!\r\n */\r\n\r\nimport React from 'react';\r\n\r\n/**\r\n * Gibt die CSS-Klasse fr einen Status zurck\r\n * @param status - Der Status-String\r\n * @param processType - Optional: 'task' oder 'request' fr spezifische Status\r\n * @returns CSS-Klassen-String fr den Status\r\n */\r\nexport const getStatusColor = (status: string, processType?: 'task' | 'request' | 'invoice'): string => {\r\n  // Task Status-Farben (exakt wie in Worktracker.tsx vorher)\r\n  if (processType === 'task') {\r\n    switch(status) {\r\n      case 'open':\r\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n      case 'in_progress':\r\n        return 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300';\r\n      case 'improval':\r\n        return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300';\r\n      case 'quality_control':\r\n        return 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300';\r\n      case 'done':\r\n        return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n    }\r\n  }\r\n  \r\n  // Request Status-Farben\r\n  if (processType === 'request') {\r\n    switch(status) {\r\n      case 'approval':\r\n        return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300';\r\n      case 'approved':\r\n        return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300';\r\n      case 'to_improve':\r\n        return 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300';\r\n      case 'denied':\r\n        return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n    }\r\n  }\r\n  \r\n  // Invoice Status-Farben\r\n  if (processType === 'invoice') {\r\n    switch(status) {\r\n      case 'DRAFT':\r\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n      case 'SENT':\r\n        return 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300';\r\n      case 'PAID':\r\n        return 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300';\r\n      case 'OVERDUE':\r\n        return 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300';\r\n      case 'CANCELLED':\r\n        return 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n    }\r\n  }\r\n  \r\n  // Fallback fr unbekannte Status\r\n  return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n};\r\n\r\n/**\r\n * bersetzungs-Funktion Typ (z.B. react-i18next's t() Funktion)\r\n */\r\nexport type TranslationFunction = (key: string) => string;\r\n\r\n/**\r\n * Gibt den bersetzten Status-Text zurck\r\n * @param status - Der Status-String\r\n * @param processType - Optional: 'task' oder 'request' fr spezifische Status\r\n * @param t - Optional: bersetzungsfunktion (z.B. von react-i18next)\r\n * @returns bersetzter Status-Text\r\n */\r\nexport const getStatusText = (\r\n  status: string, \r\n  processType?: 'task' | 'request' | 'invoice',\r\n  t?: TranslationFunction\r\n): string => {\r\n  // Wenn bersetzungsfunktion vorhanden, verwende diese\r\n  if (t) {\r\n    if (processType === 'task') {\r\n      const translationKey = `tasks.status.${status}`;\r\n      const translated = t(translationKey);\r\n      // Falls bersetzung gefunden (nicht gleich key), verwende diese\r\n      if (translated !== translationKey) {\r\n        return translated;\r\n      }\r\n    }\r\n    if (processType === 'request') {\r\n      const translationKey = `requests.status.${status}`;\r\n      const translated = t(translationKey);\r\n      // Falls bersetzung gefunden (nicht gleich key), verwende diese\r\n      if (translated !== translationKey) {\r\n        return translated;\r\n      }\r\n    }\r\n    if (processType === 'invoice') {\r\n      const translationKey = `invoices.status.${status.toLowerCase()}`;\r\n      const translated = t(translationKey);\r\n      if (translated !== translationKey) {\r\n        return translated;\r\n      }\r\n    }\r\n  }\r\n  \r\n  // Tasks (hardcoded - keine bersetzungen in Code gefunden)\r\n  if (processType === 'task') {\r\n    switch(status) {\r\n      case 'open': return 'Offen';\r\n      case 'in_progress': return 'In Bearbeitung';\r\n      case 'improval': return 'Nachbesserung';\r\n      case 'quality_control': return 'Qualittskontrolle';\r\n      case 'done': return 'Erledigt';\r\n      default: return status;\r\n    }\r\n  }\r\n  \r\n  // Requests (Fallback wenn keine bersetzung)\r\n  if (processType === 'request') {\r\n    switch(status) {\r\n      case 'approval': return 'Offen';\r\n      case 'approved': return 'Genehmigt';\r\n      case 'to_improve': return 'Nachbesserung';\r\n      case 'denied': return 'Abgelehnt';\r\n      default: return status;\r\n    }\r\n  }\r\n  \r\n  // Invoices (Fallback wenn keine bersetzung)\r\n  if (processType === 'invoice') {\r\n    switch(status) {\r\n      case 'DRAFT': return 'Entwurf';\r\n      case 'SENT': return 'Gesendet';\r\n      case 'PAID': return 'Bezahlt';\r\n      case 'OVERDUE': return 'berfllig';\r\n      case 'CANCELLED': return 'Storniert';\r\n      default: return status;\r\n    }\r\n  }\r\n  \r\n  // Default: Return capitalized status\r\n  return status.charAt(0).toUpperCase() + status.slice(1).replace(/_/g, ' ');\r\n};\r\n\r\n/**\r\n * React-Komponente fr Status-Badge\r\n * @param status - Der Status-String\r\n * @param processType - Optional: 'task', 'request' oder 'invoice' fr spezifische Status\r\n * @param t - Optional: bersetzungsfunktion (z.B. von react-i18next)\r\n * @returns JSX-Element fr Status-Badge\r\n */\r\nexport const StatusBadge: React.FC<{ \r\n  status: string, \r\n  processType?: 'task' | 'request' | 'invoice',\r\n  t?: TranslationFunction \r\n}> = ({ status, processType, t }) => {\r\n  return (\r\n    <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(status, processType)} status-col`}>\r\n      {getStatusText(status, processType, t)}\r\n    </span>\r\n  );\r\n};\r\n\r\n","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../config/axios.ts'; // Importiere die konfigurierte axios-Instanz\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, ArrowPathIcon, CheckIcon } from '@heroicons/react/24/outline';\nimport MarkdownPreview from './MarkdownPreview.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface User {\n  id: number;\n  firstName: string;\n  username: string;\n  branchId?: number; // Optional, falls in manchen Kontexten nicht verfgbar\n}\n\ninterface Branch {\n  id: number;\n  name: string;\n}\n\ninterface RequestAttachment {\n  id?: number;\n  fileName: string;\n  fileType: string;\n  fileSize: number;\n  filePath?: string;\n  uploadedAt?: string;\n  file?: File; // Fr temporre Anhnge vor dem Hochladen\n}\n\ninterface Request {\n  id: number;\n  title: string;\n  status: 'approval' | 'approved' | 'to_improve' | 'denied';\n  requestedBy: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  responsible: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  branch: {\n    id: number;\n    name: string;\n  };\n  dueDate: string;\n  createTodo: boolean;\n  description?: string;\n}\n\ninterface CreateRequestModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onRequestCreated: (newRequest: Request) => void;\n}\n\nconst CreateRequestModal = ({ isOpen, onClose, onRequestCreated }: CreateRequestModalProps) => {\n  const { t } = useTranslation();\n  const { user } = useAuth();\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [users, setUsers] = useState<User[]>([]);\n  const [branches, setBranches] = useState<Branch[]>([]);\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    responsible_id: '',\n    branch_id: '',\n    due_date: '',\n    create_todo: false\n  });\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [temporaryAttachments, setTemporaryAttachments] = useState<RequestAttachment[]>([]);\n  const [uploading, setUploading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  // Lade Benutzer und Niederlassungen beim ffnen des Modals\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setError(null);\n        const token = localStorage.getItem('token');\n        if (!token) {\n          setError(t('createRequest.errors.notAuthenticated'));\n          return;\n        }\n\n        console.log('Lade Daten fr CreateRequestModal...');\n        \n        try {\n          const [usersResponse, branchesResponse] = await Promise.all([\n            axiosInstance.get(API_ENDPOINTS.USERS.DROPDOWN),\n            axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE)\n          ]);\n\n          console.log('Benutzer geladen:', usersResponse.data.length);\n          console.log('Niederlassungen geladen:', branchesResponse.data.length);\n          \n          setUsers(usersResponse.data || []);\n          setBranches(branchesResponse.data || []);\n\n          // Voreinstellungen setzen\n          if (user) {\n            // 1. Verantwortlicher: Aktueller Benutzer\n            setFormData(prevData => ({ \n              ...prevData, \n              responsible_id: user.id.toString() \n            }));\n\n            // 2. Niederlassung: Aktuell gewhlte Niederlassung des Benutzers\n            // Fallback: erste verfgbare Niederlassung verwenden\n            if (branchesResponse.data && branchesResponse.data.length > 0) {\n              // Wir versuchen, die vom Benutzer zuletzt genutzte Niederlassung zu verwenden\n              // Falls nicht verfgbar, verwenden wir die erste Niederlassung\n              const userBranch = branchesResponse.data[0]?.id.toString();\n              setFormData(prevData => ({ \n                ...prevData, \n                branch_id: userBranch \n              }));\n            }\n\n            // 3. Flligkeitsdatum: Datum \"jetzt + 2 Wochen\"\n            const twoWeeksFromNow = new Date();\n            twoWeeksFromNow.setDate(twoWeeksFromNow.getDate() + 14);\n            const formattedDate = twoWeeksFromNow.toISOString().split('T')[0]; // Format: YYYY-MM-DD\n            setFormData(prevData => ({ \n              ...prevData, \n              due_date: formattedDate \n            }));\n          }\n        } catch (err) {\n          console.error('Fehler beim Laden der Daten:', err);\n          \n          // Einfachere Fehlerbehandlung ohne axios-Import\n          const axiosError = err as any;\n          if (axiosError.code === 'ERR_NETWORK') {\n            setError('Verbindung zum Server konnte nicht hergestellt werden. Bitte stellen Sie sicher, dass der Server luft.');\n          } else {\n            setError(`Fehler beim Laden der Daten: ${axiosError.response?.data?.message || axiosError.message}`);\n          }\n        }\n      } catch (err) {\n        console.error('Unerwarteter Fehler:', err);\n        setError('Ein unerwarteter Fehler ist aufgetreten');\n      }\n    };\n\n    if (isOpen) {\n      fetchData();\n    }\n  }, [isOpen]);\n\n  // berprfung der Bildschirmgre\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n    \n    // Initial prfen\n    checkScreenSize();\n    \n    // Event-Listener fr Grennderungen\n    window.addEventListener('resize', checkScreenSize);\n    \n    // Cleanup\n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  // Formatiere den Benutzernamen (erstes Wort vom Vornamen + erstes Wort vom Benutzernamen)\n  const formatUserName = (user: User) => {\n    const firstName = user.firstName?.split(' ')[0];\n    const username = user.username?.split(' ')[0];\n    \n    // Wenn kein firstName vorhanden ist, nur username anzeigen\n    if (!firstName) {\n      return username || t('createRequest.errors.unknownUser');\n    }\n    \n    // Standard: firstName (username)\n    return `${firstName} (${username})`;\n  };\n\n  const handlePaste = async (event: React.ClipboardEvent) => {\n    const items = event.clipboardData.items;\n    \n    for (let i = 0; i < items.length; i++) {\n      const item = items[i];\n      \n      // Prfen, ob das eingefgte Element ein Bild ist\n      if (item.type.indexOf('image') === 0) {\n        event.preventDefault(); // Standardeingabe verhindern\n        \n        const file = item.getAsFile();\n        if (file) {\n          await handleTemporaryAttachment(file);\n        }\n        return;\n      }\n    }\n  };\n\n  const handleDrop = async (event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n    \n    if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\n      const file = event.dataTransfer.files[0];\n      await handleTemporaryAttachment(file);\n    }\n  };\n\n  const handleDragOver = (event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  const handleTemporaryAttachment = async (file: File) => {\n    setUploading(true);\n    setError(null);\n\n    try {\n      // Erstelle einen temporren Anhang\n      const newAttachment: RequestAttachment = {\n        fileName: file.name,\n        fileType: file.type,\n        fileSize: file.size,\n        file: file // Speichern der Datei fr spteren Upload\n      };\n      \n      setTemporaryAttachments(prev => [...prev, newAttachment]);\n\n      // Fge einen Link/Vorschau in die Beschreibung ein\n      let insertText = '';\n      if (file.type.startsWith('image/')) {\n        // Hinweis: Wir verwenden hier den Platzhalter, da die Datei erst nach dem Erstellen hochgeladen wird\n        // Die tatschliche URL wird nach dem erfolgreichen Upload im Backend gesetzt\n        insertText = `\\n![${file.name}](${t('createRequest.form.uploadAfterCreate')})\\n`;\n      } else {\n        // Fr andere Dateien einen temporren Platzhalter\n        insertText = `\\n[${file.name}](${t('createRequest.form.uploadAfterCreate')})\\n`;\n      }\n      \n      // Fge den Link an der aktuellen Cursorposition ein\n      if (textareaRef.current) {\n        const cursorPos = textareaRef.current.selectionStart;\n        const textBefore = formData.description.substring(0, cursorPos);\n        const textAfter = formData.description.substring(cursorPos);\n        \n        setFormData({\n          ...formData,\n          description: textBefore + insertText + textAfter\n        });\n        \n        // Setze den Cursor hinter den eingefgten Link\n        setTimeout(() => {\n          if (textareaRef.current) {\n            const newPos = cursorPos + insertText.length;\n            textareaRef.current.selectionStart = newPos;\n            textareaRef.current.selectionEnd = newPos;\n            textareaRef.current.focus();\n          }\n        }, 0);\n      } else {\n        setFormData({\n          ...formData,\n          description: formData.description + insertText\n        });\n      }\n    } catch (err) {\n      console.error('Fehler beim Verarbeiten der Datei:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.errors.unknownError'));\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n    if (!files || files.length === 0) return;\n\n    const file = files[0];\n    await handleTemporaryAttachment(file);\n    \n    // Zurcksetzen des Datei-Inputs\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleRemoveTemporaryAttachment = (index: number) => {\n    // Hole den zu entfernenden Anhang\n    const attachmentToRemove = temporaryAttachments[index];\n    \n    if (attachmentToRemove) {\n      // Entferne den Anhang aus der Liste\n      setTemporaryAttachments(prev => prev.filter((_, i) => i !== index));\n      \n      // Entferne auch den Anhang aus der Beschreibung\n      if (attachmentToRemove.fileName) {\n        // Je nach Dateityp knnen verschiedene Markdown-Formate in der Beschreibung sein\n        const uploadAfterCreateText = t('createRequest.form.uploadAfterCreate');\n        const imagePattern = new RegExp(`!\\\\[${attachmentToRemove.fileName}\\\\]\\\\(${uploadAfterCreateText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n        const linkPattern = new RegExp(`\\\\[${attachmentToRemove.fileName}\\\\]\\\\(${uploadAfterCreateText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n        \n        // Ersetze alle Vorkommen durch leeren Text\n        const newDescription = formData.description\n          .replace(imagePattern, '')\n          .replace(linkPattern, '')\n          // Entferne berschssige Leerzeilen, die durch das Entfernen entstehen knnten\n          .replace(/\\n{3,}/g, '\\n\\n');\n        \n        setFormData({\n          ...formData,\n          description: newDescription\n        });\n      }\n    }\n  };\n\n  const uploadTemporaryAttachments = async (requestId: number) => {\n    if (temporaryAttachments.length === 0) return;\n    \n    try {\n      setLoading(true);\n      \n      // Upload jeder temporren Datei\n      for (const attachment of temporaryAttachments) {\n        if (!attachment.file) continue;\n        \n        const formData = new FormData();\n        formData.append('file', attachment.file);\n        \n        await axiosInstance.post(\n          API_ENDPOINTS.REQUESTS.ATTACHMENTS(requestId),\n          formData,\n          {\n            headers: {\n              'Content-Type': 'multipart/form-data',\n            },\n          }\n        );\n      }\n      \n      console.log(t('createRequest.messages.attachmentsUploaded', { count: temporaryAttachments.length }));\n    } catch (err) {\n      console.error('Fehler beim Hochladen der Anhnge:', err);\n      // Wir zeigen hier keinen Fehler, da der Request bereits erstellt wurde\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setLoading(true);\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) throw new Error(t('createRequest.errors.notAuthenticated'));\n      if (!user?.id) throw new Error(t('createRequest.errors.unknownUser'));\n\n      // Validiere die IDs\n      const responsibleId = parseInt(formData.responsible_id);\n      const branchId = parseInt(formData.branch_id);\n\n      if (isNaN(responsibleId) || isNaN(branchId)) {\n        throw new Error(t('createRequest.errors.invalidIds'));\n      }\n\n      const response = await axiosInstance.post(API_ENDPOINTS.REQUESTS.BASE, \n        {\n          title: formData.title,\n          description: formData.description || '',\n          responsible_id: responsibleId,\n          branch_id: branchId,\n          requested_by_id: user.id,\n          due_date: formData.due_date || null,\n          create_todo: formData.create_todo,\n          status: 'approval'\n        }\n      );\n\n      if (response.status !== 201) {\n        throw new Error(t('createRequest.errors.createError'));\n      }\n\n      // Lade temporre Anhnge hoch, falls vorhanden\n      await uploadTemporaryAttachments(response.data.id);\n\n      // bergebe den neuen Request an den Callback\n      onRequestCreated(response.data);\n      onClose();\n      setFormData({\n        title: '',\n        description: '',\n        responsible_id: '',\n        branch_id: '',\n        due_date: '',\n        create_todo: false\n      });\n      setTemporaryAttachments([]);\n    } catch (err) {\n      console.error('Create Request Error:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.errors.createError'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderTemporaryAttachments = () => {\n    if (temporaryAttachments.length === 0) return null;\n    \n    return (\n      <div className=\"mt-2\">\n        <ul className=\"flex flex-wrap gap-2\">\n          {temporaryAttachments.map((attachment, index) => (\n            <li key={index} className=\"inline-flex items-center bg-gray-100 rounded-md px-2 py-1 relative group\">\n              <span className=\"text-sm font-medium text-gray-800\">\n                {attachment.fileName}\n              </span>\n              <div className=\"flex ml-2\">\n                <button\n                  type=\"button\"\n                  onClick={() => handleRemoveTemporaryAttachment(index)}\n                  className=\"text-red-600 hover:text-red-900 ml-1\"\n                  title={t('createRequest.form.remove')}\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n              {/* Tooltip fr Bildvorschau bei Bild-Dateien */}\n              {attachment.fileType.startsWith('image/') && attachment.file && (\n                <div className=\"absolute z-10 invisible group-hover:visible bg-white p-2 rounded-md shadow-lg -top-32 left-0 border border-gray-200\">\n                  <img \n                    src={URL.createObjectURL(attachment.file)}\n                    alt={attachment.fileName}\n                    className=\"max-w-[200px] max-h-[150px] object-contain\"\n                  />\n                </div>\n              )}\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  };\n\n  if (!isOpen) return null;\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('createRequest.title')}\n              </Dialog.Title>\n              <button\n                onClick={onClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <div className=\"p-4\">\n              {error && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {error}\n                </div>\n              )}\n\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.title')}</label>\n                  <input\n                    type=\"text\"\n                    required\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                    value={formData.title}\n                    onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                  />\n                </div>\n\n                <div>\n                  <label htmlFor=\"description_request_create\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    {t('createRequest.form.description')}\n                  </label>\n                  <div className=\"relative\">\n                    <textarea\n                      ref={textareaRef}\n                      id=\"description_request_create\"\n                      rows={6}\n                      className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                      value={formData.description}\n                      onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                      onPaste={handlePaste}\n                      onDrop={handleDrop}\n                      onDragOver={handleDragOver}\n                      placeholder={t('createRequest.form.descriptionPlaceholder')}\n                    />\n                    {/* Heftklammer-Icon zum Hinzufgen von Dateien */}\n                    <button\n                      type=\"button\"\n                      onClick={() => fileInputRef.current?.click()}\n                      className=\"absolute bottom-2 left-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none\"\n                      title={t('createRequest.form.addFile')}\n                    >\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n                      </svg>\n                    </button>\n                    <input\n                      ref={fileInputRef}\n                      type=\"file\"\n                      onChange={handleFileUpload}\n                      className=\"hidden\"\n                    />\n                    {uploading && (\n                      <div className=\"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-70 dark:bg-opacity-70\">\n                        <span className=\"text-sm text-gray-600 dark:text-gray-300\">{t('createRequest.form.uploading')}</span>\n                      </div>\n                    )}\n                  </div>\n                  {renderTemporaryAttachments()}\n                  {formData.description && (\n                    <div className=\"mt-3\">\n                      <MarkdownPreview \n                        content={formData.description} \n                        temporaryAttachments={temporaryAttachments}\n                      />\n                    </div>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.responsible')}</label>\n                  <select\n                    required\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                    value={formData.responsible_id}\n                    onChange={(e) => setFormData({ ...formData, responsible_id: e.target.value })}\n                  >\n                    <option value=\"\">{t('createRequest.form.select')}</option>\n                    {Array.isArray(users) && users.map(user => (\n                      <option key={user.id} value={user.id}>\n                        {formatUserName(user)}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.branch')}</label>\n                  <select\n                    required\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                    value={formData.branch_id}\n                    onChange={(e) => setFormData({ ...formData, branch_id: e.target.value })}\n                  >\n                    <option value=\"\">{t('createRequest.form.select')}</option>\n                    {Array.isArray(branches) && branches.map(branch => (\n                      <option key={branch.id} value={branch.id}>\n                        {branch.name}\n                      </option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.dueDate')}</label>\n                  <input\n                    type=\"date\"\n                    className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                    value={formData.due_date}\n                    onChange={(e) => setFormData({ ...formData, due_date: e.target.value })}\n                  />\n                </div>\n\n                <div className=\"flex items-center\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"create_todo\"\n                    className=\"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:text-gray-300\"\n                    checked={formData.create_todo}\n                    onChange={(e) => setFormData({ ...formData, create_todo: e.target.checked })}\n                  />\n                  <label htmlFor=\"create_todo\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\n                    {t('createRequest.form.createTodo')}\n                  </label>\n                </div>\n\n                <div className=\"flex justify-end pt-4 gap-2\">\n                  <button\n                    type=\"button\"\n                    onClick={onClose}\n                    className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                    title={t('createRequest.form.cancel')}\n                  >\n                    <XMarkIcon className=\"h-5 w-5\" />\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                    title={loading ? t('createRequest.form.creating') : t('createRequest.form.create')}\n                    disabled={loading}\n                  >\n                    {loading ? (\n                      <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                    ) : (\n                      <CheckIcon className=\"h-5 w-5\" />\n                    )}\n                  </button>\n                </div>\n              </form>\n            </div>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {/* Hinweis: onClick entfernt, da Backdrop pointer-events: none hat, damit Hauptinhalt interaktiv bleibt */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('createRequest.title')}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {error && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {error}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.title')}</label>\n              <input\n                type=\"text\"\n                required\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                value={formData.title}\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"description_request_create\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n                {t('createRequest.form.description')}\n              </label>\n              <div className=\"relative\">\n                <textarea\n                  ref={textareaRef}\n                  id=\"description_request_create\"\n                  rows={6}\n                  className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                  onPaste={handlePaste}\n                  onDrop={handleDrop}\n                  onDragOver={handleDragOver}\n                  placeholder={t('createRequest.form.descriptionPlaceholder')}\n                />\n                {/* Heftklammer-Icon zum Hinzufgen von Dateien */}\n                <button\n                  type=\"button\"\n                  onClick={() => fileInputRef.current?.click()}\n                  className=\"absolute bottom-2 left-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none\"\n                  title={t('createRequest.form.addFile')}\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n                  </svg>\n                </button>\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  onChange={handleFileUpload}\n                  className=\"hidden\"\n                />\n                {uploading && (\n                  <div className=\"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-70 dark:bg-opacity-70\">\n                    <span className=\"text-sm text-gray-600 dark:text-gray-300\">{t('createRequest.form.uploading')}</span>\n                  </div>\n                )}\n              </div>\n              {renderTemporaryAttachments()}\n              {formData.description && (\n                <div className=\"mt-3\">\n                  <MarkdownPreview \n                    content={formData.description} \n                    temporaryAttachments={temporaryAttachments}\n                  />\n                </div>\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.responsible')}</label>\n              <select\n                required\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                value={formData.responsible_id}\n                onChange={(e) => setFormData({ ...formData, responsible_id: e.target.value })}\n              >\n                <option value=\"\">{t('createRequest.form.select')}</option>\n                {Array.isArray(users) && users.map(user => (\n                  <option key={user.id} value={user.id}>\n                    {formatUserName(user)}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.branch')}</label>\n              <select\n                required\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                value={formData.branch_id}\n                onChange={(e) => setFormData({ ...formData, branch_id: e.target.value })}\n              >\n                <option value=\"\">{t('createRequest.form.select')}</option>\n                {Array.isArray(branches) && branches.map(branch => (\n                  <option key={branch.id} value={branch.id}>\n                    {branch.name}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.form.dueDate')}</label>\n              <input\n                type=\"date\"\n                className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm\"\n                value={formData.due_date}\n                onChange={(e) => setFormData({ ...formData, due_date: e.target.value })}\n              />\n            </div>\n\n            <div className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                id=\"create_todo_sidepane\"\n                className=\"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:text-gray-300\"\n                checked={formData.create_todo}\n                onChange={(e) => setFormData({ ...formData, create_todo: e.target.checked })}\n              />\n              <label htmlFor=\"create_todo_sidepane\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\n                {t('createRequest.form.createTodo')}\n              </label>\n            </div>\n\n            <div className=\"flex justify-end pt-4 gap-2\">\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md\"\n                title={t('createRequest.form.cancel')}\n              >\n                <XMarkIcon className=\"h-5 w-5\" />\n              </button>\n              <button\n                type=\"submit\"\n                className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed\"\n                title={loading ? t('createRequest.form.creating') : t('createRequest.form.create')}\n                disabled={loading}\n              >\n                {loading ? (\n                  <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n                ) : (\n                  <CheckIcon className=\"h-5 w-5\" />\n                )}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default CreateRequestModal; ","import React, { useState, useEffect, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { Dialog } from '@headlessui/react';\nimport { XMarkIcon, TrashIcon, CheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport MarkdownPreview from './MarkdownPreview.tsx';\nimport { useSidepane } from '../contexts/SidepaneContext.tsx';\n\ninterface Request {\n  id: number;\n  title: string;\n  status: 'approval' | 'approved' | 'to_improve' | 'denied';\n  requestedBy: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  responsible: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  branch: {\n    id: number;\n    name: string;\n  };\n  dueDate: string;\n  createTodo: boolean;\n  description?: string;\n  attachments?: RequestAttachment[];\n}\n\ninterface EditRequestModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onRequestUpdated: (updatedRequest: Request) => void;\n  request: {\n    id: number;\n    title: string;\n    description?: string;\n    responsible: {\n      id: number;\n    };\n    branch: {\n      id: number;\n    };\n    dueDate: string | null;\n    createTodo: boolean;\n    attachments?: RequestAttachment[];\n  };\n}\n\ninterface User {\n  id: number;\n  firstName: string;\n  username: string;\n}\n\ninterface Branch {\n  id: number;\n  name: string;\n}\n\ninterface RequestAttachment {\n  id?: number;\n  fileName: string;\n  fileType: string;\n  fileSize: number;\n  filePath?: string;\n  uploadedAt?: string;\n  file?: File; // Fr temporre Anhnge vor dem Hochladen\n}\n\nconst EditRequestModal = ({\n  isOpen,\n  onClose,\n  onRequestUpdated,\n  request\n}: EditRequestModalProps) => {\n  const { t, i18n } = useTranslation();\n  const { user } = useAuth();\n  \n  // Debug: Log aktuelle Sprache und verfgbare bersetzungen\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'development') {\n      console.log('EditRequestModal - Aktuelle Sprache:', i18n.language);\n      console.log('EditRequestModal - Verfgbare Sprachen:', i18n.languages);\n      console.log('EditRequestModal - createRequest.editRequest.title:', t('createRequest.editRequest.title'));\n      console.log('EditRequestModal - createRequest.editRequest.form.title:', t('createRequest.editRequest.form.title'));\n    }\n  }, [i18n.language, t]);\n  const { openSidepane, closeSidepane } = useSidepane();\n  const [isLargeScreen, setIsLargeScreen] = useState(window.innerWidth > 1070);\n  const [title, setTitle] = useState(request.title);\n  const [description, setDescription] = useState(request.description || '');\n  const [responsibleId, setResponsibleId] = useState(request.responsible.id);\n  const [branchId, setBranchId] = useState(request.branch.id);\n  const [dueDate, setDueDate] = useState(request.dueDate ? request.dueDate.split('T')[0] : '');\n  const [createTodo, setCreateTodo] = useState(request.createTodo);\n  const [users, setUsers] = useState<User[]>([]);\n  const [branches, setBranches] = useState<Branch[]>([]);\n  const [error, setError] = useState<string | null>(null);\n  const [confirmDelete, setConfirmDelete] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [attachments, setAttachments] = useState<RequestAttachment[]>(request.attachments || []);\n  const [uploading, setUploading] = useState(false);\n  const [temporaryAttachments, setTemporaryAttachments] = useState<RequestAttachment[]>([]);\n  \n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  \n  const { hasPermission } = usePermissions();\n  const canDeleteRequest = hasPermission('requests', 'both', 'table');\n\n  // Responsive Design: berwache Fensterbreite\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 640);\n      setIsLargeScreen(window.innerWidth > 1070);\n    };\n\n    // Initialer Check\n    checkScreenSize();\n\n    // Event Listener fr Grennderungen\n    window.addEventListener('resize', checkScreenSize);\n\n    // Cleanup\n    return () => {\n      window.removeEventListener('resize', checkScreenSize);\n    };\n  }, []);\n\n  // Sidepane-Status verwalten\n  useEffect(() => {\n    if (isOpen) {\n      openSidepane();\n    } else {\n      closeSidepane();\n    }\n    \n    return () => {\n      closeSidepane();\n    };\n  }, [isOpen, openSidepane, closeSidepane]);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchData();\n      fetchAttachments();\n    }\n  }, [isOpen]);\n\n  const fetchData = async () => {\n    try {\n      setError(null);\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError(t('createRequest.editRequest.errors.notAuthenticated'));\n        return;\n      }\n\n      const [usersResponse, branchesResponse] = await Promise.all([\n        axiosInstance.get(API_ENDPOINTS.USERS.BASE),\n        axiosInstance.get(API_ENDPOINTS.BRANCHES.BASE)\n      ]);\n\n      setUsers(usersResponse.data || []);\n      setBranches(branchesResponse.data || []);\n    } catch (err) {\n      console.error('Unerwarteter Fehler:', err);\n      \n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      if (axiosError.code === 'ERR_NETWORK') {\n        setError(t('createRequest.editRequest.errors.connectionError'));\n      } else {\n        setError(`${t('createRequest.editRequest.errors.loadError')}: ${axiosError.response?.data?.message || axiosError.message}`);\n      }\n    }\n  };\n\n  const fetchAttachments = async () => {\n    try {\n      setError(null);\n      const response = await axiosInstance.get(API_ENDPOINTS.REQUESTS.ATTACHMENTS(request.id));\n      setAttachments(response.data || []);\n    } catch (err) {\n      console.error('Fehler beim Laden der Anhnge:', err);\n      // Setze eine leere Anhangliste im Fehlerfall, damit die Komponente nicht abstrzt\n      setAttachments([]);\n      \n      // Zeige einen benutzerfreundlichen Fehler an, aber lass die Komponente weiterlaufen\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      const errorMessage = axiosError.response?.data?.message || axiosError.message;\n      console.warn(`Anhnge konnten nicht geladen werden: ${errorMessage}`);\n      // Setze keinen Fehler in state, damit der Dialog trotzdem nutzbar bleibt\n      // Nur Warnung in der Konsole\n    }\n  };\n\n  const handlePaste = async (event: React.ClipboardEvent) => {\n    const items = event.clipboardData.items;\n    \n    for (let i = 0; i < items.length; i++) {\n      const item = items[i];\n      \n      // Prfen, ob das eingefgte Element ein Bild ist\n      if (item.type.indexOf('image') === 0) {\n        event.preventDefault(); // Standardeingabe verhindern\n        \n        const file = item.getAsFile();\n        if (file) {\n          await uploadFileAndInsertLink(file);\n        }\n        return;\n      }\n    }\n  };\n\n  const handleDrop = async (event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n    \n    if (event.dataTransfer.files && event.dataTransfer.files.length > 0) {\n      const file = event.dataTransfer.files[0];\n      await handleTemporaryAttachment(file);\n    }\n  };\n\n  const handleDragOver = (event: React.DragEvent) => {\n    event.preventDefault();\n    event.stopPropagation();\n  };\n\n  const uploadFileAndInsertLink = async (file: File) => {\n    setUploading(true);\n    setError(null);\n\n    try {\n      const formData = new FormData();\n      formData.append('file', file);\n\n      const response = await axiosInstance.post(\n        API_ENDPOINTS.REQUESTS.ATTACHMENTS(request.id),\n        formData,\n        {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n        }\n      );\n\n      const newAttachment = response.data;\n      setAttachments([...attachments, newAttachment]);\n\n      // Fge einen Link/Vorschau in die Beschreibung ein\n      let insertText = '';\n      if (newAttachment.fileType.startsWith('image/')) {\n        // Fr Bilder einen Markdown-Image-Link einfgen mit vollstndiger URL\n        insertText = `\\n![${newAttachment.fileName}](${window.location.origin}/api${API_ENDPOINTS.REQUESTS.ATTACHMENT(request.id, newAttachment.id)})\\n`;\n      } else {\n        // Fr andere Dateien einen normalen Link mit vollstndiger URL\n        insertText = `\\n[${newAttachment.fileName}](${window.location.origin}/api${API_ENDPOINTS.REQUESTS.ATTACHMENT(request.id, newAttachment.id)})\\n`;\n      }\n      \n      // Fge den Link an der aktuellen Cursorposition ein\n      if (textareaRef.current) {\n        const cursorPos = textareaRef.current.selectionStart;\n        const textBefore = description.substring(0, cursorPos);\n        const textAfter = description.substring(cursorPos);\n        \n        setDescription(textBefore + insertText + textAfter);\n        \n        // Setze den Cursor hinter den eingefgten Link\n        setTimeout(() => {\n          if (textareaRef.current) {\n            const newPos = cursorPos + insertText.length;\n            textareaRef.current.selectionStart = newPos;\n            textareaRef.current.selectionEnd = newPos;\n            textareaRef.current.focus();\n          }\n        }, 0);\n      } else {\n        setDescription(description + insertText);\n      }\n\n      // Erstelle ein Element fr das Vorschaubild und fge es dem Dokument hinzu\n      const img = document.createElement('img');\n      img.src = `${window.location.origin}/api${API_ENDPOINTS.REQUESTS.ATTACHMENT(request.id, newAttachment.id)}`;\n      img.alt = newAttachment.fileName;\n      img.classList.add('hidden'); // Verstecken\n\n      document.body.appendChild(img);\n\n      // Warte bis das Bild geladen ist und bestimme dann seine Dimensionen\n      img.onload = () => {\n        document.body.removeChild(img);\n\n        // Je nach Gre entscheide, ob ein groes oder kleines Bild eingefgt wird\n      }\n    } catch (err) {\n      console.error('Fehler beim Hochladen der Datei:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n    if (!files || files.length === 0) return;\n\n    const file = files[0];\n    await handleTemporaryAttachment(file);\n    \n    // Zurcksetzen des Datei-Inputs\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  const handleDeleteAttachment = async (attachmentId: number) => {\n    try {\n      setError(null);\n      \n      // Finde den zu entfernenden Anhang\n      const attachmentToRemove = attachments.find(a => a.id === attachmentId);\n      \n      if (attachmentToRemove) {\n        await axiosInstance.delete(API_ENDPOINTS.REQUESTS.ATTACHMENT(request.id, attachmentId));\n        \n        // Entferne den Anhang aus der Liste\n        setAttachments(attachments.filter(attachment => attachment.id !== attachmentId));\n        \n        // Entferne auch die Verweise im Beschreibungstext\n        if (attachmentToRemove.fileName) {\n          // Erzeuge URL-Muster fr diesen Anhang\n          const escapedFileName = attachmentToRemove.fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n          \n          // Suche nach Bild- und Link-Markdown\n          const imagePattern = new RegExp(`!\\\\[(.*?)\\\\]\\\\(${escapedFileName}\\\\)`, 'g');\n          const linkPattern = new RegExp(`\\\\[(.*?)\\\\]\\\\(${escapedFileName}\\\\)`, 'g');\n          \n          // Bereinige die Beschreibung\n          const newDescription = description\n            .replace(imagePattern, '')\n            .replace(linkPattern, '')\n            // Entferne berschssige Leerzeilen, die durch das Entfernen entstehen knnten\n            .replace(/\\n{3,}/g, '\\n\\n');\n          \n          setDescription(newDescription);\n        }\n      }\n    } catch (err) {\n      console.error('Fehler beim Lschen des Anhangs:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    }\n  };\n\n  const handleDownloadAttachment = async (attachment: RequestAttachment) => {\n    try {\n      if (attachment.id === undefined) {\n        throw new Error('Anhang-ID fehlt');\n      }\n      const response = await axiosInstance.get(\n        API_ENDPOINTS.REQUESTS.ATTACHMENT(request.id, attachment.id),\n        { responseType: 'blob' }\n      );\n      \n      // Blob-URL erstellen und Download auslsen\n      const url = window.URL.createObjectURL(new Blob([response.data]));\n      const link = document.createElement('a');\n      link.href = url;\n      link.setAttribute('download', attachment.fileName);\n      document.body.appendChild(link);\n      link.click();\n      link.remove();\n    } catch (err) {\n      console.error('Fehler beim Herunterladen des Anhangs:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setLoading(true);\n\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) throw new Error(t('createRequest.editRequest.errors.notAuthenticated'));\n      \n      // Keine Validierung notwendig, da bereits Zahlen vorliegen\n      // Direkte Verwendung der Zustnde\n\n      await axiosInstance.put(API_ENDPOINTS.REQUESTS.BY_ID(request.id), {\n        title: title,\n        description: description || '',\n        responsible_id: responsibleId,\n        branch_id: branchId,\n        due_date: dueDate || null,\n        create_todo: createTodo,\n      });\n\n      // Hochladen der temporren Anhnge\n      await uploadTemporaryAttachments();\n\n      // Hole den aktualisierten Request vom Server\n      const updatedResponse = await axiosInstance.get(API_ENDPOINTS.REQUESTS.BY_ID(request.id));\n\n      // Erfolgreiches Update - Schliee das Modal\n      onClose();\n      if (onRequestUpdated) {\n        // bergebe den aktualisierten Request an den Callback\n        onRequestUpdated(updatedResponse.data);\n      }\n    } catch (err) {\n      console.error('Fehler beim Aktualisieren des Requests:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    if (!confirmDelete) {\n      setConfirmDelete(true);\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      \n      await axiosInstance.delete(API_ENDPOINTS.REQUESTS.BY_ID(request.id));\n\n      // Beim Lschen brauchen wir keinen Request-Update, aber der Callback wird fr Konsistenz aufgerufen\n      // Der Parent muss die Liste aktualisieren (wird in Requests.tsx implementiert)\n      onClose();\n    } catch (err) {\n      console.error('Delete Error:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRemoveTemporaryAttachment = (index: number) => {\n    // Finde den zu entfernenden Anhang\n    const attachmentToRemove = temporaryAttachments[index];\n    \n    if (attachmentToRemove) {\n      // Entferne den Anhang aus dem temporaryAttachments-Array\n      setTemporaryAttachments(temporaryAttachments.filter((_, i) => i !== index));\n      \n      // Entferne auch den Verweis im Beschreibungstext\n      if (attachmentToRemove.fileName) {\n        // Suche nach Bild- und Link-Markdown mit dem Dateinamen\n        const escapedFileName = attachmentToRemove.fileName.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n        const uploadText = t('createRequest.editRequest.form.uploadAfterCreate');\n        const imagePattern = new RegExp(`!\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n        const linkPattern = new RegExp(`\\\\[${escapedFileName}\\\\]\\\\(${uploadText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')}\\\\)`, 'g');\n        \n        // Bereinige die Beschreibung\n        const newDescription = description\n          .replace(imagePattern, '')\n          .replace(linkPattern, '')\n          // Entferne berschssige Leerzeilen, die durch das Entfernen entstehen knnten\n          .replace(/\\n{3,}/g, '\\n\\n');\n        \n        setDescription(newDescription);\n      }\n    }\n  };\n\n  const handleTemporaryAttachment = async (file: File) => {\n    setUploading(true);\n    setError(null);\n\n    try {\n      // Erstelle einen temporren Anhang\n      const newAttachment: RequestAttachment = {\n        fileName: file.name,\n        fileType: file.type,\n        fileSize: file.size,\n        file: file // Speichern der Datei fr spteren Upload\n      };\n      \n      setTemporaryAttachments(prev => [...prev, newAttachment]);\n\n      // Fge einen Link/Vorschau in die Beschreibung ein\n      let insertText = '';\n      if (file.type.startsWith('image/')) {\n        // Fr Bilder ein Markdown-Bild einfgen\n        insertText = `\\n![${file.name}](${t('createRequest.editRequest.form.uploadAfterCreate')})\\n`;\n      } else {\n        // Fr andere Dateien einen Link einfgen\n        insertText = `\\n[${file.name}](${t('createRequest.editRequest.form.uploadAfterCreate')})\\n`;\n      }\n      \n      // Fge den Link an der aktuellen Cursorposition ein\n      if (textareaRef.current) {\n        const cursorPos = textareaRef.current.selectionStart;\n        const textBefore = description.substring(0, cursorPos);\n        const textAfter = description.substring(cursorPos);\n        \n        setDescription(textBefore + insertText + textAfter);\n        \n        // Setze den Cursor hinter den eingefgten Link\n        setTimeout(() => {\n          if (textareaRef.current) {\n            const newPos = cursorPos + insertText.length;\n            textareaRef.current.selectionStart = newPos;\n            textareaRef.current.selectionEnd = newPos;\n            textareaRef.current.focus();\n          }\n        }, 0);\n      } else {\n        setDescription(description + insertText);\n      }\n    } catch (err) {\n      console.error('Fehler beim Verarbeiten der Datei:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || t('createRequest.editRequest.errors.unknownError'));\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const uploadTemporaryAttachments = async () => {\n    if (temporaryAttachments.length === 0) return;\n    \n    try {\n      setLoading(true);\n      \n      // Upload jeder temporren Datei\n      for (const attachment of temporaryAttachments) {\n        if (!attachment.file) continue;\n        \n        const formData = new FormData();\n        formData.append('file', attachment.file);\n        \n        await axiosInstance.post(\n          API_ENDPOINTS.REQUESTS.ATTACHMENTS(request.id),\n          formData,\n          {\n            headers: {\n              'Content-Type': 'multipart/form-data',\n            },\n          }\n        );\n      }\n      \n      console.log(`${temporaryAttachments.length} Anhnge erfolgreich hochgeladen.`);\n      // Nach erfolgreichem Upload leeren wir die temporren Anhnge\n      setTemporaryAttachments([]);\n    } catch (err) {\n      console.error('Fehler beim Hochladen der Anhnge:', err);\n      // Wir zeigen hier keinen Fehler, da der Request bereits aktualisiert wurde\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const renderAttachments = () => {\n    if (attachments.length === 0) return null;\n    \n    return (\n      <div className=\"mt-2\">\n        <ul className=\"flex flex-wrap gap-2\">\n          {attachments.map((attachment) => (\n            <li key={attachment.id || `temp-${attachment.fileName}`} className=\"inline-flex items-center bg-gray-100 rounded-md px-2 py-1 relative group\">\n              <span className=\"text-sm font-medium text-gray-800\">\n                {attachment.fileName}\n              </span>\n              <div className=\"flex ml-2\">\n                <button\n                  type=\"button\"\n                  onClick={() => handleDownloadAttachment(attachment)}\n                  className=\"text-blue-600 hover:text-blue-900 mr-1\"\n                  title={t('createRequest.editRequest.form.download')}\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n                  </svg>\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => attachment.id !== undefined && handleDeleteAttachment(attachment.id)}\n                  className=\"text-red-600 hover:text-red-900 ml-1\"\n                  title={t('createRequest.editRequest.form.remove')}\n                  disabled={attachment.id === undefined}\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n              {/* Tooltip fr Bildvorschau bei Bild-Dateien */}\n              {attachment.fileType.startsWith('image/') && attachment.id && (\n                <div className=\"absolute z-10 invisible group-hover:visible bg-white p-2 rounded-md shadow-lg -top-32 left-0 border border-gray-200\">\n                  <img \n                    src={`${window.location.origin}/api${API_ENDPOINTS.REQUESTS.ATTACHMENT(request.id, attachment.id)}`}\n                    alt={attachment.fileName}\n                    className=\"max-w-[200px] max-h-[150px] object-contain\"\n                  />\n                </div>\n              )}\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  };\n\n  const renderTemporaryAttachments = () => {\n    if (temporaryAttachments.length === 0) return null;\n    \n    return (\n      <div className=\"mt-2\">\n        <ul className=\"flex flex-wrap gap-2\">\n          {temporaryAttachments.map((attachment, index) => (\n            <li key={`temp-${index}`} className=\"inline-flex items-center bg-gray-100 rounded-md px-2 py-1 relative group\">\n              <span className=\"text-sm font-medium text-gray-800\">\n                {attachment.fileName}\n              </span>\n              <div className=\"flex ml-2\">\n                <button\n                  type=\"button\"\n                  onClick={() => handleRemoveTemporaryAttachment(index)}\n                  className=\"text-red-600 hover:text-red-900 ml-1\"\n                  title={t('createRequest.editRequest.form.remove')}\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                  </svg>\n                </button>\n              </div>\n              {/* Tooltip fr Bildvorschau bei Bild-Dateien */}\n              {attachment.fileType.startsWith('image/') && attachment.file && (\n                <div className=\"absolute z-10 invisible group-hover:visible bg-white p-2 rounded-md shadow-lg -top-32 left-0 border border-gray-200\">\n                  <img \n                    src={URL.createObjectURL(attachment.file)}\n                    alt={attachment.fileName}\n                    className=\"max-w-[200px] max-h-[150px] object-contain\"\n                  />\n                </div>\n              )}\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  };\n\n  if (!isOpen) return null;\n\n  const renderForm = () => (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.editRequest.form.title')}</label>\n        <input\n          type=\"text\"\n          required\n          className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n        />\n      </div>\n\n      <div>\n        <label htmlFor=\"description_request_edit\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">\n          {t('createRequest.editRequest.form.description')}\n        </label>\n        <div className=\"relative\">\n          <textarea\n            ref={textareaRef}\n            rows={isMobile ? 5 : 10}\n            className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            onPaste={handlePaste}\n            onDrop={handleDrop}\n            onDragOver={handleDragOver}\n          />\n          {/* Heftklammer-Icon zum Hinzufgen von Dateien */}\n          <button\n            type=\"button\"\n            onClick={() => fileInputRef.current?.click()}\n            className=\"absolute bottom-2 left-2 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none\"\n            title={t('createRequest.editRequest.form.fileUpload')}\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n            </svg>\n          </button>\n          <input\n            ref={fileInputRef}\n            type=\"file\"\n            onChange={handleFileUpload}\n            className=\"hidden\"\n          />\n          {uploading && (\n            <div className=\"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800 bg-opacity-70 dark:bg-opacity-70\">\n              <span className=\"text-sm text-gray-600 dark:text-gray-300\">{t('createRequest.editRequest.form.uploading')}</span>\n            </div>\n          )}\n        </div>\n        {renderAttachments()}\n        {renderTemporaryAttachments()}\n        {/* MarkdownPreview entfernt: Bei Edit-Modals werden Anhnge bereits durch renderAttachments() \n            und renderTemporaryAttachments() angezeigt, Beschreibung nur im Textarea */}\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.editRequest.form.responsible')}</label>\n        <select\n          className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n          value={responsibleId}\n          onChange={(e) => setResponsibleId(Number(e.target.value))}\n        >\n          {users.map(user => (\n            <option key={user.id} value={user.id}>\n              {user.firstName} ({user.username})\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.editRequest.form.branch')}</label>\n        <select\n          className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n          value={branchId}\n          onChange={(e) => setBranchId(Number(e.target.value))}\n        >\n          {branches.map(branch => (\n            <option key={branch.id} value={branch.id}>\n              {branch.name}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <div>\n        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300\">{t('createRequest.editRequest.form.dueDate')}</label>\n        <input\n          type=\"date\"\n          className=\"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:bg-gray-700 dark:text-white\"\n          value={dueDate}\n          onChange={(e) => setDueDate(e.target.value)}\n        />\n      </div>\n\n      <div className=\"flex items-center\">\n        <input\n          type=\"checkbox\"\n          id=\"create_todo_edit\"\n          className=\"rounded border-gray-300 text-blue-600 dark:bg-gray-700 dark:border-gray-600\"\n          checked={createTodo}\n          onChange={(e) => setCreateTodo(e.target.checked)}\n        />\n        <label htmlFor=\"create_todo_edit\" className=\"ml-2 block text-sm text-gray-700 dark:text-gray-300\">\n          {t('createRequest.editRequest.form.createTodo')}\n        </label>\n      </div>\n\n      <div className=\"flex justify-between pt-4\">\n        {canDeleteRequest && (\n          <button\n            type=\"button\"\n            onClick={handleDelete}\n            className={`p-2 rounded-md ${\n              confirmDelete\n                ? 'bg-red-600 text-white dark:bg-red-700 dark:text-white hover:bg-red-700 dark:hover:bg-red-600'\n                : 'text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300'\n            }`}\n            title={confirmDelete ? t('createRequest.editRequest.form.confirmDelete') : t('createRequest.editRequest.form.delete')}\n          >\n            {confirmDelete ? (\n              <CheckIcon className=\"h-5 w-5\" />\n            ) : (\n              <TrashIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n        )}\n        <div className=\"flex gap-2\">\n          <button\n            type=\"button\"\n            onClick={onClose}\n            className=\"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors\"\n            title={t('createRequest.editRequest.form.cancel')}\n          >\n            <XMarkIcon className=\"h-5 w-5\" />\n          </button>\n          <button\n            type=\"submit\"\n            className=\"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            title={loading ? t('createRequest.editRequest.form.saving') : t('createRequest.editRequest.form.save')}\n            disabled={loading}\n          >\n            {loading ? (\n              <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n            ) : (\n              <CheckIcon className=\"h-5 w-5\" />\n            )}\n          </button>\n        </div>\n      </div>\n    </form>\n  );\n\n  // Fr Mobile (unter 640px) - klassisches Modal\n  if (isMobile) {\n    return (\n      <Dialog open={isOpen} onClose={onClose} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        \n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl\">\n            <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700\">\n              <Dialog.Title className=\"text-lg font-semibold dark:text-white\">\n                {t('createRequest.editRequest.title')}\n              </Dialog.Title>\n              <button\n                onClick={onClose}\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n              >\n                <XMarkIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <div className=\"p-4\">\n              {error && (\n                <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n                  {error}\n                </div>\n              )}\n\n              {renderForm()}\n            </div>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    );\n  }\n\n  // Fr Desktop (ab 640px) - Sidepane\n  // WICHTIG: Sidepane muss IMMER gerendert bleiben fr Transition\n  return (\n    <>\n      {/* Backdrop - nur wenn offen und <= 1070px */}\n      {isOpen && !isLargeScreen && (\n        <div \n          className=\"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40\" \n          aria-hidden=\"true\" \n          onClick={onClose}\n          style={{\n            opacity: isOpen ? 1 : 0,\n            transition: 'opacity 300ms ease-out'\n          }}\n        />\n      )}\n      \n      {/* Sidepane - IMMER gerendert, Position wird via Transform gendert */}\n      <div \n        className={`fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ${isOpen ? 'translate-x-0' : 'translate-x-full'}`}\n        style={{\n          transition: 'transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n          pointerEvents: isOpen ? 'auto' : 'none'\n        }}\n        aria-hidden={!isOpen}\n        role=\"dialog\"\n        aria-modal={isOpen}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold dark:text-white\">\n            {t('createRequest.editRequest.title')}\n          </h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300\"\n          >\n            <XMarkIcon className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4 overflow-y-auto flex-1 min-h-0\">\n          {error && (\n            <div className=\"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded\">\n              {error}\n            </div>\n          )}\n\n          {renderForm()}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default EditRequestModal; ","import React, { useEffect, useState, useMemo, useCallback, useRef } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport axiosInstance from '../config/axios.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\nimport { usePermissions } from '../hooks/usePermissions.ts';\nimport { useTableSettings } from '../hooks/useTableSettings.ts';\nimport CreateRequestModal from './CreateRequestModal.tsx';\nimport EditRequestModal from './EditRequestModal.tsx';\nimport TableColumnConfig from './TableColumnConfig.tsx';\nimport FilterPane from './FilterPane.tsx';\nimport SavedFilterTags from './SavedFilterTags.tsx';\nimport { FilterCondition } from './FilterRow.tsx';\nimport { applyFilters, evaluateDateCondition } from '../utils/filterLogic.ts';\nimport { getStatusColor, getStatusText } from '../utils/statusUtils.tsx';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { \n  PlusIcon,\n  CheckIcon, \n  XMarkIcon,\n  ArrowPathIcon,\n  ExclamationTriangleIcon,\n  PencilIcon,\n  ArrowsUpDownIcon,\n  FunnelIcon,\n  DocumentTextIcon,\n  DocumentDuplicateIcon,\n  InformationCircleIcon,\n  Squares2X2Icon,\n  TableCellsIcon,\n  UserIcon,\n  BuildingOfficeIcon,\n  CalendarIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon\n} from '@heroicons/react/24/outline';\nimport { format } from 'date-fns';\nimport { de } from 'date-fns/locale';\nimport MarkdownPreview from './MarkdownPreview.tsx';\nimport DataCard, { MetadataItem } from './shared/DataCard.tsx';\nimport CardGrid from './shared/CardGrid.tsx';\nimport { getExpiryStatus, getExpiryColorClasses, createDueDateMetadataItem } from '../utils/expiryUtils.ts';\n\ninterface Request {\n  id: number;\n  title: string;\n  status: 'approval' | 'approved' | 'to_improve' | 'denied';\n  requestedBy: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  responsible: {\n    id: number;\n    username: string;\n    firstName: string;\n    lastName: string;\n  };\n  branch: {\n    id: number;\n    name: string;\n  };\n  dueDate: string;\n  createTodo: boolean;\n  description?: string;\n}\n\ninterface SortConfig {\n  key: keyof Request | 'requestedBy.firstName' | 'responsible.firstName' | 'branch.name';\n  direction: 'asc' | 'desc';\n}\n\n// Definition der verfgbaren Spalten - werden dynamisch aus bersetzungen geladen\n\n// Standardreihenfolge der Spalten\nconst defaultColumnOrder = ['title', 'requestedByResponsible', 'status', 'dueDate', 'branch', 'actions'];\n\n// TableID fr gespeicherte Filter\nconst REQUESTS_TABLE_ID = 'requests-table';\n\n// Mapping zwischen Tabellen-Spalten-IDs und Card-Metadaten-IDs\n// Tabellen-Spalte -> Card-Metadaten (kann Array sein fr 1:N Mapping)\nconst tableToCardMapping: Record<string, string[]> = {\n  'title': ['title'],\n  'status': ['status'],\n  'requestedByResponsible': ['requestedBy', 'responsible'], // 1 Tabelle-Spalte -> 2 Card-Metadaten\n  'branch': ['branch'],\n  'dueDate': ['dueDate'],\n  'actions': [], // Keine Card-Entsprechung\n  'description': ['description'] // Nur in Cards verfgbar\n};\n\n// Reverse Mapping: Card-Metadaten -> Tabellen-Spalten\nconst cardToTableMapping: Record<string, string> = {\n  'title': 'title',\n  'status': 'status',\n  'requestedBy': 'requestedByResponsible',\n  'responsible': 'requestedByResponsible',\n  'branch': 'branch',\n  'dueDate': 'dueDate',\n  'description': 'description'\n};\n\n// Helfer-Funktion: Tabellen-Spalte ausgeblendet -> Card-Metadaten ausblenden\nconst getHiddenCardMetadata = (hiddenTableColumns: string[]): Set<string> => {\n  const hiddenCardMetadata = new Set<string>();\n  hiddenTableColumns.forEach(tableCol => {\n    const cardMetadata = tableToCardMapping[tableCol] || [];\n    cardMetadata.forEach(cardMeta => hiddenCardMetadata.add(cardMeta));\n  });\n  return hiddenCardMetadata;\n};\n\n// Helfer-Funktion: Card-Metadaten zu Tabellen-Spalten konvertieren\nconst getCardMetadataFromColumnOrder = (columnOrder: string[]): string[] => {\n  const cardMetadata: string[] = [];\n  columnOrder.forEach(tableCol => {\n    const cardMeta = tableToCardMapping[tableCol];\n    if (cardMeta && cardMeta.length > 0) {\n      cardMetadata.push(...cardMeta);\n    }\n  });\n  // Beschreibung hinzufgen, wenn nicht schon vorhanden\n  if (!cardMetadata.includes('description')) {\n    cardMetadata.push('description');\n  }\n  return cardMetadata;\n};\n\nconst Requests: React.FC = () => {\n  const { t } = useTranslation();\n  const [requests, setRequests] = useState<Request[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  \n  // State-Variablen fr erweiterte Filterbedingungen\n  const [filterConditions, setFilterConditions] = useState<FilterCondition[]>([]);\n  const [filterLogicalOperators, setFilterLogicalOperators] = useState<('AND' | 'OR')[]>([]);\n  \n  // Filter State Management (Controlled Mode)\n  const [activeFilterName, setActiveFilterName] = useState<string>('');\n  const [selectedFilterId, setSelectedFilterId] = useState<number | null>(null);\n  \n  const [isFilterModalOpen, setIsFilterModalOpen] = useState(false);\n  const [sortConfig, setSortConfig] = useState<SortConfig>({ key: 'dueDate', direction: 'asc' });\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const [selectedRequest, setSelectedRequest] = useState<Request | null>(null);\n  const { user } = useAuth();\n  const { hasPermission } = usePermissions();\n  \n  // Status-Funktionen (verwende zentrale Utils mit bersetzungsuntersttzung)\n  // WICHTIG: Funktionalitt bleibt identisch - nur Code-Duplikation entfernt!\n  const getStatusLabel = (status: string): string => {\n    return getStatusText(status, 'request', t);\n  };\n  \n  // Definition der verfgbaren Spalten (dynamisch aus bersetzungen)\n  const availableColumns = useMemo(() => [\n    { id: 'title', label: t('requests.columns.title'), shortLabel: t('requests.columns.title') },\n    { id: 'status', label: t('requests.columns.status'), shortLabel: t('requests.columns.status') },\n    { id: 'requestedByResponsible', label: t('requests.columns.requestedByResponsible'), shortLabel: t('requests.columns.requestedByResponsible').split('/')[0] },\n    { id: 'branch', label: t('requests.columns.branch'), shortLabel: t('requests.columns.branch').substring(0, 5) },\n    { id: 'dueDate', label: t('requests.columns.dueDate'), shortLabel: t('requests.columns.dueDate').substring(0, 5) },\n    { id: 'actions', label: t('requests.columns.actions'), shortLabel: t('common.actions').substring(0, 3) }\n  ], [t]);\n  \n  // Tabellen-Einstellungen laden\n  const {\n    settings,\n    isLoading: isLoadingSettings,\n    updateColumnOrder,\n    updateHiddenColumns,\n    toggleColumnVisibility,\n    isColumnVisible,\n    updateViewMode\n  } = useTableSettings('dashboard_requests', {\n    defaultColumnOrder,\n    defaultHiddenColumns: [],\n    defaultViewMode: 'cards'\n  });\n\n  const [draggedColumn, setDraggedColumn] = useState<string | null>(null);\n  const [dragOverColumn, setDragOverColumn] = useState<string | null>(null);\n\n  // State fr Paginierung\n  const [displayLimit, setDisplayLimit] = useState<number>(10);\n\n  // View-Mode aus Settings laden\n  const viewMode = settings.viewMode || 'cards';\n  \n  // Lokale Sortierrichtungen fr Cards (nicht persistiert)\n  const [cardSortDirections, setCardSortDirections] = useState<Record<string, 'asc' | 'desc'>>(() => {\n    const defaults: Record<string, 'asc' | 'desc'> = {\n      title: 'asc',\n      status: 'asc',\n      requestedBy: 'asc',\n      responsible: 'asc',\n      branch: 'asc',\n      dueDate: 'asc',\n      description: 'asc'\n    };\n    return defaults;\n  });\n\n  // Abgeleitete Werte fr Card-Ansicht aus Tabellen-Settings\n  // Card-Metadaten-Reihenfolge aus columnOrder ableiten\n  const cardMetadataOrder = useMemo(() => {\n    return getCardMetadataFromColumnOrder(settings.columnOrder || defaultColumnOrder);\n  }, [settings.columnOrder]);\n\n  // Versteckte Card-Metadaten aus hiddenColumns ableiten\n  const hiddenCardMetadata = useMemo(() => {\n    return getHiddenCardMetadata(settings.hiddenColumns || []);\n  }, [settings.hiddenColumns]);\n\n  // Sichtbare Card-Metadaten (alle Card-Metadaten minus versteckte)\n  const visibleCardMetadata = useMemo(() => {\n    return new Set(cardMetadataOrder.filter(meta => !hiddenCardMetadata.has(meta)));\n  }, [cardMetadataOrder, hiddenCardMetadata]);\n\n  // CSS-Klasse fr Dashboard-Box setzen (fr CSS-basierte Schattierungs-Entfernung)\n  useEffect(() => {\n    const wrapper = document.querySelector('.dashboard-requests-wrapper');\n    if (wrapper) {\n      if (viewMode === 'cards') {\n        wrapper.classList.add('cards-mode');\n      } else {\n        wrapper.classList.remove('cards-mode');\n      }\n    }\n  }, [viewMode]);\n\n  const fetchRequests = async () => {\n    try {\n      setLoading(true);\n      const response = await axiosInstance.get('/requests');\n      setRequests(response.data);\n      setError(null);\n    } catch (err) {\n      console.error('Request Error:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      if (axiosError.code === 'ERR_NETWORK') {\n        setError('Verbindung zum Server konnte nicht hergestellt werden. Bitte stellen Sie sicher, dass der Server luft.');\n      } else {\n        setError(`Fehler beim Laden der Requests: ${axiosError.response?.data?.message || axiosError.message}`);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchRequests();\n  }, []);\n\n  // Standard-Filter erstellen und speichern\n  useEffect(() => {\n    const createStandardFilters = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        \n        if (!token) {\n          console.error('Nicht authentifiziert');\n          return;\n        }\n\n        // Prfen, ob die Standard-Filter bereits existieren\n        const existingFiltersResponse = await axiosInstance.get(\n          `${API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(REQUESTS_TABLE_ID)}`,\n          {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          }\n        );\n\n        const existingFilters = existingFiltersResponse.data || [];\n        // Suche nach Filtern mit deutschen oder bersetzten Namen (fr Rckwrtskompatibilitt)\n        const archivFilterExists = existingFilters.some(filter => \n          filter.name === 'Archiv' || \n          filter.name === t('requests.filters.archiv') ||\n          filter.name === 'Archivo'\n        );\n        const aktuellFilterExists = existingFilters.some(filter => \n          filter.name === 'Aktuell' || \n          filter.name === t('requests.filters.aktuell') ||\n          filter.name === 'Actual'\n        );\n\n        // Erstelle \"Archiv\"-Filter, wenn er noch nicht existiert\n        if (!archivFilterExists) {\n          const archivFilter = {\n            tableId: REQUESTS_TABLE_ID,\n            name: 'Archiv', // Immer auf Deutsch speichern, wird beim Anzeigen bersetzt\n            conditions: [\n              { column: 'status', operator: 'equals', value: 'approved' },\n              { column: 'status', operator: 'equals', value: 'denied' }\n            ],\n            operators: ['OR']\n          };\n\n          await axiosInstance.post(\n            `${API_ENDPOINTS.SAVED_FILTERS.BASE}`,\n            archivFilter,\n            {\n              headers: {\n                Authorization: `Bearer ${token}`,\n                'Content-Type': 'application/json'\n              }\n            }\n          );\n          console.log('Archiv-Filter fr Requests erstellt');\n        }\n\n      // Erstelle \"Aktuell\"-Filter, wenn er noch nicht existiert (immer mit deutschem Namen fr Konsistenz)\n      if (!aktuellFilterExists) {\n        const aktuellFilter = {\n          tableId: REQUESTS_TABLE_ID,\n          name: 'Aktuell', // Immer auf Deutsch speichern, wird beim Anzeigen bersetzt\n          conditions: [\n            { column: 'status', operator: 'notEquals', value: 'approved' },\n            { column: 'status', operator: 'notEquals', value: 'denied' }\n          ],\n          operators: ['AND']\n        };\n\n          await axiosInstance.post(\n            `${API_ENDPOINTS.SAVED_FILTERS.BASE}`,\n            aktuellFilter,\n            {\n              headers: {\n                Authorization: `Bearer ${token}`,\n                'Content-Type': 'application/json'\n              }\n            }\n          );\n          console.log('Aktuell-Filter fr Requests erstellt');\n        }\n      } catch (error) {\n        console.error('Fehler beim Erstellen der Standard-Filter:', error);\n      }\n    };\n\n    createStandardFilters();\n  }, []);\n\n  // Initialer Default-Filter setzen (Controlled Mode)\n  useEffect(() => {\n    const setInitialFilter = async () => {\n      try {\n        const response = await axiosInstance.get(API_ENDPOINTS.SAVED_FILTERS.BY_TABLE(REQUESTS_TABLE_ID));\n        const filters = response.data;\n        \n        // Suche nach \"Aktuell\" Filter (kann auch \"Actual\" sein fr Rckwrtskompatibilitt)\n        const aktuellFilter = filters.find((filter: any) => \n          filter.name === 'Aktuell' || filter.name === 'Actual'\n        );\n        if (aktuellFilter) {\n          setActiveFilterName('Aktuell'); // Speichere deutschen Namen, wird beim Anzeigen bersetzt\n          setSelectedFilterId(aktuellFilter.id);\n          applyFilterConditions(aktuellFilter.conditions, aktuellFilter.operators);\n        }\n      } catch (error) {\n        console.error('Fehler beim Setzen des initialen Filters:', error);\n      }\n    };\n\n    setInitialFilter();\n  }, []);\n\n  // getStatusText wird jetzt direkt von statusUtils verwendet (siehe getStatusLabel oben)\n\n  // Status-Workflow: vorheriger/nchster Status fr Shift-Buttons\n  const getPreviousStatus = (status: Request['status']): Request['status'] | null => {\n    switch (status) {\n      case 'to_improve':\n      case 'approved':\n      case 'denied':\n        return 'approval';\n      default:\n        return null;\n    }\n  };\n\n  const getNextStatuses = (status: Request['status']): Request['status'][] => {\n    switch (status) {\n      case 'approval':\n        return ['approved', 'to_improve', 'denied'];\n      case 'to_improve':\n        return ['denied'];\n      default:\n        return [];\n    }\n  };\n\n  const handleSort = (key: SortConfig['key']) => {\n    setSortConfig(current => ({\n      key,\n      direction: current.key === key && current.direction === 'asc' ? 'desc' : 'asc'\n    }));\n  };\n\n  const handleStatusChange = async (requestId: number, newStatus: Request['status']) => {\n    try {\n      const currentRequest = requests.find(r => r.id === requestId);\n      if (!currentRequest) {\n        setError('Request nicht gefunden');\n        return;\n      }\n\n      // Optimistisches Update: State sofort aktualisieren\n      setRequests(prevRequests => \n        prevRequests.map(request => \n          request.id === requestId ? { ...request, status: newStatus } : request\n        )\n      );\n\n      await axiosInstance.put(`/requests/${requestId}`, \n        { \n          status: newStatus,\n          create_todo: currentRequest.createTodo\n        }\n      );\n    } catch (err) {\n      // Rollback bei Fehler: Vollstndiges Reload\n      console.error('Status Update Error:', err);\n      fetchRequests();\n      const axiosError = err as any;\n      setError(`Fehler beim Aktualisieren des Status: ${axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten'}`);\n    }\n  };\n\n  // Handler fr das Verschieben von Spalten per Drag & Drop\n  const handleMoveColumn = useCallback((dragIndex: number, hoverIndex: number) => {\n    // Erstelle eine neue Kopie der Spaltenreihenfolge\n    const newColumnOrder = [...settings.columnOrder];\n    \n    // Ermittle die zu verschiebenden Spalten\n    const movingColumn = newColumnOrder[dragIndex];\n    \n    // Entferne die Spalte an der alten Position\n    newColumnOrder.splice(dragIndex, 1);\n    \n    // Fge die Spalte an der neuen Position ein\n    newColumnOrder.splice(hoverIndex, 0, movingColumn);\n    \n    // Aktualisiere die Spaltenreihenfolge\n    updateColumnOrder(newColumnOrder);\n  }, [settings.columnOrder, updateColumnOrder]);\n\n  // Handler fr Drag & Drop direkt in der Tabelle\n  const handleDragStart = (columnId: string) => {\n    setDraggedColumn(columnId);\n  };\n\n  const handleDragOver = (e: React.DragEvent, columnId: string) => {\n    e.preventDefault();\n    if (draggedColumn && draggedColumn !== columnId) {\n      setDragOverColumn(columnId);\n    }\n  };\n\n  const handleDrop = (e: React.DragEvent, columnId: string) => {\n    e.preventDefault();\n    if (draggedColumn && draggedColumn !== columnId) {\n      const dragIndex = settings.columnOrder.indexOf(draggedColumn);\n      const hoverIndex = settings.columnOrder.indexOf(columnId);\n      \n      if (dragIndex > -1 && hoverIndex > -1) {\n        handleMoveColumn(dragIndex, hoverIndex);\n      }\n    }\n    setDraggedColumn(null);\n    setDragOverColumn(null);\n  };\n\n  const handleDragEnd = () => {\n    setDraggedColumn(null);\n    setDragOverColumn(null);\n  };\n\n  const applyFilterConditions = (conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setFilterConditions(conditions);\n    setFilterLogicalOperators(operators);\n  };\n  \n  const resetFilterConditions = () => {\n    setFilterConditions([]);\n    setFilterLogicalOperators([]);\n    setActiveFilterName('');\n    setSelectedFilterId(null);\n  };\n  \n  // Filter Change Handler (Controlled Mode)\n  const handleFilterChange = (name: string, id: number | null, conditions: FilterCondition[], operators: ('AND' | 'OR')[]) => {\n    setActiveFilterName(name);\n    setSelectedFilterId(id);\n    applyFilterConditions(conditions, operators);\n  };\n\n  const getActiveFilterCount = () => {\n    return filterConditions.length;\n  };\n\n  const filteredAndSortedRequests = useMemo(() => {\n    return requests\n      .filter(request => {\n        // Globale Suchfunktion\n        if (searchTerm) {\n          const searchLower = searchTerm.toLowerCase();\n          const matchesSearch = \n            request.title.toLowerCase().includes(searchLower) ||\n            `${request.requestedBy.firstName} ${request.requestedBy.lastName}`.toLowerCase().includes(searchLower) ||\n            `${request.responsible.firstName} ${request.responsible.lastName}`.toLowerCase().includes(searchLower) ||\n            request.branch.name.toLowerCase().includes(searchLower);\n          \n          if (!matchesSearch) return false;\n        }\n        \n        // Wenn erweiterte Filterbedingungen definiert sind, wende diese an\n        // WICHTIG: Verwende zentrale Filter-Logik - Funktionalitt bleibt identisch!\n        if (filterConditions.length > 0) {\n          // Column-Evaluatoren fr Requests (exakt gleiche Logik wie vorher)\n          const columnEvaluators: any = {\n            'title': (req: Request, cond: FilterCondition) => {\n              const value = (cond.value as string || '').toLowerCase();\n              const title = req.title.toLowerCase();\n              if (cond.operator === 'equals') return req.title === cond.value;\n              if (cond.operator === 'contains') return title.includes(value);\n              if (cond.operator === 'startsWith') return title.startsWith(value);\n              if (cond.operator === 'endsWith') return title.endsWith(value);\n              return null;\n            },\n            'status': (req: Request, cond: FilterCondition) => {\n              if (cond.operator === 'equals') return req.status === cond.value;\n              if (cond.operator === 'notEquals') return req.status !== cond.value;\n              return null;\n            },\n            'requestedBy': (req: Request, cond: FilterCondition) => {\n              const requestedByName = `${req.requestedBy.firstName} ${req.requestedBy.lastName}`.toLowerCase();\n              const value = (cond.value as string || '').toLowerCase();\n              if (cond.operator === 'contains') return requestedByName.includes(value);\n              if (cond.operator === 'equals') return requestedByName === value;\n              return null;\n            },\n            'responsible': (req: Request, cond: FilterCondition) => {\n              const responsibleName = `${req.responsible.firstName} ${req.responsible.lastName}`.toLowerCase();\n              const value = (cond.value as string || '').toLowerCase();\n              if (cond.operator === 'contains') return responsibleName.includes(value);\n              if (cond.operator === 'equals') return responsibleName === value;\n              return null;\n            },\n            'branch': (req: Request, cond: FilterCondition) => {\n              const branchName = req.branch.name.toLowerCase();\n              const value = (cond.value as string || '').toLowerCase();\n              if (cond.operator === 'contains') return branchName.includes(value);\n              if (cond.operator === 'equals') return branchName === value;\n              return null;\n            },\n            'dueDate': (req: Request, cond: FilterCondition) => {\n              return evaluateDateCondition(req.dueDate, cond);\n            }\n          };\n\n          const getFieldValue = (req: Request, columnId: string): any => {\n            switch (columnId) {\n              case 'title': return req.title;\n              case 'status': return req.status;\n              case 'requestedBy': return `${req.requestedBy.firstName} ${req.requestedBy.lastName}`;\n              case 'responsible': return `${req.responsible.firstName} ${req.responsible.lastName}`;\n              case 'branch': return req.branch.name;\n              case 'dueDate': return req.dueDate;\n              default: return (req as any)[columnId];\n            }\n          };\n\n          // Wende Filter mit zentraler Logik an (nur fr dieses einzelne Item)\n          const filtered = applyFilters(\n            [request],\n            filterConditions,\n            filterLogicalOperators,\n            getFieldValue,\n            columnEvaluators\n          );\n          \n          if (filtered.length === 0) return false;\n        }\n        \n        return true;\n      })\n      .sort((a, b) => {\n        // Bei Cards-Mode: Multi-Sortierung basierend auf Spaltenreihenfolge\n        if (viewMode === 'cards') {\n          // Sortiere nach sichtbaren Spalten in der definierten Reihenfolge\n          const sortableColumns = cardMetadataOrder.filter(colId => visibleCardMetadata.has(colId));\n          \n          for (const columnId of sortableColumns) {\n            let aValue: any;\n            let bValue: any;\n            \n            // Hole Werte basierend auf Spalten-ID\n            switch (columnId) {\n              case 'title':\n                aValue = a.title.toLowerCase();\n                bValue = b.title.toLowerCase();\n                break;\n              case 'status':\n                // Status-Prioritt fr Sortierung: approval < to_improve < approved < denied\n                const statusOrder: Record<string, number> = {\n                  'approval': 0,\n                  'to_improve': 1,\n                  'approved': 2,\n                  'denied': 3\n                };\n                aValue = statusOrder[a.status] ?? 999;\n                bValue = statusOrder[b.status] ?? 999;\n                break;\n              case 'requestedBy':\n                aValue = `${a.requestedBy.firstName} ${a.requestedBy.lastName}`.toLowerCase();\n                bValue = `${b.requestedBy.firstName} ${b.requestedBy.lastName}`.toLowerCase();\n                break;\n              case 'responsible':\n                aValue = `${a.responsible.firstName} ${a.responsible.lastName}`.toLowerCase();\n                bValue = `${b.responsible.firstName} ${b.responsible.lastName}`.toLowerCase();\n                break;\n              case 'branch':\n                aValue = a.branch.name.toLowerCase();\n                bValue = b.branch.name.toLowerCase();\n                break;\n              case 'dueDate':\n                aValue = new Date(a.dueDate).getTime();\n                bValue = new Date(b.dueDate).getTime();\n                break;\n              case 'description':\n                aValue = (a.description || '').toLowerCase();\n                bValue = (b.description || '').toLowerCase();\n                break;\n              default:\n                continue;\n            }\n            \n            // Vergleiche Werte (bercksichtige Sortierrichtung pro Spalte)\n            const direction = cardSortDirections[columnId] || 'asc';\n            if (aValue < bValue) return direction === 'asc' ? -1 : 1;\n            if (aValue > bValue) return direction === 'asc' ? 1 : -1;\n            // Bei Gleichheit: Weiter zur nchsten Spalte\n          }\n          \n          return 0; // Alle Spalten identisch\n        } else {\n          // Tabellen-Mode: Normale Einzel-Sortierung\n          let aValue: any = a[sortConfig.key as keyof Request];\n          let bValue: any = b[sortConfig.key as keyof Request];\n\n          // Handle nested properties\n          if (sortConfig.key === 'requestedBy.firstName') {\n            aValue = a.requestedBy.firstName;\n            bValue = b.requestedBy.firstName;\n          } else if (sortConfig.key === 'responsible.firstName') {\n            aValue = a.responsible.firstName;\n            bValue = b.responsible.firstName;\n          } else if (sortConfig.key === 'branch.name') {\n            aValue = a.branch.name;\n            bValue = b.branch.name;\n          }\n\n          if (aValue < bValue) return sortConfig.direction === 'asc' ? -1 : 1;\n          if (aValue > bValue) return sortConfig.direction === 'asc' ? 1 : -1;\n          return 0;\n        }\n      });\n  }, [requests, searchTerm, sortConfig, filterConditions, filterLogicalOperators, viewMode, cardMetadataOrder, visibleCardMetadata, cardSortDirections]);\n\n  // Funktion zum Kopieren eines Requests\n  const handleCopyRequest = async (request) => {\n    try {\n      if (!user) {\n        setError('Benutzer nicht authentifiziert');\n        return;\n      }\n      \n      // Kopie des Requests erstellen mit angepasstem Titel\n      const copiedRequestData = {\n        title: `${request.title}-Kopie`,\n        responsible_id: request.responsible.id,\n        branch_id: request.branch.id,\n        due_date: request.dueDate ? request.dueDate.split('T')[0] : '',\n        create_todo: request.createTodo,\n        requested_by_id: user.id\n      };\n\n      // Request erstellen\n      const response = await axiosInstance.post(\n        API_ENDPOINTS.REQUESTS.BASE,\n        copiedRequestData\n      );\n\n      // Optimistisches Update: Neuen Request zur Liste hinzufgen statt vollstndigem Reload\n      setRequests(prevRequests => [response.data, ...prevRequests]);\n      \n      // Bearbeitungsmodal fr den kopierten Request ffnen\n      setSelectedRequest(response.data);\n      setIsEditModalOpen(true);\n      \n    } catch (err) {\n      console.error('Fehler beim Kopieren des Requests:', err);\n      // Einfachere Fehlerbehandlung ohne axios-Import\n      const axiosError = err as any;\n      setError(axiosError.response?.data?.message || axiosError.message || 'Ein unerwarteter Fehler ist aufgetreten');\n    }\n  };\n\n  if (loading) return <div className=\"p-4\">Ldt...</div>;\n  if (error) return <div className=\"p-4 text-red-600\">{error}</div>;\n\n  // Filtern und sortieren der Spalten gem den Benutzereinstellungen\n  const visibleColumnIds = settings.columnOrder.filter(id => isColumnVisible(id));\n\n  return (\n    <>\n      <CreateRequestModal \n        isOpen={isCreateModalOpen}\n        onClose={() => setIsCreateModalOpen(false)}\n        onRequestCreated={(newRequest) => {\n          // Optimistisches Update: Neuen Request zur Liste hinzufgen statt vollstndigem Reload\n          setRequests(prevRequests => [newRequest, ...prevRequests]);\n          setIsEditModalOpen(true);\n          setSelectedRequest(newRequest);\n        }}\n      />\n      {selectedRequest && (\n        <EditRequestModal\n          isOpen={isEditModalOpen}\n          onClose={() => {\n            setIsEditModalOpen(false);\n            setSelectedRequest(null);\n          }}\n          onRequestUpdated={(updatedRequest) => {\n            // Optimistisches Update: Request in Liste aktualisieren statt vollstndigem Reload\n            setRequests(prevRequests => \n              prevRequests.map(request => \n                request.id === updatedRequest.id ? updatedRequest : request\n              )\n            );\n            setIsEditModalOpen(false);\n            setSelectedRequest(null);\n          }}\n          request={selectedRequest}\n        />\n      )}\n\n      <div \n        className={viewMode === 'cards' ? '' : 'border-0 rounded-lg'}\n        data-view-mode={viewMode}\n      >\n        {/* Neu angeordnete UI-Elemente in einer Zeile */}\n        <div className={`flex items-center mb-4 justify-between ${viewMode === 'cards' ? '-mx-6 px-6' : ''}`}>\n          {/* Linke Seite: \"Neuer Request\"-Button */}\n          <div className=\"flex items-center\">\n            {hasPermission('requests', 'write', 'table') && (\n              <button\n                onClick={() => setIsCreateModalOpen(true)}\n                className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center\"\n                style={{ width: '30.19px', height: '30.19px' }}\n                title={t('requests.createRequest')}\n                aria-label={t('requests.createRequest')}\n              >\n                <PlusIcon className=\"h-4 w-4\" />\n              </button>\n            )}\n          </div>\n          \n          {/* Mitte: Titel mit Icon */}\n          <div className=\"flex items-center\">\n            <DocumentTextIcon className=\"h-6 w-6 mr-2 dark:text-white\" />\n            <h2 className=\"text-xl font-semibold dark:text-white\">{t('requests.title')}</h2>\n          </div>\n          \n          {/* Rechte Seite: Suchfeld, Filter, View-Toggle und Spalten */}\n          <div className=\"flex items-center gap-1.5\">\n            <input\n              type=\"text\"\n              placeholder={t('common.search') + '...'}\n              className=\"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n            />\n            \n            {/* View-Mode Toggle */}\n            <button\n              className={`p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 ${\n                viewMode === 'cards' ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : ''\n              }`}\n              onClick={() => updateViewMode(viewMode === 'table' ? 'cards' : 'table')}\n              title={viewMode === 'table' ? t('common.viewAsCards') : t('common.viewAsTable')}\n            >\n              {viewMode === 'table' ? (\n                <Squares2X2Icon className=\"h-5 w-5\" />\n              ) : (\n                <TableCellsIcon className=\"h-5 w-5\" />\n              )}\n            </button>\n            \n            {/* Filter-Button */}\n            <button\n              className={`p-2 rounded-md ${getActiveFilterCount() > 0 ? 'bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400' : 'hover:bg-gray-100 dark:hover:bg-gray-700'} ml-1 relative`}\n              onClick={() => setIsFilterModalOpen(!isFilterModalOpen)}\n              title={t('common.filter')}\n              style={{ position: 'relative' }}\n            >\n              <FunnelIcon className=\"h-5 w-5\" />\n              {getActiveFilterCount() > 0 && (\n                <span className=\"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center z-10\" style={{ position: 'absolute', top: '-0.25rem', right: '-0.25rem' }}>\n                  {getActiveFilterCount()}\n                </span>\n              )}\n            </button>\n            \n            {/* Anzeige anpassen - bei beiden Ansichten */}\n            <div className=\"ml-1\">\n              <TableColumnConfig\n                columns={viewMode === 'cards'\n                  ? [\n                      { id: 'title', label: t('requests.columns.title') },\n                      { id: 'status', label: t('requests.columns.status') },\n                      { id: 'requestedBy', label: t('requests.columns.requestedBy') },\n                      { id: 'responsible', label: t('requests.columns.responsible') },\n                      { id: 'branch', label: t('requests.columns.branch') },\n                      { id: 'dueDate', label: t('requests.columns.dueDate') },\n                      { id: 'description', label: t('common.description') }\n                    ]\n                  : availableColumns}\n                visibleColumns={viewMode === 'cards'\n                  ? Array.from(visibleCardMetadata)\n                  : visibleColumnIds}\n                columnOrder={viewMode === 'cards'\n                  ? cardMetadataOrder\n                  : settings.columnOrder}\n                onToggleColumnVisibility={(columnId) => {\n                  if (viewMode === 'cards') {\n                    // Card-Metadaten-ID -> Tabellen-Spalten-ID\n                    const tableColumnId = cardToTableMapping[columnId];\n                    if (tableColumnId) {\n                      // Wenn requestedBy oder responsible ausgeblendet wird, verstecke requestedByResponsible\n                      // Wenn beide requestedBy und responsible ausgeblendet werden, verstecke requestedByResponsible\n                      if (tableColumnId === 'requestedByResponsible') {\n                        // Prfe ob beide bereits ausgeblendet sind\n                        const otherCardMeta = columnId === 'requestedBy' ? 'responsible' : 'requestedBy';\n                        const otherHidden = hiddenCardMetadata.has(otherCardMeta);\n                        const currentlyHidden = settings.hiddenColumns.includes(tableColumnId);\n                        \n                        if (currentlyHidden && !otherHidden) {\n                          // Eine der beiden wird wieder angezeigt, also requestedByResponsible wieder anzeigen\n                          toggleColumnVisibility(tableColumnId);\n                        } else if (!currentlyHidden && otherHidden) {\n                          // Die andere ist bereits ausgeblendet, also requestedByResponsible ausblenden\n                          toggleColumnVisibility(tableColumnId);\n                        } else if (!currentlyHidden) {\n                          // Erste wird ausgeblendet, noch nicht requestedByResponsible ausblenden\n                          // (wird erst ausgeblendet wenn beide ausgeblendet sind)\n                          // Fr jetzt: einfach requestedByResponsible ausblenden wenn eine ausgeblendet wird\n                          toggleColumnVisibility(tableColumnId);\n                        }\n                      } else {\n                        // Normale Spalte: direkt ein/ausblenden\n                        toggleColumnVisibility(tableColumnId);\n                      }\n                    }\n                  } else {\n                    toggleColumnVisibility(columnId);\n                  }\n                }}\n                onMoveColumn={viewMode === 'cards' \n                  ? (dragIndex: number, hoverIndex: number) => {\n                      // Card-Metadaten-Reihenfolge ndern = Tabellen-Spalten-Reihenfolge ndern\n                      const newCardOrder = [...cardMetadataOrder];\n                      const movingCardMeta = newCardOrder[dragIndex];\n                      newCardOrder.splice(dragIndex, 1);\n                      newCardOrder.splice(hoverIndex, 0, movingCardMeta);\n                      \n                      // Konvertiere Card-Metadaten-Reihenfolge zurck zu Tabellen-Spalten-Reihenfolge\n                      // Finde die ursprngliche Tabellen-Spalte fr jedes Card-Metadatum\n                      const newTableOrder: string[] = [];\n                      const processedTableCols = new Set<string>();\n                      \n                      newCardOrder.forEach(cardMeta => {\n                        const tableCol = cardToTableMapping[cardMeta];\n                        if (tableCol && !processedTableCols.has(tableCol)) {\n                          newTableOrder.push(tableCol);\n                          processedTableCols.add(tableCol);\n                        }\n                      });\n                      \n                      // Fehlende Tabellen-Spalten hinzufgen (actions, etc.)\n                      settings.columnOrder.forEach(tableCol => {\n                        if (!newTableOrder.includes(tableCol)) {\n                          newTableOrder.push(tableCol);\n                        }\n                      });\n                      \n                      updateColumnOrder(newTableOrder);\n                    }\n                  : handleMoveColumn}\n                onClose={() => {}}\n                buttonTitle={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n                modalTitle={viewMode === 'cards' ? t('tableColumn.sortAndDisplay') : t('tableColumn.configure')}\n                sortDirections={viewMode === 'cards' ? cardSortDirections : undefined}\n                onSortDirectionChange={viewMode === 'cards' \n                  ? (columnId: string, direction: 'asc' | 'desc') => {\n                      // Lokale Sortierrichtung aktualisieren (nicht persistiert)\n                      setCardSortDirections(prev => ({\n                        ...prev,\n                        [columnId]: direction\n                      }));\n                    }\n                  : undefined}\n                showSortDirection={viewMode === 'cards'}\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Filter-Pane */}\n        {isFilterModalOpen && (\n          <div className={viewMode === 'cards' ? '-mx-6 px-6' : ''}>\n            <FilterPane\n            columns={[\n              { id: 'title', label: t('requests.columns.title') },\n              { id: 'status', label: t('requests.columns.status') },\n              { id: 'requestedBy', label: t('requests.columns.requestedBy') },\n              { id: 'responsible', label: t('requests.columns.responsible') },\n              { id: 'branch', label: t('requests.columns.branch') },\n              { id: 'dueDate', label: t('requests.columns.dueDate') }\n            ]}\n            onApply={applyFilterConditions}\n            onReset={resetFilterConditions}\n            savedConditions={filterConditions}\n            savedOperators={filterLogicalOperators}\n            tableId={REQUESTS_TABLE_ID}\n            />\n          </div>\n        )}\n        \n        {/* Gespeicherte Filter als Tags anzeigen */}\n        <div className={viewMode === 'cards' ? '-mx-6 px-6' : ''}>\n          <SavedFilterTags\n          tableId={REQUESTS_TABLE_ID}\n          onSelectFilter={applyFilterConditions}\n          onReset={resetFilterConditions}\n          activeFilterName={activeFilterName}\n          selectedFilterId={selectedFilterId}\n          onFilterChange={handleFilterChange}\n          defaultFilterName=\"Aktuell\"\n          />\n        </div>\n\n        {/* Conditional Rendering: Table oder Cards */}\n        {viewMode === 'table' ? (\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n            <thead className=\"bg-gray-50 dark:bg-gray-700\">\n              <tr>\n                {/* Dynamisch generierte Spaltenberschriften basierend auf den sichtbaren Spalten */}\n                {visibleColumnIds.map(columnId => {\n                  const column = availableColumns.find(col => col.id === columnId);\n                  if (!column) return null;\n\n                  // Besondere Behandlung fr die Spalte mit requestedBy/responsible\n                  if (columnId === 'requestedByResponsible') {\n                    return (\n                      <th \n                        key={columnId}\n                        className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-move relative\"\n                        draggable\n                        onDragStart={() => handleDragStart(columnId)}\n                        onDragOver={(e) => handleDragOver(e, columnId)}\n                        onDrop={(e) => handleDrop(e, columnId)}\n                        onDragEnd={handleDragEnd}\n                      >\n                        <div className={`flex items-center ${dragOverColumn === columnId ? 'border-l-2 pl-1 border-blue-500' : ''} ${draggedColumn === columnId ? 'opacity-50' : ''}`}>\n                          <ArrowsUpDownIcon className=\"h-3 w-3 mr-1 text-gray-400 dark:text-gray-500\" />\n                          <span className=\"hidden sm:inline\">{column.label}</span>\n                          <span className=\"inline sm:hidden\">{column.shortLabel}</span>\n                        </div>\n                      </th>\n                    );\n                  }\n                  \n                  // Fr alle anderen Spalten\n                  let sortKey: SortConfig['key'] | undefined;\n                  if (columnId === 'title') sortKey = 'title';\n                  if (columnId === 'status') sortKey = 'status';\n                  if (columnId === 'branch') sortKey = 'branch.name';\n                  if (columnId === 'dueDate') sortKey = 'dueDate';\n\n                  return (\n                    <th \n                      key={columnId}\n                      className={`px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider relative ${sortKey ? 'cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700' : ''} ${columnId !== 'actions' ? 'cursor-move' : ''}`}\n                      onClick={sortKey ? () => handleSort(sortKey) : undefined}\n                      draggable={columnId !== 'actions'}\n                      onDragStart={columnId !== 'actions' ? () => handleDragStart(columnId) : undefined}\n                      onDragOver={columnId !== 'actions' ? (e) => handleDragOver(e, columnId) : undefined}\n                      onDrop={columnId !== 'actions' ? (e) => handleDrop(e, columnId) : undefined}\n                      onDragEnd={columnId !== 'actions' ? handleDragEnd : undefined}\n                    >\n                      <div className={`flex items-center ${dragOverColumn === columnId ? 'border-l-2 pl-1 border-blue-500' : ''} ${draggedColumn === columnId ? 'opacity-50' : ''}`}>\n                        {columnId !== 'actions' && <ArrowsUpDownIcon className=\"h-3 w-3 mr-1 text-gray-400 dark:text-gray-500\" />}\n                        <span className=\"hidden sm:inline\">{column.label}</span>\n                        <span className=\"inline sm:hidden\">{column.shortLabel}</span>\n                        {sortKey && sortConfig.key === sortKey && (sortConfig.direction === 'asc' ? '' : '')}\n                      </div>\n                    </th>\n                  );\n                })}\n              </tr>\n            </thead>\n            <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n              {filteredAndSortedRequests.length === 0 ? (\n                <tr>\n                  <td colSpan={visibleColumnIds.length} className=\"px-3 py-4 text-center text-gray-500 dark:text-gray-400\">\n                    <div className=\"flex flex-col items-center justify-center gap-4\">\n                      <DocumentTextIcon className=\"h-10 w-10 text-gray-400 dark:text-gray-500\" />\n                      <div className=\"text-sm\">Keine Requests gefunden</div>\n                    </div>\n                  </td>\n                </tr>\n              ) : (\n                <>\n                  {filteredAndSortedRequests.slice(0, displayLimit).map(request => {\n                    const expiryStatus = getExpiryStatus(request.dueDate, 'request');\n                    const expiryColors = getExpiryColorClasses(expiryStatus);\n                    \n                    return (\n                      <tr \n                        key={request.id} \n                        className={`hover:bg-gray-50 dark:hover:bg-gray-700 ${\n                          expiryStatus !== 'none' ? `${expiryColors.bgClass} ${expiryColors.borderClass} border-l-4` : ''\n                        }`}\n                      >\n                        {/* Dynamisch generierte Zellen basierend auf den sichtbaren Spalten */}\n                        {visibleColumnIds.map(columnId => {\n                        switch (columnId) {\n                          case 'title':\n                            return (\n                              <td key={columnId} className=\"px-6 py-4\">\n                                <div className=\"text-sm text-gray-900 dark:text-gray-200 break-words flex items-center\">\n                                  {request.title}\n                                  {request.description && (\n                                    <div className=\"ml-2 relative group\">\n                                      <button \n                                        className=\"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300\"\n                                        title={t('common.description')}\n                                      >\n                                        <InformationCircleIcon className=\"h-5 w-5\" />\n                                      </button>\n                                      <div className=\"hidden group-hover:block absolute left-0 mt-2 p-2 bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 shadow-lg rounded-md border border-gray-200 dark:border-gray-700 w-144 max-h-96 overflow-y-auto min-w-[36rem] z-10\">\n                                        <MarkdownPreview content={request.description} showImagePreview={true} />\n                                      </div>\n                                    </div>\n                                  )}\n                                </div>\n                              </td>\n                            );\n                          case 'status':\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${getStatusColor(request.status, 'request')} dark:bg-opacity-30 status-col`}>\n                                  {getStatusLabel(request.status)}\n                                </span>\n                              </td>\n                            );\n                          case 'requestedByResponsible':\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <div className=\"flex flex-col\">\n                                  <div className=\"text-sm text-gray-900 dark:text-gray-200\">\n                                    <span className=\"text-xs text-gray-500 dark:text-gray-400 hidden sm:inline\">{t('requests.columns.requestedBy')}:</span>\n                                    <span className=\"text-xs text-gray-500 dark:text-gray-400 inline sm:hidden\">{t('requests.columns.requestedBy').substring(0, 5)}:</span><br />\n                                    {`${request.requestedBy.firstName} ${request.requestedBy.lastName}`}\n                                  </div>\n                                  <div className=\"text-sm text-gray-900 dark:text-gray-200 mt-1\">\n                                    <span className=\"text-xs text-gray-500 dark:text-gray-400 hidden sm:inline\">{t('requests.columns.responsible')}:</span>\n                                    <span className=\"text-xs text-gray-500 dark:text-gray-400 inline sm:hidden\">{t('requests.columns.responsible').substring(0, 4)}:</span><br />\n                                    {`${request.responsible.firstName} ${request.responsible.lastName}`}\n                                  </div>\n                                </div>\n                              </td>\n                            );\n                          case 'branch':\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <div className=\"text-sm text-gray-900 dark:text-gray-200\">{request.branch.name}</div>\n                              </td>\n                            );\n                          case 'dueDate':\n                            const expiryStatusForDate = getExpiryStatus(request.dueDate, 'request');\n                            const expiryColorsForDate = getExpiryColorClasses(expiryStatusForDate);\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <div className={`text-sm ${expiryStatusForDate !== 'none' ? expiryColorsForDate.textClass : 'text-gray-900 dark:text-gray-200'}`}>\n                                  {new Date(request.dueDate).toLocaleDateString()}\n                                  {expiryStatusForDate !== 'none' && (\n                                    <span className=\"ml-2 text-xs\"></span>\n                                  )}\n                                </div>\n                              </td>\n                            );\n                          case 'actions':\n                            return (\n                              <td key={columnId} className=\"px-6 py-4 whitespace-nowrap\">\n                                <div className=\"flex space-x-2 action-buttons\">\n                                  <div className=\"status-buttons\">\n                                  {request.status === 'approval' && hasPermission('requests', 'write', 'table') && (\n                                    <>\n                                      <button\n                                        onClick={() => handleStatusChange(request.id, 'approved')}\n                                        className=\"p-1 bg-green-600 dark:bg-green-500 text-white rounded hover:bg-green-700 dark:hover:bg-green-600\"\n                                        title={t('requests.actions.approve')}\n                                      >\n                                        <CheckIcon className=\"h-5 w-5\" />\n                                      </button>\n                                      <button\n                                        onClick={() => handleStatusChange(request.id, 'to_improve')}\n                                        className=\"p-1 bg-orange-600 dark:bg-orange-500 text-white rounded hover:bg-orange-700 dark:hover:bg-orange-600\"\n                                        title={t('requests.actions.improve')}\n                                      >\n                                        <ExclamationTriangleIcon className=\"h-5 w-5\" />\n                                      </button>\n                                      <button\n                                        onClick={() => handleStatusChange(request.id, 'denied')}\n                                        className=\"p-1 bg-red-600 dark:bg-red-500 text-white rounded hover:bg-red-700 dark:hover:bg-red-600\"\n                                        title={t('requests.actions.deny')}\n                                      >\n                                        <XMarkIcon className=\"h-5 w-5\" />\n                                      </button>\n                                    </>\n                                  )}\n                                  {request.status === 'to_improve' && hasPermission('requests', 'write', 'table') && (\n                                    <>\n                                      <button\n                                        onClick={() => handleStatusChange(request.id, 'approval')}\n                                        className=\"p-1 bg-yellow-600 dark:bg-yellow-500 text-white rounded hover:bg-yellow-700 dark:hover:bg-yellow-600\"\n                                        title={t('requests.actions.recheck')}\n                                      >\n                                        <ArrowPathIcon className=\"h-5 w-5\" />\n                                      </button>\n                                      <button\n                                        onClick={() => handleStatusChange(request.id, 'denied')}\n                                        className=\"p-1 bg-red-600 dark:bg-red-500 text-white rounded hover:bg-red-700 dark:hover:bg-red-600\"\n                                        title={t('requests.actions.deny')}\n                                      >\n                                        <XMarkIcon className=\"h-5 w-5\" />\n                                      </button>\n                                    </>\n                                  )}\n                                  {(request.status === 'approved' || request.status === 'denied') && hasPermission('requests', 'write', 'table') && (\n                                    <button\n                                      onClick={() => handleStatusChange(request.id, 'approval')}\n                                      className=\"p-1 bg-yellow-600 dark:bg-yellow-500 text-white rounded hover:bg-yellow-700 dark:hover:bg-yellow-600\"\n                                      title={t('requests.actions.recheck')}\n                                    >\n                                      <ArrowPathIcon className=\"h-5 w-5\" />\n                                    </button>\n                                  )}\n                                  </div>\n                                  {hasPermission('requests', 'write', 'table') && (\n                                    <button\n                                      onClick={() => {\n                                        setSelectedRequest(request);\n                                        setIsEditModalOpen(true);\n                                      }}\n                                      className=\"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 edit-button ml-0.5\"\n                                    >\n                                      <PencilIcon className=\"h-5 w-5\" />\n                                    </button>\n                                  )}\n                                  {hasPermission('requests', 'both', 'table') && (\n                                    <button\n                                      onClick={() => handleCopyRequest(request)}\n                                      className=\"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 copy-button ml-0.5\"\n                                      title={t('requests.actions.copy')}\n                                    >\n                                      <DocumentDuplicateIcon className=\"h-5 w-5\" />\n                                    </button>\n                                  )}\n                                </div>\n                              </td>\n                            );\n                          default:\n                            return null;\n                        }\n                        })}\n                      </tr>\n                    );\n                  })}\n                </>\n              )}\n            </tbody>\n          </table>\n        </div>\n        ) : (\n          /* Card-Ansicht - ohne Box-Schattierung, Cards auf voller Breite */\n          <div className=\"-mx-6\">\n            {filteredAndSortedRequests.length === 0 ? (\n              <div className=\"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400\">\n                <DocumentTextIcon className=\"h-10 w-10 mb-4 text-gray-400 dark:text-gray-500\" />\n                <div className=\"text-sm\">{t('requests.createRequest.noRequestsFound')}</div>\n              </div>\n            ) : (\n              <CardGrid>\n                {filteredAndSortedRequests.slice(0, displayLimit).map(request => {\n                  // Metadaten basierend auf sichtbaren Einstellungen - strukturiert nach Position\n                  const metadata: MetadataItem[] = [];\n                  \n                  // Links: Niederlassung (meist ausgeblendet)\n                  if (visibleCardMetadata.has('branch')) {\n                    metadata.push({\n                      icon: <BuildingOfficeIcon className=\"h-4 w-4\" />,\n                      label: t('requests.columns.branch'),\n                      value: request.branch.name,\n                      section: 'left'\n                    });\n                  }\n                  \n                  // Haupt-Metadaten: Ersteller (erste Zeile in der Mitte)\n                  if (visibleCardMetadata.has('requestedBy')) {\n                    metadata.push({\n                      icon: <UserIcon className=\"h-4 w-4\" />,\n                      label: t('requests.columns.requestedBy'),\n                      value: `${request.requestedBy.firstName} ${request.requestedBy.lastName}`,\n                      section: 'main'\n                    });\n                  }\n                  \n                  // Verantwortlicher (zweite Zeile in der Mitte)\n                  if (visibleCardMetadata.has('responsible')) {\n                    metadata.push({\n                      icon: <UserIcon className=\"h-4 w-4\" />,\n                      label: t('requests.columns.responsible'),\n                      value: `${request.responsible.firstName} ${request.responsible.lastName}`,\n                      section: 'main-second' // Neue Section fr zweite Zeile\n                    });\n                  }\n                  \n                  // Rechts: Flligkeit (erste Zeile rechts, neben Status)\n                  if (visibleCardMetadata.has('dueDate')) {\n                    const dueDateItem = createDueDateMetadataItem(\n                      request.dueDate,\n                      'request',\n                      undefined,\n                      undefined,\n                      <CalendarIcon className=\"h-4 w-4\" />,\n                      t('requests.columns.dueDate'),\n                      (date) => format(date, 'dd.MM.yyyy', { locale: de }),\n                      false // Keine Badge-Art, nur Text\n                    );\n                    metadata.push({\n                      ...dueDateItem,\n                      section: 'right-inline' // Neue Section fr inline rechts (neben Status)\n                    });\n                  }\n                  \n                  // Full-Width: Beschreibung\n                  if (visibleCardMetadata.has('description') && request.description) {\n                    metadata.push({\n                      label: t('common.description'),\n                      value: '', // Nicht verwendet bei descriptionContent\n                      descriptionContent: request.description, // Fr expandierbare Beschreibung\n                      section: 'full'\n                    });\n                  }\n\n                  // Action-Buttons zusammenstellen\n                  const actionButtons = (\n                    <div className=\"flex items-center space-x-2\">\n                      {/* Status-Buttons */}\n                      {request.status === 'approval' && hasPermission('requests', 'write', 'table') && (\n                        <>\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleStatusChange(request.id, 'approved');\n                            }}\n                            className=\"p-1.5 bg-green-600 text-white rounded hover:bg-green-700\"\n                            title={t('requests.actions.approve')}\n                          >\n                            <CheckIcon className=\"h-4 w-4\" />\n                          </button>\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleStatusChange(request.id, 'to_improve');\n                            }}\n                            className=\"p-1.5 bg-orange-600 text-white rounded hover:bg-orange-700\"\n                            title={t('requests.actions.improve')}\n                          >\n                            <ExclamationTriangleIcon className=\"h-4 w-4\" />\n                          </button>\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleStatusChange(request.id, 'denied');\n                            }}\n                            className=\"p-1.5 bg-red-600 text-white rounded hover:bg-red-700\"\n                            title={t('requests.actions.deny')}\n                          >\n                            <XMarkIcon className=\"h-4 w-4\" />\n                          </button>\n                        </>\n                      )}\n                      {request.status === 'to_improve' && hasPermission('requests', 'write', 'table') && (\n                        <>\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleStatusChange(request.id, 'approval');\n                            }}\n                            className=\"p-1.5 bg-yellow-600 text-white rounded hover:bg-yellow-700\"\n                            title={t('requests.actions.recheck')}\n                          >\n                            <ArrowPathIcon className=\"h-4 w-4\" />\n                          </button>\n                          <button\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              handleStatusChange(request.id, 'denied');\n                            }}\n                            className=\"p-1.5 bg-red-600 text-white rounded hover:bg-red-700\"\n                            title={t('requests.actions.deny')}\n                          >\n                            <XMarkIcon className=\"h-4 w-4\" />\n                          </button>\n                        </>\n                      )}\n                      {(request.status === 'approved' || request.status === 'denied') && hasPermission('requests', 'write', 'table') && (\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleStatusChange(request.id, 'approval');\n                          }}\n                          className=\"p-1.5 bg-yellow-600 text-white rounded hover:bg-yellow-700\"\n                          title={t('requests.actions.recheck')}\n                        >\n                          <ArrowPathIcon className=\"h-4 w-4\" />\n                        </button>\n                      )}\n                      {hasPermission('requests', 'write', 'table') && (\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            setSelectedRequest(request);\n                            setIsEditModalOpen(true);\n                          }}\n                          className=\"p-1.5 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300\"\n                          title={t('common.edit')}\n                        >\n                          <PencilIcon className=\"h-4 w-4\" />\n                        </button>\n                      )}\n                      {hasPermission('requests', 'both', 'table') && (\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleCopyRequest(request);\n                          }}\n                          className=\"p-1.5 text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300\"\n                          title={t('requests.actions.copy')}\n                        >\n                          <DocumentDuplicateIcon className=\"h-4 w-4\" />\n                        </button>\n                      )}\n                    </div>\n                  );\n\n                  // Status-Workflow bestimmen fr Shift-Buttons\n                  const previousStatus = getPreviousStatus(request.status);\n                  const nextStatuses = getNextStatuses(request.status);\n                  const firstNextStatus = nextStatuses.length > 0 ? nextStatuses[0] : null;\n\n                  return (\n                    <DataCard\n                      key={request.id}\n                      title={request.title}\n                      status={{\n                        label: getStatusText(request.status, 'request', t),\n                        color: getStatusColor(request.status, 'request'),\n                        onPreviousClick: previousStatus && hasPermission('requests', 'write', 'table')\n                          ? () => handleStatusChange(request.id, previousStatus)\n                          : undefined,\n                        onNextClick: firstNextStatus && hasPermission('requests', 'write', 'table')\n                          ? () => handleStatusChange(request.id, firstNextStatus)\n                          : undefined\n                      }}\n                      metadata={metadata}\n                      actions={actionButtons}\n                    />\n                  );\n                })}\n              </CardGrid>\n            )}\n          </div>\n        )}\n        \n        {/* \"Mehr anzeigen\" Button */}\n        {filteredAndSortedRequests.length > displayLimit && (\n          <div className=\"mt-4 flex justify-center\">\n            <button\n              className=\"px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-white dark:bg-gray-700 border border-blue-300 dark:border-gray-600 rounded-md hover:bg-blue-50 dark:hover:bg-gray-600\"\n              onClick={() => setDisplayLimit(prevLimit => prevLimit + 10)}\n            >\n              {t('common.showMore')} ({filteredAndSortedRequests.length - displayLimit} {t('common.remaining')})\n            </button>\n          </div>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default Requests; ","import React, { useState, useEffect, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { format, startOfWeek, endOfWeek, eachDayOfInterval, getWeek, getYear, parse, addDays } from 'date-fns';\nimport { de } from 'date-fns/locale';\nimport { ChartBarIcon, DocumentArrowDownIcon } from '@heroicons/react/24/outline';\nimport { API_URL, API_ENDPOINTS } from '../config/api.ts';\nimport WorktimeList from './WorktimeList.tsx';\nimport axios from 'axios';\nimport axiosInstance from '../config/axios.ts';\nimport { WorktimeModal } from './WorktimeModal.tsx';\nimport { convertWeekToDate, getWeekDays } from '../utils/dateUtils.ts';\nimport { useAuth } from '../hooks/useAuth.tsx';\n\n// Neue Schnittstelle fr das WorktimeModal mit selectedDate\ninterface WorktimeModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    selectedDate: string; // Im Kontext von WorktimeStats ist selectedDate immer erforderlich\n}\n\ninterface WorktimeStats {\n    totalHours: number;\n    averageHoursPerDay: number;\n    daysWorked: number;\n    weeklyData: {\n        day: string;\n        hours: number;\n        date: string; // Datum im Format YYYY-MM-DD\n    }[];\n}\n\nconst WorktimeStats: React.FC = () => {\n    const { t } = useTranslation();\n    const { user } = useAuth();\n    const [stats, setStats] = useState<WorktimeStats | null>(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n    const [maxHours, setMaxHours] = useState<number>(8); // Standard 8 Stunden\n    \n    // Aktuelle Woche im Format YYYY-Www fr das Input-Element\n    const today = new Date();\n    \n    const currentWeekInput = `${getYear(today)}-W${String(getWeek(today, { locale: de })).padStart(2, '0')}`;\n    \n    const [selectedWeekInput, setSelectedWeekInput] = useState<string>(currentWeekInput);\n    \n    // Berechne das Datum des Montags der aktuellen Woche\n    const currentMonday = startOfWeek(today, { weekStartsOn: 1 });\n    \n    const [selectedWeekDate, setSelectedWeekDate] = useState<string>(format(currentMonday, 'yyyy-MM-dd'));\n    \n    // State fr das WorktimeModal\n    const [showWorkTimeModal, setShowWorkTimeModal] = useState(false);\n    const [selectedDateForModal, setSelectedDateForModal] = useState<string>('');\n\n    // useEffect-Hook fr das Laden der Statistikdaten\n    useEffect(() => {\n        fetchStats();\n    }, [selectedWeekDate, user]);\n\n    const fetchStats = async () => {\n        try {\n            const token = localStorage.getItem('token');\n            \n            // WICHTIGES FIX: Wenn wir selectedWeekDate verwenden, mssen wir NICHTS mehr berechnen,\n            // da es bereits der Montag der Woche ist (berechnet von convertWeekToDate)\n            const dateToSend = selectedWeekDate;\n            \n            // Verwende axiosInstance statt fetch\n            const response = await axiosInstance.get(`${API_ENDPOINTS.WORKTIME.STATS}?week=${dateToSend}`);\n            \n            // Direkt auf response.data zugreifen statt response.json() zu verwenden\n            const data = response.data;\n            \n            // Wichtig: Stelle sicher, dass die weeklyData das richtige date-Format haben\n            if (data && data.weeklyData) {\n                // Benutze direkt das selectedWeekDate als Start der Woche (Montag)\n                // Behalte das originale Mapping (1-basiert)\n                // bersetze deutsche Wochentage vom Backend zu englischen Keys\n                const weekdayMapping: Record<string, number> = {\n                    \"Montag\": 1,\n                    \"Dienstag\": 2,\n                    \"Mittwoch\": 3,\n                    \"Donnerstag\": 4,\n                    \"Freitag\": 5,\n                    \"Samstag\": 6,\n                    \"Sonntag\": 7,\n                    // Fallback fr andere Sprachen (wenn Backend spter mehrsprachig wird)\n                    [t('worktime.days.monday')]: 1,\n                    [t('worktime.days.tuesday')]: 2,\n                    [t('worktime.days.wednesday')]: 3,\n                    [t('worktime.days.thursday')]: 4,\n                    [t('worktime.days.friday')]: 5,\n                    [t('worktime.days.saturday')]: 6,\n                    [t('worktime.days.sunday')]: 7\n                };\n                \n                // Berechne die Tagesdaten basierend auf selectedWeekDate\n                // Wir brauchen keine Date-Objekte, wir knnen direkt die Tage berechnen\n                const weekDates = [\n                    selectedWeekDate, // Montag (Index 0)\n                    // Berechne die nchsten Tage durch einfaches Inkrementieren des Datums\n                    incrementDateString(selectedWeekDate, 1), // Dienstag (Index 1)\n                    incrementDateString(selectedWeekDate, 2), // Mittwoch (Index 2)\n                    incrementDateString(selectedWeekDate, 3), // Donnerstag (Index 3)\n                    incrementDateString(selectedWeekDate, 4), // Freitag (Index 4)\n                    incrementDateString(selectedWeekDate, 5), // Samstag (Index 5)\n                    incrementDateString(selectedWeekDate, 6)  // Sonntag (Index 6)\n                ];\n                \n                // Konvertiere die Wochentage in Daten im YYYY-MM-DD Format\n                const enrichedData = {\n                    ...data,\n                    weeklyData: data.weeklyData.map((item) => {\n                        // Finde den korrekten Index fr den Wochentag\n                        const dayIndex = weekdayMapping[item.day as keyof typeof weekdayMapping];\n                        if (dayIndex === undefined) {\n                            console.error(`Unbekannter Wochentag: ${item.day}`);\n                            return item; // Bei unbekanntem Wochentag, Eintrag unverndert zurckgeben\n                        }\n                        \n                        // Benutze direkt das berechnete Datum aus dem Array\n                        // Da unser weekdayMapping bei 1 beginnt, mssen wir 1 subtrahieren\n                        const formattedDate = weekDates[dayIndex - 1];\n                        return {\n                            ...item,\n                            date: formattedDate\n                        };\n                    })\n                };\n                \n                setStats(enrichedData);\n            } else {\n                setStats(data);\n            }\n            \n            setError(null);\n        } catch (err: any) {\n            console.error('Fehler beim Abrufen der Statistikdaten:', err);\n            setError(err?.response?.data?.message || 'Fehler beim Laden der Daten');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleExport = async () => {\n        try {\n            const token = localStorage.getItem('token');\n            const response = await axiosInstance.get(`${API_ENDPOINTS.WORKTIME.BASE}/export?week=${selectedWeekDate}`, {\n                responseType: 'blob'\n            });\n\n            const blob = new Blob([response.data], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\n            const url = window.URL.createObjectURL(blob);\n            const a = document.createElement('a');\n            a.href = url;\n            a.download = t('worktime.stats.exportFilename', { week: selectedWeekInput.split('W')[1] });\n            document.body.appendChild(a);\n            a.click();\n            window.URL.revokeObjectURL(url);\n            document.body.removeChild(a);\n        } catch (error) {\n            console.error('Fehler beim Exportieren:', error);\n            setError(t('worktime.stats.export') + ': ' + t('common.error'));\n        }\n    };\n\n    const handleWeekChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const newWeekInput = e.target.value;\n        if (!newWeekInput) return;\n        \n        setSelectedWeekInput(newWeekInput);\n        \n        // Konvertiere das Wochenformat in ein Datum fr die API\n        const newWeekDate = convertWeekToDate(newWeekInput);\n        setSelectedWeekDate(newWeekDate);\n    };\n\n    // Funktion zum ffnen des Modals fr den ausgewhlten Tag\n    const openWorkTimeModal = (date: string) => {\n        // Sicherheitsprfung: Falls date undefined ist, nichts tun\n        if (!date) {\n            console.error('Kein Datum fr Modal angegeben');\n            return;\n        }\n        \n        // Klare Debug-Ausgabe ohne unntige Komplexitt\n        // console.log(`Modal wird geffnet mit Datum: ${date}`);\n        \n        // Einfache Sicherheitsberprfung: Stelle sicher, dass ein gltiges Datumsformat verwendet wird\n        if (!date.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n            console.error(`Ungltiges Datum fr Modal: ${date}`);\n            return;\n        }\n        \n        // Keine weitere Manipulationen am Datum - nutze direkt den bergebenen Wert\n        setSelectedDateForModal(date);\n        setShowWorkTimeModal(true);\n    };\n\n    // Funktion zum Schlieen des Modals\n    const closeWorkTimeModal = () => {\n        setShowWorkTimeModal(false);\n    };\n\n    useEffect(() => {\n        if (!loading && stats && stats.weeklyData) {\n            // Finde den hchsten Stundenwert fr die Skalierung\n            const maxHours = stats.weeklyData.reduce((max, day) => {\n                const hours = typeof day.hours === 'number' ? day.hours : parseFloat(day.hours);\n                return hours > max ? hours : max;\n            }, 0);\n            \n            setMaxHours(maxHours);\n        }\n    }, [loading, stats]);\n\n    if (loading) return <div className=\"p-4\">{t('common.loading')}</div>;\n    if (error) return <div className=\"p-4 text-red-600\">{error}</div>;\n    if (!stats) return null;\n\n    const weekDays = getWeekDays(selectedWeekDate);\n    \n    // Finde den hchsten Stundenwert fr die Skalierung\n    // Der scaleMax-Wert wird aus dem State-maxHours berechnet\n    const scaleMax = Math.max(8, Math.ceil(maxHours * 1.1));\n    \n    // Konstante fr die Sollarbeitszeit aus dem Benutzerprofil\n    const targetWorkHours = user?.normalWorkingHours ?? 7.6;\n\n    return (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n                <div className=\"flex items-center pl-2 sm:pl-0\">\n                    <ChartBarIcon className=\"h-6 w-6 mr-2 dark:text-white\" />\n                    <h2 className=\"text-xl font-semibold dark:text-white\">{t('worktime.stats.title')}</h2>\n                </div>\n                <div className=\"flex items-center space-x-4\">\n                    <input\n                        type=\"week\"\n                        value={selectedWeekInput}\n                        onChange={handleWeekChange}\n                        max={currentWeekInput}\n                        className=\"border border-gray-300 dark:border-gray-600 rounded-md text-base sm:text-sm h-8 sm:h-10 px-3 dark:bg-gray-700 dark:text-white\"\n                    />\n                    <button\n                        onClick={handleExport}\n                        className=\"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center min-w-8 min-h-8 w-8 h-8\"\n                        title={t('worktime.stats.export')}\n                        aria-label={t('worktime.stats.exportTitle')}\n                        style={{ marginTop: '1px', marginBottom: '1px' }}\n                    >\n                        <DocumentArrowDownIcon className=\"h-4 w-4\" />\n                    </button>\n                </div>\n            </div>\n\n            <div className=\"flex flex-row gap-2 mb-8 overflow-x-auto\">\n                <div className=\"bg-blue-50 dark:bg-blue-900/30 p-4 rounded-lg flex-1 min-w-0\">\n                    <h3 className=\"text-lg font-medium text-blue-900 dark:text-blue-100 mb-2 whitespace-nowrap text-sm sm:text-base md:text-lg text-center\">{t('worktime.stats.totalHours')}</h3>\n                    <p className=\"text-xl sm:text-2xl md:text-3xl font-bold text-blue-600 dark:text-blue-400 whitespace-nowrap text-center\">{stats.totalHours}{t('worktime.stats.hourShort')}</p>\n                </div>\n                <div className=\"bg-green-50 dark:bg-green-900/30 p-4 rounded-lg flex-1 min-w-0\">\n                    <h3 className=\"text-lg font-medium text-green-900 dark:text-green-100 mb-2 whitespace-nowrap text-sm sm:text-base md:text-lg text-center\">{t('worktime.stats.averagePerDay')}</h3>\n                    <p className=\"text-xl sm:text-2xl md:text-3xl font-bold text-green-600 dark:text-green-400 whitespace-nowrap text-center\">{stats.averageHoursPerDay}{t('worktime.stats.hourShort')}</p>\n                </div>\n                <div className=\"bg-purple-50 dark:bg-purple-900/30 p-4 rounded-lg flex-1 min-w-0\">\n                    <h3 className=\"text-lg font-medium text-purple-900 dark:text-purple-100 mb-2 whitespace-nowrap text-sm sm:text-base md:text-lg text-center\">{t('worktime.stats.workDays')}</h3>\n                    <p className=\"text-xl sm:text-2xl md:text-3xl font-bold text-purple-600 dark:text-purple-400 whitespace-nowrap text-center\">{stats.daysWorked}</p>\n                </div>\n            </div>\n\n            <div className=\"mt-8\">\n                <h3 className=\"text-lg font-medium mb-4 dark:text-white\">{t('worktime.stats.weeklyProgress')}</h3>\n                \n                {/* Chart Container */}\n                <div className=\"relative\" style={{ height: '200px' }}>\n                    {/* Y-Achse Beschriftungen */}\n                    <div className=\"absolute right-0 h-full flex flex-col justify-between text-xs text-gray-500 dark:text-gray-400 pr-1\">\n                        <span>{scaleMax}h</span>\n                        <span>{Math.round(scaleMax * 0.75)}h</span>\n                        <span>{Math.round(scaleMax * 0.5)}h</span>\n                        <span>{Math.round(scaleMax * 0.25)}h</span>\n                        <span>0h</span>\n                    </div>\n                    \n                    {/* Horizontale Hilfslinien */}\n                    <div className=\"absolute inset-0 flex flex-col justify-between pointer-events-none pr-8\">\n                        <div className=\"w-full border-t border-gray-200 dark:border-gray-700\"></div>\n                        <div className=\"w-full border-t border-gray-200 dark:border-gray-700\"></div>\n                        <div className=\"w-full border-t border-gray-200 dark:border-gray-700\"></div>\n                        <div className=\"w-full border-t border-gray-200 dark:border-gray-700\"></div>\n                        <div className=\"w-full border-t border-gray-200 dark:border-gray-700\"></div>\n                    </div>\n                    \n                    {/* Sollarbeitszeit-Linie */}\n                    <div \n                        className=\"absolute w-full border-t-2 border-red-600 dark:border-red-500 z-10 pr-8\"\n                        style={{ \n                            bottom: `${(targetWorkHours / scaleMax) * 100}%`,\n                            borderStyle: 'dashed'\n                        }}\n                    >\n                        <span className=\"absolute -top-3 right-8 text-xs text-red-600 dark:text-red-500 font-medium\">\n                            {t('worktime.stats.target')}: {targetWorkHours}{t('worktime.stats.hourShort')}\n                        </span>\n                    </div>\n                    \n                    {/* Legende */}\n                    <div className=\"absolute top-0 left-0 text-xs flex items-center gap-2\">\n                        <div className=\"flex items-center\">\n                            <div className=\"w-3 h-3 bg-blue-100 dark:bg-blue-900/50 border-2 border-blue-600 dark:border-blue-400 rounded-sm mr-1\"></div>\n                            <span className=\"text-blue-600 dark:text-blue-400\">{t('worktime.stats.belowTarget', { target: targetWorkHours })}</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                            <div className=\"w-3 h-3 bg-red-100 dark:bg-red-900/50 border-2 border-red-600 dark:border-red-400 rounded-sm mr-1\"></div>\n                            <span className=\"text-red-600 dark:text-red-400\">{t('worktime.stats.aboveTarget', { target: targetWorkHours })}</span>\n                        </div>\n                    </div>\n                    \n                    {/* Balken */}\n                    <div className=\"absolute inset-0 pr-8 flex items-end\">\n                        <div className=\"w-full h-full flex justify-between\">\n                            {stats.weeklyData.map((dayData, index) => {\n                                // Stellen Sie sicher, dass hours eine Zahl ist\n                                const hours = typeof dayData.hours === 'number' ? dayData.hours : parseFloat(dayData.hours);\n                                \n                                // Berechnung der Hhe fr den Teil ber der Sollarbeitszeit\n                                const overTargetHeight = hours > targetWorkHours \n                                    ? ((hours - targetWorkHours) / scaleMax) * 100 \n                                    : 0;\n                                \n                                // Berechnung der Hhe fr den Teil unter der Sollarbeitszeit\n                                const normalHeight = Math.min(hours, targetWorkHours) / scaleMax * 100;\n                                \n                                // Verwende das bereits berechnete Datum aus weeklyData - keine weitere Berechnung notwendig!\n                                const formattedDate = dayData.date;\n                                \n                                return (\n                                    <div key={index} className=\"flex flex-col items-center\" style={{ width: '13%' }}>\n                                        <div \n                                            className=\"relative w-5/12 h-full flex flex-col justify-end cursor-pointer\" \n                                            onClick={() => openWorkTimeModal(formattedDate)}\n                                            title={t('worktime.stats.clickToView')}\n                                        >\n                                            {/* Teil ber der Sollarbeitszeit (rot) */}\n                                            {overTargetHeight > 0 && (\n                                                <div \n                                                    className=\"w-full bg-red-100 dark:bg-red-900/50 border-2 border-red-600 dark:border-red-400 hover:bg-red-200 dark:hover:bg-red-900/70\"\n                                                    style={{ \n                                                        height: `${overTargetHeight}%`,\n                                                        minHeight: '2px',\n                                                        borderTopLeftRadius: '8px',\n                                                        borderTopRightRadius: '8px',\n                                                        borderBottomWidth: overTargetHeight > 0 && normalHeight > 0 ? '0' : '2px'\n                                                    }}\n                                                />\n                                            )}\n                                            {/* Teil unter der Sollarbeitszeit (blau) */}\n                                            {normalHeight > 0 && (\n                                                <div \n                                                    className=\"w-full bg-blue-100 dark:bg-blue-900/50 border-2 border-blue-600 dark:border-blue-400 hover:bg-blue-200 dark:hover:bg-blue-900/70\"\n                                                    style={{ \n                                                        height: `${normalHeight}%`,\n                                                        minHeight: hours > 0 ? '4px' : '0',\n                                                        borderTopLeftRadius: overTargetHeight > 0 ? '0' : '8px',\n                                                        borderTopRightRadius: overTargetHeight > 0 ? '0' : '8px',\n                                                        borderBottomLeftRadius: '4px',\n                                                        borderBottomRightRadius: '4px',\n                                                        borderTopWidth: overTargetHeight > 0 ? '0' : '2px'\n                                                    }}\n                                                />\n                                            )}\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    </div>\n                    \n                    {/* X-Achse Beschriftungen */}\n                    <div className=\"absolute bottom-0 left-0 right-8 pt-8 flex justify-between\">\n                        {stats.weeklyData.map((dayData, index) => (\n                            <div key={index} className=\"flex flex-col items-center\" style={{ width: '13%' }}>\n                                <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                                    {(() => {\n                                        // bersetze deutschen Wochentag vom Backend\n                                        const dayLower = dayData.day.toLowerCase();\n                                        if (dayLower.includes('montag') || dayLower.includes('mo')) return t('worktime.days.monday');\n                                        if (dayLower.includes('dienstag') || dayLower.includes('di')) return t('worktime.days.tuesday');\n                                        if (dayLower.includes('mittwoch') || dayLower.includes('mi')) return t('worktime.days.wednesday');\n                                        if (dayLower.includes('donnerstag') || dayLower.includes('do')) return t('worktime.days.thursday');\n                                        if (dayLower.includes('freitag') || dayLower.includes('fr')) return t('worktime.days.friday');\n                                        if (dayLower.includes('samstag') || dayLower.includes('sa')) return t('worktime.days.saturday');\n                                        if (dayLower.includes('sonntag') || dayLower.includes('so')) return t('worktime.days.sunday');\n                                        return dayData.day.substring(0, 2);\n                                    })()}\n                                </div>\n                                <div className=\"text-sm font-medium dark:text-gray-300\">\n                                    {dayData.hours.toFixed(1)}{t('worktime.stats.hourShort')}\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            </div>\n            \n            {/* WorktimeModal */}\n            {showWorkTimeModal && (\n                <WorktimeModal \n                    isOpen={showWorkTimeModal}\n                    onClose={closeWorkTimeModal}\n                    selectedDate={selectedDateForModal}\n                />\n            )}\n        </div>\n    );\n};\n\n// Hilfsfunktion zum Inkrementieren eines Datums im String-Format 'YYYY-MM-DD'\nconst incrementDateString = (dateString: string, daysToAdd: number): string => {\n    // Zerlege das Datum\n    const [year, month, day] = dateString.split('-').map(num => parseInt(num));\n    \n    // Erstelle ein Date-Objekt fr diese Berechnung, aber mit Mittag als Uhrzeit\n    // um Zeitzonenprobleme zu vermeiden\n    const date = new Date(year, month - 1, day, 12, 0, 0);\n    \n    // Fge die Tage hinzu\n    date.setDate(date.getDate() + daysToAdd);\n    \n    // Formatiere das Datum zurck als 'YYYY-MM-DD'\n    return format(date, 'yyyy-MM-dd');\n};\n\nexport default WorktimeStats; ","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Link } from 'react-router-dom';\r\nimport { DevicePhoneMobileIcon, ArrowRightIcon } from '@heroicons/react/24/outline';\r\n\r\n// Konfiguration fr die App-Downloads\r\nconst APP_CONFIG = {\r\n  // Die URL zum direkten APK-Download\r\n  apkDownloadUrl: 'https://65.109.228.106.nip.io/downloads/intranet-app.apk',\r\n  \r\n  // URLs fr die App Stores (aktuell Platzhalter, spter durch echte Links ersetzen)\r\n  androidStoreUrl: 'https://play.google.com/store/apps/details?id=com.yourcompany.intranetapp',\r\n  iosStoreUrl: 'https://apps.apple.com/app/intranet-app/id1234567890',\r\n  \r\n  // Landing-Page fr die App (mit weiteren Informationen)\r\n  appLandingPageUrl: 'https://65.109.228.106.nip.io/mobile-app',\r\n};\r\n\r\nconst AppDownload: React.FC = () => {\r\n  const { t } = useTranslation();\r\n  \r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 shadow-sm\">\r\n      <div className=\"flex flex-col md:flex-row items-center justify-between\">\r\n        <div className=\"flex items-center mb-4 md:mb-0\">\r\n          <div className=\"bg-blue-100 dark:bg-blue-900/30 p-3 rounded-full mr-4\">\r\n            <DevicePhoneMobileIcon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\r\n          </div>\r\n          <div>\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">{t('appDownload.title')}</h3>\r\n            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n              {t('appDownload.description')}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        \r\n        <Link \r\n          to=\"/mobile-app\" \r\n          className=\"inline-flex items-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800\"\r\n        >\r\n          {t('appDownload.download')}\r\n          <ArrowRightIcon className=\"ml-2 -mr-1 h-4 w-4\" />\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AppDownload; ","import React, { useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Requests from '../components/Requests.tsx';\nimport WorktimeStats from '../components/WorktimeStats.tsx';\nimport AppDownload from '../components/AppDownload.tsx';\nimport { DocumentTextIcon } from '@heroicons/react/24/outline';\n\ninterface User {\n  id: number;\n  username: string;\n  email: string;\n  first_name: string;\n  last_name: string;\n}\n\nconst Dashboard: React.FC = () => {\n  const { t } = useTranslation();\n  const navigate = useNavigate();\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n\n    // Hier wrden wir normalerweise Benutzerdaten vom Server abrufen\n    // Fr dieses Beispiel verwenden wir Mock-Daten\n    setUser({\n      id: 1,\n      username: 'testuser',\n      email: 'test@example.com',\n      first_name: 'Test',\n      last_name: 'User'\n    });\n    setLoading(false);\n  }, [navigate]);\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    navigate('/login');\n  };\n\n  if (loading) {\n    return <div className=\"flex items-center justify-center min-h-screen text-gray-700 dark:text-gray-300\">{t('common.loading')}</div>;\n  }\n\n  return (\n    <div className=\"min-h-screen dark:bg-gray-900\">\n      <div className=\"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6\">\n        <div className=\"py-1\">\n          <WorktimeStats />\n        </div>\n\n        <div className=\"mt-2 sm:mt-4 md:mt-6 grid grid-cols-1 gap-4\">\n          {/* Anfragen-Bereich */}\n          <div className=\"dashboard-requests-wrapper bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6 w-full shadow-sm\">\n            <div>\n              <Requests />\n            </div>\n          </div>\n          \n          {/* App-Download-Bereich */}\n          <div className=\"mt-4\">\n            <AppDownload />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Dashboard; ","/**\r\n * Zentrale Filter-Logik zur Eliminierung von Code-Duplikation\r\n * \r\n * Diese Datei konsolidiert die Filter-Logik, die zuvor in mehreren Komponenten\r\n * dupliziert war (Requests.tsx, Worktracker.tsx, InvoiceManagementTab.tsx, etc.)\r\n * \r\n * WICHTIG: Die Logik ist exakt identisch mit der vorherigen Implementierung.\r\n * Nur die Code-Duplikation wurde entfernt, keine Funktionalittsnderung!\r\n */\r\n\r\nexport interface FilterCondition {\r\n  column: string;\r\n  operator: string;\r\n  value: string | number | Date | null;\r\n}\r\n\r\n/**\r\n * Evaluates a single filter condition against a field value\r\n * @param fieldValue - The value to test against\r\n * @param condition - The filter condition to apply\r\n * @returns true if condition is met, false otherwise\r\n */\r\nexport const evaluateCondition = (\r\n  fieldValue: any,\r\n  condition: FilterCondition\r\n): boolean => {\r\n  const { operator, value } = condition;\r\n  \r\n  // Handle null/undefined values\r\n  if (fieldValue == null && value == null) {\r\n    return operator === 'equals';\r\n  }\r\n  if (fieldValue == null || value == null) {\r\n    if (operator === 'notEquals') return true;\r\n    return false;\r\n  }\r\n\r\n  // String operations\r\n  const strField = String(fieldValue).toLowerCase();\r\n  const strValue = String(value).toLowerCase();\r\n\r\n  switch (operator) {\r\n    case 'equals':\r\n      return strField === strValue;\r\n    case 'notEquals':\r\n      return strField !== strValue;\r\n    case 'contains':\r\n      return strField.includes(strValue);\r\n    case 'startsWith':\r\n      return strField.startsWith(strValue);\r\n    case 'endsWith':\r\n      return strField.endsWith(strValue);\r\n    case 'before':\r\n    case 'after': {\r\n      // Date operations\r\n      const fieldDate = new Date(fieldValue);\r\n      const valueDate = new Date(value as string);\r\n      if (isNaN(fieldDate.getTime()) || isNaN(valueDate.getTime())) {\r\n        return false;\r\n      }\r\n      return operator === 'before' \r\n        ? fieldDate < valueDate \r\n        : fieldDate > valueDate;\r\n    }\r\n    case 'greaterThan':\r\n    case 'lessThan': {\r\n      // Numeric operations\r\n      const fieldNum = parseFloat(String(fieldValue));\r\n      const valueNum = parseFloat(String(value));\r\n      if (isNaN(fieldNum) || isNaN(valueNum)) {\r\n        return false;\r\n      }\r\n      return operator === 'greaterThan'\r\n        ? fieldNum > valueNum\r\n        : fieldNum < valueNum;\r\n    }\r\n    default:\r\n      return true;\r\n  }\r\n};\r\n\r\n/**\r\n * Type for getting field values from items\r\n */\r\nexport type GetFieldValue<T> = (item: T, columnId: string) => any;\r\n\r\n/**\r\n * Type for column-specific evaluation handlers\r\n * Returns true if condition is met, false otherwise\r\n */\r\nexport type ColumnEvaluator<T> = (item: T, condition: FilterCondition) => boolean | null;\r\n\r\n/**\r\n * Applies filter conditions to an array of items\r\n * \r\n * @param items - Array of items to filter\r\n * @param conditions - Array of filter conditions\r\n * @param operators - Array of logical operators ('AND' | 'OR') between conditions\r\n * @param getFieldValue - Function to extract field values from items\r\n * @param columnEvaluators - Optional map of column-specific evaluators for custom logic\r\n * @returns Filtered array of items\r\n * \r\n * @example\r\n * // Standard usage with getFieldValue\r\n * const filtered = applyFilters(items, conditions, operators, (item, col) => item[col]);\r\n * \r\n * // With custom column evaluators\r\n * const filtered = applyFilters(\r\n *   items,\r\n *   conditions,\r\n *   operators,\r\n *   (item, col) => item[col],\r\n *   {\r\n *     'responsible': (item, condition) => {\r\n *       // Custom logic for responsible column\r\n *       return evaluateUserRoleCondition(item.responsible?.id, item.role?.id, condition);\r\n *     }\r\n *   }\r\n * );\r\n */\r\nexport const applyFilters = <T>(\r\n  items: T[],\r\n  conditions: FilterCondition[],\r\n  operators: ('AND' | 'OR')[],\r\n  getFieldValue: GetFieldValue<T>,\r\n  columnEvaluators?: Record<string, ColumnEvaluator<T>>\r\n): T[] => {\r\n  if (conditions.length === 0) {\r\n    return items;\r\n  }\r\n\r\n  return items.filter(item => {\r\n    let result = true;\r\n\r\n    for (let i = 0; i < conditions.length; i++) {\r\n      const condition = conditions[i];\r\n      let conditionMet = false;\r\n\r\n      // Check if there's a custom evaluator for this column\r\n      if (columnEvaluators && columnEvaluators[condition.column]) {\r\n        const customResult = columnEvaluators[condition.column](item, condition);\r\n        if (customResult !== null) {\r\n          conditionMet = customResult;\r\n        } else {\r\n          // Fallback to standard evaluation if custom evaluator returns null\r\n          const fieldValue = getFieldValue(item, condition.column);\r\n          conditionMet = evaluateCondition(fieldValue, condition);\r\n        }\r\n      } else {\r\n        // Standard evaluation\r\n        const fieldValue = getFieldValue(item, condition.column);\r\n        conditionMet = evaluateCondition(fieldValue, condition);\r\n      }\r\n\r\n      // Apply logical operators\r\n      if (i === 0) {\r\n        result = conditionMet;\r\n      } else {\r\n        const operator = operators[i - 1] || 'AND';\r\n        result = operator === 'AND' \r\n          ? (result && conditionMet) \r\n          : (result || conditionMet);\r\n      }\r\n    }\r\n\r\n    return result;\r\n  });\r\n};\r\n\r\n/**\r\n * Helper function to evaluate date conditions with proper date comparison\r\n */\r\nexport const evaluateDateCondition = (\r\n  dateValue: Date | string | null | undefined,\r\n  condition: FilterCondition\r\n): boolean => {\r\n  if (!dateValue) {\r\n    return false;\r\n  }\r\n\r\n  const date = new Date(dateValue);\r\n  if (isNaN(date.getTime())) {\r\n    return false;\r\n  }\r\n\r\n  const conditionDate = new Date(condition.value as string);\r\n  if (isNaN(conditionDate.getTime())) {\r\n    return false;\r\n  }\r\n\r\n  switch (condition.operator) {\r\n    case 'equals':\r\n      return date.toDateString() === conditionDate.toDateString();\r\n    case 'before':\r\n      return date < conditionDate;\r\n    case 'after':\r\n      return date > conditionDate;\r\n    default:\r\n      return true;\r\n  }\r\n};\r\n\r\n/**\r\n * Helper function to evaluate user/role conditions with user-{id} or role-{id} format\r\n * Supports both user-{id} and role-{id} formats, plus text fallback for legacy support\r\n */\r\nexport const evaluateUserRoleCondition = (\r\n  userId: number | null | undefined,\r\n  roleId: number | null | undefined,\r\n  condition: FilterCondition,\r\n  textValue?: string  // Optional: text representation for fallback (e.g. \"John Doe\")\r\n): boolean => {\r\n  const value = condition.value as string || '';\r\n  \r\n  // Handle user-{id} format\r\n  if (value.startsWith('user-')) {\r\n    const targetUserId = parseInt(value.replace('user-', ''), 10);\r\n    if (isNaN(targetUserId)) return false;\r\n    return userId === targetUserId;\r\n  }\r\n  \r\n  // Handle role-{id} format\r\n  if (value.startsWith('role-')) {\r\n    const targetRoleId = parseInt(value.replace('role-', ''), 10);\r\n    if (isNaN(targetRoleId)) return false;\r\n    return roleId === targetRoleId;\r\n  }\r\n  \r\n  // Empty value matches all\r\n  if (value === '') {\r\n    return true;\r\n  }\r\n  \r\n  // Fallback to text comparison (legacy support)\r\n  if (textValue !== undefined) {\r\n    const textValueLower = textValue.toLowerCase();\r\n    const valueLower = value.toLowerCase();\r\n    if (condition.operator === 'equals') {\r\n      return textValueLower === valueLower;\r\n    } else if (condition.operator === 'contains') {\r\n      return textValueLower.includes(valueLower);\r\n    }\r\n  }\r\n  \r\n  return false;\r\n};\r\n\r\n/**\r\n * Helper function for combined responsible/qualityControl filter (specific to Tasks)\r\n */\r\nexport const evaluateResponsibleAndQualityControl = (\r\n  responsibleId: number | null | undefined,\r\n  responsibleRoleId: number | null | undefined,\r\n  qualityControlId: number | null | undefined,\r\n  condition: FilterCondition,\r\n  responsibleText?: string,\r\n  qualityControlText?: string\r\n): boolean => {\r\n  const value = condition.value as string || '';\r\n  \r\n  // Handle user-{id} format - matches either responsible OR qualityControl\r\n  if (value.startsWith('user-')) {\r\n    const targetUserId = parseInt(value.replace('user-', ''), 10);\r\n    if (isNaN(targetUserId)) return false;\r\n    return (responsibleId === targetUserId) || (qualityControlId === targetUserId);\r\n  }\r\n  \r\n  // Handle role-{id} format - only matches with responsible role\r\n  if (value.startsWith('role-')) {\r\n    const targetRoleId = parseInt(value.replace('role-', ''), 10);\r\n    if (isNaN(targetRoleId)) return false;\r\n    return responsibleRoleId === targetRoleId;\r\n  }\r\n  \r\n  // Empty value matches all\r\n  if (value === '') {\r\n    return true;\r\n  }\r\n  \r\n  // Fallback to text comparison (legacy support)\r\n  const valueLower = value.toLowerCase();\r\n  if (condition.operator === 'equals') {\r\n    return (responsibleText?.toLowerCase() === valueLower) || (qualityControlText?.toLowerCase() === valueLower);\r\n  } else if (condition.operator === 'contains') {\r\n    return (responsibleText?.toLowerCase().includes(valueLower)) || (qualityControlText?.toLowerCase().includes(valueLower));\r\n  }\r\n  \r\n  return false;\r\n};\r\n\r\n","import React, { useState, useEffect, useCallback } from 'react';\nimport axiosInstance from '../config/axios.ts';\nimport { API_ENDPOINTS } from '../config/api.ts';\nimport { format, parseISO } from 'date-fns';\nimport { formatDate, formatTime, calculateDuration, isWorktimeRelevantForSelectedDate } from '../utils/dateUtils.ts';\n\n// Schnittstelle fr das WorktimeModal\nexport interface WorktimeModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    selectedDate?: string; // Optional - wenn nicht angegeben, wird das heutige Datum verwendet\n}\n\nexport const WorktimeModal: React.FC<WorktimeModalProps> = ({ isOpen, onClose, selectedDate: initialSelectedDate }) => {\n    // Initialisiere das selectedDate mit dem bergebenen Datum oder dem heutigen Datum\n    const today = new Date();\n    const defaultDate = `${today.getFullYear()}-${(today.getMonth() + 1).toString().padStart(2, '0')}-${today.getDate().toString().padStart(2, '0')}`;\n    \n    const [worktimes, setWorktimes] = useState<any[]>([]);\n    const [selectedDate, setSelectedDate] = useState<string>(initialSelectedDate || defaultDate);\n    const [loading, setLoading] = useState(true);\n    const [totalDuration, setTotalDuration] = useState<string>('0h 0m');\n    const [activeWorktime, setActiveWorktime] = useState<any | null>(null);\n    const [error, setError] = useState<string | null>(null);\n\n    // Prfe, ob die aktive Zeiterfassung am ausgewhlten Tag begonnen hat\n    const isActiveWorktimeRelevant = (): boolean => {\n        if (!activeWorktime) return false;\n        \n        try {\n            // Extrahiere nur den Datumsteil (YYYY-MM-DD) aus dem startTime ISO-String\n            const dateOnly = activeWorktime.startTime.split('T')[0];\n            \n            // Vergleiche mit selectedDate\n            return dateOnly === selectedDate;\n        } catch (error) {\n            console.error(\"Fehler beim Prfen der Relevanz der aktiven Zeiterfassung:\", error);\n            return false;\n        }\n    };\n\n    const fetchWorktimes = useCallback(async () => {\n        try {\n            setError(null);\n            setLoading(true);\n            \n            const token = localStorage.getItem('token');\n            if (!token) {\n                setError('Nicht authentifiziert');\n                setLoading(false);\n                return;\n            }\n            \n            const formattedDate = selectedDate;\n            \n            const response = await axiosInstance.get(`${API_ENDPOINTS.WORKTIME.BASE}?date=${formattedDate}`);\n            \n            const sortedWorktimes = [...response.data].sort((a, b) => {\n                return new Date(a.startTime).getTime() - new Date(b.startTime).getTime();\n            });\n            \n            setWorktimes(sortedWorktimes);\n            \n            // Auch die aktive Zeiterfassung abrufen\n            const activeResponse = await axiosInstance.get(API_ENDPOINTS.WORKTIME.ACTIVE);\n            \n            if (activeResponse.data && Object.keys(activeResponse.data).length > 0) {\n                setActiveWorktime(activeResponse.data);\n            } else {\n                setActiveWorktime(null);\n            }\n            \n            setLoading(false);\n        } catch (error) {\n            console.error('Fehler beim Laden der Zeiterfassungen:', error);\n            setError('Fehler beim Laden der Zeiterfassungen');\n            setLoading(false);\n        }\n    }, [selectedDate]);\n\n    useEffect(() => {\n        if (isOpen) {\n            fetchWorktimes();\n        }\n    }, [isOpen, fetchWorktimes]);\n\n    // Berechne die Gesamtdauer aller Zeiteintrge fr den Tag\n    useEffect(() => {\n        let totalMinutes = 0;\n        \n        // Filtere die relevanten Eintrge fr das ausgewhlte Datum\n        const relevantWorktimes = worktimes.filter(worktime => isWorktimeRelevantForSelectedDate(worktime, selectedDate));\n        \n        // Berechne die Dauer der abgeschlossenen Zeiteintrge\n        relevantWorktimes.forEach((worktime) => {\n            if (worktime.endTime) {\n                try {\n                    const start = new Date(worktime.startTime);\n                    const end = new Date(worktime.endTime);\n                    const diff = end.getTime() - start.getTime();\n                    \n                    if (diff > 0) {\n                        const minutes = Math.floor(diff / (1000 * 60));\n                        totalMinutes += minutes;\n                    }\n                } catch (error) {\n                    console.error('Fehler bei der Berechnung:', error);\n                }\n            }\n        });\n        \n        // Fge die aktive Zeiterfassung hinzu, wenn sie fr den ausgewhlten Tag relevant ist\n        if (activeWorktime && isActiveWorktimeRelevant()) {\n            try {\n                const activeStart = new Date(`${activeWorktime.startTime.split('Z')[0]}`);\n                const now = new Date();\n                const diff = now.getTime() - activeStart.getTime();\n                \n                if (diff > 0) {\n                    const minutes = Math.floor(diff / (1000 * 60));\n                    totalMinutes += minutes;\n                }\n            } catch (error) {\n                console.error(\"Fehler bei der Berechnung der aktiven Zeiterfassung:\", error);\n            }\n        }\n        \n        // Formatiere die Gesamtdauer\n        const hours = Math.floor(totalMinutes / 60);\n        const minutes = totalMinutes % 60;\n        const formattedDuration = `${hours}h ${minutes}m`;\n        setTotalDuration(formattedDuration);\n    }, [worktimes, activeWorktime, selectedDate]);\n\n    if (!isOpen) return null;\n    \n    // Berechne die relevanten Eintrge fr das ausgewhlte Datum\n    const relevantWorktimes = worktimes.filter(worktime => isWorktimeRelevantForSelectedDate(worktime, selectedDate));\n\n    // Berechne die Dauer der aktiven Zeiterfassung\n    const calculateActiveDuration = (): string => {\n        if (!activeWorktime) return '-';\n        \n        // Erstelle ein Date-Objekt ohne Zeitzonenumrechnung\n        // Entferne das 'Z' am Ende des Strings, damit JS den Zeitstempel nicht als UTC interpretiert\n        const startISOString = activeWorktime.startTime.endsWith('Z') \n            ? activeWorktime.startTime.substring(0, activeWorktime.startTime.length - 1)\n            : activeWorktime.startTime;\n        \n        const start = new Date(startISOString);\n        const now = new Date();\n        \n        // Berechnung mit Millisekunden\n        const diff = now.getTime() - start.getTime();\n        \n        // Umrechnung in Stunden und Minuten\n        const totalMinutes = Math.floor(diff / (1000 * 60));\n        const hours = Math.floor(totalMinutes / 60);\n        const minutes = totalMinutes % 60;\n        \n        return `${hours}h ${minutes}m (luft)`;\n    };\n\n    return (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 w-full max-w-4xl max-h-[90vh] flex flex-col\">\n                <div className=\"p-4 border-b dark:border-gray-700 flex items-center justify-between\">\n                    <h2 className=\"text-xl font-semibold dark:text-white\">\n                        Zeiteintrge fr {formatDate(selectedDate)}\n                    </h2>\n                    <div className=\"flex items-center space-x-2\">\n                        <input\n                            type=\"date\"\n                            value={selectedDate}\n                            onChange={(e) => {\n                                setSelectedDate(e.target.value);\n                            }}\n                            className=\"border dark:border-gray-600 rounded-md px-3 py-2 dark:bg-gray-700 dark:text-white\"\n                        />\n                        <button \n                            onClick={onClose}\n                            className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\n                        >\n                            \n                        </button>\n                    </div>\n                </div>\n\n                <div className=\"overflow-y-auto flex-grow\">\n                    {loading ? (\n                        <div className=\"flex justify-center items-center h-32\">\n                            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-gray-300\"></div>\n                        </div>\n                    ) : worktimes.filter(worktime => isWorktimeRelevantForSelectedDate(worktime, selectedDate) && (worktime.endTime !== null || isActiveWorktimeRelevant())).length === 0 ? (\n                        <div className=\"p-4 text-center text-gray-500 dark:text-gray-400\">\n                            Keine Zeiteintrge fr diesen Tag gefunden.\n                        </div>\n                    ) : (\n                        <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-700\">\n                            <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                                <tr>\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                        Start\n                                    </th>\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                        Ende\n                                    </th>\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                        Dauer\n                                    </th>\n                                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\n                                        Niederlassung\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                                {relevantWorktimes\n                                  .filter(worktime => worktime.endTime !== null)\n                                  // Sortiere nach Startzeit (frhester Eintrag zuerst)\n                                  .sort((a, b) => new Date(a.startTime).getTime() - new Date(b.startTime).getTime())\n                                  .map((worktime) => (\n                                    <tr key={worktime.id} className=\"hover:bg-gray-50 dark:hover:bg-gray-700\">\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                                            {formatTime(worktime.startTime)}\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                                            {worktime.endTime ? formatTime(worktime.endTime) : '-'}\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                                            {calculateDuration(worktime.startTime, worktime.endTime)}\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                                            {worktime.branch.name}\n                                        </td>\n                                    </tr>\n                                ))}\n                                \n                                {/* Aktive Zeiterfassung anzeigen, wenn sie fr den ausgewhlten Tag relevant ist */}\n                                {isActiveWorktimeRelevant() && (\n                                    <tr className=\"bg-green-50 dark:bg-green-900/30 hover:bg-green-100 dark:hover:bg-green-900/50\">\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                                            {formatTime(activeWorktime.startTime)}\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                                            <span className=\"italic\">Aktiv</span>\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200 font-medium text-green-600 dark:text-green-400\">\n                                            {calculateActiveDuration()}\n                                        </td>\n                                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-200\">\n                                            {activeWorktime.branch?.name || 'Unbekannt'}\n                                        </td>\n                                    </tr>\n                                )}\n                            </tbody>\n                            \n                            {/* Gesamtdauer des Tages */}\n                            <tfoot className=\"bg-gray-100 dark:bg-gray-700\">\n                                <tr>\n                                    <td colSpan={2} className=\"px-6 py-3 text-right text-sm font-medium text-gray-700 dark:text-gray-300\">\n                                        Gesamtdauer des Tages:\n                                    </td>\n                                    <td className=\"px-6 py-3 text-left text-sm font-bold text-gray-900 dark:text-white\">\n                                        {totalDuration}\n                                    </td>\n                                    <td></td>\n                                </tr>\n                            </tfoot>\n                        </table>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}; "],"names":["DEFAULT_EXPIRY_THRESHOLDS","request","criticalHours","todo","TODO_EXPIRY_THRESHOLDS","hourly","daily","standard","getExpiryStatus","dueDate","type","arguments","length","undefined","customThresholds","title","description","now","Date","due","hoursOverdue","getTime","thresholds","todoType","titleLower","toLowerCase","descLower","includes","getTodoType","getExpiryColorClasses","status","borderClass","bgClass","textClass","badgeClass","createDueDateMetadataItem","icon","label","formatDate","date","toLocaleDateString","useBadge","expiryStatus","expiryColors","value","className","getStatusColor","processType","getStatusText","t","translationKey","translated","charAt","toUpperCase","slice","replace","_ref","isOpen","onClose","onRequestCreated","useTranslation","user","useAuth","openSidepane","closeSidepane","useSidepane","isLargeScreen","setIsLargeScreen","useState","window","innerWidth","users","setUsers","branches","setBranches","formData","setFormData","responsible_id","branch_id","due_date","create_todo","error","setError","loading","setLoading","isMobile","setIsMobile","temporaryAttachments","setTemporaryAttachments","uploading","setUploading","fileInputRef","useRef","textareaRef","useEffect","async","localStorage","getItem","console","log","usersResponse","branchesResponse","Promise","all","axiosInstance","get","API_ENDPOINTS","USERS","DROPDOWN","BRANCHES","BASE","data","prevData","id","toString","_branchesResponse$dat","userBranch","twoWeeksFromNow","setDate","getDate","formattedDate","toISOString","split","err","axiosError","_axiosError$response","_axiosError$response$","code","response","message","fetchData","checkScreenSize","addEventListener","removeEventListener","formatUserName","_user$firstName","_user$username","firstName","username","handlePaste","items","event","clipboardData","i","item","indexOf","preventDefault","file","getAsFile","handleTemporaryAttachment","handleDrop","stopPropagation","dataTransfer","files","handleDragOver","newAttachment","fileName","name","fileType","fileSize","size","prev","insertText","startsWith","current","cursorPos","selectionStart","textBefore","substring","textAfter","setTimeout","newPos","selectionEnd","focus","_axiosError$response2","_axiosError$response3","handleFileUpload","target","handleSubmit","e","Error","responsibleId","parseInt","branchId","isNaN","post","REQUESTS","requested_by_id","attachment","FormData","append","ATTACHMENTS","requestId","headers","count","uploadTemporaryAttachments","_axiosError$response4","_axiosError$response5","renderTemporaryAttachments","_jsx","children","map","index","_jsxs","onClick","attachmentToRemove","filter","_","uploadAfterCreateText","imagePattern","RegExp","linkPattern","newDescription","handleRemoveTemporaryAttachment","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","src","URL","createObjectURL","alt","Dialog","open","Panel","Title","XMarkIcon","onSubmit","required","onChange","htmlFor","ref","rows","onPaste","onDrop","onDragOver","placeholder","_fileInputRef$current","click","MarkdownPreview","content","Array","isArray","branch","checked","disabled","ArrowPathIcon","CheckIcon","_Fragment","style","opacity","transition","pointerEvents","role","_fileInputRef$current2","onRequestUpdated","i18n","process","language","setTitle","setDescription","setResponsibleId","responsible","setBranchId","setDueDate","createTodo","setCreateTodo","confirmDelete","setConfirmDelete","attachments","setAttachments","hasPermission","usePermissions","canDeleteRequest","fetchAttachments","errorMessage","warn","uploadFileAndInsertLink","location","origin","ATTACHMENT","img","document","createElement","classList","add","body","appendChild","onload","removeChild","put","BY_ID","updatedResponse","_axiosError$response10","_axiosError$response11","handleDelete","delete","_axiosError$response12","_axiosError$response13","_axiosError$response14","_axiosError$response15","renderAttachments","responseType","url","Blob","link","href","setAttribute","remove","_axiosError$response8","_axiosError$response9","handleDownloadAttachment","find","a","attachmentId","escapedFileName","_axiosError$response6","_axiosError$response7","handleDeleteAttachment","uploadText","renderForm","Number","TrashIcon","defaultColumnOrder","REQUESTS_TABLE_ID","tableToCardMapping","cardToTableMapping","Requests","requests","setRequests","searchTerm","setSearchTerm","filterConditions","setFilterConditions","filterLogicalOperators","setFilterLogicalOperators","activeFilterName","setActiveFilterName","selectedFilterId","setSelectedFilterId","isFilterModalOpen","setIsFilterModalOpen","sortConfig","setSortConfig","key","direction","isCreateModalOpen","setIsCreateModalOpen","isEditModalOpen","setIsEditModalOpen","selectedRequest","setSelectedRequest","availableColumns","useMemo","shortLabel","settings","isLoading","isLoadingSettings","updateColumnOrder","updateHiddenColumns","toggleColumnVisibility","isColumnVisible","updateViewMode","useTableSettings","defaultHiddenColumns","defaultViewMode","draggedColumn","setDraggedColumn","dragOverColumn","setDragOverColumn","displayLimit","setDisplayLimit","viewMode","cardSortDirections","setCardSortDirections","requestedBy","cardMetadataOrder","columnOrder","cardMetadata","forEach","tableCol","cardMeta","push","getCardMetadataFromColumnOrder","hiddenCardMetadata","hiddenTableColumns","Set","getHiddenCardMetadata","hiddenColumns","visibleCardMetadata","meta","has","wrapper","querySelector","fetchRequests","token","existingFilters","SAVED_FILTERS","BY_TABLE","Authorization","archivFilterExists","some","aktuellFilterExists","archivFilter","tableId","conditions","column","operator","operators","aktuellFilter","createStandardFilters","applyFilterConditions","setInitialFilter","handleStatusChange","newStatus","currentRequest","r","prevRequests","handleMoveColumn","useCallback","dragIndex","hoverIndex","newColumnOrder","movingColumn","splice","handleDragStart","columnId","handleDragEnd","resetFilterConditions","getActiveFilterCount","filteredAndSortedRequests","searchLower","lastName","columnEvaluators","req","cond","endsWith","requestedByName","responsibleName","branchName","evaluateDateCondition","getFieldValue","applyFilters","sort","b","_statusOrder$a$status","_statusOrder$b$status","sortableColumns","colId","aValue","bValue","statusOrder","handleCopyRequest","copiedRequestData","visibleColumnIds","CreateRequestModal","newRequest","EditRequestModal","updatedRequest","width","height","PlusIcon","DocumentTextIcon","Squares2X2Icon","TableCellsIcon","position","FunnelIcon","top","right","TableColumnConfig","columns","visibleColumns","from","onToggleColumnVisibility","tableColumnId","otherCardMeta","otherHidden","currentlyHidden","onMoveColumn","newCardOrder","movingCardMeta","newTableOrder","processedTableCols","buttonTitle","modalTitle","sortDirections","onSortDirectionChange","showSortDirection","FilterPane","onApply","onReset","savedConditions","savedOperators","SavedFilterTags","onSelectFilter","onFilterChange","handleFilterChange","defaultFilterName","col","draggable","onDragStart","onDragEnd","ArrowsUpDownIcon","sortKey","handleSort","colSpan","InformationCircleIcon","showImagePreview","expiryStatusForDate","expiryColorsForDate","ExclamationTriangleIcon","PencilIcon","DocumentDuplicateIcon","CardGrid","metadata","BuildingOfficeIcon","section","UserIcon","dueDateItem","CalendarIcon","format","locale","de","descriptionContent","actionButtons","previousStatus","getPreviousStatus","nextStatuses","getNextStatuses","firstNextStatus","DataCard","color","onPreviousClick","onNextClick","actions","prevLimit","incrementDateString","dateString","daysToAdd","year","month","day","num","WorktimeStats","_user$normalWorkingHo","stats","setStats","maxHours","setMaxHours","today","currentWeekInput","getYear","String","getWeek","padStart","selectedWeekInput","setSelectedWeekInput","currentMonday","startOfWeek","weekStartsOn","selectedWeekDate","setSelectedWeekDate","showWorkTimeModal","setShowWorkTimeModal","selectedDateForModal","setSelectedDateForModal","fetchStats","dateToSend","WORKTIME","STATS","weeklyData","weekdayMapping","weekDates","enrichedData","dayIndex","_err$response","_err$response$data","reduce","max","hours","parseFloat","getWeekDays","scaleMax","Math","ceil","targetWorkHours","normalWorkingHours","ChartBarIcon","newWeekInput","newWeekDate","convertWeekToDate","blob","download","week","revokeObjectURL","marginTop","marginBottom","DocumentArrowDownIcon","totalHours","averageHoursPerDay","daysWorked","round","bottom","borderStyle","dayData","overTargetHeight","normalHeight","min","match","minHeight","borderTopLeftRadius","borderTopRightRadius","borderBottomWidth","borderBottomLeftRadius","borderBottomRightRadius","borderTopWidth","dayLower","toFixed","WorktimeModal","closeWorkTimeModal","selectedDate","AppDownload","DevicePhoneMobileIcon","Link","to","ArrowRightIcon","Dashboard","navigate","useNavigate","setUser","email","first_name","last_name","evaluateCondition","fieldValue","condition","strField","strValue","fieldDate","valueDate","fieldNum","valueNum","result","conditionMet","customResult","dateValue","conditionDate","toDateString","_activeWorktime$branc","initialSelectedDate","defaultDate","getFullYear","getMonth","worktimes","setWorktimes","setSelectedDate","totalDuration","setTotalDuration","activeWorktime","setActiveWorktime","isActiveWorktimeRelevant","startTime","fetchWorktimes","sortedWorktimes","activeResponse","ACTIVE","Object","keys","totalMinutes","worktime","isWorktimeRelevantForSelectedDate","endTime","start","diff","minutes","floor","activeStart","relevantWorktimes","formatTime","calculateDuration","calculateActiveDuration","startISOString"],"sourceRoot":""}