"use strict";(self.webpackChunkintranet_frontend=self.webpackChunkintranet_frontend||[]).push([[517],{2517:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(45),s=r(5043);const n=["title","titleId"];function o(e,t){let{title:r,titleId:o}=e,l=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},l),r?s.createElement("title",{id:o},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const l=s.forwardRef(o)},3315:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(45),s=r(5043);const n=["title","titleId"];function o(e,t){let{title:r,titleId:o}=e,l=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},l),r?s.createElement("title",{id:o},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const l=s.forwardRef(o)},3744:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(45),s=r(5043);const n=["title","titleId"];function o(e,t){let{title:r,titleId:o}=e,l=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},l),r?s.createElement("title",{id:o},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const l=s.forwardRef(o)},8010:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(45),s=r(5043);const n=["title","titleId"];function o(e,t){let{title:r,titleId:o}=e,l=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},l),r?s.createElement("title",{id:o},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const l=s.forwardRef(o)},8662:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(45),s=r(5043);const n=["title","titleId"];function o(e,t){let{title:r,titleId:o}=e,l=(0,a.A)(e,n);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":o},l),r?s.createElement("title",{id:o},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const l=s.forwardRef(o)},9001:(e,t,r)=>{r.r(t),r.d(t,{default:()=>je});var a=r(5043),s=r(4117),n=r(2760),o=r(7504),l=r(4129),i=r(45);const d=["title","titleId"];function c(e,t){let{title:r,titleId:s}=e,n=(0,i.A)(e,d);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const m=a.forwardRef(c);var u=r(9379),g=r(6443),x=r(542),b=r(8662),h=r(6009),y=r(2704),p=r(7591),f=r(9422),k=r(7855),v=r(9e3),j=r(5657),w=r(579);const N=[{code:"tiempo_completo",name:"Tiempo Completo (>21 Tage/Monat)"},{code:"tiempo_parcial_7",name:"Tiempo Parcial (\u22647 Tage/Monat)"},{code:"tiempo_parcial_14",name:"Tiempo Parcial (\u226414 Tage/Monat)"},{code:"tiempo_parcial_21",name:"Tiempo Parcial (\u226421 Tage/Monat)"},{code:"servicios_externos",name:"Servicios Externos (Stundenbasiert)"}],A=e=>{let{onError:t}=e;const{t:r}=(0,s.Bd)(),o=[{code:"CO",name:r("countries.CO")},{code:"CH",name:r("countries.CH")},{code:"DE",name:r("countries.DE")},{code:"AT",name:r("countries.AT")}],l=[{code:"CH",name:r("countries.CH")},{code:"CO",name:r("countries.CO")}],i=[{code:"es",name:r("languages.es")},{code:"de",name:r("languages.de")},{code:"en",name:r("languages.en")}],[d,c]=(0,a.useState)([]),[A,R]=(0,a.useState)(null),[S,z]=(0,a.useState)({}),[_,C]=(0,a.useState)(!1),[L,E]=(0,a.useState)([]),[q,F]=(0,a.useState)(!1),[B,I]=(0,a.useState)(null),{showMessage:T}=(0,k.A)(),{isAdmin:O}=(0,n.S)(),[D,M]=(0,a.useState)([]),[U,G]=(0,a.useState)(!1),[W,P]=(0,a.useState)("details"),[J,H]=(0,a.useState)(!1),[V,Z]=(0,a.useState)(window.innerWidth<640),[K,Y]=(0,a.useState)(window.innerWidth>1070),{openSidepane:$,closeSidepane:Q}=(0,j.N)(),[X,ee]=(0,a.useState)({email:"",password:"",firstName:"",lastName:""});(0,a.useEffect)((()=>{const e=()=>{Z(window.innerWidth<640),Y(window.innerWidth>1070)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,a.useEffect)((()=>(J?$():Q(),()=>{Q()})),[J,$,Q]),(0,a.useEffect)((()=>{te()}),[]);const te=async()=>{try{const e=await x.i$.getAll();c(e.data)}catch(e){ae(e)}},re=async e=>{try{if(!e||isNaN(e))return void R(null);console.log("Lade Benutzerdetails f\xfcr ID:",e);const t=await x.i$.getById(e),r=(0,u.A)((0,u.A)({},t.data),{},{birthday:t.data.birthday?new Date(t.data.birthday).toISOString().split("T")[0]:null});let a=[];t.data.roles&&Array.isArray(t.data.roles)?(console.log("Rollenstruktur (Typ):",typeof t.data.roles,"L\xe4nge:",t.data.roles.length),t.data.roles.length>0&&t.data.roles[0].role?(a=t.data.roles.map((e=>e.role.id)),console.log("Extrahierte Rollen-IDs aus verschachtelter Struktur:",a)):t.data.roles.length>0&&("number"===typeof t.data.roles[0]?a=t.data.roles:t.data.roles[0].roleId?a=t.data.roles.map((e=>e.roleId)):t.data.roles[0].id&&(a=t.data.roles.map((e=>e.id))))):console.warn("Rollen fehlen oder sind kein Array:",t.data.roles),0===a.length&&t.data.role&&(console.log("Versuche Rollen aus role-Eigenschaft zu extrahieren:",t.data.role),Array.isArray(t.data.role)?a=t.data.role.map((e=>e.id)):"object"===typeof t.data.role&&null!==t.data.role&&(a=[t.data.role.id])),console.log("Endg\xfcltige extrahierte Rollen-IDs:",a),R(r),z(r),E(a),0===D.length&&await(async()=>{try{G(!0);const t=[{id:1,name:"admin",description:"Administrator mit allen Rechten",permissions:[]},{id:2,name:"user",description:"Standardbenutzer",permissions:[]},{id:999,name:"hamburger",description:"Hamburger-Rolle f\xfcr neue Benutzer",permissions:[]}];try{const e=await x.Zj.getAll();e.data&&Array.isArray(e.data)&&e.data.length>0?(M(e.data),console.log("".concat(e.data.length," Rollen erfolgreich geladen"))):(console.warn("Keine Rollen vom Server erhalten, verwende Fallback"),M(t))}catch(e){console.warn("Fehler beim Laden der Rollen, verwende Fallback:",e),M(t)}}finally{G(!1)}})()}catch(t){console.error("Fehler beim Laden der Benutzerdetails:",t),ae(t)}},ae=e=>{var r,a;let s="Ein Fehler ist aufgetreten";null!==(r=e.response)&&void 0!==r&&null!==(a=r.data)&&void 0!==a&&a.message?s=e.response.data.message:e instanceof Error&&(s=e.message),!s.includes("Ung\xfcltige Rollen-ID")||A?t(s):console.warn("Fehler unterdr\xfcckt, da kein Benutzer ausgew\xe4hlt ist:",s)},se=e=>{const{name:t,value:r,type:a}=e.target;let s=r;"number"===a&&(s=""===r?null:Number(r)),z((0,u.A)((0,u.A)({},S),{},{[t]:s})),C(!0)},ne=async e=>{if(e&&A)if(1===e&&1===A.id&&L.includes(e))T("Die Admin-Rolle kann vom Admin-Benutzer nicht entfernt werden","warning");else try{console.log("Toggle Rolle:",e,"f\xfcr Benutzer:",A.id),console.log("Aktuelle ausgew\xe4hlte Rollen:",L);const t=L.includes(e),r=t?L.filter((t=>t!==e)):[...L,e];console.log("Neue ausgew\xe4hlte Rollen:",r),E(r),console.log("Sende Rollenaktualisierung an API:",{userId:A.id,roleIds:r});const a=await x.i$.updateRoles(A.id,r);console.log("API-Antwort bei Rollenaktualisierung:",a.data),await re(A.id),T(t?"Rolle erfolgreich entfernt":"Rolle erfolgreich zugewiesen","success")}catch(t){console.error("Fehler beim Aktualisieren der Rollen:",t),re(A.id),ae(t),T("Fehler beim Aktualisieren der Rollen","error")}};(0,a.useEffect)((()=>{A&&(z((0,u.A)((0,u.A)({},A),{},{birthday:A.birthday?new Date(A.birthday).toISOString().split("T")[0]:null})),C(!1))}),[A]);const oe=e=>{const{name:t,value:r}=e.target;ee((0,u.A)((0,u.A)({},X),{},{[t]:r}))},le=async e=>{if(e.preventDefault(),X.email&&X.password&&X.firstName&&X.lastName)if(X.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/))try{const e=await x.i$.create(X);e.data&&c((t=>[e.data,...t])),T("Benutzer erfolgreich erstellt","success"),H(!1),ee({email:"",password:"",firstName:"",lastName:""})}catch(s){var r,a;te();const e=(null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||"Fehler beim Erstellen des Benutzers";T(e,"error"),t(e)}else T("Ung\xfcltiges E-Mail-Format","error");else T("Bitte f\xfcllen Sie alle Felder aus","error")};return(0,w.jsxs)("div",{className:"container mx-auto px-4 pb-6",children:[(0,w.jsx)("div",{className:"mb-6",children:(0,w.jsxs)("div",{className:"flex items-center gap-4",children:[(0,w.jsx)("div",{className:"flex items-center",children:O()&&(0,w.jsx)("button",{onClick:()=>H(!0),className:"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-600 border border-blue-200 dark:border-gray-600 shadow-sm flex items-center justify-center",style:{width:"30.19px",height:"30.19px"},title:r("users.create"),"aria-label":r("users.create"),children:(0,w.jsx)(b.A,{className:"h-4 w-4"})})}),(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsx)("label",{htmlFor:"userSelect",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("users.title")}),(0,w.jsxs)("select",{id:"userSelect",onChange:e=>{const t=parseInt(e.target.value,10);t&&!isNaN(t)?re(t):(R(null),z({}),E([]))},className:"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white",children:[(0,w.jsxs)("option",{value:"",children:["-- ",r("users.title")," ",r("common.select")," --"]}),d.map((e=>(0,w.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName," (",e.username,")"]},e.id)))]})]})]})}),A&&(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,w.jsxs)("h2",{className:"text-xl font-semibold dark:text-white",children:[r("users.title"),": ",A.firstName," ",A.lastName]})}),(0,w.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow mb-6",children:(0,w.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,w.jsxs)("nav",{className:"flex -mb-px",children:[(0,w.jsxs)("button",{onClick:()=>P("details"),className:"py-4 px-6 text-center border-b-2 font-medium text-sm ".concat("details"===W?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:[(0,w.jsx)(h.A,{className:"h-5 w-5 inline mr-2"}),r("users.title")]}),(0,w.jsxs)("button",{onClick:()=>P("documents"),className:"py-4 px-6 text-center border-b-2 font-medium text-sm ".concat("documents"===W?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:[(0,w.jsx)(y.A,{className:"h-5 w-5 inline mr-2"}),r("profile.documents")]}),(0,w.jsxs)("button",{onClick:()=>P("roles"),className:"py-4 px-6 text-center border-b-2 font-medium text-sm ".concat("roles"===W?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:[(0,w.jsx)(m,{className:"h-5 w-5 inline mr-2"}),r("roles.title")]})]})})}),"details"===W&&(0,w.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!A||!A.id)return t("Kein Benutzer ausgew\xe4hlt"),void T("Kein Benutzer ausgew\xe4hlt","error");try{var r,a,s,n;if(null===(r=S.username)||void 0===r||!r.trim())throw new Error("Benutzername ist erforderlich");if(null===(a=S.email)||void 0===a||!a.trim())throw new Error("E-Mail ist erforderlich");if(null===(s=S.firstName)||void 0===s||!s.trim())throw new Error("Vorname ist erforderlich");if(null===(n=S.lastName)||void 0===n||!n.trim())throw new Error("Nachname ist erforderlich");const e=(0,u.A)((0,u.A)({},S),{},{salary:null===S.salary||void 0===S.salary||""===S.salary?null:"string"===typeof S.salary?parseFloat(S.salary):S.salary,normalWorkingHours:null===S.normalWorkingHours||void 0===S.normalWorkingHours||""===S.normalWorkingHours?7.6:"string"===typeof S.normalWorkingHours?parseFloat(S.normalWorkingHours):S.normalWorkingHours,hourlyRate:null===S.hourlyRate||void 0===S.hourlyRate||""===S.hourlyRate?null:"string"===typeof S.hourlyRate?S.hourlyRate:S.hourlyRate.toString(),monthlySalary:null===S.monthlySalary||void 0===S.monthlySalary||""===S.monthlySalary?null:"string"===typeof S.monthlySalary?parseFloat(S.monthlySalary):S.monthlySalary,birthday:S.birthday||null});console.log("Sende Daten zum Server:",e);const t=await x.i$.update(A.id,e);if(t.data){const e=(0,u.A)((0,u.A)({},t.data),{},{birthday:t.data.birthday?new Date(t.data.birthday).toISOString().split("T")[0]:null});R(e),z((0,u.A)((0,u.A)({},e),{},{birthday:e.birthday?new Date(e.birthday).toISOString().split("T")[0]:null})),c((t=>t.map((t=>t.id===e.id?e:t)))),T("Benutzerprofil erfolgreich aktualisiert","success"),C(!1)}}catch(m){var o,l;if(console.error("Fehler beim Speichern der Benutzerdaten:",m),te(),400===(null===(o=m.response)||void 0===o?void 0:o.status)){var i,d;const e="Validierungsfehler: ".concat((null===(i=m.response)||void 0===i||null===(d=i.data)||void 0===d?void 0:d.message)||"Bitte \xfcberpr\xfcfe die eingegebenen Daten");t(e),T(e,"error")}else 404===(null===(l=m.response)||void 0===l?void 0:l.status)?(t("Benutzer wurde nicht gefunden"),T("Benutzer wurde nicht gefunden","error")):ae(m)}},className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,w.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("users.form.username")}),(0,w.jsx)("input",{type:"text",name:"username",value:S.username||"",onChange:se,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("users.form.email")}),(0,w.jsx)("input",{type:"email",name:"email",value:S.email||"",onChange:se,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("users.form.firstName")}),(0,w.jsx)("input",{type:"text",name:"firstName",value:S.firstName||"",onChange:se,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("users.form.lastName")}),(0,w.jsx)("input",{type:"text",name:"lastName",value:S.lastName||"",onChange:se,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("profile.birthday")}),(0,w.jsx)("input",{type:"date",name:"birthday",value:S.birthday||"",onChange:se,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("profile.bankDetails")}),(0,w.jsx)("input",{type:"text",name:"bankDetails",value:S.bankDetails||"",onChange:se,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("profile.contract")}),(0,w.jsx)("input",{type:"text",name:"contract",value:S.contract||"",onChange:se,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("profile.salary")}),(0,w.jsx)("input",{type:"number",name:"salary",value:null===S.salary||void 0===S.salary?"":S.salary,onChange:se,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("users.form.normalWorkingHours")}),(0,w.jsx)("input",{type:"number",step:"0.1",name:"normalWorkingHours",value:null===S.normalWorkingHours||void 0===S.normalWorkingHours?"7.6":S.normalWorkingHours,onChange:se,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white"})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("profile.country")}),(0,w.jsx)("select",{name:"country",value:S.country||"CO",onChange:se,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",children:o.map((e=>(0,w.jsx)("option",{value:e.code,children:e.name},e.code)))})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("profile.language")}),(0,w.jsx)("select",{name:"language",value:S.language||"es",onChange:se,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",children:i.map((e=>(0,w.jsx)("option",{value:e.code,children:e.name},e.code)))})]})]}),(0,w.jsxs)("div",{className:"mt-4 border-t pt-4",children:[(0,w.jsx)("h3",{className:"text-lg font-semibold mb-4 dark:text-white",children:r("users.form.payrollSettings")}),(0,w.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("users.form.payrollCountry")}),(0,w.jsx)("select",{name:"payrollCountry",value:S.payrollCountry||A.payrollCountry||"CH",onChange:se,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",children:l.map((e=>(0,w.jsx)("option",{value:e.code,children:e.name},e.code)))})]}),("CO"===S.payrollCountry||"CO"===A.payrollCountry&&!S.payrollCountry)&&(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("users.form.contractType")}),(0,w.jsxs)("select",{name:"contractType",value:S.contractType||"",onChange:se,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",children:[(0,w.jsx)("option",{value:"",children:"Bitte ausw\xe4hlen"}),N.map((e=>(0,w.jsx)("option",{value:e.code,children:e.name},e.code)))]})]})]}),(0,w.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r("users.form.hourlyRate")," (","CH"===(S.payrollCountry||A.payrollCountry)?"CHF":"COP",")"]}),(0,w.jsx)("input",{type:"number",name:"hourlyRate",min:"0",step:"CH"===(S.payrollCountry||A.payrollCountry)?"0.05":"1",value:null===S.hourlyRate||void 0===S.hourlyRate?"":S.hourlyRate,onChange:se,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:"CH"===(S.payrollCountry||A.payrollCountry)?"z.B. 45.00":"z.B. 50000"})]}),("CO"===S.payrollCountry||"CO"===A.payrollCountry)&&"servicios_externos"!==S.contractType&&"servicios_externos"!==A.contractType&&(S.contractType||A.contractType)&&(0,w.jsxs)("div",{children:[(0,w.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r("users.form.monthlySalary")," (COP)"]}),(0,w.jsx)("input",{type:"number",name:"monthlySalary",min:"0",step:"1000",value:null===S.monthlySalary||void 0===S.monthlySalary?"":S.monthlySalary,onChange:se,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",placeholder:"z.B. 3500000"})]})]})]}),_&&(0,w.jsxs)("div",{className:"mt-4 flex justify-end gap-3",children:[(0,w.jsx)("button",{type:"button",onClick:()=>{A&&z((0,u.A)((0,u.A)({},A),{},{birthday:A.birthday?new Date(A.birthday).toISOString().split("T")[0]:null})),C(!1)},className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:r("common.cancel"),children:(0,w.jsx)(p.A,{className:"h-5 w-5"})}),(0,w.jsx)("button",{type:"submit",className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800",title:r("common.save"),children:(0,w.jsx)(f.A,{className:"h-5 w-5"})})]})]}),"documents"===W&&(0,w.jsx)(v.A,{userId:A.id,isAdmin:!0}),"roles"===W&&(0,w.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:U?(0,w.jsxs)("div",{className:"mt-4 mb-4",children:[(0,w.jsx)("h3",{className:"text-lg font-semibold mb-4 dark:text-white",children:r("roleAssignment.title")}),(0,w.jsx)("p",{className:"dark:text-gray-300",children:r("roleAssignment.loading")})]}):D.length>0&&(0,w.jsxs)("div",{children:[(0,w.jsx)("h3",{className:"text-lg font-semibold mb-4 dark:text-white",children:r("roleAssignment.title")}),L.some((e=>!D.some((t=>t.id===e))))&&(0,w.jsxs)("div",{className:"bg-yellow-100 dark:bg-yellow-900/30 border border-yellow-400 dark:border-yellow-700 text-yellow-700 dark:text-yellow-300 px-4 py-3 rounded mb-4",children:[(0,w.jsx)("p",{className:"font-bold",children:r("roleAssignment.unknownRolesWarning")}),(0,w.jsx)("p",{children:r("roleAssignment.unknownRolesMessage",{ids:L.filter((e=>!D.some((t=>t.id===e)))).join(", ")})}),(0,w.jsx)("p",{className:"mt-2 text-sm",children:r("roleAssignment.availableRoleIds",{ids:D.map((e=>e.id)).join(", ")})})]}),(0,w.jsxs)("div",{className:"mb-4",children:[(0,w.jsx)("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:r("roleAssignment.currentRoles")}),0===L.length?(0,w.jsx)("p",{className:"text-gray-500 dark:text-gray-400 italic",children:r("roleAssignment.noRolesAssigned")}):(0,w.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[D.filter((e=>L.includes(e.id))).map((e=>{const t=1===e.id&&A&&1===A.id;return(0,w.jsx)("div",{className:"border rounded-lg p-4 ".concat(t?"border-green-500 bg-green-50 dark:bg-green-900/20 dark:border-green-700 cursor-not-allowed":"border-blue-500 bg-blue-50 dark:bg-blue-900/20 dark:border-blue-700 cursor-pointer"),onClick:()=>!t&&ne(e.id),children:(0,w.jsxs)("div",{className:"flex justify-between items-center",children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("h4",{className:"font-medium flex items-center dark:text-white",children:[e.name,t&&(0,w.jsx)("span",{className:"ml-2 text-xs bg-green-600 text-white px-2 py-0.5 rounded-full",children:r("roleAssignment.fixed")})]}),(0,w.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.description})]}),(0,w.jsxs)("div",{className:"flex items-center ".concat(t?"text-gray-400 dark:text-gray-500":"text-blue-600 dark:text-blue-400"),children:[(0,w.jsx)("span",{className:"mr-2 text-sm",children:r(t?"roleAssignment.fixedAssigned":"roleAssignment.remove")}),(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,w.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})]})]})},e.id)})),L.filter((e=>!D.some((t=>t.id===e)))).map((e=>(0,w.jsx)("div",{className:"border border-orange-500 bg-orange-50 rounded-lg p-4",children:(0,w.jsxs)("div",{className:"flex justify-between items-center",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h4",{className:"font-medium",children:r("roleAssignment.unknownRole",{id:e})}),(0,w.jsx)("p",{className:"text-sm text-orange-600",children:r("roleAssignment.unknownRoleDescription")})]}),(0,w.jsxs)("div",{className:"flex items-center text-orange-600",children:[(0,w.jsx)("span",{className:"mr-2 text-sm",children:r("roleAssignment.remove")}),(0,w.jsx)("button",{onClick:()=>ne(e),className:"focus:outline-none",children:(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,w.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})})]})]})},"unknown-".concat(e))))]})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("h4",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:r("roleAssignment.availableRoles")}),0===D.filter((e=>!L.includes(e.id))).length?(0,w.jsx)("p",{className:"text-gray-500 dark:text-gray-400 italic",children:r("roleAssignment.noRolesAvailable")}):(0,w.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:D.filter((e=>!L.includes(e.id))).map((e=>(0,w.jsx)("div",{className:"border border-gray-300 rounded-lg p-4 cursor-pointer hover:border-blue-300 hover:bg-blue-50",onClick:()=>ne(e.id),children:(0,w.jsxs)("div",{className:"flex justify-between items-center",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h4",{className:"font-medium",children:e.name}),(0,w.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]}),(0,w.jsxs)("div",{className:"flex items-center text-gray-500 hover:text-blue-600",children:[(0,w.jsx)("span",{className:"mr-2 text-sm",children:r("roleAssignment.add")}),(0,w.jsx)(b.A,{className:"h-5 w-5"})]})]})},e.id)))})]})]})})]}),J&&(0,w.jsx)(w.Fragment,{children:V?(0,w.jsxs)(g.lG,{open:J,onClose:()=>H(!1),className:"relative z-50",children:[(0,w.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,w.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,w.jsxs)(g.lG.Panel,{className:"mx-auto max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:[(0,w.jsx)("div",{className:"px-6 py-4 border-b dark:border-gray-700",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsx)(g.lG.Title,{className:"text-lg font-semibold dark:text-white",children:r("organisation.createUser.title")}),(0,w.jsx)("button",{onClick:()=>H(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,w.jsx)(p.A,{className:"h-6 w-6"})})]})}),(0,w.jsxs)("form",{onSubmit:le,className:"p-6",children:[(0,w.jsxs)("div",{className:"space-y-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r("organisation.createUser.email")," *"]}),(0,w.jsx)("input",{type:"email",name:"email",value:X.email,onChange:oe,className:"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white",required:!0})]}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r("organisation.createUser.password")," *"]}),(0,w.jsx)("input",{type:"password",name:"password",value:X.password,onChange:oe,className:"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white",required:!0})]}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r("organisation.createUser.firstName")," *"]}),(0,w.jsx)("input",{type:"text",name:"firstName",value:X.firstName,onChange:oe,className:"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white",required:!0})]}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r("organisation.createUser.lastName")," *"]}),(0,w.jsx)("input",{type:"text",name:"lastName",value:X.lastName,onChange:oe,className:"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white",required:!0})]})]}),(0,w.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,w.jsx)("button",{type:"button",onClick:()=>H(!1),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:r("common.cancel"),children:(0,w.jsx)(p.A,{className:"h-5 w-5"})}),(0,w.jsx)("button",{type:"submit",className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800",title:r("organisation.createUser.create"),children:(0,w.jsx)(f.A,{className:"h-5 w-5"})})]})]})]})})]}):(0,w.jsxs)(w.Fragment,{children:[J&&!K&&(0,w.jsx)("div",{className:"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40","aria-hidden":"true",style:{opacity:J?1:0,transition:"opacity 300ms ease-out"}}),(0,w.jsxs)("div",{className:"fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ".concat(J?"translate-x-0":"translate-x-full"),style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",pointerEvents:J?"auto":"none"},"aria-hidden":!J,role:"dialog","aria-modal":J,children:[(0,w.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0",children:[(0,w.jsx)("h2",{className:"text-lg font-semibold dark:text-white",children:r("organisation.createUser.title")}),(0,w.jsx)("button",{onClick:()=>H(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,w.jsx)(p.A,{className:"h-6 w-6"})})]}),(0,w.jsx)("div",{className:"flex flex-col flex-1 min-h-0",children:(0,w.jsxs)("form",{onSubmit:le,className:"flex flex-col flex-1 min-h-0",children:[(0,w.jsxs)("div",{className:"p-4 overflow-y-auto flex-1 min-h-0 space-y-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r("organisation.createUser.email")," *"]}),(0,w.jsx)("input",{type:"email",name:"email",value:X.email,onChange:oe,className:"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white",required:!0})]}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r("organisation.createUser.password")," *"]}),(0,w.jsx)("input",{type:"password",name:"password",value:X.password,onChange:oe,className:"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white",required:!0})]}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r("organisation.createUser.firstName")," *"]}),(0,w.jsx)("input",{type:"text",name:"firstName",value:X.firstName,onChange:oe,className:"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white",required:!0})]}),(0,w.jsxs)("div",{children:[(0,w.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[r("organisation.createUser.lastName")," *"]}),(0,w.jsx)("input",{type:"text",name:"lastName",value:X.lastName,onChange:oe,className:"w-full rounded-md border border-gray-300 dark:border-gray-600 px-3 py-2 dark:bg-gray-700 dark:text-white",required:!0})]})]}),(0,w.jsxs)("div",{className:"flex justify-end gap-3 border-t dark:border-gray-700 pt-4 px-4 flex-shrink-0",children:[(0,w.jsx)("button",{type:"button",onClick:()=>H(!1),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:r("common.cancel"),children:(0,w.jsx)(p.A,{className:"h-5 w-5"})}),(0,w.jsx)("button",{type:"submit",className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800",title:r("organisation.createUser.create"),children:(0,w.jsx)(f.A,{className:"h-5 w-5"})})]})]})})]})]})})]})};var R=r(3744),S=r(2811),z=r(9248),_=r(8010),C=r(1801),L=r(1923),E=r(4426),q=r(7829),F=r(6507),B=r(5365);const I=["dashboard","worktracker","cerebro","settings","profile"],T=["dashboard","worktracker","consultations","team_worktime_control","payroll","organization_management","cerebro","settings","profile"],O=["requests","tasks","users","roles","organization","organization_join_requests","organization_users","team_worktime","worktime","clients","consultation_invoices","branches","notifications","settings","monthly_reports"],D=["database_reset_table","database_logs","invoice_create","invoice_download","invoice_mark_paid","invoice_settings","todo_create","todo_edit","todo_delete","task_create","task_edit","task_delete","user_create","user_edit","user_delete","role_assign","role_create","role_edit","role_delete","organization_create","organization_edit","organization_delete","worktime_start","worktime_stop","worktime_edit","worktime_delete","cerebro","consultation_start","consultation_stop","consultation_edit","client_create","client_edit","client_delete","settings_system","settings_notifications","settings_profile","payroll_generate","payroll_export","payroll_edit"],M={requests:"dashboard",tasks:"worktracker",users:"organization_management",roles:"organization_management",organization:"organization_management",organization_join_requests:"organization_management",organization_users:"organization_management",team_worktime:"team_worktime_control",worktime:"worktracker",clients:"consultations",consultation_invoices:"consultations",branches:"settings",notifications:"general",settings:"settings",monthly_reports:"consultations"},U={database_reset_table:"settings",database_logs:"settings",invoice_create:"consultations",invoice_download:"consultations",invoice_mark_paid:"consultations",invoice_settings:"consultations",todo_create:"worktracker",todo_edit:"worktracker",todo_delete:"worktracker",task_create:"worktracker",task_edit:"worktracker",task_delete:"worktracker",user_create:"organization_management",user_edit:"organization_management",user_delete:"organization_management",role_assign:"organization_management",role_create:"organization_management",role_edit:"organization_management",role_delete:"organization_management",organization_create:"organization_management",organization_edit:"organization_management",organization_delete:"organization_management",worktime_start:"worktracker",worktime_stop:"worktracker",worktime_edit:"worktracker",worktime_delete:"worktracker",cerebro:"cerebro",consultation_start:"consultations",consultation_stop:"consultations",consultation_edit:"consultations",client_create:"consultations",client_edit:"consultations",client_delete:"consultations",settings_system:"settings",settings_notifications:"settings",settings_profile:"settings",payroll_generate:"payroll",payroll_export:"payroll",payroll_edit:"payroll"},G={worktime_start:"worktime",worktime_stop:"worktime",worktime_edit:"worktime",worktime_delete:"worktime",task_create:"tasks",task_edit:"tasks",task_delete:"tasks",todo_create:"tasks",todo_edit:"tasks",todo_delete:"tasks",client_create:"clients",client_edit:"clients",client_delete:"clients",consultation_start:"clients",consultation_stop:"clients",consultation_edit:"clients",invoice_create:"consultation_invoices",invoice_download:"consultation_invoices",invoice_mark_paid:"consultation_invoices",invoice_settings:"consultation_invoices",user_create:"users",user_edit:"users",user_delete:"users",role_assign:"roles",role_create:"roles",role_edit:"roles",role_delete:"roles",organization_create:"organization",organization_edit:"organization",organization_delete:"organization",settings_system:"settings",settings_notifications:"settings",settings_profile:"settings",database_reset_table:null,database_logs:null,cerebro:null,payroll_generate:null,payroll_export:null,payroll_edit:null},W="roles-table",P=[1,2,999],J=["Admin","User","Hamburger"],H=(e,t)=>!!P.includes(e)||!(!t||!J.includes(t)),V=e=>{let{role:t,onEdit:r,onDelete:a,onCopy:n,canEdit:o,canDelete:l,canCopy:i}=e;const{t:d}=(0,s.Bd)();return(0,w.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700 p-4 mb-4",children:[(0,w.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,w.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:t.name}),(0,w.jsxs)("div",{className:"flex space-x-2",children:[i&&(0,w.jsx)("button",{onClick:()=>n(t),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1",title:d("roles.actions.copy"),children:(0,w.jsx)(R.A,{className:"h-5 w-5"})}),o&&(0,w.jsx)("button",{onClick:()=>r(t),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1",title:d("roles.actions.edit"),children:(0,w.jsx)(S.A,{className:"h-5 w-5"})}),l&&(0,w.jsx)("button",{onClick:()=>a(t.id),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 p-1",title:d("roles.actions.delete"),children:(0,w.jsx)(z.A,{className:"h-5 w-5"})})]})]}),(0,w.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.description||d("roles.noDescription")}),(0,w.jsxs)("div",{className:"mt-2",children:[(0,w.jsxs)("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:[d("roles.permissions"),":"]}),(0,w.jsxs)("div",{className:"flex flex-wrap gap-1",children:[t.permissions.filter((e=>"none"!==e.accessLevel)).slice(0,8).map((e=>(0,w.jsxs)("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300 px-2 py-1 rounded",children:[e.entity,": ",e.accessLevel]},"".concat(e.entity,"-").concat(e.entityType)))),t.permissions.filter((e=>"none"!==e.accessLevel)).length>8&&(0,w.jsxs)("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-300 px-2 py-1 rounded",children:["+",t.permissions.filter((e=>"none"!==e.accessLevel)).length-8," ",d("common.showMore")]})]})]})]})},Z=e=>{let{onRolesChange:t,onError:r,readOnly:o=!1}=e;const{t:l}=(0,s.Bd)(),[i,d]=(0,a.useState)(!1),[c,m]=(0,a.useState)(null),[h,y]=(0,a.useState)([]),[k,v]=(0,a.useState)(!0),N=(0,a.useMemo)((()=>({dashboard:l("roles.pages.dashboard"),worktracker:l("roles.pages.worktracker"),consultations:l("roles.pages.consultations"),team_worktime_control:l("roles.pages.team_worktime_control"),payroll:l("roles.pages.payroll"),organization_management:l("roles.pages.organization_management"),cerebro:l("roles.pages.cerebro"),settings:l("roles.pages.settings"),profile:l("roles.pages.profile")})),[l]),A=(0,a.useMemo)((()=>({tasks:l("roles.tables.tasks"),worktime:l("roles.tables.worktime"),users:l("roles.tables.users"),roles:l("roles.tables.roles"),organization:l("roles.tables.organization"),organization_join_requests:l("roles.tables.organization_join_requests"),organization_users:l("roles.tables.organization_users"),clients:l("roles.tables.clients"),consultation_invoices:l("roles.tables.consultation_invoices"),requests:l("roles.tables.requests"),team_worktime:l("roles.tables.team_worktime"),settings:l("roles.tables.settings"),notifications:l("roles.tables.notifications"),branches:l("roles.tables.branches"),monthly_reports:l("roles.tables.monthly_reports")})),[l]),R=(0,a.useMemo)((()=>({worktime_start:l("roles.buttons.worktime_start"),worktime_stop:l("roles.buttons.worktime_stop"),worktime_edit:l("roles.buttons.worktime_edit"),worktime_delete:l("roles.buttons.worktime_delete"),task_create:l("roles.buttons.task_create"),task_edit:l("roles.buttons.task_edit"),task_delete:l("roles.buttons.task_delete"),todo_create:l("roles.buttons.todo_create"),todo_edit:l("roles.buttons.todo_edit"),todo_delete:l("roles.buttons.todo_delete"),client_create:l("roles.buttons.client_create"),client_edit:l("roles.buttons.client_edit"),client_delete:l("roles.buttons.client_delete"),consultation_start:l("roles.buttons.consultation_start"),consultation_stop:l("roles.buttons.consultation_stop"),consultation_edit:l("roles.buttons.consultation_edit"),invoice_create:l("roles.buttons.invoice_create"),invoice_download:l("roles.buttons.invoice_download"),invoice_mark_paid:l("roles.buttons.invoice_mark_paid"),invoice_settings:l("roles.buttons.invoice_settings"),user_create:l("roles.buttons.user_create"),user_edit:l("roles.buttons.user_edit"),user_delete:l("roles.buttons.user_delete"),role_assign:l("roles.buttons.role_assign"),role_create:l("roles.buttons.role_create"),role_edit:l("roles.buttons.role_edit"),role_delete:l("roles.buttons.role_delete"),organization_create:l("roles.buttons.organization_create"),organization_edit:l("roles.buttons.organization_edit"),organization_delete:l("roles.buttons.organization_delete"),settings_system:l("roles.buttons.settings_system"),settings_notifications:l("roles.buttons.settings_notifications"),settings_profile:l("roles.buttons.settings_profile"),database_reset_table:l("roles.buttons.database_reset_table"),database_logs:l("roles.buttons.database_logs"),payroll_generate:l("roles.buttons.payroll_generate"),payroll_export:l("roles.buttons.payroll_export"),payroll_edit:l("roles.buttons.payroll_edit"),cerebro:l("roles.buttons.cerebro")})),[l]),[S,z]=(0,a.useState)({name:"",description:"",permissions:[...T.map((e=>({entity:e,entityType:"page",accessLevel:"none"}))),...O.map((e=>({entity:e,entityType:"table",accessLevel:"none"}))),...D.map((e=>({entity:e,entityType:"button",accessLevel:"none"})))]}),[P,J]=(0,a.useState)(null),{hasPermission:Z}=(0,n.S)(),[K,Y]=(0,a.useState)(""),[$,Q]=(0,a.useState)(!1),[X,ee]=(0,a.useState)([]),[te,re]=(0,a.useState)([]),[ae,se]=(0,a.useState)("Alle"),[ne,oe]=(0,a.useState)(null),[le,ie]=(0,a.useState)(window.innerWidth<640),[de,ce]=(0,a.useState)(window.innerWidth>1070),{openSidepane:me,closeSidepane:ue}=(0,j.N)(),{handleError:ge,handleValidationError:xe}=(0,F.qz)(),[be,he]=(0,a.useState)(!1),[ye,pe]=(0,a.useState)(null),[fe,ke]=(0,a.useState)(10);(0,a.useEffect)((()=>{const e=()=>{ie(window.innerWidth<640),ce(window.innerWidth>1070)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,a.useEffect)((()=>(i?me():ue(),()=>{ue()})),[i,me,ue]);const ve=(0,a.useCallback)((async()=>{v(!0),console.log("DEBUGAUSGABE: Hole Rollen vom Server...");try{const e=await x.Zj.getAll();console.log("DEBUGAUSGABE: Rollen erfolgreich geholt:",e.data),y(e.data),J(null)}catch(P){console.error("DEBUGAUSGABE: Fehler beim Abrufen der Rollen:",P),ge(P,{component:"RoleManagementTab",action:"fetchRoles"}),r&&r("Fehler beim Laden der Rollen")}finally{v(!1)}}),[ge,r]);(0,a.useEffect)((()=>{ve()}),[ve]);const je=async e=>{if(e.preventDefault(),J(null),S.name){if(c){const e=S.permissions.map((e=>"page"===e.entityType&&I.includes(e.entity)?(0,u.A)((0,u.A)({},e),{},{accessLevel:"both"}):e)).filter((e=>"none"!==e.accessLevel)).map((e=>({entity:e.entity,entityType:e.entityType,accessLevel:e.accessLevel})));if(!c.id||isNaN(c.id))return console.warn("DEBUGAUSGABE: Ung\xfcltige Rollen-ID erkannt, Bearbeitung abgebrochen"),void ge("Ung\xfcltige Rollen-ID, Bearbeitung abgebrochen",{component:"RoleManagementTab",roleId:c.id});if(H(c.id,c.name))return console.warn("DEBUGAUSGABE: Versuch, gesch\xfctzte Rolle mit ID ".concat(c.id," zu bearbeiten")),ge({message:"Gesch\xfctzte Systemrollen k\xf6nnen nicht bearbeitet werden",name:"PermissionError"},{component:"RoleManagementTab",roleId:c.id,category:B.h.PERMISSION}),void d(!1);if(!h.some((e=>e.id===c.id)))return console.error("DEBUGAUSGABE: Rolle mit ID ".concat(c.id," existiert nicht in der aktuellen Liste")),ge("Rolle mit ID ".concat(c.id," existiert nicht mehr. Bitte aktualisieren Sie die Seite."),{component:"RoleManagementTab",roleId:c.id}),d(!1),void await ve();console.log("DEBUGAUSGABE: Bearbeite Rolle mit ID ".concat(c.id));try{console.log("DEBUGAUSGABE: Sende Aktualisierung an API:",{name:S.name,description:S.description,permissions:e});const t={name:S.name,description:S.description,permissions:e};console.log("DEBUGAUSGABE: Vor dem API-Aufruf roleApi.update");const r=await x.Zj.update(c.id,t);console.log("DEBUGAUSGABE: Nach dem API-Aufruf roleApi.update"),console.log("DEBUGAUSGABE: API-Antwort bei Rollenaktualisierung:",r),await ve()}catch(r){return console.error("DEBUGAUSGABE: Fehler bei Rollenaktualisierung:",r),void(r.response?r.response.data.meta&&"Record to update not found."===r.response.data.meta.cause?(ge("Diese Rolle existiert nicht mehr in der Datenbank. Die Anzeige wird aktualisiert.",{component:"RoleManagementTab",roleId:c.id}),d(!1),await ve()):ge(r.response.data.message||"Fehler beim Aktualisieren der Rolle",{component:"RoleManagementTab",roleId:c.id}):ge("Fehler beim Aktualisieren der Rolle",{component:"RoleManagementTab",roleId:c.id}))}}else try{const e=S.permissions.map((e=>"page"===e.entityType&&I.includes(e.entity)?(0,u.A)((0,u.A)({},e),{},{accessLevel:"both"}):e)).filter((e=>"none"!==e.accessLevel)).map((e=>({entity:e.entity,entityType:e.entityType,accessLevel:e.accessLevel})));console.log("DEBUGAUSGABE: Sende Daten an API f\xfcr neue Rolle:",{name:S.name,description:S.description,permissions:e});const t={name:S.name,description:S.description,permissions:e};console.log("DEBUGAUSGABE: Vor dem API-Aufruf roleApi.create");const r=await x.Zj.create(t);console.log("DEBUGAUSGABE: Nach dem API-Aufruf roleApi.create"),console.log("DEBUGAUSGABE: API-Antwort beim Erstellen der Rolle:",r),await ve()}catch(a){return console.error("DEBUGAUSGABE: Fehler bei API-Anfrage zum Erstellen der Rolle:",a),void(a.response?ge(a.response.data.message||"Fehler beim Erstellen der Rolle",{component:"RoleManagementTab"}):ge("Fehler beim Erstellen der Rolle",{component:"RoleManagementTab"}))}t&&t(),d(!1),Re()}else xe("Rollenname darf nicht leer sein",{name:"Rollenname ist erforderlich"})},we=async e=>{if(!e||isNaN(e))return console.warn("Ung\xfcltige Rollen-ID erkannt, L\xf6schvorgang abgebrochen"),void ge("Ung\xfcltige Rollen-ID, L\xf6schvorgang abgebrochen",{component:"RoleManagementTab",roleId:e});const r=h.find((t=>t.id===e));if(r&&H(e,r.name))return console.warn("Versuch, gesch\xfctzte Rolle mit ID ".concat(e," (").concat(r.name,") zu l\xf6schen")),void ge("Gesch\xfctzte Systemrollen k\xf6nnen nicht gel\xf6scht werden",{component:"RoleManagementTab",roleId:e});if(window.confirm("M\xf6chten Sie diese Rolle wirklich l\xf6schen?"))try{console.log("Starte L\xf6schvorgang f\xfcr Rolle mit ID ".concat(e));if(!h.some((t=>t.id===e)))return console.error("Rolle mit ID ".concat(e," existiert nicht in der aktuellen Liste")),ge("Rolle mit ID ".concat(e," existiert nicht mehr. Bitte aktualisieren Sie die Seite."),{component:"RoleManagementTab",roleId:e}),void await ve();console.log("Sende L\xf6schanfrage an API");try{const t=await x.Zj.delete(e);console.log("API-Antwort beim L\xf6schen der Rolle:",t),await ve(),console.log("Rollenliste nach L\xf6schen aktualisiert")}catch(a){return console.error("API-Fehler beim L\xf6schen der Rolle:",a),void(a.response?(console.error("API-Fehlerdaten:",a.response.data),a.response.data.meta&&"Record to delete does not exist."===a.response.data.meta.cause?(ge("Diese Rolle existiert nicht mehr in der Datenbank. Die Anzeige wird aktualisiert.",{component:"RoleManagementTab",roleId:e}),await ve()):ge(a.response.data.message||"Fehler beim L\xf6schen der Rolle",{component:"RoleManagementTab",roleId:e})):ge("Netzwerkfehler beim L\xf6schen der Rolle",{component:"RoleManagementTab",roleId:e}))}console.log("Rolle erfolgreich gel\xf6scht"),t&&t()}catch(s){console.error("Unbehandelter Fehler beim L\xf6schen der Rolle:",s),ge(s);try{await ve()}catch(n){console.error("Fehler beim Aktualisieren der Rollenliste nach fehlgeschlagenem L\xf6schvorgang:",n)}}},Ne=async e=>{try{if(!e||!e.id)return void ge("Ung\xfcltige Rolle zum Kopieren",{component:"RoleManagementTab"});const r={name:"".concat(e.name,"-Kopie"),description:e.description||"",permissions:e.permissions.filter((e=>"none"!==e.accessLevel)).map((e=>({entity:e.entity,entityType:e.entityType,accessLevel:e.accessLevel})))};console.log("DEBUGAUSGABE: Kopiere Rolle:",e.name,"mit Daten:",r);const a=await x.Zj.create(r);console.log("DEBUGAUSGABE: Rolle erfolgreich kopiert:",a.data),y((e=>[a.data,...e])),Ae(a.data),t&&t()}catch(r){console.error("DEBUGAUSGABE: Fehler beim Kopieren der Rolle:",r),ge(r,{component:"RoleManagementTab",roleId:e.id})}},Ae=e=>{if(H(e.id,e.name))return void ge("Gesch\xfctzte Systemrollen k\xf6nnen nicht bearbeitet werden",{component:"RoleManagementTab",roleId:e.id});const t=[...T.map((e=>({entity:e,entityType:"page",accessLevel:I.includes(e)?"both":"none"}))),...O.map((e=>({entity:e,entityType:"table",accessLevel:"none"}))),...D.map((e=>({entity:e,entityType:"button",accessLevel:"none"})))];e.permissions.forEach((e=>{const r=t.findIndex((t=>t.entity===e.entity&&t.entityType===e.entityType));-1!==r&&("page"===e.entityType&&I.includes(e.entity)?t[r].accessLevel="both":t[r].accessLevel=e.accessLevel)})),z({name:e.name,description:e.description||"",permissions:t}),m(e),d(!0)},Re=()=>{m(null),z({name:"",description:"",permissions:[...T.map((e=>({entity:e,entityType:"page",accessLevel:I.includes(e)?"both":"none"}))),...O.map((e=>({entity:e,entityType:"table",accessLevel:"none"}))),...D.map((e=>({entity:e,entityType:"button",accessLevel:"none"})))]})},Se=e=>{const t=[...S.permissions];S.permissions.filter((e=>"page"===e.entityType&&!I.includes(e.entity))).forEach((r=>{const a=S.permissions.indexOf(r);t[a]=(0,u.A)((0,u.A)({},r),{},{accessLevel:e})})),z((0,u.A)((0,u.A)({},S),{},{permissions:t}))},ze=e=>{const t=[...S.permissions];S.permissions.filter((e=>"table"===e.entityType)).forEach((r=>{const a=S.permissions.indexOf(r);t[a]=(0,u.A)((0,u.A)({},r),{},{accessLevel:e})})),z((0,u.A)((0,u.A)({},S),{},{permissions:t}))},_e=e=>{const t=[...S.permissions];S.permissions.filter((e=>"button"===e.entityType)).forEach((r=>{const a=S.permissions.indexOf(r);t[a]=(0,u.A)((0,u.A)({},r),{},{accessLevel:e})})),z((0,u.A)((0,u.A)({},S),{},{permissions:t}))},Ce=()=>X.length,Le=(0,a.useMemo)((()=>h.filter((e=>{if(K){const t=K.toLowerCase();if(!(e.name.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)))return!1}if(X.length>0){let t=X.length>0;for(let r=0;r<X.length;r++){const a=X[r];let s=!1;switch(a.column){case"name":"equals"===a.operator?s=e.name.toLowerCase()===(a.value||"").toLowerCase():"contains"===a.operator?s=e.name.toLowerCase().includes((a.value||"").toLowerCase()):"startsWith"===a.operator&&(s=e.name.toLowerCase().startsWith((a.value||"").toLowerCase()));break;case"description":if(!e.description){s=!1;break}"equals"===a.operator?s=e.description.toLowerCase()===(a.value||"").toLowerCase():"contains"===a.operator?s=e.description.toLowerCase().includes((a.value||"").toLowerCase()):"startsWith"===a.operator&&(s=e.description.toLowerCase().startsWith((a.value||"").toLowerCase()));break;case"permissions":const t=a.value,r=e.permissions.filter((e=>e.accessLevel===t)).length;("greaterThan"===a.operator||"equals"===a.operator)&&(s=r>0)}if(0===r)t=s;else{t="AND"===te[r-1]?t&&s:t||s}}if(!t)return!1}return!0})).sort(((e,t)=>e.name.localeCompare(t.name)))),[h,K,X,te]);(0,a.useEffect)((()=>{(async()=>{try{if(!localStorage.getItem("token"))return void console.error("Nicht authentifiziert");const e=(await L.A.get(C.Sn.SAVED_FILTERS.BY_TABLE(W))).data||[];if(!e.some((e=>"Alle"===e.name))){const e={tableId:W,name:"Alle",conditions:[],operators:[]};await L.A.post(C.Sn.SAVED_FILTERS.BASE,e),console.log("Alle-Filter f\xfcr Rollen erstellt")}}catch(P){console.error("Fehler beim Erstellen der Standard-Filter:",P)}})()}),[]),(0,a.useEffect)((()=>{(async()=>{try{const e=await L.A.get(C.Sn.SAVED_FILTERS.BY_TABLE(W)),t=e.data.find((e=>"Alle"===e.name));t&&(se("Alle"),oe(t.id),Ee(t.conditions,t.operators))}catch(P){console.error("Fehler beim Setzen des initialen Filters:",P)}})()}),[]);const Ee=(e,t)=>{ee(e),re(t)},qe=()=>{ee([]),re([]),se(""),oe(null)};return(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"space-y-4",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsx)("div",{className:"flex items-center",children:!o&&Z("roles","write","table")&&(0,w.jsx)("button",{onClick:()=>d(!0),className:"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center",style:{width:"30.19px",height:"30.19px"},title:l("roles.createRole"),"aria-label":l("roles.createRole"),children:(0,w.jsx)(b.A,{className:"h-4 w-4"})})}),(0,w.jsx)("div",{}),(0,w.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,w.jsx)("input",{type:"text",placeholder:"Suchen...",className:"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:K,onChange:e=>Y(e.target.value)}),(0,w.jsxs)("button",{className:"p-2 rounded-md ".concat(Ce()>0?"bg-blue-50 text-blue-600":"hover:bg-gray-100"," ml-1 relative"),onClick:()=>Q(!$),title:"Filter",children:[(0,w.jsx)(_.A,{className:"w-5 h-5"}),Ce()>0&&(0,w.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 text-white rounded-full text-xs flex items-center justify-center",children:Ce()})]})]})]}),$&&(0,w.jsx)(E.A,{columns:[{id:"name",label:"Name"},{id:"description",label:"Beschreibung"},{id:"permissions",label:"Berechtigungen"}],onApply:Ee,onReset:qe,savedConditions:X,savedOperators:te,tableId:W}),(0,w.jsx)(q.A,{tableId:W,onSelectFilter:Ee,onReset:qe,activeFilterName:ae,selectedFilterId:ne,onFilterChange:(e,t,r,a)=>{se(e),oe(t),Ee(r,a)},defaultFilterName:"Alle"}),k?(0,w.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,w.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):0===h.length?(0,w.jsx)("div",{className:"p-4 bg-gray-50 rounded text-center",children:(0,w.jsx)("p",{children:"Keine Rollen gefunden. Erstellen Sie eine neue Rolle mit dem Button oben."})}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"space-y-4",children:Le.slice(0,fe).map((e=>(0,w.jsx)(V,{role:e,onEdit:Ae,onDelete:we,onCopy:Ne,canEdit:!o&&Z("roles","write","table")&&!H(e.id,e.name),canDelete:!o&&Z("roles","write","table")&&!H(e.id,e.name),canCopy:!o&&Z("roles","write","table")&&H(e.id,e.name)},e.id)))}),Le.length>fe&&(0,w.jsx)("div",{className:"mt-4 flex justify-center",children:(0,w.jsxs)("button",{className:"px-4 py-2 text-sm font-medium text-blue-600 bg-white border border-blue-300 rounded-md hover:bg-blue-50 dark:bg-gray-800 dark:text-blue-400 dark:border-gray-700 dark:hover:bg-gray-700",onClick:()=>ke((e=>e+10)),children:["Mehr anzeigen (",Le.length-fe," verbleibend)"]})})]})]}),i&&(0,w.jsx)(w.Fragment,{children:le?(0,w.jsxs)(g.lG,{open:i,onClose:()=>d(!1),className:"relative z-50",children:[(0,w.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,w.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,w.jsxs)(g.lG.Panel,{className:"mx-auto max-w-4xl w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl max-h-[calc(100vh-2rem)] flex flex-col overflow-hidden",children:[(0,w.jsx)("div",{className:"px-6 py-4 border-b dark:border-gray-700 flex-shrink-0",children:(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsx)(g.lG.Title,{className:"text-lg font-semibold dark:text-white",children:l(c?"roles.editRole":"roles.createRole")}),(0,w.jsx)("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,w.jsx)(p.A,{className:"h-6 w-6"})})]})}),(0,w.jsxs)("form",{onSubmit:je,className:"flex flex-col flex-1 min-h-0",children:[(0,w.jsx)("div",{className:"flex-1 overflow-y-auto min-h-0",children:(0,w.jsxs)("div",{className:"p-6 space-y-5",children:[(0,w.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Name"}),(0,w.jsx)("input",{type:"text",value:S.name,onChange:e=>z((0,u.A)((0,u.A)({},S),{},{name:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white",required:!0})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Beschreibung"}),(0,w.jsx)("input",{type:"text",value:S.description,onChange:e=>z((0,u.A)((0,u.A)({},S),{},{description:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]})]}),(0,w.jsxs)("div",{className:"mt-2",children:[(0,w.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-2",children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:l("roles.form.detailedPermissions")}),(0,w.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5",children:[(0,w.jsx)("button",{type:"button",onClick:()=>Se("both"),className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800",title:l("roles.form.activateAllPages"),children:l("roles.form.pagesChecked")}),(0,w.jsx)("button",{type:"button",onClick:()=>Se("none"),className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:l("roles.form.deactivateAllPages"),children:l("roles.form.pagesUnchecked")}),(0,w.jsx)("button",{type:"button",onClick:()=>ze("both"),className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800",title:l("roles.form.activateAllTables"),children:l("roles.form.tablesChecked")}),(0,w.jsx)("button",{type:"button",onClick:()=>ze("none"),className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:l("roles.form.deactivateAllTables"),children:l("roles.form.tablesUnchecked")}),(0,w.jsx)("button",{type:"button",onClick:()=>_e("both"),className:"px-2 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800",title:l("roles.form.activateAllButtons"),children:l("roles.form.buttonsChecked")}),(0,w.jsx)("button",{type:"button",onClick:()=>_e("none"),className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:l("roles.form.deactivateAllButtons"),children:l("roles.form.buttonsUnchecked")})]})]}),(0,w.jsx)("div",{className:"grid grid-cols-1 gap-4 overflow-y-auto border rounded-lg p-4 dark:border-gray-600",children:S.permissions.filter((e=>"page"===e.entityType)).map(((e,t)=>{const r=S.permissions.indexOf(e),a="both"===e.accessLevel;return(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:N[e.entity]||e.entity}),(0,w.jsxs)("label",{className:"inline-flex items-center ".concat(I.includes(e.entity)?"cursor-not-allowed opacity-80":"cursor-pointer"),children:[(0,w.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:a,disabled:I.includes(e.entity),onChange:()=>{const t=[...S.permissions];t[r]=(0,u.A)((0,u.A)({},e),{},{accessLevel:a?"none":"both"}),z((0,u.A)((0,u.A)({},S),{},{permissions:t}))}}),(0,w.jsx)("div",{className:"relative w-11 h-6 ".concat(I.includes(e.entity)?"bg-blue-600 dark:bg-blue-700":"bg-gray-200 dark:bg-gray-700"," peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700"),children:I.includes(e.entity)&&(0,w.jsx)("span",{className:"absolute inset-0 flex items-center justify-center text-xs text-white font-medium",children:"Fix"})})]})]}),S.permissions.filter((t=>"table"===t.entityType&&M[t.entity]===e.entity)).sort(((e,t)=>{const r=A[e.entity]||e.entity,a=A[t.entity]||t.entity,s=["users","roles","organization"],n=s.indexOf(e.entity),o=s.indexOf(t.entity);return-1!==n&&-1!==o?n-o:-1!==n?-1:-1!==o?1:r.localeCompare(a)})).map(((t,r)=>{const a=S.permissions.indexOf(t),s="both"===t.accessLevel,n=t.entity,o=A[n]||n,l=S.permissions.filter((t=>"button"===t.entityType&&U[t.entity]===e.entity&&G[t.entity]===n&&!("tasks"===n&&t.entity.startsWith("todo_")))).sort(((e,t)=>{const r=R[e.entity]||e.entity,a=R[t.entity]||t.entity,s=["Start","Stop","Erstellen","Bearbeiten","L\xf6schen"],n=s.indexOf(r),o=s.indexOf(a);return-1!==n&&-1!==o?n-o:-1!==n?-1:-1!==o?1:r.localeCompare(a)}));return(0,w.jsxs)("div",{className:"mt-3",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between pl-6 border-l-2 border-blue-300 dark:border-blue-600",children:[(0,w.jsxs)("span",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:["\u2514 ",o]}),(0,w.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,w.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:s,onChange:()=>{const e=[...S.permissions];e[a]=(0,u.A)((0,u.A)({},t),{},{accessLevel:s?"none":"both"}),z((0,u.A)((0,u.A)({},S),{},{permissions:e}))}}),(0,w.jsx)("div",{className:"relative w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700"})]})]}),l.map(((e,t)=>{const r=S.permissions.indexOf(e),a="both"===e.accessLevel,s=R[e.entity]||e.entity;return(0,w.jsxs)("div",{className:"flex items-center justify-between mt-2 pl-12 border-l-2 border-gray-300 dark:border-gray-600",children:[(0,w.jsxs)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["\u2514 ",s]}),(0,w.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,w.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:a,onChange:()=>{const t=[...S.permissions];t[r]=(0,u.A)((0,u.A)({},e),{},{accessLevel:a?"none":"both"}),z((0,u.A)((0,u.A)({},S),{},{permissions:t}))}}),(0,w.jsx)("div",{className:"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700"})]})]},"button-permission-".concat(e.entity,"-").concat(t))}))]},"table-permission-".concat(n,"-").concat(r))})),S.permissions.filter((t=>"button"===t.entityType&&U[t.entity]===e.entity&&!G[t.entity])).sort(((e,t)=>{const r=R[e.entity]||e.entity,a=R[t.entity]||t.entity;return r.localeCompare(a)})).map(((e,t)=>{const r=S.permissions.indexOf(e),a="both"===e.accessLevel,s=R[e.entity]||e.entity;return(0,w.jsxs)("div",{className:"flex items-center justify-between mt-2 pl-6 border-l-2 border-gray-300 dark:border-gray-600",children:[(0,w.jsxs)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["\u2514 ",s]}),(0,w.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,w.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:a,onChange:()=>{const t=[...S.permissions];t[r]=(0,u.A)((0,u.A)({},e),{},{accessLevel:a?"none":"both"}),z((0,u.A)((0,u.A)({},S),{},{permissions:t}))}}),(0,w.jsx)("div",{className:"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700"})]})]},"button-permission-".concat(e.entity,"-").concat(t))}))]},"permission-page-".concat(e.entity,"-").concat(t))}))})]})]})}),(0,w.jsxs)("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-700 flex justify-end gap-2 border-t dark:border-gray-600 flex-shrink-0",children:[(0,w.jsx)("button",{type:"button",onClick:()=>d(!1),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:"Abbrechen",children:(0,w.jsx)(p.A,{className:"h-5 w-5"})}),(0,w.jsx)("button",{type:"submit",className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800",title:c?"Aktualisieren":"Erstellen",children:(0,w.jsx)(f.A,{className:"h-5 w-5"})})]})]})]})})]}):(0,w.jsxs)(w.Fragment,{children:[i&&!de&&(0,w.jsx)("div",{className:"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40","aria-hidden":"true",style:{opacity:i?1:0,transition:"opacity 300ms ease-out"}}),(0,w.jsxs)("div",{className:"fixed top-16 bottom-0 right-0 max-w-2xl w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ".concat(i?"translate-x-0":"translate-x-full"),style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",pointerEvents:i?"auto":"none"},"aria-hidden":!i,role:"dialog","aria-modal":i,children:[(0,w.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0",children:[(0,w.jsx)("h2",{className:"text-lg font-semibold dark:text-white",children:c?"Rolle bearbeiten":"Neue Rolle erstellen"}),(0,w.jsx)("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,w.jsx)(p.A,{className:"h-6 w-6"})})]}),(0,w.jsx)("div",{className:"p-4 overflow-y-auto flex-1 min-h-0",children:(0,w.jsxs)("form",{onSubmit:je,className:"space-y-5",children:[(0,w.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:l("roles.form.name")}),(0,w.jsx)("input",{type:"text",value:S.name,onChange:e=>z((0,u.A)((0,u.A)({},S),{},{name:e.target.value})),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white",required:!0})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:l("roles.form.description")}),(0,w.jsx)("input",{type:"text",value:S.description,onChange:e=>z((0,u.A)((0,u.A)({},S),{},{description:e.target.value})),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"})]})]}),(0,w.jsxs)("div",{className:"mt-2",children:[(0,w.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-2",children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Detaillierte Berechtigungen"}),(0,w.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5",children:[(0,w.jsx)("button",{type:"button",onClick:()=>Se("both"),className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800",title:"Alle Seiten aktivieren",children:"Seiten \u2713"}),(0,w.jsx)("button",{type:"button",onClick:()=>Se("none"),className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"Alle Seiten deaktivieren",children:"Seiten \u2717"}),(0,w.jsx)("button",{type:"button",onClick:()=>ze("both"),className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded hover:bg-green-200 dark:hover:bg-green-800",title:"Alle Tabellen aktivieren",children:"Tabellen \u2713"}),(0,w.jsx)("button",{type:"button",onClick:()=>ze("none"),className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"Alle Tabellen deaktivieren",children:"Tabellen \u2717"}),(0,w.jsx)("button",{type:"button",onClick:()=>_e("both"),className:"px-2 py-1 text-xs bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded hover:bg-purple-200 dark:hover:bg-purple-800",title:"Alle Buttons aktivieren",children:"Buttons \u2713"}),(0,w.jsx)("button",{type:"button",onClick:()=>_e("none"),className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600",title:"Alle Buttons deaktivieren",children:"Buttons \u2717"})]})]}),(0,w.jsx)("div",{className:"grid grid-cols-1 gap-4 overflow-y-auto border rounded-lg p-4 dark:border-gray-600 max-h-[60vh]",children:S.permissions.filter((e=>"page"===e.entityType)).map(((e,t)=>{const r=S.permissions.indexOf(e),a="both"===e.accessLevel;return(0,w.jsxs)("div",{children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:N[e.entity]||e.entity}),(0,w.jsxs)("label",{className:"inline-flex items-center ".concat(I.includes(e.entity)?"cursor-not-allowed opacity-80":"cursor-pointer"),children:[(0,w.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:a,disabled:I.includes(e.entity),onChange:()=>{const t=[...S.permissions];t[r]=(0,u.A)((0,u.A)({},e),{},{accessLevel:a?"none":"both"}),z((0,u.A)((0,u.A)({},S),{},{permissions:t}))}}),(0,w.jsx)("div",{className:"relative w-11 h-6 ".concat(I.includes(e.entity)?"bg-blue-600 dark:bg-blue-700":"bg-gray-200 dark:bg-gray-700"," peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700"),children:I.includes(e.entity)&&(0,w.jsx)("span",{className:"absolute inset-0 flex items-center justify-center text-xs text-white font-medium",children:"Fix"})})]})]}),S.permissions.filter((t=>"table"===t.entityType&&M[t.entity]===e.entity)).sort(((e,t)=>{const r=A[e.entity]||e.entity,a=A[t.entity]||t.entity;return r.localeCompare(a)})).map(((t,r)=>{const a=S.permissions.indexOf(t),s="both"===t.accessLevel,n=t.entity,o=A[n]||n,l=S.permissions.filter((t=>"button"===t.entityType&&U[t.entity]===e.entity&&G[t.entity]===n&&!("tasks"===n&&t.entity.startsWith("todo_")))).sort(((e,t)=>{const r=R[e.entity]||e.entity,a=R[t.entity]||t.entity,s=["Start","Stop","Erstellen","Bearbeiten","L\xf6schen"],n=s.indexOf(r),o=s.indexOf(a);return-1!==n&&-1!==o?n-o:-1!==n?-1:-1!==o?1:r.localeCompare(a)}));return(0,w.jsxs)("div",{className:"mt-3",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between pl-6 border-l-2 border-blue-300 dark:border-blue-600",children:[(0,w.jsxs)("span",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:["\u2514 ",o]}),(0,w.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,w.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:s,onChange:()=>{const e=[...S.permissions];e[a]=(0,u.A)((0,u.A)({},t),{},{accessLevel:s?"none":"both"}),z((0,u.A)((0,u.A)({},S),{},{permissions:e}))}}),(0,w.jsx)("div",{className:"relative w-11 h-6 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700"})]})]}),l.map(((e,t)=>{const r=S.permissions.indexOf(e),a="both"===e.accessLevel,s=R[e.entity]||e.entity;return(0,w.jsxs)("div",{className:"flex items-center justify-between mt-2 pl-12 border-l-2 border-gray-300 dark:border-gray-600",children:[(0,w.jsxs)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["\u2514 ",s]}),(0,w.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,w.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:a,onChange:()=>{const t=[...S.permissions];t[r]=(0,u.A)((0,u.A)({},e),{},{accessLevel:a?"none":"both"}),z((0,u.A)((0,u.A)({},S),{},{permissions:t}))}}),(0,w.jsx)("div",{className:"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700"})]})]},"button-permission-desktop-".concat(e.entity,"-").concat(t))}))]},"table-permission-desktop-".concat(n,"-").concat(r))})),S.permissions.filter((t=>"button"===t.entityType&&U[t.entity]===e.entity&&!G[t.entity])).sort(((e,t)=>{const r=R[e.entity]||e.entity,a=R[t.entity]||t.entity;return r.localeCompare(a)})).map(((e,t)=>{const r=S.permissions.indexOf(e),a="both"===e.accessLevel,s=R[e.entity]||e.entity;return(0,w.jsxs)("div",{className:"flex items-center justify-between mt-2 pl-6 border-l-2 border-gray-300 dark:border-gray-600",children:[(0,w.jsxs)("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:["\u2514 ",s]}),(0,w.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,w.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:a,onChange:()=>{const t=[...S.permissions];t[r]=(0,u.A)((0,u.A)({},e),{},{accessLevel:a?"none":"both"}),z((0,u.A)((0,u.A)({},S),{},{permissions:t}))}}),(0,w.jsx)("div",{className:"relative w-9 h-5 bg-gray-200 dark:bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[1px] after:start-[1px] after:bg-white after:border-gray-300 dark:after:border-gray-600 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600 dark:peer-checked:bg-blue-700"})]})]},"button-permission-desktop-".concat(e.entity,"-").concat(t))}))]},"permission-page-desktop-".concat(e.entity,"-").concat(t))}))})]}),(0,w.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,w.jsx)("button",{type:"button",onClick:()=>d(!1),className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:"Abbrechen",children:(0,w.jsx)(p.A,{className:"h-5 w-5"})}),(0,w.jsx)("button",{type:"submit",className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-blue-700 dark:hover:bg-blue-800 transition-colors",title:c?"Aktualisieren":"Erstellen",children:(0,w.jsx)(f.A,{className:"h-5 w-5"})})]})]})})]})]})})]})},K=["title","titleId"];function Y(e,t){let{title:r,titleId:s}=e,n=(0,i.A)(e,K);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const $=a.forwardRef(Y);var Q=r(6238);const X=["title","titleId"];function ee(e,t){let{title:r,titleId:s}=e,n=(0,i.A)(e,X);return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const te=a.forwardRef(ee);var re=r(3315),ae=r(8673),se=r(2395),ne=r(1816),oe=r(2672);const le=e=>{let{isOpen:t,onClose:r,onSuccess:n}=e;const{t:o}=(0,s.Bd)(),[l,i]=(0,a.useState)({name:"",displayName:"",domain:""}),[d,c]=(0,a.useState)(!1),[m,x]=(0,a.useState)({}),[b,h]=(0,a.useState)(window.innerWidth<640),[y,v]=(0,a.useState)(window.innerWidth>1070),{openSidepane:N,closeSidepane:A}=(0,j.N)(),{showMessage:R}=(0,k.A)(),{fetchCurrentUser:S}=(0,oe.As)();(0,a.useEffect)((()=>{const e=()=>{h(window.innerWidth<640),v(window.innerWidth>1070)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,a.useEffect)((()=>(t?N():A(),()=>{A()})),[t,N,A]);const z=e=>{const{name:t,value:r}=e.target;i((e=>(0,u.A)((0,u.A)({},e),{},{[t]:r}))),m[t]&&x((e=>(0,u.A)((0,u.A)({},e),{},{[t]:""})))},_=async e=>{if(e.preventDefault(),(()=>{const e={};return l.name.trim()||(e.name=o("organization.create.nameRequired")),l.displayName.trim()||(e.displayName=o("organization.create.displayNameRequired")),x(e),0===Object.keys(e).length})())try{c(!0),await ae.h.createOrganization(l),x({}),R(o("organization.create.createSuccess"),"success"),await S(),i({name:"",displayName:"",domain:""}),r(),n&&n()}catch(s){var t,a;const e=(null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||o("organization.create.createError");R(e,"error"),x({submit:e})}finally{c(!1)}else R(o("joinRequest.fillRequired"),"error")},C=()=>{i({name:"",displayName:"",domain:""}),x({}),r()};return b?(0,w.jsxs)(g.lG,{open:t,onClose:C,className:"relative z-50",children:[(0,w.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,w.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,w.jsxs)(g.lG.Panel,{className:"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[(0,w.jsx)(g.lG.Title,{className:"text-lg font-semibold dark:text-white",children:o("organization.create.title")}),(0,w.jsx)("button",{onClick:C,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,w.jsx)(p.A,{className:"h-6 w-6"})})]}),(0,w.jsxs)("form",{onSubmit:_,className:"p-4",children:[m.submit&&(0,w.jsx)("div",{className:"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded",children:m.submit}),(0,w.jsxs)("div",{className:"space-y-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:o("organization.create.name")}),(0,w.jsx)("input",{type:"text",id:"name",name:"name",value:l.name,onChange:z,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ".concat(m.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),m.name&&(0,w.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.name})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:o("organization.create.displayName")}),(0,w.jsx)("input",{type:"text",id:"displayName",name:"displayName",value:l.displayName,onChange:z,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ".concat(m.displayName?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),m.displayName&&(0,w.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.displayName})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"domain",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:o("organization.create.domain")}),(0,w.jsx)("input",{type:"text",id:"domain",name:"domain",value:l.domain,onChange:z,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2"})]})]}),(0,w.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,w.jsx)("button",{type:"button",onClick:C,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:o("joinRequest.cancel"),children:(0,w.jsx)(p.A,{className:"h-5 w-5"})}),(0,w.jsx)("button",{type:"submit",disabled:d,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",title:o(d?"organization.create.creating":"organization.create.createButton"),children:d?(0,w.jsx)(ne.A,{className:"h-5 w-5 animate-spin"}):(0,w.jsx)(f.A,{className:"h-5 w-5"})})]})]})]})})]}):(0,w.jsxs)(w.Fragment,{children:[t&&!y&&(0,w.jsx)("div",{className:"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40","aria-hidden":"true",onClick:C,style:{opacity:t?1:0,transition:"opacity 300ms ease-out"}}),(0,w.jsxs)("div",{className:"fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ".concat(t?"translate-x-0":"translate-x-full"),style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",pointerEvents:t?"auto":"none"},"aria-hidden":!t,role:"dialog","aria-modal":t,children:[(0,w.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0",children:[(0,w.jsx)("h2",{className:"text-lg font-semibold dark:text-white",children:o("organization.create.title")}),(0,w.jsx)("button",{onClick:C,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,w.jsx)(p.A,{className:"h-6 w-6"})})]}),(0,w.jsxs)("div",{className:"p-4 overflow-y-auto flex-1 min-h-0",children:[m.submit&&(0,w.jsx)("div",{className:"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded",children:m.submit}),(0,w.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:o("organization.create.name")}),(0,w.jsx)("input",{type:"text",id:"name",name:"name",value:l.name,onChange:z,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ".concat(m.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),m.name&&(0,w.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.name})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:o("organization.create.displayName")}),(0,w.jsx)("input",{type:"text",id:"displayName",name:"displayName",value:l.displayName,onChange:z,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ".concat(m.displayName?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),m.displayName&&(0,w.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.displayName})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"domain",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:o("organization.create.domain")}),(0,w.jsx)("input",{type:"text",id:"domain",name:"domain",value:l.domain,onChange:z,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2"})]}),(0,w.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,w.jsx)("button",{type:"button",onClick:C,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:o("common.cancel"),children:(0,w.jsx)(p.A,{className:"h-5 w-5"})}),(0,w.jsx)("button",{type:"submit",disabled:d,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",title:o(d?"organization.create.creating":"organization.create.createButton"),children:d?(0,w.jsx)(ne.A,{className:"h-5 w-5 animate-spin"}):(0,w.jsx)(f.A,{className:"h-5 w-5"})})]})]})]})]})]})},ie=e=>{let{isOpen:t,onClose:r,onSuccess:n}=e;const{t:o}=(0,s.Bd)(),[l,i]=(0,a.useState)({organizationName:"",message:""}),[d,c]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[b,h]=(0,a.useState)({}),[y,v]=(0,a.useState)(window.innerWidth<640),[N,A]=(0,a.useState)(window.innerWidth>1070),{openSidepane:R,closeSidepane:S}=(0,j.N)(),[z,_]=(0,a.useState)([]),[C,L]=(0,a.useState)(!1),[E,q]=(0,a.useState)(null),F=(0,a.useRef)(null),B=(0,a.useRef)(null),{showMessage:I}=(0,k.A)();(0,a.useEffect)((()=>{const e=()=>{v(window.innerWidth<640),A(window.innerWidth>1070)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,a.useEffect)((()=>(t?R():S(),()=>{S()})),[t,R,S]),(0,a.useEffect)((()=>{const e=e=>{B.current&&!B.current.contains(e.target)&&L(!1)};return C&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[C]);const T=e=>{const t=e.target.value;i((e=>(0,u.A)((0,u.A)({},e),{},{organizationName:t}))),q(null),b.organizationName&&h((e=>(0,u.A)((0,u.A)({},e),{},{organizationName:""}))),F.current&&clearTimeout(F.current),F.current=setTimeout((()=>{(async e=>{if(e.length<2)return _([]),void L(!1);try{x(!0);const t=await ae.h.searchOrganizations(e);_(t),L(!0)}catch(t){console.error("Fehler bei der Organisationen-Suche:",t),_([])}finally{x(!1)}})(t)}),300)},O=e=>{q(e),i((t=>(0,u.A)((0,u.A)({},t),{},{organizationName:e.name}))),L(!1),_([])},D=e=>{i((t=>(0,u.A)((0,u.A)({},t),{},{message:e.target.value}))),b.message&&h((e=>(0,u.A)((0,u.A)({},e),{},{message:""})))},M=async e=>{if(e.preventDefault(),(()=>{const e={};return l.organizationName.trim()?E||(e.organizationName=o("organization.join.selectFromList")):e.organizationName=o("organization.join.nameRequired"),h(e),0===Object.keys(e).length})())try{c(!0),await ae.h.createJoinRequest(l),h({}),I(o("organization.join.sendSuccess"),"success"),i({organizationName:"",message:""}),q(null),_([]),r(),n&&n()}catch(s){var t,a;const e=(null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||o("organization.join.sendError");I(e,"error"),h({submit:e})}finally{c(!1)}else I(o("joinRequest.fillRequired"),"error")},U=()=>{i({organizationName:"",message:""}),q(null),_([]),h({}),L(!1),F.current&&clearTimeout(F.current),r()};return y?(0,w.jsxs)(g.lG,{open:t,onClose:U,className:"relative z-50",children:[(0,w.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,w.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,w.jsxs)(g.lG.Panel,{className:"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[(0,w.jsx)(g.lG.Title,{className:"text-lg font-semibold dark:text-white",children:o("organization.join.title")}),(0,w.jsx)("button",{onClick:U,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,w.jsx)(p.A,{className:"h-6 w-6"})})]}),(0,w.jsxs)("form",{onSubmit:M,className:"p-4",children:[b.submit&&(0,w.jsx)("div",{className:"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded",children:b.submit}),(0,w.jsxs)("div",{className:"space-y-4",children:[(0,w.jsxs)("div",{className:"relative",ref:B,children:[(0,w.jsx)("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:o("organization.join.search")}),(0,w.jsx)("input",{type:"text",id:"organizationName",name:"organizationName",value:l.organizationName,onChange:T,placeholder:o("organization.join.searchPlaceholder"),className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ".concat(b.organizationName?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),b.organizationName&&(0,w.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.organizationName}),C&&(z.length>0||m)&&(0,w.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto",children:m?(0,w.jsx)("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400",children:o("organization.join.searching")}):z.length>0?z.map((e=>(0,w.jsxs)("button",{type:"button",onClick:()=>O(e),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 focus:bg-gray-100 dark:focus:bg-gray-700 focus:outline-none",children:[(0,w.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.displayName||e.name}),e.displayName&&(0,w.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.name})]},e.id))):(0,w.jsx)("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400",children:o("organization.join.noOrganizations")})})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:o("organization.join.message")}),(0,w.jsx)("textarea",{id:"message",name:"message",value:l.message||"",onChange:D,rows:3,placeholder:o("organization.join.messagePlaceholder"),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2"})]})]}),(0,w.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,w.jsx)("button",{type:"button",onClick:U,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:o("joinRequest.cancel"),children:(0,w.jsx)(p.A,{className:"h-5 w-5"})}),(0,w.jsx)("button",{type:"submit",disabled:d,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",title:o(d?"organization.join.sending":"organization.join.send"),children:d?(0,w.jsx)(ne.A,{className:"h-5 w-5 animate-spin"}):(0,w.jsx)(f.A,{className:"h-5 w-5"})})]})]})]})})]}):(0,w.jsxs)(w.Fragment,{children:[t&&!N&&(0,w.jsx)("div",{className:"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40","aria-hidden":"true",onClick:U,style:{opacity:t?1:0,transition:"opacity 300ms ease-out"}}),(0,w.jsxs)("div",{className:"fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ".concat(t?"translate-x-0":"translate-x-full"),style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",pointerEvents:t?"auto":"none"},"aria-hidden":!t,role:"dialog","aria-modal":t,children:[(0,w.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0",children:[(0,w.jsx)("h2",{className:"text-lg font-semibold dark:text-white",children:o("organization.join.title")}),(0,w.jsx)("button",{onClick:U,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,w.jsx)(p.A,{className:"h-6 w-6"})})]}),(0,w.jsxs)("div",{className:"p-4 overflow-y-auto flex-1 min-h-0",children:[b.submit&&(0,w.jsx)("div",{className:"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded",children:b.submit}),(0,w.jsxs)("form",{onSubmit:M,className:"space-y-4",children:[(0,w.jsxs)("div",{className:"relative",ref:B,children:[(0,w.jsx)("label",{htmlFor:"organizationName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:o("organization.join.search")}),(0,w.jsx)("input",{type:"text",id:"organizationName",name:"organizationName",value:l.organizationName,onChange:T,placeholder:o("organization.join.searchPlaceholder"),className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ".concat(b.organizationName?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),b.organizationName&&(0,w.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.organizationName}),C&&(z.length>0||m)&&(0,w.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-auto",children:m?(0,w.jsx)("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400",children:o("organization.join.searching")}):z.length>0?z.map((e=>(0,w.jsxs)("button",{type:"button",onClick:()=>O(e),className:"w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 focus:bg-gray-100 dark:focus:bg-gray-700 focus:outline-none",children:[(0,w.jsx)("div",{className:"font-medium text-gray-900 dark:text-white",children:e.displayName||e.name}),e.displayName&&(0,w.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.name})]},e.id))):(0,w.jsx)("div",{className:"p-3 text-center text-gray-500 dark:text-gray-400",children:o("organization.join.noOrganizations")})})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:o("organization.join.message")}),(0,w.jsx)("textarea",{id:"message",name:"message",value:l.message||"",onChange:D,rows:3,placeholder:o("organization.join.messagePlaceholder"),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2"})]}),(0,w.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,w.jsx)("button",{type:"button",onClick:U,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:o("common.cancel"),children:(0,w.jsx)(p.A,{className:"h-5 w-5"})}),(0,w.jsx)("button",{type:"submit",disabled:d,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",title:o(d?"organization.join.sending":"organization.join.send"),children:d?(0,w.jsx)(ne.A,{className:"h-5 w-5 animate-spin"}):(0,w.jsx)(f.A,{className:"h-5 w-5"})})]})]})]})]})]})};var de=r(5648);const ce=e=>{let{isOpen:t,onClose:r,onSuccess:n,organization:o}=e;const{t:l}=(0,s.Bd)(),[i,d]=(0,a.useState)({displayName:"",domain:"",logo:"",settings:{}}),[c,m]=(0,a.useState)(""),[x,b]=(0,a.useState)(!1),[h,y]=(0,a.useState)({}),[v,N]=(0,a.useState)(window.innerWidth<640),[A,R]=(0,a.useState)(window.innerWidth>1070),{openSidepane:S,closeSidepane:z}=(0,j.N)(),{showMessage:_}=(0,k.A)(),{organizationLanguage:C,setOrganizationLanguage:L}=(0,de.o)(),[E,q]=(0,a.useState)(""),[F,B]=(0,a.useState)(!1),I=[{code:"CO",name:l("countries.CO")},{code:"CH",name:l("countries.CH")},{code:"DE",name:l("countries.DE")},{code:"AT",name:l("countries.AT")}];(0,a.useEffect)((()=>{if(t&&o){const e=o.settings||{};d({displayName:o.displayName||"",domain:o.domain||"",logo:o.logo||"",settings:e}),m(e.country||"");(async()=>{try{const e=await ae.h.getOrganizationLanguage();q(e.language||"")}catch(e){console.error("Fehler beim Laden der Organisation-Sprache:",e),q("")}})()}}),[t,o,l]),(0,a.useEffect)((()=>{const e=()=>{N(window.innerWidth<640),R(window.innerWidth>1070)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,a.useEffect)((()=>(t?S():z(),()=>{z()})),[t,S,z]);const T=e=>{const{name:t,value:r}=e.target;"country"===t?(m(r),d((e=>(0,u.A)((0,u.A)({},e),{},{settings:(0,u.A)((0,u.A)({},e.settings||{}),r?{country:r}:{})})))):d((e=>(0,u.A)((0,u.A)({},e),{},{[t]:r}))),h[t]&&y((e=>(0,u.A)((0,u.A)({},e),{},{[t]:""})))},O=async e=>{e.preventDefault();try{b(!0),y({}),await ae.h.updateOrganization(i),_(l("organization.updateSuccess"),"success"),r(),n&&n()}catch(s){var t,a;const e=(null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||l("organization.updateError");_(e,"error"),y({submit:e})}finally{b(!1)}},D=()=>{if(o){const e=o.settings||{};d({displayName:o.displayName||"",domain:o.domain||"",logo:o.logo||"",settings:e}),m(e.country||"")}y({}),r()};return v?(0,w.jsxs)(g.lG,{open:t,onClose:D,className:"relative z-50",children:[(0,w.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,w.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,w.jsxs)(g.lG.Panel,{className:"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[(0,w.jsx)(g.lG.Title,{className:"text-lg font-semibold dark:text-white",children:l("organization.edit.title")}),(0,w.jsx)("button",{onClick:D,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,w.jsx)(p.A,{className:"h-6 w-6"})})]}),(0,w.jsxs)("form",{onSubmit:O,className:"p-4",children:[h.submit&&(0,w.jsx)("div",{className:"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded",children:h.submit}),(0,w.jsxs)("div",{className:"space-y-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l("organization.displayName")}),(0,w.jsx)("input",{type:"text",id:"displayName",name:"displayName",value:i.displayName||"",onChange:T,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ".concat(h.displayName?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),h.displayName&&(0,w.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.displayName})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"domain",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l("organization.domain")}),(0,w.jsx)("input",{type:"text",id:"domain",name:"domain",value:i.domain||"",onChange:T,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2"})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"logo",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l("organization.logoUrl")}),(0,w.jsx)("input",{type:"text",id:"logo",name:"logo",value:i.logo||"",onChange:T,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2"})]}),(0,w.jsxs)("div",{className:"border-t pt-4",children:[(0,w.jsx)("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l("organization.country")}),(0,w.jsxs)("select",{id:"country",name:"country",value:c,onChange:T,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2",children:[(0,w.jsx)("option",{value:"",children:l("organization.selectCountry")}),I.map((e=>(0,w.jsx)("option",{value:e.code,children:e.name},e.code)))]})]}),(0,w.jsxs)("div",{className:"border-t pt-4",children:[(0,w.jsx)("label",{htmlFor:"organizationLanguage",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l("organization.language")}),(0,w.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:l("organization.languageDescription")}),(0,w.jsxs)("select",{id:"organizationLanguage",value:E||C||"",onChange:async e=>{const t=e.target.value;if(q(t),t&&t!==C){B(!0);try{await L(t),_(l("common.save"),"success")}catch(r){console.error("Fehler beim Speichern der Organisation-Sprache:",r),_(l("worktime.messages.orgLanguageError"),"error")}finally{B(!1)}}},disabled:F||x,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed",children:[(0,w.jsxs)("option",{value:"",children:[l("settings.useOrganizationLanguage")," (",l("worktime.language.fallback"),": ",l("worktime.language.german"),")"]}),(0,w.jsx)("option",{value:"de",children:l("worktime.language.german")}),(0,w.jsx)("option",{value:"es",children:l("worktime.language.spanish")}),(0,w.jsx)("option",{value:"en",children:l("worktime.language.english")})]})]})]}),(0,w.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,w.jsx)("button",{type:"button",onClick:D,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:l("common.cancel"),children:(0,w.jsx)(p.A,{className:"h-5 w-5"})}),(0,w.jsx)("button",{type:"submit",disabled:x,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",title:l(x?"organization.saving":"common.save"),children:x?(0,w.jsx)(ne.A,{className:"h-5 w-5 animate-spin"}):(0,w.jsx)(f.A,{className:"h-5 w-5"})})]})]})]})})]}):(0,w.jsxs)(w.Fragment,{children:[t&&!A&&(0,w.jsx)("div",{className:"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40","aria-hidden":"true",onClick:D,style:{opacity:t?1:0,transition:"opacity 300ms ease-out"}}),(0,w.jsxs)("div",{className:"fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ".concat(t?"translate-x-0":"translate-x-full"),style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",pointerEvents:t?"auto":"none"},"aria-hidden":!t,role:"dialog","aria-modal":t,children:[(0,w.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0",children:[(0,w.jsx)("h2",{className:"text-lg font-semibold dark:text-white",children:l("organization.edit.title")}),(0,w.jsx)("button",{onClick:D,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,w.jsx)(p.A,{className:"h-6 w-6"})})]}),(0,w.jsxs)("div",{className:"p-4 overflow-y-auto flex-1 min-h-0",children:[h.submit&&(0,w.jsx)("div",{className:"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded",children:h.submit}),(0,w.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l("organization.displayName")}),(0,w.jsx)("input",{type:"text",id:"displayName",name:"displayName",value:i.displayName||"",onChange:T,className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ".concat(h.displayName?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600")}),h.displayName&&(0,w.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.displayName})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"domain",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l("organization.domain")}),(0,w.jsx)("input",{type:"text",id:"domain",name:"domain",value:i.domain||"",onChange:T,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2"})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"logo",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l("organization.logoUrl")}),(0,w.jsx)("input",{type:"text",id:"logo",name:"logo",value:i.logo||"",onChange:T,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2"})]}),(0,w.jsxs)("div",{className:"border-t pt-4",children:[(0,w.jsx)("label",{htmlFor:"country",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l("organization.country")}),(0,w.jsxs)("select",{id:"country",name:"country",value:c,onChange:T,className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2",children:[(0,w.jsx)("option",{value:"",children:l("organization.selectCountry")}),I.map((e=>(0,w.jsx)("option",{value:e.code,children:e.name},e.code)))]})]}),(0,w.jsxs)("div",{className:"border-t pt-4",children:[(0,w.jsx)("label",{htmlFor:"organizationLanguage",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l("organization.language")}),(0,w.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:l("organization.languageDescription")}),(0,w.jsxs)("select",{id:"organizationLanguage",value:E||C||"",onChange:async e=>{const t=e.target.value;if(q(t),t&&t!==C){B(!0);try{await L(t),_(l("common.save"),"success")}catch(r){console.error("Fehler beim Speichern der Organisation-Sprache:",r),_(l("worktime.messages.orgLanguageError"),"error")}finally{B(!1)}}},disabled:F||x,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed",children:[(0,w.jsxs)("option",{value:"",children:[l("settings.useOrganizationLanguage")," (",l("worktime.language.fallback"),": ",l("worktime.language.german"),")"]}),(0,w.jsx)("option",{value:"de",children:l("worktime.language.german")}),(0,w.jsx)("option",{value:"es",children:l("worktime.language.spanish")}),(0,w.jsx)("option",{value:"en",children:l("worktime.language.english")})]})]}),(0,w.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,w.jsx)("button",{type:"button",onClick:D,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:l("common.cancel"),children:(0,w.jsx)(p.A,{className:"h-5 w-5"})}),(0,w.jsx)("button",{type:"submit",disabled:x,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:bg-blue-700 dark:hover:bg-blue-800 disabled:opacity-50 disabled:cursor-not-allowed",title:l(x?"organization.saving":"common.save"),children:x?(0,w.jsx)(ne.A,{className:"h-5 w-5 animate-spin"}):(0,w.jsx)(f.A,{className:"h-5 w-5"})})]})]})]})]})]})},me=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"approved":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},ue=(e,t)=>{switch(e){case"pending":return t("joinRequestsList.status.pending");case"approved":return t("joinRequestsList.status.approved");case"rejected":return t("joinRequestsList.status.rejected");case"withdrawn":return t("joinRequestsList.status.withdrawn");default:return e}},ge="my-join-requests-table",xe=()=>{const{t:e}=(0,s.Bd)(),[t,r]=(0,a.useState)([]),[n,o]=(0,a.useState)(!0),[l,i]=(0,a.useState)(null),[d,c]=(0,a.useState)(!1),[m,g]=(0,a.useState)([]),[x,b]=(0,a.useState)([]),[h,y]=(0,a.useState)(""),{showMessage:f}=(0,k.A)(),v=(0,a.useRef)(!0),[j,N]=(0,a.useState)(null),[A,R]=(0,a.useState)("Alle"),[S,z]=(0,a.useState)(null);(0,a.useEffect)((()=>()=>{v.current=!1}),[]),(0,a.useEffect)((()=>{console.log("MyJoinRequestsList: useEffect called - component mounted"),console.log("MyJoinRequestsList: Resetting state on mount to prevent data leaks"),r([]),i(null),o(!0);let t=!0;return(async()=>{if(!t)return void console.log("MyJoinRequestsList: Component unmounted, skipping fetch");console.log("MyJoinRequestsList: Starting fetch");const a=setTimeout((()=>{t&&(console.error("Request timeout after 10 seconds"),i("Anfrage dauert zu lange. Bitte Seite neu laden."),o(!1))}),1e4);try{console.log("MyJoinRequestsList: Setting loading to true"),o(!0),i(null),console.log("MyJoinRequestsList: Fetching my join requests from:",C.Sn.ORGANIZATIONS.MY_JOIN_REQUESTS);const e=await ae.h.getMyJoinRequests();if(console.log("MyJoinRequestsList: Received requests:",e),console.log("MyJoinRequestsList: Requests type:",typeof e),console.log("MyJoinRequestsList: Requests isArray:",Array.isArray(e)),console.log("MyJoinRequestsList: Requests length:",(null===e||void 0===e?void 0:e.length)||0),!Array.isArray(e))throw console.error("\u274c MyJoinRequestsList: Response is not an array!",e),new Error("Ung\xfcltige Antwort vom Server");clearTimeout(a),t?(console.log("MyJoinRequestsList: Setting joinRequests state"),r(e),console.log("MyJoinRequestsList: State updated with",e.length,"requests")):(console.log("MyJoinRequestsList: Component was unmounted, but setting state anyway"),r(e))}catch(c){var s,n,l,d;if(clearTimeout(a),!t)return void console.log("MyJoinRequestsList: Component unmounted during error, skipping error handling");console.error("MyJoinRequestsList: Error fetching my join requests:",c),console.error("MyJoinRequestsList: Error response:",c.response),console.error("MyJoinRequestsList: Error status:",null===(s=c.response)||void 0===s?void 0:s.status),console.error("MyJoinRequestsList: Error data:",null===(n=c.response)||void 0===n?void 0:n.data);const r=(null===(l=c.response)||void 0===l||null===(d=l.data)||void 0===d?void 0:d.message)||c.message||e("myJoinRequests.loadError");i(r),setTimeout((()=>{f(r,"error")}),0)}finally{t?(console.log("MyJoinRequestsList: Setting loading to false"),o(!1)):(console.log("MyJoinRequestsList: Component unmounted, but setting loading to false anyway"),o(!1))}})(),()=>{console.log("MyJoinRequestsList: useEffect cleanup - component unmounting"),t=!1,v.current=!1,r([]),i(null)}}),[]);const F=e=>new Date(e).toLocaleDateString("de-DE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),B=(e,t)=>{g(e),b(t)},I=()=>{g([]),b([]),R(""),z(null)},T=()=>m.length;(0,a.useEffect)((()=>{(async()=>{try{const e=await L.A.get(C.Sn.SAVED_FILTERS.BY_TABLE(ge)),t=e.data.find((e=>"Alle"===e.name));t&&(R("Alle"),z(t.id),B(t.conditions,t.operators))}catch(l){console.error("Fehler beim Setzen des initialen Filters:",l)}})()}),[]),(0,a.useEffect)((()=>{(async()=>{try{if(!localStorage.getItem("token"))return void console.error("Nicht authentifiziert");const e=(await L.A.get(C.Sn.SAVED_FILTERS.BY_TABLE(ge))).data||[];if(!e.some((e=>"Alle"===e.name))){const e={tableId:ge,name:"Alle",conditions:[],operators:[]};await L.A.post(C.Sn.SAVED_FILTERS.BASE,e),console.log("Alle-Filter f\xfcr Meine Beitrittsanfragen erstellt")}}catch(l){console.error("Fehler beim Erstellen der Standard-Filter:",l)}})()}),[]);const O=(0,a.useMemo)((()=>{let e=[...t];if(h){const t=h.toLowerCase();e=e.filter((e=>{var r;const a=(e.organization.displayName||e.organization.name||"").toLowerCase(),s=(null===(r=e.message)||void 0===r?void 0:r.toLowerCase())||"";return a.includes(t)||s.includes(t)}))}return m.length>0&&(e=m.reduce(((e,t,r)=>{if(!t.column||null===t.value||""===t.value)return e;const a=t.operator,s=t.value;return e.filter((e=>{var r;switch(t.column){case"organization":const t=(e.organization.displayName||e.organization.name||"").toLowerCase(),n=String(s).toLowerCase();return"contains"===a?t.includes(n):"equals"===a?t===n:"startsWith"===a&&t.startsWith(n);case"message":const o=(null===(r=e.message)||void 0===r?void 0:r.toLowerCase())||"",l=String(s).toLowerCase();return"contains"===a?o.includes(l):"equals"===a?o===l:"startsWith"===a&&o.startsWith(l);case"status":return"equals"===a&&e.status===s;default:return!0}}))}),e)),e}),[t,h,m,x]);return(0,w.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:e("myJoinRequests.title")}),(0,w.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,w.jsx)("input",{type:"text",placeholder:e("common.search")||"Suchen...",className:"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:h,onChange:e=>y(e.target.value)}),(0,w.jsxs)("button",{className:"p-2 rounded-md border ".concat(T()>0?"border-blue-300 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"," relative"),onClick:()=>c(!d),title:e("common.filter"),children:[(0,w.jsx)(_.A,{className:"h-5 w-5"}),T()>0&&(0,w.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center",children:T()})]})]})]}),d&&(0,w.jsx)("div",{className:"mb-4",children:(0,w.jsx)(E.A,{columns:[{id:"organization",label:e("myJoinRequests.filter.organization")||"Organisation"},{id:"message",label:e("joinRequestsList.filter.message")},{id:"status",label:e("joinRequestsList.status.title")||"Status"}],onApply:B,onReset:I,savedConditions:m,savedOperators:x,tableId:ge})}),(0,w.jsx)(q.A,{tableId:ge,onSelectFilter:B,onReset:I,activeFilterName:A,selectedFilterId:S,onFilterChange:(e,t,r,a)=>{R(e),z(t),B(r,a)},defaultFilterName:"Alle"}),l&&(0,w.jsx)("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded",children:l}),n?(0,w.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,w.jsx)("span",{className:"ml-3 text-gray-700 dark:text-gray-300",children:e("myJoinRequests.loading")})]}):0===t.length?(0,w.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:e("myJoinRequests.noRequests")}):(0,w.jsx)("div",{className:"space-y-4",children:O.map((t=>(0,w.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow",children:(0,w.jsx)("div",{className:"flex items-start justify-between",children:(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.organization.displayName||t.organization.name}),(0,w.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:F(t.createdAt)})]}),(0,w.jsx)("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(me(t.status)),children:ue(t.status,e)})]}),t.message&&(0,w.jsx)("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600",children:(0,w.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[(0,w.jsxs)("span",{className:"font-medium",children:[e("joinRequestsList.filter.message"),":"]})," ",t.message]})}),t.response&&(0,w.jsx)("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-700",children:(0,w.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[(0,w.jsxs)("span",{className:"font-medium",children:[e("joinRequestsList.response"),":"]})," ",t.response]})}),t.processor&&(0,w.jsxs)("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:[e("myJoinRequests.processedBy"),": ",t.processor.firstName," ",t.processor.lastName,t.processedAt&&" - ".concat(F(t.processedAt))]}),"pending"===t.status&&(0,w.jsx)("div",{className:"mt-4 flex items-center gap-2",children:(0,w.jsx)("button",{onClick:()=>(async t=>{if(window.confirm(e("myJoinRequests.confirmWithdraw")))try{N(t),await ae.h.withdrawJoinRequest(t),r((e=>e.map((e=>e.id===t?(0,u.A)((0,u.A)({},e),{},{status:"withdrawn",processedAt:(new Date).toISOString()}):e)))),f(e("myJoinRequests.withdrawSuccess"),"success")}catch(n){var a,s;const t=(null===(a=n.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||e("myJoinRequests.withdrawError");f(t,"error")}finally{N(null)}})(t.id),disabled:j===t.id,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md dark:bg-red-700 dark:hover:bg-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:j===t.id?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ne.A,{className:"h-4 w-4 mr-1 animate-spin"}),e("myJoinRequests.withdrawing")]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(p.A,{className:"h-4 w-4 mr-1"}),e("myJoinRequests.withdraw")]})})})]})})},t.id)))})]})},be=()=>{const[e,t]=(0,a.useState)(null),[r,l]=(0,a.useState)(null),[i,d]=(0,a.useState)(!0),[c,u]=(0,a.useState)(!1),[g,x]=(0,a.useState)(null),[h,y]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!1),[v,j]=(0,a.useState)(!1),{canViewOrganization:N,canManageOrganization:A,loading:R}=(0,n.S)(),{showMessage:z}=(0,k.A)(),{t:_}=(0,s.Bd)(),{refreshOrganization:C}=(0,se.Z)(),L=(0,a.useCallback)((async()=>{try{d(!0),x(null);const e=await ae.h.getCurrentOrganization();t(e);try{u(!0);const e=await ae.h.getOrganizationStats();l(e)}catch(o){console.error("Fehler beim Laden der Statistiken:",o)}finally{u(!1)}}catch(i){var e,r,a;if(404===(null===(e=i.response)||void 0===e?void 0:e.status)&&!1===(null===(r=i.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.hasOrganization))x(_("organization.notFound")),t(null),z(_("organization.notFound"),"info");else{var s,n;const e=(null===(s=i.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.message)||_("organization.loadError");x(e),z(e,"error")}}finally{d(!1)}}),[]),E=(0,a.useRef)(!1);(0,a.useEffect)((()=>{if(R)return;if(E.current)return;N()?(E.current=!0,L()):(x(_("organization.noPermission")),d(!1),E.current=!0)}),[R]);if(R)return(0,w.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6",children:(0,w.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,w.jsx)("span",{className:"ml-3 text-gray-700 dark:text-gray-300",children:_("common.loadingPermissions")})]})});if(!N())return(0,w.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6",children:(0,w.jsx)("div",{className:"p-4 text-red-600 dark:text-red-400",children:_("organization.noPermission")})});return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"space-y-4",children:[(0,w.jsx)("div",{className:"flex items-center mb-4 sm:mb-4",children:(0,w.jsxs)("div",{className:"flex items-center",children:[(0,w.jsx)("button",{onClick:()=>y(!0),className:"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center",style:{width:"30.19px",height:"30.19px"},title:_("organization.createOrganization"),"aria-label":_("organization.createOrganization"),children:(0,w.jsx)(b.A,{className:"h-4 w-4"})}),(0,w.jsx)("button",{onClick:()=>f(!0),className:"bg-white dark:bg-gray-800 text-blue-600 dark:text-blue-400 p-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-gray-700 border border-blue-200 dark:border-gray-700 shadow-sm flex items-center justify-center ml-2",style:{width:"30.19px",height:"30.19px"},title:_("organization.joinOrganization"),"aria-label":_("organization.joinOrganization"),children:(0,w.jsx)($,{className:"h-4 w-4"})})]})}),i?(0,w.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,w.jsx)("span",{className:"ml-3 text-gray-700 dark:text-gray-300",children:_("common.loadingOrganization")})]}):(0,w.jsxs)(w.Fragment,{children:[g&&(0,w.jsx)("div",{className:"mb-4 p-4 border rounded ".concat(e?"bg-red-100 dark:bg-red-900 border-red-400 dark:border-red-700 text-red-700 dark:text-red-300":"bg-blue-50 dark:bg-blue-900/30 border-blue-400 dark:border-blue-700 text-blue-700 dark:text-blue-300"),children:(0,w.jsxs)("div",{className:"flex items-start",children:[(0,w.jsx)("div",{className:"flex-shrink-0",children:e?(0,w.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"\u26a0\ufe0f"}):(0,w.jsx)(o.A,{className:"h-5 w-5"})}),(0,w.jsxs)("div",{className:"ml-3 flex-1",children:[(0,w.jsx)("p",{className:"font-medium",children:g}),!e&&(0,w.jsx)("p",{className:"mt-2 text-sm",children:_("organization.createOrJoinHint")})]})]})}),e?(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow",children:(0,w.jsx)("div",{className:"flex items-start justify-between",children:(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[(0,w.jsx)(Q.A,{className:"h-5 w-5 mr-2"}),e.displayName||e.name]}),(0,w.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.domain||_("organization.noDomain")})]}),A()&&(0,w.jsx)("button",{onClick:()=>j(!0),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 p-1",title:_("organization.edit.title"),children:(0,w.jsx)(S.A,{className:"h-5 w-5"})})]}),(0,w.jsx)("div",{className:"space-y-3",children:e.subscriptionPlan&&(0,w.jsxs)("div",{children:[(0,w.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[_("organization.subscriptionPlan"),":"]}),(0,w.jsx)("span",{className:"ml-2 text-sm text-gray-900 dark:text-white capitalize",children:e.subscriptionPlan})]})}),r&&(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,w.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:_("organization.statistics")}),c?(0,w.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mr-2"}),(0,w.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:_("common.loadingStatistics")})]}):(0,w.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,w.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow",children:(0,w.jsxs)("div",{className:"flex items-center",children:[(0,w.jsx)("div",{className:"flex-shrink-0 bg-blue-100 dark:bg-blue-900/30 rounded-lg p-3",children:(0,w.jsx)(o.A,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),(0,w.jsxs)("div",{className:"ml-4",children:[(0,w.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:_("organization.users")}),(0,w.jsxs)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:[r.currentUsers," / ",r.maxUsers]}),void 0!==r.utilizationPercent&&(0,w.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[r.utilizationPercent,"% ",_("organization.utilizationPercent")]})]})]})}),(0,w.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow",children:(0,w.jsxs)("div",{className:"flex items-center",children:[(0,w.jsx)("div",{className:"flex-shrink-0 bg-purple-100 dark:bg-purple-900/30 rounded-lg p-3",children:(0,w.jsx)(m,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),(0,w.jsxs)("div",{className:"ml-4",children:[(0,w.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:_("organization.roles")}),(0,w.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r._count.roles})]})]})}),(0,w.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow",children:(0,w.jsxs)("div",{className:"flex items-center",children:[(0,w.jsx)("div",{className:"flex-shrink-0 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg p-3",children:(0,w.jsx)(te,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),(0,w.jsxs)("div",{className:"ml-4",children:[(0,w.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:_("organization.joinRequests")}),(0,w.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r._count.joinRequests})]})]})}),void 0!==r._count.invitations&&(0,w.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow",children:(0,w.jsxs)("div",{className:"flex items-center",children:[(0,w.jsx)("div",{className:"flex-shrink-0 bg-green-100 dark:bg-green-900/30 rounded-lg p-3",children:(0,w.jsx)(te,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),(0,w.jsxs)("div",{className:"ml-4",children:[(0,w.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:_("organization.invitations")}),(0,w.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r._count.invitations})]})]})}),void 0!==r.utilizationPercent&&(0,w.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow",children:(0,w.jsxs)("div",{className:"flex items-center",children:[(0,w.jsx)("div",{className:"flex-shrink-0 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg p-3",children:(0,w.jsx)(re.A,{className:"h-6 w-6 text-indigo-600 dark:text-indigo-400"})}),(0,w.jsxs)("div",{className:"ml-4",children:[(0,w.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:_("organization.utilization")}),(0,w.jsxs)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:[r.utilizationPercent,"%"]}),(0,w.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[r.availableSlots," ",_("organization.availableSlots")]})]})]})})]})]})})]})})})}):(0,w.jsxs)("div",{className:"text-center py-8",children:[(0,w.jsx)(o.A,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500 mb-4"}),(0,w.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:_("organization.notFound")}),(0,w.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:_("organization.createOrJoinHint")})]})]})]}),(0,w.jsx)(xe,{}),(0,w.jsx)(le,{isOpen:h,onClose:()=>y(!1),onSuccess:()=>{L()}}),(0,w.jsx)(ie,{isOpen:p,onClose:()=>f(!1),onSuccess:()=>{L()}}),(0,w.jsx)(ce,{isOpen:v,onClose:()=>j(!1),onSuccess:()=>{L(),C()},organization:e})]})};var he=r(7098);const ye=e=>{let{isOpen:t,onClose:r,joinRequest:n,onSuccess:o}=e;const{t:l}=(0,s.Bd)(),[i,d]=(0,a.useState)("approve"),[c,m]=(0,a.useState)(null),[b,h]=(0,a.useState)(""),[y,v]=(0,a.useState)([]),[N,A]=(0,a.useState)(!1),[R,S]=(0,a.useState)(!1),[z,_]=(0,a.useState)({}),[C,L]=(0,a.useState)(window.innerWidth<640),[E,q]=(0,a.useState)(window.innerWidth>1070),{openSidepane:F,closeSidepane:B}=(0,j.N)(),{showMessage:I}=(0,k.A)();(0,a.useEffect)((()=>{const e=()=>{L(window.innerWidth<640),q(window.innerWidth>1070)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,a.useEffect)((()=>(t?F():B(),()=>{B()})),[t,F,B]),(0,a.useEffect)((()=>{t&&n&&(d("approve"),m(null),h(""),_({}),n.organizationId&&T())}),[t,n]);const T=async()=>{try{A(!0);const e=await x.Zj.getAll();e.data&&Array.isArray(e.data)&&v(e.data)}catch(e){console.error("Fehler beim Laden der Rollen:",e),I(l("joinRequest.loadRolesError"),"error")}finally{A(!1)}},O=async e=>{if(e.preventDefault(),(()=>{const e={};return"approve"!==i||c||(e.roleId=l("joinRequest.selectRoleError")),_(e),0===Object.keys(e).length})()){if(n)try{S(!0);const e={action:i,response:b.trim()||void 0,roleId:"approve"===i&&c||void 0};await ae.h.processJoinRequest(n.id,e),I(l("approve"===i?"joinRequest.approveSuccess":"joinRequest.rejectSuccess"),"success"),d("approve"),m(null),h(""),_({}),r(),o()}catch(s){var t,a;const e=(null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||l("joinRequest.processError");I(e,"error"),_({submit:e})}finally{S(!1)}}else I(l("joinRequest.fillRequired"),"error")},D=()=>{d("approve"),m(null),h(""),_({}),r()};return n?C?(0,w.jsxs)(g.lG,{open:t,onClose:D,className:"relative z-50",children:[(0,w.jsx)("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),(0,w.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:(0,w.jsxs)(g.lG.Panel,{className:"mx-auto max-w-lg w-full bg-white dark:bg-gray-800 rounded-lg shadow-xl",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700",children:[(0,w.jsx)(g.lG.Title,{className:"text-lg font-semibold dark:text-white",children:l("joinRequest.title")}),(0,w.jsx)("button",{onClick:D,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,w.jsx)(p.A,{className:"h-6 w-6"})})]}),(0,w.jsxs)("form",{onSubmit:O,className:"p-4",children:[z.submit&&(0,w.jsx)("div",{className:"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded",children:z.submit}),(0,w.jsxs)("div",{className:"space-y-4",children:[(0,w.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600",children:[(0,w.jsxs)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[l("joinRequest.applicant"),":"]}),(0,w.jsxs)("p",{className:"text-sm text-gray-900 dark:text-white",children:[n.requester.firstName," ",n.requester.lastName]}),(0,w.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:n.requester.email}),n.message&&(0,w.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[(0,w.jsxs)("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:[l("joinRequest.message"),":"]}),(0,w.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:n.message})]})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l("joinRequest.actionRequired")}),(0,w.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,w.jsxs)("label",{className:"flex items-center",children:[(0,w.jsx)("input",{type:"radio",value:"approve",checked:"approve"===i,onChange:e=>{d(e.target.value),_({})},className:"mr-2 text-blue-600 focus:ring-blue-500"}),(0,w.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:l("joinRequest.approve")})]}),(0,w.jsxs)("label",{className:"flex items-center",children:[(0,w.jsx)("input",{type:"radio",value:"reject",checked:"reject"===i,onChange:e=>{d(e.target.value),_({})},className:"mr-2 text-red-600 focus:ring-red-500"}),(0,w.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:l("joinRequest.reject")})]})]})]}),"approve"===i&&(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"roleId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l("joinRequest.assignRole")}),N?(0,w.jsxs)("div",{className:"flex items-center py-2",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),(0,w.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:l("joinRequest.loadingRoles")})]}):(0,w.jsxs)("select",{id:"roleId",value:c||"",onChange:e=>{m(Number(e.target.value)||null),z.roleId&&_((e=>(0,u.A)((0,u.A)({},e),{},{roleId:""})))},className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ".concat(z.roleId?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"),children:[(0,w.jsx)("option",{value:"",children:l("joinRequest.selectRole")}),y.map((e=>(0,w.jsxs)("option",{value:e.id,children:[e.name," ",e.description?"- ".concat(e.description):""]},e.id)))]}),z.roleId&&(0,w.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:z.roleId})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"response",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l("joinRequest.response")}),(0,w.jsx)("textarea",{id:"response",value:b,onChange:e=>h(e.target.value),rows:3,placeholder:l("joinRequest.addOptional",{type:l("approve"===i?"joinRequest.welcomeMessage":"joinRequest.rejectionReason")}),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2"})]})]}),(0,w.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,w.jsx)("button",{type:"button",onClick:D,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:l("joinRequest.cancel"),children:(0,w.jsx)(p.A,{className:"h-5 w-5"})}),(0,w.jsx)("button",{type:"submit",disabled:R,className:"p-2 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors ".concat("approve"===i?"bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:ring-green-500":"bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 focus:ring-red-500"),title:l(R?"approve"===i?"joinRequest.approving":"joinRequest.rejecting":"approve"===i?"joinRequest.approve":"joinRequest.reject"),children:R?(0,w.jsx)(ne.A,{className:"h-5 w-5 animate-spin"}):"approve"===i?(0,w.jsx)(f.A,{className:"h-5 w-5"}):(0,w.jsx)(he.A,{className:"h-5 w-5"})})]})]})]})})]}):(0,w.jsxs)(w.Fragment,{children:[t&&!E&&(0,w.jsx)("div",{className:"fixed inset-0 bg-black/10 transition-opacity sidepane-overlay sidepane-backdrop z-40","aria-hidden":"true",onClick:D,style:{opacity:t?1:0,transition:"opacity 300ms ease-out"}}),(0,w.jsxs)("div",{className:"fixed top-16 bottom-0 right-0 max-w-sm w-full bg-white dark:bg-gray-800 shadow-xl sidepane-panel sidepane-panel-container transform z-50 flex flex-col ".concat(t?"translate-x-0":"translate-x-full"),style:{transition:"transform 350ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",pointerEvents:t?"auto":"none"},"aria-hidden":!t,role:"dialog","aria-modal":t,children:[(0,w.jsxs)("div",{className:"flex items-center justify-between p-4 border-b dark:border-gray-700 flex-shrink-0",children:[(0,w.jsx)("h2",{className:"text-lg font-semibold dark:text-white",children:l("joinRequest.title")}),(0,w.jsx)("button",{onClick:D,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:(0,w.jsx)(p.A,{className:"h-6 w-6"})})]}),(0,w.jsxs)("div",{className:"p-4 overflow-y-auto flex-1 min-h-0",children:[z.submit&&(0,w.jsx)("div",{className:"mb-4 p-2 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded",children:z.submit}),(0,w.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,w.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600",children:[(0,w.jsxs)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[l("joinRequest.applicant"),":"]}),(0,w.jsxs)("p",{className:"text-sm text-gray-900 dark:text-white",children:[n.requester.firstName," ",n.requester.lastName]}),(0,w.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:n.requester.email}),n.message&&(0,w.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[(0,w.jsxs)("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:[l("joinRequest.message"),":"]}),(0,w.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:n.message})]})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l("joinRequest.actionRequired")}),(0,w.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,w.jsxs)("label",{className:"flex items-center",children:[(0,w.jsx)("input",{type:"radio",value:"approve",checked:"approve"===i,onChange:e=>{d(e.target.value),_({})},className:"mr-2 text-blue-600 focus:ring-blue-500"}),(0,w.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:l("joinRequest.approve")})]}),(0,w.jsxs)("label",{className:"flex items-center",children:[(0,w.jsx)("input",{type:"radio",value:"reject",checked:"reject"===i,onChange:e=>{d(e.target.value),_({})},className:"mr-2 text-red-600 focus:ring-red-500"}),(0,w.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:l("joinRequest.reject")})]})]})]}),"approve"===i&&(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"roleId",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l("joinRequest.assignRole")}),N?(0,w.jsxs)("div",{className:"flex items-center py-2",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),(0,w.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:l("joinRequest.loadingRoles")})]}):(0,w.jsxs)("select",{id:"roleId",value:c||"",onChange:e=>{m(Number(e.target.value)||null),z.roleId&&_((e=>(0,u.A)((0,u.A)({},e),{},{roleId:""})))},className:"mt-1 block w-full rounded-md border shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2 ".concat(z.roleId?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"),children:[(0,w.jsx)("option",{value:"",children:l("joinRequest.selectRole")}),y.map((e=>(0,w.jsxs)("option",{value:e.id,children:[e.name," ",e.description?"- ".concat(e.description):""]},e.id)))]}),z.roleId&&(0,w.jsx)("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:z.roleId})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"response",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:l("joinRequest.response")}),(0,w.jsx)("textarea",{id:"response",value:b,onChange:e=>h(e.target.value),rows:3,placeholder:l("joinRequest.addOptional",{type:l("approve"===i?"joinRequest.welcomeMessage":"joinRequest.rejectionReason")}),className:"mt-1 block w-full rounded-md border border-gray-300 dark:border-gray-600 shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white px-3 py-2"})]}),(0,w.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,w.jsx)("button",{type:"button",onClick:D,className:"p-2 text-gray-700 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",title:l("common.cancel"),children:(0,w.jsx)(p.A,{className:"h-5 w-5"})}),(0,w.jsx)("button",{type:"submit",disabled:R,className:"p-2 text-white rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ".concat("approve"===i?"bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 focus:ring-green-500":"bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 focus:ring-red-500"),title:R?"approve"===i?"Genehmige...":"Lehne ab...":"approve"===i?"Genehmigen":"Ablehnen",children:R?(0,w.jsx)(ne.A,{className:"h-5 w-5 animate-spin"}):"approve"===i?(0,w.jsx)(f.A,{className:"h-5 w-5"}):(0,w.jsx)(he.A,{className:"h-5 w-5"})})]})]})]})]})]}):null},pe=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300";case"approved":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},fe=(e,t)=>{switch(e){case"pending":return t("joinRequestsList.status.pending");case"approved":return t("joinRequestsList.status.approved");case"rejected":return t("joinRequestsList.status.rejected");case"withdrawn":return t("joinRequestsList.status.withdrawn");default:return e}},ke="join-requests-table",ve=()=>{const{t:e}=(0,s.Bd)(),[t,r]=(0,a.useState)([]),[o,l]=(0,a.useState)(!0),[i,d]=(0,a.useState)(null),[c,m]=(0,a.useState)(!1),[u,g]=(0,a.useState)([]),[x,b]=(0,a.useState)([]),[h,y]=(0,a.useState)(""),[p,f]=(0,a.useState)(!1),[v,j]=(0,a.useState)(null),[N,A]=(0,a.useState)("Alle"),[R,z]=(0,a.useState)(null),{canViewJoinRequests:F,canManageJoinRequests:B,loading:I}=(0,n.S)(),{showMessage:T}=(0,k.A)(),O=(0,a.useRef)(!0),D=(0,a.useRef)(!1);(0,a.useEffect)((()=>()=>{O.current=!1}),[]),(0,a.useEffect)((()=>{if(I)return;if(D.current)return;if(!F())return d(e("joinRequestsList.noPermission")),l(!1),void(D.current=!0);D.current=!0;(async()=>{if(O.current)try{l(!0),d(null);const e=await ae.h.getJoinRequests();if(!O.current)return;r(e)}catch(s){var t,a;if(!O.current)return;const r=(null===(t=s.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||e("joinRequestsList.loadError");d(r),setTimeout((()=>{T(r,"error")}),0)}finally{O.current&&l(!1)}})()}),[I]);const M=(e,t)=>{g(e),b(t)},U=()=>{g([]),b([]),A(""),z(null)},G=()=>u.length;(0,a.useEffect)((()=>{(async()=>{try{const e=await L.A.get(C.Sn.SAVED_FILTERS.BY_TABLE(ke)),t=e.data.find((e=>"Alle"===e.name));t&&(A("Alle"),z(t.id),M(t.conditions,t.operators))}catch(i){console.error("Fehler beim Setzen des initialen Filters:",i)}})()}),[]),(0,a.useEffect)((()=>{(async()=>{try{if(!localStorage.getItem("token"))return void console.error("Nicht authentifiziert");const e=(await L.A.get(C.Sn.SAVED_FILTERS.BY_TABLE(ke))).data||[];if(!e.some((e=>"Alle"===e.name))){const e={tableId:ke,name:"Alle",conditions:[],operators:[]};await L.A.post(C.Sn.SAVED_FILTERS.BASE,e),console.log("Alle-Filter f\xfcr Join Requests erstellt")}}catch(i){console.error("Fehler beim Erstellen der Standard-Filter:",i)}})()}),[]);const W=(0,a.useMemo)((()=>{let e=[...t];if(h){const t=h.toLowerCase();e=e.filter((e=>{var r,a;const s="".concat(e.requester.firstName," ").concat(e.requester.lastName).toLowerCase(),n=(null===(r=e.requester.email)||void 0===r?void 0:r.toLowerCase())||"",o=(null===(a=e.message)||void 0===a?void 0:a.toLowerCase())||"";return s.includes(t)||n.includes(t)||o.includes(t)}))}return u.length>0&&(e=u.reduce(((e,t,r)=>{if(!t.column||null===t.value||""===t.value)return e;const a=t.operator,s=t.value;return e.filter((e=>{var r,n;switch(t.column){case"requester":const t="".concat(e.requester.firstName," ").concat(e.requester.lastName).toLowerCase(),o=(null===(r=e.requester.email)||void 0===r?void 0:r.toLowerCase())||"",l=String(s).toLowerCase();return"contains"===a?t.includes(l)||o.includes(l):"equals"===a?t===l||o===l:"startsWith"===a&&(t.startsWith(l)||o.startsWith(l));case"message":const i=(null===(n=e.message)||void 0===n?void 0:n.toLowerCase())||"",d=String(s).toLowerCase();return"contains"===a?i.includes(d):"equals"===a?i===d:"startsWith"===a&&i.startsWith(d);case"status":return"equals"===a&&e.status===s;default:return!0}}))}),e)),e}),[t,h,u,x]);return I?(0,w.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6",children:(0,w.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,w.jsx)("span",{className:"ml-3 text-gray-700 dark:text-gray-300",children:e("joinRequestsList.loadingPermissions")})]})}):F()?(0,w.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 sm:p-6 mb-6",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-4 sm:mb-4",children:[(0,w.jsxs)("h2",{className:"text-xl sm:text-xl font-semibold flex items-center dark:text-white",children:[(0,w.jsx)($,{className:"h-6 w-6 sm:h-6 sm:w-6 mr-2 sm:mr-2"}),e("joinRequestsList.title")]}),(0,w.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,w.jsx)("input",{type:"text",placeholder:e("common.search")||"Suchen...",className:"w-[200px] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:h,onChange:e=>y(e.target.value)}),(0,w.jsxs)("button",{className:"p-2 rounded-md border ".concat(G()>0?"border-blue-300 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-700"," relative"),onClick:()=>m(!c),title:e("common.filter"),children:[(0,w.jsx)(_.A,{className:"h-5 w-5"}),G()>0&&(0,w.jsx)("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-600 dark:bg-blue-500 text-white rounded-full text-xs flex items-center justify-center",children:G()})]})]})]}),c&&(0,w.jsx)("div",{className:"mb-4",children:(0,w.jsx)(E.A,{columns:[{id:"requester",label:e("joinRequestsList.filter.requester")},{id:"message",label:e("joinRequestsList.filter.message")},{id:"status",label:e("joinRequestsList.status.title")||"Status"}],onApply:M,onReset:U,savedConditions:u,savedOperators:x,tableId:ke})}),(0,w.jsx)(q.A,{tableId:ke,onSelectFilter:M,onReset:U,activeFilterName:N,selectedFilterId:R,onFilterChange:(e,t,r,a)=>{A(e),z(t),M(r,a)},defaultFilterName:"Alle"}),i&&(0,w.jsx)("div",{className:"mb-4 p-4 bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded",children:i}),o?(0,w.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,w.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,w.jsx)("span",{className:"ml-3 text-gray-700 dark:text-gray-300",children:e("joinRequestsList.loading")})]}):0===W.length?(0,w.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:0===t.length?e("joinRequestsList.noRequests"):e("joinRequestsList.noMatching")}):(0,w.jsx)("div",{className:"space-y-4",children:W.map((t=>(0,w.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 shadow hover:shadow-md transition-shadow",children:(0,w.jsx)("div",{className:"flex items-start justify-between",children:(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,w.jsxs)("div",{children:[(0,w.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t.requester.firstName," ",t.requester.lastName]}),(0,w.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t.requester.email})]}),(0,w.jsx)("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(pe(t.status)),children:fe(t.status,e)})]}),t.message&&(0,w.jsx)("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-gray-700 rounded border border-gray-200 dark:border-gray-600",children:(0,w.jsxs)("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[(0,w.jsxs)("span",{className:"font-medium",children:[e("joinRequestsList.filter.message"),":"]})," ",t.message]})}),t.response&&(0,w.jsx)("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-700",children:(0,w.jsxs)("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[(0,w.jsxs)("span",{className:"font-medium",children:[e("joinRequestsList.response"),":"]})," ",t.response]})}),"pending"===t.status&&B()&&(0,w.jsx)("div",{className:"mt-4 flex items-center gap-2",children:(0,w.jsxs)("button",{onClick:()=>(t=>{if(!B()){const t=e("joinRequestsList.noPermissionEdit");return d(t),void T(t,"error")}j(t),f(!0)})(t),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md dark:bg-blue-700 dark:hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center",children:[(0,w.jsx)(S.A,{className:"h-4 w-4 mr-1"}),e("joinRequestsList.edit")]})})]})})},t.id)))}),(0,w.jsx)(ye,{isOpen:p,onClose:()=>{f(!1),j(null)},joinRequest:v,onSuccess:async()=>{D.current=!1;try{l(!0);const e=await ae.h.getJoinRequests();r(e),d(null),D.current=!0}catch(a){var e,t;const r=(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Fehler beim Laden der Beitrittsanfragen";d(r),D.current=!0}finally{l(!1)}}})]}):(0,w.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 shadow p-6 mb-6",children:(0,w.jsx)("div",{className:"p-4 text-red-600 dark:text-red-400",children:e("joinRequestsList.noPermission")})})},je=()=>{const{t:e}=(0,s.Bd)(),[t,r]=(0,a.useState)(!1),[i,d]=(0,a.useState)(null),{showMessage:c}=(0,k.A)(),{isAdmin:u,hasPermission:g,canViewOrganization:x}=(0,n.S)(),b=g("organization_management","read","page"),h=g("users","read","table"),y=g("roles","read","table"),p=x(),f=p?"organization":h?"users":y?"roles":"organization",[v,j]=(0,a.useState)(f),N=e=>{("users"!==e||h)&&("roles"!==e||y)&&("organization"!==e||p)&&(j(e),d(null))},R=t=>{var r,a;let s=e("errors.unknownError");null!==(r=t.response)&&void 0!==r&&null!==(a=r.data)&&void 0!==a&&a.message?s=t.response.data.message:t instanceof Error&&(s=t.message),d(s),c(s,"error")};return b?(0,w.jsx)("div",{className:"min-h-screen dark:bg-gray-900",children:(0,w.jsx)("div",{className:"max-w-7xl mx-auto py-0 px-2 -mt-6 sm:-mt-3 lg:-mt-3 sm:px-4 lg:px-6",children:(0,w.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-300 dark:border-gray-700 p-6",children:[(0,w.jsxs)("div",{className:"flex items-center mb-6",children:[(0,w.jsx)(o.A,{className:"h-6 w-6 mr-2 dark:text-white"}),(0,w.jsx)("h2",{className:"text-xl font-semibold dark:text-white",children:e("organisation.title")})]}),(0,w.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-6",children:(0,w.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,w.jsxs)("button",{className:"".concat("users"===v&&h?"border-blue-500 text-blue-600 dark:text-blue-400":h?"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600":"border-transparent text-gray-400 dark:text-gray-500 cursor-not-allowed opacity-60"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center relative"),onClick:()=>h&&N("users"),disabled:!h,children:[(0,w.jsx)(l.A,{className:"h-5 w-5 mr-2"}),e("organisation.tabs.users"),!h&&(0,w.jsx)("span",{className:"ml-2 px-2 py-0.5 text-xs font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded",children:"PRO"})]}),(0,w.jsxs)("button",{className:"".concat("roles"===v&&y?"border-blue-500 text-blue-600 dark:text-blue-400":y?"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600":"border-transparent text-gray-400 dark:text-gray-500 cursor-not-allowed opacity-60"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center relative"),onClick:()=>y&&N("roles"),disabled:!y,children:[(0,w.jsx)(m,{className:"h-5 w-5 mr-2"}),e("organisation.tabs.roles"),!y&&(0,w.jsx)("span",{className:"ml-2 px-2 py-0.5 text-xs font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded",children:"PRO"})]}),p&&(0,w.jsxs)("button",{className:"".concat("organization"===v?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),onClick:()=>N("organization"),children:[(0,w.jsx)(o.A,{className:"h-5 w-5 mr-2"}),e("organisation.tabs.organization")]})]})}),i&&(0,w.jsxs)("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:[(0,w.jsx)("p",{className:"font-bold",children:e("organisation.error")}),(0,w.jsx)("p",{children:i})]}),t&&(0,w.jsx)("div",{className:"p-4 dark:text-gray-300",children:e("organisation.loading")}),(0,w.jsx)("div",{className:"mt-6",children:"users"===v?h?(0,w.jsx)(A,{onError:R}):(0,w.jsx)("div",{className:"p-8 text-center",children:(0,w.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6",children:[(0,w.jsx)("span",{className:"inline-block px-3 py-1 text-sm font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded mb-4",children:"PRO"}),(0,w.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mt-4",children:e("organisation.proFeature.users")})]})}):"roles"===v?y?(0,w.jsx)(Z,{onError:R}):(0,w.jsx)("div",{className:"p-8 text-center",children:(0,w.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-6",children:[(0,w.jsx)("span",{className:"inline-block px-3 py-1 text-sm font-semibold bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded mb-4",children:"PRO"}),(0,w.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mt-4",children:e("organisation.proFeature.roles")})]})}):"organization"===v&&p?(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsx)(be,{}),(0,w.jsx)(ve,{})]}):(0,w.jsx)("div",{className:"p-4 text-red-600 dark:text-red-400",children:e("organisation.noPermissionForPage")})})]})})}):(0,w.jsx)("div",{className:"p-4 text-red-600 dark:text-red-400",children:e("organisation.noPermission")})}}}]);
//# sourceMappingURL=517.fb62b53c.chunk.js.map